{
  "video_id": "xp2oVLk2sTs",
  "channel": "DevOops_conf",
  "title": "",
  "views": 0,
  "duration": 0,
  "published": "",
  "text": "Здравствуйте меня зовут Сергей я сегодня буду помогать вести дискуссию по нашему докладу тема кажется довольно любопытная прокубер найтис правотификацию и возможно немножко про авторизацию собственно еще раз Напоминаю что вы можете задавать вопросы в чате а я их буду Александру озвучивать собственно Александр сегодня расскажет вам Привет Добрый день Ну я думаю имеет смысл начинать Да еще раз давайте пишите вопросы в чате Спасибо подискутируем в самом конце нашего доклада Еще раз добрый день Меня зовут Александр Кузьмин значит тема сегодняшнего доклада это способы аутентификации в cubernets интеграция с ldap серверами Я работаю в компании Крок старшим инженером в департаменте инфраструктурных решений и сервисов в наших проектах мы активно работаем с облаком в том числе и с облаком Крок активно используем методологию devops стараемся использовать подход инфраструкции код в котором чаще всего используем либо форму либо антибал если говорить про системы регистрации контейнеров то это чаще всего cubernet В некоторых случаях или проектах это openshift если говорить про систему диверсификации кода то это либо gitlab либо bitbucket если говорить чаще всего либо gitlapsi либо Team City Ну и Тема сегодняшняя доклада как было сказано же ранее Этот способ идентификации в комбинации поэтому про него поговорим чуть-чуть подробнее вообще сам доклад поделили на несколько частей первым мы говорим в принципе про систему авторизации Airbag которая как раз позволяет разграничивать доступ к кластец еще Она состоит как вообще расшифровывается и как с её помощью управлять э-э доступом в кластер kubernets посмотрим как представляется доступ в нативном виде и поговорим про внешнюю систему авторизации и аутентификации которая работает как Open ID Connect провайдеры такие как Dex caclock я расскажу про наш опыт работы из первым и со вторым и третьим решением какие есть плюсы и минусы у одного второго третьего решения и почему мы в какой-то момент времени отказались от одного перешли к другому вот ну и в самом конце сделаем подведём выводы посмотрим Что нового Мы узнали В конце нашего этого доклада Итак каждый пользователь кластера cubernets рано или поздно приходит к кому к такому вопросу о том как ему разграничить доступ или предоставить другому пользователю доступ в имеющийся кластер kubernates конечно самый простой способ который приходит в голову Просто отдать пользователю куб конфиг который был сгенерирован при установке кластера и в принципе Вопрос закрыт пользователь может подключаться к кластеру кабернетиз делать все что угодно создавать любые сущности управлять любыми сущностями которые уже есть и все хорошо но тут возникает вопрос Действительно ли пользователю необходим доступ ко всему кластеру Действительно ли ему нужен доступ ко всем сущностям и работать со всеми объектами Хватает ли У пользователя навыков работы с губернасом может быть ему достаточно ходить например там только в свои плоды которые подают например которые она развернула там собираетесь их логи соответственно например вообще не нужен соответственно и это будет достаточно излишне также никто не защищен от человеческого фактора когда чисто случайно можно удалить какую-то сущность и тем самым положить кластер хорошо Если там у вас используется при этом система гид у вас все манифесты хранятся в детей Вы можете быстро развернуть там дипломат который был случайно например удален или у вас используется система бокопирования там вильера и вы можете с помощью там последнего бэкапа восстановить то состояние кластера которое было нарушено в идеальном мире Конечно хорошо когда в принципе пользователь не ходит в кластер кубинете своими руками не разворачивая никакие сущности с помощью там coopsitel crate минус F и название манифеста а просто пишет свои манифесты отправляет их в Гид после этого гид автоматически сам гид уже ходит в kubernets и создаёт сущность которая была необходимо но это более такой идеальный мир или та система которая стремятся но в некоторых проектах Или например в некоторых каких-то командах это излишне поэтому все сущности в cubernoise разворачиваются привычным образом через cubestel Итак вербак вот для того чтобы позволить пользователю ограничить доступ то чтобы мог делать в cubernet использовать как раз таки airback что расшифровывается как ролл Base Access Control соответственно Airbag глобально состоит из двух компонентов один из которых называется роль или кластер роль который в свою очередь как раз таки определяет Какие действия может выполнять пользователь второй компонент это ролл-байдинг или кластеры байден который привязывают краски вышеуказанную роль пользователям группам или сервис аккаунтом вообще для самого cubernets и для кубапе в частности пользователям является не только как бы пользователь как человек который через тело отправил ему какую-то запрос любой компонент который обращается в губернатор является для него пользователями выполняет как раз таки систему аутентификации например тот же самый сервисы которые у вас развернуты в самом и которым необходимо обращаться к кубапе тоже являются пользователями cycd компоненты которые разворачивают какие-то сущности и объекты в кубинации тоже являются пользователями более того компоненты кластера такие например как cooproxy dooler Cube лет и так далее тоже являются компонентами и тоже являются пользователями для кубов сервера так вот Рыбак Чтобы проще ориентироваться к тому какой компании За что отвечает роль или кластер роль или ролл-бандик или кластер лбайтинг роль описывает Что можно делать а роллбазинг отвечает кто это может делать соответственно привязывает пользователя аккаунт или группу отличие между ролью и класть ролью и соответственно ролл-бандингом и кластер лэндингом заключается в том что роль описывает только сущности какого-то одного конкретного спейса кластер и базинг они отвечают за ресурсы всего кластера соответственно открывают доступ к сущностям вне зависимости от какого-то конкретного спейса как и все в Америку бернетиса роль не является роль и ролл-базик не является исключением они точно так же создаются с помощью ямал-манифестов здесь на слайде представлены два простых дьявол манифеста с левой стороны это роль соответственно тип кайнд роль дальше указывается имя API группы и дальше в поле ресурсы указываются ресурсы к которым предоставляется доступ по умолчанию вообще как бы доступ в cubernetics работает таким образом что изначально пользователи запрещено все и в роли Вы описываете только то что необходимо открыть какой доступ необходимо разрешить для этой роли который в будущем будет уже через ролл базинг подключена к какому-то пользователю или группе соответственно если какому-то пользователю подключено несколько ролей соответственно может выполнять все что ему разрешает любая из этих ролей в этом примере у нас пользуются только под кроме кодов здесь могут быть использованы любые ресурсы cubernetis там диплоинты сервисы ингрессы Джо бабы крон Джоб и так далее соответственно в следующем пункте мы описываем в поле verbs мы описываем то Какие действия пользователь может выполнять точнее Какие действия это роль разрешает выполнять с этими ресурсами в данном случае это gett лист и Watch также доступны и другие действия там Эдит Вью Create и так далее в следующем Ямал манифесте в роллбандинге соответственно представлен описан пример того как эта роль которая описана слева подключается к пользователю данном случае демо-юзера соответственно так как эта роль и ролл-байдинг это сущность является как бы компонентом одного конкретного нам спейса поэтому там в метода дате листинга ролл-байдинг мы указываем там Space данном случае дефолт потому что роль была создана в мсфолт соответственно в первом как бы пункте в указываем на какую роль Мы ссылаемся в данном случае та же самая которая указана слева и после этого мы в поле subjects указываем для кого подключить данную роль в данном случае у нас это пользователь и имя его демо-юзер соответственно после этого пользователь который заходит в кластер kubernets с именем Дема юзер имеет те права которые описаны в роли если никакой другой роли к нему Не подключено вообще когда кластер разворачивается изначально вас уже создана определенный набор ролей или кластерных ролей которые можно использовать для того чтобы разграничивать доступ и как бы через ролл-байдинг уже подключать к какому-то пользователю То есть например такие кластерные роли которые там с правами типа там Вью или едет они уже есть Нет необходимости заново их писать можно использовать готовые разработчики cubernets за это как бы позаботились и уже написали за вас но вместе с тем если в этом необходимость можно всегда написать свою какую-то конкретную роль который будет разрешать только то что вам нужно Подводя итоги что можно сказать что доступ ограничением доступа в кластер кабернетис является эрбак рыбак в свою очередь состоит из компонентов в роли которая описывают Что можно делать ботинга которая как бы указывает кто это может делать ссылаясь на пользователя группу или сервис аккаунт вообще основные как бы методы аутентификации это в кабинете база передача логин и пароль который практически уже не используется никем клиентский сертификат и токены либо дживити токены вот от двух последних мы поговорим чуть-чуть подробнее я вам расскажу про наш опыт работы с каждым из них в разных проектах Итак для того чтобы предоставить доступ в кластер kubernetice с помощью клиентского сертификата необходимо выполнить или пройти определенный алгоритм действий сначала Вам необходимо создать закрытый ключ rsa после этого создать запрос на подпись этого сертификат сгенерировать CSR после этого подписать CSR в центре сертификации cubernights соответственно Если вы разворачивали кластер cubernets и центр сертификации Куба у вас генерировался также то Нужно подписать в нем Если вы использовали какой-то свой центр сертификации то Подписывайтесь в этом центре сертификации запрос после этого необходимо сгенерировать куб конфиг для пользователя потому что по большому счету когда пользователь уже будет обращаться к кубе серверу ему нужен будет большим с большей долей вероятности ему понадобится как бы куб конфиг вне зависимости от того он будет обращаться через команды выполнять или он будет пользоваться каким-то сторонними приложениями например такими как Lens в любом случае ему понадобится Поэтому нужно будет создать конфиг И после этого как раз таки создать роль или кластер роль либо использовать ту которая уже имеется в кластере и привязать эту роль кластерную ролик пользователю на первый взгляд кажется что много пунктов которые нужно сделать их целых 6 с другой стороны все это дело Вполне себе можно автоматизировать с помощью антибула небольшой там роли на ансебе которая принимает на вход файл ответов типа там имя пользователя для которого необходимо сгенерировать ключ и так далее после этого все эти этапы будут выполняться автоматически после запуска этой роли на ансевли и куб конфликт тоже будет автоматически после как бы того как эта роль на себя отработает вы на выходе получите готовый куб конфиг плюс этого метода заключается в том что вам нужно никаких дополнительных объектов или сущности разворачивать в классе берете это то что может работать уже из коробки из кластера Куба это что работает то как бы работает в нативном виде минус здесь заключается в том и мы как бы от него отошли в тот момент когда мы поняли что хорошо мы на генерировали этих сертификатов добавили их в куб конфиг привязали их королям но нам хорошо бы понимать вообще Какое количество этих сертификатов мы сгенерировали и какое количество пользователей имеют доступ в cuber может ходить и использовать эти сертификаты плюс ко всему они там заканчиваются срок действия их необходимо будет заново продлевать и это как бы явилась тем что подтолкнуло у нас к изучению вопроса про развлечение доступ на следующий этап мы посмотрели что чаще всего в проектах уже есть какая-то система Я видел даб сервера как правило это либо Microsoft Active directory либо это фрипа соответственно пользователь у нас уже есть и отдельно вести какую-то таблицу каким пользователям мы выдали доступ в кластер Кубани надо потому что пользователи уже есть вот в сервере каталогов велдап-сервере соответственно оттуда можно взять и первое кого мы увидели это был Dex dext решал этот вопрос потому что Dex это сервис провайдер который работает на базе грубо говоря Опа Найди Коннект провайдера который позволяет аутентификацию в различных бэкендах в различных сервисах в том числе и в cubernets то есть мы можем использовать наш ldap-сервер freepu или Microsoft Active directory и сделать так чтобы пользователь который уже там заведены используя там свой логин и пароль могли бы выполнить авторизацию и получить свой куб конфиг для того чтобы в дальнейшем конфигам прийти в кластер кабернетиз в кубапе и сказать здравствуйте Я такой-то пользователь пожалуйста Пусти меня вот помимо того что У нас появился Dex У нас появился еще такая прослойка которая называется gangway gangway это некий такой дашборд краски который позволяет автоматически генерировать куб конфиг тут есть такая особенность о том что связка декса и gangway Ну либо кейк Лока с Gan в любом случае они она работает только по https соответственно Вам необходимо позаботиться о том что вам нужны будут действующие сертификаты которые вы привяжете к сущностям НГС которые будут ссылаться на ваши имена То есть например там у вас будет URL для декса в сущности Ingress использовать dex.mi company.com и например gangway.me company.com вот для этих URL запросов для этих адресов которые используются в ингрессах в самом агрессии нужно будет добавить сертификат соответственно сертификаты должны быть валидными и сам кластер комбинации тоже должен им доверять один из вариантов того чтобы он был доверенным это либо доверить корневой центр сертификации в куб либо Как вариант просто подписать эти сертификаты тоже корневым центром сертификации самого cubernets так вот когда пользователь выполняет аутентификацию авторизацию через Dex через в принципе опыт провайдер в данном случае через алгоритм выглядит следующим образом пользуйся сначала как я уже сказал попадает на gangway потому что нам нужно в конечном счете от того что мы получили автоматически сгенерированный куб конфиг который будем использовать Соответственно dashboard gangway по умолчанию выглядит примерно следующим образом он кастомизируется можно добавить свой логотип можно добавить какие-то свои надписи оставить вообще Одну кнопку scining остальное все удалить оно все кастомизируется соответственно пользователь попал на gangway guys средиректила его на Dex вот так выглядит по умолчанию там окно декса в котором пользователь вводит свой доменный логин и пароль следующим шагом Dex идет на ldap-серверы и проверяет валидность введенных данных действительно есть такой пользователь и пароль тот который он вел а не валидный если они валидный то Dex возвращает обратно в gangway три токена Access token Refresh token и ID token по поводу токенов ситуация следующая пользователь В общем эти токены будут переданы в последующем куб конфиг и после Когда будет выполнять аутентификацию будет ее выполнять с помощью этих токенов смысл токенов в следующем что акция стоки на токены который позволяет выполнить аутентификацию кубов сервера А рефреш токен - это токен который нужен для того чтобы можно было автоматически продлить жизнь действия обновить токен который истек потому что аксесток по умолчанию работает только 24 часа после этого он становится за экспоренном В общем у него истекает срок его действия соответственно необходимо получить новое вот для того чтобы получить новый токен и не повторять все вот эти вот четыре шага для этого используется Refresh Talking если токен у вас закончился через сутки да вы например там используете там куб ситил соответственно выполнять Потс сегодня выполнили у вас все отработало 24 часа Не прошло 24 часа прошло вы делал Потс у вас токен ваш уже закончил свой срок действия но в этом случае автоматически прозрачно для пользователей этого не видеть происходит обновление токена с помощью токена Надеюсь не запутал а ну и соответственно после того как Dex все эти токи навернул в gangway gangway возвращает пользователю автоматически сгенерированный куб конфиг и возвращает ему возможность скачать возможность скачать готового куб конфиг и набор команд которые пользователь может выполнить локально на своем лэптопе и соответственно сгенерировать этот куб конфиг автоматически вот таком виде это выглядит то есть gangway справа кнопка дала куб конфиг а снизу набор команд и там корневой сертификат который там использовался при генерации вот после этого пользователь используя полученный Cube config отправляет купчицел запрос через субсидел запрос в кубапе сервер кубапе сервер проверяет идет в Dex проверяет о том что токены валины с которыми к нему пришли есть не все хорошо и если хорошо кубоксера возвращает ему ответ результат это все хорошо оно работает достаточно стабильно и оно позволяет использовать уже готовую учетную запись пользователей из того же самого элдапа и закрыл наши вопросы сама конфигурация Dex достаточно простая Dex конфигурируется с помощью конфигмата все параметры которые указываете для Dex там адрес вашего лдап сервера параметры пользователи с которыми подключиться посмотреть инвалидность учета которые пришла для того чтобы там указать в каких группах необходимо искать пользователей которым доступ разрешен и так далее Все эти параметры указываются в конфиг мапе никакого интерфейса у декса нет достаточно в этом виде прост чем наш следующий продукты которые мы поговорим на следующем слайде среди минусов декса можно отметить то что у него чуть меньше поддержка различных и зачастую у нас бывают проекты Когда разработчики в своих микросервисах уже используют кейк-лок и соответственно для того чтобы нам не городить рядом еще один как бы продукт который выполняет по сути те же самые действия Мы перешли с декса в кейк-лок мы заговорили про киклок перейдем к нему как я сказал киклок это тоже является системой опыт провайдером соответственно алгоритм авторизации аутентификации пользователя будет такой же как и у Dex за исключением того что вместо декса на слайде в середине возят кейк-лок и он клок не всегда ходит в л'дап и клок имеет свой веб-интерфейс и клок имеет базу данных соответственно всех пользователей которые проходит валидацию киклок складывает в свою базу данных Они каждый раз ходят в ldap-сервер и не спрашивает у него валидно ли данные или не валидный как я сказал киклок уже имеет web-интерфейс все параметры которые вам нужно сконфигурировать выполняя с помощью web-интерфейса Key Clock поддерживает очень большое количество бэкендов помимо этого как уже я тоже об этом сказал умеет работать с внешней базой данных по умолчанию он использует свою базу данных которая называется m.2 если я не ошибаюсь Но вместе с этим Его можно подключить какой-то другой внешней баз данных в том числе и постгрыз Для нас это актуально потому что во многих проектах наши разработчики или в принципе наши проекты уже используют в себе базу данных в данном случае это постгриз соответственно это тоже является плюсом к тому чтобы нам использовать и клок потому что нам не нужно рядом городить какую-то еще одну базу данных поднимать ее обслуживать и ее поддерживать потому что а с точки зрения установки этих компонентов что кей-клок что Dex устанавливаются они там с помощью headcharte либо скачиванием готовых Ямал манифест разворачиванием в самом кластере когда мы еще предпочтение киклоку например в тех проектах Когда нам необходимо реализовать singlesione система то есть чтобы пользователь имеет свою одну единственную учетную запись которая находится например в той же самой имел возможность по своими учетными данными попадать не только там в кластер кубинете но и мог авторизовываться в графа не мог авторизоваться в промете мог заходить там в gitlab и так далее в этом случае мы используем киклок и настраиваем сингл сайон с помощью него вместе с тем Kick lock вместе с тем киклок имеет тоже свои ограничения и минусы и самый такой особенной минус на мой взгляд это тоже Что является его сильной стороной Это то что он имеет очень большое количество подержанных провайдеров за счет этого это такой монструозный комбайн погрузиться в который намного сложнее чем в тот же самый Dex и управлять и администрировать и настраивать декс намного проще чем киклок человек который никогда в жизни с ним не работал то есть вот если начиная знакомство с какой-то внешней системой авторизации аутентификации и в принципе опытный провайдером каким-то то Dex в этом плане намного проще чем Key Clock keclock имеет там с одной стороны плюс то что он умеет свой веб-интерфейс с другой стороны киклок имеет свои там определённые определенную определенную терминологию которая как бы нужно изучить почитав какую-то документацию Прежде чем начать им пользоваться Ну в принципе порог вхождения в kicklock он несколько выше чем например у того же самого декса выводы мы пришли к выводу что в принципе все три подхода которых я сегодня рассказал это с помощью сертификатов с помощью dext с помощью kicklock они все имеют место быть в зависимости от окружения и от проекта в котором вы хотите разграничить доступ пользователям кластер Куба и какие цели вы преследуете То есть если у вас какая-то небольшой проект у вас не планируется частое добавление и удаление пользователей вам нет необходимости следить за принципе пользователями которые ходят в классе Потому что немного и при этом у вас ограниченные ресурсы в самом кластере то нет необходимости разворачивать там Dex или можно автоматизировать с помощью сертифика можно закрыть этот вопрос с помощью сертификатов сами сертификаты автоматизировать с помощью там например того же самого антибала потому что дополнительные сущности которые все равно в каком-то виде будут нагружать ваш будут съедать ресурсы вашего кластера плюс ко всему это все равно дополнительная обвязка которая в любом случае требует того чтобы вы за ней следили вы ее мониторили и вы поддерживали ее в рабочем состоянии потому что иначе если она перестанет работать то и соответственно пользователь сгенерировать новый куб конфиг не сможет или если у него закиспарился токен получить он новый не сможет потому что Dex или Lock прилегли вместе с тем возвращаясь к вопросу разработчиков зачастую бывают моменты когда в проекте уже используется система Dex или соответственно рядом разворачивать аналогичный продукт только потому что нам захотелось вместо использовать Dex потому что он прочь в конфигурации Тоже кажется излишним поэтому тут вопрос еще в том какой провайдер используется в среде или в вашем окружении Но самое главное чтобы доступа всё равно был разграничен и чтобы не давать администский клуб конфиг направо и налево всем пользователям чтобы они ходили под одной четкой и что-то там делали вот в общем ссылки на документацию здесь представлены в qr-кодах на Dex документацию документацию кей-клок и на документацию самого cubernetis про сам ербак как он работает на что он основан вот если какие-то вопросы можете задать их мне на почту Например если мы не успеем на них ответить ли вы еще не написали этот свой вопрос к нам в чат который мы сейчас зачитаем вот всё Да спасибо Александр на самом деле довольно любопытно Я как человек который нежно любит кинг-клак да и в восторге от его инженерных интерфейсов Ну вот да Я поэтому и сказал что Кей клок имеет такой достаточно высокий порог вхождения нужно посидеть почитать и поразбираться в его терминологии в том как он работает на самом деле у нас есть первый вопрос из чата так Видимо это от Антона не буду зачитывать фамилию на всякий случай потом спрашивает А что делать если есть несколько ударов серверов Можно ли тут прикрутить Dex да Можно прикрутить что Dex что Key Clock единственная особенность в том что что киклок на вход принимают URL Имя вашего Lab сервера соответственно через запятую два указать не можете или больше но это вопрос вполне можно решить с помощью DNS записи соответственно указывает на два сервера в конфиге что декса что такие клок вы указываете вот это DNS ими и оно всё прекрасно работает Отлично Можно тогда еще чуть подробнее Да что такого интересного Ну дал вам например кейко Ок что не давал декс но как я уже сказал в проекте в котором нам нужно было реализовать согласован аутентификацию чтобы пользователи ходили в различные сервисы которые развернуты в кластере cubernets помимо сервисов которые там развернули разработчики потому что они используют помимо этого нужно было еще и так чтобы как я сказал пользователь мог возможность ходить по своей учеткой там в прометеос залогиниваться чтобы пользователь мог заходить в графа но чтобы пользователь мог заходить в gitlab вот со всеми этими бэкэндами в том числе разработчиками со всеми этими сервисами прекрасно работал клок поэтому мы на него и перешли мне кажется чтобы стать таким неким стандартом я думаю что да что киклок это такой большой музрозный комбайн который поддерживает большое количество бэкэндов и позволяет выполнять аутентификацию авторизацию авторизацию из кучи разных мест куча разных целевых мест поэтому Key Clock Да все больше больше набирает популярность чем DEX Но вместе с тем декс более такой простой лаконичный и намного проще его развернуть и запустить Спасибо на самом деле мне кажется мотивация Почему Dex Почему кейк Ок Она очень хорошо раскрыта была спасибо Мне кажется эта мотивация что несколько решений одновременно о том что есть глобальная задача чтобы взять и разграничить пользователей в кластере решить ее можно несколькими способами вот я рассмотрел три и то наверняка есть еще какой-нибудь инженер который найдет четвёртый способ как это можно сделать пятый и так далее понятно что первый наверное совсем для таких простых кластеров но у меня тут на самом деле такой дополнительный вопрос еще раз напомню что можно задавать вопросы в чате а что устойчивость этого решения потребуется ли она вообще с отказоустойчивостью ситуация такая что данные хранятся если говорить про Dex то весь конфиг у него хранится в конфиг мапе Поэтому если ваш пот с дексом упал но ничего страшного он переразвернется заново дипломом и все конфигурации всю свою конфигурацию подхватят из этого конфигмата и всё хорошо Главное чтобы конфигма похоронился не только в etcd cubernets но ещё где-то у вас был в какой-то ещё среде лучше всего чтобы это было какой-нибудь гид вот Ну да А если говорить про кейк-лок то тут как я уже говорил какие кнопки используют базу данных для хранения всех своих конфигураций в том числе пользователей и так далее Поэтому если под скидлоком тоже станет ничего страшного не будет он при подключен своей базе данных и опять-таки все данные оттуда мотивация базу данных брать это же ещё один компонент который компания Да но с другой стороны если DX например для того чтобы выполнить там валидность учетных данных от пользователя пойдет в ldap серверы проверят там то при добавлении ldap-сервера в configmap в kake lock кивок еще отдельный параметр который отвечает за чистоту синхронизации пользователей из ldap-сервера соответственно когда пользователь пытается первый раз выполнить авторизацию в человеческий клок соответственно не пойдет сразу сначала сходит свою базу данных посмотрит если у него пользователи или нет валидный или нет Если только нет он сходит на лбу сервер нет вернёт что извините данные инвалидны вот то есть как бы в этом случае k-lock как бы меньше нагружает сервер и каждый раз не ходят к нему не спрашивает а вот это валидные данные А вот эти данные инвалидные вот эти ванны оно хранится у себя в итоге могут быть некие задержки но определенное да с другой стороны Да опять-таки наличие внешней баз данных это еще один Аспект который вам как инженеру нужно учесть в том что вам необходимо мониторить и отслеживать работоспособность этой базы данных потому что база данных э встанет в нерабоеспособном состоянии то и кейковок соответственно тоже работоспособным не будет пока вы не почините это его компонента Ну вы уже говорили про это то что этот некий такой элемент фудзинга Да по сути это решение Вы еще и для пользователей настраиваете и для себя поэтому можно потренироваться на себе Ну да да А по поводу отказа устойчивости решение Я так понял В принципе ничего не мешает это засунуть балансер но как вариант чтобы более там одного для обработки Как вариант да ну и плюс ко всему то же самое клок может не обязательно его разворачивать в виде контейнеров в самом кабернетиза это может быть внешний блок который добавлен в который добавлен кластер кубинете То есть это решение не Обязательно должно быть реализовано в виде контейнеров в самом классе Хорошо хорошо спасибо Ну пока Вопросов нет у меня тут задам еще один лично меня интересующий А что с настройкой вот этой инфраструктуры с настройкой Dex настройкой кейковок то есть ну не ввела же вы клок его настраиваете Ну по крайней мере хочется верить ноги клако краски настраивать через UI то есть не рассматривали вы никакие другие варианты Как можно еще по-другому сконфигурить его нет нет это это вопрос для наверное отдельного доклада или дискуссии по изучению и по его по его изучению В общем Хорошо хорошо Ну да как кажется инфраструктура как кот для такой инфраструктурной задачи отлично Да задавайте я озвучу да я иди да это ID Talking дайте еще раз озвучу вопрос Это просто токен это ID токен просто уникальный айдишник этого самого токена токен который используется для обновления токены которые используются для авторизации в кубе хорошо Так еще вопросы Да конечно ролевая модель но как я сказал при развертывании кластера определенных определенный набор ролей уже есть созданный который можно использовать соответственно Если те роли которые уже предустановлены закрывают ваши задачи представляете необходим Вы можете использовать их если этого недостаточно то соответственно необходимо создать отдельную роль либо кластерную роль и к ней уже тут может быть какой-то уточняющий вопрос может быть речь про то чтобы иметь какую-то систему для управления этими ролями вне конфигов Да совершенно верно да то есть видимо речь Да вот как раз про пользователей про группы не затронули Да как бы в конечном счете в случае с кейк-локом и с дексом все правильно они как бы они вам на выходе дадут сгенерированный куб конфиг Но вместе с тем вам помимо этого все равно в самом кластере Куба нужно создать роль которая указывала что там пользователи которые находятся там в одесной группе например инженеров имеют следующие права и через там ролл-бандинг эту группу адешную как бы сдружить с ролью которая предоставляет необходимое разрешение тут такой момент что мы говорили про аутентификацию авторизации как бы есть два понятия про аутентификацию авторизацию аутентификация это когда пользователь проходит проверку на то кто он есть что его логин и пароль валидный механизм авторизации это уже как бы следующий этап этап Когда происходит проверка то какие пользователю можно делать действия после того как он прошёл аутентификацию то есть вот если чуть глубже и дальше по поводу ролей да то после того как пользователь прошел аутентификацию и получил свой куб конфиг тут уже используется роль которая как раз таки и разрешает выполнять те или иные действия Окей тут наверное можно порассуждать на тему Что если объекты будут находиться тоже в удаве Да сущности cubernetis Ну да и разгрели Ну давайте это за скобками плюс ко всему тут уже так если еще вопросы если нету то я предлагаю закончить все вопросы можно задать Александру компании вот на почту про который Александр говорил да всем спасибо"
}