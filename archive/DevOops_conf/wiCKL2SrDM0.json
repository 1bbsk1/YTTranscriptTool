{
  "video_id": "wiCKL2SrDM0",
  "channel": "DevOops_conf",
  "title": "",
  "views": 0,
  "duration": 0,
  "published": "",
  "text": "добрый день я не ожидал что будет так много все прямо при комбинации хотят узнать бен меня зовут кусков ван и я собираюсь рассказать доклад на котором я буду как защищать губернатор так и ругать его поэтому я назвал его не в квадратных скобках последние два листа работу у меня так или иначе связан с кабеля the sun я и впуск бойцы в машину зон работал в инфра командах и куда-то с мы работаем трогаем очень плотно плюс виду должен подкаст мы сегодня довольно плотненько идем по времени очень много слайдов что немножко мигает очень много слайдов поэтому давайте вопроса в самом конце если они будут сперва я пробегусь вообще вкратце по области почему это полезно почему это важно для многих почему этот хак возникает потом расскажу про наши вот использование технологии ну и потом кратенько выводу слайде можно сказать скачать прямо сейчас там будут примеры с конфигами если хотите можете сфотографировать и закачать особенно если вы не говорите по-русски там хотя бы они на английском и хотя они не поймут я не буду строго всем говорить что вот обязательно используйте q вернет нас есть и плюсы и минусы у губернатора поэтому если вы пришли сюда искать минусы вы их найдете соответственно перед вами в доме смотреть только на плюсы смотреть только на минус или в целом смотреть на все вместе плюсы меня будет помогать показывать сам анкет и черная кошка будет перебегать дорогу когда у нас есть минус и так почему вообще произошел этот hyip почему технология x лучше чем y в кубер нетто с это точно такая же система и существует их гораздо больше чем 1 то есть по 5 шеф in seoul и дышите реформа вот это все и мой любимый саша он всегда помогает мне сейчас зачем не переходить куда-то я считаю что критериев много но самых важных я самый важный выписал здесь то есть во первых это время от коммента до релиза это очень кратно хорошая оценка и ребята из экспресс 42 небольшие эксперты при подлете подойдите к ним а не объясняя почему они выступают здесь автоматизация автоматизация сборки автоматизация вот всего пай плана это очень хорошая вещь и она не может быть как-то перехвалил она на самом деле помогает континента грешен континент deployment и конечно же сколько усилий вы потратите на все то чтобы вот это все сделать то есть все можно писать нас м 3 как я говорю то есть систему deployment а то же но удобства это не добавит вкратце про кабинетов я наверно рассказывать не буду все должны знать вы знаете что это такое я немножечко буду касаться этих областей дальше почему это важно для разработчиков для разработчиков важна повторяемость то есть если они написали какое-то приложение запустили тест она будет работать и у вас и у соседа из продакшене во вторых стандартизированное окружении то есть если вы здесь изучили cabernet из вы пойдете соседей у компании есть кубе раз там будет все та же самое упрощение процедуры тестирования континиус интерфейс и он это все не прямое следствие использования кубинцам и сторону это упрощает задачи поэтому становится все удобнее для инженеров гораздо больше плюсов во-первых этой мутабельные инфраструктуры во вторых инфраструктура как код который где-то хранится и дым патент ность возможность добавить или с одной кнопкой об коты релиза все происходит достаточно быстрая и интроспекция система достаточно удобная то есть в конечно все это можно сделать и в вашей системе написаны на коленке но вы не всегда можете это сделать правильно отлично вот в кабинете это уже реализовано чем куда гнатов не является и что он не позволяет делать есть очень много заблуждений этот счет то есть во первых начнем как с контейнеры то есть интернет с работой полевых контейнеров контейнеры это не виртуальной машины это не легковесной виртуальной машины это совершенно другая сущность до их легко объяснить с помощью виртуальной машины что это как будто бы легкие виртуалке но на самом деле нет это совершенно другая концепция и надо понять и принять во вторых кабинета с не делает ваше приложение более защищенными они он не делает их автоматически эскалирует и cabernet из для того чтобы запустить надо сильно постараться то есть как бы не так что нажал кнопку и он запустился работает автоматически нет не так то есть будет боль наш опыт вот тут саймон как немножечко все поломал и мы хотим чтобы вы им и и все остальные не ломали ничего то есть как можно больше смотрите по сторонам и вот наша страна во-первых губернатор не ходят в одиночку то есть когда вы строите вашу структуру который будет управлять полностью релизами дипломантами вы должны понимать что кабинета set 1 кубик от таких кубиков должно быть 100 и для того чтобы это все построить нужно это все сильно изучить отец новенькие который будет приходить вашу систему они точно также должно быть ведь этот больших так изучать этом объемный огромный объем информации и более того cabernet не единственный важный кубик есть много важных кубиков вокруг без которых системы работать не будет то есть нужно очень сильно заботится об отказоустойчивость не только губернатор но и всего остального окружения из это минус минус q dignitas у система не простая система сложной нужно много заботиться казалось бы нажал кнопку спина вы или нет все не так но здесь есть и плюсы то есть если человек как я уже говорил изучил кубер на в одной компании он пришел другую компанию и у него не станут волосы дыбом из-за системы видов которые там используется нет там все то же самое что у него была до этого с течением времени когда купил этот все большее пространство захватит переход людей обучение людей будет все более простым из это плюс мы используем home home это система которая строится по верху cabernet а сам эта система напоминает пакетный менеджер то есть вы можете нажать кнопку сказать я вот хочу установить вин в мою систему точно также может нажать кнопку их и сказать этом хочу установить что-то в мойку burner да она работает давно автоматически закачает автоматически запустит и все будет работать он позволяет работать дополнительно с плагинами у него клиент-серверной архитектуры и мы рекомендуем если вы будете его использовать запускать сервер на каждый нами space то есть это изолирует на не спейси друг от друга и поломка в одном на экспрессе не приведет поломки в другом на самом деле система очень сложная да что такое у нас в проектором системы сложная система которые теоретически должно быть абстракции более высокого уровней более простой более понятной она на самом деле нисколечко не делать в мире понятнее и я на примере конфигов это покажу и за это минус а давайте сравним конфиги то есть скорее всего у вас тоже есть какие-то конфиге если вы запускаете в продакшене вашей системы у нас есть своя система которая называется бумер мы так назвали не знаю почему но она составляет состоит из папито шеф принцип лочира формой и все остальное и там большие флаконы давайте поглядим как это работают вот премьера конфигурации то есть это пример реально конфигурация она сейчас так работает в башне что здесь мы видим во первых мы видим где запускать приложения во вторых мы видим что надо запускать и в-третьих мы видим каким образом это надо подготовить к запуску то есть в одном флаконе уже смешанные концепции однако если мы посмотрим дальше из того что мы добавили наследование чтобы сделать более сложные конфиге нам пришлось это сделать наследования средства мы должны посмотреть а что находится в конфиге командам на который мы здесь ссылаемся вот плюс мы здесь добавляем настройку сетей мы добавляем настройка прав доступа планирование нагрузки то есть в одном конфиге который нам нужен для того чтобы запустить реальное приложение в кодак с ним и смешиваем там кучу концепции и все это в одном месте это очень неправильно это очень сложно и за это большой плюс куда гнета со давайте сначала посмотрим потому что в нем вы просто определяете что запустить и все потому что у вас настройка сетей была выполнена при установке кубер нетто со настройка prodigy ning всего он решается с помощью докера то есть у вас произошла как бы инкапсуляция в данном случае и все эти проблемы каким-то образом разделились в данном случае в конфиге есть только ваше приложение больше нет ничего и за это плюс однако давайте посмотрим внимательнее здесь у нас есть только одно приложение только deployment для того чтобы она заработала на самом деле нужна куча всего еще во первых нужно определить сервиса каким образом нам даст у подсака этой системе во вторых нам нужно определить секреты конфиг map и доступ к лот балансиром и плюс не забывайте что у вас есть несколько окружений то есть весь продакшн states and development все это вместе составляет не вот этот маленький кусочек который от этого показалось составляет огромный набор конфигов это на самом деле сложно за это минус холму шаблон для сравнения тоже холо шаблон на самом деле полностью повторяет губернаторские шаблоны то есть если у вас какой-то файл в кубе на тесте с определения deployment а то же самое будет в холме просто вместо конкретных значений для конкретного окружения прибывшим стейджинг у вас есть там как это шаблоны который поставляется из values то есть у вас есть отдельно шаблон и отдельно значение которые должны подставиться в этот шаблон вот конечно же вам нужно определить еще дополнительно кучу всякой инфраструктуру для самого холма при том что вас в кудрин эта масса config file of который вам нужно перетащить в целом вам еще для холма дополнительно нужно какие-то конфиг-файл а установите это конечно очень непросто за это еще минус 1 ну то есть система которая должна упрощать она на самом деле усложняет для меня это явный минус 1 до либо настраивать что-то еще либо не использовать ну давайте пойдем по глубже мы недостаточно глубоко во первых как мы работаем с мастерами мы решили что я когда прочитал изначально статью от гугла борг amiga и куда mentos в нем они очень сильно защищают концепцию что надо иметь один большой кластер я был тоже за эту идею в конце концов мы ушли от этой идеи в результате наших штор of мы используем четыре разных властями первый кластер это и ту и который мы используем для тестирования самого кудрин атоса и для тестирования скриптов которые разворачивают окружении плагина и так далее во вторых конечно же продакшн и стейджинг это стандартная концепции вы понимаете и в третьих это админ кластер в котором у нас все остальное сгрудилась в частности у нас есть там seo и и похоже что из-за этого сирота да нет ластика будет самым большим всегда тестирование очень много тестирование пока нет тут истирания на мертв и все делают кучу комета почему-то не понятно почему у нас поэтому все классе я просто громадный мы пытались посмотреть на курок но не стали его использовать по следующим причинам во первых у них вовнутрь и клад фармить и литера форма итоге другое позволяет очень плохо понимать что находится внутри стэйта и из-за этого возникают проблемы при обновлении то есть когда вы хотите как-то плохо но сегодня когда вы хотите обновить настройки вашего кабинета с обновить и ярче или еще что не такое вы можете натолкнуться на проблему что обновление происходит не таким образом не в той последовательности есть какие-то рейсы непонятные не поэтому есть большая проблема стабильности мы поэтому решили не использовать король и это минус твой как доехала во вторых когда вы используете убегает от вам нужно откуда-то скачивать образом это может быть ваш внутренний источник репозитории или может быть внешне если внутренний то у вас есть свои проблемы во первых я использую рекомендую использовать да как дистрибьюшен потому что это она стабильный она работает и и сделал docker и сек но вас арена есть высокая цена поддержки т.е. для того чтобы она работала вам нужно сделать ее отказоустойчивый ну потому что это единственное место откуда получается данные для работы вашего приложения представьте что сам отвесный момент когда вы нашли богуна продакшне вас только и позиции упал все вы не можете обновить приложение то есть вы должны сделать его отказа устойчивым причем бат всех возможных проблем которому на которой могут произойти во вторых если у вас есть много команд у каждой свой образ я недостаточно часто или эту вас этих образов накапливается очень много и очень быстро вы можете просто убить свой долг дистрибьюшен и вам необходимо делать какую-то чистку удалять какие-то образы и доносить эту информацию для пользователей когда и что вы будете чистить в третьих при больших образах ну скажем это не не не исключительная ситуация и у нас примерно то же самое если у вас есть монолит то скорее всего вы размер вашего образа будет очень большим а представьте что вам надо загоните там скажем на 30 not 2 гигабайта на 30 not посчитайте какой поток как быстро но скачается на все эти ноты то есть хотелось бы чтобы ты нажал кнопку вот так вот я ну сразу релизе лась нет нужно сначала дождаться пока но закачается надо как-то ускорить эту закачку все это скачивается с одной точки можно использовать внешние пози торе и при внешнем репозитории есть те же самые проблемы с горбач коллектором но там это делается автоматически чаще всего мы скажем используем клей и там есть прямо на стройке но в случае внешнего репозитория это же какой-то внешней сервис соответственно большинство отказов там публичная и для того чтобы не было публичных образов воскресе будут они приватные вам необходимо доступ как-то обеспечивать соответственно вам нужно секреты в секреты добавлять права доступа на эти образы все это специально настраивать конечно это можно наполовину автоматизировать но случае скажем локального запусками не куба на своей локальной системе вам все равно этот мини куб надо настраивать это все делается я просто про дополнительные сложности для установки губернатором используем корпус корпус это очень хорошая система мы вообще очень ранние пользователи мы начали им пользоваться когда они еще в блоге не написали он не до конца поддерживает главой с хорошо работать с debian он умеет конфигурировать автоматически хавела белых для мастернод кудрин эта цель работает с аддонами у него есть 0 способность делать нулевую 0 время простой во время обновления кубер на это сам делает это просто роулинг апгрейдом вот все эти возможности прямо из-под из коробки нечего делать настраивать не надо прямо вот сразу большой жирный плюс кокс отличная система сети вот по ссылке 23 вы можете найти как много есть вариантов для работы для настройки сети в культурно россия их реально много у них у всех свои достоинства недостатки и cops поддерживает только часть из этих вариантов вот ну можно конечно надо настроить чтобы у него была чтобы у него была чуть побольше вариантов чтобы он другие возможности съесть через стены работал но мы рекомендуем использовать стандартные потому что они во-первых тестируют станете самим сообществом и скорее всего стабильно и вот мы решили использовать калика он прям с нуля заработал хорошо без какого-то большого количества проблем он использует bgp поэтому он быстрее чем у популяция он позволяет делать ай кен ай пи и поэтому позволяют работать с мультик ладами и для нас это большой плюс мы хотим выйти мультик лаут при этом калика хорошо поддерживает градус куда-то сам потому что он с помощью метод позволяет разграничивать график по меткам курица получается из-за это плюс то есть я не ожидал что система а то как бы когда мы с 32 литер 1 к 12 было очень давно и я не ожидал что калека дойдет до состояния когда вот включила мы работают и реально без проблем high visibility как я говорил магеллан через капс у нас три мастерноды можно 579 сколько угодно мы используем три мы пока если сидим на эти сиди версии 2 там был бак для перехода на этих ядер все три теоретически это позволит ускорить какие-то процессы на не знаю я сомневаюсь все работает то есть как бы хавела белая для мастернод отработают восстановление после сбоев здесь хитрый момент то есть из того что у нас есть кластер это и на которую мы экспериментируем со всеми нашими скриптами автоматически там накатка существует через семь мы считаем что у нас есть какая-то защита вот от совершенно неправильных действий но для каких-то специальных и сложных релизов мы делай на всякий случай снапшоты валим of master of и на этом дополнительно и восстановление только бы мы не делаем бэкап и каждый день скажем такого у нас нет аутентификации это всегда вечный вопрос в модификации то есть мы в кубинцы используемых баг это доступ основаны на ролях он намного лучше чем а баг который был до этого если вы его настраивали вы понимаете о чем я там посмотрите на конфиге удивитесь мы используем декстер от провайдера по найди который откуда из какого-то источника данных выкачивает всю информацию и для того чтобы человеку логинится в губернатор на самом деле есть два пути ну по крайней мере я 3 не вижу пока это либо вы вы должны как-то прописать в клуб конфиг куда идти и какие толкин и что что человек может делать какие у него роли вот для того чтобы это сделать ему надо как-то этот конфиг получить и я вижу два пути первые то вы идете заставляйте пользователей ти в юань там с помощью гугла или еще чего не логиниться это самый простой способ получает конфиге копируют их копипастить ipconfig и потом работает вот это не очень удобно мы так работали когда ты раньше но мы против постепенно перешли на то что для того чтобы залогиниться человек заходит в консоль и я могу продолжать и дальше у меня есть еще один мы не должны вы видите ничего не выйти он заходит в консоль нажимает на кнопку логиниться и и не автоматически конфигурируются эти конфиги и складываются в нужное место то гораздо более удобной вот так вот решил действовать в качестве источника данных для dex как я уже говорил мы используем active directory по историческим причинам и у многих я думаю тогда вот что полезно что губернатор позволяет вот через всю эту структуру аутентификация авторизации притащить информацию о группе информация агавы транслируется в нами space и роли то есть это довольно удобно ты сразу человек как ограничиваешь куда он имеет право заходить куда не имеет права заходить и что или ведь он может а куда смотреть не может это очень удобно доступа и ws чаще всего людям нужен я имею ввиду если у вас есть пока нет куберы тасс а у вас есть машину на машине запущенное приложение казалось бы вот все что нужно получать виде логов как-нибудь где-нибудь смотри все но нет то есть это на самом деле удобно когда человек может зайти на свою машину где работает его приложение посмотреть с точки зрения кудрин эта совку bernette оси все работает в водах контейнерах и у крепко теле есть команда зайти в контейнер и посмотреть что там происходит поэтому на и ws инстанции в принципе нет необходимости ходить поэтому мы запретили вообще доступ для всех queen in free команды то есть только инфра команда может ходить на и ws инстанция более того мы запретили долгоиграющий админский ключи то есть вход туда осуществляется через ролик то есть если у меня есть возможность через роль и воспользоваться ролью админа той админ если нет то нет с помощью это плюс мы добавили ротацию ключей все это удобно и конфигурировать с помощью есть такая команда это будет суда этот проект на гитхабе прям очень рекомендую позволяет работать как с суда командой то есть вы можете админские права добавлять себе в консоли очень удобно очень хорошо и квоты очень хорошая штука в кабинет оси работать прямо из коробки вы ограничиваете какие-то namespace и скажем по количеству объектов по памяти или по циpкa который она может потреблять то есть я не знаю как бы я считаю что это важно и полезно всем мы пока не дошли до циpкa и памяти мы пока используем только по количеству объектов но в конечном и это все добавим большой жирный плюс потому что это много много хитрых вещей позволяет сделать масштабированием здесь нельзя смешивать масштабирование внутри кудрин это свирскому что дерево не снаружи куда то есть внутри квадрата сама стадионе делает самку гермес он ваш ipod и может увеличивать автоматически когда у вас идет большая нагрузка в зависимости от ваших настроек вот я говорю при масштабировании самих инстансов к интернету и это можно сделать помощью авто скейлеры есть тогда тоже проект на гитхабе находится в культуре натовской папа папочки вот когда у вас новый под стартует когда вы добавляете новый под он не может стартовать потому что ему не хватает ресурсов нужно всех инстанциях этот авто скейлер автоматически может добавить ноды но и потом убавить то есть полезная вещь удобно она позволяет работать даже на спад инстанциях мы пока это не добавили функциональность мы будем это позволяет сильно экономить то есть патент на намного дешевле vaio w и тут жирный плюс телеметрия когда у вас очень много зайцев в смысле режим пользователей и приложений у пользователей вам нужно как-то за ними следить обычно это слезится в помощью телеметрии лагов и каких-нибудь красивых графиков у нас по историческим причинам был сансу и он не очень подошел для cooler напиться то есть нам нужно какое-то более метрика ориентированы какой-то были метрик ориентированный проект вот соответственно посмотрели на энтеббе весь остальной текст ик очень хороший юань очень хороший стиль подобный язык все хорошо но они не хватило немножечко фич и мы поэтому перешли на примете rus приметы уж хорош хороший язык запросов alert и все это прямо из коробки для того чтобы посылать телеметрии мы используем сарган это наш собственный трек написанной на расти и поэтому медалька это единстве проект на гостя который в нашем продакшене работает уже год вот у стороны есть несколько несколько концепций то есть вас есть концепция источника данных вы конфигурируете несколько возможных источников данных много вот вы конфигурируете куда вы эти данные будете сливать это sing терминах страны вот у вас есть конфигурация фильтров то есть все эти перетекающие данные вы можете каким-то образом перерабатывать молотить вы можете преобразовывать логе в метрике метрики влоги все что хотите вот при том что у вас несколько входов несколько выводов и вы показываете каким образом куда идет на там что-то вроде большой системы графов получается довольно удобно получается все это направлять мы сейчас используем в нитку вернемся в смысле мы плавно перетекаем в кабинетах и мы сейчас используем в так здесь все равно ну и посылаем все это в и фронт теоретическим приметала спросит чтобы это все было немножко по-другому он хочет сам примет а велась по концепции сам собирает данные из приложений поэтому во все предложения добавлять нужно and paint из которых забирает все эти метрики дома скорее всего одна это будем переходить так как он является как бы передаточным звеном он должен работать в где везде фактически и здесь есть две возможности их в его можно запускать на каждом инстансе губернатора когда им on set и через него все посылать либо можно с помощью сайт корр в концепции когда у вас в вашем поле работает еще один контейнер с термином и он соответственно посылает эти данные выбор за вами мы на самом деле делаем и так редок у нас прямо сейчас все логе шлют в стадо out west & d соответственно все приложения на это уже рассчитано и поэтому нас одной из важных требований критичным было чтобы мы никуда не уходили от этой системы и соответственно мы пусть постепенно пытаемся к этому тоже прийти сернан у нас посылает власти ксир чьи события все системы губернатора они тоже посылаются в ластик search с помощью хипстер хипстеры очень хорошая система рекомендуем вот и соответсвено после этого вы можете посмотреть все эти логе вашей системы и логе губернатора которые работают с вашей системой вы можете посмотреть в одном месте но мы смотрим тоски бани и конечно можно посмотреть из консоли тоже есть в теле под возможность поглядеть логе а есть такой замечательный продукт как сталин это как раз для логов он позволяет через fedex по определить для каких кодов вы захотите смотреть он светом раскрашивать с разных кодов он умеет видеть когда один под у них другая стартовал и он автоматически подхватывает и показывать все эти логе прям идеальный проекция прям его очень рекомендую за это жирный плюс кубер нету здесь все хорошо секреты мы используем с 3 км с думаем возможно переходить на волк думаем возможно переходить на секреты в самом губернатор они были найдены синим состояние альфа поэтому мы пока не приняли решение но чет у нас делать надо разработка мы добрались до интересно разработка в кабинет оси вообще мало рассматривается то есть вас нам говорит атаку двигаться идеальная система там все хорошо и давайте переходить и вот слайд очень хорошо иллюстрирует чаще всего для разработчиков поясняю это ну вот беги вот это твой сыр и иди давай его ешь быстрее но на самом деле бесплатный сыр только в мышеловке и на самом деле для разработчиков cabernet оси а то есть не стоит точки зрения что все плохо нет точки до этой точки зрения что надо немножко по-другому взглянуть на вещи я разработку в интернет эти сравнивая с функциональном программировании пока ты не коснулся функционального программирования думаю что его императивном стиле всего все хорошо для того чтобы начать разрабатывать функционально не надо повернуть немножко голову другим боком и здесь тоже самое то есть разрабатывать можно можно хорошо но для того чтобы начать нужно повернуть голову другим боком во первых нужно разобраться с концепцией до 1 докер вей это нет не то чтобы сложно но понятие до конца довольно проблематично то есть большинство разработчиков привыкла что они заходят на свою виртуальную машину там или локальную машину или удаленную машину польза саша дай-ка его 10 что-то под провода к здесь тут под шамане оно все будет работать и когда ты ему говоришь нет губернатор так не будет потому что у тебя и долго инфраструктура когда ты хочешь обновить приложение ты пожалуйста сделай новый образ и она будет работать а старый пожалуйста не трогают вас умрет у них прим ну я я лично работала внедрением куда-то с в разные команды и я вижу прям ужас глазах людей когда они это понимают что все старые привычки бы придется полностью отбросить надо придумать новые свои привычки нужно придумать новую систему какую-то вот и это прям довольно сложно плюс придется много делать выборов то есть скажем когда ты делаешь какие-то изменения нужно эти изменения локально когда делаешь разработку нужно как как разрабатывать то есть либо ты должен к метать в репозиторий потом репозитории по pipeline у прогоняет тесты потом приготовить этом опечатку одном слове нет как бы так не очень хорошо тебе нужно это делать локально вот то есть ты должен всё равно как-то монтировать папочку каким-то образом заходить туда обновлять систему хотя бы контролировать вот если теста запускать локально может быть неудобно то может быть стоит к метать вся все-таки то есть как бы она скомпилировалось хотя бы ты какие-то локальные действия проверил а потом отправил вся для того чтобы он пролил уже все полностью тесты вот эти все выборы они достаточно сложные вот особенно сложно когда у вас развесистые приложение состоящий из 100 сервисов вам нужно для того чтобы один раз работал девяносто девять других обеспечить рядышком то есть вам нужно либо макать либо их тоже нужно как-то запускать все это локально ну вот этот весь выбор он не ты реальный и разработчику нужно об этом сильно думать и из-за этого возникает такое негативное отношение к дуне тусу . давно это конечно хорош но он плох как бы а почему а потому что вот там вот много надо изменять своих привычек и поэтому здесь ты ли жирных кошки побежала через дорогу когда мы смотрели на кубе на это с мы пытались посмотреть может быть есть какие-то удобные системы для разработки в частности есть такая вещь как дэйз наверняка вы все про нее слышали он очень прост в использовании и мы провели на самом деле самые простые проекты они очень легко переходят надеюсь но проблема в том что более сложные проекты могут туда не берите потому что потому что потому что вот так и мы решили что мы его использовать не будем потому что мы не сможем мы как я уже рассказал перешли на холм chart вот но единство проблема с холостяками которые мы сейчас видим это то что очень много нужно хороший документации нужно какие-то how to какие-то факи какие-то быстрые то есть как бы чтобы человеку быстро стартовать скопировать текущей кончик вставить в свой и поменять какие-то название для того чтобы это все было правильно и это тоже как бы важно заранее понимать и делать общий набор инструментов для разработки нас вот здесь меня здесь перечислены я здесь всего этого не коснулся пока только мини куба mini cube это очень хорошая система смысле очень хорошо что она есть но очень плохо в каком виде она есть она позволяет запускать кабинетов локально и это позволяет видеть вам все это прямо на своим лаптопе не надо никуда ходить по ssh и так далее вот я работаю на mac os у меня мак и соответственно для того чтобы запускать локальном не надо как-то локально запускать докер как локальный запускать этот ледник ак соответственно нужно либо virtualbox либо касаев вот оба эти вещи это фактически эмуляция для полях моей операционной системы и в косове то есть я сам использую кайф но мы все внутри компании надо использовать virtualbox потому что в кстати есть много багов мы наткнулись на них и их приходится каким-то образом обходить вот но в целом сама идея того что на твоей операционной системе есть какая-то виртуализация внутри этой виртуализации запускается еще один выпуск акций для виртуализации но это прямо какая-то нелепая бредовые вот поэтому в целом как бы он есть он работает как то хорошо что он есть но лучше в его не вы еще доделали seo seo и он не относится напрямую к uber нету су но это очень важная система и особенно если вас кабинета съесть она позволяет губернатор позволяет это все если интегрировать очень хорошие получать результаты мы использовали изначально конкурс для себя я очень богатая функциональность очень богат вы можете строить страшные графы как что откуда запускается от чего зависит но разработчики как-то странно относится к своему продукту скажем при переходе с одной версии на другую они поломали обратную совместимость и большинство плагинов не переписали более того документацию не дописали и когда мы попытались что-то вообще ничего не заработала вот и документации мало документации мало вообще во всех сериях приходится читать код и в общем мы отказались мы решили перейти на дрон он маленький очень легкий юркий функциональности намного меньше но чаще всего ее хватает то есть до в большие развесистой графы зависимости было бы удобно но на маленьких тоже можно работать вот тоже документации мало и приходится читать код но это всего каждая стадия pipeline а работает в своем докер-контейнер это как бы позволяет очень упростить переход на кубе минус на самом деле то есть если у вас есть ваши приложения которые будут их на реальной машине вы для того чтобы добавить вся и создаете докер-контейнер в нем проводится все тесты после готового докер контейнеры перейти в q 12 уже гораздо меньше чем спросит все готовить с полностью с нуля вот поэтому он нам помогает немножечко у нас автоматически настроен на настроен автоматический релиз в админы и стричь кастера то есть в продакшен пластик мы пока боимся добавлять такую настройку вот но так работает плюс у дрона есть богатая система плагинов и вот вам пример простого другом конфига то есть это опять же и взятой готовы рабочей системы в данном случае есть пять по пять шагов в этом по и плане каждый шаг это что-то делает каким-то образом собирает тестирует и так далее при том что на блага фич которые еще есть у дрона я считаю что дрон это хорошая штука + 1 мы как я уже говорил много спорили о том сколько нам кластеров иметь иметь один или несколько после того как мы пришли к идее с несколькими класс тягами мы начали как бы дальше работать в этом направлении и создали какие-то скрипты и создали понаставили кучу других кубиков к нашему кубику к интернету сын вот и после этого пришли google и сказали слушать нам нужна ваша консультация мы сделали так скажите мы что-то сделали не так может быть можно что-то исправить и google согласился что до идеи одного кубика в смысле идея одного кластера она пока не применимо в уберете из того что он вернется есть много недоделок в частности работа с геолокация me и получается что пока это идея в целом верно но пока не говорить рано может быть попозже и возможно сервис меж которые сейчас через одну лекцию будет тоже в этом зале тоже может помочь в этом направлении обязательно приходите послушать в целом если вы хотите посмотреть как работает наша система но у нас вы не сможете посмотреть на вы можете прийти посмотреть геофизик gd зик это подобный нам продукт который мы делаем он открытый с открытыми исходниками очень похожий выбор концепции дизайна пожалуйста посмотрите мы очень сильно думаем как бы нам объединиться и возможно видит за использовать да есть текущие проблемы в наших настройках есть боли с локальными те именами кейсы liceul de там с сертификатами и так далее есть проблема с большими загрузками с большими нагрузками больших образов есть проблема с работой больших образов возможно как-то с файловой системы связана я не знаю мы пока не не копали и есть уже три разных способа устанавливать расширения кудрин то есть мы меньше годы работаем над этим проектом и у нас уже три разных способа ну как бы годовые кольца они растут вот но давайте подобьем в целом все минусом и так я считаю что один из самых главных минусов как я уже говорил это большой объем информации на изучение не только новых технологий not как вот новый язык изучить это в принципе не сложно вот но сложно повернуть немножко голову всем пользователям очень тяжело переходить на дольках если они раньше не работали с подобными концепциями губернатор будет лишь небольшой частью вашей системы то есть все думают я установлю кингу бернерс-ли все у меня заработать нет это же маленький кубик и таких кубиков будет много некоторые приложения в принципе на губернатор и тяжело запускать и лучше не запускать скутер нет оси очень большие многословные конфигурационные файлы и в концепциях полировку вернется в том же холме ещё больше то есть как бы все эти минусы а все текущие решения целей это я уже упоминал то есть все все эти минусы они конечно отвратительно плюс как я уже говорил компромиссы и вот этот вот сложный переход он создает негативный негативный образ губернатору разработчиков и я не знаю как это правильно бороться у нас я недель мы не смогли сильно побороть то есть есть люди которые в принципе ненавидят вот этот весь губернатор все наши движения хотя понимают эти плюсы плюс для того чтобы запустить мини-клуб за того чтобы запустить вашу систему чтобы всего пользователей работала придется сильно постараться как вы видите минусов немало и в принципе те кто не хочет работать кубик ментосом имеют свои резоны если вы не хотите дальше слушать про плюсы вы можете закрыть глаза и уши вот потому что дальше пойду плюсы они тоже есть первый плюс это то что с течением времени новичков придется все меньше учить часто бывает так что человек приходя в систему начинает волосы вырывать потому что первый месяц два он пытается того что разобраться как это все завели ведь если система большая живет долго наросло годовых колец это все достаточно сложно в кубе над все будет проще во вторых губернатор не сам делает но позволяет сделать короткий цикла релиза то есть весь этот камень и создал образ образ автоматически там подкачался ты нажал кнопку и всех ушел в продакшн это сильно сокращает время релиза следующее это разделение кода как я уже показывал вот нашим текущая система и большинство у вас скорее всего систем а не в одном месте собирают конфиге разных уровней то есть у вас вин инфраструктурный код бизнес-кот все эти логике смешаны в одном месте в q12 такого не будет ну просто из коробки то есть выбор правильной концепции позволяет сразу этого избежать заранее очень большое комьюнити очень большое количество изменений то есть вот все большинство вещей которые я зову упоминал она не за последние два года стали стабильными настолько что их можно спокойно выпускать friction то есть возможно к часть из них появилось раньше но она была не очень стабильно ящика большим плюсом то что в одном месте можно видеть как логе приложения так и логе работы кабинета с вашим предложением это неоценимо и нет доступа на но да то есть когда мы забрали у пользователей доступа на но да это прямо большой класс проблем сразу срезала вторая часть плюсов они немножко более концептуальны то есть большая часть губернатора большая часть сообщества к интернету со они видят технологическую часть вот но мы еще увидели концептуальную менеджмент сквозь часть скажем после того как вы перейдете на губернатор и после того как если это все правильно настроить конечно же инфы команда больше infrastructure backend я не знаю как они у вас называются нас называется инфо инфо команда больше не нужна для того чтобы выглядеть приложение то есть пользователь хочет выглядеть приложение он не придёт тебе не скажет я хочу зовут запустить новый под ну иди запуская как бы вот у тебя команда несколько тель пожалуйста работай вот инфа команда больше не нужна для того чтобы инвестировать какие то проблемы то есть происходит проблема посмотрел логи посмотрел логи здесь посмотри логе там вот это погляди то погляди ну как бы у нас на по конструкции не очень большой там пять пять пунктов в списке иди ищи свою проблему да иногда нужны наши наша поддержка если проблема самом кубер нет если проблема в инстанциях но по чаще всего проблема бывают с приложениями и инфо команда уже больше не нужно здесь вот мы добавили your budget все значит такой род budget кто знает поднять руку пожалуйста отлично роль budget это замечательная концепция которая говорит следующее у каждого у каждой команды есть статистика сколько происходит проблем в продакшене если проблем в продакшне происходит слишком много им заряжаются релиза сносного пока не дорастёт пока не пройдет какое-то время чем это хорошо это хорошо тем что команда будет очень-очень сильно следить чтобы их релиза были очень стабильны и вам нужна новая функциональность пожал в три листья вы хотите закрыть два часа ночи пожалуйста если у вас там 7 девяток вашего сервис за последние годы пожалуйста делайте чего хотите вы настолько стабильна что я вообще не волнуюсь за вас у вас очень большая экспертиза вот но если у вас даже 2 девяток не даттон скорее всего мы не разрешим выглядеть а можно видеть только фиксы вот новую функциональность нельзя вот и это очень удобная вещь это очень удобная вещь как для стабильности системы посмотрите в интернете про это много есть с с презентации вот но это еще очень хорошая вещь с точки зрения настроя внутрь там внутри компании то есть инфа команда перестает быть полиции нравов мы уже перестанем делать запреты вылететь в 11 ночи скажем да то есть делайте что хотите пока у вас хороший бюджет с ошибок и это очень сильно сокращает напряжение внутри компании что не может не радовать ну и в конце у меня два слайда со ссылками вы можете их потом закачать посмотреть все вопросы да да пожалуйста подождите часы лучше в микрофон да а раз по поводу трона вопрос да да да да отлично оба патрона он научится работать скуп с кубер на этапе или вы когда запускаете какие-то сборки в дроне вы используйте докер api для запуска непосредственно worker of самих ну не worker of а именно те кто будут собирать а при кухню и не цвета смотрите на концерт со к что есть сервера есть worker и это как дела все можно запустить убирайтесь нет проблем вопрос как worker и запускают среду для выполнения каких-то казаки ушанов все знали раньше сотни известно спускался записаться в докере вы говорите что сейчас в uber найтись и работает не нет мы явно стала нет нет мы не запускаем гонку беремся то есть это отдельная система я имею виду что они вместе я может не так выразился прошу прощения нет нет нет это не то не работает он работает своем докере последующий вопрос два вопроса пир что вы только переходите на какой процент продакшена у вас сейчас переехал на вы все тому , что вы рассказываете это очень хороший вопрос он хорош точки зрения что переход на кубе гне тасс он может возможно только после того как губернатор у тебя уже готов к production ну вот у нас первые полгода заняла только подготовка этого к продакшена следующее вот я не знаю там политику последних тройку месяцев мы перетаскиваем сервисе из но я бы сказал что нас пока это около 5-10 процентов вот потому что самая большая часть бизнес-логики у нас большом монолите которые нельзя покажи стащить на сервиса то есть все маленькие кусочки которую можно мы перетаскиваем а вот этот большие монолит он требует очень большой подготовки для перетаскивания сейчас это в процессе мы надеемся что в ближайшие два месяца моего перетащи то есть монолит это то что у вас в было указано в минусах это какой-то стоит full приложение который поступал в docker и вернись не запись или почему не может он запихивается он на самом деле хранит у нас все в базах данных и так далее то есть он частично стоит full я бы так сказал вот но просто сама сама работа с докером само тестирование все вот эти вот годовые кольца работы нам надо же прийти в всех пользователей которые всех разработчиков заставить перейти после этого вдоль ты не можешь просто перетащить в кубе где-то с а все остальные работают как пастор ему нужно подготовить среды нужно подготовить тестированию нужно подготовить много чего для того чтобы это все перетащить это не проблема кабинета совета проблема именно вот бизнес-логики большого объема и годовых колец ну то есть это проблема сами консерватизма компания они технология да наверно так и тогда второй вопрос тоже наверно важной рассказать и про последнее падение в продакшене купюрница вот-вот того к этому вы говорили на самом деле падение как на как таковых к падению бернетт as пока не был но может быть частично и падение труда туры языку бернетт но что-то такое можно мне все все вещи которые я вот сейчас на навскидку вспоминая это большинство обвязок то есть скажем у нас была проблема таких дистрибьюшен вот я погоревать коллектор рассказу нас просто так заканчивается место и все он не может ничего больше сделать были проблемы с лагами то есть заканчивается место в то есть ему разрешаешь какому-то приложению сколько-то там вы создать и так далее то есть все эти все эти мелочи это больше не про самку dignitas не про инфраструктуру а про работу с этим cabernet сам поэтому проблема купюрница как такового у нас очень пока не но то есть упрощать старались то что у вас место закончилось в сторонних сервисов да скорее всего ok благодаря сколько вопросов я даже не знаю кому давайте к вам иван вопрос такой как вы смотрите на микро сервисы и кубер нить из речь заходит о том что мы по сервисов больше ста и имеет ли смысл использовать для этого поверните у нас идеально подходит для мелких сервисов хорошо второй вопрос который поможет наверное сэкономить будущем время это инфраструктурный вопрос пытались ли вы организовать инфраструктуру вокруг центра си или debian и 9 почему именно доббин 8 я думаю по историческим причинам у нас уже начали образовываться исторические кольца даже уже внутри нашего проекта наверное нет ответа с другими системами опыта не был мы попробовали просто на не на нем быстрее всего зашло и мы продолжаем работать то есть может быть мы перейдем когда-нибудь да и вопрос для разработчиков то есть для локального для локального тестирования вы используете виртуалке не пробовали использовать для маков wine нет то есть в virtualbox он хорош касаев хочу похуже чем воин поможет уменьшение ресурсов ирина давай после мы там сзади есть вопросы вот мужчина да пожалуйста давно уже руку тянет у меня легкий вопрос спасибо за доклад во первых на какой на чем вы запускаете повернитесь а в с барри металл какой-то google плывут на чем у нас цель и сделать мультик ладно и решение прямо сейчас работает только на и ws в двух will build a зонах в дальнейшем мы хотим сделать на нескольких зонах плюс google клауд то есть чтобы она была объединенная она чего поднимать с помощью какого-то line поднимайте эту структуру на варись для использование потом nakopilku верните сам capture a form спасибо подскажите пожалуйста сколько у вас человек в инфра команде тоже хороший вопрос над кубер нитта-сан в инфы команде у нас работать три человека два человека первые полгода и получается 3 человек добавился в следующие полгода вот у нас примерно около года этому проекту в команде в целом у нас 17 человек но остальная часть не работает над коберна то есть окружении рядышком возможно по помощь запуске но не самку вернет 10 нужно наверное последний вопрос уже d до последнего да иван-то говорю у тебя у вас большой и самый большой кластер для тестирования кубер на это сюда а в чем процесс тестирования это заключается как не достигли комбинация может неправильно выразился у нас вот этот пластик используеться для всего то есть есть кластер и ту и который для тестирования самого губернатора и на нем откатываются это маленький класть на него вкатывается все вот эти вот три лист процедуры изменения кубик это с конфигурацией там и так далее а есть второй кластер который админ у нас называется он используется для себя обычных систем здесь я и всех остальных девелоперов то есть все что все все комменты которые идут в git хоп у нас автоматически тестируются через я как раз внутри этого класса тестом запускается что-то поднимается и так далее это про production код или про код который вот нужен для обвязки для работы кубер на это с ним если это бизнес логика бизнес бизнес логика а вот как непосредственно сам губернатор тестируется она вот вот это как раз первый это итоге кластер который он тестируется там минимальное количество но там 35 сколько нужно для тестов шаги какие я понял там тоже есть автоматизации то есть у нас есть отдельный себя и pipeline в которым обкатывается то есть накатил какие изменения у нас автоматически прогоняются там поднять кластер запустить что допустить к власти руси"
}