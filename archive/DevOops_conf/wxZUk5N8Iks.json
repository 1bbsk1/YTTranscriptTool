{
  "video_id": "wxZUk5N8Iks",
  "channel": "DevOops_conf",
  "title": "",
  "views": 0,
  "duration": 0,
  "published": "",
  "text": "сегодня мы поговорим про cabernet и complaints который относится к тайной платформе пару слов обо мне и компании где я работаю меня зовут артём семёнов я покажу группой которая занимается клауд инжиниринг и работа в компании van технолоджи производим мы на самом деле продаем медицинское оборудование государственных продукта первое это продукт для ортодонтов прозрачные компы который называется все прессование и с помощью которых можно двигать зубы то есть менять прикуса не являясь ассоциативным брикс там и служит для того чтобы приводить зубы и сноу положению другое и тем самым делать их красивыми вещами прямыми и решать какие-то проблемы второй продукт это эти раз камеры оборудования которое позволяет получить 3d модели зубов и дальнейшем используют для планирования различных видов лечения при чем здесь этику бернес казалось бы ну на самом деле у нас больше 700 человек по миру занимается разработкой софта мы делаем в среднем почти 2000 коммент в каждый день написали миллионы строчек кода на разных языках от питон на си плюс плюс да что-то совсем экзотического управляющего производством нашей фабрике и можно сказать что да мы двигаем зубы с помощью кода наших структура мы используем контейнеры в продакшене для бизнес космических приложений и для компании приложений больше четырех лет мы используем публичные облака и он принес инфраструктуру естественно наших контейнерах мы запускаем основном микро сервисы это что называет главное чего приложения то есть мы не пытаемся обернуть манолин в 10 гигабайт и докер контейнеры говорить что вот мы там главное эти встали мы запускаем приложение которое соответствует множество международных стандартов так как но и продаем нашу продукцию и работаем на международном рынке высоты нашей конторе на и платформа поддерживает множество международных стандартов и мы ее четыре года назад построили без cabernet соната большой причины сейчас мы активно переводим все наши существующие приложения и будущее предложение на интернет с но прежде чем ведь про кабинета давайте наших палубу говорим про собственно сам комплаенс довольно страшное слово что это такое и зачем вообще он нужен ну во-первых контент может быть нужно после того чтобы делать свой бизнес есть множество областей которые как бы индустрии в которых для после того чтобы начать что то делать нужно получить сертификацию это может быть связано с обработкой каких-то критических или финансовых данных и может быть связаны с тем что это просто к это опасное производство или например автомобильная индустрия или авиапромышленность после для того чтобы делать и продавать какую-то сервис или услугу или оборудования вам нужно соответствовать стандартам которые приняты в этой индустрии или в целом бизнесе второй вопрос это для того чтобы оставаться на плаву и оставаться в в собственности раставаться работать в бизнесе как сказал бывший генпрокурор рф штатах однажды что если вы думаете что комплаенс это дорого попробуйте не комплаенс то есть если вы что-то делаете не так это будто штрафы это будут как вопросы от ваших партнеров потому что на самом деле если кто-то хочет работать вашей компании они хотят убедиться что вы надежный бизнес партнер потому что они ставят свой бизнес в зависимость от вас сервис который вы предоставляете ли ваших продуктов соответственно чтобы убедиться что ваши внутренние процессы достаточно хороши для индустрии или что вы можете организовать работа хорошо и правильно вам можно доверять как раз многие стандарты complaints они на самом деле да именно об этом чтобы производить качественный продукт вы следите за качеством и вы должным образом обеспечиваете безопасность в своих продуктах и безопасность здесь не только о том что кто-то имеет куда-то доступа кто-то не имеет безопасность это еще и надежность вашего ваших решений и возможность пережить как какие-то айти ситуации например dos атаку так и например наводнение которое почему-то залил у вас дата-центр в этом случае если все делали правильно наверное вы не должны потерять свои данные уметь восстановить свой сервис довольно оперативно это то что ожидают ваши партнеры это то что важно для вашего бизнеса и на самом деле это то что ожидает ваши пользователя в современном мире множество компаний множество сервисов завязаны на то что они обрабатывают информацию от своих пользователей и пользователи наши юзеры они становятся все более и более аккуратно относящимися к своим персональным данным и к данным которая не доверяет этим лицам и многим становитесь важно понимать что компания с которая не работает которые доверять свою информацию она должным образом хранится должным образом обрабатывается и о чем говорят множество современных стандартов про персональные данные если что-то идет не так то есть процесс которые позволят отреагировать и защитить например тот же стандарт говорит что если вы допустили утечку в этих специальных данных нужно об этом должным образом сообщать человек у которого случайно публиковали номер паспорта и личные данные в интернете он узнает об этом каким-то официальным образом они потому что на него кредит взяли довольно важно я приведу пример просто доктус которыми мы работаем и как не относится собственно к эти индустрии к вернется один из основных стандартов с которыми приходится работать с надо от типа которая регулирует его обращаясь и медицинскими данными в сша очень много похожих стандартов есть по миру с другими названиями но в целом он описывает довольно множество большое множество control of или сегментов в которых нужно что то сделать для того чтобы этому стандарту соответствовать если мы говорим про айти про контейнер на платформу то я бы выделил несколько моментов это управление доступа это управление безопасностью в с точки зрения передачи информации с точки зрения надежности вашего решения в целом если три типа ближе к европе то всем известный стандарт gdp который регулирует управление национальными данными с так или иначе все скоростью с ним столкнулись любой интернет-сервис даже маленький магазин прислал вам письмо что вот теперь-то мы соответственно теперь и говорит о том что нужно обеспечить не только конфиденциальность данных надежных надежно хранения обработку но и надежная систем которые это делается чтобы они были доступны когда это необходимо и это довольно новый стандарт и все больше и больше стандартов разных странах мира появляются который описывает что-то такое даже порой не в странах в отдельных регионах например калифорнии которая является довольно большим рынком и имеет бюджет больше чем многие страны в мире вне дома или похоже стандарт который называется калифорнии can find праве силу который описывает похоже принципы компании не то что один раз случилось с новые стандарты появляются новые требования которые описывают современные процессы и современной ситуации которые возникают индустрии важный момент который я хотел бы отметить про комплаенс что это не только про некое состояние вашей системы или вашего бизнеса вашей компании это еще про возможность продемонстрировать что какая система направо вы находится в таком состоянии вы говорите что вы все правильно застопили за securely и смогли один раз показать аудитором но это еще не совсем комплаенс контента про то что вы можете в любой момент это показать и у вас есть система которая позволяет это делать скорее всего в кент автоматическим образом но давайте вернемся к интернету поговорим как же это все относится к контейнерам и к современной популярной контейнер платформе прежде чем я перейду к деталям хотел бы сказать что если вас в процессе но его доклады возникают какие то вопросы не стесняйтесь пишите в чате прямо сразу мы сделаем несколько полос и я постараюсь на них ответить давайте посмотрим на кубе нету такую высокоуровневую схему что у нас представляет себя кубинец дипломе так 11 классов нас есть сам кластера в котором находится контра plain мастер на воды ноды на лев которые собственно на котором либо наше предложение нас есть входящий трафик который меньше центр с контроллером есть некоторые выходящий трафик есть системы которые помогают работа нашим приложением как баз данных объектные хранилище и есть способы и сервисы которые позволяют нам состояние нашего кластера изменять собственно теперь это наш контейнер на репозиторий camrip истории и так далее мы поговорим про эти моменты далее но прежде чем мы перейдем к деталям я хотел бы сказать про вещи которые я в своем докладе не буду сегодня обсуждать и это некоторые решения которые мы приняли когда строили нашу самую первую контейнерную платформу которую мы сейчас используем как я сказал уже много лет и который является complaint возможно вам стоит ли ним задуматься об этих вопросах и принять какое-то решение которое поможет строить свою систему дальше или задуматься о том почему ваш текущая система построен определенного образа 1 довольно большое решение которое мы приняли у нас нету stale приложений которые работают на катание на платформе то есть никаких систем которые хранят какие-то данные в внутри контейнеров например базы данных у нас нету важное решение с которого мы начали это сейчас по прошествии многих лет позволяет нам легко и непринужденно поменять нашу текущую контейнер на платформу на купил эту это позволяет нам упростить complaints мы не храним данных соответственно мне нужно заботиться о их сохранности рамках контрактной платформы ну и в целом это позволяет на командам разработки и команды которые занимаются контрольный платформы и двигаться вперед гораздо быстрее потому что но вряд ли вы сможете построить храм хранилище для объектов который будет лучше чем с 3 там озона и вряд ли ваш бизнес про то чтобы построить хранилище объект который лучше чем с 3 есть исключение но большинстве случаев скорее лучше использовать готовое решение я говорю пример от amazon s3 но на самом деле этот сервис реализовано множество других колод провайдеров с тем самым и вы просто можете использовать их и даже с деплоить решение которые делают подобный сервис он примеси такая ситуация с базами данных можно ли их сделать кубинец ну конечно можно вопрос принесет ли вам эта необходимую пользу для бизнеса и поможет ли вам это с доставкой вашего продукта ваших изменений для вашей пользователь максимально быстро второй вопрос это то что мы решили не делать кластеров которые бы находились в нескольких регионах сразу то есть когда у нас control play находится в одном регионе инфраструктурным регионе рабочие ноды в других это позволяет нам избежать дополнительных потенциальных проблем и сделать регионы независимыми что в целом у увеличивает надежность системы довольно серьезно и третий момент это мы решили не что мы не будем сами запускайте менеджер стойку interplay для кластера это решение больше проку бернес но в целом мы делаем что-то подобное и в нашей текущей контактной платформе почему это важно позволяет не заботиться о том как сделать backup от сидят фокусироваться на доставке сервисов которые важны для наших костюмеров также здесь есть решение на базе клауд провайдеров есть - решение который вы можете с диплом время в том числе бесплатный но вернемся к нашим кластеру сначала рассмотрим что происходит с точки зрения комплаенс и какие вопросы у нас есть к тому что происходит внутри кластера непосредственно под капотом купил эту какие у нас есть здесь вопросы во первых первый самый большой интересный это сетевой трафик который путешествует между различными модами и сервисом в нашем кластере интересный момент что этот трафик не шифрованный и это так и это 2020 год это клубный тип мы все заботимся безопасности люди ставят себе плагинов браузеры которые не разрешают открывать сайте by защитить ps а при этом в нашем купер нету весь трафик внутренне шифрованный я поговорю про это чуть чуть подробней на следующем слайде но в целом гостевая модель куда месяца что любой под может общаться с любым потом это супер здорово но это общение происходит понизив ровным каналом это может быть проблема с точки зрения комплаенс и это может быть проблемой из точки зрения безопасности в целом второй момент которым стоит задуматься это жизнь и цикл ваших над кластере но до в кластере это linux машина для linux машины необходимо производить апгрейды и устанавливать патчи с точки зрения безопасности и функциональности тоже нужно задуматься и не забывать о том как это будет происходить то же самое относится компонентов губернатор релизный цикл кабинет порядка трех месяцев соответственно с 3 6 9 месяцев нужно будет какие-то компоненты или целом components обновлять стоит обязательно задумываться о том как это будет происходить нельзя просто поставить и забыть постоянно будет нужно будет производить некоторые мейтенс обслуживания вашего кластера и процесс о том как это будет происходить стоит продумать заранее но как и говорил давайте посмотрим более подробно что же происходит с сетью интернет кластере для этого рассмотрим простой пример на deployment а я здесь приложу на примере амазона новая схема работает для принципе любого дипломе у нас есть некоторый внешний блок балансировщик сил страны в самом кластере у нас есть некоторых у лены сервис к есть набор кодов которые на которых собственное приложение которое реализуется если грыз контроллер который может наш трафик отправить на эти коды соответствии с дефиницию когда у нас приходит request некоторые сетевой запрос от пользователя у нас все было вне зашифрованным мы используем тело все все хорошо запрос попадает на одной из над кластера где он обрабатывается на игра с контроллере и попадает в под где происходит собственного обработка уже в нашем приложении соответственно где допустим нас close thread всего одна но до в рамках этой ноты никакого steel взаимодействия трафик попадается вот игр с контроллера к коду и в дальнейшем приложение напрямую все хорошо как только у нас появляется вторая надо то опять же любой под может общаться с любым потом любой сервис может общаться с любым сервисом от сетевая модель куда прятаться и может оказаться так что трафик или запросам раз попал на игры с контролем на одной физической ноги обработался потом на другой физической ноги что вообще говоря является проблемой потому что в этот момент трафик у нас уже не шифрованный и это может быть проблемой для как и говорил complaints и безопасности что что же можно с этим поделать я выдел три основных момента и самый первый можно не делать ничего и самый простой это то что делает самая большая масса пользователей интернета почему потому что возможно вам не нужно просто не соответствует никаким complain сам и это абсолютно у китая ситуация которая никак не вредит вашему бизнесу или ваши модели безопасности возможно у вас есть дополнительные способы обеспечить безопасность периметра и безопасных ваших мастеров для многих стандартов достаточно что ваша структура был работала в закрытых серыми комнате куда никто не имел доступ и она там его не было выставлено в интернет в этом случае какая разница что вас трафик между вашингтон с модами не суровыми и большая шутка про все dss стандарте не описаны необходимость явные всех сидел занимать визор шив ровность и всех сил взаимодействий поэтому если вы можете обеспечить найдем надежный периметру вокруг вашего deployment а то в принципе на это тоже можно не обращать внимание в губернатор что существенно упрощает для систем которые соответствуют писать там если все-таки эту ситуацию нужно решать какие у нас есть варианты ну естественно шифрования можно проводить до уровня пода простое и понятное решение и но это означает то что нужно манеже сертификаты на уровне кодов или контейнеров и если делать это не совсем правильно и корректно можно потерять with ability to есть то что у нас один и тот же контейнер 1 тот же код диплом цена везде в том что подарками нас тестовые среды и в целом система нет сертификата в этом случае нужно и об этом скорее все должна знать приложение которое вы деплоить и опять же - разные варианты презентации но в целом есть вопросы проблемы для нас этот способ означало что нам нужно поменять только км и deploy потому что наш текущий контейнер на платформе все сетевые взаимодействия шифрованные нам не нужно об этом беспокоиться третий способ решить эту проблему которые пожалуй самое сложное это сделать так чтобы все таки внутри кабины с кластеру сесть и вызов действия были зашифрованы что как бы правильно и позволяет нам не беспокоиться о реализации приложения или менеджменте сертификатов на уровне кодов приложений гарантировать нам шифрование что важно для комплаенс опять же компонента про то что вы не только находите состояние на вы можете показать что это всегда так и для нас эта в том числе означало что мы можем работать с нашим deployment с нашими рекламе так вы делали это раньше и не требует никаких изменять дипломатов структуры потому что как говорил наш текущий платформа обеспечивает это к сожалению не так какие есть технические средства чтобы реализовать номер три то есть сделать его и взаимодействие шифрованные то то что тот вариант который выбрали мы я провел анализ на эту тему в прошлом году когда мы решили эту проблему есть два основных способа технических как-то можно реализовать первые на базе сено или кастомного на только интерфейс куда то есть вы заменяет стандартный реализацию села взаимодействия в кабинет сына культ кастомное основные игроки здесь это решение отлив нет это проект калика которая активно развивается и фланг прошлом году они активно объединялись проект канал но я вижу что калека продолжает развиваться про канал не очень много что слышно второй тип решение это на базе прокси который находится в каждом из ваших кодов и это решение реализует только правил сервис мышь сам известная истина кенди amazon реализовал свое собственное решение назвали его от меж поддерживает шифрования тоже довольно классная в ряде случаев наверное можно его использовать и еще одно решение реализации сервис мышь о который сейчас бывает от школ в консоли который по сути киваю хранилище есть функциональность консул connect который красавицу сервис наш как и сказал это ли search который я делал в прошлом году посмотрев на ситуацию в этом году я был немного удивлен потому что если мы говорим про осень на решение которое доступно сегодня то их стал несколько больше и это текущий экосистема это говорит о том что все еще комьюнити купюрница в поиске хорошего наборы решений и какую-то определенную рекомендация здесь дать довольно сложная такая ситуация на самом деле происходит с сервер smash абсолютно нормально что у нас есть 20 разных решений по сервис мыши и их количество только растет наше собственное сравнение мы использовали сервисов которые говорил мы остановились на дефне то канал как синай баэс решение и и steel как решение сервис прокси бэст ин их сравнили решение на базе иной в общем случае более рискованны мы это знаем по нашему в состоянии других континентах платформы предыдущего поколения не не базируясь на кубер нации все хорошо на бумаге все хорошо надыма когда мы приходишь на и в структуру где пакеты могут теряться какие-то силы взаимодействия могут не происходить так как это задумано находится баги находится баги в реализациях очень странно сложно трубу шутить если вы ставите свой бизнес зависимости от таких решений это можешь провести проблемам и опять же если вы во сне жена зависеть от этого наверное нужно делать коммерческий саппорт что означает дополнительный контракт дополнительные деньги который будет на это потрачено и и так далее и плюс к этому если его и deploy свои кластеры использования клауд провайдеров могут возникать проблемы с portability потому что часто чтобы получать все benefit или в том что там performance security visibility в ваших клан провайдерах нужно использовать соседа и вот клава провайдера что не получится делать если вы и стоит использовать какой-то кастомный с точки зрения смешав прокси лист решений и steel это то что сейчас поддерживается большинством клауд вендоров и поддерживается здесь означает что в том числе и коммерческим образом то есть вам не нужно дополнительно контракт чтобы там клад рейдов нога поддерживать если что-то пойдет не так что давай важно вы можете использовать любой сеяной вы не зависеть от этого и в конечном итоге получаете сервис мышь со всеми плюсами и минусами и мощности функциональности которые приносят да и это решение самой сложной для имплементации потому что smash это не просто зашифровать трафика это целый концепция которую надо надо понимать разбираться и менеджер как собственный q бернетт с напоминание что если вы используете губернатор вам надо быть довольно х мудрому разумно наша финальная архитектура здесь который у нас получилось это мы просто реализовали шифрование всего трафика который у нас в путешествие по куплены сквозь кластеру с помощью еще тела с решения на базе истец сервис наш что позволило нам гарантировать шифрование гарантировать complaints в рамках всех сил взаимодействия наших страх прежде чем я перейду к следующему пункту где мы говорим про говорим про то как изменение переносится привносится в наш кабинет бластера я сделаю небольшой паузы отвечу на вопрос а если они есть сергей можешь найти да спасибо за довольно интересную тему по поводу steel взаимодействия я думаю для многих это открытие что каберне this не делает ничего магического и некоторые вещи надо все-таки уметь настраивать самому 2020 году да это действительно открыть мне кажется для некоторых у меня тут на самом деле другой вопрос он касается worker not я так понял была озвучена проблема что надо обновлять в том числе не забывайте обновлять worker но если я правильно понимаю некоторых облачных провайдеров есть менеджер решение для worker not когда они сами предоставляют что то что умеет периодически обновляться ну это все но я не потребует определенных действий с точки зрения администратора можешь да я могу не можешь подробно поэтому сказать это хороший вопрос в целом откл от провайдера можно ожидать три типа поддержки здесь первый это вы как кастами делайте все сами ничем не отличается от запуска он принес 2 это когда есть автоматизация вот клад провайдера которая позволяет обновлять ноты позволяет делать правильную ротацию сера downtime и так далее но это ваша ответственность как пользователя кластер а этот процесс запускать и следить за ним и следить за тем что все работает после того как вы провели говоря если вы привести пример с idps можно одним к наглой нам обновить свой кластер и он обновиться хорошо zero dawn time но что ваш приложение ваш сервиса был под обработать от ваша ответственность на zone представляет только сервис который позволяется собственно по одному заменить ноты на новую версию которая пачаны и третий момент то что такой степени называть сервис это решение когда вы на самом деле не видите worker енот такой вот провайдер предоставляет вам некоторую возможность запускать воды на своим в структуре вот в этом случае вам не надо беспокоиться никаких апгрейдов но вы теряете часть функциональности кубер над свою фактически комбинацию 8 jet пода но нельзя создавать команды сами ноды нельзя де плоть до монце ты и так далее для ряда сервисов это вполне себе может подойти и снимается довольно много головной боли о том как поддержать собственно ноды вашем кластере спасибо и но если интересно можно потом обсудить после доклада эту тему задавай сушей вне еще один маленький вопрос он не про технику скорее может быть какие-то истории жизнь вот смотри мы все время говорим о том чем грозит нарушение там каких-то правил полутон потери данных drayton и хранению данных а если тебя какие-то примеры и жизни чем это грозит конкретным людям конкретным разработчикам или конкретным там сергея в компании ну просто почти все говорят что компании будет от этого больно что она потеряет деньги а что потеряет конкретный человек или он ничего не потеряет от того что нарушил какие-то стандарты какие-то регламенты приняты внутри компании это большой интересный вопрос на самом деле многие стандарты они если говорить про сам сотрудников они говорят о том что сотрудники должны пройти через некоторые тренинг вот и аттестат играешь ты просто должен быть ознакомлен с формация какие-то стандарты говорят о том что но ты отвечаешь за то чтобы в там очень чему тебя научили в рамках этого тренинга ты за это отвечаешь например если я сотрудник например в рентген кабинете я не буду выкладывать рентгеновские снимки своих пациентов на фейсбук вот я с этим ознакомлен для того чтобы мой бизнес получил собственный компонент сертификат я как сотрудник отвечать за то чтобы от не делать с точки зрения непосредственной ответственности лишь некоторые несет сотрудник который все-таки что-то сделать не так это зависит на самом деле страны от конкретного законодательства очень сильно по-разному я здесь не могу дать какой-то конкретно ответы рекомендации с точки зрения ущерба для бизнеса но помимо там репутационных рисков если говорить про хипа и виджеты pr то штраф и зависит от времени и то есть от дохода компании и являются существенными не важно от того какого размера твой бизнес то есть это то что отличает новые стандарты от того что мы там видели в начале двухтысячных когда бизнес с оборотом 100000 долларов получил штраф на 10000 бизнес с оборотом несколько миллиардов тоже получал страх на 10000 что как бы означало что бизнесу с таким огромным воротам проще ну ничего не делает и complaints и потом заплатить штраф сейчас это не так и штраф привязаны к оборот компании что является существенным фактором для того чтобы все компании сейчас об этом заботились и постарались не попадать под штрафа и под нарушения ну тут интересно скорее вычтут ли у разработчика из зарплаты часть этого штрафы были какие-то истории нет в я могу говорить за свою компанию и ясное что правильное построение бизнес он не подзывает идеальной ответственности потому что внутри должны быть сделано таким образом чтобы один человек не мог все сломать спасибо давай тоже потом обсудим тут еще маленький вопрос у нас владимира по поводу аудита ну то есть с точки зрения там компонента нужно уметь показать информацию о том что происходило системой вот как у вас вообще реализована система сборки там событий которые вы показываете аудитора ну и либо сами смотрите периодически я на самом деле про это немного скажу дальше в своем докладе хороший вопрос в целом то без практики которые не только относится комплаенс это сбор налогов мониторинга их дальнейшее хранение это как бы база то с чего-то того чего нужно начинать какие-то конфигурационные момент и я про тоже сейчас дальше докладе скажу это то что вам нужно иметь продемонстрировать что думает как раз вопрос который помогает план прийти к моей следующей секции в докладе доме про должны да как внутри но при вносим изменения в наш кластер вернемся к общей схеме кабы нас кластера у нас есть несколько возможностей поменять состояние в нашем купе нас классные то есть это взаимодействие с ним через и 5 это наше репозитории которые собственно храня там чарты и гяндже вот наша контейнеров которые в конечном счете работать нашим классная какие здесь есть вопросы с точки зрения безопасности комбайн со во-первых откуда берутся наши emoji контейнер на имидже не только докеров вы можете исходит что друга и откуда они берутся и можем ли мы доверять или по историям откуда они берутся то есть как правило большинство использовать публичной репозитории можем ли мы верить и насколько они надежны и если мы используем что то другое то как мы можем убедиться что мы используем наши какие-то доверенные источники и как можно это гарантировать второй большой вопрос это без практики по конфигурации самого кубинец и структуру вокруг него здесь я скажу пару слов про seo сбить марк и как можно убедиться что правильная конфигурации на нашем кластере применено и как это можно показать в том числе аудиторам и собственно безопасность конт рублей на и и 5 как мы можем вносить изменения так чтобы мы могли их отследить и мы носили только те изменения которые важны но сначала поговорим про и по истории почему вообще стоит беспокоиться о том откуда берутся имоджен и наши контейнеры которые мы диплом у меня notice кластер есть к и понятие как сопла чайный так это собственно так и на цепь снабжения и это реально это то с чем приходится иметь дело в современной индустрии в современном мире настолько реально что даже было выпущено научная статья которая анализировала недавний записать несколько лет атаки на в концов сс компоненты и был к наземной почтой 70 а так и давай печальный факт что в публичных и пульт ариях в open source пакет который все использовали какие-то изменения которые были собственно будет да но сны и привнесены в среднем живут больше 200 дней то есть это говорит о том что это реально проблема та индустрия нет хорошего способы обнаруживать не правильные изменения или вредоносные изменения в общих пакетах или в общих имиджа который используется и это это то что другая говорит о том что вы можете принести всем свою структуру свой код c и кастера вредоносный код просто пользуюсь публичным риту историями нужно с этим что-то делать второй момент насколько публичные по истории надежные и может ли вы рассчитывать на то что пакет который вы их использовали вчера будет находиться там сегодня я здесь приведу один пример про которые вы возможно слышали есть замечательный gemma пошив комьюнити шеф шугар завтра снова с этого орга и в определённый момент решил знак протеста против политики компании шеф этот гемор убрать из публичного доступа что сломала workflow десяткам тысяч человек по миру я сломала кучи все и процессов которые были настроены раз потому что они использовали get хоп как источник для этого пакета нормальный способ в общем но по факту когда случилась такая ситуация то все перестал работать и многих был найт завязан бизнес релиза и так далее стоит об этом беспокоиться и третий момент связаны с непосредственно с complain сам это то что на самом деле в ряде стандартов вы должны делать теперь сканирования своим в структуры до своих пакетов и это нужно делать и гарантировать если вы используете публичной репозитории это может быть сложно реализовать поэтому какое-то решение этого вопроса важно и здесь речь идёт не только про сканирования на какие-то уязвимости а в том числе и про соответственно использовании правильных лицензий латинском плейнс это тоже важный момент что котором что беспокоиться что же можно сделать чтобы решить эти вопросы эти проблемы правильное решение которое позволяет эти вопросы закрытия то использовать приватный реджис той приватные по истории которую вы можете доверять можете хотеть его сами можете использовать готовое решение если вы идете этой дорогой то есть несколько баз про которых я хотел поговорить если делать по приватный registry of правильно разделять между продакшен и не продакшн и по историями может быть вам нужно больше классов мы из опыта пришли все-таки к двум одевалка минуту и продакшена чем они отличаются они принципиально разные отдельно сцепление докеры just и в случае с одевалка на труп история туда может писать только система сами разработчики не могут публиковать и марш в этом репозитории только семь котов адамар считать мы хотим что все этим пользовались и пакеты или контейнеры из этого репозитория могут использоваться на наших дев и стренджа кластерах естественно за бочек могут их использовать своей работе в продакшн репозиторий не может писать никто это интересный момент не можешь писать да вся система единственное что вся система может делать это переносить контейнеры и сделай история в рот репозитории процесс называется про mode то есть когда мы не собираем что-то заново а просто переносим уже существующей отец тоже самые чиксу мои вопросы по истории кто угодно может а тут читать и эта репозиторию используется в подарочную припадок шин средах и дев там не используется какой какой здесь строится процесс в этом случае очень high level описание процесса и успеют индекс кампусе поучаствовать или нет после билда приложения мы проводим наши статические тесты анализ собираем наш блогеры матч с нашим приложением и после этого публикуем его в одевалки ты по истории дела нас производство данной все процессы интеграционное тестирование дополнительное тестирование которые вам важны факт мы выясняем является ли наш нож собранный build потенциальным релиз кандидатом который должен или может попасть production помимо этого мы производим необходимое сканирование и проекте с точки зрения complaints латинском про который я говорил проверка с точки зрения безопасности сертификация с точки они сыплете комплаенс все происходит на этом этапе и если мы проходим все проверки и все произошло как нужно там и наш пакет переносим в подарочных по истории он может использоваться нашу припадочной среде мы можем провести финальные проверки и в конечном итоге за тепло и теоны production соответственно в наш удачной по истории наш production реджис 3 попадают тока пакеты которые были проверены и сертифицированы и это единственное это только быть сертифицированы пройти через семь pipeline который попытался изобразить на слайде соответственно что мы получаем у нас получается не изменяемый образ который мы собрали один раз и потом мы перемещаем под нашим по клаве ну да продакшна это тот же самый binary он никак не меняется он просканирован он протестирован и это всегда один и тот же бинарный файл что важно для того для комплаенс мы можем показать и доказать что это именно этот компонент которым протестировали именно этот компонент которым просканировали и сейчас именно его мы используем продакшене если мы говорим про все спать и имидже или базовые имидже которые мы используем они ничего не отличаются они тоже часть нашей поставки и для них мы используем ровно такой же процесс мы не можем не собирать его из исходников обратись допустим публичного эту историю на первом этапе но потом он проходит через ровно такой же процесс и мы следом трон тем само правило если мы используем наш приватные репозитории то хорошо бы чтобы наш кабинет из кластер использовал только их а не использовал публичные это на самом деле фичи request который был был запущен в кабинете еще четыре года назад до сих пор не реализован на это не означает что эта функциональность нельзя реализовать это все можно сделать с помощью обычного хуков я проекта пару слов скажу дальше своем докладе в целом этот подход является сейчас и становится без практикой в индустрии множество компаний клад провайдеров его рекомендуют и без практики можно очень просто найти интернете они все говорят обязательно о том же есть много мануалов как его реализовать прежде чем мы перейдем к вас практикам по конфигурации сильней нескольких дополнительных вопросов по истории то спасибо что упомянул наш конкурс в яндексе по поводу си си дифф действительно поддавайся мы посмотрим почитаем строить pipeline можно же ссылку на видео присылать я думаю этого будет достаточно дальше там то наверно странице конференции можно увидеть эти ссылку все эти информации но у меня тут на самом деле несколько вопросов смотри вот эта система когда вы перекладываете докер имидже когда вы и так понял отливают какие-то события по поводу этого удар по поводу это волос то есть ведет какой-то аудит просто хотелось бы понять вообще как этот аудит ведется он в какой системе какое-то используя на своем нас оркестра тарам является наш вся система и в системе есть все тираны все события которые происходят также в системе хранения с одной стороны и с другой стороны и системе хранения и и нажмите об историях нас с каждым бен варем связаны метаданные где вся история этого binary что когда и почему происходило зафиксировано то есть мы можем посмотреть получить полную историю в системе управления динарами мы используем от factory и тоже самое можно получить наш всей системе если это необходимо для дополнительного дополнительно три соберите в целом такой подход может быть реализован не только сет factory я видел инструкции для eager я видел инструкция для амазона я видел инструкция для просто каких-то generic баки репозиториев как-то реализовать это самое с популярным только когда вы не много мануалов как это сделать если будет интересно можно после уже обсудить суши я не могу не прокомментировать прости вот ваша схема с двумя репозитории мы разработчик контейнер регистры мне немного чуть-чуть болен от этого прости то есть у вас 2 территория вы перекладываете за новых другой но тут сразу кажется очевидным разграничить это на уровне прав доступа то есть сделать так чтобы репозитории все-таки был один но в одном вот дерево было для c или d в другом потерю было для целей production ну и собственно разгорающегося правами ну это так мой мой маленький то я конечно понимают ценность вашего и шею там точно не перепутаешь да вот тут можно спокойно точно также анализировать по префикс они по домену в котором развернуто на разделение по дереву это хорошее решение вот если она обладает коктейль функциональности которой мы реализовали с помощью отдельных репозиториев это она решать тоже там проблему это нормальное решение то что я вижу сейчас в как такой некоторый тренд что люди все-таки говорят у разных историях реализовать на базе разных репозиторий я склонен связывать это на самом деле с ту лингам то есть функциональности которой обеспечит стул и для управления репозиториями чем непосредственно с тем что это подход то более правильнее его проще реализовать это подаваемые после поговорим не дать им интересно еще такой маленький вопрос а вот вы наверное используете какие-то базовые образы которые находятся в интернете и вы как вы контролируете что себе притягиваете свой приводы территорий вы как-то там подписи может быть сверяете того что загрузили вот есть такая штука может быть слушал внутри называется мы собственно когда получаем новый базовый образ мне естественно при проверяемого проверяемого подпись после этого проходим через тот же самый процесс то есть мы проходим security сканировании мы тестируемся с ним автоматически проверяем что в нем находится только те пакеты которые мы ожидаем увидеть и они там правильных версий и так далее тому подобное это после этого мы собственно выкладываемого таким образом что может использоваться для наших сборок то есть acceptance pipeline для базовых образов он сделан собственно похожим образом из нам нужно у как-то кастомизировать но мы делаем какой кастомизация добавляем пакет который мы ожидаем увидеть в наших базах образах спасибо слушать тут еще у нас спрашивают в чате по поводу разных интересных штук do not спрашивает по поводу опыта обновления кастеров кубера но мне кажется такой общий вопрос и он перед каждым человеком кто эксплуатирует купер в пруди стоит так или иначе и второй вопрос он тоже про эксплуатацию cabernet суета по поводу потери логов когда у нас это причине поставлять круто города большого каждый да и давай может быть так попробуй давай может быть ты сейчас закончится еще одну закончить вот так вот в конце мы поговорим про опыту смотра супер месяца потому что ну да я думаю этот хороший момент у меня на самом деле есть как раз важный только котором я поговорю буквально через пару минут который связанных с эксплуатацией особенно с апгрейдом версии да и поговорим про без практики для конфигурации когда нация контейнер на платформе в целом собственно начнем с того что когда митоз это на самом деле linux который работает на серверах все что вы знаете о линуксе настройки firewall всего взаимодействия блогинга мониторинга реализации правильно security модели все это работает в кабинет с мире ничего не надо переворачивать ног на голову то что вы знаете все баз практики которые мы применяли до того как вас поведу cabernet а с они все еще работают они никуда не делись даже практика которой относится к использование с и linux но нет ни выключить его сразу вполне себе применимо и несмотря то что я фета шутка в каждой доли шутки как известны в прошлом году было довольно известная уязвимость которая реализовывала контейнер escape то чего все опасаются работы с контейнерами это вот как раз виктор и на слайде кластеры в которых в которых она использовался если линуксом был не выключенный ей подвержены не были несмотря на все проблемы с конфигурации потенциальную боль которую силе ночную приносит в этой ситуации оказалась полезной сэкономил много часов сна владельцу кластеров к где он все таки был включен если говорить про практики которые специфичны для поверни таз а здесь ситуация более интересные какой-то совсем широкой industry без practice наверное еще говорить немножко рано и кабанец активно развивается но есть хороший старт центров internet security сделал все и собственно он и есть этот бич марк это некоторый документ который описывается без практики с точки зрения безопасности и праведник надежности правильной конфигурации для cabernet пожалуй это лучший документ на сегодняшний день который в целом описывает правильные подходы конфигурации купюрница много экспертов поучаствовала создание если у вас нет своих собственных без практик с этого точно стоит начать документ можно скачать с их сайта почитать но гораздо интереснее перейти к делу для этого есть система продукт названия птиц bench совершении security доступен на гитхабе клубень реализует проверки описанные в оси осквернят с бич марки для вашего кластера например в кластеры которые я только что создал в и конец в амазоне запустили когда ты бьешь против него и пример reporto это то что меня можно запускать моим кластеры приводишь из контейнера то есть этот контейнер и которые могут получить пригородный доступ к ресурсам хоста или но ты и я в принципе не является вас практика о чем некой убежище говорит это то что описано как 1 series coupe . чем арки и что очень полезно крепеж не только сообщает об этой проблеме но в том числе рекомендует решение людей шимко что можно сделать чтобы эту проблему решить и сделать с этап моего kuben с кластера более безопасными надежно рекомендую использовать это решение особенно если у вас сейчас нет каких-то реализованных бас практик для конфигурации cabernet очень хороший начал мы реализовали без практики из вся с вич марка у нас есть свой собственный контейнер репозиторий где только правильные контейнеры как же убедиться что конфигурацию нашего кластера остается правильный впо по мере его развития по мере его функционирования и никак не меняется это тоже интересный вопрос на который есть ответ это политики это то что называется полисе и полюсе данном случае это описание конфигурации описание правил конфигурации которые для конкретного дальше случае кластера являются правильными и какая-то автоматизации которое возможном его эти политики позволяет применять и убеждаться что они работают соответственно говорим про policy is a cold потому что полисе описанный в документе нам здесь не особо помогут какой здесь есть техническое решение сеансе я в комьюнити call быть в компьютер компьютер conditions имеет сейчас на борту проект который называется ok эллиотом полисе gent который как раз и реализует политики как код для клубных приложений использует для описания политик язык рига это некоторый кастомный dsl домой спецификой нищета есть специальный язык для описания политик и губернатор и это часть инсеев он нативной интегрирован скутер ментосом есть решение агитки пер который реализует с помощью опять же нативных ресурсов последней версии сервисов реализует эти политики в рамках вашего кластера прежде чем придем к деталям я хотел бы пару слов сказать про язык рига и язык для описания политик для этого нужно вернуться немножко в прошлое а конкретно в 1972 год во францию этот год не был исключительным и тур де франс проходила знаменитая гонка проходила и это маршруты карта как она проходила помимо труда франции во втором году случилась интересное событие первая реализация языка пролог была сделана как раз во франции двумя тоже называем контента сайта с учеными после этого прошествии некоторого времени в 1977 году появился язык каталог который фактически являлся некоторые под группой или части языка пролог и был предназначен для логического программирования сам термин логической подмены тоже появился в при длительно 7 на седьмом году 43 года назад после этого много воды утекло и много километров проехали на вагончики по гонкам тур де франс и в 2016 году появилась проекту пей версии 0.1 реализация языка олега который на самом деле является современной вариаций языка до того с поддержкой современных структурных данных типа джейсон или ваших любимых яму файликов что здесь хочу сказать на самом деле тот самый компьютер сайнс компьютерной науке и то отчима ученые задумывались в начале 70-х годов абсолютно напрямую применимо к тому что мы сейчас сделаем казалось бы самыми новыми современными технологий применим более-менее напрямую что довольно интересно мы используем все наработки и знания которые люди даже без доступа к каким-то сетевым взаимодействием или сколько меня современных компьютеров придумывали больше сорока лет назад очень интересный факт мы все-таки работает копыта sens но посмотрим немножко на код это пример политики описанные на языке рига и для donatas кластера которые описывают как раз правила что у нас не должно быть при улочек контейнеров в кластере обычно ресурсы финиша на ничего необычного в секции rega уже на языке рига кому-то может напомнить паскаль немножко по синтаксису описанное правила которых раз гарантирую что у нас не будет работать с приводишь контейнеров нашем кластере что на что же стоит обратить внимание что язык rega довольно понятный и если вы не будете писать свои поле считал текущие по полису который написал конвенте довольно просто понять и модифицировать под ваши нужды если это нужно например вы хотите запретить использование привлечь контейнеров везде кроме на ресурсы с определенным лейблом полисе очень легко для модифицировать добавить один из для этого если это нужно для вас это полисе где-то что-то писал я или кто-то из а война это open source доступные полисе который поставляется вместе со пей и их довольно много то есть на того чтобы начать использовать убей не нужно писать свои полисе довольно много уже написано их можно просто использовать какой собственного окей реализует функциональность полностью под security policy и реализует он их с точки зрения кубинец точно таким же образом через обвешен вокруг то есть может то целиком изменяют заменить помимо этого можно управлять источниками ваших имиджей правильными легированием конфигурации сервис мир игр с контроллеров и ещё много чего все с помощью одного решения одного способа описание правил и политик если вы не хотите использовать купеев каким-то причинам большая тайна тела это после 9 полюсе и писать кастомные обвешанные фуке 5 кастомной внешним хуки сложно и их потом надо еще и поддерживать что как бы играет пользовал ok и gate keepers позволяет удобно решать все эти вопросы без написания кастомных год на самом деле но дакар доклад про security в этом году на google плохо без термина shift лев когда мы все пытаемся делать максимально рано в нашем цикле разработки в купе об этом тоже задумались и ситуация вот такая что а почему бы нам не как у нас есть кластер и до того как у нас происходит deployment ведь у нас все ресурс соответственно в коде в любом случае для этого есть сделаю есть решение которое называется опекун в тест и она позволяет применять в рига по политике рига правила против на самом деле любых структурных данных но специальный реализован для интеграции всей и подходит на самом деле не только для кубер не то с можно использовать его стира формам уходит с определением по плану дженкинс и чтобы он был правильный с точки зрения каких-то правил которым решил с найс организации и что очень важно вы использует те же самые правила те же самые политики которые используются в детки бери то есть то что применено в вашем кластере тоже самое можно проверить про бравым тем самым кодом в вашем всякой плане счет до самого первого дипломе то может быть даже до существования кластера например у вас есть хомчак и вы хотите проверить что вы его сможете за деплоить на кабинет с кластер определенной версии говоря об обновлении какие-то и 5 пришей декаде прикатится становится недоступной meiko и ваш писание диплом это может не работать с помощью простого командой на и набора палите набора rega правил из проект де прикид опять же доступен на гитхабе который описывает и пей который где прикатится из интернета со можно легко в одним командой нам проверить что ваш диплом от будет работать на новый версия кластеры того как вы обновили свой кластеры провели первых дипломе сразу знаете что нужно обновлять и какие ресурсы больше не будут доступны довольно удалось опять же не нужно писать неких правил этот проект публичные конвенте его поддерживаю и последний только который я хотел бы затронуть своем докладе как собственно наши изменение откуда на таз кластере случается и как них приносят в целом есть две модели как мы можем начать изменение или три ведь изменений в нашем кластере первая модель лет пусть модель когда мы извне кластера с помощью управляющего воздействия гипсе телепень нашей сидит движок сконфигурирован таким образом запускаем изменения состояния кластера это что я называю традиционный подход то есть мы так делали когда не было губернатор сэм и так тепло или типа всегда и в этом случае у нас ключи от кластер имеется в нашем deeply или в нашем себя сиди и в целом с точки с точки зрения комплаенс и с точки зрения security мы знаем как работать с таким сетапом то есть и мы знаем как правильно и безопасно хранить ключей мы возможно используем ключи хранилище мы знаем как организовать зафиксирует нашей pipeline потому что мы так уже делать док обернется и отношение с тоже нашей компании и мы можем просто использовать эту модель если мы только мы начинаем использование купер нетто со или просто хотим делать что-то по-новому есть в современном виде еще и помады когда кластер сам применять на себя изменения на основе описание заяц стоит или состояние в котором мы хотим видеть наш кластер которых они в ком-то внешнем источнике это то что называется гипс если орда сиди и flags который его реализует самые популярные проекты с точки зрения и в этом случае если это сделал не к там идеальном случае этого решения наших комбинации контракты на в принципе не доступно никому извне потому что она доступна только на ios необходи нет необходимости в этом что как бы полезно с точки земли за опасности комплаенс если все-таки нужно получить доступ он опять же может быть за проверены с помощью и гитов изменений и в этом случае у нас есть полная трассе билете в принципе использования пыл модели позволяет обеспечивать потенциально лучшую безопасность и более простое решение с точки зрения комплаенс а но это новое решение соответственно потребует дополнительной работы по реализации завершается доклад основные моменты которых мы сегодня поговорили не забывайте следить за сетевым трафиком и его шифрования в интернете по умолчанию не шифрованный может быть это для вас проблема может быть не стоит об этом задуматься стоит также задуматься о воплощении и откуда берутся ваши имидже и пакеты которые потом используйте разработки в ваших подошли deployment а я из комбинации с бич марк это современные без практики хорошо описаны по security и целом надежности кубер нету со и больше поможет вам с проверками ваших кластеров на соответствие этом дач марку eaten полисе и gent решения для policy как код для современной обычной структуры и в том числе cabernet оса позволяет контролировать состояние вашего кабинет классно в течение его жизненного цикла с помощью git кипера и конфет с позволяет проверять ваши deployment в рамках pipeline и на этом у меня все большое спасибо за внимание да спасибо артем на самом деле мне поумнеешь понравилось интересна тема очень были затронуты суши но по поводу этого замечательного языка да про которые ты рассказывал мне кажется они взяли не тот язык и кажется если они взяли лис который можешь взять два года то они бы на нем смогли вообще все описать универсальный идеале язык который к сожалению узы они они взяли на самом деле на мой взгляд правильный инструмент как раз вот это идеологического программирования как раз про то что описание правил а если говорить про лису я работал с компанией которая она до сих пор пишешь на common lisp массивны параллельные системы для консилер современных устройств и у них все очень хорошо в этом ulysses до вольский живой силы слушай ну мы наверное про мотоциклисты не успеваем нужно поговорить в зал чатике да можно погрязнуть этики суши вот у вас в плане получается стандарт в эту все разработчики то есть или тестами и сиди покрытие считаете мою абсолютная проект подробно не говорил у нас есть стандартный pipeline где есть несколько этапов начиная стала статического сканирования и unit тестов потом тестов на уровне приложения функциональных интеграционных performance все интегрировано делаем по порядку в процессе делают операции над докеры magic про которые я не сказал сказал из этого мне кажется у меня на миледи куда ты прочитал над scarce время закончилось она точно закончилась артём сергей спасибо вам за классный доклад знаете ли вы что мы делаем сейчас мы сейчас идем на изюм комнат курсу до зум наш наше все если бы не зум то не знаю где мы сейчас с вами были и там вы продолжаете общаться отвечаете на вопросы не забудьте пожалуйста позволить людям говорить там есть специальная кнопочка опция и по желанию можно показать еще лиц а потому что я вот лично получал фидбэк от того что я не буду задавать вопрос до тех пор пока мое лицо не покажут потому что как-то стрёмно говорить из бочки но как-то так спасибо спасибо"
}