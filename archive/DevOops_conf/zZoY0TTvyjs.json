{
  "video_id": "zZoY0TTvyjs",
  "channel": "DevOops_conf",
  "title": "",
  "views": 0,
  "duration": 0,
  "published": "",
  "text": "Всем привет да Всем привет Меня зовут Роман Миронов Я инженер в компании Пикник И сегодня я буду экспертом докладе Дима Дима у нас тоже практикующий инженер и ментейнер пройти холмейф немножко подробнее о себе расскажи вообще Этот проект который собственно появился в компании внутри компании работа.ру когда я столкнулся с кучей с большой проблемой Когда мне было очень много сервисов в общем-то где мы с тобой и познакомились вот Да где мы вместе с тобой тогда может быть немножко поделишься там как-то пришел в devops Я думаю многим людям интересно слушать background что было доработал Ну так получилось что я думал что будет разработчиком я писал код уже какое-то время и как-то так получилось что Меня занесло в админ администрирование вселиктерии и там я стал работать его сам того не подозревая и мне столько понравилось что это уже более 5 лет пишу ямки и все еще меня от них не тошнит Да в принципе я рад что мы с тобой познакомились на предыдущем проекте Я активно попользовался халвевым и сам являюсь использую сейчас В текущей работе Я думаю сейчас самое время перейти к самому докладу рассказать вообще что такое и для чего ты его создал тебя слова Начинаем тогда собственно доклад Окей познакомились о чем-то доклад у нас будет мы поговорим о точно ли нужно делать еще один инструмент Как вы видели И ты нас дипломатул мы поговорим о болях которые у нас были Потому что если не было более не было бы инструмента вот мы поговорим про те практики которые приносит нас будет менее воркшоп в конце Я надеюсь что он пойдет по плану и Мы также по немножко пообщаемся дискутируем и о том какие Какое будущее ждет вообще инструментов развертывания чем мы ожидаем Что ждать индустрии думаю это будет очень интересно Далее для какой-то доклад собрались мы чаще всего работаем выбираете сам да Или так или иначе они услышали те кто работает в губернате сам так или иначе уже работают скорее всего чертами Что такое и более сколько Я уже много химчартов или если вы ищете какой-то инструмент чтобы управлять хамчатами то это доклад будет Особенно для вас интересен и Давайте сначала подумаем вспомнить вообще А зачем создавали Хилл Да зачем он был нужен Так если вспомнить то Хилл по сути у нас является шаблонизатором и внутреннего куб сетей Он позволяет менеджерить группу каких-то манифестиков Да и что это группа манифеста кафе и после этого мы говорим что примерно 1 чарт это у нас один сервис Один микросервис который мы примерно поднимаем и но так складывается что у нас продукт который мы разворачиваем обычно в компании он состоит естественно не из одного сервиса не задала микро сервиса он имеет какой-то более сложную структуру состоит из куча сервисов Вот и более-менее мы говорим о том как этим всем управлять и изначально представлял отличная мог лишать эту проблему Когда мы все упаковывали но что становится первую очередь больно как чаще всего у вас в компании может быть не один проект А какой-то их Некоторое количество Да допустим в компании 6 проектов в каждом проекте примерно от 10 до 20 там сервисах микросервисов это такое средний показатель С каким я сталкивался и каждый из этих проектов имеет от 2 до 10 далее что каждый хинчард может расти да то есть сначала составлял из двух дипломом трех до через год их становится целая пачками новая какая-то бизнес логика и его нужно тоже поддерживать как-то мочить эту всю логику и так далее Также Нужно вспомнить про то что контуры бывают разные я их условно тут разделил есть статичные То есть это фич-ветки какие-то да может релизные ветки которые у нас могут быть тоже параллельно друг от друга статичные просто стоишь можешь какой-то именованный контур перформанс или тестинг или какой-то статичный и все нужно как-то конфигурировать и скорее всего ваш микросервис может выглядеть Именно таким это просто такой общий случай Да вот у нас несколько приложений связанных несколько сервисов и другими сервисами и у них есть естественно разные какие-то порядки друг друга зависимости нужно указывать одному сервису какой-нибудь путь DNS или http URL или еще какой-то для другого сервиса и этим всем становится очень трудно управлять особенно в процессе когда есть разные окружения у каждого окружения допустим нам нужно поднимать очередь да Или там Если у нас есть фрон тендеры то им нужно понять только им остальное если у нас есть который занимается с лендинга поднять моему b2p не нужен для тестирования как достигнуть вот такой гибкой манипуляции этими конфигами далее естественно нас может возникнуть что в проде нам нужна база данных То есть мне нужна база данных которая будет подниматься потому что вроде Мы будем использовать Excell Database который где-то у нас отдельно развернута конечно же ветки нам как раз таки очень было бы полезно чтобы нас поднялся данных для временного какого-то этого использования далее это уже непосредственно более связано с самим химом Да что Никакой полезной информации время диплоид здесь нету ни логов ни событий куба если что-то пошло не так Будь добр пойти посмотреть куб Сетелем Что происходит на какой-то дешборде А в чем проблема нашего и Быков это или крышу Быков А и это приводит к тому что во-первых мы начинаем оборачивать ваш даже для того чтобы получить логин можно написать какую-то обвязку все телек который будет выучить ресурсы что не очень удобно во-вторых когда у нас появляется много конфигов мы с этой Мы должны передавать какие-то параметры через сайт давайте это всё тоже начинает выглядеть очень красиво и ужасно мы теряем тем самым наш прекрасный инфрак через год читать и поддерживать и как только мы начинаем приносить Наши все практики у нас резко падает наш уровень графика компании и в лучшем случае это становится практикой пасты копипаста тоже хорошая Но это в лучшем случае она приходит фальшем мы просто теряемся и у нас все это быстро становится каким-то Legacy который трудно поддерживать помимо этого съем особо как-то я гарантирует Как работает секретами чем хранит и секреты которые мы передали волос достаточно открыто это может быть для нас также критично и взять от чего люди предлагают использовать такое решение как камбела чарт Я категорически против него потому что во-первых нужно еще один чат который нужно поддерживать во-вторых через него как начинать это прокидывать и вы занимаетесь прокидыванием прокидыванием прокидывания куда-то туда и обратно чат может вести себя действительно еще так сказать на практике выясняется помимо этого очень трудно работать с их какими-то вытеснениями Когда у нас много всяких репозиториях которые нужно один час оттуда каждый раз индекс надо подкачать это все очень тяжело сейчас немножко не все так отлично Как выглядит наша с первого взгляда Давайте поговорим о том как вообще да И что мы до этого пробовали примерно мысли о том что нужно как-то скомпозить весь наш проект как-то его собрать воединок 2020 году и к чему пришли каким решением тогда еще два года назад можем принципе вот как я описывал на скриптинге что-то сделать Да написать основных наших критериев нужно было получать логи Да нужно было уметь композировать Этот проект как-то в Едином виде решать Яндекс туда достаточно субъективное мнение что должен быть был какой-то Саппорт поддержка получения фидбэка вот это все в части саппорте я тут примерно оцениваю от 0 до 10 до насколько можно было это хорошо делать и фид критерий это настолько это инструмент подходит именно в нашу компанию под наши процессы по то что уже сделано и если тут можно видеть понятно скриптинга Можно конечно много что сделать Да ну Саппорт здесь никакого под фид он тоже нам никак не подходил позволяет его написывать не позволяет как-то все это красиво писать химфайлы не предоставлять логи но позволяет красиво собрать весь стек нашего единого все наши чарт и этим управлять более менее хорошим Саппорт можно было найти какую-то поддержку и так или иначе где-то можно было найти одного там из 20 боксов которые мог как-то поделиться своим опытом об этом он отлично подходил в компанию процессам также мы немножко рассматривал смен Ну естественно блогов нет немножко другая архитектура вот также у нас компания уже был более-менее уже какие-то события хотя бы возвращает и показывает не очень Может Полезно не очень очень удобные но композите поддержку и тоже по процессам компании нам подходил это не нужен каким нужно было внедрять какую-то новый инструмент опять же он у нас уже был этот момент терраформ и какие-то чарты мы когда разворачивали кубер мы уже там несколько сероформ и поднимали далее Конечно можно поднимать helm и через какой-нибудь систем конфигурации менеджер у нас на тот момент балансе был Да ну а если мы почти не занимались и как бы давать эту тему задачу на рендеринг на постановку валуйях ты не очень хорошие мысль была и мы знать приложение это было все тоже очень удобно Также мне до этого уже был опыт работы с версию верши из супер Киллер фичей которая тогда очень ее хотелось это как раз таки получать логин какие-то аннотации попасть более-менее я так был в комьюнити Саппорт прекрасно структуру репозиторов он подходил нам чуть лучше чем массе был но на самом деле примерно также Вот и мы долго не хотели делать еще один инструмент поэтому мы выбрали сначала heal файл Да мы всем файлом прожили какое-то время и нам пришел фидбэк того что он работает достаточно медленно достаточно плохо достаточно и мы начали ходить и смотреть что происходит не так и нужно действительно писать новый инструмент потому что нужно было сначала конечно формировать гипотезы А что мы хотим от Нового инструмента Зачем нам нужен что это должен быстрее выше сильнее Как как что посмотреть посчитать далее мы хотели написать маленький после этого сделать какие-то тестовые запуски собрать обратную связь как самих себя от разработчиков которые видят его все И после этого Прости какие-то первые использование его в продакшене Да и немножко подумать о том как его дальше развивать как мы это его видим Так какая у нас была гипотеза гипотез у нас были такие что мы можем написать некую инструмент на окошечке который будет напрямую работать с объектами с ДК Хилла и Куб сетейля и самое важное что мы хотели это сделать чтобы это работало быстрее очень намного быстрее чем файл и как файл работает Так что просто контентинировать правильным образом строку Да и отправляет ее ваш условно говоря и это все работает эту строку обратно и возвращает ее к вам в общем После этого мы как раз таки на тот момент файл еще не было парализация никакой мы хотели все это сделать отлично параллельным мы хотели уменьшить опять же реализации при работе уже напрямую с объектами создавать какой-то дополнительный контекст все решать рамках одного контекста также мы видели того что мы можем перехватывать какие-то события довольно низком уровне тем самым могли получить во-первых удобной логии так как нам удобно и самое что очень круто мы хотели получить вообще полный контроль над тем как я он работает и получить некоторые управление очень очереди релизов которые у нас сформируются в нашем стоке И как же мы внедряем в эфир как я сказал у нас уже был Там проект 7 файлом он уже какое-то время два месяца работал собственно мы просто пошли поменяли слово Файлик на вейф Да и вся и винаре там и раскатили это надев увидели что в принципе все отлично работает Да Далее мы это катнули сразу и настоящее просто в этом проекте и дальше пошли на остальные проекты и немножко с первых список таких фичей Киллер фичей которые сейчас Лайф имеет это естественно параллельность релизов репозиторов Да это вывод логов наш самый любимый то что можно сходить в Wall TV Secret Manager и прочие какие-то хранилки секретов и базы можно разделять вэллу из по окружением это немножко про практики те которые приносит дальше поговорим естественно это очень крутая шаблонизация потому что больше всего в этой и упирались и управление диплоим это уже такой Next level что у нас есть зависимости между релизами У нас есть возможность какие-то через и это управление стратегией поведения в этом чуть дальше подробнее обсудим Да и естественно проект мы начали Сначала мы делали какие-то фични но больше для себя Но это было консольство нам стали приходить люди с каким-то ищут сами каким-то фичеры квестами и мы увидели что мы не одни страдаем во-первых такой болью что это нужно не только нам нужно еще и другим людям и мы стали активно работать в комьюнити мы сделали телеграм-канал мы сделали отлично и стали вместе с комьюнити как-то развивать вместе уже и это получилось вообще очень хорошо стали получать примерно собрать Как люди используют то есть мы видим что лайки идут мы видим что еще кто-то что-то пишет в общем спрашивали Кто Зачем как и использовать Да насколько их практика коррелирует с нашими практиками И высели еще то что тут как наверное с радио что в нескольких разных местах люди приходят хорошим идеям примерно через пробу ошибок все приходят в каком-то одном примерно слову и процессом и мы стали такие какие-то кейсы собирать и объединять Да тут можно также увидеть наш фидбэк что люди пишут что всем спасибо за проект Но потом через какое-то время у нас даже стали появляться контрибутеры из говорящих стран и уже стал от этого работать еще более интересной И приятней Я думаю мы можем нашему комьюнити искать Большое спасибо за то что они пишут еще помогают нам с этим и также зрителям текущей презентации текущего доклада ты всегда можете зайти в чат этого доклада и сдать дополнительные вопросы по документации по продукту или вообще в целом Спасибо свой комментарий Итак документация у нас во-первых сначала была вредны понятно было что это было все очень плохо и родни начало расти в какой-то колоссальном масштабе поэтому первое требование документации это конечно было ее наличие вот второе это то что должно быть красиво и удобно красиво это пунктик лично еще мой персональный Потому что я не могу быстро найти мне если неудобно и пользоваться начинать мышка подташнивать Мне очень хочется также мы как я сказал собирали базовый сценарий использования и мы хотим как раз таки чтобы люди Придя к человеку чтобы не проходили опять же весь этот этап придумывания и так далее Мы готовы мы пытаемся чтобы у человека сразу во-первых у него какая-то боль мы говорим смотреть Если будешь использовать вот такой вот кейсе вот такой вот сценарий такой скорее всего это решить эту проблему уже наперед мы ее увидели тем самым уменьшим во-первых порог вхождения и чтобы вот человек который только Вообще начинает работать хромом или видит что кубинате с его приложения начинает очень сильно быстро масштабироваться и сложность проекта растет что не посмотри у нас есть который ты сможешь дальше расширять и он отлично ложится И твой слово не твою компанию естественно она должна быть актуальном состоянии мы достигаем примерно через автогенерацию новой версии когда нас выходит новая версия и естественно документация должна иметь потому что документ меняется инструмент меняется достаточно быстро и какие-то маленькие вещи можно забыть поправить Поэтому всегда должна быть возможность также документации откатиться поэтому документация Сейчас вы где-то таким образом вот видно что нас версия 023x который аккумулирует себе всю версию минорную 23 и она выпускает патч-версии потому что он по версии это патчи собственно такая красивая нас получилась приглашаю всем пойти посмотреть и думаю настало время небольшого воркшопа так Давайте попробуем сначала вот Я открываю документацию Да вот я уже на 24 версии Ничего себе как быстро время летит уже 24 версия так и мы попробуем сначала установить у меня маг Да значит Поэтому я выбираю инструкцию под лак такой вот одной незамысловатой командой я Вставляю так так Ну естественно Huawei у меня уже установлен посмотрим что он работает Да отлично Все работает и тут есть описание что можно нулевой шаг пропускать и можно вот есть основные две команды брать план Билд строит план и развернуть наш стек команды очень сильно вдохновлялись доктор чтобы он был такой же простой понятный Давайте попробуем сделаем так я до этого уже подготовил большой репозитории Тут ничего нету кроме него посмотрим немного Ну тут у нас просто поднимается инжинкс без ничего абсолютно просто инжинсы мы какие-то параметры хотим чтобы он поднялся Ну раз у нас тут Нет шаблонизации давайте мы немножко сделаем попроще сделаем Просто хеллоев яму И теперь мы попробуем собрать наш так увидели что Билд прошел долго и у нас появился Папочка посмотрим что не получилось Там хранится по сути список во-первых всех манифестов и план файл который он выявил что что будет диплоиться собственно мы пока никаких параметров Давайте немножко посмотрим что там вообще есть Мы видим что мы хотим поставить какой-то репозитории у нас нет regis 3 никаких полостей и мы хотим писать релиз инжинсам у которого таймлат пять минут Почти то же самое что мы красиво описали в яму Так теперь Давайте попробуем поднять наш стек для этого можно просто командочку и долго-долго ждать что оно сейчас заде плоется задеплось хорошо но скажете А где же Локи логике через все параметры окружения это очень удобно и тут есть флажочки и Давайте включим блок чтобы получить логин можно сделать конечно Просто но для начала прежде чем мы включим кубок Давайте создадим Файлик Engine Xiaomi и попробуем переопределить количество реплик нашего инжинса и снова потом отредактируем и добавим что Да которая лежит с нами рядом называется а и теперь давайте выполним и чтобы заново команды был не выполнять мы попробуем сразу выполнить все это в одну команду просто для удобства и посмотрим что нам скажет там уже было два джинсы хорошо все он остановился Давайте вернем теперь чтобы был одна реплика была вот мы увидели Hill GIF который говорит что у нас поменялась реальное состояние что там было два стало один замечательно и вот сейчас он приводит к состоянию 1 если этот info можно выключить командочка Прогресс но так для депага мы сейчас это все оставили Окей отлично У нас одно приложение из одного все задеплось Давайте выполним командочку посмотрим что здесь работает в количестве 1 штука вообще все замечательно и отлично работает так но это был совершенно очень простой пример Да у нас еще есть пример того что он позволяет уже более интересные вещи самому себя шаблонизировать мы его переименуем и как работать в таком случае если у вас есть янул и сюда мы уже можем поставлять какие-то перемены окружения Допустим мы теперь хотим изменить нам Space в который мы устанавливаем наше приложение для удобства Мы хотим взять переменную окружение нам Space и теперь сделаем назовем и давайте пока поднимать не будем посмотрим только набил что он вообще скажет вот он говорит о том что я не могу прочитать потому что надо выполнить команду яму Отлично мы ее выполнили теперь он говорит что у нас это командочка яма появилась то есть таким образом можете как Просто сразу описать ваш текст и сначала его за косплейте вот появился у нас файл такой и он сюда просто поставляет Вот который мы сделали Но дальше Мы также выполняем команду сейчас Билд чтобы он всегда выполнял команду таким образом сразу сгенерирует тот Файлик который делает следующим шагом и видели что окей убил нас появился теперь посмотреть что прошлый раз стоит отлично и как же мы можем далее использовать уже переходить на практикам открываем документацию и начинаем читать что же такое у нас умеет немножко проложу про установку установка есть на все архитектуры операционной системы есть образ контейнер докером подманом все отлично поднимается также для любителей безопасности есть Скретч образ который нет обошлась как-то для удобства Также можно собрать из исходников написано и и посмотрим на те фичи которые есть Как работа немножко законтацией тут значит нас все объекты которые есть в ямле да то есть список релизов которые сейчас мы только ими пользовались его сравним Да вот у нас есть список релизов это обычный Ямал эндшеры и репозиторий который мы только один поставили Давайте посмотрим что можно в репозитории сейчас конфигурировать из обязательных параметров видно что это можно Форс флажочек еще передать если очень хочется так и релизы поля обширные они немножко делятся те Аля которые работают именно происходит когда происходит именно сам диплои команда так и тут примерно делятся эти все общины на две категории те которые приносит и те которые есть от самого то есть такие конкретные зависимости Да что мы можем сказать что одно продолжение зависит от другого мы можем также сказать что если есть и он будет пропускать если этот будет считать что работает Точно также и немножко такая новая Киллер фича это среднее поведение что если наш хинчард столкнулся при развертывании с каким-то из этих статусов то мы можем только онлайн может подать ему команду что трубы этот сил чарда хелмора есть или вообще удалить или ничего не делать оставить как есть абсолютно так и мы можем путем манипуляции такой же добавлять к нашим манифестам к черту какие-то нотации аннотации которые у нас есть аннотация чтобы не показывал эти ресурсы это бывает Полезно во-первых если у нас есть какие-то секреты или нас какой-то есть Файлик который всегда генерируется их не нужен То есть мы можем его тогда скипать второе то что на наш долг умеет работать еще и съем руками можно отправить по умолчанию обычно не делают очень полезно и используя такие вот аннотации добавляя к нашему ресурсам мы можем получать какие-то сервисные сообщения или контейнеров так и немножко поговорим про шаблонизацию шаблонизации Есть два вида сейчас на текущий момент это которая от спрыга то есть библиотека от Хилла если вы с ней работали то вы прекрасно все затем плывите и можно переключать шаблонизаторы использовать параметр templator и передать Это просто значение Complete это можно Также получить гребнем видим что чтобы выбрать Engine Вы можете выбрать спрейки или gumplate по умолчанию используется spreak и как раз таки когда мы писали вот наш Файлик Ямал тпл мы использовали задаются вот таким образом выйти они задаются вот таким вот образом и тогда нам придется поменять наш шаблонизатор сказать если сказать что мы хотим использовать Complete а ну да вот он говорит что NF там нет такой функции и это отдельно уже есть ценами откроем видим директива А есть И где-то попроще было Хорошо давайте сделаем так как здесь вот так написано так так это будет работать точно так же как работала на комплейтерский Вуаля Все работает и результат принципе тот же самый отлично так так так что еще мы хотели показать самое важное самое важное что в локально мы все это запускали мы это все работает но никто из нас локально же будет этим пользоваться но все-таки диплом что-то и куда-то поэтому нам интересует интеграция интеграция выглядит все достаточно Просто если у нас есть то мы просто устанавливаем Да бинарчик и и просто он наш приложения самое важное самое сложное задачи это как-то доставить туда наш секрет доступа к губернатису из github Runner Sweet labsian все то же самое только мы используем уже не какой-то экшен который у нас там специально собран для этого мы используем также просто официальные докер образ который я тоже могу сейчас понять отдельно И говорим что такой пример Сначала покажи нам все параметры которые задаем после этого пожалуйста отшебанизирую если это нужно сделать команду три командочку эти кстати две задачи можно выносить на разные жопы допустим вы хотите в одном случае сделать команду билда а в другом команду уже разворачивание нашего чарта То есть например форму на одном шаге мы генерируем план и скажите отлично Все работает но у нас есть еще всякие принтеры hilthard и прочие инструменты как с ними будет работать собственно тоже никаких проблем нету тут пример только для getlabsi Мы можем взять вообще любой инструмент который занимается проверкой безопасности на проверку блин тогда принтер и просто Передаем туда hellway в план то есть адрес того Где находится план вот этот вот как раз таки точка манифест он их видит и просто их вот здесь вот видно что мы после плана и эту папочку Туда ему передали и отлично пойдет проверить убивал Плуто и все прочее также работает пожалуйста Мы также план манифест только манифесты нужны и так далее так все с этим тоже разобрались еще очень удобно использовать потому что раннер можно запустить уже в куберы и через сервис аккаунт ходить наши черты так так и вернемся вот примерчик небольшой как это выглядит который сейчас мы и скачивали и посмотрим что у нас как диплоиться не плодятся Сначала посмотрим что произошло произошла остановка чарта с установкой потом мы пытались зашебанизировать отличная все тоже самое увидели потом мы выполнили план Да увидели что там нет какого-то релиза и Huawei фонд достаточно хитрый он умеет проверять манифест и двумя способами первый это когда он сверяет два новых файла давайте что лежат в папке то кстати локальный Диф и может пойти в uber и получить манифесты там и попробовать смочить с тем что сейчас именно в продакшене находится по умолчанию используется второй вариант потому что он более интересный И тем самым Если вы еще классе не развернули пытаетесь увидите что случится куда-то уберу у него нет и он упадет с ошибкой с ошибкой не пойдет он скажет я не могу получить текущий лифт план так и не задеплоился у нас потому что ну в Канди проблема собственно свесными лимитами это можно пойти будет поправить это не супер принципиально так и теперь немножко поговорим про практики где их тут найти то что мы все собираем пожалуйста есть Крик мод наш быстренький для тех кто хочет только начать использовать и вот например практика того что нам нужно чтобы наша каждое приложение задеплоилась отдельная Space и мы должны иметь какую-то папочку где вот все эти валуйсы мы собираем и точнее шаблонизируем мы можем все просто перечислить все эти пять штук этих чертов но удобно мы можем это все балансировать прекрасным образом мы создаем отдельную Файлик россиян да барсиям ли мы как раз таки указываем состоит какой чарт какой репозиторий Какая версия и в общем мы начинаем всех их тут перечислять видим что у нас как бы совпадают поля что валу с ней у нас совпадает потом возьми нас имя самого релиза Да вот опять же черный она совпадает с названием релиза и это все можно очень быстро затем планировать сделать яму чтобы перевел куда нам надо далее мы получаем уже трендеринг такой красивый манифестик что видно каждый проект Как тебе плоется опять и тут уже появляется фича который мы я еще не упоминал это так с помощью тагов мы можем сказать что из этого всего столько Ты должен развернуть только то приложение у которого есть какой-то определенный Так почему тут видим что мы реагируем каждое приложение по его же имени что пожалуйста юмора потом поднимем его пожалуйста и он это сделает далее мы можем эту же workflow перенести вся Седина gitlaby это все будет выглядеть таким же образом тут же дефолтные которые мы видели из этих started Да вот мы тут делаем Что пожалуйста еще плавно пожалуйста сохраним на две недели для удобства пойти посмотреть так и вот мы говорим что тепло и можем через параметры окружения при старте плане передать план и он развернет только всё удобно так Ну и мне тут уже подсказывает что скоро пора закругляться еще немножко пару слов про то что таким образом можем выделять либо на всю компанию либо открыть вдруг внутри компании очень удобно объединять волосы товары есть пример того что использовать такую структуру У нас есть несколько баллов сразу их четыре штуки один значит используется всегда на все окружения для всех приложений второе используется только для под конкретное окружение и вот таким вот образом через параметры окружения как я показываю провод что-то потом мы используем название релиза и опять же контейнируем основание релиза и так далее как мы помни валуевцы работают тем что каждый день предыдущего и мы можем вот через вся и также определять разные стадии то есть вроде Мы можем использовать развернуть только это приложение И как же мы можем развернуть это приложение и еще здесь начать какие-то дополнительные черты какие-то сервисы которые нужны также мы можем это через достаточно удобно они выглядят эта структура таким образом вот у нас есть инфраструктурные черты которые там нужны для стрижая дефеток вот у них есть там это всегда используется это релиз Понятное дело и продуктовые сервисы выглядят так то есть это те настройки то есть для всего дэва для всего прода для всего стрижа вообще для всех приложений абсолютно которое у нас есть то есть туда удобно просто имидж был секрет написать один раз и больше нигде это не пишите опять же классе туда за предать и все и отлично Все будет работать и опять же вот перформанс про три с разные какие-то окружения и все эти все настройки их тоже можно шаблонизировать и передавать таким образом устроиться Граф Ну тут никаких зависимости нету в нашем случае были бы зависимости а смотрим Что что-то задеплось смотрим Что кубок работает видим что все 6 приложений работает круто отлично замечательно Итак и какие у нас планы на будущее во-первых довести все до мажорной до мажорного релиза мы планируем больше работать сейчас чарт блоками в план файле так как чарт это тоже очень важная структура которую нужно тоже трекать планом это добавить поддержку контекстов вот что пока что умеет работать сразу с несколькими свесами Да внутри одного контекста но не между сразу контекстами это еще один уровень абстракции который может пригодится это больше работать на поездками сценариями которых я немножко упоминал выше но ниже мы дискутируем и это сделать логики для таких команд как и стал еще Кстати мы сделали самое важное и удалил все что мы подняли замечательно а ну понятно там уже не тому же этого нет потому что я это ударил можно можно было отработчица или удалить Так значит далее самое важное вещь Это Каким должен быть вообще инструмент идеи в 2020 году Зачем нам вообще пришлось создавать новый инструмент Ну что Как Мы видим что задачи у индустрии растут проблемы индустрии растут и все-таки не было бы новое инструменты Если вы старый бы решал такие проблемы во-первых уметь накатывается по шагам Несмотря на то что говорит нам о том что все ваши сервисы должны работать вместе ждать другой сервис это говорит проходили тебя но это не говорит про сиди сам сидеть он чуть все-таки другой мы должны получать логики все-таки я думаю это нормально практика чтобы получить это все извиняюсь так это естественно получить Лог параллельного диплоя в том числе при развертывании зависимости Лог сейчас работает очень плохо и делать эти панические сценарии что все-таки сидеть у нас какая-то гибкая вещь Она живая она может меняться от того что реально находится сейчас может зависеть от другого релиза то есть нам сказано сказать что они не релизм не зарегистрироваться или в таком статусе туда должен делать другую какую-то вещь и также должны произойти откаты откаты должны тоже быть как-то сценарием нельзя команду на откат это нам как-то может менять поэтому Нам нужен какой-то один интересный поведение статусов нам нужны какие-то более расширенные статусы о том что сейчас происходит реально и управление сделать сценарии которые могут управлять по этим статусом зависимости Хилла Я думаю все сталкивались с тем что мы используем какой-то чарт Мы хотим его как-то поправить да нам не хватает сайт контейнерах нет этих сайтов контейнеров Либо вы контрибуте в этот чат пожалуйста Либо вы начинаете форкать нельзя его красиво использовать тем чтобы Дописать туда какой-то новую сущность А если мы хотим туда просто давать какой-то новый манифест это еще более-менее можно решить каким-то другими инструментами но если мы хотим поправить уже имеющиеся какой-то манифест внутри то нормально Это просто не отвечает опять же нам нужно парализация абсолютно всех стадиях что у нас есть шаги и каждый шаг должен уметь работать параллельно и если у вас еще есть какие-то предложения или замечания мы можем их плавно обсудить уже наша хотел сказать да обсудить Какой должен быть инструмент сидений инструменты 2002 году я думаю много у кого есть и предложений или вопросы потом рассказать о своем видении этого продукта это инструмент и я думаю многих людей появились вопросы по этому докладу потому что он достаточно интенсивный и возможно не упомянул и я заданный один вопрос который был самым интересным и он спрашивает А почему вместо того чтобы создавать свой инструмент вы не решили сделать в half-файл либо вместо того чтобы решили изобретать инструмент свой Это хороший вопрос но как мы как я говорил мы у нас файл и Казалось бы вот немножко умеем программировать Давайте пойдем просто делаем пудры квесты и когда мы исследовали проблема того почему файл работает так медленно и почему он работает вот так вот с тем что там происходит из точки архитектурного решения Это потому что сроки То есть он просто делает наш инструмент работает напрямую ресурсами что по-любому будет быстрее Поэтому туда не имеет смысла вообще потому что с точки зрения архитектуры это другой инструмент он не позволит гибко работать из тюрьма купцы тела и прочих Вот именно поэтому до сих пор не внесли какой-нибудь гудок Да или если его сделать то примерно потому что образу И подобию как я описывал пример со скриптингом чтобы просто пускать и два разных процесса и которые там один диплоид другой слушает но не все в один процесс чтож ребята тогда всех ждем на дискуссии Я надеюсь я вас заинтриговал у вас появились вопросы и вы хотите обсудить какое-то будущее инструментов что подключайтесь всех ждем Всем спасибо"
}