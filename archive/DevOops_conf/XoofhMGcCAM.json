{
  "video_id": "XoofhMGcCAM",
  "channel": "DevOops_conf",
  "title": "",
  "views": 0,
  "duration": 0,
  "published": "",
  "text": "мы с вами продолжаем нашу конференцию devoops 1023 сейчас для нас выступит Денис Антонов из компании рскб интех и расскажет про платформу инвестиционного бизнеса для вас сегодня работает ваш Эксперт Данила Богданов из контура так ладить Денис расскажет про то как они в Россельхозбанке двигались от прошли путь от Legacy от Lego симонолита до современной платформы для микросервисов и расскажет про то как в этой платформе устроена система мониторинга перед докладом чуть пообщались Он рассказал про то что видит в будущем очень большое место в будущем система мониторинга большое место для искусственного интеллекта Поделись пару мыслями на этот счет Да Всех приветствую на конференции по искусственным интеллекту я вижу то что нужно освободить инженеров от рутинной работы которая может выполнять машина и соответственно с системами мониторинга заставить машину собственно уведомление читать какие-то кейсы собственно делать чтобы инженер занимался собственно своей работой и улучшал состояние системы сервисов этой области был последнее время думаю все возможно так на этом предлагая планы переходить к докладу также напоминаю то что нас на экране qr-код в котором вы можете перейти в чатике задавать Денису вопросы которые мы озвучим в конце доклада слово нишу Спасибо Всех приветствую еще раз на конференции очень познавательно интересная все-таки конференция проходит очень нужная так считаю расскажу немножко про себя яйца инженер и менеджер системы на платформе IPS Моя работа на данный момент составляет ту часть где я выстраиваю процессы сопровождения совместно с коллегами с разработкой и вобстером аналитиками мы работаем над тем чтобы выстроить системы более качественно по сопровождению и соответственно занимаюсь облагораживанием так сказать система сервисов чтобы они работали стабильно исправно и минимальное время было затрачено на различные проблемы инциденты и восстановления данных сервисов Я работаю на платформе IPS это Инвест платформ Solution платформа является единой технологической платформы для инвестиционного бизнеса на который собственно разрабатываются и устанавливаются системы и сервисы позволяющие бизнесу более легкое и более конструктивно подходить к вопросам решения таких задач как инвестиции котировки также рабочие места для собственно непосредственно сотрудников банка Ну дальнейшем я думаю что это коснется простых пользователей и сейчас тоже есть уже разработки для того чтобы инвестиционный бизнес рос и был более легок в управлении и работе вот собственно состав решения как показано на слайде представлены некоторые сервисы которые уже сейчас находятся в работе над промышленном контуре Туда входит такие сервисы как аудит справочники отчеты уведомления фабрика рабочих мест которая называется Frame у нас это отдельная пространство в котором собственно могут работать коллеги Вот и интеграция различные если мы посмотрим на слайд то можем увидеть что вверху в левой части У нас есть модули они выглядят пока я не могу представить визуально но целом это скажем так страница на которой на которой заходит непосредственно сотрудник банка и может при различных ролевых моделях доступов работать собственно этими сервисами они себя представляют такой же вид Как скажем обычная страница Web но работа внутри производится как с бэкендом так и фронтендом и собственно выполняет свои непосредственные обязанности вот функциональная часть значит это продуктовая фабрика платформы Где расположены сами сервисы и системы также это интеграционные приложения Ну и тех стек в котором основные скажем так системы перечислены это Java Кафка кабернетис вот технологические решения которые сейчас на данный момент были внедрены уже и написано это аудит мониторинг побольше я расскажу в дальнейшем про это кратко аудит сейчас на данный момент выглядит как бизнес оповещение которое проходит собственно через эластик Search и Open Search в кибану и где можно в виде даже бордов мониторинга приложить предложить нашим коллегам по бизнесу отслеживать сообщения самой системе в режиме реального времени и соответственно смотреть на показатели фабрика рабочих мест которые рассказывал ранее она тоже показано в виде пространства в котором находится различные сервисы с помощью которых можно производить операции по инвестициям по банковским и так далее интеграционные сервисы собственно это как сервисы Кафки которые доставляют сообщения между всеми этими модулями вот подсистема отчетов которая сразу выводит отчеты в необходимой форме необходимом виде чтобы не заставлять сотрудников работать излишне да то есть мы сразу получаем необходимую информацию в нужном виде справочники которыми они пользуются тоже постоянно обновляются находятся в такой скажем так системе которая предоставляет необходимую информацию в режиме онлайн и систематификации это система которая собственно уведомляет сейчас на данный момент она по-моему находится еще в стадии разработки но уже есть первые скажем так работы на контурах тестирования где уведомления по различным бизнес операциям могут приходить как на почту так по SMS уведомлениям Ну и различным мессенджерам что привело к тому что необходимо было все-таки переходить с больших систем которые очень жирные тяжелые это то что во-первых они тяжелые это очень долгое время релизов это отказы устойчивость которая не позволяет скажем так производить обслуживание либо доработки в режиме реального времени также это высо кая стоимость ну и соответственно низкий уровень все эти процессов которые достаточно тяжело конфигурировать если мы рассмотрим нынешний реалии то огромное количество систем Уже переходит на микросервисную архитектуру архитектуру и здесь мы видим огромные плюсы во-первых мы можем выполнять различные изменения обновления систем не затрагивая систему в целом то есть если мы видим что у нас есть огромное количество системы сервисов то мы их можем обновлять отдельно от общей скажем так архитектуры и не затрагивать при этом никакие функциональные части основных основных системы также это более детализированный процесс в котором мы можем распределить Куда и как мы будем выпускать релизы это детализация информации по журналированию и аудиту низкая стоимость потому что нам не нужно обслуживать целую коробку мы обслуживаем отдельные части ну и соответственно это реализация платформенного подхода то есть нет необходимости идти только в рамках одной платформы можем это делать на различных уровнях по-разному по определенные решения которые мы пользуемся это как раз таки вот единообразный юань в котором мы можем собственно наблюдать Когда у нас будет несколько рабочих мест в принципе это скажу Так выглядит очень просто то есть заходит человек да там сотрудник он видит у себя по выданным правам окошечко на котором написано рабочее место он заходит и начинает свою работу также это реактивный подход надежное окружение и целеустремленные команды которые собственно приводят к разработке всех этих систем и сервисов но на примере допустим этих же сервисов которые сейчас уже разработаны находятся в промышленном контуре пример событийной архитектуры где показано как собственно обмениваются сообщениями данные сервисы они отменяются через кафку очень хорошая интеграционное решение которое очень широко сейчас используется повсеместно Я сказал вот и мы скажем так тоже нет далеко уходим от технологий и используем данное решение собственно мы используем кафку это распределенность то есть мы можем не линейно работать Да мы достаточно мы используем не только как для своих целей мы еще и предоставляем ее как сервис нашим банке то есть коллеги к нам могут прийти и мы их подключим собственно к Крафте И они начинают взаимодействие непосредственно со всеми своими тоже системами на базе данного решения и масштабируемость для того чтобы горизонтально масштабировать кафку не нет необходимости скажем так каждый раз переносить куда-то она достаточно легко масштабируется в рамках своих ресурсов то есть Нам необходимо только добавлять ресурсы и она будет предназначаться для больших целей дивизиум мы используем для того чтобы узнавать о изменениях в базе данных в режиме реального времени он тоже Как консилер подключается к топикам кафки те которые читают непосредственно Все изменения которые производятся в базе данных тем самым предоставляем скажем небольшой сервис который говорит о том то что у нас вот произошли какие-то изменения в базе данных дальше к примеру по котировкам и коллеги могут в режиме реального времени наблюдать за всеми изменениями и также отказывая устойчивый объектное хранилище используемое стриминию оно позволяет не хранить огромные терабайты различных информации документов мы используем как буферное хранилище туда перекладываем непосредственно для других систем и сервисов к примеру для портала различные документы которые были сформированы уже на базе фабрики рабочих мест и коллеги которым необходима какая-то информация тоже скажем так могут подключиться и забрать нужные нужный документ нужно информацию из места куда оно будет выложено в пример вот архитектура сервиса аудита о котором я говорил ранее я хотел показать как сейчас у нас работает собственно с использованием двух наших самописных сервисов на правой части схемы мы видим непосредственно сервисы это различные скажем так приложения модули которые передают информацию виде сообщений посередине находится спортившиными Это Кафка дальше два сервиса сверху и снизу представлены один аудит эластик сервис другой аудит постер-сервис это два самописных сервиса на Джаве которые были написаны нашими коллегами они занимаются перекладкой информации власти кёрдж и Open Search которым Сейчас переходим в дальнейшем мы можем наблюдать это в какие бане и занимается перекладкой одновременно этих же сообщений Почему мы это делаем потому что у нас находится бизнес информация которая как раз таки располагается внутри сообщений и которые смотрят коллеги Да по бизнес и по стандартам ее нужно хранить от трех лет соответственно Мы перекладываем это в базу данных откуда сможем достать информацию при необходимости показать и выдать бизнес показатели которые были ранее записаны уже туда пример сообщения собственно в данном сообщении нам важно не только информация которая представлена вида времени параметров в основном это для нас информация в которой собственно записываются показатели различные наверное приведу пример это когда котировки рассчитаны загружены данные различных ставок Ну и так далее То есть в дальнейшем да то есть при необходимости при обращении бизнеса можно будет выдать качественную информацию которую он сможет прочитать не технического вида потому что для нас скажем так айтишников которые более важен это технический план то здесь больше представляет информацию для обычных рядовых пользователей которые будут уже дальше распределять информацию по каналам которые будут смотреть дорабатывать что-то делать увеличивать уменьшать и так далее технологии разработки собственно которые мы используем это различные языки программирования как C Sharp c++ Java в backendi также используется обширная cubernetis на котором она собственно Все крутится и что позволяет выстроить отказоустойчивый кластер в котором нет необходимости тушить сервисы системы и которые достаточно очень легко управляются потому что все это находится на позах и контейнерах которые бесшовно могут между собой обмениваться информацией и собственно при перезагрузке какого-либо сервиса мы не будем наблюдать отказы довольно новые сервисы системы на следующих слайдах будет представлены собственно стресс-тесты которые Мы производим для того чтобы показать высоконагруженность да то есть при каких показателях будет непосредственно выдерживать стальная система или сервис и соответственно мы обязательно проводим тестирование на нагрузочные до которые собственно при передаче информации для наших заказчиков будет ярко выражать что вот Мы готовы к большим нагрузкам да либо Это необходимо для расчетов на будущее нагружаемость системы или сервисов с которыми Мы работаем представлены эти нагрузочное тестирование потребляемые ресурсы которые тоже указаны вот в реальных примерах использование микросервисных архитектурах у нас достаточно большое сейчас видение на их использовании во-первых это отказоустойчивость безопасности это быстрые файлы интеграции это общие виджеты и ролевая модель Вот и соответственно Как я вижу себе микросервисную архитектуру которая сейчас используется и кстати пишется наверное за первые три года вот схб Начал именно переходить с этих Вегасе систем которые уже во-первых не поддерживаются в России и писать свои полностью сервисы системы в том числе вот мне удалось попасть на такую платформу где люди опишется Полностью Вся архитектура до этого банки не было таких подобных систем и мы сейчас как разработкой в промышленном контуре находится вся необходимая архитектура по сети процессам по раскатке собственно через insable Мы кстати используем Как cubernetis так и отдельно стоящие Хосты на которых собственно крутится интеграционные сервисы типа Кафки мини S3 Open Search Вот и мы тоже обновляем и предоставляем как сервисы и соответственно Нам необходимо для того чтобы грамотно производить процессы релиза вот используем Ебану для того чтобы отслеживать непосредственно сообщение журналирования ну и соответственно у нас это все протекает по контурам как полагается тестовые контуры контуры предпророт контур и после того как мы закончим непосредственно тестирование валидное предпроте мы выходим на Production уже готовой системой и уже готовы предоставлять эту систему скажем так в работу непосредственно нашим коллегам а мониторинг в банке у нас осуществляется на система запекс очень хорошая решение для нынешних скажем так реалий отражать информацию в режиме реального времени о всех системах сервисах на данном слайде представлена собственно Моё рабочее окно в которой я смотрю каждый день приходят альберты как на почту так и в Telegram и будут приходить еще в наше приложение которое называется офис сотрудника в котором централизованы сотрудников которым собственно есть тоже носификации и мессенджер о каких-либо проблемах с системой я узнаю буквально за считанные секунды и Если ко мне не пришел призов о том то что все в порядке Бывают такие случаи когда система моргнула там под перезапустился или сеть Метрика может не прийти да то есть либо ошибочно прийти какая-то Метрика если резалов не пришел я начинаю работы по отладке Системы ну и соответственно дальнейшая операция если пришел то я спокойно сижу дальше Потому что у меня система все в порядке также у нас используется помимо непосредственно мониторинга запекс это централизованная система еще и графана графаны используются для отслеживания работ кубернетиза на данном слайде представлены скажем так информацию о сервисе в котором мы можем наблюдать Какие ошибки происходили Какая нагруженность Сколько потребляемость идет ресурсов какие статусы то есть многочисленную информацию Мы тоже снимаем за счет данных по графане который работает непосредственно также отдельно Я еще выстраивают даже борды которые показывают детализировано по истину и самим АПП нагружаемость и непосредственно эксплуатацию инфраструктуры выводы выводы легкие потому что нам это необходимо мы должны двигаться дальше данные системы предполагают собой достаточно легкое обновление кода и соответственно мы можем наблюдать что компоненты которыми Мы работаем Мы можем масштабировать в разных размерах Независимости от самих систем то есть мы не трогаем сами системы мы можем увеличивать количество систем сервисов вне зависимости от этого ну и перспективы это снижение затрат собственно потому что это используем разные маленькие архитектуры модули это микросервисные собственно архитектуры высокая отказы устойчивость потому что мы не затрагиваем нам не нужно как допустим раньше когда работал администратором мне для того чтобы обновить 1С приходилось выполнять целый день сначала снимать бэкап с базой потом выполнять бэкап самой инфраструктуры потом обновлять 1С а потом еще если это все стало делать обратный откат сейчас же благодаря микро сервисным архитектурам губернатису мы можем выполнять эти процессы почти в рабочее время когда пользуются сервисом потому что а если мы рассмотрим детализировано то затрагиваются отдельные модули на которые даже некоторые могут не обратить внимание вся система будет работать Спасибо за внимание Спасибо большое хотел также добавить что на данный момент после многочисленных опытов работе непосредственно с сопровождением журналированием Я заметил что огромное количество времени тратится на то чтобы определить что же случилось с системой Когда произошел инцидент или проблемы и сейчас мы совместно с коллегами внедряем такую скажем так маленькую часть оповещений скажем так для инженеров это уникальные коды на каждую обработку проверку внутри самого кода то есть есть какой-то блок проверки дальше идет собственно информативность инфо Error или внутри вот этого события есть еще дополнительные уникальный код который будет показывать при скажем так предоставлении информации разработки в какой части кода возникла проблема в предыдущих местах работы я столкнулся с тем то что этих кодов не было и соответственно когда приходит около 3-4 миллионов помещений о допустим 401 ан авторизат А это находится в разных частях кода и непонятно что именно сбоит то сейчас вот эта технология будет применяться непосредственно у нас в россельхозе и мы за счет этого увеличиваем отказ устойчивость уменьшаем время не работы сервиса то есть кратчайшие сроки будет сервис починен либо будет сделан реверт либо сразу будет исправлена часть которая будет работать Вот спасибо большое за внимание Спасибо большое за доклад я позволю задать Первые вопросы от себя хочу спросить про мониторинг электриков а то как у вас идет с ними работа по аллер там кто у вас их настраивает ты как Сергей инженер или прикладные команды разработки алерты настраиваю я я собственно занимаюсь как постановкой на мониторинг так выстраивание Альтов И на чем они должны основываться то есть сами триггеры которые записываются по которым с работы срабатывает непосредственно аллерт Он должен быть валиден и качественным потому что если приходят такие оповещения как статус к примеру какого-нибудь сервиса там то должен быть временной интервал потому что мышцы понимаем Это cubernetis Это под и контейнеры может быть в момент когда пересоздавался под просто не пришла Метрика соответственно нужно валидно выстроить оповещение но мне помогают коллеги которые непосредственно работают с мониторингом забикс и которые работают с идентификацией в такие как телеграмм-меседжеры или в центр сотрудника Вот мессенджера наши Вот соответственно аллерты всегда приходят только те которые необходимы не попадаются такие заинтересован чтобы они были как бы ну чистая то есть не было шума не было ложных каких-то срабатывания лишний раз не беспокоили понял спасибо потому как вы на них реагируете То есть если даже проблема такая что ты можешь самостоятельно починить может быть нужно в команду разработки пойти Как у вас эскалации это происходит эскалация происходит на прозрачная то есть принимается решение опять же инженером сопровождения о том то что критичная ситуация не критичная ситуация Могу ли я сам разобраться с ней не могу Если я решаю что ситуация критичная я не могу с ней разобраться я беру логи которые собственно приходит к нам в кибану предоставляю разработки мы на собираемся в колл и Начинаем разбор непосредственно по какому-то инциденту и события и принимаем решение делать или реверт данной системы у нас достаточно прозрачный легко выполнено то есть нет необходимости целые огромные конфиги менять на ручную у нас это все делается запускается pipeline он собственно обновляет на предыдущую версию системы и мы дальше продолжаем работать Денис Спасибо за доклад тут концепция архитектуры мелькала Где у вас начало фабрика потом платформа потом интеграция там вроде еще что-то и говорили про аудит скажите у вас Каждый элемент цепочки отбрасывает отбивку в аудит или вы это делаете только в начале и в конце интеграции именно размерность того как мы будем выстраивать оповещения которые к нам приходят на аудит определяется с бизнесом то есть сначала выстраивается концепция Что они хотят видеть Ну допустим производилось изменение котировок загрузился файл через хранилище на портал произвелся запуск сервиса файла интеграции и так далее и внутри происходит еще события соответственно которые позволяют более прозрачно смотреть на Что происходило с сервисом или программой и какие операции выполнялись соответственно как только с бизнесом обсуждается что вот нам нужно вот это вот это вот это смотреть вот это вот это вот не нужно именно эти сообщения и попадают в аудит систему то есть мы не всё смотрим а Обсуждаем что необходимо после этого только делаем релизы у нас приходят бизнес решает всё понял спасибо в aventia был некий идентификатор это идентификатор событий или идентификатор процесса То есть это сквозной идентификатор или он разово для какого-то ивента генерируется мы сейчас проводить сообщения говорим или прославит с ивентом А это индификатор сообщения но у нас еще есть более расширенные версии как бы да где у нас помимо идентификатора самого сообщения есть Трейси иди есть дополнительные параметры соответственно в которые вкладываются Техническая информация по которой мы можем отфильтровать и показать собственно сообщение также имеются индификаторы событий которые приходят и собственно такой вот получается большой просто никакая система трейсинг не упоминалось Поэтому решил уточнить я сталкивался там где было непосредственно меньше информации к примеру идентификатор сообщения и система была проходящей вы с коллегами здесь поговорили и я принес свой опыт что этого не хватает если мы хотим выстроить полную цепочку Что происходило от начала работы допустим да там какого-то сервиса или модуля и мы не сможем качественно отследить все процессы по скажем так response и request да то есть иногда request имеет свой идентификатор сообщения респон свой а вот как их соединить вместе достаточно было проблематично и вот как раз таки уникальные коды помимо идентификаторов они связывают непосредственно работу тех или иных операций которые происходят там при расчетах при проверке при калькуляции Ну или допустим просто по запуску какого-то сервиса и в итоге если этому идентификатору задать этот индикатор задать в поиске то он выведет всё полностью как вот система прошла весь путь от начала и закончила каким-то выводом сообщения которые допустим файл загружен такой Я правильно понял что вот эти ивенты они как то еще и связано с вашей системой трейсинга и где-то все это можно посмотреть в Едином виде да то есть это какая-то своя система которая вот это все Откуда надо подтягивает и в одном месте отображает Или как это происходит все верно Да То есть если произошло какое-то событие допустим произошел Error Мы заходим на этот террор смотрим У него допустим есть из ивентов один уникальный индикатор Мы всегда спрашиваем Смотрим А что собственно предвещало того когда в кибану заносишь какой-то код который уникальный индикатору выводится либо код сообщения он выводит собственно только это сообщение а нам нужно посмотреть все полностью всю цепочку когда он начал делать расчеты к примеру там когда закончил делать расчеты какие предвещали цифры перед этим вот И для этого нужно собственно этот код для того чтобы вывести всю цепочку полностью и тогда мы видим из-за чего произошел собственно сбой не знаю к примеру попалась цифра которая не смогла бы работать к примеру У меня правда такого еще не было у меня в основном были и роры это по недоступности там системы либо когда пользователи не тот файл загружают либо значение которое при стрессах были мы вводили специально неверные значения он собственно делал проверку выводил что сообщение выведено не то но при этом как бы предыдущие события было показано что пользователь вел какое-то значение произошла проверка и собственно вышел что оно было изначально введено неверно поэтому и собственно пришла ошибка есть такие системы как ключ от трон наверное слышали Вот и я тоже с ней работал у нас были Trace ID который собственно показывают всю цепочку работы этой вашей системы но в чем была фишка Когда не было уникальных скажем так кодов которые привязывались к определенным обработкам внутри кода программы да то из всей цепочки огромный до которой я доходил я доходил до этой ошибки ошибки было написано примерно 401 она и все я на этом останавливался программа хорошая вот только она ничего не показала мне поэтому всю цепочку можно увидеть как в аудит сообщения также привязать скажем так какие-то показатели которые будут качественно показывать что Вот именно вот этот блок операций за счет этого уникального кода который показывает что выпол няется он будет показывать собственно нагрузку он будет показывать Какое количество скажем так пользователи пользуются Да там сколько операций в день происходит и так далее То есть всю работу будет показывать спасибо супер Я вижу еще вопрос извиняюсь вы потрясающий ключ от strom упомянули он там много чего умнее Скажите а вы на PG его вешали сверху уже позревая база У нас сейчас ключ от втором он очень долго почему-то внедряется вот коллеги как бы пытаются внедрить но там некоторые проблемы с ресурсами происходит Вот и пока как бы я его еще здесь ярко Не использовал но я знаком с этой программой постгрысу не слышал еще сразу совет Ну понятно он кушает ресурсы любят просто что пойдет дальше сквозные айтишники у вас уже есть мы выяснили ключ острома У вас есть дальше когда вы пойдете по трассировке и приклад насколько я помню на яме он умеет отслеживать и строить зависимость от запроса который был отправлен впг до непосредственно метода который внутри я бы был прикладе и соответственно Когда у вас начнет что-нибудь сыпаться по кривым запросам базу можно буквально два клика от ошибки вот так вот прокликаться и посмотреть какой именно Селект или Серт был в БД То есть за Оракул не скажу его к сожалению у нас уже нет а вот СПГ работала Отлично спасибо спасибо большое еще вопросы пока я еще задам вопрос У меня появился вот смотри вы получается пошли большой путь от Legacy до современных всех фреймворков инструментов в общем Сейчас идете прям ногу со временем какие дальше планы у вас есть то есть что нужно еще допилить в текущем и куда двигаться дальше можете поделиться Ну во-первых я считаю что в первую очередь нужно отладить взаимодействие между сопровождением и разработкой развитием Как называется Центральный компетенции который себя вбирает непосредственно всех потому что в основном система она и работает лучше когда все понимают что делать когда делать Как делать и выстроенный процесс на максимально понятном уровне как только это будет сделано уже будет реализация быстрее payline будут запускаться чаще отладка будет производиться оперативнее соответственно и сама система будет стабильной и заказчик потребители они будут тянуться к данной системе потому что они знают что она меньше сбоит вот дальше это в первую очередь необходимость отработки качественного пояса чтобы все понимали что нужно это сделать в кратчайшие сроки в зависимости где мы там Мишин Critical Business Operation там неважно главное чтобы это было понятно ну и соответственно как я мечтаю это добиться все-таки чтобы освободить мозги и руки инженеров от рутинной работы Передать все это на искусственный интеллект Да там на ней рассеять какую-нибудь которая будет собственно сопровождаться внутри же этого внутри банка и инженеры смогут дальше строить высококачественные системы которые могли бы облегчить работу рядовым пользователям потребителям бизнесу как-то так спасибо еще есть вопросы у нас в телеге от онлайн зрителей ничего нет тогда на это прекрасно что в будущем за нас сегодня интересную работу буду делать робота мы будем заниматься Только чем-то крутым и заряжающим Спасибо большое за доклад пообщаться с Денисом Вы можете после доклада на стенде Россельхозбанка и еще больше узнать про то какие у них используются Современные технологии Всем спасибо за внимание пока Спасибо большое"
}