{
  "video_id": "SJD_T8O_s_4",
  "channel": "HighLoadChannel",
  "title": "",
  "views": 0,
  "duration": 0,
  "published": "",
  "text": "Всем привет Рад всех видеть сегодня доклад будет такой про интересную криптографию Я надеюсь что большинство присутствующих Нормально понимает там как работают какие-нибудь протоколы авторизации что мы там как мы логине что мы шифру трафик и вот доклад сегодня будет не про это то есть сегодняшний доклад он будет про алгоритмы которые не являются стандартными которые используется но тем не менее буду рассказывать о тех а которые всё-таки применяются в продакшене то есть на которых уже работают реальные системы которые защищают данные пользователей и которые могут быть интересны у нас будет там не знаю там несколько уровней вот поехали значит почему я про это рассказываю Да я занимаюсь очень-очень давно it там всем всё по переделал и разработчикам и безопасника сейчас наверное моя позиция Скорее это ресечер пото что я Шатаюсь основателем как раз компании mibs и занимаемся мы аудитом безопасности контрактов и исследованиями то есть мы гоняем всякие экспериментальные протоколы часто очень связанные с новой такой экспериментальной криптографией изучаем что происходит и вот про это расскажу значит первый уровень у нас будет Easy значит не самый сложный а красивый интересный это схема разделения секрета то есть предположим У нас есть какой-то ключ пароль какая-то секретная информация и мы хотим её а не потерять Мы её не на бумажке хранить И самое главное не хранить её на одном компьютере который может быть взломан и эта информация Может утечке на несколько частей не знаю у меня есть какой-нибудь приватный ключ Я хочу раздать часть маме часть Пете часть Васе как бы подарить им по кусочку вот этого секрета и чтобы если кого-то из них взломают А значит заберут у них этот кусочек секрета они не смогли бы ничего сделать никаких предположений о том а какой у меня ключ А и понятно что здесь простое какое-то деление на части даже с резервированием оно работает хреново вот а поэтому требования простые как бы нам нужно разложить на N частей и имея любые M частей которые меньше N То есть например три из пяти два из трёх там п из 10 мы должны иметь возможность этот секрет восстановить математика здесь уровня алгебры школьной алгебры достаточно простая значит не бойтесь квантовых компьютеров значит здесь чисто алгебра значит никогда эта схема не будет поломана а представьте У нас есть Случайный полином степени D Да там какой-нибудь ну вот пример полинома Да Парабола второй степени AX ква + BX + C То есть у нас есть такая как бы Парабола второй степени и мы свой секрет закодировали в просто положили его в коэффициент C То есть у нас есть мы сгенерировать случайную параболу сделали случайное а случайное B А в C положили свой секретик получилась у нас такая вот как бы Парабола А и сказали что секрет - Это наш полином в нулевой точке Да иксы равны нулю как бы Остаётся только C а несколько точек этой параболы любые другие не нулевые мы раздали как раз маме вас значит Сколько нам надо а ну и мы знаем тоже из алгебры очень просто как бы что восстановить эту параболу мы можем по трём точкам то есть вот здесь на графике две точки понятно что через две точки можем провести бесконечное количество парабол А вот как только мы дали третью точку мы эту параболу жёстко зафиксировали то есть Любой человек имеет три точки параболы Может в точности восстановить как бы полностью её алгебраическую форму и получить конечно наш секретный коэффициент C и на этом Собственно как раз эта схема разделения секрета и работает то есть Очень просто я беру и значение моей вот этой параболы в точке 1 2 3 или там 10 11 15 неважно какие хотите Выбирайте раздаю Пете Васе и Мише беру ещё там кучу точек не знаю там F Отче от п от сем раздаю любому ну любому количеству людей и собрав любые три из этих частей я спокойно восстанавливаю свой секрет такая вот как бы простая несложная схема используется она Ну во-первых понятно там студенты стартапы как бы любят там тоже там делать какие-то там поделки там на тему разделения секрета Но на самом деле в серьёзных приложениях это тоже используется в частности в H corb Vol которые используется вам в куче там продакшн систем да Для того чтобы хранить секреты наших сервисов и раздавать их вот там есть такая операция unseal Vol когда мы поднимаем хранилище расшифровывает вот этот вот ключ Мастер ключ которым мы расшифрован раскладывается как раз при помощи ф shamir Secret Sharing вот этой вот схемы для того чтобы получив доступ атакующим как бы к одной из машин нельзя было этот Мастер ключ угнать как бы надо чтобы эти несколько машин где-то там свои вот эти необходимое количество SH прислали то есть Это пример так называемой пороговой схемы то есть в криптографии значит целый класс как бы схем который называется именно пороговые когда у нас есть много участников и нам надо сделать какое-то действие если набран какой-то определённый порог при этом для криптограф супер важно что не должно не должен роля как бы порядок предоставления вот этой криптографической информации потому что кто-то может быть взломан кто-то может валиться сломаться как бы и так далее и все пороговые схемы они исходят из того что участники Ну в рандомном порядке между собой взаимодействуют значит развивая эти пороговые схемы мы перейдём уже ко второму уровню тут будет уже посложнее это медиум это пороговые агрегирование подписи значит это ситуация когда у нас есть какое-то сообщение и его подписывают несколько участников то есть Нам нужны электронные подписи собрать с нескольких человек или с нескольких серверов ба транзакций который проверяет 10 серверов и нам надо чтобы хотя бы там из этих серверов сказали да этому ба транзакций они подписывают этот блок этих транзакций как бы мы собираем эти подписи и начинаем их проверять получили блок получили сем подписей бежим как бы считаем так накопилось се накопилось се всего серверов 10 прини этом подписей а проверка электронной подписи штука не дешёвая там камень как бы это вычисление высокой битность как бы вообще вычисление в современной криптографии эллиптической это в общем ну не баловство как бы это не инты складывать вот поэтому хотелось бы сделать лучше и поэтому появился целый класс такой протоколов пороговых подписей которые позволяют подписать сообщение несколькими подписанта писать Ну грубо говоря получается одна электронная подпись которую подписал например пять из десяти участников или там семь из десяти вы сами настраивать этот сетап они бывают нескольких видов то есть там первые один из типов как бы без сокрытия подписантов то есть мы получив эту пороговую подпись можем сказать что вот Вася и Миша подписали а Петя значит не подписывал такие подписи используются там в алгоритмах консенсуса для То есть когда там договаривается много серверов между собой то есть там это Тайна не требуется А есть и схемы с сокрытие подписантов То есть когда неизвестно Какие Пятеро из десяти это подписали то есть мы знаем что подписал там кто-то там Петя Вася и Миша знаем что двое кто-то подписали но Кто конкретно сказать не можем такие схемы используются для обеспечения анонимности вот ещё одно свойство пороговых подписей которые тоже супер важно для масштабирования и тоже для сетевых это агрегирующие сист как бы но тоже супер важна для криптограф это детерминированность подписей Значит кто не знал то подписи которые ставят мы проверяем Ну наши АПС сертификаты вообще вот большинство электронных подписей которые сейчас в ваших там телефонах браузерах работают они являются так называемым обладают свойством по-английски называется Мали То есть вы можете взять чужую электронную подпись прямо её байты и сгенерировать другую из другого набора байт кото быть верной то есть потому что подписи на эллиптических кривых как бы они генерируются там с использованием там рандомного фактора и соответственно Вы можете взять чужую подпись и изменить в ней байты то есть никогда не сохраняйте как бы электронные подписи и счита если вы считаете что они как бы не прибитый к сообщению их можно изменить вот подписи они детерминированы То есть вы одно сообщение один приватный ключ и одна и только одна электронная подпись Вот они детерминированы А вот они вот по крайней мере стандартные Вот и поэтому подпись ещё бывает детерминированные и не детерминированные так что же можно интересного сделать с такими подписями Я извиняюсь Это самая простая картинка которую я сумел найти как бы про би с подписи Ну смотрите подписи на эллиптических кривых они могут ставиться Ну грубо говоря они работают над уравнениями эллиптической кривой которое В общем виде имеет формулу Y ква равно X ку там плюс там AX ква Там и так далее плю C есть просто набор разных эллиптических кривых на которых работают наши подписи они эти стандартами заданы и те которые мы с вами используем в повседневной жизни они работают на там на одних эллиптических кривых но можно выбрать такую эллиптическую кривую интересную которая называется как раз вот bls там у неё есть там разные параметры Вот например там bls 12381 уравнение у него такое смешное Y к = X3 + 4 значит кажется что что-то там такое простое но эллиптические если математику как бы почитаете то поймёте что эллиптические кривые - это очень интересная серьёзная история в математике делается всё конечно по модулю по модулю по очень большому То есть это 25 битные 38 битные как бы поля то есть над ними всё это происходит и если и вот эти кривые онино классу кривых математических которые называются pairing Friendly у криптограф pairing Friendly кривые - это такие которые поддерживают операцию пейринга она на картинке в левом нижнем углу буковка е обозначена то есть это какая-то такая хитрая математика которая принимает какая-то функция которая принимает на вход Там две точки на эллиптической кривой как бы и выдаёт на выходе третью точку Ну просто придумали криптограф значит такую штуку и вот на этих эллиптических кривых это операция возможно выбираем такую литическую кривую и вот по предложенной схеме bls формируем схему электронной подписи то есть выглядит она также есть публичный ключ приватный ключ сообщения электронная подпись всё как в обычном мире но bls подписи во-первых они являются короткими 256 бит для электронной подписи Это коротко потому что обычные подписи они побольше там 512 бит Там и так далее Она является детерминированной что тоже как бы редкость да для кривых и она агрегирующие ваши подписи и просто их между собой ну там складываю перемножают кривых в полях Там на кривое сложение это по сути в процессоре там умножение как бы поэто я беру все ваши подписи перемножают ключ и это равноценно проверяю эту подпись это равноценно проверки всех ваших как бы 100 подписей тысячи подписей миллионов неважно о отн схлопнулась в от единицу вот это вот свойство агрегирующие Ну в предыдущей схеме вы мне все прислали как бы свои публичные ключи А здесь мы с вами там пройдём так называемый keration сетап Когда вы там сгенерирует секретные шары от своих ключей пришлёте их мне я их там соберу в каком-то количестве это позволит сделать именно пороговую подпись значит как она будет выглядеть то есть какая-то часть из вас те кто как бы более трудолюбивые значит подпишут сообщени а остальные как бы сольются и если Т из вас как бы То есть те которые набрали как бы нужный порог если наберётся достаточное количество из вас кто мне пришлёт как бы свои электронные подписи я их точно также сожму в одну и проверка этой подписи будет означать что Т из N из вас эту подпись поставили То есть она одновременно и пороговая и агрегирующие то есть когда много узлов подтверждают данные ставят большое количество электронных подписей нам не нужны все Нам нужен только определённый порог и мы ещё всё это дело можем агрегировать и вот на этих подписях это делать супер удобно То есть тут ещё а последним пункте ещё знак вопроса Что она ещё детерминированная Сейчас я тоже как бы про это расскажу а то есть для чего они используются уже конкретно сейчас то есть Практически во всех современных продвинутых алгоритмах консенсуса сетевого а там в блокчейн в блокчейна потому что там требования очень серьёзные как бы к там считайте а грубо говоря Т - N N - Т узлов они могут быть захвачены злоумышленниками и к этому как бы должно быть сеть должна быть устойчива поэтому там обязательно собираются подписи с большого количества валидатором И когда вы вот эти сотни электронных подписей проверять у вас просто всё Встанет и здесь как раз bls используется для агрегации то есть мы просто на один блок проверяем одну всего лишь электронную подпись и Вуаля как бы мы уверены что там 70 из 100 как бы валидатором на это буквально как бы вот Одну одну итерацию от единицы вторая важная очень проблема это Рандом опять же в алгоритмах консенсуса БФ то есть когда мы должны быть устойчивы не просто к отказам а к зловред поведению какой-то доле участников супер важным является выбор следующего Ну в базах данных называется следующего лидера то есть кто как бы предложит следующий батч транзакции как бы блокчейна тоже огромная как бы проблема то есть кого назначить следующим лидером Кто произведёт следующий блок кто следующую пачку транзакций предложит закоммитить а и там для этого нужен какой-то Рандом а когда нас толпа и мы с вами хотим вместе выработать какой-то Рандом это очень сложно потому что Последний из вас какой бы мы с вами протокол не придумывали Последний из вас он сможет то есть кто вот этот порог для генерации рандома последним последний участник он может во-первых решить не раскрыться не раскрыть свой там часть протокола а во-вторых он может это Рандом контролировать Да если мы там какие-нибудь хэши седы друг с другом меняемся все эти схемы дырявые они не дырявые если использовать как раз пороговые подписи типа bls когда Последний из вас которого не хватает чтобы поставить bls подпись подписывает и мы вот это значение подписи используем как сит для рандома в этом случае никто из вас контролировать этот Рандом не сможет как бы ну кто-то не подпишет кто-то другой подпишет там кто-то ещё откажется третий подпишет но подпись получится одна и та же вот кажется что такое как бы волшебство Но вот какой бы набор из вас в каком бы порядке не подписывал подпись получится одна и та же и повлиять на не получится Поэтому в том числе это используется и для линга вот этих самых валидатором нужно честно в недоверенным окружении выработать Рандом как бы это один из вариантов того как это можно сделать соответственно конечно подписи годятся и для голосований типа ал Ну то есть когда больше определённого порога сказали да как бы то есть эти электронные подпи они натив по сути это можно использовать как голосование вот ИП реплеи любых штук как бы в которых каких-то событий с большим числом подписантов а Следующая история кольцевые подписи Это вот те типы подписи где не раскрывается кто подписал То есть у нас есть сообщение а кто-то из вас как бы его подписал но мы не хотим как бы его раскрывать вот в этом случае у нас есть 100 вот этих публичных ключей значит всех вас кто-то из вас говорит дай-ка я подпишу и никто не узнает что это сделал Я как бы он берёт эту сотню публичных ключей сам ставит хорошую подпись а за остальных он там ставит как бы рандомчик рандомчик получается как бы такая подпись которая называется Кольцевая То есть он эту подпись публикует мы её все проверяем такие ну Да кто-то вот из этой вот тусовки как бы он подписал Но кто мы сказать не можем это ещё один класс собственно который как раз для анимизар на нём например построен blockchain maner не знаю те кто безопасники наслышаны любимый блокчейн для майнинга в всякими трояна как бы там транзакции как раз они ширу при помощи кольцевых подписей тоже то есть неизвестно кто монетку отправил как бы известно что там 10 человек как бы каждый кто-то из них там подтвердил Эту транзакцию куда она ушла а первое применение в продакшн кольцевой подписи оно вот на картинке на этом древнем пергаменте это значит Самураи писали письмо гуну о том что они там чем-то недовольны А чтобы не раскрыть кто из них поставил первым эту подпись чтобы сигун его как бы не казнил как бы они сделали вот пожалуйста как бы Кольцевая подпись как бы по этому списку нельзя понять кто первым соответственно эту подпись поставил Так что это давно известная история Ну и самая известная статья про кольцевые подписи это To Secret она называется если Погугли про то когда там не знаю там группа сотрудников компании хотят слить какой-то секрет подписать его но не хотят раскрывать Кто конкретно как бы этот секрет слил но хотят как бы доказать как бы то что действительно кто-то из них как бы это подписал Ну и тоже для протоколов ещё интересное как бы это анонимные голосования типа вето То есть когда у нас один кто-то из нашего комитета имеет право поставить вето на решение но не хочет раскрывать Кто он как бы там всё вы все плохие только я не хочу чтобы об этом узнали Так что это вот кольцевые подписи А и опять же это все алгоритмы которые работают уже как бы в проде там защищают деньги и пока никем не поломаны всё пришло время для мяса как бы совсем на самом деле начало для этого мяса было на прошлом хайлоу на докладе про заказ нарки я сейчас сделаю тоже небольшой но уже наверно не так Подробно как в прошлый раз значит и покажу их на примере так называемых Set mersh то есть доказательство нахождения в списке которые имеют огромное количество практических применений значит что это такое странные доказательство с нулевым разглашением криптограф придумали такой набор алгоритмов который позволяет Что сделать У меня есть какая-то функция не знаю Ну вот прямо на си не знаю написанная функция которая какое-то вычисление производит у неё есть ипу какое-нибудь например число и на выходе какое-то число не знаю возводит число в миллиард ную степень какую-нибудь А И эти протоколы позволяют отправить проверяющего Ну то есть Давайте я доказывающий я я взял какое-то число 42 как бы возвёл его в миллиард ную степень Я отправляю Вам результат и к этому результату прикладываю то есть короткое доказательство Ну что типа хша может электронно цифровой подписи короткое доказательство того что я действительно взял какое-то число и возвёл его в миллиард ную степень то есть вот эта последняя часть AR она расшифровывается как arguments of knowledge то есть доказательство знания Я знаю такой инпут что из него получился такой аутпут при этом вы проверяете это доказательство получаете Верно неверно То есть просто True fse и ничего не можете сказать про этот инпут то есть поэтому как бы Zero knowledge То есть вы просто получаете доказательство что Я какой-то инпут использовал и что я действительно его возводил вот в эту степень что я не просто из балды как бы взял какое-то число кинул вам и всё Вот то есть сначала производится сетап то есть мы договариваемся с вами об этой функции что мы будем доказывать потом я прове я беру какой-то секретный число возвожу его там в миллиард степень как бы и отправляю Вам результат и как бы вы получаете только результат пруф и говорите О'кей значит вот так вот это всё страшно как бы расшифровывается крутость Ну вообще протоколы эти родились когда надо было на маленьком компьютере проверять корректность вычислений на Супер компьютере Может там что-то вывалилось ещё что-то сломалось как бы и вот собственно начало появления этих протоколов оно вот ноги у них растут оттуда Но вот эта вот абревиатура СК там сейчас целый зоопарк аббревиатура огромное количество разных алгоритмов внутри под капота которые позволяют эти ф системы строить но у них есть очень важные свойства которые тоже не могу обойти Значит первое Не интерактивность смотрите Что такое электронная подпись Да это тоже можно сказать такой Zero доказательство что я знаю такой приватный ключ от Ну что он соответствует публичному как мы его проверяем Я говорю сервер Привет вот те публичный ключ я от него знаю говорит Вот тебе Рандом Подпиши его я его подписываю отправляю серверу сер говорит Ну я тебе верю Значит ты знаешь как бы приватный ключ У нас протокол интерактивный требует как бы нескольких взаимодействий и опять же как бы в блокчейна это не работает как бы нет там интерактивности вообще ты хрен знает с кем коннекто там ничего не понятно поэтому смы не интерактив Ян в один запрос справить и доказательство что я знаю приватный ключ от этого ключа в одну транзакцию без всяких рандомных челленджей без всяких обменов просто в один хоп эти протоколы в первую очередь не интерактивные то есть всё за раз второе компактность ещё более важное свойство проверка этого пруфами ски проще чем само вычисление То есть вы не не возводить число в миллиард ную степень чтобы меня проверить вы ему просто верите То есть вы проверяете за очень короткое время то что я делал очень долго я мог очень долго это делать И конечно эти алгоритмы не дешёвые и мне напрямую на процессоре взвести как бы в эту степень число в тысячи раз быстрее нежели я буду ещё строить Вот это доказательство это дорого но оно всё-таки экономически оправдано потому что это вот Доказано потому что на этом уже много как бы всего работает то есть тяжело но доказывать это можно то есть проверка фа она очень компактная То есть она очень быстрая и в лучших в лучших ф проводи за о от едини Задумайтесь я могу отдать вычисления из миллиардов итераций там я могу отдать вычисления которые компьютер будет считать год он мне выдаст результат иф который я проверю за полсекунды бы это в теории это возможно на практике это нахрен не нужно конечно но тем не менее как бы это всё возможно Ну и нулевое разглашение очень просто как бы если эту функцию сделаю такую что поту нельзя понять и у меня получается Ягу Поня поту и если у меня функция возвращает True или fse пожалуйста будет работать точно так же То есть я взял какой-то инпут что-то там внутри сравнивал между собой что-то там делал а на выходе сказал типа всё О'кей единица То есть я отправляю Вообще единица плюс доказательства Это означает что я действительно знаю такие инпуты которые как ну которые заставили эту функцию как бы выдать единицу вот поехали значит что вы пришли к к криптограф Они вам говорят чувак а мы тебе значит сделаем снарк вот этот способ хочешь доказывай алгебраическое выражение то есть э хочешь доказывай Что там у тебя клиент знает какое-то число которое он с которым он что-то сделал хочешь он тебе докажет что это число находится в некотором диапазоне там меньше 100 там меньше тысячи А хочешь доказывай Что ты знаешь про что клиент знает про образ хэша то есть Я вам отправлю хэш и как бы докажу то что я этот хэш вычислил из какого-то значения что я вам не Рандомные байты послал А я действительно этот хэш вычислил из чего-то Я знаю его про образ это нам сейчас сильно понадобится А ну и знание приватного ключа И самое главное что они вам дают они говорят А вот теперь бери вот эти примитивы и можешь их слеп между собой То есть ты можешь сказать Я знаю про образ этого хша и это число которое меньше 100 там или меньше миллиона или в таком-то диапазоне то есть о говорит и сплять теперь эти примитивы как тебе нравятся как бы получится такая ф система на снарка попробуем значит переходим уже к нашим Set mersh Set membership фом У нас есть лист данных это вот у нас AB B CD то есть какая-то не знаю кортеж из базы данных там не знаю баланс дишни там что-нибудь ещё А кто кстати знает что такое merkle 3 дерево merkle 3 Ну да В общем не очень много а в общем эта структура похожая на бинарное дерево Но каждый вышестоящий узел этого дерева это хэш его двух его двух детей там двух-трёх она они бывают не бинарные как бы но не знаю можно это в России говорить не Бинар вот а Ладно короче а это хэш конкатенации хэшей которые под ним находятся и мёртл деревья очень широко используется Везде где требуется целостность Если у вас есть набор данных и Вам нужен хэш от всех этих данных вы в конце концов будете строить ркл дерева вы не буде сплять там сортировать по алфавиту и потом от этого считать хш Это бред как бы вы ВС равно в конце концов придёте кл деревьям значит чем они круты смотрите вот Я построил такое дерево взял а CD посчитал хш от а хш от БД Потом сверху над ними посчитал ши конкатенации и пришёл наверху к самому главному значению круту этого дерева корень этого дерева как мне доказать есть ру этого дерева что в этом дереве присутствует А значит я беру а затем я к этому А добавляю из этого дерева листочек следующий синенький ф о который ш ОТБ потом добавляю к этому доказательство проф 2 вот повыше ещё уровнем который 2 у меня синенький на картине и Ну а у проверяющего уже есть Я тем самым доказываю что я бы знаю ть дере до Рута и если я возьму какое-то значение там е Или там F или какое-нибудь другое я такого такую цепочки Шей не смогу построить То есть это доказательство того что этот лист находится вот в этом вот дереве то есть так в файловых системах там целостность организуется то есть мкл доказательством является массив Шей который представляет собой тут как раз вот Путаница не путь по дереву от данного листа а недостающие ши чтобы Построить путь от этого дерева и если посмотреть на код проверки л доказательства то вам окажется что для того чтобы проверить что а принадлежит вот этому Руту вам надо взять а прошивать его СФ о прошивать его с 2 прошивать его с 3 и если получится OT то как бы Вуаля как бы доказательство работает то есть очень простая проверка просто ш а нам криптограф говорит чувак вот те СР короче пожалуйста хэш хэша хэша хэша пожалуйста доказывай Что ты знаешь про образ Ты знаешь какое-то число которое если про хэширования используется тоже merkle деревя там модифицированные обязательно То есть у вас Торент - это хш не от файла который вы скачали Потому что если вы качаете tent и вам кто-то прислал кусочек там не знаю в 256 КБ Как вы можете быть уверены что вам не какую-то рандомную хрень прислали Как вы убедитесь что это часть вашего фильма. размером в 1 Гб Как вы поймёте это а поймёте вы это потому что к этому кусочку прилагается мкл доказательства путь под дерево мёрк который доказывает что этот чанк принадлежит вот этому файлу то же самое как бы это ну в блокчейна там там точно как бы всё построено весь стейт транзакции логи все укладываются вот в эти кл деревя Ну сейчас уже это будет изменяться как бы вот ну и всякие там Quantum SA Протоколы которые там будут устойчивы квантовым компьютерам они тоже используют Miracle деревя потому что там хэши симметричные которые квантовыми компьютерами Пока непонятно как ломать Вот то есть используются они довольно хорошо Ну вернёмся к нашему Set membership proof я хочу доказать что я значит в каких в каком-то списке нахожусь что я там что я там не знаю нахожусь у банка в списке там каких-нибудь плательщиков мне криптограф дал снарк который как бы доказывает что я знаю какое-то число Ну там какое-то Значение которое если прошивать прошивать прошивать доходит до определённого Рута соответственно доказывающий там клиент как бы он строит это дерево берёт вот этот вот мкл доказательства и доказывает что он знает инпут и набор ше который приводит его круту и ставстат проверяю проверяющего стороне То есть я находясь в этом дереве я вам не показываю ни инпут ни путь по этому дереву вы все знаете только рут от этого то есть только корень от этого дерева понятно что вы никакие данные не Восстановите А я вам даю Только т и доказываю Я знаю такое значение из этого дерева которое этому дереву принадлежит И вам ничего не остаётся кроме как этому поверить значит такое первое применение которое уже там в проде Да когда этот лист вообще публичный То есть все знают это мрл дерево значит публично туда добавляются на этом построены анонимные голосования миксеры и так далее смотрите А я доказывающий я задумал какое-то секретное число я его на будущее записал се на бумажке вот оно вот здесь у меня записано я его прохват мкл дерево вы все его знаете вот один из этих листиков этого дерева внизу он мой это хэш от моего секрета мой секрет Вы не добавил хш в это мкл дерево обновился OT как бы всё здорово Значит теперь я хочу сказать я владелец одного из листиков этого дерева только я вам не покажу какой листик поэтому я беру свой секрет Я его хэширующая это ну несколько там точек на эллиптической кривой То есть просто публикую вам доказательства OT и теперь абсолютно публично проверяема на любом компьютере кто угодно как бы может убедиться что я владелец одного из этих листиков Но кто я как бы сказать нельзя потому что я не раскрываю путь по дереву не раскрывая ни секрет как бы ничего То есть первоначально это проект семафор анонимное голосование в группе когда видно кто как голосовал А ну точнее видно какой голос пришёл но неизвестно Кто из группы этот голос потратил Ну и из семафора родился знаменитый Торнадо кэш который сейчас про который все кто про крипту слышал примерно знает это миксер через который там сколько-то там миллиардов долларов прошло это по сути прямо вот эта схема там контракт на две сотни строк очень простой как бы и работает это всё железно как бы прекрасно без всяких как бы проблем работает точно так же То есть я положил депозит добавился вкл дерево а потом через некоторое время я доказал что я в этом присутствует забрал свой депозит на какой-то другой адрес и связать эти два события между собой нельзя вот Ну и понятно что тоже самое можно делать там для анонимного там преобразования состояния какой-то небольшой базы из одного в другое То есть тут тоже много применений персональные данные как бы вот под это сеча стартапов вот пря вот так вот нарх паспорта КАТО паспорта предъявления документов потому что эта схема очень прикольная значит в этом случае просто дерево приватное оно только у клиента находится а публичен только Root то есть публичен только как хэш там не знаю какой-нибудь записи в базе данных и клиенты предоставляют вот эти вот Zero knowledge доказательства вот здесь у меня схем Ну например я хочу в в соцсеть не знаю там публиковать Э что у меня баланс в банке больше 100.000 вот я не хочу чтобы сеть обращалась к банку как бы я не хочу чтобы там банк ходил в соцсеть И вообще я хочу это сделать вообще в одну транзакцию Вообще хочу чтобы собствен сеть мне вот в один хит просто поверила и всё и написала типа У чувака больше 100.000 на балансе значит Как это работает по по картинке на самом верху значит Банк в своей базе данных берёт мои данные там не знаю баланс ID То есть то что я там не какой-нибудь там не плательщик отдаёт мне эти данные Я же клиент его я могу их посмотреть или отдаёт мне прямо сразу дерево вот это вот а от этого дерева Т банк может подписать то есть соцсеть как бы его электронные подписи может поверить это может быть публичный ключ как бы какой-нибудь вот то есть соцсеть может проверить только валидность Рута всё больше в принципе ничего не нужно как бы при этом банк ничего не шлёт я у него сам забираю этот руд сам забираю его подпись затем я точно также при помощи снарка строю путь по этому дере значит доказываю что я являюсь владельцем листа в этом дереве листа с балансом и что этот баланс например там больше 100.000 То есть мне криптограф сказали ну ты соедини этим логическим end как бы доказательство того что и это лист И что он там грубо говоря в таком-то диапазоне находится или там и что его префикс - это там код баланса там например то всё это спокойно делается и Ко всей этой штуке я прицеп всего лишь маленький кусочек вот это вот и больше ничего и опять же это всё происходит только в моём клиенте по сути то есть уже не банк ничего и дальше я отправляю в па NW вот такой пакет данных не интерактивный никакой а не использую Ничего как бы и после публичного сетапа вот эта вот социальная сеть может спокойно просто проверить ф а ну она должна конечно ещё поверить как бы ту от моих данных но понятно что здесь ничего не восстановишь там ни баланс никакую информации лишней не не получишь на то оно knowledge Вот такая вот история И как я сказал там стартапов очень много какие-то там индийские паспорта и так далее и в Европе же принимается регулятори типа которая позволяет электронный документооборот делать на основе приватных ключей Вот и по сути Это означает что снарки если они там если они там будут они будут по сути иметь как бы Вполне себе легитимное хождение как бы потому что это ВС СХ коне которые тоже построены там на эллиптических кривых как бы и к этому всему ещё конечно добавляются там знани приватных ключей владения акаунта то есть всё это можно комбинировать супер мощная история но можно ещё лучше значит ркл деревья они победили значит ну то есть они реально очень широко используются как я сказал Для обеспечения целостности но всё-таки у нас длинные эти э длинные доказательства массивы массивы ишей что же ещё как бы у нас есть ещё verle 3 это так называемые Вектор комитмент И на самом деле Ну вот что касается эфириум точно как бы к этому идёт значит там уже всё перестраивается State Database для перехода на эти Вектор комитмент Ну уж потому что ЕС тебе надо доказать что несколько значений находится в дереве тебе нужно несколько Miracle пров там куча всяких технической обвязки криптограф нам при помощи тех же Старков как бы подарили Вектор комитмент То есть это комитмент вот merkle Root - это тоже как бы ну для криптограф комитмент То есть это какой-то такой хэш при помощи которого потом можно доказать принадлежность к какому-то списку Вектор комитмент - это комитмент к вектору То есть я вам отправляю Я говорю есть какой-то Вектор здоровый там не знаю Там миллион элементов вот вам комитмент от него и потом я могу вам слать доказательство что Я использовал значение из этого вектора одно Два там 5 10 как бы то есть могу просто доказывать что а там такой-то элемент как бы на ну на своём месте по определённому индексу находится но фишка этих вкл комитмент в том что размер доказательства от единицы то есть вот это всё последовательное хаширова доказательства при помощи Ну при помощи тех же алгоритмов которые под снарка как бы используются оно сворачивается в константу то есть я могу доказать там что элемент находится там в миллиардом как бы векторе на нужном на нужной позиции а при помощи вот такого вот коротенько от от единицы доказательства и это супер фича более того они ещё и агрегирующие дениц то есть это такая самая-самая самая такая мощная история которая сейчас и если вот здесь вот сравнивать то есть мёрк у нас был бинарное дерево но опять же там для Снарком для некоторых задач использу квир там е фиг знает как эрны рные чит деревя и вот здесь как раз вот сложности конструирования пруф и размер вот этого пруф и получается то что Вектор комит смотрите вот то что красненьким как бы если мы доказываем для бинарного вот этого Вектор комит такого обычного то у нас довольно дорого построить Вот это доказательство но зато проверка едини вообще шикарно то есть прям клиент потрудился что-то там значит в этом векторе Колупаев за единицу проверили шикарно но если мы не хотим как клиента нагружать мы можем выбрать соответственно не бинарное дерево и соответ и тогда у нас будет сильно проще констракт как бы но проверка пруф будет за LK что тоже очень хорошо вот в общем это клёвая штука это такой H развитие сейчас как бы криптографии в общем если подытоживая на месте и снарки для криптограф сейчас это то же самое что не знаю ЛМ для Мельков вот за последние несколько лет как бы с арками занимаются все во всех там топовых университетах потому что это супер технология которая очень много чего изменит особенно в публично проверяемых окружения То есть это zer noge здесь нету вообще секретов провели сетап выдали всем ключи и все доказывают всё что хотят как бы то есть секретные только данные нет никаких ключей всё забыли Это слово ключи какие-то там неважно запросили данные публичный сетап прка всё всё работает ключевые технологии здесь это как раз пороговые схемы для это Zero и ещё гомоморфизм много прикладного для криптограф То есть сейчас здесь полно вообще чем заняться именно руками потому что здесь гается очень много всего в общем так Я всё да голосуйте за доклад Сергей Спасибо большое у нас даже осталось время на пару вопросов Я думаю что мы пару вопросов зададим здесь в эфире потом в дискуссионной зоне продолжим Вот ещё раз хотел сказать что обязательно голосуйте за доклад это очень помогает конференции нам спикера вообще всем Ну и Если есть вопросы которые хочется написать в чат зала Пожалуйста пишите Окей начинаем с вопросов как по традиции первый ряд Да вот справа Ага правая часть зала первый ряд Всё спасибо Здравствуйте спасибо большое за доклад хотел спросить когда вы говорили про нарки они пишут что доказательства для какой-то функции f Какие ограничения на эти функция то есть а Ну конечно в первую очередь это должна быть п функция конечно она никуда там не лазит там нет Внутри там никаких там не знаю рандомов получения текущего времени То есть она должна быть строго детерминированная и конечно снарки не умеют выполнять там какие-то огромные вычисления просто потому что время доказательства будет просто огромным поэтому по большей части это достаточно простые супе оптимизированные такие какие-то там вычисления не сильно сложные и снарки очень не любят Бинар сиину очень не любят Ну то есть там там не тривиально даже проверка на ноль то есть ну если начать рассказывать то есть что в эти функции можно хорошо заворачивать А что плохо это прям целый доклад но это очень интересно как бы история если кратко то хорошо заворачивается криптография нативная для Снарком подписи для Снарком телефонах можно проу Спасибо за вопрос Сергей Напоминаю что надо будет выбрать лучший вопрос Это был наш первый вопрос а теперь последний ряд вот там я вижу руку изза колоны Спасибо Привет Спасибо за доклад А что делать если агрегированная БС подпись не верна Как найти конкретную подпись которая была неверна или несколько м Если Ну то же самое что если делать как бы если обычная электронная подпись не верна Ну как бы обычно Ну конкретно блокчейна как бы оно просто как бы отбрасывается и всё И никто не примет как бы такой блок как бы и не увидит абсолютно точно такие же действия Это чисто механическое схлопывание То есть тут в всё точно так же работает Спасибо Спасибо первый ряд правая часть зала спасибо спасибо за доклад такой общий вопрос А что нас отделяет от аутентификации вот чтобы перестать уже это пароли придумывать там записывать на бумажке аутентификация Ну наверное по Боше всё равно алгоритмы тем не менее достаточно тяжёлые то есть и по крайней мере на тех алгоритмов которые сейчас это будет сильно дорого То есть если взять вот прямо вот ту электронную подпись которую вы сегодня используете то доказательство одной как бы подписи оно на современном компе может занять там не знаю минуты понятно что это вообще как бы не ну э неприменимо а на snark frend для алгоритмов пожалуйста Доля секунды всё прекрасно как бы работает вот они там в 1.000 раз быстрее вот принять алгоритмов Да как бы Спасибо И у нас есть время ещё на один вопрос вот Прямо посередине рядом с колонной самый активный участник сегодняшнего зала да как-нибудь до него добраться было бы здорово спасибо День добрый А вот у нас как раз выступал сейчас в фиолетовом шатре вчера докладчик по поводу вот развития разных квантовых компьютеров как квантовые компьютеры за аффект Вот это допустим то доказательство где y к ра X ку п 4 по модулю Q вот такие вычисления они потенциально могут быть когда вот у нас квантовые компьютеры подойдут до разрядности соответствующий чтобы их аффектив сейчас значит скажу а самые эффективные Снарком которые вот эту делают верификацию от единиц они построены Как раз на эллиптических кривых и пейринга а эллиптические кривые пейринги - это штука которой больше всего боятся Значит те кто боятся квантовых компью потому что действительно как бы эти алгоритмы при помощи алгоритма шра по идее должны ломаться но у снарка как я сказал набор алгоритмов там есть такие же снарки построены на Шах на симметричных и они квантово устойчивые то есть здесь как бы можно комбинировать это как нравится Ну и кстати Подводя итоги вчерашнего шикарного доклада про квантовые компьютеры е долго е ного и СР будут минима проб Я думаю бы это приятно слышать теперь самое приятное для для вас выбрать лучший вопрос у нас было вопро Я про функции потому что это прям очень правильный вопрос здесь всё как в Зазеркалье на самом деле внутри Спасибо большое за вопрос наша кастомная матрёшка и книга Ну и конечно мы не можем оставить без подарка нашего спикера Сергей спасибо большое за доклад приходите зону будет возможность задать ему ещё вопросы вот а"
}