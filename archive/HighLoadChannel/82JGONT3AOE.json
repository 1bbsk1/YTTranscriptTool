{
  "video_id": "82JGONT3AOE",
  "channel": "HighLoadChannel",
  "title": "",
  "views": 0,
  "duration": 0,
  "published": "",
  "text": "я вас всех Приветствую В этом зале дело к вечеру наверное немножко устали и подразумевается что этот зал про гошко про гофер но на всякий случай Давайте чекним кто про го знает слышал кол дате руки о прямо отрада для моего серца работу с базами данных в го через стандартную библиотеку и вас тоже много а кто слышал про wdb что это такое Ну тут сильно меньше рук но кажется всё равно должно быть интересно потому что у всех есть своя боль касательно касательно касательно собственно найдено что я такое и что я уметь но здесь не написано самое главное я очень люблю blame когда я смотрю на какой-то странный кусочек кода я такой ну я не верю что люди ужасные что они могут такое отвратительное написать Я залажу в т blan и смотрю как развивается Инженерная мысль вот откапывают как бы первая часть этого доклада - это про то как развивалась стандартная библиотека го в частности пакет Database sequel неким параллельным треком мы будем посматривать на то Как развивались вообще мир система управления базами данных ну и раз я работаю в команде vdb надо будет как-то рассказать как эти треки Go и wdb пересеклись вкратце что такое vdb изначально был придуман задуман сди зайне для решения задач хранения данных и для транзакционных нагрузок соответственно с горизонтальным масштабированием с высокой отказ устойчивостью То есть все вот эти четыре волшебных буковки это про но по состоянию на два третий годв ПФО данных потому пожи свой mess брокер У нас есть координация распределённых систем так или иначе мы стараемся закрыть все потребности пользователей о данные wdb используется под большинством сервисов Яндекса То есть можно поиграть в мыслительную игру говорите слово Яндекс потом какое-то известное слово там такси что-то ещё там не знаю КиноПоиск Алиса с высокой вероятностью там будет под ногами wdb wdb используется в Яндекс облаке idb используется во внешних облаках и с момента выхода в Open Source в прошлом году у нас появились у нас У некоторых больших энтерпрайз появились собственные инсталляции vb в их на их вычислительных мощностях и самая прекрасная история когда мы знать не знаем про Этих клиентов и они приходят к каким-то вот 00 Вопрос вот по в порядке приоритета когда они всё проделали прочитали нашу муд документацию всё получилось и где-то там вот чуть-чуть есть вопросик и такой а получается вы кластер себе развернули и Ну в общем это приятно какие-то внушительные цифры э с которыми работает wdb написаны на слайде что нужно ещё знать про vdb то что мы разделяем вычислительный слой и слой хранения наша самое как бы отказоустойчивые конфигурация подразумевает трёх дата-центров он называется mir ДЦ и слой хранения Мы мыслим как единую сущность это трёх доцент Stage слой пользователи взаимодействуют с компьют слоем компьют слой выполняет планирование запроса управление распределённой транзакцией и в том числе принимает запросы от пользователей или от клиентских приложений клиентское приложение для того чтобы начать взаимодействовать с первым же запросом должно выяснить конфигурацию кластера У нас есть специальный сервис Discovery который возвращает конфигурацию кластера конкретно базы данных выделенной в этом кластере далее все запросы направляются непосредственно к вычислительным узлам vdb к динамическим надам динамическим надам vdb клиентская приложение должно реализовывать клиентскую балансировку и равномерно размазывать нагрузку по узлам vb естественно вот у нас я руководитель и у нас языков программирования соответственно ь sdk на разных языках программирования и эту часть мы решаем Ну автоматически из коробки А если случается Так что один или несколько узлов idb перегружены то включаются механизмы сервер на балансировки Когда в неком йф режиме нагрузка уводи на менее загруженные узлы что дальше ещё нужно знать про wdb в таблиц в wdb хранятся в древовидной ээ в древовидной виде То есть вы можете хранить создать таблицу как в корне базы данных и можете её создать в неких там директория и под директория это наверное такое отличительная особенность от традиционных баз данных у vdb используются собственный диалект SQL называется vq ну со своими особенностями люди которые привыкли к стандартному слю найдут себе Знакомые слова а если нужно какое-то продвинутое использование Ну соответственно нужно погружаться в документацию и в документацию по vq и по vdb что важно ещё отметить в ADB нельзя создать таблицу без первичного ключа тип первичного ключа у нас может быть число строка ста или какие-то вот составные как указано на слайде Почему нельзя создать таблицу без первичного ключа потому что первичный ключ - это реквизит для того чтобы автоматически шардирование по объему по нагрузки поддерживает авто после того как вот граничные условия прекратили существовать можно вручную портировать таблицу и на данном слайде собственно вся квинтесс этого доклада про то как развивалась стандартная библиотека го касайся работы с базами данных Как развивался vdb по годам Если Уважаемый слушателю всё понятно все буквы понятны собственно можно дальше не слушать Шучу конечно Давайте слушать значит перенесём се в 2011 год что было на тот момент для работы с базами данных был стандарт dbc это си подобный интерфейс который продвигал Microsoft был стандарт gbc и я конечно свечку не держал когда ребята из Google проектировали пакет Database но я вижу очень много похожего в dat и в gbc в частности здесь показана работа похожий механизм для работы с транзакциями только я считаю что в сделано состояние конек что сейчас коннекшн в режиме транзакции и можно закоммитить или зать изменения Итак в 2011 году БФ Патрик написал Экспериментальный пакет SQL и объявил Ну собственно там интерфейсы которые нужно заимке суд интерфейс Ну на самом деле простой то есть несложно реализовать интерфейс но тут возникает вопрос а SQL где и я вот с ребятами в Яндекс практикуме за один вебинар за оди час вебинара мы написали in Memory хранилище которое вообще-то SQL не использует то есть SQL я напомню Это декларативный язык а мы когда общаемся с базой данных мы общаемся строками что там в этой строке SQL или Вот как вот здесь некое ле хранилище можно сказать можно написать для редиса Казалось бы то есть SQL буквы вроде бы не совсем относится к этому пакету А что ещё странного было заложено фундамент Database это интерфейс который подразумевает что идентификатор строки - Это всегда число а мы такие В смысле число число это хоро Когда у вас традиционная база данных У вас есть автоинкремент какой тип там это нормально а в распределён Вот автоинкремент это скорее антипаттерн у нас в рекомендуется использовать чтобы автоматически данные размазывать по различным шардам и Ну то есть нагрузка размазывать или у нас используются составные первичные ключи когда обозначается там от одно ино реквизита для шаровая также в этом интерфейсе подразумевается что все операции работы с базой данных они сопровождаются статистикой но опять же в распределённых базах данных как бы рекомендации использовать слепые вставки слепые изменения слепые удаления То есть когда вы работаете с распределенной базой данных Если вы хотите чтобы это работало быстро вы говорите пожалуйста и а в конце мне достаточно был успех или не было успеха э Сколько строк при этом удалено это достаточно недешёвое информация то есть в idb можно и так и так но э э отдавать статистику пользователь считаете сам себе создаёт повышенную нагрузку благо в этом интерфейсе есть второй результат - это Error где можно сообщить что вообще-то твой запрос не сопровождается статистикой и вроде бы там был простой интерфейс А если загляните в Database squ D там ещё куча интерфейсов это вот начало списка а потом ещё Блин а как это ну то есть я пишу драйвер вот у меня есть обязательства чтобы мой как бы моя сущность вписалась в Database SQL D я токо Всё окей а тут ещё сколько-то интерфейсов оказывается внутри во многих местах Ну простой гре порядка 25 мест где происходит Каст если Каст успешный Ну вот некой сущности имплементации Каст успешный мы используем Вот это продвинутое I Каст неуспешный Мы у нас используется какое-то дефолтное поведение что ещё хочется отметить прий вообще ну как бы в мире баз данных менты несут две важных функции это эффективность когда клиентское приложение обменивает длин запрос на какой-то там qu ID при этом серверная сторона компилирует запрос при этом вы экономите на повторных выполнения этого запроса экономите на сети вам не нужно там жирный SQL передавать вы передаёте коротенький qu ID Казалось бы здесь эффективность и вторая штука где нам помогают писать прокш приложение Менты это безопасность когда мы отделяем тело запроса и аргументы запроса мы исключаем SQL инъекции идея классная но по факту прип Вот мой Опыт показал что это немножко обман Почему обман потому что у нас когда мы начинаем пользоваться dat SQ драйвером мы оказывается аргументы можем в том же запросе передать не нужно использовать prp statement чтобы отделить тело запроса от аргументов если заглянуть например в имплементации драйве в pgx то Ну и посмотреть в протокол работы с пом то там требуется передать идентификаторы типов параметров А естественно когда мы вызываем там прип мы передаём только текст запросов а типы параметров Они чуть позже появляются и по факту В момент вызова прип вот в драйвере передаётся есть наемся наз данным волшеб обм вот эти вот воков или доллар О доллар 2 доллар 3 что что там что-то появится такое и его можно как-то вот хотя бы скомпилировать а если заглянуть там шный драйвер для постгрес там вообще интересно там в момент вызова при на самом деле на сервер нету никакого запроса этот запрос себе кэшируется как только применили Там там STR Ну то есть передали первые аргументы в этот момент как раз происходит запрос и потому что типы известны собственно забегая вперёд когда Ваш покорный слуга описал Database sequel dri для vdb Я пошёл по тому же пути я сделал вот это вот отложенный прип для того чтобы точно знать какие типы будут подсовывать для этого запроса Ну Итого то есть идея классная но по факту во всех реализациях Вот такая вот обманка то есть пользователь всё ещё Думает что он действительно защитился от SQ ици ВС ещ он эффективно работает но вот за сч вот этой вот назовём так магие в кавычках работает оно не так хорошо и классно как задумывалось фундамент также заложен пул соединений подразумевается что создание соединения к базе данных это дорогостоящая операция грено для того чтобы грешно создавать соединение выполнил запрос и удалять Конечно мы стоит по Каширова эту штуку но удивительно что размер дефолтный размер Пула составляет два то есть Пока У вас concurrency не превышает два у вас всё летает как только корен приложение вырастает Ну конси работа с базой данных вырастает больше двух становится всё начинает тормозить и мы такие что-то идёт не так и мы пошли настраивать пул соединения Да в нём ну как бы это в документации написано Но это примерно второй или третий шажок когда написали приложение посмотрели что тормозит пошли репу чесать и что-то до тюнить неожиданная часть Но круто что в принципе там есть пул соединений на дворе 2012 год появился релиз кандидат Экспериментальный пакет SQL перенова практически в в неизменном виде докатиться до наших дней также в этот релиз кандидат э вошли некие ретра то есть во многих местах э работы Database sequel вставлены вот такие цифры ээ Ну как бы ретрай со счётчиком цифра 10 я подразумеваю что взяты из потолка высосала здесь заложили как бы некий маркер некий признак того что имплементация драйвера может сказать вообще-то Вот это текущее соединение оно уже плохое оно испортилось оно сломалось Там и так далее То есть имплементация драйвера может вернуть вот эту специальную ошибку и вот эти в этих циклах соответственно это такой признак что нужно Повторить попытку на другом соединении мы до этого ещ дойдём Итого Март 2012 года состоялся релиз 1.0 в го а мы переносимся в 2014 год когда начался проект Собственно как транзакционная база данных и мы ускоряем на дворе 2016 год версия уже и там вот это вот сомнительно ме счётчиком заменили на reuse и собственно цикл из де попыток Заменил на цикл из трёх попыток две попытки на существующих соединениях в пуле и одна попытка всегда на новом классный механизм Я сколько на него не смотрел я всё время балл Представьте у нас в пуле 50 соединений и все они протухли Ну не знаю сеть порвалась возле клиента когда мы вот так вот работаем с базой данных выбрасываем соединения им одно новое и клам его в пул мы так освежаем пул идея вообще суперская она докатилась до сегодняшний дней за исключением строчки не равно немножко забегая вперёд дойдём до неё вот такой вот рар Классно что его встроили но он работает неработает в момен ког ното ко результата запроса он не работает Почему Потому что Database сикл вернул управление в клиентский код и дальше это становится а болью пользователя то есть клиентские приложения сами должны писать некие там ретрай не знаю пользоваться готовыми выдумывать свои со счётчиком до десяти ну не не суть То есть это становится болью пользователя и если у вас ээ Ну такая СУБД которая работает по протоколу то есть в момент когда вернул управление мы уже все получили все результаты запроса мы их материали в виде строк результата запроса то вот эти вот вторые стрелочки когда не происходит ра там маловероятно что что-то пойдёт не так но если мы работаем с интерактивной транзакцией то на момент выва УП работает на м создат интерактивную транзакцию а потом не работает опять не работает опять не работает и снова не работает Опять вот некий механизм повторов он перекладывается на на пользователя на дворе 2016 год появился го 1.7 там завезли классную штуку контекст и у меня опыт программирования на разных языках Я считаю мы го на голову выше всех остальных языков потому что это у нас фича языка контекст имеет две функции одна - это приделать значение для некого стека вызовов и Фу так делать но иногда без этого не обойтись а вторая важная функция Так предвосхитил вторая важная функция - это conel propagation conel deadline propagation то есть распространение отмены вызова по стеку и Go 1.7 контекст завезли А пакет Database sequel сиротинушка в него в него не завезли контекст Ну такой ну ёты есть классный контекст А с базой данных мы всё ещё по-старому без контекста общаемся на дворе 201 год vdb стал SQL базой данных мы стали поддерживать SQ Ну собственный диалект yql и переносимся в 2017 год многие базы данных подержи стали поддерживать именованные параметры запроса в том числе более того поддерживает только именованные параметры запроса никаких вопроси ков никаких доллар О доллар 2 и на всякий случай напомню типы запросов это бывает литеральные когда вы конкани строку запросы Или интерполитех под в том смысле что серверная сторона не может оптимизировать Свои Свои запросы потому что у вас каждый новый запрос он уникальный потому что вы поменяли значение Да есть ещё позиционные параметры э с вопросика есть нумерованные с доллар О доллар 2 доллар т и есть именованные собственно стандарт SQL не не говорит о том как должны в SQL задаваться именованные параметры поэтому эта часть вендер специфик Итого на 2017 год в го 18.8 завезли именованные параметры запроса я на всякий случай замечу что в jdbc в двадцать третьем году до сих пор нету именованных параметров запроса то есть ребята в Java мире когда хотят работать с базой данных используя именованные параметры они используют разные хитрости Чтобы достичь желаемого А зачем нам именованные параметры Нам же гораздо удобнее Это примерно как переменные в коде То есть если мы некий вместо вопросика написали там долар мы понимаем что это что-то про возраст если мы написали долар name это что-то про имя параметры вместо безликих становятся говорящими и у нас меньше шансов ошибиться в самом ске в 1 также завезли возможность итерации поно ЛМ когда это может понадобиться Когда вы одной в одной строке запроса используется более используете более одного селекта И тогда вам нужно на клиентской стороне уметь отличать лты от одной таблички и от другой второй кейс Когда вы читаете большие данные данные из большой таблицы и вместо того чтобы там в режиме вот материализовать все данные в неком ран тайме и получить закономерно Вы можете переписать если база данных конечно позволяет на некую римою ручку и получать парты или чанки данных и навить между ними это такой трейдо чтобы не создавать нагрузку на сеть и ранта на память своего приложения работ тее мы покалицына для quy для прип и для создания транзакций А старые А старые конечно остались Почему Потому что Legacy мы выпили старые у нас сломается обратная совместимость по идее это прямой повод для го 2.0 но так не делают потому что куча приложений уже используют старые ручки вот эти вот методы без контекста пользователи Go будут сильно разочарованы если сломается их код когда они поднимут версию Go наконец Мы дошли до consel propagation Ну вкратце здесь обозначено суть что у вас сигнал о том что не интересен результат запроса распространяется как в ран тайме своего приложения так и там в распределённой микросервисной системе как бывает в классическом энд принял запрос этот запрос оформлен в виде SQL пошли в базу данных и тут клиент Ну не знаю у него сеть порвалась он страничку Перезагрузил ему всё Ну то есть какой бы мы работу на стороне базы данных не делали у нас всё все Результаты будут потом в дену выброшены Потому что Потому что клиент ушёл некому отдавать и когда соответственно ходят программист без контекста в базу данных то как бы эн продолжает выполнять тяжелую работу особенно если запросы тяжёлые Ну типа Селект звёздочка выбрать всё и получается что даже если клиенту не интересны результаты запроса то сервер баз данных продолжает работать не все базы данных поддерживают как бы возможность Отменить запрос а те которые поддерживают на сегодня не сразу такими стали например постгрес стал поддерживать отмену запроса начиная с версии 80b тоже не сразу эти вещи стал поддерживать но мы и даже у нас до сих пор есть вот некая там Legacy в котором мы не можем как бы с клиентской стороны сказать что ну хватит товарищ сервер Мне уже неинтересно что-то там делаешь Отмени пожалуйста работу Почему для меня это боль я практику вёл там полугодовую когорту последнюю и с первого по двадцать второй спринт я заворачивали домашки и в ревью писал а что в базу данных идём без контекста собственно студенты исправляли эту часть Но вот мне кажется просто нужно пару фака пов в продакшене поймать чтобы понять что ну нужно ходить там в базу данных с контекстом или в какую-то вот систему которая требует значительной вычислительной работы До двадцать второго спринта Я всё Рассказываю что как важен контекст лично моя боль Ну опытные гоо программисты Конечно уже знают что нужно в базу данных ходить с контекстом собственно тут как бы назревает вопрос Почему э начинающие гофер пи ходят в базу данных без контекста Ну потому что есть опиш IDE driven development ставим точку Ага EX или там quy Ну и всё он заюзал этот метод Неважно Что там как бы второй строчкой написано там qu контекст он пойдёт без контекста хороший путь - это выпилить методы без контекста когда их выпит нам подсказал ракс буквально в этом году Угадайте ответ никогда но что можно было бы сделать можно было бы разметить deed чтобы если в проекте настроен нте он как он хотя бы ругнулся что ну Фу так делать Ну не надо ходить в базу данных без контек на дворе 2018 год мой предшественник запилил нативный го драйвер и в этом же году запилил Экспериментальный Database для vdb и перенесёмся в 2019 год появился го 113 и у нас изменился подход к работе с ошибками собственно напомню до го1 мы обрабатывали ошибки вот следующим образом мы их проверяли на равно равно или равно в зависимости от того Какое у нас там положительное или отрицательное условие проверялось начиная с11 рекомендованный путь проверять ошибки через errors is errors As там в зависимости от того ошибка константная или мы пытаемся там к интерфейсу привести почему это появилось потому что Ошибка перестала быть переменной она может быть может оборачивать в себе другие как бы Верхне уровневые Ну тут Смотря с какой стороны посмотреть верхни уровни или Нижне уровневые ошибки то есть стандартный fmf с холдером проце W оборачивается какую-то исходную ошибку в Новую ошибку подход через R позволяет соответственно проче Кать что же там было в самом начале Почему я про это пишу потому что 2019 год 11 а в опять ничего не изменилось блин это лично для меня боль вот у меня есть пара коллег здесь сидят в зале это и их боль потому что ну как бы я разработчик поставщик драйвера А у них клиентские приложения продакшены страдают мы дойдём до этой части где они страдают вот когда у нас есть ка какая-то исходная ошибка и мы вынуждены Ну как бы для совместимости с Database сик возвращать специальную ошибку маркер Driver RBC на графиках на клиентских выглядит так что ну какой-то фон ошибок д R BC а что там посерёдке было ну непонятно а на самом деле ошибки - Это не враги программисты не враги там драйвера sdk или некого кода который их получает это замечательные подсказчик они они говорят что что-то пошло не так и в каждом конкретном случае можно хорошо обработать эту ошибку так вот в idb есть по крупному два класса тран соответственно транспортные ошибки сверху и операционные некие логические серверные ошибки для одних ошибок мы рекомендуем ретра с медленной экспоненциальной задержкой для других с быстрой экспоненциальной задержкой одни ошибки являются ребель безопасными другие можно трать только если пользователь указал специальный флажок идемпотентность что при повторе теже сарай с ба данных Прим состоянию Ну как антипод могу привести если мы в запросе до начисляем биллинг клиенту то что произойдёт на Особенно их Ну не знаю 100 раз повторили Ну в 100 раз биллинг счёт получит Будет грустно поэтому тут как бы эта часть отдаётся на сторону пользователя и он сам помечает индепендент или нет на одни ошибки нужно удалить сессию А в терминах db сикл - это соединение к базе данных на отдельных типах ошибок следует закрыть вообще соединение к узлу wdb и удалить все сессии которые на этом узле wdb созданы И я такой смотрю вот наше многообразие ошибок которая говорящий который подсказывает который позволяет ну как-то классно написать ретра я такой драйве R BC Ну вот что-то взял схлопнулась в какую-то выжимку Ну это Примерно вот так в коде выглядит А если бы мы не замалчивали исходные ошибки вот за этим Dr RBC на графиках можно было бы понять что там часть например сессии инвалиди например сервер отменил транзакцию потому что там сломались Локи транзакции а а часть вот этого вот графика относится к тому что сервер перегружен и там дальше Ну как мы как минимум инженер технической поддержки мог бы понять что нужно там Дону ресурсов там расширить кластер или что-то Ну то есть а когда оно всё спрятано за dbc ну непонятно как из этого выходить собственно на дворе 2021 год Ваш покорный слуга пришёл на участок где уже были вот эти вот экспериментальные нативный го драйвер и Экспериментальный Database сил две там была пачка тикетов на втором слайде было написано 500 тикетов разобрал это вот вот тот самый момент То есть я посмотрел как люди работают с vdb сколько они страданий болей и ну как бы переработал основная главная мысль что я запретил использовать Ну работать с баз данных без Трайв в idb использует оптимистичные блокировки и это немножко ещё такое усугубляют и усугубляя и преимущество так вот ну вот трае обозначен здесь do в ретра нужно передавать лямбду э можно указать опциональный флаг идемпотентность мы управляем временем жизни трае через контекст и обязательно лямбда должна возвращать ошибку собственно раер получая ошибку он может дальше её попытаться классифицировать что там произошло какую там задержку экспоненциальную быструю медленную вставить Нужно ли удалять сессию и так далее То есть вот это вот ре какая-то R оно как бы способ пообщаться с ретрайм и официальный db D спустя Ну примерно год также вашим покорным слугой был написан и там тоже мы как бы заложили то что с базой данных такой как idb нужно работать с помощью Трайв собственно два рара один про работу с базой данных на сль соединений А второе на транзакции всё точно также мы передаём лямбды всё точно также мы можем обозначить флаг идемпотентность мы управляем временем жизни ретра через контекст и обязательно нужно возвращать ошибку это способ общения как бы вот клиентской лямбды с Тром на дворе 202 год я ждал этот релиз я с замиранием сердца следил за этим пул реквест Нил ффн он вообще принёс как бы вот это вот кейс из Microsoft sequel сервера собственно заменили наконец работу с ошибками где было равно равно или не равно я не совсем помню заменили на errors is и это позволило нам не терять информацию об исходной ошибке то есть было Вот до Go 1118 У нас вот какие-то клиентские графики это абсолютно честный график одного из клиентов idb работающего через какие-то нелепые задержки до минуты то есть вызвал что-то оно что-то минуту делает какой-то рейд ошибок почему Ну потому что вот исходная информация об ошибке теряется за счёт вот такого нехитро хака можно сохранить исходную информацию об ошибке и дальше е использовать для того чтобы там как-то оптимальным образом работать повторять выполнять повторные попытки и клиентские графики они внезапно преобразились там максимальные тенси вообще прекрасные стали Рей ошибок улучшился также в Ну это уже в 2023 году мы написали биндинг запросов к vdb почему Ну wdb имеет немножко высокий поро входа люди привыкшие работать с ском наверное ну не хотят писать всякие праг de Ну вот это вот что справа собственно биндинг решают эту задачку автоматически превращает пользовательский относительно простой ск в тот yql который понравится и когда мы говорим что у нас официальная поддержка что у нас написан существует Ден для того чтобы по профилировать что происходит внутри драйвера У нас есть какой-то встроенный логгер который там задаётся через варо переменный есть адаптеры для популярных геров там за есть метрики для Прометея есть метрики для внутренней внутри систе мониторинга для в формате Open и Open tracing это те штуки которые то есть мы даём двер И говорим что вот есть такие там плагин адаптеры которые позволяют в случае каких-то проблем принести чуть больше ЧМ чем не работает Помогите Таким образом у меня сложился и плохой и какой-то злой опыт и где-то я балдею от но в совокупности я могу утверждать что сил и плохой и хороший и злой одновременно и вишенка на торте как только появился Database D у нас начали появляться рождаться проекты основанные на этом драйвере например Моя коллега написала графа dat Source плагин для работы с wdb мы завезли поддержку wdb в утилиту миграции гуз и ещё пачка проектов они в состоянии Work in Progress где-то там Альфа где-то Бета и у нас есть пачка ию в гитхабе размещенных специальной меткой Student Projects чтобы можно было прийти и нанести Добро по кодить по взаимодействовать там со штатной командой или как-то отметиться на просторах Open Source Спасибо всем за внимание на слайде QR код для голосования за этот доклад контакты спикера здесь обозначены и прошу ваши вопросы а Спасибо большое за интересный доклад вот он хорошо проиллюстрировал что у вас были боли там чуть ли не с 2016 года и у ваших пользователей Вот в связи с этим вопрос а стоило ли так долго терпеть вот пока какой-нибудь очередной Нил не пришёл и не принёс вам добро может быть стоит подхватить это упавшее Знамя и как-то самостоятельно возглавить разработку Database SQL Тем более что вы уже двумя ногами в опенсорс надо идти дальше Спасибо за вопрос Ну мы растём и в какой-то момент там разработчик Может просто стесняться потом он такой всё смелее и смелее собственно у меня были пул реквесты в стандартную библиотеку не приняли но там там там большой путь А И и да вот глядя в прошлое ретроспективно я бы точно этим занялся раньше но здесь вот какой-то такой момент наверное э все задним умом то умные Да ну туда довольно трудно протолкнуть свой порек То есть фактически только тривиальные Фиксы для тривиальный багов удаётся ВС остальное прямо застревает на этапе обсуждения Это я из собственного опыта говорю Есть ли ещё вопросы Да да разв спасибо за доклад вот узнать как вы отменя запросы Просто я Почему спрашиваю есть доклады про специфику отмены запросов к поре и там всякие страшилки рассказывают что можно там не тот запрос отменить что это делается через отдельный конект не всегда это возможно вот у вас актуальны все эти сложности Ну наверное проблем больших нету потому что мы используем и стандартные коне для PC и grpc вот propagation из коробки поддерживает то есть на стороне idb одна из динамических нот динамических узлов принимает запрос у нас устанавливается jpc транспорт по которому мы можем с помощью стандартного Гош контекста сделать отмену вот на серверной стороне на самом деле ребята там для каких-то ручек Ну хендлеров да для каких-то ручек уже поддержали возможность отме для каких-то процессе там Ну на самом деле когда запрос распространяется там на дата шарда не всегда просто сказать не всегда просто сказать в некой вот акторно системе в которой которая есть в что вообще-то хватит всем всем вот вам трудиться тем сущностям которых я пнул для того чтобы выполнить запрос но вот у нас недавно ребята поддержали итератор чтения это тоже такой способ приблизить светлое будущее но касательно проблем что можно отменить случайно чужой запрос у нас такой проблемы нету потому что мы используем jpc стандартно из коробки так спасибо Нам нужен третий вопрос чтобы Да четвёртый ряд да Андрей Наумов ядро вопрос тоже такой просто поинтересоваться по поводу тут были слова ВД зать вы умина что вот можно было бы пометить методы без контекста как случайно не пытались это протолкнуть то есть принести порек в go в стандартную библиотеку Ну ну я у меня на самом деле поменялась роль теперь я больше руководитель и по ночам только разработчик но классная идея как бы можно нанести добро но у кого настроены литеры тем Добро не будет Ну в конечном Светлом будущем О точно а вот предыдущие докладчики из Яндек Cloud упоминали каких-то стажёров которым можно эту задачу поручить В целом да то есть у меня предпоследний слайд был о том что вот работа с коммьюнити мы же в опенсорс у меня не зря Вот такая майка красивая это всё работа там со студентами практикума со студентами разных ВУЗов со стажёра которых Яндекс нанимает для прохождения ро и нанесение добра действительно Ну я как руководитель подумаю В какой ресурс стоит передать эту задачу А может быть я пожадничал себе лично запишу хорошо спасибо коллеги У нас вышло время лучше в кулуарах задать все остальные вопросы настало время выбрать лучший из этих трёх вопрос и вручить подарки Ну давайте хитрый вопрос про отмену отмену запроса Да коллега выходите к нам сюда из из ядро правильно из Тинькова так Спасибо за вопрос Спасибо так Спасибо за доклад L"
}