{
  "video_id": "Z7kv8tYVHx0",
  "channel": "HighLoadChannel",
  "title": "",
  "views": 0,
  "duration": 0,
  "published": "",
  "text": "Давайте поприветствуем следующего докладчика Андрей рикин пожалуйста на сцену Андрей сцена твоя так класс У меня есть кликер Всем привет Меня зовут Андрей я Да сегодня хочу с вами поделиться тем как мы выводили в it Open Source И сколько мы на этом съели и дать какие-то там советы рекомендации тому кто может быть будет выводить свой проект или чем-то похожим заниматься прежде всего Давайте немножко про меня расскажу я уже более 5 лет работаю в Яндексе пришёл изначально заниматься инфраструктурой и делать как раз платформу vus как технический менеджер и продолжаю этим заниматься вот всё это время на самом деле внутри Яндек проходит много разных вещей много разных проектов маленьких больших но публично могу выделить два за которые которые были заметны снаружи Первое - это вот запус суперкомпьютеров они управляются тоже платформой и мы к этому были причастны добавляли их в рейтинг топ 500 и второе - это вот последний год мы вытаскивали тоже Open Source тоже большой проект который тоже был заметен снаружи я уверен что не все здесь знают вообще что такое или it поэтому я очень кратко расскажу На самом деле не только ради того чтобы популяризировать систему но и просто чтобы вы понимали контекст что это за платформа И чего она делает в Яндексе вообще urus - это такая платформа для хранения обработки больших данных То есть вы берёте много серверов объединяется их логической с автом объединяет их логический кластер и можете на них хранить и обрабатывать большой объём данных больше чем на там одном сервере условно urus является ключевой системой для хранения обработки данных в Яндексе это значит что все бизнес юниты там с которыми вы сталкиваетесь Маркет такси Алиса беспилотники любой практически бизнес Юнит так или иначе хранит там свои данные какие-то логи и там же их обрабатывает у нас огромные кластера которых как раз эти люди и живут А во внешнем мире тоже есть такие системы ближайший аналог э Если кто знает это apach hup целый экосистема а но в it или в it zaurus - это в общем платформа которая создана внутри Яндекса это никакой не Fork hupa никакая не никакой не вариант это собственная разработка написана c+ Plus и разрабатывается в Яндексе уже более 13 лет она разрабатывается используется и мы не собираемся от неё отказываться она продолжает быть как бы Центральной системой таким ядром где лежат большинство данных а ну и с этого года в марте мы выпустили платформу Open Source она теперь доступна всем под под лицензия apch 2.0 Так что можно взять её воспользоваться все поставить или поиграться посмотреть как код написан ну и тут есть наш код наш сайт и github мы будем рады всяким лайкам но тем не менее Давайте перейдём к теме доклада значит Какие есть варианты вообще выложить что-то в Open Source самый первый такой самый простой вариант на самом деле это вы берёте просто код вытаскивается его на github и забываете и это Отличный вариант Если вам нужно просто кодом с кем-то поделиться и вы не планируете его дальше там как-то развивать это вот такой дешёвый вариант очень быстро и на самом деле Конечно такой вариант тоже был То есть если бы мы хотели с кем-то просто поделиться кодом тезауруса могли выбрать лицензию выложить его и всё и сказать забирайте и делайте что хотите второй вариант более популярный Он отлично работает для разных библиотек Когда вы выкладываете код пишете к нему документацию делаете чтобы он собирался И всё И вот на этом останавливается и для каких-то разных библиотек это в общем Ну такой хороший тоже вариант Когда вам не надо вокруг него строить какое там целое комьюнити у вас нету продукта это посложнее Но тоже В общем так третий вариант самый сложный когда понимаете что ва продукт не прото набор кода вот что имеет самостоятельную ценность вы хотите этим поделиться с людьми но не просто поделиться да А ещё и как-то сделать так чтобы люди могли этим а воспользоваться б чтобы там росло какое-то коммьюнити чтобы эта система могла дальше собственной жизнью жить И это в общем самое сложное - это то что по сути сделал там кликхаус и то что мы пытаемся В общем сделать своти Зауру сам это то что как бы тот путь который мы выбрали а и я буду как раз рассказывать про третий пункт Да он включает все первые два обязательно код надо выложить документацию надо написать но там есть ещ много разных подводных камней самый частый вопрос который меня спрашивают А вообще Че по времени сколько нужно времени сколько это вас занимает но смотрите когда мы только вообще про это начинали думать а думать Мы про это начинали на самом деле довольно давно наши очень оптимистичные оценки были полгода на самом деле оценка непонятна без труд затрат но будем считать 10 человек на полгода способны выложить большой проект в Open Source реальность сказала что год то есть 10 человек лет и мы не всё сделали Мы очень сильно судили скоуп Это был реально mvp за который было нам не слишком стыдно тут вы сами решаете за что вам стыдно за что нет Да есть какой-то минимальный набор но тем не менее Вот через год мы получили что-то что мы можем показать людям и ещё полгода к кущем моменту мы продолжаем доделывать и улучшать какие-то вещи а в любом случае неважно По какому пути Вы пойдёте Да готовьтесь к тому что придётся много писать кода писать документацию и обязательно Договариваться с людьми важно сказать что вся команда Ути заус - это там порядка 50 человек на тот момент когда мы это начинали делать и очевидно вы не можете сделать так чтобы все 50 человек взяли и пошли в Open Source делать какие-то задачи у вас продолжает это быть система внутри Она продолжает эксплуатироваться У вас есть какие-то баги Вы должны их фиксить поддерживать систему поэтому на самом деле вы берёте какой-то там набор инициативных людей и говорите окей Пойдёмте мы будем заниматься тем что систему будем готовить к осос в нашем случае там со всеми юристами дизайнерами PR людьми это там было порядка 10 человек фултайм в течение года А и тут есть ряд проблем где вообще теряется время и про которые Стоит подумать и которым мы честно говоря там не были готовы э я по ним сейчас пройду по как по кругам ада на самом деле первая проблема Это конечно название вот все же знают что в it с названием всегда всё сложно но когда вы пытаетесь что-то такое выложить наружу Да это отдельная боль и очень очень большая внутри наш продукт называется и Наверно все кто там в Яндексе работали знают его под именем либо ть либо это такая аббревиатура из двух букв которую никто не расшифровывает но вы не можете под этим названием выложить её наружу Ну во-первых снаружи Люди под понимают YouTube неожиданно вовторых вы не можете такой домен зарегистрировать потому что он либо Уже занят либо очень дорогой вре ком которой есть хотя бы отличие в одну букву Например у них буковка ут они могут Прити к вам и сказать А что это вы наше обозначение используете Заплатите по деньги Вы же Яндекс У вас есть поэтому вы такие Упс надо что-то другое придумывать и очевидно что когда проекту 13 лет Ну у вас эти две буквы Они во всей кодовой базе у вас утилиты везде называется у вас всё форматы там Везде они есть Ну и ладно бы вы можете переименовать сделать и выложить его люди-то внутри продолжат сидеть на старой версии Кода да у вас начинаются Две версии Это полный маразм поэтому какие варианты Ну Первый вариант это придумать нормальную расшифровку для yt А второй вариант придумать какое-то слово которое начинается с и мы честно пытались пытались пытались пытались и проверяли разные названия и на самом деле у нас ничего не выходило я хочу сказать что где-то наверное месяца два мы просто командой спрашивали помощью Яндекса пытались что-то придумать были разные варианты типа жёлтого хвоста Но на самом деле ничего хорошего не придумывается я в целом прекрасно понимаю людей из Макдональдса перед какой проблемой Они встали Потому что когда у вас есть классное название к которому все привыкли невозможно придумать такое же классное новое оно никогда не будет сразу жива А и каждый раз когда вы придумываете какое-то имя проверяете его вы отдаёте его юристам и спрашиваете А можно они значит берут это название ходит на там несколько дней и возвращаются и говорят Ну знаете с девяносто процентно вероятностью к вам будут претензии и вот дальше Делайте что хотите Мне кажется мы перебрали не знаю порядка 4ка названий так вот ну примерно А ещё одна проблема поскольку у нас команда довольно большая Мы начинали играть так демократию и конечно предлагали разные варианты это не работает Когда у вас 50 человек вы обязательно найдёте того кому не понравится новое название кто будет против кому что-то будет не нравиться будет лучши Вариант его собственный поэтому это всё так затягивается мы внутри шутим что на самом деле Open Source Мы тащили в it А вытащили в itus это то к чему Мы пришли Ну вот такой компромисс первые две буквы сохранили А было очень много интересных прикольных вещей это вот мой личный Фаворит уточка очень понятно что так нельзя Но тем не менее есть Подводя какой-то вообще итог по выбору названия я могу выделить там несколько советов первое просто закладывать существенное время если вы заранее не думали про название не Проверяли его и не думали что вы будете когда-то идти Open Source и будете регистрировать это название просто Ну вот пару месяцев минимум потому что это реально очень-очень сложный процесс А мы в итоге не справились это сделать командой и не справились там помощь коллективного Яндекса который мы спрашивали и привлекли специально внешнего копирайтера который нам предлагал разные варианты они это делают очень прикольно в том плане что они дают вам порядка там не знаю двадцати названий приносит и за каждым стоит какая-то история обоснование Почему так нарисованный какой-то вариант там логотип и так далее То есть они вам продают название и вот в этой схеме это работает ну более-менее Самостоятельно придумать Ну мы не смогли Хотя старались изо всех сил А ещё обязательно выберите хотя бы максимум пять человек И делегируй им Принятие решения на 50 человек просто нереалистично ничего сделать это Там ошибка которую мы совершили наверно одними из первых когда стало понятно Мы конечно там выделили каких-то лидеров и сказали так за название будете отвечать вы все все бить будут вас в общем И последнее перед тем как отдавать название на проверку юристам это обязательно нужно сделать если вы хотите его зарегистрировать там не знаю в России или в каких-то других странах проверяйте проверяйте всеми возможными способами вот здесь перечислено три основных Попробуйте посмотреть на домен сколько он стоит он может стои Ках космических денег и вы просто не захотите его покупать миллионы каких-то рублей поищите в поисковиках конечно же и есть доступные базы в которых есть уже зарегистрированные торговые марки просто скачиваете их по ним смотрите это сильно экономит время Ну и на самом деле если вы придумываете Нормальное хорошее название с % вероятностью оно занято поэтому придумывайте что-то чего вообще не существовало до этого то что вы гуглите и Google говорит наверное у вас опечатка вот если что-то такое шанс это зарегистрировать Он намного выше в проблема с которой мы столкнулись это жизнь вне компании проекту 13 лет он большой это в общем основная система очевидно что она как не знаю как Лиана всё опла и к ней есть куча разных интеграций и она связана с многими системами и снаружи таких систем нет поэтому первое что на самом деле заняло Ну большую долю времени на которой мы раз рассчитывали по которой мы оценивали вообще что полгода какой-то минимум это нам нужна была новая система деплоя внутри у нас есть своя Яндекс deploy снаружи Мы пошли к разным людям ещё Перед выходом и поспрашивать вообще как они работают с такими системами и получили ряд вопросов Аля что у вас вместо лаудера менеджера или какого-нибудь ач амбаре и поняли что нам надо свою систему деплоя делать Ну как без этого в качестве в общем решения мы взяли и написали свой кубернетес оператор и вот одна вот эта задача она заняла там порядка полугода мы рассчитывали месяца на четыре Ну вот полгода мы писали оператор просто потому что система большая сложная много разных настроек обновление поднять все компоненты писать логи и так далее не самое сложное и довольно В общем Ну Нам повезло в этом месте но у нас своя система мониторинга и алер снаружи этот прометеус вам нужно поддержать этот формат благо уже были доступны библиотеки и мы просто Их поменяли и в целом Здесь всё так довольно бесшовной быстро сложилось сложности нас ждали дальше внутри Яндекса внутри интерфейса системы у нас есть Прямо графики они прямо встроены и вы когда заходите видите вашу операцию которая что-то делает вы видите сколько она потребляет CPU сколько она потребляет памяти и прямо такой дашборди для вас собран по вашей операции вы всё классно видите и вам не надо никуда из системы уходить оказалось что во внешнем мире встроить прометеус ие графики внутрь юя Ну нельзя на самом деле можно а-фрейм но там ряд проблем возникает И это не очень красиво а поэтому мы там добавили ссылки но сами Дэш борды надо собрать понятно что внутри мы их один раз собрали руками и всё и они работают а снаружи надо как-то с людьми этим делиться соответственно мы начали придумывать Какие тут есть варианты и в общем для первых пользователей давали Джейсон А сейчас в общем сделаем скрипт генерации который будет все дашборды для системы автоматически генерировать дальше есть проблема с аутентификацией внутри у нас используется Яндекс паспорт очевидно что Люде его нету очевидно что нем нужно что-то своё нам тут тоже там повезло отчасти платформа умеет хранить у себя внутри пользователей группы и в целом у неё была собственная аутентификация поэтому мы смахнул с этого кода немножко его причесалась же люди будут этой системой пользоваться возможно компромиссный первый вариант выйти вообще без аутентификации просто всё доступно всем для первой версии но давайте для базы данных Наверное это плохой вариант а последняя такая крупная проблема которая у нас была это отдельный сервис wql Но тут надо пояснить в Яндексе существует отдельный Сервис через который вы пишете запросы к разным системам и одна из этих систем - это wus и пишете на сле вот понятно что снаружи система без сго доступа выглядит странно особенно сейчас и понятно что давать две разные системы тоже как-то не очень хорошо поэтому мы тут приняли решение забрать библиотеку которая как раз разбирает запрос и выполняет операции дёргает Но обёртку написать самостоятельно то есть сделать свой U свой и в своей же системе положить историю всех запросов ВМ общая весь синтаксис поддерживается но функциональность у неё абсолютно ограничена то Она позволяет там писать минимальный набор запросов снаружи люди ещё не получают тот же экспириенс который мы хотим им дать как внутри Яндекса но мы к этому идём в целом для того чтобы попробовать этого достаточно Да и писать какие-то запросы но мы конечно хотим ещё доделывать и там развивать эт часть и это наверное там одна из таких самых слабых частей наших си нашей системы но просто потому что пришлось как бы большой кусок просто взять и написать с нуля исключительно для осор внутри это не нужно есть отдельный большой сервис который умеет делать Крос системные запросы что я тут могу посоветовать Но на самом деле абсолютно всё сделать нереально и то есть какой-то вид что будет классная система как внутри снаружи но он такой идеалистический поэтому режьте с берите mvp и пытайтесь сделать хотя бы это И даже это будет довольно сложно думайте про внешнего пользователя как он будет Шей систе пользоваться нужна е аутентификация не нужна что будет как вообще он будет её администрировать как он будет её настраивать на самом деле в идеале это то что мы сделали это Найдите рли адаптеров найдите людей с которыми вы сможете разговаривать до того как вы выложите систему Open Source Если вы хотите из неё делать продукт кому вы будете её там давать продавать или как-то ещё предлагать общайтесь с ними и ну спрашивайте интересующие вас вещи понятно что на одном клиенте у вас получится очень однобокая система лучше чтобы их было несколько но лучше чтобы хотя бы один человек был да какая-то компания которая будет что-то пробовать и явно вам приносить и говорить а вот тут вы вообще забыли про вот эту часть мы не знаем как не знаю как влогиня вашу систему А третья проблема огромная это документация на самом деле Э довольно много чего нужно сделать с документацией когда она у вас внутренняя для большого проекта она действительно большая для пользователей у нас много текстов которые в общем у нас не такая большая команда да на на весь Яндекс поэтому мы стараемся документацию В общем неплохо поддерживать чтобы люди могли сами решать свои вопросы а но тем не менее она скорее пользовательская то есть она не для администраторов и она многие вещи она решает там в духе Яндекса и каких-то смежных систем смежных систем и может быть даже даёт какие-то ссылки на какие-то внутренние ресурсы где описана какая-то другая инструкция понятно что вам надо это всё Вычитать это первая проблема Убрать всё лишнее написать новые вещи Ну например админ гайд какой-то а при том что вы прямо сейчас в полёте создаёте себе кубес оператор который ещ никто никогда не использовал это ставится довольно сло задачи да вы меняете его прямо на литу И вам надо к нему ещё и документацию какую-то сделать Мы метили в то чтобы сделать осор сный проект международный Значит вам нужна документация на английском значит её надо перевести у нас она была на русском перевод документации никогда не будет хорошего качества Да не верьте что будет какой-то магический технический писатель который придёт вам всё переведёт и сделает всё классно на том языке который вы хотите Нет к сожалению это технически сложная система надо будет самим вычитывать самим переводить самим использовать термины Отличный вариант для того чтобы документацию улучшить поправить какую-то структуру убрать какие-то ссылки в UI или там где-то ещё в бэнде что-то написать правильное там Душки какие-то заменить а заминировать сгенерировать документацию для СДК тут Важно сказать возвращаясь к названию что пока у вас нет названия А многие вещи вы делать не можете Ну например у вас нет домена Да вы не можете его купить А пока у вас нет домена вы например для Java sdk не можете имена пакетов выбрать и как бы Замкнутый круг Поэтому пока вы не не придумаете себе название не купите домен какие-то вещи просто делать нельзя понятно что можно делать там рефакторинг что-то переделывать но какие-то штуки в общем-то блокируются а убрать всякие ту Душки и опять же как бы если вот всё это просуммировать то первый самый совет ограничьте скоуп у нас была огромная документация по всем разным свойствам системы Но для пользователей очевидно что снаружи нету ещё пользователей но есть администраторы которым нужнее Амин гайд чем вот эта пользовательская документация и мы конечно же какие-то куски системы которые мы не собирались мы не считали как бы первостепенными на них можно было бы забить Да и отрезать и потом только до выкладывать много времени ушло на самом деле документация её перевод написание и так далее где-то три человека этим занимались два технических писателя и менеджер и это заняло там год и дальше мы ещ внутри сливали документы воедино то есть мы выделяли публичное ядро и какой-то н для исключительной индексов инфраструктуры и вот это вот всё слить происходило ещё там полгода после того как мы всё это выложили А важный пункт про который не стоит забывать у вас наверняка большая команда Давайте им разные разделы вычитывать не делайте всё в одиночку Я понимаю что есть гайды Я понимаю что хоче там единообразно техническим писателям это проще делать но тем не менее делитесь командой показывайте им результат давайте делайте им реквест Пускай они вычитывает это тоже важно для продукта документация критически важна Но им невозможно пользоваться если нет документации то на что смотрит на самом деле мне кажется у нас неплохо получилось Я сужу Потому что есть определённая категория пользователей которые без нашего ведома взяли систему развернули и смогли начать пользоваться такие верно документация не такая уж и плохая а четвёртая проблема она связана с разными лицензиями и экспортным контролем вы естественно хотите чтобы ваш продукт был Ну я не знаю максимально публичный доступный какую-то лицензию мы хотели ач 2.0 Мы хотели чтобы все могли пользоваться брать зарабатывать деньги делать что хотим хотят а нужно выбрать лицензию у вас внутри проекта особенно большого очень много зависимостей вы не можете взять разрешительную рецензию если где-то внизу используете библиотеку лицензии поэтому вам нужно взять все зависимости посмотреть их все лицензии есть там какая-то кастомная лицензия вам надо почитать её и решить А что же с ней делать А может быть её надо выпилить а может быть надо кусочек кода переписать может быть надо даунгрейд нуться Пока лицензия была нормальная В общем тут нужно очень аккуратно подходить к выбору лицензии и вот смотреть вообще что что же делать проблема совместимости А да ещё один момент довольно важный заключается в том что вероятно вы какие-то решения могли где-то подсмотреть какие-то статьи читали может быть какой-то код копировали может быть ещё что-то делали обязательно проконсультируйтесь с юристами скажу я вам посмотрите что вы нигде не нарушаете патенты что вы Код Этот Не не своровали А написали самостоятельно что не нарушаете никакие патенты в России наверное это не так критично но если мы говорим про мир будет неприятно если вашу систему возьмут возьмёт какая-нибудь большая компания а дальше к ней прилетит Иск и вы как бы будете говорить Упс у нас отдельная была боль в состав нашего продукта входит хакнутые версии которые мы сами допили тем не менее Ремарк никто не отменял и нужно правильно обращаться с ними у нас внутри продукты назывались SP это некорректное название вы не можете так делать можно брать другие названия поэтому выхо переименованы в чить ИС Пыть И на самом деле на сайте Вы тоже пишите соответствующие три марки придумываете новые иконки смотрите внимательно что написано в реймар полиси этих продуктов если там с кликхаус Мы например допустим можем договориться да как бывшие коллеги то со спарм конечно же сложнее намного а есть такая штука которая называется экспортный контроль это государство проверяет что вы не выкладываете какую-то секретную и очень важную технологию Если вы сейчас захотите засор что-нибудь касательно Маши и искусственного интеллекта вероятно государству будут вопросы к вам благо мы к этому никакого отношения не имеем у нас система хранение Вот Но тем не менее экспортный контроль это такая юридическая штука которая занимает время и на это надо закладывать несколько месяцев И чем раньше вы это начнёте тем лучше она не очень сложная В смысле заполняете описание но тем не менее имейте в виду что вы как компания должны эти требования удовлетворять мо советовать Ну аккуратно проверяйте зависимости следите за торговыми марками и библиотеками покажите обязательно результаты юристам и сайт и код который Вы выкладываете лицензию которую вы выбрали Вот это всё и подумайте про экспортный контроль почитайте В общем заложите над это время следующий как бы крука - это веб интерфейс смотрите на самом деле не так много вариантов Вы можете либо выложить существующий UI либо сделать свой новый либо у вас вообще нет юя Ну тогда вам может быть даже повезло Мы очень не хотели делать новый минимальный вариант мы посмотрели Как коллеги пошли этим путём поняли что нам нравится наш UI Мы в нём привыкли жить работать администрировать систему и мы хотим чтобы люди пользовались им же но в юе очень много разной индексом пользователи карточки там на стаф есть разные ссылки на документацию есть Я не знаю у нас например есть корпоративный проприетарный шрифт который мы все любим Но выкладывать его нельзя а в общем очень-очень много всего в ЮА что заставляет вас э как бы запрещает вам его выложить Эс более того мы используем многие корпоративные библиотеки такие общие Например у нас общая навигация на весь Яндекс А ну и это тоже нельзя выложить Да надо либо выкладывать всю библиотеку либо надо что-то переделывать иметь два ЮА для одной системы Но это в общем тоже такой путь не очень удачный и мы понимаем что хорошо Это работать не будет Кроме того вам нужно добавить новые страницы аутентификация что-то сделать с мониторингом какие-то страницы может быть вскрыть а в итоге мы наверно на это потратили Ну тоже месяцев сем наверное больше полугода Мне кажется но не сильно порядка д библиотек мы выложили Open Source вот есть Gravity UI туда многие библиотеки которые мы используем мы их туда выкладывали просто для того чтобы наш UI тоже вытащить Атай шрифт мы до последнего пытались как это что-то с этим сделать боролись до последнего пытались думали может быть заменить его на какой-то опенсорс най Но люди внутри к нему уже привыкли они прямо нас готовы были на вилы поднять поэтому пришли к какому-то такому компромиссного решению нашли во-первых шрифт который максимально похож на то что внутри вы понимаете когда вы в ЮА пытаетесь поменять шрифт у вас всё едет вы даже не знаете где но оно везде едет и протестировать Это невозможно У вас разная толщина букв разная ширина где-то что-то заезжает диалог выглядит аляписто некрасиво И ужасно и сохранить исходный шрифт не можете потому что он как бы закрыт и его категорически запретили выкладывать а выбрать похожий довольно сложно потому что он там монаш должен на русском и на английском одинаково выглядеть правильное написание Буково и вот это всё а в итоге мы какое-то время сидели на новом осор сном шрифте коллеги наши из Яндекса плевали э Хотя это было лучшее что мы смогли подобрать и в итоге мы пришли к тому что команда разработки будет сидеть на опенсорс нам шрифте и тестировать продукт сами а для внутренних пользователей мы оставили значит старый проприетарный и это ужасно в каком-то виде да у вас получается Две версии ЮА но тем не менее Это лучшее что мы смогли сделать вот выложить не можем внутри сидеть люди отказываются на самом деле я их прекрасно понимаю потому что все UI в одном шрифте И когда ты приходишь в один другой и там какие-то другие закорючки Ну всё ломается тебе начинают вытекать глаза и конечно люди страдают Вот надо было ещё убрать разные внутренние части например мониторинг ссылки на документацию у нас были запрос ролей через нашу систему idm Недавно вышел Open Source у нас с ним была тесная интеграция и есть до сих пор прямо в U есть кнопка которая вас сразу переводит вы там можете строить графики конечно в орсе пока его не было мы это отпилили сейчас может быть даже вернём подумаем что с этим делать тут не будет никаких Советов на самом деле с каждый сам будет сталкиваться со своими проблемами поэтому я даже не знаю как это всё обобщить дальше вам нужно вс-таки почистить код Мы все знаем что когда вы код Пите внутри он одного качест Когда вы Пите код снаружи он чуть-чуть лучше поэтому Это отличный способ что-нибудь Фактори Да вот до чего у вас никогда руки не доходили Вы можете сейчас взять и сказать Так ну мы в общем пытаемся код показать людям нам за это стыдно давайте мы потратим время и почистим его из того что мы убирали это в общем какие-то старые токены номера тикетов которые внутри используются которые никому ничего не говорят странные комментарии которые типа пойдите к Тарасу и попросите у него комментарии по этому кусочку только он что-то про это знает ссылки на внутренние ресурсы их тоже довольно много мы какое-то долгое время внутри жили в гитхабе потом переехали в моно репозиторий и какое-то время у нас было Син между хабом внутренним и моно репозиторием и комит доезжая 13 лет очень много людей работало мы хотели отдать им должно и выложить на самом деле историю коммитов чтобы все люди которые когда-то работали над этой системой приносили хоть раз комит чтобы они почувствовали себя причастными и мы хотели сохранить историю и если в гитхабе выложить на UB историю вообще не проблема то когда у вас был Син с моно репозиторием у вас коты приезжают из ниоткуда у вас появляются зацикленность у вас появляются какие-то странные артефакты и более того поскольку Вы почистили уже код в истории всё это есть вам надо чистить историю какие-то куски кода приезжали из каких-то непонятных кусочков там такси что-то сделали а потом к нам отдали и у вас это приезжает икрах с в конце и заняла какое-то количество времени но тем не менее мы справились всё почистили историю большинстве своём сохранили исправили какие-то коллизии а разрывы починили Что ещё нужно сделать на самом деле вот шесть пунктов было и есть ещё последний в котором собраны не такие большие проблемы про которые надо подумать действительно большая часть Яндекса поэтому очевидно что когда вы такой крупный кусок вытаскивает служба информационной безопасности не может быть в восторге она будет недовольна поэтому предупредите их заранее у них Наверняка есть какие-то советы для вас и рекомендации они хотят что-то чтобы вы чтобы сделали перед тем как что-то выложить мы к ним пришли чуть ли не знаю там на второй день после того как мы решили это сделать поэтому коллеги нас поблагодарили и сказали Ну окей и выкатили список требований которые надо исправить пи Вы тоже к ним долж наверно Прити рассказать что ти смотрите мы выпускаем такой продукт Open Source А что здесь важно не в любую дату можно запускаться Ну например там 31 декабря очевидно всем пофигу на то что выкладывает Яндекс Open Source Да 8 марта тоже наверное не стоит поэтому выду придумываете заранее дату Поговорите с пиаром про позиционирование э мы живём в такое время когда Дат Когда лучше не запускаться становится всё больше вот поэтому с пиаром тоже лучше заранее согласовать и выбрать нужный вариант и тоже такой важный пункт который надо не забыть подумать про маркетинг Вот вы вышли на этом жизнь не заканчивается Да вы Я понимаю что проект для вас закончился Это был тяжёлый как бы год и всё такое Но на самом деле дальше снаружи Жизнь только начинается для людей вы только-только что-то выложили Поэтому заранее Подумайте про разные статьи Напишите статью на Хабр например Подумайте про конференции Привет Я тут не просто так и на самом деле Ведите разные вебинары Рассказывайте про вашу системы делайте Telegram чати стройте коммьюнити и дожа до какойто Да запустили выдыхать рано ваш путь только начинается и вы в орсе вам тепер нужно дальше продолжать работать ещё больше и что-то делать Большое спасибо на этом У меня всё Я с удовольствием отвечу на вопросы Отлично Отлично Слушай как это вот завершение твоей твоего выступления Вот первые 80% работы сделали и потом е 8 Давайте поднимем руки есть вопросы Давайте значит так первый вопрос вот здесь второй вопросик будет Вот там давайте пожалуйста поближе микрофончик Вставайте Говорите как вас зовут И ваш вопрос пожалуйста Добрый день Меня слышно Меня зовут Илья Я тогда сделаю хак и задам сразу два вопроса очередь занял первый вопрос Вы как-то не осветили зачем вы выходили в Open Source А мне кажется это важно то есть была идея что Это поможет улучшить код но в целом Что вы хотели от выхода Наверное это интересно И второй вопрос а что же у вас в результате Ну как выглядит ваш внутренний код с осом то есть кто является астрим теперь и как вообще что-то прилетает к вам назад поменяли ли вып ой deol на тот который вы сделали для Орса внутри и так далее вот всё спасибо спасибо болье знаешь вот на самом деле Вот ты только что сказал что мы блин Сиб пришли к Сиб Сиб нам выкатил кучу требований мы Там исправили ошибки мы тут поправили это а изменился ли кот стал ли он лучше Ну конечно кот стал лучше Давайте значит на первый вопрос зачем мы всё делали на самом деле мне кажется Яндекс на это довольно много и часто отвечает и с кликхаус и с idb и с дата ленз и вот с тезаурус если кратко на самом деле Первое - это инициатива команды когда была первая статья проти на хабре писал её Максим Бабенко там был комментарий они думаете ли вы выложить систему Open Source это было ещё до того как я вообще в Яндекс пришёл и конечно команда думала Да вы представляете вы делаете систему там не знаю десятки лет внутри в одной компании это и Job Security вы хотите поделиться этим с миром это ваша работа и на самом деле команда сама конечно же этого хотел это для неё некий следующий этап Вектор развития попытаться сделать что-то такое большое классное оставить свой след Ну вот кликхаус у них Получилось Да л миловидов Молодец командой тоже хочет что-то такое попытаться сделать для для компании на самом деле давайте так скажу Мне кажется это много разных бенефито начиная там с найма Да понятно что работать над Open sce проектом приятнее и интересней Вы показываете свой уровень Кода да вы показываете сразу людям и им понятней Куда Они вообще идут в какую команду могут какой-нибудь реквест сделать или что-то в этом духе очевидно что люди могут выбирать Да какой компании работать но при этом оставаться с одним и тем же продуктом да и делать его там есть и компания с этого что-то выигрывает и она получает пиары она получает известность Техно Пиа и так далее Ну и как бы люди внутри они на самом деле хотят что поделиться своей работой с миром это так очень упрощаем мо можем ещё про это подискутировать по поводу того астрим и кода у нас смотрите поскольку есть внутри моно репозиторий и на эту систему очень много чего завязано то источник Правды у нас остаётся внутри и он регулярно каждый комит выезжает наружу как только люди снаружи приносят на github request он прогоняет по всем тестам внутри и кто-то изнутри из разработчиков должен его влить он его вливает внутри и он обратно выезжает наружу в этом плане разработка конечно немножко поменялась снаружи появились тоже тесты мы смотрим на реквест мы смотрим на is мы синхронизирует на что люди спрашивают в коммьюнити и всё ещё какую-то часть мы делаем там исключительно для осор да то есть ну люди приходят и говорят вот у меня там не знаю интеграция С какой нужна А ну внутри у нас нет Кафки нам не нужна эта интеграция им снаружи нужна Ну мы идём и как-то пытаемся помогать что-то делаем Это же наш как бы интерес Нам нравится помогать людям и делать систему более популярной и известной по поводу э ээ использование внутри смотрите внутри огромный кластер вы уже там Практически Мало чего можете поменять но вы не будете его переде Лои переливать данные Ну нет но тем не менее вам конечно же нужно КФУ вам надо есть собственную собаку Простите поэтому у нас есть кластера которые вот на новой системе деплоя будут развёрнуты и будут тоже использоваться Но помимо этого конечно есть другие компании которые берут разворачивают приносят вам Баги и используют вот мы пытались конечно же минимизировать этот вот ну шизофрению Когда у вас да два разных решения для одного и того же но это не везде Возможно где мы могли мы старались оставлять всё как есть то есть код он один Да он ну просто синхронизируется но в целом Это единый источник кода система п к сожалению так не выходит вот с мы по максимуму постарались Это сохранить то есть у нас есть публичное ядро и э доны которые нужны внутри с документацией Тоже самое Я надеюсь я ответил если что ловите спасибо очень подробно Так значит молодой человек здесь и Давайте значит этот вопрос Вот здесь будет а я вижу Да привет Спасибо за доклад два вопроса тоже как у предыдущего коллеги Первый продолжая тему продолжая тему комьюнити какая была наверно самая полезная идея или фича которую принесли Извне и которой не было внутри и И второй вопрос учитывая весь опыт все костыли точнее все грабли которые стукнули полбу что сейчас сделали бы иначе Спасибо тяжёлый вопрос прямо вообще да пошли проф про фичу мне наверное так прям сходу сложно сказать потому что нам сильно не хватает обвязки Да мы то есть жили внутри и всё что сейчас люди приносят вот как сказал кавка коннектор он нужен снаружи людям и мы понимаем почему но внутри он к сожалению не очень нужен кубер оператор развивают и дописываются разные вещи поэтому прямо вот что-то такое что принесли снаружи и внутри оно тоже полезно используется мне наверное прямо сейчас коду сказать довольно сложно а скорее нужно пройти какой-то этап когда система станет снаружи популярно А по поводу ээ так Напомните мне вторую часть вопроса грабли что ты сделал по-другому ох Я бы ну давайте времени нужно конечно сильно больше это раз два ээ я бы с названием Ну прямо по-другому бы себя повёл то есть Надо было сразу брать копирайтера платить ему денег и выделять там несколько человек это прямо вот ну мы бы сэкономили не знаю несколько месяцев э так что ещё можно сделать было по-другому м Наверное мы бы документацию немножко по-другому начали делать Мы тоже решили объять необъятно и пока вы Когда вы только начинаете вам кажется что вся документация нужна вся важна И вообще вот всё сразу и тут надо сильно всё ограничить и взять только базовое ядро У нас например сейчас там админ гайд в очень-очень зачаточном состоянии вероятно вместо того чтобы прям переводить прямо всю пользовательскую документацию лучше было больше времени потратить на админ гайд какие-то такие вещи Вот это ну из таких сходу вещей которые мы сейчас огре давайте так скажем Мне кажется Спасибо за вопрос Так давайте значит вопрос здесь и потом А секунду и потом вот молодой человек вот здесь А привет У меня два вопроса Первый так так так давайте давайте перестанем читерить по два вопроса Это что Это что это такое Давайте один вопрос самый важный ладно А расскажите о том как вы взаимодействовать с авторами других Open Source продуктов а поддерживаете ли выкидывайте ли вы в рамках своего проекта какие-то доработки в другие проекты других людей Хороший вопрос Спасибо большое смотрите у нас есть в рамках нашего проекта две других системы это кха и Spark и пока itus был исключительно внутренней разработкой мы брались код форка его меняли немножко и он внутри лежал и мы его Там постоянно обновляли до стрима патчи и так далее сейчас у нас идея в том что поскольку мы стали опенсорс мы какие-то свои части можем принести в кликхаус какие-то части можно принести в Спарк И на самом деле хотим перейти на астрим нае версии Да и туда уже какие-то куски вынести чтобы это стало в общем легальной такой поддержкой нормальных нормальное решение Поэтому да мы с ними общаемся и какой-то план тут есть он ну быстро не сойдётся мы будем Потихоньку всё это разбирать в каких-то местах у нас очень тесная интеграция там например со спарко Мы транзакции в ядро протащили с кликхаус там свой Энн там чуть более аккуратная архитектура потому что мы там с Лёшей мило видовым общаемся и он нам Ну как бы советует где чего можно сделать и видел Код Да он ещё когда это всё начиналось он ещё работал в Яндексе поэтому где-то что-то получше сделано там где-то сделано похуже Но вообще глобально план поскольку у вас осор сный проект Вы можете себе не вендарин Source и под каким-то флагом там уже собирать нужную версию и это мы планируем делать то есть Возвращение в коммьюнити у тех частей которые были внутри залочен супер спасибо проект для этого должен стать на самом деле дава популярным и известным Да очевидно что не знаю там в спарке интеграция С какой уже есть да потому что понятно что это дефакто стандарт А что такое urus Ну в смысле какая-то пока не очень популярная известная штука с ходу пом есть например интеграция с ти заусовка делаем значит общаемся с людьми и советуем Но чем проект будет становиться популярнее тем больше будет аргументов для того чтобы это туда унести супер так давайте сейчас вопрос вот здесь Спасибо И потом вот вопросик сда интересуюсь проектом задам один вопрос ми из Одноклассников вы упомянули что текущая выложенная версия это mvp вот интересный был пример очень про quy trer Вот хотелось бы спросить какие ещё важные Системы ну в будущем стоит ожидать в орсе Как именно вы ограничили с чем будете расширять Окей смотри мы выложили всё ядро и на самом деле основная система она вот как что внутри что и снаружи есть разные микросервисы сбоку Ну например у нас есть микросервис который позволяет смотреть в интерфейсе ACC удобно когда ты хочешь посмотреть что за действия были сделаны там с папкой или с таблицей и так далее но он выглядит Как микросервис он завязан на поставку логов которые надо загружать опять в систему разбирать и вот строить тебе такую картинку как только мы мы до этого дойдём В смысле мы хотим глобально все все части выложить но просто какие-то части более важны сейчас какие-то менее глобальное ядро оно общее и Дин таблицы и там и Спарк и кха всё это есть Но какие-то небольшие плюшки которые добавляют вам удобство Они пока ещё не выложены мы у нас дойдут до этого руки без этого можно жить это не как это не критичные вещи Вот Но конечно будет Будут нные улучшения с кри трекером давайте так скажу Мы хотим конечно прийти к тому же опыту что и внутри Яндекса Да там появится и история нормальных запросов и Граф вычисления и можно будет нормально делиться запросом всё это будет удобней Там подсказка подсветка синтаксиса и так далее оно сейчас в каком-то зачаточном состоянии которое даёт какой-то действительно mvp ну mvp наверное очень так можно грубо как-то сказать Но этим можно пользоваться и люди пользуются понятно что э в наших же интересах чтобы снаружи и внутри код был максимально общий вот поэтому будем ещё доделывать супер спасибо большое Так сейчас вот молодой человек здесь а и Давайте вот последний вопрос будет Вот тут молодой человек а да спасибо большое за доклад было супер Интересно а я Андрей из фн банка А хотел спросить как вы общаетесь с пользователями Я видел несколько опенсорс продуктов делают организацию в слаг куда можно вступить задать вопрос кто-то только через UB ticket общается вот если я хочу оперативную помощь получить по вашему продукту типа у меня вот не запускается не знаю что-то а как это сделать смотри проведу примеры в idb у них есть публичный Telegram чат и и дата dat Lance тоже в телеграме смотри мы живём в телеграме и у нас есть два публичных чата один для англоязычной аудитории один для русскоязычной все они есть на сайте и мы там отвечаем там есть там большинство разработчиков приходи задавай вопрос мы на них с удовольствием ответим Если у тебя какие-то есть Прямо проблемы которые требуют логов разбирательства лучше завести ию на гитхабе стандартным путём У нас есть дежурный который тоже его будет просматривать И посмотрит ответит тебе если ты хочешь давай извини если ты хочешь я не знаю условно платную поддержку или просто с нами поговорить Приходи ко мне обсудим можем как не знаю какой-то Пилот сделать Мне кажется мы до райфайзена доходили и вы сказали что вам не очень интересно у вас сейчас немножко другие проблемы ребята из другой команды из соседней принимают это решение Мне просто было интересно ещё какая скорость ответа То есть если я в Telegram зайду задам вопрос то я получу ответ мне кажется дискуссионная э История это Best Эр Давай в смысле есть конечно платная поддержка которая там есть определённые с которые можно соблюдать и за это люди платят деньги а есть комьюнити чат пока мы конечно же заинтересованы в том чтобы технологию использовали она была популярна поэтому мы стараемся в этот же день тебе ответить если вопрос простой мы там в течение 5 минут тебе ответим но разработчики разные разработчики отвечают за разные части системы Да если у тебя там вопрос про I то это надо будет попросить одного человека ответить если вопрос про что-то другое попросим другого человека ответить поскольку это типа Никто за это ничего не платит это наш как-то Best effort то мы стараемся держать такой для себя внутренней с в день отвечать не всегда получается можно нас пропинговать и задать ещё раз но как это в любом опенсорс проекте всегда как-то есть энтузиазм есть люди из коммьюнити которые сами пользуются они могут прийти тебе что-то подсказать и такие уже существуют супер спасибо большое вот Приходи будем рады да э это просто больш большая тема в взаимодействии с коммьюнити мне кажется если кому-то интересно можно будет на стенде он сорса обсудить эту историю Да и Давайте последний вопрос вот здесь молодой человек Представьтесь пожалуйста откуда вы Да я Витя Я из гаража и у меня такой вопрос Вот мы поговорили про то как весь этот процесс начался как он стартанул Какие работы потребовалось делать А дальше как это в Дейли рутине дальше понеслось какие были проблемы стало ли больно разработчикам от то что у них два фронта и вот это всё всё в сердце прямо вот это мне кажется это тема для отдельного доклада как поменялась жизнь на самом деле я не просто так говорил мы пытаемся максимально сохранить единый код и там и тут и наверное в перспективе вообще захотели бы когда-то уехать прямо на UB и вот только там жить но это довольно сложно очевидно что разработчикам стало чуть сложнее Ну как минимум у тебя там два тестинг появилось теперь да один там орный второй такой но э из-за того что мы сохранили большую часть то в целом я бы сказал что это как бы приемлемый налог и мы не сильно там из-за этого страдаем процессы надо какие-то ещё выстроить Да там общение с комьюнити и вот какие-то такие вещи синхронизацию тикетов например да у тебя там есть появляются те ию есть внутренние тикеты тебе надо как-то между ними приоритизации выстраивать Да и думать что вообще ты делаешь А опять же какие-то документы не знаю дизайн документы делать желательно английском публичными предлагать этот пропол показывать его всем и обсуждать коммьюнити это какие-то вещи которые мы туда-то там потихоньку движемся не очень быстро честно сказать но надо же понимать что мы как это вот изначально У тебя есть 50 человек они делают систему на литу её строят и эксплуатируют и вот для всего Яндекса как бы показывают поддержку тут прилетела дополнительная нагрузка видео он сорса а очевидно что людей в моменте Больше не стало их надо учить нанимать и так далее э поэтому там стало чуть-чуть тяжелее да Но люди это делают им это интересно им нравится И поэтому это приносит им удовольствие Поэтому я думаю что да чуть больше работы но возможно она там наверное есть какая-то рутина но в целом Она довольно приятна и интересна слушай а Спасибо большое за вопрос и спасибо тебе большое за ответ Давайте поблагодарим докладчика Спасибо у нас есть приз и подарок за лучший вопрос какой-то вопрос вопросов тебе больше всего понравился приз и подарок за лучший вопрос я бы вам сзади коллеги отдал Ага мне кажется это был самый больной вопрос нам хорошо отлично Тогда у нас при студию и у меня специальный подарок для тебя Спасибо тебе большое Давайте ещё раз поблагодарим докладчика"
}