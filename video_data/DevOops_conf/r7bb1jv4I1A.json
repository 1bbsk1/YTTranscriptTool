{
  "video_id": "r7bb1jv4I1A",
  "channel": "DevOops_conf",
  "title": "Владимир Иванов — Мобильная разработка: DevOps или не DevOps",
  "views": 632,
  "duration": 3512,
  "published": "2020-02-07T07:52:10-08:00",
  "text": "у спасибо сергей так сегодня говорим про мобайл devops явине devops хочу начать с парой перефразирована их высказываний классиков так для этого надо включить kreker ok такие чудеса горации не снились нашим диап сам бороться до гурский примерно 2019 год другое высказывание это devops или не devops вот в чем вопрос достойны ли тепло из приложения в appstore не ведая контроля над девайсом бросить все и выучить проклятый кубер нить из такие поехали меня зовут владимир иванов и работа в компании epam systems сейчас занимаюсь совершено петь актер но мой основной бэкграунд это мобильные приложения и лет восемь писал под android чет писал подряд немцев вот и вообще занимаюсь около мобильным мы около мобильными историями давайте выясним кто мы такие да кто кто вы такие кто называет себя системным инженером окей как вы себя называете отлично выбран тендер есть ну ребят кто вы окей раша то есть я согласна с этим явлением санджи хорошо кто-нибудь мобильные приложения писал даже не диплому писал о достаточно много рук классно хорошо и тестировали еще отлично тоже хорошо вам тоже будет интересно ok давайте немножко пробежимся по тому что называется мобильный ландшафт даче у нас в 2019 году есть носит есть у нас следующей платформы то android ос windows phone и windows phone умер да ему и дорога поэтому на самом деле у нас только 2 мажорной платформы то android и ios когда вы слышите нативные приложения это означает что они созданы на языках программирования и тулов которые родные для платформы то есть для android это java котлин для ios это объектив или свифт вот беда в том что не каждая компания хочет выделять двойной бюджет чтобы написать одно и то же приложение под две операционные системы многие пытаются сэкономить поэтому практически самого начала существовали всякие фреймворке которые позволяют вам сделать одно приложение запускать его сразу на двух платформах пользуясь различными хитрее ухищрениями раньше это было выпью теперь это немножко более хитрые вещи вот сейчас это самый популярный это react немцев это заморин и флотар соответственно они используют там java script и ретард или сишарп для того чтобы разрабатывать мобильные приложения но вам нужно быть об этом в курсе потому что такие мобильные приложения есть ok давайте я у вас теперь спрошу вот мы на конференции deux да это про devops обще какие практики вот вы можете сказать как бы принадлежат этой философии что-нибудь фича флаги окей еще что-нибудь вся седеют continues in the creation continues deployment окей хорошо смотрите я попытался как будет взять пойти в интернет и спросите ребята скажите мне devops практике каждый сайт который встречал давал мне новый список значит то что я выделил для себя это нам continues in the creation continuous delivery мы вроде это сказали да это всякие секунд процессы в во время разработки diplo менты и так далее это частые релизы возможно taken релизы blue green deployment и все такое прочее автоматизированное тестирование мониторинг и автоматическое автоматический rollback ok давайте теперь представим что вот у вас в компании начинается мобильная разработка да и вы в этом специалисты в том как разворачивается губерний this как там с облаками общаться как решать там проблемы нагрузок и так далее ну вот к вам приходит проджект менеджер алена говорит теперь у нас есть мобильное приложение значит нам нужно ли разработчики там четно пуделя теперь мне бы его потестировать каста миру отдать что вы делаете да вот я хотел бы рассказать что вам нужно знать для того чтобы вот это и воображаемая линия нормально профессионально ответить и сказать скобы что вам нужно вообще поднять давайте просто пробежимся по тем devops практикам которые я перечислил вначале про continues in the крыши расскажу только одно слово в мобиле она есть потому что команда достаточно большие проблемы которые возникают при разработке точно такие же там всякие конфликты проблемы с тем что что-то вы починили что-то что-то отвалилось в общем к денису на крыше нас есть у нас есть точно такой же гид притчи мер джипу request и все такое прочее не буду на этом останавливаться пойдемте дальше дальше алена говорит вам вот вы знаете я хочу чтобы это приложение поставилась на мой телефон и на телефон наших тестировщиков и на телефон и наших костюмеров чем их будем делать вы говорите ну фига не он просто-напросто и как бы за тепло и ца но на самом деле нет к сожалению у вас есть некоторый диапазон инструментов некоторые сервисы которые позволяют на конечные устройства отдавать приложения значит первые два из них это test flight для ios приложений и google play сам по себе для android приложений также у вас есть всякие 30 сторонний сервис эти fab сервиса тест сфере и там еще какие-то пару неизвестных никогда последними не пользовался ok эти сервисы особенно test flight itunes и google play поддерживают значит следующие типы выкладок то есть вы можете использовать какой-то internal testing то есть просто выделить группу пользователей на которой рассказать приложение том месте альфа-бета канал и то же самое практически тоже самое есть на сайте тоже есть группы есть там публичное тестирование открытая и так далее то есть это хорошо плюс к этому публичные релизы поддерживают стырила у то есть вы можете сказать что вот это приложение пусть она будет рассказана только на 5 процентов продакшен пользователей дальше вы можете увеличивать этот процент привет но есть одна проблема кто-нибудь скажет какая окей-окей с точки зрения разработки достаточно для того что программиста написали код чтобы надевать установить про тестер собрать окей предположим что собрали подписать подписать правильно это то чем я хочу поговорить и тут проблема в том что вы это не самый простой процесс оказывается и еще этот процесс подпадает под секунд процесс до которую мы нашли в списке devops практик ok давайте разбираться по платформам значит что происходит на андроиде на андроиде раньше было очень просто у вас был у вас булки star по сути это хранилище ключей и если вы его потеряли то вы не можете обновлять свое приложение больше никогда и если вы полечиться за нас такой вверху есть много вопросов типа я прицел киста что мне делать плакать чувак плакать сейчас ситуация изменилась сейчас приложение подписывает сам google play у вас же есть только и платки за тот же самый ключ на у него немножко другое предназначение он нужен только для того чтобы засунуть его в google play если вы его потеряли ничего страшного говорится что этот уж больше не активен заводится новый вот схема выглядит следующим образом значит как я уже сказал что для того чтобы вам подписаться на предположении о нужен keys торг по сути это просто джо выйти star соответственно у вас есть пароль от этого keys тора у вас есть имя ключа есть пароль от ключа вот вам нужно вот эти четыре штуки где-то безопасно хранить потому что они типа важны ok если вам показалось это сложным то давайте посмотрим на ios значит там немножко посложнее все насчет во-первых у вас есть ресурс который называется developer apple.com там для того чтобы подписать приложение должно должен существовать в тиши найди некоторая запись о том что ваше приложение существует дальше вы должны у себя сгенерировать пару ключей публичной приватный публичное отдать вот этому удивил перепелкам там сгенерировать сертификат значит дальше вам девелопера полком отдаст провяжем profile его вы уже сможете там засунуть вы доели какую-нибудь консольную команду для того чтобы подписать приложение да я только после этого у вас будет подписанный binary который сможет восстановиться на девайс если вы бинарник не подписывайте то одевать просто говорит он не подписанный тем извини я его запускать буду или например если он подписан провяжем про файлом который экспорт да он тоже не поставится и это проблема это каждый день случается вот в общем-то выглядит легко примерно как кататься на велосипеде которого горят колеса руль и сиденье потому что все вокруг в огне и потому что выводу вот грустная история но это то с чем приходится сталкиваться ok смотрите мы быстренько пробежались оказывается значит mobile у нас есть следующие практике continue сентябре шин continues delivery тоже есть да мы разобрались инструментами секунд против тоже есть fliku entry лизис по сути тоже есть потому что мы можем ну как бы использовать эти инструменты делать это настолько часто насколько нам самим хочется и даже некоторые команды говорят что типа мы можем резиста хоть каждый день на наш маркетинг говорит что мы не успеваем проверять гипотеза давайте раз в неделю ok тут есть еще один нюанс который отсутствует в не мобильной разработки как вы думаете какой да правильно есть такой степ как review это означает что представитель компании куда вы теплицы то есть это либо apple или гугл смотрит на ваше приложение и принимать решение допускать его в общественное пространство или нет и раньше ситуация вставил следующим образом google play вообще ничего не делала то есть это занимало 4 часа и по сути это синхронизация просто-напросто между базами данных в appstore это занимало две недели и представьте себе боль да вы много месяцев работайте над релизом выкладываете его дальше две недели ждете дальше вам говорят у тебя тут что-то не так этой фиксаж ждешь еще две недели они говорят да но в общем процесс растягивается еще на несколько месяцев и в общем все естественно улучшается поэтому google play теперь занимает три-четыре дня на то чтобы выложить приложение потому что они наконец-то сделали какое-то review процессы на что-то теперь смотрит а apple сделали хорошую вещь потому что они с оптимизировали процесс теперь это занимает два дня и в общем теперь мы радуемся в общем так я не поменялись местами вот окей галочку на предмет африку на 3 лизис тоже поставили давайте поговорим про автоматизированное тестирование и не очень интересно разговаривать провели тесты очевидно что в мобиле они есть для android код на джаве поэтому g unit тесты пожалуйста во все поля для skoda есть их сэ тест это там целый тестовый фреймворк который он тоже позволяет юнит-тесты делать поэтому брать не будем разговаривать это не интересно интересно поговорить про intent с ты естественно да как вы думаете какая самая большая проблема с and red тестами окей да девайсы хорошо сейчас поговорим что-нибудь еще я считаю что проблема это время они чертову тучу времени занимают и затем надо делать до вторая проблема кроме времени это как вы уже правильно сказали это устройство с этим тоже нужно разбираться давайте выяснять как какие есть варианты как вы думаете вот вам нужно делать интерн тестирование мобильного приложения вашего что вы делаете эмуляторы хорошо еще варианты купить девайса правильно а тут сказали про фермы очень хорошо да действительно если кто то не знает то ферма девайсов выглядит примерно следующим образом то есть огромная куча куча телефонов которые подключены проводами какой-то железяки который вы имеете какой-то доступ значит есть скучает уже готовых решений вот разных вендоров в том числе от амазона от угла это firebase девайс фарм у ажура есть естественно свой одевает фарма есть разные другие сервисы я не видел в последнее время чтобы ими пользовались но возможно кто-то еще пользуется вот и естественно если вы не хотите пользоваться этими сервисами можете построить свою давайте немножко проект поболтать значит что вам понадобится на вам понадобится какой-то сервер да и на котором вы будете хотеть своего приложение потому что скорее всего есть у вас хотя бы два офиса то ходить другого офис что вы что-то потрястись будет не очень удобно поэтому вам нужен ремонт доступ 2 вам хочется иметь какое-то хранилище для того чтобы складывать туда логе потому что если что-то в тестах пойдет не так вы хотите узнать что именно пошло и третье это конечно же девайс плюс к этому вам нужно нужен будет какой-то механизм для того чтобы ваш веб-сервер до смог вашу команду на эти девайсы передавать давайте поболтаем проект значит естественно представители android и ios предлагают вам некоторые некоторые инструментарии да без которого на самом деле вообще разработку не очень легко вести и для android это утилита который называется т.п. android девайс bridge и через него может узнать например список подключенных девайсов их айдишники там попытаться заплатить файлы пытаться представить что-то и так далее для а его существует утилиты катиран и вот эта команда например выдает просто-напросто список вообще всего что подключено или запущена или может быть запущена на вашем компьютере вывод и и выглядит следующим образом вот увидите что там запущен какой-то симулятор да здесь вот ну и очень хорошо окей значит кроме того чтобы вам хочется видеть список там симуляторов запущенных или эмуляторов вы еще хотите устанавливает файлы или оплатить какие-то тестовые файлы этом чтобы какие-то тесты проводить и так далее это тоже на самом деле достаточно просто некоторые консольные команды например db push доведите что началу передать это файл потом файл на устройстве или на эмуляторе и вон туда просто apple удастся вторая строчка это пример инсталляции вашего приложения с флагом р-типа вырезу перезапишу если там уже есть такая версия вот ну и строчка для ios она чуть-чуть посложнее но делать в принципе тоже самое ok это была простая часть до сложная часть это в том что мы вообще говоря хотите видеть что происходит на вашем девайсе когда вы его тестируете и соответственно вам нужно стримить видео с вот этого девайса в этом опять же вам могут помочь встроенные средства то есть а д б умеет стримить видео и xero она умеет стримить видео но там есть некоторые проблемы воды б например с поддержкой котировок поэтому я очень рекомендую open source ный tool с серсеей он во-первых позволяет вам просто на локальной машине трогать устройства через клавиатуру и мышку а не руками что это более удобно во вторых так их an open source на у них там есть некоторые реализованные хаки по работе со стримингом если вы вдруг захотите построить свою ферму то пожалуйста используйте ее вот я даю ту ссылку на на статью соответственно если немножко самурай служит вы можете увидеть снова архитектуры просто-напросто вашего решения что у вас есть некоторый компьютер на нем запущен сервер там есть какая-то прослойка которая позволяет общаться с девайсами какие-то компоненты которые там выставляют и 5 для тестов выставляют какие-то компоненты для стриминга есть соответственно какой-то frontend который это все потребляет вот я могу сказать что в и вами у нас есть своя собственная ферма устройств она принадлежит организация внутри компании которая называется мо боялся сима балкам пытались центр я не состою ясно эту фирму не писал но иногда приходится пользоваться значит текущей модели использование что она бесплатна для наших проектов внутренних но у нас есть некоторые планы сделать ее коммерческим сервисом и предлагать например костюмером или кому то еще но это пока в планах только вот вы можете видеть как это выглядит то есть вон там есть подключенный ios девайс доведите web-интерфейс он там предлагает какие-то фотки по используют предлагает ему приложение заплатить и так далее очень удобно и очень спасает когда вам когда у вас есть баг на каком-то конкретном устройстве у вас нет этого устройства в проекте вам не просит бюджет на то чтобы его купить потому что бак немножко вот такой вот маленький и просто вы идете на девайс фарму воспроизводить его там фиксики проверяете что все в порядке руки с автоматическим тестированием вроде выяснили тоже да все в порядке ok давайте поговорим про мониторинг и когда мы говорим мониторинг мы наверное имеем в виду обзор mobility да то есть что это это по сути говоря ответ на некоторые такие вопросы как как вы можете понять что что-то с вашим приложением не так да как вы можете понять что пользователя какие-то проблемы с приложением как вы можете понять в чем именно вообще причина того что что-то идет не так давайте попробуем ответить на это на эти вопросы для мобильных приложений и здесь всплывают сразу некоторые проблемы значит во первых мобильное приложение запускается на январь ниц и который вы не контролируете и никогда не будете контролировать даже если у вас есть какой-то mdm ваш контроль только частичный соответственно какие-то ваши обычные подходы там не знаю за тепло из приложение в дтп и использовать драйвера но не работает до вам нужны какие-то другие подходы вот и эти подходы к счастью существуют потому что мобильной разработки вот вот такой вот под android с уже там десять с лишним лет естественно у нас есть какие-то решения значит у нас они так и называются то так reporting падение приложений и какая-то аналитика значит как всегда вы можете построить свой собственное решение есть некоторые open source плут для этого например акция окна для android есть можете посмотреть но в коммерческих проектах я уже не видел ее года наверно три обычно используют готовые решение потому что они бесплатны и они хорошо работают не хорошо интегрируется с другими сервисами и так далее это как обычно это firebase да это аналитика и краше porting от от центра это разные коммерческие тулы типа центре бак снега и так далее и кстати по моему все из них поддерживают кроссплатформенный тулы тоже по крайней мере react на эти ok давайте выясним чем мы можем собирать собирать можно очень много то есть практически каждую метрику которая вам было бы интересно вплоть до состояния батареи можно собрать там этот свободная память на устройстве свободная память вашего процесса который упал что это за устройство какая версия операционной системы на ней стоит какое количество активных юзеров пользуются вашим приложением там с сегментацией потом по рынку папа версий операционной системы и так далее там средний для на сессии если случается crash что вы можете видеть тратам вы можете видеть stack trace ну кругу для соответствующей ошибки и много всего прочего что вам бы захотелось бы мониторить и там принимать какие-то решения на основе вот этих вот данных поэтому с этим вроде как все хорошо выглядит это все следующим образом то есть здесь вы видите скриншот из крышки текке это сервис который был куплен углом интегрирован firebase то есть вы увидите там крыш free rate увидите конкретные ошибки до если зайти туда вы увидите stack trace конкретный вы увидите там тренд да сколько в какой день этих событий случается и так далее вот и тут к вам приходит мартин до мобильный разработчик и говорит слушай я вижу крышу но я ни черта не могу в них понять можешь мне помочь пожалуйста это что он видит это примерно следующее то есть но естественно код вашего приложения это нормальный там поршней мы там орг май company business logic там не знаю юзер контроллер но здесь вы видите что видите какую-то чушь видите что-то null pointer exception он случился где-то в арк а д л а у вас вообще то нет такого класса в коде и какой разумный программист будет называть пакеты д пакет л что это вообще такое и вы видите какие-то там системные вызовы которые принадлежат платформе и ответ на это почему так происходит это потому что во первых вы компилируете ваш код а дальше вы его опусти руки как вы думаете зачем устраивать код на мобильном устройстве размер это правда до 1 еще чтобы их не так хороший вариант мне нравятся чтобы не украли ну типа да обычно те средства которые используются в мобильной разработки они не очень защищают от того чтобы не украли потому что это все равно можно развивать да но скорее для оптимизации размера это правда потому что про guard например для android просто просто выкидывают все лишнее что вы не используете это на самом деле целая проблема потому что он не всегда правильно догадывается что вы не используете ему нужно руками говорите по эй не надо пожалуйста это выкидывать это мне нужно вот и как бы разработчики он при очень расстраиваются что вот у них нет доступа к стрессам поэтому на стороне operations до нужно иметь некоторую поддержку того чтобы как-то компенсировать их боль значит для ios в процессе разработки в процессе в процессе компиляции точнее кроме бинарник ада и соответственно там скомпилированных классов скомпилирована wakodo вы еще имеете вот d7 файл который говорит какие у вас есть там функции их коды и и mapping вообще говоря соответственно вам нужно не только иметь возможность выложить куда-то на диплом and service ваше приложение но и положить этот символ рядом с конкретной версии для того чтобы вы могли смочить stack trace версию и сим файл руки и из арци ваши естественно хорошо это было для ios для android немножко посложнее картинка значит смотрите у нас есть исходный код на джаве или накатани у нас есть некоторые файлы есть ресурсы для ресурсов у нас есть а спк gentoo и 5 вот он кроме того что он пакуют ресурсы он еще генерирует некоторое количество кода java соответственно java.com полер собирает класс файлы из класс файлами уже работает про guard и меняет им там по кришны и мы ней мы и так далее вот и потом измененные класс файлы попадают в dx.com полер и именно dexpot уже исполняется на надевать эти рожи поправь меня если где-то вру да там еще мульти dex есть да там там есть еще в оптимизации под сейчас это не про planter 8 там и так далее ну там куча нюансов главное чтобы вы поняли pipeline который происходит да и вы только после этого все вот это вместе склад складируется в один а пока файл который на самом деле просто подписанный zip ok соответственно где-то вот вот здесь вот по серединке до между класс файлами и индекс компаний аромат работал про guard положил mapping файл это просто текстовый файл который говорит что вот-вот короткое имя вот длинное имя и его тоже нужно шепитько кyда сим файл ok хорошая для вас новость в том что все вот эти сервисы например firebase аналитика или об центр аналитика они интегрированы соответствующими облачными решениями и когда вы firebase проект создаете вы автоматически создаете jessica проект тоже и у них есть связь соответственно вы можете настроить выгрузку крышей оттуда сюда а дальше использовать все ваши инструменты которые вам клауд solution предлагает там мониторинг и так далее от центра это тоже самое есть это мы делали даже руками на одном из проектов мы выгружали из об центр аналитикой и крыше паркинга выгружали данные вопреки шин insights и дальше опять же все инструменты платформы у вас есть вы умеете с этим работать наслаждайтесь окей класс с мониторами вроде разобрались тоже дают все хорошо давайте последнему к автоматическому рудику вообще в моем понимании автоматический rollback это про то что вы запускаете новую версию да вы видите что что-то идет не так там не знаю мы американцам шин вырос выше чем трешхолд или там крыши какие-то пошли и так далее и вы можете говорить и откатывает эту версию автоматически обратно никакого участия человека в этом процессе не нужно к сожалению мобильной разработки этого не происходят потому что как минимум appstore и google play не поддерживают такую модельку они говорят что если во что-то пошло не так пожалуйста собираете новую версию с вам нужно чтобы версия была поднята то есть было больше чем предыдущая залитая и только потом и и раскатаем сколько она там будет раскатываться никаких гарантий вот и эта головная боль с этим приходится как-то жить особенно там больших приложениях с большим количеством пользователей и разные компании делают по-разному я вот знаю например что авито по моему используют фичер флаги для этого то есть у вас просто напросто вы постоянно деплоить и новый код там выключены фичи значит дальше вы ее включаете смотрите что у вас все хорошо оставляете если нет выключаете смотрите что пошло не так и есть опять же сервисы которые позволяют вам это для мобильных приложений делать либо вы можете использовать реактив либо флотар либо другую технологию которая позволяет вам использовать с некоторую часть кода в виде с помощью интерпретируем ого языка на премьеру реактив есть java script бандоу и вы можете там с помощью код пуша или доморощенного решение просто напросто заливать новую версию код бангла без всяких кот без всяких review со стороны appstore и google play и в общем в одном из проектов мы тоже так делаем и тут получается что как бы автоматического трубе конец и поэтому мобильный devops в общем совсем полноценным де в общем называть нельзя но вот с этим допущением можно руки это первый вывод дача хотелось бы немножко рассказать про некоторые трудности с которыми мы сталкиваемся вот именно со стороны operations парк да с которых до который происходит в промышленной разработки значит первая проблема это ходовая очевидно что android вы можете собирать везде потому что android sdk и доступна для linux windows и mac os как бы пожалуйста разворачиваете где угодно но в принципе в более-менее везде одинаково работает но слс это большая проблема потому что все инструменты доступны только для мака для mac os а виртуализация здесь не помогает потому что по legal resins вы можете запускать виртуализированные виртуализированные макось только на mac os of scam железе поэтому извините покупайте mac mini и насколько я знаю ни один из больших клауд вендоров не предлагает вам маг машины поэтому your скулит одно из решений это либо использовать облака которые специализируются на маковских машинах такие сервисы есть либо использовать собственный пул машин и для одного из каспаров мы так и делаем то есть у него у них просто ажур subscription там есть как это называется кастомно группа машинок которая на самом деле у нас там в дата-центре хостится и подключена кожуру вы того ok следующая история это про то что чем больше ваше приложение тем дольше она будет собираться и это большая беда и огромное количество усилий тратится на то чтобы с этим что-то делать потому что чем дольше собирается ваше приложение тем больше времени разработчика уходит впустую как известно это время дорогое как бороться с этим но есть много разных техник вы можете значит смотреть что у вас происходит с кодом какая часть собирается дольше всего можете кэшировать зависимости потому что они есть почти в каждом приложении кроме телеграма вы можете использовать moodle реализацию что помогает точно спрайт расскажу и можете там смотреть какие-то хаки build system чтобы выжить там последние капли и на самом деле много всего другого разного для и вас например есть очень неплохой очень неплохая статья про это для android для gradle а на предыдущем о люси была очень хорошее выступление степана гончарова и сгреб про то как именно вот использовать хаки гордо ok давайте поговорим про про каширование для того чтобы говорить про каширование нужно понимать о чем вообще происходит какие там от системы прокачки менеджеры для ios есть особо выбора у вас нет потому что использует скотт build ну то есть вы можете наворачивать что-то поверх этого но xcode билд в конце и в качестве пакетных менеджеров у вас есть следующий вещь у вас есть какого под есть картаж и есть свифт им пару слов буквально про них значит во первых какого под эта история про то что вы просто напросто выкачиваете сердце библиотеки и builders ее заново изучил как не очень и действительно не очень к тому же какого под использует собственное описание процедуры которая там в потеках соответственно у вас два источника правды вас есть xcode бьет есть подсветка в общем такое себя несколько лет назад появилась поддержка динамических фреймворков и фреймворк это типа там готовый jar нику словно для ios и картаж это дело поддерживает и умеет там типа билде зависимости умеет в проекте использовать уже собранные зависимости в общем это очень хорошо еще есть свифт прям это свифт т.к. джер это инструмент от эппла и вы могли бы думать что ну раз от apple а значит официальная поддержка значит все там было хорошо но надо сделать поправку на то что apple очень любит своих пользуется и ненавидит девелоперов как вы уже поняли по слайду с механизмом подписи типа ребята проблема с свист пракаш менеджеры в том что там нет поддержки ресурсов то есть если у вас есть что-то кроме кода у вас беда вы можете использовать только один язык в пакете то есть вы не можете делать микс между объекте все и свист кодом за та же проблема и там есть ещё какие-то трудности с с использованием чисто бинарных зависимости то есть если у вас 30 сторонняя либо вас проблемы это грусть помнится замечание про отыграюсь разработку поэтому если следующий раз вы увидите с мобильного девелоперы похлопать его по плечу и скажи сочувствуем окей что с андроидом значат для android рекомендован инструмент это griddle и это уже большой прогресс потому что 10 лет назад мы все собирали android приложения с помощью on the такое но и сейчас некоторые компании используют инструменты нового поколения например это бэйзел или бак вызвал это build систему от гугла и лифт например в затащила уже и из себя на самом деле затащили бак тоже у них там три build system я знаю что бак используется активно в убере для сборки приложений в общем как бы компании идут дальше ok и хорошая новость о том что то что всякие 30 сторонние сервисы про которой речь пойдет дальше они уже поддерживают кэширование зависимости от этих dude систем в общем это очень хорошо то есть например убит raisa есть поддержка для картаже есть поддержка для град lauf классно проблемы начинаются тогда когда у вас есть кроссплатформенное приложение потому что с ним все немножко сложнее например для react найти в этом все зависимости идут либо через какого под с либо там просто с артами и там статической линковки поэтому вы не можете полноценно кэшировать зависимости вам приходится rebuild лица ios приложения и это грустно но есть одна оптимизация которую можно делать мы например делал для нескольких проектов наряд на этих вы можете одним одним билде финише нам собирать сразу приложение под android и и подавилась почему потому что выразить это следующим образом то есть у вас есть вот react немцев приложение под android и реак найти в приложении подаешь они устроены примерно одинаково у вас есть некоторые нативной части библиотеки да есть нативный bridge который платформа специфичный а вот java script кот у них одинаковый и большинство сурс кода который вашем репозитории есть это именно вот этот вот java script код соответственно репозитории у вас вообще говоря общей для обоих приложений и в общем-то это это одна из целей использования cross-platform фреймворка поэтому билл степы обычно для мобильного приложения на днях на эти выглядит следующим образом то есть у вас есть степ для того чтобы получить сурт кот дальше вы делаете там йордан стал npm install для того чтобы все зависимости подставить дальше вы собираете android часть собирается ios часть и подписывайте оба и история ну и деплоить и его естесно история про то что часть шагов она специфично для каждой платформы ну вот эти первые два шага они одинаковы и соответственно вы можете сэкономить на том чтобы для 2 приложения не делать первые два шага они могут занимать много времени там 10 минут легко вот поэтому у нас например на все реактив приложения у нас один билде финишем да я дальше просто напросто есть часть которая для android час для ios а дальше мы делим обе части пример из реальной практики каждый из приложения собиралось по полчаса когда мы их объединили у нас стало сборка обоев приложений 40 минут выигрыш 20 минут очевиден на кой поехали дальше обратно к нативным приложением модулю ре зация android приложение сейчас достаточно большие вот это может быть 100 моделей 500 модулей тысячи модулей 1300 модулей в особо запущенных случаях соответственно чем больше модули этим тем дольше длится ваша сборка здесь я сошлюсь на доклад дениса нехлюдова он щас работает лифт про то как они использовали муда реализацию для снижения клин бил times и вы можете видеть что билл time после того как они разбили все приложение на модуле упала с 8 минут до полутора в общем это очень круто представьте сколько времени сэкономлено просто на том что каждый день люди там что-то перри собирают для того чтобы начать это делать как бы вы можете начать с простых шагов взглядом из коробки предоставляет вам возможность посмотреть на статистику того какие стопы у вас отнимают больше всего времени поэтому начинайте с этого если вам нужно ok почему и почему важен еще переход с gradle она другие системы это потому что у гугла есть некоторые фундаментальные проблемы которые выливаются в то что если вас действительно большое приложение как у лифта например да или там как у гриба стоит 1300 модулей то у вас будет одна минута каждый раз уходить только на то чтобы выполнить стадию конфигу коли знаешь такой конфигурации для ok для остальных поясню что это значит что griddle просто-напросто читает bells скрипты и смотрят что там у них происходит и там составляет определенную структуру данных у себя внутри в памяти и так как скрипт и грызла допускают а.ю. да на кой на фазе конфигурации то есть тупо чтения файлов и вообще допускают любую ему тоби лица то есть вы можете поменять там в любом build скрипте любой любой параметр это означает что вот этот конфигураций она не может быть за кашированная вам приходится делать ее заново каждый раз и поэтому одна минута тут вообще не удивительно значит что делают люди люди переходят на был в котором часть этих проблем решена здесь я опять же сошлись на доклад артема зиннатуллина вот там вот ссылка на тройку он пожалуйста посмотрите его я не очень хочу сейчас пересказывать вот вывод номер два это тот pipeline который вы построиться для своего мобильного отдела он должен все это учитывать должен про все это знать как этого достичь вообще говоря когда вы строите мобильные там соседи pipeline то у вас есть несколько подходов и моем понимании эти подходы следующие значит первое это вы все делаете руками до ставится там какой-нибудь build 1 дженкинс simcity что-нибудь еще локально используйте его второй вариант это у вас там есть какие-то например докер контейнеры с тем же дженкинсом вы там где то запускается в клаудии ли там вон примеси на там open шифти январь месяц будет с ю ешь и третье это вы используете готовые сервисы которые много всего делают за вас и вам остаются только условно build скрип написать правильный ok давайте немножко по сравниваем значит если вы захотите покидать меня помидорами пожалуйста как бы все выводы которые я здесь делаю они форма мобайл перспектив поэтому значит что для нас дженкинс для нас как бы ну это бесплатный инструмент да он очень flexball легко настраиваться есть поддержка агентов поэтому можете build a ген на mac mini поставить а сам дженкинс иметь где угодно еще есть разные проект плагины которые вам позволят реализовывают с определенные части вашего pipeline а и да право его я уже сказал но никакой поддержки контейнеризации соответственно у вас нет чистых билдов и это вопрос к воспроизводимости ваших дубов это может быть большой проблемой еще проблема в том что весь support на ваших плечах никто он не помогает вы сами по себе ok единственное что могу здесь сказать это то что всякое ну помните я рассказывал про подпись про тепло и так далее тут вам на помощь могут прийти некоторые решения вот комьюнити одно из них это fast lane по сути говоря это набор скриптов которые обеспечивают автоматизирует часть процесса сборки то есть там не знаю подпись снятие скриншотов ну может там предоставлять пройдет скрипт сам по себе может может что-то с конфигурацией делать в общем большая большая поддержка автор эти библиотеки феликс краузе он работал гугле какое-то время вся эта тузова кондорсе работает примерно так например вам нужно на машинке подписывается а его есть приложение для этого как я уже сказал вам нужен провяжем profile если у вас его нет fast lane например может в одну команду устанавливать его вам ну машинку вот увидите что запускается sein дальше the fast lane просто логинится в девелопера полком получают пролежней profile и кладет его вам в систему это очень хорошо так же там более 400 плагинов к к этому инструменту полностью open source на я не зависит ни на какие-то сторонние сервера и сервисы поддерживает и ос android приложение даже маг приложения и в общем если чет не хватает вы можете всегда то писать свою поддержку бы это инструмент который мы могли бы захотеть пользоваться если у вас был около дженкинс значит когда мы рекомендуем использовать lapel дженкинс точно когда вы обучаете студентов то есть для системных инженеров которые приходят нам было бы учатся первое что они делают это осваивают бы дженкинс потому что он ближе всего к бирме если у вас уже используется genking для сборки чего-то то может не имеет смысла заводить 2 тула сделать все в одном для некоторых компаний это актуально либо если у вас очень большой security концерну но это вообще говоря тема для отдельной бесед дальше вы можете использовать дженкинс в облаке в принципе я думаю что все понимают как бы бенефиты и down side и этого дела например вы можете иметь чистый бьют каждый раз меньше тратить собственного времени на там поддержку разрешение каких-то технических трудностей но не очень понятно что делать с с проблемой железо с маком вот окей ну и давайте к самому интересному до трети сторонние сервисы которые которые могли бы нам помочь значит есть несколько разных сервисов там где туапсе 47 в качестве первых есть сервис такое как never код есть абсента есть beatrice давайте коротенько пробежимся первая битва вся circles вообще говоря это general корпус сайту и мобильной специфики там очень мало то есть там подключены маг машинки там стоит xcode там предустановлен griddle хорошую интеграция spare and play очевидно иначе зачем и в общем все что у вас есть этот редактор я мало для того чтобы затем работать в общем практически никакой мобильной специфики решает очень маленькое количество задач но может быть полезна если вы например делается библиотеку для мобильных приложений например для android мы мы используем гид lapsi для этого ok поехали дальше от центр а центр вообще говоря это просто дистрибьюшен инструмент но он является частью другого феринга ажур devops а и я думаю что вы знаете все что это такое да это кстати бывший tfs он там поддерживается дистрибьюшен в во все во все средства распространения приложений в самого себя в том числе естественно может работать с разными хостингами гита но только типа с со второй за сервис потому что если у вас есть там свой git репозиторий он его не поддерживает это может быть большое ограничение поддерживать конфигурация за код поддерживает мобильные приложения как главный таргет для себя да там поддерживают и рацию с облаком ну и вообще основан на облаке и позволяет им легко решить проблему с с маками потому что допускается эти вот машин пулу который вы можете подключить самостоятельно ну и там поддерживает естественную реакцию на пол request и комменты и так далее как я уже сказал проблема здесь в том что если у вас есть в вашем периметре поставленный гид server to 2 вам с ним низ интегрироваться и нет support а для различных палец отлов например сон архив который мы используем и еще вы не можете делать локальную отладку билда которая там происходит это может быть важно потому что у вас локально сборка мобильного приложения может проходить на seo и не проходить и как бы вам узнать что происходит вообще . когда мы рекомендуем использовать об центр точно когда у вас есть уже подписка на и же devops да если вы хотите там в пакете гитхабе кит лови где-нибудь еще либо может быть вам просто нужен дистрибьюшен tool для ваших мобильных приложений отличный выбор он бесплатный в этой конфигурации мы им так и пользуемся на самом деле ok следующий пример это номер код never код это тоже сервис связь идей для мобильных приложений он умеет деплоить практически во все сервисы тоже поддерживает интеграцию только с облачными хранилищами кода работает на облаке мобильно ориентирован на держит поддерживает реакцию на комменты пары квесты и так далее проблемы в том что там даже нет конфигурация закона то есть там даже ямал редактора нет он достаточно дорогой но плюс в том что он очень ориентирован на флаттер приложение поэтому если у вас компании выбран флотар в качестве технологии разработки возможно это неплохой выбор еще у них смешные программистские шутки на сайте ok и последнее beatrice это сервис для соседи для мобильных приложений умеет тепло из куда угодно куда вы захотите если этого нет вы можете написать плагин туда поддерживает играться с облачными сервисами и с кастом gibt es geht серверами это очень хорошо большое преимущество поддерживает конфигурацию за кот смотрит на мобильные приложения как на на главный таргет запускается в облаках поддерживать в руки в общем все хорошо дать преимущество это то что я сказал про кастомные гид сервер и поддерживает всякие всякие события на пушку любой брешь в тоже очень хорошо и полезно поддерживает интеграцию с удар клювом и более того имеет некоторые инструментарий для того чтобы отладить вашу сборку локально то есть там запускаете петра силой смотрите что происходит на самом деле и очень много open source иных компонентов для него вы можете убедиться в этом если сходите на их гид хоп посмотрите что там очень много всего в открытом доступе вот это очень хорошо значит есть некоторые естественно минусы он относительно медленный то есть за базовую цену вы получаете очень медленной машине не было support а не было поддержки флаттера некоторое время назад сейчас появилось очень хорошо я сделал некоторую сравнительную табличку если вы поднимаете значит мобильную разработку вам нужен соседи сервис пожалуйста ориентируйтесь на таблицу для того чтобы принять решение то что я хочу вам сказать это удачи если вы поднимаете мобильную разработку то удачи вам понадобится но это небезуспешно занятие давайте немножко сделаем самаре как я уже говорил что мобильном devops и практически все практики важные как мне показалось присутствует кроме автоматического робота это такой единственный но большой достаточно минус и мобильная заводка сейчас это большая серьезная история многомиллиардный бизнес соответственно это много всякого труда который требует автоматизация и если вы как-то этого касаетесь вы должны представлять в чем имеете дело я надеюсь что мой доклад ответил на большую часть вопросов естественно есть какие то проблемы их можно решать все в порядке кроме ролл беков с ними проблем хочу сказать что у нас во первых растет мобильная практике у нас растет практика систем инжиниринг мы очень любим философию devops поэтому если вы ищете никс челендж мы будем рады побеседовать пару слов обо мне значит если вы хотите продолжить беседу ли у вас есть в какой-то вопрос по оба удивился он совершил архитектор еще что-нибудь питер telegram тут все толки есть на моем спикер деки этот в том числе если у вас есть какой-то вопрос пишите на почту если вас заинтересовало мобильная тема приходите на конференцию mobius комп которая состоится 7 8 декабря в москве у меня все большое спасибо вопросы стулья аки вечером стулья утром вопрос решен стулья утра буквально разработка спикер на право так есть два стула ни одного стола в общем я так как я мобильно разработчик я записал очень много вопросы лично вот от гостей есть такой вопрос гостей слушатели банили в гугле или в appstore по причине криворуких review какие-то приложения видимо или эвристики если да как решалась вот окей да случается очень много всего что apple или google банят вас банят отдельное приложение банят апдейт в баню весь гугл аккаунт причем точных причин никто не знает есть некоторые предположения почему это происходит для некоторых людей это происходит потому что там у них совпадает ай пи эс ай пи человека который что-то делал плохо и поэтому и в банят в общем такое что то что то серьезное лично я с этим не сталкивался но я могу сказать что нам о люси будет доклад от марины прыжков из mail.ru и они пахали боли этого очень много и у них есть некоторые подходы что делать я могу сказать что там из подходов это знаете кто google relation менеджер вашей стране поддерживать с ним контакт вы можете там задать вопрос или сказать х и у нас тут проблема можешь нам помочь пожалуйста это во первых во вторых пишите support я знаю что говорят что прогулки по этот может быть бесполезно но пишите все равно есть некоторые лайфхаки это типа если у вас просто rejection на review выпал всегда отвечаете почему именно у вас сделано так или иначе потому что переписка сохраняется и следующий велюр будет смотреть в эту переписку или удалите казино и своего приложения хороший вариант в общем ты говорил про автоматизированный deploy сервисы и у меня возник вопрос что делать если вот у тебя свой дженкинс и там нет ним и поддержки это может есть какой-то плагины или надо как-то что-то написать чтобы за деплоить например из своего дженкинса ну это вопрос куда вы хотите деплоить потому что построен например предоставляет вам интеграцию в google play и в test flight если вы хотите сзади плодится в центр то это тоже несложно то что вы можете просто напросто сделать там npm install об центр силой и у них очень удобный как раз силой для того чтобы это делать поэтому это вопрос куда тепло это да ты поставил интересную зеленую галочку напротив автоматического тестирования вы поставил коричневую галочку вот вопрос такой вот у нас допустим есть ферма но либо какие-то девайсы и там эмуляторы и это все уже мы пострадали и посидели а потом мы запускаем допустим тесты на паре квесте и они идут лаки ну да или идут очень долго вот вопрос про твой опыт может есть какие-то практики либо какие-то штуки чтобы ну как бы успеть смерть по request или собрать за час если на нем гоняются твой тесты или как-то по-другому это делает чтобы но не страдала разработка от этого потому что реально проблема ok но если честно то прямо на своих проектах я с этим сильно не сталкивался я знаю что ну коллеги во первых пытаются проанализировать эти тесты разбивать их на группы это раз во вторых они пытаются делать какие-то обертки над существующими решениями и например ну флаке тест это вообще это известная история например опиум который используется для этого он может просто на экране не видеть элемент с определенным айтишником последующий момент и увидеть нотой мало тоже прошел вы получили флэки тест поэтому там делается следующим образом там собирается статистика по по тестам если тест прошел хотя бы раз это означает что все нормально и вот эти проблемы связанные с тестовым фреймворком вот есть некоторые решения уже которые позволяет решить именно конкретно эту проблему на примере естественно фреймворк марафон он со всеми на это и делает есть обертка над с пресса который называется к стресса от ребят из лаборатории касперского то есть но есть некоторые промышленные решения которые обходят эту проблему вторая проблема которая меня лично интересует это вот мы посмотрели что ты собираешь кита крыши еще что то вот те есть какие-то собиратели крышей вот их очень много и в какой-то момент ты хочешь автоматически это триггер и настраивать что-то еще делать до что в реагировать реактивно а не глазами заходить смотреть люди даже борды вот что ты можешь посоветовать для такого мобильной разработки окей ну во первых вот эти краж reporting service и они позволяют вам выставить три школы определенные которые позволяют ну например писать mail то есть естественно если вас user bass большой то определенные типы крышей будут происходить и вам важно знать что это не не превосходит некоторых дошел до можно эти сервисы настроить чтобы сказать эй типа приходит больше крыши чего мы ожидали наверное что то у нас словно давайте мы это будем чинить это первое второе как я уже сказал эти крыше можно выгружать в тишину в open site или там куда-нибудь в биг вере и так далее настраивать мониторинг уже там и там уже делаю все что ты хочешь зависимости да сколько денег я думаю по нашему таймингу крайне вопрос и то есть еще один подход который мне кажется можно обсудить в рамках рбк который невозможен но может быть ты ним говорила не услышал это типа практике бэккантри when you а я просто думает о такая специфично для мобилок тем а вот и вопрос наверное такой по как бы kevin drew вам ей может помочь в этих ромбиков вообще что это я долго руки давайте вкратце смотрите обычно мобильная разработка выглядит следующим образом у вас есть там какая-то фича есть команду программистов которые делает все делает you войны mobile пишет бизнес-логику потом все компилируется выкладывается в стар и естественно когда бизнес говорит слушай мы не очень уверенно что здесь должно быть дайте нам инструмент который позволяет очень быстро но бросать экран из каких-то готовых элементов поэтому вы делаете некоторые фреймворк до котором говорится что ok пусть там серверов приходит джейсон со структурой у а я который говорит что ну вот здесь типа лист здесь там кнопка здесь поле ввода такое здесь поле ввода второе и еще одна кнопка которая делает вот это действие и дальше мобила это все воспринимает и как бы использует этот конструктор для того чтобы построить white довольно очевидно что этот подход позволяет вам очень быстро менять функциональность приложения и вы видите что-то не так идет даже не крошится а конверсия упал и вы таки они работают типа выключили этот экран или переделали его и это очень хороший подход большие компании это делают опять же на но весь у нас будут доклады прав бэкон driving дивой приходите я думаю наше время закончилось на слоте есть еще дискуссионная зона номер 3 ok если у вас остались какие то вопросы по здесь она ну я не умею смотреть через стены на накрутке вот здесь окей хорошо вот так что подходите к владимиру задавайте вопросы и всем спасибо давайте похлопаем шарла спасибо"
}