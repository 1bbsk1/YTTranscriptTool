{
  "video_id": "CmXy8pUNjgU",
  "channel": "DevOops_conf",
  "title": "Алексей Гайбура — Повышаем SRE-навыки продуктовых разработчиков",
  "views": 382,
  "duration": 3150,
  "published": "2022-11-02T15:02:15-07:00",
  "text": "коллеги всем привет Всех Рад приветствовать на докладе Алексея гайборы собственно Меня зовут Павел Селиванов Сегодня я буду выступать в роли эксперта Я помогу Лёше Я помогу отмоделировать чатик Я помогу Ну собственно нам всем хорошо и комфортно и полезно провести дискуссию после этого доклада Ну и собственно со мной Мой коллега Алексей гобура руководитель группы эксплуатации Яндекс практикума собственно Леш поздоровайся Всем привет Что у тебя звук Работает отлично скажи пожалуйста вот у тебя доклад будет про сре Меня интересует всегда один вопрос который у нас в России Мне кажется очень много споров вызывает сырья все-таки ходят и программист ли он о отличный вопрос я как раз сейчас занимаюсь таким вот процессом найма и для себя выработал такую схему что среде вот если мы смотрим по ветке если сеньорные средешник то он прям отличный админ там хорошо кубер знает и тем не менее как бы Главная задача сырья это отвечать за сервисы уметь его поддерживать и поэтому выглядит так что он может и должен брать к себе сервисы на поддержку а для того чтобы взять какой-нибудь интересной поддержки ему нужно быть хорошим разработчиком Итак у нас отстает Вот это греет разработчика на -1 если он семьей решник сеньора админ то Полагает что он не был разработчик отлично а коллеги перед тем как я передам слово Алексею Позвольте Вам напомнить несколько организационных моментов во-первых в чате можно задавать вопросы во время доклада доклад у нас будет достаточно продолжительной по времени поэтому наверное все ответы на вопросы перенесем Ну возможно на что-то мы сможем обсудить прям в чате вместе с вами и я думаю что большую часть вопроса мы все-таки перенесем на после доклада второй момент Это после доклада Алексея Вы сможете оценить его доклад прям здесь в плеере в котором вы сможете этот доклад и третий момент Напоминаю Вам что после доклада у нас будет дискуссия То есть вы можете перейти в комнату с дискуссии собственно где мы продолжим общение ограничение там по времени у нас нет поэтому вы там сможете мы обсудим все вопросы из чата которые не успеем обсудить в эфире можете задавать там свои вопросы Ну и вообще в принципе можем просто пообщаться с вами про Сергея эксплуатации все что с заказано Вот Ну а сейчас я собственно лишь передаю тебе слово Удачного доклада Да спасибо большое Всем привет еще раз Меня зовут Лёша гейбура я занимаюсь эксплуатацией в Яндекс практике Сегодня я расскажу про тематику вот называется связано с сырье и называется повышаем сырья навыки потовых разработчиков позже об этом расскажу сначала представлюсь кто я Почему в общем я рассказываю доклад и почему доклад может быть полезен для вас последние три года я работаю в Яндексе за это время достаточно продолжительное для меня я успел много чего повидать и сделать занимался как начали потом переходил в пас вот платформа за сервис и после этого перешел в среди за это время мне удалось переключить 3000 FPS такой волнующий момент когда у тебя есть два графика вот на одном графике ты и в этом менты переключаешь DNS вот на одном графике у тебя планомерно уменьшается количество фпс на другом планомерно увеличивается Вот и при этом ты видишь один пустой график это пятисотки то что все хорошо происходит И никаких проблем не замечается вот как примерно такая вот задача у меня стояла в течение года тут Отлично как бы справился с ней перевел несколько сервисов Яндекса Яндекс учебник Яндекс лицей и также помогал в Яндекс практиками перевозить в Новую структуру После этого я занимался пасом вроде бы новый инфраструктура создал дальше нужно было делать тестовые среды это среды на печи ветку то что делаешь отдельный стоишь на фичу чтобы тестирование могло тестировать то что поедет вот и что сервис разрастались расстались и в итоге получилось что там 150 3G 30 баз данных то что под Инста баз данных это когда есть приложение backenda и важно проверить миграции на них что все проходит успешно то что нет диалогов перформанс проверить и то что вход у нас не уедет что-то что может нам зафиксить юзеров вот занимался тестом и средами дальше пошел такой базовый начал ускорять релизы сборки на ветку вот достаточно такая тяжелая ситуация была в Яндекс учебнике там сборки достигали двух часов и в итоге вместо того чтобы печаль уехал на провод за там два часа как бы фича уезжала там днями для того чтобы доехать до вот позанимался сборками занимался После этого у меня такая позвали в практикам больше сфокусироваться на стабильности на надежности сервисов вот об этом Краски Мой доклад как удалось увеличить стабильность с 96 до 99 7 и при этом если базовый среде подход он предполагает что у нас есть Сергей команда которая занимается стабильностью сервиса забирает все сервисы себе на поддержку то я скорее расскажу как мне удалось Как нам в практикам удалось масштабировать дежурство дежурство продуктовых разработчиков в компании и как бы сделать среа не столько роли сколько навыкам которые прокачивается в продуктовых разработчиков Вот примерно рассказал про себя так о чем я буду рассказывать во-первых я расскажу про то как какие мы с каким проблемам Мы сталкивались в организации дежурства и как вообще удалось увеличить количество дежурных с пяти разработчиков до 100 дальше поговорю как при этом не потеряли в качестве продуктовые разработки как процессы внедрялись Потом расскажу как вообще начинал как выстраивали метрики экшна этому и также завершу наверное доклад тем как же удалось прокачать навыки и как вообще все это случилось Окей вроде Поговорил О чем рассказал о себе Поговорил О цели доклада давайте к сути проблемы с какими проблемами столкнулся практикум во-первых у нас за последние полгода год увеличилось количество студента в 4 раза Вот с увеличением Коли студентов сервисы начали чаще падать потому что сервисы не были готовы к такой нагрузке вместе с этим вроде бы количество студентов увеличилось в четыре раза бизнес вырос тоже можно сказать что в четыре раза и поняли что разработку Нам тоже было масштабировать от текущих цифр 25 до 100 сотрудников но при этом как бы столкнулись проблемой что сервисы как бы на сервис пришли больше нагрузка сервис начали больше падать у нас только семь опытных разработчиков дежурят и при этом они тоже некоторые уходят ранее вот и это количество разработчиков оно уменьшается вот поэтому здесь где-то к Марту к апрелю он поняли что вообще такая ситуация крайне недопустима для нас то что частое простое из-за того что пришло больше студентов и мы начали формулировать А где вообще бы хотелось нам быть лучше в организации стабильности Вот и начали смотреть в общем что что идет не так нашли вот достаточно много проблем которые в итоге выходили просто приводили простое во-первых у нас вообще полностью не было понимание что инцидент было много каналов откуда могли приходить проблемы в дежурного такая базовая с кем была дежурство было 5-7 опытных разработчиков которые дежурит каждую неделю и в общем на них сваливается все проблемы прода Вот и при этом они не совсем понимают как какой приоритет потому что может прийти Там инцидент там одна пятисотка прилетит считается ли это инцидентом у одного студента не работает контент не работает какая-то кнопка Является ли это инцидентом в общем достаточно много разных проблем На продакшене случалось и не хватало понимание что инцидент потом из-за того что у нас там процессом было организовано только узкое количество дежурных приводило к тому что был достаточно высокий порог входа в дежурство в эксплуатацию продакшена также проводил к тому что каждый из дежурных пилил что-то свое То есть каждый из дежурных там смотрел Вот у меня есть там разные системы в Яндексе есть там разных тема там есть графа на есть там например Соломон аналог Прометея и Каждый делает где хочет свой мониторинг при этом он часто не отвечает на вопрос стабильно ли мой сервис мониторинг Он часто разбросан по разным местам что-то в соломоне там что-то в графане что-то еще там еще в третьей системе находится и попробую потом еще все эти все эти графики по которым хочется делать выводы Вот так же приводят к тому что есть шумеешь алефтинг хочется тут дежурным из Портовой разработки делать хорошо там случился инцидент хочется сделать выводы хочет добавить олегтинг поскольку большого понимания поскольку процесс мало занимаюсь занимаются то это приводит к тому что олегтинг ставится на все подряд там есть железные Тачки есть там CPU там есть ципул троттлинг там память но на самом деле кажется что достаточно низкоуровневые метрики которые не всегда дают понимание что пользователи проблемы может происходить 1 под умереть но при этом у тебя еще там десяток плодов есть и пользователи не заметит В итоге забивается канал И тут достаточно сложно становится отличить 500ку вот случилось 500 и потом там такой стэк трейс из других халертов появляются там по памяти что-то произошло что-то с CPU происходит в итоге дежурные заходят смотрят там у него 30 сообщений вывалилось посмотрел на последнюю цепляется пошел дальше Вот А пятисотку самое явно проблема он не смог заметить потому что просто шумящая лифтинг дальше поговорили у нас также основным каналом конечно является лифтинг то что есть 500ки Нет 500 но также много обращений приходит на третью линию поддержки на дежурных когда есть Саппорт есть точнее чатик на сайте студент обращается спорт в этот чатик Потом приходит в более опытный Саппорт Вот и потом более опытный саппортом приходит краски в дежурных сообщать проблемах и не всегда получается так что в этот канал приходит релевантное сообщение ну и также как и шумящим алефтингом может прийти какое-то очень важный очень важное обращение при котором кажется что много студентов страдает и это та часть нашего продакшна которую мы пока еще не покрыли но при этом как бы появляется вместе с этим еще много много обращений которые там от контента вот у нас там не работает такая такая контентная история что урок какой-то не запускается вот что также связано с не до конца пониманием Что является у нас инцидент Вот все вот эти вот выше пункты они приводят к тому что у дежурного достаточно долгая реакция на инцидент вместо того чтобы подключиться там за 3 там 10 минут может доходить до десятков до десятков минут до часов подключение дежурного концендента это вообще недопустимо для продакшна Окей вроде бы на инцидент дежурный начал подключаться Ну как бы начинает смотреть что с сервисом где лежит доходит до какого-то момента и понимает что дальше ну как бы не очень понятно куда дальше копать потому что дежурное Это скорее взяли 5-6 разработчиков у них там свой опыт разработчики там пишут Под свою часть Production Вот и такое усредненный разработчик это вообще разработчик который в целом не понимает как устроен продакшн очень много сервисов и невозможно разобраться поэтому когда сталкиваются проблемы которые ему непонятно он не знает что дальше делать Вот и Дай Бог чтобы у него было понимание кому пойти Кто является экспертом в этой кодовой базе и быстрее решить инцидент Если нет то пишет общий чат и может там ответить может не ответить это еще больше затягивает время на диагностику и на починку инцидента Окей починку тоже поговорили вроде бы научились подчинили инцидент но что-то должно дальше все-таки происходить нужно делать выводы бизнес все-таки должен как-то за этот простой какую-то выгоду получить виде постэма но при такой организации процессов у нас отсутствовала постмодерна в целом Вот и какой-то процесс пытались вести но он всегда был не прилететь потому что была проблема процессная что не особо сильно удивляли внимание стабильности вот потом поскольку постмодернов не было не было экшна этому Вот в целом продукт не был готов лечение нагрузки в разы нагрузка увеличилась в четыре раза может даже в моментах на некоторые сервисы больше больше запуска появилась И те части которые предполагались такими базовыми то что они будут работать они начали отказывать и при этом как бы люди которые занимались эксплуатацией этих частей либо Просто их разрабатывали на тот момент просто не оказалось вместе с нами Вот и тут появилась проблема что они Понятно вообще что происходит когда пробовали постмодерма вести упирались просто в стену что непонятно что там происходит и нужно там четыре недели разбираться вообще как этот сервис устроен вот такие проблемы у нас были в организации стабильности сервис начали часто падать нагрузка увеличилась вот здесь Нам очень хотелось быть лучше Вот Но что мы какие выводы из этого сделали и как начали ситуацию побеждать давайте начнем наше шоу расскажу про вообще как как удалось эту ситуацию улучшить Вот и выровнять наш стабильность первое с чего я начал это Начал качать вот здесь сделал стабильности выглядит так что раньше нас была большая проблема с мониторингом что не было понятно вообще как смотреть на мониторинг как него заходить вот у меня есть там Продакшен было два дежурных там один дежурный кэнде один дежурный контент видит себя 500 говорит наверное пойду короче типа сразу отдам И вот так у нас как бы начинался что к одному приходит отбрасывает обратно что нет твоей вот итоге сделали пирамидальную метрику криминальная лифтинг по которой смотрим Что типа система вообще она себя хорошо ведет или нет Вот и вот такой вот главное Лев тут сверху видите который показывает практикуму сейчас хорошо или нет Потом дальше делим наш алефтинг он состоит там из трех частей которые как бы является ближе которая будут находиться ближе к пользователю фронтенд и баз данных вот фронтен тут вроде понятно то что пользователи напрямую общается тендендом с фэнбеком API дергает потом каких-то частях может быть ходить Вот и с базы данных что выделил отдельную такую часть хотя и пользователи с ней не взаимодействуют потому что база данные от базы данных также очень много чего зависит если например пользователь как-то интерактив делает на платформе то то получается что там делают какую-то запись решение все записывает бац данных если она встанет то тут уже как бы пользователь ничего не может делать Вот здесь разделили на три части вот на фонтен баз данных и после этого делим также каждый вот этот лифт по каждой из компонент на большей часть вот здесь покажу какие метрики мы выбрали по Каждому каждому из сервисов вот выделили таких четыре части основных и при этом поработали максимально даже потом чтобы была удобна навигация закрепили Вирт это наш контент здесь закрепили что есть 500 сервера вот есть главная лифтинг на компонентов главная лекция компонента там делится на четыре части как я сказал Вот одна из компонент это 500ки вот здесь смотрим по дальше разбиваем эту ошибки эту этот метрику на несколько таких доменов в рамках нашего компонента контента Вот и смотрим по нему какие у нас могут быть ошибки вот вторая Метрика это restance Time вот если 500ки это Метрика которая напрямую видна пользователю И он не может пользоваться продолжать пользоваться платформой то есть поставим как бы кажется что это больше про подземный стук что есть у нас увеличивает средством стайм то скоро могут начаться и 500 потому что могут отваливаться по тайм-аутам Ну и как бы замедление но также приводит к недовольству пользователей также выделили по каждому из компонентов вот здесь есть вот мы напишет какие-то части сервиса выделили в другие также часть Окей при этом тут Важно сказать что типа Да отлично вывели на графике А как же теперь по графикам понять А что А что хорошо что плохо Здесь закрепили также по каждому графику такую красную черту по которой мы понимаем что окей вот выше этой линии мы не должны выходить Вот видим что здесь например в некоторых моментах Мы прям пикуем вот много пиков вот некоторых моментах прям явно выходим за наши границы И это повод тому чтобы начать разбираться с проблемой Production и отсюда как бы уже формируется понимание А что является инцидентом А что нет Окей третий метр который выбрали это FPS вот здесь посмотрели за последние три месяца какая у нас нагрузка в целом была вот сделали экстраполяцию и поняли что Ну вот по таким-то компонентам вот у нас такая-то нагрузка там где-то 100 где-то там 1000 FPS и посмотрели максимальную нагрузку которую может быть и взяли за половину от лимита Вот это красная линия по каждому из компонентов так понимаю так начали понимать на самом деле о клиента что у нас такая нагрузка вот какая у нас ожидаемая нагрузка на сервис наверное где-то в мае там в апреле столкнулись с тем что достаточно много доса было и такие графики они прям очень выручили с тем чтобы понять А сейчас мы под видосом находимся И вообще что с нашей системой происходит вот Может там какой-нибудь Пришел студент который решил для забавы ради Попробовать там одну ручку поделать А у нас Олег не взлетел Вот так мы сразу видим Что ага вот у нас там по моим по профилю там видимо увеличение нагрузки и в итоге это помогает нам определить быстрее проблему Окей четвертый Метрика которую выбрали Это в нашем понимании Яндекса называется на самом деле это вот это доля ретраев но запросы также такая Метрика которая является подземным стуком по ней можно понять Вообще как часто наши сервисы наши запросы таким образом понимаем насколько вообще у нас сейчас система находится в пограничном состоянии чтобы перейти в состояние поломки вот если видим там то что у нас там уже больше одного процента например доля реки доля запросов которые травятся хотя бы раз то мы как бы понимаем что сейчас и пользователи начнут страдать он как бы Когда увеличивается три правила увеличивается и Lightning Ну и кажется что эти две метки они получаются связаны при этом по каждому из компонент которые здесь были выделены можно посмотреть можно посмотреть разбивку вообще какие запросы это были вот дальше я про это говорю про база данных по базе данных также посмотрели какие у нас инциденты за последние там время были какие для нас важны посмотрели в том числе Сергей пук что говорится про что говорится про базы данных и выделили для нас важные метки это время вот здесь смотрим на 99 В общем на 99 и точка 99 перцентиль вот смотрим на количество коннекшенов то что бывает то что оно увеличивается Вот и база также переходит состояние простоя Точнее не база переходит по состоянию простое а может быть в состоянии простое потому что он больше пользователей больше коннектов появилось Вот и в итоге не все запросы могут подключиться к базе данных вот посмотрели то что у нас есть аналитика вот поняли что есть файлы вот поскольку у нас аналитика она подключена через логическую репликацию к возрасту с базой данных то бы если там начинается проблемы на стороне трансфера данных и в аналитику вот начинает копиться в файл и в итоге это приводит к тому что у нас диск растет поскольку там диск при 95 процентах на позже может перейти в рядовом ли состояние также начинаем вообще все эти вещи видеть вот например там у нас сейчас на диске юзачо юзать же у нас там 80 там 8 процентов вот выглядит так что сейчас работает Олег но при этом как бы если раньше мы такие смотрели Ого там 88 процентов А как бы повод ли это заводить инцидент вот если при 95 Ну там еще семь процентов есть запас Ну как бы нормально следующий дежурный может быть что не сделает вот сейчас явно закрепили что вот есть 90 процентов у нас есть лимит если больше 90 процентов у нас идет дополненность диска все тут явно нужно бить в колокол и говорить что ребят Ну все надо надо этим заниматься вот надо срочно найти бросать все дела и чинить Production потому что там еще пять процентов какие у нас может случиться поломка которая приведет к простой там на десятки минут на этом час-два Окей тут про базу данных поговорили дальше плейбуки Вот очень сильно грешили тем что в общем добавляли Олег ты там шумящие алифтинг он также присутствовал вот и не всегда было понятно вообще А что с этим альянтингом делать пришла по цеху и что делать дальше вот приняли решение взять все объекты убрать которого у нас были по которым могли дозвониться дежурному Вот и оставили вот эти четыре основных самом деле то это количество потом FPS лейкинсы и 500 и по каждому из них написали плейбуки поплывукам написали что вообще это за лет вот что делать Вот например там что делать у дежурных штурмовали понимание что ребят Вот смотрите видите Олег вот есть даже борт состояние вот дашборд стабильности практикума вот смотрите вот сейчас у нас провод лежит вот какой части он лежит там фронтенд это или бэнд или это с базы данных вообще не так пошло потом видите то что проблема там с бэндом Окей Идем дальше с Back end смотрим где там 500 например вот если 500ки переходит ли какая-нибудь из линии за красную за красную черту вот по верхней границе если переходит то вот эта история по которой может 500 пересадить и дальше пишем инструкцию вообще как как бы шутить потому что скорее разработчики они хорошо занимаются разработкой продуктовый Вот хорошо пилят но тем не менее как ты был шутит Production скорее от них это базовой комплектации не ожидалось вот тут написали инструкцию поняли как научили с помощью инструкции как Table шутить Окей хорошо тут поговорили про торгов-шутинг поговорили про дашборд состояния по плейбуке дальше переходим к слову слайд косолай тут поскольку сформировались достаточно понятные метки четыре метки которые у нас были из них выделили два две основных методики это 500ки и резки сделали тут три таких уровня вот по которым понимаем вообще Нужно ли дежурному поднимать ночью например чтобы он проснулся и я начал прочь Вот это примеру у нас достаточно такой шумящий мониторинг был и пороги достаточно неаккуратно были настроены по которым дежурство превращалась самом деле в какой-то кромешный ад когда тебе там ночью там каждую неделю звонят где-то три часа ночи из того что пришел пользователь вот он там несколько раз обновил страницу и вот такой достаточно мониторинг получался поэтому здесь по риспорта ему сделали Так что если меньше трех минут мы не пить сотен то мы считаем что это вообще не инцидент Вот и поставим его Если меньше трех минут у нас не выходит значение за пороги по перцентили 75 95 99 мы не считаем что это инцидент там Если больше трех минут и это затронуло запросам по из компонентов сервиса то мы считаем что тут надо срочно бросать разработку и Остап восстанавливать сервис делать так чтобы все починилось вот такая же там Матрица как бы 500 получилось если видим что там меньше трех минут нас больше 25 процентов 500 то Ну пока что говорим что ну дежурный просто заводит по такому начинает сам разбираться с проблемой вот если это дальше продолжается это больше двух с половиной процентов запрос там остаются то как бы находим сразу эксперта Вот который может понять и разобраться в причине инцидента в течение поломки и дальше как бы катить фикс вот OK как вообще эти значения У нас получились и как получились вот эти красные линии о которых я говорил вообще там ссылая это метрики по которым slo определяются Вот и слово Там мы говорим что например там 500 мы село Как говорит нам вообще что есть Хорошо что есть плохо Вот например там есть больше 500 чем один процент то мы считаем что это плохо Если меньше стоит хорошо вот и как вообще такую границу удалось привести есть метки технические есть бизнесовые метки вот мы на 1 такой итерации сделали технически вот сейчас приходим больше бизнес меткам в том числе технически имея такие вырабатываются тем что вот делаешь такие метки приходишь к водителю разработки говоришь вот при этом Паша вот Давай посмотрим на наши метки которые есть и поймем какие у нас здесь могут быть границы вот потом например по бизнесу я вижу так что приходишь к себе к ребятам из бизнеса и начинаешь с ними также разговаривать вот а какие вы видите бизнес метрики которые важны для бизнеса Вот например там количество студентов там количество оплат которые происходят за месяц и тому подобное при этом кажется что технические метрики также их можно делать коллегиально что имею ввиду мирно спать есть гильдия backend и гильдия фонтендо Вот который собираются люди по компетенции можно повод передать им все эти все эти метрики и чтобы они смотрели выбирали Что является для них хорошим что плохим здесь бонусом получаем что и разработка в том числе понимает откуда вообще эти цифры взялись дальше там пойти вместе с также сетевого пообщаться на эти технические Окей происо ли также поговорили перейдем к приоритетам я упоминал что у нас достаточно сложно было все с приоритетами то что дежурный не совсем понимал А вообще как бы Что является инцидентом поэтому здесь точно закрепили инцидент это массовые поломки которые видны пользователям Вот и закрепили вообще приоритет нас там было несколько таких частей за которые мог браться дежурный это инцидент какие-то какая-то текучка из Третьей Линии поддержки потом они всегда просто игнорировались и не брались работу Либо они просто составлялись говорилось что давайте положим быклок продукт технический долг не был сформулирован поэтому это вообще никогда я не разбиралась вот поэтому получилось так что первое самое важное это то что у нас просто сломался сейчас там прилетел какой-то Олег вот второе это то что прилетел прилетел какое-то обращение из Третьей Линии поддержки в дежурного и оно достаточно массовое там больше там трех студентов обратилась то мы считаем что это массовая проблема которая стоит уделять внимание Вот потом как только у нас такая активная стадия пошла очень важно сразу в течение дня написать дальше расскажу как мы ведем постмортана мортом написали тут очень важно не просто сделать выводы а еще ешь на этом на самом деле сформировать вот в отдельные это вынесли потому что какие-то нужно приглашать больше экспертов которые могли бы помочь вообще понять А как мы можем сделать лучше Вот экшенайт мы сформировали дальше приходит там задачи по эксплуатации прода например там произошли какие-то informational либо borning коллекторы Вот и нужно посмотреть например там под какой-то важный там с очереди начал перезапускаться как бы на пользователя это напрямую не влияет Ну как бы краткосрочно вот Но среднесрочно это начнет пользователя путать в показаниях там в статистике вот последний месяц там мы поместили что это краски текучка разные которые дежурный при этом очень важно сделать так чтобы дежурные понимал что он не дебопс Вот и на любые поломки релизах он вообще за это не отвечает если там на фичеветках происходит то это вообще как бы это не задача дежурного вот дежурный дежурный Должен реагировать только на инциденты вот есть такое слово он Коул вот и это то на самом деле к чему должны приходить дежурства в нашем понимании что дежурство Это скорее текучка какая-то идет очень важно делать выстроить процесс так чтобы у нас был он кол когда дежурный только продуктовая разработкой занимается и как бы случаи проблемы Он берет просто трубку Окей по паритеты тоже поговорили дальше быть перед дежурный понимает как вообще нам Какие задачи ему решать какие у него приоритете Вот ну как бы примерно начинает представлять то что есть происходит инцидент то Ну вот надо как-то его решать а есть он не может решать то приходим к формированию доменов продуктовым продуктовым фичам то что есть там например у нас практиками два Монолита вот исторически сложилось там первый Монолит там он это фронтен второе это бэкент и бкнди например там есть какие-то фичи которые отвечают за оплату какие-то фичи которые отвечают за профиль пользователя какие-то фичи которые отвечают за например домашнее задание и первым делом Чтобы понять какие у нас домены есть мы приходим каким-то трем четырем с сильным разработчиком и начинаем с ними общаться небольшой проводим ребята скажите типа Какие вообще вы видите здесь есть части вот Давайте попробуем выделить основные Вот и Так постепенно начинаем наш молить на несколько частей делить это происходит без без вынесения Монолита на отдельные части вот это достаточно такой малой кровью обходимся чтобы понять вообще как бы а какие у нас части важны Потому что если у нас будет Олег на вот просто сервис наш Монолит то это приведет просто к тому что мелкие какие-то вещи но важные они будут имели менее видны вот если там вся функциональность она откажет то выглядит так что по сравнению с другими например метриками Это просто не будет заметно вот поэтому как бы важно начать с малого обойтись малой кровью сказать что вот такие вот запросы они такой там запросов отвечает домашкам вот такой запросов отвечает отвечает на смерть там профилю вот а другой там тренажер например вот и разделив Монолит на несколько частей вот запускаем опросник вот по всей разработки об их уровня знаний этих частей Вот как это примерно выглядит простите за белый фон вот на черной презентации тут говорим что ребят привет Вот мы хотим улучшить понимание вообще А как наши разработка знает наш платформу Давайте попробуем начать с малого вот есть такие вот части мы вот мы выделили Давайте расскажите пожалуйста как вообще знаете эту часть интеграция по профилям вот интеграции там с тренажерами разными и здесь четыре варианта ответа там знаю писал большую часть там могу ответить на вопросы давно не пробовал Ну и вообще как Я не знаю и примерно так удается сформировать по каждому из компонентов кому можно как бы написать в случае проблем вот здесь как бы делаем ранжируем по каждой по всем ответам разработки по каждому из таких доменов вот получаем там выделяем три топ человека которые отвечают те или иные части кладем на главную документацию и говорим людям что ребят смотрите вот у нас есть какие-то домены вот если что там понимает что не может разобраться в течение 10 минут с инцидентом то сразу подключайте вот этих людей вот как бы не подключился там не удалось дозвониться до одного человека Вот звони другому и третьему Вот и так как бы растет в целом понимание того как инциденты решать как с ними разбираться и уменьшаем среднее время на починку постмортом отдельная большая часть которая заняла также время это сделать хороший шаблон для постэма Вот почему это важно потому что когда пытались сводить по спорту Мы понимали что блин писать там есть как бы диагностика Там есть разные писания инцидентов есть вообще как бы как эти экшена это заводить как с ними вообще что дальше делать Куда и дальше относить вот что в описании писать Ну вот напишу Пожалуй это скатывалось то что у нас разработчики писали Ну вот упал сервис вот отличное описание нет сформулированных таких не было сформулированных понятий Как правильно заполнить постмортом вот поэтому здесь пришли типа такому видению что постмофтам с чек-лист Вот что по каждому из стадий вот инцидента мы заполняем чек-лист вот просто Берем копируем с предыдущего слайда чек-лист вставляем ее в тикет и дежурные дальше берет сам заполняет если описана причина инцидента была если он написал то как бы дальше проверяется Вот например руководитель эксплуатации раз в неделю либо каждый день и смотрят типа насколько вообще достаточно написано причины инцидента очень важно найти этот код есть там например видим что произошла 500 и непонятная Почему ну-ка что это плохое описание инцидент как бы важно понять вообще какой род косу это все было там то что 500ка произошла потому что там был бак вот на починку вот Какие действия дежурного были там Как проводили диагностику все эти вещи они должны быть дополнены это важно немного Micro Manager выделять отдельно что помогло при диагностике отдельно чего не хватало Вот и как вообще чинили потом выделяем отдельную стадию эскалации здесь есть например Disaster OLED был настроен Вот то как бы все супер здесь больше фокусируемся на том как как быстро подключался и как быстро чинил дежурный инцидент подключился ли он сразу был ли у нас или это очереди заплата пришло Дозвонился ли наш робот до дежурного как Альянс работал там подключился ли он за 15 минут дальше завел ли он протокол начал ли он координировать потом обновлял ли каждый там 20 минут статусы потом рассказывал как диагностировал знать Знал ли он как проводить первичную диагностику понимал ли как домен поломки определить как бы знал ли он кому написать там собрал ли людей и вот это все мы уложили в чек-лист важные особенностью которого стало что если например один такой чекбокс Не заполнен то это пункт экшенайтом Например если не было то очевидно нужно добавлять Олег вот если например там не удавалось быстро починить там не было понятно кому обратиться то это к тому чтобы добавить домен сформировать его выделить ответственных за него Да да я заканчиваю супер босс-мортам экшнайтемы как я сказал то что Action на этом сразу заводится критичный уровень то что в конкретной очереди мы Начали его создавать что не хватало вот для каждого экшна этому в описании добавляем Вот примерно примерно так как бы как я отметил что для каждого незаполненного элемента чек листает должен быть Окей и наверное завершающая такая часть все это нужно было собрать воедино отлично там сделали крутой мониторинг там сделали крутой лифтинг описали плейбуки там выделили слои там закрепили приоритеты там закрепили вообще какие у нас проблемы могут происходить кому с ними можно прийти а теперь осталось передать это все в команды Вот и бы передача она ходила через бординг то что также вдохновившись идея о вообще что-то из чек-лист также делали в виде чек-листа как бы каждый раз когда Новый дежурный там заступал дежурство просто говорилось Вот смотри это вот посмотри на чек-лист заполни его и потом отправь если у тебя какие-то проблемы не возникает какие-то проблемы возникали то э-э Давай их обсуждать вот из чего состоит Бортник это как бы тут главная идея сделать так чтобы информация была усвоена то что есть главный график то типа нужно понять А что по нему разработчик должен вынести например там знаешь как посмотреть вообще настроение системы в целом знаешь как посмотреть ручки имеется ввиду запросы по которым фронтен 500 знаешь как посмотреть вообще каким запросам у нас увеличивались тайминги как у нас ретро вообще каким то просто можешь посмотреть разбиение по пользователям вот что это все запросы которые там с увеличенными таймингами они пришли от одного пользователя Похоже что это тоже какой-нибудь либо у нас там какая-то железная машина отвалилась и можем посмотреть что все запросы которые 500 учат они сваливаются на один хост и кажется что тут его надо либо перезапустить либо вывести из эксплуатации Вот и просим добавить в Избранное главный график чтобы он всегда был под рукой по инцидентам тут стараемся делать учения вот когда у нас происходит инцидент важно чтобы началась координация нужно научить Людей тому чтобы все это работало вот чтобы быстро решался инцидент и тут мы говорим что от нас есть курс вот которого можете потестить попробовать сами этого Бота и попробовать побыть в роли координатора в тестовом формате вот выставлять сколько там времени осталось на починку и Когда будет новый статус Окей вот эти все действия которые я рассказал они привели к тому что у нас значительно увеличилась стабильность нашей платформы вообще как что отличный результат что раньше было Вот 7 разработчиков которые дежурили стало 100 вообще отлично потом поняли как тик долг передавать то что вот есть понятные экшнайт мы понимаем что если они повторяются то бизнес несет потери и проще стало с этим приходить в продукт Вот и начали решаться сделали понятный централизованный мониторинг который есть понятный точек входа по которым бы стало наглядно понять А вот у нас есть бэкент то что есть там понятные домены вот по этим доменам есть понятные метрики по которым можно делать выводы У нас сейчас все хорошо или нет таким бонусом стало то что дежурим наконец-то стал спать спокойно и как бы на каждой там встрече этот перспективе все отмечали что вообще это просто что-то с чем-то как бы Даже захотелось еще раз подежурить по сравнению с тем что было раньше вот меньше ли время подключения Ну и теперь каждое дежурный он понимает как решать и еще кого звать на этапе диагностики или починки у меня все спасибо большое что послушали мой доклад и наверное Давайте переходить к вопросам Лёш Спасибо тебе Да мы коллеги К сожалению в рамках эфира уже не успеваем разобрать вопроса но мы сейчас приглашаем всех перейти в дискуссионную комнату собственно после завершения эфира у вас должна в плеере появиться кнопка для перехода туда Ну и собственно всем велкам Давайте там пообщаемся разберем вопросы и принципе проведем хорошо еще как минимум час времени Леш Но мы с тобой собственно никуда не уходим остаемся Здесь супер"
}