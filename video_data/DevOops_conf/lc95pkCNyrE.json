{
  "video_id": "lc95pkCNyrE",
  "channel": "DevOops_conf",
  "title": "SL*: во что мы ввязались?",
  "views": 224,
  "duration": 1953,
  "published": "2022-11-02T15:02:57-07:00",
  "text": "и собственно в эфире Наши гости Сергей бывшев из компании метр квадратный и Сергей Бухаров из Додо Инжиниринг Сергей бывшев У нас здесь в студии Привет Сергей Приветствуем Сергей Бухаров подключился к нам удаленно Привет Сергей Вот Ну а также с вами я Алексей Акопян и Павел филонов и мы сегодня действительно поговорим про вот эту интересную связку или набор аббревиатур Sli slo SL A с точки зрения того кто как с этим сталкивался и посмотрим а во что же мы собственно все ввязались еще раз привет гости у меня для начала такой очень интересный вопрос поскольку мы будем передавать друг слово вот Сергей бывшего и Сергей Бухаров вот как вы предпочтете чтобы мы друг другу к вам обращались чтобы у нас было Два Сергея чтобы был не Сергей один и Сергей два Вот хорошо вопрос а заодно расскажите немножко о себе Окей давай тогда я Наверное начну Да зовут Меня все так же Сергей бывшев в общем-то являюсь ведущим инженером автоматизации компаниями про квадратный соответственно и Также занимаюсь преподавательской деятельностью на платформе otus соответственно с практиками мониторингом там впрочем такими вещами вот так где-то около 10 лет наверное войти из них последние лет пять занимаясь автоматизацией всяких таких вещей как-то так хорошо спасибо Сергей Бухаров и у меня кстати возникла идея как можно быстро вас отличать Сергей в студии и Сергей на удаленке годится отлично вполне тогда Сергей на удаленке расскажи пожалуйста про себя Представься Всем добрый вечер еще раз зовут Меня неожиданно Сергей Я работаю Инжиниринг течение последних двух лет занимаюсь помимо прямых инженерных обязанностей видно поддержания проданных и так далее занимаюсь внедрением культуры сре прикручиваю вот эти вот самые цель что-то там объясняю зачем они нужны автоматизируя их подсчеты продвигают в компании то есть От твоей работы напрямую зависит во время доставят пиццу и доставят ли пиццу ту которую мы заказали это и тому кто ее заказал Ну в общем-то да хорошо Наверное нам с Пашей тоже надо немножко Про себя рассказать Раз уж мы ввязались в эту дискуссию Я до недавнего времени работал в компании Dell Technologies в санкт-петербурге и в качестве все нервы инженерии менеджера и моей команды отвечали за два достаточно важных внутренних сервиса Это небольшой внутреннее облако такой микро Google Cloud которым пользовались инженеры И разумеется оно работало 24/7 и необходимо было его поддерживать и второй сервис тоже такой достаточно масштабный он отвечал за Учет и контроль доступа к всем лабораторным ресурсам физическим виртуальным соответственно поскольку оба проекта были сервисные они крутились и имели не миллионы правда так сказать это в основном тысячи и десятки тысяч эффективных пользователей но тем не менее поскольку от этого зависели релизы серьезных продуктов нам в общем-то тоже были поставлены скажем так вот эти интегральные метрики которые мы там более или менее успешно пытались поддерживать поэтому Надеюсь что мне тоже будет что сказать Паша я имею здесь вот Какой опыт Я в течение многих лет руководил командой дэйта сайнс касперском и мы достаточно много запускали внутренних сервисов которые как раз должны продуктом и сервисом компании предоставлять разные email решение и много работали Что удивительно с различными метриками включая цель ориентированные Но вот может быть будет интересно посмотреть их Со стороны email специфик Дело в том что там понятно что есть вопрос доступности там возникает еще дополнительные всякие метрики связанные с качеством например этих решений А в последние годы я уже такой на вольных либо Независимо сам для компании реализую решение и тоже стараюсь делать так чтобы предоставлять какие-то Sli потому что ну на это рассчитывает бизнес Потому что если решение будет работать не с теми характеристиками с которыми предполагалось А зачем она вообще запускалась тогда вы ведь очень полезные люди тогда были в касперском потому что с вашей помощью можно было объяснить начальство Почему 4 девятки не достичь да да потому что иногда зависит можно достигать вопрос Какой ценой вот вопрос Какой ценой И часто нам даже ставили какие-то такие челленджи был цели вот какие-то мы достигали какие-то обосновывали вот как у DS проектов есть такая специфика можно всё классно сделать все четко попасть сроки прийти с отрицательным результатом отлично хорошо Ну что ж мы представились и Давайте пойдем в обсуждение давайте мы попробуем начать наше обсуждение с вопроса а откуда вообще взялись эти требования Sli это сервис левого гривен то свои сервисы вот зачем они нужны и давайте сделаем это более конкретно Каждый из нас расскажет про то как эти скажем так понятия появились в нашей жизни давайте начнем с Сергея на удаленке поясню Что значит все эти цели что-то там моей картине мира для меня в первую очередь чтобы Метрика под коробкой не лежала нужен в первую очередь для того чтобы достичь баланса между бизнесовой разработкой и надежностью сервисов потому что Сколько было сколько фич не было никому не нужны никто У нас 24/7 все лежит это никому не поможет и денег бизнесу не принесет Поэтому мои картины как раз таки зафиксировать договоренность между эксплуатацией разработкой бизнесом чтобы каждому в этом комбинации было хорошо чтобы сервисы работали стабильно фичи доставлялись и было при этом пространство какое-то для маневра отлично А метрики в твоей жизни появились Извне или наоборот они появились вместе с твоим приходом в команду они появились не совсем с моим приходом но в целом В общем у нас в компании эти метрики появились именно от команды не от бизнеса они пришли круто это на самом деле действительно круто Спасибо Сергей в студии Я думаю у нас все же несколько было иначе основной заказчик в общем-то основной акционер компании выдвинул некоторые требования да то есть тот момент и на сегодняшний тоже это Три девятки доступности сервиса которые соответственно мы некоторым образом меряем предоставляемым отчеты в общем-то Ну и тут я тоже согласен что это поддержание некоторого баланса между надежностью и внедрением каких-то скоростью давление и в общем как-то так да хорошо И насколько это было просто или не просто То есть вот когда какие-то вещи приходят Извне дату то всегда возникает Обычно такие некоторые не то чтобы трение но как минимум до устаканивание как бы что что это такое зачем вот у вас это как это прошло легко или нам или наоборот то есть вот сколько усилий ваши основные заказчик и акционер приложил к тому чтобы вы сказали Да чувак как бы так и будем Ну к сожалению частично происходило еще до того как я оказался поэтому тут вся история наверное не расскажу Да действительно некоторые сложности присутствуют потому что всё-таки маркетинг здесь хочется выработать какой-то единый язык описание Да вот этих требований язык метрик каких-то чтобы мы все понимали Да были какие-то трения то есть что мы можем действительно обеспечить что мы соответственно не можем Но вот зафиксировались пока Таких вот примерно цифрах цифрах для нашей компонентов нашей экосистемы Я прошу прощения за такой вопрос с небольшим наездом А какой можно построить маркетинг на трех девятках не особенно да согласен Поэтому думаю по чуть-чуть уже будем старые четырех выезжать до сервис Ну такой достаточно новый поэтому я думаю пока так ограничились Три девятки предполагает что это на самом деле очень честно вот как бы вот для меня в этом как раз меньше маркетинга а больше ощущение того что ребята как бы серьезно подумали посмотрели и сказали вот это вот мы можем А дальше мы даже как бы продавать не будем пытаться потому что ну вот так Ну тут конечно да не стоит продвигать то что ты Ну не в силах как бы выполнить это как раз таки про тот самый и бюджет ошибок и про этот баланс это ошибок Я думаю мы еще дойдем это очень интересная штука Павел вот мне понравилось как Сергей на удаленке ввел вот эти три термина и я например могу показать как они выглядят в мире эмэле например есть какая-то задача вот мониторинг я не зря сказал что очень люблю мониторинг летят кучу оповещений олертов и обычно Что делают сидят люди и говорят в халса настоящие фаса настоящие фаса настоящие на это может выводиться очень-очень много времени особенно если алерты сложные Мы в одном из проектов делали как раз коробочку которая вот сидит и тоже говорит Оса настоящая фаса настоящие таким образом Алсу можно с людей загружать а нагружать их вот тем что подозрительно похоже на настоящий инциденты и когда мы эту тему разрабатывали у мэльщиков есть правда такой лайфхак они всегда живут с метками но есть у них и другая проблема у них часто метрики какие-то их попугайские которые трудно выразить в бизнесе вот у меня была специализация Я всегда старался объяснить как вот эти попугайские метрики влияют на бизнес и в итоге объяснял Ну смотрите самое простое Сколько мы отфильтруем вам это ведь по сути сколько вы сможете масштабировать вашу команду которая вручную потом будет разбирать О вот мы хотим чтобы вот это вот selay уже появляются да потом появляется уже slo Мы хотим чтобы вы фильтровали не меньше 40 или 60% всех фасов отлично А дальше мы им рассказываем сюрпризы смотрите Вы наверное слышали что эмаль всегда ещё ошибается говорит слышали поэтому мы должны обговорить с вами вторые метрики Дело в том что эта штука она будет ошибаться и случайно то что является настоящимицедентами она может как-то под ковёр говорит так так вот давайте договоримся про них хорошо говорит Вы же наверное догадываетесь что ваши люди Живые люди также делают да да Живые люди тоже ошибаются Вот давайте постараемся сделать так чтобы робот ошибался не выше то есть не больше чем Живые люди и вот это интересная была и очень сложная Метрика не с точки зрения вот SL или там ну вы считали как её считать на потоке Вот это было очень интересная Техническая задача Как мы можем вот эти ошибки которые мы по идее под Ну как мы можем их пересчитывать в индикаторы чтобы ну грубо говоря отчитываться мы выполнили наше сво или мы их не выполнили круто это на самом деле действительно очень интересно потому что это так ведь SL все это в некотором смысле снежный ком вот как Только начинаешь его делать то если это цепляет если это захотят она потом вот обрастает всем возникает несколько индикаторов они связаны между собой можно трейдов выбирать какие нам важнее из них и Действительно это такая гибкая система получается А можешь рассказать Вот про самую такую хитро вывернутую метрику которую вам ml-чики принесли самые хитро вывернутую Да наверное там таких сложных нету потому что обычно Они работают в терминах там полнота точность главное просто не оставлять их Вот такими названиями точности полнота А переводить вот бизнес ориентированный что смотрите полнота это сколько мы найдем настоящих срабатываний процентов и все говорят о Все мы принимаем Кстати когда заказчикам внутренним вот это вот объясняешь после этого говорят слушайте удобный термин Давайте дальше им пользоваться и например на периодически каких-то отчетных собраниях они прямо спрашивают какая у нас полнота то есть они привыкают к этой метрике им становится удобно пользоваться коротким словом Потому что им объяснили что оно означает то есть там самое главное что метрик это простая вопрос как ее перевести в бизнес как это перевести в какой-то операционную метрику которая ему нужна вот это вот самое главное сложность она уже конкретно Project Ну вот в частности Как перевести в масштабировать команды вы нам даете 40 процентов А сколько мы в итоге можем экономить фонд оплаты труда Да это прямо очень хорошо у нас наверное было в чем-то по-другому потому что внутренние сервисы традиционно они не видят живых денег Особенно в больших компаниях и поэтому мы частично внедряли эти вещи сами от осознания того что у нас как раз команда была не очень большая и нам в общем самим приходилось как-то придумывать Как там быстрее отвалилась какие-то вещи Кроме того у нас было давление со стороны наших внутренних на все таки кастомеров которые эти слова тоже как бы знали суть проблемы там была в том что большая часть того что мы делали потреблялась системами автоматизации Да туда приходили тоже люди но очень большое количество автоматиза системы автоматизации тестирования продуктового оно было построено Так что надо быстро схватить венку прогнать и Ну там сколько-то часов Например если это какие-то большие регрессионные тесты и вот нам было важно держать две вещи во-первых доступность нашего API А во-вторых мы могли даже положить наш портал положить API Но вот те ресурсы которые уже выданы они тоже должны были работать то есть у нас было два таких слоя один слой на уровне программного интерфейса и второй свой собственный на уровне платформы к нему Разумеется гораздо более высокие требования предъявлялись и вот и у нас скорее вот из этого росли требования и у нас это было не со стороны руководство оно было как раз вот заинтересовано в маркетинге Вот потому что Да у нас были красивые даже барды и нам было сказано что по всем сервисам должны быть четыре девятки даже было даже Барда которая была по большей части зеленые но иногда красные Но поскольку dashbarda создавалась на самом деле От количества официально запущенных вручную аутоджей то у нас был очень хороший механизм быть зелеными вот типа если люди не запостят аутч или если они его запустят и сразу зарисовывают это на самом деле как бы даже борода продолжала быть зеленый хотя на самом деле как бы все знали что как случилось какая-то фигня Вот поэтому маркетинг маркетингом но при этом Мы понимали что всё равно нужно делать вещи хорошо и потому что мы живые живых людей видели которые которые это всё потребляют вот у нас была такая история на самом деле интересно потому что четыре человека четыре очень разных истории Паша какой следующую тему ты хочешь бросить было бы интересно вот обсудить вот Откуда все-таки приходит конкретные цифры Действительно ли они изнутри или Извне и вот может быть у кого-то есть история когда слишком наоборот перекрутили то есть не надо было столько хватило бы сильно меньше Но почему-то влили невероятное количество денег и из получили даже выше slh чем ожидалось может быть кто-то может поделиться таким опытом перезаложились и выдали больше это действительно интересно коллеги был ли у вас такой опыт соответственно платежные шлюз у нас также должен был держать четыре девятки но периодически тайм-аут и на каких-то эквайрах даунтайм в каком-нибудь казахстанском банке не позволяли им эти четыре девятки держать расти там по качеству нашего хода было уже особо некуда посмотрели мы на это все подумали поняли что перезаложились четырьмя девятками У нас тоже год наверное как этот сервис является сервисом критического пути на прекрасно работает на трех с половиной никого не беспокоит круто Сергей у тебя был Ох я пожалуй могу вспомнить единственный кейс на самом деле не так давно произошедший в какой-то момент на части наших компонентов мы поняли что довольно круто заложились на базу данных то есть Как вертикально так в общем-то горизонтально довольно серьезно и вот нас было пора когда Мы анализировали понимали Как нам это все сделать меньше без ущерба Естественно доступности качество работы сервиса и кое-какую денежку сэкономили вот так вообще конечно стараемся выводить какие-то новые фичи новые продукты через mvp то есть сначала все таки показывать Смотреть насколько тот или иной продукт окупается И сколько потенциально может принести денег и соответственно сравнивать с тем сколько будет стоить вся инфраструктура для его работы и как-то это дело удержать примерно рядом Окей ну это круто потому что видно что те люди которые работают близко к конечном пользователям вовне склонны перезакладываться У меня например таких историй скорее нет потому что даже вот гораздо более предыдущим и более таком кастомер facing сервисе виртуальных Денег которые мы делали там с 2013 по 2016 год который возились там лас-вегасы на которых крутились многие тренинги я бы сказал что у нас там были другие там не было внедрено таких формализованных вещей Хотя неформально они были просто на гораздо более компактных промежутках времени например конференция MC World лас-вегасе Она шла 4 дня и важно было за четыре дня причем только вот во время рабочее Да чтобы сервис жил и там как бы отказы были вообще очень очень дорогие когда мы там продолжались при самом первом запуске и час конференции был потерян там Понятное дело что это было не посчитать в деньгах Но это можно было очень хорошо ощутить как бы повышением температуры воздуха вокруг вице-президента это тоже как бы очень очень такая интересная метка вот ну и потом мы действительно перезакладывались очень сильно но без Метрика у меня из этого мира только одна маленькая Техническая история и мальчикам часто бывает Нужно специфическое железо в основном видеокарточки которая к сожалению очень плохо шарится и очень часто допустим Один instance должен просто забрать себе ее целиком и когда что-то запускается иногда сейчас префлексы просто хочется но хотя бы сделать скилл Фактор 2 Но одна штука отвалится вторая продолжит обслуживать и вот когда это что-нибудь в типа с API где постоянный поток клиентов идет да естественно это полезно но вот бывает сценарий применения на потоке когда грубо говоря просто идет очередь ивентов если твой worker читатель отвалится Но у тебя просто очередь начнет копиться если он успеет за какое-то вменяемое время перезагрузиться или скорее всего поднимет другой ноте если есть небольшой запас он имеет все вот это рассосать и мы поняли что когда вот есть у нас сценарий потокового применения а не через стопе там может быть даже скилл Фактор 2 лишний надо просто смотреть скорость запуска если скорость перезапуска быстрая то есть очередь не успеет вырасти просто неограниченно скорее всего его не надо масштабировать два раза и лолоцировать например две достаточно дорогущих железки под это дело круто слушайте коллеги внезапно я осознал что у нас на самом деле осталось не так много времени у нас такая чудесная дискуссия люди пришли с таким хорошим интересным опытом что мы кажется так сказать можем говорить долго и долго Но вот самом начале мы упомянули про такую штуку как долг на ошибки и это часть так называемых advancedes да то есть продвинутых вещей которые обычно начинаются немножечко после того как вы уже Убедили всех вокруг что на метрике надо собирать что как бы диопс это хорошо что сырье это наконец-то профессия Вот вот Можете ли вы рассказать внедрена ли у вас эта практика если внедрена то как это было как это происходило просто или легко потому что мне например сказать здесь особенно нечего мы не дошли до Хотя очень хотели у нас только-только начались общения вот с нашим большим отделом поддержки давайте для разнообразия Сергей в студии Окей на самом деле частично это штука есть пока она не в виде какой-то культуры именно сделано виде метрик и соответствующих даже бондов где мы действительно можем мерить то насколько мы можем наш сервис положить на сколько там Либо мы уже превзошли по ошибкам Вот такая вот история но пока это еще как там особо на это не смотрят то есть не думаю что у нас там есть еще лишних там 10 минут можем что-нибудь повыкатывать там если что полежать но в целом Да идем в этом направлении Здесь нам помогают принципе Наши npn тесты которые проверяет все основные бизнес сценарии на основе которых мы можем мерить ту или иную надежность вот Клик ретро и всякий и так далее вот так что я надеюсь что ближайшем будущем все-таки появится все примерно будет представлять Как это работает и позволит в общем-то лучше эксплуатировать и развивать Круто А кроме бюджета на ошибки может быть какие-нибудь еще продвинутые практики вы внедрили и не знаю хаос Инжиниринг так сказать моя твоя труба шатал делаете К сожалению нет может быть к счастью Но это да это опасная практика Сергей на удаленке А у вас как это выглядит у нас бюджет ошибок как мы его называемый характер такого некого светофора Мы в первую очередь смотрим не на количество ошибок в котором у сервису еще допустимо совершить в этом месяце либо нам время которое ему еще допустимо полежать в этом месте другой период Мы в первую очередь смотрим на его сервис level допустим у нас есть девятками пока он держит 4 9 выше за какой-то период мы считаем что он зелененький все хорошо подсвечивается зеленым цветом только за какой-то период у нас в промежуток между тринадцать половинами И четырьмя девятками здесь соответственно сервис переходит состояние worlding разработчики на него смотрят Что можно сделать пока это деградировал окончательно соответственно если мы проваливаемся ниже трех с половиной девяток то здесь уже как правило бизнесовая разработка приостанавливается если проблемы напротив все это начинается уважение в надежность стабильность Ага То есть у вас такой трех уровней зеленый желтый красный на желтом Вы еще не останавливаете фичевую разработку но как-то так переориентировать сторону надежности хорошо Паша у тебя есть какой-нибудь такой интересный Мне кажется моя команда попала в стандартную ситуацию мы похоже что-то подобное делали но не знали как называется потому что как-то как раз говорил я про Sli и вот тоже допустимое количество ошибок который может делать Этот эмэль мы действительно мерили наблюдали за это характеристикой нас Была договоренность что он не должен превышать и когда мы собственно могли на него влиять в худшую сторону например в ходе бы тестов постоянно любят запускать какие-то параллельные модельки чтобы проверить как они себя работают и ходе этих экспериментов на них реально направляется часть трафика если выкатка Ну не знаю как-то на истории она там прошла все тесты а Она реально начала деградировать то понятно что она влияет на Sli И вот я помню что мы Наблюдая понимали что кажется мы как-то уже на грани поэтому давайте-ка мы приостановим на этот месяц об тестирования и следующее b-тест уже запланируем на следующий мы это сделали вот так вот не явно не особо формально но мне кажется мы по сути уже начинали подходить к этим идеям что у нас есть некоторые бюджет вот этот на ошибки и нам не стоит его превышать останавливали ли вы разработку выкатку могли останавливать выкатку и запланировать например хоть готовая фича все можно катить но Давайте выкатим ее чуть попозже пустив трафик все-таки на основную модель у которой более предсказуемая характеристики хорошо мы стремительно приближаемся к следующему слоту докладов и я хочу поблагодарить наших гостей Сергей бухаровой Сергея бывшего Спасибо вам ребята ваш опыт действительно бесценен А мы объявляем следующие доклады и одним из таких докладов будет доклад Юрия Медведева вазух как диоксикопс платформа это еще один доклад От чего про тулузу от человека который делает этот узлу Так что можно сказать из самых таких кишочков это еще один доклад правде все коп про безопасность все как мы любим Сергей тех лиц он более 12 лет работает частными и другими облачными средами знает кучу инструментов от хэши корп Эксперт куча разных дел опытных областях и как я уже сказал он в том числе и очень активно пропагандирует воздух и Его доклад будет не только теоретическим но и он будет показывать Как это работает проведет нас Через тернии компонентов и возможностей воздух и экспертом на его докладе будет Виктор Попов девопс инженер в компании в команде централизованной платформы НЛМК it еще одним докладом будет Николай поташников Вот про этот ОПС Мы кстати не говорили мы говорили про кучу разных трицератопсов А у нас есть еще док ОПС это еще одна интересная штука Мы конечно все понимаем важность документации вообще было бы интересно написать описание продукта и он сам собой построится и раскатится это наверное мечта всех Ноу кодеров но Николай Поташникова будет рассказывать не про это он Николай руководитель проектов it-архитектор периодически пишет статьи делает доклады и экспертом его докладе будет Иван Пономарёв инженер преподаватель в МФТИ очень заслуженный человек более 20 работает войти пишет код руководит проектами и это будет еще один очень интересный доклад который сейчас начнется Вы снова встретитесь с Сергеем житинским Он передохнул после нашего интервью и уже расскажет в деталях про то как эффективно управлять компанией аутсорсером диопса за сервис те кто слушал его интервью Надеюсь придут и послушают больше подробностей Те кто не слушал его интервью много потеряли Потому что его не будем записи но приходите на Его доклад Также хочу напомнить что не забывайте оценивать доклады Через сети инструменты которые есть на платформе ваша обратная связь очень ценна Ну а я думаю что Лёша на сегодня главная студия потихонечку будет прощаться с нашими зрителями но вернется завтра на второй день Совершенно верно завтра в этой студии ввести второй день конференции будут Андрей Дмитриев и Антон черноусов Он же Антон голодный а мы Я Алексей акапян и Павел Прощаемся с вами но Ждем вас в онлайне в онлайне на следующей неделе первое первый день конференции delops 2022 стремительно приближается к завершению но оставайтесь еще час с нами и слушайте доклады"
}