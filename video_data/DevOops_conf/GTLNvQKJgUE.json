{
  "video_id": "GTLNvQKJgUE",
  "channel": "DevOops_conf",
  "title": "Георг Гаал, Алексей Федулаев — Возможен ли безопасный доступ к сервисам?",
  "views": 480,
  "duration": 2649,
  "published": "2025-01-09T23:30:18-08:00",
  "text": "Всем привет и добро пожаловать на конференцию Меня зовут Алексей дулаев А со мной здесь в студии тот са человек которого вы знаете по многочисленным тикам где он вам помогает Проще сказать наверно в каком чате нет георга вот Георг Привет всем привет Как твои дела Как настрой отлично отлично Я очень рад что у нас сегодня конференция это прямо восхитительно и очень тонизирует супер пушечный и найдут очень много полезного в нём для себя я думаю мы готовы начинать давайте уже перейдём к докладу так сегодня мы будем про ч мы будем говорить сегодня мы хотим поговорить про то что такое безопасный доступ к сервисам И вообще Возможен ли он но для начала Давайте ещё раз познакомимся Друк с другом Я очень рад что сегодня в студии со мной находится Алексей дулаев Лёша наверное один из из лучших специалистов по информационной безопасности в России CL native Security То есть он специализируется по облачной безопасности по куберу и по тому как надо разрабатывать правильно современные приложения он выступал во многих различных конференциях с кучей докладов поэтому он очень сильно контрит В то чтобы сделать мир безопасны через повышение Коша молодец Давай продолжать в том же ты тоже Не отстаёшь со мной Георг Я думаю вы многие знаете его Он часто выступал у нас на конференции с крутыми докладами собственно Георг больше 10 лет в it из них не менее семь в крупных энтерпрайз и финтех вот выступает на международных конференциях и также ещё много участвует в образовательных проектов также он как я уже сказал очень часто помогает вам в разных чатах по куберу по тбу и много ещё чему когда вы приходите со своими вопросами Ну и как раз это тот человек который старается подружить деф ОПС Ну а теперь сюда ещё подключился сек Георг Тебе тоже спасибо за твой вклад собственно о чём мы сегодня поговорим сегодня мы поговорим о следующих вещах во-первых О типичных ошибках которые бывают при настройке конфигурации внедрения систем и как делать не надо лучшие вещи как у Григория остра Как делать не надо а поговорим о том что делать и кто виноват и о том какие у нас стремления и надежды в будущем как к этому светлому будущему прийти и как сделать первый шаг к нему для того чтобы мы могли это всё обсудить нам в первую очередь надо обсудить терминологию Да что такое безопасный доступ сервисам и чем он будет отличаться от не безопасного Ну наверное все могут что-то придумать своё Да но мы как бы с Лёшей остановились на следующих вещах то есть во-первых безопасный доступ тот который мы можем в любой момент времени отозвать То есть у нас может быть ситуация что был какой-то сотрудник администратор системы он уволился И мы не хотим чтобы у него даже был шанс что-то нам испортить Поэтому нам нужно реагировать максимально оперативно и иметь возможность доступы закрыть Мы также должны понимать рабочей системе кто ходил где ходил зачем ходил что он там делал какие изменения вносил это всё позволит нам в случае каких-то инцидентов или взломов понять где мы ошиблись и сделать необходимые исправление Потому что первый шаг для того чтобы исправить проблему её осознать А если мы её не осознали то и исправлять нечего а также мы должны всегда учитывать возможность и необходимость масштабирования сервисов у нас сегодня стартап на 10 человек а завтра этот стартап вырос мы начали оперировать гораздо боль большим количеством сущностей как правило в стартапах ещё всё развивается стихийно Да а не думают о том как делать правильно получается как попало и поэтому лучше делать сразу грамотно масштабируемой и не было в дальнейшем проблем потому что вся концепция нынешней индустрии Shift Left говорит нам о том что лучше предотвращать проблемы чем их потом исправлять Ну и обязательно нам также необходимо использовать принцип Breaking L потому что информационные системы бывают достаточно хрупкими И к сожалению они ломаются и если у нас есть некий сервис для доступа к другим сервисам сломался мы по сути становимся инвалидами мы не можем ничего сделать поэтому нам нужно предусмотреть механизмы аварийного доступа тут должна быть пик с аварийным выходом и молотком как у нас бывает в например общественном транспорте или вы офисах да Когда вы знаете что у вас есть аварийный выход через который вы можете выйти но только в строго определённой ситуации И для этого пишется отдельный регламент и вот собственно нас поха Слушай ге Как ты думаешь Вот какой кровью придуман Ну по-любому кто-то же делал такую защиту которая в нужный момент отстреливая думаю что неоднократно такое случалось здесь Главное чтобы запасной выход не стал задним проходом Простите дуром Так о чем же плох с ну с чего вообще ВС начинается обычно что если мы какой-то стартап Мы идм в облако заказываем пач серверов и по классике начинаем их жить через ssh ещ Не бойся по публичным интерфейсам протокол старый я не знаю ему наверное уже лет 30 да вот и к сожалению он наверное не абсолютен и не самый лучший вариант хотя и очень удобный Почему все им пользуются потому что первое что мы обнаружим что он используется для различных задач он используется как для задач администрирования например там зайти наве Каю конфигурацию применять очень любят меджи аблом через ssh конфигурацию им также пользуются обычные пользователи Да потому что мы сервера же делаем не просто так ну там там могут быть какие-то данные там например да там есть директория пользователя Да он там Хочет выполнять какие-то задачи может быть да и ну то есть здесь получается то что и обычный пользователь тоже могут хотеть заходить на сервер pssh и что-то там делать а е Я уже заметил не только люди пользуются этим протоколом но ещё и различные автоматизации То есть это управление конфигурацией например через N А может быть у нас один сервер заходит на другой копирует файлы Air синком процессы б копирования часто по ssh работают поэтому это получается такой проходной двор которым все пользуются вот ну и Следовательно если у нас есть разный набор того что нужно делать нам нужны и разные роли по сути для Поль для всех вот этих вот сервисов и всего остального А что мы имеем по факту по факту мы имеем проблему потому что в модели линуса по сути лейто особо и нет то есть у нас есть плоский список пользователей который хранится в известном вам системном файле концептуально есть группы для того чтобы обеспечивать доступ к файловой системе Но это классическая модель доступа в Linux Да мы можем е немножко заполировать через SE Linux и например да но технически если у нас развернут какой-нибудь сервис веб-сервис там даже на Local Host за бинде то есть чтобы он не был доступен снаружи то при доступе к серверу pssh мы можем к нему обратиться это конечно проблема потому что если у нас есть доступ к серверу pssh по сути мы имеем доступ Аналогично локальному терминалу на сервере и не дай Бог там есть какие-нибудь например нжб выполняющиеся от привилегированного пользователя и текст которых да ко Job - это же обычно какие-нибудь пинячи скрипты например может изменить обычный пользователь да А Скорее всего в достаточно сложной системе если у вас там много навернуть сервисов сложная конфигурация Обязательно будут какие-то ошибки и злоумышленник если попадёт на сервер сможет ими воспользоваться и прокачать свои привилегии до максимальных это будет беда Угу У меня кстати на канале будет в конце есть как раз вебинар по Linux при сы где мы в том числе и прон джобы обсуждаем Ну и много других техник поднятия вот Ну понятно что по классике это вход по паролям это неустойчиво К брутфорс плюс зачастую пароли бывают простые там админ админ тест тест Root квер и всё остальное собственно так делать не надо Ну и по классике админы обычно думают ух у нас есть пользователи мы влоге видим кучу попыток подбора пароля что же мы можем сделать А давайте мы заним этих пацанов которые из Китая к нам ломятся и пытаются подбирать наши простые пароли а они обязательно их подберут потому что ну обычно пароли простые и ёмкость пароль ограничена вот поэтому ставят такую утилиту как Fail to Ban если коротко Fail toban анализирует Log ssh и прописывает в цепочках IPS правила для того чтобы банить конкретные айпишник К сожалению во-первых это ни разу не эффективно ipes не очень хорошо и быстро работают есть более современные ри и второй момент что ну и баги бывают Я лично сталкивался с таким багом когда прикрывал мне очень стыдно Да нас тогда взломали К сожалению понадеялся на это приложение и ещё проблема что легко таким же образом отстрелить себе доступ некорректная настойка FA практически 100% ведёт к тому что вы теряете доступ к серверу са Да тут е наверно хочу добавить что в принципе Ну не обязательно делать перебор сейчас часто можно мануала злоумышленников найти так называемую технику Password сй когда вот например берут там я не знаю Root Root Root там qt или что-то ещё и одним паролем на кучу сервисов соответственно если у вас такой простой пароль они угадают с первой попытки вам Никакое средство от защиты перебора не поможет поэтому Используйте ещё и хорошие пароли Да следующий этап это у нас защита Давайте да перейдём на ключи Да ssh Ключи А значит здесь ещё такой момент хочу сказать то что по классике вход паролям Почему может быть проблемой что если у нас локальные пароли да то мы встречаемся с проблемой того что нам нужно каким-то образом пароли на каждый сервер Ну желательно делать уникально конечно обычно делают одинаковые да А потом удивляются почему пард спрей работает да А если делать уникально то никакой головы не хватит для того чтобы это всё дело запомнить А если подключен какой-нибудь каталог пользователя то это будет универсальный пароль ко всем службам а вообще в периметре компании там confluence джира и взлом какого-нибудь ssh Ну очевидно что ломают самое слабое звено да вдруг мало ли ssh будет самым слабым звеном то по сути злоумышленник сможет украсть идентичностью какого-нибудь пользователя В общем это беда поэтому Ну логично Давайте попробуем перейти на ssh ключи Но тогда это по сути как пароль только очень длинный криптографический стойкий но мы всё равно сталкиваемся с проблемой как их генерировать как их меджи как их распределять там по тысяче серверов и как их отзывать то есть по большому счёту Ну стало чуточку лучше но не сильно если дальше развивать эту тему то можно пойти и глубже мы можем использовать сертификаты самые обычные сертификаты но здесь есть нюансы и очень тонкие потому что удостоверяющий центр - Это не просто взял вот так чпок и поднял да но возникают вопрос что если мы делаем долгоживущий сертификат его могут украсть тогда в ЧМ разница а короткоживущие но опять же надо как-то их ротировать надо их как-то выпускать надо их как-то предоставлять пользователям Ну в общем тоже не выглядит как пона И что же делать Ну да Пока выглядит так что это не самый эффективный способ Ну тут Наверное стоит сразу обозначить что Луч пароль которого ней поймаю с паяльником в подъезде ты не сможешь его рассказать Вот и Давайте поговорим вообще про какое-то некое текущее состояние а берём какой-нибудь простой сервак Да сервак может быть абсолютно любой этого достаточно чтобы запустить Linux Ну вы понимаете вот а делаем ssh э соответственно ну сервис нам сервак Нам нужен для того чтобы что-то на нём было значит он должен быть выставлен в интернет на нём что-то должно быть выставляем его в интернет э базово под паролем да админ чтобы понадёжнее вот если повез недоступен то есть и соответственно вход по ключам Кстати этот мем в виду последних событий заиграл новыми красками вот а вход по ключам Что делать Да и опять Мы попадаем в ситуацию как отзывать управлять ключами то есть ВМ какой-то мра и тоже расскажу про кейсы жизни как-то я там пришёл на работу как раз мне выдают вку для моих инструментов Ну и там 4 5 я такой что-то как-то подозрительно я скачал по-быстрому и забил про горю там в сети Ubuntu 12 Ubuntu 14 Windows Server 2012 А это было не так давно вот больше чем несколько Ну чуть больше чем несколько лет назад Собственно уже есть готовые эксплойты на метасплоит мы там с админами такой ребята у вас всё плохо начинаем разбираться что это за Тачки они такие а фух это же ничего страшного Это не наша машина это Тачки соседнего предприятия Ну просто они тизи в нашу сеть Вот и тут я фиге Да ну не только сервера можно быстро раскатывать сейчас Ведь все стильно сильно модно молодёжные Да все любят кубернетес кубернетес мы можем запить нашим любимым способом будь то й ми это вообще неважно Да но бизнес хочет контейнеры Ну почему бы ему эти контейнеры не предоставить мы сетам кубернетес мы туда плом приложение получаем Профит как будто бы всё хорошо но вы что запили это кластер А мы в безопасности А что если например вот известный всем Cu Admin файл кто-то угони Да он окажется уволенного сотрудника который захочет нам напакостить или случайно кто-то взломает машинку на которой он находится а всё а мы Приплыли потому что мы этот файл перег нери можем но старый это работать не перестанет и механизма отзыва сертификата нету всё беда И к сожалению вот те проблемы о которых мы сейчас обсудили в различных вариантах построения инфраструктуры будь то это просто uber будь то сервера Будь ещё что-то они только нарастают с масштабом А если мы имеем такую ситуацию что у нас тысячи серверов Во что это превращается то что админ как-то должен всем этим управлять как автоматизировать пользователей Ну самый наивный способ который вообще может быть который приходит в голову администраторам Давайте возьмём какой-нибудь инструмент управления конфигурацией Ну проще всего что взять конечно же anib Давайте напишем роль Давайте напишем PlayBook который будет эту роль вызывать и будем катать её по 1.000 серверов и таким образом мы будем постоянно держать списки пользователей актуальными но к сожалению гладко было на бумаге Да забыли про овраги во-первых это очень быстро становится абсолютно невозможно меджи и Ну например может быть проблема что мы какой-то сервер выключили когда Мы катали наш Script или PlayBook Да и там осталась старая модель доступа А это уже к беде и как нам проверять что модель доступов соответствует тому чего мы хотим непонятно решительно непонятно Ну да ну и ещё с с ростом количество серверов и количеством пользователей менеджери это становится абсолютно невозможно Да как же тогда мы можем выдавать гранулярный доступ Ну в парадигме АБ и ролей нам придётся написать какую-то супер мап супер словарь в котором мы будем сопоставлять пользователи и какие-то ресурсы которым эти пользователи имеют доступ но как я уже сказал это очень быстро превращается в месиво Да и конечно же здесь хочется использовать какие-то уже промышленно одобренные готовые решения которые облегчат нашу жизнь и не нужно будет изобретать закат солнца вручную Угу Ну и первым кандидатом для того чтобы как-то жизнь облегчить давайте мы не будем вести каталог пользователей сами вручную да давайте возьмём готовый и действительно во многих компаниях существует Active directory у многих есть Windows инфраструктура такая достаточно leg си Да рабочие места и поэтому в принципе актив директори со списком пользователей есть для того чтобы интегрировать его с ssh мы можем просто взять и настроить Такой чудесный демон который называется sssd Ну я ещё добавлю что Ну если актив ректори нет то наверняка есть какой-нибудь Google там не знаю asure да там Amazon там ещё что-нибудь там octa какая-нибудь да то есть то есть какой-нибудь до какой-нибудь каталог пользователя компании всё равно от кадровиков вы получите Ну да ставьте плюсы плюсик в чат кто осилил sssd не то что он очень сложный но просто интересно А давай тогда пойдём дальше собственно А ещё у нас скорее всего на предприятии зачастую может быть та самая плоская сеть Да когда все сервисы имеют доступ ко всем сервисам и нет нормальной какой-то сегментации вот а ещё есть сами непосредственно сервисы соответственно в случае плоской сети у нас что происходит у нас происходит такая ситуация что подламывается Тия и так как доступ никак не граничен по сути что мы имеем потенциальный доступ ко всем остальным сервисам то есть вот у нас спокойное перемещение по предприятию вот а какие проблемы вообще сервисами есть Ну я бы наверное добавил бы предыдущему слайду что какой-никакой маленький сервис был бы его всё равно нужно ТМ проблемой Завтра может стать огромной проблемой и опять же этим лучше заняться и без сервисов Мы конечно жить не сможем потому что вот вся наша индустрия построена на том что у нас есть пользователи пользователи хотят пользоваться какими-то нашими услугами мы Для этого эти сервисы пишем как правило эти сервисы какие-то http Web там не знаю rest API Да а они для того чтобы быть доступным пользователям должны быть опубликованы и они публикуются или в публичный интернет или по внутреннюю сеть предприятия Угу и очень часто из-за неправильной конфигурации сервисы для интернета начинают быть доступны напрямую из интернета и очень часто в каких-то сводках можно увидеть что из-за неправильной конфигурации то какая-то банка начнёт торчать в интернет То эластик то ещё что-то через это частенько и сливают компанию вообще проблемы с с мис конфигурацией очень серьёз сейчас в мире стоит Да дополнительная Вишенка на торте очень разработчики вообще не понимают как сервисы работают и если им дают вообще доступ для того чтобы что-то задеплоить потому что бизнес хочет быстрее они например сервис развёртывать просто по http без какого-либо шифрования и это очень большая проблема потому что ну если плоский ТТП А сервис например с авторизацией там есть какие-то пароли там ролёвка да то можно снить прочитать весь трафик и он будет открыт всему миру и это ещё полбеды потому что это трафик может быть перехвачен и модифицирован злоумышленником пока он не дошёл до сервиса в общем без тлс сейчас жизнь прямо очень опасная Ну соответственно Да по сути всё что мы делаем Это может видеть и Бывают такие случаи Я как безопасник такой встречаю когда Ну мы это сделали по http потому что это торчит внутреннюю сеть ну компании соответственно это же не видят пользователи снаружи но в случае как раз плоской сети ВС будут видеть вот ещ часто сервисы Какие торчат бес пароль да без аутентификации ну или в случае мис конфигурации начинает торчать тут я думаю даже обсуждать нечего либо используются какие-то дефолтные Кред прям очень большая проблема потому что А тут сейчас внутри создадим по-быстрому тест тест и всё хорошо также ещё в сервисах могут быть и какие-то уязвимости вот как раз недавно на конферен эсва окно ввода загружая P мы получили Root на сервере Ну и есть ещё такая история что у многих сервисов есть дополнительные энпо например endp для сбора Рик для проу его конечно же не закрывают никакой защитой и эти эндпоинты они могут помимо того что просто предоставлять дополнительную информацию для взломщика они могут каким-то образом модифицировать поведение например это может быть ручка для руки конфигурации и сервис Можно например задудосить снаружи Поэтому нужно внимательно смотреть на то что это за сервис и его комплексным образом закрывать от несанкционированного доступа снаружи А что делать-то на как там ваша заявка принята со статусом пупу И для этого есть решение для того чтобы закрывать доступ к сервисам есть целый класс программных средств под названием па если это аббревиатура расшифровать то это будет priv Access Management То есть это системы которая позволяют контролировать доступ ограничивать его в первую очередь административный Ну да ну и собственно пам - это когда мы не доверяем никому и как раз это та самая концепция минимальных привилегий если всё правильно приготовить Что такое пам Ну как я уже сказал то что пам - это программный комплекс который обеспечивает безопасный доступ к системам в первую очередь Нам необходимо лимитировать административный доступ потому что он несёт максимальное количество рисков да то есть администраторы систем могут вносить изменения в конфигурацию они могут иметь доступ к каким-то данным которым обычные пользователи не имеют доступа и всё такое то есть в целом в первую очередь это про административные вещи но в том числе пользователей тоже можно через них через spam пускать Ну например предоставляя доступ там не знаю к фане с дашборда там или какому-то прикладному приложению другой вопрос что здесь нужно всегда взвешивать Будет ли это слишком дорого и неудобно потому что безопасность и удобство как правило а смотрят в разные стороны и конфликтуют друг с другом Ну и одно из Классик решений для пам является решение под названием Cyber это что-то на энтерпрайз если перевести на русский получается Кибер Ковчег думаем что как будто бы всех поместив коче мы всех спасём Вот но фактически у этого решения очень длинная история модульная структура но если мы маленький стартап на 10 человек скорее всего внедрение киберкор нас просто угробит мы можем посмотреть на диаграмму развёртывания увидеть то что в нём куча различных компонентов это ВС друг с другом взаимодействует и конечно же может оказаться что то что мы защищаем Оно просто По ресурсам меньше чем вот собственно горя сама защита это будет конечно выглядеть немножко странновато но если вы Прай у вас много денег то можно попробовать и давайте сейчас с вами разберёмся Да что у нас должно быть в хорошем савое что этос конт Кто куда может ходить может ли вообще ходить и соответственно Кто куда не должен ходить вторая важная вещь - Это аудит то есть понимать кто ходил зачем ходил когда ходил и Чем более глубокий более детализированный аудит мы получаем тем лучше потому что нам же ведь хочется не только получать события о том что кому-то был предоставлен доступ Да но и желательно с максимальной детализацией это помогает в определении того как пользователи работают и в случае инцидентов позволяет максимально точно понять что же произошло в прошлом и кто в этом виноват также в паме очень желательно иметь модель когда у нас доступ не постоянный да то есть не 24 на 7 а доступ мы получаем к ресурсам на базе запроса доступа для этого создаётся какая-то заявка может быть в автоматизированном режиме или в полуавтомати нам а и доступ к ресурсам мы получаем только тогда когда нам необходимо с ними что-то а какие-то произвести действия по служебной необходимости ещё очень важно чтобы в хорошем паме была интеграция с каталогами пользователей в конце концов действительно мы же не будем в нём пользователей заводить руками как же мы будем отлавливать события Что например пользователь перешёл из одной команды в другую что пользователь уволен Пускай этим кадровики занимаются и у них будет какая-то мастер система тот же или ОК или что-нибудь подобное где будет каталог пользователей с их актуальным назовём так состоянием и оттуда мы сможем эту информацию забирать и внутри пама уже правильно накидывать доступ к конкретным информационным системам для этих пользователей но также ещ важно понятно что наличие двухфакторной либо многофакторной аутентификации бы нельзя всё это дело было обойти ещё хотелось бы наличие zerust Network Access То есть когда по дефолту мы не имеем возможности попасть никуда и возможность доступа у нас как раз определяется не сетевой доступностью а наличие у нас там в конкретной группе и возможности доступа туда ещё очень важный фактор как Short Living Case соответственно даже если вдруг каким-то чудесным образом ключ Уте у него короткий срок жизни и злоумышленники не смогут им воспользоваться и что получается то есть если мы посмотрим на какую-то классическую организацию то у нас получается что есть как некоторая вот это вот Цитадель да то есть у нас есть вот эти вот кольца защиты по сути эшелоны обороны но в каждой из этих эшелонов по сути У нас есть такой как бэкдор да то есть всё-таки есть лазейка как туда можно попасть и Основной отличительной чертой что будет то есть при попадании злоумышленника вот в этот ну там сетевой сегмент систему что-то ещё у нас компрометирует полностью вот этот Эшелон обороны и соответственно в каждом эшелоне обороны обороны что-то такое есть туда можно попасть Поэтому да защита есть Да есть разные эшелоны но это не совсем эффективно что же в случае пама Я бы добавил бы то что в случае вот с с цитаделью Да она даёт некоторое ложное ощущение уверенности Потому что если король сидит в своей башне в замке Да он думает то что его никто не возьмёт и тут выясняет Ну и поэто бы внутри вот этих вот зон безопасности часто не делают какие-то дополнительные контроли и получается по сути как картинка Предыдущая с плоской сетью да то есть на наружи доступ не получить но если мы прорвались внутрь то всё как бы беда полная Да и в этом отношении Цитадель конечно создаёт ложное ощущение безопасности что если мы построили Эти стены то всё хорошо на самом деле нет И мы сейчас посмотрим как на самом деле должна выглядеть инфраструктура а Должна она выглядеть наподобие подводной лодки то есть подводной лодки есть у нас различные секции ячейки если какая-то ячейка была скажем так повреждена её затапливает водой мы е изолируем и подлодка продолжает дальше плыть И никаких проблем у нас не возникает Конечно такой подход выглядит более сложным но как видите подлодки плавают и он доказывает свою жизнеспособность цитадели Да цитадели не осталось у нас уже в реальном мире да то есть а подлодки есть Вот вам и аргумент А и Давайте посмотрим какие решения есть на рынке Ну первое решение о котором мы вспомнили от безызвестный компании ши автора таких утилит как фом называется бан бан по сути представляет собой некий прокси сервер который можно развернуть в различных сценариях отказоустойчивых А и он перехватывает все запросы к ресурсам которые мы защищаем это позволяет строить различные топологии ну нормальная схема классическая и мы в дальнейшем увидим то что другие решения примерно её и э имплементировать схема развёртывания выглядит примерно так же из особенностей которые сразу видны что поддерживается различный набор сервисов начиная от ssh кончая RDP и можно даже закрывать веб приложение поэтому мы его тоже взяли в рассмотрение и дальше мы поговорим более подробно о функционале третье решение которое нам показалось интересным это решение под названием inf HQ о котором сам производитель говорит то что это решение для аутентификации и предоставления доступа к серверам кластерам и базам данных К сожалению оно уже немножко перестало развиваться внутри него реализован подход с кротко живущими сертификатами Я очень надеюсь что в будущем эта разработка не будет заброшена кто-то подхватит её и доведёт До ума вот что у нас е есть Алесей следующее решение - Это здесь похожи это некая прося которая как раз и будет управлять этим всем доступом очень схоже ещ интересное решение Open Source это вот но собственно это они больше концентрируются на доступе кубер его мы тоже посмотрим что он имеет и так ещё из одних решений это тоже немножко другой принцип это по сути средство управления VPN тоннелями Вот и они уже прокиды как раз туннели для доступа вообще сейчас ну мы одно из таких решений Посмотрим сейчас на Bird появился ещё какие-то я видел решения То есть в принципе такие решения тоже постепенно завоёвывает рынок а будет пам Beyond Trust тут кстати не поленитесь Зайдите на сайт сайт Сделан вот продажника там нет никакой полезной информации кроме того что это там один из лучших памоат это собрать с сайта и последним решением что мы взяли это Cloud FL Tunnel это тоже немножко будет как бы другой класс решений но по сути это взаимодействие Cloud FL Network и прокиды туннелей к вашим серверам Я хочу добавить по поводу CL это ние достаточно интересно потому что оно не просто лиет трафик но в том числе и Бет какие-то функции определенные по Например если мы говорим про ssh генерации сертификатов То есть как раз та штука которая позволяет сделать безопасный доступ ssh Несмотря на то что вот в первую очередь оно именно про туннелирование не как бы менеджмент чего-то другого ист вот здесь можно посмотреть сделать скрины либо потом скачать нашу презентацию посмотреть собственно здесь мы оценивали Open сорс или проприетарная бессплатно или там за денежку и многие как раз и бесплатные за денежку с дополнительным функционалом наличия поддержки Ну и здесь пока рассмотрен доступ к сервисам Да я хочу сказать что из этой таблицы видно что решения бывают абсолютно разнообразны Но конечно всегда приоритете те решения которых с открытым кодом Вы можете посмотреть как они работают они не представляют собой чёрный ящик в котором могут быть кдо мало ли там у кого-то Параноя Да там эти решения стучат производителю рассказывают как их используют там не знаю логи передают с паролями ещё что-нибудь такого план И кстати говоря это реальная проблема потому что мы помним что что может быть более безответственно и беззащитного чем средства безопасности которая скомпрометирована и были Множественные скандалы и там со и по-моему Last Pass Да там взламывали пароли крали поэтому вопросы безопасности они всегда очень серьёзные и нужно очень взвешенные аккуратно подходить к выбору решения А ну и очевидно что интереснее начинать с решений которые бесплатные имеют максимальный функционал к сожалению у нас не было возможности провести пилоты по всем решениям поэтому часть данных по таблице мы заполняли на основе личного опыта часть по опыту коллег и часть например как в случае СН на основе документации которая доступна поэтому таблица может быть местами не очень точная но в целом отражает ситуацию из неё можно сделать определённые выводы да А ну собственно Вот такая у нас получилась немного сравнительная таблица по сути мы остановились на одном решении вот зависимо причём да то есть внезапно Да так так получилось то что разными путями мы всё равно приходим к решению под названием Телепорт Почему во-первых Потому что его можно использовать бесплатно Если вы используете его для себя не пере продаёте наружу это Open Source берите разворачивайтесь первая проблема что нет синхронизации пользователей то есть Есть конечно же коннектор хабу но нет коннектора ни лабу ни ЛПУ ни к Active directory ни к чему то есть получается то есть бесплатной версии Вы вынуждены заводить пользователя Если речь идт про 10 администраторов систем Это не проблема но если у вас там например 100 или 200 Вам нужно будет либо готовить бюджет либо писать какую-то автоматизацию в принципе это не очень сложно Телепорт написан на голанг поэтому сколь-нибудь средний инженер сможет эту задачу реализовать второй момент который достаточно важный что в бесплатном телер нету то есть мы не можем делать то что можно назвать доступ да то то есть доступ по запросу Вы если накидывает ролику в Телепорт то пользователь имеет доступ к сервису на постоянной основе в принципе и даже с этим можно жить но для серьёзного энтерпрайза это может быть не очень удобно или приемлемо Ну тем более что всё равно aud доступа вы получите Если же идти в платную версию то для маленькой компании это может быть просто очень дорого потому что примерная стоимость Ну очевидно что надо запрашивать конечно же квот получается в районе 10.000 евро на 10 пользователей за год и конечно же эта сумма с каждым годом будет увеличиваться А ну инфляция там всё такое Ну кстати я видел на одном из сайте агрегаторов Там средний чек 58 что ли тысяч Ну видимо это много пользователей Да наверное много пользователей много функционала а и чем больше компания тем конечно же дороже это выходит любой Да поэтому Почему опять же при Man потому что для закупки на обычных пользователей это получается просто кроваво дорого вот Давай двигаться дальше что у нас ещё есть платной версии В платной версии У нас конечно же есть всякие шифры типа fips comp P dss и прочими стандартами и конечно же это может быть очень актуально для каких-нибудь тезов интех регулируемых окружений и это может Вас реально спасти поэтому считайте ваши деньги думайте Нужно ли это вам и сколько будет стоить не только внедрение но и поддержка решения на долгосрок да И почему же тогда получается на рынке нет нормального продукта Ну очевидно потому что разработка пам - это не просто дорого Это очень дорого так как нужно нанимать очень талантливых и квалифицированных инженеров которые понимают безопасности понимают криптографии можно просто написать пам за о день да который мог бы работать продолжительно долго и предлагать его нормальным клиентом то есть здесь как бы цена в каком-то смысле оправдана вот это ещё дорого с точки зрения ресурсов потому что это дополнительная коробка которая там не знаю кушает диск кушает память её сложно поддерживать В общем это реально дорого из свойство у на есть сервисы которые защищать надо очень разные Вот лш вот что ты по этому поводу можешь расказать Ну да как мы уже видели по необходимости доступа и по сравнительным табличкам То есть у нас есть потребность к получению доступа в кластера кубер ssh это может быть какой-то межсервер межсервисный взаимодействие доступа к базам данным па соответственно каждая компания в этом плане наверно может быть инду у неё могут быть свои запросы и То есть даже среди в таблице среди вот сравниваемых продуктов не все обеспечивают вот этот базовый набор Я бы так бы сказал и что мы видим сейчас на рынке что компании берут Ну по сути комьюнити Телепорт и допили под свои нужды Что именно допили Вот как раз то самое нормальное там синхронизацию с какими-то каталогами Ну и все остальные внутрянки но и минусы по опыту использования То есть например у нас есть как раз телепорты можно поискать есть у ребят доклады вот основные минусы использования телепорта Агент ная архитектура построенная на реверс тоннелях в большой компании число этих агентов становится невыносимо большим Ну то есть представьте себе у вас там десятки или там сотни тысяч хостов и ко всем например нужен не только Хов Игого раз Тай доступ а при потере соединений получается все агенты начинают котиться обратно в кластера соответственно кластер сам себя ддосит в попытках переподключиться и это растягивается Ну достаточно сложную систему Как сделать так чтобы Телепорт не падал при попытках восстановиться А ещё есть баги с количеством ролей алгоритмах перебора обладает линейной сложностью соответственно когда у ва раст количество ролей например сколько там например у вас есть там 10.000 ролей это уже огромная проблема вот и Чем больше тем дольше подключается агент по факту мы имеем ещё менеджмент ролей он не очень прозрачный не самым удачным образом сделанный то есть Поэтому да компании берут Телепорт пытаются допили есть Проблемы есть проблемы Ну а которые скажем другие рения либо сам платный Телепорт они стоят неимоверное количество денег и то сейчас наверно нельзя купить у нас здесь Давайте перейдём к выводам время у нас заканчивается а сетевая сегментация она не даёт нам нужного уровня безопасности как мы уже обсуждали на примере цитадели а пам нам по сути даёт гранулярный и контролируемый доступ что едо делать безопасно сразу в лучших традициях Shift Left Потому что если мы отпустим всё на самотёк то потом стоимость переделок будет очень высокая если они вообще будут возможны И это прямо Пета Ну да Поэтому потом это будет дорого и очень больно ещё потом будет если вообще возможно Как правильно Георг сказал собственно на этом наш доклад подходит к концу Спасибо задавайте ваши вопросы в чатик я сечас их смот из всех этих по есть осные разработки Нет ну может и появится в ближайшем времени как как отмечал Георг сделать спам это не задача одного дня ещ ещё не успели скопировать и переделать есть исходники на гитхабе с допи Телепорт я думаю вряд ли надо сделать и выложить Всем спасибо Приходите дискуссионную Спасибо большой за доклад увидимся в дискуссионной зоне"
}