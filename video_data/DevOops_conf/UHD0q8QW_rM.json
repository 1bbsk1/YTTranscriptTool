{
  "video_id": "UHD0q8QW_rM",
  "channel": "DevOops_conf",
  "title": "Алексей Федулаев — С какого конца начинать безопасную разработку",
  "views": 432,
  "duration": 2832,
  "published": "2023-05-29T06:38:10-07:00",
  "text": "Так ну Всем привет давайте для начала представлюсь меня зовут Моисеев Андрей Я работаю в компании инфотекс и занимаюсь внедрением Практик безопасной разработки в частности их адаптации к процессам компании со мной сегодня в качестве докладчика Алексей здороваюсь Алексей привет всем Да и сегодня мы будем говорить про то с чего начинать безопасную разработку мы подсветим насколько это важный процесс и как его начать грамотно Давайте не буду отнимать много времени и передам слово Алексею Вот это начнет всем еще раз привет Привет Меня зовут Алексей федулаев Я уже 11 лет занимаюсь более 11 лет в информационной безопасности и сейчас работаю На позиции DC Ops в компании бимейстер собственно я занимаюсь внедрением безопасной разработки адаптации этих Практик для нашей компании хотел сказать что в своем докладе Я не претендую на абсолютно истину все продукты разные у всех продуктов могут быть определенные потребности определенные угрозы соответственно это стоит учитывать при применении того что я сегодня Вам расскажу Итак О чем сегодня поговорим вообще мы пройдемся Зачем нужна безопасная разработка мы поговорим о практиках безопасной разработки выделимых особенностей и показания к их применению обсудим важен ли только наш код соответственно попробуем совсем чуть-чуть взломать gitlab и попробуем все-таки ответить на вопрос С какой стороны стоит начинать безопасную разработку вот так запасная разработка безопасная разработка для чего она нужна она помогает сделать наш продукт более качественным она помогает нам выявить ошибки на более ранних этапах нашего продукта никак в некоторых компаниях у нас принято мы выкатываемся ловим какие-то баги откатываемся всю ночь пытаемся фиксим снова выкатываемся собственно это помогает гораздо раньше устранить и Давайте посмотрим как это выглядит на экране изображен вариант зрелой модели безопасной разработки и Как видите тут все очень просто на самом деле это большой комплекс инструментов и процессов и только взгляните на эту карту метро незнакомого города Глядя на все это вообще сложно понять куда здесь смотреть с чего стоит начинать и многие компании начинают небезопасной разработки со статического анализа исходных текстов ну оно и понятно сост Это самый распиаренные решения на рынке Вот мой опыт тоже подсказывает что многие компании начинают внедрение безопасной разработки саста Андрей что подсказывает твой опыт сейчас секунды поднимусь Да действительно мы своей компании тоже начинали с статистического анализа и анализа заимствованных компонентов мы параллельно делали эти обе активности и Это довольно таки затратный процесс особенно стационализ дальше Алексей покажет насколько это затратно исправлять ошибки которые были найдены вот а в целом Наверное ты прав да Наша компания это как пример того что начинает то что тот анализы Ну и наверное это Понятно Потому что ошибки в основном как бы в своем коде они ближе тебе для исправления как мендеру Ну давай тогда уйду действительно нужно задать себе вопрос А стоит ли начинать безопасную разработку именно с такого класса решений и давайте сейчас рассмотрим несколько примеров различных инструментов анализа и Посмотрим попробуем определить что же все-таки скажем так проще будет и удобнее в начале хотелось бы сказать по использованию инструментарию в основном мы будем использовать бесплатный сорт инструменты мы будем использовать программы из пакета gitlab Community Edition также мы будем использовать инструментных Долин до клиента сечек Почему выбор Пал на gitlab Я думаю многие из вас знакомы с гитлабом по крайней мере слышали во-вторых Мне очень нравится подход внедрению инструментов безопасности за счет простоты и низкого порогов вхождения А в самом начале безопасной разработки Наверное это то что нам как раз и нужно и еще будет немножко показана это тоже платный пакет Почему значимое отличие бесплатного Get Lab от gitlab Ultimate это представление данных то есть в случае бесплатного слева на слайде вы видите мы будем получать от анализаторов данный виджет он файлов не очень удобно сегодня для демонстрации представления в платным же гитлабета все красиво выводится VII как представлена справа соответственно на чем мы будем тестировать для сегодняшней демонстрации Я подготовил три уязвимых приложения в которых содержится большое количество уязвимости именно них мы будем направлять наши сканеры Это вас джусишоп Это чертовски уязвимого приложения и Моё самоответственное приложение на джанга и Давайте попробуем на них различные практики начнем Естественно С классики Да статического анализа то есть статический анализ это по сути анализ исходных текстов по паттерном различным в коде и позволяет находить дефекты на ранней стадии продукта более того Вы сможете находить дефекты Когда у вас даже еще нет никакого исполнения файла у Вас могут быть какие-то разрозненные куски которые никак не еще не объединены в какой-то работающий функционал и соответственно вы уже можете к ним применять статистический анализ и находить уязвимости естественно такого метода есть и обратная сторона это огромное количество falls-позитов с негатив и если с falspositive это То есть можно положительно Когда в нашем коде нет уязвимости но сканер говорит что она есть и достаточно всего лишь перепроверить и подтвердить что ничего там страшного нет то все интереснее сполз негатив То есть когда в нашем коде есть уязвимость а сканер нам это никак не подсвечивает при этом нужно понимать Да что саста это не стопроцентной гарантии нахождение всех уязвимостей в вашем коде давайте рассмотрим пример если брать инструкцию gitlab там у них выглядит Все просто соответственно мы соответственно с инструкцией создаем нашему репозитории файл gitla вся яму либо если он уже нас есть мы добавляем туда вот этот шаблон и собственно все если загуглить вот эту строчку шаблоном в первых двух ссылках мы как раз Увидим что же содержится в этом шаблоне сможем понять что мы подключаем давайте так и сделаем Соответственно что мы будем подключать в шаблоне Мы видим что объявлено в сад и расширяющие джобый То есть у нас Джобс Астана лазер будет расширять ее в свою очередь со стон лазер расширяют различные жобы самих анализаторов внизу на экране мы видим как раз один из анализаторов это бандит вот вообще там содержится множество разных анализаторов они для разных языков программирования выбор анализатора происходит автоматически то есть определяется какого расширения исходники есть в вашем репозитории и уже автоматически выбирается сканеры еще Обратите внимание что по умолчанию у нас стоит Stage тест и не указан так executera соответственно я использую специфик ранера поэтому нам нужно будет определить Джобс мы Давайте переопределим Stage укажем вместо теста чек не определим так execuitter вообще в принципе Вы можете переопределить любые строки из дополняемого шаблона соответственно добавили все это пушим код в репозитории и Давайте посмотрим что у нас получается Мы видим что у нас запустили сканеры причем сразу запустилась 4 сканера и успешно отработали если покопаться в шаблоне мы можем найти все эти сканеры и можем найти Какие для них параметры и Давайте попробуем поменять какие-то параметры сканеров смотрите здесь мы объявляем переменные допустим клюют аналайзер мы исключаем анализатор бандита из нашего анализа также еще исключаем папку сам пав Ну это может быть полезно Когда в вашем репозитории содержится код который не участвует в финальном билде продукт это могут быть какие-то тесты какой-то вспомогательный код для билда и что-то такое соответственно объявленные вот эти переменные они будут распространяться на все анализаторы и составы шаблону saas потому что мы в нем объявили в принципе мы можем кастомизировать и какой-то определенный анализатор давайте так и сделаем здесь мы видим что уже Мы не для саста определяем эти переменные для сканера 7 греб соответственно также исключили директорию сам пав из анализа и объявили версию анализатора Это тоже может быть полезным некоторых случаях ну и соответственно все далее рассматриваем сканеры они могут быть кастомизированы схожим образом мы на этом сегодня сильно заострять внимание не будем и давайте уже посмотрим результаты Как видите мы нашли более 2000 уязвим все различных Да как мы уже ранее сказали часть из них могут быть fallspositive соответственно все это требует перепроверки плюс некоторую зимость они могут не иметь Вектор атаки То есть их нельзя будет до них никогда браться и при эксплуатировать собственных Можно либо не исправлять либо можно уже исправлять в последнюю очередь так как они не представляют угроза вообще то есть для saas это достаточно сложный процесс и требуется корректировка правил Где вы сможете менять паттерны То есть если вас каждый раз что-то Фолз позитиве ты срабатывает Вы можете найти это правило которое срабатывает уже подкорректировать применительно к вашему продукту примерно также обстоят дела из Фолз негатив но за исключением что вы должны знать что там есть уязвимость что сканер ее не находит и вы сами должны написать паттерн передам еще слово эксперта Спасибо Алексей Сейчас секундочку да Ну во-первых хотел сказать что есть qr-код Если есть какие-то вопросы можешь зайти в чатик и задать их наверное уже у кого-то возникли и Да у нас результаты стад анализа показали порядка 2000 уязвимостей Но это продукт был тестовый и мы отключили некоторые кастомизировали наш сад чтобы он выдавал меньше результатов если они были не нужны например да на реальном же проекте на зачастую очень много исходников может быть даже ситуация когда мы ядро линукса пересыбираем и тогда результат статического анализа будут говоря плачевные будет порядка десятков тысяч уязвимостей которые надо будет верифицировать исправлять никто наверное не будет этим заниматься и они будут пытаться как-то ну эти гейт Ну что ли обосновать что они не применимы или тому подобные меры принимать Ну тогда передам тебе слово обратно Спасибо Да при этом еще стоит учесть что тут мы анализировали скриптовый язык соответственно внедрение сканера было достаточно простым то есть случае если ваша анализатор будет требовать на вход как-то специально сбил женой бинарный файл либо еще какие-то дополнительные действия то имплементация может оказаться сложнее и говоря про ошибки соответственно Чтобы исправить Эти ошибки нам нужно какой-то код удалить какой-то код заменить какой-то код переписать Это значит что вместо старого кода с ошибками мы привнесем новый код в нем тоже потенциально могут быть ошибки соответственно тут процесс одним вот так вот исправления не заканчивается то нужно будет делать новый и снова да то есть мы исправили тот код потенциально содержит ошибки мы просканировали были выявили новые и так далее но предположим что вот мы прошли все вот эти вот круги и полностью исправили все возможно ошибки в коде соответственно Все ли на этом решены ли все проблемы нашего продукта Нет не решены статический анализ нам помог найти исправить ошибки в коде Но на этом безопасность не заканчивается То есть если мы видим на проведенном примере у нас некий секрет кей представлен в коде да И причем указаны комментарии что это продакшн секрет то есть найти такую уязвимость гораздо проще чем попытаться Найти какие-то ошибки в коде особенно если она у вас лежит например в открытом репозитории в гитхабе либо как-то возникает передается на клинсайт либо такие ключи можно вытащить реверс инженерингом соответственно сами судить пытаться найти какие-то дефекты в коде пытаться как-то написать к ним эксплойт да то есть по сути найти Зера дей и написать к нему эксплоид это гораздо сложнее если ключ лежит вот так вот на открытом месте Вам нужно попасть в Дом у вас около дома около двери лежит ключ как бы вы же не будете делать да руками подков снизу там через бетон просто пробраться соответственно Передаем здесь привет Тойоте как раз то ли они недавно попались на такую уязвимости в одном из их продуктов в репозитории github в открытом виде лежал такой ключ и в течение пяти лет к нему и потенциальный злоумышленники имели доступ к этому ключу и ко всем данным этого приложения у Toyota Как избавиться от таких ошибок есть определенные класс инструментов то есть аудит секретов коде секрет detection они позволяют как раз находить такие секреты соответственно Давайте взглянем на имплементацию инструмент называется getlix Он входит в состав пакет лаба здесь подключаем только уже немножко другой шаблон Да Обратите внимание секрет detection И по аналогии также объявляем Stage и executer и Давайте посмотрим результат сканирования и мы видим что в наших тестовых примерах был успешно найден закрытый рыса ключ в коде соответственно пока еще не ясно Для чего он используется но в любом случае это уже повод для разбирательства анализа потому что все мы с вами знаем что в отличие от Открытого ключа закрыта ключ он должен храниться в секрете То есть он не должен быть известен третьим лицам здесь стоит обратить небольшое внимание что идеальных сканеров не существует и гитлекс принципе не исключение то есть понятно что он уже работает из коробки но будет он искать скажем стандарты ключи Да там Кредо то есть какие-то Кредо токи над gitlab github что-то такое если ваш продукт использует какие-то кастомные не стандартные не типичные ключи понятно что гитликсах не найдет и собственно Тойоты погорел то есть у них был свой ключ который у них был это средство у них были нетипичные ключи которые средства не детектило то есть в этом случае точно также требовалось кастомизация поставил чтобы паттер находил именно те ключи которые они используют возвращаемся все-таки Get Lexus То есть как видите мы потратили скажем так пару минут трудозатраты на внедрение минимальны но при этом Impact очевиден то есть появление таких ключей ваших исходных текстов могут грозить полной потери контроля над инфраструктурой и соответственно полной утечки всех данных но и возможно возможно стоит начинать например внедрение безопасной разработки именно с такого решения с поиска секретов допустим и тут мы все исправили что дальше сейчас очень популярна контейнеризация приложений и соответственно такой подход имеет собственные проблемы с безопасностью о которых о которых много многие забывают Вот и хотел бы отметить достаточно простую утилиту это ходоленд по сути это линтер докер файлов который позволяет еще даже также на этапе кода выявляется различные проблемы с безопасностью вот на экране представлены имплементация этот инструмент уже не входит в состав пакета gitlab и соответственно здесь мы просто дополнительно указываем скрипте натравливаем тулзу на наш докер файл что покажет сканер В результатах Мы видим что мы получили предупреждение и по сути без практис по написанию докер файла ничего критичного ходалинд не нашел но однако все Могло быть хуже То есть у нас например в каких-то контейнерах какие-то контейнеры могли исполняться от Рута и в дополнение к уязвимостям которые могли быть в операционной системе в пакетах уезда доставляемых библиотеках это позволило бы злоумышленнику полностью захватить бы контроль над контейнером Ну а контейнер у нас же существует не вакууме он с кем-то общается и соответственно это был бы плацдарм Для дальнейшего горизонтального продвижения по такому продукту Вот Но а где-то контейнеров не заканчивается докер файлом docker файлом собирает готовый образ и готовые образы тоже нужно анализировать что аудит уже собранных образов он расширяет перекрывает расширяет возможности ходолин и позволяет выявить некоторые ошибки которые невозможно выявить на этапе докер файла Давайте посмотрим Будем здесь использовать утилиту докли внедрение чуть сложнее но все равно достаточно простой да то здесь мы уже дойки рандокир используем код распаковки но по факту мы для утилита указываем за ссылку на реджестре здесь Я использовал стандартный докер хаб Но это может быть абсолютно любой это может быть и встроенный вид Lab register это может быть ваш любой сел Хоста да то есть там Nexus Harbor что угодно и по факту утилита стягивает ваш собранный образ и послойный его анализирует что В результатах мы видим Мы видим использование пустого пароля также мы видим без практики по написанию и мы видим наличие подозрительных директорий и Обратите внимание на директорию а точка гид Что такое директория точка гид по сути это Лог всей нашей разработки с момента инициализации репозитории и такие файлы не должны попадать в контейнеры какая-то может быть проблема Я думаю все из нас когда-то начинали разработку какого-то продукта соответственно на начальном этапе когда еще нет толком нормальной инфраструктуры когда они развернуты всякие вспомогательный инструмент зачастую Что делается для ускорения разработки на хартхозим пароли для доступа как-то учимся чтобы это все уже общался можно было потестить Да мы потом это убираем из исходников где это остается правильно в истории Гита и собственно несколько достаточно крупных взломов так и произошли у людей был и гитар был вот эти креды они их не поменяли собственно злоумышленники проанализировали историю Лога Гита и вытащили их и взломали Все ли на этом с контейнерами Нет не все в контейнерах мы используем базовый образ операционной системы которая будет исполняться Ну тогда доставляем пакеты мы доставляем туда библиотеки они все тоже могут содержать уязвимости соответственно если мы даже вот все что до этого обсуждали мы исправили но у нас сам самокружение контейнер уязвимы взломать наш продукт не составит никакого труда то есть опять же опять напоминать Что гораздо проще про эксплуатировать уже известную зимость для которой Возможно есть готовый эксплоид либо там это можно как-то найти чем пытаться искать Zero Day в вашем коде для этого используется инструмент trivi Он входит в пакет лабы все так же просто подключаем шаблон указываем переменную docker Image где указываем наше реджи стрипуть и непосредственно сам образ и стягивается наш образ из registry и анализируется пушим наш код смотрим на результат на наших тестах было найдено более 1000 уязвимостей при том что это уязвимости вообще никак не относящиеся к нашему коду Да это известный и подтвержденный уязвимости при том что часть из этих уязвимость она может быть исправлена я думаю многие из вас знают что Бывают такие случаи когда разработчики Достаточно долго не исправляют уязвимости она вас просто может быть висеть соответственно опять же часть из них могут быть уже готовые эксплоид их можно найти поэтому тут скорее всего я бы рекомендовал бы не перепроверять А тут сразу Можно перейти к исправлению то есть в идеале у вас должно показывать 0 уязвимости как случае с другими инструментами как сост это результат уже можно не перепроверять и сразу пускать вход но и сами контейнеры они существуют не вакууме а контейнеры где-то разворачиваются и Сейчас последнее время популярная тенденции это авторазвёртывание инфры да это инфраструктура как кот но инфраструктура как кот это тоже код А значит что в нем могут быть ошибки могут быть уязвимости соответственно существует класс инструментов как раз для анализа инфраструктуры кокот и рассмотрим имплементацию одного из них это kicx также входит в пакет лаба Вот то есть как ранее мы подключаем шаблон пушин код нашей репозитории и видим что у нас нашлось много разных уязвимостей причем Обратите внимание здесь уже Нашлись и уязвимости в докер файле что у нас контейнер выполняется от Рута здесь присутствует и поиск секретов манифестах да то есть тоже специализированный инструмент и тоже должен использоваться для поисков секретов То есть у нас же часто используют дефолтный пароли про развертывание инфра особенно опять же если где-то нужно было быстро срочно это как Legacy осталось перекочевала либо не было уделено этому должное Внимание В отличие от предыдущих инструментов он анализирует докер компус соответственно там можно будет обнаружить какие-то проблемы и аномалии и что обычно представляете себе слыша как взломали очередную какую-то компанию какой-то приложение Обычно люди думают что вот нашли какую-то там ошибку именно в их программе в их сайте как-то смогли расковырять на самом деле это не так то есть гораздо чаще это именно вот такие вот ошибки конфигурации там в использовании каких-то там дефолтных настроек дефолтных паролей Хотя в последнее время все чаще набирает популярность это именно покупка валидных коридоншалов для доступа внутрь на даркмаркетах что еще нужно анализировать понятно что никто не хочет изобретать велосипед и многие разработчики используют уже готовую библиотеки в своем коде Да в которых уже реализовано часть какого-то функционала тем самым они смогут сосредоточиться на своей созидательной деятельности на своих фичах соответственно раз никто не хочет изобретать велосипед у нас используется чьи-то библиотеки которые тоже чей-то код который также содержит уязвимости соответственно есть необходимость и устранить таких уязвимостей в нашем продукте здесь хотелось бы Напомнить вам Ну я думаю все слышали да про уязвимость ушел которая была вблизительно это именно такой класс уязвимости причем бахнул тогда серьезно достаточно было просто иметь Вектор атаки и библиотеку в составе своего кода Давайте попробуем внедрить с такой анализатор собственно Так выглядит и Гравитация чек мы указываем необходимый образ да можете увидеть его потом презентации собственно запускаем шелкот сканирование и здесь еще указаны дополнительно артефакты чтобы в артефактах пайплайн У нас появился HTML GSM файл и Давайте посмотрим что у нас нашлось по уязвимости здесь мы видим HTML файл и мы видим что у нас найдены были уязвимы npm-пакеты То есть как и три ДПС чек он ищет только известные уязвимости которые уже были найдены которые добавлены в базу Вот соответственно очевидно что известно уязвимости много кем проанализированы и злоумышленников гораздо проще либо подготовить эксплоид особенно Мы можем взять Две версии библиотеки их от реверсить наложить друг друга посмотреть а где были сделаны исправления собственно найти дыру что закрыли не составляет никаких проблем А когда ты уже знаешь куда бить гораздо проще написать exployd либо вообще в принципе можно найти готовые также Вот как было слов просто веером пытаться пробиться различные продукты вот из злоумышленник так и будет действовать чем пытаться найти именно в вашем коде вот какой-то зирады с непонятным результатом Не факт что он что-то найдет и сможет проэксплуатировать Да когда здесь вариант что что-то попадется на крючок гораздо больше и поэтому эффективнее исправить известную уязвимости которые могут присутствовать в вашем коде и только уже наверное потом начинает закапываться в собственный код и пытаться пофиксить Уже именно ваши ошибки Хотя из этого правила могут быть исключения а Еще хотелось бы показать вам немножко другой сей сканер сканер зависимости в принципе работают по-разному они имеют разные фиды они могут работать с разными пакетами менеджерами поддерживать разные менеджеры зависимости и последним примером на сегодня я хотел бы вам показать сканер из платного пакета gitlab подключается он как другие сканеры просто мы добавляем себе шаблон объявляем джогу уши мы запускаем вот так выглядит результат работы сканера Обратите внимание на вторую найденную уязвимость у неё идентификатор у него нет привязки к себе к базе А что это может означать что скорее всего что ее нет вообще в принципе в общедоступной базе про эту уязвимость не знают и например многие проприетарные сканеры они используют свои частные кастомные следы То есть у них есть типа своих лабораторий там сидят люди Ну так вот анализирует библиотеки у них еще есть свой дополнительный фид по уязвимому библиотекам Вот и использовать Я бы рекомендовал бы использовать однозначно несколько сканеров такого типа потому что за счет разных видов вы сможете улучшить покрепче покрытие вашего кода что ты думаешь Андрей спросим эксперта да на самом деле у нас компании тоже используется несколько сканеров и вот dependency Check и несколько платных я не буду называть сейчас название рекламировать Да у нас много продуктов они на разных менеджерах зависимости У нас например некоторые сканеры не поддерживают некоторые продукты которые мы хотим посмотреть и вот наверное самое большое отличие и самый большой плюс использование такого перекрестного анализа это в том что у каждого платного сканера есть своя база данных которую исследователи которые той компании которые производятся сканер работают заносит туда результаты И на самом деле порядка месяца или двух месяцев эту уязвимость находится только у них в базе и только потом она появляется Базис Ну с которой работает большинство разрешений Вот наверное это такой основной плюс использование такого прекрасного анализа и платных сканеров в частности у меня все На этом а если мы нажмем на какую-то уязвимость собственно мы можем увидеть что у нас есть там ссылка на описании уязвимости мы можем посмотреть У нас есть в каком это пакете и скажем так рекомендации по устранению наверное Печально что такой прекрасный сканер И входит в состав платного пакета он мог бы принесли принести много пользы или не печально давайте мы сейчас с вами попробуем найти уязвимость в гетлабе и научимся бесплатно в составе бесплатного пакета использовать этот анализатор мы с вами помним что мы добавляли себе шаблонности scanning И мы добавляли джопу jobo dependencescan давайте сейчас посмотрим повнимательнее в тот шаблон тут мы видим скан Соответственно что она создает как раз нужно нам артефакт джейлбенс из canning Report и собственно он нам как раз и нужен но больше ничего интересного в этой Джобе не происходит более того вообще скрипт сообщает об ошибке соответственно Однако мы видим что есть дополняющие в ней уже запускается как раз скрипт лазера но опять же здесь ничего интересного не происходит Давайте копать дальше и найдем непосредственно и собственно здесь как раз на экране представлена jobus сканеров они расширяют jobe dessna Lazer и мы видим здесь некую строку Rules это как раз и будут параметры запуска и в этой строке мы видим странную строку В смысле в этих глазах мы видим странную строку что у нас в переменной get love Fit сейчас проверяется наличие какой-то под строкинг и возможно Как растут происходит проверка возможности использования этого платного инструмента Давайте проверим это предположение Мы удалим эту часть правил даже не то что часть правил удалим мы вообще снесем все розы и поставим лишь одно правило что запускаться на каждом комиссии и Давайте попробуем запустить получится ли у нас запустить этот сканер да получилось мы видим в артефактах pipeline что у нас появилась как раз результат работы джумайзером Вот соответственно так как это бесплатная версия здесь я это не отображается но вы можете скачать json файл и в нем также будут будет вся информация то есть и критичности в каком пакете Да и какие-то можно будет найти Solution и собственно вот классических уязвимостей подделали на стороне клиента запрос Давайте теперь посмотрим как выглядит наш набор тестов да то есть так вот выглядит наш pip-line восклицательным знаком помечено у нас те джопы которые не составы gitla бы и соответственно так как они нашли уязвимость они об этом вносят в консоли нас предупреждает собственно это вот то что мы сегодня подключили мы прошлись по разным сканерам мы посмотрели немножко как внедрять и обсудили что вообще некоторые сканеры они приносят гораздо большим пакт при минимальных трудозатратах Да в каких-то наоборот нужно очень долго кастомизировать настраивать чтобы получать нормальные Импакт и тратить на них минимум времени вот ну и соответственно Да так как мы оценили сложность эксплуатации ещё мы да поговорили о сложности эксплуатации различных уязвимостей то есть одно дело когда у нас готовый ключ лежит и подходи открывая дверь другое дело когда нужно будет очень как-то хитро пробираться вот Ну и наверное в конце Хотел бы я с вами поделиться некоторыми историями из жизни как я пришел ко всему этому Вот вообще во многих компаниях где работал занимался безопасно разработкой изначально использовался SAS и кроме некоторых случаев где-то был действительно оправдано в остальных Это был либо Ну чё-то решение там руководство или тем кто этим занимался либо Ну просто потому что знали только такое решение и в одной из таких компаний Я только пришел как раз готовлю свои инструменты получая админов виртуалки чтобы разворачивается раннеры для своих инструментов и значит приходит мне креды по СССР виртуалки Root QWERTY 1 2 3 я такой Ладно и думаю я скачал инфра сканер безопасности думаю разверну ради прикола скачал Виртуал Lines разворачиваем и сканирую весь доступный диапазон вот IP адресов что может быть что я увидел такого увидеть я не ожидал я сейчас даже не говорю про большое количество уязвимости Ubuntu 12 devian 7 это меня немного поразило Я сам перепугался немного соответственно организуем с ребятами конкол с админами я им все это показываю ну такие соглашаются Да непорядок сидят грустные начинаем разбираться подробнее Да что Исправлять они такие смотрят на ip-адреса такие наши Хосты где-то там в соседнем предприятии которым может сизируется в нас все ничего не нужно исправлять ничего страшного действительно возможно Тут ничего страшного когда уязвимые соседние предприятия маршрутизируется вашу сесть Ну возможно кто-то здесь что-то за месяц подвох еще я бы хотел бы рассказать про опыт ctf в роли Security инженера опыт командного ctf Ну то есть если кто-то не знает это в вашей команде выделяется подсеть каждая команда в своей подсети вам выдается виртуальная машина и на ней чаще всего это в контейнерах запущены уязвимые приложения Пока еще нет сетевой доступности И вам дается где-то час на хардинг и вот Какие первые действия когда начинается такие мероприятия кто-то может сказать что давайте сразу искать свою уязвимости в коде некоторые Ребята так и делают Ну не Security инженеры то есть первым делом заходишь там подкредами по СССР на эту виртуалку делаешь бэкап Shadow если там есть какие-то ещё пользователи ставишь их перебираться потому что возможно кто-то не отключит заливаешь сироты участников сбрасываешь всевозможные пароли обновляешь операционку обновляешься пакеты проверяешь как раз руту-контейнеров что многие не выставляешь лимиты на контейнеры по памяти CPU потому что вам Могут подломить одно приложение да и запустить там Fork bombo и ляжет у вас все а соответственно простой Это значит что Жюри не сможет собирать флаг с вашего приложения значит вы идете в минус закрываете различные порты это тоже заставляет задуматься О том А стоит ли вообще вот начинать именно с поиска уязвимости в коде ещё один из интересных фактов таких цтф я иногда брал вот так вот исходные тексты от этих приложений в каких-то случаях не было и нужно было реверсом там где были и пробовал сканить различными статистическими анализаторами в том числе платными там мальчик Маркса и фортифай и знаете результаты плачевные То есть все вот эти уязвимости это не типичный как бы для сканера и зерды то есть что ещё лишний раз подтверждает что сад - это не Панацея И сост это не гарантия да Он позволяет сделать ваш код лучше Это позволяет сделать качественнее но он не позволяет его сделать полностью безопасным мы с вами знаем что идеальная безопасность не существует Кто не знает знаете что ее не существует и здесь важно придерживаться правила 80-20 что 20 процентов усилий дают 80 процентов результата вспомните Безопасность это бесконечный процесс как вот мы с вами обсуждали на сайте Да вы нашли бы постоянно дописываете Новый год вы катите фичи в Новый год потенциально содержит уязвимость он всегда должен проходить вот причем постоянно появляются новые типы уязвимости постоянно появляются новые виды АТАК Да э-э находят уязвимость в каких-то продуктах которые вы используете в составе своего Ну или могут быть да и начинаете внедрение безопасной разработки А с наиболее критичной области и где до вас легче всего добраться помните злоумышленник пойдёт по простому пути То есть если у вас там я не знаю не прикрыт РП он пойдёт по рдп не нужен ничего вот этого искать если у вас лежат ключи он пройдет по ним не стоит зацикливаться на какой-то одной практике Вот опять как мы обсуждали в создатель мы могли бы Например вы пройтись по вот этим практикам взять там критические высокие уязвимости вот самая опасная пофиксить обратите на другую внимание практику и так далее проходить закопавшись в одной практике там пофиксив медиум уязвимости лоу вы все равно оставляете неприкрытыми ты эксперт что не выдает Спасибо да на самом деле Ну хакер никогда не спит вас всегда могут поломать и с появлением новых технологий Да правда появляются новые вектора так новые возможности по реализации конкретных уязвимостей и важно задумываться комплексно то есть подходить систематично и комплексы Это наверно два основных правила в безопасной разработки в частности комплексность позволяет достичь хорошего покрытия вашего кода вашей инфраструктуры и защититься все в целом от наиболее критичных Атак то есть приоритизация тоже важно и как Алексей сказал закопавшись в одной конкретной практике в одном подходе даже в нескольких например никогда не достигнет тот уровень безопасности если бы сделали везде в каждой практике Но по чуть-чуть Но сразу и сразу же исправили Вот наверное это основная посыл который хотел бы донести спасибо спасибо Андрей Давайте все-таки подведем небольшие итоги значит универсального подхода не существует всегда у всех будут разные условия эксплуатации разные угрозы для продукта Вам нужно самим определить что для вас важнее что для вас критичнее да то есть неважно вас десктоп приложения это где-то крутится у вас там в Облаке в продакшене не стоит зацикливаться на одной практике то есть мы это обсуждали на этапе пофиксили все уязвимости Но в нашем коде в открытом виде лежит ключ важно здесь при внедрении учитывать трудозатраты на Импакт особенно как у нас начинается внедрение безопасной разработки приходит один безопасник начинает что-то крутить мы находим там 10 тысяч уязвимости и дальше начинается пляска также помните что сканеры не смогут вас защитить от еще неизвестных уязвимостей они всегда на шаг позади то есть сначала появляется либо какой-то пруфов в конце дал ресер либо бо эксплойту злоумышленников и только потом появляется какая-то ответная реакция на него да то есть либо это в стороннем коде уже известно в базу известных уязвимостей она попадает либо еще что-то поэт исключение тут конечно могут быть Возможно какими-то файзерами там динамическим анализом вы сможете найти такую ошибку но в целом в основном сканеры всегда позади То есть у вас всегда есть окно когда ваш код остается уязвим то есть что-то опять же как было слов Да её нашли пока еще не выпустили патч вот это вот был как раз пик всплеска Вот и наверное помните что самое основная часть безопасной разработки это обучение людей это повышение осведомленности это культура безопасности в целом в компании никакие прикрученные инструменты это лишь помогает команде проверять что они все делают правильно на этом все спасибо за внимание вопросы да нам на самом деле прислали в чат вопрос давай зачитать попробуешь ответить сколько времени уходит на разбор первого прогона с двумя тире 10 тысячами замечаний смотрите Сейчас расскажу На самом деле тут будет зависеть много чего это зависит например от вашей команды Но если вы один человек в команде зависит опять же наверное того сколько там проектов Сколько языков и как активно с вами работает команда программистов потому что программирование это созидание Да и там в программировании возможно все иной раз сложно отличить это какая-то или фича да то есть это случай допущена ошибка программистом либо он что-то хотел так построить соответственно требуется консультации Это зависит от занятий команда может раньше готовить релиз наверно двух до десяти тысяч если прям Я думаю несколько месяцев Реально папа опыта с учетом что у людей свои задачи что они не каждый день с вами сидят все такое тут на самом деле зависит от того сколько Выделите ресурсов сколько вы людей посадите разбирать эти уязвимости замечания скажем так и от языка программирования зависит то есть для плюсов например ну не всегда очевидно реально проблема или нет И посадив например на 10 тысяч уязвимости от стад анализа 5 человек Ну наверное я думаю где-то неделя Наверное это минимальный срок который можно указать вот если самая быстрое время читать эту неделю Ну а самое большое естественно месяц два три как повезет давай второй вопрос тогда рассмотрим если для github actions подобный шаблон Ну как ты рассматривал для гитлаб смотрите для github actions Мне кажется подобных шаблонов нет но все эти большинство из этих инструментов есть наверное только не брать Джим на зиму это наверное можно поковырять посмотреть в принципе как вот я показывал с внедрением хода линд как показывал с внедрением докли ДПС и чек это все отлично ложится в gith A pactions и те инструменты которые используют gitlab То есть например мы с вами сарели кикс Он точно также можно его использовать в составе имиджа он также есть смысле в открытом виде на гитхабе вы сможете перенести это в экшен с более того я думаю у каждого инструмента можно найти подробные инструкции по внедрению в github никаких сам мне кажется это есть ну и соответственно точно также если брать статические анализаторы там использовали 7 греб он также подключается в любую систему сборки то есть каких-то проблем явно не должно возникнуть возникнуть могут проблемы Когда вы уже используете какие-то вот платные сканеры именно из состава gitlab это мне кажется что опыт с gmazing мы можем перенести на github При желании да И на самом деле проблема еще могут возникнуть со стата анализа если подключать автоматизированным потому что он не всегда хорошо работает там надо проводить некоторые кастомизацию как рассказывал Алексей и поэтому время на его подключение и вот наверное вопрос просто был с целью того что быстро попробовать что-то у себя этот не получится Скорее всего станут анализом Так ну и зависит еще на самом деле от языка программирования в основном все от языка зависит от анализа и время работы самого анализатора и время разбора уязвимости что это всего лишь инструмент это просто инструмент как молоток там как пила что-то еще вокруг этого инструмента вам нужно выстраивать процесс кто будет находить эти уязвимости кто будет определять критично это не критично дальше это выстраивается как фиксеть где-то вы можете Договориться с командой разработки что вот у вас там появляются определен там критичности Да и ребята Сами анализируют где-то вы можете договориться что наоборот Security инженер у вас смотрят их выбирает это То есть а само построение процесса и вот исправление вот до того как мы поставим это на рельсы будет идти само без какого-то внешнего вмешательства это может потребовать значительных там битв баталии внутри на работе совещании все такое Да у нас на самом деле Время и Стекло и нас сейчас должны куда-то переместить поэтому мы постоянно уйдем Кто желает продолжить приглашаем дискуссионный зал вопросы Также можно будет задавать всё тот же чатик который там был все спасибо всем спасибо"
}