{
  "video_id": "ziwI7re28JM",
  "channel": "HighLoadChannel",
  "title": "Оптимизация размера приложения / Дмитрий Куркин (Mail.Ru)",
  "views": 503,
  "duration": 2665,
  "published": "2018-01-16T13:20:52-08:00",
  "text": "меня зовут крути дмитрий и я расскажу вам о подходах к безо цию размеры приложения если мы посмотрим на предложение истории то они имеют довольно разные размеры соответственно самый маленький где-то несколько мегабайт и самые большие могут занимать несколько гигабайт очевидного при таких размерах разработчикам не так важен размер особенно наверно это касается игр где много графики и важно чтобы все это было доступно без интернета если ваше приложение работает с сетью то как бы такой размер уже поздновато объяснить давайте посмотрим несколько популярных приложений начинает размеры говоря размере приложения очень сложно пройти мимо facebook примерно кажется год назад разразился носят дискуссия про их размер и ваш там как их только не смотрели и длину начаться метода посчитали и дубликаты там по находили так может кто-то помнит сколько сколько сейчас они занимают и так это триста восемьдесят пять мегабайт на тот момент как я смотрел это цифра и затем и сразу мне попался подходящий прямо комментарий буквально он был на том же экране пользователи в общем к такому размеру не очень рады вот другое приложение в общем-то тоже социальная сеть имеет популярность измеримого в россии с фейсбуком и и размер может быть кто-то знает сблизить надо 28 мегабайт разница практически в 10 раз ну чтобы значит я не был пиарщиком наших сервисов посмотрим на другие примеры мне вот очень понравился примера с такси и значит всемирно популярный сервис уберу это 280 мегабайт ну вот наши коллеги имеются значительно более скромный размер если мы посмотрим на яндекс карты то это 80 габариты это уже в 3 раза меньше но и это еще не все если мы посмотрим на региональный сервис такси максим я вот in тыкался где-то варламова кажется в статье это 20 метров это еще в 4 раза меньше вот настолько может приложение быть меньше выполняя в общем-то свою основную функцию чтобы пояснить почему я вам рассказываю про размер надо сам популярно сейчас messenger воцап весит 135 наше приложение занимает 70 3 мегабайта и в общем-то недостижимы для нас идеал это приложение рима 22 мегабайта при этом в общем то у них там и звонки и файлы и сообщения все есть но при этом такой размер насколько я знаю для них размер является одним из конкурентных преимуществ почему они смогли достаточно хорошо подняться в развивающихся странах особенно странах значит бывшего союза почему в принципе размер может быть важен если пользователи работают преимущественно мобильном трафике то есть них мало где есть вай-фай можно пользоваться фактически только телефоном то по сути всё это для них мобильный трафик давайте посмотрим какие есть тарифы чтобы понять насколько это 20 лет 200 мегабайт много это или мало если взять наших основных операторов посмотреть минимальные тарифы это вот значит мтс минимально предлагает один гигабайт это 35 рублей в месяц билайн примерно тот же размер за примерно те же деньги тоже один гигабайт и значит тоже где-то 300 рублей в месяц получается вот случае с мегафоном более интересная несмотря на то что получая предлагается в месяц больше если взять 70 мегабайт в сутки это получается почти два гигабайта в месяц однако если ваше приложение больше 70 мегабайт там есть те же 200 метров до то и шанс что значит какой-то день пользователя ваши предложения не скачает просто потому что у него на этом кончится мобильного трафика ну и сам молодой оператора tele2 предлагается два гигабайта примерно то же самое что мегафона если еще какие то дополнительные ограничения но вот насколько я слышал есть проблемы с доступностью сетей и дверь давай теперь бобром оценить мегабайт может быть гигабайты может быть этого достаточно за глаза и все такой порядке ничего не надо больше но если ваше приложение приложение на вашем устройстве начат хотят обновляться все мы попытаемся доставить пользователям все новые и новые версии то вот значит буквально 10 приложений довольно популярных на мой взгляд и фейсбук его цап и карты и youtube и вот уже у вас на бежал гигабайт вот собственно и весь трафик на 1 обновление как бы и вышел тесно пользователь может таким приложениями перестать пользоваться ну и кроме того нельзя забывать о размере которые приложения занимает на диске потому что если опять же вы рассчитываете на аудиторию которой достаточно низкий бюджет то довольно велика вероятность что иначе устройство у них имеют не 128 мегабайт а скорее всего 16 и для них вполне актуально история с тем чтобы пойти и почистить места потому что она уже закончилось соответственно и частенько заходят на этот экран и если ваше приложение попадает вот сюда вот на вот в этот список то ваша вероятность на то что вас удаляться она сильно возрастает и так вот допустим мы решили что наша размер предложения для нас важен мы хотим чтобы начать пользователь был доволен обновление у него не вызывали проблем сколько же она в итоге весит когда мы начали заниматься этим вопросом това для нас тут значит возник сюрприз мы подготовили значит очередное обновление меч или размер заливаем там у нас было что-то 30 мегабайт заливаем 100 рф приходит какой-то вжух и в appstore сорок пять мегабайт откуда что это почему не понятно если мы начинаем дальше смотреть как бы эти числа то допустим мы смотрим в отчете там 73 если мы через аким скачаем то там еще третья цифра мы видим что значит и потом весит 60 мегабайт тут разнообразие цифр самое большое для того чтобы понять откуда такое и такие числа давайте разберемся что же мы в итоге заливаем на текущий момент ситуация такая что общем-то и пол для нас сделала чтобы вообще не знали что туда уходит потому что значит архив собрал версию своего выбрал кнопочку нажал и что ты туда полилось давайте попробуем выяснить а что же все-таки туда пошло если нажать не загрузку и выгрузку своего приложения на диск для appstore а то там будет ipa файл что это такое на самом деле это и по по факту просто переименованный zip-архив если мы переменную zip то он прекрасно успокаивается и большинстве случаев там примерно такое содержимое правило в корне лежит папка пилот внутри которой папка . а п п которая очень простого состава похоже на те приложения что находится у нас на макбуках там папки applications что там у нас в этой папке лежит обязательно конечно же должен быть исполняемый модуль то есть тот собственно binary который у нас запускается поскольку все нас требует подписи того чтобы установить устройство обязательно должна быть папочка с подписью и собственно все данные чтобы понять что предложение состав приложений не нарушен ну конечно же кроме то там лежат ресурсы нашего приложения значит faced каталога локализации картинки базы данных может какие-то рисованные прочее ну и с развитием за последнее время всяческих дополнений могут быть начат лежать фреймворке если у вас 6 и приложение то скорее всего значит там лежат те самые стандартные свифта в библиотеке если вы как предлагал предыдущий докладчик выкладывайте что-то динамические библиотеки тоже они могут быть здесь лежать далее может быть отдельная папка с плагинами это плагина шер extension на плагин к к notification мы и прочие штуки это она хоть и называется немного по-другому apex но тем не менее она по составу примерно такая же как и основной модуль и значит есть у нас есть приложение вот часы то соответственно пабчики watch и аналогично учат если посмотреть на то что сколько занимает привести пример вот это значит примеры по gettaxi тут видно самое большое это фреймворке причем а красная это стандартная библиотека свифта видно что размер довольно большой причем это самая большая часть следующее это сам binary собственное приложение тоже второй по размеру только далее уже идет черта сет каталог сказать с нашими картинками и последнее это плагины и не make to extinction и сейчас я уже не помню что там было именно и остальные ресурсы видите по сравнению с этим практически незаметны и так чтобы понять тетки те странные числа давайте попробуем выяснить так как же они появляются для этого я хотел проверить две такие вещи гипотезы первое проверить насколько влияет на этот размер архитектура если мы сейчас заливаем приложение с поддержкой двух от текстур то что собственно попадает на пользователь пользователя на устройство попадает ли мы 1 архитектурой или 2 и где мы их значит видим по одной а где 2 кроме того хотелось проверить насколько хорошо работает от обрезания картинок так называемый obtaining которая нам apple презентовала кажется 15 году если у нас картинки предлагаются в разных масштабах что он нам отдает картинку только под наше устройство и последнее что хотелось проверить это поскольку наша и по это zip-архив то на сколько нам тут поможет степень сжатия то есть если мы хочу максимальную повлияет лет вообще на размер предложения как проверять для этого я использовал this flight соответственно чтобы проверить одну из этих гипотез собираю приложение заливаем в appstore и далее не открываем пользователю открываем внутреннее тестирование и можем в приложении this light посмотреть что у нас в итоге получилось первое что значит я проверяю это разделение по архитектуре для того чтобы понять меня в итоге скачена 2 2 или 1 я занес в приложении от такой большой массивчик где-то в 4 мегабайта и далее при помощи define of только для одной архитектуры я его использую значит там что-то в нем считаем соответственно все собрав загрузив ты слайд у меня получились такие результаты на 32-битной системе начнут на iphone и пятом меня получилось 3 сплайн мегабайта и значит на шестерке диабетической битной архитектура там соответственно 0 1 то есть даже причем а примерно такие же результаты у меня были независимо от того используя подход или не используя соответственно получается что на устройство в итоге выдается только то архитектура которая нужна для этого устройства причем она это байт код здесь даже не требуется второе что я хотел проверить это значит размер картинок причем а раз уж с байт кодом такая история произошла то может не и вася каталог не обязательно все засовывать можно все это и снаружи использовать соответственно хотелось проверить два варианта картинок с разными масштабами васятка талаги и просто снаружи виде ресурсов в итоге собрав я получил такие варианты такие размеры значит на маленьком для двоих с меня получился полтора мегабайта то есть явно была в случае aside каталога отрезанная часть и для большого устройство конечно же большой файл а в случае когда была использована не aside каталог ресурсов содержали снаружи размер одинаковые поэтому значит если ваш каталог не класть то оно не будет отрезана когда пользу и скачать приложение получат картинки всех масштабов какие есть приложения причем пока и это проверяла важный момент что при сборке картинка может также быть увеличена поскольку при сборке apple использует может xcode может использовать свою оптимизацию для картинок и в моем случае картинка увеличилось еще на пяток мегабайт и последнее что я хочу проверить это степень сжатия приложение для того чтобы проверить насколько это влияет я взял текстовый файл в принципе такая штука которая как правило очень хорошо сжимается положил в ресурсы и в результате сборки получил практически тоже самое что в несжатом виде то есть вместе с binary вам я получилось 3 мегабайта значит текстовые файлы ресурсы которые мы кладем в приложении лежат там по сути без сжатия ну теперь мы больны не понимаем как боевая получается этот размер давай теперь попробуем все-таки понять и что же нам сделать как действовать первую очередь конечно стоит начать с того что понять а что же у нас самое большое стоит посмотреть внутрь приложения вот dance используется такая удобная схема поискать что крупная что практически не заметно по отношению к основной части если значит здесь можете найти какие-то свои большие вещи может быть у вас что-то остался предыдущих релизов если вы найти сиська это лишний файл то о чем то его исключив вы здесь практически в дамках можете счастливым лицом начал говорить что мы уменьшили это на мегабайт и все хорошо но если значит здесь в итоге ничего лишнего не нашлось и ваша картина примерно такая же как здесь то есть основная часть это binary то видимо вам придется пойти дальше если что поскольку теперь нам нужно желательно все заносить вас от каталог то стоит заглянуть туда чтобы посмотреть нет ли там каких-то лишних картинок которые могли у вас остаться вот предыдущих релизов соответственно есть инструменты можно смотреть что там есть опять же по аналогии с тем случаем что у меня был с картинками посмотреть они увеличилась ли все это в итоге еще при сборке может быть стоит настроить работа с картинками при сборке но если здесь мы ничего не нашли то в общем то ситуация ухудшается вам придется работать исполняемым файлом если у вас поддерживается 2 архитектуры то как правило исполняемый файл это имеет так займов и структуру в нем внутри заложенные по сути под каждой архитектуру отдельный binary они как правило большинстве случаев имеют довольно схожи и размеры если вы не делаете так как значит я со своем примере не заносит что это огромная только подано культуру имеют примерно схожие размеры как вот здесь на картинке и это кажется опять же gettaxi каждая архитектура тоже имеет такую структуру начать или заголовок есть раздел этот коммент со где по сути содержится описание всех последующих секций размера какая-то документ информация смещение и так далее и далее идет секции с собственным кодом вашего приложения и различные секции с данными если как бы вам повезло то возможно что на этом этапе порывшись по секции лодка манса вы сможете не в коде значит среди и среди данных найти это большие константы которые начать можно удалить либо выложив там отдельный файл либо их принести значит все эти скачать их потом то значит таком случае снова у вас есть возможность достаточно легко сократить размеры прав в данном случае на картинке пример опять же тестовый пример с тем самым массивом он здесь вот показывает 38 мегабайта виде данных но если этого не произошло то дальше все сильно усложняется вам придется каким-то образом оптимизировать код своего приложения значит основная проблема с размером заключена уже коде если мы посмотрим на сборку приложения она как правило состоит из двух этапов и это компиляция в результате чего мы получаем объектные файлы и далее все ли курица в итоговый общий binary мы можем рассмотреть здесь объектные файлы чем они хороши если мы берем весь свой итоговый файл бинарные то там много нашего кода и вроде там все нужное и его там так много особенно еще чужой какой-то код разобраться в нем сложно если мы посмотрим на объектные файлы то уже собственно отсортировать их по размеру можно выделить тех кто значительно отличается там от середины потому что размер размер объектного файла хоть прям менее в сто процентов но тем не менее даже пропорционально влияет на итоговый binary кроме того в объектных файлах содержатся ссылки на исходные исходные файлы их оттуда можно достать и кроме того поскольку в данном случае у вас уже не один файла много вы можете отделив значит самый толстый рассматривать только их понимая какой код их собственно сделал мне не работая при этом совсем приложением если вот есть значит утилита обж дамп для объекта файла можно изолировать и получить такой вывод где значит у вас будут ссылка ваш исходный файл и значит ассемблерный код к этой строке с значит со смещением как это все находится внутри объектного файла по смещению можно примерно оценить размер того сколько эта строка занимают и исходя из этих данных опять же неким образом поменять свой код мы вот примерно на уровне объектных файлов и поняли что из-за того что увлеклись шаблонами себе желез у нас на генериус очень много кода и в общем-то пришлось съесть что-то переделывать чтобы значит вот этого хоть частично отказаться и уменьшить размер это мегабайт таким образом мы себе откусили а тот момент и приложение нас было не 30 мегабайт а-20 но и естественно получилась неплохой неплохой уменьшение кроме того как я говорил значит объектные файлы не на 100 процентов попадают в бинаре опять же если вернуться к моему исходному примеру там массив заходил массив присутствовал в общем-то и в одной в другой архитектуре но использовался только в одной поэтому к bacino что компилятор при сборке может какие-то вещи которые не используются в приложении в итоге оптимизировать но в зависимости от того какой на чем у вас написано приложение начнет какой код использует на чем на каком языке написано вас тут или иную модель это происходит по-разному давайте посмотрим насколько если мы возьмём некий классов дпс опять же тем же тяжелым методом то уже за счет того что вы его положите в приложении уже этого будет достаточно чтобы размер говоря у вас вырос соответственно размер этого тяжелого метода почему так происходит нас объекте все имеет высокую динамику можно внутри приложения в ран тайме в общем-то позвать любой метод любого класса если значит знать имена такая возможность в общем-то у нас существует поэтому компилятор не может гарантировать что несмотря на то что прямых ссылок нету нет гарантий что никто туда значит таким методом не зайдет если взять значит си плюс плюс или see the здесь все значительно лучше и статические классы классы без виртуализации с довольно высокой вероятностью будут удалены если они используются при чем а если вы не используете если даже есть виртуальные методы но вы используете только статические если вас есть иерархия значит классов все + + и в них вы виртуальные методы не используйте такие типы которые в итоге у вас не используется но участвует в этой иерархии они будут вырезаны если виртуальные методы из этой горах и используются то значит класс весь заедет binary ну и в случае свифта значит так же похожи как из объекте все уже вот такой класс с тяжелым методом уже по крайней меня отразился на на размере binary а причем должен отметить что занеся вот такой большой массив я получил к это невероятное время сборки порядка минуты хотя приложение реально голое приложение с одним классом ну соответственно на имея некое представление как в итоге хотелось подложите как действовать если вы решили оптимизировать файл итак первую очередь надо посмотреть что у нас наиболее толстая что на что стоит обратить внимание если начать никаких таких ресурсов не удалось найти и что можно вынести из приложение то далее проверить стоит константные данные поскольку они тоже достаточно легко могут быть внесены ну и далее вам придется приступать тяжелой работе для того искать что же у вас занимает так много сэм блинова кода и в конце хотелось бы представить утилиты которые были использованы в докладе размер удобно смотреть что у вас сколько занимает в приложении при помощи диск inventory с моей картинки с квадратиками красоту до приложение матча view позволяет заглянуть внутрь бинарного файла можно посмотреть секции походить по насчет лодка у нас посмотреть что-то может быть такого большого оптидам по помогает для десантирования объектного файла чтобы понять что у нас в итоге сила размер и asset каталог tinker помогает взглянуть внутрь собственно собранного asset катал на этом всё если есть вопросы я готов ответить началось спасибо за доклад у меня такой вопрос дмитрий вот по поводу загрузки то есть сама само приложение в appstore занимает нам 20 мегабайт но мы его загружаем запускаем она нам радостно сообщает что она еще что то грузит и тут же буквально на глазах у нас вместо 20 мегабайт она начинает занимать 100 это вот с этим ну в данном случае вы говорить о том что сейчас качок приложения даче мы накачиваем ещё сколько-то данных этом лишь да то есть и получается пользователь которую у нас ну польстился на его размер в appstore он ну вот вот те приложение просто которого вы приводили в пример вот вы их вот в этом ключе не проверяли то что он в руках польстился на их размер в appstore а получилось что по факту он загрузил там в 3 4 раза больше то есть там ну не знаю условно говоря вместо того же контакте он загрузил фейсбука это все а тот же контакт ему по факту выдал там два раза больше ну да но с другой стороны приложений уже у нее на устройстве насколько он пойдет смотрители не пойдет а сколько у футболки у фейсбука там насчет как бы размер это по-прежнему что вопрос остается открытым и тем не менее в тот момент когда пользователь смотрит на ваше приложение в store и в именно в этот момент он видит эту цифру как бы что будет дальше ну это уже значит то также в ваших руках насколько вы значит ему накачайте данных это в общем-то вопрос опять же как он будет пользоваться это уже такой неоднозначный вещь а вот как бы одно приложение там типа 300 метров другое приложение 20 иначе трафику у меня там осталась та же еще сколько за что же мне скачать вот на этом уровне маленькая цифра может принести вам пользу в принципе так же как и оценка в истории как бы 5 звезд может быть и не имеет такой уж ценности но тем не менее их в этот момент может сыграть по сравнению просто тот второй случае он как раз собственный может повлиять на оценку истории народ за счет то конечно если после 20 мегабайт мы накачаем еще пару гигабайт это конечно же та же беда на который надо работать но это принципе скорее уже не тема размера приложений и эта вещь с которой за которой ясно как работать то есть вы понимаете что что вы ему качайте можете придумать какие-то политики если мы говорим о размере приложения то в тот момент когда вы приближаетесь вот собственно к тому что надо что-то сделать бен варем то здесь ну по крайне мере лично я испытал полную растерянность поскольку вот как бы наш код там кажется все надо ничего такого большого что туда вынуть так сказать не видится и что же собственно с ним делать что вот откуда столько столько в итоге насобиралось и кажется что это более сложная задача по сравнению с тем чтобы с тем как действовать уже в дальнейшем спасибо здравствуйте спасибо за доклад почему вы не рассмотрели такую возможность как выгрузку тяжелых методов на sea view чтобы там все это считалось делалось а клиенту только результаты ходил это тоже может сильно помочь ну в данном случае прежде чем мы такие вещи выносить на сервера нужно понять а что именно вы носить нужно эти вещи найти опять же в нашем случае найдя эти тяжелые вещи мы понимаем что здесь дело и в том что сам алгоритм сложный что код сложный а в том что мы использовали эти методы которые генерят просто большой размер в реальности например значит если приложение то у нас binary где-то под 20 метров у нас там например есть библиотека для voip звонков она занимает в нем там пять мегабайт хотя казалось там и кодеки еще что-то и вот сравнивая значит 5 мегабайт тут и вот наши все остальное ей вроде бы несложно и вроде бы тут все элементарно но тем не менее она в разы больше вы почему откуда все взялось не понятно то есть вот на этом уровне проблема когда мы знаем что вот вот это как бы тут нам все и съела то тут как бы картина конечно же проще если в принципе вполне нормальный вариант конечно же если это можно вынести на сервер то понести на сервер также как собственно из файлы можно поступить спасибо спасибо за доклад я может быть немного прослушала сколько в итоге удалось сэкономить пространство какого значения вы уходили какому пришли вы на тот момент когда мы начали это делать размер у нас было предварительные по сути это одна архитектура тогда было под сорок метров и нас конечно больше пошли именно файлы то есть мы многое вынесли на первых этапах то есть многие вещи несли на сервер сделали какие-то докачки у нас были всякие приложения разные темы какие-то обои что таки такие вещи для них со стартовой элементы соответственно неся ресурсы мы смогли вынуть довольно большую часть и значит уже далее используя насчет подход с работой с by ногами конечно там получилось значительно меньше и честно говоря больше это связано с тем что нужно было сильно двигаться дальше я вчера говорил насколько у нас все динамично у нас достаточно часто выпускаются релизы с этим уже просто не хватило времени для того чтобы продолжить дальнейшее мучений есть примерно понимание что делать просто как бы нету на текущий момент времени чтобы и дальше чего меньше вот пример для нас кого есть образец им а 22 мегабайта нам есть к чему стремится еще в общем-то довольно далеко так я понимаю вашем случае самым толстым оказались ресурсы вебинар был не таким критичным скорее меньше было соотношение то есть конечно by night был большой то есть если я говорил 40 метров от него 10 по-прежнему нас еще 30 мегабайт это на binary я сейчас не очень точно уверен в цифрах но это примерно порядок был такой мы смогли уменьшить его вполне ощутима но тем не менее все равно бинали остался самым большой и все дальнейшие изменения которые нам придется делать они все связаны с binary окей и как я понимаю все это было в основном объекте все проекте сделано время но даже не то что сделано немножко прошедшем времени я делегировать мы у нас проект на объекте все конечно у нас стоит вопрос о том что давайте на переедем значит на swift все хотят свифт новые разработчики которых на что приходится искать они тоже хотят свифт но вот как бы когда такие доклады приходят там все плохо запускается медленно размер большой и эти проблемы конечно затрудняют объяснять а почему зачем мы это делаем у нас вот сейчас как бы запускается относительно быстро проблема значит с размером хоть есть но не такие как например у uber а вот зачем мы понесем туда свифт поэтому на текущий момент приложение на объекте все и в целом хотелось бы конечно дотянуть до того момента когда все такие паук как-то его стабилизирует и не надо будет все тянуть внутри приложения вот наш подход я почему говорю вот эти вот дампир и там vivir и омах binary и это все было для объекте все сделано на свифти и тут осталось как-то нет насколько там отличается вообще структура но по идее by night должен быть тот же вопрос ваш скорее актуален для объектных файлов насколько есть объектные файлы я сейчас не уверен этот момент как бы не решился репрезентация свифта внутренняя ну вот насколько он представляет каждый класс виде отдельного файла здесь я к сожалению могу утверждать окей и кстати говоря сейчас вспомнил по поводу световых вот говорили про плагинами моно для подав он помимо того что уменьшает время запуска насколько я слышал уменьшает еще и время компиляции и размер так что штука классная если кто-то там делать на сетей а можно попробовать иметь еду спасибо вот все здравствую спасибо большое за доклад я недавно заметил о том что некоторые приложения в истории весит я даже сейчас прям посмотрел google таблицы сейчас если их просто начать скачать то они весят 200 13 мегабайт если поставить обновление на последнюю версию то они ну короче 278 вот тут разница большая вот смотрели вы в эту сторону что-нибудь от чего это зависит вот просто мы допустим скачаем сегодня на 20 мегабайт приложения потом через месяц выпустим обновление нужно будет 60 вы понимаете ну все но это хитрый ход но как бы если речь об обновлении о том что сегодня вы выпустите 20 завтра 60 то у вас значит проблемы начнутся после завтра что касается тех цифр которые бы еще присутствует в appstore то конечно же честно говоря не заканчивается тем что бы я показал несмотря на то что мы видим некую цифру перед скачиванием похоже что ну вот мне был пример когда мы смотрим на приложение в айтюнс то там она весит 700 мегабайт если мы его скачиваем то это 60 то есть видимо все таки качается не совсем то число которое мы видим в store поэтому возможно конечно в итоге там размер меньше но все-таки число которое видит пользователь она вот именно такое и сколько в итоге он качает он в общем то ему узнать довольно сложно нужно как-то все отключить посмотреть насколько изменился трафик там у него в устройстве вот поэтому насколько сколько он реально скачивает ему очень сложно текущий момент узнать эта цифра нигде не фигурирует и аналогичная история с обновлениями обновления значит когда появляется новое обновление то там может размер тоже отличаться от того что видно в store возможно это тоже связано с сжатием и плюс еще не заверяли apple заявлялось что обновление происходит виде видев а то есть приносится только то что то что отличается от предыдущей версии но там достаточно большие размеры видимо то-ли у нас всегда все отличается то не может быть это механизм не работает не знаю нужно еще вот уточнение по поводу идти на то что вы говорили что архитектура каждое устройство хранит только свою архитектуру свои картинки а не может такого быть что вот именно за счет того что он загружает всю версию целиком получается для всех устройств то есть мы когда закачиваем votes мы ж не знаем на какое именно устройства моего будем ставить и если мы смотрим на приложение в айтюнс то она почти как право где то чуть ли не в два раза больше чем мы смотрим с мобильное устройство то есть я показывал значит вот данные наше приложение на устройстве 45 если мы посмотрим в браузере войти уста это 73 мегабайт видимо это за счет архитектур они в два раза она увеличилась за счет того что ресурсы все-таки единственный цеплять спасибо за доклад такой вопрос вот вы сказали про феннинг но в 2015 году apple наряду со спиннингом также но реализовала on demand ресурса стоять подгрузку ресурсов но так как у вас тоже значительную часть занимает ресурсы вот не рассматриваете ли вы использование вот эта технология мы на тот момент не задействовать ресурсы диман потому что есть другая платформа у нас есть приложение под android и в итоге мы просто применили общее решение свой сервер разместили ресурсы и самих скачиваю то есть применили в реальности свое решение смысл его в общем то тот же что мы какие-то ресурсы выносим на сервер и значит приложение когда они потребуются мы их докачиваем там обновляем и все такое ну да просто тут есть плюс единственный что ну я не говорю уже что так сильно скорость расширять что но приложение в appstore то максимальный размер по 2 гигабайта если эти ресурсы 120 гигов можно я надеюсь мы не найдем такого размера здравствуйте вот размер приложения это очень важная техническая метрика и вопрос такого плана как вы собираете во время релиза в эти метрики скорее всего какой-то континиус спор технических метрики в том числе и размера и да как это происходит что посоветуйтесь я вам отвечу начала немного вас расстрою мы это не собираем почему пока происходит релиз мы заносим какие-то вещи причем пока мы готовим следующую версию функционал может меняться многократно в процессе мы какие-то штуки заносим если мы в итоге какой-то функционал новый занесли он конечно же размер увеличивает мы приносим новый код она как бы так растет растет растет и в тот момент когда у нас готово версия когда уже есть что сравнить потому что размеры и по отличаются в итоге когда у нас есть что сравнить то в этот момент уже поздно бить тревогу либо и уже но как-то возросло на критичные размеры либо нет в процессе именно в процессе разработки фиксировать эти ситуации кажется не очень разумно потому что реально какие-то вещи заносится и к тому же процессе мы и некоторые библиотеки заменяем на те важные соответственно размер тоже увеличивается когда мы возвращаемся к релизу то значит он хоть и уменьшается но уже какой то еще 3 то есть он прыгать как вверх а так и вниз поэтому в итоге как-то фиксировать разумно мы не нашли решение хорошо но какие-то метрики вы собираете технические по релизам либо это если абстрагироваться от размера приложение непосредственно собираем конечно статистика статистика на пользователя физические метрики как я понял хорошо спасибо за доклад я хотел бы спросить про картиночки я видел ваших складах что вы используете растер маститах а я в курсе то что мы при сборке если вы спросите вектором все равно переводится в растир вы не сравнивали поскольку где оптимальнее в компании в размере я понял вопрос да было предложено этот момент такая технология что картинка может быть представлены векторе и как позже выяснилось xcode при сборке просто создает для каждого масштаба соответствую картинку но как бы еще к этому я видел статью где результаты этой работы в общем-то невысоко оценивался говорил что здесь есть проблема но и опять же в моем примере с картинкой картинка прибавила 5 мегабайт не знаю сколько она стала лучше может быть оно стало как-то быстрее загружаться но все-таки это размер насколько как бы это правильно или нет большой вопрос тем более опять же вот есть негативные отзывы что стало для кого-то хуже вот как то так если на этом все еще раз спасибо за внимание"
}