{
  "video_id": "mRpLabtshfI",
  "channel": "HighLoadChannel",
  "title": "Тестирование производительности DNS серверов / Андрей Лескин (QratorLabsHLL)",
  "views": 258,
  "duration": 2201,
  "published": "2017-04-22T14:46:43-07:00",
  "text": "здравствуйте меня зовут андрей немного небольшая ошибка не лезь не на леске но это так небольшое то давайте с вами поговорим о том что такое dns какие бывают сервера немножко их потестируем а также какие особенности и подводные камни мы получим при работе с ними так значит что такое dns я расскажу быстро я надеюсь что большинство здесь присутствующих знает в двух словах это сервис преобразования доменных имен в айпи адреса доменными именами оперируют у нас люди айпи адреса my машины ну помимо этого есть еще некоторое количество достаточно большой различных плюшек но для этого придется изучить порядка полусотни 51 или 52 р и все документа который так или иначе затрагивают dns причем самый первый из них был написан в восемьдесят седьмом году 1987 последние выходят вплоть до наших дней постоянно постоянно это развивается этот сервис является очень востребованным и так dns-серверов который является основой всего сервиса очень много вот на слайде можно увидеть пример сервера который занимает всего 107 строк на питоне это вполне себе сервер отдельно стоит вопрос его функциональности но он работает когда в эту тему залезаем глубже в википедии например у нас есть адрес от 20 серверов если есть еще больших становится больше вот глаза получается вот примерно такими такими они были у меня вот но идем дальше и приходим к вопросу классификации сервера бывают в принципе 3 в общем случае двух типов авторе нативные каширу ющие автор это тивные сервер отвечает за зону он знает все только они и на запрос который он ничего не знает мне его разом он честно скажет что ничего не знаю каширу ющий сервер служит у нас для облегчения работы артрита тивных но и для ускорения собственно всей работы всего протокол чтобы конечный пользователь получал меньшую задержку прежде чем потестировать давайте посмотрим что мы хотим от сервера первые первое свойство которое мы хотим эта скорость сервер должен быть очень быстрым на любой приходящей запрос особо не задумывалась сразу выйдет ответ второе это устойчивость сервер не должен падать от чего-нибудь он не должен задумываться сильно на какие-то особенные запросы вот примерно вот это вот устойчивостью производительность это такая метафизика каждый сам понимает как он хочет но можно сказать что производительность от скорость плюс устойчивость и так далее и так далее в общем некоторые совершенно замечательная характеристика при этом нам совершенно неважно какой сервер у нас победит если у нас победит а в 30 вный сервер то мы его поставим развернем это я примерно сейчас рассказываю чего мы хотим добиться и он будет отвечать на за на наши запросы если победит каширу ющий сервер то мы развернем его он будет замечательным и он у нас будет в качестве frog фронтенда к боковому серверу который и у нас может в принципе любым главное чтобы хотя бы не падал вот тогда ну каширу ющие у нас будет отвечать на все преходяще и запросы ну и запоминать давайте посмотрим на какие-то особенности той задачи которые мы ставим перед собой значит мы будем рассматривать задачу с двух точек зрения значит сколько у нас бывает доменов доменов у нас будет немного будем их мерить десятками или сотнями и вряд ли больше вот это первая особенность а вторая особенность это то что у нас должно быть очень много запросов прям очень вот очень очень много запросов потому что но в первую очередь мы все-таки занимаемся различных деда сам во вторую но надо же посмотреть как как деградирует сервер прежде чем приступать к кому-то тестирование надо посмотреть что делали люди до нас значит тестов очень много запросов google этом скачать dns бенчмаркинг бесплатно без sms выдает огромное количество различных ответов каждый из них можно посмотреть но они делятся все на несколько категорий первая категория это использование различных утилит вроде dns первый раз первых очень много написаны под много что хотите берите пользуйтесь они устроены примерно следующим образом берется некоторые пул доменов после чего не запутаются к серверу и сервер смотрит пост после чего это утилита смотрит на время ответов и это на самом деле ключевая характеристика которой они рассматривают именно время ответов но у этого подхода с нашей точки зрения есть несколько минусов 1 минус это мы не можем хоть сколько-нибудь нагрузить сервер потому что ну не получится сгенерировать такое большое количество запросов а второе это то что эти утилиты дают extended time статистику которая нам в принципе тоже не нужно потому что практика показала что сервер либо отвечает либо не отвечает но если он отвечает он отвечает достаточно быстро и поэтому вот там милисекундные разницы нам не так важно дальнейшей пример у нас есть это те теперь реплей какого-нибудь пула есть очень хороший пример бенчмарка на сайте и div и это такой dns-сервер они взяли большой большой пул данных порядка шести миллионов запросов после чего за сделали ему тисе пи реплей посмотрели как ведет сервер принципе тут можно сгенерить любым любой дам данных но все упирается опять же в псв количество запросов в секунду там можно достичь величин порядка 500 тысяч 6 тысяч 600 тысяч и вряд ли больше поэтому мы тоже отбросили этот случай и в принципе немножко по аналогии у нас встает вопрос это если мы берем дамп данных каких-нибудь реальных или вообще данных идеального мира где все друг другу верят и у нас все хорошо чем нам это не подходит но потому что на на реальных или леди или идеальных данных мы только сможем посмотреть какое-то не очень корректно или очень корректное поведение различных серверов что у нас в принципе не устраивает поэтому вопрос о том как мы будем тестировать он остается открытым и мы пришли к выводу что делать мы это будем так мы возьмем армию ботов и будем эту армию просить запрашивать один и тот же даме в больших больших больших количествах какие только сможем на генерить естественно для большего теста мы немножко по варьирует количество доменов поэтому вот у нас есть вторая картинка очень похожая на первое вот так мы будем тестировать значит что мы будем мерить ключевые характеристики значит здесь меня немножко покусал какой-то любитель по сокращать поэтому здесь несколько сокращений есть значит будем мерить запросы в секунду и ответы в секунду насчет вообще по количеству пакетов в секунду мере все это дело будем ведром и я сделал акцент на том что он фрагментации пакетов мы не допускаем поэтому в идеальном случае количество входящих пакетов должно совпадать с количеством исходящих далее мы померяем трафик всего этого дела тоже опять же как входящий так и исходящие и тут надо понимать что исходящий трафик у нас будет больше чем и входящий к серверу потому что dns-сервер естественно дописывает какие-то данные после чего даёт их обратно на счет посмотрим на загрузку системы самого процессора можно было бы также посмотреть на память но опять же практика показала что память грузится ровно настолько какие у нас зон или какой у нас кэша и мало на что она выделяется больше поэтому тут надо смотреть какого размера у нас есть зоны значит следующая характеристика это поведение при повышении нагрузки то есть мы сначала будем например давать атаку 30 ну не то что а так вот там 30 мегабит в секунду 60100 без перерыва и смотреть как деградируете как деградирует сервер нам очень важно чтобы он если деградирует то плавно и не было никаких резких обрывов падений и прочего вот это нам очень плохо у каждого сервера естественно есть так какой-то различный конфиг который можно покрутить есть ключ алки которые можно подключать мы их естественно покрутили его включали и оказалось что основная крутилка которая есть это количество рабочих трейдов у сервера вот мы их покрутили при различных сетапах посмотрели сравнили а потом будем сравнивать среди победителей в рамках одного сервера будем сравнивать всех победителей на какие сервер и будем смотреть их много мы вот выбрали такой список здесь их 8 штук нсд например можно слепить в один но мы их разделили потому что разработчики их очень активно разделяю том что говорят что иногда 4 это круто н с д 3 это старая носты обл если внимательно посмотреть на этот список то здесь у нас нет биндо я объясню почему мы от него ушли значит во первых мы посмотрели много различных бенчмарков большинстве оказалось что бен тут такая маленькая полоска внизу который практически ничего не отдает поэтому вот это уже неинтересно в дальнейшем еще бинты конечно следование он следует всем эры псину это следование отдается очень тяжело потому что со временем он превратился в такой большой монолитный кусочек чего-то очень интересного в которой довольно тяжело залезть а очень хочется разработчики работают над этим но вот авторитета не свой подорвали и поэтому мы его исключили справа можно посмотреть на железке которые мы смотрим на которых мы все это дело крутим начаты все это у нас находится позвонили нам линуксом gentoo версия ядра 379 вообще говоря ваниль ность всего это то чему мы следовали на протяжении всех тестов мы брали самые дефолтные конфиге какой то какие только можно сервера собирали просто и мер чье имя сервера без каких-либо опять же дополнительных экивоков ну если разве что там какие-то тенденции она тянула вот она тянула далее для авто это тивных серверов мы взяли сформировали 300 доменных имен и зон в каждом из которых взяли под домены там еще несколько добавили и вот на все это дело смотрели как оно крутится преимущественно о записи для каширу ющих серверов это естественно работать не будет поэтому с каширу ищем и мы поступили так мы перед тестом прогреваем кэш на на именно на те же самые 300 300 имен имен больше на 300 зон и смотрим как она себя ведет естественно стараемся чтобы кэш у нас не протух посредине тесто потому что это все все у нас порушит значит вроде с самим сетапом и тестами - мудрость заговорились давайте посмотрим на сами тесты значит прежде чем перейти ко всем победителям нужно посмотреть как у нас ведет себя один сервера при различных сетапах вот у нас пример сервер knot или not его там по-разному называют его называю нот и так и буду называть значит черная линия она на протяжении всем будет это какой-то входящий трафик здесь это мегабит в секунду и именно трафик поэтому исходящие это цветные линии они находятся выше зато она так на такого рода графиках очень хорошо видно кто у нас победил естественно самый быстрый сервера тут который выше и сильнее вот вот вот его специально даже выделил вот примерно так мы выбирали каждый раз победителя после чего этих победителей сравнивали вот так они сравнивались значит здесь вот для облегчения восприятия еще нарисовал специальную табличку где указано просто их их места иногда я уже сразу объединил потому что они сразу крутились но опять же если внимательно посмотреть то ли не здесь сильно больше чем восемь чем это объяснить во-первых тем что в рамках одного сервера не всегда можно было четко найти победителя поэтому вот для серверов нсд пришлось брать там два конфига и выводить его и смотреть как они себя ведут но и просто это любопытно отдельно стоит server not которому мы нам пришлось взять две версии 120 и 130 причем она уже тогда была release candidate еще тогда было релиз кандидатом сейчас уже есть released но все равно почему мы так сделали я расскажу немножко позже пока примем это как данность и вот так она себя ведет значит какие здесь есть интересной аномалии вот и дефо против power dns если я не ошибаюсь значит power dns у нас просил чуть пораньше когда входящий пакет был входящий поток был 200 тысяч пакетов в секунду он немножко просел но тем не менее потом стабильно держался а и дефо она вытянула 200000 входящих пакетов но потом сильнее просела но впрочем потом дальше не проседала но вот такая как таковое поведение есть вообще и дефо отличило с тем что когда я посмотрел аналогии и поведения у нее влогах было написано на каждый приходящий запрос локинг локинг зон тебе имя имя файла про себя подумал что локи вообще говоря плохо из производительностью они плохо с собой работают но думал может может будет хорошо не оказалось хорошо давайте теперь так вот у нас был один домен в потоке запросов мы их увеличен вдвое теперь у нас их стало два вот у нас такие штуки интересные получились какие у нас есть аномалий очень сильно пройди просела и дефо объяснить это как-то сложно приходится с этим жить мы очень дико расстраивались по этому поводу но вот так оно и есть а теперь самое вкусное что здесь есть это сервер knot который свою производительность увеличил практически в два раза это дикий нонсенс мы дико порадовались после чего решили о'кейа давайте мы увеличим еще в 10 раз поток и но тоже увеличит производительность 10 раз но как нетрудно догадаться наивная точка зрения себя плохо повела и все немножко просела но все равно knot вышел победителем из этого челленджа поэтому вот в рамках нашего тестирования not not можно объявить победителя значит закончим немножко с тестами посмотрим на то какие бывают подводные камни у всех значит подводные камни делятся двух на два вида первый это локальные подводные камни присущие какому-то отдельно взятому серверу и глобальные камни или валуны там они разные бывают туры в присущей всему протоколу начнем с локальных вот как раз тот самый победитель knot версии 120 он отличился тем что очень круто падал именно падал но при на приходящий любой рандомный запрос вот чем его запулить хоть содержимым допью рандома он возьмет и упадет упадет с acer там радостно нам сообщит что к нему пришел не пакет но вот работоспособность его это не восстановит поэтому мы переходим поэтому нам пришлось взять not 130 который но в принципе тоже показывают похожую производительность следующий номинант это сервер и дефо который и без того показывал не очень хорошую производительность но при дефолтном конфиге умудрился за одну ночь тестов забить два терабайта дискового пространства своими лагами вот такие моменты тоже надо учитывать вот я происхожу утром на работу думаю сейчас я посмотрю у меня даже утилита не смогла результаты теста показать просто потому что у нее хватит закончилось место и ничего сделать нельзя тесты пришлось переделать на картинках там естественно показаны уже переделанные тесты но вот такие моменты тоже надо смотреть сервер пдн sd который мы рассматривали у него очень интересная архитектура трейдов вот у всех остальных серверов в конфиге количество тредов лучше задавать там единицами там один два три четыре пять шесть и так далее у пдн sd там задается десятками дефолтные значения если не ошибаюсь там 40 и 60 объяснят объясняем это тем что на каждый приходящий запроса но вполне от какой-то трек после чего ждет завершение там и этот редко кто разбирается естественно это тоже плохо влияет на производительность что и была отражена на графиках вот такие моменты тоже надо смотреть переходим глобальным камням которые у нас есть у всех по дому всего dns а значит первый подводный камень и это является его валуном таким большим и огромным это протокол людей пи на котором работает весь dns это такой протокол в котором нельзя гарантировать ничего вот мне пришел какой то пакет по протоколу видите я не знаю откуда он пришёл я не могу этого гарантировать на основе этого есть большое количество проблем все атаки основываются на этом вот такие вещи надо как-то учитывать у этого есть только какой-то относительно лом тером решения в качестве рекомендации могу вам порекомендовать почитать документ be happy 38 опять же когда это будет мы не очень знаем когда все его прочитаю это все реализуют следующая штука эта атака dns cache poisoning естественно уязвимым местом этой атаки являются сами каширу ющие сервера но при этом владельцем авто это тивных надо следить чтобы их данные не подменили это так наглядно продемонстрировал господин каменский в 2007 году но тогда еще все было очень плохо тогда ковыряйте о dns запросов они были постоянно наращивались и тогда их было проще угадать съесть это я такой мы комьюнити ввела понятие рандомного к в ряде и практически все сервера на нее перешли единственный сервер который сразу из коробки поддерживал рандомный к вере запрос рандомные айди запроса это был тайне dns от господина бернштейна то есть диджей в dns но он супер secure с него ничего не взять впрочем он секретность на сильно сказалось на производительности тем не менее к в рандомной ковыряете и хоть и как-то увеличивать сильно по 1 различного перебора все равно не является серебряной поле потому что существуют методики подделывать этот кэш и поэтому единственной пули которые здесь есть это dns всех он позволяет хоть как-то подписывать эти данные смотреть что они будут хорошие но позволяет проверять что эти данные хорошее но dns сект описывает некоторое количество данных в ответ и тут мы переходим к увеличению ответа что является переходом к нашей следующей проблемой который является dns amp dyno samp очень большая штука они можно говорить долго и серьезно практически часами если не днями здесь надо учитывать такой момент чтобы не получить dns анб надо сделать так чтобы в нем не участвовать я немножко хитро выразился но что это значит что dns антон является мы участвуем в день и санты мы можем даже об этом не подозревать но мы в нем поучаствует поэтому нужно сделать так чтобы нас там не было что да какие тут есть вообще специальные вещи значит внимательно смотрите за своими данными уже ставший каноническим пример сайт интернет со сайте который на и не запрос выдает ответ в 2 с половиной килобайта это немерено я плечу атаки что является очень хорошей характеристикой для злоумышленника для нас это какое-то дичайшее фаталити и мы не знаем что с этим делать по возможности конечно можно закрывать большими записи блогов большинства серверов есть там какой-то строчка в конфиге типа дизайне фолз дизайн был и нет руб вот но не всегда это можно сделать тем не менее смотрите чтобы данных было не очень много это вот такая вот балансировка у нас получается следующая открытая проблема это рекурсия которая смотрит во внешний мир каширу ющих серверов становится много каждый самый захудалый роутер который покупает себе домохозяйка крутит у себя dns-серверы мы не можем знать какой он там крутится вдруг она его воткнула в провод а дальше он смотрит во внешние миры спасут из способен отвечать на запросы приходящий извне вполне может быть и тогда злоумышленник может этой дырочкой воспользоваться впрочем когда это маленьких дырочек становится много это превращается в огромную дыру какие здесь горка раунды первое закрытие рекурсию извне вот сразу надо просто прийти и домашнего роутера просто проверить что вот она может или нет дальше комьюнити предложила response рейд ли митинг это тоже очень тонкая тема и очень тонкая материя который придется работать но в принципе она как-то ограничивает исходящие ответы хорошо о пакеты у которого есть который вышел за пределы ррл а есть два пути 1 очевидны это дробь мы его просто троп ним что в принципе не очень хорошо если этот клиент было у нас все таки хоть как то легитимным поэтому следующий шаг это slip slip это принудительный перевод этого клиентов тисе пи после чего это значит что мы берем этот dns запрос впихиваем пихаем в него фланг от ракет это равно единичке и отсылаем обратно в чем здесь проблема последние исследования вот совсем последние показали что три процента клиентов dns не поддерживают переход в тисе пи ну не очень конечно большая цифра но все равно это очень плохо мы будем искренне надеяться что эта цифра будет уменьшаться но пока вот все равно придется пользоваться мы не можем поступить иначе назовём это так дальше если к вам пришла какая-то атака смысле не какая-то денисом патока и вы не можете заблокировать vdp по каким-либо причинам имеет смысл заблокировать пакеты смысле дроп на уровне ядра пакетов у которых сур спорт 53 почему потому что скорее всего это будет ответ какого-то другого сервера так как вам праху вам по идее должны прийти запрос и ответ его мне очень нужны мы будем надеяться что у вас нет никаких заправить исходящих из себя запросов туда во внешний мир а это это ответы как аватаре курсора который забивает вам канал можно дроп этом это может облегчить вам жизнь но скорее всего да и не сам патока это и так эта атака на канал и она очень большая и тут имеет смысл просто аккуратно найти тех людей которые эти атаки едят на завтрак обед и ужин но еще и ночью периодически из холодильника берут это и так тонко значит что делать если самому выжить не получается мы долго думали на эту тему как нам можно защитить сам dns юдифь эта отдельная тема вот dns как защищать мы решили что мы будем ставить отдельный сервер при будет жить своей отдельной жизнью наряду с клиентскими dns серверами вот в качестве клиента я уже понимаю того ту персону или ту организацию которая придет к нам на чат и желательно что будет и персоны был какой-то скрытый nas-сервер которому никто никак не знают что происходит из внешнего мира приходят запросы на ns сервера клиента и они могут прийти к нам мы эти данные посмотрим если нам передали зону у нас все замечательно и все хорошо если зону на мне передали эту мы за этим за этим запросам сходим к апстримом то есть к этому скрытому серверу после чего получим ответ его раз портим сохраним у себя в общем выступать в роли такого каш играющего server in reverse proxy сервера если такого сервера нет принципиальна схема не сильно поменяется она будет выглядеть примерно похожим образом единственно что нам придется ходить все-таки к другим открытом всему миру сервером но все поменяется когда придут они вот имена они атаки в этом случае в худшем случае могут нагнуться ns сервера клиента они не смогут отвечать мы все еще как-то будем отвечать и на то что у нас есть а если к нам придет запрос которого мы ничего не знаем и нам нужно сходить к ops 3 му мы не сможем ничего получить и в этом случае мы просто данном скорее всего придется тихо молчать в тряпочку и надеяться на то что легитимный клиент заподозрив что-то неладное со своей стороны вот такая нехитрая механика какие вот здесь вот можно привести вывод я как-то очень быстро говорил какие выводы значит первое все сильно зависит от того какие у вас данные это в первую очередь потому что бенчмарков много аниме в зависимости от того что тестировались онера показывают разные характеристики я указал лишь то что у нас есть вот то что пригодится скорее всего именно нам дальше нужно внимательно смотреть на такие следить за тем что происходит вовне во внешнем мире и аккуратно от этого закрываться по возможности ну я надеюсь я закончил если есть у кого-нибудь вопросы я вопросы дальше сразу здравствуйте а вот вы упомянули о записи логов на диск я так не случилось ли это тестирование производительности записи логов я отдельно специально сказал что после этого я все это все тесты пришлось переделать после того как мы проделывали после того как мы убрали настолько extensive logging и все равно это все не спасло и дефолт такого положения меня вот вопрос такой я сейчас смутно помню какую именно a'pieu епишин их пакетов песок это но зачем вообще им нужны три д то есть как как эти две насера пользуются трендами если если вы не позволяет раскидывать по по нескольким трендом сразу или там можно и это рис осип из разных значит смотрите во первых операции извлечения данных о домене это не она не является элементарной операции поэтому запросы могут приходить быстро но он один запрос мы наверное можем обработать пока мы его обрабатываем ног может прийти еще еще несколько поэтому мы их разберём параллельно это первое второе в линуксе есть такая штука как красив мать apple мэсседж она немножко отличается от канонической листьев рисе фромы и recipe message который выдергивает один пришедший пакет это эта штука позволяет выдергивать сразу большой объём пришедших данных несколько пакетов после чего их опять же можно разобрать параллельно и ответил на вопрос еще вопрос и подумайте руки заранее что было видно путь 1 2 3 знака у вас тестах 300 за 300 доменов из них были ли на большем количестве нет не тестировали нам мы чем мы мы решили что у нас больше наверное не будет по крайней мере для начала поэтому мы взяли именно 300 зоны и на них смотрели больше очень очень растяжимое понятие тут можно перейти на тысячи десятки тысяч или и смотреть кому что надо спасибо подумайте заранее все ждут конца вопрос а если есть следующего просто тоже подымите обозначить себя спасибо вот у нас было такое случае клиент решил видимо защититься от мэннинга металла дате и запросы к нашим мадина серверу начал буковки подменять на большие маленькие тем самым убивая наш кэш один из и мы по 1с использовали как-нибудь вы с этим нет напрямую мы с этим не сталкивались конечно но в принципе написать там пару строчек из серии там тула варфейс на имя домена я не думаю что является большой проблемой но возможно условно метод очень интересны любопытные на самом деле смешной так если честно смеялись на поток да да се бон надоест я вижу двух подряд насколько я помню тени данные 40 ашер еще днс dns это авторитете немножко не так давно трехкомпонентный мы брали именно тайне dns кашира авторы третьих не смотрели они они написаны примерно с одной и той же механикой поэтому можно было увидеть как они смотрят ну и вообще говоря каширу ющие сервер они немножко медленнее чем авторе то тивные поэтому мы взяли несколько в списке посмотреть как они себя ведут меня сейчас тут конфликт интересов спасибо вы попали тестировать performance на динамических зонах дата соусом для которых было бы база готовишь не тот случай когда можно сразу вложить там всю зону на память об атоме выдавать а вот именно вот когда datasource база и данные динамически живут всегда там как бы и каждый раз это тащить по новой что вы понимаете по динамической зоной и правильно ли я понимаю что получается некоторые своего рода каширу ющие сервер или вы и вы имеете ввиду что когда эту зону можно продать лишний раз да да когда она птица постоянное вы не можете ее просто как бы смотрите как это происходит в 30 вный сервер когда ему приходят апдейт зоны он в принципе останавливает свое функционирование и обдайте и облетит эту зону ну или там зоны в зависимости от того что ему пришло поэтому опять же когда он продать он продолжил работать а каширу ющие сервера не что пришли они у себя сохранили вот примерно так нет у меня вот вопрос я вас просто пытаюсь переварить то что услышал у меня такой есть между непонимание значит каширу ющая dns-сервер на небольшом количестве доменов по и 9 у него всегда все данные а не в память влезут которые ему нужны все то есть там мы в принципе в принципе эта машина как ita software может быть запустится на без диска в машине и прекрасно жить без диска вообще в принципе получается что у него скажем так когда делаются репо сервера обычно там быстрый observer они строятся вокруг всяких & events вокруг особый событийных фреймворков которые позволяют минут работать большим количеством сетевых клиентов номер песка подозрение что получается что с ее дпс и типичным dns серверам который кэширует тебя это это не так это не работает потому что фактически нет никаких долгих сетевых задерживать когда мы клиент отправив что-то нам просто сразу ушло у нас получается что ивентов ивентах автор они не помогает и не работает здесь да значит смотрите ну во-первых код написанный при помощи ивентов очень любопытно наблюдать когда его только открыла посмотрел потому что в дебаггер и все прыгает замечательно и хорошо но разобраться в этом конечно можно если очень захотеть ситуация такая что все сервера этого списка не лезут файловую систему после того как они стартовали свою работу они посмотрели файлы зоны они сохраняли вы ну там есть отдельный портировал больших серверов они посмотрели как у них все это дело устроено и сохранили у себя в каком-то дереве они не лезут на диск поэтому вы можете там это ну грубо говоря данные с диска были прочитаны сервер был запущен после чего в этот диск выдергивая эти его носите с собой сейф она продолжает работать пока не упадет я просто потому что блока получается что вот разница между этими серверами она не в том что там они как-то там хуже или лучше но потом когда мы сравним и apache и nginx там все понятно 11 for cad 3d и поэтому он работать медленно 2 работает эвент поэтому на работу ну как бы срочно поэтому он работает быстро the cut если сильно упростить то в случае с в виде пишет нами dns серверами получается что вот такая примитивная вещь на такой позитивной разница она не работает потому что у них там нет нет блокировок на сеть и нет ваще батырова кино что и поэтому фактически тестируется внутренних структуры данных так я кажется понял что вы хотели спросить значит смотрите разделение на каширу ющие в 30 вн и и сервера является вот именно разделением некоторых paradigm of 30 вный сервер отвечает за зону он хранит скажем так первоначальные данные у себя кэшируются стоит где-то в середине и сохраняет промежуточные результаты они просто работают на разных парадигмах вот и все но 2 каширу ющих сера отличаются по скорости вот что что является отличие между ними то есть вот что они сделали авторы там того которые похуже что она стала работать именно в гамму это очень сложный вопрос тут нужно действительно очень глубоко лезть в код мы очень внимательно изучили server not который оказался победителем и у нас было несколько гипотез как как устроена жизнь что если что-то работает хорошо надо что-то отломать чтобы она работала не очень хорошо поэтому первая гипотеза которая у нас была это knot это то что он использует recipe мать и palmas лучше это единственный представлена сервер который использует эту функцию но в линуксе в windows нету этой поддержки они естественно много на эту тему заморачивались мы это выделили успешно это не дало никакой производительности скорее всего это уходит внутрь ядра linux там есть очередной лак на очереди может быть через год мы вам расскажем как этот лук выпилить если мы его выпилим значит дальше мы посмотрели как этот сервер ведет себя на совсем сложных нотах уайлд карты длинные синей мы вот это вот все в принципе тоже особого ничего страшного не случилось тогда пришло будем считать к нам озарение мы поняли что действительно архитектуры она решает вот выбранное архитектурное решение которое использует тот или иной сервер приводит к повышению производительность мы тоже самое как любой алгоритме к если у вас там есть сортировка пузырьковая сортировка в сравнении с курортом имеет разницу в производительности там во много-много раз просто потому что они архитектурно по-разному подходят к этим вопросом тоже самое можно по dns д посмотреть который вот имеет такой интересный архитектуру трейдов вот примерно так именно архитектуры вот если очень интересно можно залезть и посмотреть прошел чего вопросы вопросы вопросы понятно если ничего просто отлично спасибо за доклад очень интересно было послушать вы говорили то что кнутом в процессе тестирования падал до как можно такой dimon использовать продажи значит естественно нельзя поэтому я говорю что это такие это вещи которые стоит проверить перед выходом в продакшн значит когда мы узнали об этом падением естественно связались с разработчиками погрозили им пальчиком они сказали что да вы молодцы эту штуку пофиксили написали тест и обещали больше так не делать вот примерно так недавно вышла версия 130 она естественно она еще ту версию которой мы тестировали 130 арси 5 уже была лишена этого недостатка вы после фиксов тесте под нагрузкой конечно можно понять он на слайде бы были нарисованы именно график сервер окно отверстие 12 body perfect но коллеги помогли сделать мир чуть лучше да как будем на gives a спасибо"
}