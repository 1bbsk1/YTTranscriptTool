{
  "video_id": "bqhLv5tfcTA",
  "channel": "HighLoadChannel",
  "title": "Интервью с Петром Зайцевым (Percona)",
  "views": 129,
  "duration": 1526,
  "published": "2021-10-04T02:42:07-07:00",
  "text": "и снова здравствуйте а мы с вами на конференции highload второй день только начался и здесь я вместе с вами не 1-ом месте со мной здесь пётр мы находимся на стенде компании перка она петр здравствуйте такое впечатление что вот я вижу огромное количество людей и все из разных городов ног не просто из другого города ты с другой стороны прилетел специально на high лот да верно как хочу перелет до отлично самом деле сейчас хорошо летать самолеты не забитые самолета не , не сильно но на самом деле мы конечно здесь на конференции кайло ты вчера был доклад а может немножечко нашим зрителям рассказать о чем ты вчера обещал вчера у меня был доклад и назывался мой стиль этого верить и грубо говоря а он о том что если у вас есть mais quel не может быть что-то работает не так как хотелось как можно ему заглянуть под капот над и посмотреть внутри что как там работает да там и в некоторых как как такой кардиохирург открыть так сказать подкапотное пространство и посмотреть а как там вот внутри джейн . ну да да правильно там же собирается куча куча разной статистике информации которые в принципе если ее понимать то морской можно заводится заставить куда лучше вообще этот интересный момент о том что ждет посмотреть в среднем базы данных особенно в в claude до этого блока они работают ну наверно может процентов на 20 до своей возможности на этом от процентов да я бы сказал где-то вот на 20 процентов огромный запас по производительности который можно выкрутить если понимать что конечно да конечно но обычно многие разработчиков базы данных не любят да там а наши ты там клауд вендоры особенно они предпочитают чтобы ван даст база данных по кредитной карточкой да есть у тебя карточки это хороший взгляды конечно если база данных тормози значит нужен побольше инстинктам побыстрее у лизки это тоже важное сергей сеть вас и процессор важно но как бы некоторые сочетанию но конечно всего это и и описывается дата обычно чем у вас и больше размера и сосать ему диски могут выстрелить подключить которого стиле работает и все эти так далее вот то есть то есть вот так вот это вот в свое время да там когда воли дата центре каждого сервера заказал надо ждать как бы три месяца пока приведут к локэйшн в некотором смысле когда ты размещаешься там ну в любом случае были больше задержки поэтому людям просто приходилось да уже выжить из базы данных больше сейчас часто это ненужный на этом ну скажем так тратиться да там лестница колоссальная все деньги колоссальные ресурсы суши ну вот ты говоришь что на 20 процентов примерно ну так вот на скидочку работает ну производительность баз данных это значит что если мы будем точно понимать что происходит мы сможем подкрутить какие-то показатель а вот например что нужно на что нужно обратить внимание вот сразу сходу вот ну так вот в первом приближении но ты знаешь в базах данных наверное самая большая вот проблема то что разработчики плохо понимает как работает индексы вот и интересная вещь какая что вот если у нас есть какой-нибудь запрос база данных до который индексирован неправильному не хватает индексы мы построили правильные индексы то разница может быть не в 2 не в три раза может в тысячу раз производитель тысячу раз да и буквально несколько вот таких плохих запросов они могут очень сильно но и изменять загруженность база данных или требования по железу на котором она может хоть как-то работы да то есть это вот наверное первая вещь это провода от куда там дизайн схемы это вот уже более такие глубокие вещи ну я знаю например что когда мы какую-то базу данных разворачиваем например в облаке нужно очень четко понимать таких дисках это история крутится ну чисто если вы берете кусочек диска вы получаете какое-то количество и обсох ну соответственно вот это тоже историю нужно обращать внимание на то как они связаны с конкретным провайдером и как у него каретный провайдеры так далее но и этого тоже есть такой интересный как бы сайт так скажем да когда самый лучший and если у вас база данных не очень большая дата то часа добиться когда у нас большая часть власть в память даже тоже разница конечно то что у нас работает в памяти это у меня небо конечно да мы получаем совершенно другую производительность но тут же мы сразу как это как это эта монет когда с одной стороны но в памяти работают очень быстро другой стороны риски сильно возрастают потерять это данные нет но вопрос здесь это больше о каширования когда она данные размещены конечно на диске но из базы данных и кэшируется поэтому в рамках стандартной работа диска практически а обращение обращение нет это же вот но на самом деле знаешь есть такие как бы разные интересные школы да там есть люди которые блин вот мы хотим чтобы была вся база данных памяти да там очень много тратятся на кита бешеной incense у которых там tarra white память и так далее с другой стороны людям уральская быковы олдскул которые выростали когда памяти было совсем мало а не наоборот да там немножко выделить на кэш остальное на дисках и часто эти о подхода они не очень хорошо с точки зрения эффективности да там есть вот некоторая такая но как во всем зла понять желто-серый да надо наиболее часто используемые данные живут в памяти но всякий как бы там мусорка какие-нибудь там транзакции которые кто-то сделал три год назад они живут на диске в памяти им делать нечего вообще вот вопрос с одной стороны это же вопрос оптимизации то есть нужно понимать как такой дизайн не знаю можно смазывать на дизайн системы то есть когда ты очень чётко понимаешь какие у тебя данные как они должны лежать как как нему обращаться на сколько сейчас вот ну по твоим ощущению видно что этом уделяют внимание на учат этому рассказывают делятся опытом вот именно вот в этой части но на самом деле на мой взгляд какой но и особенно по мой опыт он больше связан там с американским с европейским рынком когда у каждого языка очень много приходит программистов да у которой нет такой вот фундаментальной подготовки dataset есть из посмотреть как бы там 20 лет назад да там народ шел там программисты часто технических вузов они там знали теорию сложности алгоритм их там математикой мувспида там час икс может быть типа вот я прошел двухнедельный код курсы программирования на java скрипте вот я теперь там front-end developer да там у которых понятие всех этих вещей очень такого не просто знают что вот если я делаю так получай атака что почему что это работает только не знаю да там на 10 тысячах объектов они этим как бы не не заморачиваются да и вот и поэтому очень много на мой взгляд вот вещей сейчас которые а архитектурный не очень не очень хорошо и другой стороны понятно нас есть большие компании да там если посмотреть там google фейсбук да и так далее понятно что если там уж совсем тупить ну работать на этом скерри не будет да то есть понятно что у них все эти о дате от глупости они уже вырезаны ну и что очень интересно это вот такой рост как бы успешного старта по датам когда собственно говоря с начали написали гавно код вот он на первых 1000 десяти тысячах людей он работает а вот потом нужно надо наносить и тысяч до миллиона да там и тут уже выясняете что двухнедельные курсы подготовки программист java скрипте не совсем дают то что нужен для вот этого нужна вот эта фундаментальная мне кажется такая история потому что стартап это же попытка проверить какую-то гипотезу и тут внезапно она подтвердилось да а тут надо уже включать серьезную работу когда у тебя начинается highload тебе нужно уже понимать что делать этой нагрузкой как и обрабатывать как ее держать как и принять как как и обработать как не потерять данные в моменте а вот с одной стороны вот мы поговорили сейчас про фундаментально вот эту историю что ну нужно получить знания а есть сейчас как ты видишь может быть какой-то уклон получение практических знаний ну вот очень но я сталкиваюсь с ребятами они говорят вот мы работаем в небольшой компании и наш опыт очень сильно ограничен понятно да небольшая компания небольшие продукты они для бизнеса хороши потому что они решают бизнес-задач всякий но там нет действительного эхолот нагрузки там нет вот этих вот сложных запросов и понятно что он бы хотел может быть получить этот опыт но не может потому что он просто тупо физически не где он даже может прочитать об этом но воспроизвести вот эта вот и политическую ситуацию с этой нагрузкой ему сложно если сейчас какие-то возможности для вот этих ребят которые возможно наша смотрят илья ли я бы хотел попробовать но где ну как ну вот смотри во первых если они смотрят то они уже на правильном пути да там потому что супер выхода потому что хайло вида красная конференции да там где можно брать не только послушай да но и наверное поговорить с людьми лично об их ним опыте и мне кажется всегда это очень важно потому что в книжках и таких вот ну глобальных презентации обычным все немножко как бы рафинирована упрощено да ну тебе люди не рассказывала тогда уж это там когда пьете пиво может наверно вот мы говорили так на самом деле значит мы там обосрались это только тебе скажут между собой да там была рада вот это вот очень очень полезно на мой взгляд такие с ужином хорошо если бы было возможно я знаю что есть некоторые программы в облаках есть возможность на попробовать ну взять какие-то сервисы ну потестировать далее с одной стороны вот этого не достаточно для того чтобы реально полноценную работу с другой стороны вот для тех кто хочет попробовать есть вариант прийти и так все эти вот на каких то хотя бы маленьких примерах сгенерировать папу попытку вот это вот нагрузки и посмотреть как это будет да нет конечно конечно можно сломать попробовать но я бы тоже не слишком много на это полагался да потому что вот сложности они возникают обычные тем что вот я поднял как бы тысячи серверов они что-то запустила но как бы все работает да то вопрос когда это вот все в реальном использовании да там возникают разные интересные alizee эффекты да там которую вниз и клаудом вашим там приложением пользователи да там которые часто неожиданные на этом это вот мне кажется что интересно на сверх больших проектов да и к чему они готовы что каждый день происходит что-то неожиданное связано с кем угодно какие-то новые там глюки в совке данном которую обновились или какие-то железки в интернете какие нибудь там происходит да там свои эффекты датами вот это вот мне кажется что вопрос успешных команда томасу жена очень passing ресурсы он связан с тем что они не просто как вот ну знаю да там а то что они готовы решать новые проблемы когда они появились такой навык trouble shooting а фактически навык trouble shooting of окно на навык трэвал шутенко до разбираться быстро думать и вот он как раз таки вот на мой зад очень сильно связан с пониманием как работает система да потому что если опять таки ты делаешь что-то очень простой особенно что что для тебя делалось 10000 раз да там вел запрос google скопировал там не знаю там коды с какого-то из ресурсов диска на хотел и все работает да там но если же вы действительно стал tesco с какой-то более сложной ситуации это нужно же понимать что работает как почему до того же тени работ но смотри мы немножко коснулись твоего первого доклада горбу вчера да сегодня сегодня ты тоже выступают да сегодня мы будем рассказывать о базах данных повернитесь вот это прям хардкор ненько так давай вот и в непосредственно о том как есть такой дизайн поттер собираетесь и он называется копирайтер на этом оператор оператор отсюда программный компонент который стремится заменить в этого как бы самого человечек который там будет ставить свечи делать баков и апгрейде но все это автоматизировано вот и мы будем рассказывать о том как вот этого оператора сделать правильно и какие там есть проблемы подводные камни да там и с чем мы столкнулись мы сверху не занимаемся разными базами данных да там и вы уже написали скажем два с половиной этих операторов да у нас есть оператор для москвы и для манга devil час выпустили а там бета-версию операторы для по сгрыз поэтому уже несколько раз ели кактус и собственно wearing решили поделиться с тема о том что нам удалось уже важно не просто есть кактус важно понимать какой стороны вы курс идеально правильно так важно чтобы этот опыт он был позиции rowan знаешь я какое то время назад был ярым противником того чтобы бату размещать внутри кубер нить из и но последнее время я все чаще и чаще слышу его до тебя что ну это нормально ну как бы вот есть кубер нить из есть инструменты давайте им пользоваться вот долин в том числе для баз данных а вот по твоему мнению возможно ли добиться хорошей производительности внутри губерн и для базы данных ну смотри а на самом деле здесь все того повторяется да вот я помню в свое время люди очень боялись переносить база данных в виртале зова ную среду у это было точно дам а потом гарри ой блин базы данных клауд а не как никак нельзя прошли годы люди стали все более боль уверен и верните идет точно по такому же пути да то есть мы начинаем что у нас тест ндф уже переехали выбирайте доверяют у нас как бы начинает пережатие вас к он не самый как уменьшим критиков базы данных и они там работают нормально из достаточно для них производитель если у вас есть какой-нибудь я не знаю там мега сервер у которого там megastore и база данных на 50 терабайт на одной ноги живет да там на которую вы там молитесь да там опасная ситуация чуть чувствуешь жжение в нужном месте да да готовить чтобы она никогда я не трогать аккуратненько вот такую базу данных конечно вот сейчас переносите поверните с номера не 100 до то есть понятно даже не но я бы сказал о что если смотреть на особенно число бастан большое большое число вас данных даже в корпоративной черни небольшие а там есть всякие там баночка данных для этого для этого они отлично живут особе особенно когда мы переходим к микро сервисным архитектура где у нас маленький по настоящим маленький сервис мама male male мой маленький домен внутри которого небольшое количество данных количество запросов опять же не критическая к это да конечно конечно вот а что интересно с большими базами данных да то есть у нас тут есть вот это вот небольшой слой datang мы говорим это 10 база данных не знаю там 50 вот но если нужны базы данных больше понятно что тот же самый не знаю дам facebook вконтакте twitter один сервер не засунешь какого надо конечно дочь они все всегда сортированы когда ты делаешь сортировать то размер шары ты можешь выбирать обычно достаточно гибко и здесь вопрос том то что для обернитесь обычно ты выберешь меньше размер меньше размер шарда чем если вы ты работал с ну там не знают физическими физическими железками уже а вот есть кое-то кредиты ну вот сейчас этот размер он как-то ну так вот он опытным путем подбирается или экспертная оценка ну так оно на самом деле я бы сказал так что вот если вы если просто так то взять с потолка цифр это несколько сотен гигабайт но на самом деле все танчить есть зависим от требований по доступности от инфраструктуры с чем это связано часто с тем то что нужно ну ри стартовать как бы базу данных или проводить синхронизацию все это зависит от том какая технология насколько быстро сеть диски диски и так далее да то есть и я бы рекомендовал это ну просто про протестировать а вот эти вот разные стандартные и нестандартные вынуждены результатом сценарий сбой дата чтобы понять что происходит и насколько вот эти вот эффекты они а ну допустим еда для разного приложения к сожалению вот тысяч говорил что вы написали несколько операторов уже дали соответственно для маску или для mongo db и совместно для вот сейчас в процессе работы на отгрызть на по звезда с уже будет очень интересно а сколько времени в среднем ну ту же по опыту занимает вот эта отладка вот оператора для вас но смотри на самом деле здесь что интересно мы в перк они нас уже много-много лет опыта о том собственно как эти база данных правильно готовить и вот основная наверно суть к боковой и сложность это накопление этого опыта потому что потом все что было сделано всякими там чел скриптами или как вы там инструкциями с несколькими шагами их нужно закодировать и отладить в оператор вот ну то есть это как бы у нас у команды заняла на каждый оператор я обыскал несколько месяцев для вас для первой версии но и второе до тому как у всех вот таких вот систем сложных да там происходит уже много месяцев и я искал даже лет до то вот это вот поиск разных кейсов да там и обработка острых углов с одной стороны с другой стороны есть очень много да тоже разных сценариев которым людям как бы хотелось бы площадь базы данных да там и не только один поттер дотану поддержка разных требований которые бывают но особенного enterprise среда знаешь что задам необычный вопрос он необычное не потому что как бы вот он он принципе необычный потому что это обычный вопрос разработчика базы данных человек который использует надо но он необычно для конференции потому что здесь мы на конференции highload музыки серьезных нагрузках а больших как бы объемах говорим но сейчас май месяц мы в мае проводим эту конференцию и от меня есть дипломники некоторые и когда они своей показывают системы я говорю ребята давайте мы с вами подумаем зададимся себе вопросом очень важным про который вы в курсе баз данных еще не проходили потому что вам это было не нужно вот этим не сталкивались вот вы запустили ваш продукт и он эксплуатируется но через какое-то время вы захотите сделать изменения обновить базу базу данных обновить схему соответственно обновить какие-то микро сервис это которые будут работать и у тебя вот эта история это ну такой для начинающих ребят это очень сложный вопрос а как обменять схему каждый правильный подход и вот с одной стороны есть уже разработаны и инструментарий для каждой базе данных и помощью хорошей практики так мы это будем делить а но вот мне кажется водку верните то что ты сейчас говорил да вот это вот история еще как-то не не проявилась может быть есть какой то уже накопленный опыт ну ваши компании о том как правильно вот эту задачу казалось бы школьную немножечко доделать уже все равно на продакшне вот на этом большом и взрослым и но у нас есть тузы на там которые часто люди используют для онлайн изменение базы данных да там и повернитесь и много операторы сами поддержит нами одна из ключевых фич это онлайн апдейта базы данных да там вот что важно вообще этот какой вопрос конечно очень очень важно да там и что семья часто сталкиваюсь да то что вот первый этот сказочный простой вопрос задам следующий вопрос который я задаю есть у тебя проект живет ну там пять десять больше лет это обычно даже уже вопрос не то что ты будешь апдейтить а где люди даже третье-четвертое поколение да там и очень часто вот люди об этом не задумываются дела какие-то архитектуры к датам решение которое с которым они могут разобраться но они настолько нестандартны да там что очень часто при смене поколений возникают проблемы что не зная завались им не поддерживаем ну да во первых не понять другим людям уже не понятно зачем так было сделано с одной стороны а с другой стороны блин а когда задевали платье как раз оператор очень полезен тем что он не настолько гибок как стандартные база данных он чем-то языку дать ему же как у облачным решением да там берешь и между мой менеджер какие-то решения да есть и диском дтп с извести россия но вот у нее есть там какие-то небольшой набор параметров но она работает именно так и это как бы всем его оператор в облаке уже оптимизировала под свое облако под свое железо под своего дни драммеры у на группу операторы позволяют окно получить все этого one source или того это важно но при этом тоже получить некоторый такую больше стандартизацию чем мы получаем просто ставь база данных из пакетов как опыт а вот кстати хочу заметить для всех кто сейчас нас смотрит что здесь на стенде препоны есть возможность нам на прийти и есть расписание можно пообщаться с экспертами кстати обсудить вопрос баз данных обернитесь это очень важно на мой взгляд и в течение целого дня до самого вечера из на стенде будут эксперты ну помимо тебя под а кто еще будет здесь у нас будут все другие ребята из из команды персона нас есть два сергея вот как раз и один будет рассказывать про базы данных noc оберните с другой цепи чисто от монитор вот николай у нас тоже большой эксперт будет рассказывать про нашу тусу перед и мимо персона motrin менеджмент которую который как раз таки мы причем в вечером будут дома дома какие-то да да да тем кем показываем конечно можно можно можно будет пообщаться и пообщаться если у вас даже есть если кто использует наш продукт мы с удовольствием вам посмотрим на вашу базу данных и скажем как чтобы она работала в среднем не на 20 процентов серьезные деньги на самом деле мне очень нравится вот эта вся история и от большим удовольствием бы присоединился а если меня отпустит трансляции то я обязательно приду потому что тема баз данных обернитесь но она на мой взгляд очень актуально прим вообще то что вы делаете это ну какой то космос я с большим удовольствием наблюдаю затем что вы делаете и всем кто нас смотрит конечно всех приглашаю приходите здесь ребята так своими руками но с 20 до 75 до 80 процентов догонит да на этом все мы прощаемся с вами пока"
}