{
  "video_id": "f_S9M2SezAA",
  "channel": "HighLoadChannel",
  "title": "Camunda на микросервисах / Александр Трехлебов (Промсвязьбанк)",
  "views": 13765,
  "duration": 3213,
  "published": "2019-05-15T05:10:02-07:00",
  "text": "добрый день коллеги меня зовут александр которых банки архитектуры приложения собственно для всех презрительного почему gpm обсуждается на такой конференции как highload где эти приоритеты то высокие нагрузки какие-то сложные вещи по мониторингу обитым таким не относится здесь все просто вот есть конкретная проблема , системами которые существуют не только в банках но других там предприятиях там таргана где логистика торговли еще что то такое вот проблема собственно и заключается в том что до сих пор большинство ритм систем представляет из себя нормально спасибо большинство bpm систем к до сих пор особенно проприетарных представляете большие монолитной коробки вот с которым приходится работать вот чтобы подойти проблемы и предлагаю коротко поясню что такое общей любви dpms как это выглядит и собственно сказать про то как мы решаем эту решая проблему с большой коробкой gprs там сам общем виде если брать нотации bpmn то выглядит примерно так то есть это такая своеобразная блок-схема которая писать последовать действий действие это определенные элементы операционные ли еще какой-либо бизнес деятельности вот отличительной особенность это есть блоки которые отвечают за системные процессы которые выполняются серверах там еще в каких-то системах вот и пользовательские задачи как я сказал что авторы вторая часть блоков представляют из себя польски задачи их вот еще часто называют хьюман тасс вот собственно за этими действиями конкретно стоит пользователь что сама себя представлена технологический пистолет как правило бизнес-процесс но вы тоже нечто среднее между конечным автоматом мы простые простой линейной простыми линейными операциями вот которые бывают с явлениями бывает без вас параллели с распараллеливание вот почему я провел параллели с конечными автоматами это потому что при выполнение бизнес-процесса он всегда останавливается в каком-то состоянии новую обычно останавливается на действие пользователя вот но может ожидать код сообщения вот или сигнала либо ещё что-нибудь такое вот для чего же вообще все это нужно почему часто применяется дело в том что для автоматизации процесса малых описать как правило еще требуется отследить все те действие которые выполняются желательно залакировать потом представить видеоотчеты китаем и самый любимый бизнес обычно просит вот ну и там на всех остальных таких вещей вот ну коротко можно как-то выразить то есть а бизнес-процессе искать структура вот отраженная с помощью модели bpmn есть я говорю показатель активности рекламе бизнес-процесса вот ну и из такого что хотелось бы отметить это механизм изменения бизнес-процессы на лету то есть есть такая часть бизнес процессов которые можно изменять не только силами разработчиков новые силами как минимум системных аналитиков иногда и бизнес-аналитиков вот и вне какого-то релизного списания просто по необходимости но это к сожалению возможно не всегда бизнес-процессов также бывает версии то есть бизнес процесс запустился какой-то версии то он собственно в ней должен закончиться какая же возникает необходимость перетащить процессу новую версию потому что уже реалии изменились но там возникают разные способы мигрировать это все бизнес-процессы и как правило в мониторе цик контролируется там либо бизнесом либо администраторами between процессов а вот ну и последнее что тут есть к контроль времени собственно за цель снова я основатель доклада это вот как раз разобраться с коробкой дел том что вот если взять основных производителей тамара колыбель которые поставляют в общем то решение для объем для битья это как правило такая вещь в себе причем настолько что versio не рование кода и средства совместной разработке средства бэк-энд разработке фронт-энд разработки все сосредоточено в одном месте вот и как правило еще и на одном языке вот но тут на такой картинки олифантом одном языке написано состоит из разных блоков которые общем тоже можем менять но вот микро сервисы позволяют на разных языках вот плюс еще достаточно это разделять и независим поставлять вот собственно зачем стоит идти в сторону микро сервисов особенно но убитыми но вот лично для меня среди всех преимуществ которые микро сервисы дают и вот если оно первое место ставлю это раздельный диплом то есть когда действительно можно само решение разбить по частям и в общем его поставлять достаточно независимо вот полностью к сожалению этого добиться не удается связанность все равно возникает в том или ином случае иногда и за бизнес требования иногда из средств проектирования вот во второй пуш копирование всех на раздают что любой микро сервис он практическая к отдельность отдельная но до может быть поднят поэтому 1 один экземпляр 2 3 общем с этим никаких проблем микро сервисов нет вот отказоустойчивость она вот в основном и вытекает из масштабирования но часто еще есть такие механизмы с помощью которых можно резервировать каналы взаимодействия между микро сервисами вот у меня тут помечено автоматический запуск наполнитель на экземпляры ну вот если перегрузка произошла или мы по крайней мере мониторинг уюта нагрузку на тот или иной микро сервис то тот скрипт который это отслеживает можно запустить дополнительный экземпляр причем может так сделать что даже это будет в отдельном дата-центре вот если в другом дата-центре то мы знаем случилось пожара или наводнения вот сама эко-система микро сервисов она еще позволяет такую вещь как раздельный доступ к тем или иным потому к тому или иному api вот например для мобильного приложения это может быть одно пит для какого-нибудь внутреннего фронтэнда другое от link интернет-портал вот собственно когда микро сервисы друг с другом общаются либо обращаются каким-то другим системам вокруг них но это может быть третья вещь еще такая вещь как не зависимости от среды но тут можно скорее же можно отметить такую вещь что сам код не содержит каких-либо файлов конфигурации все подтаскивать исключительно извне и любой модуль может быть запросто от мигрировал точнее на просто скопированный запущен на другой среде например там где в тест пруд откуда в том окружении он сам подгорит соответствующие настройки и собственно будет на них на основании них работать вот но правила модули на разных языках уже говорил действительно в чем плюс микро сервисов что если вдруг что-то не работает можно его и не переписывать точнее не пытаться разобраться забраться как он там работает если есть возможность компетенция работы например другом языке то лучшего просто сделать на другом языке и забыть про тот который не работал но в нашем случае это часто бывают такие переходы с java идут нет то есть иногда компетенция человек ушел написала микро сервис на тут найти в общем делать особенно нечего переписывается он на java и бывает случай к наоборот ну в общем айдар случай когда есть micro сервис на java и в общем то есть он уже написанный по каким-то там устаревшим бизнес требованием то легче просто писать новые этот просто отключить здесь что хочется сказать про непосредственно но вот в чем мотив мотивация была для того чтобы dpms как автоматизацию переносить на микро сервисы как я уже сказал зачастую enterprise решение для bpm это одна коробка боль того это целая система то есть это отдельная железо там резервирование то есть этот в общем система вот более того на этой единой системе хранятся как час и работают большинство бизнес-процессов вот такая вот одна . отказа вот если мы распределяем вот это взаимодействие по микро сервисов которые относятся к тем или иным задачам то таким образом мы можем избежать этой единой точки отказа масштабирование тоже отмечал что если вдруг нагрузка возникло то можно добавить вот гибкая version ность здесь хотелось бы пояснить отдельно если у нас одна система и дпм где все где живут в основном все пьем процессы to a version ность может быть происходить только в рамках одного этого сервера вот если же сами бизнес-процессы живут на когда каждый нас отдельном свой микро серую считая version ность у них там может быть частью совершенно независимо друг от друга вот и в общем как угодно так как можно модифицировать не оглядываясь на то что происходит с бизнес-процессами других подразделений коротенько вот хотел сказать надо чем у нас собственно на какой микро сервисной платформе реализован реализован бтмс по крайне мере про тот который вот сейчас рассказываю вот в качеств платформе выбрали спринкл out вот у него там есть несколько отличительных элементов первый из них это конечно без discovery сервис-гид discovery бывает разный например когда делают на но джесс или еще на от каких-нибудь других языках но часто применяют и джейн энн джинкс вот случае вот со spring клаудом можно выбрать его рикона эврика это который был разработан на нетфликсе эврика что то есть представляет этот такой сообразный каталог микро сервисов вот который содержит их названия и по этим названием собственным можно производить обращение например делать раз запросы к микро сервисом который подняты на определенном ip-адрес определенном айпи адреса то есть это своеобразный такой dns-сервер у нас есть один микро сервис хочет вызвать другой он обращается с начала к эврике пой и по имени этого микро сервиса и после это устанавливается соединение происходит запрос вот собственно откуда же микро сервисы могут знать хотя бы где находится это эврика то есть не надо как-то подключаться вот для этого существует так называемый конфиг сервер очень сервер конфигурацией обычная конфигурация хранятся в файле часть чаще всего вот и раздаются с помощью него вот непосредственно микро сервисом но например игра сервис был запущен на среде стоишь вот обратился конфиг серверу который в этой среди работает и он фиксирован выдал ему все перемен все необходимые переменное окружение другие настройки следующий как элемент от который хотелось бы отметить это непосредственно логирование потому что когда микро сервисов много одно дело сидеть залогами одного из них которых там штук 50 уже работает в общем надо уже организовывать систему логирования вот ну в этом собственно помогает и эврика и и другие там другие части инфраструктуры для логирование как правило используем текст с непосредственно сами логике даются власти к новое нас на а тут уже собственно и выбираются и мониторинг происходит таким образом так тут еще можно сказать про авторизацию как правило в 3 сервер авторизации или внутри фикации он выделен тоже в отделе микро сервис но куда собственно все обращая могут обращаться вот и последний такой важный элемент инфраструктуры спринт на вот это вот api гайд твоей обегает вы это себя представляет в общем-то reverse proxy вот которым обращаются извини вот а он уже собственно перебрасывает вызовы на тот или иной микро сервис потому что извне точно мы можем не можем знать все эти адреса на которых в данный момент работают микро сервисы они все могут быть какой-нибудь там докер контейнеры подняты запущен на какой-нибудь виртуальной машине все это может меняться но отыграть твоих соответственно позволяет организовать доступ к тому реал микро сервису как я уже упоминал вспомнил о пиве твой фон может быть не один их может быть несколько например для мобильного приложения и для интернет портала перед этим я упоминал взаимодействие синхронная то есть как правило через сервис и вот но можно взаимодействовать через очереди в чем плюс такого взаимодействия как правило имена очередей уже известны и нет необходимости организовывать сервис discovery который там вот удачи напоминает все названия сервисов если сервис знает название очереди он всегда может отправить запрос получить ответ на второе преимущество то что можно организовать асинхронные взаимодействия лично мне больше почти ли такой способ пока прошу отметить для себя вот взаимодействие через очередь мы сейчас подойдем собственно к самому бизнес-кейс у и покажу чем нам чем это поможет ли решение задачи распределения бизнес-процессов кубик раз сервис для того чтобы описать пример распределение вот я решила быть процесс попроще что как правило реальный процесс они требуют длительного объяснения описания вот непосредственно у производителя у них есть такой канонический процесс работы интернет-магазина вот где есть несколько доменных сущностей с помощью которой все вся весь бизнес процессы построен но вот сущности такие оплата собственно основной процесс заказа и там отправки товара сама доставка склад вот и как-то все может быть распределена вот перед тем как показательно собственно как распределяется это все по тем или иным как доменной сущности распыляется по микро сервисом хотел просто точнее такую техническую деталь каким образом вообще возможно запустить bpm в виде отдельного микро сервиса ну тут все просто съесть сама система команда может работать непосредственно как на сервере на кластере серверов поможет работ вообще в виде отдельной библиотеки вот с тех пор как появился spring-у так и года три назад наверное появилась собственная версия кому-то для spring будто то есть целый bpm может быть поднят виде микро сервиса вот и работать причем таких любимов можно поднять столько сколько задач только знаете мы сейчас и попробуем использовать это бизнес процесс как если бы его делали без возможности раскидать по разным выпьем слишком ну так вот коротко пройдусь значит есть процесс заказа вот следующий квадрат это справа налево рассказ тут показать весь процесс замены кредитной карты если у не удалось поменять все сиди удалось возникает исключение вот ну и там дальше идет поиск товара на складе если он не найден то нужно его дозаказать и если он так и не пришел через две недели там уведомляют клиента о том что ничего никогда не получит вот ну и потом вместе все хорошо наконец финале доставка через часики тикают две недели и у пользователя спрашивает фидбэк как там получил на свой товар или нет собственно такой простой процесс собственно ничего тут такого чтобы мешал реализовать этот процесс нет то есть вот все что нарисовано с общим спокойно можно production отправлять и но все пользоваться и жить себе спокойно вот в чем собственно и когда возникает проблема проблема в том что здесь бизнес-процессе участок все вино в единый контекст здесь и заказ здесь я платы здесь и склад и и фидбэк даже он тут вот если что-то одно нужно менять то приходится менять версию всего вот наверняка для других систем это покажется каким-то уже каменным веком ноут сожалению в bpm системах декомпозиция вот она вот в таком виде присутствует вот конечно есть под процесс их тоже можно менять но они все равно завязанный на основной процесс а то хотелось бы чтобы это все было разделено и была возможность редактировать отдельными командами более того с использованием отдельных языков программирования абсолютно независимо вот и обеспечивает совершенно раздельной тепло и вообще не задумываясь что там у коллег на складе происходит если вы занимаетесь только оплатой вот собственно вот как предлагается это сделать вверху показан как раз процесс заказа выглядит как увидеть ест он состоит из таких квадратиков где черный конвертик и белый конвертик это отправка сообщения и ожидании ответа собственно таким образом вот этот основной верхние уровни вы процесс взаимодействует с процессами который находится уровнем ниже то есть он отправляет в очередь запрос синхронно и ожидает ответ ниже указано ну какой сущности он соответствует это вот собственно заказ и кусочек встроенной сущности это вот оплата вот который может быть меняться то есть там сколько ты может быть там согласование изменений вы можете вообще там провайдеры поменять по оплате еще что то все это можно идет независимо вот теперь собственность помощь чего и как это организовано так как у нас на предыдущем поставить и показывал теперь ни один bpm процесса несколько и он является верхние уровни вам сам для себя вот его где-то нужно запускать вот и вот каждый из них запускается на своем отдельном выпьем сервере это как вот если бы вы купили несколько коробок запустили бы их например ну там в кластерах или еще там как-то вот инна каждый из них за тепло или всего по одному процессу такая конечно избыточность получилось по ресурсам но вот тут встает вопрос а как они между собой будут взаимодействовать как происходит вызовы вот вызвать как я показывал происходит через очередь в этой конкретной реализации используется кафка вот но вот я приказал использовать rabbit все-таки кафка это не сервер очередей это система логирования но здесь вот можно использовать есть посмотрите на квадраты вот которые здесь указаны вот ту они символизируют собой микро сервисы и можно заметить что не в каждом из них есть bpm ну например там доставка доставки при может быть никакого бизнес-процесса нет там просто отмечается просто факт доставки и все но на вот микро сервис где находится процесс самого заказа и оплаты но вот в нем размещается конкретной конкретно реализация бизнес-процессов то вот между собой эти процессы как я рассказал взаимодействуют через очереди чем вариант этот хорош что используя этот же механизм можете общаться с другими красивостями который учеников отношения bpm не имеют можете дополнительно и все вещи запрашивать всю необходимую интеграцию сеть единым образом мы особенно не задумываться продуманней структуру интеграционный тут в чем все это работает как это вот все запуск будем обычно запускается на первом этапе вот принципе и кто-то задумается о том чтобы рисовать такую вещь лучше всего сначала пользоваться простыми закону простым запуском там jar файлов с непосредственно самой операционной системе но то у нас архат используется вот и когда там уже все будут работает более-менее в таком нормальном режиме уже можно не посредством в какую-то облачную среду управлять но вот сам лично пробовал и под shift это все запускать вот на кубер нету ну вот еще была под банки но там без этого берем а этот использовался клонов angry вон там чего bosch такой есть еще раз повторю что процессы на одной машине и гораздо запускать удобнее так нарика возникнет вопрос вот зачем городить такой огород может всё-таки ну его спокойно поставить себе один сервер dpm процессов и и собственно им на нем все запускать действительно следовать стратегии монолит first то конечно лучше всего начинать с монолитом то что неизвестно нужно ли потребуется ли вам вот именно вот это микро все это микро сервисное взаимодействие в каких случаях потребоваться она может быть может быть вам не нужно в тех случаях если ваш бизнес процесс протекает исключительно в одном контексте ну например у вас есть какое-то подразделение там контролеров банковских операций и есть подразделение которое занимается экономической безопасностью открытия счетов у них всегда они сюда работают в единой информационной среде у них используются одни и те же документы от бизнес сущности которые присутствуют в процессе у них одинаковые вот и собственно необходимости куда-то еще обращаться не возникает таких случаях даже если процесс будет занимать по площади вот такими квадратиками половину этого зала его вполне можно спокойно делать на отдельном сервере ну естественно к авторизованному в общем будет нормально и можно не заморачиваться вот проблема стоит в том проблема появляется тогда когда вот например как у нас банки таких подразделений много и они очень специфика деятельность очень отличается друг от друга такая специфичная от а бизнес-процессы есть у всех и более того нужно организовать единый бизнес-процесс обвиняющей работу там могут 80 подразделений которые вообще занимает совершенно разной деятельностью вот вот тогда да лучше бы конечно распределять эти бизнес-процессы по отдельным микро сервисом 0 и поддельным bpm сервером организовывать между ними взаимодействия вот это будет и по производительности лучше и по доставке он вспомнит по диплому вот и собственно даже разработку это ускорит потому что к сожалению когда вы работаете на одном bpm сервис сервере у вас несколько команд разработки то это конечно просто от они там постоянно будут конфликтовать другую друг с другом там не тестирование нормально не проведешь тестирование библиями она очень длинная как правило особенно ее от бизнеса нужно все там кейсы пробежать нас есть такой кредитный процесс там просто чтобы про кликать от начала до конца одному человеку под несколькими ролями необходимо потратить неделю понятно там эти куски автоматизированы частично вот ну а если при этом еще параллельно какой-то разработка идет ну то есть там люди просто не дождутся микро своей очереди гораздо веселее когда этот процесс разбит на части вот и отдельные куски независимо могут и тестироваться и запускаться и боль того обновляться независимо от так вот там большого релиза такого вот собственно и тут все что хотел рассказать про запуск мы пьем а в раздельных микро сервисах вот если вас поместить вопросы буду рад на них ответить а девки колотушки попробую за девушек пробуждаются добрый день очень полюбили микро сервис перевале монолит и как бы там процентов на 60 его распилили вот но есть все таки вот у нас их пока не очень много того в районе 20 ноя ну и балансировку там есть их дублируем там ну то есть где то их на три размножены но я как будет чуть-чуть вперед смотрю на их там будет в районе 100 и когда дублировать их там станем на пяти машинах то есть это уже 500 вот и у нас тоже есть логирование там но вот все-таки по поводу мониторинга вопрос то есть по но помимо логирования у вас есть еще какие-то инструменты то есть но не знают очень ночью там случится как как вот этот первый вопрос и второй вопрос мы тоже вот с интересной проблемой столкнулись в книгах они они написано вот интерес как вы решаетесь вы от вас есть разные области заказ вы говорите оплата еще там не знаю какая не организовать да это три разных микро сервиса у нас это каждый из них имеет независимую базу данных я не соответствовать опциона есть там где-то в личном кабинете пользователя есть grid какой-то в котором отображается информация из тех разных там микро сервиса консолидированы далее вот мы создали такое такой микро сервис агрегируются назвали его grid куда собираем синхронизируем информацию то есть мы там два подхода применяли то есть один подход с помощью хранимых процедур на это не совсем микро сервисный подход неправильный тогда другой подход с помощью очередей вот ну и там вроде бы более менее актуальные данные то есть задержкой там в секунду но то есть нас вроде бы устраивает но вот интересно послушать были ли у вас такие кейсы и как вы их решали все спасибо я с вашего позволения начну с ответа на второй вопрос потом первом период а второй будет короткий консолидированное отображение тех или иных данных на различных героев как правило бизнес процесс предполагает наличие нескольких юлаев потому что там за когда какой-то будет может быть внешне какая-то может быть для внешней организации это для внутренней вот и какой-нибудь для админов например вот как правило туда должны собираться данные из как пускали из нескольких сущностей самый простой способ если у вас доступ и когда нам через крут осуществляется но это вот наши всего граф был там рестлинг вот это вот все вот тогда вам даже можно крутить даже не заботится вы настроите на репозиторий сейчас говорю как раз по реализацию на я вас примут может просто создать микро сервис внутри которого будет прописан mapping это для сливания этих всех сущностей на граф quelle и и периодически зависимости от того что нужно на ей но ей требование могут частично меняться и что бизнес то хочет одного то другого вот вы можете менять только непосредственно этика маппинге вот и не изменять сами доменные модели вот ну конечно случай когда надо уже поля непосредственно добавлять вам придется конечно и микро сервис который отвечают за данные тоже обновлять вот что касается очередей там немножко сложнее но просто взаимодействие с очередями там нужно будет добавить свой небольшой еще крутовский тоже тоже микро сервисе где будет работать граф quelle вот мне лично нравится resolving not нас тоже в компании все предпочитают городской к сожалению кто-то не хочет распалить едрить сам пробовал гораздо хорошо работы лучше работает мой взгляд потому что он обеспечивает но соответствии с самому http протокола там все эти глаголы сохранены а вот граф к или там все делается через 1 место пост он как-то не очень естественно мой взгляд вот что касается первого вопроса как вот мониторинг организовывать как ни странно вот самый первый мониторе как он как раз основан на налогах вот тут у меня как раз на был скриншот с одной статье на хабре как там там как раз все эти логе сразу сливались вы ластик применять системой ластик search вот она можно поступать не таким образом положим что у вас ваш бит ем взаимодействует с кучей других систем какая там с разработки не знаю какой там 98 года вот и там в общем там уже ничего не светит поменять поэтому лучше конечно организовать систему мониторинга так вкратце и кровь у нас от архитектуры взгляд так то есть есть какой-то сборщик собственно логов но можете взять ног стаж сейчас не рекомендую возможно чуть побыстрее взять вот все все это закидывается можно там с помощью кафки нормализовать и раскидать вот и непосредственно уже после катки все это закинуться соответствующий индекс elastic search вот пусть и вы можете уже и визуально это отобразить ну например своем с помощью той же кабаны или с помощью кравков граф анны от графа на мой взгляд гораздо предпочтительнее вот теперь по поводу того как живут за бороться системными с боями я так понял что вы имеете ввиду когда сбой происходит именно в бизнес логики то есть несистемный . ну первый вариант это подвесе циклоп собственно на систему мониторинга на определенные события единственное что если вам требуется код немедленное реагирование на слава богу бима такая система совсем даже не highload вот который часто и ночью не работает она училась она и работает тут потому что у вас там в хабаровске начал себе ипотеку оформлять там или еще что то вот там только в таком случае но и какого-то моментального реагирования в миллисекунды но вряд ли потребуется поэтому самой системы мониторинга основанный на налогах моя думаю должно хватить вот собственно такой ответ просто здравствуйте спасибо за доклад не достиг вопроса первое что у вас используется в качестве технологического хранилище команды вот классическая кому-то это на при этом oracle database а потому что я как я понял кафка это не хранилище данных процессных данных это некая то жена кашина об общего какого-то то процесс второе если у вас например поднята несколько инстансов одного и того же есть раз параллелен процесс и например у вас какой-то пользователь в одном процессе находится контейнер упал как вы обеспечиваете непрерывность его работы вот используется ли у вас кафка для этого ну смысле для поддержания вот этого процесса или не используется вообще любая очередь неважно кафтане кафка вот и третий вопрос используется ли у вас команда для автоматизации них юмон тоска задач спасибо прислал позвони опять начну с последние вопросы в первом буду двигаться это просто не забыть вот я лично против использования крема когда все квадратики это сервис тоски на мой взгляд для этого хорошо подходит персонаж и на я больше люблю тип к вот в этом плане все остальные в общем там тоже кастрация подержится так или иначе это мой взгляд не так весело вот ну знаю ситуации когда люди вот bpm используют как шину вот виден га в автоматы даже бы он строит то есть по состоянием они там ходят к кто купил чего продал от датчика получил какое-то сообщение мы так мы так стараемся не делать эти зачем решаем с помощью операционной шины по поводу я буду вспоминать вопрос если я буду просто напомнить по поводу хранилища значит да действительно для работы gpm командор нужна база данных собственно это не какой-то там рокет сайенс когда просто в базе отображаются состояние того или иного бизнес-процесса отслеживаются как в какой версии он работает куда он дальше пойдет вот и все эти в общем то вещи в реляционной базе просто хранятся вот вполне нормально работает на позы сна у раков то есть тут ничего такого на майскую не пробовал хотя нет там по дефолту если запустить memory дтп эстампом как османской вот так что можно быстро попробовать так про это а на вопрос был используется ли вас кафка в качестве некой обеспечивающий системы для не при носки процесса у представители что нет да не обеспечивается но мы стараемся использоваться рабби там для этого роберт джеймс там разных случаях по-разному от просто в компании но в банке точно много системы разные из них строить разное время вот поэтому используем то что есть вот в зависимости от того какая если очередь системе есть замечательно есть в очереди нет то приходит то тогда из постараемся использовать роберт кафку исключительно для лакирования событий вот если рассуждать контексте используем ли мы кафку для диагностики сбоев таком случае до используем но как бы так косвенно вот вот и все кажется или какой-то был первый еще у вас вопрос если б появится думай после можем обсудить прослушать ещё один вопрос интересный надеюсь я услышал что можно так делать но не услышал про базу нет как вода этого докатились почему что конкретно вы не смогли решить во что уперлись что вы начали травить на микро сервис посидим на они на комоде на отжали p&g дпр например там можно тоже самое сделать на одном серваке есть там можно братья по проект на деплоить jar ников хоть там сотни раз коммуникация и хорошо объясню случаев зпп мам не такой жесткий как в принципе джип тем как то хотя бы то там можно использовать средства разработки versio нирования стандартные у нас было гораздо все суровее это было было к сожалению до сих пор частично осталось этой земли пьем вот там вообще в этом плане то есть даже система тепло и собственное внутреннее то есть даже системы гарсиа нирования кода тоже внутренняя и вот и а проект если установить больше и больше команды тоже больше вот они куска саженей они могли работать вот а чтобы поднять еще дополнительный контур вот там какие-то мега отчисления надо было платить все вот такой вот там где отдельные лицензионные и вот плюс еще все очень медленно работала решили как-то декомпозировать вот но тут как все сложилось плюс еще команда на желтом source там только поддержку вот есть поддержка внутрь этого и платить ничего не нужно вот но тут к сожалению сюда так получается это вот такой у нас был мотив как команда вы зачем белья сервисы а зачем мы именно в команде стали применять микро сервисы анри нычки значит да сначала собственно вот он так же разрабатывали традиционным способом то есть у нас был отдельный сервер туда все эти jar ники как вы видите как точно так же как в джипе яме в дтп яме хоть десять jar ников туда заталкиваю вот но как я уже говорил это вот иди к сожалению появляется одна . отказа этот целый гпм сервер на который каким-то образом там должен обслуживаться вот когда мы висим что оказывается для того чтобы запустить один бизнес процесс можем целый bpm сервер пусть маленький поднять вот за ним меньше гораздо следить там приходится то есть он и плюс если он еще внедрен в конкретной микро сервис в виде библиотеки то есть то есть какие тут мощности не обязательно для этого выделять нам показалось что это гораздо проще будет одно из решающим фактором конечно было то что таких серверов анапой появилась необходимость нужно было поднять но ты часто моей памяти где-то штуки три потому что одноразовая как одноразово достаточно как за короткое время там течение может месяцев 2 в нескольких проектах по появились эти bpm сервера вот и нужно было в каждом каждый из них там обслуживаете все такое ног подумали раз уж их так появилось много то пусть они уже будут хотя бы в микросреде микро сервисом от но тут еще появилось само собой как бы такое преимущество когда разделяется контекст не надо в основном для меня лично это избавление от единого контекста вот чтобы можно было каждый процесс супом жил своей жизнью и вообще никак не зависит от версии там не надо было впереди плевать про базового вспомнил ваш вопрос пока вот извините можно можно или нет запускать микро сервис два экземпляра для одной базы и запекать можно вот но не всегда работает так добрый день у меня два вопроса первое во-первых мы тоже используем д д м н но мы его используем в качестве крашены но да вот хотелось бы узнать во первых в чем минус мужчина эти данного подхода а второй вопрос это по производительности то есть какая у вас сейчас производительность на системе что вы делаете когда идет тяжелая нагрузка с которой систему например начинает не справляться а вот как раз тяжелые нагрузки мы добьем ты и не делаем то есть как бы мы все стараемся вытаскивать наши ну то есть я тяжело нагрузка только если это только ломанется толпа пользователей вот и вся нагрузка иванова по так как это в основном интернет застелила на это сколько для вас ну у нас всего десять тысяч сотрудников баркер если они все разом зайдут но вот вот и вся нагрузка на счет вот первый вопрос то есть минус только в том что б г м м не справиться с большим ну да мой взгляд он просто не предназначен для этого то есть для этого есть интеграционная шина мне кажется на более зарекомендовала себя как как средство для высоких нагрузок нежели bpm я так понял что вы успешно используйте как бы но опять же у нас усы написанный самописный битым по просмотрите дпм да давайте прокомментирует то есть вариант когда вы выбираете себе коробку вот ну замечательно вот то чаще всего люди пишутся написанный петли им вот таким постоянно сталкивался вот ну да мой взгляд не очень это перспективно потому что приходится реализовать есть реализовывать есть функционал по отслеживанию всех задач по лоббированию повсюду всему всему то есть его нужно которых откат над написать вот а когда берете конкретный готовый кусок точнее даже готовый микро сервис то есть не обязательно дам и запускаете на нем уже бизнес-процесс который уже кем-то нарисован поэтому на мой взгляд гораздо быстрее вот единство когда наверно это имеет смысл как когда у вас высоко какая-нибудь скоринговой системы или еще какая-то высокое нагруженная например там нужно вам обработать там не знаю 20 тыс кредитных заявок там в онлайне там какими секунды от ну тут наверное вот бы кем-то может быть конечно по нагрузкам не справится вот честно сам не пробовал вот именно для скоринга у команды есть такой для таких задач есть еще дмн так называемой аннотация по системе принятия решений вот она больше для этого предназначена а тут как раз уже можно пользоваться и масштабированием и для того чтобы испечь идти или иной нагрузки потому что там нет состояний то есть когда там пользователя надо ждать или еще что то то есть можно просто пробежать эту матрицу решений и выдать какое-то решение спасибо пожалуйста александр спасибо за интересный докладов вопрос такой с таким подходом разбиение процесса на отдельной микро сервисы как боретесь с построением отчетов получаю их не заталкивать битых понятно но данные об этих процесса да я понял понял но вы наверное имеете ввиду если у нас несколько движков соответственно данные по ним распределенной по нескольким базам вот и вот отчеты нужно собирать вот и собственно потом еще как-то их склеивать там по времени вот но тут спасает только сквозные и техники которые хранятся вот эти шнеки сущностей которые проходят через вот эти все процессы то есть только только с помощью них вы сможете вот это все связать ну и чтобы строить отчеты да придется ходить во все эти базы вот там делать может быть схожие или наоборот отличные запросы друг от друга отчетность такая согласен что если бы у вас был один сервер и вы обращались исключительно к той базе вы просто там определенной вскоре запрос сделали и получали бы например метрику что там какая-нибудь какой-то открытии счета каждый день происходило в течение полутора часов еще какой-нибудь жуть этом все пили чай последнюю этом неделю да спасибо за доклад а скажите пожалуйста вот bpm у вас используется также и для ну как бы для user интерфейсов для для фронтовых или вы только его использовать и как управление процессами и насколько вот есть вот этот функционал который обеспечит команда да он там юзер френдли для того чтобы рисовать там например там он может забить заменить какие-то приложения гибель или еще что-то такой насущный вопрос то есть вот кто-то вдруг в первый раз возьмется за все это значит духу морских искал там у них люди что-то делают они там почему-то кнопки вводят данные общественность специфичные могут делать вот уже их бизнес обычно представляется вот сейчас в красивом интерфейсе все это заработает вот ну сразу должен предупредить что это красиво интерфейс он уже должен быть где-нибудь вот и лучше бы его вот не реализовывать с помощью встроенных средств хотя это вот сплошь и рядом на всех воркшопах там значит используются эти вещи сам и сам лично я перепробовал эти все вещи вот ну и в общем maggot он вам рассказать собственно что там есть есть самые простые ей такой механизм и герой конструктор это когда сам каркас пользовательского интерфейса он описывается непосредственно в пенси выпьем файле побитым файл это xml 3 которого собственно сам процесс размечен и можно указать что-то кому-то соответствует такому таких ума тоску соответствует вот такая форма которая там из трех полей но в возможности там очень узкие то есть но только поля и там файл может еще чтобы приложить второй вариант там у них есть ангулярным прибор angular окуляр к сожалению первое еще то есть тоже как бы не вариант то есть когда уже второй есть но вот там тоже строен своеобразный такой конструктор когда вы размечаете поляны и там отгуляли они автоматически вы связываются с переменными которые уже в процессе объявлены и вообще хотел заметить что вот я не сторонник и большие сущности заталкивать bpm процесс вот на мой взгляд идеален это когда у вас есть какой-то огромный документ или еще что то вот какой то идите фиксатор уникальные этого документа поместить переменную все больше вот битым процесс больше никаких переменных и заталкивать это там народ думает и файлы туда заливает и джейсона какие-то километровые там и был-то есть но потом как то это все приходится выбирать то что с отчетностью словно сложнее лучший бизнес сущности но хранить вот но в базе для этого использовать икра сервис вот я показал но ответе тут но специально микро сервис который будет для доступа к сущности то есть те квадратики где нет красных квадратиках вот но собственно как и спросится как же быть если все эти реализации я как то не очень вот быть просто там пишите значит ну допустим какой-то я и систему либо используете то которая существует причем это может быть не обязательно web например это может быть какой суровый толстый клиент там где например это может быть конец заявка или операциях кредитная вот и в соответствии ставите ту или иную bpm задачу вот baby my это выглядит но просто вот как политическая задача которой нет интерфейса интерфейс он снаружи стоит вопрос а как же тогда вот эту систему которая отображает эти задачи узнает задачах которые появились две премии он просто регулярно опрашивает bpm там rest rest api опрашивает когда как правило когда пользователь авторизовался что ему можно показать что не показать есть минус если вам нужен контекстный поиск или чего еще чего веселей live search вот еще чтобы быстрый то даже кому то я уж не говорю про вилли проблем дпм она в этом плане мало чем поможет поэтому почти все кого вот пусть и все реализации которые видел использовать такой механизм как только появляется ей задача стоит плагин либо триггер вот я не люблю триггеры подвешивать на это дело в базе лучше плагин штатно использовать этот плагин сбрасывает информацию задачи куда власти все оч вот и когда вашим ей пользователь по трем буквам захочет пройтись и найти там не знаю все о которые там участвовали в кредитных еще не гневись каких бизнес сущностях вот ваш запрос просто уйдет власти как elastic хорошо с этим справится за мире секут и выдаст ссылки на задаче а вы по этой ссылке собственно можете обратиться уже к команде но и там что-то задача сделать там закрыть продлить переназначить вот такая вот история"
}