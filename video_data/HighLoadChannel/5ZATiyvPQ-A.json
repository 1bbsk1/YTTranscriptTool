{
  "video_id": "5ZATiyvPQ-A",
  "channel": "HighLoadChannel",
  "title": "Полнотекстовый поиск в PostgreSQL / Александр Алексеев (Postgres Professional)",
  "views": 15446,
  "duration": 2064,
  "published": "2018-01-16T12:21:38-08:00",
  "text": "значит я работаю в замечательной компании под гаспра работаю разработчиком hydra подгрузки ну и там походу вот конференциях выступая существует множество всем известных хорошо знакомых решений для полосе кстово поиска такие как elastic search a solar и сфинкс и да я бы мог конечно по набрасывать и там провести ки нибудь бенчмарки что там типа смотрите мы загружаем википедию в позе раз мы загружаем википедию вала sexy elf смотрите позже стал в 3 раза быстрее или там не знаю плюс минус такой же вот но я не большой сторонник таких быть марков по той причине что как правило то система которой ты лучше знаешь она быстрее его хозе то есть я не ну так неплохо знаю по сбросу вокруг меня полно людей которые его тоже хорошо знают и наверное мы очень крут настроен под газ и ластиком и настроим не очень хорошо это мне сильно понимаем какие ручки в живыми крутись поэтому такое решение будет не очень честным не говоря уже про то что пост раз это система которая умеет транзакция ластик не очень умеют и так далее вот поэтому да им такого наброса не будет сорян а еще мне было лень но в основном конечно причину вот как я до этого сказал но какой вообще как бы имеет ли смысл использовать полнотекстовый поиск позорься когда ну а зачем когда я загружаю все в мозгу а потом я загружу все власик у меня будет вот этот нормальный данный тут для полнотекстовый поиск вот на самом деле имеет смысл как бы по ряду соображений что ну это работает более-менее также хорошо как специализированное решение у вас не происходит дублирование данных то есть в случае когда вы используйте отдельный движок для полна тексту поиска вам нужно данный загрузите в него и в основную базу данных то есть у вас было 500 гигабайт стала терабайт но это довольно не круто да данные всегда консистентную то есть у вас не возникает такого что вот этот канал по которому вы перебрасывали данный с основной сто раз из основного стороны в движок для пасек ства поиск он там сломался затормозил и так далее и в итоге у вас выдачи не знаю документы которые уже удалены давно пользователи видят но то есть у вас ничего не разъезжается у вас если что-то удалено то пользователь этого не видит ну и все консистентной все хорошо да и вообще вам как бы есть у вас уже стоит настроенный под газ и есть сам крутые тебе которые в уме у вас уже все есть вам не нужно там поднимать совершенно другую систему мониторить и и бэкапить ее и так далее и становиться экспертом у вас просто все работает ну то есть и для особенно если у вас компания растет вас покажет все в пост помещается все хорошо ну вам пока ничего не нужно потом если он начнет тормозить да наверно имеет смысл уже смотрите сторону но и сквер всяких и так основы как бы как как этим на практике пользоваться есть несколько типов danfoss грехи то есть первый тип это так называемый т с вектор то есть условно говоря вы берете строку что-то пошло не так а слайд это были ага да но они были не очень интересны если что-то седая вот вот это вот все рассказывал словами на самом деле кстати слайды есть на слайд шире так что вот и ну там не нужно фотографировать искать ссылки и так далее да есть и птс вектор который в сущности представляет собой с вот у вас есть строка и т с вектор он представляет строки из строки с указанием где в строки и и найти вот то есть можно думать об этом как как как как у меня была хорошая метафора но я помещаю забыл оного это нормализованная строка то есть в ней выброс выброшены ненужное окончания то есть тут видно тому слова кром там обрезан окончании потому что ну в русском языке там все склоняется и так далее вот и то есть тыс вектор это то почему мы ищем нормализованная строка запрос это т сквере то есть ему опять же скармливается строка с каким-то выражением в нем логические там и или и другие операторы и он преобразуется в запрос по которым мы будем искать обычно пользователи он не водят вот такие выражения нас как бы специальном диалекте в плоскости там типа с вертикальной чертой который означает или с ampersand am который означает и он обычно просто как бы в поле поиск вводят там не знаю окна пвх москва и так далее вот то есть для работы с такими запросами в полисе есть специальные процедуры план тут и сквере у это ну обычный полнотекстовый поиск и он возвращает в сквере то есть запрос фрейд в сквере он для так называемого фразового поиска то есть для точного совпадения как бы поиска по цитате вот это вот оператор который похож на стрелочки вы для стороны он означает слово которую за следом за которым идет другое слово прям вот без без слов по между ними вот это просто текстовая присту как бы так пост отображает типа т сквере вот теперь самое как бы интересно вот у нас есть данные по которым мы ищем у нас есть запрос что мы ищем а как бы нам теперь вот собственно поискать вот для этого есть оператор который я не знаю по каким причинам записывается как две собачки вот то есть поискать под с вектору с помощью т сквере если ты с вектор соответствует и скверы то этот оператор возвращать true если не соответствует the falls вот все это конечно здорово замечательно да но как бы на практике мало полезно потому что у нас данные то в базе мы хотим по ним индекс постройки что-то поискать да как нам в сервис а не поможет да есть два типа индексов которые можно использовать gain эгист ну вкратце расскажу там чем они отличаются gain это вот условно вы когда в книжке там сзади открываюсь оглавление и там по букве а есть слова и на каких страницах они встречаются вот canon работает похожим образом у него есть слова и ссылки на тупой где можно что-то такое найти gist он немножко по-другому работает это бинарное дерево которое спуск по которому осуществляется хишам то есть у вас есть левое поддерево в нем хэш представлять собой как by твою маску права и по дереву в нем хэш какая другая битовая маска а у родительского элемента у него логическое или от этих битвах масок и мы можем по нему так спускаться вот это если так об этом обо всем можно подробнее прочитать в документацию важно понимать что gist он как бы лоси индекс то есть он поскольку хранит хэши the immune когда он нашел какие-то данные на которые он ссылается им их нужно перепроверить а вдруг там было коллизия в кэше вдруг я на самом деле не то нашел что пользователю нужно один такой проблемы нет и от в этом заключается их различие то есть gist он быстро работает когда вы много пишете данных и сравнительно редко их читаете то есть чтение у него дорогое понятно да почему потому что нужно перепроверять реально данные гену это не нужно поэтому он на чтение быстрее но он дороже на запись если вы как вы сомневаетесь какой индекс нужно использовать используйте gain то есть генон вот его использовать реально там большинство людей потому что но большинство в проектов это 90 процентов чтение здесь процентов запись gist он нужен в очень специфичных случаях то есть когда вы там много много много пишите там раз в месяц что-то ищете потому что вы записали и так то есть с яндексом определились используем gain теперь примера создадим тестовую табличку articles с айди prime реки тайтлы мы и текстом да то есть храним tomcat статьи я лично экспериментировал на дамбе википедию то есть у википедии у нее есть там специальная ссылка где можно скачать торрент файл с полным архивом английская википедия 1 месяца не упал на обновляют вот и на гитхабе есть репозитории мой где питания чей скрипт который вот этот вот дампа из xml и перегоняет в позе раз то есть вот в такую табличку мы выгрузили статьи из википедии давайте попробуем по ним поискать для этого я написал небольшую вспомогательную храним q это не обязательно вам не требуется это делать но это позволяет потом запросах писать чуть меньше кода вот и там предъявите вопросах этого и поиск медленне становится то есть это просто удобно то есть мы по тайтл у и тексту статьи хотим сделать с вектор вот все что делает эта процедура во первых ее нужно обязательно пометить как им не забыла там на нижней строке потому что в индексах можно использовать только имеют аву процедура что значит имеют угол что она ее выход зависит только от входа она не внутри в своей тушки она не ходят какие таблицы там ничего не отдаёте и другого стоит а нет вход-выход вот так плюс помимо уже знакомого нам тут с вектор здесь используется сайт white процедура которая придает больше веса одному-то из вектор чем другому вес определяется буквой вот и по моему доди или да и я не помню мы там типа штук 5 вот и но обычно когда вы ищете по статьям у вас вес заголовка он больше чем вес самого тела статью ну как правило вот и в этой процедуре я это использовал то есть я тайтл и придаю высокий вес тушки статье придаю вес поменьше и потом это конка тонируется при помощи оператора 2 2 палки вот носит с векторы их можно конкатенировать теперь до создадим собственный индекс то есть создаем индекс с его именем по таблице articles используя индекс gain и по вот этой вот функция которую мы объявили ранее то есть напомним позы груз он поддерживает функциональные индекса то есть вы можете строить индекс паси нусупа под строке и так далее это здорово работает он прям в яндексе хранит значение этой функции вам не нужны и постоянно перечислять когда вы потом делаете select да и пример использования этого индекса то есть select айди тайтл статьи из articles и вот тут собственно где пригодился процедур видите мне не приходится писать все время вот это весь этот ужас я использую просто майка с вектор v и при создании индекса и при поиске потом там еще при поиске буду много раз использовать вот пытаемся найти статью про burn страус тропа и вот пример выдачи там его еще ну там было больше статей просто на свои не влезло вот уже работает уже хорошо да то есть не знаю это было такое долго введение но там вот я вам за 15 минут объяснил у вас бы это заняло пять минут создать яндекс да ну давай теперь попробуем чуть-чуть улучшить этот результат во первых обычно в поиске вы хотите чтобы вас подсвечивались найденные строки в выдаче вот в пузырьки и то есть из коробки опять же есть процедура тест онлайн и вот мы видим что в результатах у нас и имя бьорна уже подсветилось также обратите внимание на то что в сквере в этом запросе я написал один раз то есть я вот он сел from articles потом т сквере присвоил имя пью и использовал его дважды все лекси и vr условия это как бы я не уверен насчет старых версий по сбросу но в десятки и помогу 96 это работает хорошо то есть у вас не происходит там вычисление тут и сквере на каждую строчку и так далее то есть можно посмотреть в explain и понять что по сбросу он понимает что это условие оно не изменяется его надо вычислить один раз просто положить в переменную вот опять же тупы чтобы писать меньше кода вы могли всю эту портянку написать прямо запросе хорошо что если я хочу не вот этот вот б который там можете имели 5 по моему он же сзади причины надо strong описать если ничего не путаю вот если я хочу вот другим тегом выделить пожалуйста вот the headline можно передать аргументы ну в подгрести она так немножко криво вас не к сделано то есть мне нужно строку передать которая потом парсится внутри в это процедуре но тем не менее вот передаем старт sell stop сел и выделяется уже как-то по-другому найденные слова то есть окей мы осилили как сделать выделение найденова теперь надо бы ранжировать выдачу потому что ну что за дела мы искали бьорна да он оказался третьим выдачи фигня какая-то но там отдельная история почему так произошло то есть видимо он в тех статьях которые оказались выше он там в три раза чаще упоминался почему-то чем в статье посвященный ему самому может быть она короткая было я честно говоря забыл проверить ну вот есть ао только я нагнал да потому что нам там же вообще не был ранжирование они в просто случайном порядке были всё намного проще есть процедуры тсн которая принимает на вход первым аргументом вектор вторым аргументом запрос и возвращает собственно насколько насколько документ хорошо соответствует запросу вот пример запроса транжира ванием пожалуйста у нас сортируется все по рангу и его при желании можно было бы еще там третьим столбцом вывести вот помыта число от нуля до единицы float есть маленькая проблема что вот это вот дело она хорошо работает когда у вас хорошие селективные запросы то есть когда вы не знаю как это работает вы условно говоря 100 документов нашли но в данном случае тайтлов dos ранком и так далее в память положили в памяти она сортируется по рынку и потом как бы отдается это не очень хорошо работа если вы нашли там 10 тысяч документов миллиона документов до если вы искали по кому-то запросу который возвращает много документов вот и в как bios встроенными средствами позы секса же никак нельзя решить вы можете ну там максимум написать лимит перед тем как сортировать по рангу ну просто чтобы вас память не кончилось или еще хуже вы не пошли в диск отсортировать ну потому что используйте вбил такой странный запрос на он сам себе злобный буратино тем не менее если вдруг вы пишете убийцу google это вот у нашей компании есть и яндекс room который в настоящее время не является частью под гарса но лежит на гитхабе и его можно скачать установить описанным здесь образом и используется он точно также как gem вообще вот без изменений просто вместо gain пишите room и основное преимущество этого индекса что он позволяет производить ранжирование более оптимальным образом если у вас такой страны кейс когда селективный запросов низкая попробуйте room поговорим о нечетком или фазе поиски зачем это нужно потому что пользователи часто ошибаются при вводе там пишут с опечатками и еще в ряде случаев это бывает полезно про который я расскажу ну например вы пишете сад же стал куда и пользователь он сам точно не знает что пишет что что ищет вот но вы хотите найти все что более-менее похоже для этого и в поясе есть расширения называется пгт рогами ну то есть это поиск по 3 грамм до 3 грамм это то есть если у вас есть слово и и мы его там нарезаем на все последок под последовательности из трех букв от каждая такая подпоследовательность называется триграммы вспоминается я про нас вот это вот все я на всякий случай скажу что то что это расширение полосы это не значит что его нужно как-то дополнительно вставить что это что этого нет в амазонии так далее то есть расширение означает просто что она использует стандартный интерфейс для расширения и по сбросу и оформлена видео там погружаем библиотеки но это не значит что она что-то неофициальное левые там не поддерживается то есть это просто так в полисе принято писать что-то что может быть написано виде модуля строим индекс то есть тот пишем using генри указываем up close после тайтлы но в данном примере я попроще сделал будем искать по тайтл у нас тем же успехом можно и по там конкатенировать строки почему угодно искать процедура шоу программа позволяет посмотреть собственно какие 3 грамма у нас получились из заданной строки но это чисто для отладки может быть полезно теперь мы собственно делаем поиск тут используется оператор с названием процент и можно заметить что условий страуструп я опечатался потому что это странный фамилия не знаю как оно пишется вот я и через написал так как мне кажется она должна писаться вот тем не менее поиск успешно нашел бьорна по даже по запрос с опечаткой и здесь еще вводится similarity то есть насколько строка похоже на на запрос этим можно рулить то есть по умолчанию используется по умолчанию вращаются строки уровень похожести которых там 0 3 или выше вот его можно сделать пониже можно повыше с помощью его процедуру этот лимит это работает в рамках сессии то есть когда вы отключаясь от возраста подключайте снова это снова забрасывается в дефолт помимо поиска с опечатками расширения полезно когда вы используете лайк или alike запроса то есть можно посмотреть в планы увидеть что здесь используется вот этот программный индекс также это ускоряет запросы по регулярным выражениям если вы в пузырьки используйте такие запросы собственно тут немного ссылок про где подробнее прочитать про программ также в подписи есть типы для хранения джейсона и вот все что я раньше рассказал про полнотекстовый поиск она также работает и по джейсона то есть вы можете загрузить документ и искать вот прям по ним по их содержимому вот а ссылка на рам и я на самом деле уложился в какой-то просто рекордное время но к счастью у меня есть немного бонусных слайдов совсем чуть-чуть дело в том что ну на случай если вы не знали gain можно использовать для поиска по массивам например ну вот такой классический пример у вас есть посты в блоге у них есть триггер и вам нужно вот ну пользователь кликает в так и вам нужно найти все документы которые этому соответствует можно конечно там использовать в фарингии там join и так далее вот а можно и хранить в теге в виде массива и искать поэтому массива при помощи гена как описано здесь какие тут есть оператора то есть но и в резинка такая что куда указывает стрелочка то меньше то есть вот на меньше собачка это означает что 111 входит в массив если там собачка больше то наоборот так входят в массив которые слева равенства означает что у вас массива совпадают и как бы два ampersand означает что у них не пустое пересечении то есть помимо того что рассказала раньше ген позволяет искать вот прям по содержимому массивов вот и я боюсь что да это все этот парочка ссылок по которым можно меня найти я надеюсь что у вас очень много вопросов на которые я буду отвечать за оставшееся время ну или можно свалить пораньше и попить кофе спасибо за внимание но хоть понятно было привет спасибо за доклад а подскажи пожалуйста ты сам него производительность вот если сделать богин индексов по массивам и соответственно по флангам насколько она отличается нет боюсь что я не проверял но есть причина почему я не люблю быть марки на самом деле у меня есть и ну был на предыдущем hail audi доклад по этой теме и там я первые минут 15 наверное этом посвятил это кстати все есть на ю тубе на сайте холода можно посмотреть то есть всё реально очень сильно зависит от ваших данных от ваших железо от вашей версии по версии так далее если у вас ваши таблицы в целиком легли в память это один случай если у вас они не поместились в памяти вы там часто дергаете диск то это совершенно другой случай поэтому имеет очень мало смысл проводить такие синтетические batch маркер нужно все проверять на вашем железе и хорошо понимать систему чтобы вы точно знали что именно вы меряете и что не менее важно нужно на конкретных людях это проводить потому что может может быть я сделал как бы настроил так что у меня фарингитом в 10 раз порвали gain но это не значит что ваши детей и они как бы также настроить и что у вас вообще есть гибель ну то есть возьмите ваши данные померить это займет у вас не знаю 20 минут условно она согласен . конечно прикольно но опасно использовать пока мяч мактини проведены а в чем опасность что самое худшее случится расскажите пожалуйста лучше быть то что нас будет очень долго выполняется запрос да но до этого у вас эта фича вообще не как бы ее и не было ну то есть новые вулкану как обычно выглядит разработка вы написали там например у поиск по тегам раньше вы не было да вы вывесили это там как обычно на 1 процент пользователей пользователи начали тыкать тыкать тыкать вы смотрите в графике нагрузка растет ой медленно короче все умерло вы выключаете эту фичу со всех пользователей и смотрим как бы пробуйте альтернативу я не вижу в чем в чем риск то ну не в худшем случае вы потратить там не знаю насколько там на питание занимает написать поиск по тегам два часа например на условному вы потеряли два часа времени но мне кажется не такой большой риск здравствуйте меня вопрос какие языки поддерживает кроме русского там большой список языков то есть во первых там есть еще такой специальный язык называется simple который типа более-менее сносно работает для всех языков но смысле он одинаково плохо работать для всех языков но зато работать для всех там точно есть английский французский русский и японский по маме немецкие там большой список то есть их там с десяток если не больше что еще вот эта функция s ранг учитывает ли она количество вхождений т.е. стран вот это да то есть я понял что когда вы делаете т с вектор у вас есть vesa а вот количество вхождений в рамках каждого то есть тайтла и контента я честно боюсь набрать то есть много краткий ответ я не знаю но моя догадка что должна учитывать было бы странно если бы она вообще не учитывать частоту вхождения слова и еще вопрос предлоги и прочие да не выкидываются вот а для этого и нужна собственно вот этот с вектор то есть да тут с вектора но как бы не от хорошей жизни появилось то есть в том числе но она не только обрезает окончания она и выкидывает стоп-слова вот в примере с русским языком можно видеть что она выкидывает предлоги доступные с английским языком она выкидывает предлоги расширение стоп-слов есть смысл вы хотите добавить стоп-слова я видел что люди что-то экспериментирует со словарями то есть ты упала со есть такие ручки я боюсь что я вечно с ними знаком плохо и буду вам врать но в худшем случае вы можете просто написать свою кранику которая вам вот и строки перед индексации все это выкинет ну так это в случае если вообще ничего нет но я видел что люди как-то прикручивает вообще кастомный словари там на базе и спела и так далее что спасибо а насколько сильно влияют разные индексы на репликацию носить на нагрузку на влияние индексов на репликацию но насколько я осведомлен о у вас индексы они точно также попадают в хип в форме пиджей и поскольку опять же смотря какой приказ мы говорим если мы говорим о обычные стрима вы и репликации в полисе это одно это мы говорим про логическую репликацию которая есть мнение виде расширения и кстати в десятку и занесли логическую репликацию это пиксел да если мы говорим про стримы с стриминговый репликации насколько мне известно это работает у вас будут все p&g всех индексов когда они перестраиваются пири-пири летать по сети нет меня другой вопрос ты сейчас описал несколько разных индексов хотелось бы понять насколько сильно не отличается в этом плане а именно в плане размера которые они используют это хороший вопрос ну краткий ответ такой самый честный я не знаю вот но это легко проверить на то есть посмотреть размеру соответствующих таблицу погасян на ваших данных и спасибо и кстати насчет индексов есть такое интересное замечание что если у вас не большой объем данных поиск может работать быстрее внезапные без индексов ну то есть если у вас все целиком влезла в память и этой памяти там но не на 50 гигабайт данных до может быть быстрее пройтись быстренько по этой или по этой памяти и понять она соответствует или нет чем там мучить вот этими индексами то есть как бы рассмотреть и 3 индекс это отсутствие индекса это реально может работать быстрее не только вопрос насколько управляемого ранжирование например там в вопросе если хочу безусловно поднять высоко там точное попадание условно или это то есть помимо вот это все твое то обратите внимание что в в запросе сейчас где был пример то есть вот здесь вот в тут и скверов вы можете сами кормить ему ваши крафтовые к вере при этом в этих кабеля с помощью операторов который после поддержат вы можете очень гибко рулить например вот этот оператор который похож на стрелочку он явно говорит что у вас одно слово должно следовать за другим и не как иначе то есть вот пожалуйста для фразового поиска вы можете так написать там можно еще со складочками намутить и так далее то есть там есть синтаксис для более да да да та клубу кудо большое спасибо за доклад и сейчас такой вот бы вопрос вы вкратце описать и про индексы в частности про run вот если он позволяет работать с такими гигантскими массивами то почему его сразу не внедрили то есть у него наверное есть какие то и недостатки но разумеется да то есть хотелось бы услышать подробнее про него спасибо room был написан я могу точно ошибаться где-то полгода назад вот но давайте будем честны да то есть если выноси написали индекс для подвеса и там вы уже i wanna give up это еще не значит что в нем там нет богов что он там сто процентов production ради так далее я лично находил баг в room это был интересный баг он то есть я повторил точно такой же тест загрузил туда тут же самую википедию попробовал отранжировать смотрю у меня там ерунда какая то вот начал разбираться у меня ранг как бы всего оказался infiniti вот ну то что что-то пошло не так ну не проблема я у меня рядом сидит федор сигаев я ему как бы показал эту фигню он там типа через день это исправил ну то есть да это новый индекс да он не входят как бы штатные позы в частности за этого его на амазоне не поднимется если ну смотри в радиусе если вы как бы все сделали правильно и держите возрастные института все хорошо и да там могут быть байден спасибо да и насколько я осведомлен он в целом он помедленнее гена то есть он именно вот для ранжирования заточен да пожалуйста подскажите что с мульти нормализации когда мы терм нормализуем два других термо это например когда у вас там типа вы хотите по слову фон найти и iphone и фон условно говоря то есть когда вы iphone нормализуете в два слова фон ну например да можно такой вариант рассмотреть честно я такого не видел то есть на сколько я знаю что вот тут с вектор санта вы не может опять же вы можете сделать крафтовые процедуры которые для вашего случая это сделают и опять же вы можете использовать торгами который для многих случаев опять же например вот встроенный обычный пластик свой поиск он например не аху не находит iphone по слову fawn но по гтд мы находят поэтому опять же если у вас эти слова которые вы на прямой связи в которой вы хотите нормализовать они похожи то вам поможет вот просто по-другому из коробки иначе вы можете сделать своей процедуры который вам это сделать перед индексированием но так чтобы она прям было в под crysis короткий я лично не видел но вам лучше это поискать спасибо такой вопрос насчет индексов по массиву вывод говорили можно gain использовать яндекс да а единственный ли это вариант чтобы искать хождение элемента в массив помощью индексов по моему keys точно так же работают ну то есть опять же зависит от вашей нагрузки если у вас много записей мало чтение этого попробуйте gist еще есть на самом деле sp dist но sp gist он не он не работает для полнотекстовый поиск поэтому я бы здесь особо не упоминаю потому что для него то есть он может работать на для него тупо никто не написал классов вот для массивов он может работать я честно говоря не пробовал если я просто напишу create index он там поле где массив попробуйте и вы знаете что будет но я по памяти не скажут эти я боюсь я не помню вот все ответы позор сон на все носку скорее всего он создаст ну то есть моя лучшая догадка что он вам создаст дефолтный b3 яндекс и вы сможете искать только по полному совпадению и больше меньше края еще ну на всяк случай если вы не следите за десяткой в десятке починили наконец хэш индекса нечестно пишутся валу не ломаются и так далее прям щас не наступило и на некоторых запросах с яндекс оказывается быстрее бы три на тебя так просто к слову пришлось спасибо десятка прямо стал очень клевый вопроса еще один вопросик а если какие-то плюшки для поиска по углам по углам да но всегда мы очень любим да там индексировать какие-то интернет-странички данном кие товар лобне встречается и например мы хотим найти все url и определенного домена как вот в чем его суть районе суффикс ный поиск какой то суффикс ный поиск ну а первое что приходит на ум вы можете опять же этот урал нарезать в массив и поискать по нему я видел какие-то специальные типы данных префикс на и как раз для этого вроде бы заточены но я так по памяти не готов ответить боюсь но я хочу подчеркнуть я не то чтобы там знаю весь под господ рос очень большой у вас наверняка опыт просто больше чем у меня вот но то есть первое что приходит на там нарезать урон в массив и поискать по массиву например на это вот просто вот первое что голову пришла еще сама дурацкий вопрос поиск по никам и по хештегам то есть вот но меня между склеенные слова когда мы там не знаю там склеиваем просто два слова до рядышком без пробелов и мы хотим по каждому из них искать если какая-то тоже возможность решения но по г торгами этого умеет ну то есть ему ему все равно выходим во все в одно слово напишите почему но я насколько понимаю то все вопросы и до нужно будет добавить вот в эту презентацию побольше слайдов следующий раз тогда поаплодируем александр а мне же вопрос на того чтобы пойду мне про репликацию размер индексов понравился"
}