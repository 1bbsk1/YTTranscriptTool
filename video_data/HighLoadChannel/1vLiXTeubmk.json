{
  "video_id": "1vLiXTeubmk",
  "channel": "HighLoadChannel",
  "title": "Совмещаем потоковые и пакетные процессы в Camunda BPM / Максим Павлов (Axenix)",
  "views": 559,
  "duration": 2408,
  "published": "2024-04-17T01:10:29-07:00",
  "text": "всем еще раз Привет меня зовут Павлов Максим Я работаю в компании xenix На позиции старшего менеджера Сегодня я вам постараюсь рассказать как мы используем команды bpm в наших разработанных проектах на примере двух разных функциональностей еще раз коротко обо мне разработка Я занимаюсь довольно давно с bpm движками тоже довольно давно знаком Что такое команда bpm это популярная имплементация bpm движка на данный момент самая популярная позволяет автоматизировать бизнес-процессы описанные с помощью аннотации позволяет выполнять логику схемы процесса без необходимости описывать весь сложный процесс в комплекте самому движку прилагается удобный редактор который позволяет создать схему настроить все компоненты и даже за диплоид процесс запущенной инстанс плюс плюс небольшим плюсом небольшие предлагается возможность тестирования процессов Что же нам дает сам bpm первое возможность писать достаточно сложный функционал в виде последовательности шагов тем самым можно разбить сложный процесс на простые шаги и с помощью схемы описать последовательность их выполнения при этом остается возможность достаточно гибко изменять этот процесс при этом не изменяя серьезно весь код который мы пишем в микросервисах исполнителях позволяет использовать контекст процесса для того чтобы передавать данные от одной задачи к другой при этом достигая какой-то полученной цели финальной в нашей функциональность ну и плюс бонусом возможность использовать спиртовые движки для дополнительных расчетов и преобразований в схемах что же кому-то не дает производительность Она точно не добавляет если мы возьмем нашу функциональность закодируем ее классическим способом в виде кода работать явно быстрее что еще не дает контекст контекст процесса Sorry имеет ограничение туда невозможно запихнуть большие объекты которые с которыми Нам необходимо работать ну и в целом bpm не делать работу он просто позволяет регистрировать микросервис исполнители Ну если только речь не идет совсем простейших задачах переходим к описанием собственно двух функциональностей условно две функциональности называются пакетная и потоковая обработка расскажу почему прямо сейчас первая функциональность пакетной обработка Наш наши проекты тесно связаны с банковской сферой и в принципе функциональность она подразумевает использование мы используем эту функциональность в кредитном процессе поэтому пакетная обработка сама основная задача состоит в ежемесячном расчете при подобных предложений банкам на вход поступает очень большой объем данных расчет занимает несколько дней в ходе расчета происходит сбор очень большого объема информации из довольно большого Спектра источников внутренних внешних при этом почему она называется пакетная потому что входной массив В итоге делится на большие части которые обрабатываются параллельно но и дополнительно внутри на каждом этапе происходит разбиение на более на более небольшие объемы данных которые мы называем пакетами и размер и количество пакетов совершенно разные в зависимости от того этапа на котором происходит обработка данных кратко на слайде эволюция процесса за несколько лет продакшене схемы довольно объемные большие в принципе за за это время немного изменилось появились дополнительные этапы про суть схемы скажу чуть позднее количество задач разнообразных увеличилось и первоначальная схема предполагала какой-то один тип расчета но впоследствии она была доработана с тем чтобы без изменения можно было использовать для разных типов расчетов суть довольно простая вот здесь выделены основные части в принципе это как раз напоминает тот самый конвейер в котором это применяется когда данные перетекают с одного этапа на другой цифра один обозначена Подготовительная часть в которой происходит простейшие инициализации процесса статусной модели подготовка синхронизация справочных данных и так далее вторая часть завершающая на которой происходят построение отчетности передачи данных обновление статусов и завершается процесс в целом Ну и основная часть третья в которой происходит основная обработка входного массива происходит забор его из внешней системы затем идет формирование пакетов на каждый из вот этих 13 небольших этапов на которых происходит собственно либо получение данных внешних источников либо какая-то калькуляция либо Принятие решения на полученных данных Ну и вторая функциональность которая условно называется потоковая суть ее тоже проста это уже онлайн процесс принятия решений по входящим запросам в рамках оформления заявки клиентам то есть по сути процесс необходим для того чтобы принять решение Да нет клиента по заявке средняя длительность формирования такого решения в районе 36-60 секунд часть запросов выполняется дольше поскольку включает ручные операции средняя нагрузка в нашем случае это в районе 10 FPS также здесь используется большое количество внешних и внутренних источников данных для принятия финального решения Ну Аналогично здесь эволюция Здесь гораздо более красочно представлены первые варианты схемы которые пошел в провод составляться состоял всего из четырех небольших этапов по сбору данных и Принятие решения Ну и он вырос до такой же большой схемы которая включает себя уже 15 этапов сбора данных калькуляции различных манипуляций с данными для принятия решения Ну и появилась многопоточный режим обработки а также более продвинутый процесс работы с ошибками суть аналогичная состоит из трех основных частей под цифрой 1 это бесконечный цикл в котором находится процесс по цифре 2 обозначены условия выхода условием выхода является наличие финального решения Да мы говорим клиенту по этой по этой заявке Либо мы отказываем Ну и вот по цифра три обозначен основное тело цикла который состоит из кучей параллельных этапов которые могут выполняться либо параллельно либо последовательно О деталях позднее как это реализовано собственно на выходе мы формируем решение отправляем вызывающую систему перейдем к деталям первое Собственно как это устроено как в нашем случае мы применяем команду команда bpm 7 версии в этот режим так называемом внедренным оборачивается приложение запускается несколько используется после базы для интеграции Java приложения включает в себя универсальный listener который используется на схемах процессах для того чтобы преобразовывать задачи бизнес-процесса в поток сообщений в топиков Кафки которые слушают ряд микросервисов разного разных функциональностей которые эти задачи затем выполняют и отчет о выполнении с результатами отправляют назад который принимается уже универсальным Кафки в свою очередь и реализуют три простых функции для работы с командой это мы можем запустить какой-то новый процесс если нам Пришла заявка нам нужно запустить новый процесс завершает задачу и присылают результаты выполнения если они необходимы и таким образом собственно у нас бизнес-процесс преобразуется в два раза направленных потока в одну сторону задачи в другое что-то выполнение Базовый элемент всех процессов это сервисная есть у неё подтип внешне базовый блок который мы используем практически на всех процессах в командной модели можно описать входные переменные какие-то которые будут поданы на вход этой задачи и в блоке выходных переменных можно описать переменные которые будут получены процессом После выполнения задачи которые могут использовать где-то дальше соответственно в самом в самом бизнес-процессе мы описываем только шаг который нам нужно выполнить и небольшую контекст для его выполнения сама же логика которая будет выполняться над данными где-то что-то будет происходить будет рассчитываться происходит уже в микросервисах Там вся логика зашита она может быть тяжелой задачи могут быть длительными могут быть скоротечными быстрыми второй второй набор элементов для взаимодействия между процессами или взаимодействия между разными потоками внутри одного процесса позволяют нам отправлять сообщения вовне вот данном случае первый это не блокирующая неблокирующая элемент который позволяет нам по ходу действия процессы также формировать какие-то направленные поток сообщений в Кафки для того чтобы его как-то можно было использовать это могут быть носификации какие-то это может быть какое-то обновление статусной модели ищет или еще что-то то есть те задачи которые не требуют сообщения о выполнении также используется базовый блок ожидания внешнего события в пакетном процессе базовый пример мы отправили какую-то большую порцию данных какую-то внешнюю систему ожидаем от них от неё какого-то ответа с тем что данные готовы мы можем либо эти данные загрузить либо пройти дальше по процессу уже использовать полученные данные набор базовых элементов работы с помощью для работы с коллекционным сообщениями и сигналами также базовые блоки аннотации позволяют организовывать вот похоже здесь приведенные на слайде конструкции которые позволяют воздействовать на процесс Извне в нашем случае эти конструкции применяются в процессах обработки ошибок разная комбинация сигналов и координационных сообщений позволяют воздействовать на процессы разным способом так-то на воздействует на Одиночный процесс с использованием переменных воздействует на группу процессов находящихся в похожем состоянии либо к глобальное воздействие на процессы все в целом еще следующий Базовый элемент это очень простой но очень функциональный простой пример процесс просто проверяет выполнение условия которые описывается в настройках элемента если условия истина то процесс идет дальше без остановок если условия ложные процессы останавливается и ожидает изменения контекста при этом пересчет этого условия происходит при каждом обновлении контекста Ну и более сложные конструкции собраны из базовых элементов первая мульти instance под process который позволяет использовать одну схему и запускать ее в многопоточном режиме опять же базовый пример в нашем случае это обработка Параллельная обработка разных пакетов и бачей работает довольно просто на вход подается какой-то массив находится в котором находится элементы на Каждый элемент массива кому запускает процесс элемент массива помещается в контекст с этим можно продолжать работать плюс существует настройки как это запускать параллельно последовательно либо в какой-то пропорции параллельно последовательно а следующий паттерн который мы используем цифровизация потоков здесь используется Базовый элемент как раз ожидание условия в процессе и простейший скриптовая задача которая производит собственно обновление этого контекста нашем случае мы используем этот паттерн в потоковом процессе поскольку там у нас происходит большое количество параллельных обработок при этом задачи могут выполняться как параллельно так и последовательно с указанием зависимости что выполнить в первую очередь что Во вторую и это работает в рантами соответственно позволяет изменяя входной входной массив указать что нам нужно выполнить В каком порядке но при этом такой подход может стать источником проблем поскольку задача выполняется параллельно а обновление происходит одного контекста соответственно может быть возникнут проблемы при одновременном доступе и обновлению переменных но опять же использование задач позволяет минимизировать влияние или шанс возникновения таких проблем с помощью блока настроек которые предоставляется к сервисным задачам как остальным другим это настройки определяющие момент сохранения контекста в базу данных а паттерны обработки ошибок на первых на первых порах были совершенно простейшие паттерны использования задачи таймера для отслеживания тайм-аута простейший рабочих ошибок совершенно простой условия для повторного вызова задачи какое-то количество раз в случае исчерпания количества повторов выход генерации или проброс ошибки выше и затем в родительском или в корневом процессе происходит простейшая отправка ошибки клиенту и мы отвечаем на обработку на входящие запросах какой-то ошибкой в процессе развития проекта работать поддержкой был пересмотрен процесс обработки ошибок он вырос он превратился в отдельный процесс который включает себя обновление статусной модели для того чтобы поддержка могла видеть в чем конкретно проблема случилось при этом процесс не завершается продолжать работать может перейти в состояние ожидания после того как поддержка починила что-то если это касалось какого-то внешнего источника с учетом того что количество интеграции У нас очень большое то интеграции могут ломаться либо внешней системы перестают отвечать но при этом процесс мы не теряем даем возможность поддержки починить проблему затем с помощью корреляционных сообщений сигналов воздействием на процесс возвращаемся в точку где ошибка возникла с помощью таких конструкций и продолжаем процесс дальше доводим его до финального конца при этом не приводя к ошибке Ну и да часть потоковых процессов заключает ручные операции по сути паттер тоже такой же базовый как и с обычными задачами единственное здесь что используется другой топик и работу здесь выполняет не какой-то микросервис а Конкретно какой-то оператор человек процесс принципе очень похожий Отправляем сообщение из этого топика потока польских задач учитываются сообщения показываются пользователям они выполняют определенные действия в зависимости от типа задачи завершая задачу предлагают выходные переменные процесс идет дальше собственно процессе работы над эти функциональностью с применением коммунда сталкивались с разными ошибками и какой-то опытный пытались наработать первый наверное первая ошибка или первая то место которое может стать потенциальным источником ошибок это контекст процесса контекст-процесса не резиновый туда нужно класть исключительно очень только те данные которые непосредственно нужны если кладем больше база данных кому-то с которой она работает использует по сути одну таблицу для хранения контекста чем больше переменных кладем тем больше становится контексте пухнет база запрос работает медленнее просадка производительности большое количество переменных если все-таки их нужно использовать в таком случае лучше группировать в списке что позволяет собственно можно сделать прямо в самом модели определить переменную положить неё соответственно такая переменная уже будет занимать всего лишь одну строчку в базе данных и высчитывается такой контекст будет гораздо быстрее Ну и также очень важная вещь понимание области видимости переменных поскольку в контексте процесса переменные имеют две области видимости локально и глобальная то обязательно не забывайте использовать в первую очередь локальную область видимости а затем глобальную потому что в случае многопоточных процессов это приведет к непонятным ошибкам почему одна переменная здесь была такая потом поменялось значение непонятно почему очень важно при этом соблюдать правила области видимости сложная логика в процессе можно использовать для сложных логики в процессе можно использовать скриптовые задачи по большому счету любая задача любой блок в процессе имеет возможность добавить на него слушатель какого-то события Прошли мы по стрелке это событие зашли мы в блок вышли Мы из блока и есть возможность на любом стриптовом языке поддерживаем команды Дописать какую-то логику в этот момент Но если нам требуется какая-то нетривиальная вещь какой-то более сложной обработка для этого есть отдельная скриптовая задача плюс дополнительно ко всему она обладает всеми необходимыми свойствами которые позволяют управлять сохранением контекста эксклюзивностью доступа как и все остальные задачи Ну сама по себе команда по умолчанию очень любят писать базу данных историю запуска всех процессов аудит изменения переменных этих данных очень много особенно если процесс запускается часто Поэтому нужно понимать что это приводит к очень большому и экспрессивному росту базы данных Поэтому нужно оценивать необходимость этого механизма и не забывать его при необходимости либо снижать его объем либо отключать полностью в нашем случае мы пришли к тому что отключить историю процессов и аудит команды полностью при этом прикладными средствами У нас есть возможность восстановить историю Что происходило что менялось но при этом позволяет сохранять нам размер базы данных команды на стабильном уровне она не растет Ну и краткие выводы по всему вышесказанному сам по себе кому-то прием доставит что универсальный инструменты можно реализовывать совершенно разные процессы длительные короткие большое количество запущенных институтов маленькое количество то есть когда запускается один какой-то велотекущий длинный процесс задача можно разные решать с помощью этого инструмента можно сочетать автоматическую обработку можно сочетать ручные операции это может быть какой-то ряд ручных операций которые выполняют разные люди с разными ролями позволяет многопоточную обработку применять тех местах где необходимо И позволяя ускорять тем самым процесс депозиция очень важный шаг при построении процесса который в котором очень важно и разделить весь процесс на простые блоки которые затем из которых и затем будет построен процесс они должны быть на Как можно более-менее как бы как можно менее связанными для того чтобы затем схеме последовательности блоков можно было менять Что добавить в гибкости и собственно разделять базовые операции которые будут выполнять либо человек либо микросервис От последовательности команда это последовательность регистрация непосредственно логика лежит в сервисах там происходит все расчеты и это позволит не нагружать движок при выполнении базовых условий не не загружать контекст не использовать правильно глобальные локальные области видимости переменных довольно производительный движок довольно быстро работает позволяет одновременно запускать большое количество инстансов которые в том числе которые учитываются при выполнении ручных операций длительных процессов в принципе у нас вопросов к нему в этом плане Нет ну и базовая базовая базовый вывод гибкость Для чего собственно это этот Для чего команда bpm применяется Ну и в целом имплементации для того чтобы построить написать в коде какие-то функции простые для обработки данных а потом связать все это вместе процесса и позволяя этот процесс впоследствии изменять только с помощью изменения схемы при правильной декомпозиции это будет довольно просто при этом необходимость переписывать код и кодировать последовательность в исполнителях не требуется происходит полное отделение по ссылке есть принципе готовый проект который содержит себе принципе весь этот базовый сетап со всеми базовыми функциями позволяющие запустить сам движок задеплоидная схему и в принципе со всеми вот этими механизмами интеграция ставкой универсальные листы для Кафки и для команды позволят это проверить и посмотреть как это работает Да наверное вопрос раз Максим Спасибо за доклад У нас есть как всегда за лучший вопрос приз поэтому Давайте первый ряд Спасибо за доклад У меня вопрос Какие задачи Какие требования перед вашим проектом стояли что вы бы сказали вот сейчас там точно Нужна команда потому что вы сами сказали ну производительность все равно пострадает как не пиши В чем плюсы плюсы потому что уже был опыт работы в таком режиме применение бизнес-процесса ну и плюс сама задача описана таким образом она по сути с точки зрения бизнеса тоже является неким аналогом бизнес-процесса те же самые кубики после вычислений поэтому она очень легко перекладывается на Уже именно в техническую схему Давайте дальше так туда а подскажите пожалуйста у вас есть какая-то статистика сколько изменений происходит вот без этого самого переписывание кода А сколько спереди Ну смотрите грубо говоря если у нас есть кубик на схеме который выполняет какую-то задачу не знаю вот Пришлите данные на вход нужно их как-то какую-то выполнить калькуляцию и вернуть я не знаю если с точки зрения применения к нашей области посчитать какой-то балл какой-то балл который потом дальше будет схеме использован то мы можем менять схему можем не менять потому что скоро болтом это будет вызывать всегда но при этом мы пишем изменяем уже код самого сервиса который этот балл считает соответственно схема у нас постоянно если нам нужно этот кубик считать не здесь а немного ранее и подать его на вход какого-то другого то собственно код нам менять в сервисе не надо мы его перемещаем и только изменением схеме меняем последовательности логику всего процесса статистика Я думаю что в целом это 50 на 50 потому что функциональные требования меняются то есть Нам нужно либо доработать калькуляторы процессы тоже меняются добавляются новые элементы но в целом изменяются процессы гораздо реже спасибо от второй вопрос Позвольте А вот решение именно О выборе коммунды оно было какое-то коллегиальное там на уровне руководства и это Артек там не знаю архитектор ребят разработчики предложили дальше то кого передать микрофон Ну на самом деле сейчас альтернатив не так чтобы много именно из популярных имплементаций были в свое время Activity с помощью из которых выросла команда был опыт работы с jbpm но по части легкости так скажем и по части универсальности работы с модельером который позволяет в комплекте пока альтернатив на тот момент не было Сейчас может быть уже что-то есть еще что-то но пока у нас это было вопрос был кто выбирал Давайте в этом крыле было много рук Да расскажите немножко про дипломин то есть во что вы диплоитесь он прям сервера Облака Вот куда вообще это загружаете где работает и какие-то может быть с этим специфические проблемы были если Ну вот базовый стат который показан был по сути это javas приложения будет оно запущено в облачной среде в виде контейнера либо будет запущено как жало приложение как сервис в принципе большой роли не играет команда представляет в принципе из коробки арестового интерфейс для взаимодействия с процессом в том числе и теплой собственно для тепло используется стандартные арестовый интерфейс команды э есть репозиторий в котором собственно содержится сама схема есть вся cd-процесс который при изменениях в схеме берет этот файл и кидает его в rest все вывездипло На этом заканчивается Давайте дальше рядом рука Выбери сам Здравствуйте Большое спасибо за доклад Подскажите пожалуйста все-таки как часто были кейсы модификации схемы и как это решалось на продакшене что было уже запущенными по старой схеме процессами апгрейдились ли они просто часто это большая головной больших в нашем случае да в команде есть во-первых версионирование запущен за диплоидных схем накатки новые появляется новая версия по умолчанию все старые процессы запущенные в рамках предыдущей схемы работают в ней же есть есть механизм миграции процессов в нашем случае мы иммиграцию не используем потому что они дорабатывают по той схеме с учетом корот процессов там 30 60 секунд там ну иммигрировать смысла нет они уже закончат работать в случае большого процесса он работает несколько дней но он запускается в единственном один-два инстанса поэтому там тоже миграции не требуется Как таковой поэтому мы с этим Ой у вас микрофон говорить хотел бы еще узнать А почему было принято решение снять полностью аудит системы и историю собирать если в случае ну вы можете гарантировать что у вас все четко прямо работает и дева жить вам не приходилось Ну во-первых команду по тем данным который кладутся в базу в виде аудита Ну тоже нужен определенный опыт в нашем случае у нас же используется Кафка Поэтому в Кафки все вся последствия действия отражается мы можем просто открыть топик и по сути восстановить последовательность действий в том числе параллельности и когда задача туда легла когда пришел ответ и собственно процесс это гораздо проще чем Потому что аудит как такой в базе есть но к нему какого-то доступа удобного нет Только если там молодой человек поднимал руку в центре Да спасибо за доклад тоже активно очень используем команду нагруженную Да у меня такой вопрос какие-то инструменты вокруг команды Используйте приведу пример то есть который показывает допустим частоту использования веток то есть производительность где у нас затыки в каких ветках а потом что еще Диф между разными версиями команды Ну то есть там чтобы как Power Квеста удобно смотреть вот такого рода смотрите Ну по-моему насколько я помню в коммерческой версии есть как раз тепловая карта процесс Нет не используем используем комьюнити версию без со стандартным копитан с базовым по поводу дифф дефа насколько я помню Даже по-моему есть инструмент который показывает именно визуально разницу между двумя схемами версиями и прям насколько по-моему даже модель такая была функция модели по-моему Нет давайте я Вас тогда спрошу если будет ссылка был я Мы не часто не пользуемся потому что но по-моему что-то такое было стандартная Так у нас вопрос чата я его зачитаю Антон пишет конкуренции производительности пострии нагрузка на цпу УВД при работе комода и параллельных процессах с этим Нет проблем Как решается на самом деле вот насколько я помню Нет проблем Единственное что да для коммунду выделенной инстанс потому что чтобы не было интерференции каких-то других сервисов и работы с базой но конкуренции насколько я помню таких проблем у нас не было так давайте вот второй ряд молодой человек давно тянет Здравствуйте Максим Спасибо за доклад хотел вас спросить по поводу крови Я заметил вас на слайде был брови Как вы их отлаживаете вообще потому что у меня опыт довольно болезненный был Да вот Единственная проблема что базовых из коробки модели именно отладки всяких скриптовых вещей нет ну отваживаем диплоид процесса и тестированием интеграционным запуск только так как за экранировать в крови 10 кавычек Да там обычные текстовое поле поэтому редактировать там тоже крайне больно Давайте вот молодой человек тоже на втором ряду Спасибо большое за доклад вопрос У вас достаточно сложные процессы Коммуны вот они вы рассказали что они лежат там снапшотами в системе контроля версии Как устроен Continuous с integration Continuous deliver есть такой есть как вы строите систему тестирования этих процессоров процессов автоматического Если это возможно нет как раз именно про диплоид кратко рассказал как технически происходит тестирование конкретно только схема автоматического Нет они тестируются в рамках всего интеграционного теста всех процессов запускается если это если это потоковый процесс Ну это разные заявки тестовые гоняются по разным веткам если это пакетный процесс соответственно запускается и тестируется в целом еще вопросы зала Елена Спрашивает какой прогноз по импортозамещению команда или нет прогноза или нет размещения пока нет пока нет Спасибо Надеюсь не предвидится еще вопросы зала Карпенко Глеб Алексеевич спрашивает Есть ли нюансы иммиграции инстансов процессов при выпуске новых версий процессов А ну да я уже это это я проговаривал иммиграцию мы не используем Да поэтому у нас нет нет не использования проблем Какое количество схем работает в вашей системе если у них общие части используются ли под процессы Почему Какое количество схем Я думаю что несколько десятков Ну вот базовый процесс большой пакетный это по сути одна схема состоящая Там технические из двух потоковые процессы это порядка десятки десятки процессов Ну с учётом того что они ещё версионируются то там получается несколько десятков процесс естественный используется вот базовый процесс обработки ошибок это общая часть которую можно переиспользовать вот почему собственно их нужно использовать Давайте еще залом пообщаемся Где мы не спрашивали Давайте в конце Спасибо большое Максим у меня такой вот вопрос мой опыт работы с командованием отдельно вот Коллеги с которыми я общался по рынку примерно все команде отзываются Так у нас была задача регистрировать бизнес-процессы мы взяли команду мы с ней очень-очень-очень сильно наелись В итоге все получилось но больше бы мы ее не взяли в связи с этим вопрос Это не единственный такой отзыв А что надо обязательно делать и наоборот обязательно не делать чтобы не было мучительно больного как у коллег с командой ну неизвестно причина их боли поэтому тут тяжело советовать если проговорить про наш проекты то сам по себе движок и бизнес-процессы из всей системы как компонент насколько Припоминаю меньше всего проблем доставляет проблема чаще в других участках возникают с базами данных которые не связаны с коммундой с может быть сказкой с микросервисами но с командой проблем практически не было Ну единственно там были наши проблемы Вот в той обвязке которую мы добавляли Да там были ошибки были утечки памяти но это не относится к самому движку вот там с ним проблем не было никаких что движок там условно вставал не мог переварить какие-то объёмы ещё вот это То есть вы спроектировали так что у вас таких проблем не было Ну опять же у нас подход такой что по сути движок по большому счёту никакой калькуляции не занимается по сути его задача просто конвертировать Кубики на схеме в сообщения в кафки поэтому какой-то сложный логике самих схемах нет именно базовая оркестрация если у коллег было что-то более сложное если Они использовали там делегирование прямой вызов или какие-то калькуляции в самой схеме может быть с этим могут проблемы Спасибо Спасибо наверное последний вопрос рядом молодой человек и мы заканчиваем вопрос очень много интересная тема Добрый день спасибо за доклад Как вы уже говорили у вас довольно много процессов и при этом более крупные процессы вызывают другие процессы как под процессы Как вы вообще понимаете В какой момент нужно реализовывать какую-то логику не как функцию микросервиса А как под процесс тут нет На самом деле наверное не совсем так под процесс рождается когда появляется какой-то паттер на схеме который можно абстрагировать обобщить и потом переиспользовать А это вопрос скорее про разделение как раз оркестрации от злого выполнения Функции там вопрос обычно не возникает если нужно что-то с данными сделать то это делает микросервис получая какую-то задачу на вход ему говорят что делать и с чем Ну то есть какой-то идентификатор какого-то какой-то сущности с которым ему нужно что-то сделать и вернуть результат поэтому тут это как раз про декомпозицию сразу отделяется Что делают сервисы А где регистрация чистая Спасибо Максим теперь надо выбрать самое интересный вопрос на твой взгляд этот человек получит книжку так Ну наверное вопрос про инструменты про потому что заставит меня еще поискать и вспомнить пожалуйста И тебе от организаторов конференции сувениры подарки"
}