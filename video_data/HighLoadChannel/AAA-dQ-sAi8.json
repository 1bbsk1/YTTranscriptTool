{
  "video_id": "AAA-dQ-sAi8",
  "channel": "HighLoadChannel",
  "title": "TechTalk  \"Событийно-ориентированные микросервисы и проблемы перехода\" / Алена Мельник",
  "views": 732,
  "duration": 669,
  "published": "2024-04-10T06:02:40-07:00",
  "text": "Здравствуйте С вами конференция H + + 2023 и сегодня с нами в студии Алёна Мельник dnet разработчик из компании Здравствуйте Алёна начнём наверное по традиции как на этой конференции Представьтесь И где вы работаете чем вы занимаетесь Здравствуйте Я ведущий разработчик платформенной команды блока b2c Digital компании занимаюсь разработкой общих библиотек платформы а также общих концепций по разработке микросервисов И сегодня я хочу рассказать о переходе на событийно-ориентированная актуальная тема Я так понимаю везде все хотят быть асинхронными все внедряют события поэтому как бы Когда это началось у вас началось на самом деле не совсем давно когда я пришла в компанию начался какой-то переход и начали внедрять вот такие вещи под это дело взяли команду илито был один человек который идейно продвигает все эти внедрения у нас появилась команда Архитекторов Ну соответственно платформенная команда которая разрабатывает платформу на которой ВС это держится Ну и появились какието кома ВС у нас должно быть асинхронно ВС должно быстро но как бы такая архитектура она какие-то проблемы накладывает наверное не везде так получается красиво сделать А да это выглядит очень красиво у нас есть какой-то событийный поток и потребители в любой момент к нему подключаются могут с самого начала почитать события но на практике это не всегда так и ну переход на такую архитектуру может вызвать какие-то проблемы и как бы сразу тащить себе и везде использовать тоже не всегда хорошо Ну вот то что все все события всегда доступны это вообще реально например не знаю специфика каких операторов связи то что все события Я так понимаю все события сервисные о подключениях там о передаче сообщений Это подразумевается под сообщениями или что-то другое Ну в принципе вся событийная информация которая может быть доступна и которую кто-либо может потреблять а в принципе ну в идеале должна быть в компании такая инфраструктура которая поддерживает бесконечное хранение событий но это не всегда возможно и не все хотят это у себя делать по каким-то причинам ну в основном из-за накладных расходов и поэтому обычно смотрят в сторону каких-то холодных хранилищ например С3 чтобы получать события уже по требованию когда они действительно нужны также необходимо чтобы была инфраструктура для гибкого управлени партиями топиков капки для того чтобы иметь возможность гибко масштабироваться добавлением потребителей Ну а вообще считается что кавка наша всё она главное средство для асинхронных для передачи асинхронных событий и хранения А есть ли какие другие варианты Да есть несколько вариантов просто кавка самый популярный из них и обычно её используют можно делать это через какие-нибудь стримы в мо Дале Ну я слышал что вот как бы главная проблема с такими событий вернее данными внутри событий это как бы освобождение этих данных то есть отвязка самого события от источника Да с этим могут возникать проблемы потому что как в компании есть много Legacy систем и нужно как-то освобождать данные обычно это связано с какими-то большими сложными миграция Ну иногда конечно небольшими и не сложными но чаще всего вызывает какие-то сложности И для этого обычно используются какие-то средства типа кавка Connect Или например делается отдельный микросервис который забирает данные с базы и куда-то складывает в событийный поток по потребители уже забирают то что им нужно хорошо но вот я так понимаю отвязка данных это подразумевает что внутри данных нет каких-то ссылок на внешние системы Ну например А как тогда отслеживать целостность данных так А каждая система у себя хранит Ну обычно какое-то состояние Ну конечно не всегда справедливо но мы получаем информацию как-то у себя её обрабатываем и потом в зависимости от того что приходит уже происходит обновление Ну иногда есть какие-то проблемы Когда необходимо обновление одновременно из нескольких событий и тогда нужно Ну выбирать какой-то способ как с этим бороться например какие-нибудь сравнением версий использовать transaction Out бокс Или те же кавка транзакции А вы используете версии да Для того чтобы это отслеживать Ну в том числе это просто не всегда эффективно Ну вот можно ещё использовать какое-то слияние веток событий Как говорили в одном анекдоте интеграция - это хорошо но есть нюансы есть какие-то такие нюансы которые вы можете подсветить в использовании таких архитектур в первую очередь возникают сложности с разработчиками Потому что им не всегда легко понять почему нужно переходить на такую архитектуру Почему нельзя использовать какое-то взаимодействие типа запрос ответ А потому что для этого необходимо какое-то перестроение мышления Ну то есть это влечёт за собой какую-то работу С командами обучение и так далее Это подразумевается полный переход разработчиков или у разработчиков всё-таки есть шанс использовать например в каких-то места где необходимо например синхронные вызовы где-то А вот сейчас вот новое мы делаем что-то асинхронное Или вы решили вот полностью на асинхронные перети рельсы и вообще везде асинхронные реактивные Кафки и всё такое Нет конечно это зависит от ситуации есть в каких-то местах лучше использо такое взаимодействие в каких-то местах подойдет запрос ответ это Например хорошо ложиться на биллинг Когда у нас уже есть какая-то последовательность исторических событий всякие переводы пополнения снятия транзакции по банковским счетам и в принципе такие вещи хорошо использовать например потому что там уже из коробки есть аудита если в приложении это нужно то хорошо это использовать в принципе также аудита можно использовать для расследования каких-либо инцидентов потому что можно получить цепочку событий и отследить В каком месте что-то пошло не так ну это часто бывает Нужно на практике также Например у нас есть какие-нибудь leg системы которые не могут поддерживать высокую нагрузку проектированием систе это предусмотрено если обращались по СГ обеспечить проектную нагрузку и поэтому в таком случае лучше читать событийный поток и тогда можем прочитать Именно столько сколько нам нужно в данный момент и не создавать какую-то дополнительную нагрузку на leg систему ну хорошо это тогда наверно командно с точки зрения технической части А с точки зрения процес гони потребовать некоторой перестройки процессов То есть если ещ происходит одновременно переход в принципе на микросервисы и в компании это раньше не использовалось это какие-то новые механизмы CD и так далее Ну хорошо А например если я вот разработчик и решил что-то почитать куда-то посмотреть есть ли какие-то Можете ли что-то порекомендовать с точки зрения про и тому подобно Да есть определенная литература например создание событий ориентированных микросервисов и также некоторые книги по такой архитектуре но в них описаны какие-то общие концепции и если применять их на практике то это Придётся делать самостоятельно потому что э тема ВС ещё достаточно но можно сказать В некоторой пени мод ро но там тоже нужно какое-то время чтобы погрузиться в эту технологию и ну и не стоит это всё использовать потому что это модно если есть такая необходимость то пожалуйста если нет то лучше посмотреть ещё другие варианты Ну то есть как всегда нет такого стопроцентного рецепта что вот теперь у нас реактивно асинхронно таежно вву очере своих потребностей потому что в любой распределённой системе есть свои проблемы и нужно просто принять эти риски и в принципе событийное най микросервис - Это хороший инструмент который нужно правильно готовить Ну хорошо Это я так понимаю минус А вот какой-то такой плюс который вы можете сказать что вот вот это вот оно заиграло яркими красками вот ради этого нам стоило всё это затирать Например если у компании есть какой-то новый продукт и с ним нужно как можно скорее выйти на рынок то это может быть хорошо потому что вот та самая стратегия освобождения данных она помогает тем что у нас уже есть в доступе та информация которая нужна и не нужно делать каких-то дополнительных интеграций и это ускоряет время выхода продукта на рынок но также мы можем делать какую-то дополнительную аналитику потому что опять же вся информация уже есть и нужно её использовать создавать какие-то распределённые распараллеливание распараллеливание системы и так далее ну это я думаю важно для мобильного оператора распределённой геосистемы самое главное что нужно хорошо Алёна Спасибо большое было очень интересно тогда встретимся на конференции спасибо С нами была Алёна Мельник и ваш ведущий Абашев Алексей"
}