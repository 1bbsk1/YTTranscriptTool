{
  "video_id": "7CWTKXbALso",
  "channel": "HighLoadChannel",
  "title": "Open Source AppSec Review: как сделать приемку, внедрение и харденинг решения/Л.Хакимов,  А.Федулаев",
  "views": 473,
  "duration": 2525,
  "published": "2024-10-29T03:03:54-07:00",
  "text": "Я хочу поприветствовать наших докладчиков Лев Алексей заходите пожалуйста на сцену Расскажите как же раз раз Привет друзья Всем привет Итак Ну что же как уже сказали сегодня закрывающий доклад дня последний по порядку но надеюсь не последний по значимости В этом зале уже много говорили про Open Source что это такое какой бывает как его разворачивать настраивать как ускорять и оптимизировать и всё это важно а мы поговорим про то что мы с тобой больше всего любим про безопасность разработчики подождите подождите Не уходите да но Давайте немножко представим слово Алексею Да собственно Я Алексей дулаев я ste рис 12 лет в информационной безопасности и специализируюсь на безопасности контейнерных перевозок собственно пытаюсь сделать р со мной на сцене Мой коллега передаю ему слово и чуть-чуть позже присоединюсь да Меня зовут Лев Хакимов Я работаю тоже в компании рис занимаюсь Лид команды разработки автоматизации сервисов для информационной безопасности когда-то был девопсом но говорят бывших псов не бывает организовываю несколько крупных соревнований CF для безопасни capture The в Воронеже и в Москве а также делюсь своими знаниями со студентами в паре университетов в ИТМО и ВГУ лекции открытые можно приходить слушать вообще немножко про Актуальность данной темы вообще Open Source очень плотно вошёл в нашу жизнь и действительно сильно двигает Прогресс вперёд поскольку без он Сорсо в любом продакшене есть Open Source это и pog и cuber и много-много всего остального чем мы пользуемся каждый день иногда это да даже Open Source библиотеки в конце концов это тоже Open Source это безальтернативные вариант который действительно позволяет нам развиваться но Open Source привлекает достаточно большое количество злоумышленников Хотя Почему Да потому что код знаете не только вы но ещё и все ребята которые зашли на github поэтому это крайне тонкая тема поскольку у нас происходит огромное количество Атак на Open Source библиотеки на авторов И в частности сами авторы Open Source библиотек любят положить что-то нехорошее в свои либ через и все мы знаем историю например с массачусетский студентами которые подкаминской крайне неприятен Давайте разберёмся как вообще не оступиться с использованием Open Source и мы постараемся дать вам чек-лист который вы можете распечатать повесить себе на стенку и сверяя нового Open Source продукта а обезопасите ли вы от того что находится внутри ну собственно Давайте посмотрим наш продакшн вот у нас есть пользователь есть какой-то Раннерс и собираемся в докере всё замечательно Всё безопасно так я нарушаю так так так гражданин Остановитесь на секундочку Готовьте ваши документики и Давайте попробуем разобраться А собственно А как так что у нас за такая схема ведь у нас пользователь может сделать что-то не так всё это делает на личном компьютере соответственно туда может подлететь любая какая-то малварь или что-то ещё Он загружает непонятно откуда и непонятно Какие зависимости соответственно он даже может взять за малваре ий образ Безопасно ли это гражданин Да собственно конечно небезопасно тач полицейский полностью согласен поэтому к вашему приходу мы уже всё переделали Ну во-первых мы добавили сюда гит какое-то хранилище репозиторий gitlab неважно Теперь мы код храним локально У нас есть не только версионирование но и некая точка входа Откуда мы можем забрать весь наш код и разместить на раннере вот у нас есть райнер вот бегут счастливые сборки на отдельном запущенном лап раре вот тянутся библиотечка npm собирается в докере Ну а дальше мы всё выкладываем в какой-нибудь Nexus и катим в прокш Ну кажется Всё мы обезопасить по сути ничего же не поменялось Просто теперь мы вместо того чтобы билдить локально или что-то делать мы используем удалённый сервер осталась ли проблема помимо этого у нас ещё есть SH А что означает Shell означает что всё что мы сделаем на ране на НМ останется навсегда соответственно впереди и что у нас получается произвольный код выкатывается на прод Да это нехорошо но собственно Shell не проблема от шела можно избавиться убираем Shell runer потому что ну закон для нас превыше всего поэтому первое что мы делаем Какой вывод мы не используем раннеры Сегодня у нас будет такой пополняю чек-лист в рамках нашего краш курса который вы сможете потом забрать с собой прийти на работу и сказать что Ребята у нас всё плохо погнали дальше хорошо но теперь мы ВС переделали товарищ полицейский теперь у нас всё бежит в отдельных контейнерах всё замечательно потому что контейнер Ну Мы все знаем по определению это Априори безопасно потому что изоляция всё А вдруг мы всё-таки скачаем что-то не то и этот код сразу попадёт у нас на продакшн Ну тогда мы просто берём и добавляем де сегмент там код отстоит проверится мы чётко пробега посмотрим что с ним никаких плохих зависимой не зали у нас в конце концов есть qa которые для того и созданы чтобы Проверить всё ли у нас нормально Если всё хорошо то мы зальём это на прод всё замечательно как ещё мы можем обезопаситься считаете ли вы что вы всё предусмотрели для безопасности гражданин Ну давайте подумаем но я бы добавил например сканеры Ну потому что сканер - это прекрасная веь для того чтобы просканировать ваш код просканировать ваш образ понять есть ли там либо уязвимости посмотреть что вообще какие цки сейчас существуют Ну и в принципе например статически проанализировать код Так мы закроемся от всех школьников со скриптами Ну как минимум здесь проблем никаких не будет и уже отсканированный образ добавим в Nexus всё замечательно ч полицейский Давай дальше посмотрим сейчас а Сможет ли в текущем В текущей конфигурации нашего скажем так пайплайн афек на сборку х Ну давайте подумаем Ну в принципе конечно может потому что нам нужен докер и докер разберёмся Что за зверь такой ну с одной стороны мы действительно можем легко собирать контейнеры без использования докер кака наглядный пример докер не нужен контейнер ещё и легковес нее получится те кто программирует на Java на Java у них существует например от Гугла инструмент Jeep контейнер лёгкий простой и при этом собирается без докер в по обычной среде прямо можно из гры дла собраться всё замечательно всё супер но иногда нам требуется прокиды docker сот внутрь контейнера и Давайте заглянем что это такое Давайте заглянем к вам под капот Ну что ж придётся капот открывать ладно А вот у нас есть движок Докера Но тут уже я вижу сидят люди которые задаются не Мом вопросом двадцать третий год на изл какой докер ну во-первых надо сказать что Для нас это просто пример и все контейнерные приложения в целом похожи друг на друга то есть любое совместимая среда для запуска в целом похожа но с определёнными особенностями для той или иной системы Поэтому да подмена не будет будем говорить про докер вот у нас есть докер движок вот бегут счастливые контейнеры вот у нас докер сот на который клиенты будь то что угодно шлют свои запросы всё всё спокойно всё нормально Стандарт использования Но в этой табличке мы собрали в принципе Семь смертных грехов при использовании контейнерных приложений такая омерзительная семёрка Да собственно это основные виды уязвимостей которые существуют в контейнерных средах и для того чтобы их монтировать и раз монтировать файловые системы на эту табличку можно смотреть но тем не менее тоже вопрос Ну какой нормальный инженер будет добавлять калити потому что это как минимум лишние лишние слова надо в команды дописывать это уже выглядит нереалистично но иногда контейнер можно запустить из другого контейнера как это происходит Ну вот docker Socket монтируется В контейнер docker Socket - это обычный файл лежащий по этому пути мы монтируем его в контейнер для сборок Таким образом мы сможем подавать команды на сот они будут исполняться на Хосте Вот вам и Дин сборки причём мы можем мы сможем это делать Просто обычным курлова не нужно какое-то специальное сила или другое там окружение Да обычный курл уже для этого подойдёт Но есть один маленький нюанс есть нюанс собственно какой Ну вот допустим запущен У нас сейчас какой-либо контейнер вот он запущен калити все сброшены никаких дополнительных полномочий нет всё безопасно прокинуть докер Socket Ну а используем мы докеров ский образ исключительно для того чтобы у нас клишках оказывается внутри контейнера внутри нашего контейнера со сборками и запускает что-то вот такое в привилегированном режиме контейнер и маунти хостой файловую систему в папочку на Хосте и делает change root в внутрь этой папки поскольку р ID у Рута и на Хосте совпадают это ноль он получает рута на Хосте пожалуйста мы можем и посмотреть мы действительно находимся в хостой файловой системе Да ещё и Root всё замечательно мы внутри машинки на которой раня наши сборки Да и здесь ещё стоит добавить один важный момент для запуска Нда Вам нужен флаг Привет Что такое привет Вот сейчас мы на экранах видим с вами калити выданные для обычного контейнера дефолтный Давайте теперь посмотрим как выг кали прит контейнера приложит контейнер - это полное отсутствие изоляции это выданные все калити все Ну кроме пробро сокета все остальные шесть смертных грехов они уже здесь присутствуют соответственно с такого ра с Такого ранера можно будет легко Выбраться на стою машину и уже продолжить свои атаки на соседние следующие сборки А собственно если даже мы посмотрим какие Ары применены Мы видим что для у нас прин собственно его нету да И что можно с этим сделать прикольного гражда Ну что можно сделать А например поха Кать через ревел конечно вообще что такое ревер Shell это перенаправление оболочки ввода-вывода куда-нибудь себе мы просто открываем Баш и направляем его на какой-нибудь порт потом за него зацепляется с одной стороны докер действительно проводит изоляцию Но с другой стороны у нас есть кое-что общее А это ядро операционной системы которое для всех контейнеров в любом случае общая и соответственно если мы получим возможность из контейнера поместить какой-либо модуль в ядро и запустить его и модуль будет уязвим то в таком случае оно выполнится на Хосте э самый простой слой Где в аргументах командной строки мы просто скачиваем ревер Shell но Сюда можно вписать любой другой угодный вам ревер Shell либо какую-то либо команду либо команды которые э могут быть зловредные просто вгруди его при инициализации ядра и когда модуль загрузится функция init вызове и соответственно Вы скорее все код ваш код выполнится что мы с ним делаем мы просто компилирует для этого у вас должна стоять capability capsis модуль если она есть а в случае привид она у вас в любом случае будет вы этот трюк скорее Вайт если нейт это есть е куча всего остального благо эта тема уже давным-давно исследована и для того чтобы сбежать из контейнера достаточно просто иметь у себя Google Поздравляю Вы великолепны всё можете забирать бку с персональными данными начать исследовать всё что вам находится вы находитесь на раннере можете смотреть что оттуда вам доступно собственно запоминаем с вами Что н - это отсутствие изоляции Соответственно по возможности используете ка если такой возможности нету то Давайте попробуем разделить Кер ноды Ну теперь у нас билды идут отдельно там сканируется собирается а рар идёт отдельно Поэтому в таком случае вроде бы Билд никак не аффект на деплой всё так соответственно отсюда вывод Да что вам нужно с разных worker Note осуществлять Build и деплой и в случае если кто-то сможет сбежать из контейнера он никак не сможет оказать влияние на деплой Поехали дальше но Скажите гражданин ведь всё же ещё есть возможность чтобы код изв у нас попал в продакшн Давайте посмотрим Ну разделим Билд среды на отдельные Поэтому если у нас билды могут быть какими-нибудь специфическими мы там что-то билдим в таком случае потеря одного билда Она не обречён на билда Ну да тут отметить что зачастую разработчикам нужно тестировать новые зависимости естественно всё это они делают в деве поэтому там что-то может бахнуть и желательно чтобы продакшн был максимально далеко и отделён от этого в том числе продакшн билды отделены от де билдов соответственно мы используем разные ноды и раздельные Билд среды Так у нас ещё всё ещё остаётся вот это что делать с зависимостями Ведь мы до сих пор можем скачать не так или не оттуда а ну Давайте попробуем ни хранить зависимости в локальных стри то есть мы делаем себе отдельный Nexus куда мы храним все наши пакеты мы уже обезопасите случалось но как защитить продакшн ведь даже допустим используя легальное хранилище мы всё равно можем нарваться какой-то вредоносный код в них Давайте просто сделаем для де сборок прокси репа куда разработчик может сравнительно быстро добавить новую версию пакета если она ему требуется для использования в своих приложениях а для продакшн сборок у нас уже нормальная Хоста трепа где все пакеты прежде чем туда попасть сканируются на безопасность Ну и кажется что всё Хм Давай посмотрим но в любом случае помните что Да то что летит у вас на дев и то что летит на прод это нел до подшива и пересекаться едем дальше про что мы с вами забыли Про что что мы не проверили у вас гражданин в нижнем правом углу мы можем наблюдать иконочный репозитории хранения для Дева и для прода собственно почему Например достаточно часто бывает что да происходит как что используется один единственный репозиторий в нём сразу всё хранится с Дева и прода и из него Естественно выкатывается что мы получаем надев билде мы поставляем нужный так который соответствует проду и пуши в рест и этот произвольный код у нас лёгким движением руки выкатывается на продакшн при этом да Для нас всё это незаметно потому что версии это совпадают теги все верные А и нам кажется что даже всё просканировал репозитории вам ещё нужно хранить раздельно ключи если вы пользуетесь одним ключом для доступа ко всему Ну вы сами понимаете что у вас произойдёт Да соответственно такой же вывод добавляем в наш чек-лист One ming достаточно интересный кейс Как вы думаете мечтают ли сканеры быть просканировать какие здесь проблемы есть Мне кажется что со сканерами то уж точно проблем нет поскольку Ну это ж точно доверенный объект 100 раз проверен все пользуются можно разместить на аноды и спокойно проверяться то есть в сканерах безопасности проблем не существует а давайте посмотрим Дальше взламываем например выходим на хостой через сник сник может напрямую выполнять такие команды Как из гред на целевой системе А собственно что мы делаем мы делаем специальный файл где пишем команду которая Ну в данном случае просто создаёт файл Мы бы могли написать эту команду которая как раз ремонтирует докер А и Давайте посмотрим что произойдёт на целевой системе А на целевой системе у нас появляется этот файл это не Единственная проблема со ском это проблема Не только со с Ником есть ещё также уязвимые сканеры можно собрать такой скажем так специально собранный контейнер и послать его на анализ и Опа мы на раннере Ну хорошо давайте теперь отдели сканеры на отдельные машины теперь сканеры живут на отдельных нотах там всё сканируется А с этих нот мы закрываем доступы до всего до чего человек может дотянуться если туда попадёт только ш встре всё так сонно но у нас должны происходить только сборки всякие сканеры особенно ндо они должны быть отделены на отдельных независимых нох надо не забывать про поскольку если у вас в компании существует плоская сеть то всё что мы рассказали ранее уже не становится неактуальным поскольку вы легко сможете Достучаться из одной среды до другой и поэтому аффект на деве может привести к падению прода Да всё так так если у вас Бахт вы просто вс передни а про стоит себе спокойно и до него никак не Достучаться собственно Никогда не забывайте про сетевую изоляцию контуров друг от друга также стоит напомнить про то что рар у нас до сих пор это какая-то постоянная машинка на которой просто ждёт когда ей прилетит Задачка и начинает её исполнять Если у вас есть зрелость в компании в командах в процессах Вы можете попробовать сделать эфемерные раннеры разворачивать их в кубе либо поднимать их как докер контейнеры который поднимается выполняет там какие-либо команды А после исполнения пайплайн Нера на стою для него машину то мы е просто в конечном итоге снес это не окажет никакого эффекта на последующей сборке собственно не Старайтесь технологически расти и до такого как эфемерные раннеры движемся дальше Давайте поговорим с вами е про приёмку Open Source то есть мы поговори сканы но сканы - это не Панацея мы с вами знаем соответственно Мы с вами разговаривали ранее про Хот репозиторий помним что добавление туда зависимости только доверенными лицами туда не должны произвольные люди добавлять произвольные зависимости для всего остального У вас есть прокси репозитории и есть дев сегмент Пускай там тестят и проверяют как хотят а не забываем с вами использовать также и Оса сканеры которые позволяют нам выявить уязвимости либо какие-то проблемы с автом ещ до того как мы его с вами закачали и положили в репозиторий и также не забываем про Про проверку зависимости при добавлении происхождение зависимости количество загрузок На том же самом ПМЕ или где-то ещё наличие цве чекайте обязательно июс на гитхабе 2 года назад когда всё началось можно было зайти в исы И там сразу было что есть какой-то байт-код библиотека делает мрф или что-то такое Ну и например сами пользователи составляли таблички где можно было Какие пакеты были уязвимые А в каких зависимостей не было также не забывайте что зависимости можно тестировать в песочнице в частности отслеживать Какие си сколы у вас производятся и поэтому если ваш математический пакет внезапно который вы берёте для того чтобы считать матрицы вдруг внезапно начинает лезть в Интернет и что-то там скачивать то скорее всего вы скачали что-то не то Ну а также стоит проверять насколько зависимости действительно соответствуют тому что Вы установили А уж для особенно людей которые любят посидеть с идой ночами существует дизассемблер и декомпилятор можно залезть разобрать пакет если он легко не разбирается и посмотреть как он устроен собственно а не забывайте тестировать зависимость и проверять что вы к себе собираетесь добавить Ну и конечно подписи Да а не забываем про подпись это и подпись коммитов это и подпись зависимости не забываем про проверку этой подписи при сборке если нам из хост репозитория прилетел неподписанный артефакт мы ни в коем случае не должны его использовать в сборке не забываем про подпись самого приложения и проверку артефактов при сборки образа также подписываем образ что нам это даст Ну например если вы используете какую Вы можете использовать уже готовый инструменты для подписи например kigan либо notary kigan И кстати kigan и notary сейчас интегрированы в кивер и фактически вам достаточно будет сделать а несколько манифестов для его подключения и всё вы сможете легко ть ваш образ тем что вы подписали Также можно проверять установленный контент например подключая сюда ваши бизнес-процессы в компании Например у вас есть релиз который согласовывается в какой-либо внешней системе как только согласующие проставить все галочки Что окей мы действительно согласны что этот релиз стоит ставить на прод и он подготовлен к его установке мы фиксируем Все указанные в нём дистрибутивы образы чарты версии Да вообще всё что мы хотим выкатить и дальше при раскатке на прот ваш пайплайн принимает ещ и релиз который составил и если какой-нибудь инженер получив письмо счастья или письмо о помощи захочет раскатить что-то не то то у него это не получится и пайплайн свалится если например не ту версию захочет раскатить а к нему придут вежливые люди с вопросом Зачем он это делает собственно не забываем с вами про подпись и про валидацию это важно собственно сегодня в Будьте аккурат и не нарушайте давайте перейм к выводам е раз кратко пройм собственно никаких ров Это означает что в вашей системе можно будет делать всё что угодно помним прон каника либо отдельная нода с нми там я не знаю сборками либо с нми там этими сканерами причём помните что отст разделяйте в принципе Билд и деплой среды для того чтобы одно не аффектион репозитории для пакетов это не стоит подмешивать смотрите А ваши разработчики тестируют множество разных пакетов до продакшена и из них доходит какая-то небольшая минимальная часть например попробовали пять разных зависимостей подошла только одна Это означает что вашим деф репозитории Простите происходит куча всего непонятного которые вообще никак не должно пересекаться с продом и Если уж мы остановились на какой-то конкретной библиотеке мы её подписываем и добавляем в стт репозиторий исключите влияние на Билд и сканеры просто разделяя эти среды по разным нотам чтобы в случае атаки на ваши сканеры А это как мы как мы видим у сканер - это такой же программный продукт в нём тоже существуют уязвимости и по крайней мере вы сможете обезопаситься от того что человек захватив сканер не придёт к вам на сборки и не начнёт влиять на всё остальное на все остальные процессы Угу ты пропустил раздельные реп в стре и не забывайте про их ключи что это раздельные ключи Вы можете использовать проран Вы можете для сегмента использу unp соответственно куда пушат разработчики выкатывают к себе это на сегмент соответственно у вас есть там либо там Если вы используете там какая-то релизная Протек ветка там уже лежит свой токен для прорези с которого это будет Даше Выка уже на левую сист и продакшена тем не менее Хотя это кажется очень очевидный совет далеко не везде так происходит И к сожалению там где идёт активная разработка используются нестабильные пакеты что-то может доба нуть Поэтому лучше это всё разделить Да помните про эфемерные раннеры это очень многого вас может спасти соответственно Вы можете там и Дин сборки проводить любые сканы в принципе если Вы уверены как вы это реализовали вы можете даже это по сути вернуть одну ноду потому что это всё снес и потом уже последует другая сборка прежде чем ваши зависимости попадут на продакшн как и ваш код они тоже должны тестироваться быть тестирован проверенными и только когда вы действительно уверены версии пакета только тогда она должна попадать на прокш да ну и соответственно Не забывайте про подписи и про валидацию подписи множество защиты от сап чейна так как раз можно предотвратить имея подпись делай это корректно и имея коррект механи валидации слайды наши можно скачать по ссылке описании посмотреть ещё раз вспомнить что мы рассказывали а по QR коду Вы можете оценить нашу работу работу вежливых полицейских которые не только штрафуют но и рассказывают как надо а сейчас время для ваших вопросов да ну и собственно не забывайте Используйте этот чек-лист Если у вас чего-то на работе нет обязательно пробуйте класс Спасибо большое ребята отдельно Спасибо за представление А ну что давайте успеем Задать несколько вопросов так а я кратко объявлю у нас сегодня Два подарка один от нас и один от наших партнёров Яндекс поэтому призы будут за два лучших вопроса прекрасно Да привет Спасибо огромное было очень интересно Вопрос такой вопрос от разработчика насколько сильно потенциально максимальный вариант может замедлить разработку idp Вот и сразу в догонку второй вопрос я так понимаю что не все пункты обязательные не для каждой компании не для каждой команды А могли бы вы выделить какие-то градации где там одной команде нужно делать одно а другой команде нужно делать всё И никак иначе давай я на первый вопрос отвечу Так как он у нас звучал по поводу А Это насколько это нормативно Это насколько хорошо у вас выстроены процессы и насколько Они отлажена то есть по в идеальном случае это должно оказывать минимальный эффект Но мы с вами знаем все примеры там что из недавнего Ну относительно недавнего это тварден тварден словил как раз плохую зависимость это всё у них выкатилось на прод и пользователи увидели естественно такого допускать не стоит Но конечно стоит опять же напомнить что если у вас там например для того чтобы добавить зави Добавить новый пакет требуется собрать 20 подписей с одной стороны безопасно с другой стороны можно ждать месяц пока вы вам новый пакет доба кажется что процесс построен некорректно теперь по поводу подожди пож подожди секунду ну у вас же есть какие-то реальные примеры где вот этот план был внедряться времени на внедрение или по-разному это зависит это зависит от команде команды от компании компании переходит сами сканеры или какие-то вот эти дополнительные проверки - Это недолго Я же ещё раз говорю очень сильно зависит от того как построены процессы действительно если вам нужно 20 подписей это будет долго если вам нужно например каким-то внешним инструментом просканировать или запустить в песочнице это другое в любом случае тоже не стоит забывать про тайф библиотек и помощь коммьюнити всё-таки это ну обычно заходишь если действительно стоящая библиотека Это что Это миллионы загрузок правильно соответственно Ну кто-то бы тоже словил То есть это тоже имеет значение Я понимаю что бывают такие разработчики когда всё вышла новая версия Свифта ночью выходит нам прямо сейчас нужно срочно но такое всё-таки нужно не допускать теперь наверно чуть-чуть по про уров по второму моменту Нет такого понятия как уров нельзя сказать что вот этой команде ну вот это а вот это вот это безопасность в принципе она не бывает идеально это процесс совершенствования вам нужно добиться того чтобы стоимость взлома была выше чем стоимость вашей информации которую хотят похитить это очень уникально для каждой команды поэтому нельзя сказать что вот вам нужно взять Вот это вот это вот это вы можете попробовать по другому пути пойти Вы можете сорвать какие-то низко висящие фрукты что вы сможете сейчас уже завтра быстро сделать добавить какой-то сканер который будет хотя бы зависимости на уязвимости вам с этим тоже долго придётся разгребать если у вас этого нету сейчас он выплюни вот у вас там все пакеты уязвимы Что делать то есть понятное Понятное дело что если у вас там плоская сеть и у вас так уже всё построено вы не придёте и там за ночь всё не переделаешь Поэтому в любом случае то есть надо смотреть опять же как это это примерный план того что можно сделать надо посмотреть по пунктам то есть допустим от шел райнеро Можете вы быстро отказаться Да потому что вы всё уже давно у вас собирается там Анси блом или вы там выкатывать или у вас вообще всё завязано нашел То есть это всё зависит опять же сугубо от конкретных примеров Давайте следующий вопрос так Вон Вон молодой человек тся Здравствуйте спасибо за доклад А подскажите пожалуйста Я немного не понял про раздельные репозитории пакетов для и для про В какой момент так на схемку собственно что у нас получается А что такое прокси репозиторий знаете то есть у вас идут идёт во внутренний там например Nexus и он скачивает из не любую зависимость и просто кладёт её в кэш что это означает что в продакшн у вас оттуда также полетит любая зависимость здесь же мы хотим что показать У нас есть хост от репа то есть в которую мы сами вручную добавляем отобранные зависимости например подписанные и вот один репозиторий прокси мы используем для Дева а второй для и для продакшена Ну опять же да в прокси можно быстро всё добавить это я всё понял нет а вот у меня разработчики собрались на деве они собрали артефакт мы его тестировали на деви отгонять на всех сканерах Мы хотим его дальше по тестам погнать на там какой-нибудь тестовый контур на прип и уже установить на продакшн А у меня нету этого образа я должен перебирать Да создаётся заявка артефакт подписывается и добавляется в хост репозиторий Но это прямо вот как выглядит идеально понятно что я должен пересобрать у меня будет новые хэши и такое это ну как бы са сами данные они не изменятся да вы просто Смените источник Откуда вы их качаете То есть вы просто потом из прокси переложите в хост реп и например подпишете Точно точно Ну это не точно этоже будет пересборка артефакта могло произойти всё что угодно вот в эти моменты между двом и следующим репозиторием Нет ты фактически скачаешь Ну то есть тебе в любом случае потребуется пересборка для того чтобы просто пересобрать из нового репа но а при этом сам пакет будет точно такой же То есть он кладётся та же версия Мы же мы же не другую библиотеку берём мы просто берём библиотеку и перекладываем в другую хранил а тут уже потяги я понял Спасибо Ладно видимо Я немного не понимаю По мне так это должен быть просто единый артефакт который двигается Ну он у тебя будет еди зависит от того заи беже или внутрь зависимости да то есть если у тебя этот пакет уже используется то есть там я не знаю ты юзаешь какую-нибудь конкретную версию этого пакета она уже у тебя есть в хост де ты её можешь забрать но тебе например очень нужна какая-то новая версия которая вот там вышла но её нету ещё в корпоративных рест и тебе её надо добавить Ты не ждёшь там месяцами пока она добавится в хост пока её просканируй безопасники Ты можешь её выкатить быстрее просто сдела скачав её через прокси но потом тебе её надо легализовать и поэтому тебе в любом случае потребуется пересборка то есть какой-то тестовый сервисный пакет всё равно нужно будет преобразовать в релиз Всё я понял Спасибо Давайте дальше вопросы назначай Какой тебе какой Да здравствуйте Да я не знаю по очереди как да да Меня зовут Владислав Я из секос Ира ВК и у меня к вам два вопроса вы отлично рассказали по поводу скана зависимостей Спасибо Это был третий вопрос я думал когда же вы это упомяните Но если вы вернётесь на съемку Пожалуйста можете вернуться ещё раз ка на самую последнюю где уже все все этапы были у вас прописаны и всё было наверное вот да можно в принципе да можно здесь вот смотрите единственный нюанс который Меня смущает те за м вопрос почему это не рассмотрели в частности мы знаем то что в докере открытом просто в стре где-то около 80-90 про лежит имиджей в которых есть либо вредоносное пакеты и их никто не будет править и вы на этой схеме получается затягивайте их к себе и дальше используете но опять же я так понимаю чере некоторые проверки дамы просто сверну в реальном разделе у нас получилось бы максимально перегруженная схема было бы непонятно Дай секундочку кликер Если мы прямо откате на несколько слайдов Назад во У нас есть пожалуйста скан тоже через про вы подписываете и дальше это работает Как для библиотек так и для образов то есть здесь уже просто свёрнута у нас построен процесс мы на него не обращаем внимания здесь мы уже говорили про н Хорошо Тогда вопрос дальше развиваем диалог если рнг про который вы говорите в самом начале е упоминали он происходит в какой момент в момент когда вы готовите Golden Image или Base Image исходя из проверенных подписанных образов которые вы стянули из не либо же на моменте сборки то есть в какой момент у вас есть то есть абсолютно по-разному Просто мне кажется это немножко некорректный вопрос Это я не знаю А можно до точки из А В Б добраться пешком или на велосипеде Да можно и так и так просто тогда я думаю что это должен быть один из пунктов как подписаны в любом случае качественны там Бей иджи это хорошо но иметь пул таких доверенных образов которые опять же нужно переть такн У нас есть доверенные образы которые мы уже проверили хранили в хостеле Вот вот тогда вопрос нинг На каком моменте происходит на моменте сборки или на моменте создания гон образа а базовые образы мы можем при добавлении в хост мы как раз таки и полностью и харде тут на самом деле очень много нюансов мы лучше после доклада поговорим соответственно Вы можете например использовать некоторые такие образы от Microsoft Если вы ну или там Alpine или ещё что-то и и плоский Если вы не доверяете Илу Microsoft там Alpine Ну это вы можете закрывать разработку поэтому где-то на самом деле там можно поступиться это очень такая шаткая дорожка на самом деле процесс можно построить по-разному с под с Годен образами тоже есть проблемы они достаточно быстро устаревают это должна быть огромная система пересборка гон образов Поэтому в последнее время я склоняюсь к тому что есть у нас какой-то базовый образ А мы уже проверяем всё на момент сборки Угу я услышал А ну а соответственно о зависимости что мы втаскивают ещё момент перескажи готовых образов которые бы содержали в себе Код да однозначно мы здесь не затронули что можно скани а то что у нас висит в ран тайме у нас не затронут момент и защиты ранта Ну как бы частично эти практики можно применить но это уже наверное выходит за ра данного доклада здесь же вс-таки хотелось такой интенсивный краш курс для тех кто не совсем погружён в проблему и не понимает хорошо У него сейчас сделано или плохо Мы хотели подсветить именно места где может что-то пойти не так и обратить на это внимание понятно что на продакшене это наверное даже не то что отдельный доклад это отдельно несколько докладов Да спасибо большое спа собственно про продакшн про продакшн У нас скоро вот в седе выйдет интересный подкаст Там тоже будет про контейнер безопасно как раз про оркестра тоже немного будет уже как там защищаться класс Давайте отсюда дадим Добрый день Ирина Меня зовут подскажите пожалуйста вы упомянули использование се инструментов и сканеров какие бы варианты могли порекомендовать которые проверены и отвечают тому что там должны использовать всё-таки наше решение или хотя бы он Source ны которые мы вот по этому же процессу и прогнали смотрите как как я всегда говорю и уже говорил в докладе сканеры не панацеи они всегда на шаг позади кто-то должен словить эту библиотеку или что-то в ней расковырять понять что она плохая должен добавить уязвимость список уязвимости и только потом вы со своим сканером узнаете об этом соответственно плохую зависимость тоже кто-то должен сначала словить если мы говорим про Исе пон сорный пожалуйста depc Track gimnasium замечательный инструмент а сканеры есть примеры тоже Ну это сканеры или Мы про что говорим Я имею в виду российские какие-то российские сканеры российский сканеры Конечно есть есть вы проверяли Ну вы проверяли их Ну то есть а вы думаете там какие-то прямо уникальные фиды другие нет но у нас в 2025 года стоит задача заменить все решения которые отвечают за безопасность на отечественные вот поэтому было бы интересно узнать о вашем опыте если он у вас есть именно отечественных стране при перек лди на это зависимость отслеживать ждите на всех прилавках новый продук спасибо Так давайте уем во а можно полтора можно полтора Да супер большой вопрос Ребят давайте представим что мы всё сделали это достаточно легкодоступные вещи Надеюсь для всех но у нас появился где-то там в двадцать четвёртом году неограниченный бюджет по времени и количеству участников этого процесса Давайте вместе помечтаем что бы вы ещё хотели хотя бы один-два пункта сюда Дописать когда вот чемодан денег появился с неба Да много всего вы куда-то выкатывает в ка кадит окружение в оркестрация бес конфиг нуть там не проблема соответственно ваши там те же самые настройки должны соответствовать тому чтобы даже если ваш продукт как-то пролом и попадут В контейнер чтобы оттуда уже никуда нельзя было выбраться это первое там я не знаю развивать как раз Ну вот подсвечивают есть отличная тема с песками В чём она заключается сегодня уязвимости известны одни вы собрали контейнер у вас есть список уязвимостей это не означает что завтра вы этой библиотеке не будет обнаружено что-то новое а в ней могут быть роде в баше была уязвимость 10 лет её никто не находил соответственно помните про это вы должны это уметь находить А что ещё а активная тоже активные сканеры актив Да Сканер в ран тайме пожалуйста а этот анализ поведения в кластере миллион тем на самом деле это можно развивать очень далеко и последняя пол вопроса А что вы предпочитаете делать с разработчиками которые всякую гадость ваши Def Nexus тянут их не находит интересная фраза была мы как раз когда формировали новую конференцию по безопасности прозвучала такая фраза нагибатель процедуры неизбежны лучше к ним готовиться Заранее спасибо Так давайте выберем лучший вопрос А можно ещё вопроси даже даже два даже два А вон у нас ещё вопрос есть Давайте я понимаю но у нас просто немножко мы по вре Мирова у вас будет ещё куча всё апати принадлежит вам никто не будет забегать обратно в зал вы сможете пообщаться Давай тогда Выбирай л Так давайте наверное вот один подарок сюда Ты кого ещё думаешь к тебе может понравится выбирай ты я буду сес Ну давай вот вопрос вот сюда последний Да так собственно класс Давайте м Аплодисменты ещ раз за доклад M"
}