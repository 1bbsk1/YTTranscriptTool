{
  "video_id": "HCmZLYsHfFA",
  "channel": "HighLoadChannel",
  "title": "Архитектура бесконечной персональной ленты Яндекс Маркета / Владимир Бондаревский (Яндекс Маркет)",
  "views": 554,
  "duration": 2566,
  "published": "2024-10-29T02:57:29-07:00",
  "text": "я приглашаю на эту сцену Владимира бондаревского бондаревского Володя тебе Минута славы Привет Меня зовут Владимир бондаревский Я из Яндекс Маркета занимаюсь рекомендациями расскажу про нашу бесконечную ленту и то как мы к ней пришли немного себе лет уже в Яндексе пришёл на позицию Python разработчика за это время успел поработать в разных ролях в рекомендациях обучал модели писал код проектировал сервисы в настоящий момент руковожу командой которая занимается развитием инфраструктуры рекомендаций о чём я сегодня буду рассказывать кратко расскажу что из себя представляют рекомендации Маркета дальше расскажу про наш путь от статических рекомендательных русе к бесконечной ленте Потом расскажу немножко как у нас устроено ранжирование Что происходит в рекомен какие-то его особенности также расскажу про DJ recer это наш НТА который позволил нам сократить Time to maret и в котором можно описывать рекомендательные программы на питоне не зная плюсов вообще тельная платформа которая написана в Яндексе используется разными сервисами для построения собственно рекомендательных сервисов Почему диджей но есть несколько версий банально Это дидже хорошо подбирает музыку Ну мне больше нравится другая версия это отсылка к сериалу чёрное зеркало к серии Повесь же про рекомендатель систему для знаком собственно в рекомендациях Маркета мы делаем рекомендации это когда для пользователя подбираем какие-то релевантные товары которые его могут заинтересовать также делаем рекомендации это когда к какому-то товару подбираем список релевантных товаров например аналоги аксессуары какая-то сопутка Прим эже ции Маркета представляют Сея следующее это 2000 на ленту Лента отвечает за 450 миллисекунд де денти помимо ленты у нас есть и другие рекомендательные форматы и сама Лента при этом тоже использует рекомен как источник рекомендаций вот собственно такие рекомен приходится порядка давать из 5,5 мл наименований товаров собственно почему такое число Это столько информации о моделях помещается на одной машинке с реком Ну на самом деле если число увеличивать для User как-то кардинально качество не увеличивается а для it to it ситуация обратная пользователь в принципе может зайти на карточку любого товара соответственно нам надо уметь подобрать ему список релевантных товаров здесь соответственно мы уже храним 40 млн товаров и у нас используется шардирование для этого случая небольшая история развития рекомендаций в Маркете в семнадцатом году собственно когда я пришёл в команду использовалось преимущественно оффлайн ранжирование в оффлайне Мы считали какой-то скор в онлайне по нему ранжировать Ну и использовалось какое-то простое ранжирование по каким-то простым свойствам пользователя мы развивали онлайн персонализацию для рекомендаций также внедряли нашу рекомендатель платформу Ну и сделали контентные ленты собственно Лента ранжировать и другой контент Ну собственно Лента прожила недолго она умерла вместе со старым прило персонально блоки на странице также сделали вторую попытку написать ленту здесь уже добавились товары но и собственно Лента была как один из источников в Ленте дзена Ну в итоге она даже публичной не стала д втором году Мы научились шардирование сделали персонализацию item to item Ну и уже учитывая опыт предыдущих двух лент и уже сосредоточившись на товарах преимущественно мы собственно сделали ленту в приложении в этот раз у нас уже получилось гораздо лучше в двадцать третьем году все наши рекомендации ранжируются в онлайне теперь Ну и собственно мы занимаемся тем что распространяем формат ленты по разным поверхностям ну собственно давайте рассмотрим как мы двигались от статических рекомендательных каруселей к собственно нам с каруселей так они выглядели Ну вернее так они выглядели ещ на сайте beru.ru собственно что они из себя представляют товары внутри ранжируются персонально под пользователя сама Карусель Ну в мы указываем где на странице разместить нашу рекомендатель Карусель Ну и в основном использу Коль которые похожи на то что он уже смотрел Собственно как выглядела архитектура такой рекомендательной карусели Мы прописываем в CS где надо разместить рекомендатель Карусель на странице шаблон такой страница сохраняется в qv storage далее пользователь открывает приложение приложение делает Запрос к Front vpi Front API делает запрос tempat tempat - это наш шаблонизатор который достаёт шаблон страниц skv стод делает какие-то подстановки возвращает фронту фронт возвращает приложение приложение видит что на странице нужно отрисовать рекомендатель Карусель начинает делать дополнительные запросы чтобы получить соответствующее содержимое для заполнения этой карусели опять же делается Запрос к фронту далее фронт делает множество запросов в разные сервисы чтобы собрать контекст запроса Ну например это текущее содержимое корзины пользователя далее с этим контекстом идм в репорт РТ это энд поиска в который со временем включилась и другая бизнес логика в том числе и рекомендации Ну и самая главное его функция в том что он знает информацию про доступность фров Вот и уже делает запрос вторый получает профиль пользователя делает какую-то персональную подборку товаров для пользователя возвращает их на репорт репорт их обогащает информации необходимой для отрисовки возвращает фронту Ну и соотвественно фронт возвращает приложению приложение отрисовывать эту рекомендатель Карусель и так происходит собственно для каждой карусели на странице собственно что в итоге мы получили мы прокачали сценарий научились заводить рекомендательные карусели без дополнительной разработки следующим этапом было ранжирование блоков собственно что из себя блоки представляют это какие-то товарные карусели либо карусели с другим содержимым например магазины собственно зачем нам потребовалось ранжирование блоков мы захотели прокачивать сценарий то есть показывать пользователю товары которые он ещё не видел но они его заинтересуют соответственно мы взяли модель обучили её на этот сценарий У нас появился новый блок который реализует Discovery сценарий дальше стаёт вопрос как собственно У нас есть два блока ретаргетинг сценарий и Discovery сценарий как их разместить на странице Например если мы ставим ргти сценарий первым пользователь который находится в моменте покупки того что он примерно знает скорее всего этот блок ему поможет быстрее сделать покупку Если на Маркет заходит пользователь который ищет что-то новое Он увидит блок который показывает то что ему уже то что он уже покупал расстроится и уйдёт соответственно вот нам надо уметь отрабатывать ситуацию для разных пользователей размещать блоки на разных позициях дополнительно мы добавили новую сущность тематики это некая ру товаров которая объединена какой-то Темой ну и соответственно были отдельные блоки тематические сделали блендер который собственно занимается ранжирования блоков персонально под пользователя Ну и cms у нас поменялось следующее если раньше мы указывали конкретный блок то теперь мы указываем плейсхолдер которые нужно будет подменить после того как блендер вернёт персональную подборку блоков собственно что поменялось в архитектуре такая архитектура у нас была для рекомендательной карусели и собственно такая архитектура настала CS мы соответственно заводим на странице указываем где разместить блоки указываем плейсхолдер далее темплар достаёт этот шаблон страницы и дополнительно делает запрос в который собственно возвращает список персонально подобранных блоков дальше плато делает подстановку вместо плейсхолдер подставляет информацию о соответствующем Блоке Ну и дальше вся схема работы соответствует тому что было для статической рекомендательной Крус собственно что в итоге мы от этого получили научились аранжировать блоки прокачали Discovery сценарий и значимо вырастили бизнес метрики Ну и собственно следующий этап это Лента Какие собственно предпосылки были появления ленты во-первых продуктовые мы хотели дальше прокачивать сценарий но ранжирование блоков нам это не позволяло дальше делать мы достигли какого-то потолка плюс неэффективно использовалась страница например на странице могли размещаться катом ба место и нам надо было придумать какой-то новый формат который позволит нам двигаться дальше И при этом мы не потеряем деньги от рекламы Ну и собственно вторая часть это технические предпосылки Маркет начал ускорять приложение соответственно нам надо было ускорить рекомендации Какие собственно требования предъявлялись клиенте Ну очевидно товары в ней должны быть релевантная она должна работать быстро должна реагировать на действие пользователя в рамках сессии то есть пользователь ставит какие-то лайки крутит её дальше и соответственно Лента уже подстраивается под его действия например это накладывает такие ограничения что мы не можем взять там например 1000 товаров зашивать их потом по мере прокрутки ленты отдавать из кэша собственно Лента должна быть бесконечная Она не должна заканчиваться У пользователя Ну и более эффективно использовать поверхность что касается ускорения мы собственно посмотрели что мы можем ускорить На прошлом этапе мы добавили блендер на критическом пути соответственно все наши рекомендации замедлились на время работы этого блендера надо было его убирать мы неэффективно использовали nos по сути однопоточный было много разных лишних трансформаций ответов Ну и какие-то неадекватные тайм-ауты стояли помимо ноды и в других собственно сервисах было также много разных перекладывании джено и всяких пробу Ну и мы возвращали много лишней Информации а гораздо больше чем нужно для отрисовки рекомендательного сниппета иногда ответы доходили до нескольких мегабат Ну и были там какие-то ксдц запросы которые тоже надо было убрать собственно что в итоге у нас получилось Лента в приложении и Лента в вебе в десктопе как поменялась архитектура Ну тут стоит в первую очередь отметить что ребят которые занимаются разработкой приложения со своей стороны тоже делали оптимизацию и если раньше приложение ходило с клиента на сервер много раз чтобы собрать нужную информацию для отрисовки страницы то теперь приложение делает один Запрос к Кэн приложения энд приложение уже занимается тем что собирает нужную информацию готовит по сути текущую страницу которая приложение просто отрисовывать без какой-то бизнес логики что собственно поменялось в части рекомендаций Как видим в плане получения шаблона страницы CS она вернулась к тому что было для статической рекомендательной карусели то есть в CS мы теперь указываем где на странице Мы хотим разместить ленту далее шаблонизатор получает этот шаблон отправляет нду приложение Кэн приложение видит что вот здесь на странице должна быть Лента и соответственно ему надо сделать дополнительный запрос ленты он делает запрос эн ленты Лента называется тоже сделан на платформе D далее Мик делает кучу запросов уже честно параллельные запросы делает в разные сервисы чтобы собрать контекст запроса также мы перенесли в параллель с контекстом запроса и получение профиль пользователя Что позволило нам также сократить времяработы рекомендаций после того как ми использует дис для пагинации сохраняет информацию по рекомендованным сущностям ну и соответственно Дальше они там используются для фильтрации после того как ми собрал контекст запроса и получил профиль пользователя он начинает делать запросы к источникам Ну в частности К источнику товарному в видере соответственно пов информацию по контексту пользователя делают подборку персональных товаров после этого идт в репорт отфильтровывают недоступные товары до обогащаются информацие необходимой для отрисовки Ну и собственно дальше эта информация возвращается в ремикс Ну и помимо товарных каких-то рекомендаций у ремикса есть и другие источники например реклама шоты и собственно какие-то другие источники получилось Ну мы достаточно значимо вырастили бизнесмена получилось расширяемая Лента в которой можно собственно замешивать не только товары Ну и мы где-то в три раза увели ускорили время ответа рекомендаций собственно дальше я расскажу что у нас происходит на рекомен как примерно происходит подборка товаров вот на слайде представлен примерно то что лежит на машинке с реком соответственно у нас есть какая-то база данных с информацией о товарах к нам приходит запрос с профилем пользователя и контекстом далее Выполняется какая-то обработка например мы применяем неки считаем пользователя кандидаты у нас используются разные например НКИ разные то по продажам например аналоги к истории пользователя R и так далее порядка 4 разных генераторов кандидатов вот если обычно как делают нагнет какое-то количество несколько тысяч кандидатов используется какая-то облегчённая моделька для ранжирования Ну и после неё оставляется где-то несколько сотен А в нашем случае подход немножко другой мы ранжиру не товары А собственно генераторы кандидатов под пользователя Собственно как это выглядит Ну называется это Mix от mixing candidate Generator соответственно мы считаем фичи какие-то от пользователя от контекста далее применяем catboost модель которая считает полезность генератора собственно полезность это некая вероятность того что товар из этого генератора кандидатов попадёт в конечную выдачу соответственно мы посчитали полезность генераторов далее выбрали самый полезный из него выбрали где-то 5-10 товаров Ну и собственно цикл повторяется дальше до тех пор пока мы не наберём 500 товаров набрали 500 товаров Ну и дальше схема примерно похожая схема примерно стандартная считаем фичи применяем для ранжирования далее идёт стадия разнообразия Ну как правило это либо по категории по вендору либо по какому-то НГУ после этого да делаем топ товаро и информацию о этих товарах плюс о подсчитаны чах мы гиру далее Это Загирова информация используется для того чтобы обучить кодб который используется для ранжирования идб который используется для генерации кандидатов Ну собственно примерно так выглядит то что у нас происходит в коменде на самом деле всё гораздо сложнее Ну и собственно жей recer Собственно как я говорил уже DJ - это рекомендательная платформа которая разработана в Яндексе используется множеством разных сервисов D предоставляет набор разных инструментов для процессинга для обучения моделей ранта дальше я буду говорить исключительно про ню часть собственно Что умеет позволяет обрабатывать информацию в разных форматах например эмбеддинг какие-то вероятностные фильтры графы очереди счётчики и так далее написан на плюсах за счёт этого мы получаем хорошую скорость работы и эффективное использование цпу Несмотря на то что написано на плюсах рекомендательные программы для него мы описываем на питоне при этом для этого не обязательно знать плюсы плюс есть богатая библиотека компонент который собственно можно переиспользовать за счёт этого мы получаем низкий Time to маркет ну и собственно есть продвинутая достаточно система отладки Собственно как выглядит recer у нас есть НТА это плюсовые код в него соответственно в линковать на вход ему подаётся конфиг в виде Порто буго текстового файла в котором собственно описаны рекомендательные программы Ну рекомендательная программа состоит из двух частей имя - это по сути тот параметр по которому мы из запроса понимаем Какую именно рекомендатель программу надо применить Ну и набор шагов которые собственно надо применить к запросу чтобы получить какой-то ожидаемый результат собственно шаги являются по сути ссылкой на компоненты которые описаны же в этом же в этом же конфиге ну и соответственно для компонента описывается настройки которые надо будет установить при запуске собственно рекомен ко можно описывать руками Мы даже как-то в начале так делали но в какой-то момент стало слишком больно мы написали генератор Конго нане который нам обз сантай и конфигов на вход также подаются какие-то ресурсы например база данных с информацие о товарах какие-то модели Нейро сеет и прочее собственно если взять наш рекомен и очень-очень сильно упростить то он представляет из себя вот код на слайде у нас приходит запрос которой мы в начале создаём Вектор атомов который по сути будет конечным результатом Ну и далее запускаем цикл по нашим шагам каждый шаг - это по сути компонент у которого есть метод do execute соответственно в него мы передаём указатель на вектор айтемов и на стейт Ну и после того как цикл это работает мы соответственно возвращаем наш Вектор амов как Конечный результат если посмотреть то как устроены компоненты для редера они состоят из двух частей это проб в котором описывается конфиг компонента он тоже состоит по сути из двух частей это ж в котором мы описываем опции которые мы хотим крутить для компонента и некое расширение под которым мы регистрируем наш компонент Псой код тоже можно разбить на неко логических СТ который приходит наименование имя компонента и поб с заполненными заполненным конфигом ну и соответственно Мы из этого конфига перекладываем настройки в поля класса и соответственно конструктор вызывается при запуске рекомен и вторая важная часть - это метод собственно execute который вызывается в момент обработки запроса в него приходит указатель на Items и на State Ну и собственно в теле метода происходит какая-то полезная деятельность то ради чего мы собственно компоненты писали Ну в данном случае тонке он обрезает Вектор Items до указанного значения по сути реализует операцию topn Ну и третий важный элемент - это некий макрос который занимается тем что связывает плюсовые класс с расширением Порто буф сами компоненты мы описываем на питоне собственно У нас есть две сущности Program и комн pram содержит Степы в котором находятся по сути инстансы класса компо component - это по сути обёртка над рбфм конфигом Ну данная программа состоит всего из одного шага и генерирует 20 случайных товаров из шарда а в реальности у нас обычно программы состоят порядка 45.000 шагов собственно вот компонента можно отнал и переопределить его поведение в зависимости от окружения например для окружения МОК в котором мы запускаем тесты мы отключаем рандомизация Ну или можно Например если у нас есть тестинг и продакшн мы можем разные адреса сервисов указывать если наш компонент занимается тем что ходит в какие-то сервисы также у компонента можно задать полезные декораторы стат позволяет отправлять сигналы в систему мониторинга Ну вот те два приведены те два которые приведены на сайте на слайде это собственно время работы этого компонента и то сколько айтемов будет после его выполнения Также можно сразу навесить какой-то Ар Ну соответствующий Арт на слайде сработает если время превысит время работы превысит 10 миллисекунд для удобства компоненты можно объединять в композитные компоненты ну и соответственно если в композитный компонент передать ресурс пулом то компоненты внутри него будут выполняться параллельно Также можно использовать условные выполнение в зависимости от параметра применять тот или иной компонент нуже от имени программы можно менять поведение собственно что нам дало внедрение DJ рера мы получили низкий Time to maret Ну буквально там за пару часов у нас ча уже в проде может быть совсем релизный пайплайн можно описывать рекомендательные программы не зная плюсов соответственно у нас как правило этим занимаются какие-то дантисты а разработчики компоненты плюсовые Ну и собственно модульная система которая позволяет легко отлаживать и писать разного рода тесты Ну и собственно резюмируя моё выступление что мы в итоге получили мы получили расширяет ленту которая легко друзья мои Пожалуйста сделайте доброе дело Возьмите свои телефончики отсканируйте QR код и Оставьте пожалуйста оценку и отзыв для спикера это важно и спикеру и программному комитету Спасибо большое а теперь я предлагаю задать ваши вопросы Давай Владимир Спасибо за доклад у меня такой вопрос используете ли вы какие-нибудь необычные метрики для качество рекомендацию выдачу там обычно оценивается топк элементов в ней а здесь в случае когда Лента бесконечная как это происходит то есть как вы отличаетесь как решаете проблему холодного старта там какой-то Рандом или товары которые лучше продаются в регионе или что-то более хитрое первый вопрос ответ такой у нас в Ленте замешивается несколько источников и собственно мы сейчас оцениваем каждый источник Независимо вот а какой-то какое-то продвинутое замешивание с мелем и прочим Мы хотим в ближайшее время делать соответственно под это мы будем придумывать какие-то метрики Ну вернее они уже придумываются Поэтому мне пока по этому вопросу особо нечего ответить так лоста а холодный старт Ну по сути у нас моделька какая-то обучается она это скажем этот email а не просто мы достаём какой-то топ Ну обычно она всё-таки что-то более такое популярное вытаскивает у нас много фичей которые по всяким статистика по продажам и прочее Ну соответственно моделька учится для них достаточно хорошо вытаскивать Ну как только пользователи начинают какие-то активность совершать на Маркете соответственно мы сразу под него построим так ещё руки Вот здесь у меня рука и вот там рука давай вот там потом вот сюда Да Добрый вечер или день Вопрос немножко в сторону холодного старта Здравствуйте наверняка на вебе большая часть запросов приходится на незарегистрированных пользователей Как ведёт себя в этой ситуации алгоритм Есть ли вообще какая-то архитектура на случай арев Угу Ну на самом деле проблемы особой нет потому что пользователь приложений гораздо больше соответственно мы можем обучаться нормально на приложении там как правило роботов гораздо меньше плюс у нас для Веба есть собственно антиспам который может отсеивать роботов Нет кажется есть уточнение всё-таки речь не про роботов то есть ну архитектура явно поменяется в случае если пользователь не зарегистрирован как минимум Нет его профиля у вас отдельные какие-то модели на случае арев не арев или вы в принципе не рекомендуете ангам не мы рекомендуем Ну пользователь пока не зарегистрировался всё равно есть какой-то айдини у него какая-то статистика собирается если он совсем новый Да мы ему какой-то выдадим то что обычно там для холодного старта выдаётся но опять же это не какая-то отдельная модель это то что моде на всех тех данных которые у нас были Можно я здесь вот прямо уточню немножко Вопрос вот допустим я открыл вкладку Инкогнито зашёл сначала увидел какой-то Рандом и например посмотрел и посмотрел телек вот сразу после этого у меня уже будет моя личная подборка из телеков Да конечно она же это Алиса подслушала Нет это конечно же не так А через сколько сколько действий надо совершить Ну мы Протек это речь про индек тек или Ну неважно Давай скажем индексом начала накопиться какая-то статистика сколько мне действий надо сделать чтобы вот у меня уже была персонализированная Лента она после одного действия после де после 100 ну оно там в течение нескольких секунд уже начинает подстраиваться Ну то есть по факту вот так лут вопро Яндекса Мне было интересно Чтобы мои данные из того же не знаю из Алис из музыки или ещ влияли на вытащ в Маркете Ну мы преимущественно используем действия пользователя на Маркете Ну из некоторых сервисов тоже берём но Пожалуй я на этот вопрос дальше отвечать продолжил а то что там есть какие-то информация о пользователя в других сервисах на самом деле для икома оно не всегда хорошо помогает То есть тут ещё надо учитывать что мы можем затащить эти данные потратить кучу железа а выхлопа получить почти ноль Ну соответственно надо учитывать нужно нам это или нет Поэтому мы предпочитаем использовать те данные которые реально работают ну действие пользователя на Маркете реально работают Да здравствуйте Я хотел узнать как часто вы переобуть модели и замеряли ли вы эффект от того что вот модель там неделю не обучается или там месяц и как сильно это эффект на рекомендации пользователей Ну когда-то вот там где мы делали рекомендации вот там в истории было мы как-то обучили модель и она там чуть ли не полгода работала Прим как-то я это я е обучал первую модель произвести долго Вот Потом мы пришли к тому что у нас регулярно переобучение есть и Да оно по АБ даёт эффект А как часто кажется я сейчас точно не помню где-то раз в 3 дня ну то есть интервально с не больше недели вот там вопрос а у меня маленький такой пользовательский вопрос А вот к примеру если я нахожусь в Европе у меня gdpr и я хочу отказаться от сбора каких-либо моих личных данных на маркети уня есть такая опция и предусмотрены этот сценарий вашей архитектуре То есть когда пользователь сознательно не хочет чтобы о НМ хоть какие-то данные собирались А вот на первую часть я наверное не очень хорошо отвечу потому что не знаю Ну скорее всего да а но вот точно мы делали вот есть такая штука забвение Мы у себя поддерживали чтобы пользователь сказал что не хочет чтобы про него знали мы соответственно эти данные убираем так интересная тема Я говорю всё жарче и жарче вот там вот рука здравствуйте Да Денис и у меня вопрос про бесконечную Ленту И вы сказали что у вас несколько генераторов рекомендаций и вы ранжируйте генераторы Почему было принято решение ранжировать генераторы и делать их несколько а не одну модель использовать Ну есть как бы вот такой вариант как у нас есть вариант там с ранком какой-то наш вариант оказался лучше для нас плюс такой вариант нам позволяет легко добавлять новые генераторы кандидатов то есть мы берём по сути добавляем новый генератор кандидатов делаем у него какой-нибудь War который собственно принудительно добавляет какое-то количество кандидатов они соответственно попадают логи там условно говоря проходит недели две и если этот генератор плохой то его просто вытесняет э модель которая обучила уже на этих данных мы смотрим Что А по какому принципу создаются генераторы То есть это какие-то отдельные топики кандидатов а категории и так далее или как на фантазию м ну есть такие достаточно простые тот когда топы всякие топы по продажам например они хорошо будут работать для холодных пользователей и куча всяких генераторов например мы обучили какую-то новую росет взяли там с эмбеддинг настроили НСВ каких-то и собственно из них делаем генераторы а потом какая-то новая моделька там обучили ну вот таким вот образом Ну как будто бы условно если есть потребность бизнеса Да что-нибудь там какую-нибудь про матировать вы под это дело и можете сделать новый генератор в том числе Ну да если есть какая-то ещё бизнес логика соответственно это добавляется как отдельный генератор кандидатов Ну обычно он может портить обучение Вот вот здесь Спасибо за доклад У меня вопрос про обучение ранжирование генераторов Ну понятно что это их можно обучить на пользовательскую активность какие они генераторы выбирают где они скроткр моделью предсказывать поведение ранжиру модели То есть у нас не используются фичи например атомные совсем у нас используется только пользовательские и мы вот опять же про холодный старт есть ча допустим что он холодный и под него подбираются за сч этой модели как раз какие-то генераторы кандидатов которые луше подход Ну вот как как модель которую подбирает генератор и как она обучалась что у ней таргета условно было Ну Таргет - это вероятность того Ну как если кандидат из этого генератора попадает в конечную выдачу то мы ему условно говоря единичку ставим если он не попадает то нолик и дальше учим вероятность А ну а попадает же он за сч то моль сама себя что ли обучает Ну нет ранжиру сама по себе обучается а кандидаты обучаются это имитировать вот эту как раз ранжируются ли у вас проблема с зацикливанием моделей То есть если моде генерить на основании того что там пользователь лайков Вот они Эти товары начинают попадать в выборку вот и получается такой цикл что товары постоянно выходит те которые зала у нас там сме был который как разрешат выходит из этого клу ну у нас есть по сути неки генерации кандидатов по суто случайно иногда подшиваем что-то и есть ещ уже после ранжиру фор случайно Каким образом там покажу Я давно то не заглядывал Окей давайте ещё один вопросик А можно ещё уточняющий вот вы сказали что модель ориентируется на лайки А есть ли какое-то до обучение за счёт того например сколько пользователь там читал объявление Сколько фотографий пролистал там не знаю какие вкладки закладки открыл и так далее Что сохранил себе А по пользователю или по атему разрезе амы видим в разрезе амы Да ну у нас есть фичи соответствующие что пользователь Ну парные фичи пользователь кликал такой-то товар Давай представим ситуацию простую вот я открыл опять Я своим телевизором у меня в голове видимо одни телевизор Я открыл два телевизора один открыл такой посмотрел Не какая-то фигня и сразу закрыл а другой открыл такой Ух ты ниче и давай читать и 5 минут читал Вот они для системы будут отличаться или или нет отзывы почитал фотографии полистал три раза вверх при этом не залал никого Да мы используем такие неявные сигналы Но с ними есть сложности их достаточно тяжело считывать но в целом мы их используем да Ну по крайней мере время которое пользователь смотрит карточку Мы точно используем А с характеристиками там всё сложнее сложнее снять этот сигнал ну и плюс если там мы говорим про какой-нибудь веб или тоже приложение он может открыть это и уйти там есть свои сложности О'кей спасибо большое Володь У нас есть традиция добрая а нам нужно выбрать э лучшие вопросы которые прозвучали из зала Два лучших вопроса и соответственно им вручить подарочки кому будем дарить подарочки так моделька заработала сейчас ранжируются Давайте Вот про холодный старт отлично первый пошёл и второй Ну и наверное Вот про обучение кандидатов Ну не знаю я правильно ответил его полностью или нет Вот молодой человек Угу Как это не получил ответа Зато получил подарочек прекрасно хорошо друзья а Спасибо большое Аплодисменты ваши Володя Володь мы тебя благодарим от лица программного Комитета и онтика тебе тоже небольшие памятные призы подарочки за твой доклади Угу держи А приходи к нам ещё делай нашу конференцию лучше и свои программные продукты тоже лучше Ребята большое спасибо"
}