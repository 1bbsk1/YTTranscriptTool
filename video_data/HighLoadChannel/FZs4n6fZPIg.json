{
  "video_id": "FZs4n6fZPIg",
  "channel": "HighLoadChannel",
  "title": "Перехват трафика — мифы и реальность / Евгений Усков (Qrator Labs)",
  "views": 1334,
  "duration": 3066,
  "published": "2018-08-16T04:37:02-07:00",
  "text": "и так добры коллеги значит сегодня в докладе пойдет речь о том что такое перехваты трафика почему они для нас опасна и почему стоит бояться насколько легко их осуществить и собственно самое главное можно ли с ними как-то бороться и так перехват трафиком часто в этом контексте также всплывает словосочетания а так им и надо middle или человек посередине но на самом деле это чуть чуть более общий термин и означает он перехват значит злоумышленникам более-менее произвольных сообщений между адресатом сообщения и отправителем значит что касается вообще этих атак то появились они на самом деле существенно раньше чем возникла компьютерная эпоха то есть история в частности знает немало таких примеров еще чуть ли не в древности в частности вот есть такой пример когда в 1586 году был раскрыт заговор который имеет имел своей целью значит заговор против королевы англии елизавета 1 который мелкая целью убийства вот он был раскрыт собственно когда разведка она обнаружила и прочитала письма вот что в принципе на самом деле является как раз таки такая такой такого типа вот но мы с вами конечно сегодня будем говорить не такой истории а все-таки о атаках человек посередине именно применительно к трафику значит чем опасны вообще такие атаки вот ну понятное дело что с целью такой атаки может стать в принципе кто угодно то есть цели атаки они начинаются от действительно банальной слежки вот и заканчивается кражи каких-то важных данных таких как пароли или даже банковские реквизиты вот и соответственно опять же жертвой может стать кто угодно начиная от обычного пользователя у которого эти самые пароли или реквизиты могут украсть и заканчивая крупными компаниями у которых могут например таким образом прочитать и сохранить базу пользователей или там ну те же финансовые данные вот таким образом эти атаки они представляют собой серьезную опасность и цель этого доклада это показать вот доклад будет преимущественно состоять из двух частей в первой части мы поговорим о том почему эти атаки являются страшными а именно о том какие у них могут быть страшные последствия а во второй части поговорим о том почему они на самом деле еще страшнее вот именно о том почему их достаточно легко провернуть и крайне нелегко этому противодействовать значит но перед этим давайте вкратце обсудим некоторые современные тенденции связанные с этими атаками вообще когда среднестатистический человек он слышит слово сочетание перехват трафика особенно если он перед этим посмотрела какое-то количество шпионских фильмов то ему в голову скорее всего придет одна из двух картин первая из них это значит ночь улица коллектор злоумышленник в маске или без маски спускается в этот самый коллектор ставит жучок на провода вот жучок начинает моргать лампочками злоумышленников тут же появляется красивый экран со всеми данными вот но в наши дни это конечно все таки чуть далеко от того как это делается на самом деле вот нет ну то есть так конечно тоже бывает вот но на самом деле есть все-таки гораздо более эффективные и главное доступные для злоумышленников методы вторая картина это всем известный большой брат который следит за всем и каждым читает соответственно личную переписку каждого и все про всех знает вот и это на самом деле как мы знаем уже несколько ближе к истине то есть такие программы они конечно действительно существуют и существовали как мы недавно узнали и так продолжалось достаточно долгое время и все в принципе было хорошо но как хорошо спокойно вот до тех пор пока в один день все не изменилось значит а именно в 2013 году в июне эдвард сноуден обнародует секретные правительственные данные о том что на самом деле эти программы ведутся и что слежка она имеет государственный уровень вот причем не только за обычными пользователями даже за другими государствами и после этого начинается всем известно громкий скандал то есть это событие действительно имело большой резонанс очень много разных обсуждений с этим было связано вот но нам с вами интересно одно из его последствий а именно так называемый эффект сноудена которая состоит в том что существенно возрос интерес общества internal общества к вопросам информационной безопасности на самом деле это действие сноудена она действительно является достаточно важным вот и она в частности существенно подтолкнуло развитие как протоколов безопасности так и никого общего сознания общества в этом направлении вот и соответственно действительно стали происходить какие позитивные изменения например появляется центр сертификации в центре пт который позволяет получать бесплатные сср сертификаты для для вашего домена различные компании предпринимают определенные действия в эту сторону например google начинает ранжировать сайты исходя из того поддерживают ли они https или нет начинается реализация intent шифрование в мессенджерах вот и всякие такие события и соответственно может сложиться впечатление что все на самом деле рано или поздно станет достаточно хорошо например вот отчет это социально пс за последний месяц который говорит нам о том что практически два сайта из 3 они имеют вполне адекватный уровень шифрование вот но если мы сравним этот отчет точно таким же но за два года назад мы обнаружим что ситуация улучшилась практически в два раза то есть тогда меньше чем один сайт ис-3 был адекватно чащин и соответственно может сложиться иллюзия о том что все на самом деле хорошо чтобы понять так ли это на самом деле давайте посмотрим какие у нас есть инциденты связанные с атакой типа men in the middle ну скажем в октябре этого года и обнаружил что на самом деле этих инцидентов не так мало первым в списке идет такой достаточно известный инцидент связано и с тем что был обнаружена серьезная уязвимость протоколе бы по 2 который отвечает за безопасность в wi-fi сетях вот то есть это атака так называемая query лист installation а так атака по инсталляции ключа шифрования которая позволяет в определенных обстоятельствах собственно прослушивая прослушивать и дешифровать весь шифрованный вай фай трафик то есть вай-фай он перестает быть таким шифрованному еще одним эшелоном защиты и дальше идут 2 уязвимости значит первое это уязвимость в реализации dns клиента windows значит и и давайте проиллюстрируем вот такой вот схемой значит у самого звена состоит в том что специально созданной злоумышленникам dns ответ он может привести к удаленному исполнению кода на машине собственно на той машине которая делает запрос то есть моя машина делает запрос злоумышленнику перехватывает меняет и запускает удаленное исполнение кода следующая уязвимость она на самом деле достаточно занятная в своем плане вот она показывает о том насколько microsoft заботит саде только об обычных пользователях но я злоумышленника оно состоит в том что программа outlook 2016 она в месяцев ровным сообщением заодно отправляет и его не шифрованный в пробную версию ну то есть вот на схеме это можно примерно вот так показать то есть просто отправляем открытый текст и все вот но на самом деле глядя на эти уязвимости вас наверно может сложиться впечатление как бы что ну все в принципе то не так страшно ну уязвимости бывают ладно или закрывают вот два вай фай мы к этому в принципе не относились наверно как к чему-то такому вот чему можно всецело доверять вот то есть там windows пропатчен outlook удалим и соответственно все у нас станет хорошо вот у нас же есть https который нас собственно сможет защитить вот давайте посмотрим так ли это рассмотрим такие идеальные условия когда у нас значит сервер использует только https никакого http установлены все обновления безопасности все там то есть все уязвимости они пропатчены вот и казалось бы все должно быть хорошо вот но на самом деле только до тех пор пока в дело не вступает атакам in the middle вот и после этого все становится не совсем хорошо вот ну или даже совсем не хорошо значит что у нас такое https то есть у него есть ряд ключевых аспектов вот основные наверное из которых это аутентификация и собственно шифрования вот значит он токсикация она позволяет нам проверить что мы общаемся действительно с тем сервером который нам нужен а не с каким-то там посторонним который подсунул нам злоумышленник и делается это каким образом значит путем того что на сервере есть сертификат который собственно удостоверяет нам ключ шифрования вот этот сертификат он выдается центрами сертификации только после проверки того что домен действительно принадлежит тому лицу которая выступает за владение этим доменом то есть процедура выглядит примерно таким образом если нам нужен сертификат мы обращаемся в один из центров сертификации он проверяет наш домен вот и говорит да хорошо все я вижу что это ты держи твой сертификат а если с тем же запросом обратиться злоумышленник то центр сертификации видят что домен на его ну и как бы такой в ответ и он ему дать не должен конечно однако здесь есть один нюанс и состоит он в том как проверяется владение доменом вот а проверяется она достаточно простым образом обычно то есть центр сертификации он дает вам какого-то вида taken который вы соответственно устанавливаете в свой сайт дальше центр делает запрос к сайту и видит что таки он действительно совпадает с тем что он ожидает вот и после этого выдает сертификат то есть отделаться либо автоматически либо вручную влад но смысл примерно такой вот и поскольку запрос это зачастую обычный плейн http-запрос то в принципе сразу видно что если мы в эту схему добавим посередине злоумышленника то он может нам все испортить то есть центр сертификации делает запрос вы мы шли к перехватывает вот возвращает соответственно данные как будто бы это за про это ответ от того ресурсах которому он хочет получить сертификат вот ну и в итоге все заканчивается тем что центр сертификации говорит да конечно конечно пожалуйста вот ваш сертификат вот таким образом мы видим что на самом деле вся вот эта система сертификации она является уязвимой к правильно организованный атаки типом in the middle но и это еще не все значит давайте все подумаем вот насколько часто мы обращаем внимание на зеленую галочку там или щит который говорит о том что вот на сайте включён https поднимите руки кто из вас обращает на это внимание каждый раз нет ну на самом деле вполне ожидаемо конечно мы примерно такую реакцию я и ждал то есть естественно эта аудитория на подготовленное вот однако когда речь идет об обычных пользователях тут ситуация скорее всего уже будет немножко другой а теперь еще один вопрос сколько из вас обращаю обращают внимание точнее не обращают внимание а сами убеждаются в том что они используют именно https когда вводят какой-то адрес в адресную строку то что вот например выводите супер banki.ru явно прописываете протокол что это должен утешить ps уже немножко поменьше то есть большинство все-таки в этом вопросе доверяет браузеру потому что он же сделает redirect за нас все будет хорошо вот и теперь представьте как как сложно на самом деле во всей этой ситуации обычным пользователям которые не делают ни первого ни второго вот и в результате эти рассуждения наводит нас на примерно такой сценарий атаки то есть пользователь делает запрос введя супер банк точка ру вот который идет по обычному plain http на 80 порт значит атакующая это перехватывает и делает собственный запрос банк ему ну точнее ну да значит защищаем ресурс он отвечает ему что нет нет ну что вы конечно нам нужно безопасное соединение на что это куча говорит без проблем держите вам на 443 порт и ресурс отвечает нам вот пожалуйста ваши все данные нужны и вот есть этот канал конечно идет зашифрованный вот и после этого злоумышленник отвечает исходному пользователю по его 80 порту вот скорее всего пользователи даже и не заметит никакого подвоха не скорее всего ну по крайней мере с какой-то вероятностью вот и соответственно это позволяет провернуть такую атаку даже без использования сертификата вот то есть все что нам в принципе нужно для того чтобы успешно организовывать перехваты трафика и перехватывать собственно секретные данные просто открыть бесплатный вайфай для всех пригласить туда и готова вот значит но это были рассуждения в сторону того насколько картина является страшной однако конечно это все паз по факту только слова без каких-то простых способов организовать такую атаку то есть если для этого нам действительно нужно спускаться в коллекторы ставить звучок то в принципе может быть это все не так важно на самом деле для того чтобы нам понять легко или нет провести такую атаку давайте посмотрим какие протоколы у нас отвечают за то что трафик в итоге попадет туда куда он должен попасть вот это протокола dns и бюджеты то есть первый протокол у нас отвечает за то чтобы преобразовать доменное имя в адрес 2 соответственно по факту за то чтобы до этого api адреса трафик доставить вот и перед тем как мы перейдем к чуть более детальному обсуждению этих про то этих протоколов вот давайте вспомним то в какую эпоху создавался интернет и почему это в итоге привело к тому к чему привело вот это соответственно середина 20 века то есть эпоха хиппи вот когда все строили такую сеть доверия и соответственно все было важно для того важно то чтобы все это работало вот и вопросам безопасности у для вас существенно меньшее внимание вот но в результате как это часто бывает сеть доверия она привела в такой сети скорее проблем зачастую итак начнем с протокола dns ну конечно все мы хорошо знаем как он работает то есть есть пользователь который заинтересован в том какой же адресу у того же самого супер банк точка ру он делает запрос к dns-серверу сервер в свою очередь смотрит там свой кэш вот проверяет что там есть если есть там данные это возвращает их пользователь сразу если там данных нету то делает рекурсивные запросы к ряду авторе татьяна серверов до тех пор пока не получит нужный ответ и в итоге передает его пользователям значит ну эта схема работает и работает отлично вот до тех пор пока опять же у нас не появляется вопрос безопасности а проблема здесь они в том что dns он на самом деле не очень устойчив к различного вида угроз уязвимости вот во первых данные они продаются передаются как плен текст вот то есть при злоумышленник если он окажется посередине он легко сможет быть самой данные прочитать вот и во-вторых по крайне мере в базовом dns у нас особо нет никакой верификации ответов вот то есть вот данные как их сервер до или пользователь получил вот он им также поверил там если сервису поместил в кэш вот после чего к эш стал отравленном и и соответственно после этого доверять такому сервера уже нельзя вот ну и эти рассуждения значит они легко приводят нас к атаке вида dns spoofing или dns cache poisoning тут схема реализации этой атаки могут быть чуть чуть чуть чуть различаться вот то есть в чистом виде . cache poisoning это когда атакующий каким-то образом отравляет каждое nas сервера и после этого он в течение какого-то времени начинают отдавать соответственно те ответы которых которые которых от него хотел злоумышленник вот ну и второй вариант это опять-таки когда нам каким-то образом у кого удалось оказаться посередине между этим dns сервером и пользователям вот в этом случае проблем никаких мы просто видоизменяем запрос и соответственно водоем пользователю то что нам то его нужно значит ну видно в принципе что в чистом виде эту атаку использовать для того чтобы именно организовывать перехват трафика чуть-чуть может быть проблематично то есть это нужно использовать какие-то уязвимости вот однако если вдруг у нас уже этот перехват организован то он существенно облегчает нам честно облегчает нам задачу и вот все с все остальные там в частности по получению сертификата для интересующего нас домена вот и все связанные с этим вот поэтому перейдём к следующему протоколу bdp с которым ситуация обстоит существенно страшнее вот значит би джи пи это де факто стандарт стандартный протокол для между менной маршрутизации в интернете то есть что значит между менной в джипе он оперирует не просто сетями он оперирует как бы автономными системами вот то есть автономная система это такая совокупная сетей которая находится под неким единым административным контролем ну чтобы понимать значит какие есть какие бывают автономные системы вот во первых любая более-менее крупная компания которая хочет быть самостоятельной единицей амортизации она может легко завести себе автономную систему вот и в частности они есть у всех крупных компаний таких как microsoft и apple вот есть у операторов естественно у мтс ростелекома всех вот ну так же они есть и у существенно более мелких компаний то есть автономных систем сейчас число превысило 60 тысяч вот и виджеты это тот протокол который определяет как трафик пойдет от одной автономной системы до другой вот то есть по факту полностью вот весь глобальный такой путь трафика это решение она делается значит следующим образом би джи пи это дистанционный векторный протокол вот то есть автономные системы они обмениваются со своими соседями информации о доступности то есть о том что вот автономность м она как бы говорит своим соседям я знаю как добраться до такой-то сети вот то есть соседи узнают что вот они могут до этой сети добраться через эту автономную систему вот и дальше эта информация вот так начинает распространяться все дальше дальше пока не распространится по всему интернету вот и значит решение амортизации она принимается на основе вот как бы собранной информации каждой автономной системы то есть вот она видит что она может добраться там в какую-то сеть там через одну другую третье вот и по своим каким-то правилам которые настроил администратора она выбирает куб так как именно она это будет делать вот значит проблема здесь на самом деле очень схожие с теми который мы видели в dns вот опять таки крайне мало внимания уделено вопросам безопасности по крайней мере в базовой версии значит во первых автономная система она может отправить своему соседу на самом деле по факту практически любой анонс то есть заявить как бы о том что она знает про любую какую то другую сеть вот и эта информация зачастую никак особо не проверяется то есть худшее что произойдет это анонс будет за фильтра ван то есть сосед его как бы отбросит вот но во многих случаях информация даже не верифицируем вот и соответственно анонс он дальше идет распространятся по всему интернету вот и как бы такое вот отсутствие безопасности она приводит к нас значит к нескольким видам атак с которым из которых на больше интерес представляет би джи пи х джек это угон префикса и бюджеты road лепетал утечка маршрута вот рассмотрим их чуть подробнее значит начнем с угла на префикса это выглядит примерно следующим образом то есть есть у нас какая-то автономная система вот у нее есть сеть и она соответственно заявляет своим соседям что вот я знаю маршрут до этой сети как дословно анонс примерно это означает вот этот анонс распространяется по интернету все об этом узнают и соответственно трафика в эту сеть направляет этой автономной системе вот отлично однако на горизонте возникает еще одна автономная система которая делает примерно то же самое она говорит я тоже знаю маршрут в эту сеть идите через меня вот причем для там для простоты давайте предположим что она выберет не всю вот эту сеть а чуть поменьше потеть то есть исходной исходной автономка говорила прошлых 23а а злоумышленник говорит про слышь 24 вот соответственно эта информация она точно также начинает распространяться если нигде не будет за фильтрованное вот и через какое-то время какая-то часть интернета она узнает узнает уже про два возможных направления куда ей можно послать трафик вот и здесь включается такой достаточно часто применяемый прежде принципе мышц satio что трафик падет как бы в более специфичную сеть вот то есть в данном случае от flash 24 и соответственно большая часть трафика она будет направлена злоумышленнику вот это принципе все что ему нужно сделать то есть просто сказать что вот как бы я про эту сеть знаю вот следующий инцидент это утечка маршрута и это чуть чуть более сложный случай его от зато более распространенный значит выглядит он следующим образом то есть есть какая-то автономная система клиент у которой есть два провайдера рассмотрим вот такой более простой случай соответственно это это автономная система она получает от провайдера какой-то анонс вот и каким-то своим внутренним причинам отправляют его другому провайдеру вот значит здесь включается такой момент что провайдеры они обычно доверяют клиентам на . как бы клиент всегда прав влад и соответственно они этот анонс принимают и в результате трафик который для этой автономно система совершенно не предназначен начинает идти через нее он вот такой вот вариант естественно вы можете спросить протоколы конечно появились достаточно давно соответственно наверняка есть какие-то расширения безопасности которые все эти моменты пытаются устранить вот ответ положительный да действительно такие расширения есть они есть и для dns и для бюджета и даже называется более-менее похожим образом вот однако проблема здесь в том что по какой-то причине они внедряются просто необыкновенно медленно то есть бюджет писек который был предложен уже весьма давно 10 лет назад он вот только буквально этой осенью был принят как стандарт соответственно о каком внедрение по факту сейчас речь и не идет вот что касается dns секта он был принят существенно раньше в 2005 году вот однако как вы видите степени коэффициент внедрения составляет всего лишь около 15 процентов то есть рассчитывать на такое расширение безопасности в принципе не приходится вот ну и давайте теперь перейдем к каким-то практическим примером чтобы подтвердить вот эту сказано выше теорию значит сначала рассмотрим такой достаточно известный случай применение dns спуфингом вот на экране приведена иллюстрация ситуации с индексом на украине вот как все вы наверно знаете не так давно он был заблокирован вот а один из методов блокировки это блокировка по dns когда в dns сервера прописываются какие другие записи вот ведущие не на яндекс она либо на 100 27001 либо на какой-нибудь внутренний сервер который уже этот трафик отбросит вот и соответственно таким образом осуществляется блокировка вот и здесь на данной карте показаны показано то к какому классу относится ответ для нас сервера вот красным помечены те ответы которые действительно ведут на яндекс вот а синим и зеленым соответственно другие случаи вот зелёное табло кол который стал 27001 осеняет какие-то другие внутренние сервера то есть данная ситуация она конечно не имеет отношения к краже каких-то данных вот но тем не менее это самый что ни на есть человек посередине который просто модифицирует запрос полностью удаляя его вот теперь давайте перейдем к би джи би би джи пи ситуация она совсем другая она куда страшнее вот то есть инциденты би джи пи они на самом деле происходит гораздо чаще чем вот кто-то может себе представить вот то есть если у вас есть какой-то префикс какая-то сеть вот то скорее всего с этой сетью уже неоднократно происходили те или иные инцидента бюджет и когда-то вот просто ну вы этого грубо говоря не заметили то есть инцидента при бюджете происходит действительно очень часто вот если мы возьмем и посчитаем сколько в среднем префиксов в какой-то конкретный отдельно взятый день подвержена тому или иному инциденту мы увидим что в среднем это каждый двадцатый префикс вот и инциденты происходят постоянно вот в частности среди них случаются достаточно крупные вот несколько таких крупных инцидентов давайте сейчас рассмотрим значит первый инцидент был в апреле 2017 года компания google она значит допустила утечку сторону verizon а порядка свыше 100 тысяч префиксов вот и это соответственно привело к тому что значительная часть трафика японии она пошла в сторону google японии его от google к этому был не готов вот трафик был отброшен и соответственно существенная часть сервисов япония была недоступна в течение порядка 40 минут следующий инцидент связан с компании ростелеком он произошел тоже примерно в то же время он существенно меньше по масштабу на самом деле достаточно незначительный инцидент утекло всего порядка 50 префиксов но интерес данной ситуации состоит в том что почему-то среди этих префиксов оказалось подозрительно много всяких финансовых организаций вот которые приведены в последней строчке visa mastercard и ряд других то есть трафик который должен идти к этим организациям он пошел в обход обычного пути через ростелеком то есть скорее всего конечно здесь не было никакого злонамеренного умысла это просто ошибка вот но тем не менее вот инцидент такой то есть трафик финансовый действительно потек совсем по другому направлению чем должен еще один инцидент чуть-чуть другого класса связан с хоум кредит банка вот который произошел тоже достаточно недавно здесь ситуация чуть-чуть обратно то есть если в предыдущем случае оператор связи перехватил на себя трафик который должен идти к финансовым организациям то здесь наоборот финансовая организация решила поиграть в оператора связи вот и соответственно допустил утечку маршрутов вот в результате через него потек трафик который совершенно не должен был идти вот что привело там к ряду проблем с доступностью как у самого хоум кредит банка так и у тех кому этот трафик предназначался то есть утекло порядка 60000 префиксов примерно одна десятая от всего объема которые сейчас наши these руется сети интернет вот ну и чтобы получить какое-то представление о масштабах этой проблемы давайте проведем такой эксперимент то есть вот если вы злоумышленник то где вам больше всего хотелось бы находиться для того чтобы как бы перехватить как можно больше трафика как можно больше интересного трафика вот скорее всего вы конечно хотите находиться где-то между пользователями и контентом вот ну давайте возьмем и посчитаем количество инцидентов между крупными access сетями в качестве которых возьмем большую тройку вот с там где сидит много пользователей и между каким-нибудь оператором за которым много контента вот в качестве такого возьмем ростелеком и у нас вот получается примерно вот такой график из которого видно что практически ну чтоб ситуации когда у нас порядка десяти инцидентов в день происходит они абсолютно типичная то есть какие-то либо больше в какие-то чуть поменьше но тем не менее угрозы буквально на ежедневной основе происходит здесь конечно то есть все это может быть звучит чуть-чуть страшновато вот здесь обязательно нужно оговориться что естественно не зло намеренными вот эти вот утечка маршрутов она в большинстве случаев все таки связано с какими-то ошибками конфигурации когда админ допустим не смог достаточно подробно изучить как работает бюджет и вот и в результате допустил то что префиксы to taste нуца идут не по тем направлениям по которым должны вот да безусловно это так вот однако это во-первых по-прежнему остается перехватом трафика то есть ваш трафик он течет туда куда течь не должен и во-вторых это привносит зачастую ряд других проблем такие как увеличение задержек то есть вот как видите из данного графика более чем в трех случаях из четырех задержки возрастают вот по сравнению с тем случаем когда инцидента не было и это так же естественно может привести к проблемам доступности потому что зачастую той автономной системой которая допускает инцидент является какая-то небольшая автономка рот в которой недостаточно мощностей просто что бесит трафик переварить соответственно какие пиковый момент она просто легко может не справиться и соответственно будут уже потери трафика что более серьезно чем возросшей задержки значит ну и давайте перейдем постепенно уже к выводом из всего этого рассказа выводы они на самом деле чуть-чуть пугающие вот то есть во первых https который кому-то может показаться без с безопасным протоколом он является таким все-таки не до конца поскольку во первых системы сертификации они являются уязвимыми к грамотно проведенным атакам класса ментами дал вот и в в принципе в определенных случаях даже сертификат является необязательным для того чтобы этого так успешно провести дальше значит вот перенаправление трафика особенно с использованием протокола bgp провести его просто пугающе легко то есть для этого просто нужно взять и сделать по факту гораздо сложнее сделать это так чтобы это полностью осталось незамеченным но вот именно в моменте взять и сделать его действительно очень легко вот и кроме того мы видим то что протоколы безопасности они совершенно безнадежно отстают от данной ситуации вот и вряд ли в каком-то ближайшем будущем эта ситуация изменится вот и таким образом единственный по факту доступны сейчас нет борьбы со всем этим делом это только какой-то мониторинг вот который нам во время будет говорить о проблемах и в этом случае мы будем иметь возможность все по крайней мере там связаться с автономными системами которые приняли плохое анонс вот они это посмотрят действительно могут его в хорошем случае там отбраковать вот я ситуация нормализуется вот и соответственно единственное на что здесь стоит рассчитывать это мониторинг вот значит ну мы вообще компания куратор labs мы занимаемся фильтрации трафика мы представляем услуги по фильтрации трафика вот и в частности естественно заинтересованы в обеспечении доступности вот поэтому нас этот вопрос в свое время тоже интересовал очень сильно вот и поэтому мы начали здесь делать свое решение которое будет предоставлять какой-то мониторинг для нас вот таких инцидентов со временем проект сильно развился вот и значит сейчас это проект радар buy куратор вот у нас в да на данный момент крупнейший коллектор бюджет и инцидента в мире вот у нас порядка 400 активных точек в бюджет и мониторинга и значит в какой-то момент мы поняли что хотим поделиться этим с комьюнити вот и соответственно сейчас этот проект он доступен радар куратор нет вы можете зайти допустим проверить свою автономную систему или свой домен на наличие уязвимости вот вам будут показаны исторические данные то есть сколько вот в разные моменты времени у вас был инцидент с этим связано ну и поскольку исторических данных на самом деле может быть недостаточно вот мы сейчас запускаем пилотный проект по мониторингу этих инцидентов в реальном времени вот и соответственно всех заинтересованных безопасности приглашаем принять в нём участие на этом у меня все спасибо за внимание буду рад ответить на вопросы спасибо за доклад если вы смотрите вопрос 1 по поводу бюджеты на скале эффективного использовать для до доза так используем сейчас для этого спасибо за вопрос значит но непосредственно для adidas так его использовать наверное все таки не так легко как какие-то другие методы потому что такие действия они никогда не ок не остаются как бы они никогда не проходят бесследно то есть это всегда будет видно кто тем или иным образом аннексировал вот и соответственно кто кто оказался виновником вот если значит в этом злоумышленника уличат то в таком случае его могут лишить статуса так решительно нам на система лишить столбцы лера и далее проведение подобных действий будет уже проблематично но честно говоря навскидку я вам сказать не могу надо уточнить но по крайней мере точно могут еще вопрос один сам начале говорили что там допустим если dns там но ответит какой-то злоумышленник да там можно удаленно исполнение кода на клиенте выполнить там вкратце можно рассказать как именно ответ dns и будет влиять на исполнение кода на клинской машине а это просто уязвимость в windows то есть windows будет этот запрет этот ответ интерпретировать таким образом что в итоге выполнила сера вопрос 10 направо налево направо направо в этом провели несколько примеров инцидентов они клевые но насколько я понял масштабы трагедии в каждом случае был прямой пропорциональностью кривизны рук системного администратора у вас есть примерка злонамеренного он был трафик перенаправлен ну под рукой наверное нет вот но такие примеры точно были то есть хотя бы один но нет навскидку я вам такого примера все-таки вспомнить не смогу наверное потому что я честно говоря даже вот здание сомнут если домен не угнали мне как-то сложно представить как можно вот это вот случай с доносом на самом деле ситуация как раз гораздо проще то есть таких случаев было очень много то есть ну там всякие самые разные варианты возможно начиная с того что проникает просто там в домашние роутер и которая да то есть есть другая проблема где-то другая дрогнули домен проникли в домашний роутер а вот чисто на сам протокол на сам промо к горе dns взять ее угнать трафик у вас есть такие варианты но вот у меня есть конкретный пример то есть я недавно совсем читал именно вот про случай когда значит все-таки воспользовались тем что роутер криво настроен досады на длинном вот там соответственно подменили dns вот и организовали таким образом прослушку и угнали там какое-то большое количество данных в часто станский кошельков ну то есть всегда есть второй фактор то есть не атакуют не через протокола через есть какой-то дырка где-нибудь залезают на ждали уже нет но ночных технические средства нет ну почему то есть кэш poisoning это достаточно известный типа так то есть вот по крайней мере раньше пока все эти моменты не были закрыты ну действительно существовали конкретная так именно на протокол вот то есть когда там определенным образом играли с тем какие адреса мы запрашиваем и просто вот отправкой такого запросам и отравляли крыш и соответственно сервер начинал выдавать не то что должен вот такие случаи конечно были вот я не знаю конкретно такие атаки для прям как бы чтобы применялись они именно для кражи данных вот но они естественно могли применяться то есть совместить вот эти два примера и получаем получаем те времена когда еще атака моррисон одесситы работала да ну да это было конечно чуть чуть раньше спасибо здравствуйте у меня больше наверное комментарий вот предыдущему задающим вопрос в чем проблема-то с dns он воспользоваться им берешь 53 порт перехватываешь и ответы подставляешь сейчас попал россии так блокируют запрещенные ресурсы кто мешает где-нибудь по серединке встать между оператором клиентам то есть это не проблема померания ну вот сейчас речь буду потом по почте у меня комментарий скорее чем вопроса может быть два даже 1 что почти без все же немножко уже можно защитить так неплохо можно там федора прописать свой публичный ключ если очень попросить браузеров они ведь их даже браузер и зашьют это будут chrome firefox даже а если и твой клиент это приложение которое ты своими ручками писал уже конечно никакого оправдания своей публичный ключ туда зашли нету там более-менее мозга можно защититься а так конечно у тебя уведут это не защищает от того что у тебя выйдут префиксы ну ну хотя бы ничего плохого кроме отказа доступа не произойдет и второе что моём конечно опыте у меня всегда трудно когда я покупал интернет-провайдеров всегда меня еще в договоре просили убить префиксы не даже всегда пары приходилось пинать потом поддержку чтоб меня фильтр в какие-то загнали так что не всегда так просто может быть я конечно на другой стороне у меня всегда был 12 префиксы может быть если ты там целиком какой-то это не так все работает ну ну в общем то насколько понял чтобы провести такая так он велит то есть надо быть гуглом или ростелеком то есть настолько может быть а вот важная прокомментирую значит на самом деле оба этих момента по поводу первого да конечно есть различное расширение безоп снасти которые связаны именно с форсированием https на стороне клиента то есть там a6 с флаг например да https track транспорт security вот но на самом деле согласно моим представлением эта штука все-таки внедрена крайне слабо вот то есть ну вот банально если попробовать какие-то сайты вот зайти на них именно через http вот то мы увидим что до в случае гугла действительно будет переход на https в браузере случае википедии в случае twitter и все то есть там тот же индекс тот же mail вот эту штуку не внедряют вот и как бы то есть вообще вот степень того на сколько внедрено a6 с она примерно так же как в это те которые мы обсуждали для нас все кабели писек вот а по второму поводу значит тут тоже да конечно безусловно существует префикс фильтра то есть я значит вот когда говорил я горю что фильтрация в во многих случаях отсутствует вот нет конечно есть случае особенно на как бы для более мелких операторов вот того что используется фильтрация с помощью префикс фильтров вот но во первых такие штуки практически всегда как-то либо они психически она очень часто практически плохо работают на более высоком уровне вот во вторых ну даже для локального уровня небольших операторов и тоже далеко не всегда так вот то есть просто вот мы видим количество инцидентов которые появляются вот и она настолько значительно что вот и кроме того еще один момент что префикс фильтра они действительно спасают только от первого инцидента да то есть от утечек маршрутов они спасают далеко не всегда вот если хотите наверное в кулуарах могу нарисовать пример вот когда это не сработает просто в принципе б дизайна из них уже нет небольшие комментарии значит в 4 существует два механизма из тех которые мы говорили помните это сдвиг транспорт security и паблике пилинг вот стык транспорт security действительно этот механизм который запрещает обращаться к ресурсу по plain text если уже раз к нему сходили по gps вот этот механизм не помогает потому что опять же можно получить валидный сертификат используя манипуляции с бюджеты и маршрутами а второй механизм паблике пильник начиная с какой-то из ближайших следующих версий не поддерживается в хроме google его троп ну да могу сказать если интересно да что такое паблике pinning при обращении к без ресурсов браузер если проставлен определенные заголовок определенного формата запоминает список сертификатов который сочетает вали в обидными при обращении к нему то есть после этого нельзя будет просто выпустить любой сертификат повесить на какой сервер перевезти туда dns и дней не установится потому что публичный ключ хоть и подписан а центром сертификации валиден но не тот так вот google принял решение поддержку этого стандартного между прочим стандартизированного заголовка отменить по той причине что они видят в этом вектор для будете смеяться denial of service атак потому что а то пущей может ну то есть человек злоумышленник может взломать сервер повесить там в паблике пин свой собственный сертификат и потом вымогать деньги google не принял окончательного решения нас вероятность 90 процентов если каждый здесь не напишет в google о том что вы с ума сошли год это быть при что ни один из этих механизмов по факту не работает в случае если у нас сломанной транзит то есть случай если у нас проблемы с бюджет и который есть спасибо за интересный доклад я хотел задать вопрос ну известно что х тпп с создает overhead но по сравнению с и т.п. сложнее но больше процессор ных мощностей тратится на обслуживание может быть вы расскажете вот про тегеран ее версии dns и bdp может быть они просто слишком тяжелы сейчас поэтому не внедряются ну почему вообще как как реализована эта защита и может быть ваши причины какие-то которые приводят к тому что не распространилась до спасибо запрос значит здесь дело скорее всего конечно совсем в другом вот ну значит сначала давайте в двух словах о том как происходит проверка вот проверка она в обоих случаях примерно одинаковая вот с использованием р печаль то есть инфраструктуры по хранению публичных ключей вот и состоит просто в проверки подписи соответствующие записи да то есть в случае с dns м эта запись и ресурсов вот случай из бюджета это соответственно анонсе вот есть там канон сугроб говоря добавляется подпись вот и тот кто его принимает может ее проверить то есть навскидку кажется что это все-таки совсем незначительные затраты и проблема в этом точно не стоит вот в чем она стоит это именно в сложности разворачивания этой инфраструктуры публичных ключей вот то есть ну для этого нужно каждую запись подписать да то есть вот все должны это внедрить все должны поддерживать проверку и вот как бы вся вот эта стандартизация общения со всеми вендорами она идет крайне медленно нус https там чуть-чуть другая ситуация там все-таки она как бы чуть чуть проще вся эта инфраструктура не но здесь она тоже получается как видите то есть стандарт принят и 15 процентов внедрена да ну то есть это действительно важный момент есть эта поддержка железом да кстати это правильная комментарий то что же https то нам на железном уровне поддерживать не нужна а вот всякие dns и прочее вот это да здравствуйте есть здесь вопрос у меня коротенький вопрос по радару у вас к нему api есть то есть как всем можно общаться ну во первых у нас доступен веб сайт на котором все это можно посмотреть вот и недавно мы действительно зарелизили api то есть в принципе api тоже есть на постановку то есть это или и какой-то по запросу значит смотрите apple по публично доступная то есть единственное что вам нужно сделать это зарегистрироваться на сайте и подтвердить свою автономную систему то есть по понятным причинам мы все эти инциденты безопасности не разглашаем кому угодно то есть значит вам нужно просто подтвердить вот и тогда вы увидите там ряд проблем то есть не только здесь осужденный вот но и также всякие видос amplify катары вот который просто в противном случае злоумышленник мог бы использовать для своих как бы злонамеренных целей вот подтверждение автономной системой это очень простой процесс то есть это просто вам придет письмо как бы вы кликнуть по ссылке все спасибо у нас время подход концу поэтому последний вопрос на самом деле не столько вопрос сколько просто слова в защиту https на самом деле до в гугл хроме он не будет больше поддерживать кипень young он отказался от этого в поддержку другой технологии сертификат transparency которую как почему то вы не сказали то есть это ну когда выпускается новый сертификат да он просто падает публичный log если кто-то ну злоумышленник выпустил сертификат для google там для яндекс то есть все это увидят и просто отмене тут сертификат на самом деле не все так плохо но мы на самом деле проверяли эту ситуацию вот то есть просто в явном виде попробовали выпустить сертификат и она то есть единственное что он был не для публичного ресурсы ну да возможно то есть как бы в каких случаях все-таки он отработает успешным она спасибо всем спасибо давайте еще раз мы благодарим нашли спикера a sign"
}