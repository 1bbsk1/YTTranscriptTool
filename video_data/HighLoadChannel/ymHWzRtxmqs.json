{
  "video_id": "ymHWzRtxmqs",
  "channel": "HighLoadChannel",
  "title": "MySQL 5.7 - NoSQL - JSON, Protocol X, Document Store / Петр Зайцев (Percona)",
  "views": 1189,
  "duration": 2973,
  "published": "2017-04-22T14:48:24-07:00",
  "text": "значит мы с вами поговорим о некоторых вещах которые ноги новые в майской 57 там всего много много чего есть хорошего но мы поговорим конкретно о поддержке нойз quelle в майской о чем мы говорим краткого носка или что это такое да потому что такой термин который достаточно обширная и часто не до конца понимается историю поддержки овсяное сколь майскую и непосредственно новые возможности в 57 и так кратко о на ускорить когда мы говорим но но вскоре то обычно имеется ввиду пару вещей во-первых это модель данных которая в но и сколь у нас не реляционная во вторых это язык доступа который должен быть не они искали если база данных удовлетворяет этим 2ым слоем условиям то ее в принципе можно обозвать новый сколь база данных на самом деле в новой сквозь базах данных есть много разных моделей key value старт документов white коллом или сроки колонки граф и есть сейчас такой модный подход называется мальте модуль де рибаса когда одна и та же база данных может может реализовывать много разных данных другой вариант использования или расшифровки новый сколь может выглядеть так как not он рискует и на самом деле это все более в очи становится реальностью так как с одной стороны мы видим что в реляционных базах данных появляется поддержка новой сколь как с точки зрения поддержки не реляционной модели данных так же как и других протоколов доступа но с другой стороны если посмотреть на многие базы данных они начинают реализовать язык который если это не до конца полная поддержка аскольда то что то что то в этом роде можно посмотреть манга дебит для аналитики их реализации запросов или же в кассандры есть свой язык в коуч бы некоторые из quelle подобные языке присутствуют но так как для ряда задач эти языки очень удобные и привычно ну почему люди используют но с кори во многих случаях все это связано с простотой и которая из нее выходит скорость разработки во многих случаях новость кого и решение предлагают нам гибкую схему в которую разработчики могут очень быстро добавлять новые фичи что-то менять им не нужно делать какие-то дизайн схемы как какие-то изменения в плане добавления колонок или изменение типов вот и это позволяет особенно для простых приложений сильно увеличить скорость разработку производительность тоже часто является а преимуществом часто вопрос не в том что сколь база данных они тормозные проблема часто в другом что и сколь база данных позволяют делать сложные запросы вот и если дать возможность давала from делать сложные запросы но не научитесь создавать индексов то это как бы рецепта катастрофе если у нас интерфейс какой-нибудь простой например memcache мы можем только объект любых читать либо записать обратно-то и и испортите сломать такую систему разработчикам значительно сложнее масштабируемость тоже весьма важный компонент опять-таки поскольку язык интерфейс значительно проще то проще делать система которые а с келли цена большие объемы большие кластеры да то есть в традиционной базы данных у нас то могут быть жены поле любых таблицу нас по большому счету должны поддерживаться транзакции любого размера и любой сложности до но и сколь база данных они часто горькие мы это не делаем джон и мы не даем полноценных транзакций но зато вы можете сделать такой большой кластер до которой нужно делать не не руками меня не ручным шаринган как mais quel о которой делаются уже встроен систему и так но и сколь войска ну на самом деле на чем мой сколь фокусируется сейчас это гибкая схема и крат доступ до доступ не через языка и скай на текущий момент и никакой из решений присущих майской не предлагается не дает преимущества sql плане возможности такого от глобального масштабирования но на самом деле для небольших приложений до его даже скал для средних приложений часто 1 майское сервера либо там mais quel мастер и несколько там slave его бывает более чем чем достаточно в современном мире итак когда мы говорим мной сколь я думаю что документ ориентированные базы данных и язык или структуры джейсон является наиболее наверное интересным и перспективным примером ну почему потому что если мы говорим с точки зрения скорости разработки разработчиков которые есть обычные люди которые пишут фронт-энд а они уже должны понимать джейсон структуру документа да потому что то что они используют в браузерах при разработке про фронте вот для таких людей часто очень просто если они могут взять документ который у них непосредственно используется в веб приложения да там и его напрямую сохранить в базе данных это все очень просто это очень понятно такие документы вот примерно выглядит таким образом значит операции который использует на как таскать интерфейс который использует базы данных часто новый сколь база данных часто в деталях синтаксис она отличается да но концепт он называется cran что в принципе говорит что вот нас есть операции для того чтобы создавать документы читать документы обновляют документы удалять документы да все очень просто обычно используется какая это достаточно простая опять-таки нотация которую очень близка и понятна разработчикам которая вот это java script да там и других скрипта подобных языках то есть если вот мы посмотрим пример если мы используем реляционную схему да там нас какая-нибудь простенькая схема вот то будет выглядеть вы скажете так интерфейс как раз будет выглядеть вот таким образом другой пример поиска да то есть поиск на sql поиск на но кран кран интерфейса ну откровенно говоря мне вот то что касается таких уже условий вариант крат нравится нравится меньше дать мне кажется что ну и сколь интерфейс он несколько более читаем то что часто используются такие интерфейсы вроде дети делает все это менее читаем и но я думаю что это вопрос привычки во многом значит что у нас происходило с протоколами доступа но сколь в майской на самом деле здесь у нас очень богатой истории история во первых начиная с версии не знаю какой в майской была команда хандлер которая позволяла убрать частью вверх айда парсинг запросов там optimizer и прочее что можно если нам нужно просто с такой навигационный доступ к базе данных в чем-то например в котором можно использовать для key и value доступа можно было использовать офис интерфейс хандлер но и который давал определенную определенное преимущество другой интересного момент то что в моей сколь кластеру в нтб который доступен 2004 года по большому счету является нойз quelle системой да там такое весьма продвинутый values tour с сак андрей индексами и прочь у которой есть свой нос que el barto кол то там опять таки весьма продвинутый с асинхронными возможностями с транзакциями так далее этого и тому подобное мне кажется это вот что если бы в тот момент был бы реально фокус не продвигать кластер именно как вот sql штуку а именно сделать ей и пи ай которые удобны для разработчиков в использовании и поддерживается многих скриптовых языков программирования то я думаю что индиви могло быть на текущий момент очень популярная новость quelle системы там действительно много крутых даже на текущий момент вич ну баскова этого не произошло теперь уже конечно время пущино memcache тоже очень известный популярный интерфейс протокол поддержка memcache майское появилась с 2009 года был такой сделал небольшой младенчик майки шт вот и потом в 2011 году вы уже была добавлена официальная поддержка memcache для и надели и ndb систем вот кто нибудь слышал врагу чтобы хандлер socket достаточно много больше чем чем я думал что хандлер socket еще 1 1 интерфейс у меня популярный для mais quel которые бы стал доступен в 2010 году это свой свой протокол на самом деле он не очень простой в использовании скажем так но для ряда операции может мог давать существенную при прироста в производительности ну и наконец мы дошли до того что же нам даёт mais quel 57 даже в конце этой истории мы искали 57 добавлен новый протокол доступа который называется протокол x вот которой собой представляет возможность доступа как sql так и новый сколь интерфейс в рамках одного протокола но и в нем куча других разных интересных возможностей а потому что если смотреть на морской протокол ему уже сколько но наверно 25 лет на на текущий момент да там с небольшими изменениями он по-прежнему вот тот старый протокол да там который был основан столько лет назад до дошел до дошел до нас протокол x он основан на более новых технологий например там используется про таваф раз для сериализации он позволяет делать всякие там несколько сессий внутри одной к коннекта там есть асинхронный ввод-вывод ну короче там много разных интересных штучек заложены в этот протокол что у нас происходит с поддержкой но и сколь модели данных ну во-первых уже сколько я себя помню мы всегда хранились и реляционные объекты в лоб текст полях да там кто ему дел такое да то есть одно время был там либо xml либо ручная сериализация какая-то да там потом сейчас все больше больше используется джейса но по-прежнему достаточно часто этой технологии используются в в свое время у меня там десять лет назад был интерес к поддержке xml да там помните было время когда xml впереди планеты всей вот к это очень круто ну вот но в то время мой сколь тоже присоединялся к этому течению был добавлен подход в поддержка экспо войска в 2015 году explore не делался но экспо есть вот для более удобной работы с xml документа что свечи появилось интересное это динамические колонки появились в марии тебе прежде всего да где можно было но создавать такие дина меня динамические колонки да там когда в одном поле могло хранится несколько несколько к несколько колонок в дальнейшем подобной ну вот концепт в принципе то был реализован как поддержка джейсон в марии тебе тоже вот наша дорогая всеми любимой света смирнова которое выступало до меня она тоже приложила свою руку к поддержке новый сколь майской сделав набор use of которые были доступны начиная с 2013 года и в принципе которая вполне себе хорошо поработали лишь там богов не наделала свет нет ну вот и так ну и наконец в 2015 году у нас появилась поддержка джейсон в нативная джейсен в mais quel 2015 года странно что мне никто и не станет не скажет а вот у нас воздусе это уже десять лет есть что а ну да но это не важно так так ли это так или иначе мы видим на что поддержка джейсон и в принципе вот это вот им какой-то да там как интеграция но иска или но и но искали sql оно происходит не только мире морской и так тип джейсон в мае стоит что у нас тут есть первых это нативный джейсон менять его тип данных и у нас поддерживаются то есть что сделано было в архитектуре моей скорость для поддержки сделано then i тип данных сделано поддержка индексов которые не основаны какой-то там физической колонки которые позволяют индексировать таким образом поля джейсон of и поддержка доступ к полям в синтаксисе в полям в яндексе а сказать что не надо написать а какие то функцию потому что это ну не очень удобно что используется нас в нативном тибете у него свойства во первых у него используется бинарный формат хранения то есть по большому счету при вставке это джейсон борн сохранится в определенном удобном в формате где есть из индекс для быстрого доступа по колонкам быстрого доступа к элементов массивом так что если есть какой то запрос который не знаю там просматривает не знаю там сто тысяч джейсон документов это будет работать быстро потому что каждый из них не нужно портить вот то же самое на чем я знаю идет сейчас работа это над поддержкой резервации и как бы обновлением на то же самом месте да то есть у нас есть большой честен документа мы хотим в нем там изменить два байта здесь вот в каком то месте мы не хотим чтобы он работал как ну как стандартный блок да там где создается новый абсолютно куплена на 2 мегабайта то есть это вот одна из вещей которые многие ну джейсон системы изначально она там продумал потому что этот конкретный кейс обновление в в москве такое еще требуется доделывать поддержка типов в джейсон поддерживаются как в мой скальп джейсон типе базируется как стандартные джейсен типы колонки так и специальный типа майской что имеется ввиду данном случае ну понятно когда мы создаем джейсон документ в это можем типа неё не указывать но когда мы делаем какой то select и к ставим какой-нибудь элементы джейсон как колонку мы можем либо будет ти определён автоматически либо мы можем его за заказ так вот следующие моменты о котором следует говорить что важно в моей сколько 7 для полноценной поддержки джейсон это так называемые вычислим ее колонки где можем задать колонку которая не определяется просто как все типа мы можем сказать что вот эта колонка сайт сил у нас ее тип дабл и она вычисляется как вот выражение основана на других других колонок для колонок мы можем указать виртуальных колонок два типа либо виртуалка гонка либо start virtual колонка это значит что каждый раз при ее обращение она будет вычисляться это то что использовать большинстве случаев но можем также сказать ребята вот это вот выражение как бы сложно считает его долго так что вместо того чтобы его каждый раз при обращении высчитывать на базе остальных колонок мы можем сделать просто что у нас и такая колонка хранится отдельно и такие колонки их можно индексировать причем те и estore и virtual ну вот скажем так здесь пример схема да вот мы как она может использоваться например если мы хотим делать удобный выбор куба африк да мы сделали generated калом которая у нас будет вычисляться как day of weak даты которая то просто останется в таблице после этого мы можем про проиндексировать вот эту колонку не храним но индексируем и дальше если мы здесь посмотрим вот мы увидим что вот тот индекс до который мы создали он при запросе например всем дан ко всем данным и не знаю что там по в какой-то определенный день недели он будет использовать теперь о индекс ну понятен дайверские стопы вот значит с точки зрения джейсон как ты же говорил использовать у дев просто так не неудобно да там у дев использовать эту функцию для того чтобы говорить вот пойди к этому полю достань колонку был сделан соответственно такой вот четко определенные где мы можем сказать что вот обращаемся к внутрь этой колоночки да и как мы видим здесь можно обращаться как к определенному типу так как в селе gti который мы select им так и в класс и в грубой вор его где где угодно то есть мы просто используем ними вот это вот документам но теперь давайте посмотрим на пример использования для типа джейсон можем создать таблицу в которой у нас есть какое-то данные типа джейсон вот это у нас получается то же самое как если вы мы сделали jason jason экстракт в данном случае поддержка индексов для джейсон но опять таки да вот работает точно также то здесь мы посмотрим теперь мы создали эту табличку делаем к ней к ней запрос по умолчанию нам показывают то что она делают full time as can type это означает что в полностью сканируется табличка вот теперь мы можем добавить добавить колонку и создать по ней yandex вот и теперь у нас стало все хорошо у нас используется индекс для того же самого запросу но на самом деле оно как бы все хорошо в том плане что она функциональна но откровенно говоря но тоже немножко несколько у бога да то есть если у кого-то там появилась такая мысль что я считаю что там если правильно и вот что на самом деле было бы правильно это сделать с полноценной поддержкой функциональных индексов делаем вы могли сказать что я не хочу от создавать виртуальную колонку а потом индексировать а просто могу создать индекс который просто вот индексируют какой-то более в этом женщин документе было бы несколько более удобнее и я думаю что в итоге к этому все придет просто опять-таки база данных сложной штукой там для чего то есть инсаров инфраструктуры что-то сделать проще что-то сделать сделать сложнее и я подозреваю что это не было сделано было сделано почему потому что в следующей версии майская сколь 8 происходит полная при работа да это dictionary достроился словаря и насколько я знаю люди не хотели делать изменен формат еще 1 from file чтобы там можно было какие-то хранить более сложное сложное выражение а работали с тем что есть ok следующий момент протокол x что-то такое с чем его едят ну если вам не хочется вообще использовать и сколь потому что это там не знаю боги не красивый язык мы хотим вот и напрямую использовать вот такое простое то можно использовать протокол x который был добавлен в майской для теме как я уже говорил там достаточно много разных возможностей добавлено и то работа в таком виде это только одна из них вместе с прокол x поставляется тоже майскую решил как новый comand line клиент который позволяет использовать больше функций скоро в функциональности из языков программирования непосредственно из клиента вы станете работал с mongo db com онлайн клиентам нет но вот идея примерно от и то же самое только в мае сколько шейл поддерживается не только java script язык но и и питон другой популярной язык разработки да то есть если вам интересен больше питоновский синтаксис он тоже там есть ну вот здесь откатят показ интересно да что то мы запустили майскую лежал в режиме java script у нас показывается что режим java script и мы можем делать такие там функции детским get collections она нам возвращает все в таком джейсон варианте вот fetch нам достаточно много вот это вот примерно показывать такая как структура что у нас получается то есть мы можем делать файл с разными сечь кондишн им показывать какие поля мы хотим выбрать грубой сортировку лимита есть это все поддерживаться в таком вот в функциональном варианте да то же самое мотив а изменить данные мы можем прописать что мы хотим здесь делать и при чем здесь видно что можем делать как простейшей операции сет так мы можем в этом функциональном языке например скачут нас вот есть джейсон определён объект давайте мы в него добавим элемент или удалим какой-нибудь элементы из масел и до что часто куда более удобно дать чем пытаться прописать такую семантику в языке паскаль теперь что интересно то можешь сказать о интересно как же это все работает но 3 от нас вот есть теперь с одной стороны таблицы mays корень и реляционные другой сторона съесть коллекции до который не реляционный как же это все живет вместе что же они там такого натворили нагородили майскую опять самом деле все достаточно достаточно просто что внутри каждая коллекция предоставляется по большому счету таблицу то есть любой коллекции то же самое можно обратиться используя язык аскольда то есть если мы посмотрим вот мы создали кантри инфо в предыдущем формате мы зайдем посмотрим на нее вот внутри мы увидим что у нас создается табличка в которой есть какой-то документ он и создается длинный такой айди специальная до который будет у нас автоматически автоматически генерится но опять-таки в идея примерно тоже самое как в в mongo db буа нас тут какое интересное то что несмотря на то что это за дизайне на было для поддержки no debe таблиц мы можем использовать например толку тебе если нам интересны ли вот мы работаем надо интеграции май rocks тоже самое можно будет использовать очень легко и делаем даже микс разные стороны например для каких-то данных таблиц таблиц который много пишу мы можем использовать но там она важна скорость ставки дата можем использовать то току тебе для других каких-то моей сам ну вот давай теперь посмотрим если мы выполним вот например такой запрос на там вытащим информацию о стране из этой тестовые базы данных что ж вы тут увидел можем пойти в майской general ок и увидели что на самом деле у нас это было все сконвертирована на низком уровне в в sql исходит запрос на на нижнем уровне ну понятно что мы можем работать тоже самое с индексами в данном случае да то есть мы можем если мы делаем примерно такие запросы дата по умолчанию это все очень-очень интересно кстати хочу обратить внимание что здесь синтаксис несколько другой и мне откровенно говоря он там нравится больше да что мы можем использовать вот наш атоме стандартные больше меньше вместо таких вот вещей вот и здесь мы можем создавать индексы да то есть мы говорим что мы создаем боль боль и индекса как его сортировать да потому что джейсон джонас не фигни типизированным нас к для построения индексы нам желательно знать как о сортировать потому что если мы можем вот это вот если числа сортировать как строку и сортировать либо сортировать как число то порядок получится совсем другой мы можем указать в каком порядке индекса сортируется и мне сначала это было очень понятно все за фиг это нужно если mais quel поддерживает у нас индексы пока только ну возрастающей до убывающей индексы но не поддерживает но сейчас-то понятно потому что в майской 57 наконец-таки по поиску и 80 добавленное индексы который можно могут сортировать данные как в одном направлении так и в в другом но и можно тоже самое создать уникальный индекс если если хочется и так далее значит в чем у нас достоинства и недостатки такого подхода но на самом деле вот они какие то есть с точки зрения плюсов и но мы доедали нашим разработчикам новый интерфейс правильно же у нас теперь разработчик ему нравится он искренне нравится могут использовать другой интерфейс с другой стороны администраторы которые там иску или знают понимают имеют ему делать explain и так далее и тому подобного они могут использовать те же самые тузы которые они использовали раньше с другой стороны это конечно и проблем потому что сконвертированный запрос особенно сложные и хоть сложнее в сложнее понимаете да там как и любые авто и генерирование запросы но скажем так не думаю что они здесь хуже чем запрос из любого страшного там уоррен фреймворка кто-нибудь смотрел какие-нибудь хай верные запросы ай да тут смотрю кто то кто то вспомнила плачет свой опыт то есть какие то есть такая проблема есть но она при используя многих фреймворков есть все равно ну и также нам сложно понимать из какого места этот запрос пришел потому что мы не можем пойти в коды вот там крепнуть и найти так что еще нам стоит иметь ввиду здесь ну это интерфейс он на самом деле приходится многими там классными возможностями которые уже есть в майской левого система хранения например у нас есть поддержка окон системности данных такие как у нас поддерживается транзакции у нас поддерживаются все стандартные режиме из-за изоляции точки сохранения как саиф points и и так далее и тому подобное какие-то вещи не поддерживаться напрямую но их можно прибить гвоздями на примере если мы очень хочется можно на это таблица есть триггер то есть поскольку это работает на нижнем интерфейсе то она будет будет работать что есть еще интересно что использует протокол доступ крат и sql можно в одной транзакции даже то есть от не то что мы как-то должны разделять этот и эти варианты доступа можно делать в одной транзакции можно использовать разные стороны engine у нас все это опять-таки инструмент из инструменти руется стандартными вещами вроде там performance кима слуг брелок все что угодно ну и понятно что опять-таки поддерживаются уже стандартная репликация которую вы привыкли это можно использовать как с майской рубрикация так из spire конных среди wiggle остер поддержку языках программирования стоит сказать что фича это достаточно новая поэтому поддержка языка программирования на еще не не не совсем супер полная у это вот языки которые на поддерживаться на текущий момент понятно что этот число будет там расширяться я думаю что и популярные языки вроде певички голову будут добавлены в ближайшее время и поскольку на самом деле процесс меняется вот хорошо платят по этому url ой посмотри посмотреть когда вы подойдете к тому что вы с этим прокомментировать побольше потому что я посмотрел где-то еще там примерно ну там 3 года назад например си си плюс плюс драйвера еще не было то есть это появилось бы поддержку более новое и так итоге в данном случае во-первых морской позволяет использовать как как ради сколь интерфейс для доступа данным одновременно включая одну транзакцию мы можем хранить реляционные данные и не лицо и джейсон данные документы в одном транзакционному хранилище что очень круто фич это новый в москве 57 и ее ведется очень активная активная разработка да так что экспериментируйте находите баги я думаю вы их найдёте без особых проблем и тоже не света писала вот но и репортите люди будут тут фиксить ну и конечно недостаток этого пока в том что она не не решает проблем скилов да то есть если у вас какое-то нужно гигантская приложение то возможно это не решение для вас вот что еще требуется напомнить если среди вас и и я уверен что есть мысль или эксперты по которым хотелось бы выступить на англоязычную аудиторию мы ищем докладчиков для person alive санта-клара если кость идей добро пожаловать подавайте да за доклады ну и как обычно мы всегда ищем новых людей если ой но умных людей новых то это найти легко сложных труднее то есть умных сложнее сложных трудно да как раз и сложных ли тоже найти легко все люди в чем-то сложные ну что и на этом вопросы господа здравствуйте пётр спасибо за доклад меня заинтересовали виртуальные колонки вопрос как они могут работать и могут ли вообще работать с не детерминированными функциями будет ли они как-то значение пересчитываться от момента времени они детерминирует функции но хороший хороший вопрос если горя не то есть и идея конечно что это не для детерминированные функции да то есть я не помню точно ограничения там но понятно что если это не termini разум такую колонку нельзя нельзя индексировать в принципе да дать теоретически то есть он и вообще не до создатели он даст и и создать и потом можно будет например по ивенту электрону просто этот индекс перестраивать нет и индекса если есть нет термини равана я эти лоно я не помню ни не до создать колонку не дастся затем и цвета не помнит и свет не помнишь как нам это вопрос по поводу нового типа джейсон есть вас какая информация о году производитель сравнения с колонками обычного читателя то есть и во вторых с другим базам данных сравнения но в этот интересно я могу сказать что в принципе так вот сказать что-то работать быстрее и всем где-то я не могу знаю что много проводилось сравнение опять таки с подходами где джейсона там постоянно парсится да то есть там значительно быстрее вот то что касается сравнении с обычными колонками здесь все зависит сильно от размеры документа то есть сам по себе доступ внутри внутри джейсон он достаточно хорошо оптимизирована поэтому здесь у вас документ очень большой там ногу не знаю где нормализованных данных то за счет того что она у и на нижнем уровне интерфейсу считывается всегда весь документ да то есть там нету возможностью на не знаю там считать только заголовок а потом обратиться к тем элементам которые нужно то будет несколько несколько медленней понят просто хотелось понять мы грубую на каких задачах это это тип новый production радио энергий нет но понятно понятно ну вот опять таки то есть и я обыскал когда что ты прежде всего если вы занимались тем что все равно хранили джейсон в блогах да вот это вот такой первый самый точный при принцип тогда что это будет точно работать значительно быстрее да там еще попова джейсона типа собственные реализовали новый тип до джейсон можно хранить теперь любую структуру натыкаемся опять на проблему что эта схема лес она фактически усложняет жизнь ты мы не знаем что там хранится если какие-то может быть идеи в плане в валидации хороший хороший вопрос да то есть я я думаю что здесь есть как бы две вещи да то есть во первых как я уже сказал что на текущей случае вот валиде от каких-то вещей нацепить мне нельзя я думаю что это одна из очевидных вещей которая будет добавлен я бы я опять таки бруклине работаю поэтому он готов к спекулировать на я думаю что эта версия 8 появится что можно сделать сейчас уже это можно сделать триггер как я расколол такую табличку да там в котором можно сделать но любую функцию валидации на этот самый джейсон и не давать те данные которые не соответствуют 7 и которая хочется добрый день спасибо за год я опоздал значительных и можешь состав купатов по поводу хендерсон вот в 5 версии он поддерживал сейчас он ну как бы если даже и работать то его не стоит продакшен применять скажите пожалуйста рекомендации henderson это хорошей идеи классный чем можно заменить сейчас вот версии 57 если вы используя production ну то есть в версии 5 версии 57 ну ладно стандартный ответ это просто использовать memcache если есть если есть возможность вот то есть ну понятно что интерфейс джейсон да тоже сейчас как предлагается как идея на самом деле еще интересно в чем именно смысл используя хандлер соки да то есть хандлер сокета люди многие стали использовать почему потому что мой squinny скитался к большому число одновременных connect of data вот на самом деле стал ментов было появился с хандлер socket произошло много много вещей в мае вскоре оптимизировали особенно в 57 это во первых во вторых у нас есть сейчас такие инструменты как фред пул например в бирка на сервере даже в майской энтерпрайз которая нам позволяет например работать с десятью тысяч одновременных открытых коннектов да если нам не нужно коллекции диска напиться есть такие решения как прокси сиквел даты которые делают мультиплексе на прокси на стороне что еще была улучшена очень важно это то что скорость коннекта майское сети сейчас тоже очень быстро да то есть вот ребята из фейсбука не делали бенчмарки там получается где-то 70000 connect disco night каждую секунду до то есть право мой рог заговорить а не про май рокса все про mais quel дата себя потому что facebook ну опять-таки по крайней мере для некоторых приложений потому что facebook большой они не и не использует пирсе станка на это не просто закончился взял данные или записал диска начался да вот такое может сказать странный неэффективный подход но реально он достаточно хорошо работает потому что конектится диска акт самой сколь поддерживает там 70 тысяч раз в секунду да там и или больше то есть если у вас там ух ты какой ужас там 500 коннекторы сканер то в секунду то это вот именно 500 нужно чего делать-то 500 до копейки должно работать отлично если не работает значит нужно что не подкрутить например но не надо про руки пожалуйста не надо вот нужно backlog поднять число скорее вот есть опция claw по умолчанию она не помню там 50 что licet или достаточно маленькой вот если поднять до пары пары сотен то оно куда лучше работать большим числом коннекта секунду спасибо что петр спасибо за доклад я тут нет агрессии у меня такой вопрос вот вот продолжение на самом деле небольшое предыдущему вот вот если мы рассмотрим как бы вот у нас есть какое-то приложение до которое как современном 1 микро сервисы там там docker и сама поднимается но при этом у нас есть одна база данных которая на железке там стоит на какой-то большой мощный тому все вот классический вариант то когда поднимаются вот эти как бы инстансы с приложением они соответственно свой пул соединений отправляют вот мы в моих масику вот вот когда был hangar socket это проблемам как бы было более менее решено потому что каждый там как-то прикручивал канлер socket было более менее удобно тоже не супер вот то сейчас получается как на каждый на каждую незакрытую как бы транзакцию нужно оставлять новый connection потому что когда мы в конечном посылаем сиквел запрос пока мы флаша полностью оттуда не сделаем то новым и туда послать уже не можем то есть как бы connection повисает в таком промежуточном состоянии когда мы как бы ну вот если у нас приложение таким образом устроены что пользователь например через какой-нибудь давай всё кит подключается к базе данных что-то ищет и результат ему как бы кусочками возвращается вот в той самой транзакция с точки зрения как бы приложения у нас тут с пиджи нэйшн никаких проблем нет все как бы замечательно но у нас очень быстро умирает маски потому что но много открытых соединений а у него там по дефолту стоит 100 по моему может не только может вам по дефолту тысячу поставить но если столько памяти но если 10 тысяч клиентов придет сделать один поисковый запрос и как бы мы выберем для него три страницы остальные как бы скажем ладно потом придем то даже выборка этих трех страниц пока будет туда передаваться к нему по этому самому соки то займет огромное количество времени у нас было сдано просто будет как бы простаивать не в силах принять новые connection а вот новый протокол как-то это позволяет помочь с этим ну так я выращу понятие это точно что делать они в данном случае хандлер сок этом hanged он позволяет как бы ни даже не мультиплексирование соединения в одно а уменьшить какое время ожидания можно следующую помощь следующий запрос туда за послать в тот же суд очень прочной станины и асинхронные запросы и то есть в протокол и там там просто раньше было архитектурная проблем по крайней мере oracle так отвечал что когда мы делаем connection нам нужно выделить working буфер сам все вот это вот эта проблема она у всего есть да там включаю угу хандлер socket то есть это и нее как бы не никуда не убежишь просто у него выделяется это этих вещей значительно меньше потому что потому что он делает но меньше работы но наса но на самом деле смотри что мой скуёт если делать простейший select the там выделяется память о очень мало и можно так зажать еще меньше где выделяется много памяти и то есть у нас есть и хейди сложный запрос например мы создаем временную таблицу потому в память о том что мы делаем грубой modellante нибудь там мега сортировки на что выделяется много памяти до сортировки без индекса вот а если этого не происходит от памяти тратятся достаточно достаточно мало в этом в этом плане ну тут вопрос них даже в памяти этот вопрос в сети то есть если я делаю запрос который за эффектную вернет мне четыре миллиарда записей но я исчез не хочу забирать сразу все четыре миллиарда я хочу открыть транзакцию забрать тысячу потом еще 1000 потом отчет тысячу и так далее так далее но ну понятно но дело в том то что такие вещи они тоже тоже решаются да то есть можем поговорить я могу объяснить акт как это сделать прошел они невольно да с точки зрения select of но понятно да что вы скорее всего посмотрели как то можно сделать там с лимитом до например но потом приходишь тому что например лимит там миллион , действие это всегда очень очень медленно да понятно таких вещей делать не нужно но есть подходы которые позволяют сделать то же самое вместо того что но без того чтобы выбирать вы пытаться выбрать весь миллион 1 одной транзакции почему так еще вопросы кончились так ну что раз запросы кончились а отлично еще раз напомню что у нас есть есть есть у кого какие то другие вопросы кто-то хочет взять мест несколько более узком кругу у нас будет метов 5 часов до там в комнате а и 1.3 но в принципе то есть программки спасибо еще раз"
}