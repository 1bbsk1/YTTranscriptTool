{
  "video_id": "v_3FiK7BXXA",
  "channel": "HighLoadChannel",
  "title": "Нагружать может каждый / Ксения Бирюкова (Платформа Сфера)",
  "views": 135,
  "duration": 2864,
  "published": "2024-10-29T02:58:20-07:00",
  "text": "Ксения Бирюкова пожалуйста под ваше Аплодисменты Да всем привет Очень приятно видеть так много людей на обучающей секции Гриш Верни мне кликер Да мы уже немножко познакомились Давайте потихоньку перейдём к тому О чём сегодня хотелось бы поговорить поделюсь своим опытом поделюсь немного чужим расскажу несколько кейсов из реальной жизни и собственно что с ними можно сделать как с ними можно бороться а на первом Проекте в качестве менеджера где я работала были попытки провести нагрузочное тестирование и тогда это всё казалось очень сложным очень трудоёмкий мы схватили целую гору проблем из генерации псевдо уникальных данных и с тестированием микросервисов в связке с с Legacy монолитом В общем очень-очень много всего интересного там собрали шишек косяков Ну и естественно ресурсов спалили намного больше чем изначально рассчитывали соответственно когда мы все эти боли собрали весь этот путь прошли встал вопрос А как же это сделать менее болезненным Чуть более приятным начали смотреть на практике на чужие кейсы у кого собственно Что происходило и так или иначе обогатили свой опыт чужими историями хочется сегодня вам рассказать немного о том как зачем и почему добавим немножко теории и в принципе разберём как же с этим жить без такого количества проблем соответственно начнём как я говорила с нескольких реальных историй разберём кейсы на примере которых нам станет довольно быстро Понятно зачем проводить нагрузку и каких собственно болей и проблем она нам поможет избежать и первая классная Рия это как одна американская компания разработав своё по решила Вполне логично его нагрузить и провести нагрузочное тестирование соответственно проверить пропускную способность скорости ответов и так далее В принципе база А рассчитывали что будет одна запись копии что ответ будет занимать полторы секунды и это в принципе целиком и полностью удовлетворяет требованиям на чём все и расслабились но в реальности каждая копия мультиплит раз соответственно после запуска в проде объём превысило 50 млн все запросы стали утыкается сказать что при даже таком базовом тестировании на объём желательно выходить за рамки функциональных требований не функциональных требований определять предельно допустимые нагрузки вашей системы и обязательно всё-таки делать полную копию прода а не какой-то аналог потому что иначе вы вот эти все истории не увидите И не поймаете разберём ещё один кейс уже российский компания реализовала возможность бронирования парковочных мест у себя в офисе и заранее известно было что количество сотрудников не превышает несколько к ребята задумались Казалось бы Зачем нагрузка объёмов Нет не самая топовая история но ребята тестировщики не учли самый важный ключевой момент парковка в центре Москвы вызовет дикий ажиотаж тем более бесплатная соответственно с чем они столкнулись после запуска они легли в первый же вечер по одной простой причине бронь на следующий день открывалась в 6 вечера текущего всё все одновременно пытаются заходить кто-то с нескольких устройств кто-то на несколько мест всё это точно также упирается в плановый предел их допустимости и валится незамедлительно соответственно это у нас отличный пример того Зачем проверять двух-трёх тные пиковые нагрузки от чего он вас спасёт какого негатива поможет избежать пойдём дальше соответственно на десерт наверное все знают крупные разработчики игр уже собаку съели на нагрузочной тестировании но и они Не защищены от проблем соответственно сразу после продовольча простили отпустили но к сожалению в следующем релизе произошло ровно тоже самое При следующем проекте опять целая гора негатива опять гора пользователей обращений и Весь вот этот вот кипиш в разработки Несмотря на то что ребята знают прекрасно свои объёмы Несмотря на то что они прекрасно осведомлены какой будет Хай когда они запустят Сколько человек попробует зайти сразу сколько будет каких пользователей сессий даже они не смогли избежать Казалось бы вполне стандартной проверки которую можно было спасти Да нагрузочному тестировании на входе но стоит отдать им должное в двадцать третьем году они всё это пофиксили запуск прошёл гладко но опять же чудесный кейс стресс-тестирования никогда и ни для кого не бывает лишним лучше три раза проверить чем два раза упасть и все эти истории медленно но верно подводят нас к сценариям нагрузочного тестирования к тому как зачем и почему в целом классических подходов всего два базовый А на ранних этапах лучше готовить данные основанные на аналитике и на тех кейсах которые ваша система предполагает покрывать Но это собственно работает только до прода там на этапе при прода может быть чуть раньше и соответственно второй подход - это когда сценарии пишутся уже на основе реальных данных на основе реальной статистики на какие-то данные У вас есть и вы можете собственно их использовать но как всегда в идеале взять оба то есть на первых этапах используем аналитику и то что мы хотели бы увидеть дальше С развитием системы через продолжительное время лучше это всё насыщать новыми и новыми кейсами новыми нестандартными историями никогда не знаем где и что может выстрелить А главное Какие последуют за этим проблемы Давайте теперь вернёмся немножко буквально на один шаг назад но после этого мы сможем сделать сразу два вперёд поговорим о том как непосредственно выглядит процесс нагрузочного тестирования кто должен в нём участвовать потому что здесь тоже всё неоднозначно У всех разные цели у всех разная структура компании и какого-то естественно единственно верного подхода нет только какие-то практики опять же у ны компаний которые так или иначе уже с этим сталкивались которые с этим работают уже давно сформировались свои подходы свои практики свои внутренние процессы и есть новички которые поступают совершенно иначе у них часто есть нестандартные решения либо какие-то крутые идеи по оптимизации того что все уже давно привыкли делать как раньше ну попробуем рассмотреть оба подхода взять лучше от обоих и в принципе разберёмся кто на чём экономит и кто где молодец начнём с того кто же всё-таки должен быть задействован хорошая практика опять же это создавать рабочую группу она может быть совершенно разной зависит от компании но база - это всё-таки разработка Q devops бизнес необходимый минимум уже давно тестирование тем более нагрузочная перестала быть только зоной ответственности КУА инженеров в этом уже давно участ практически все слои компании и это надо учитывать и не забывать в принципе обязанность нагрузочного тестировщика подготовить вообще всё что нам нужно тестовых пользователей тестовых данных профилей и так далее провести собственно испытания и передать Это дальше там при разборе багов нам могут помогать девопс и разработчики принимать решение о том насколько Для нас это допустимо будет только бизнес вся эта цепочка соответственно раскручивается давайте а перейдём непосредственно к самому процессу НТ в нём как мы уже проговорили достаточно много участников каждый отвечает за свой блок Но сегодня хотелось бы сфокусироваться только на как раз куске работе Q потому что в ней на мой взгляд за последнее время больше изменений чем в остальных и очевидно что при стандартном и классическом подходе А К нагрузочному тестированию именно здесь большая часть работ большая часть соответственно проблем узких мест и всего остального Как мы можем видеть как раз нагрузочные тестировщики готовят все данные готовят пользователей делают профили нагрузки проводят испытания разбирают результаты анализируют все метрики данные отчёты и так далее и всё это соответственно отнимает чудовищное количество сил и времени и ровно на этих этапах новички в этом деле стаю какие-то способы сэкономить свои силы время ресурсы и вообще попытаться как-то это ВС облегчить Потому что так Конечно выглядит очень тяжело и сложно и на рынке сейчас есть как инструменты для проведения нагрузочного тестирования так и компании которые готовы забрать большую часть этих проблем соответственно и всю вашу головную боль на себя но прежде чем идти этой очень удобной проторенной дорожкой Давайте вс-таки посмотрим что мы можем своими силами сделать потому что сейчас даже бесплатные инструменты уже а догнали большой пул платных и предоставляют большое количество функционала для решения практически любой из этих задач собственно Давайте посмотрим а здесь представлены самые основные и если вернуться чуть-чуть к нашей схеме то там с подготовкой тестовых данных Нам очень удачно может помочь синтетическая генерация при работе с персональными данными если таковые имеются в вашей системе нам скорее всего потребуются инструменты с сертифицированными алгоритмами об безлич без этого К сожалению будет тяжело можно создавать шаблоны А тестовых скриптов и их переиспользовать не только в одной команде и в в одной нагрузке но и между разными то есть по всей компании Это поможет вам и на этапе поддержки Это поможет избежать дублирования кода и всей вот этой вот сложной ри сопровождение быстрее и проще формировать сами скрипты могут помочь билдеры которые уже есть у многих А в принципе если использовать запись трафика то можно вообще практически обойтись без написания ещё и приблизить все ваши кейсы к реальным продом сценариям то есть покрыть как можно больше а проблема проведения НТ тоже самая такая классическая история на ограниченных мощностях помогают а а специализированные календари А с разбором результатов и в принципе их качеством Очень неплохо справляется зонтичная система мониторинга которая позволяет обе системы мониторить сразу вернёмся не всё-таки к нашей схеме посмотрим на все эти шаги через призму того функционала который есть на рынке и есть у разных инструментов и собственно Где мы можем заменить стандартную человеческую работу которая занимает кучу силы времени на как раз некоторые фича лайфхаки Да которые помогут как минимум это облегчить А некоторые убрать совсем чисто теоретически можно генерировать пользователей банальным запросом к базе и это будет работать но При таком подходе вы соответственно можете получить некорректные кейсы может быть неполнота данных не консистентность данных специфические какие-то случаи и так далее А если пытаться перс данные по частям не консистентность практически гарантирована собственно Настоятельно Не рекомендую копировать с прода Я думаю все уже слышали проблемы с законом О перс данных настигнут очень быстро поэтому обезличенных выше проблем если мы перейм к подготовке Профи нагрузки это ВМ история в нагрузочной по сути профили определяют именно то Какую нагрузку Какого вида вы будете подавать на свою систему поэтому здесь Также важно понимать что вы хотите получить в итоге чтобы их всё-таки правильно формировать а чаще всего при проведении нагрузки используют либо линейный либо ступенчатый рост и дальше уже какие-то вариации на тему какие-то спецы что-то что Хотелось бы посмотреть но базово они на этих двух базируются есть альтернативный вариант который как раз никак не получится использовать самостоятельно без каких-то инструментов Это проверка реальных запросов на чтение запись к системе и Вот её уже лучше смотреть не через виртуальных пользователей А через настройку профиля интенсивностью То есть это две принципиально разные вещи сами по себе они не очень Ува Т либо один подход либо другой но опять же смотреть лучше и то и то в зависимости от того что Тестируем и возвращаясь опять же к сценариям уже непосредственно которые мы будем гонять по настроенным профилям их Не обязательно писать вручную очень много времени можно сэкономить именно в этом месте как при разработке так и при поддержке здесь вот прямо шаблоны билдеры перехват Раи Используйте обязательно не надо таскать эти скрипты из раза в раз почти в любом продукте и проекте найдётся авторизация нет смысла каждый раз писать её с нуля об этом сегодня уже тоже в этой секции рассказывали Тоже самое касается и скриптов проверки Они будут базироваться плюс-минус на одинаковых принципах могут переиспользовать в командах в продуктах не надо изобретать велосипед каждый раз соответственно билдеры могут создать Скелет скрипта на который мы можем потом нарастить необходимую логику либо вообще от всего этого избавиться сразу брать перехват трафика преобразовывать действия пользователя в сценарий и засовывать это всё в систему по сути избегая посредника но здесь тоже не без подводных камней как и всегда нужно быть очень осторожным с этим подходом Потому что когда Человек проходит пользовательский путь он так или иначе может столкнуться и с ошибкой и со случайными повторами действий и вот это вот всё всё в финальный скрипт попадать не должно поэтому прежде чем использовать такой метод лучше всё-таки писать сценарий по нему чётко проходить и отслеживать чтобы у вас потом не было лишнего фона вот от этих запросов от каких-то системных ошибок от лишних загрузок документов файлов картинок и всего остального но в целом История рабочая она также позволяет ещё и а Q чуть-чуть снизить порог входа если там есть новички если есть джуны если ещё сами не привыкли они к написанию скриптов или у вас новый инструмент А где они в принципе пишутся на другом языке то вот такие фишки помогут чуть быстрее разобраться и как раз снизить порог проблем с погружением со входом в проект во всё анализу результатов мы дальше посвятим отдельный слайд чуть ближе к концу хочется Рассказать вам о НМ сильно подро и побольше но здесь хочется ещ добавить несколько небольших советов как можно уменьшить вообще затраты и что ещё можно оптимизировать в этом процессе соответственно наша любимая проблема с мощностями да И уж тем более с копие прода в принципе Никто не запрещает тестировать в неактивные часы Ну чаще всего это ночью вполне Никто не запрещает гонять нагрузку опять же у вас довольно мало И полноценно её провести нельзя для отслеживания динамики никто не мешает давать частичную нагрузку это в принципе тоже даст вам понимание о том в каком всё сейчас состоянии Также можно заниматься временным шариком ресурсов у вас может быть несколько проектов на все естественно железо не напасёшься в зависимости от релиза и графиков выстраиваем перекидываем железо здесь в принципе календарь тоже в помощь чудесно разруливает эти проблемы как с железом для самой системы так и с ресурсами генераторов Аналогично можно запланировать свои релизы выставить это всё в календарь и избежать вот этой потрясающей драки А нам нужнее или А нам завтра А вам вчера а давайте перейдём к следующему этапу нашего процесса Мне кажется все уже его про него слышали не один раз поэтому очень сильно И долго останавливаться напи ошибках не буду но всё-таки хочется предостеречь от каких-то самых таких базовых которые обычно все схватывают в первые попытки собственно первая строчка рейтинга Наши Любимые основы ресурса но уже немножко в другом ключе это уже по результатам нагрузки если их не хватает в одной или нескольких частях системы может заканчиваться память может не хватать процессорной про это нужно не забывать и вс-таки правильно это интерпретировать на втором месте будут идти настройки по умолчанию их Тоже периодически упускают из вида но всё-таки не стоит потому что можно столкнуться с лимитом на количество соединения опять же неправильно это всё трактовать и до конца расковырять будет тяжелее собственно наш бронзовый призёр - это тайм-ауты вот если хоть раз видели нару тестирования отчёты соответственно на графике среднего времени ответа можно увидеть как достигается предел в 30 секунд и чаще всего Это говорит о том что у вас где-то вы забыли про таймаут к этому собственно приводят долгие запросы в базе и дальше уже стоит пойти посмотреть а корректно ли они в принципе настроены Ну и последнее Это скорее не ошибка а тоже из разряда рекомендаций но нужно очень внимательно смотреть на мониторинг на то как Он настроен на то как он работает потому что если там есть какие-то косяки то некорректно настроенный мониторинг в общем будет искажать данные практически 100% а соответственно на него отдельно нужно посмотреть проверить и мы сейчас ещё чуть-чуть поговорим о том как где разумеется это далеко не всё с чем вы столкнётся но на практике даже если заранее устранить этот минимум уже будет намного легче не словить какие-то типовые проблемы со всеми остальными разобраться будет полегче давайте как раз перейдём к последние истории из разряда мониторинга что там можно увидеть очень хочется подсветить что очень часто всё-таки вспоминают про типовые ошибки с предыдущего слайда но бывает и такое что возникают не только на тестируемой системе Но и на генераторах нужно помнить о том что это точно такая же система это тоже железо оно тоже может давать сбой и ошибаться и здесь два самых популярных кейса опять же самое частое это всё те же ресурсы но это уже ресурсы генератора Вы можете хотеть подать нагрузку там в 5.000 пользователей Когда у вас там на НМ ресурсов только на три и если он об этом не сообщит все будут сидеть в полной уверенности что всё хорошо что всё пройдёт отработает Хотя по итогу вы не добьётесь нужных показателей и вторая История - это если некорректно реализовывается сценарий в случае ошибки генератора он может просто встать и опять же ничего вам об этом не сообщить у вас сценарий не дойдёт вся эта там суточная недельная нагрузка будет в принципе бесполезно решить эти проблемы можно банальным мониторингом генератора его настройкой не только на систему Но и на эти железки соответственно дальше опять же их нужно будет смотреть в связке и учитывать что ошибки могут быть и в том и в другом месте нельзя смотреть только на один кусочек пазла теперь когда мы обсудили что мы ищем где мы это ищем Давайте Немного поговорим о том как это можно сделать и о том как нам может в этом процессе помочь разработка опять же чуть-чуть разгрузить наших несчастных КУА которые уже закопали в этих отчётах с нескольких систем ещё и с генераторов мы им добавили Ну в принципе Здесь тоже можно всё решить ничего чрезвычайно страшного в этом процессе Нет давайте начнём с архитектуры очень простого микросервисной приложения и пойдём уже в сторону расширения но здесь как бы всё вполне очевидно Да у нас есть Центральный запрос с ним взаимодействует несколько сервисов он их обрабатывает перенаправляет и они чудесным образом общаются в этом случае определить источник проблем будет относительно Просто если у вас какие-то ошибки сыпятся во всех запросах велика вероятность того что виноват в этом именно Центральный сервис как общая точка Если же вы видите ошибки в каких-то отдельных запросах или в отдельных частях соответственно рассматривать стоит начинать оттуда не надо лезть сразу в центральный Посмотрите сначала что может быть не так с этими пограничными сервисами скорее всего опять же узкое место обнаружится на них если соседи не страдают значит Центральный будет ни при чём а теперь всё-таки усложни эту историю рассмотрим поинтереснее схему и Давайте добавим моду чтобы это совсем было не скучно про которую кто-то когда-то реализовал в определённый момент начинает требовать переработки и здесь причин может быть очень много Давайте возьмём стандартный кейс Когда у нас изменился формат входных данных и старый сервис Нам просто не подходит вообще очень наверное самая любимая история всех банковских крупных систем Когда у них leg ядро которое никто не хочет трогать которое никто не будет менять и ниг потому что там просто колоссальные риски потери всё на него завязано начинают появляться внешние обёртки адаптеры конвертеры и прочая прелесть собственно по количеству таких обёрток как по кольцам дерева годичным можно посмотреть сколько команд над этим уже работало сколько здесь разработки полегло пока пытались оптимизировать эту историю ещ и архитектуру не поломать в этом случае нам соответственно нам потребуются дополнительные действия для локализации и разбора а для таких историй Я бы советовала всё-таки использовать ксервис и изолированное нагрузочное тестирование чтобы Чуть более точно локализовать проблему Так как у нас уже не общий сервис А их много и связаны они могут быть хаотично соответственно пару слов о том что он может из себя представлять берём за основу сервис работу которого мы хотим симулировать где мы хотим найти проблему вычищаем из него всю бизнес логику хардкод запрос ответ и чудесным образом вставляем его в нашу схему пытаемся разобраться на Что же он у нас эффекте Да здесь тоже могут быть узкие места И тонкие моменты могут потребоваться вариативности в ответах могут потребоваться всякие изощрен маю в базу писать но я думаю думаю что ваши команды разработки вполне способны это побороть но здесь как раз начинается самое интересное и конкретно в нашем примере с Legacy ксервис может применяться в трёх местах и Первое - это когда мы хотим проверить именно свою обёртку то что мы уже доработали и пока не понимаем где проблема изолировал один из Новых модули мы можем оценить как он влияет на итоговую проблему что он нам покажет в принципе он ли виноват Ну я думаю вы и сами догадываюсь что это не самая частая история чаще проблема всё-таки возникает на старых модулях которые куда как тяжелее изолировать но и это возможно собственно заменяем участок Legacy здесь может быть посложнее поэтому здесь две схемы Используйте ту которая вам больше подходит архитектурно либо проще реализовывается опять же разработка в помощь ребят в этом явно разбираются они смогут подобрать оптимальный вариант привлекайте их Обязательно для исследования узких мест их помощь их компетенции в их системах же они просто незаменимы здесь Также можно сэкономить просто невероятное количество времени на своём опыте могу сказать У нас был кейс когда КУА ковыряла и пытались это ВС раскопать пока не увидел it Элит сказал Ребята давайте кнм здесь мо и они её раскопали Ну я не знаю раза в три наверное быстрее чем изначально сидели есть ещё один вариант он опять же не без проблем но вполне рабочий его стоит применять если опять же там не так много времени или вы Чуть более точно понимаете где может быть проблема здесь точечное логирование собственно опять же в помощь вместо создания полноценных моковский эту работу можно выделить конкретные запросы и логировать уже их время опять же можно выделить целый запрос можно выделить их части Единственное о чём не стоит забывать это о том что расширенное логирование соответственно точно также аффектион бы он не давал вам никакого эффекта на нагрузку на итоговый результат не выдавал никаких лишних системных или других ошибок как я и обещала Давайте вернёмся немножко к анализу результатов И самое главное о чём нельзя забывать при проведении нагрузки и при обработке результатов это то что результат определяется целью это самый главный наверно постулат понимать Какие требования вы предъявляете к себе и к системе что конкретно вы хотите проверить какую вы ставите цель от этого будет зависеть весь дальнейший процесс вся работа команды собственно если всё-таки собираете проектную группу и её тоже А в чём здесь история если неправильно определить цели вы будете искать не те ошибки не те узкие места потому что например определённое количе будет допустимо при тестировании на отказ но ровно тоже самое количество ошибок ровно в тех же самых местах будет вообще недопустимо при тестировании в рамках заявленной производительности поэтому не забывайте о том что Вы хотите проверить там и ищем для упрощения поиска узких мест удобно анализировать результаты в связке это то о ЧМ мы уже чуть раньше говорили нужно смотреть только на систему Но и на генераторы эта связка даст намного больше прозрачности намного больше ответов вы 100% ничего не забудете не будете искать ошибку в системах когда она в генераторах и наоборот также нельзя забывать о том что одна первая ошибка может запустить целую цепочку невалидный запросов соответственно лучше использовать метод Домино рассматриваем первое упавшее чаще всего ошибка находится там если не уже можно раскручивать этот клубок искать дальше глубже но вс-таки не надо кидаться на всю эту типу ошибок и проблем сразу слона лучше есть по частям Ну и на Большом промежутке времени динамике лучше всё-таки смотреть и сравнивать отчёты о тестирования это всё равно даст вам информацию о текущем и прошлом положении опять же у меня был потрясающий кейс когда два наруч стия соседних релизов подряд показали нам деградацию в 3% и все сказали Вау классно всё хорошо но стоило поднять отчёт там годовой полугодовой давности обнаружилось что мы на самом деле-то уже 20% деградации словили хотелось бы о таком всё-таки узнавать пораньше не ждите пока это всё окажется у вас прямо за спиной и собственно догонит не надо ждать этих проблем смотрите заранее динамика регулярность это в нагрузке в принципе наше всё Давайте чуть-чуть подведём итоги мы уже выяснили что хоть проведение нагрузки точного тестирования и требует подготовки и планирования но всё реально главное учитывать цели тестирования имеющиеся у вас ресурсы как железные так и человеческие и там и там при дефиците всё решаемо так и особенности вашей системы чего вы от неё хотите использование имеющихся На текущий момент инструментов методов методик упрощает очень сильно работу упрощает этот Казалось бы монструозный процесс Всё реально во всём можно разобраться ещё раз скажу на всякий случае но не забывайте о том что проблемы бывают в разных местах используем взгляд пошире и по сторонам смотрим не только на систему Но и на Всё вокруг неё и анализу сравнени динамика опять же дадут нам максимальную полезную картину мы увидим и Как меняется наша система и какие проблемы появляются какие пропадают чем пренебрегать этим делать раз в год и разгребать потом просто огромную пачку проблем лучше делать это чуть чаще но порционно разобраться будет намного проще собственно на этом я похо заканчиваю страшно как раньше а поэтому Ребят давайте глаза боятся руки делают давайте сделаем наши продукты лучше с каждым релизом всё уже у нас в руках Всем спасибо Так это я свещ Да спасибо большое отличный доклад и сейчас у нас по традиции сессия вопросов и ответов Напоминаю что за лучший вопрос Мы дарим подарок от нашего партнёра Газпром Нефть но Я наверное немножко перехвачу инициативу Хоть я и не участвую в этом рейтинге у меня такой вопрос Ты вот сейчас рассказывала про лучшие практики про то как строить систему нагрузочного тестирования а какие-то готовые решения которые возможно вы используете как вот может имена название пароли явки да да смотри на самом деле инструментов сейчас очень много как платных так и бесплатных мы перебрали почти все но в итоге пришли к тому что там в перфоманс центре Нам очень понравился календарь и их возможность управлять железом там командными ресурсами у gmra очень классный перехват трафика там у кше у них просто потрясающий Билдер для начинающих Мы через него всех своих джунов стажёров прогоняем но по итогу мы если честно пришли к тому что взяли всю эту пачку красивых историй и собрали в своё приложение Вот и на нём сейчас работаем собственно и уже не только мы то есть у вас у вас свой продукт вот сфера нагрузочное тестирование он так и называется Да да отлично собс постарались собрать вот да все вот эти ключевые фишки которые понравились понял У меня у меня знакомые делали тоже свой сервис нагрузочного тестировании назвали его шали вот здесь более классическая история О'кей У кого есть вопросы ребята поднима ру за претен това очень хочется украсть так по первый ряд прямо напротив спикера Я думаю можем отсюда начать Да здравствуйте Спасибо за доклад у меня такой вопрос вот если мы говорим про екоммерц системы или екоммерц подобные системы Какой правильный паттерн для тестирования с участием платёжных систем особенно когда мощный там пост платёжный процессинг типа начисление всяких баллов отправки писем и вот этого всего я правильно понял что это МОК сервер да какой-то Или разделение системы на какие-то части их тестирования по отдельности да да В основном да то есть если у вас не получается локализовать проблемное место Когда Вы смотрите на неё всю целиком но в принципе когда мы говорим о платёжных системах кажется что тут можно сразу начинать с МОК сервисов То есть даже не пытаться её сразу всю объять а сначала вот эти вот тонкие места про которые вы сразу знаете что они могут быть проблемными их уже отдельно проработать но здесь опять же я очень сильно советую начать с разработчиков потому что они могут знать даже то что мы ещё не знаем да ребята это разрабатывали туру делали они могут подсказать что вот здесь надавите посильнее Может просе и здесь да либо моки либо логирование но наверное в ecommerce я замок то есть здесь всё-таки точечное логирование запросов или их кусков Это не то что мы хотим увидеть нам нужно посмотреть выстоит ли выстоит ли этот модуль но опять же решений там тоже много вы их в конечном счёте можете масштабировать распределить и всё равно выстоит спасибо да вот справа вопрос А я пока Напоминаю что если у вас нет вопросов вы всё равно можете нам очень сильно помочь проголосовавших даёт как раз история про масштаб но дело в том что нужно тестировать бизнес критичные части системы То есть если ваш продукт приносит деньги начинаем с той части которая их зарабатывает Вот это грузить обязательно неважно она у вас может быть очень маленькой но очень дорогостоящей тогда её надо грузить вот опять же возьмём пример когда мало пользователей но денег они дают много всё проверяем однозначно то есть дело не в возрасте системы и не в её размере а в том сколько денег она приносит компании и какие риски мы решим А убрав как минимум большую часть узких мест то же самое если кто-то хотел могу сразу рассказать и про стадию развития не надо там начинать на этапе первого же сервиса и грузить но и не надо делать это на при проде то есть всегда золотая середина когда понимаете что у вас более-менее появляется обвязка там или уже разработан белый путь Хотя которые будут проходить пользователи вот здесь самое время подключать Q можно начинать на самом деле даже с мануальщика и автотестер с тем чтобы написать эти кейсы то есть потом используя Вот любой из лайфхаков просто загнать эти кейсы в любое приложение вы и без кушни там какое-то время справитесь но готовиться к этому процессу Нужно чуть пораньше потому что когда выяснится что у вас прот через не знаю даже месяц а ещ ни тест-кейсов нет ни профилей нет ничего и там человека тоже нет но скорее всего Когда вы через неделю получите результат ещё два будете их разбирать как я понял короткий ответ был бы за деньги Да если сервис приносит деньги надо делать нагрузочное тестирование и тут очень гармонично вопрос из онлайна к нам по поводу того кто должен писать требования к нагрузочному тестированию зат вопрос так как ваши аналитики формируют требования нагруженном тестированию как они понимают что нагружать что нет какие показатели будут обоснованы А какие не целесообразны Да действительно очень близкая история опять же у нас аналитики а разные то есть есть бизнес-аналитики есть системные аналитики есть Прямо разработка архитекторы вот все эти люди в этих процессах участвуют потому что разработчики и системники смотрят на узкие технические места бизнес прописывает как у нас пройдёт пользователей где их будет теоретически плано больше всего либо забирают статистику там с прода и смотрят где у нас их реально больше всего Но на самом деле для текущего проекта это у меня не самая актуальная история но мы тоже словили много интересных кейсов пытаясь провести нагрузочное тестирование продукта который его собственно делает понятно да интересный момент если данные с прода есть Окей если данных с прода нет то то аналитики в связке с разработкой обязательно разработка более тонкие места по тех части под Свечи то есть базы очереди и так далее а аналитики бизнесов подсвечивают какой путь будет У пользователя он в дальнейшем ложится в как раз сценарий нагрузки и в его профиль всё хорошо спасибо вопрос первый ряд вот на Первом ряде два вопроса пожалуйста Добрый день Спасибо ещ раз за доклад а ели нет аналитика у вас бы ситуация когда нет аналитика у меня это самая частая ситуация у меня первый проект наверное на котором есть аналитики О отлично А как как вы живёте без аналитиков мы просто прекрасно тестировщики разработчики Ребята с руками и головой Нет это здорово но в таком случае у вас Меньше времени на разработку скриптов на формирование пользователей профилей Влияет ли это как-то либо на качество либо на время проведения нагрузочного тестирования смотри Просто этот процесс тогда надо начинать раньше то есть если его размазать по времени он будет менее болезненным а чаще всего тестировщики есть Очень редко когда есть выделенные нагружая обычно практика всё-таки э сервис Да и они приходят вас грузят и обратно уходят но ничего не мешает тем же мануальщика автоматизатором до их прихода накидать какую-то базу хотя бы не обязательно много много сразу Никто не сможет объять несколько типовых сценариев уже выдав их нагрузки будет легче если нет нагружая же берём все эти типовые сценарии загоняем в ближайшее нравятся вам приложение и пробуем сами без аналитиков жить можно Вы когда разрабатываете систему вы знаете как она будет работать в крайнем случае я не один раз подрабатывала аналитиком на своих проектах если продукту интересно Чтобы он жил и не падал он сядет и напишет 10-15 типовых кейсов чтобы выдать их тестером или даже там отдать разработки попросить ребят запустите Это не критикал я бы ещё наверно добавил что наверное должность не определяет результат наверное всё-таки список ролей которые могут быть на разных должностях могут кто-то Может взять роль человека который будет за это ответствен как бы вот хорошо спасибо У нас ещё вопрос Спасибо за доклад У меня вопрос по поводу нагрузки на проди Вот вы говорите Вопрос такой даже если это какая-то нагрузка там в неактивные часы Это довольно большой объём мусорных данных которые потом в базе появляются С ними надо что-то делать какие-то гарбич коллекторы запускать и более того там вычленять тех кто всё-таки решил там пойти и что-нибудь заказать этой ночью Есть ли какие-то инструменты для того чтобы ну не руками это делать там не храми какими-то оща сам туп на та же практика что у автоматизаторов может скрипт сам за собой почищу повыше порог входа То есть это должен быть такой прошаренный нагружать который это хотя бы ну раз-два сделал то есть чтобы он не на вашем проде тренировался что-то зачищать в базах потому что ну все видели да Drop Database прод всё всем весело за ночь поднимаем ещё и всех псов начинаем поднимать бэкапы то есть вот прод - это вариант если прям совсем нет ресурсов но это соответственно такой очень тонкий лёд здесь вс-таки без нагрузочного тестировщика как ребята говорят лучше не экспериментировать Спасибо вопрос прямо рядом с тобой Здравствуйте вопрос насколько корректно Ну я первый раз с этим сталкиваюсь поэтому вопрос возможно глупый насколько корректно зава все систе интегри то есть ВС дела На заглушка может быть это правильный путь как раз так и нужно мне выглядит немножко Дикова Мы же Тестируем наверно не только продукт хочется сказать а интеграцию целиком весь Фло по созданию там но при этом понимаем что наверное тут зона ответственности за результаты вмазывается на все системы наверное правильнее делать моки вот прокомментируй смотри можно делать моки на все но не на все одновременно То есть если у вас такая ситуация я бы вс-таки рекомендовала делать это либо кусками либо вообще единично то есть вы проводите несколько нагрузочных испытаний там Сначала вы мокаев связку потом вторую а первая уже у вас живая потом третья когда первые две живые И вот так проверяете потому что МОК сервисы не просто чтобы провести нагрузку чтобы локализовать проблему если вы замока ете Всё вокруг это вам точно так же не поможет как если у вас всё будет живое но Проблемы остались То есть это способ поиска узких мест каких-то проблем и поэтому лучше это всё-таки делать точечно и так искать а не просто обложить систему ваты и как бы порадоваться что ничего не упало появился новый вопрос прямо по центру зала Здравствуйте вот вопрос вот по анализу результата нагрузочного тестирования вот с чем можно жить в проде Ну там какие-то критерии с чем типа нельзя и ну м блокер и это решает как я понял команда уже разработки и it лидера какого-то и вот и там какие-то критерии там определённые в отчёте есть получается Слушай да но на самом деле это то что наверно мы можем обсудить немножко за кулисами потому что здесь опять же важно понимать какая система и что вы от неё хотите допуски есть практически у любой решение опять же разное если есть влияние на бизнес эффекта у тебя и решать может соответственно продукт если влияние идёт на тех часть то тут уже it Элит архитектор кто собственно в компании за это отвечает допуски есть всегда вопрос только в том чтобы эти люди при принятии решения были знакомы с рисками то есть они должны Прямо сказать что да мы поедем вы это фиксить к следующему релизу и тогда мы её уже ставим но я говорю Приходи давай пообщаемся Потому что зависит от системы что она у вас должна делать и Какой реакции вы от неё хотите чтобы сказать куда конкретно в отчёта хорошо бы посмотреть Ну либо у тебя опять же наверняка найдётся технарь который точно также может подсветить что там не знаю каждый десятый фейловые запрос это не ок а вот каждый тридцатый Ну с этим можно Ксения Спасибо и пришло время выбрать наверное лучший вопрос да который всего один Ну да всего один Знаешь на самом деле я бы ребятам за смелость прода отдала чисто Потому что те кто тестирует прод это заслуживают хорошо Да у нас есть лучший вопрос насколько я помню он идёт сюда ещё раз просьба оценивать доклад А мы тебе сейчас подарим подарок уже от конференции Спасибо тебе большое что выступил у нас рассказала про эту тему которая вот ну мне лично очень интересна Потому что я сейчас делаю нагрузочное тестирование Ну и под Ваши аплодисменты Ещё раз спасибо"
}