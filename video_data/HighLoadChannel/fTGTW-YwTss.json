{
  "video_id": "fTGTW-YwTss",
  "channel": "HighLoadChannel",
  "title": "From Ansible to SaltStack - как и зачем / Дмитрий Самохвалов (Альфа-Банк)",
  "views": 6519,
  "duration": 3041,
  "published": "2019-05-15T05:24:34-07:00",
  "text": "всем добрый день меня зовут самохвалов дмитрий я сегодня расскажу об одном нашем эксперименте как мы захотели и почему мы захотели поменять нашу устоявшуюся систему разгадке и разработки эта про структуры и чему мы научились с его этого вообще что такое альфа-банк альфа-банк это несколько приложений это интернет-банк для бизнеса и для физических лиц мобильный банк для бизнеса для юридических лиц множество сервисов для нее клиентов мы у себя используем микро сервисный подход везде где только можно сейчас куда отрегулирует микрофон и поэтому к же каждое наше приложение может состоять из нескольких десятков порой даже микро сервисов они все доставляются при помощи сидим можем релизиться по несколько раз в день и вообще в разработке именно продуктовых фич для клиентов у нас все достаточно хорошо чего не скажешь о разработке инфраструктуры не в последнюю очередь это происходит потому что мы используем исторически так сложилось для разработки и для диплома н sibl у него вообще много преимуществ начиная с того что он очень прост прямо предельно прост порог входа практически отсутствуют и не требует устья себя каких-то дополнительных агентов not все что вам нужна эта машина с доступом по ssh до нужного кластеров или до нужного серверов но со временем это все все его достоинства становится его и недостатками особенно когда мы stalker столкнулись с проблемами масштабируемости для каждого кластером есть свой набор скриптов в свой набор параметров которые ну нам тоже поддерживать постоянно и в инси балл из-за того что невозможно выстроить нормальный процесс поддержке актуальности versio нирования скриптов все скрипты нашей раскатки превратились в какую-то неконтролируемую свалку где может быть например для в в репозитории для одного кластера перемешаны и старые и новые конфигурации старые новые роли и как все это разруливать нам было непонятно а из за того что в инси был из коробки нет ни разделения прав не аутентификации не вообще каких-либо ролей мы не знаем что у нас происходит на целевых машинах кто что разрабатывает кто что тепло it и вообще как это все разруливать какие мы рассматривали альтернативы есть конечно и чиф и паппет стек storm нового первых да у них конечно есть мастер своих компонентов но во первых большинство из них не используют яму у них есть какой-то свой кастомный dsl и это автоматически повышает порог входа и нам вообще не хотелось уходить от я мало потому что и разработчики и поддержка все привыкли к малым и не хочется от него уходить наш выбор пал на salt что в нем показалось интересным во первых суд из коробки реализуют пул модель enfeeble может реализовать в себе изначально только push когда мы с управляющей машины отправляем какую-то конфигурации на сервера полу модуль наоборот я немножко потом расскажу еще можно ли сделать полу модель вин sibl но у султана идет из коробки также есть rest api благодаря которому можно управлять состоянием на машинах делать это удаленно и можно даже сделать сервис по аналогии сэнсей бал tower только свой собственный но и те вещи которые которых нам vensi был так не хватало авторизация через active directory разделения прав все это в салате тоже есть в разработке инфраструктурой в описании скриптов инфраструктуры применяются два в основного подхода это декларативный описание того что мы хотим получить в какой из состоянии мы хотим перевести систему и императивные то есть описание того как мы хотим это получить какие шаги конкретно мы хотим сделать сайт в себе позволяет сочетать оба подхода и для нас это тоже ценным верхней уровневая архитектуру salto выглядит следующим образом на целевых машинах на машинах которых мы хотя который мы хотим управлять ставится агент salto который называется миньонам и есть одна центральная машина на которой стоит сталк мастер которая непосредственно раздается необходимое состояние необходимой конфигурации каждый миньон подключается к мастеру по дефолту по порту 4505 это так называемый publish порт и подписывается на него то есть он периодически опрашивает порт 4505 и смотрит не появились ли какие-то новые задачи от мастера если они появились миньон запускают у себя процесс их выполнения а их результат отправляет на порт 4506 который вызывается request сервер порт по нему мастер может смотреть результаты выполнения задач на миомах и в зависимости от этого тоже что-то делать основные типы данных в салти достаточно похожи на инси был мастер имеет данные так называемые пилары в которых описываются параметры для раскатки состояние на миньонах это не самая ближайшая аналогия венсен это wars мини в свою очередь создает список информации статичные о хостел которая называется грейс и в свою очередь отдает их мастеру то есть мастер всегда знает какое сейчас состояние на целевой машине ну и плюс там есть информация конечно об операционной системе хост конечно же пор taipan версия ос и многое другое изначальном когда мы все это задумывали мы хотели сделать своего рода battle salt против инси-блок чтобы выбрать наилучшего и на нем остановиться постепенно с накоплением опыта взаимодействия со ртом мы поняли что их можно подружить то есть можно разделить зоны ответственности с алтае зона ответственности арся был и они будут замечательно работать используя преимущества того и другого напомню как работает с и был у нас есть некая управляющая машинам это может быть просто очень компьютер с доступом по ssh до целевых серверов инси был подключается целевым сервером создает временные файлы на питоне используя стандартную библиотеку питона которая есть на машине и что-либо на не делать при его выполняют модули которая описана в play but in us all the все совершенно по-другому во первых нет целевой нет управляющий машины конечно мы можем подключиться к мастеру там тоже по ssh и выполнить команду стоит тёплой которая запустит процесс обновления состояния на миньонах но вообще миньоны сами подключаются к мастеру и опрашивают его о том в какое состояние для них сейчас должно быть актуальным если резюмировать ключевая особенность эльсе blanc то выглядит примерно так у него нет агентов в качестве источников информации выступает управляющая машина скрипты описываются в так называемых play буках данные которые переменные для машин или там например для групп хостов хранятся в инвентарь и файлах и в качестве основного протокола он использует из сашу устал то вся настройка осуществляется агентами которые забирают нужно и нужное состояние сервера мастером вместо переменных есть пилар файла и центральный файл который непосредственно осуществляет в котором непосредственно описывается для каждых групп серверов нужные состояния к нужные вернее переменные которые специфично для того или иного хо стал он называется топ осталось скрипты вместо называются stay to me они похожи на роли рельсы было и соединение миньона с мастером осуществляется не по ssh а по своему зашифрованному протоколу поверх тисе пи все это осуществляется через и рынке в чем главный плюс агентов ну во первых в том что у нас есть пул модель нам уже в данном случае мы перекладываем работу по поддержанию актуального состояния и сохранению рабочего окружения на агентов мы всегда имеем актуальную информацию о хостел нам не нужно запускать сетап ой как например в сабле чтобы получить какую-то информацию о целевые машине ну и все это хорошо расширяется минус выше порог входа сложнее разрабатывать и дольше сам процесс разворачивания то есть помимо того что нам нужно как-то разворачивать структуры нам еще нужно рут сами агенты всю систему salt masters отменил как я уже сказал главное преимущество пул модели в том что у нас всегда актуальная информация о целевой машине рабочее окружение всегда рабочие и всегда понятно кто и что делает почему для нас 3 пункта очень важен мы в разработке инфраструктуры придерживаемся своего рода демократия то есть есть разработчик которые например запилил какую-то интересную фичу для обрабатывающего серверов и есть администратор который сейчас может делать какой-то важный апдейт и есть поддержка который вдруг прямо сейчас нужно закатить бабка fix в случае с ебалом они не знают друг о друге и в какой-то момент могут друг друга поломать собственно что и происходит зачастую в случае salton они не общаются с сервером напрямую они все необходимые задачу запускаются от мастера salt мастер знает какие сейчас процесса какие джаббы выполняются на том или ином миньо не и может во первых самых рулить во вторых самыми рулить во вторых может любой из этих трех человек посмотреть что сейчас происходит на какой машине таким образом сохраняется и демократия и своего рода авторитаризм можно ли пул модель реализовать wine сабли есть утилита они был пул которая но во первых она требует установки клиентам на управляемую машину что собственно нивелирует одно из главных достоинств раньше было отсутствие клиентов во-вторых из-за всех машин необходим доступ до репозиториям за которым будет смотреть инси был пул и не всегда это на самом деле возможным есть утилита интер даже сервис целый in seoul tower но он платный и нам не совсем понятно какая у него лицензия что она позволяет делать мы еще пробовали раньше было в x но он тоже не очень зашел и вообще постепенному пришли к выводу что не стоит делать эссенции было то чему не является потому что со временем если мы начнем писать какие-то свои велосипеды возможно для инси было мы просто напишем какую-то урезанную версию салтов как я уже сказал одно из достоинств полу модели это расширяемость расширяемость обеспечивается за счет модули которые очень легко разрабатывать самим за счет растопив и за счет того что в нем есть аутентификация в 3 сейшн аудит путь к салату был вообще не прост у нас были проблемы с запуском в докере проблема с авторизацией и когда существующие скрипты sensible переводили на сорт оказалось что многие паттерна инси было в салате вообще не применимы либо применимы с большими ограничениями начну с проблем с докером изначально мы хотели сделать как правильно и как красиво то есть сервис salt мастера salto пим разделить по разным докер контейнером но оказалось что это не так просто во первых salto пим ищет пит файлы и описи файлы мастером и обязательно должен зарисовывать айпишник мастером мы примонтировали ран ран директорию золото мастера на хост мара шарили с контейнером sale to pee думали что все заработает но нет оказалось что это не работающий путь скорее всего проблема заключалась в том что sale to piss контейнер не мог правильно зарисовывать dns мастера но разбираться времени не было поэтому просто поселили их в одном контейнере не самый правильный путь как с точки зрения философии докера так с практической точки зрения потому что иногда мы ловили такую богун что sale топить не мог записать событие в лоб и ронял весь контейнер так я уже как я уже сказал салат из коробки предоставляет авторизацию и разделение прав делается это через встроенный модуль external aus у него есть еще один модуль который так и называется ldap и можно от как здесь показано как например тестовому юзеру дать на всех машинах право на выполнение команды тест pink но к этому прийти удалось тоже не сразу во первых выяснилось что модули и ldap сильно не совершенен и не позволяет авторизацию через несколько доменов плохо работает с кириллицей и очень чувствителен к структуре active directory вот как это выглядит первые две строчки скопированы из документации к салату если ваша один настроена похожим образом то никаких проблем скорее всего у вас не возникнет у нас оказалось что все по-другому во первых часть каталогов у нас исторически написаны кириллицей то есть внутри нашего общего домена часть каталогов латинице часть кириллицы и оказалось что сок почему ты их не понимает во вторых вот базовый домен можно указать только один мы пробовали указать несколько базовых доменов зал всегда понимал только один самый последний поэтому сотрудникам которые зарегистрированы не в главном доме не пришлось срезать технические учетки в центральном домене ну эту проблему вроде бы мы победили и наконец оказалось что если ваш айди пользователя немножко нестандартной то есть например к одним вот у нас некоторым пользователям к username и еще добавлялось электронная почта такое расширение south тоже не понимает поэтому для некоторых аккаунтов пришлось перенастраивать отель собственном какие рельсы был паттерн им нам не подошли ну во-первых этой группы оказалось что в салате групп нет а для нас это была достаточно ценная штука которая использовалась в скриптах но практически повсеместно я не могу припомнить ни одного play буков котором бы не использовались группы и люди которые в дальнейшем с этими скриптами стали работать они сказали что группы им очень нужны но пришлось их имитировать таким немножко костыль дам способом мы создавали собственные группы то есть как я уже сказала у мастера всегда есть актуальна информация о хостах и по какому-либо признаку мы могли просто мы просто проходились по хостам и добавляли их в ту или иную группу дальше пенсия была используют некий свой синтаксический сахар в частности вместо и fav у него используется в а вместо циклов увязает сорта делает совсем не так они используют джинджер шаблона причем достаточно жестко и если уже n символов есть куча собственных фильтров хелперов дополнительных функций для джинджа the us all the к сожалению все намного беднее условия классические джинджер и в циклы стандартные джинджа фары и собственных фильтров меньше и они не всегда работают адекватном что еще очень важно и ценно в салки я написал здесь скорость но возможно это не самое главное преимущество вообще в тепло и в разработке инфраструктуры насколько важна скорость вопрос дискуссионный но тем ни менее salt раскатывает быстрее чем с обработка ошибок обновление инфраструктурных элементов и профайлы тоже предоставляют большой интерес по сравнению со силу так что с обработки ошибок в ensemble по умолчанию реализована концепция fail hard то есть если какой-то из play букв в каком-то из плей буков тоска упала с ошибкой то весь playback заканчивается и в консоли видим кучу ошибок если больше создает такую временный файл play books at рай в котором можно возобновить выполнение задачи с того места где все упало в сути это намного более гибкому по умолчанию он реализует файл fest то есть даже если какой-то из to suck упал выполнения все равно продолжается до конца на какие-то конкретные критичные стоит и можно настроить fail hard либо для какого-то конкретного хоста для остальных например можно оставить файл fast если это какие-то не очень важные или ним принципиальные вещи например некоторые серверы можно будет потом перезапустить руками еще одна интересная особенность salto в том что он предоставляет возможности для условного выполнения некоторых команд поясню что это значит допустим выполнен в каком-то из state of нам нужно организовать своего рода ветвления то есть выполнить какую-то команду и в результате ее выполнения принять решение что выполнять или наоборот не выполнять дальше в седле это делается немножко костыль на то есть вот здесь показана что мы выполняем какую-то команду и и результаты мы записываем в переменную и в зависимости от того что в этой переменной мы делаем еще что то например фильм какую-то is to suck суд предоставляет так называемый state full аргумент то есть в модуле синди ран мы можем указать прямо стоит утру и в зависимости от результатов выполнения этой команды то есть здесь например показано что мы создаем такую эту папку и если мы указали стоит утру то дальнейшее команды выполняться только если предыдущие что-то вернула то есть что-то сделала например если папка создалась то мы можем например в эту папку что-то еще записать какова последовательность запуска каждого стоит а во первых он проверяет те элементы которые помечены как рик uighar то есть если например у вас запускается какой-то докер-образ вы можете первым сначала проверить что нужный образ есть в системе дальше все тоски запускаются строго по очереди и есть очень интересные встроенные модуль который называется watch то есть на некоторые тоски можно поставить директиву watch и она будет следить за другой простой пример мы можем повесить на изменение файла с конфигом watch который будет ли стартовать сервис или вообще всю машину есть обратная директива которая называется watch когда какой-то сервис подписывается в сам подписывает другие тоски на изменение внутри себя как выглядит обновление инфраструктурного элемента в толпе и вася блин у ansi было как я уже говорил отдельные role play буки и информацию о системе мы по умолчанию никакой не получает и если нам например нужно накатывать какие-то апдейтом выглядит это примерно вот так мы запускаем в зависимости от профайла на одном прав на одной группе хостов одну роль на другой другу и не всегда это удобно зачастую нужно руками еще раз перезапускать какие-то из профайлов ну либо прописывать в них еще дополнительные какие-то костыли чтобы все это было консистентной устал то все можно накатывать по очереди либо выборочно используя и нет слс что это значит допустим у нас есть группы хостов которые нужно накатить одну версию либо накатить апдейт либо вообще удалить все состояние целиком в файле нет слс мы можем прописать гип кулык которая все это будет позволять делать без каких-либо дополнительных условий и без каких-либо костылей по умолчанию например как у нас например сделано по-умолчанию ставятся лейкерс это последняя версия либо в зависимости от пилар или grains сот сам поставит нужную версию еще одна очень интересная фича салтан это open что вообще она себя представляет по большому счету это веб обертка над командой сот который выполняется на мастере есть три основных на этапе модулям это в приложении построены поверх какого-то из веб-серверов черепа и торнадо либо виси джай у него достаточно мы у себя используем рис черепа и потому что он во первых самый простой из всех во вторых мы обходимся вообще самой минимальной конфигурации вот буквально из трех строчек что мы делаем с помощью sale topic ну во-первых авторизацию пользователей во вторых получение информации о состоянии миньонов не заходя на машину с мастером и не проверяем командой соус что происходит а удаленным ну и опять же запуск командно миньонах тоже используя веб-сервис который общается ну либо postman который общается с all the pitt схему работы очень просто сначала мы получаем токен авторизации отправляю запрос на урала генов дальше это токена кладется в заголовке и с этим токи нам выполняются любые операции на миллионах например запуск команды или как я уже сказал получение информации о состоянии миньонов у токина есть определенное время действия она регулируется а если токен проток на что мы получим от мастерса ответ с кодом 401 значит нам нужно повторить все снова снова за лаки не со получить токен и дальше выполнять команды модулем это основная рабочая сила как солдата концы плах инси был тоже позволяет писать кастомные модули и в отличие от салтана самом деле на любом языке нужно только найти подходящий бойлер plate и в принципе любой язык позволяет писать модуль единственная проблема здесь что нужны пакеты если вы запускаете оси был модуль там не со своего компьютера на котором уже все установлено например с какой-то машины нужно позаботиться о том чтобы все необходимые пакеты там были salt многие пакеты уже имеет в себе из коробки и в принципе большинство нужных нам пакетов уже в нем было ну а если каких-то пакетов нет их можно установить в любом случае по сравнению сэнсей был им тут есть некоторые преимущества но есть недостаток то что модули salto пишутся на питоне на других языках я не находил как это сделать как кастомные модули работают складываются в папку modules с нижним подчёркиванием впереди и вызываются при каждом вызове стоит тёплой модуль имеет доступ cappellaro ugreen су и к объекту salt то есть он позволяет точно также общаться с мастером посредством кодом и есть разделение на приватной публичной функциям как это выглядит уже в коде функция virtual она вообще самое главное в модуля она решает запускать данный модуль или не запускать либо запускать при каких-то условиях но вот здесь я показал еще как можно получить какие-то данные из спины релизы или из grains в принципе все достаточно тривиально приватной функции внутри модуля начинаются с нижнего подчёркиванием и они будут вызвано только внутри модуля вызвать их снаружи то есть руками дернуть модули и приватную функцию не получится остальные функции которые не начинают с нижнее подчеркивание они публичные они внутри себя могут вызывать как и другие модули либо команду south вот здесь через нее вызывается модуля семьи ран почему в итоге мы не стали вообще все наши скрипты полностью переводить на сайт ну во первых для какие для сервисов которые не являются корневыми то есть для приложений продуктовых продуктовых это значит тех которые тех которые разрабатывают какую-то фичу клиентскую то есть приложение которые непосредственно видят клиент зачастую нужна какая-то кастомной а конфигурация в которую нет смысла класть в общей репозитории иначе а не превращаться в такую же помойку здесь гораздо удобнее хранить playdough внутри проекта и запускать его при разработке при начале разработки либо если нужно накатить на какую-то тестовую среду проект здесь обозначить то справиться и в процессе себя сидим когда приложение доставляется на бой тоже нет смысла внедрять salt агент во первых это будет тяжелее с той точки зрения что со всех дженкинс лайвов которые у нас используются нужно будет делать доступа до salt мастера нужно будет ставить на них агент salta и что самое интересное здесь мы не получим вообще никакого профита по сравнению с еблом но и классическая проблема курицы и яйца чем катать собственно сам сот сам себя он не раз котят так чтобы на непосредственно рабочее окружение которое раскатывается на голом сервере на голом железе чтобы там был предустановленное salt агентом мы не смогли договориться с техподдержкой и возможно это и правильно какой итог сорт идеально подошел нам для раскатки базовой инфраструктуры и для разработки сервисов которые в большей части являются статичных для себя из идеи проектов продуктовых все-таки лучше с и был таким образом salt убить у нас с его целиком не смог но если вы хотите попробовать золоту себя есть отличный стартер которые предоставляют сами разработчики стал там он называется сок bootstrap у меня все спасибо за доклад очень полезный вопрос такой касается и sold on sibl как вы храните сенситив данный плагин и пароли к базам данным пользователи авторизационные ключи выскальзывал просто модуль да а в случае с инси-блок есть and about us all the собственно есть тоже интеграция с volta ну то есть шифруете дав шифруете в git спасибо спасибо за так вот мне бы хотелось узнать насчет отказоустойчивости мастера какие может быть какие там с ним были проблемы с этим не как это решается проблема как я уже говорила было с тем что у нас за мастер и api живет в одном контейнере и бывали случаи когда api ронял мастер но в таком случае просто контейнер перри запускался проблем связанных с нагрузкой вообще не наблюдалось ни разу я специально смотрел результаты нагрузочных тестов по моему 35 тысяч одновременных коннектов миньонами мастер выдерживал на 1 у нас 35000 даже близко нет почему вы не используете сальто сам что саша не было надобности то есть это прямая замена нс то есть это абсолютно та же станцевал только сайт ну нижние не думали в эту сторону спасибо за доклад такой вопрос вот у нас компании стис от и инси-блок для ньюман пример сейчас но внедряем вся и практики в том плане что мы например применяем молекулу для тестирования наших ролей но кто не знает такое таухид на питоне который запускает трогаемся было в контейнере в виртуальной машине которую он сам провяжу нет вот и в итоге он там может показать там видом патент ность там автотесты так далее вот если что-то такое же для салата из коробки нет мы у себя используемый protest там тоже поднимается виртуальная машина в ней гоняются тесты из коробки не находил и еще от простой вопрос и сможете вернуться к слайду где что-то проедем по тем козлом все до int и потребности да вот здесь вот аргумент кореец я может быть не совсем понял насколько я знаю тоже вот такой же аргумент есть у модулей команд решил лично тоже создает там файлик и на основе него уже понятно там отработана команда или нет здесь на самом деле более широкий пример в том плане что вообще люба любая команда любой ее вывод может быть использовано в дальнейшем решение запускать какую-то команду или нет и здесь вся вот эта логика salton делается сама в ensemble это скажем более многословным нежели в салти вот речь была об этом первую очередь драться спасибо за так вот такой вопрос с небольшое у вас там были примеры проводят их понимаешь это просто идет речь в джинсе про watch вот vans и будет стоять лицом на дефо и которые так делать прям он тоже удобства простом вот этот watch в sollte он более функционален или такой же он более удобен он позволяет в одном стоят файле организовать сразу всего ч в случае эльсе было там нужно это делать более тоже опять таки многословно здесь в одном стоит файле описывается всего чему сразу и сразу видно что чего зависит здравствуйте спасибо за доклад я от вас такой вопрос в ансамбле нюансы баланса было south используют жену и в ансамбле поскольку особо запускается с одного места и может обработать сразу кучу хвостов он себе содержит всю базу фактов и может соответственно достать от с 1 х 100 что-то потом сделать на другом hostess висим пнул соответствии с этим что то ну грубо говоря сам способность пластик роликов например дождаться пока один отработает и так далее солнце вот в моих экспериментах получалось так что во-первых шаблоны заполняется при пуше на агента соответственно сми чтобы между разными has to me обменяться какой-то информацией и и нужно прогнать через grain ой это во-первых работала почему-то у меня не очень стабильно во вторых этому долго и соответственно собрать какой-то сложный власти они просто сконфигурировать один ход солтам полудню ну неудобно там эти runner в общем очень сложен он тёплом это значительно проще вот у вас есть такая проблема или нет спасибо спасибо хороший вопрос у нас такой проблемы нет но именно в своих экспериментах я тоже тут сталкивался я не могу вспомнить что конкретно для этого дел по моему что то связанное с реактором кажется через событие мастера можно смотреть что как как что и как происходит там когда отрабатывает стоит на миньонах по моему так и это решал но у нас в принципе такой проблемы нет у вас нет очень сложной логики по обновлению спасибо за доклад большое я хотел знать как вы собираете фидбэк с миньонов что где-то как-то тест но стоит какой-то не выполнил сюда есть какой-то там сбор там не знаю логов на мастере ли вы какой-то реторту используете но вот этот момент можно по подробнее да есть логина мастере обычно если какие-то задачи упали это да отражается в логах ну что мы делаем смотрим логи в принципе и все на большинстве на большинстве миньонов у нас на самом деле fail hard и если что-то произошло не так то все выполнение заканчивается именем просто возвращается к своему исходному состоянию без изменений спасибо за доклад я тут смотрите если вы добавляете какой-то новый сервис или проводите обновления на большом количестве серверов например серверов вас две сотни они все в одной сети она одета в дата-центре просто ли какой-то новый пакет не знаю файл бит чтобы файлы как-то влоги отправлять и видите что внутренний трафик подскочил до терабайта и положил все потому как они одновременно за счет методики пула начинают это отрабатывать правильно или где-то у то есть мы не одни обновляем одновременно все под-сеть мы делим на группы и у нас нет такой проблемы с трафиком то есть мы порционно все это обновляем они сразу все кластер одновременно потому что тут высок риск от того что мы что-то поломаем тем у кого сейчас что-то критично и происходит поэтому мы обновляем все вот такого stir up at кластера по очереди это можно сделать хорошо спасибо тогда вопрос на какие группы делятся сервера то есть обычно это группы по обязанности там не знаю лично вы морда и так далее какие еще могут быть группы для того чтобы выкатывает на них по очереди основная группа это значит как у вас вообще делится у нас есть сервера на которых крутятся непосредственно приложения есть сервера на которых крутится логе сервисы по сбор налогов и еще какие-то вспомогательные например мониторинг вот в первую очередь мы обновляем то что менее критичным а вот например логирование потом то что более критично это соответственно сервер олло приложение здравствуйте спасибо за доклад не подскажете кокос происходит версии минировании стоит их тепло и на мастер и и если разделение допустим на s3 джин контуры продакшне и контуры salto сейчас покажу как versio не рование как раз был на тему слайд вот как видите в одном сайте собраны необходимые sls файла с версиями вот стейджинг там про от сервера им прочее это указывается в файле tube sls в пещерах и там можно любыми регуляр коми указывать группы серверов например по назначению то есть в топ sls разбиты по группам какие машины относятся к чему и какие стропила не запускать я немножко не про этому и abra версии state of именно рот у вас был там стоит вида накате такой-то пакетик там я не знаю старта не сервис сделай один шаблон потом он изменился добавился еще один шаблонным пример или что-то поменялось шаблоне вот это все версии versio не руется карта ну то есть там висели это живет или как сами стыд само описание следов но я кара выезжает ну то есть как она выезжает как это можно ли это откатить назад все если все стало плохо примерка там не знаю human factor какая-то ошибка или может быть здесь есть какие-то ос линкоры настроены на commit в репозитории если это в репозитории все хранится как вот происходит линкоров пока не настроена и то есть в планах прикрутить sonar туда единственная пока не нашел линкоров для sls файлов возможно здесь подойдет линдер для джинджа пока этот вопрос такой на стадии исследования насчет versio нирования правильно понял вопрос что если допустим вот условно в файле 343 л.с. мы поменяли шаблон выпускаем или мы новую версию при этом и перри накатываем ли новую версию в этом вопрос заключается ну у вас есть стоит если его описание какое-то не знаю стоит называется мое большое приложение дату в нем есть описание каких-то шагов которые нужно выполнить у вас приложение разлад разрослось там появилось несколько новых шаблонов в стоите в этом это новая версия стоит а мы ее как-то добавляете там разработчик или администратор devops неважно добавляет это описание в стоит и дальше как он копирую этот файлик на сок мастер он комитет это в репозиторий и там собирается какой-то пакетик с формулами или синкай в репозиторий на souls то есть как это обрезаю не понял вопрос да это хранится в репозитории и потом на машину с мастером там git клон либо git pull забирают вот это репозитории создай так это хранится значит это хранится на машине с мастером и при запуске стоит тёплой делается git pull из репозитория состоит она если все плохо и стоит не валиден но если все плохо то просто возврат к предыдущему sata и состояния ну то есть как то в ручном варианте это сейчас реализовано да ну пока вручную вы про тестирование говорили форму что у вас есть какой-то инструмент или это не про тестирование стоит инфо тест это про тестирование скорее всего сервиса то есть если например нам нужно протестировать раскатку ну допустим и джинкс а вот то через форт с то поднимается джинс в виртуальной машине здесь это больше относится наверно к тестированию какого-то элемента нежели к тестированию непосредственно state of но даже только я знаю что устал то по моему есть какие-то свои инструменты для unit testing in the state of но я пока имеющие не пользовался хорошо спасибо добрый день спасибо большое за доклад а такой вопрос а вот проблему курицы и со а сами миньоны вы как часто вообще обновляете то есть мастер фирдаус all the всегда вот там не он как часто обновляются и как вы их там условно говоря поддерживать в актуальном состоянии именно salt миньон как сервис долина как сервис да вообще установили один раз и больше с тех пор не трогали но там же периодическим довольно часто релизе салютом появляются новые там фишечки какие-то штуки которые бывает старых версиях там буквально еще там полтора года назад там не работала ли какие-то вещи или пофиксили какие-то баги там и все равно приходится как с этим жить то есть то есть поставили накатили там машину и больше не трогаете получается так что пока до когда у нас будет необходимость обновить именно версию салат миньона но переката им инси-блок пока вот пока не делали такого окей спасибо тогда можно еще один небольшой вопрос смотрите вы же там яд может немножко прослушал да вот твои то что там вывоз и 100 и инси балда в хозяйстве и вы там без три пальца много инфраструктурных вещей да там солтам в частности вы же там его интегрировать в какой-нибудь там ну там сумму pipeline себя сиди да грубо говоря и самом деле в самые сами вызов например тепло и вы там руками только делать или там автоматически это через это и происходит и каким образом выдув вызов там прям улучшила там как угодно как это происходит обычно если в автоматическом варианте понятными носок мастера в автоматическом варианте через salto пим вообще по поводу у лассе сиди я сидел нас первую очередь используется как я уже сказал для клиентских приложений то есть для тех серых зав которые реализуют функциональность там интернет-банка например то есть то что видит клиент инфраструктурные вещи пока через вся из cydia только но скажем так это только стадии становления pipeline для инфраструктурных вещей сейчас экспериментируем с голову сиди в этом плане и там есть ну скажем так желание внедрить в голосе dessole топи и автоматизировать этот процесс пока все делаем руками хорошо спасибо большое"
}