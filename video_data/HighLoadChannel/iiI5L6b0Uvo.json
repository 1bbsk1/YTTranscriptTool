{
  "video_id": "iiI5L6b0Uvo",
  "channel": "HighLoadChannel",
  "title": "Переход от Rest API к GraphQL на примере реальных проектов / Антон Морев (Wormsoft)",
  "views": 11927,
  "duration": 2674,
  "published": "2020-04-27T13:28:53-07:00",
  "text": "здравствуйте меня зовут антон морев я основатель и директор компании вором софт компания занимается разработкой разного перечень найти продуктов и также занимается маркете ко мне с дизайном и полным сопровождением продукта от момента начала до момента конца надеемся конец никогда не наступает но прежде чем начать проект сопровождать его нужно разработать и при разработке очень часто а практически всегда разработки делятся на два лагеря bag and front end что они себя представляют есть клиент клиент не конечный пользователь продукты а клиент это клиентское приложение не важно будет и мобильное приложение веб-приложение или desktop и важно это клиентское приложение есть server server занимается обработкой бизнес-логики обработки данных что важно сервер сам ходит во все остальные источники данных например базу данных в кэш другие сервисы сервер червей и так далее а с клиентом общается посредством api и первый способ api которые мы для себя выбрали и the rest api rest api это простые get put пост почти лид запросы за конкретной сущности конкретной ситуации и первое что нам нужно решить при начале разработки api эта документация кстати вопрос зале есть люди которые занимаются или как-то находится около разработки api спасибо а поднимите руки те кто пишет документация к своему а это автоматически тоже супер хорошо мы прошли через многие способы формирования документации первый способ ных которым мы совсем недолго остановились это отсутствие документации данный способ несет с собой много плюсов таких как скорость разработки скорость интеграции но дали тогда срочной перспективе это сплошной минус поддерживать невозможно постепенно ситуация прогрессирует и мы переходим к следующему способу способ называется мудрец то есть есть один человек который так или иначе участвовал разработке этого api или он сам единственный человек который он описал и все разработчики к нему как на поклон входит служит скажи где тут то или иное поле пожалуйста как это запустить и так далее мудреца это свое в свое время начинает надоедать мудрецу и мы переходим к следующему способу это хранение документации файлах типа word excel господи я видел такую документацию то кошмар или google док способ уже хороший уже лучше есть какая-то база знай не где люди хранят куда люди могут посмотреть где люди могут посмотреть что там лежит но способ плох тем что джерри например джейсон ответ файлы word выглядит примерно следующим образом это очень неудобно и следующий способ на которой мы в конечном счете остановились это swagger slogger документация удобный интерактивный интерфейс который позволяет посмотреть как как именно можно сделать запрос к серверу как забу как сервер на это может ответить и при этом можно интерактивно потыкать понажимать и посмотреть но у этого способа есть несколько особенностей его может явиться способ можем пользоваться двумя руд в двух направлениях вот магическим и ручном ручной это мы руками прописываем какие могут быть поля где могут быть запросы виде джейсон или я могу файла но также есть способ автоматической документации на основании кода но он все равно я бы назвал его скорее автоматическим а пол автоматическом необходимо сделать какие то действия указать какое поле должно возвращаться или указать определенные блоки документации на основании которых уже строится такой красивый интерфейс но хорошо в принципе вопрос документации на rest api мы решили но как быть со следующим вопросом это разграничение данных и тут я перехожу к первому примеру на котором мы успешно пережили отрезка опека городке эль интернет магазин в интернет-магазине все крутится вокруг одной сущности так или иначе то товар товар является основой любого просто магазины интернет магазина поэтому товар нужно запрашивать так или иначе в разных местах в разной форме и какой как вам может у какой может быть кейс допустим мы делаем простой простой интернет магазин в котором ей в котором есть только список товаров у этого списка там у этого товара укажет товара есть поля название и цена постепенно магазин развивается появляется еще бренда и описания потом неожиданно мы разрабатываем карточку товара в которой появляется связанные товары фотографии и это отображение того сколько именно этого товара лежит в корзине проходит еще время появляются отзывы и вариации товаров и что примечательно в такую подобную модель таскать с собой во все места это крайне неудобно с особенно учитывая то что справа расположены поля получение которых требует дополнительные подключения к сторонней таблицы в базе данных электронному сервису неважно в итоге мы лишний раз перегружаем сервер для решения этой проблемы мы подумали насчет светских способ первый способ это делать свою модель под каждую ситуацию то есть мы делаем модель под карточку товара в которой есть полет необходимой для карточки мы делаем модель под связанные продукты в рамках карточке товара которых с нужными полями и делаем отдельно модель для списка товаров которых есть фотографии и рейтинг мы этот способ сразу же отбросили потому что поддерживать наполнение каждой модели в каждой ситуации при добавлении при добавлении какого-то поле это нам показалось сущим адом мы от него отказались мы в итоге при разработке решения no rest мы остановились на варианте иерархической модели она включает себя все возможные состояния все возможно все возможно информацию о товаре который может быть необходимо в разных местах вы сайта но чтобы не таскать каждый раз лишний даны как я сказал ранее мы использовали простой язык запросов что он из себя представляет есть клиент есть сервер и клиентское приложение при запросе от сервер с говорит какие именно поля ему нужны на что сервер отдает только эти поля способ в принципе финальной на котором мы остановились при разработке no rest но он имеет в себе некоторой особенность допустим у нас простая карточка товара в которой есть название описание цена хорошо мы сделаем простой короткие запросы двигаемся дальше появляется связанной продукты вы ними у них есть то же название и описание а потом карточка принципе меняется по наряду с общей информации название описания рейтинг цена появляется еще отзывы появляются фотографии проходит время появляется связанные продукты появляются еще информация о скидках и так может развиваться до бесконечности в конечном итоге запросы получается какой-то бесконечной длины разобраться в этом не представляется возможным или возможным но очень тяжело эта проблема также несет собой еще вы решение вопроса количество запросов например у нас есть карточка товара в которых есть header и footer информация карточки отзывы и комментарии связанные товары и для получения сейд информации мы либо городъ им такой тяжелый запрос как я показал ранее либо делом несколько запросов и лишний раз нагружаем сервер эта проблема видимо была не нова и видимо с этой проблемой свое время столкнулся в facebook вы пытаясь понять как нам балансировать между количеством запросов и между большим количеством запросам и удобной работы или пихать все в один запрос и неудобно работ тигров фейсбук придумал граф кель который решает все три проблемой которую я говорил ранее вопросов такой это документации возможность выбирать только те поля которые нам нужны и при этом еще возможность собирать всю информацию в один запрос и получить все сразу на клиент и уже работ с этим на клиенте как бы подобные ситуации выглядела asus используем графский эльф в нашем интернет-магазине мы бы описали схему товара у товара на первом этапе допустим есть только три поля идентификатор названии и описании и также мы описываем способ получения этого товара то есть мой на вход передаем идентификатор по которым мы его получаем и в принципе указан как мы можем его получать обратите внимание на поля тайтл и дискрипшн при запросе мы указываем и их тоже мы также указан то как мы получаем этот товар указываем идентификатор и в ответ серверном он дает же сон только с этими полями причем неважно какие то мог бы могут быть ещё полировать и сущностью надо строго то что мы у него запросили например интернет магазин разрастается и добавляется возможность показывать вариации товаров мы добавляем новые поле вариант и в этом верен с указываешь там должен быть массив из элементов типа продукт вариант соответственно при запросе информации с вариантами мы указываем новые новое поле рядом стоять под названием вариант указанного поля которые нам нужны у каждого варианта товаров на почту на что в ответ сервер народ отдает джейсон в котором будет поле верен системе полями каждого варианта который мы у него запросили а сам тип product вариант может выглядеть примерно следующим образом у него могут быть поля название описание название цена цена про скидки картинка но поскольку мы его не запрашивать северном его и не отдает вопрос количества запросов на каждой странице решается ульяна следующим образом мы можем построить запрос так что мы сразу получаем информацию для федора информации для хутора информацию для конкретно текущей страницы понятно не всегда есть необходимый запихать все в один запрос но в принципе такая возможность позволяет оптимизировать страницы того же интернет-магазина очень сильно поскольку мы можем один запрос ли легко за кэшировать и быстро его отдать а вопрос документации решается очень легко мы его уже решили описать данную схему мы получаем такую красивую интерактивную документацию мы можем нажать на каждое поле провалиться внутрь увидеть какие есть у него поля провалиться еще глубже и понять что нас в поле тает ftp протокол n является обычной строкой и несет собой название вариации и таким образом процесс изменился следующим образом если бы кант разработчику ранее было ну был он для того чтобы добавить нужное поле было необходимо пообщаться с frontend разработчикам или пообщаться с самим собой в первую очередь решить какой именно and point он добавит или какой in point он расширит расширить этот and point расширить модель которого он отдает и только после этого обновить документацию и отдать и отдать фонтан разработчику в работу случае с графики елим он рассуждает не не тур нет ни от запросов от сущности он понимает что нужно в поле товар добавить какое-то поле он просто добавляет это поле реализует твои кого получения и отдает вам дан разработчику front-end разработчик то же время раньше было необходимо также общаться с бэк-энд разработчикам выяснять каком именно and panty можно получить новую информацию которое ему нужно после этого реализовать логику работы с этим контентом и только после этого уже работать с этим полем то есть у нас появляется получается довольно много времени раньше ходила на разговоры они в принципе полезны но когда их можно убрать здорово что их можно убрать после тренировки гель front-end разработчик также рассуждает именно от сущности он знает тоже в товаре добавилось какое-то поле он идет запрос которому нужно делать об этом в эту и в этом запросе в так товары добавляет нужное поле и после этого сразу же его использует и дальше я хотел бы перейти к следующему проекту на которые мы успешно внедрили граф кель это проект с микро сервисами представляет он из себя сервис построенное на основании на основе криптовалюты и выглядит он примерно следующим образом архитектурно есть интерфейс есть ядро системы этапе сервер есть криптовалютный беру с которыми нам надо интегрироваться и есть api кошелька который является ключевым звеном во всем во всем этом проекте архитектуры выглядит примерно следующим образом само приложение написано на php и едва вот есть некий api модуль который ходит напрямую уже в кайф к папе кошелька или в api и какой какой-либо бирже а потом проект начал разрастаться начали появляться новые новый функционал такой как функционал почтовых интеграции в интеграции с платежами integrate системы депозитов и еще поскольку была она необходима сторонний разработкой мы вынесли сервис авторизации в логику авторизации и аутентификации в отдельному и предоставили его разработчикам прошло время и мы решили почему бы прошу прощения контроллеры выглядели примерно следующим образом сами контроллере были максимально простыми максимальным маленькими и только лишь вызывали заранее заготовленный бизнес-логику и разумеется автоматически формировалась документации всго гири прошло время мы решили почему вы не попробуй сделать микро сервисы под некоторые задачи например по ада интеграцию с почты мы решили попробовать и вынести микро сервисного подсистема все обработку денежных операций мы написали отдельной модульной php интегрирование как некрасиво как часть приложения под каждую by папа-то работу с биржами мы написали отдельными карьеры с которому уже реализованы логу логику подключение каждой бирже и для чатами вы написали 1 просто сервиса но джесс успешно ты граммов проект но вот незадача стоял постоянно вопрос документации как документации между сервером метро и другими микро сервисами так и вопрос документация между интерфейсом и сервером ядра если вы просто коммент ации между серверными приложения мог отдать на откуп самым северным разработчикам то вопрос документации между интерфейсом и сервере ядра он лежал на мне и контролировал со мной в конечном итоге тем самым мудрецом стал я и этот момент мне в корне не устроил я решил попробовать применить простой способ упрощение своей жизни а именно переписать контроллеры нарисованы таким образом то логика простая который было у нас контроллер их она перекочевала в разгаре и как результат мы получили те самые плюсы которые вывод мы нам дает граф келли а именно это документирование вопрос возможностью один запрос запихнуть и возможность выбирать те поляк которые нам нужны и запросы поменялись следующим образом если раньше у нас был запрос get юзер payments лист то сейчас мы делаем один запрос бляшки ель которым также указываем юзер payments и лист только в случае листа мы еще указывать какие именно поля списка нам по поля в списке нам нужны но это еще не все у нас решилась одна интересная проблема которая перед нами стояла раньше главная страница делала 4 запрос для того чтобы отобразится надо было показать и пользователю его последние платежи и показать информацию о пользователе там фамилия имя и так далее и показать информацию текущего состояния системы и показать последние уведомления пользователя таким образом мы каждый раз сделали 4 запроса для получения одной странице а после внедрения граф кельма перешли к тому же у нас остался один запрос на всю страницу вот весь уровень юзер есть уровень payments инфосистемы notifications так далее и следующий проект следующий пример который я хотела бы рассмотреть сегодня в рамках свой доклада это то как мы оптимизировали свои проекты у нас одна из направлений услуг который мы занимаемся эта оптимизация и автоматизация бизнес-процессов клиента но было бы странно автоматизировать оптимизируй чужие процесс если не оптимизирован наш процесс и начать мы решили самого часто встречающиеся процесса нашей практике этой разработкой простых сайтов что в нашем случае представляет из себя сайт сайт состоит из трех элементов первый элемент это сайт это view приложение сервер стоит рендерингом который занимается тем что собирает данные сопи отображает их и как-то реализует простой бизнес-логику например отправка заявки или показать какой нибудь календарь есть api сервер который как раз и занимаются обработки всех этих сущностей обработки простой бизнес логики например принять заявку или папе или показать какую-нибудь информацию для то правление календаря и рассылает оповещение администратором или клиента о том что пришла к это новая заявка и есть от админ панель админ-панель занимается тем что управляет как раз таки этими сущностями добавляет их удаляет читает обновляет и управлять какой-то простой бизнес логики если это ей запрос от клиента разрабатывая сайт за сайтом лондон эндосомы заметили то что есть вещи которые у нас раз за разом повторяется а именно мы одинаково каждый раз описан логику работа с примитивными сущностями и этот вопрос было принято решение оптимизировать и помог нам в этом графике ель таким образом процесс выглядит сейчас сейчас backend разработчик для того чтобы добавить новый сущность описывают ее виде джейсон полей он описывать какие именно поля вне есть такие если с другими сущностями на основании этого автоматически формируется графики ель схема по которой front-end разработчик может делать запрос автоматически реализуется bag and magick а обработки каждый каждый сущностью и хранение в банке тебе мы используем он годивы потому что на схему лес и позволяет решить такую вот такую проблему и автоматически генерится интерфейс админ панели в котором менеджер уже может управлять этими сущностями и выглядит примерно следующим образом сверху указано описание типа поле название мы сейчас говорим о станции метро мы видим то что у поле название станции метро есть тип input текст есть ключ по которому будущем его использовать слева мы видим только к это превратить во что это превратится в интерфейсе а справа видна то как это будет кто как будет использоваться этот поле на стороне фронт-энд разработки то есть фонтан разработчик просто строить запросу уже получает нужную ему информацию и в качестве реального примера я показал вам карточку офиса нашего клиента сверху офиса есть фотография чуть ниже название офиса адрес станции метро короткое описание и цена а справа показан запрос который автоматически можно который автоматически формирует сервер для того чтобы фронтон запрос схему для которого фактически формирует сервера клея front-end разработчик может его сам написать в интерактивном режиме и сделать получить нужную ему информацию таким образом bag and разработчик ранее был вынужден сформировать кучу интерфейса где описывать кучу логике обработки примитивных вещей а сейчас у него вся работа с лось тому что он просто в ricoh спецификации описывать какие именно поля нужно добавить и все на этом вся его работа при работе с простыми сущностями закончена а во front-end разработчик и ситуации стало может быть не намного лучше может быть даже где-то хуже поскольку на его плечи легла ответственность управление схемой ответов и схемы запроса к серверу но что этот действительно стало лучше во френдзону разработчики с бэк-энд разработчиками практически перестали общаться на тему где взять то или иное поле и пару слов я хотела бы рассказать о том как можно обновлять данные через граф келлер граф кем создан не только для того чтобы делать запросы всех же свежей информации а также для обновления эта процедура называется мутации чтобы не перескочил называется мутации выглядят они примерно тем же образом что из запросам и сделал описываем то какую сущностью мы можем редактировать следующим уровнем апдейт мы описан что мы себе можем сделать и указывал аргумент идентификатор и новых новые значения полей если мы поляки это не указан то они не обновляются и дальше уже на стороне сервера мы мы реализуем логику обновление этих полей и этом информация произошла примерно следующим образом если раньше мы делали post запрос с указанием тело но с указанием нового состояния в теле то сейчас мы делаем грядки ели запрос указываем какую слышать мы хотим обновить и что именно мы хотим в ней поменять то есть ситуация изменилась не сильно но добавилась возможность сделать сразу несколько запросов для изменения данных на сервере и также мы получили ту же самую автоматически формируемую документацию который позволял from тендерам за ним разбираться как и что они могут поменять но граф кельне является серебряной пули который решает все проблемы при этом не создает свои и у него есть свои особенности в работе с ним и о них я хотел бы сегодня тоже рассказать первый вопрос это n + 1 в суть его следующее у вас есть task manager допустим у и тоска taskman же есть сущность задачи мы мы нам нужно в интерфейсе отобразить список задач и в этом списке задач показать под название под задачи и запрос выглядит примерно следующим образом но самое зло здесь кроется именно в получении под задачи то есть как будет работать данный запрос если мы не реализуем никакой защиты от n + 1 backend вырос поросят и увидит вашу нужен список задач потом он сначала сделать запрос сервера получит весь список задач и только после этого в цикле проходя пока эта задача он сделает запрос за каждый под задачей и получением ее название таким образом для отображения задач на он сделать 100 плюс 100 одну 101 запрос для отображения тысячи 1001 общем очень страшной масштабирование которые недопустимо при разработке все серверной логики решается проблема в ram случае из php примерно следующим образом у нас есть при золото который мы описываем и самом начале вырезал веры мы фиксируем в памяти где-то в каком-то hail перед то что нам нужно будет получить в будущем этот индификатор как у меня здесь показана laughter от рута иди и возвращаем мы не конечный результат и возвращаем обещание что попозже мы готовы будем его вернуть когда все остальные поля будут решены после того как все остальные поля задача получены сервер приходит снова в этот в этот обработчик который диск глубоком people become передан laughter единоразово загружает информацию о всех под задачах и после этого уже аккуратно вытаскивает информацию к той под задачи которые нужно front-end разработчик у для для реализации логике следующий вопрос который вот активно приходится решать это сложный запросов поскольку у нас теперь структура построения запросов ответа перекладываются на плечи фронтенд разработчика а frontend разработчики не снись когда бывает знакомы с тем как работает backend они могут сделать примерно такие запросы запросы с пятью уровнями или 6 уровнями вложенностями которые принципе пойдут потому что не хватает памяти у сервер сколько бы там нибыло если будет 100 задач и у каждой задачи поступает задач она упадет еще на третьем уровне решение этого вопроса есть ее в этом вопрос есть два решения первое это ограничивать глубину запроса мы считаем как когда насколько глубокий запрос если глубина допустим больше чем 3 то мы его блокируем вот это решение принципе похоже на решение проблемы только если мы ставим ограничение в глубину 1 потому что иногда бывает на третьем уровне строится такой запрос который уже кладет сервер и для решения этой задачи и есть такое понятие как сложность запроса сложный запрос это какая-то абстрактная величина обычно это целое число которое считается на основании запроса который пришел к серверу то есть мы при разработке получения в логике получения полей мы указываем то как можно посчитать сложность этого поля ну например если мы добавляем поле просто из база данных из ну и слышит из той же таблицы что же строчки который рядом с полем о еде мы можем указать ему сложность 0 или единицы потому что на слабо влияет а если у нас за получение поля нужно сходить сторонний сервис подождать от него ответ допустимо сферы сервер встречает медленно как случае скрип валютной бирже но бывает отвечает медленно там и указом сложность 10 у этого запроса и таким образом перед тем как начать его обрабатывать сервер правее посчитает его примерную сложность они примерно точно сложность сравнить его с ограничением если сложить превышает максимальную а не будет запускать запрос на сервер и тем самым будет будет будет блокировка и следующий еще интересный вопрос который передо мной в свое время стал это вопрос кэширование случае сопи кэширование делать очень легко у нас есть ключ ключ запрос данном случае это api инфа по этому ключу мы в джинсе указан тоже так и kosher его если если вы обучаете если этот запрос уже не за кошелева ответу на то это спеша если нет он идет уже сам сервер случае с граф киеве все гораздо сложнее там один запрос и по через этот запрос мы отправляем как получение новой информации так и запросы на обновление информации а также еще в этом запросе может быть давай давай типа данных титаны которые можно быстро можно запишите данные которые нельзя так и пировать таким образом кэшировать стало с привычным путем виде там вида на снова в виде афишировать основании запроса для нас не подходит есть много в сети способов решения данной проблемы мы решили ее примерно следующим образом под в тех ситуациях где нам необходимо кашира не на уровне веб-сервера мы делаем отдельный раз запрос в котором логике уже в переменную к вере записываем тот запрос который мы заранее уже заготовили и отдаем его уже вроде к обработке графики или запроса таким образом мы можем решить на столе джинсы заказывайте задать ему правило то что но каширу эту информацию отдавая как можно быстрее эта ситуация исключительно это нужно например на главной странице интернет-магазина потому что меняется на нет не очень часто и вся информация нужна обычно очень быстро для того чтобы быстро страница загрузилась поэтому мы и каши рэм вэн джеймс а любое изменение главной странице это фундаментальное изменение поэтому там так и так участвует backend разработчик поэтому нет никаких проблем в том что изменение структуры запроса перекладывается на плечи backend разработчика и таким образом мы решаем проблему engine ксо следующий вопрос который тоже очень актуален я встречаю с ним практически каждый месяц это вопрос интеграции новых разработчиков новый разработчик который приходит он может быть и неплохой они зачастую все хорошие специалисты но он может даже не слышно такой тип новый как граф теперь она вроде уже давно на слуху но почему-то многие с ней так или иначе не знакомы вот и приходится тратить много времени прежде чем подключить его в реальный проект нужно ему продемонстрируйте особенности которые есть в этой технологии как в руке про который я вам сегодня рассказал n + 1 сложность запросов потому что если он изначально об этом не будет знать есть большой риск то что наломает дров на перспективу например он добавит пол и добавить какое-то поле которое сложно получать из и соседнего источника и не укажет его сложность или и не сделали значит это плюс 1 и в моменте это сработает потому что мы мы не будем получить списки элементов а потом через какое то время допустим через пару месяцев мы это же случае с отображаем виде списка и и сталкивается с проблемой n плюс один сервер падает и выясняется потом что на этапе review не проверили то что у него не было сделано проверка этим + 1 то есть разработчиков нужно готовить прежде чем подключать к работе с граф гель для себя мы сделали некий список ситуаций которые граф гель больше создает проблем чем пользы и вот о них и я сейчас расскажу первое это mvp когда мы делаем а какой то маленький простой проект мы обычно привлекаем из своей команды разработчиков которые сейчас не занят они заняты те разработчики которые менее квалифицированных нужд субъекта опытные они сюда всегда у нас заняты поэтому иногда быстрее и попросить сделать так как они привыкли а именно нарезки чем обе чем привести к краткий курс по графике ель чтобы они сделали это правильно вот дальше в система к отчетности и аналитики мы для себя решили то что системе отчетности аналитики нету острой необходимости в том чтобы все можно было брать одним запросом там как раз таки самое важно это как быстрый запрос отрабатывает и получается вся работа сводится к тому чтобы построить правильную структуру базы данных построить правильные вопросы правильные индексы и совсем меньше и меньше всего голова болит о том как фронт in der будет это запрашивать поэтому мы для себя решили что система отчетности гибнут таблица графике мы не используем городке ли у нас для каждый под каждый язык хранится логика обработки про прав доступа пользователей аутентификации соответственно мы мы не пишем я каждый раз туда мы ее переносим от проекта к проекту она у нас хорошо тестировано хорошо работает поэтому мы ее не реализуем на графике ель потому что зачастую бывают проекты где граф кель попросту не нужен и для этого тащить как зависимость граф кей сервер который будет обрабатывать наши воги квалификация нет нет никакого смысла поэтому мы проверяем право пользователи да и его доступ через задаем ему talkin' через rest ну и разумеется совершенно точно не стоит использовать гель там где про него никто не знает это в принципе очевидно особенность напоследок я хотела бы рассказать об инструментах которые мы используем при разработке с графики первое это график верь в принципе в моем понимании заслужить упоминание только потому что он от разработчиков самого граф кель а в остальном он моем понимании устарел и пользоваться им стал менее удобно второе это альтаир игрушки клиент по сути это продолжение граф келлер точки зрения интерфейс гораздо больший функционал из особо важных для нас это ей возможность экспортировать запросы виде строки курло и потом уже можно будет с другого сервера который вымойте из системы тестируя через курылыс моря как он быстро дает ответ как быстро по обрабатывать запрос но единстве минус который я заметил ним-то что он постоянно поджигает процессор почему не знаю я вытер детали не вникал и заключительный струмент который для нас является самым основным у разработчиков это джесс граф кель это расширение для продуктов а jetbrains мы используем пешки штурм и вейп шторм данный инструмент позволяет использовать автодополнения кода прям процессе разработки мы пишем код мы пишем горькую получение информации и автоматически на основании схемы которые серверы мы получаем какие-то те поля которые то можно использовать таким образом процент разработчиков еще меньше времени уходит на то чтобы взаимодействовать пока не дырами или даже со сторонним софтом некоторые у нас в принципе пользу столько пешки штормами не ставят не альтаир не графику и и подводя итоги я бы хотел сказать то что графики ель в принципе прекрасная технологиям и мы рады тому что мы в конечном итоге начали и интегрировать в реальных проектах но у неё как у любой технологии есть свои + здесь свои плюсы и свои минусы и прежде чем переходить именно к ней нужно обязательно их между собой и свесить и потом уже принимать решение на этом в принципе у меня все если у вас есть вопрос ставится них отвечу спасибо за внимание самое время задать вопрос а как первый микрофон спасибо за доклад есть одна небольшая проблема с граф верность связано с тем что вы описываете типы затем вы описываете резал веры и не знал весь такой проблемой что иногда она не синхронно происходит что-то писали типы потом описали рисованные вот что-то там когда проект большое что-то забыли сделать как-то вот пробовали решить при конюшни заработать с и мы не пишем горизонт и в принципе мы обычно сразу одновременно в правду в случае с php или снуд же с мы пишем схему не на языке и sdr коробке лизка мы пишем схему прям ну программ на программном уровне мы указываем объект в котором указывайте поле и рядом с ним резольвер вниз ну конечно можно забыть реализовать разгар но потом протеин разработчик быстро заметить то что его не хватает то есть у вас типа из кода генерируются но для захотел ежели мы используем очень ринг спасибо пожалуйста здравствуйте спасибо за интересный опыт и у меня есть несколько вопросов поскольку я сам занимаюсь ростом от а вопрос следующий во-первых нем есть авто генерация кода с лагере и чем она скажем так вы и использовали соответственно почему вы перешли именно коробки от роста и так как правильно правильно сделать так во первых ваша piano внутренние но только для ваших внутренних разработок ваших внутренних сервисов ну любом случае интерфейс же открытый интерфейс магии все видят это первое второе опять же если возвращаться к свадьбе ru то подход когда используется одна единая specs для человека с фронтенда и для человека с бэкхенда и в этом случае вы фактически дописываете 1 успеху если фронт-энд просит какое-то дополнительное поле после чего вы автоматически генерируете клиентскую часть серверную часть там дополняйте то есть вот именно такой подход мне кажется он решил вашу проблему частично связано с общением с разработчиками частичным решил но очень часто бывают необходимости какой-то дополнительно бизнес-логику к полям который мы получаем то есть кот с гирей а на основании своего документация потом с этим надо что-то сделать с обработка этих данных и его надо генерить получается и на клиенте и на бак индии между собой и синхронизировать да но у вас получилось бы что есть единая specs сразу же синхронизированы и осталось только дописать ровно две части с фронта и из bk ну окей хорошо это такой вопрос более риторический помимо рекомендации тоже готовьте вопрос x пикеру это тоже важно да да да извините пожалуйста пожалуйста важность еще один вопрос это как вообще обеспечивается versio не рование в графике эль вот это кстати очень интересно поля которые уже устарели мы их помещаем как deprecated и ну со временем перестаем их использовать то есть нет угров кель такого api в один и api v2 но папе же постоянно живой постоянно появляется новые поля но мы старые не удаляем с целью обратной совместимости спасибо здравствуйте спасибо за доклад слева здесь здесь наверху да да вот интересно на когда взаимодействие граф келлер идет с микро сервисами когда вы граф киль используя микро сервисные архитектуры и решено ли как-то у вас была проблема вообще схема с личинга и как вообще схема если идет за и мать с несколькими поэтому если все это мер житься пробрасывать или как на верхний уровень вообще схема чтобы можно было frontend разработчикам сразу же по одному in the in the понимать как стянуть данные из нескольких там внутри уже каких-то сервисов да у нас на уровне взаимодействия между интерфейсом и сервером метро на сыграв кель слой дальше там внутри уже граф к или нет соответственно разработчики ядра который пишет интеграциями car service мне заранее описано как они могут отвечать то есть они отвечают за то как как информация будет предоставлена на frontend соответственно front-end разработчик он даже знать не знает откуда информация берется он видит схему новую и понимает какие поля там есть и уже их использовать краски или используются только на уровне фронтенда и ядра не на уровне микро серов и потому что там уже нет в этом смысла там где можно герпесе использовать то мы используем две писи то есть там уже конкретно разработчики браконьеры между собой сами договариваются мне главное чтобы они между собой как документировали отношения как именно делают это их вопрос хорошо спасибо добрый день а вот 2 не стеснять встать это запредельная насадили под в предыдущем ответе как раз уже почти на мой ответили на самом деле вопрос только был я тоже выбирал какую технологию используют для декоративного api как-то взаимодействия контрактах далее я выбирал между swagger om гaрpи сие я почти в том а вот на график и вообще не смотрел вот вы на эти три технологии которые до этого смотрел используйте их они у вас есть и почему больше граф quelle чем скажем того же герпесе герпесе насколько я знаю с клиент особо не используется та была поддержка брана уже используется в практически уже есть но как бы центра текстурам поддерживается веб рпц и поддерживает да ну в общем хвалят это хорошая новость вот но граф кель вы выбрали место джейд вести потому что он тогда над момент когда мы начали включать им поддерживался принципе везде те же самые раз запроса swagger мы также используем проектах которых нет граф киеве то есть свой город финальное решение на котором мы остановились для резца и мы мы им очень довольны но вот вопрос того что в пенза пока еще один в один запрос нам было очень на ни каких проектах это очень важно и важных документации принудительном порядке сначала писалось документации а потом уже все остальное apache 3вт вообще не знаете не рассматривали apache 3вт тоже от фейсбука например то же самое то есть получается у вас микро сервисы между самой pajero писи в основном когда нужно фронтэнда что-то дать так рафаэля и брест то есть примерно такой вас будет с микро сервисом тоже потерпите общается если если метались необходимость вот там уже зависит а как как они между собой договорятся а если фронт-то граф крыле фронта графики с граф келлер но в некоторых проектах rest вот конечно но мы постепенно николь проектах переходим на граф келли из возможностей спасибо быстро рпц отыграв ареала отличаются тем что врп ситы один раз вызвал method of грохве или ты можешь на результате вызывать методы вложено рпц один вызов метода граф hell позволит на результат еще на ветви антон спасибо шикарно доклад в php у вас какой есть touring для того чтобы мерить перформанс ну то есть то нагрузочку там против блокировали их sage профайлер мы это делаем слегка костыли мы в рамках резон вера профайлер ну расставляем той точки для профайлинга и уже смотрим как они отрабатывают то есть вот так вот чтобы централизовано какой-то системой для отслеживания фиктивно запросов нас нет и скорее всего мы делаем как-то неправильно она сейчас работает и если будет способ сделать еще правильным будет здорово всю групп в группу в телеграм и зашарил dagil ru я зайду на нашу где мы все там тусуемся хорошо давай спасибо молодежи добрый день расскажите пожалуйста как вас обстоит дело с автоматизации тестирования ваших сервисов или есть какие-то специальные средства для тестирования граф коми ну в случае с php мы пишем через котик севшим тесты мы не тестируем сами резольвер и потому что сказал игры очень короткие то есть там чисто получить будет информации типа юзера и диего уже передайте сам сервис который получает информацию мы тестируем сервисы которые уже глубже и тут о тестировании web-интерфейс в самих сервисов полян дивный лорд владек вариативность запрос получается колоссальная сколько вообще по времени выполняется тест iq сложность написания теста нас насчет скорость ответа я буду выступать в конце июня в сибири михайло вот по поводу того как именно коробки где он создает больше проблем скорость ответа гена создает больше пальцах скорости ответа я про это буду рассказывать ну в целом по сути том чтобы под ситуация зависит ситуация там совсем никаких проблем с тестированием вас принципе не возникает но мы тестируем интерфейс через intent тестирования стороне фронта и тестируем то как выдерживать нагрузку случается с интернет-магазином мы тестируем как вы сама страница сама по себе грузится и кто создает больше проблем загрузки интерфейс сайта или интерфейс сервера вопрос еще в том количество тестов средств веб-сервисов будет отличаться или нет тестирования добавим их методов влияния полей в запросе которая указали друг на друга и так далее я так сходу от ведь часто него не смогу и вылове информация этим можем обсудить потом я с удовольствием сам разберусь в этом мы просим вообще может быть вопрос не совсем понял отлично ребят микрофон держите ближе к губам привет спасибо большое за доклад вопрос по сложности не совсем понял вопрос такой что произойдет если забыли указать сложность a front in der что-то там очень большое сделал что случится там в продакшене или еще отправить запрос по тел запрос да как как решать эту проблему то есть декомпозировать запросто лишь та ну да вообще по-хорошему и какие практики вообще есть какой объём данных в запросе там ну мы обычно как профи разбираем сам запрос который пришел смотрите были запросы к базе данных и его случай если не указано сложность мы видим тоже с каждым разом обычный запрос делается медленнее и медленнее мебель пока что не упадет со всем то есть мы разбираемся уже по ситуации но главное указывать служить везде даже на простых полях указать единичку сложно но о практике именно по метрике скорость запроса максимально пиковая то есть после какой скорости нужно уже его декомпозировать после какого времени выполнения вообще тоже зависит ситуация случай с отчетностью да ну и вы там не используем граф кельтам можно и три секунды по такой-то если это главная страница интернет магазину то там нельзя подождать 3 секунд то есть мы вот если ситуация критическая уже мы выделяем как временной бюджет на каждый запрос если бюджет превышается то можно разбираемся или при приближаясь потому что при высится окей спасибо здравствуйте спасибо скрыть пожалуйста способен ли раз добавить каких-либо проблем с безопасностью способен особенно на уровне контроля ролей доступа то есть что человек имеет право заходить или не имеет вот есть тоже несколько решений можно по каждый уровень уже глубоко указывать то что здесь только администратор вот либо как я вот видел решение у другого докладчики сегодня был на патент там он делает на самом верхнем уровне то есть тут и тут и тут мутации запросы для обмена тут мутации для юзера и уже на этом уровне проверяем права доступа в принципе проблем дополнительной работы он создает любом случае вот как и с другими проблемами но они решаемы спасибо тоже привет спасибо за доклад у меня такой вопрос вот у нас не знаю не очень стандартный кейс сводили эти ручки любят еще тестировщики подергать руками вот соответствии с вади рам предоставляет как бы эту возможность в самом интерфейсе voluson предоставлять саму схему запроса которая должна быть чтобы тестировщик прям просто руками в эти поля и не задумывался о том какой запрос будет правильно какой нет вот сыграв коде что-то подобное да вот называется альтаир как раз таким пользуется менеджеры приближенные к разработке они его открывают видит всю схему интерактивно не проводит поле и марта подсказка говорить тут полетает в поле description его тип то есть там прям можно задать какие-то форматы запросам который будет ожидать сервера да да той смысле мы описывали описан как этими этой схемы пользоваться ну на уровне кода а потом пользователи спокойно уже строит запрос прям софта под сорта дополнением и тестируют как он отвечает это что там еще удобнее чем свои будет поставлено все сосед спасибо за доклад у меня вопрос сервер на коробку или получается у вас на чем по ситуации обычно ли вы терпеливо наджис если нужно асинхронность руджес если нет paper супер в случае если она джесс у вас бандеры поддерживают коммутации на горку или поддерживать что документацию на графа альдо список схемы и т.п. но они бывают как вместе с front-end и раме поговорят как они хотят но обычно ритму задает backend разработчики сегодня за ними конечное решение да ну просто так болезненная тема у нас тогда обмане и все что дается сервера это определяется серверным разработчикам это мы со времен пешки еще поддерживаем эту идею по почему печки они чисто на ноги потому что но мы давно еще начинали спешке свое время у нас сформированы некий стек расширение которые мы используем именно для и именно в рамках пешки и в некоторых ситуациях модель на хостинге у клиента может не оказаться под ног же с ему надо простой сайт сделать моего мы вы мы им делаем то есть при в принципе у нас некоторые решения они сформированы пешки мы постепенно переходим к ноде вот быть может через пару лет мы будем только на моде все новые проекты делать супер спасибо спасибо пожалуйста спасибо за доклад два вопроса первый вы схему в отдельные в отдельном репозитории хранится нет мы и схемы храним рядом с реки получение информации обычно на схему вообще формируется на программном уровне то есть сам сервер уже отдает эту схему для клиента для альтаира там для того же лепешки шторма то есть нас нет отдельного файлика из дуэль по которым мы работаем мы их может быть пишем самом начале когда идет процесс договоренности между front энди рам бокканегра как это будет выглядеть но все равно потом реализация построение схемы происходит на стороне сервера то есть вот этих файликов из цельных у нас нет и схема формируется автоматически то есть на фронт вы так то вы берете код бэкэнда генри стритом код для фронтэнда и туда как-то ну по концам отдает уже джейсон схема граф келлер двух видах и либо езды или то удобные для человека формат как я показываю пример либо уже виде джейсон перейди в котором и происходит перечисление просто всех типов которые могут быть я имею виду типы которые вот новые дефо нити и их потом можно на фронте используются да она автоматически формируется с мы описываем и их уже мы описываем их сразу с револьверами то есть мы написали дни поле как вы получили они же генерятся еще раз они же генерятся но типы ну то есть вы сзади форели в гантели и потом по ним там генератор побежал доната уже отдали и здесь код отдал нет нет он отдает схему на основании которые уже можно делать запросы то есть ну сейчас я пример проживания не об этом немного но то есть мы на фронте собираем запросу нас там сущности есть обложенные там туда-сюда и мы их он собираем то есть мы же можем там тупо джейсона собираете можем вот этими типами прямо собрать а потом сказать вот дай нам теперь из них джейсон структур кусать собрали а потом сказали вы вот это джейсон мы отправляем запрос нет я не могу понять образ сожалению можем обсудить и его создан для помощи я про него не могу вас получилось хорошо извините принимаешь даже пошли выйдем сказал двоим уже дома аккуратнее ктонибудь про валидации то есть понятное дело что мы можем раскладывать там по типам то что мы можем запрашивать но конкретно там строчки там айдишники то что все что угодно вот конкретно валидацию вы накручиваете просто в бэг-энде прям кодом но граф кейса умеет вы лидировать из коробки мыслимы указан тоже там должен быть and a туда придет дабл или строка он упадет то есть там очень классный механизм выливается в graph келья кстати зря об этом не рассказал спасибо вам за этот вопрос что вся информация которую указали что там строгой типизации мы указали строка и совершали строка он сам проверит кому книжку подарил запрос нет а он уже ушел по да вот это вот сюда вот обычно не могу вспомнить их просто спросили но я помню но я помощи кольнуло до магните руку знаешь кстати когда вот тебя пытаются потролить на публике знаешь как отвечать очень клёвых только один раз так можно сделать например а вы не думаю используйте для ты просто повторите все сразу конфликт конфликт покажи друзья вот да поклон и аплодисменты спасибо тебе большое памятные призы"
}