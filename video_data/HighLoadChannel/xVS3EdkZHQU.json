{
  "video_id": "xVS3EdkZHQU",
  "channel": "HighLoadChannel",
  "title": "Устройство современного распределенного Object Storage / Александр Чистяков (Git in Sky)",
  "views": 462,
  "duration": 1870,
  "published": "2017-04-22T13:18:26-07:00",
  "text": "меня зовут александр и бока коллега готовят презентацию показу я хотел бы может быть немножко расширен представиться когда меня спрашивают чем я занимаюсь меня достаточно сложно ответить потому что я занимаюсь не очень интересными достаточно скучными делами я делаю так чтобы разные веб-сервисы работали поэтому в рамках представления мне бы хотелось поговорить о действительно важном ну знаете действительно как бы я скучный человек я не работал в яндексе я никогда не говорил публично осмотреть ориентации и если это знание поможет вам уменьшить a white процесс или ускорить работу с диском то я делюсь им с вами уберите уже он смотрит на меня очень здорово просто с укором я знаю что реал таки не очень хороший сетевой карты поэтому банк за счет нато красным крестиком мы с вами будем говорить об устройстве распределенного хранилища скажите а кто из вас программирует подвид вас очень много сушку это достаточно необычно на самом деле когда спрашивают резала поднимают руку а кто из вас занимается эксплуатации веб-сервисов одни и те же люди требуйте бофке зарплаты они знают сложная нервная работа может быть этого технического и кидая пожалуйста не чем возможно то что я тоже не произошло возможно наоборот вы из подарить вам начнете план знать что нормально барон мире самая недель до 10 до 20 нажми на картинку я выбрать и технологии сразу сюда так не бывает на моей памяти так не был никогда более того безус требование обычно таковы мир настолько жесток что как бы если вы выбираете технологии и она перестает вас устраивать вам пусть надо выбросить или исправить выбирайте вас о два пути проект в котором я занимался внедрением распределенной файловой системы жил рос и развивался решал проблемы и столкнулся с такой ситуацией когда в рамках тех жестких условиях которые мы были поставлены окружающим миром а именно кто из вас знает хостинг hetzner слушайте все знают я хотел вам рассказать ну я так понимаю что в курсе это такое место где можно сервера покупать как продуктовом магазине пошел купил два батона еще парочка серверов они там такого же качества примерно никогда не покупайте одежду сетевом супермаркете скорее всего и это тоже носили вот сервера таких же тоже кто-то их когда-то уже используют такие пакеты и в общем то в рамках развития сервиса проект дорос до состояния когда самые большие диски которые можно купить за дешево в этом хостинге просто стали заканчиваются пользователей контент и лежал в базе данных это отдельная достаточно веселая история про то как хранить поиску и статику в базе данных я про него даже доклада читал этом году но когда у нас стали заканчиваться низкий стало понятно что те вызовы которые ставит перед нами жизнь они требуют чтобы мы могли делать из достаточно мусорных машин достаточно легким способом веках они лещи в которой можно заливать файлы чтобы они там лежали не терялись чтобы мыть машину могли легко доставлять в сторону и эти файлы коми показывает дату по сути дела я так что вам рисовал amazon s3 носом а кто за состоит работа то есть вы должны понимать о чем идет речь и так называемый обжиг сторож вы туда что позволяли по какому rest интерфейс и т.п. и она там лежит занимает места на диске собственно говоря тут некий такой золотой стандарт индустрию с 3 интерфейс и разумный сторож которые мы бы хотели внедрить сложить туда фил он должен ps3 интерфейсу месяца нами общаться собственно говорят был одним из наших пожеланий что-то не совсем тяжело без сладость и так во что эти то не туда я все пропустил нового собственно я вам это все уже сказал да охладимся заявление президента зальет эволюцию описан собственно это просто бросает пользовать всех этих промывок травы информации о том что это такое проверим базе ищу мобильная версия с необычную пишет о некоторых чисел и сюда уже упомянутый метрах автоматическая кремация автоматически флорию быстрое добавление у самих машин но тем не менее то есть хранилище лежит которые иисус всякие минута но как же можно пожениться спину своих тариф за мной будет читать доклад николай нужен весь в слезах и вас ведь давай сказать правильно сочувствие уважения к вам не страшно человек работать спасает абсолютно любой мужик это локальное хранилище я сказал запросов не очень простая штука на мой взгляд они все абсолютно так устроит хирургические не собрал дальше я предал электротехнические соображения которыми руками лучше по разметке стоит у каждого утверждения мне люди которые знают язык рассказываю звездочку по убери первой фразе подробно так и действия самом деле на помощь к хорошей почему минут что угодно николай и останусь сказал что мне же лучше чем расположен смеялся но его взгляд все три уже особенно мир тогда гулда менялись улучшили once порядку вещей поэтому youtube сияния смогла ну и на самом деле вот единственное техническое соображение которое меня сподвигло навязали что был единственным jack strify которого админ таций был написано как решились то что люди проявили внимание где то ли заморочить и сделали локальный кэш они твои закатывать стать ближе всего к потребителю это мягкое и на самом-то деле как скорлупа свинья шить ну и собственно говоря немаловажное вечную разделы японцы что мы знаем о японских вещах обычная японская сталь покусать и после ста видов компьютерных а я их не резонирует если все попасть в царапин и ниппонская можно было кинуть в коленную стеночку от корпуса попасть и все нас нет молчит японские ножи да и такой пластик японские автомобили у кого из вас есть этот автомобиль у меня до wirecast американской очень большой язык ruby rose убийство не обнаружит да не стесняйся и скажем никому они мы ну а я искал какое-то самуро не нашел за 1 все что нужно найти до сих пор ские вещи они общем то лучше я решил что тоже японцы люди чести и наверняка там они за банками соусов куку сделал нам на самом пределе выбор технологии потому что у меня нет я понимаю что человек не внедряем я по информации запрос 2 до чтобы умерить огромное спасибо любит одну неделю вижу каждый вопрос туда немножко не горит автомобили стихам важен не горит автоматических перестроений за здесь соответственно кристаллами разбирая звездный смысл деталях тоже был довольно устроить до картина предлагать секунд времени в начале августа это вовсе не автомобили посадил я пошел следом происходит на одну из нот все самодостаточным печально среднем 90 по всему миру мой запрос видео занимается ну и как ты его подойдёт ли мне даже не пытайся вот график которая наглядно показывает причине лучше вообще не носить это очень важно потому что я вам сейчас мы сделаем отличное распределенную сохранить предыдущие отлично из записей здесь нигде не выбрать видимый я хотел быть перечислены использую сделать на вас новым 12 уже июня я начал делать первый комментарий газе торий значит саймон косую ли у меня уже все устояла весь что все равно 2 прозрачные сентябре был грех и как где-то могу все меня замечательный космического одну-две показали так что пришлось его было дешевле поменять чинь-чинь что я изделий от этого просто не заметили не забросишь лишний ответы если я вам сразу скажу что мастер меня сих пор пока никогда не отказывал чтобы 85 мастер я не знает в случае отказа скорость звали говорю чего но поговорил плаху вот собственно не делайте только реле стартера ведь это же время удара секунду до этого беспокой меня спокойно ребята ребята должны на самом деле есть парси 5 с этим график но я должен быть как вас напугать если вам расскажу секрет другую щеку не получится у меня подменить нормально всяких мелочах несмотря на то что со стрелами отработать все которые я пробовал языков а у меня был первый вообще необычными мяча при попытке сделать отдать мне список файлов лежащим помогите стрижен вот моём пытайся нас висят получить в память у меня память заканчивается обычно говорить замечаешь многие клиентки убить или вообще не знаю что если хранилище бывает где-то кроме amazon поднимите он так странно и что да вот график садясь и как я уже показывал тогда уже отказывает на некоторое время пока как бы маршрутизаторы не пойми что узел пропал лаять и сегодня еще выше чем полторы секунды собой пищу с компактным вообще происходит за особые вам пока у нас на самом деле очень повезло я не когда-нибудь фиксирую контент опять если вы работать со сри вы знаете что лучше не заливать по новой к тому же уровень нормально когда у вас много картинку новый юля тогда это отлично приживаются тогда как бы не отправлю синицын валидации ну как я уже говорил у нас нет некую автомате это очень хорошо но граничное условие да не подождите я в храня статический контент раздают статистикам ты не очень требовательным люди которые идут от меня мгновенный раз я никогда не будете сырую медведь-горы не удаляли гранты слова потому что удаление там устреми ставлю тебе compact страшно с нашей пилокарпин хочу да ну я вот немножечко воин выбираю потом первый раз пришел соответственно метафорами более смотрители переправлялись мера коренная возможно спасибо атаковать и кисти начали закончу хочу просто базу не пощадили чтобы тот стал делать нужно разработчиков напрячь чтобы они вместо бизнес задачи решали какую-то задачу за которую пользователи общем-то не платит за чем вопрос по поводу latency ты сказал что там есть хитрости ты нас просто пугаешь давай обратно пожалуйста если есть время у нас да конечно я вас могу распугать обратно дело в том что у меня сделано балансировка на два разных действия у меня достаточно слабенькая сеть второй битвой в общем-то и вносит италии тэц если вы отключить то 90 процентов запросов будет исполняться за 500 миллисекунд если поставить больше gateway'ев и то есть еще еще ниже будет я на самом-то деле в 200 миллисекунд 90 процентов запросов умея укладывать просто не хочу да спасибо за интересный доклад вопрос вот но мы в своей работе используем cf сравнивали ли вы с ним ну или хотя бы там почему выбрали именно это прогноз на меня на самом деле относительно сев были следующие кассир во-первых это модуль ведра насколько я знаю есть юзовский сев который не модуль ядра но как бы и не знаю вот во первых во первых long меня значительно проще патчить и понимать если что я могу влезть внутрь на самом-то деле тоже воронью если что я все могу влезть в общей бедро меня тоже не остановит но в ирландки я влезу быстрее и в общем-то поскольку сев кроме всего содержит в себе еще и posix lair скорее всего там внутри просто более сложная логика мне нужен была простой кондовый обжиг сторож без лишних наворотов вот как бы тут на самом деле ровно это самые есть ли в тебе которая там уже и сдержанно вдоль и поперёк над которым написан прослушайте завтра запрос что может быть проще осев это какая-то магия вот я как бы знаю что у меня есть знакомые в компании крок у которых там шеф развернуто на 10 мегабит на и сетки и прочие прелести жизни это не 200 мегабит не раз не знаю страхами и второй вопрос чего там с отказоустойчивости то есть как я понимаю есть какая-то надо которое при смерти выведет всю систему местную и и согласно документации нет проверять это в продакшен я честно говоря не хочу вот если случае заставит меня достигнет я бы даже так сказал тогда я узнают опытным путем скорее всего я рано или поздно соберу просто тестовый сценарий некий с отказом мастерноды но вообще говоря я верю в японцев я верю японскую стала немая проще я верю что она переключиться на slave слив у меня есть сторож надо у меня отказывает вообще не проблем не травите душ ну как моргнет так и раз моргнет проблем позвонят подожду в докладе ни разу не был откат на про потребление оперативной памяти процессами левов с она незначительна вот ряду меня намного чаще 64 гигабайта и там память стоит а курит вот абсолютно да я честно говоря даже не смотреть в районе 4 гигабайта на виртуальной машины ерлан и больше самое большое потребление оперативной памяти на битах на то что там вот этот вот кэш я под него память отдала на вот в общем то она в основном и использовать следующие еще один вопрос можете внимательно слушал основные потребители файла это посетители веб-сайта который запросил статику или через или прогну как сказать приложение разработчиков которые тянут основные потребители у меня на самом деле достаточно хитро меня есть большие файлы есть маленькие файлы маленькие файлы как хранились в базе данных так и хранятся оттуда они очень быстро отдаются быстрее чем отцу есть большие файлы за которыми пользователи приходят на самом деле иногда всего 20 процентов запрос в за файлами идут вот клевать его левов с меня я говорю мне везет поэтому они готовы ждать да да да да там на самом деле получается что эффективно у меня два сторожа и 2 как бы быстрее чем абсолютно"
}