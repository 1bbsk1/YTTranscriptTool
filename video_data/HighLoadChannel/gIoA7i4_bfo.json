{
  "video_id": "gIoA7i4_bfo",
  "channel": "HighLoadChannel",
  "title": "DNS в условиях хостинг провайдера / Константин Новаковский (Selectel)",
  "views": 1051,
  "duration": 2824,
  "published": "2017-04-07T12:34:24-07:00",
  "text": "следующий доклад будет он хоть и называется про как dns условия хостинга но на самом деле он будет круче он будет про рутовый dns про самую сердцевину интернета не совсем продуктовый но чуть чуть чуть чуть чуть вот так что константин молоковский из компании select all расскажет об опыте работы с dns компании select all в том числе про крутого и dns это самое интересное поприветствуем здравствуйте еще раз представлюсь зовут константин работаю в selectel и занимаюсь с электролита и носами и давайте немножечко расскажу чем занимается вообще селектор у нас есть шесть дата-центров в общей площадью 6 половиной тысяч квадратных метров мы предоставляем серверы в аренду для colocation а вы можете приехать разместить свой сервер у нас арендовать стойку серверное помещение также мы предоставляем виртуальные приватные облака у нас есть облачное хранилище с селеном у нас есть свой мониторинг доступности также у нас есть еще отдельный проект техно дом точка ком также отдельный хостинг под отдельным брендом аренда выделенных серверов и новый проект виртуальные серверы для разработчиков виски виски и а вот виски ила и вы можете подойти как раз на стенд взять бумажечку с промо-кодом и попробовать бесплатно на месяц вот далее переходим к dns у коротко расскажу немножечко продай нас коротенькая вообще все наверно представляет как работает dns есть такие кто не представляет вот кто-то не представляет dns службой службу доменных имен с тем доменных имен в основном обслуживаются двумя типами серверов это авторитетные серверы на как про хранится непосредственно записи аль так называемой ресурсные записи и каширу ющие рекурсивные серверы на них эти серверы как раз ходит к авторитетным сервером получают записи и отдают их конечным пользователям собственно примерно схема выглядит а и все это работает пою тебе вот это основной протокола но так же работает еще и пути себе но в основном все запросы именно пою тебе я на слайде представлена небольшая схемка о том как это работает то есть сервер ли курсов к нему приходит клиент да это может быть обыкновенная домохозяйка которая решила зайти зачем-то на select all точка ру вот и спрашивает 3 курс и расскажи мне о пи адрес select all точка ру и курсор идет сначала он он еще не знает о том то что сам начале и пи адрес select all точка ру он идет сначала с этим же вопросом корневым dns сервером и так называемая корень . это самое наверное одно из самых таких узких болезненных мест для интернета потому что если с корнем что-нибудь произойдет то интернет сломается далее корень отдает 3 курс url адрес сервера у которого можно спросить записи для зона ru recourse идет к этому серверу спрашивают у него где можно посмотреть записи для селектору и на сервер авторитетный сервер селектору отвечает прекурсора соответственно уже ip-адрес select all точка ру recourse р дает этапе адрес браузеру домохозяйки она уже смотрит где можно заказать и арендовать сервер или может быть стойку зачем-то домохозяйки вот я немножечко вкратце расскажу про корневые серверы мы очень вкратце чтобы вы представляли как сделано отказоустойчивость у корней до корней по айпи адресом да они там идут по буковка могу туда ей и так далее 13 штук их 13 вот насколько я помню сейчас уже каждый из них имеет ipv4 адреса ipv6 вот за них отвечает 12 разных организаций и канал кто там еще рай министерства обороны сша в том числе вот и вся эта вся все эти 13 корневых серверов расположены всему миру естественно надо их обслуживает 513 узлов это вот по данным буквально вчера я смотрел то есть 513 узлов в разных географических точках обеспечивают доступность корня как так происходит что 13 корневых серверов до что их всего 13 точек 500 513 я чуть чуть дальше расскажу сначала еще обратимся к как как обычно сделан классический хостинг вот хостинг доменов в небольшой хостинговой компании то есть лет восемь назад я как-то такое работал и там было примерно так это два и при адреса да как так обычно требуют регистраторы для двух авторитетных серверов как правило это это один дата-центр то есть арендовали стойкого арендовали серверы вот у нас там есть два авторитетно сервера физически это может быть даже один сервер да то есть никто не мешает в общем-то повесить на один сервер 2-я печника и обслуживать но естественно это не очень для того чтобы обеспечить доступность до сделать все очень классно что если один сервер падает вот это вот один физически она продолжала работать нужно соответственно все это дело развести чтобы разнести сделать очень хорошо нам потребуется свой автономная система без этого никуда соответственно помимо автономной системы нам потребуется 2 по сети 24 раньше называли класс цену сейчас у нас бесплатно без классовой можете зация но почему-то устоялось многих мнения что для весов нам нужно 2 ip адресов в разных сетях класса c вот сервер должны быть в разных дата-центрах для не каста вовсе не обязательно точнее до линии каста серверы могут находиться больше чем двух точках и анонсировать вот эти сети класса c 24 мы будем к бюджет и то есть соответственно когда вы уезжаете со стойкой или арендуете сервер вы должны уточнить у оператора что или у хостеры который предоставляет вам услуги по размещению или аренде серверов нужно уточнить можно ли семью понять бюджет и сессию в нашем случае можно вы можете арендовать у нас сервер и поднять с нами бирже без еще соответственно в точке в присутствии до схему к будет выглядеть примерно так есть ваш сервер они будут понимаете службы dns сервера устанавливаете бюджет и соединение с хостером до оператором может быть ли хостеры любой оператор дальше хостер или оператор уже будет распространять маршрута до ваших два четвертых сетей на весь остальной мир вот кстати что ты поторопился кто такой nick ст все понимают кивание головами этот кто не понимает до поторопился смотрите у нас есть один ip адрес на допустим кстати отличный пример 8888 наверно все знают до угла в dns он тоже работает бы не касту но когда вы к нему обращайтесь вы попадаете на ближайшую ближайший узел по маршрутизации то есть один и тот же ip адресов может от служб обслуживаться нескольких географических точках то есть как раз роутер хостер или операторы до 0 и того кто создает делают и dns анонсирует это эти адреса из нескольких точек и в зависимости от маршрутизации конечного пользователя мы попадаем на в глубокой теории на ближайший узел вот анонс префиксов префикс это вот как раз там слышь 24 flash 21 и так далее gp мы можем оператору анонсировать не меньше 24 подсети соответственно для dns of да допустим у нас два авторитетных сервера в каждой допустим у нас 10 точек присутствия в каждой точке мы можем анонсировать только одну 24 подсеть да то есть допустим у нас один у нас находится в первые 24 сети ns-2 находится во второй 24 сети мы не можем в одном и тут в одной точке анонсировать две этих по сетке собственно если . падает до тогда все запросы точнее если . упадет то доступность 1 24 сети на ближайшие 60 секунд это время когда бюджет работает анонса перестанут дойти . будет недоступна соответственно все запросы пойдут на ns-2 который расположен во второй 24 сети поэтому если . падает все запросы идет идут на 2 если мы будем анонсировать обе 24 км от сетки из одной географической точке то она соответственно запрос они будут приходить домохозяйка не узнают как попасть на телек tulp.ru соответственно как я говорил мы конечный пользователь попадет ну точнее конечный recourse рекурсия пользователя попадет на ближайшую географическую точку только в глубокой теории маршруты в globe в интернете постоянно меняются и одного оператора связанность лучше у другого хуже-то оператор например выгодней один трафик гонять через там через одного uplink до каких-то по сетей для других по сетей через другого ну это отдельная тема операторов моей практике было такое что у нас есть . в новосибирске в том числе и часть это одного из операторов до трафик из новосибирска шел не в новосибирск а на сервер в киеве им было так дешевле гонять трафик через всю страну и вот соответственно мы можем немножечко это со своей стороны сервера в анонсах подрегулировать с помощью так называемых prepend of в бюджет и маршрут выбирается следующим образом наилучший где меньше всего по минимальному количеству автономных систем которому которые нужно пройти для того чтобы достигнуть конечного ip-адреса d соответственно когда мы анонсируем мы можем говорить что чтобы до нас дойти это не вот мы к конечной автономная система там 49 505 чтобы достигнуть наш нашего сервера нам нужно пройти три или четыре 49 505 да по сути это будет одно и то же как бы физически она будет ходить точно так же на расстоянии логически для бюджета будет казаться что машу длиннее вот соответственно дальше расскажу про немножечко репликацию между скажем так мастер сервером до авторитетным и конечными нодами в dns и есть своя родная репликация родной механизм xlr xlr соответственно с буковкой а это когда мы передаем целиком полностью зону из буковкой и да это когда мы передаем разницу то есть мы что-то изменили длины серверы в зоне сказали commit вот и на подчиненные сервер и улетают только разницы в случае вот буковкой а это улетает связано целиком если зона очень большая то это может занять какое-то длительное время но это не единственный способ рипли кации да мы используем другой на уровне базу данных у нас используются воск риск верь для хранения зон ну в основном дата центре санкт петербурге и на все остальные конечной точки до точки присутствия географически удаленным мы реплицирует зоны с помощью триггерного репликации landis то ланди ест ее состава sky тулс до которую заработали в скайпе и вот она работает очень хорошо если там много упадет до & replication временно становится со стороны мастер сервера и когда надо подниматься но просто догонит и то есть не нужно делать никаких дополнительных телодвижений и плюс в этом случае почему и внутри горная репликация не на родная репликация под колеса потому что с помощью триггерного репликации мы можем гонять не всю базу целиком а только отдельные нужные таблички с нужными полями вот как все это дело мониторить мониторить классическими методами то есть запись сна deus и цинга что хотите то и берите в нашем случае мы используем zabbix удобно хорошо это дело каждого на самом деле какой мониторить не touring использовать запись как-то меня прижился вот пара zabbix рассказываю вчера там чем можете к стенду подойти они вам расскажут как его готовить вот главное не забывать мониторить бюджет и сессию соответственно если у нас что-нибудь упала и на ноги нам нужно сразу если упала бюджет pc сито руками не путаться и поднять и если у нас сломался сам кстати сервер то не надо поднимать его руками и сразу там сервер например там перезагрузился по питанию или еще что-либо произошло не надо ставить не автозагрузку скажем так дают и джипе демон который будет анонсировать префикс и потому что во первых может репликация самих зон еще не догнаться да там пользователь где-то что-то изменило надо лежала там два три часа до мы тогда поднимем ноду отдадим старые данные а там еще в дмс время жизни была выставлена на сутки и клиент уже что-то поменял и там в конкретном регионе клиенты пользователи будут недовольны еду изначально будет много сообщений о потере пакетов узлов но много это конечно загнул то есть пару раз в сутки для одной из географических not это практически гарантированно там например потому что из санкт-петербурга до полу alt и ну во-первых pink 200 миллисекунд до маршруты все время меняются и проверка может легко попасть на как раз вот на это изменение маршрутов и мы получим сообщение о том что нам надо нам почему-то не отвечает вот как это побороть между всеми узлами мы строим vpn лучше всего результаты сделать пир toupper как сделал я да когда каждая нота с каждый имеет связанность отдельный вы пинчик что такое я случайно вот мы поднимаем между всеми узлами overlay ную сеть то есть поверх простого интернету мы поднимаем свой vpn я выбрал think vpn то есть его для наших нужд вполне достаточно репликации передачи остальных данных но это можно сделать и с помощью там open vpn и дополнительно настроить мужски зация свой лагером случае things vpn но удобно чем то есть мы поднимаем сессию каждый с каждым и она сама умеют отслеживать файла веры если между двумя какими-то нотами потеряла связанность было потеряно на какое-то время think автоматически будет гонять трафик через какую-либо другую ноду бывает так что например напрямую из санкт-петербурга до там нью-йорка до на дома достучаться не можем из новосибирска до нью-йорка буду стучаться можем ну вот как-то так бывает интернет не очень постоянен вот весь служебный трафик мы гоним через и т.п. статистика нам нужно понимать как много запросов нам приходит есть ли какие-либо ошибки может быть ещё что-то там непонятное с чем нужно разобраться какие-то аномалии мы засекаем как собирать статистику собирать статистику можно несколькими способами первые ручки как обычно смотришь на форумах типа ну посмотри влогах биндо метод действенный not to это нужно парсить логе сейчас появилась инициативы еще называемый dns то по это механизм когда прямо в dns сервер устраивается небольшой компонент который внутри сервера строит dns flow и отправляет их в коллектор и ты уже в коллекторе все это дело обрабатывается в чем минус предыдущего но 1 и методы слугами и вот метода dns так это в том что если сервер мы что-то случится мы не будем знать о статистике может быть там сервер не отвечает а логии запросы идут до а сервер там фырфырфыр я не хочу работать вот поэтому наилучший метод это зеркалирование трафика и либо сбор с интерфейсом и потом уже последующей разбор этого трафика какой-нибудь своей сторонней утилиты в нашем случае мы используем свои утилиту которые в реальном времени разбирает весь приходящий трафик на 53 порт да и нас и собирает собирает статистику и отправляет уже на сервер основной коллектор в этом случае мы можем отследить например такие аномалии когда сервер почему-то залип или у неё там залив какой-нибудь трек он не отвечает а мы видим что запросы приходят запросы приходит там почему-то отвечает ни на все эти запрос или вообще почему то туда запрос и приходит ну то есть вроде не должны мы ничего не на мессиру ему запросы есть вот на соответственно всю эту статистику нужно куда-то складывать на статистику у нас какая то есть например у нас есть один нс1 у нас два и нас три нас 4 да это они размазаны всему миру и мы храним их то есть мы в любой момент времени можем посмотреть то какие запросы приходили на конкретную в конкретную географическую точку на конкретный инстанции на dns сервера за определённое время статистику попробовали несколько решений мы складывали статистику в уганде сгибе через месяц она примерно перестала нам отвечать она туда складывалась но перестала отвечать может быть плохо приготовили вы складывали в графе попробовали приготовить график это уже не очень взлетела еще несколько решений в позволит складывали то он очень сильно пух но в конце концов мы пришли конфликт baby она сумеет кластер из коробки она умеет шар лица и очень достаточно быстро удобно работает вот причем буквально там в этом месяце в каком час ноябрь в середине октября не объявили о том что начали тестировать новое хранилище для данных и обещают уменьшить там несколько чуть ли не в несколько раз объем хранилища для того же количества метрик вот чтобы у нас есть какие-то домены и для того чтобы понимать сколько клиентов реальную пользуются нашей маленькой услуги хостинга доменов и которые у нас к которому практически никому не рассказывай мы проверяем делегацию первые несколько способов да я расскажу которые не особо работы просто посмотреть huis не работает во первых есть но множество доменов не знаю например самый простой пример это российские региональные домены например спб . если вы напишете huis там не знаю сити . spp . ru смыслом скажет типа я не знаю я не знаю ничего про этот домен потому что нет никакого стандарта как бы размещались пусть сервера для зон домена то есть это все эмпирическим путем ходить смотреть по конкретным регистратором где расположены их луизы на каких адресах и не мог быть вообще даже без доменного имени просто на каком-то эти снимки висят и utility ху из этого все это хранится то есть с каждым релизом они почета обновляют добавляют можно просто сделать спросить у курсора на записи для домена это тоже не работает потому что recourse вам отдаёт исключительно на записи которые хранятся на авторитетном сервере там они могут быть любые их там вообще может не быть удален делегирован он работает потому что он работает за счет и нас записи на вышестоящий зоне пример зоне ru поэтому для того чтобы однозначно убедиться что домен делегирован нужно строить дерево дерево делегации то есть для каждого домена мы проверяем рекурсивно делаем запросы складываем в нашем случае вторглись в jison щеки засекаем задержки относительно сервер статистики да авторитетных серверов доменов которые добавлены к нам панель управления мы можем отслеживать там кто там добавил к нам домен кто кто не добавил домен кто удалил домены кто добавил нами делегировал и так далее за счет кстати статистике который мы собираем непосредственно авторитетных серверов можем видеть что есть домена которые у регистратора прописано наша инесса но в панели управления нет причем достаточно немало я не знаю по какой причине ты происходит зачем люди так делают но это существует вот теперь я немножечко расскажу про и курсоры в дата-центре то есть когда мы сдаем отдаем нашим клиентам в этом виртуальную машину доедет до выделенный сервер или к нам станет на colocation как правило люди прописывают на шаре курсор ну потому что он во первых ближе даль для него одна миллисекунда то и меньше и она работает быстро собственно какие могут быть проблемы изначально у нас был один legacy адрес до такой самый первый который прописан был прописался изначально на всех этих virtual koch арендованных серверах вот это то есть она работала работала работала это центры строились строились да и получилось что как например из москвы до этого адреса ходить далеко так как бы и пинчик расположен в санкт-петербурге да и помимо той по сеточке где есть еще какие-то ресурсы которые тоже нельзя перенести вот соответственно мы можем немножечко то есть быстро переключить этот ай-пи-адрес могли да там опустить на одном сервере точнее поднять сначала на одном сервере потом опустить на другом отправить arp пакета на переключиться и вроде даже как то будет работать но неудобно еще есть проблема это вот неудобные запросы клиентов что значит неудобно это например имя домена и в конце там какой-то вызов не знаю функции java script а ну то есть программисты они молодцы но они иногда такой такой бред пишут и делают запрос игорь курсором тоже просто невероятные ну то есть нормально когда no recourse периодически куски кода прилетали как они это делают я не знаю вот со всем этим нужно как-то побороться собственно как боремся по поводу legacy адреса мы переводим перевели ри курсор и да у нас их три три обе адреса на и не кастом 3 автономной системы то есть получается что адрес 1 до но серверы в санкт-петербурге ходит по этому адресу массирую санкт-петербурге серверы из москвы ходят на сервер с этим же ip-адресом в москве для маршрутизации использует свой успех почему из perry фото ну во-первых внутри автономной системы хотя можно поднять ее би джи пи но есть некоторые нюансы успев время сходимости меньше ну то есть если сервер мы что-то произойдет дата запрос туда перестанут идти failover отработает не там секунду-две максимум вот по успев внутри протокола есть называемый pdf by direction to dvd видео решил failure detection делом обменивается с роутером heart битами регулярный если что-то пошло не так роутер кладет сессию и переводе трафик на другой сервер соответственно несколько серверов и все они анонсируют одни и те же и пи адреса но маршрутизатор отправляет на какой то один из них наука вы вес побольше по поводу неудобных запросов с неудобными запросами разобрались не так давно с помощью сервера dns dist да это такой скорее маршрутизатор dns запросов от разработчиков power dns что он делает он принимает dns запрос смотрит на валидность dns запросы что имя правильный правильный тип данных тип записей и он нормальный он хороший если все хорошо тогда он перенаправляет на этот запрос уже непосредственно рабочей dns-сервер да это может быть recourse авторитетный сервер и можно построить несколько пулов то есть а печник из которых приходит периодически какие-то странные записи дают странные запросы мы можем отправлять на один pull that такой который обрабатывает всякие странные вещи например есть еще клиенты которые периодически там на всю ночь resort весь интернет дает чтобы каши основного ри курсор и не портить мы отправляем их на отдельный сервер вот как вся эта инфраструктура управляется антипов мань этом писали по моему да одна из первых статей на русском языке пронеси был очень удобная штука не нужен агент дописывается ям вам легко читать легко описать очень удобно рекомендую сейчас будет кстати released 20 и рекомендую посмотреть как все это дело тестируется тестируется в отдельном тестовом пули в тестовом в приватном облаке на базе upon стыка и то есть олеся будем разворачивать с виртуальной машинки накатываются туда все dns сервера и тестируются тестируются ну вот случае с зонами мы просто мигрируем основную базу в тестовый пол до в мастер тестового пула с помощью встроенного механизма ну точнее совсем встроенным механизмом да просто восстановлением базы основной базы под колеса на тестовой машинки с помощью бармена для бэкапов мы используем бармена барма нее можно послушать по-моему так сад доклад кендрик стоит бородина вот он о нем рассказывал очень удобная вещь все кто пользует пожгли 100 наверное имеет смысл посмотреть на эту штуку как тестируем собираем трафик да дам трафика прогоняем там трафик в новой конфигурации то есть подняли тестовые машины и весь этот трафик который проходил живым и production гоним на тестовую конфигурацию соответственно смотрим разницу ну разница определенно будет потому что я печники могли поменяться клиенты что-то могли поменять но там смотрим что нет никаких файлов index domain of и так далее чем вот это вот дамб и paragon дампом осуществляется в составе power dns тулс есть порядка восьми различных утилит которые обрабатывают и работают с дампом трафика то есть какие-то уделит и как раз просто прогоняют трафик на тест в dns сервера кто-то показывает статистику и так далее рекомендую посмотреть ещё есть времени немного что-то затормозил есть такие проблемы как дым да да сам крепим при фетиш я думаю каждую наверное уже сталкивался с тем что прилетает безумное количество трафика в 53 парта dns серверов и нужно что-то с этим делать в нашем случае нам нужно как то в этом не участвовать до как только нам прилетают и не запросы мы заворачиваем сразу по тисе пи потому что и не запроса как правило прилетают по ю т п сейчас есть такая инициатива как вообще отказаться от лени запросов и просто их не обрабатывать вот даже не отправлять в tcp говорит извинись за дай нормальный мне вопрос с конкретным типом записи еще бывает то есть spoofing мы побороли с помощью tcp но еще есть проблема когда люди берут статистику список список доменов из-за какой-то публичной статистики и начинает просто последовательно по каждому этому домену отправлять какие-то запросы да расскажи мне про этот пишет про этот домен и также спуску hide ip адрес источника в данном случае в этом можно увидеть у равномерному графику неожиданного по всем доменом да я почему-то не равномерно идут прямо по всем даже тех кого раньше практически никто не спрашивал побороть можно не большим фильтром дает посмотреть на сами пакеты которые приходят там как правило есть такие особенности как цель почему то там до обычную отель по дефолту там 64 до время жизни пакета а там там не знаю 240 немножечко необычно странно ну и вообще сам пакет можно формируем быть странно то есть прямо можно выпить и bolsie делать фильтр по конкретным полям пакета и отбрасывать такие еще есть такая проблема как рандом сам domains когда задают вот примерно такие вот странные запросы да вот обратите на левую часть практически рандом это вызывает большую проблему как для рекурсивных серверов они на каждый этот запрос начинают выполнять рекурсивные запросы так и для авторитетных и в общем-то цели вот таких запросов положить как раз авторитетные сервера боремся смотрим на статистику прикрываем источники то есть просто баним то есть либо как вариант еще отправляемые отдельный пул с помощью dns dist и время оставалось мало поэтому вкратце расскажу чем сейчас занят и dns люди во первых ipv6 то есть те же самые google и яндекса вы и публичные рекурсивные сервера в основном в первую очередь делают запросы по ipv6 как то так получилось что вот нравится мое пиво и 6 вот и активно пытаемся внедрить также мы пытаемся внедрить дэйна сек это такая штука с помощью которой мы можем проверить построить цепочку доверия от корня до корневу серверов до авторитетного сервер и убедиться что записи которые нам отдали нам отдал им этот сервер за который отвечает клиенты записи не какие-то подставные которые нам дал какой-то злоумышленник в нашей же сети на основе единой сети к есть еще придумали д н д м это такая штука когда публичность и сертификата например ищите пвп сервера или почтовые серверы мы кладем прямо в dns и в этом случае браузеру можно брат браузер может проверить подлинность веб-сервера за счет записей в dns и и который проверен в свою очередь для носика есть еще также к вере минимизация когда запрос или курсоры идут не целиком по всем не полностью домен спрашивается у всех серверов до цепочки при рекурсивные запросах запрашивают только нужную часть за которую отвечает конкретный сервер то есть у всех и там корень и у корня уру селектору мы спрашиваем не селектору alcor не спрашиваем про ruru спрашиваем уже по селектору е dns client согнет когда recourse отдает авторитетному серверу еще также адрес подсети из которой пришел запрос конечного пользователя нам простой домохозяйке этом необходимо для того чтобы лучше узнать точнее определить его географическое расположение конечного пользователя и дать ему лучший ответ да на основе с помощью геоданных что самое интересное dns client subbed драфт уже не действуют до то есть нет полноценного утвержденного rfc но при этом этот механизм работает и в том числе google добавляет соответствующую информацию если их попросить запросы авторитетным сервера еще есть yeti pro джек так называемый это тестовая площадка корневых серверов до можете поучаствовать она работает исключительно по ipv6 не так давно там появилась уже аж целых 13 живых тестовых корневых серверов да и на них обкатывают новые свежие технологии до которые возможно когда-нибудь все придут в основные корни что почитать be happy best practice естественно есть отдельные рыбки который обозначен как be happy rfc без этого никуда то есть как правило все что вам нужно до чтобы сделать хороший сервис уже все написали это уже есть мир и все и dns operations и ты это tracker то есть это можно посмотреть те и рекси которые будут там будут приняты там через год через два которые сейчас обсуждаются и возможным как-то даже повлиять на рабочей группы своим мнением если у вас есть какие то вопросы то задавайте спасибо за внимание если у нас есть время до здравствуйте спасибо за доклад меня интересует такой вопрос от вы рассказывали про систему dns который как она вас организована в принципе а расскажите немножко поподробней кокос организован продвижением dns для конечных клиентов то есть от мир я out and user я завел себе домен прописал там ваши ns его себя панельки и теперь я иду вашу панельку прописывать себе данной записи как это реализовано технически на вашей стороне вы идет приходите в нашу панельку добавляете запись в этом site.ru а записей печник такой же нажимаете ok это записывается в мастер по сгрыз да он еще реплицирует на всякий случай в резервный слайда чтобы если с ним что-то переключилось дальше landis ты с помощью триггерного репликации все это улетает на конечной точки до географически определенные происходит это примерно там не не знаете секунды три четыре вот через три четыре секунды как вы нажали окей это уже будет размазано по всем географическим точкам у нас их 10 и все записи работает конечно или курсор уже получать но и есть естественно нюанс дата это время жизни то есть если у вас до этого был какой-то другой пи адрес и время жизни у него стояла сутки то конечные пользователи возможно увидит эту ну новое значение уже ну там только через сутки когда запись протухнет знаю recourse операторы у вас на бленда хоккей сервера где на бэг-энда hdi на серверах и вы используете mayn't dns сервера на бантике вы используете баян или что то другое dns сервера под брендом смысле к некая конечно как куда предана повар dns power dns смотрится в под grease и соответственно берет данной оттуда и отвечает у него есть небольшой еще кошек временем в 2 или в одну секунду так называемые пакет и чтобы каждый раз не ходить в базу запросов много он просто берет периодически своего кошелька а какой-то клиентские 5 планируйте давать для управления данной записи уже есть он сам описано или какой-то да да да да самописный на пяточки ну то есть для вас это ристопии можете прийти написать свои обвязку свои файлы word поищут вопросу почему самописная если уже принципе есть готовое решение для реализации управления д.н.э. записями например взять воды вы говорили у вас пройдет в audi используется openstack есть такая штука называется окон 100 где зе грейт вы пробовали его до его запускал production но там есть определенные проблемы которые мне не понравились например он завязан скажем так на нечто свое стандартные нет он завязан просто на классический dns у нас планах сделать и еще такую услугу как дела dns дает дать этому это клиентам когда вы укажете что вот этому человеку из новосибирска дайте мне конкретно такой-то опята если вот вот этой подсети да давайте вот такие записей нужно будет переписывать designing да потом услуга доменов у нас ноги сегмент никак не завязаны точнее на openstack дает она предоставляется остальным также клиентам арендованных серверов и так далее colocation ну то есть она у нас в общем-то не привязана ни к чему тут просто вопрос то он задевал выбрали самади снайпер они угол бы уже готовые решения коллеги к сожалению времени уже нет удовольствие в кулуарах или на стенде select л а я думаю вам подскажет всем приятного аппетита"
}