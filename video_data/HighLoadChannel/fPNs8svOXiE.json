{
  "video_id": "fPNs8svOXiE",
  "channel": "HighLoadChannel",
  "title": "Инцидент-менеджмент в Badoo / Илья Аблеев (Badoo)",
  "views": 2920,
  "duration": 2909,
  "published": "2018-08-16T04:57:32-07:00",
  "text": "в общем меня зовут илья я работаю в компании водой сегодня буду рассказывать вам про то как мы вообще живем с инцидентами хардкора технического не будет будет просто скажем организационная вода которая многим не интересно обычно но речь не про какие-то бери критические штуки а про эмоции которые обычно негативные мы каким-то образом пытаемся либо их свести в нейтральные либо там сделали какими-то положительными давайте вообще определимся кто давайте сначала скажу про что вообще мой доклад будет первая часть про то как мы производим плановые работы дальше поговорим про инцидент и потому что это почти связаны и две вещи про то как мы информируем об этих двух вещах и то что мы делаем после всего этого этапа смартами давайте определимся вообще у кого есть регулярные плановые работы которые они делают мне на каждый день или каждую неделю не очень много но вполне себе что вообще такое плановые работы плановые работы это запланированное событие которое меняет что-то или например приносит что-то новое в вашу систему если вы являетесь например клиентам какого-то провайдера или даже если мы возьмём ситуацию просто дома пользуетесь интернетом наверное провайдеры как когда-то выполняют какие-то работы то есть у вас бывает downtime многие не задумываются но плановые работы это негатив для пользователей когда у него нет никакого другого методы решения той задаче которая решает ваш продукт если вы например производите плановые работы который затрагивать каких-то клиентов чтобы вы мне объясняли как вы мне говорили что это нужно и необходимо для них это негативный эффект что обычно происходит когда люди делают какие-то работы в общем берете вот список этих фраз и начинаете использовать его у себя если вы думаете что ваша работа там занимает пару минут скорее всего вы подумаете что ну а бы об этом не нужно сообщать все пройдет гладко а а если там кто-то заметит то ничего страшного мы сделаем их не просто так потому что хотим чтобы мир был лучше и естественно там самая популярная фраза в этом тот кто не совершают не совершает ошибок . ничего не делает мы собственно жили с этим мы иногда такие фразы возникают это плохо в общем не делайте никогда так как написано этом слайде что вообще нужно что что нужно знать и помнить про плановой работы нужно их планировать как бы не смешно это не звучало если вы планируете плановые работы значит это действительно плановая работа если вы запланировали за 5 минут но это можно назвать натягом плановыми но это не плановой работы это инцидент если мы говорим про нашу компанию наши плановые работы планируется как минимум за 12 часов с вечера предыдущего дня если мы делаем что-то на завтра нет никаких запретов на то что была запланирована примерах за неделю чем раньше народ узнает о том что что то будет не так тем быстрее они могут подготовиться например там они поймут что компонент который кто-то будет мой теннис не совсем идеален и если мы будем делать эти сейчас то будет что-то не так например и сможет сделать там какие-то подготовительной работы к этому или например вся компания как в нашем случае 50 человек идет на конференцию и скорее всего вот эти два дня там 7 и 8 ноября это не самое лучшее время для того чтобы проводить какие-то крупные работы не будет людей и они будут медленно отвечать если что-то пойдет не так вовремя них зачем вообще нужно сообщать про то что вы собирались что-то сделать как я уже сказал они вообще будут знать что что-то будет что что что-то может пойти не так если человеку вдруг внезапно прибежать и сказать что а мы вот тут попытались перезапустить сервисы он не поднялся скорее всего для него это будет стресс если он будет знать заранее то наверное он будет скажем морально готов к тому что возможно придется что-то делать особенно если он в курсе что архитектура не идеально ну и естественно этим самым вы предотвращаете тот негатив который может свалиться на вас от этого человека ну и как уже ранее сказал ответственно подходите к процессу если вы планируете значит вы продумываете ваши действия не просто их делаете когда вам вздумается у нас было байка ну и сейчас есть такой мем уже не актуальны почему вот поймете во время этого доклада во всем виноват админы ruslan ruslan этот человек который сидит прямо сейчас в зале пытается скрыться каждый раз когда что-то происходило у нас происходило это обычно по вине админов или там по вине ruzanna админы очень часто делали какие-то работы но потому что без этого никуда и не как и очень часто люди начинали страдать от этого сейчас расскажу как мы вообще пришли к тому чтобы они не страдали и почему мы сейчас практически не используем этот мем незапланированной работы это инцидент инциденты случаются у всех и они всегда несут негативный эффект кому-нибудь что бывает когда у вас происходит какая-то проблема берете вот этот список и опять же не делаете то как здесь написано если вы говорите что там быстро причине никто не заметила ли быстро поднятый сервера не является упавшим просто классика скорее всего вы не правильно работаете или думаете потому что с таким с таким суждением по-любому схватить и негативный эффект вот там ваших коллег которых это затронуло или от пользователей что нужно помнить во первых что если вы столкнулись каким-то инцидентом можно нем рассказать если происходит какая-то большая авария и она затрагивает очень много компонентов вашей системы то скорее всего заниматься будет не только один человек многие полезно смотреть особенно если они ответственно ребята и будут пытаться что-то сделать во первых если кто-то там принял на себя ответственности занимается именно решением этой проблемы они там разогреваем каких-то дополнительных штук то люди все буду знать что ответственный такое-то занимается он не нужно лезть и делать двойную работу можно там пойти не знаю понаблюдать что с вашей подсистемы все в порядке если она фиксится если например мы говорим про клиентов то как как обычно бывает нам например провайдер какой-нибудь ну налажал и у вас там упал сетевой канал что вы делаете вы первым делом пишите провайдера говорите а вот у нас не работает ваш сервис если они например уже в курсе или даже если не в курсе они вам говорят что ну вот у нас все работает или да что то есть мы там посмотрим они никогда не делают практически никогда не делают если кто-то среди вас есть кто-то из intent проведен гаи так делает уведомляет о том что что то происходит извините но обычно мы наблюдали то что какие-то цедент и замалчиваются они говорят что там мы посмотрим нет никаких проблем все в порядке а потом действительно все восстанавливается и каким-то магическим образом не работал только у нас почему-то собственника сильный эффект так продолжают копиться если бы они нас предупредили что вот сейчас у вас там все сломается мы тоже были морально готовы и не стали бы лишний раз написать в техподдержку и так далее ну и естественно все эти инциденты они приносят убытки убытки бизнесу или этом нервам людей зачем о них сообщать уже сказал чтобы сгладить негативный эффект если вы при этом ведете учет всех этих инцидентов можно в будущем проанализировать какие проблемы вас наиболее частые и например устранить причину в принципе но предположим опять же там центр на проводе ну если у вас постоянно происходит там отваривании какого-нить а плинко и увидеть что это стабильно разумеется наблюдается но наверное вам стоит сменить интернет провайдера и в будущем вы не столкнетесь с этим с этой проблемой ну или например там реализовать схему фолловеров чтобы там падение одного пленка никак не effective ваше приложение ну и естественно если у вас аналогичные проблемы постоянно повторяются ну значит нужно просто сделать так чтобы таких проблем в принципе никогда не было переходим плавно к уведомлением уведомление очень часто про про них забывают и забывают таким простым и человеческим причинам во первых никто не хочет заниматься бюрократией если мы говорим о том что нужно написать письмо куча людей сразу воспринимает как дурак россию типа я технический чувак я письма писать не хочу мне нужно работать более того если например даже он объявит о том что что там случилось в нашем случае там у нас есть 100 технарей который сидят прямо сейчас читаю эти письма у них могут появиться какие-то вопросы например они знают чуть больше чем там рядовой программист о том там как работает какая-то хардкорность штуковина на низшем уровне там системы они могут начать спрашивать какие-то вопросы люди начинают а греции говорят что ты ничего не понимаешь давайте лучше там попозже расскажу и так далее если бы они в принципе этом написали пару слов что почему конкретно это произошло возможно никаких негативных вещей не происходил между ними или например чувак увидел какой-то новые слова и полез его гуглить разбираться почему что что тут произошло и почему оно вообще влияет вот короче не используйте этот список как много как вообще можно уведомить людей обычными опять же человеческими способами либо напишем письмо либо созданием какой-то веб-интерфейс и проинформируем через него с точки зрения писем очень много людей если например пользуется каким-то хостингу им платформами и хостинговой платформы планируют работы на своих там гипервизорах они пишут что там мы и там обычно за две недели или может даже за месяц что они там планируют открыть системы что скорее всего все будет в порядке но при этом может что-то пойти не так поэтому вы пожалуйста подготовить и даже если вы понимаете что вашу систему идеально вы просто будете знать что ага вот там через две недели может что-то пойти не так и если что-то там будет не так скорее всего претензий предъявлять будет бессмысленно потому что они же предупредили они сняли себя ответственность по этому поводу abyss плановых работ как мы же помним никуда не денешься дальше каким каким образом можно уведомить либо например отправить эсэмэску либо написать короткое сообщение в messenger а может быть не короткая длинная если там позволяет этот мессенджер мы например в своей работе используем календарь удобно для тех кто там постоянно загруженный смотрит в монитор никуда не переключается там только программирует если ему всплывает какое-то уведомление из календаря он видит что да сейчас что-то может пойти не так ему начнут там звонить или писать и так далее ну и короче все что угодно может быть вы там будете составлять какие то настоящие письма и там отправлять их голубями или почты россии не важно главное что вы уведомите о том что что-то пойдет не так или что ты сейчас идет не так собственно как я уже сказал люди нормально относятся к тому если вы уведомить их заранее то есть первое правило нужно уведомить как можно раньше если например у вас нет каких-то нет нет культуры построения плановых работ или видение инцидентов можете например взять за основу что как минимум за сутки или за один день рабочий нужно уведомить о том что вы собираюсь что-то сделать в нашем случае это так иногда планируем дольше по времени если это инцидент и мы уважали нужно всегда писать о том сколько примерно это будет чиниться точно знаю что в этом админской среде не знают об среди очень тяжело спрогнозировать время восстановления потому что обычно чиниться все как я починю как только так сразу если она заработает значит она заработала но если не заработал то давайте еще подождем ну это нормально можно спрогнозировать например абстрактно за час если через час ничего не поднимется и вы можете дать снова падают что например нужно подождать еще час или если вы спрогнозировали это на 1 час но сделали за полчаса вы просто молодец потому что у вас прогноз было хуже но сделали вы лучше при этом если вы взаимодействуете с какими-то людьми из страны например это 3 лица какие-то клиенты которые пользуются вашими услугами то лучше будет если вы успокоите их на час то есть если вы искали час они будут час ничего не спрашивать ее скорее всего просто ждать выжидать если вы почините за полчаса вы просто будете молодцами в глазах давайте определимся кто оказывает услуги технические каким-то людям или клиентам то есть они публичные именно технологически как например хостинг или что-нить это вроде не очень много но нормальное количество у нас все уведомления проблемах приватные потому что мы оказываем услуги именно клиентам которые пользуются нашими мобильными приложениями сайтом поэтому их уведомлять о том что мы собираемся делать какие-то работы бессмысленно абсолютно потому что их это может затронуть их может не затронуть у нас там онлайн миллион человек на сайте все мне разошлет эти сообщения да это не знаешь когда человек будет пользоваться сайтом вот а если вы завязаны на какие-то отношения с какими клиентами то вам этого просто нельзя избегать ну и да если вы не успели починить то лучше заранее сказать там за 5 минут до окончания этого времени которые вы спрогнозировали о том что вы не успеваете и там время нужно увеличить потому что как только пройдет нам этот час люди засекут не знаю на секундомере и как только отметка будет ровно часа и начну вам звонить писать и говорить что вы не выполняет своих обещаний вам негатив не нужен поэтому избегайте этого каждый раз когда ты пытаешься заставить или попросить человека уведомлять о том что он делает возникает первый вопрос или фразу что их никто не читает эти уведомления и действительно может показаться даже если у вас четкая отстроенная четко стройный процесс того как вы уведомляете людей и вы думаете что раз уж написали ту точно прочитают но при этом никто не когда вроде бы не в курсе о том что что творится это неправда у нас были такие ситуации когда мы писали писали писали люди никак не реагировали и вроде бы это происходит незаметно как только мы начали задерживать на отправку там уведомлений или перестали уведомлять запланировав работах люди сразу всполошились и для них это уже было нормой то есть они считают что если мы уведомляем значит это так и должно быть то есть если мы сообщили о планах работах это нормально если мы не сообщили о плановых работ их но они начали доделать все мы плохие и мы виноваты вот как случае с админами если если мы не сообщаем об инцидентах то люди начинают родитель много времени и нервов и так далее если мы сообщению сообщаем об инцидентах они там сидят и ждут пока этого становится при этом если например вы используете несколько способов оповещения то каждый раз нужно напоминать людям о том что мы действительно добавили информацию даже когда мы начинаем просто писать письма и до этого люди просто не считали эти письма и не привыкли потому что есть какая-то рассылка сну информационная они могут сером приходите начинаете там вас доставать мол а почему не сказали и так далее или почему там сервис не работает отправляете их постоянно туда куда нужно туда где нужно узнать об этих проблемах например на дом подпишись на такую почтовую рассылку туда постоянно приходит обновления наверное примерно год у нас был такой процесс когда люди приходили в наш публичный чатик публичный внутри компании чатик и спрашивали мониторинг а что происходит там с какими-то не знаю базами демонами и так далее и каждый раз нужно было им просто говорить что мы об инцидентах теперь тоже не портим потому что изначально уведомляли только о планах работах потом начали об инцидентах и ты можешь нам подписаться на рассылку пойти посмотреть потом люди просто перестали писать очень много в чат и первым делом всегда провели рассылку если они не видели ничего рассылки тогда они пошли спрашивали типа а все ли там в порядке если нет то мы например писали в рассылку тогда не успокаивались то есть так спросит 10 человек тут спросил один письмо появилось все все счастливы ну естественно если вы уведомляете кого-то и каким-то способом всегда спрашиваете к этому конечных потребителей этих писем устраивает ли их то как вы это делаете на уровне россии письма не совсем понятно значит смысла их писать особо нет спросите у там и рядовых людей которые не занимаются инцидентами все ли здесь в порядке они вам дадут комментарии вы можете прислушаться но никогда при этом желательно опять же не стоит негатив и если вы будете говорить что так и должно быть ты просто ничего не понимаешь смысл в этих рассылках никакого нет ну или есть там событий в календаре будут плохо понятны это тоже да они должны быть понятными если вы создаете какой-то какое-то событие там в почте или в календаре всегда думайте о как это прочитает там человек который не разбирается в этом предположим там если вы админ и вы хотите там поменять какой-то сервис напишите об этом там нормальными словами есть developer поймет то всех подумайте как девелопер если все становится понятно можно пустить если нет скорее всего нужно например там подключить кого-то чтобы первый раз взятие составить грамотное письмо а потом уже все пойдет по накатанной и естественно можно но не обязательно указывать какие то очень прям хардкорные детали не знаю там причины текущего обновления почему мы там обновляем прямо сегодня очень быстро предположим там через пять минут нужно очень планово обновить очень важный демон у людей сразу начнется вопроса почему то мы планируем но за 5 минут наверное там какая-нибудь бага вы можете написать список бак багов запустите китае или там не знаю ссылки на репозиторий с чем джами и все такое прочее как было у нас мы когда составляли когда мы писали первые там письма о том что она что там он тянется мы поняли что если мы просто пишем то название бас это название компонентов люди не всегда понимают к чему это вообще относится и мы поняли что нужно составить своеобразную карту всего что у нас вообще работает и всего того чего мантой ниц и делали как начинаем - по каким-то там базам или сервисом если этого сервиса нет списке то мы добавляем его и расписываем там три колоночки то что мы маинтини им какую функциональность у нас несет на сайте и какой вообще уровень критичности там важно или неважный все будет не работать так далее то что некоторые вещи типа авторизации людей она естественно там аффекте timemessage и если человек не сможет авторизоваться он не сможет отправить сообщение поэтому там дроп на графиках может влиять в нескольких там уровнях важности и когда мы каждый раз писали когда каждый раз мы писали письмо о плановых работ к мы просто вставляете ссылку на этот документ а если человеку действительно интересно что что что произойдет он открывает эту ссылку находит нужно этому компоненты читает получает какие-то новые знания в последствии когда он читает там уведомление аналогичных работах он уже помнит на что это влияет и знает может его за эффекте следили не за ifixit письма сначала мы как мы вообще как мы жили с этим сначала мы писали просто письма вручную каждый раз человек садился открыл почтовый клиент и писал о том какие работы будут там происходить завтра после завтра там старая вставляю ссылку и так далее затем мы поняли что люди немного стоит от почты и почта это нужно кликнуть открыть письмо прочитать и так далее нет какого-то очень быстрого место же о том что произойдет поняли что хорошо бы было прикрутить календарь и это как раз было было пожелание со стороны девелоперов а так как мы эксплуатацию то нужно прислушиваться и все такое мы сделали им календарь удивил пиро начали подписан на календаре там сидит devil предъявил пит ему всплывает уведомление о том что там его компонент начнет мы теннис через десять минут он уже наготове что если кто-то ему позвонит и скажет что у него что-то не работает на сайте он может сказать что это там плановые работы их делают и все было запланировано нужно просто полчаса подождать все восстановится для особо ответственных людей которые хотели там в три часа ночи получает уведомление мы сделали это уже там встроенной фичи календаря там подписка на эсэмэски каждый раз когда что-то происходило и начиналась им подала уведомление о том что там работа начались кому-то может быть удобно плюс как я уже говорил мы сначала все писали руками потом вы поняли что все письма шаблонные умещаются такую простую рыбу типа когда время восстановления время окончания этих работ или инцидента что там короткое сообщение что мы вообще делаем ее там зачем мы это делаем или какие технические детали на коленке написали интерфейс можно там сделать не знаю вход в google форме и начали шаблон на отправлять все эти письма если человек смотрит письма в одном и том же виде то скорее всего у него не будет каждый раз мозг переключаться на какой то новый на какой то новый стиль написание как вот в первом случае когда человек просто приходил и в свободном стиле писал что он что то начнешь что-то начнет ломать каждый пишет по-своему то как ему нравится и так далее сейчас как мы живем с этим всем у нас есть простой интерфейс вот как раз этих полей скрина не будет ссоре можно потом показатель например если кому-то реально интересно при этом он сопи если например что-то происходит мы можем либо дернуть этапе и посмотреть нет ли на списка активных работ эту идею кстати скорее всего подчеркнули от фейсбука у которого есть ссылка там devil пирс . facebook.com на котором они постоянно публикует уведомление работах или об инцидентах и если например какие то там системы с нашей стороны например мы авторизуемся ших людей через facebook если они аффекте зато мы знаем что например потом падение на графиках авторизация через facebook совпало с временем работ то скорее всего это она из нашей страны ничего не ломалось нам делать ничего не нужно нам нужно просто подождать либо какие-то например статус позже есть у людей у twitter кажется есть если там какие-то большие вещи ломаются вам даже вконтактика у них есть таблица с тем как сервис какой сервис в принципе существует и на сколько там процентов он жив и работает вообще сейчас или нет там красный зеленый и так далее есть даже upon собственно аналоги если например в вашем случае приживется то но прекрасно люди будут просто заходить видеть табличку что там у нас все живые ли у нас что-то не работает плюс в нашем случае мы решили разделить не только на красный и зеленый работает не работает но и описать уровень вообще деградации иногда бывает так что например пользователь в принципе на сайт зайти может но какой-то функционал у нее не работает например он не может отправить сообщение и хорошо бы например было посчитать вообще насколько там пользователи за affection и там на 10 процентов на 20 30 50 или 100 у нас там своя градация по своим причинам можете выбрать свою если вам например то надо а потом посчитать насколько критичны были те недоступности затем прошедший месяц или квартал мы так иногда делаем мы сравниваем нет ли у нас очень часто там проблем с базами и все такое мало времени осталось короче рассказал я вам про то что бывают плановые работы про то что бывает инциденты про то как можно уведомлять есть еще один немаловажный и кусок того что бывает после всего этого это посмотрим и посмотрим и это описание того что случилось например случилось случился какой-то инцидент нам нужно разобрать вообще почему случился докопаться до деталей так далее и как я в самом первом пункте сказал про плановой работы ван его работа это тоже инциденты есть например плановые работы за аффекте ли пользователя очень сильно то скорее всего вам нужно тоже провести работу над ошибками и сделать так чтобы такие плановые работы не of exile пользователь так сильно например там поменять архитектуру давайте прям быстро пробежимся паратова потому как как вообще выглядит посмотрим и что они себя представляют наверное все слышали в начале года ты 17 аудит лобо который представляет хостинг был очень сильный такой а вот эйч полтора дня помыли два дня когда у них просто не работал хостинг они случайно удалили базу и все их сервис просто стал недоступен для всех наверное слышали все при этом они не сделали так как сделала какая-то тоже крупная контора несколько лет назад облачен хостингом когда они по моему удалили все виртуалке и все быка быка virtual com и при этом сказали извините мы накосячили мы закрываемся вот вторые сделали плохо первые сделали хорошо почему они сделали хорошо во-первых они не сказали что ну да у нас есть какие-то там проблемы мы работаем над этим они просто признали что мы вот удалили всю базу и это выглядело очень странно потому что во первых люди не привыкли что таких проблемах сообщают была очень большая был очень большой кипиш вокруг всего этого собственно какие цели цели посмотрим это не то чтобы кого-то там уличить в том что а вот в этом не профессионалы или там какие-то иллюзии у вас там косячат цель в том чтобы как минимум найти критичные проблемы их устранить чтобы не повторять таких ошибок то есть например если мы возьмем gid лап и у них случился инцидент с базы данных я уверен там почти на сто процентов что в будущем у них не будет такой же ситуации то что они провели ряд каких-то работ предотвращающих это ну и собственно когда мы пишем посмотрим опубликую публикуем его на там компании или например вообще в принципе публично и люди читают повышают свой уровень ответственности и свой уровень грамотности то есть если например человек работал с тем же набором продуктов что это мгид wap он скорее всего посмотрит на свою инфраструктуру и сделать те же самые работы прежде чем у него случится аналогичный инцидент логично но прежде чем опубликовать его нужно многое сделать как минимум восстановить все то что было причиной и оценить убытки очень часто можно но не частого кей особенно game дева часто можно оценить убытки именно деньгами нашем случае деньги не особо быстро можно посчитать потому что они там сползаются с разных агрегаторов но когда у человека есть метрика типа мы за 10 минут потеряли там 1000 долларов это очень хорошо потому что они могут оценить именно какая раз критичность проблемы по количеству денег которые они потеряли то что у них есть метрика бабло в секунду не знаю если у них в принципе в обычном режиме там тысячи долларов в секунду и они не работали десять минут умножаем просто на десять минут то количество где некоторые получали в секунду мы получили небольшую оценку в будущем это поможет вообще понимать например год назад мы косячили на такой-то на такой то коэффициент сейчас мы косящим на там гораздо меньше или наоборот она гораздо больше нужно что-то поменять потому что сломалось когда мы все это делаем у нас своеобразный такой итог в итоге получается как обычно говорят lex land люди знают что там они сделают для того чтобы в будущем не повторилось и в принципе не только там разработают какие новые фичи но и понимаешь что там в будущем при разработке новых фич скорее всего нужно вспомнить что у нас там были какие-то проблемы нужно их не повторять но при этом когда вы начинает все публиковать посмотрим нужно не доводить до абсурда если вы пишете о том что у вас там один пользователь из миллиона пострадал и освещаете эту проблему как критично скорее всего вы перебарщиваете но не стоит там докапываться до каждый детальки и до каждого инцидента можно просто выбрать если там например зафиксировать тот ищет пользователь тогда мы пишем если меньше то может быть не пишем ну или любую другую метрику не знаю про деньги например каждый раз когда вы пишете посмотрим нужно помнить о том что у нас все это происходило в какое-то время если вы устанавливаете timeline и помните там например начало было во столько-то конец вас только и между ними такие события то вы каждый раз можете улучшать и ускорять время реакция на эти события например один час мы потратили на то чтобы достучаться до ответственного наверное нужно сделать так чтобы соответственно нужно было достучаться как можно быстрее умер там выделить какого-то дежурного в нашем случае например навсегда и дежурный админ и днём и ночью готовы принять звонок от дежурного мониторинга если что-то идет не так потонуть точки зрения он звонит ему он через пять минут вылазит точно с ноутбуком в сеть и начинают чинить когда то давным давно по моим не было нас дежурных админов всегда у нас были всегда дежурные админу мысленно изначально были молодцы вот но точно знаю что не всегда такой работает и очень часто этом ответственость размазывать например как случае с девелоперами этом случае с девелоперам у нас есть схема когда один недоступен всегда должен доступен там быть 2 3 или там менеджер и собственно каждый раз если мы тратим время на реакцию с точки зрения мониторинга так и кригеры всегда мониторинг мы предотвращаем повторение таких же ошибок очень важный пункт что мы не видим никого лично мы считаем что накосячить вообще все если например человек пришел и смог там удалить базу данных ничего не мешает прийти и сделать такой же поступок новому человеку через месяц было опять же по уму летом недавно история когда какой-то junior устроился на проект и в первый же день выполняя какой-то мун all из вики внутренней дрогнул production русскую базу его уволили и там вписали какой то штраф он пришел на реддит написал о том что я вот совершил какую-то ошибку и мне теперь будет плохо и тут же пришел чувак из гид лобо который сказал я тот самый кто удалил ту базу данных там не волнуйся ты не виноват и это не было скажем так поддержку он не просто говорил какие то там громкие слова действительно если там чувак накосячил через год можно наступить на те же грабли и ты не будешь каждый раз при приёме на работу рассказывать о том что мы не удаляем баз данных пожалуйста не делай так вот ну естественно опять же если мы там совершил какие-то ошибки нужно все без таких фактов все без каких-то ярких красок такими фактами описывать если сейчас будут кстати примеры поймете про про что мы естественно когда у вас проблемы только кончилось и вы думаете фух я отстрелялся не думайте так лучше начинать писать сразу после того как проблема решилась чтобы свежие воспоминания были и естественно писать даже непосредственно участник потому что у него есть точные детали мы не публикуем там его имя но зато пишет он во первых он со мной соответствие и скорее всего не повторит там этих же ошибок но кроме ruzanna потому что он каждый раз наступать на те же грабли ну ладно ладно вот собственно давайте быстро прямо потому что мне говорят кончается время как выглядит посмотрим у нас мы разделили для себя на 6 на 5 пунктов весь документ что было как выглядел для пользователя когда я в течение какого времени как много пользователей затронула причины и что делать чтобы не наступить на теже грабли в будущем что было как выглядит для пользователя пишем простым и понятным языком я тут у не стёр не важно если вы пишете какую-то хардкор ну штуку и публикуете для всех есть вероятность того что там из ста человек поймут только там пять или десять лучше например написать какими-то общими фразами а уже в технических деталях написать какие-то хардкорные подробности даже если человек поймет что а это не для него и он ничего вообще не поймет скорее всего он просто пропустит но хотя бы будет знать что у нас такие проблемы были например мы выложили по счетам номер 666 у нас случились по талые юзер увидели белую страницу это точно проблема потому что ну человек не мог зарегаться нужно разобрать и нужно сделать так что в будущем он смог это сделать второй пункт когда и в течение какого времени время важно если вы не будете писать но это будет как белый шум какие-то события происходят никто не знает когда у нас а там два из в москве в лондоне и поэтому мы пишем мы решили что время скажем так между офисная это витязь и мы всегда пишем обо всех событиях в утесе формате то есть в 1200 случилось какое-то событие на какое событие если мы уже там пофиксили проблему и все уже восстановилась можно написать что-то надо заканчивать 1300 если при этом у нас сервис восстанавливается там еще несколько дней можно написать что полностью становится через там три дня когда это когда это видно например если у вас есть онлайн пользователи которых вдруг резко разладе нила у вас же при исправлении проблемы люди не зайдут на сайт и у вас не станет им сто тысяч пользователей в тот же самый момент онлайн пройдет там час-два когда они снова попытаются зайти на сайт и у них все будет работать собственно так и пишем там с 12-13 у нас были проблемы так много пользователей затронула опять же метрика которая нужна чтобы оценить то как мы как сильно мы накосячили при этом она должна быть понятна всем там начиная от простых людей заканчивая совсем не техническими и супер менеджер скими самого верха me в нашем случае у нас это очень размыто оценка потому что мы меряем пользователями но пользователи могут как не иметь возможность пользоваться этом вообще так и страдать там на 50 процентов или на 20 и мы это обычно указываю например там не мог залогиниться совсем или не мог зарегистрироваться собственно в там в данном примере мы там три с половиной тысячи регистрации теряем потому что у нас одна новая регистрация в секунду но это довольно сильно многие из них например могли бы прийти на сайты уже платить деньги за какие-то фича описываем технические причины помимо технических еще есть еще организационные если например мы целый час названивали сели в принципе этом не знали о том что проблема существует значит наверное что то делали так прям сюда все пишем опять же без эмоций и при этом чтобы если вы какие-то технические детали указывайте их должны все понимать напишите сначала общую фразу мы обычно делаем так the london and ride пишем дальше какие-то хардкорные детали для тех кто понимает но и при этом воду не лить потому что она никто не будет читать ваши документы если вы все время пишете там дипломную работу куда как я уже говорил нет есть нет я есть мы обеспечиваем какие-то отдела людей и прочее команда накосячил и каждый раз когда вы какие детали технические пишите давайте на проверку своим коллегам коллегии всегда знают чуть чуть больше или они смотрят под другим углом на эту ситуацию они могут дать какие-то важные комментарии мы еще указываем timeline потому что потому что он важен нужно какие-то вещи улучшать например мы слишком долго решали какую-то проблему следующий такой факап мы наверное будем делать это быстрее а если там дольше мы хотя бы сможем с чем-то сравнить у нас не будет такого что на полгода назад мы вроде бы делали это час мы возьмем откроем посмотрим сколько мы на самом деле сделали если вы и там research эти это тоже какое-то время тоже указываете сюда собственно вот причины зачеркнутым это указано то что писать в принципе не нужно там нет ни проверим не синтаксис поэтому проблема случилась делать не в гите дело в том что в принципе была возможность накосячить ее там синтаксис был неправильный мы и timeline целый час он длился и мы видим что с 0 минут до 55 и мы ничего не делали мы просто ждали пока у нас юзеры не поле не пользуется сайтом что делать чтобы не повторилась думать головой эта фраза была прям тоже мемам и в каждом посмотрим первым пунктом она всегда звучала потом мы от нее ушли потому что но выглядит очень смешно толпа очень квалифицированы инженеров каждый раз пишет думать головой возникает сразу негативный эффект типа а что они не думают головы когда они делают эти ошибки вот но они люди поэтому они делают эти ошибки если у вас есть какие-то работы потому что вы делаете и они уже запланированы в тике системе кидайте чтобы люди в принципе были в курсе что там через полгода в этом через полгода когда они открыто документ увидишь что до такие-то работы проводились и они были оформлены в таком найти кисти они были сделаны или например не сделали не сделан но тогда они смогут спросить почему до сих пор ничего не сделали мы можем наступить на те же грабли и это может быть в принципе таким хорошим инструментом если мы этом наступаем на одни и те же грабли несколько раз а задача до сих пор не делается то мы можем просто пойти и там ответственному человеку задачу сказать что смотри у нас уже пять таких проблем а задача до сих пор висит ну и если у кого то есть документация надеюсь что многих пишите в документацию что там например проблема там таки это были решили их такта и все такое прочее дополняйте и и графиками ссылками на графике так далее но при этом лучше реализовывать технически это защиту от дурака потому что если человек не сможет прийти не сделать там белит from без какого-то б то это будет хорошо для всех но и собственно вот список там не выкладывать и патчами нужно за мониторе что у нас нет регистрацией нужно проверять синтаксис php мы и починить fatal он уже как бы это сделал вот еще немножко успеха чуть позже посчитайте до самый важный момент есть много или немного толст для построения процесс посмотрим например самый такое известно это марка тесте мы пробовали использовать не зашло потому что у нас очень развит пункт про коллаборацию мы пишем посмотрим и все вместе это два человека от отдела при этом review with ответственный человек за посмотрим и который называется посмотрим менеджер если мы пишем его то мы пишем обычно все в одном стиле и человек и вьют все это но потом когда мы публикуем посмотрим тот человек делает это своего имени чтоб не получилось так что посмотрим у пишет там русан 10 в 10 раз чаще чем кто-либо другой таким образом в нашем случае посмотрим менеджер это я и я продакшене ломаю потому что я работаю в мониторинге очень удобно люди знаю что там если какой-то косяк случился кроме тех ситуации когда мониторинг не позвонил например кому-то знает что там я про то не сломал я просто уведомляю том что что-то идет не так вот получился общем такой документ надеюсь что кто-нибудь будет делать это я уже там встречал людей которые там пообщались со мной и начали писать посмотрим и там вчера ко мне за обедом подошел один парень сказал спасибо вот спасибо итак у нас есть буквально 5 минут на вопросы остальные можно будет задать лично маш передай пожалуйста микрофон взрослый вопрос какие тузы для intel management использовать типа в confluence записываете ли куда у нас есть просто обычный там на коленке собранный интерфейсе он простой инцидент или maintenance нажимаем кнопку пишем что случилось чуть почему прикрутили туда автоматически reporting например на зависть и случаются какие-то alert и zabbix дергает эту ссылку и создает автоматическое уведомление о том что работы какие то там или идут или случились если они например очень короткие были и там типа вы тогда сделает кто это видеть может так далее но все это с вами у нас все открыто то есть без разграничения если человек является сотрудников то он видит все это у нас нет такого настройка и всегда заклад мы тоже начинаем варить подобной системой удаление инцидентов паспортом и но втолкнули в такой проблемы что люди разработчики других отделов говорят но пока вы не писали мы думали что на все отлично а теперь нам кажется что у нас постоянно кида проблема это нас очень сильно демотивирует вы не можете перестать этот писать не сталкивались ли вы с этой проблемы и как вы решали нет потому может быть локально но не так что глобальном все разработчики говорят об этом в принципе мы просто освещаем то что было раньше скрыта потому что ты просто не говорит что раньше было точно так же просто об этом никто не удалял и если они думают что на самом деле все стало гораздо хуже но вот и давай там поживем еще годик и посмотрим стало ли их меньше или больше если она стабильна один большой факап в месяц то скорее всего мы стабильно покажем 1 месяц вот и раньше было точно так же а если мы там уменьшаем это количество то вот вот вам прогресс но зато мы начали там год назад и теперь мы можем передавать какими-то цифрами а когда вот так люди не видели ничего и вдруг появляется что-то да у них может возникнуть такой эффект но опять же не нужно делать это прям с места сорвались и начали обо всех инцидентах уведомлять можно начать какие-то очень крупных постепенно давать людям привыкнуть к тому что да действительно нужно уведомлять об этом вот а потом уже этом сложить какую-то культуру и привить им навык того что нужно рассказывать что фак apes здравствуйте спасибо за доклад я хотел бы узнать такой момент мне бы вообще лично хотелось какого-то живого примера про вашу команду вот первую линию которые там реагирует на инциденты сколько вас человек сколько продлятся дежурство как вас эскалации прессуя могут все вопросы на стенде ответить я так что если есть какие то вопросы за этом пути наших отделов какие подходить или расскажем все детали ладно тогда в один короткий вопросе как этим сторонними сервисами например ну типа прижмёте пингом часто их навалом попробовали baiser de ti но пока не зашло так нет не пользуемся но только вот в google доках пишем совместные какие-то инструменты если кто-то что-то делает not как в случае с моргом то есть какие-то минусы которые проще реализовать написав полностью свое что мы обычно делаем и не публикуем конечно же выполз вот здравствуйте спасибо за доклад под жизненный тема для нас тоже актуально мед такой вопрос как вы коммуницируете ли вы с потребителями ваших internal service of то есть допустим у нас есть такой кейс мы делаем иногда maintenance некоторые внутреннего сервиса который вызывает интер об алтае каких-то уже текущих процессов там и некоторые долгоживущие процессы и соответственно мы пишем notify кашки про такие вы давно про такие maintenance и они вызывают также разработчиков боль то есть к нам приходят и говорят зачем вы так делаете ну не делайте так больше но вот интересно как то вас встроена как вы делаете бы интернет ваших интернет-сервисов и бывали ли у вас случаи когда к вам приходит говорят состава делать нельзя потому что у нас там допустим релиз все горит добывают построена то коммуникацию а тут прямо ситуации зависит например если мы пытаемся там случайно предположим админ решил обновить мускуле на базе который отвечает за релиз а у нас через час релиз наверное не нужно этого делать нужно подождать покорили закончится и тогда уже темпом интернете базу но обычно как раз человек планирует если кто-то видит что это аффекте того компонента он может перебежать и попросить нам отложить или сказать что давайте мы все починим со своей стороны тогда можно будет мой теннис ну то есть это уже ситуативно этом по-разному просто человеческие отношения такого что вот вы там запланировали вы плохие обычно не бывает все понимают что нужно делать то что мы делаем не обновлять сервисы или что-то еще в этом а какое вас минимальное окно уведомления то есть за сколько да вы пишите там за день за часто ну вот обычно мы пишем за день то есть если сейчас еще не короче рабочее время следующего дня в общем мы пишем в рабочее время сегодня devic'а на завтра да но и бывает так такое что вот прямо сейчас нужно сделать что-то ну тогда за 5 минут но тогда мы иногда разбираемся почему у нас maidens за пять минут до текущего времени до реальных работ и тогда уже например может быть эта проблема в человека который планирует работы а может быть эта проблема с компонентом который невозможно спрогнозировать ну решаем какие такие проблемы спасибо добрый день спасибо за доклад хотелось бы там где-то на слайде на одном было упомянуто такой парня что вы плановые работы каким-то образом отмечаете в мониторинге вот хотелось бы понять как вы это делаете как определяете т к е которые будут подвержены да вот там связанный к и который будет побед подверженной и как вы их исключаете из того чтобы дежурный но на них не реагировал и как бы реагировал но после проведения там уже этих работах но вообще у нас да есть дежурные которые там постоянно в курсе что какие проблемы происходит и он в курсе какие работы бывают мы используем это для того чтобы например нет салат лишние утомления то есть если человек тоже не если система знает что работать такие-то планируются наверное нужно отправлять автоматические письма деградации сервиса но просто там ступаем их и все завязано обычно это когда лампочки к их загораются в принципе отсекается там робот способен способен она не выключается потому что тот кто работает с сервисом и проводят какие-то работы он смотрит в мониторинг и видит что если он все сделал а лампочки при этом не ушли значит что-то не в порядке нужно пойти починить вот нас используется таким образом то есть никаких автоматических ту лов нет вы просто ну головы дежурного это делаете в они реакции да ну то есть человек может например сказать тому кто делает но мы планируем кстати делать что-то больше более автоматического но сейчас пока так вот больше используем в качестве отключению давлений потому что ну зачем рассовать личную информацию да а все вопросов нет мне вот понравился вопрос про то что и я забыл какой был вопрос из загона что парень в красной шапке вот да все спасибо всем"
}