{
  "video_id": "7SMBTm8hwjk",
  "channel": "HighLoadChannel",
  "title": "Опыт разработки модуля межсетевого экранирования для MySQL / О.Брославский, Д.Колегов",
  "views": 283,
  "duration": 1930,
  "published": "2018-08-16T04:03:02-07:00",
  "text": "меня зовут олег я работаю в компании positive technologies мы занимаемся безопасностью и однажды мы решили парсить майский казалось бы да зачем нам безопасникам парсить mais quel мы баз данных никакие свои не делаем обертки не делаем но тем ни менее понадобилось дело в том что я работаю в отделе исследований защиты приложений если проще я reset и мы вот те чуваки на сайте это те чуваки которые придумывают велосипеды которые будут защищать ваше в приложении следующие там несколько лет и однажды мы решили придумать такой велосипед для защиты от из коллекции кто в курсе что такое с келли лекции но да все в курсе отлично ну короче когда злоумышленник может составить какой-то код вашу цель запроса он там выполняться в контексте вашему запросу тут логичный как бы ремарка и сразу станет твоей да ладно чувак так никто не делает так никто не пишет все use the rain там все по красоте фильтруется и никто не атакует вы так делают это уязвимости исключительностью линекса исключительно в вордпрессе и только за 2017 год и их дофига то есть и причем wordpress они самое запросто заброшенная такая cms кое как вы искали никто зашли на часто все-таки возникают и проблема в том что фиксить их никто не хотят потому что во-первых это фиксить wordpress во вторых то может быть какой-то древний учили гости код который написано непонятно кем поддерживается вообще никак и ну просто нет никаких финансов на то чтобы его как-то исправить и поэтому все втыкают ваф ваф то такая штука которая стоит между клиентом и вашим приложением и собственно должна блокировать какие-то атаки вов и блокирует много разных а так они в принципе достаточно хитрые штуки если мы грима боске ленивцы яхта стандартным способом сражаться как тоске лекциями это вот эти три подхода первый из них это просто любой регулярке то есть под конкретную какую-то целый жку под конкретного уязвимость вот конкретно c маска пишется какие-то регуляр очки которые блокируют это конкретно атаку а второй вариант более популярный он более такой интеллектуальный это использование либо же либо injection кто в курсе как работает любим же action круто новая информация пошла смотрите любим женщин берет какие-то строки какие-то параметры где мы подозреваем содержится какой-то из кель код который может привести куски или лекции и дальше делает несколько достаточно хитрых вещей во-первых он это срока так и не зевать с точки зрения там и сколько кого-то диалекта получает последовательность токенов который затем начинает сворачивать у него есть достаточно хитро и правила свертки которые позволяют получить из ну какого то длинного большого вектор токенов небольшую маленькую свёртку но вот на слайде пример там свертки для вот такого бестолковой у него но она получается заметно когда короче этого запроса и компактнее и третья часть которой есть мы любим же экшене это огромная огромная база данных вредоносных сверток то есть если ваша строка сворачивается каким-то образом обладает вот эту группу вредоносно сверток которые могут привести куски и линекс и то запрос помещается как вредоносные должен быть блокирован это достаточно популярный подход он смог где использовав ах ну и еще все практически вов и говорят что они впитывают там какие-нибудь подходы основаны на машинном обучении которые чудесным тоже все блокирует но сегодня не об этом сегодня вообще на самом деле не про firewall и потому что как бы чудесно firewall они были как бы сложна и круто и бы джексон не было постоянно находится байпаса какие-то потому что там кто-то подобрал такой вектор который сворачивается во что-то чего еще нет будет листе мы вообще понятно дело что когда мы делаем что-то побоях листу то всегда найдется что-то чего там нет это первое первый недостаток строй недостатков это то что он не видит приложение он не понимает в чем он работает он работает с черным ящиком у него есть какие-то входы у него есть какие-то выходы и он вообще не понимая что там то есть вов они умны да но если приложение использует какой-то шутки про такого общения между клиентом и сервером если там какой-нибудь к старту протокол с каким-то с выпуском кодированием по фактам то во вкус становится очень-очень грустно и он не может учесть делать ну потому что он видит только запросы поэтому сейчас есть такая тенденция что нам нужно еще дтп с firewall то есть firewall эта штука которая будет стоять между вашим веб приложением и базой данных и соответственно она уже видит запрос целиком у нее есть какой-то простор для маневра какой простор она может взять этот гель запрос целиком и сделать там какое-нибудь предположение что вот эта часть раньше было всегда строкой из какого-то источника она это знает об этом тоже позднее подставить туда строковый литерал распарсить это все дело получить вот такой вот синтаксическое дерево дальше это синтаксическое дерево проанализировать и сказать там бойницы или нет самый простой способ как это сделать это после замены посчитать количество токенах если количеству токенов изменилось в какую-то сторону то скорее всего не акция была то есть вот на дерево это например очевидно и на дерево вообще можно проследить самое такое академическое определение инъекции то есть когда у нас синтаксическая структура за просто изменяется именно тогда у нас инъекция вот здесь красный вот эти taken и листья дерева они были именно вставлена злоумышленнику кроме того если у нас есть возможность и тактически анализировать вот мы на самом деле sexy ты синтаксически анализировать запросы мы можем делать достаточно много всяких прикольных вещей мы можем во-первых взять поставить вов где-нибудь на обучение не на некоторое время чтобы он посмотрел как и у нас запросы от приложения ходят и потом полученную информацию о чисто в запросах использовать для того чтобы как-то судите всех запросах веб-приложения например мы можем построить профиль запросов для веб-приложений мы можем сказать что наша привожу ху например никогда никогда не использует комментарий в запросах она никогда не использует функции md5 sum benchmark slip и она никогда не делает select запросов через точку , несколько соответственно если вдруг появляется к это запрос комментарием это не акция если говорить о более каком-то крутом таком научном подходе ты мы можем набрать все хорошие съели запросы от приложения и построить под ним маленькую спицы узкоспециализированных грамматику автоматически разумеется и дальше каждый приходящий запрос анализировать с точки зрения этой грамматики если грамматика запрос не парся ответственности тактически не валиден с точки зрения грамматики то запрос плохой кто-то там чё ты имитирует ну и более круто на самом деле мы можем парсить запрос мы можем анализировать на дереве его семантику и делать какие-то выводы о том кто какие данные запрашивают и даже впитывать там кинуть управления доступом 0 атрибут на и гарантировать что там user боб никогда не получат данные из таблицы пользователя элис чтобы вся эта красота работала нужен парсер нам нужно каким-то образом из запросы получить это самое дерево чтоб потом дать его каким-то умным штукам который поэтому дерево будут ходить извлекать нужную информацию ну и соответственно мы делали тпф дтп с firewall вы пришли к тому что надо чем-то парсить начали разбираться чем вообще можно парсить есть огромное количество сколь парсера в частности майский парсов реальных очень много такое чувство что каждый кому нужен пишет свой и поэтому очень много каких-то runtime специфик вариантов которые кто-то для чего для себя просто сделал в частности на края для рыб injection сделан ну автор говорит парсер на самом деле там таки на и зерна тем не менее кроме того есть коммерческие решения есть сайт компании sky парсер которые предлагают парсеры под много диалектов разные runtime и но проблема в том что они предлагают их как коробочку он их не дают доступ к исходным кодом то есть просто использовать как используете а за доступ к исходному коду требуют вообще не реальные деньги и как-то это использовать потом в реальном продакшене достаточно затруднительно или очень дорого есть большое количество всяких баз данных до которые например являются какими-то там улучшением или обертками над москве или в частности вот база которую разработчики youtube предлагают она тоже там какая-то обертка над mais quel там тоже есть парсер москве но к сожалению недостаточно полный хотя и достаточно быстрый есть официальный вязальная грамматика для майского илья кота генератор парсеров он под сизо точен и соответственно тут сразу какие ограничения мы должны сразу работать си и только си а и написать основной часть кода носи это не всегда весело и в частности для риса читать грустно еще есть интер 3 грамматика для моей сквер которые используют workbench и нтр трира тоже генератор парсеров он написан на джаве но проблема с этой грамматикой в том что она тоже узко заточена под си плюс плюс там непосредственно в грамматике прям используется языковые конструкции плюсов и плюс ко всему это интер 3 который сейчас уже устарел она не особо поддерживается нтр 4 грамматики небо поэтому мы решили часть делать ну стандартный подход да нам нужен свой парсер но чтобы уж совсем свой какой-то парсер не пилить мы решили сделать парсер под нтв r4 в перспективе во первых почему решили потому что это даст нам возможность очень плавненько включать поддержку других диалектов эскель мы можем взять написать парсер для майский потом добавить туда пашку это для тиски и они все будут получать какие-то синтаксически деревья и потом нужна небольшая магия нам нужно эти синтаксические деревья конкретных и скверов преобразовывать что-то общее то есть идея была в том что все эти стили они каким-то образом работают с табличками там никаких чудес не возникает там те же самые таблицы ensure the select и просто у кого-то с каким-то другими приспособлениями каким-то другим синтаксисом поэтому было подозрение что можно как-то это унифицирована описать и 2 + enter а почему его выбрали потому что у него очень много различных runtime of под которым он может работать то есть он может генерировать парсеры вот для этих языков и еще для java скрипта по моему но который нам совсем не подходила не в ключевого нас white для нас как для research и это большой плюс потому что мы все-таки пиши мне продакшен куат мы пишем прототипы и прототипе роль всегда приятнее на чём-то вроде питона а не на чем-то вроде джавы ну поэтому мы как раз ящеры выбрали самый правильный язык для написания прототипа написали прототип на питоне сделали минимальную грамматику которая по счетам нужно нам подмножество запросов там базовый какие-то select и insert апдейты написали оберточка на питоне сгенерировали классы runtime под питона интересы и провели тест получилось ну 454 всеми запросов в секунду но не очень потому что чтобы нам с нами хоть кто-то вообще разговариваешь там из бизнеса и скоры firewall нужно хотя бы 10000 секунда парсить потом меньше уже вообще не серьезно ну ладно мы пересечь ира умные мы знаем что если у наступит он медленно работает надо четко компилируем оттащить начала ну плюс и конечно нужно втаскивать соответственно мы решать мы не особо любим вот такой вот компилируем а и все нашли с трудом человека который она спешит как-то на плюсах он за прогул прототип запустили прототип он на порционным один сказа просто в секунду мы такие ну в принципе ладно сойдет мы честно питание напишем потом придут классные разработчики которые умеют все в highload красиво писать и по красоте напишут на плюсах а все будет проходить и для прототип сойдет дальше пахнем настоящую разработку и будем расти чуть дальше короче то можно фигачить начале мы работать сделали грамматику под для майское на интер 4 сделали ее независимой от ран то его чтобы можно было спокойно переноситься сделали ее об инсульте написали статью на хабре может быть кто-то уже видел окей запонку руссель грамматику грэм ребята отчетам и плюс плюс то кто-нибудь будет писать нам отвечает разработчик игры чет у нас 1 плюс новиков свободных нет не получится наверно в такие поздно поговорили там с кем-то лично кто-то в овертайм согласился подписать начали разбираться грязном си плюс плюс один у вас в прототипе он не получится в кинуть в текущей стек музыки но почему на это же си плюс плюс как можно его не втянуть куда то там где то нас debian 7 и 7 plus + 1 стадо вообще никак не и не втащим того что мы лифте point систему перри собирает всякие но вы делали у нас он работает одиннадцать тысяч запросов что делает а бросать что ли не надо дальше решать но рис вечера люди простые как бы надо питон начали уж надо пробовать дальше питон питон 3 он вроде как по новее должен побыстрее работать попробовали подпитан третьем тоже официально поддерживается интером сделали думали побыстрее будет но новый же питон нет быстрее не стала но приуныли конечно рисую всегда призывает к нельзя на бетоне написать хотя очень бы хотелось всё дальше какое решение как бы к кто как считает что мы дальше выберем дальше мы выберем puy puy потому что над питон как вон мои мои надо выжать из питона все что он может вообще питон пай поиграть как быстрый запускаем puy puy и получаем быстрее ура быстрее в два раза в два раза питон биться быстрее питона не си плюс плюс потому как бы чет не очень надо бы побыстрее но мы при унываем назад прихожу я разработчик нога и говорю чуваки ну и того я по красоте все сделаем питон даже рядом стоять не будет тамго рутины там все красиво сейчас сделаем gaming поддерживается ntlm вроде поддерживается примерно столько же сколько питон я право там прототип все говоришь с красиво не нервничать и запускаем парсон получаем вот так что еще не может быть над как как так то я же все хорошо писал хорошо но я человек серьезно запускаем профайлер там все это под микроскопом буквально исследованием исследуем кто косячил где про седы я кажется что все просадок у баку глубоко фронтами антиверо я вообще поправить там ничего не могу только если братья runtime пропатчить надо сказать что все которых и о на самом деле потому что когда мы сгенерили runtime по 1 т у р н вообще не с компе леса вот та ладно там дважды определенной перемены вот эти war все это очень равно и все остальное ok не проблема я это запад чел но потом ждал вот такой сюрприз я естественно расстраивался но меня ранит когда go медленные питона чтобы делать начали уже грустить никто ничего не хочет реализовывать пишем коллегам в апликэйшен инспектор говорим ребята вы на чём пишется не горят - и шарф они нам помогали с грамматикой под моей съели мы берем ну давайте это соберите у себя там попробуйте может что-то выдаст а то у нас питон огонь и тянут игре так все sharp поддерживается сейчас за пока им замутили прототип на сишарпе какие у вас ставки по производительности в десятках тысяч в тысячи меньше там 10 запрос в секунду сколько как си плюс плюс так примерно чуваки сделали прототип запустили получили тридцатку 35 на сишарпе быстрее чем си плюс плюс мы такие странненько но вообще ладно начали вот сишарп как ты продвигать типа ну вот есть ребята они могут носить шапки хорошо писать давайте мы типа им проект отдадим нам говорят разработчики сырого говорят нам она вообще тоже никуда честно говоря в стык давайте как-нибудь без шарфа давайте вы дальше пересечь эти вы же research придумайте чтоб красиво было ну мы такие в research и открываем runtime и смотрим бетон и отпали жалко но отпали город пал грустно ногу отпал плюсы отпали они хотят не хочет никто на плюсах писать чтобы не было единства стандарта и и вообще sharp и от по лимона нет свифт и понят делу тоже уже куда-то щит остался java но мы research музыки ну какой java то это тоже продакшеном и research мы не можем в java давайте как-нибудь без но на должны тестировать раз начали тип последний runtime остались надо протестировать какие оценочки сколько мы с java получим еще в кенте запросов или тысяч окей взяли java смотрим она поддерживается внезапно семь лет против двух лет всех остальных и разработчиков на 28 человек мы таки его интересам написано джавитом автор он профессор в какой-то серьезном университете и он тоже писал над runtime в токио можем пул может получиться очень вкусно как бы надо попробовать что-то запускаем java и получаем вообще космос 70 запросов секунды мы таки да ладно но это же java ну после сишарпа уже не так удивительно было но все равно мы таким не только не на джаве давайте что ни другое пожалуйста тут как бы череда несколько месяцев когда мы пытаемся запускать джаву и из всего чего угодно мы пробуем джейд он попробую пробуем запускать живым из питона мы пытаемся каким-нибудь образом бетон приклеить картриджами ничего не выходит начинаем использовать какие-то разные диалекты там какие какие-нибудь скалы там все остальное и находим котлин котлин он новый он классный и он полностью java совместим несмотря на то что он официально не поддерживается под ним все клево работает и он очень похож на питон можно прям братья пробовать даже reset чуров пробуем котлин и котле наказ так чуть чуть медленнее java 60000 нам как бы с потолком нам хватает то есть да даже если мы очень-очень печально все напишем там и производительность не проходим до тех до той десятке которые нам хотелось бы для прототипы иметь а дальше у нас есть разработчики разработчики сделают красиво почему приходим приходим к огромным такой таблички которая одной из вех выступление будет она про производительность разных ran to move on tv здесь есть все runtime и который мы тестировали и два режима скажу почему два режима первый режим это режим запросы которые поступают отдельно последовательно и здесь ответ на производились по запросов в секунду этот режим важен на вырвали потому что у нас трафик так устроен нам запрос и приходят кусочками мы их не можем сильно как-то спикировать кашира второй режим это режим партингов а его целиком а интер то жутко умная штука на самом деле она умеет очень много всего она умеет очень круто предсказывать следующий запрос она умеет кешировать какие-то части разбора и соответственно когда она видит какой-то большой файл и много много запросов в нем она умнее простраивать свою стратегию лучше кэширует и поэтому результаты получаются совсем другие относительно парсинга по запросу это первый момент да то есть файл парсить быстрее 2 вообще очень внезапный момент это то что питон парсит файл гораздо быстрее чем си плюс плюс и сишарп чем сишарп файл вообще быстрее все и это удивительно это нелогично это какие-то детали реализации м т у р а мы связались с разработчиками нтр с теми кто делал runtime шарпа ребята активно работают ищут баги но тем не менее если вы вдруг сейчас захотите порисовать какие-то файлы то учтите вот этими адекватные результаты которые есть на слайде это первое второе как мы помним мы хотели сделать чтобы у нас было много диалектов из киля и все одинаково обрабатывалась по красоте соответственно нам нужна вот эта часть которая будет из какого-то конкретно синтаксического дерева делать абстрактная смотрим у нас есть какие-то парсеры да под них есть грамматики на пантере они генерят какие-то конкретные синтаксические деревья деревья разбора потом есть какие-то visitors под каждой конкретной интеллекта сквере который получает какое-то унифицирована синтаксическое дерево так как у нас все пили они с табличками дореволюционные вот это все соответственно там можно что-то общее углядеть вопрос как это сделать к счастью у нас есть крутой специалист по базам данных по майский элю который сделал вот эту общую структуру для из келий куда много-много можно всяких диалектов уместить без особой потери информации и мы делаем что мы вот эту структуру описали на каком-то dsl каком-то языке абстрактном который просто позволяет нам сказать что вот есть такая вершинка в дереве у нее могут быть вот такие параметры там или дети потом есть кода генератор который умеет генерить артефакты пады различные runtime и с вершинками вот этого дерева если подробнее то и деле у нас вдохновлен web и делим он совершенно такой straight forward как я уже сказал то есть там просто есть название вершинок и какие-то их атрибутики есть коды генератор назвали его ауле и он умеет генерировать классы которые будут работать в различных runtime ах в частности он умеет работать с третьим питоном он умеет работать с код ли нам он практически уже научился работать с java genelec java классе и он немножечко умеет в плюсы и gonna еще очень немножечко чтобы об этом как-то говорить реально он доступен на гитхабе можно steam потыкаться и основная основной плюс в нем в том что мы можем один раз описать какую-то структуру базовых очень классов такие побольше дата классы и потом при помощи кода генератора на генерить эти классы для различных runtime of вместе с методами сериализации 10 реализации пока что в джейсон то есть мы можем спокойненько по парсить все на код ли не разложить по этим классным визит epam за сильно заводь их потом раз реализовать их на питание на питоне спокойных использовать ну и туда же будет у нас потом по лесу игорь все остальное это нам нужно было вот почему пока мы все такие клевые reset исследовались мы искали классный какой нибудь себе парсер который будет делать все быстро и красиво остановились на код линии грим ребята кто ничего не другой вообще дело что у нас с анализаторами то в общем то кода с протекторами нам говорят но мы на питоне их написали тогда когда писали на питоне и щас все работает на питание закину здорово переписывать не будем ни нет там кода много давайте пока не будем ног у нас же есть ауле мы с генерим классы будем стерилизовать и стерилизовать и возможно не сильно проходим по производительности запас есть грим хорошо анализаторы мыши с научим работать с новой структуры и все будет нормально дальше то чо у нас сетевая часть как осевая часть нас как была нога написано и мы такие окей то есть у нас есть часть нога которая принимает трафик отправляет ее котлин у копли отправляет и питону собирать информацию питона возвращает гонгов возвращает ее запросы и так далее что то странно присели такие подумали и решили что другая уже совсем история про другой доклад а в этом докладе мы закончим все таки паркингом еще вывод в качестве вывода чтобы что нужно сказать что интер в принципе может в какие-то цифры это не gaga бит и никакие но тем не менее черт он парсить может все считают что парсинг это медленно и грустно на самом деле можно можно делать быстро во вторых это не очевидно если вы вдруг собираюсь что-то парсить посмотрите сначала на ту табличку вы потратили на составление табличка достаточно много времени и она несет в себе достаточно неожиданные выводы поэтому достаточно важно как бы знать сразу с чего начинать они тыкаться разным runtime в третьих парсер это конечно круто но все пишут паркер под себя на самом деле парсер от не самая крутая штука самая крутая штука в партере это возможность перри использовать его в разных проектах и переиспользовать ту информацию которую а собственно партию поэтому если у вас есть еще всякие стерилизаторы там всякие древе вершинки и обработчики под них это круто это хорошо и надо думать что они вам в любом случае понадобятся это вам сейчас кажется что вы по парсить атаки на посчитаете хорошо а потом окажется что нехорошо и нужно еще дерево обрабатывать ну кроме того мы запилили antivir 4 грамматику вы выжили накидка подымайте вы завели запилили генератор ауле класса выложили его на гитхаба djebel потому что мы любим open source ну и на этом все я могу отвечать на вопросы да да да вот это важно сейчас скажу дойдем до таблички вот она какие были условий во первых теста если мы говорим о машине это был обычный десктопный intel 5-поколения среднячок штат гигабайт оперативно аппарате атомы не удалось в основу все на циpкa было тесты были серфинга у 3d без оптимизации без распараллеливания без всякой там красоты то есть если все красиво делать то будет совсем другие цифры то есть это тупо парсинг что такое файл что такое запросы у нас был урок запросов которые отправляют wordpress то есть какой-то стоковый там магазин на вордпрессе собрались него все эскель запрос который отправляет в один файл перемешали склеили пару раз получилось 190 тысяч запросов и вот брали этот файл и сколько-то раз прогоняли и смотрели среднее соответственно в запросах в секунду мы прогоняли его построчно мы выгружали весь файл куда-то себя в память или чаще всего в память да потому что он возил потом засекали время и посылали эти запросите по одному если файл мы то есть антивирус есть прям метод типа раз парс и вот этот вот кусок огромный байтов и вот мы не посредством вот таким образом и скармливали этот файл скачивали огромный файл и давали его antivir почему у сишарпа так мало мы не знаем мы в шоке были ну да то есть он на запросах очень хорош и очень плохо на файле почему так происходит я говорю у нас никто предположить даже не мог мы сразу связались с разработчиками runtime а интерьера и как только станет известно мы скорее всего напишем статью на хабре по мотивам вот этого всего и там я думаю уже будет ответ известен мы про него напишем но еще маленькая ремарка почему угол крестик потому что в год вообще не запилили почему-то я пытался залезть в кишке runtime антивири как-то вытащить этот метод на в итоге я вот там даже не нашел еще вопрос ну там runtime а под этот нет руб отсек для интерьера можно конечно runtime запилить но наверное если если допустимо использование сей можно его посмотреть он в принципе должен быть быстрый единственное что я к меньше грамматик мне меньше охват язык язык грамматик поддерживаем он уже чем winter и на нем правило сложнее писать у нас как бы я повторюсь у нас не было цели написать носи потому что мы research мы мы мы бы не написали вообще носить потому что мы очень много всяких экспериментальных вещей все на сто раз в неделю переделывается и мы просто пока ищем какой-то вариант да я думаю что мы каким-то образом все это опишем и возможно найдем какие-то причины приседаний по скорости в частности у сишарпа ну да когда java обгоняет си плюс плюс это как бы уже вброс санях их большой проследует ну все тогда если вопрос не тот я думаю аплодисменты докладчиком а неся еще до а можно еще вернуть насади все результаты были хочется выводы да черти все нет где в результаты именно сравнение скорости на для различных языков с графиками даст мне таблицы да спасибо пожалуйста столбик цветные да так виден масштаб и становится совсем грустно если еще сделать такие же столбики для файлового режима то наш шар будет смотреть смотреть совсем более он будет какой-то там тоненькой полосочкой едва видны нет не пробовали игры очень не хотелось всеми на самом деле работать то есть там даже с плюсами то не хотелось работать с саммит уж совсем потому что нтр вообще нет поддержки сирии нам бы пришлось каким-то образом изощряться все это делать и нет вот этот процентик он тоже был такой вопрос а вы это была цитата из чьей-то статьи недавно на хабре кто-то там говорю что вот у них вас спасает на 99 процентов и я вот вставил две такие это хайповые цитаты 1 про разработчика которую них ничего не хочет править а вторая права в которой всего спасает реально какой-то аналитики реальных то цифр я не знаю я не задел маркетинга важно эльдара бейбутова половить он наверно в курсе можно пилить его для управления доступом как минимум тут одна проблема что нужно будет коррелировать как http запроса на sql запросы и это пока единство спас об это решить эта модификация кода то есть это не совсем честный вов но если там прямо жесткие разработчики которые по жести про все реализовали я думаю что им не проблема идентификаторы пользователей вставлять комментарии эскель запросы например а дальше можно отпиливать управление доступом на управление доступ от понятный диалога раза мощнее круче чем просто какая-то фильтрация по параметрам мы пока выходим на прототип у нас продаже только планируются то есть ну и соответственно у нас супер вот perform из решения пока нет у нас есть протектор analyzer и вот это вот все мы собственно решаешь я вы искренне надеюсь что мы не будем писать продакшен код который будет продаваться все-таки нас есть разработка"
}