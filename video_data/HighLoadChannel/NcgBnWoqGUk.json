{
  "video_id": "NcgBnWoqGUk",
  "channel": "HighLoadChannel",
  "title": "OpenSource как источник атаки. Чем опасно? Как лечить? / Алексей Морозов (Тинькофф)",
  "views": 1603,
  "duration": 3119,
  "published": "2023-04-28T06:19:52-07:00",
  "text": "Рад вас видеть Давайте немножечко представлюсь кто я такой о чем мы сегодня будем с вами говорить зовут Меня Алексей работаю от Тинькофф банке я практикующий хакер рукожопилом информационной безопасности прикладной если быть точнее немножко о себе кто я такой как я уже сказал я хакер работал пентестером долгое время сейчас управляю командой Application Security Тинькофф банки если быть точнее то бизнес партнерами трехкратный чемпион по HD standoff Если кто-нибудь знает такое соревнование то вот в команде мы побеждали трижды спикер на многих крупных мероприятиях пхдейзера на это в зону в основном это комьюнити и B и вот поэтому мне сегодня особенно приятно выступать перед вами потому что я выступаю перед комьюнити намного шире чем просто комьюнити бы это и разработчики и программисты менеджеры поэтому сегодня с вами я хотел поделиться всем тем материалом который касается именно Open Source продуктов Ну и давайте начнем что же такое Open Source Я думаю что многие понимают и знают то есть это какой-то программный продукт который выпускается под лицензией свободного кода соответственно мы можем править код использовать его делать с ним что хотим никаких авторских прав Это не нарушает но хочется сделать небольшое уточнение Так что же такое Open Source Open Source это и библиотеки и плагины и программное обеспечение и даже какие-то ресурсы которые есть в свободном доступе с исходными кодами Вот это может быть много намного больше чем просто какая-то программа это важная Ремарка потому что говорить мы сегодня будем о многих вещах не только про какой-то программное решение мы будем говорить про расширение и про какие-то плагины и про известные средства которые я не являются оппонсорсами но у них есть какие-то расширения которые могут являться вот так вот как же появляется продукт как правило То есть у какого-то разработчика энтузиаста появляется идея вот он делает какой-то mvp создает что-то Что поможет комьюнити и дальше идею эту поддерживают остальные Что здесь происходит как правило что-то Типа такого когда Middle и синьо разработчики встречаются в одном месте здесь еще джуниоров не хватает появляется нечто состоящее из двух этих вещей естественно все они допускают ошибки ошибки в коде бывают разного класса бывают баги бывают уязвимости что же такое уязвимости уязвимости это класса ошибок класс багов которая влияют всего лишь на три критерия это целостность доступность и конфиденциальность сейчас я рассмотрю Чуть подальше простые примеры а потом буду уже показывать более интересные кейсы Итак простой пример раз перед вами самый простейший код подключения к базе данных постгресс и что здесь есть интересного я встречал в своей жизни в своей практике такой кейс Когда разработчики использовали хост-параметр как входные данные вот и мне стало интересно есть ограничение что конкретно моя печенику нельзя обращаться соответственно вы видите здесь сравнение я стал ресерчить этот вопрос осталось следовать библиотеку и вот что на что наткнулся что если мы просто дополним его нулями Ну или обрезаются и он это съедает как ip-адрес мы обошли ограничения это просто первый пример когда мы можем использовать какие-то общедоступные библиотеки но они тоже могут содержать какие-то уязвимости рассмотрим еще несколько Итак пример номер FTP тоже питон второй пример такой подключаемся здесь все просто если мы указываем через пробел два Хоста или более выбран будет всегда последний таким образом тоже всегда можно пройти какие-то проверки и подключаться к тем серверам которым подключаться вроде бы нельзя едем дальше сокеты я надеюсь что хорошо видно что после 192.стоит пробел вот интересный механизм в питоне что если мы используем именно сокеты то он эти пробелы Что называется стримит стримит ну я не знаю как это правильно на вашем языке Вот питоновском но смысл в том что это превращается в нормальной IP адрес но опять же все проверки проходят это вот такая вот небольшая затравочка хотелось показать то что мы используем библиотеки вроде бы популярные вроде бы вообще доступные Да но которые работают из-под коробки конкретном языке программирования несколько мы сегодня языков рассмотрим Вот но они все могут содержать какие-то вот такие вот изъяны про которые разработчики могут не знать вот немножечко более подробно расскажу что такое схема схема URL Я конечно понимаю что вы все это знаете но это очень важно потому что когда мы работаем схемы URL У нас есть намного больше параметров То есть у нас есть URL который стоит и спорт домен протокол якоря какие-то После него идущие то есть UI путь какой-то до конкретного файла параметры query параметры пост параметры Get параметры различные j-сон всё что угодно может быть Вот но опять же существует различные библиотеки которые мы используем могут интерпретировать это по-разному и вот вам примеры Как можно обходить байпасе так скажем проверки на URL адрес То есть например пример номер один вы используете два порта ставить соответственно 80 и какой-то 11211 у вас будет выбран 80 вот в различных библиотеках и вот вам эта табличка как сравнительная В какой же библиотеке По какому признаку будет интерпретироваться Вот он Джексон хостинг то есть либо Мы в пути интегрируем Либо мы хост интегрируем Либо мы в порт либо еще куда-либо это соответственно вот здесь указано Привет коллеги здесь пока все понятно руки отлично пойдем дальше Итак но не питоном единым хочется немножко поговорить и про другие интересные языки программирования Итак esponet я свою эру это застал еще на когда развивался esponet BC на dotnet фреймворки Сейчас вроде бы как насколько я знаю популярен тут нет Core если я не ошибаюсь Вот и какие же проблемы могут быть здесь проблема следующего типа например Мы перед вами следующий ход что он делает то есть он съедает на входной параметр от пользователь какой-то URL Дальше он этот URL пытается превратить в картинку эту картинку отрисовать на представление то есть там соответственно контроллер попадает в контроллер и контроллер отправляет это представление В каком виде вот там есть встроенный механизм то что входные данные не разрешает такие входные данные по дефолту Как же это можно обойти Давайте посмотрим с вами Все очень просто если мы идем по схеме http то esponet считает что это какой-то действительно непонятный для него запрос схема и у нас отбивает но если мы идем по смб пути вот через два слыша и кладем эту условную картинку на свой сервер ТО соответственно мы это обойдем Это только первый момент теперь представим что в этой картинке у нас будет примерно зашита Вот такая строка эта строка в языке Sharp вызов калькулятора то есть исполнение команды на удаленном сервере Что произойдет если вдруг мы представим такое что такая картинка попадает на представление в представлении есть движок Razer А в движке Razer написан какой-то код который интерпретирует класс исполняет его понимаете да Точнее не интерпретирует а компилирует и произойдет следующее вызов калькулятор Вот то есть это класс Атак называется ssti serverside template injection которое можно использовать для того чтобы внедрять шаблон какой-то произвольный код через картинку и мы с вами соединили как раз две особенности две вещи которые они рассмотрели разработчики или создатели этого продукта то что можно во-первых по СНГ шаре идти они почти тебе протоколу а второй момент то что движки razery нужно все-таки наверное запрещать и User Input А из вне потому что все что нам приносит пользователь Для нас это враждебная среда и сейчас я вам все это рассказываю про открытые какие-то вещи Но к чему я все это подвожу вот а подвожу я это к тому что мы используем зависимости наш код состоит из библиотек из каких-то линков из каких-то Daily все что угодно может быть и не так давно один интересный researcher Для чего додумался он нашел Вот такой вот файл исследовал какой-то ресурс и нашел файл зависимости что он сделал он пошел и зарегистрировал в репозиториях конкретно эти библиотеки вот то что выделено оранжевым цветом этих библиотека не было зарегистрирована во внешних репозиториях таких как и тому подобное вот он пошел создал И там зарегистрировал и в эти библиотеки занес свой произвольный код что произошло таким способом были взломаны многие компании такие как Apple Google и многие другие Но что произошло в настройках при сборке зависимости стоял приоритет внешние источники то есть сначала условно сервер где тепловиться приложение идет на внешний источник только потом смотрит у себя внутри Если не находит такая была конфигурация и вот эти вот большие компании когда увидели что появилась какая-то библиотека вовне они оттуда скачали себе подгрузили и соответственно выполнили код из неё что же с этим делать Но самое простое решение первое Для различных Для различных оркестраторов это индекс URL Pipe в нугет мы делаем собственно добавляем опцию клир очищаем и всегда добавляем библиотеки через это то есть основная здесь история про то что мы свои зависимости должны хранить и менеджерить локально например мы используем артефакторе Тинькофф банке Вот то есть каждый раз когда вам попадает какая-то зависимость или разработчик хочет что-то скачать из интернета он приходит безопасность и говорит Лёша Разреши мне это сделать потому что мы хотим эту библиотеку использовать Окей Мы оттуда качаем добавляем к себе зависимости и уже у себя менеджерри это самый верный путь под эту атаку расскажу один случай а в одной всем известной компании имя которое не буду называть вот была библиотека связанная со смайлами так она и называлась смайл package вот библиотека ничего не делала кроме как того что она рисовала собственные смайлы для ботов в телеграме Вот соответственно хакер исследователь нашел такую историю что собственно когда он обращался к боту он ему отдавал результат и в результате был собственно тег это библиотеки что он сделал он пошел питоновский репозиторий зарегистрировал эту библиотеку Вот и соответственно написал мне такой код чтобы всем Чтобы всем пользователям этого Бота выплёвывала сообщение поздравляю вас с 8 марта тогда был праздник собственно он праздник сделал в итоге прошло где-то три дня и всех пользователей там что-то у них порядка 200 тысяч за спамило поздравляем вас 8 марта прошло время библиотеку скачали выполнили код у себя внутри Хотя сами об этом даже не подозревали как я уже сказал как же мы все это можем лечить я рассказал про какие-то уязвимости про какие-то библиотеки А как же нам все это контролить и исследовать естественно нужно использовать какие-то инструменты какие инструменты бывают инструменты бывают различного типа такие как статический анализ кода динамический анализ кода композитный анализ мы чуть попозже их рассмотрим дальше внешняя репозиторий все-таки нужно заносить к себе это должен быть контрольный процесс но не без контрольный Потому что если это бесконтрольный процесс я уже рассказал что к чему это может привести ну и соответственно процессы над любым инструментом должны быть процессы Если человек не обслуживает инструмент то инструмент сам по себе бесполезен Окей Поехали дальше поговорим о более интересных вещах мне так кажется ОРМ бытует такое мнение что urm это серебряная пуля золотая таблетка от уязвимости класса SQL injection но опять же я к чему хочу этот пример подвести к тому что любой инструмент или любую технологию нужно знать как варить и вот это вот пример который приводит к реальной атаке с кьюлем джекшн хотя она вроде бы как бы через RM используется когда мы используем динамические параметры соответственно если мы используем динамической динамический параметр здесь то что нам мешает сделать вот это то есть принести команду SQL в какое-то запрос или параметр Вот и в результате получить Вот это в данном случае я просто выводил тесты SQL из базы просто это ради примера Хотя это спланет который не пропускает по идее какие-то зловредные паттерны но библиотечка dapper почему-то пропускает второй пример более вам знакомы foreground foreground это SQL или антите фреймворк в данном случае это антифреймворк вот ну собственно эти фреймворк это развитие Сначала был один потом появился второй Вот и смысл В чем опять же нужно знать технологию которую вы используете и с точки зрения хакера я наткнулся как-то вот на такой код то есть в потоке люди запускают опять же параллельную параллельные запросы в базу данных то есть Я обращаюсь здесь внимание на метод с параллель который говорит о том что запросы будут отправляться сразу а не ждать пока он Соберется полностью или когда мы к нему обратимся то есть настройки entity Save почему это может привести собственно здесь пример как эти потоки вызываются и к чему это может привести собственно картинка слева живой пример мы отправляем человеку 100 рублей когда мы отправили человеку 100 рублей у нас осталось 300 рублей Да но когда мы будем в потоках и молниеносно очень быстро отправлять человеку по 100 рублей у нас будет 0 на балансе у человека будет 1100 эта проблема называется проблема гонок Вот и причем проблема возникла из-за того что мы Обращаемся асинхронно к базе данных параллельных запросов все-таки все что мы делаем с деньгами и с какими-то критичными операциями Наверное это нужно как-то синхронить Ну либо балансировать вот хочу показать вам скрипт самый простой эксплойт наверное в моей жизни как эксплуатировать Как лечить лечить есть несколько способов но к сожалению проблемы рейс Condition даже наверное самые крутые состы вам не найдут потому что это действительно Серьезный research но более простые вещи вам найдут такие инструменты как sast SE gitlex и тому подобное etx это про поиск секретов коде секреты в коде мы не храним соста это статическая анализатор кода который будет показывать вам ошибки А что же я вам показал на экране это вот все эти инструменты как я уже говорил сами по себе бесполезно они должны работать в процессе и каждый раз когда разработчик пишет код что-то выкатывает на пруд или пушит или мержеты что угодно делает с вашим репозиторием мы должны проверять мы проверяем несколькими вариантами сканеров убедились что все хорошо пошли дальше и уехали в пруд едем дальше но просканировать мало надо теперь это как-то все обслуживать И для этого Существует множество примеров множество систем регистрации уязвимости одна из них этот эффект доджи я ее лично Не рекомендую использовать Вот Но есть как вариант Open Source Мы тоже вот куда мы все это складываем потом обслуживаем и должна быть команда разработки либо сами Разработчики если скажем так что большую команду тяжело содержать вот которые могут хотя бы посмотреть на то какие проблемы у них могут возникать Ну давайте пойдем дальше немножко будем наращивать уровень поговорим про нашумевшую проблему Lock for Shell Поднимите руки пожалуйста Те кто уже знает что это такое Ну всех коснулось практически Ну естественно проблема декабря Когда можно сказать в мире компьютерной информационной безопасности наступил хаос появилась информация о том что есть такая замечательная библиотека Long это библиотека Что она делает она логирует занимается логированием да то есть запросов Чего угодно и в этой библиотеке один из исследователей обнаружил следующую вещь что у нее есть не декларированная возможность использовать шаблоны а в этих шаблонах есть возможность использовать так называемый gndi пути класса сейчас я все это чуть подальше покажу вот и что он обнаружил что если он может обращаться через ldap определенному gndi классу который находится у него на сервере где-то то этот класс может прокинуть внутрь своего программного обеспечения Где используется библиотека Джей действие реализовать его и соответственно если там где-то в конструкторе прокинул какой-то произвольный код его вызвать звучит вроде бы как бы сложно Давайте теперь порядочку Итак Вот это объект класс который хакер кладет у себя на сервере он просто написал этот класс и положил на сервер данном случае что-то происходит Просто вызывается калькулятор и что-то там лукапится а немножко по схеме то есть нормальный запрос J выглядит как мы отправляем какой-то get-запрос он это логирует кладет куда-то Да хакерский запрос будет выглядеть ниже то есть jandi Host через два слэша атака и дальше идет какой-то параметр здесь показывается пример Как можно с помощью атаки Лок фушел воровать секреты Если вы находитесь ВВС из облако vs но я вам покажу пример Как можно выполнить рце ремонт и как же это можно сделать на самом деле все очень просто мы Передаем в какой-либо хидр Ну в данном случае я выбрал юзерагент хидоры которые логируются потенциально лоб фуджеем Передаем какое-то прилот нагрузку в данном случае это мой какой-то хост и все И дальше по пути о Я отдаю там этот класс который я показывал выше собственно все у вас вызывается калькулятор что здесь хочется сказать почему я снова коснулся этой темы потому что я общался с многими людьми и как они разбираются с проблемой они просто фикса библиотеку обновляют Поднимите руки кто Просто обновил библиотеку есть такие в зале так вот хочу отметить следующую вещь что Лог фуджей она очень коварная еще тем что она интегрирована уже в коробке многих вендоров Это перечислено только Малая часть потому что к сожалению маленькой формат экрана мне понадобилось 2 граммов наверное 40 чтобы показать вам полный список вот нужно понимать что же она коварная библиотека она интегрирована прямо в средства то есть И причем достаточно популярная здесь видите Oracle Здесь вы видите ластик Search Здесь вы видите в моем веер то есть продукты которые уже себе содержат это библиотеку и тоже и УЗИ вот так что же нам с этим делать Ну естественно в первую очередь это правильный шаг обновить эту библиотеку найти её отключить и запретить Вот это в этом нам могут помочь анализаторы сканер Композит анализ те самые прекрасные сканеры которые следуют в зависимости библиотеки но этого мало полный Flow по вычисти Lock for J выглядит следующим образом как я уже сказал это поиск людей в библиотек поиск по файловой системе потому что не все используют артефакторе какое-то нерадивый разработчик взял да Не дай Бог себе скачал эту библиотеку локально положил где-нибудь на сервак потом за депоил и забыл поиск по логам опять же у вас есть балансировщики Наверняка у большинства У вас есть какая-то система логирования к вашим ресурсам обязательно нужно все-таки посмотреть где и когда она использовалась были какие-то намеки на то что вас пытались атаковать фуджеем и он отработал поиск в репозиториях это уже я сказал запущенных процессах очень важно то есть может даже случиться такое что вы библиотеку вроде бы удалили из деплоинта ее удалили а сервак у вас условно не перезагружать Но это же провод Это же круто да и то есть еще потом неделю она может у вас работать вот и собственно то что о чем я сейчас сказал это поиску зимы вендерных решений есть список его можно загуглить посмотреть Если у вас у зимы это важно Поехали дальше немножко фана Давайте немножко пофанимся расширение очень часто мы любим использовать различного рода расширения в данном случае я хочу вам показать как можно взломать расширение которое установлено на телефоне что делает эта штука вы скачиваете себе на телефон даете какую-то голосовую команду и программируйте действия указываете действие которое должно выполнить по этой голосовой команде что может здесь произойти а так смотрите Обратите внимание на то что у вас есть первый тут есть картинка слева сверху эта фраза которую вы должны произнести картинка снизу это сказать кавычка он один равно одному представляете Что будет если мы запрограммируем систему выполнить нам конкретно эту команду сказать кавычка один равно одному и мы добавляем это в скрипты здесь в итоге нам это произнесет когда мы скажем ей фразу тестирования она нам произнесет SQL ошибку но не то чего мы просили это проблема но смысл в том что проблема мы получаем из пользовательского голоса то есть вроде бы как бы кто подозревал о том что голос пользователя вот эти голосовые команды голосовое управление вроде бы не источник атаки оказалось что через это тоже можно что-то взломать то есть мы должны рассматривать все что приходит от пользователя как враждебную среду Даже если он говорит а не пишет следующий пример Я люблю поиграть в игрушки на телефоне и вот я играю играл точнее Вот в такой вот игрушку Kiss of War называется она и смысл чем там в менюшке есть такая штука Как код обмена за этот код можно получить какие-то подарки вот Я обнаружил что там используется автопостановка В каком виде То есть если мы отправляем с другого аккаунта самому себе письмо с конкретным названием награды за вход вот и в теле сообщение опять же прописываем какую-то нагрузку то когда мы переходим функционал выдачи призов Я получил себе просто огромное количество карма сделал так сто раз я стал супергероем в этой игре и больше не играл потому что стало скучно Почему опять же Это то что опять же используется расширение даже ВПК даже в мобильных устройствах используется библиотеки которые не проверены и соответственно когда мы просто берем это используем не проверяем не составит никакими другими средствами мы получаем какие-то прикольные проблемы в данном случае ребята теряли деньги потому что я не покупал У них Премиум аккаунты кто программирует Поднимите руки а кто использует расширение Поднимите руки отлично Это для вас смотрите как-то я исследовал расширение Visual Stadium и наткнулся на интересную вещь скачал вот такой вот прикольный плагин назовем его так а потом решил посмотреть как же он все-таки работает интересно я запустил бурсюд Кто знает Не знает этот инструмент он перехватывает запрос от вашего компьютера какому-то http серверу то есть на веб-серверк какой-то вот и что интересно я его увидел что каждый раз когда я какие-то делал изменения в идее Ну то есть в коде он посылал конвертировал это в боевые запросы отсылал куда-то на сервер то есть всё что вы делали у себя локально улетала на сервер то есть весь ваш код все ваши секреты не дай бог если вы их коде храните вот всё это улетало там проверялся и он возвращался с результатом Хороший у вас код или плохой прикольно нет Как вы думаете то есть если вы качаете расширение оно весь ваш код куда-то отправляет мало ли что так что Будьте аккуратны с расширениями кстати тоже Open Source так еще про что хочется рассказать балансировщики многие Как сказать Open Source расширением Мы прячем у себя все-таки вовнутрь Да мы стараемся их вовне не показывать если мы говорим про какие-то системы администрирования или тому подобное так же можно до них добраться если есть проблемы с конфигурацией как это выглядит Давайте я Вам сразу на примере покажу Итак есть какой-то сайт тест мастерхос.ру и видим что Этот сайт недоступен по прямой ссылке если мы знаем что это сайт может находиться где-то внутри за балансировщиком и если балансировщик настроенный корректно то что можно получить можно получить что в результате вот такого вот запроса это пункт 2 uru Host то есть в космос пишем Конкретно этот сайт и указываем адрес балансировщика то есть выполняем wed запроса именно на балансировщик с хостом нужного нам домена то в результате мы получим Она вторая ребята хотя бы закрылись http авторизации Молодцы но здесь явная проблема местной конфигурации к чему я это А это я таким вещам как дальше во-первых хочется рассказать немножко про обратную совместимость вот когда мы что-то разрабатываем у нас есть там версия 1 версия V2 версия V3 Да когда я следовало одно предложение здесь была версия V3 и все было бы вроде хорошо Потом я просто изменил на версию V2 и нашел слепую там в том же самом параметре только немножко видоизменным версиях это о чём не забывайте про свое Legacy вот если вы развиваете может быть Legacy Так давайте буду ускоряться время смотрю подходит концу Итак поговорим немножко про нормально а все хорошо смотрите поговорим немножко про известные нам инструменты жира кто использует жира О отлично жиры тоже есть расширение и они тоже бывают Как свободно распространяемые так и не свободно он один из примеров этот жира и джайлборд смысл здесь чем на самом деле все очень просто здесь самый простейший адор айдор который позволяет нам перечислять доски вы видите здесь цифру 434 параметры соответственно если она станет 435 Вот то мы будем менять доску Вот едем дальше Но это на самом деле Просто затравка такая была в Джерри в самой есть проблема прикольные и какие же там могут быть проблемы мой собственный research этот жир и блайнд gql injection назовем ее Так в чем смысл предположим какому-то Space у вас нет доступа Да ну хотелось бы что-то там почитать Как мы можем это сделать Посмотрите на верхнюю картинку выведите Вы когда что-то там Джерри Да вы можете использовать так называемый gql запросы здесь если я там ввел какую-то абракадабру он выдает ошибку о том что данное значение не существует в каком-то поле description Но если я description укажу там 1 2 3 звёздочка ID что-то да то он нам выдаёт о том что значение существует Но результат не выдаёт Ну либо у нас нет доступа либо что-то еще ну результат какой-то найден существует вот что делаем дальше дальше мы пишем простейшую башню смотрим какие айдишники у нас существуют то есть заметьте что айдишники которые отвечают на запрос ответом вы не имеете доступ к нему или айдишники которые говорят о том явно что данные еще не существует то есть Таким образом мы можем узнать айдишнике каких ищется У нас есть Ну а дальше Все очень просто перебираете айтишники в параметре ID и параметры description а потом параметре title параметрах Боди и так далее мы можем восстанавливать содержимое тикета просто исследуя вот эти вот различные классы ошибок То есть когда Мы выполняем какое-то несуществующее значение мы получим первый вариант то есть верхний когда мы попадем в нужное значение мы получим Нижний вариант так можно устанавливать текст это слипает вот ну собственно Аналогично с confluence также у него есть опишка которую можно посмотреть вот также у него есть параметры поэтому я быстро пробегусь тем же самым моментом то есть есть Space можно подобрать этот ключ как hr-контент например да вот и тоже получить какие-то значения можно эти значения также через seql смотреть Вот то есть подбирать эти запросы выполнять всё что вы видите сейчас на экране Вот так бы выглядела только там немножко различные синтаксис Ну и расскажу про вишенку на торте Небольшая предыстория как-то у меня был корпоратив компании Вот и у меня перед корпоративом была задача исследовать внутренние наши сервисы администрирование и был такой сервис oldstek это Open Source Ну сам компания конечно был продукт Open Source на который позволяет централизовано разливать команды на все сервера подключается и так далее У меня была задача это и как же это делал я пошел на корпоратив там хорошо погулял выпил Ну какое-то настроение было хорошее что я решил поработать этот день я нашел свои смысл В чем смысл в том что я взял и до чего додумался до того что поле пароль не указал совсем у меня ничего не получилось но когда поле пароль я агада но когда в поле пароль Я указал абсолютно любой символ но авторизацию через ldap Я получил интересное значение что обратить внимание на нижнюю строчку json на ключа первичный пермс его стоит точка звездочка я задумался то есть без пароля мне выдают все права так ли это стал разбираться дальше взял авторизационный токен который он не выплюнул и попробовал выполнить команду ID и она выполнилась я закрасил именно хостов вот но вы видите что команда ID выполнилась на всех живых миньонах то есть проблема здесь чем байпас авторизация через lda протокола если мы указываем пароль ровно в один символ ровно в один символ То есть если Вы укажите два символа Три символа у вас произойдет матч пароля и соответственно он скажет пароль инвалид неправильный пароль если Вы укажите любой пароль ровно в один символ вас пропустит систему Вот такая вот маленькая история Ну и напоследок на затравочку расскажу вам атаку из далеких времен смысл В чем утилита Pink все знают что такое Поднимите руки пожалуйста Это протокол так сказать контроля назовем его живых остов и ответа от него выполняем чокое количество байтов которые мы на него отправляем Вот Но если отправить на него слишком большое количество данных то есть не знаю В данном случае 65 превышающая 65 тысяч 508 байт то соответственно сервер ложился просто умирал потому что здесь проблема буфера оверлоу потому что он вылетал за дейтограмму acmp пакета и собственно все вот коллеги Спасибо большое за внимание здесь небольшие лозунги небольшие итоги итоге Какие Будьте в безопасности нет развития Поэтому рассматриваем всегда как враждебную среду а теперь я могу наверное Пять минут отвечать на ваши вопросы еще помните что на рынке полно парней как я которые очень любят смотреть что у вас там под капотом пожалуйста Привет Спасибо за доклад когда я вырасту я хочу стать тестером Как начать куда идти И вот я короче не понимаю как вот доходит до этих выводов готовые статьи читаешь такое всё логично А с чего начинают я знаете как я начал стал пин тестером Я когда-то читал рэп и у нас были онлайн рэп батлы Вот и как-то вот я записал трек отправил его мне выставили плохие оценки Я решил что это несправедливо у меня же юношеский максимализм мне 16 лет я должен это ситуацию исправить и я полез на анти чат и с вопросом как взломать веб-сайт и в итоге я там нашёл статью взломал этот веб-сайт поправил себе оценки меня выкинули с этого рэбэттла я перестал заниматься рэпом я стал хакером То есть у каждого своя история к этому Ну то есть рэп сцена и потом на самом деле Подойдите ко мне отдельно я вам расскажу потому что тема на самом деле тут книги тут знания тут площадки тут ctf и тут то есть это большой аккумуляторный опыт Подожди подожди три книжки Давай три книжки хорошо компьютерные сети раз объект на давайте так любой язык программирования в зависимости от того какой области хакером вы хотите быть Вот и обязательно конечно же какой-нибудь вот ну чтобы душевно развиваться похоронный костюм и чёрные ботинки и Золотая бронь Я не типичный хакер пожалуйста Добрый день Сергей компания Vision Спасибо Очень интересный доклад очень много разных видов уязвимости примеров это очень ценно единственное что я не совсем понял это какое все это имеет отношение к Open Source потому что в нашем коде который мы пишем внутри компании могут быть ошибки гораздо хуже Open Source хотя бы предоставляет возможность не только нам смотреть на наш код и находить уязвимости То есть я имею в виду в чем вопрос заключается Да в чем разница принципиальная подходах к решению этих проблем и недопущение этих проблем и в нашем собственном коде внутри сейчас я отвечу на Ваши вопросы одним словом сейчас до него дойду сейчас сейчас сейчас подожди подожди подожди Подождите Спасибо за вопрос кстати очень дельный вопрос но ответ на него вот он вот смотрите когда перед вами Open Source в него соответственно вносят изменения кто угодно вы это не контролируете Это не ваши сотрудники у вас нету схемы контроля вы берёте opensort а Ну опять же а-а Это хорошо И это хорошо что вы берёте но опять же нужно его исследовать нужно его смотреть и мой весь мой доклад это месседж про то что Open Source нужно относиться Особенно аккуратным потому что свой код Вы можете проверить и можете хоть как-то его следовать можете его изменить а там всё комьюнити за которым вы не уследите Спасибо есть о чём подискутировать Но в любом случае спасибо за ответ Спасибо за вопрос ты получаешь да посмертные сэндвич потому что у тебя твои баги полезность и багиопарсоса великолепно пожалуйста Здрасьте Алексей палтахин сегодня прослушал два доклада на тему безопасности не надо мне услышал про бак Баунти это вообще надо не надо я просто помню производителю одного из балансировщиков как написал бак что вот отправляешь любой СМП запрос балансировщик он ребутается Ну ему было не интересно мое мнение что бог Баунти важно и нужно и должно жить и должно развиваться потому что вы получаете за скажем так огромный Пласт работ за Деш за дешевую цену вот поэтому нужно внедрять и обязательно это превращать в процесс мы как банк опять же мы используем в том числе оно не отменяет другие процессы но оно очень сильно помогает вы не тратите большие деньги на внешние пентесты например да к вам приходит орбаканторов находит у вас уязвимость и вы платите уже за конкретный результат поэтому моё мнение баг баунте - это мастера Кто не знает что такое баг баунте Поднимите руки это когда Это программа когда компании большие компании или любые компании объявляют о том что мы платим деньги всем хакерам которые найдут у нас уязвимости принесут ее нам есть официальные площадки вот которые это развивает Спасибо за вопрос есть еще надстройка над баг Баунти некоторые хакеры Я готовил одного безопасника кафе который не взял денег за бак Баунти но получил разрешение об этом рассказывать и вот когда про эти Дыры в уязвимости это был airbnb Э сейчас это уже не важно И для нас проект как бы но там было интересно Там пожалуйста Добрый день спасибо за доклад а-а вы говорили про артефакторе и про то что вы свои уязвим свои зависимости у себя то есть разработчик приходит говорит хочу вот такую-то зависимость вы добавляете в артефакторе это ручной процесс или всё-таки вы используете артефакторе как кэширующие репозитории с дополнительным сканированием автоматическим всех зависимостей потому что например если разработчик npm и приходится какой-то библиотекой одной Она же тянет за собой еще невероятное количество все правильно вы говорите и переезд вообще в принципе вот этот централизованное хранение секретов это процесс очень длительный Вот мы сейчас используем артефакторе как целевое решение но мы съезжаемся чтобы вы понимали мы раньше использовали А раньше вообще еще ничего не было все хранилось лабе например вот и вот это все сейчас собирается из разных мест потихонечку переезжает в артефакторе Но это в наше решение это не как бы сказать Я не даю готовый рецепт или не рекламирую Здесь артефактами вы можете использовать любой другой но как вот работает у нас сейчас я да я понимаю вот у нас именно надстройки и сканеры вот эти все они прямо в самом артефакторе зашиты это Xray да В данном случае я ответил да понятно То есть это не ручной процесс конечно а просто есть ещё сканирую уязвимости поверх сборок после того как проект собирается ещё дополнительно он профессиональный Да это вы тоже используете Я так понимаю Да все не ручные Окей Спасибо но эта тема прям отдельного доклада Поэтому сейчас я не успею рассказать пожалуйста так хочу время есть вот здесь Алексей спасибо замечательный доклад вопрос может быть требует развернутого ответа но хотя бы коротко вводные госучреждения протестуя Open Source в качестве решения предлагается отечественное по вопрос да или нет Если да то какой чье хотя бы хотя бы Вектор Куда смотреть В какую сторону разработчик потому что все вот эти родосы и другие отечественные или нуксы они же ну грубо говоря не совсем самостоятельные или нет Я понял ваш вопрос но вопрос очень каверзный потому что сцена какой-то конкретную компанию рекламировать не очень хорошо давайте мы с вами лично Просто я когда спущусь я вам это более детально расскажу своё видение опять же да то есть нужно понимать что здесь есть какая-то доля субъективность то есть какие-то компаниям я лучше отношусь каким-то чуть-чуть меньше лучше Вот вот и я вам расскажу отдельно очень хорошо Ну в принципе да или нет хотя бы вот почему бы нет наши данные защищено чем просто взятые на гитаре я считаю что Вполне У нас есть очень хорошие решения которые тоже можно использовать спасибо поскольку у вас уже есть приглашение на чашечку кофе и на детальный разбор я бы не игнорировал пожалуйста Добрый день Пётр Спасибо за интересный доклад У меня просто такого характера Да вот что библиотеки Неужели никто не интересует да если кто-то ресет что-то есть какой-то ресурс где вот эти вот записывают рассказывают Ну допустим то же самый Хабр Конечно есть и ресерчат и я вам показывал даже свои ресурсы Некоторые из них не все но некоторые были мои ресерчи это называется база CV команде А вот смотрите Вы заходите в Google куда угодно и вбивайте просто CV и либо Вы заходите на сайт volvous.com Я не знаю на слух воспринимается от слова вольнорабилити только к сожалению я не могу как-то там это печатать я вам расскажу вот есть ресурсы есть большие сайты которые хранят всю эту базу всех взломанных когда-то библиотека известных наружу скажем так которые про которые они рассказали и вы можете просто с ними интегрироваться и поглядывать я вам подскажу этот ресурс и всё это сразу выходит после того как то есть зависит от вендора зависит от желания это принял решение то наверное почти должна быть выходить впереди чем публикация это к сожалению я не могу отвечать за все Open Source продукты Как быстро популярные не знаю я такой статистика не владею Спасибо Ну кстати да Слот фуджей там тебе когда хром сказал что у тебя три пароля неправильно Это как скоро их поменялось даже так вот пожалуйста День добрый У меня чуть рядом но близко Мне вот интересно твое мнение насчет относительно давно уже найденной уязвимости как же с который позволяет эксплуатировать там процессор через код насколько это реально уязвимость потому что все что видел использование это все какие-то там синтаксические тесты которые не очень похоже на реальность Ну я отвечу честно я эту уязвимость сколько мы не искали сколько мы не исследовали сколько мы вокруг этого вопроса не вертелись это еще недавно не так давно была еще уязвимость похожего типа только серверная не клиентская то есть это ядро IBM вот тут было понятно откуда это там браузеру пользователя зависает И как это на сервер прокидывается мне стало непонятно поэтому я этот вопрос оставил потому что мы импорта не добились Хотя даже публичными эксплойтами поэтому наверное на ваш вопрос я не смогу ответить Просто потому что я не занимался им простите Да у нас есть Еще минутка так вот Раз два и три и разойдемся Меня зовут Илья Алексей спасибо за лекцию Я немножко хотел добавить вот к ребятам вопросам Зачем проверять бонсорс все должны помнить что было в марте субсон сорсом это не только уязвимости это специальные закладки которые мы должны проверять это очень важная штука потому что все На этом немножко поели на тему Лок Фуджи нас спаслав он нас поймал аномалию и заблочил всё и мы потом разбирались Но вот у нас был интересная проблема у нас была либо Open Source для grafq или она открыла всю проспекцию даже ту которая не должна была быть открыта и вот мы это пропустили и как такие штуки отловить без изучения этой липы Хороший вопрос это прямо Инженерный вопрос но я начну по порядочку да во-первых про Open Source Да действительно бывают закладки помимо этого второй момент правах есть байпас Аккуратнее здесь да то есть когда мы придумываем какое-то там Вов правило его хакеры придумывают Как обойти с другими способами Вот и третий вопрос про Граф квель зачем вы выставили наружу а там API мобилки была И когда выкатили кто-то прощёлкнул лицом что интроспекция в либе она полностью открыта потом это все конечно закрыли быстро контроль периметром то есть смотрите у нас есть такой процесс у нас банки которые рекомендую в принципе всем компаниям использовать называется контроль периметра ничто не может заехать провод без запрува отсека Но даже если что-то заезжают строит А мы должны это контролировать то есть регулярно сканировать свой периметр nup me нуклеями всеми возможными средствами именно то что поможет нам сделать вывод опять же инвентаризировать enging с конфиги то есть мы должны понимать что у нас всегда находится на периметре и если есть какое-то изменение На нём мы должны об этом узнавать и реагировать это очень жёсткий процесс в нашей компании и соответственно Если вы вам Всем рекомендую его использовать вот так но мы сейчас прикрутили кучу сканеров внутренних и внешних и всё это перекрыли но было больно Спасибо Спасибо Это сейчас был шикарный мастер-класс как выступить э-э под видом вопросов тоже Пользуйтесь на конференциях Это очень полезно Да пожалуйста Привет Спасибо за доклад хочу спросить про самую нашумевшую недвижимость это Блю не помню какой CV Какой еще раз это Ронал блю это столкнулись вы с ней получили какие-то последствия новый термоблю это же вообще Легенда смотрите когда Shadow брокерс взломали репозиторий АНБ и слили этот эксплойт smb1 вот естественно весь мир стал на уши тогда появились различные шифровальщики и так далее что сделали Мы как сразу компания мы просто тут же пропачили с мв-1 и поэтому прошёл мимо нас вот то есть важно что кстати очень важную тему сказали важно что важно быть в тренде Безопасность - это всегда тренд следите за новостями следите Что происходит в мире хакеров ходите на его такие конференции Вот и когда вы будете в новостном поле в одном и том же что находится все основные хакеры соответственно Вы сможете работать хотя бы в синхроне с ним они что-то придумали что-то сделали какую-то эксплоид выпустили рассказали об этом миру вы тут же пропали поэтому пошел мимо нас вот финальный вопрос На момент тебе надо еще понять Кому ты подаришь сувенир Да добрый день спасибо большое за доклад Константин такой вопрос Вы дали рекомендацию Да что система нужно покрывать кучей анализаторов я не буду конечно просить рецепт Но вопрос такой анализаторы это Open Source или это не Open Source мы Open Source мы будем проверять Open Source или нет шикарный вопрос потому что одного из моих коллег не так давно был доклад про то как Секьюрити штуки тоже является источником опасности источником уязвимости Как находят уязвимости во всяких именно инструментов безопасности сейчас не про это здесь опять же зависит от того ваших возможностей вашей компании Или ваши самих вот если у вас есть деньги чтобы купить там дорогущий чек Mark за 20 млн на 20 осталось то вы можете конечно использовать более дорогие решения но Open sour в принципе можно обложиться и довольно таки на неплохом уровне контролей Вот но опять же это Open Source не уровня который что-то на себя вход принимает какой-то пользовательским код он просто это самый там простейший сканер как репулки условные какие-то у них есть какие-то сигнатуры они были всегда туру понимают есть уязвимость или нет Поэтому в принципе можно но опять же нужно проверить в том числе с сорцин для безопасности Простите последний вопрос небольшой уточнение вы рекомендуете это сделать как бы опенсорсом если есть возможность проверять или нет Я рекомендую да Я рекомендую конкретно я вот э-э но Я рекомендую всё-таки смотреть в пользу коммерческих решений если позволяют возможность всё поменять друзья это был прекрасный Час который мы провели вместе Алексей Аплодисменты памятные сувениры от конференции и теперь скажи пожалуйста Кому мы подарим замечательный кубик хотел Поднимите руки не не не не не вот вам товарищ Да но проблема в том что это их приз это кубик airvision ему не интересно надо ещё кого-нибудь так да давайте подумаем тогда А вот какой у тебя вот самый такой Я очень люблю Вот кому я только что рассказал как как интегрировать э-э процесс контроля публикации Поднимите руки запомнился про контроль публикации да да рассказывал На 200 человек Сейчас смелости Да короткое выступление в сессии вопрос по ответу Да вот это был прекрасный мастер-класс друзья пять мы продолжаем здесь Большое спасибо всем пока спасибо"
}