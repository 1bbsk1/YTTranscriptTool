{
  "video_id": "lGm5ec4Vdqs",
  "channel": "HighLoadChannel",
  "title": "Использование Tarantool в .net-проектах/Анатолий Попов (evote.com)",
  "views": 1802,
  "duration": 2341,
  "published": "2021-04-07T14:02:12-07:00",
  "text": "спасибо костя мы вернемся в начало благами недалеко вышли я выскажусь совсем до 3 немножко разные на связанные вещи это dot net и вас кроссплатформенность и производительность то как использовать dota тарантул ней про соответственно производительность коннектора вдохните немножко обомне я работаю с детьми 2006 года начинал связь и 20 по счастью 11 где не было генериков я не застал она страшна и печальна и и активно к мечу во всякие концов проекты с 2016 у меня помимо моих данных проектов есть немножечко немножечко коммитов logic kalikana go ну и там по мелочи в основном доклад конечно же тут нету нас не только windows это уже несколько лет и linux и mac os нативно мы начали разработку под dot net core полтора года назад ну то что можно production уехала так то мы пытались раньше но к сожалению все ломалась часть разработчиков у нас пишут под did not используя make части винду production у нас на линуксе под mac mini есть и д как под винду пишет ее jetbrains называется raider с версии 2 0 до подхода можно запускать его официально на ram 32 неофициально можно пробовать всякие билды нам 64 но они еще не поддерживаются билды подан 32 закон трибетил open source компании samsung говорят сотрудничестве с qualcomm и они сейчас работают над тем чтобы это все заработало на 64 то есть дот нэт ункас платформенные не только в плане операционных систем ну вот он раз платформенное в плане архитектуры процессоров вы можете взять свои любимые разбили ее на них вроде как даже что-то запустить ставится это все просто если у вас достаточно распространен и достигать их linux у вас есть пакеты официальные если нет то как бы можно сбил детей с исходников все инструкции на сайте можно поставить взять использовать докер засунуть это все в контейнер поддерживается как линуксовые контейнеры так и виндовые контейнеры вот microsoft регулярно облетит это все надо к хобби если же у вас какие-то железки на которые вы не хотите ставить не докер никакие зависимости то вы можете собрать сау в контеймент deployment и соответственно нас вам на костя нужно будет иметь только зависимости от которых зависит тут нет это либо ссср и еще там парочка посмотреть лучше на сайте потому что я такое сам никогда не делал но в целом это работает и дальше соответственно вам сам тут нотных а стене нужен копируется и тот сел в контейнер deployment с помощью команды икс копии любых похожих это все совместима с ско пирсингом и так далее достаточно удобно сразу же отвечу на вопрос который был в тезисах возможно ли 2 миллиона ps надо найти не знаю виду де картинку я закрыл все цифры видимо но в общем есть такой benchmark тип от тех m-power они benchmark вот всякие в по фэн варки и значит лучший это все миллионов 40 тысяч запросов в секунду вот на 11 месте с 6 миллионов там 950 тысяч или около того отставание всего в один процент это тот над коль 21 с пока не выпущенную в public api для работы с сокетами через pipeline и эта часть новых улучшений которые не делают аллокации всячески не мочит garbage collector жить можно почему получилось так быстро на самом деле если мы изберем тут нет по кусочкам там есть три больших куска это garbage collector jit который компилирует в нативный в нативный код соответственно ваш код нам во время выполнения i am time который на котором все это выполняется значит тут над кодом это все получил кучу больших улучшений в сторону производительности в сторону уменьшения локации на разных простейших операциях горбач коллектор теперь блага был мы можем теперь как в джаве сказать у кого мы можем написать свой garbage collector ссылка на слайде это силы gc горбач коллектора например вы пишете софт не знаю для межконтинентальной баллистической ракеты вы знаете что она летит 40 минут и a lot of memory у вас гарантированно случится но через два часа вы можете поставить дергаться и не появится с горбач коллектором вообще в жить и кучу улучшению он теперь генерирует более компактные более продвинутый код он умеет работать со структурами и гораздо лучше что повышает производительность gun тайме появились разные способы теперь обходиться редактировать строки делать по ним слайсы из плиты и прочее без выделения новых строк потому что они имеют оба удобно этим для этого придумали абстракции спам им мимо ли отличаются они тем что спам это такая структура в общем если у вас async а на операцию вы не можете использовать эмомали можете но по сути дела все различия для того чтобы не выделять постоянно массивы байт когда вы работаете с какими-то сетевыми протоколами с файлами еще чем-то придумали array по имени пол соответственно их использовать допустим в структуру мышц соответственно если вы работаете с этим полом правильно то у вас получается более прогнозируемая скорость работы более прогнозируемый workings эту процесса и благодаря этому вы получаете прелестный перформанс собственно dot net core достаточно быстрый кроссплатформенный прибор который можно мы его используем для веб-приложений но не только у нас всякие бы грант операции тоже выполняется на нем перейдем к тому как использовать тарантула сдохнет для этого нам очевидно потребуется какой-нибудь коннектор и если поискать арк пакет для этого нас целых три альтернативы есть они все представлены на слайде я написал поддерживаю 1 коннектор к сожалению по 2 3 я ничего не знаю то видим мое упущение и мы их поэтому мы рассматривать не будем но в целом я рекомендую мипо попробовать попользоваться и может быть они лучше чем тогда следует написать мне багу и мы это обязательно поправим коннектор про гауди to rumble поддерживает стандарт 20 старая версия точно текущая поддерживает если тот на стандарт 1 1 но версий 10 над которые сейчас активную работу не будет поддерживать тот на стандарт 11 вам придется использовать либо тут нет корр 20 и новее либо тут нет 461 новее это все достаточно хорошо для новых проектов если вы собираетесь использовать ставим проекте ну не знаю мы можем как-нибудь обсудить и он работает на windows linux и mac оси и поддерживает соответственно весь протокол которая может предложить trample за исключением северных пашей это специфическая вещь она была добавлена вторая версия 110 и пока у меня не было времени и и добавить а так в целом все операции которые поддерживаться почти всем другим коннекторами все поддерживаются как его использовать но поставить его надо как не get пакет обычными средствами visual studio или там через комбайн и например вставка выглядит вот так мы берем схемам тарантелла берем какой-то space который называется а в нем есть у нас какой-то индекс который называется б например праймари и мы начинаем туда оставлять записи на слайде вставляются 4 тупо или кортежа три-в-одном droid другим 3вт этим там четыре элемента довольно удобно выглядит мой взгляд вполне хорошо много кода писать не надо вместо трупов это вот двойные скобки потому что мы используем в элиту пл и новая синтаксис языка сишарп а может быть любой объект вашего класса я чуть попозже покажу как это сделать а вот так выглядит код из реального проекта к сожалению выборка у нас очень сложная связано это с тем что индекс в текущей версии вот объект индекс который предоставляет вам интерфейс для выборки данных вставки в него он не типизированную ничего не знает о ваших данных каким типом вы хотите работать поэтому нам приходится много информация указывается например нам надо указать тип ключа который мы передаем ему что выбрать наши данные например это будет целое число там int чтобы вы выбираете поедишь нику и вот и нам ну так как он ничего не знает о типе возвращаемого значения компилятор не может его вывести сам нам приходится указывать его тоже из-за этого нам приходится указывать первый тип и поэтому он кучи всяких угловых скобок неудобно дальше мы указываем сам ключ и потом мы указываем параметры selecta например тут мы выбираем не в том порядке в котором они лежат базе данных об обратном например чтобы те до записи которые мы ставили возьми и всего они были первыми в нашем массиве в этом так мы отдаем записи клиенту pipe удобно также прямо это все в эту же структуру вы передаете там офсет если надо лимит то есть тег пожалуйста в конце концов нам нужно избавится от обертки которые у нас есть вокруг наших данных чтобы пользователи получила на выход просто массив этих самых данных почему так получилось когда мы писали первую версию коннектора нас был не очень много усилий ресурсов на это поэтому мы решили сэкономить на документации и мы предположили что пользователь пойдет и прочитает документацию к протоколу и поэтому весь наш интерфейс он полностью копирует протоколу тарантула как вот он есть но как вы понимаете это была ошибка и по факту оказалось что нам ежедневной работе приходится писать кучу кода несмотря на то что мы знаем протокол которым можно было бы не писать версия 1 0 это будет исправлено будет выглядеть примерно вот я напомню ст как выглядит старой версии и будет выглядеть примерно вот так куда своих делся очень славе потерялся прошу прощения в общем расскажу как это будет выглядеть мы будем у нас будет типизированный яндекс то есть мы будем в момент когда мы будем выбирать по если схемы указывать тип из значений которые нас там хранятся то есть вот метод get схема дальше будет вызов метода get space он будет генрик соответственно мне надо быть мы будем знать что у нас лежат ansi поближе и квеста в этом спейси и нам не надо будет указывать в каждом методе как следствие нам не нужно будет указывать все эти типы дальше и у нас попадет куча кода у нас будет индекс . select и соответственно будет более лаконичный куб если вы не знаете какие у вас данные лежат или допустимого сводные тоже колонки лежат и строки и массивы и числа для этого есть непрозрачный campo контейнера места шпак talkin' который вы можете дальше по месту преобразовать в то что вы хотите примерно вот так упаковывается ваш любых любой класс в тамбовский тупо вы говорите что это место чп а калий и расставляете цифры индекса там пункт к счастью это не только субботы то еще сервер приложений у нас достаточно много кода на ул а который использует внутри тарановский транзакция них нет пока они интерактивный доступны еще поэтому вам придется если вы хотите транзакции делать несколько обновлений разных space of или там нескольких записи а там одна вам придется писать код на ум вот у нас он достаточно много есть также мы используем тайн толку и котором палки у интерфейс примерно вот такой вот все методы там какие-то обычного функции их надо вызывать опять же куча скобочек все это очень не удобно хочется получить как рэнд ниже когда у нас и какая то ссылка на конкретно очередь и мы просто кладем неё task просто лаконично понятно да работы начнутся после релиза коннектор 10 ну то есть где-то в июле ну если интерфейс то у нас плохой может он хотя бы работает быстро но к сожалению не очень в марте пришли товарищи которые используют коннектор на гол они протестировали здесь делали миллион вставок в пустой временный space то есть чтобы там он написал ничего на диск чтобы исключить это влияние у них получилось примерно там 220 250 тысяч запросов в секунду на моем ноутбуке выполняется вот примерно за 4 с половиной секунды не чем арк но тут найти у них получались очень нестабильны и результаты там 30 секунд 40 50 там по-разному давайте разберемся что к этому привело может быть мы можем достичь 7 тысяч запросов в секунду как достигли этого в бенчмарке тех m-power вот так выглядит benchmark они берут миллион task-ов они же так как этот на этом народ мало работает то скотовод найти аналог фьюче или promise а в других языках они берут миллион task-ов составит миллион величина invert и дальше ждут пока они все завязываться ну это хороший код можно ли его переписать немножечко по-другому если мы сделаем размер бача примерно в тысячу раз меньше и соответственно итерации будет 1000 то в принципе мы получим те же самый 30 секунд они будут стабильными то есть мы получим консистентной perfomance test ride еще ps почему так потому что мы выделяем гораздо меньше памяти внутри работа в коннекторы нас гораздо реже используется garbage collector если в предыдущем случае там в конце процесса достигал там полгигабайта гигабайт то в данном случае он стабилен примерно там 20 мегабайт чуть ниже поэтому все работает стабильно но все еще медлил тут силе зато вместо чпок это формат который использует танту для общения с клиентами которые мы используем нам известно что он в два раза медленнее чем другой японцы написали прекрасный быстрыми such пока реализатора практически ничего не ассоциирует очень быстро работает поэтому мы решили но надо его взять и сразу мы получим в два раза у нас получилось вот так вот я потратил 3 дня все поменял и видимо наши паттерн и они не совпадают с тем как надо использовать японские сереале зато он прекрасен но газа нас к сожалению получилось замедление в два раза полтора мы получили 50 секунд стабильно 20000 ps поэтому пришлось все это откатить и смотреть на то как устроен коннектор это эту сторону все видно за мной на схеме показан один запрос тарантул что происходит когда пользователь просит сделать любую операцию стран tool красным выделены блоки где лоцируется массивы пайки который выкидывается сразу же и почти сразу же то есть нам приходит запрос мы пользователя возвращаем фьючер или task и мы говорим такой-то запрос у него должен быть заголовок котором мы тарантул объясняем что мы хотим сделать реализовали получили массив байт дальше мы берем тело запросу реализовали получали массив байт дальше нам нужно записать длину запросов согласно протоколу тоже реализовали получали массив байт из пяти байт и потом мы это все сели за руль и последний результирующий массив правильном порядке и отправляли это все второй был ну в общем сами понимаете от не очень быстро работала когда-то работает наш запрос когда-нибудь в будущем если запрос медленно или вот почти сразу если запрос быстро и он нам вернет ответ потому что протокола синхронно вы не связывает них никак нет гарантии мы опять же на х здесь реализовали длину потом заголовок потом соответственно ходили фьючер который нам нужно зарисовывать пользователю если мы его нашли все хорошо мы копировали соответственно ответ в отдельный массив байт и отправляли пользователю потом детализованы и ответ получалось так что почти все ну не почти вся все массивы которые показаны на картинке отмечены красным они все после использования выкидывали практически моментально они не перри использовались это создавало ненужную нагрузку на garbage collector поэтому это все версии 10 приписано не выглядит примерно вот так у нас получилось на появилась новая сущность этой рэй пул о котором я говорил ранее когда пользователь просит на чего-то записать в трампу сделать какой-то запрос мы просим буфер алипова соответственно мы в него записываем начиная с 5 по 6 поэтом и записываем туда заголовок потом мы записываем туда тело очень вспоминаем все то чему нас учили университете и добрый civic целиком щеки когда я начинаю работать в плюсах сожалению performance даже этот меч и достигается использованием или к счастью тех же самых техник то есть вам нужно аккуратно работы с памятью использованную память надо не выкидываете а в конце вызов после того как мы отправили запрос танцу на ее надо вернуть в пул чтобы следующие запросы нагретое ёжик и использовать а соответственно при получении ответа мы вообще никакой памяти дополнительно не выделяем мы в 10 реализуем прямо по ходу пьесы как все приходят и выдаем пользователь на соответственно готовый ответ да воли это какой то эффект ну в целом вот та часть когда cialis at our запрашивает у пула на схеме когда мы до запрашиваем памяти если запрос слишком большое она еще пока не сделал то есть оно не готовы целиком но уже получается прирост по скорости в два раза мы получаем консистентной перформанс 60 тысяч запросов в секунду это то есть тот самый benchmark выполняется примерно за 16 секунд плюс-минус когда ты за 15 когда 217 и даже если мы вернем benchmark который был написан изначально когда мы берем миллиону фьюче и ждем их всех то в принципе performance хуже но всего лишь чуть-чуть связано это с тем что мы не а вот тебе постоянно память не собираемые горбач коллектором а мы используем пула ничего нового коннектор код кроссплатформенный ну на мой взгляд он достаточно быстрый потому что все таки но хочется еще быстрее то есть мы от глаз стаём в три-четыре раза нам нужно года гнать желательно перегнать но это уж как получится из коннектора 10 планируется концу июня где-то в начале июля связано с моей текущей загрузки на работе там как получится как же нам разрабатывает под windows использует тарантул потому что тан тан та нет официальных binary под windows вы не сможете запустить но вариантов вас 3 на самом деле виртуалка этот тренд maps у рассматривать не будем каждый запускает свои виртуалке если он ими пользуется как ему удобнее настраивает как хочет там бокс гипер витом в январе пожалуйста все что угодно вы можете использовать докер для докера вас вот и вы можете использовать windows обсе steam for linux если вы сидите на десятки для докера у вас есть а до края смотрим чуть позже сначала надо смотреть систем phalanx почему потому что я ее не использовал я видел в чатике the apple of телеграме куда я рекомендую всем кому интересно записаться там обсуждают всякие полезные вопросы предоставляется поддержка что люди запускают тарантулы в принципе я не вижу почему нет он прекрасно работает вы можете выбрать 3d дистрибутива на текущий момент microsoft скоро это ubuntu kali linux и об иисусе который какой вам больше нравится ну лично я пользуюсь ubuntu и перейдём к докер которыми мы пользуемся при разработке это более автоматизированный вариант и на текущем взгляд на мой взгляд он более стабилен чем все остальные у вас есть на выбор плода кир образа это официальный и неофициальный поговорим про их различия официальный он стабильный он выпускается каждый раз когда команд тарантула выпускает какой-то конкретный релиз обновления билда раньше случалось часто сейчас пока еще не случалось на в целом есть так 110 если будет какой-то критичный баг в нем скорее всего в теге 110 после фикса этого бага заменит build то есть у вас может случиться такая ситуация что вас на как на всех машинах вроде бы 110 так вот наш вода контентом требует разный бин аль крутится обновляется достаточно редко поскольку это стабильное место там не над часто обновляться но как бы можно и нужно на самом деле почти всегда использовать его есть неофициальный контейнер который поддерживаем и он собирается на каждый коммент в основные лесные ветки точно также как собираются пакеты тарантула для ubuntu и остальных линуксов он считается нестабильным и потому что но я не тестирую все билды которые вы едят поэтому на самом деле настолько стабильна на сколько команды тарантул заявляется табельные их комменты в основные ветки там 110 20 если вы им доверяете то в принципе можно считать все билды эти стабильными ну и туда добавлены некоторые модули полезны например ну utf-8 для работы с utf-8 строками вот он очень часто нужен но связь 110 говорят в tarantul есть свой utf-8 модуль поэтому мы его вскоре выпилим из версий 20 нужен спейсер для работы со схемой и соответственно планируем добавить другие модули например я думаю что мы добавим почти все модели man lips который поддерживает manos вот и они достаточно полезны всякие для горячие перезагрузки пакетов для дополнительных и частей если вам не нравится таранто узкий очереди всегда лучше иметь выбор при разработке следует учесть что вы не сможете использовать секунда до версии 2 0 то есть вам придется выучить lua он достаточно специфический язык всегда следует помнить что массива волос начинается с единицы и то на этом можно поймать очень много интересных багов и не ло работает очень странно например если у вас неё есть в конце массива толо будет вам говорить что ваши массиве это vanilla нету поэтому если у вас допустим ты элементами небо 4 new злобы и читать что в этом массиве 3 рекомендуется использовать это рекомендация от команды тарантула специальный щетка для бокс null который себя ведет не так секула в принципе работают он поддерживается опять же коннектором в при релизной версии можно пробовать единственная г к сожалению не знаю как версии 20 можно ли работать из сиквел а счас пейсами которые созданы и злого версия 18 так делать было нельзя это следует иметь в виду так что я рекомендую вам сначала протестировать а потом уже там посмотреть как она будет но в целом все эти проблемы которых я описываю они не специфичны для did not any специфичные для любой другой язык а не как в любом другом языке будет тоже самое ну я так как довольно много работает на этом я привык использовать visual studio очень удобно у нас есть отладка у нас есть профилирование мы можем подсветкой синтаксиса там ли факторы всякой с помощью решать все очень круто к сожалению долл взяло это тоже есть но с саске стороны это может быть проблематично есть официальный агат гайд как использовать идею а jetbrains и люди говорят что она работает но опять же я не пробовал мы пишем visual studio код и используем pink для дебага когда вы все напишите и запустите этот продакшн вам нужно будет это все мониторить и как-то логировать данные мы логинимся в g7 рекомендую настройку тарантулов поставить вот эту точечку который наверху написано чтобы у вас все логе были джейсон и тогда спорт вы можете передавать блок инфо метод не только строки но и таблице у вас будут прекрасные джейсона всякие любой вложенности влоги для этого не надо делать никаких специальных мы фильм махинаций и все будет работать мы используем докер поэтому мы используем дел flogging драйвер который шлет все наши джейсон логе из tarantula back stage lacks the shift их разбирает и как-то фильтрует и отправляет ластик search и дальше мы все это смотрим кибом достаточно удобно соответственно вы можете использовать там любой logging драйвера пожалуйста докер как вы хотите для мониторинга можно посмотреть в танту про митоз модуль он есть стандартной поставке всех докер образов и он соответственно икс против метрики в при -20 совместимом формате или посмотреть как написать свои там используется модуль ктп сервер можно посмотреть как на талант или можно писать приложения прям сразу mvc поставить переднему емс например и выкинуть совсем репликация втором туре асинхронная я рекомендую об этом помнить вот есть люди смелые например мегафоне они собираются делать на нем биллинг я верю что у них получится но это имеет определенные свои нюансы репликация река я рекомендую настраивать как мастер мастер даже если вы будете использовать его как мастер slave потому что так проще вы одну и ту же конфигурацию накатывается на все сервера допустим над исчез из версий 19 вы их поднимаете они нормально поднимаются запускаются связываются друг с другом и получается у вас рабочий мастер мастер репликация сожалению тут над к коннектору он пока может can act только к одной но дело которую вас из-за это будет работать как соответственно мастер на на я не знаю буду ли я это исправлять потому что придется делать сложную логику которую придется куда-то положить как коннектор должен выбрать в какую ноту писать вот допустим у нас мастер нода недоступна можем ли мы описать в своих много или читайте своих ноды как коннектор должен принимать это решение видимо нам придется сделать какой-то механизм конфигурации когда пользователи то есть разработчик приложение будет выбирать сам но это пока дополнительный уровень сложности в которой лично я не хочу если честно углубляться и мы этим займёмся после релиза 10 стабилизации него и соответственно если будет такая нужна следует помнить что если вы используете любой неважно как коннектор вы используете мастер мастер аппликация использования всех ног в кластере как мастер мастер не всегда совместима с каким-то модулями например модуль кью не рекомендуется использовать мастер мастер репликации потому что вы можете взять задачу как который предполагалось только обработать единожды вот на двух местах одновременно поскольку репликацию вас асинхронная и выполнить ее дважды например дважды списать пользователя деньги будет ну нам хорошо пользователю не очень и в ваших модулях которые вы будете писать соответственно следует это учитывать например можно каким-то образом определить что у вас логика slave что вас много слоев и соответственно не запускать ваш модуль так например делает expiration идти в котором можно посмотреть как это делается там-то вот у нас на самом деле как то слишком быстро рассказал мне говорят что у нас осталось 15 минут трампа у нас не только зубы да это прекрасный сервер приложений например мы на нем делаем сложную логику лидер бардов для пользователей кто больше вопросов задал кто больше ответов дал тому у кого больше лайков вот мы это все делаем внутри ло в шарпе мы это не делаем потому что зло мы можем это сделать достаточно итамар на разработкой может быть для тут нет разработчика непривычной не т.д. нет удобных инструментов на в целом это все достаточно просто в эксплуатации тоже не сильно сложнее чем сиквел сервер на этом все ваши вопросы какой роутер avi шерсть бишоп мне сказали ну я знал что он так же на ледяной а не знал насколько поэтому мы квеш альту будем делать интерфейс тоже на соответственно так как вешают это всего лишь ну его функции это всего лишь ло функциями то вы можете вот примерно как здесь его использовать сейчас покажу где тут у нас был кью вот смотрите сверху кот за делается к авторам пол вызывается функция передаются до параметры можно точно также использовать в шорт и когда мы сделаем к нему интерфейс на самом деле внутри себя он будет делать нечего больше чем пол запросу the mental я надеюсь я ответил на вопрос то есть удобного интерфейса к нему нет но нет ничего что у вас может остановить от использование а ну так это же было надут над колер в целом дали если посмотреть на те кампала benchmark который в date and core есть первый слайд но миллион секунду нет пока на самом деле там если внимательно посмотреть то все вот эти вот парень который делают 7 миллионов запросов секунда с одной ноты не только надо отметить и но и на дасти там на всех других языках это же простой get запрос который за час . hello world so там если посмотреть другим бенчмарки который с базами данных работает там больше по моему 500 тысяч нет ни у кого на тут наткали там соответственно спас гле запрос случайной записи поедешь нику 250 тысяч запросов в секунду то есть много очень много на нам для того чтобы его повторить нужно чтобы microsoft консульством ли часть топе которые они закрыли века сожалению пока нет го в dota от курева нее есть это она помечена так им unter null мы не не можем его использовать ну то есть можем понятно все расковырять но не пока не дело текущая реалистично и скорость работы там пока доктора это версий 10 который выйдет там я надеюсь через две недели это будет 60 там может быть 120 тысяч запросов в секунду с одной надо поэтому мы загружаем но так как это стирол на ноутбуке он четырехъядерный соответственно 1 duo джедаев to rumble 1 и до джедая отжирает соответственно тут нет еще одно ядро к сожалению отжигает vpn кит это такой модуль в гипер we который отвечает за маршрутизацию запросов между windows и linux к сожалению там честного punch марка я провести не смог у меня там дома нет wedding серверов но я думаю что в целом около того бы я думаю что будет примерно тоже самое он попробуем попробуем я как бы не хотел нажимать какие-то специфические цифры потому что можно сделать как microsoft овцы которые сделали вот этот бенчмарк на 7 миллионов запросов в секунду там у них написан очень код с большим количеством хаков которые со временем принимает человеческий вид и приезжают в общей репозитории kor-fx основной библиотеки я же мог сделать также подготовить там допустим заранее массивы с этими мисочках запросами и не тратить время на них и получить дам допустим там но 120 150000 и сказать ура мы почти такие же быстрый как бы это будет нечестно честная скорость это 60 тысяч запросов в секунду с одной машины используется для пакета запроса же закопает заполирую мудрец затем толстая батик но до в целом можно так делать это надо будет протестировать и когда мы писали коннектор мы делали то есть был сделан четкий выбор мы либо делаем буфер под каждый запрос либо мы пытаемся угадать будут ли еще запрос и потому что у нас допустим не всегда ведут там пачки запросов то есть как вы определяете что допустим вот у вас буфер там я не знаю там 10 килобайт допустим запрос на select он там занимается мне не помню ну пусть бойцы то вы ждете пока у вас целиком заполнится у вас есть какая-то логика а это я понял вдохните это называется pipeline и итачи новое в g.na но по-моему чем он называется похоже абсцессов га я не буду этот нити pipeline и есть как бы абстрактно и какая-то штука на адаптер к ней для сокетов еще не написан я если я себе не слишком доверяю чтобы это делать но но понятно запись и соответственно к сожалению сейчас я не могу так сделать потому что если отдаю буша какой-то буша внутри сокеты вдохните и придать продолжил в него писать это будет антифа endever но непонятно какой частью нато вид а какой нет важно но тогда его них в этот буфер не могу писать да а то есть вы посылаете сигнал а он делает switch пока он не сделала switch вы туда дописываете еще запрос так можно сделать потому что мы используем похожие схемы но мы под new так сам покладем буферы в очередь на отправку просто то есть у нас есть очередь на отправку отдельный поток занимается отправкой это все в офисе гогу хозяйства в socket но мы как я как раз работаю над этим посмотрим чего получится потому что сейчас вот благодаря вот этой вот штуки которые спам она позволяет передавать между разными частями системами как бы слайс от одного буфера и работа с ним я думаю что благодаря этой штуке у меня получится плюс минус тоже самое что говорите вы соответственно но тут найти написана одна мама ложка который пишет человек под на по имени бэн адамс андам иногда присылают страшной хоакин типа давайте мы вас в string формате поменяем чего-нибудь это даст мне прирост в 10 процентов вот и у него выйдет не 2 миллиона запросов в секунду adwords и 2,2 очень часто и все его хаки принимаются на есть часть хаков которые к основная команда отклоняет потому что тут нет к сожалению это не веб-фреймворк в целом это фигурка общего пользования общая направленность поэтому они говорят что вот web случае мы получим прирост производительности а во всех остальных и там 90 процентов мы получим регрессе это следует помнить то есть если вы хотите написать что-то совсем быстро то скорее всего вам придется все писать с нуля потому что иначе любой фреймворк который вы выберете будет добавлять какие-то накладные расходы особенно если цель и ваши и автор на framework не совпадали еще вопрос ну значит большое вам спасибо что пришли анатолий спасибо вам"
}