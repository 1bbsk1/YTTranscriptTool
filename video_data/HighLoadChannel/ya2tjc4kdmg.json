{
  "video_id": "ya2tjc4kdmg",
  "channel": "HighLoadChannel",
  "title": "Cloud Platform от VK / Виктор Коноплев (VK Cloud Solutions)",
  "views": 981,
  "duration": 2551,
  "published": "2023-01-19T05:55:16-08:00",
  "text": "меня зовут я рукава ним облако компания в главу solutions комп k-9 mail ru известна своими петухи сервисами и в том числе и социальными сетями но помимо этого у нас есть еще и крутые биты 2 продукты и вот сегодня расскажу как раз таки историю про один из этих продуктов о том как как мы создали коробочную версию нашего публичного облака и о том какие у нас на этом пути были трудности и факап и а в конце расскажу про три принципа которыми мы при которыми мы сами пользуемся при разработке сложных продуктов и так для начала наши облака облака принцип похоже на любое другое облако она обладает высокой доступностью располагаются в самых лучших дата-центрах имеет гиа репликацию и и можно управлять с помощью open но мы в отличие от большинства облачных провайдеров которые есть в мире построено не на базе про при детальных решения на базе apple собственных решений и ну просто другие облака используют а приторное решение они имеют схожий набор функционала и канкуро станок только ценой мы же выбрали open source на решение этого конспект это набор компонентов которые легко интегрируются между собой и для реализации того любой новый функционал мы просто берем нужные нам компоненты и используем их для создания облака и в принципе стратегия которую мы придерживаемся уже несколько десятков лет она и заключается в том что мы не используем проприетарный тем более западная по а используем open source и на базе него pillar свои собственные продукты собственное решение и если ну это видео для того чтобы копить экспертизу именно внутри наша команда разработки и у нас в компании сейчас эту стратегию принц называя стратегия импортозамещения а мы ее но уже очень давно придерживаемся кадаф 2000 восемнадцатом году появилось наше облако она состояла из базовых сервисов это инстанции резервной копии диска вы хранилищем и кстати мы бы у нас два слоя собственно писано с 3 нами то есть мы не использовали что-то старанием и мы также сразу запустили ipad форумные сервисом это управляемым база данных и мы были первыми в россии кто запустил кубер нить из как сервис что касается публичного облака но практически сразу после этого мы решили о том что он всем нам не сделать коробочную версию публичного облака мы уже так делали из почты с мессенджерами и с базой данных и мы решили сделать на базе публичного облака коробочное решение виде частного облака сейчас ноутбука но устанавливаться на территории заказчика на его оборудование в его дата-центры это интересно для тех клиентов которые по требованиям информационной безопасности не могут размещать свои данные в публичных облаках и вынуждены строить свою инфраструктуру но чтобы они ее не строили самостоятельную они используют разные готовые решения в том числе и наше частное облако когда мы только запустили частного облака работа по сценарию эта инфраструктура как сервис это базовый eos функция и возможность тарификация клиентов чтобы мы могли понимать но наш кем могли понимать какой департамент сколько ресурсов потребляет затем частное облако развивалась и она стала еще работать и в режиме платформа для разработки чтобы разработчика с помощью по оси 1 авто могли строить удобно себя среди процесса и вот недавно вас появился третий сценарий работы это платформа данных с помощью частного облака можно строить озера данных и работать с ними это что касается частного облака тем временем публичное облако она напомнила появилась в таком формате и затем но начал развиваться и мы развивали нашим фенокс инструменты мы все-таки обычный товар мы должны тарифицировать лента потом написали свое собственное решение это тарификатор скрудж и мы использовали биллинг который уже использовался в наших как ну компании других продуктах также начали развивать систему мониторинга и а лифтинга ну чтоб понимать как работает облака и случая разных инцидентов что мы могли устранять затем начали развивать другие инструменты и мы написали свои собственные приемы с али инструмент котанам это инструмент который позволяет балансировать нагрузку между разными типа ревизорами если у вас есть кто-то теперь you better вызов которые загружен очень сильно так от она вытаскивает из него самые загруженные виртуальную машину и переносит на менее загруженный гипервизором артем карам шахтер написан инструмент написал также еще и статью можно и почитать вообще мы довольны частности рассказываем про наше решение как мы что-то меняли в облаке или писали с нуля там где мы лазаренко рассказывал про то как мы запускали кубер нить из и почему мы вынуждены были переписать некоторые компоненты марки страт орхидных герпеса ре саша попов рассказывала про то почему мы отказались от нейтронов пользу спрута в общем не так же мы ищем пройдем внутренняя конференции на которых тоже рассказываем про то как мы меняем окон стенд и вообще облака развиваем облака публичную но развивалась и в ним добавлялись разные сервисы у нас появилась там магазин приложений где можно установить положение в право кликов мы развивали платформенные сервиса добавили разные базы данных клик house также мы добавили самую быструю в мире базу данных тарантул добавили инструменты для big data и машинного обучения и ну разные инструменты для повторения соседи если кратко и про публичное облако то она очень быстро развивалась и очень сильно да то есть у нас было много людей мы выросли в несколько раз командах разработки у нас появилось много новых компонентов мы переписали старые компоненты в публичном облаке чтобы запустить новые сервисы но это все было в публичном блоки в частном же облаке была боль и страдания вот почему во первых мы очень любим наших клиентов и поэтому мы делаем все что они попросят если клиент частного облака просила что-то для него доработать там это делали даже если в публичном облаке это было не надо и и за это мы столкнулись всем что все наши инсталляции были разные ну во первых это было из-за того что у нас были там разные инструменты тепло и дело в том что мы запускали частное облако свое тепло и публичного облака были еще не готовы к тому что мы их могли использовать и в частном облаке это приводило к тому что столице было сложно поддерживать и вся эта поддержка на ложилась на хрупкие плечи наших инженеров эксплуатации это еще приводила к тому тоже все старается разные что обновление было очень сложно и долго доставлять до частное облако это огорчало и нас и клиентов потому что инсталляцию с настоящим ну сильнее расходились также у клиентов очень сильную подгорало от того что мы не могли им те фичей которые вот новые появляюсь публично облаке за донести в частное облако потому что было очень много разных сложных зависимостей между компонентами что не позволяло нам затащить фичи в частное облако и что еще нам было очень обидно то что все что мы дорабатывали для клиентов частного облака нельзя было еще и переиспользовать в публичном облаке иногда это было просто не нужно иногда это было нельзя по причинам безопасности и если вы почему мы с этим столкнулись то причин такие разные инструменты деплоя то есть разные сталь отары которые разворачивают и на составляются частные публичного облака независимых команды разработки 1 делает все для частного облака другая делая для публичного облака отделаю то недоработки еще и под разные требования потому что у нас клиенты публичного book хотят одну а частного кука другое поэтому нас разные требований по этому еще и совместимость этих компонентов невозможно не только между публичным и частным еще и сложно поддерживать обратную совместимость и на этапе внедрения у нас инсталлятор вы не на 100 процентов автоматизирован что приводило к тому что когда мы только-только развернули инсталляцию дальше приходилось конфиге до настраивать и поэтому инсталляции сразу после внедрения уже немножко отличались между собой и сейчас та же самая история но в картинках да изначально у нас была публичное облако и команда разработки которые его разрабатывала отрабатывала на ну готовую решение платформу за это либо там zabbix кубера японская который мы дорабатывать а так же мы использовали разные сервисы ну например mailer для отправки уведомлений или биллинг и другие продукты нашего бизнеса in the затем нас появилась публичным частное облако и она при вас месяц своей командой разработки и у нас было два инсталлятор один инсталлятор ставила публичное облако другой инсталлятор style коробку частного облака и у клиентов частного облака еще были разные платные интегрируемые решения ну например hp 3par или huawei города вашему каким-то скд вот и они ставились уже непосредственно у самого клиенты там происходило проверка и тестирование затем на спалось еще одна версия частного облака это частное облако с сертифицированными компонентами это актуально для себя компаний которым нужно аттестовать свое облако по стыку и потом ему добавили все разные инструменты например добавилось явка виктория метрика для лакирования потом нас добавились развивались по а сервиса на при этом лицензионный там ореанда то и по сброс про и добавили treehouse это уже можно заметить что схема она не идеальна и довольно-таки сложная и вас какой-то очередной момент когда инженер эксплуатации уже не могли скрывать слез а руководитель группы эксплуатации сидел просто на глазах мы поняли что нужно что-то менять и вот что мы сделали начал но определили некой ядро компонентов которые будут использоваться везде и во всех версиях нашего продукта в частном публичным любом другом облаке и они тестировали сразу с учетом работы в разных условиях работы с разными с катышками цехам и так далее то сразу начали тестера по все условия затем мы написали единый инсталлятор который разворачивал и эти компоненты из ядра и другие готовые решения zabbix виктории метрика сервис наши внутренние там mailer и прочие или продукты би ту би от ее было единый инсталлятор который разворачивал сразу все эти компоненты и потом эти этот инсталлятор он мог конфигурируется уже дополнительно разным образом чтобы разворачивать немножко по-другому публичным облака частные так далее здесь имею виду что инсталлятор он мог немножко по-другому настраивать компоненты ну например и а это дэн эти access management который отвечает за авторизацию идентификацию аутентификацию на чем он может работать по разному в публичном облаке он работает у нас внутренним сервисом в частном облаке ну например может интегрироваться с циклопом это вот на этом этапе как раз таки инсталляторы конфигурируется дальше мы добавили еще один вариант работы нашего публичного уже облака но это настали тема другого доклада просто кратко скажу что и если есть как он ну допустим интегратор которую пути предоставлять услуги облака но не хочет делить свою платформу и вот для таких клиентов мы разработали еще дополнительный продукт назвали вы peppers кайл который позволяет клиентам стать нашим партнером и не углубляться самим в разработку компонентов облака а дальше мы должны сделать следующим мы хотим объединить все виды инсталляции чтобы в режиме одного окна можно было управлять сразу и частным облаком и без дополнительной авторизации переключиться на публичное облако или на облака партнера ну дайте только следующий шаг для гибридизации и вот теперь уже когда мы прошли все эти изменения я могу уже точно сказать что наше частное облако она является точной копией публичного облака и содержит все его прелести все его функционал и все в доработке а до этого так было нельзя сказать что же можно рекомендовать во первых когда понять делаем какой то большой сложный продукт это нужно поделить некое ядро которое мы не будем менять которое будет зафиксировано единым для всех возможных вариаций инсталляции продуктом если же мы хотим сделать какие-то доработки под клиента или нет это нужно делать отдельно видя никого плагина и мы должны опираться на стандартизированное api который у нас описаны и когда мы разрабатываем вот эти компоненты ядра мы должны это делать тоже довольно таки стандартизировано и унифицированным но то есть мы должны сразу проверять а как это ядро будет работать в разных условиях при разных режимах работы и конечно же мы должны соблюдать это контроль версий и обратную совместимость и еще хочется порекомендовать это на старте когда мы только-только запускаем какой-то продукт можно чуть-чуть отступайте от рекомендации от всех правил ну на все знают равен вики и обычно продукты но спорят между собой а как буква в расшифровывается но забывая про то что после того как мы запустились нужно остановиться подумать о правиле мы сделали а как это можно было бы улучшить и подумать над качеством продуктов его за что люблю компания ввк это как раз за то что мы можем остановиться и переосмыслить а как мы должны это сделать правильно ну вот например терсо ну виртуальные сети когда мы запустили в облаке виртуальные сети мы использовали компонент нейтрон из окон стеком но он был не идеален для нас и поэтому мы выделили команду разработки заперли ее на бот и дали им полный карт-бланш чтобы они переписали sd нс 0 и они сделали это и это ну то же самое проделал с частным облаком то есть мы запустились мы прошли из зоны полной неопределенности в зону где мы понимаем от как надо было сделать правильно да мы уже прошли все три вне и согласования с информацией безопасность о том что мы возьмем наш плот и кому-то дадим мы поняли как это автоматизировать в pst которая состоит из кучи разных компонентов и сделать так чтобы он мог разворачиваться на сто процентов автоматизировано вообще без ручного использования вот и в принципе на этом у меня все если кому то интересно ну тема импортозамещения то можно посмотреть про частного облака на сайте ну или нашим telegram канале также можно задать вопросы мне либо счастливы в кулуарах в общем у меня все спасибо за внимание спасибо а поднимать руки давайте педику теру им а так вот слева слева есть поднятые руки сейчас сейчас туда прибежит микрофон собственно будто вопросы добрый день большое спасибо за доклад расскажите пожалуйста передаете ли вы заказчиком частных облаков какую-то инструкцию и ответственность по поддержке или точно также ваши специалисты сопровождают это все как и публичного лука когда мы говорим про внедрение часто о богах облака на базе окон стека то это ну давайте сложно задачам мы обучаем наших партнеров для того чтобы партнеры могли внедрять ну и сами тоже занимаются внедрением если говорить про то что просто дать дистрибутив да мы можем это сделать но развертку него пан стека но донки сложным я не знаю вся в зале есть кто-нибудь у клиента развертывать частное облако вообще внутри а есть а а вы развёртывали на базе западных vendors ких решений vm ware и лишь на такого openstack вот вот друзья по боли они понимают что это ну не не очень тривиальная задача и да мы можем отдать дистрибутив но лучше это все-таки сделать под нашим контролем и по нашим присмотром выделять отдельный специалист да у нас есть отдельная команда внедрение который занимается и на внедрением продукты окей так давайте дальше спасибо за доклад александр у меня вопрос такой вот вы начали свой доклад импортозамещение что вы были таким момбаса даром да и импортозамещения как это все начиналось вот у меня такой вопрос каковы перспективы перенесение ваших решений на отечественный архитектуры центральных процессоров такие как е2 к эльбрус ну и последствии там байкал если каковая экспертиза поэтому он да спасибо ну во-первых мы запускали уже наша частного облака на базе ядра и депо этот не совсем то конечно а если критом протест на процессоры который там на базе р.м. там ему заказали сейчас тестовые стенды тестирую но это не быстро будет то есть мы планируем да но это будет не так в ближайшее время у вас пока еще нет такой экспертизы как у сбербанка или у того же я не индекс помпон помощь batman был что они как бы моралист тестовые стенды наш брусок и тестировали свои решения и предоставляли как бы открытый доклад вы собираетесь это делать и в какой перспективе ну когда и брус и другие процессоры можно будет приобрести мы приобретем и года протестируем но не в этом году анонсирует пока не буду ближайшие будет это именно rm процессоры и будем тестировать я понял спасибо так еще образом а вот 30 ряд есть рука добрый день спасибо за доклад вопрос такой собираетесь ли какие-то наработки которые вы делали для окон стекол выкладывать кругу revoke and source это просто мысль какая вообще компания реке делала так мы так уже сделали star антон и мы думаем над этим и в части частного облака но пока ничего анонсировать не буду так я стащил со папа спасибо заклад у меня 2 вопроса во-первых гарантия если вы какой-то силы именно инфраструктурного слоя в частом облаке но или фактических интересно какой downtime появляется какой то он time last именно инфраструктурной части и второй вопрос сильно ли приходится допиливать и openstack то много ли у вас почти по сравнению с тем что в онлайн ну первый вопрос это целый мы продаем программный продукт с помощью которого можно раз создать частное облако как силы тоже оказывает наш клиент который для своих внутренних клиентов предоставляете облака поэтому ну мы даем если на то как мы будем дорабатывать продукт и развивать его то есть мы на продукт продаем они инфраструктуру то есть я просто так понял видимо я думал что вы поднимаете ваш ваш так скажем то есть скажем если я такой клиент которым нужно иметь структуру тебя там я уже мы сертифицирована с ответственным образом то вы ставите софта мои сервера и вы пока ваши дежурной смены следит тем что он работает или и на так понял а ну это если мы говорим про l2 поддержку да . да мы там еще и from some следим за тем как система работает такой вариант тоже есть но это за отдельные деньги занимал и конечно на можно такой вариант рассмотреть мы можем да еще и мониторить систему такой режим тоже возможен но стандартно вообще обычно берется именно по а мы окажем только литре поддержку по доработке по развитию самого продукта вопрос про доработки ваффен-сс т.к. ну мы переписали много компонентов мы написали например всего началось это с 3 наш собственный из 3 в пасти кита свифт потом мы написали свой собственный тарификатор и биллинг в офис и кеннету там есть некий били но он был мертворожденным 6 лет назад появился туда ни одного коммента нет потом мы написали два регистратора полностью с нуля мы заменили хит это для магнума используется для кубер не tissot вниз номер свой собственный оркестр а то потом мы написали а регистратор для бэкапов вместо корр бара тоже с нуля полностью мы взяли за основу логику corvara и переписали ну под свою архитектуру потом вот классная есть история тут есть саша попов который может рассказать про то как мы сели с нуля написали свое со свой собственный sdn вместо нейтронного патетично мы написали свой спрут вот это касается новых вообще с нуля компонент в другие тоже дорабатывали то есть труп он например но это который добраться создает он не работает с клика усами тарантулом мы его переписали чтобы он работал вот поэтому да дорабатываем много очень много с его лапки еще поднимайте руки от 3 ряд из вас такой прокачанная под стек до больших больших стероидах спасибо за доклад и это уточнить по поводу сервер наоборот некоторые используйте если какой-то и чтили у вас и в целом в инфраструктуру с точки зрения железа даете к своим клиентам и лежит чисто софт у нас есть 2 варианта поставки это либо чисто по когда он и от нас или три поддержка есть другой вариант это единая цифровая платформа это когда мы разворачиваем а территорию клиента мы же еще и поддерживаем но это более сложный такой вариант это более персонализированное скажем так скрипта тот какой именно какие конфигурации пир хостов поддерживается если кита рекомендации про интегратором конечно когда в разделе бойл 3 на пир вот как быть кастрюлю с такого-то должны быть какие-то используют процессоры intel md такие ты если это горячей именно вот такого инфраструктурного уровня до уровня железа а если про железо сам то тут работает в принципе на любом оборота x86 архитектуры то есть даже на самых древних серверах можно запустить вообще да есть дизайн гайд если там интересен продуктом его можем предоставить некие условно то как лучше собирать облака это для интеграторы проекты понимать да она все описано дизайн гайде до так окей aп а было последовать я вот я я слева слева от ада вот скажите у вас облака предоставляет возможности database of service а есть ли возможность и не может быть планы на развертывание купер найти серверов ось курка ритм этих кластеров у нас оберните как сервис есть есть да и в облаке в частные могут ездил евро мы были первые в россии кто вы запустил г.а. все понял видимо я выпустил я бы ушел всего до сказали вы самые первые кто сделали midget кубер найти себя среди российских облаков такой был амбициозный план у нас понял так давайте вот здесь от спасибо за доклад а подскажите по поводу сетевого оборудования у вас какие-то открытые платформы или стандартно там джинни террориста cisco просить его бару и вот там рядом есть евгения может на на его уж попросить отвези потому что что касается сети да да да да евгений микрофон пожалуйста что это руководители группы эксплуатации я думаю он лучше подскажет когда в частом облаке используются оборудованы клиентам и сам продукт частного облака не управляет сетевым оборудованием то есть мы используем как cisco джунипер то что стоит на у клиента непосредственно в нашем туре используется cisco а почему cisco то есть это самая выбор в к самому так исторически сложилось так ладно еще раздражение да это тот самый человек который кактус ела дает спасибо рту да так ладно а еще есть какие то вопросы поднимать руки так давайте 2 2 ряд а что у вас сохранение мнут в частом облаке то есть необходимо отдельно там покупать какой-то сахар d или вот вы упомянули что sf там вы использовали это там продакшне и работают можете как-то прокомментировать да ну у нас есть несколько вариантов то есть есть цех это самый базовый простой вариант на котором будет работать частное облако просто дело в том что у многих клиентов уже куплены разные сходи и они не хотят от них отказываться поэтому мы интегрируем сестры парам дорадо и другими а по умолчанию это цех стандартные которым можно использовать до соответственно можно поменять то можно вместо цеха поставить что-то с 3 совместимая обычно самое популярное сейчас это huawei города на самом деле у нас меня стоит меню у нас идет в marketplace и можно его тоже использовать окей так ладно еще вопросам так ну я думаю все у меня был вопрос то есть я коробка представляет как она вообще выглядит это какой-то большой архив с множеством файлов это набор дистрибутив до набор куча разных скриптов и документация как общем это так очень очень большой диск который можно принести в дата-центр который очень имеет выхода в интернет из него уже разворачивать диск нужен быть действительно большим потому что она весит много а то все дистрибутивы все что необходимо это может а х так первый ряд это вопрос вопрос пояснения давайте немножко только добавлю всем привет я это же из его клауда добавлю только к коллегу это спросил по поводу скажем так обучения мы готовим куст полупан стояку и так далее и экспертов компании интеграторов постепенно начинаем обучать и компании кто не пускает свою инфраструктуру но у кого есть задачи разбираться в этой истории мы готовим для них уже курса и в этом году уже будет запущен и и отвечаем на вопрос пульсовой у нас уже есть несколько боевых проектов один в раз над нами к там как раз на еды и там крутятся боевые системы там есть тестовый и мы тоже как бы мы не можем войти внутрь инфраструктурой все закрытые проекты"
}