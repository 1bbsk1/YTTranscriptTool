{
  "video_id": "xe9HNPoHq1I",
  "channel": "HighLoadChannel",
  "title": "Малоизвестные грабли A/B-тестирования / Роман Поборчий (self-employed)",
  "views": 547,
  "duration": 2485,
  "published": "2017-04-22T14:47:45-07:00",
  "text": "и наш следующий доклад будет рассказан романом он работает сам на себя и доклад называется малоизвестные грабли оба тестирование и роль контрольных экспериментов которые уже артур частично затронул прошел роман здравствуйте спасибо что пришли на самом деле мой опыт с тестированием тоже по большей части происходил в яндексе и сегодня я просто хочу на более узкую тему поговорить с тем чтобы можно было зато в неё глубже забраться закопаться вот смотрите почти наверное да поднимите руки да вот кто работает каких-то проектах где есть об и тестирование 0 из вас довольно много хорошо кроме обед тест вы наверное следите за графиком целевой метрики своей да вот на всей своей аудитории и все время считаете и смотрите как она себя ведет если это что-то коммерческая какие-то магазин или услуги вы продаете то там понятно конверсии дают что такое связанное с деньгами вот а если это развлекательный портал или ну не знаю поиск до социальная сеть там чисто на деньги смотреть стрим надо потому что если мы все обвешивать рекламой мы в моменте очень много денег получим зато от нас убегут пользователя это будет обидно вот поэтому там на деньги конечно смотреть надо но скорее всего что то основное то вы к эта мера лояльности пользователей на сессии на пользователя возвращаемых пользователь ну какие такие вот вещи вы все делаете честно да все по экспериментам качестве только то что показывает улучшение по целевые метрики и конечно после этого график вашей целевой метрики должен себя вести как то так да вот во времени до дата так так себя ведет не вот он на самом деле вот как-то скорее вот как то как то так обычно да и можно можно отговариваться тем что это конкуренты тоже свои продукты продвигают и оттягивают у вас пользователей можно еще ну на какую нибудь сезонность все списывать ну а можно в числе прочего предположительно секунду что ваша система бы экспериментов может быть сломана но может работать некорректно и вы таким образом принимаете ошибочные решения всегда или хотя бы часто вот как именно может быть сломано оказывается что но всяко зачем мне на русском языке жгут и литературы найти не удалось при том что в мире очень много на это внимание уделено и много можно найти ну там тех же статей из бинга на потому что бен он как-то более открыт чем например google и даже наверное чем чем яndex да и они очень много рассказывают о том что делать вот и вот у них можно много найти а все что на русский перевод обычно ограничивается тем что перед тем как начинать экспериментировании запустите хотя бы один контрольный эксперимент и проверить что на нем нет значимого результата и все практика до общения с коллегами товарищами показывает что даже это их заставить сделает довольно трудно мне почему-то читать что это не нужно но я хочу показать что недостаточно на один раз провести эксперимент в нашей системе на там есть ползунок статистическая значимость в этом можем выставлять 95-99 но или в какие-то другие числа 99 что это значит это значит что мы готовы к тому что у нас в среднем одно решение и стал будет ошибочным весь мы готовы к тому что наш инструмент 99 раз примерно говорит нормально она соты расшибается если он например ошивается два или три раза и 100 то это уже не штатная работа при этом скорее всего он ошибается в значимых каких-то местах и именно значимая эксперимента у нас больше страдают чем те у которых нет никаких изменений вот и мишу вот если он работает чуть чуть не штат на то как мы это вообще с одного раза проверим ну никак не проверим найти если у нас 99 до значимость то как мы это проверим если мы даже 100 раз запустим контрольный эксперимент можно вероятности считать а можно смоделировать вот я это сделал я взял просто генератор случайных чисел посмотрел сколько раз он выбрасывает при наборе от единицы до 100 сотню 100 попытках на и потом повторил этот эксперимент миллион раз это штатная работа система экспериментов казалось бы должна быть но если мы сто раз запустим эксперимент то нас триста шестьдесят шесть тысяч в моем случае на и ни одной не выскочила на действительно самый частый случай когда у нас один из ста ну если вероятность одна сотая так и должно быть но это всего лишь 369 тысяч то есть это 37 процентов запросто у вас может получиться два раза и стоит все равно штатная работает нормально и даже ты и раза еду и немножко стрёмно но это шесть процентов тоже чем нормально вот есть только у вас и стал получилось 4 до которых совсем мало пять шесть семь восемь герой да значит девять раз из то у меня получилось 1 раз из миллиона на если вы короче сто раз запустили свой эксперимент и у вас девять раз получилось то прям сто пудов там что-то сломано потому что само собой один раз изменен не получается вот мой возвращаясь назад вот что то такое вы никогда в жизни не увидите если вы один эксперимент просто запустите но на вас не выдать значимых результатов выполните думают что все круто все отлично на самом деле кашне вот что же все бесполезно на самом деле полезно проводить контрольные эксперименты нужно и сегодня я постараюсь вас убедить в том что их надо проводить постоянно а если у вас всё время есть контрольный эксперимент то вы имеете шанс много чего на нем увидеть да и сейчас я расскажу что именно и не надо думать что то о чем я говорю вот эти вот странные случаи когда она не все время выдает значимый результат а иногда на чаще чем положено что это какая-то экзотика ничто так не бывает и настоящая поломка это когда она все время дает результат нет сейчас я вам покажу на примерах а как как это бывает в жизни вот я в отличие от артура буду наверное оба testing на 3 подсистемы делите у меня будут дальше примеры как можно каждую из этих подсистем сломать и я думаю что наверное у многих из вас хотя бы одним а то и всеми тремя из этих способов система по тестированию сломан о ваших проектах вот ну потому что жизнь такая так и первое что надо сделать это разбить юзеров на группы на второе что надо сделать это каждому юзеру показать что-то свое ну что то что отличается только то экспериментальные задачи которая и вот эта часть это надо обсчитать результат итак поговорим про то как разбить юзеров начинается все обычно там не знаем 50 на 50 вот из каких-то странных вещей ну в частности вот литературе я читал такую тему когда люди много экспериментов подряд хотят проводить они делают например следующее вот следите за руками они считают хэш cookies и юзера юзеры такую к вам очень повезло если все ваши юзеры залогинены всегда и юзер это логин да потому что это удобно ваш он не не переходит с одной машины на другую вот он все это ерунда не занимается вы его всегда знаете но почти всегда так сделать нельзя это значительное число юзеров не залогинены поэтому юзер атаку к несчастью ну а cookies потухают и в общем много с ними проблем вот короче посчитали хэш от kuki посчитали хэш от айтишника эксперимента взяли старший бит по факсу или на если единичка то пользователь попадает если но никто и не попадает и так вот у них крутилась довольно долго но этих людей чё плохо на плохо то что если у двух экспериментов старший бит хэша одинаковый то любой юзер либо в оба эти эксперимента одновременно попадает либо одновременный не попадает и таким образом кого-то разбиение нормального не было там каждый юзер видел примерно одну и ту же группу экспериментов условно и конечно потому что если один из этих экспериментов оказалось хорошей или плохой тон за собой тянет все остальные которые могут быть нейтральные или там хорошие или плохие но чуть чуть меньше амплитуды вот можно так ломать но тем не менее поэтому чаще люди приходят к системе банки тогда когда сначала уже похожу юзеров раскидывают на баке ты а потом уже с этими пакетами как-то оперирует чтобы не не в мясо там прям лизать но это на мой взгляд похоже вот на контейнерные перевозки да потому что контейнер и стандартные у вас есть всегда для любого не знаю там парохода железные дороги или автомобильных перевозок там стандартные способы их крепить и возить вы можете стандартно удваивать утраивается и так далее объем ищем есть некоторые проблемы новый год гораздо больше а вот такие контейнеры у нас вот есть у нас контейнеры и допустим у нас есть одна контрольная группа очень удобно в остальных местах эксперименты и вот мы их там красим в разные цвета цвета вот такие же как у артур но я их покажу на всякий случай и значит хуже production а вот такой если не отличить от продакшна то серенький а если лучше продакшна то зелененький очень просто и вот например у нас к это такая ситуация у нас сам часть экспериментов закончилась остальные еще идут ну и вот в этих экспериментах и и степи результатов ok дальше очень удобно в этих баки так мы запускаем что то новое а те как раз заканчиваются мы собираем результаты это же у них можно запустить счет новое они могут идти там по две недели каждый из перебивками неделю или как-то какие-то длинные какие-то короткие очень так удобно что здесь страшно удача и она наверное не не по кривлю душой если скажу что что ваш средний пользователь выглядят как то так ну вот типичные наш пользователя всегда он веселый у него все в порядке иногда иногда бывает такая ситуация что какой-то группе пользователи мы показываем что-то по-настоящему плохое и что-то прямо ужасную и они становятся от этого грустными вот такими давайте я сразу в качестве примера расскажу дальше что такое очень плохое то давайте научу вас плохому в конце концов у меня пример это же поисковые понятное дело вот смотрите вот поиск и как-то так выглядит у него кроме основных результатов а есть еще блок справа в котором есть полезные ответы о том что человек ищет а есть еще блок картинок и очень удобно можно прямо сразу на выдаче увидеть как выглядит черный квадрат черт возьми это так мы не знали вот ну в принципе на поисках есть еще в резкие видео есть карты в яндексе market есть на многие люди на самом деле не идут в маркет когда туда хотят попасть а ищут товар просто на поиски а потом уже оттуда через врезку маркета попадают и вот одна из самых плохих вещей которые могут случиться если все эти фрески все эти добавки случайно оторвать ну вот взяли оторвались и вот поиск начинают как-то так выглядит и ничего нет и вот это вторая по ужасности вещь которую я видел вообще своей практике 1 по ужасности она слишком сложно но сейчас не буду а не говорить но вот это очень плохо ну и естественно пользователя да они вот видят это и грустят ну и какой от этого обиженного баки то вредно если мы потом в этот bucket запускаем к это эксперимента он очень более-менее всегда будет вот такой в зависимости от масштабов он может быть не всегда будет но с большими шансами в общем от плохо но это еще полбеды настоящая беда беда с вами случится в тот момент если эти пакеты могут меняться ролями и вот этот баки то внезапно окажется контрольной группой вот это настоящая беда потому что ну понятно что будет да у вас значит все остальные эксперименты резко зазеленеет вот и вы еще начнете все выкатывается вообще подряд начнете платить премии разработчикам которые сделали крутые внедрение целевая метрика тем временем будет вот эти идти вниз вот соответственно что важно если у вас ни одна контрольная группа адв хотя бы то у вас конечно не гарантия до не гарантия но вот есть некоторый шанс поймать такую ситуацию сейчас мы вам уже вот вместе с артуром рассказали о том что такая ситуация есть и вы наверное будет с ней бороться но если бы они не знали то вот поймать ее можно было бы если у вас было 2 контрольной группы нас 1 трудно на что еще можно следить да если у вас вдруг оказывается слишком много хороших экспериментов их процент обычно не велик потому что улучшить что трудно испортить так легко вот если вдруг хороших экспериментов оказывается много то это очень очень стрёмная и надо обязательно разбираться скорее всего где-то что-то сломалось вот важно ещё вот это вот бен голая как раз картинка важно как долго как долго это работает вот смотрите красная линия это примерно 0 на и до сентября левый кусочек это колебания значение вот этого баки то плохого с сравнении с контрольной группы они около нуля где-то происходят вот потом в сентябре несколько дней по ошибке им что-то очень плохое выкатили бен к сожалению не не написал что именно поэтому я не могу точно сказать ну видимо что то вот сравнимая вот потом через несколько дней заметили откатили но в бен-гей есть упорные люди исследователи они вот этот bucket тщательно халяль или лелий ничего там не делали показывали им дальше то же самое что я контрольной группе чтобы проверить как долго это память поколение работает оказалось ну вы сами видите что она работает очень 4 месяца вот у них получилось четыре месяца заметим на еще раз в скобках что пользователь это кука а у cookies есть мы условно период полураспада да и за 4 месяца на самом деле в большой группе пользователь там половина как протухнет уже потому что она понять почему и вот даже несмотря на этом те люди которые выживают в этой группе а не весь этот результат все равно тянут минус здесь на самом деле это серьезная проблема чувство этим делать нужно вот кашу которая вас к для есть надо помешивать вот у вас есть два пакета если вы заметили что один из них грустный а то и имеет смысл их как перемешать вот более того удобно то что в прошлое у вас результаты есть вы можете вот новообразованная вот эти баки ты взять и если в логе сохраняйте можете пересчитать всего назад на можете посмотреть не получился ли вот это вот новые байки все равно обиженным и вот данном случае видим что тут грустных пользователей как-то неравномерно больше получилось и они все равно обиженные на если посчитать метрику целевую за прошлые две недели вот на этих новых bucket of the опять плохо но их можно перемешивать до тех пор пока не получится хорошее вот теперь хорошие все отлично что еще куда можно дальше двигаться постепенно мы переходим к второй секции хорошо когда вы самого начала все делаете с прицелом на оба тестирование на у вас в принципе и контрольная группа экспериментальные что угодно я просто вот номер версии сборки и они там могут случайным образом куда то запускаться но часто бывает не так часто бывает так что ваш сервис живет там 15 лет уже и больше часть времени он правда тестирование не слышал поэтому там есть какой-то продакшн и где-то сбоку на пелены какие-то и нищеты костыли для того чтобы эксперименты запускать так наверно это работает и вот в этом случае особенно важно запускать контрольные эксперименты потому что я слышал такие темы что в принципе иногда запустить продакшен в экспериментальной группе просто невозможно так все написано что продакшен куда-нить нельзя запустить вот если если у вас такая ситуация то обязательно надо его туда запустить потому что ну что тут уже все сломанным вот короче личную о том что если вот ситуация такая что продакшена эксперименты не равноценные они по разным путям куда ходят то там вероятность ошибки еще гораздо больше вот показать каждому свое представим себе у нас есть вот два дата центра и в одном из них крутится эксперименты в другом production ну вот мы пробили эту тему все-таки запустили контрольный эксперимент ну и вот у нас вот как то так получилось 1 до центра лучше другой хуже вот надо разбираться дальше что происходит а происходить может например следующее вот наложим карту да и увидим что у нас один дата центр в москве один финляндия этот гипотетический пример вот естественно все совпадения с реальной жизни вы случайно а юзеры у нас допустим где-то в турции и ну долго там можно разбираться изучать чего происходит и в конце концов выяснить что соответственно из одного дата-центром и как-то вот нормально ходим к юзерам а из другого мы еще заходом в третье ходим и у нас ну так вот сделали по ошибке на и у нас round trip time просто разный он отличается там условно на 100 миллисекунд при том что он на сервере время одинаковое и она и так и так хорошие вот здесь мы ходим по разному еда может так оказаться что это влияет более того это более серьезно влияет на вот метрики конверсией чем на всякий метрики лояльность то есть вот метрики конверсии они к малейшим перепадам времени они очень чувствительны и здесь в частности вот есть такая компания знаете вот вот что это за компания и то они строят себя такой hit counters в сиэтле пока еще не построили в это проект от amazon и amazon еще давно опубликовал такую свою статистику что с их точки зрения 100 миллисекунд задержки или ускорение стоит сто процентов один процент продаж мы на 100 миллисекунд замедлились мы теряем один процент продаж на 100 миллисекунд ускорились н процент получаем масштабах amazon и это огромные деньги на тесте если даже и не знаю разработчик или команда разработчиков за два дня на пилила две строчки кода которые вот дали 100 миллисекунд ускорения где-то то это уже оправдание их существования на они могут весь год я хочу ничего не делать получать зарплату понятно что измерять round trip time трудно и потому что там разные браузеры в разных браузерах разная api и там где то вообще нету тяжело но по крайней мере хотя бы на сервере мониторить время ответа можно да и очень важно его измерять в контрольных группах на то есть если у вас есть две контрольные группы и вы замеряете там не только целевую метрику но и время ответа а то вы получаете шанс изловить вот какие-то такие штуки а такие штуки они реально бывают ну и третья часть 3 часть про то как посчитать то что у вас в итоге получилось да результат ну как это получается да мы посчитали что то по одному эксперименту это массив чисел k у нас получился да мы этот массив чисел x скармливаем в наш инструмент и в другой группе да мы тоже посчитали этот набор меток войска в этом другой массив чисел получился вы его тоже скармливаем вот инструментом в этом магию делает внутри вот и выдает нам результат и потом есть статистическая значимость той все важно что внутри этого эксперимента инструмента почти наверняка работает такая страшная штука подкапываем которая называется центральная предельная теорема теории вероятностей вы не пугайтесь и я не буду вам про нее рассказывать я просто скажу что вот оно там есть она там работает в этих ста тестах в ней есть одна важная часть она обязательно предполагает что вот этих чисел те которые мы насчитали они получены и независимо и независимые измерения и что этот так на самом деле понятие или вспомни трудно между тем это прямо у нас касается как ни смешно звучит я считаю что этом важно сейчас на примере объяснить а вот не с этими страшными формулами знать там с условными вероятностями с вертикальными палочками и невозможно понять и запомнить я попробую на примере это показатель для этого мне нужны сейчас 2 добровольцев господа так хотите и мне мне еще один нужен доброволец но пожалуйста не ничего заходи сюда ничего страшного я не буду с вами делать подходить пожалуйста сейчас я все так представьтесь пожалуйста александр алексей алексей прекрасным и смотрите что мы сейчас будем делать сейчас мы будем проводить пример независимых измире вы вы не знакомы друг другом не это прекрасно вот смотрите у меня есть вот такая статистика распределение цвета глаз на европейской части еще знать какой стороны российской империи этот статистика 1909 года но для наших целей она сойдет у нас есть кто-то предсказание того вот если мы возьмем случайного человека и посмотрим какой у него цвет глаз вот допустим что у нас вот такое предсказание того как распределены вероятности давайте проверим действительно это так или нет александр какого цвета у вас глаза вроде бы коричневая карие глаза да алексей а у вас по слухам кори нельзя получилось 2 человек с карими глазами но вот обратите внимание после того как мы узнали цвет глаз и александра наше предсказание какого цвета могут быть глаза в алексей никак не изменилась ну то есть мы вот независимо взяли измерили на александр алексей я благодарю вас ваша миссия закончена пасибо чему это все было на сейчас я покажу вам пример зависимых измерений вот смотрите вот это две девушки я не знаю как их зовут но я знаю что они близкие родственницы на самом деле они близнецы вы знаете бывают такие близнецы не неодинаковые а просто родились вместе вот это вот они пока мы не знаем какого цвета у нее глаза но мы можем это сейчас узнать вот смотрите вот мы открываем первую девушку вот что мы видим какого цвета глаза мне кажется синие да ну похоже даже ты синие глаза вот внимание кто-нибудь хочет вообще но вот глубине души и сделать ставку на то что у 2 девушки глаза и не синие ну а на самом деле это неправильно глаза 2 девушки торсе не но у близнецов глаза почти всегда одного цвета после того как мы знаем а после того как мы знаем цвет глаз 1 близнеца измерение цвета глаз второго близнеца является зависимым а потому что у нас уже есть дополнительно информация вот пожалуйста это был пример независимого измерения и зависимого изменения цвета глаз теперь как-то относится к реальной жизни так собственно вебу во-первых если мы считаем какие-то действия пользователя каждый день и вот из этих действий формируем часть нашего массива например там каждый день читаем число кликов по вообще они зависят от привычек пользователя пользователь может быть там лимонного кликает все время либо мало кликает все время правда вот и это как минимум же дает зависимость а кроме того действия пользователя подряд зависят от результатов его предыдущих действий например вот есть у нас какой-то пользователя он пришел в поиск опять же я люблю про поиск спрашивать и задал вопрос запрос вот такой задал некоторое время что-то там насчет браузер тыкал смотрел и понял что ныне не не устраивает что-то ему не нравится и решил уточнить запрос уточнил вот у него и вот так и мы уже можем заподозрить что что ему надо вообще с учетом его предыдущих действий и вот он тоже там что-то браузер что-то делал ему опять не понравилось и он решил уточнить уточнил тут вот мы можем еще сделать дополнительный лут что пользователь наши скорее всего неопытный а потому что опытный пользователь поиска он знает что попросить не макет это верный способ до получить макет и ничего кроме макета вы понимаете вот вот так отвечает вот тоже поиск некий известный и вот пользователи совсем огорчился ушел думать может быть даже он сессию закончила вернулся через несколько дней думал думал думал думал и ну предпринял другой заход на задачу задает вот такой запрос ну правда и вообще поисковая сессии запросам нанять киллера они все очень интересные так я скажу вот и правда же дам вот если мы действие пользователя по каждому из этих запросов как-то измеряем отдельно да и потом вот у нас не одна чисел k идет о 4 то мы скорее всего все портим мы даем зависимые чисел ки вот в этот массив и мы можем ничего об этом не знаете не думать о на самом деле мы все портим на самом деле у нас там вот это вот условия центральной предельной теоремы не работает и наш инструмент же ничего об этом не знает он думает что моему хороший чисел кидали и выдает нам результат почти всегда более оптимистичный на то есть он нам говорит что значимость выше он выше я я нашел значимые изменения на тогда как если делать честно то этих изменений быть бы не должно было есть общая рекомендация по возможности из пользователя выдавать за эксперимент по дну какую-то чесалку вообще с теми кто конверсиями занимается это тоже верно вот представьте себе я покупаю планшет для жены и там в аннотации написано что в комплекте есть чехол ну ладно окей вот меня приводит этот планшет я его открываю а там ничего к этой ерунды невозможно пользоваться неприятно я иду опять в магазин в тот же и заказываю там еще чехол для этого планшета вот внимание я я сколько конверсии сделал одну или две да и вот на второе мое действие вероятность конверсии другая в россии к это предсказание того что она будет выше и конечно есть сто пудов и даже там могут быть вот такие вот зависимые данные поэтому с этим надо быть аккуратно вот ну и собственно драма которую я сам наблюдал на вот собрались от экспериментов для метрики которая редко допами редкое и удается подвигать вот какой то такой набор ну контроль там разные потому что эксперименты в разное время проходили на самом деле там не одна контрольная группа каждому свое а потом потом заметили заметили что вот так вот ошибочно считали эту метрику и там была эта зависимость зависимость это исправили взяли те же самые логе пересчитали увидели там вот 50 оттенков серого да ничего вот правда разница есть но с этим с этим можно бороться это удобно проверяет есть в отличии от предыдущих двух этапов да это подсчетам можно считать вообще offline вы можете взять два эксперимент вот эти вот геометрические фигуры символизируют пользователей вы на самом деле можете по двум баки там и одному результату эксперимент на них на генерить себе буквально миллиона вы можете просто перемешать как то так да и у вас опять есть еще два контрольных эксперимента потом вы можете их еще как-то перемешать у вас есть еще два контрольных эксперимента и на кого если у вас там тысячи пользователей в каждом баке это вы ну буквально миллион эксперимента все можете на делились и проверить обсчет легко то есть это только вычислительных мощностей требует но не требует реального экспериментирования на пользователями вот эта часть и принципе иметь такой оффлайновый тест я тоже рекомендую это полезно это не отменяет дай необходимости и все время держать 2 контрольной группы и за ними следить но по крайней мере так вот чего делать не надо бывает иногда соблазн сделать не 2 там контрольно группа много и вот смотрите их можно по парных друг с другом сравнивать вот если на 10 контрольных групп то я могу важно турнирную таблицу в 48 матчей значит между ними сыграть круто же вы на самом деле нет не круто вот мы-то думаем что мы его увидим ладно увидели один но кейт нормально так может быть увидели много обида даче надо бежать разбираться что-то делать на самом деле нет в реальности будет вот так в реальности у вас один из этих баки тут скорее всего там как-то выбиться из аборты и все вот эти вот результат и они будут на грани на пересечениях этого быть с чем-то другим вы увеличивая количество контрольных групп получаете всего лишь линейный рост разрешающей способности они квадратичные как можно было бы надеяться на квадратичного растут нет но тем ни менее начну иметь сколько-то контрольно групп полезно вот на них все это видно так вот конечно проведение постоянных контрольных экспериментов и постоянных мониторинг это не серебряная пуля да вот видите пуля тут из чего-то другого сделано но я надеюсь что понятно можно сломать систему экспериментов миллионом способов так что на контрольных экспериментах ничего видно не будет да это правда но тем ни менее надеюсь что убедил вас в том что контрольный эксперимент проводить все равно нужно и на всякий случай резюмируя еще раз зачем тут нужно следить соскучились уже по текстам слайдам вот я вам один такой сделаю лишь нужно следить за целевой метрики которые у вас есть и обязательно досчитать обязательно нужно следить за количеством пользователей там и там потому что при разбиении часто так бывает что ну понятно в общем что в одном месте у нас больше пользователей а в эксперимент например могу это отдельную куку ставим и забываем его поставить и заболели что ничего такое нужно следить за временем ответа хотя бы на сервере это очень полезно и нужно следить за доли ниспадающими дальше по эксперемент считаете ведь не только целевую метрику но и много данном ну bing рассказывает про 5000 вот яндекс очень тоже недалеко оттуда ушел поэтому из этих пяти тысяч тоже на контроле понятно что должны расходиться тоже 1 процента если вы считаете собирается с 99 вот если у вас не один процент то есть не 50 из пяти тысяч расходится больше дает повод задуматься может быть это метрики неудачная может быть счет системы не так ну еще не на тестах а вообще имеет смысл следить за количеством успешных экспериментов успешно экспериментов все время должно быть примерно одинаковое количество если их становится слишком много нато это как раз повод задуматься что то сломалось ну это же правда сделать хорошо трудно сделать плохо легко если у вас там 90 процентов экспериментов зеленеют и их надо катись production то точно все плохо вот на этом у меня все и вот-вот что могу пожелать вы держитесь там спасибо за доклад у меня такой вопрос немножко чуть-чуть оффтопик в том плане как считать целевую метрику то есть есть какие советы в этом потому что вот яркий пример опера да когда они посчитали что в основном у них ставят обычный узора а вот эти вот гики которые там нужны всякие хитрости оперы старой да вот am e mail встроенный клиент встроенный торрент клиент это обычным юзерам не надо они сделали они как бы вот внедрили новую оперу но проблема в том что установкой опера и занимались как раз такие вот эти один-два процента которые как говорится в плане установок минимальные то есть они рекламировали они были самые активные аудитории которые сильнее всего продвигала оперу то есть у меня вот проблема собак с нами ровно в этом как понять что вот целевая метрика что вот мы померили по целевые метрики она вроде выросла вот как убедится в том то что вот это рост он реально продолжится когда мы внедрим а не то что это было ну вот в определенной ситуации то что мы не попали случайно вот как-то так я может быть не вполне понимаю вопрос по этому и не над пока микрофон забирать потому что может быть потребуется уточнения речь идет о том что эксперимент попали не случайные люди а какие то специально это себе объявили типа эксперименты и пошли никита но только тут никак не проверить пользователь не должен знать о том что он попал эксперимент есть смысл как-то подбирать то есть пытаться найти какую-то целевую выборку которую мы считаем что вот мы ей дадим и она вот реально покажет результат лучше этого избегать я так так можно делать но тогда и контрольную выборку надо брать из тех же самых людей то есть мы там думаю вот мы делаем продукт для владивостока а значит у нас эксперимента во владивостоке и контрольная группа у нас тоже во владивостоке а вот ну так можно до а у меня такой вопрос вот в самом начале докладывать говорили о такой рекомендации как перед самим тестом запускать контрольный тест в противовес вот другой комп ну можно же этот контрольный тест запускать одновременно с тестом от менее принципиальная разница я дам может быть невнятно сформулировал я имел ввиду что рекомендуют вообще когда вы первый раз в жизни себе систему экспериментов заводите вот ну раньше у вас и и немало вот сейчас ее вы заводите то перед тем как хоть какие-то реальные эксперименты начинают гонять рекомендуют провести один контрольный а так то конечно в нормальной жизни контрольные эксперименты происходят параллельно да то есть я имел ввиду вот именно эту конкретную рекомендацию которая правда из всего что я читаю там на на хабре где-нибудь вот это типа самая продвинутая рекомендации которые люди дают им не обидно потому что она внутри себя на правда так надо сделать но это один процент из того что надо делать и norske спасибо за доклад а вот пример с возвратом пользовательских метрик с деньгам насколько вообще корректно потому что ну часть пользователей наш ну который сливает метрик она могла просто отвалится после у как мы их испортили то со временем часть пользователя то есть как мы общем мере либо кино это получается те зафиксированы нее этот да вот сейчас там баки то изменился на сколько пользы же шли берем хэш от cookies и до в макете в каждом постоянно есть отток и есть приток на пляж какие-то хуки потухают люди приходят опять им дается новая хука она уже другая мы ж не знаем что они она может их переместить в другой bucket я в этот bucket наоборот попадают какие-то новые люди которые из других bucket of у них cookies протухли они попадают в этом какая-то часть остается но постоянно на чем чем больше времени проходит тем меньше там остается вот этих настоящих пользователей которые видели плохое остается много таких которые случайно туда попали и поэтому вот это вот улучшение она на самом деле не такое хорошая как кажется по графику потому что если бы мы могли зафиксировать ровно этих людей и не отпускать их ice bucket они как-то было бы хуже да просто получать стоит те пользователи которые видели хуже они вообще как то лучше стали относиться линий или они просто отвалились и неотложно но они не могут все туалеты естественного остается да то есть но часть из них конечно отваливается потому поиска такая штука что но в россии или в америке у вас есть альтернативы но если вы житель европы какой-нибудь там испании то у вас нет вариантов вам пусть кроме google они куда сходить вот тут дам пользователь могут переключиться куда-то но нет они не отвалились а именно просто плохо себя ведут там метрика лояльность частота возвратов скорее всего им число сессий на на пользователь за период время лесу с какой частотой они приходят обратно на сервис вот и они просто начинают приходить реже частности это может быть связано с тем что они начинают пользоваться не одним поиском то одним то другим то одним то другим и за счет этого на на на на наш да не режь приходит может быть такое ну то есть ты там у них метрика именно сессии на пользовать то есть частота возврата пользователей на сервис себя спасибо большой роман за то что действительно рассказали нам про малоизвестные грабли обед с тинга мы продолжаем раскрывать тему oпыт"
}