{
  "video_id": "YPm_QUUaJLc",
  "channel": "HighLoadChannel",
  "title": "Вторая космическая: как преодолеть притяжение внутренней платформы разработки / Анастасия Абрашитова",
  "views": 1902,
  "duration": 2799,
  "published": "2023-04-28T06:21:30-07:00",
  "text": "Привет Меня зовут Настя брашитова И я работаю в Яндексе в отделе технологии разработки когда мы готовились к вот этому вот хайлоуиду к нам пришли организаторы и сказали что будет платформенная секция и предложили рассказать про платформу разработки Яндекса Я сначала даже отказалась потому что мне показалось что это будет самое бесполезный доклад в мире он будет примерно как фильм про Мстителей он будет очень динамичным будет очень красивый такой интересный спецэффекты где-то там вертолет взорвался и ровно 0 пользу будет оставаться у вас сухом остатки потому что платформа разработки Яндекса большая сложная самобытная сильно взаимосвязано и это сервисы которые довольно большое количество людей писали довольно много лет что-то годами что-то даже десятками лет и от того чтобы послушаете как оно все у нас Классно устроено вы вряд ли сможете пойти и применить у себя такое же хорошо потому что это требует большой серьезной разработки Поэтому я решила рассказать вам немножко о другом Я вам конечно расскажу про платформы разработки Яндекса но где-то на первые там минут 10 доклада очень обзорно покажу чем мы вообще занимаемся а потом я поговорю про тот самый сценарий в котором платформа разработки внутренняя не помогает наоборот мешает Это история когда проект который живет внутри внезапно захотел в эпизод хочет туда синхронизироваться не прекращая жить внутри и про все плюсы все достоинства собственной платформы разработки вам тут уже неоднократно рассказали за прошедшие два дня а вот про историю когда она мешает наверное не очень поэтому про это сегодня и поговорим но начнем по порядку давайте я представлюсь я руковожу службой экосистемы разработки системе репозитория и разработкой внутреннего поиска в Яндексе соответственно все это входит в отдел технологии разработки также я люблю выступать очевидно делаю Это довольно часто и люблю организовать всякие ивенты просто меня к этому лежит душа из канала он в основном про управление Но если вдруг кто-то из вас интересуется тем как управлять людьми проектами Приходите Подписывайтесь и наверное надо сказать дисклеймер что здесь и дальше будут использоваться рисунки и кадры из мультфильма Вовка в Тридевятом царстве все права на него конечно же принадлежат Союз мультфильм Итак Давайте продолжим дисклеймеры Значит нужно сказать что инфраструктура это супер широкое понятие инфраструктура это очень-очень много чего там есть много пограничных вещей и я сегодня буду говорить про технологии разработки я не буду говорить про распределенные вычисления про хранение данных про облака про runtime про машинное обучение вот вообще про все синенькие прямоугольнички которые вы видите я сегодня говорить не буду я буду говорить про инфраструктуры разработки Но даже понятие инфраструктуры разработки это тоже супер расплывчатое понятие потому что Ну вот если у Вас например система диплоя она еще про разработку или уже облака А вот непонятно поэтому я воспользуюсь законом канвы Если вы такой знаете я черчу технологии разработки ровно потому как устроен отдел технологии разработки в Яндексе Вот чем наш отдел занимается то и будет у нас сегодня технологиями разработки поехали Итак платформа разработки Яндекса в первую очередь У нас есть монореппозиторий он называется Аркадия мы отмечали 25-летие Аркадий в прошлом декабре То есть это очень старый репозиторий он начинался еще как репозиторий поиска сейчас это моно репозиторий в котором живет Ну заметно больше половины проектов Яндекса и вместе с историей он занимает больше 10 терабайт поэтому очевидно нам пришлось пилить свою вцс потому что то что есть на рынке не очень-то справляется с таким объемом У нас есть ark это наша сильная виртуализированная система контроля версий одной лицевой по себе недостаточно поэтому у нас есть еще портал для разработчиков называется арканом там можно смотреть на пол реквесты проводить ревью смотреть разработчиков браузеть код навигироваться по нему все как во всех приличных системах и конечно же разработчики будут несчастливы если не дать им которым они привыкли поэтому мы еще написали плагины для популярных нужно сразу сказать что наш монорепозиторий во-первых живет по принципу связности по коду иначе зачем бы ему быть моно репозиторием и в контексте доклада вам нужно понимать что все совсем по коду связано очень сильно в некоторых местах это будет важно также мы исповедуем Truck Best девелопмент и блюдем свой гринтранк проверяем все кометы которые приземляются в танковую ветку это тоже наверное будет важно кроме своего репозитория У нас есть своя система сборки и тестирования когда Мы начинали писать то что было на рынке нас не устраивало по перформансу поэтому у нас есть своя она поддерживает те языки которые у нас в Аркадии разрешены это си плюс плюс поэтому кроме собственно сборки естественно осуществляется тестирование unit-тесты Мы запускаем из популярных опенсорсных фреймворков Но их тоже нужно оборачивать адаптировать для того чтобы все это жило в нашем монореппозитории умело привести нужный артефакты зависимости какие-нибудь канонические данные вообще из другой системы есть у нас кластер распределенной сборки огромный кластер где параллельница билды порой огромные довольно нагруженный он обеспечивает те самые проверки транка чтобы он не прекращал бы зеленым не желтел и он обеспечивает работу тех разработчиков которые работают в очень больших проектах Ну потому что бывают в Яндексе проекты которые у себя локально с нуля собирать это полдня можно заслать на кластер распределенной сборки и просто подождать результаты они тебе локально приедут как будто ты прямо себя и собирал есть конечно же непрерывная интеграция в первую очередь они занимаются все тем же зеленым транком на каждый Комет У нас есть преи-посткомитная проверка они обеспечиваются непрерывной интеграцией но все SD конечно этим не ограничиваются есть собственно вся и Flow sie Action есть релизные циклы все это у нас поддержаны есть отдельный моно репозиторий для фронтендо он живет не по тем же законам что и Аркадия он живет отдельно через npm у нас пакетики связанные и прогоняются сквозные проверки когда что-то где-то бокс это наверное проще Описать как бетч-процессинг систем Это огромный гетерогенный кластер где есть разные машины разные операционные системы вообще на любой вкус и он выполняет просто задачи Ну что угодно с определенным интерфейсом задача как правило порождают какое-то полезное выхлоп какие-то ресурсы эти ресурсы Sandbox умеет переправлять на хранение и довольно много их варит каждый день есть у нас нагрузочное тестирование Наверняка вы про него слышали эту пенсорный проект он называется Яндекс танк также он есть у нас в Облаке называется Яндекс вот тестинг ну и внутри у нас он конечно тоже есть такой вот в трех лицах экосистема репозитория это уже мое царство мы занимаемся тем что живет внутри репозитория это в первую очередь опенсорс который Нужно привести внутрь нашего репозитория Вы же Помните у нас все связано по коду Нужно привести нужно сделать чтобы она собиралась нашей системе сборки тестирования нужно апдейтить на свежие версии и здесь же живет собственно ответственность экспорта кода из Аркадии внешняя репозиторий то про что мы будем разговаривать во второй части доклада еще здесь хранятся артефакты здесь npm здесь артефакты здесь всякие подобные системы и здесь какие-то эксперименты например сейчас мы пытаемся все-таки подружить мир фронтендо с нашей системой сборкой тестирования в принципе Довольно интересно Экспериментальный проект Пойдемте дальше поговорим про функциональное тестирование функциональное тестирование это в первую очередь тестирование ручное поэтому есть тест-менеджмент систем где ребята тестировщики отмечают свои тест-планы пройденные кейсы это мы вы знаете такие системы есть команда которая занимается окружением для мобильного и для браузерного тестирования есть команда которая делает hermine Гермиону возможно про Гермиону Вы тоже слышали Это тоже Open Source проект это система для интеграционного тестирования веб-приложений есть коллаборация разработчики не только пишут код они еще общаются между собой в каком-то виде нас есть свой Task Tracker а в нем есть полмиллиарда тикетов это тоже наверное отвечает на вопрос почему у нас что-то свое Потому что полмиллиарда есть база знаний Она у нас внутри называется Вики хотя она не то чтобы похожа на Википедию и в общем трекеры Вики тоже представлены в Облаке Если вы заинтересовались их можно посмотреть пощупать есть редактор форм Яндекс формы это старый и открытый любому желающему бесплатный проект Поэтому я думаю что Яндекс форму его встречали ну сюда же Я отнесла внутренний поиск который обеспечивает поиск по всему интернету который у нас очень-очень большой уже помните про полмиллиарда и Ласт под нот лист это инструменты сырье ребята которые обеспечивают логирование трейсинг и просмотры анализ ошибок они меня просили обязательно сказать что миллион спанов в секунду это у них настоящая продавая нагрузка потому что под синтетическими данными под обстрелом они выдерживают три с половиной миллиона чтобы плохо не подумали Вот это настоящий миллион Вот такой вот у нас отдел технологии разработки Вот такая у нас платформа разработки Яндекс и жить в ней уютно хорошо все совсем хорошо связано про интегрировано Именно для этого создавалась годами отработана быстро ставится новые сервисы быстро добавляются новые ответственности к имеющимся все хорошо масштабируется диагностируются все хорошо но вот однажды проект берет и собирается говорит я вот буду продолжать жить вас внутри я буду продолжать в Аркадии Я хочу выложиться и синхронизироваться туда Давайте посмотрим на то какие челленджи вообще ждут проект который собрался на первый взгляд Все просто настраиваемся сидим уже приличный немножко неизвестности Итак решение которое нужно принять на берегу прежде чем вы вообще вяжетесь в историю про то чтобы что-то выкладывать Open Source начать надо с разрешения Если вы не хотите ходить потом по судам годами разрешение от компании и во многих случаях нужно еще разрешение от государства экспортный контроль если то что вы выкладываете может считаться технология двойного назначения Вам нужен экспортный контроль дальше выбор лицензии вообще юрист будет вашим лучшим другом по ходу всего этого дела А вы его нет то есть какой-то момент он будет видеть вас в конце коридора разворачиваться и убегать будете к этому готовы потому что после того как он сможет оформить все эти разрешения экспертный контроль вы придете К нему выбирать лицензию Эта история не только про то чтобы взять там пяток известных лицензий посмотреть на них и Выбрать самые красивые Это история про то что вам нужно проверить лицензии всех ваших зависимостей Вы же наверняка в проекте используете какой-то лицензиями и вы конечно наверняка их читали и проверяли для того использование которое у вас сейчас есть может быть внутри может быть вы что-то распространяете это новый профиль использования вашего кода вашего приложения и в тех лицензиях но опенсорсной зависимости которые у вас есть наверняка что-нибудь на эту тему написано поэтому вашему юристу нужно все это проверять что еще важно решить важно решить Где у вас точка Правды иначе у вас как в мстителях начнется multivers и вам будет очень сложно жить с тем чтобы потом свести все это как-то воедино То есть где-то у Вас должен быть тот самый репозиторий в котором все-таки находится мастер-копия вашего текущего там транка ваших текущих религиозных веток это может быть внутренняя репозиторий это может быть внешний репозиторий откуда-то куда-то вы будете все это дело синкать Но важно понять все-таки где у вас точка Правды точка Правды может меняться конечно по ходу жизни проекта вообще это зависит от того насколько у вас широкий профиль использования внутри насколько у вас широкий профиль использования вовне Насколько Вы хорошо покрыли тестами там и там и от того если у вас внутренние кометы внешние кометы где вообще их больше ну то есть это такой динамическое решение которое действительно может меняться по ходу развития проекта нужно решить как часто быть синхронизировать может быть для тех целей с которыми вы выходите в pinsource вообще достаточно просто брать релизные ветки и выкладывать их и все и не мучиться ни с какими симками а может быть нет может быть вы хотите действительно покамитный Синг делать Ну и связана вся сиди внутри и снаружи у вас есть два сессиди контура они могут как-то дружить или нет но про это я еще подробнее поговорю позже все что я сегодня Рассказываю я рассказываю на том опыте который мы приобрели в группе развития пинцерских технологий Яндекса Когда делали сервис синка свинка Это сервис для посткомитного покамитного симка проектов из Аркадии вот in Source репозиторий здесь в общем-то все слова важные То есть он покамитный это значит что синхронизация происходит на каждой камин он посткомитный это значит что наша связь иди не связаны то есть мы просто приземляем хамит внутри и только потом идем синхронизировать его наружу и это сервис-синкой из Аркадия То есть это для тех проектов которые живут внутри своей точкой Правды для тех которые живут точкой правда снаружи у нас тоже есть автоматика это та самая автоматика которую в Яндексе вот обновляет Open Source библиотеки То есть если проект приходит к нам и говорит Мы уезжаем в эпизод своей точки Правда мы к ним начинаем относиться как любому другому пинсу и применять те же самые подходы и решения которые мы делаем для всего остального мира это проекты которые используют сервис синкасвинка не все мы их больше просто такие самые крупные известные выписала Тут нужно сказать небольшой дисклеймер что кадбуст и её сервер из Shop в процессе переезда немножко то есть там это Work на Progress но в целом все эти проекты синхронизируются или в процессе переезда на свинку Итак давайте добавлять мелкие детали пункт первый берем код отлично А какой код Мы берем Что такое вообще код который нам нужно взять но по-хорошему нам нужно взять те таргеты которые вы хотите выложить И построить сборочный Граф со всеми зависимостями того что собирается в процессе сборки для того чтобы использовать это как базу того кода который Вам нужно выкладывать напомню вам что мы живем в мире моно репозитория у нас все совсем сильно связано поэтому этот Граф может быть реально большой и в нем могут быть очень даже большие неожиданности более того это надо делать при каждом экспорте по-хорошему Ну потому что ваш Граф зависимость это конечно не статичная вещь он меняется что-то добавляется что-то убавляется И вам обязательно по крайней мере если в моно репозитории как мы нужна защита от экспорта того что экспортировать нельзя потому что мы на своем опыте проверили что любой мало-мальский серьезный проект который экспортируется рано или поздно какие-нибудь окольными путями обязательно добавляет себе ссылку на ядро большого поиска вообще просто вот я не знаю как они это делают в общем проекты нужно сразу обкладывать каким-то трафаретом сразу обрежьте то что нельзя выкладывать сразу Опишите то что выкладывать Можно у вас будут какие-то Может быть динамисты скорее всего будет комбинации тех и других более того если проект крупный начнутся вещи которые отрезаются ожидаемо и начнутся вещи которые видят зависимости отросли неожиданно поэтому еще на листы которые либо просто молча отрезают то что не надо либо ломаются начинают там спамить всех алертами звонить по ночам и предупреждать что что-то ужасное случилось вам нужно решить что делать зависимостями из открытого кода из-за пинсарса Вот вы используете какие-то концертные библиотеки при выходе в аппенсер своих повезете с собой или вы будете пользоваться их опенсорными версиями тогда как вы будете доставлять точно ли в вашей версии Pen Source ничего не пропанчена про все это нужно подумать Ну и надо помнить что код это на самом деле не только кот У Вас есть тестовые данные У вас есть всякие мд-шки которые разбросаны рядом с кодом может быть есть еще отдельно лежащие отдельно написанная документация лицензионные файлы которые вам написал ваш лучший друг юрист Ну и примерно все что угодно еще у нас Однажды на контейнер репозитория нарисовал в PNG картинку того как устроено сервис и нам надо было решать задачу того чтобы эту картинку вести соответственно вам нужно научиться тоже решать задачу того как определить весь ваш набор кода а потом его обогатить теми вещами которые на самом деле не кот Но где-то рядом дальше кладем на github а что мы собственно кладем мы кладем только транк Main мастер как он вас называется или может быть мы кладем еще какие-то релизные ветки какие-то lts ветки может быть мы только их кладем может быть вообще произвольная комбинация вышеперечисленного Но об этом желательно подумать самого начала Но это вот из нашего опыта потому что мы сначала только про Трамп подумали про релизные ветки нет И когда реальность нас догнала Мы очень больно в неё головой ударились и пришлось переделывать довольно много дальше вопрос Когда кладем то есть вот у вас допустим покамитный Синг И вам нужно как-то узнавать что произошел коммит который задевает ваш проект если у вас моно репозиторий то этот коммент на самом деле может произойти где-то очень далеко очень глубоко в какой-то базовой фундаментальную библиотеку а вам про него нужно узнать и синхронизировать или нет Может быть вы хотите синхронизировать только те кометы которые происходят прямо в ваш проект в этом случае все промежуточные кометы вы Возможно там схлопните принесете как это какой-то универсальный каминтер Медис нас такое одно время было главное не схлопывайте конечно комит по делу и промежуточные кометы потому что людям будет очень сложно жить в вашем собственном репозитории как-то в нем ориентироваться Ну вопрос про то как начинается конечно с того что для каждого коммита нужно указать автора и кажется здесь очень простое решение Да github адресует авторов при помощи почты берем рабочую почту каждого сотрудника вывозим свой рабочий почти идея кажется классной лавна до тех пор пока к вам кто-нибудь не приходит и не говорит А у меня китхаб аккаунт привязан к личной почте я к рабочие не хочу Пожалуйста пропиши мне личную или приходит кто-нибудь и говорит Слушайте а вы нарушаете мои приватные данные у меня между прочим рабочей почты написано имя и фамилия их на гитхабе светить не хочу в общем здесь нужно придумать какую-то политику какие-то возможности проверять описание коммитов смотрите в описании комментов люди пишут самые разные вещи в первую очередь ссылки люди любят давать ссылки на какие-то документации на какие-нибудь тикеты на все что угодно и если Вы прям с этими ссылками повезете opensort что кроме того что это будет некрасиво вам еще рано или поздно придут ваши безопасники и как все безопасники они скажут бубу Вектор атаки уязвимость Закройте вам все равно придется решать это проблема поэтому лучше Подумайте про нее сразу еще хуже вот в моно репозиторном мире ситуация когда вы выкладываете какой-то Комет это Комет в какую-то самую такую базовую библиотеку он приехал как часть совсем другого комита И у него в описании написано очень секретный коммент в очень секретный проект А вы его взяли и понесли это тоже надо думать про то что вы можете раскрыть какие-то данные просто принося описание и сразу советую вам предусмотреть сквош то есть Вы конечно можете быть очень уверены что вы пишете строго код без багов но хотя бы элаудина илисты когда-нибудь сработают и вы возникните у вас возникнет ситуация в которой вам нужно починить sing после того как он какое-то время не работал а за то время что он не работал у вас накопилась какая-то очередь коммитов и возможно вы обнаружите мантейнер этого проекта который уже сидит у вас где-то на загривке говорит Скорее Скорее И в этот момент вам нужно возможно всю эту очередь коммитов Согласно тренера взять и Скучно так Поэтому лучше сразу предусмотреть как вы будете это делать вся сиди но тут наверное будет история для индексайдов потому что всем остальным Понятно люди в аппенсорсе хотят все собирать общепринятыми способами никто не хочет взять нашу систему сборки которую мы сделали доступной изучит все 40 флажков которые можно указать для сборки или тестирования проектов подождать пока она скачает полтора гига каких-то бинарных данных этого пинцертный толчей на Честное слово поверьте нам в общем люди почему-то такого не радуются если у вас своя система сборки как у нас лучше как мы прийти к своей сборочной системе и попросить их сделать систему сборки с возможностью экспорта экспортируем например плюсовые проекты все моик Java мы сейчас учимся экспортировать в gradle Но это еще Work and Progress кстати опять для сотрудников Яндекса люди хотят собирать общепринятыми способами венсорсе все кроме питона бинарно собирать Питон как это делаем мы никто не хочет Поэтому при экспорте в питон Мы конечно отрезаем вообще нашу сборку и генерим реклама для того чтобы сослаться на правильные государственной зависимости И кстати тестировать люди тоже хотят вообще принятыми способами поэтому помимо того что мы делали экспорт сборки мы еще переделывали нашу тестовую обертку для того чтобы можно было все еще пользоваться теми пинцертными фреймворками тестирования которые живут у нее внутри но при этом артефакты подвозились уже не по аркадийному А так как это будет я обещала вам что мы про нее поговорим какой она вообще может быть она может быть например при кометной то есть происходит по реквест в внутренней репозитории если он у вас является точкой Правды этот пол-реквест идет у вас проверяться И в частности он пытается синхронизировать свой пинсурсе проверяется там и ваш внутренний разработчик бесконечно счастлив потому что у него упали какие-то тесты на которых написано тут какой-то проект значит выехал военсорсенсы все сломалось и дичи не на гитхабе надо это прикормитная проверка она все блокирует может быть пост-комитная проверка человек свой Комет приземлил все проверилось куда-то поехала Потом приходит письмо счастье где написано примерно то же самое дорогой друг там дед на гитхабе за тебя все сломалось иди Разбирайся Ну хорошо мантейнеров тоже сразу в копию вставить А то может быть друг разбираться не пойдет может быть связь между сети в обратную сторону Может быть вы хотите чтобы те кометы которые люди делают Open Source прорастали ваш внутренний репозиторий там проверялись тоже все сиди и у человека вылезал какой-то красный тест на котором будет написано внутренние проверки упали человек Конечно будет глубоко несчастен Потому что сейчас с этим делать абсолютно непонятно но сиди жди контейнера такую связь тоже можно сделать неизвестность Давайте раскрою несколько неизвестности сразу важно подумать о том как принимать вообще вне точнее контрибьют и тут все начинается с вашего лучшего друга юриста который наверняка к этому моменту уже убегает просто от одного вашего имени но ему нужно придумать вам силой И вам нужно придумать как его с людьми подписывать дальше контрибьют который идет через Open Source должен пройти опенсорном контуре какие-то проверки номер там сделали какой-то связь иди должен отработать и конечно же стать зелененьким после того как он зелененький и одобренный монтейнером то есть там не написано никаких страшных ужасных деструктивных вещей можно брать дефсет и вести его во внутренний репозиторий как братьев сет это тоже открытый вопрос Но если у вас гид то наверное можно просто на черепицу вот если вас не гид то вам нужно это прямо вести Ну и во внутреннем контуре могут возникнуть какие-то новые неожиданные ошибки Ну потому что в другой совершенно набор проверок возможно ваш проект там вообще используется как-то по-другому не так как и во внешнем мире Эти ошибки тоже кто-то должен чинить скорее всего контейнеры соответственно ветка должна это позволять Ну и самое печальный факт проект не станет популярным сам от того что вы что-то выложили на github люди туда не побегут люди должны про это узнать А еще им это должно понравиться поэтому свой проект нужно сопроводить документации нужно как-то общаться с пользователями которые придут и будут задавать про него вопросы а еще про свой проект нужно рассказывать нужно писать статьи нужно выступать на холоде нужно ходить всем рассказывать что у вас есть новые классный проект который вы выложили вот увы нет Ну давайте в конце посмотрим на Профит ради чего собственно это все но во-первых открытие кода помогает развитию проекта у вас были какие-то сценарии использования внутри какие-то нужды для которых ваш проект использовался Теперь вы выложили его во весь мир и люди используют его как-то по-другому появляются новые потребности появляются новые сценарии появляются новые ожидания и под все это нужно развивать свой проект и подстраивать его Поэтому развитие тут получается довольно мощное Если вы не совсем бесстыжие то вы наверное как-то причешете свой код и устраните основные там долги снимите валенки с пульта прежде чем выкладывать проект поэтому устранение технического долга выкладка тоже поможет популярности компания pensort конечно помогает потому что вы начинаете ходить по конференциям писать статьи и все видят что компания такая-то выложила в опенсорс очень полезную штуку Это для компании хорошо и приятно Многие думают что как только вы что-то выкладываете opensort сразу набегают люди начинают вам туда коммитить к сожалению нет проект должен стать довольно популярным довольно широко используемые чтобы это произошло Но если это произойдет то у вас получится привлечение каких-то внешних людей к разработке вашего проекта Это всегда приятно Ну и конечно помогает найму то есть люди которые приходят к вам собеседоваться вы им предлагаете не просто какого-то кота в мешке непонятного не Просто поверь на слово у нас все хорошо вы им Говорите вот у нас есть собственный проект сходи загляни что там посмотри Нравится ли оно тебе Приходи на него работать ну и просто вы поднимаете ваш проект все про него послушали все про него почитали пришли к вам хотят именно в нем работать на ему конечно Эта история сильно помогает Ну если говорить про совсем успешный успех и дальний горизонты то ваш проект возможно вообще отсоединиться от вашей компании станет самостоятельным и коммерчески успешным Надеюсь что так у вас все и получится Но у меня пока все Спасибо еще раз доклад давайте послушаем вопросы поднимайте руки так вижу первую Руку вот туда вот Проверь пожалуйста он заработал Нет не заработал второй день вечер техника устала слушатели устали раз раз заработал первую очередь Спасибо за доклад очень интересный был Вот мы с некоторыми проблемами тоже У всех компании сталкиваемся вот у меня знаете возник вопрос У Вас получается есть какой-то внутренний продукт вы готовить его пылесос он туда уходит Потом вы также со своей стороны рассказывайте что у вас есть очень много внутренних продуктов которые вроде как обертки на топом сортами возникает вопрос А зачем допустим инженеру приходить в компанию изучать что-то внутреннее Чтобы потом сделать какой-то Open Source то есть вот этот гэп когда ты очень много своих каких-то внутренних разработок делаешь для компании смотрите во-первых мы не делаем прям вот обертки и серьезное развитие пенсионных проектов просто опенсорсный проект когда мы привозим их в наш монореппозиторий нужно адаптировать чтобы они у нас собирались чтобы они жили с нашими базовыми библиотеками чтобы их можно было использовать то есть не то чтобы моих сильно перепиливаем нет и более того если мы их действительно начинаем перепиливать если мы делаем туда уже какие-то Фиксы какие-то улучшения наша главная парадигма всегда пытаться нести это в обстрела предлагать миру потому что во-первых мы так замучаемся эти форрки сводить воедино Ну во-вторых нам не жалко мир немножко помочь вот история про то что мы какие-то внутренние проекты начинаем выкладывать вовне Ну как правило мы берём уже успешные внутренние продукты которые уже доказали на примере Яндекса что они хорошие полезные что они держат нагрузки что они помогают разработчикам и уже их несём во внешний мир как что-то проверенное Спасибо спасибо Еще вопросы Не стесняйтесь давайте у нас будет подарок за лучший вопрос Меня зовут Алина у меня возник такой вопрос Настя ты своей презентации сказала что выкладка какого-либо продукта понсорс привносит развитие этого продукта как один из Пункт было написано у тебя в презентации Однако Вот хотелось бы понять Вы как-то это численно измеряете вот например мы выложили этот продукт Open Source и получили от этого такой-то Профит например в цифрах нам там столько фича закомителей столько всего и как продолжение моего вопроса выкладка всех или продуктов того стоило то есть действительно ли Вот все продукты которые выложили в пансорс заморочились высоты схемой интеграции потом окупилась это И принесло вам Ту самую выгоду или может быть у вас были какие-то случаи когда вы выложили постарались сделали что-то как-то не зашло Спасибо отличный вопрос значит измеряем ли мы ту пользу которую приносит выкладка Open Source вот мы как отдел технологии разработки нет а те проекты которые выходят в Open Source да то есть я иногда вот прихожу к руководителям тех проектов которые вышли в Open Source и спрашиваю что им это дало и они мне начинают рассказывать что вот здесь прибавилось вот тут пользователи захотели вот здесь вот внешние контрибьют и Кроме того как человек который отвечает за сервис финка свинка Я такие вещи просто вижу Потому что модельеры проекта начинают ходить и говорят А вот у нас пользователи попросили чтобы у нас была сборка подармы А вот у нас пользователи попросили под Винду помогите нам пожалуйста вот и как бы какие-то идет какой-то во внешних контрибьютов то я это тоже вижу Потому что эти люди приходят и говорят так а как нам принимать контрибьюторы Как нам их принимать если их много а как нам приземлить кормить если он большой Ну в общем Всегда видно идёт там жизнь или не идёт Вот Но люди которые прямо вот свои проектики выложили они очень следят за тем сколько у них фолловеров звёздочек Сколько им принесли пул реквестов О чём они были в общем всегда люди измеряют насколько это окупаемая история потому что мне всё время нужно вкладываться тем что ты рассказываешь про эту опенсорный проект тем что ты постоянно как-то держишь его на плаву тем что ты всем говоришь что он есть он клёвый а второй Половин твой вопрос я успел забыть пока отвечала на Первом а бывали линии успешные запуски Да бывали Ну как неуспешные бывало Так что какой-то проект выложился и Никто особо не пошёл им пользоваться как правило это связано либо с тем что он был мир не очень-то нужен и тут надо лучше тестировать гипотезы и думать о том какая у тебя Киллер фича или какой потребности закроешь собственно зачем ты это делаешь либо это было связано с тем что недостаточно хорошо все-таки про него рассказывать то есть просто положить код не работает Если вы думаете что на этом история заканчивается Нет она на этом только начинается Если у вас нет людей которые готовы ходить рассказывать писать статьи отвечать на вопросы всячески значит быть амбассадорами этого проекта то возможно вообще не связываться спасибо очень классный вопрос у нас еще есть две руки уже даже три Привет Спасибо за доклад смотри ты вначале рассказала про систему контроля версии Аркадия и про монорепозиторий и вот получается приходит к вам человек Он эту систему не знает да обучается потом уходит и Ну наверное нигде не может ее применить вы не думали сорсить мы если честно думали об этом конечно же тут есть история вот какая у нас fcs которая сильно виртуализирована она очень сильно специализирована под большие репозитории То есть если у вас небольшой репозиторий то берите просто гид или что хотите и пользуйтесь истории когда репозиторий очень большой это как правило какие-то крупные компании у большинства из них уже решена эта проблема но и вообще не факт что если мы все это приносим компенсорс люди из Больших компаний начнут этим пользоваться все-таки государственные решения их не все любят и применяют у себя внутри Кроме того наш все-таки сильно повязан на другую нашу инфраструктуру в частности инфраструктуру хранения данных и это тоже нужно будет как-то решать но в целом мы думаем Поэтому если у вас большая компания с большим репозиториями У вас есть потребность Приходите Давайте разговаривать может быть вам большую потребность мира и тогда что-то сделаем на первом ряду Давайте сначала потом на первом месте останется сначала хорошо уступили отлично Спасибо за доклад вопрос скорее такой по обратную сторону Да понятно Яндекс компания уже достаточно старый Когда вы начинали работать решение просто наверное в мире таких не было вам много приходилось писать велосипедов но мир-то за прошедшие годы изменился в обратную сторону процесс никак не идет наоборот к себе затаскиваете что-то то есть вы видите что классное решение и Давайте наш велосипед похоронен Да И вот это будем использовать хоть что-то удалось затащить или Все настолько уникально что ну прям никак мы наверное не очень часто ставим перед собой такую задачу потому что все-таки наша инфраструктура она существует для того чтобы решать очень масштабные задачи и далеко не все что есть на рынке способна задача такого масштаба решать Ну то есть вы не поставите другую систему на полмиллиарда текетов до сих пор вот мы в целом не насаждаем Вот аркадию и общую инфраструктуру в обязательном порядке то есть если какие-то отделы какие-то продукты Яндекс считают что им лучше жить вне моно репозиторе и всем вот этим не пользоваться они этим не пользуются и они живут все как принято в большом мире обычно заезжают либо те кто хочет сильные связности с какими-то проектами которые уже живут в Аркадии либо кто-то Кто хочет общую инфраструктуру из коробки не хочет иметь свой инфраструктурный отдел хочет чтобы все делал одел технологии разработки и другие инфраструктурные отделы вот поэтому в целом мы силы не заставляем но и съезжать мы силы тоже обычно не не сводим людей на что-то именно вообще принято просто потому что мы вообще как бы Ну все очень сильно совсем повязано если мы берем какую-то внешнюю систему нам придется писать под нее 135 плагинов ко всем остальным нашим системам и это опять будет уже совсем не та система которую можно взять на рынке а система с кучей кучей доделок В общем нет но отдельные отделы вольны жить так как ему хочется и такие отделы есть Да наверное я теперь привет Спасибо за доклад А подскажи пожалуйста вот про Best practis такой вопрос наверняка приходилось сталкиваться вот у тебя например есть такой без проект у которого в корр например есть сложение вычитание и вот бизнес говорит Мы хотим столько сражения вот вычитанием и песочность не хотим вот видеться причем тоже есть практики практической и более больной Вот видите огромная проблема документации с какими-то совместимости и так далее Вот скажи пожалуйста вообще какой-то без практики разделять его там на два кора два продукта там как-то еще дробить и не знаю что еще делать у нас в таком случае наверное продукт делится на ядро то самое которое мы аппенсарщим и какие-то плагины или надстройки к этому ядро которое мне ресурсы мы как раз аккуратно обрезаем по периметру Но это всегда больно это всегда занимает месяцы если это действительно большой проект вот разделить его на два куска и это конечно приносит какой-то например вы выложили в аппенсорс зачем-то люди начали туда коммитить никакой проверки для того что у вас живет в виде на шлепки во внутреннем репозитории у вас во внешнем репозитории нет и соответственно те люди которые развивают и комитят ваши проекты Open Source они сталкиваются с тем что вашим контейнеры бесконечно бегают и пытаются их контрибьют и как-то натянуть на потребности еще в ваших внутренних систем поэтому такой возможен но он будет довольно сильно ограничивать проект развитии и там не случится такого вот бума где приходит внешние люди начинают прям сильно его развивать потому что они просто не смогут Потому что им постоянно будете горяча Подожди две недели мы твой огромный пул реквесты адаптируем под наши внутренние потребности Но это зависит уже от того зачем вы выкладывать свой пинцерте Если вы кладете свой пинцерт чтобы все-таки как-то захватить мир и стать популярными то это сразу как бы Не очень удачная дорога Лучше наверное все если нет каких-то прям сложных причин почему так нельзя Спасибо Спасибо еще вопрос На первом ряду вот там в конце у меня маленький вопрос не упомянули о документацию как Open Source синхронизируйте с очевидно она тоже немножко нужно отличаться Ну если честно мы вот против того чтобы например при симке документацию Pen Source взять и просто проходить и делать макро подстановку чего-нибудь вместо чего-нибудь То есть когда к нам приходит проект и говорят вот Давайте будем выкладывать нашу документацию только мы подменим вот это вот на это вот на это вот на этом нет вот если хотите сами Две версии ваши документации я не очень верю в историю в которой берется документация внутренняя и превращается просто магически в документацию внешне потому что она написана для разных людей с разными целями Там просто разные уровни уровень понимания проект инфраструктуры окружающей действительности ожидается и как правило если вы просто берете внутреннюю документацию выкладываете это становится плохая внешняя документация поэтому Да синхронизировать документацию можно но скорее всего она все-таки должна жить как какой-то отдельный instance вашей документации и люди должны писать ее с учетом того что они пишут для внешних людей то есть у нас есть проекты которые синхронизируют действительно документацию в Open Source из внутреннего репозитория Но это немножко другой вариант этой документации то есть они прямо во внутреннем репозитории сразу пишут как внешнюю документацию у них все отдельно есть внутреннее для сотрудников Здравствуйте спасибо за доклад хотел спросить с точки зрения бизнеса насколько большое сопротивление вы встречаете от бизнес-юнитов по опенсорсу проект То есть это отдельные затраты на intens на Саппорт и так далее и даже интересный вопрос в цифрах насколько удорожает поддержку проекта Open Source а страшное признание мы не приходим в бизнес юнитам чтобы просить их что-то выложить в опенсорс они приходят к нам со своим желанием это сделать смысле мы как отдел технологии разработки никого в Open Source не зовем мы написали платформу которая позволяет это сделать потому что у нас было довольно большое число заказов от людей которые хотели здесь хорошую автоматизацию у нас К тому моменту была довольно плохая поэтому бизнесы сами решают что это надо сами с этим приходят и в последние полгода я вижу прям целый бум на эту историю поэтому это становится все популярнее популярнее видимо бизнесы понимают Профит который здесь происходит а насчет оценок У меня нет потому что этим сами бизнесы занимаются Но если вы мне напишите в Telegram Вот тютелька да я могу попробовать спросить владельцев крупных опенсорных проектов может быть они дадут какие-то данные напишите мне в Telegram у нас осталось время еще на один вопросик вот здесь вот рука если вас еще осталось вопросы и вы стесняетесь здесь задавать или вам не хватило времени то в коридоре У нас есть дискуссионный дискуссионные зоны Где вы сможете с Анастасией поговорить и всё обсудить Да добрый день Анастасия Спасибо за очень интересный доклад Меня зовут Сергей хотел создать такой вот вопрос не становится ли выкладка какого проекта Ну который от которого отрезаются просто все внутренние интеграции выкладкой того самого золота после которого во внутреннем репозитории остается только какое-то очень дурно пахнущее легасе которая потом берёт и загибается особенно с учётом там того что некоторые команды и так предпочитают во внутренние репозитории не заходить Спасибо нет На самом деле я такого не видела у нас скорее за бортом остаётся то что либо повязана на какую-то другую систему то есть какая-то часть которая стоит на базе ни одной системы нескольких и её нельзя просто вывести ещё какие-то системы либо системы которые именно связаны с интеграцией того что с окружающей действительностью то есть с другими системами там не остается за бортом какой-то Ил который вот осел за эти годы нет там остается какие-то коннекторы к другим системам которые просто не нужны в окружающем мире но нужны в нашем внутреннем"
}