{
  "video_id": "HH8gutXFDM0",
  "channel": "HighLoadChannel",
  "title": "Как готовиться к подъему нагрузки в условиях 2022 / Владимир Федорков",
  "views": 626,
  "duration": 2472,
  "published": "2023-01-19T06:56:45-08:00",
  "text": "всем привет сегодня мы поговорим о том как готовиться к подъему нагрузки и в условиях 20 22 года и вообще в любых условиях начнем с того что у нас есть определенный правил поведения тут народ не очень много поэтому очень многие уже подустали время уже такой позднее поэтому давайте сделаем все максимально лайтовый не нужно храпеть пожалуйста вот если вот мешать другим не надо храпеть можете спокойно спать если я вам мешать не буду не нужно здесь сидеть и скучать и вот чистые свежести ждать когда закончится эти несчастные 40 минут поэтому если вы чувствуете что это не ваша спокойно идете и слушаете доклады потому что докладов деятельности много доклады разные интересные что делать можно можно заходить выходить в любое время не понравилось вышли поняли что ничего более интересного не зашли обратно можете взять собой четче кофеечек немножко взбодриться там еще автопати говорят будет какая то можно снисходить посмотреть на докладчиков на что все равно мы занимаемся решением практически одних и тех же задач каждый раз каждый раз и никаких нет никакого рокет сайенс а в действительности пока еще не придумали войти но кроме как там в супер высоких нагрузках кто работает прямо супер высокими нагрузками скажите меня поднимите руку не врите мне окей вот тут вот есть не скачай которые работают супер высокими нагрузками зачем они сюда пришли слушать меня не понятно потому что я буду рассказывать принципе вещи которые про резкие всплески но не про объем уровня гугла ну и можно задавать вопросы если хотите о чем будем говорить мы будем говорить какие подходы к проектированию разработки больше не работают или работают не так как хотелось бы как чем их заменить каким образом добиться наконец-то стабильно работающего prada у кого у кого просто работает стабильно посмотрите вот посмотрите на этих врунов а ну ну нет но такого не бывает у кого прот у кого пропадал да на этой неделе я прям видел руку такой об опо нет все таки падал отлично вы пришли по адресу мы как раз об этом мы будем говорить мы будем говорить о том как работать очень редко растущими нагрузками и как же дотянуть до этих пресловутых пяти девяток можно ли вообще это сделать ты вообще кто ну я работаю довольно давно с высокими нагрузками обычно где-то 2 двукратная двукратный опроверг повышение нагрузки в течение года один раз поработал с четырехкратным повышением нагрузки в течение шести месяцев мне не понравилось я после этого спать хочу постоянно но то как интересно сейчас и то что происходит сейчас до этого до этого мы с такими ситуациями я лично по крайней мере не сталкивался выглядит конечно очень увлекательно ситуации если не сказать сильнее поэтому давайте посмотрим что поменялось что вообще происходит дело в том что прежде всего мы говорим о том что сроки поставок железо резко растут в действительности сейчас начался hyip последние там пару пару-тройку месяцев о том что вот мы все умрем у нас там сроки поставок железо растут но если вы посмотрите предыдущий highload мы как раз говорили о том что в ту же в тот момент языка видные языка видный логистики точнее со сломанной логистики языка вида у нас сроки поставок были от полугода до года сейчас ничего принципиально не поменялось в том плане что до стало сложнее но опять же железы есть железо становится все меньше потому что например если вы слушаете следите за новостями то в нидерландах закрыли причем зеленая партия закрыла завод по производству химикатов для травли печатных плат который 80 процентов это этой самой химикалии в мире производил то есть вот это то что мы видим с железом это не то что касается конкретно нас это вообще мировой тренд поэтому мы в этот тренд зашли и мы будем довольно долго продолжать с ним работать с этим трендом железо будет все меньше и меньше она будет все дороже и дороже поэтому нам нужно научиться работать и железо концентрируется конечно же прежде всего крупных заказчиков например amazon начал делать свои процессоры просто потому что это дешево и выгодно ну и мы очень серьезным концентрируем железо в облаках облачные ребята вот те кто делают облака у себя поднимите руку огромные молодцы почему потому что они заранее запаслись железом и теперь с этим железом будут спокойно жить раздавая его по необходимости это очень круто но нужно понять что облаков обычно есть свои очень большие проекты поэтому на легке на легкое железо не мы не претендуем больше как мы жили раньше ну вот мы когда делай как делали какой-то проект вот у нас появился вот backend первый шаг ватт это создание базы данных в проекте потому что с базами данных очень много всяких проблем связана вот у нас там данный на будет хранить мы начали общаться между быками база данных у нас значит 1 1 пользователь такое он наконец-то нас там mvp появился что происходит дальше у нас количество пользователей растет если нам повезло после чего эти пользователи начинают активно работать система это система начинает подгорать то есть система перестает работать адекватно для каждого пользователя у нас начинается обращение злобный пользователи говорят что же вы сделали у нас ничего не работает и вот тут вот мой любимый слать что происходит что же что это за слайд значит мы говорим о том как ведет себя система под нагрузкой точнее как она деградирует под нагрузкой если мы сейчас говорим о системе с 48 кадрами и в по оси x и у нас количество активных клиентов которые постоянно что-то на что-то туда отсылают а по оси y значит справа у нас лэйтон все вот это вот линия непрерывающийся это вот light нести время обработки запросов а по а слева у нас таких слева у нас количество запросов которые обратятся за секунду и такие столбики и вот что важно у нас есть три зоны в этой системе первая зона когда мы когда количество потоков меньше или равно количеству ядер и мы совершенно спокойно взлетаем вверх по нагрузке при этом литнике у нас не растет как она была маленькой так она у нас и остается после этого когда у нас кончаются свободные процессоры и мы начинаем и операционной система начинает перебрасывать работу с 1 из 1 процессор на другой согласного ядра на другое и начинается с кей джи линк мы продолжаем расти по пропускной способности noolite носи у нас уже начинают возрастать потому что у нас появляется внутреннюю очереди в системе и в какой-то момент вот . . когда мы переходим когда у нас начинает расти лэйтон свет . насыщения и есть у нас . отказа это ситуация когда у нас количество потоков где-то там в три в 5-6 раз превышает количество ядер в системе у нас перестает расти пропускная способность с ростом нагрузки аллы tense у нас уходит просто стеной в по экспоненте вверх и мы говорим о том что система больше неработоспособна для с точки зрения пользователя это называется . отказа вот мы дошли до этой точки отказа но бы кэнди что мы делаем но backend у нас в лафти господи stateless поэтому у нас здесь вот battle.net получается и мы что делаем тут cubot лунный кот когда пришло больше чем мы можем обработать и мы в этот момент говорим мы будем делать скейл если у вас система state фу вот вот это вот бэг-энда например явок то с явой занимается кто с явы работает вот чувствуете боль да вот такая вот свою я немножечко другая история и с брендом бэкон диски лица и все опять все хорошо известно что нам нужно добавить балансировщик который будет работать трафик разбрасывать у нас опять всего хорошо у нас все больше и больше пользователей вот мы начинаем операцию в базу в базу мы упираемся у нас еще больше багандов у нас опять значит злобный пользователи говорят вас ничего не работает в этот момент что мы делаем мы берем деньги и говорим да вот мы перешли в то же самое в точку отказ мы уже на другом компоненте и что интересно разные разные компоненты они по-разному отказывают вот это если вы посмотрите на оранжевую линию то отказ происходит плавно то есть мы как бы нагрузку даем но там какие то какие то запрос еще обрабатываются а в какой-то моря есть система которая вот они дошли до точки отказа и все и больше они даже после этого не восстановится в трафик и снимите восстановление после этого не будет вот зеленая линия вот это прекрасная она очень хорошо показывает что что происходит мы такого не хотим ну вот у нас произошел отказ мы такие так мы не можем это терпеть дайте нам денег мы пойдем и возьмем какой-нибудь очень большой сервер поставщик желез такой о отлично у нас появился клиент который нам наконец-то платит кто работает в облаках они понимают этот прекрасный момент когда люди их клиенты не справляются с нагрузкой на маленьком железе они наконец могут продать что большое нормально и все такие вот значит мы в залили деньгами условную баз данных у нас все хорошо но в какой-то момент у нас нагрузка растет растет растет растет и что происходит да вот масштабирование по кредитке амурский lab мы второй раз пытаемся это сделать значит это говоря о том как мы работаем с масштабированием почему мы используем масштабирование по кредитке почему мы сразу внесем деньги потому что это очень просто и очень легко для бизнеса чем общаться с разработкой чем менять там думать и так может поменять архитектуры может не поменять архитектуру проще взять иногда бабло мед такой подойти к пруду и так вот губы бу бу бу бу и у нас сервера растут растут растут растут и вроде как все работает и нам не нужна и менять не какие процессы в компании потому что как менять процесс это дорого долго и очень больно сегодня тоже можно так сделать но будет уже дороже потому что стоимость железо но понятное дело растет а завтра будет еще дороже и не факт что вообще будет доступна и железо поэтому придется немножечко сдвигать вот эту точку когда мы этот бабло мед можем выключить вот у нас база упала мы прибыл у нас там какая-то очень большая база очень большое очень большой сервер мы приходим и говорим слушать и возьмите ещё денег дайте нам наконец-то там 125 там 512 ядерно 4 терабайта памяти и так чтобы в стойку вылезала поставщик желез говорит знаете слушать а мы у нас пока мы от intel и не получили 512 ядерную систему можете подождать немножечко мы вот как бы закажем но не факт что она приедет и вообще и ну как бы все лежит и чё теперь делать два варианта бывает когда мы подходим к точке отказа первый вариант это когда мы подходим плавно и у нас вроде бы как ничего не меняется просто количество данных увеличивается и вроде система работает работает работает работу давно происходит отказ начала маленький потом побольше потом совсем большой это самая страшная неприятная ситуация потому что мы уже привыкли что у нас вот системы система работает и второй вариант это когда наш отдел маркетинга варит так мы сейчас возьмем деньги сделаем рекламу на все и сделаем это в один день и вместо условных 10 пользователей которые приходят к вам систему приходят тысячи вы их обработать червяки ведь не можете потому что у вас система к этому не подготовлена вот что происходит в этом случае делать у нас есть два подхода негативной позитивной почему негативный негативные мы жертвуем малым для большого мы мы начинаем кэшировать очень активно все это с одной стороны позитивный но у нас мог бы старые данные пользователь показали старый данный хрен с ними зато хотя бы мы что-то показали из кэша а крыш быстрый мы отключаем функциональность по частям у авито был хороший доклад и по уму индекса как они рубили по частям свою функциональность для того чтобы оставшимся путь для того чтобы оставшаяся функциональность работала адекватные хорошо желательно эту уметь делать на горячую то есть желательно вообще в такую ситуацию не попадает но раз уж попали в приложении должны быть мышки которые отключают ненужные не критичную функциональность для пользователя для того чтобы остальная функциональность отработал ну и самое неприятное конечно мы можем сделать это порезать трафик то есть вот у нас пришли например тысячи человек мы не можем ее обслужить мы понимаем что мы тысячу человек за эту минуту обслужить не сможем никогда поэтому мы говорим так мы а трубе отрубаем сотню для того чтобы 900 пришли к систему сделали сделали система сделала свою работу там заказы получили допустим мы работаем там с книжным магазином на что 900 человек из тысячи оформит заказ 100 не оформят но к сожалению но мы хотя бы хотя бы прибыль потеряем не всю ну и вот тут выбор между десятью процентами прибыли листа но чтобы делать такие фокусы нужно во-первых понимать как система работает и уметь этот трафик резать потому что не все системы могут просто взять и аккуратно отрезать трафик на балансировщика это у нас негативный сценарий а ну и хороший мониторим для того чтобы понимать куда мы упираемся конечно это негативный сценарий позитивный сценарий заключается в том что мы заходим систему мы понимаем что вообще происходит ищем куда упираемся и обычно это в принципе одна система в которую мы упираемся то есть там много-много под системы в какой-то в какой-то по системам мы уперлись и она отказала поэтому очень часто это именно база данных или уровень хранения данных если система у нас масштабируется мы можем перебросить резервы но если нет тогда нам нужно заниматься чем-то другим мы оптимизируем тяжелые вызовы в чем в чем плюс в том что мы анализируем систему у нас эта система при этом не работает у нас при этом downtime то есть вот это вот эта большая проблема то есть с одной стороны мы конечно все чине мы делаем на это это починка происходит на проводе ну идём от самых тяжелых запросов там к легким от самых тяжелых и пик легким и ищем быстрые фиксы чем быстрее пофиксим тем быстрее за летим обратно ну и опять же если вы в облаке и вам есть еще куда скейлится очень просто прийти и сказать дайте мне чуть чуть больше железа поработать на этом железе с оптимизироваться и сделать там скилл на моей практике того скилл не не происходило ни когда то есть если мы покупаем железо чуть дороже чуть больше мы на нем потом всегда и работаем то есть вот теория от практики немножко отличается в чем проблема зависимость цены от производительности она у нас экспоненциальная и когда мы для того чтобы купить следующий instance чуть более крутой и быстрый мы тратим сильно больше денег и в этом плане у нас конечно все не очень здорово поэтому чтобы туда чтобы в эту сесть в эту ситуацию не попасть мы занимаемся про активной работой мы занимаемся мы оцениваем состояние системы ну самое лучшее конечно эта система стабильность роста нагрузки и запасных 12 месяцев есть скажите кто рассчитывает запас по нагрузке ничего себе интересно из каких компаний потом после доклад об подойдите пожалуйста расскажите потому что это очень круто но он там я думаю авито какие-нибудь индекс опять же остальные очень интересно у кого есть запас на 12 месяцев хорошо ну что вам тут делать но докладе я честно говоря не знаю система стабильна на запас меньше полугода гораздо меньше рук но это не стыдно вы по крайней мере рассчитываете запас у вас есть процессы значит система стабильна но без запас по нагрузке а кому вообще нужен этот запас то есть система если вы не растете то вам запас по большому счету не нужен кому не нужен запас по нагрузке то есть вы точно знаете что вы дальше расти не будете счастливых людей я тут не вижу ладно ну и система стабильна но запас неизвестен никто не признается да есть есть парочку людей которые не признаются я к сожалению вижу мне там свет в глаза бьет потом придите расскажите как вот жить в это очень нестабильная ситуация очень неуютно и ну и система нестабильна с текущим уровнем нагрузки этот победителей можно руки не поднимать но вот это конечно победителей потому что это значит что вы живете в состоянии постоянного стресса то есть вы скорее всего не вас кто не вас появится я с вами хотя у нас система вполне вполне себе стабильный все хорошо работает но тем не менее вот этот плохие привычки значит дело в том что для того чтобы прийти к стабильность на стабильности нет коротких путей это значит что мы должны разрабатывать стабильность от вообще процесс это не какая-то ситуативная штука что-то мы сделали стабильный прот вот он сегодня стабильная завтра вас редис выкатили и что проезжай укого от релизов что-то падает от остальные сидят вот вы что думаете мы релиза что не хотели не знаем как это бывает остальные кто руки не поднял у них либо релизов нет вообще либо они просто не знают что в них есть и призы ладно в общем давайте посмотрим что такое вообще общая стабильность системы или вот эти вот пресловутые девятки про которые все говорят но у всех разное понимание вот из чего состоят девятки первое первое это прежде всего одна система спроектировать да то есть откуда берутся ошибки хреново спроектировали плохо разработали баги написали выкатили внезапно в пиковое время и прям вот если у вас там blue green у кого blue green вот на активную линию знаете даже такой выход к взяли на активную линию бабах там выключили включили ну моргнула всякое бывает в этот момент у вас там error budget банк и упал без канарейки можно выкатить сложные релизы какие-то релизы вы выкатываются там него впик время прям вот впитывая тоже тоже такое бывает документация ржач и не слышал документацию кто не делает вот один человек еще это не стыдно поднимаете руки вот документацию делают то есть все в принципе не все потеряно до документация это не приоритет и часто она делается уже по остаточному принципу но если у вас есть хорошая документация она очень много времени и сил и нервов экономит что у нас еще мониторинг мониторинг у кого user бы есть мониторинг позвонили не работают значит у нас наверно что-то происходит ну че вы тут сидите водку кого руки подняты бегите делайте все нормальные мониторе и действий на каких то там специальные специальные доклады поставьте себе графа ну прометея ли арт-менеджер но ребята ну 20 21 век двадцать второй год но камон это без мониторинга если вы не видите систему не понимаете что происходит в системе вы слепы а если вы слепы у вас никогда стабильности минутой стабильность для вас это что это непонятно ну наверно наверно стабильность это что-то другое да и если у вас есть допустим мониторинг то у вас вы можете сделать нагрузочное тестирование у кого есть нагрузочное тестирование кто понимает зачем оно надо а вот а кто понимает но нагрузочного нет я видел несколько рук была поднята вот отлично значит нужно принести рассказать вот на хайло де говорили что о необходимости нагрузочного тестирования раз на конференции говорят значит нам нужно сделать продайте наконец бизнесу или там своим руководителем потому что без нагрузка вы не понимаете сколько у вас запас а без запаса вы не понимаете как у вас работает система и как в какой момент она откажет этого ну там можно там три иконки на сервер налепить конечно там с утречка помолиться я сам так иногда делаю когда особенно опасны и диплом но лучше все-таки нагрузочный проводить ну и приемка ну казалось бы да приемкой что ну там взяли вы catelyn приняли они этот тоже процесс когда у вас какая-то новая функциональность нужно если у вас там есть отдельная эксплуатацию отдельно разработка то желательно у кого кстати отдельная эксплуатация отдельная разработка так окей то есть где-то пополам напополам и приемкой тоже очень важно потому что если вы не передали продукт то есть то что код который написан это просто кот разработка знает как он должен работать эксплуатации знает как он по факту работает и это сне не одно и то же очень часто это очень разные вещи поэтому прием к это процесс когда все понимают а вот как этот код себя ведется под нагрузкой с правовыми компонентами потому что все оттестировать невозможно даже если у вас идеальное тестирование если вы не хотите тратить годы и века на тестирования новых новых новой функциональности вы просто что-то пропустить это нормально вы все тестировать никогда не сможете ну эксплуатации про эксплуатацию можно вообще годами говорить время я хотел бы уложиться в 40 минут они 8 часов потому что все таки поспать тоже хочется не опять же автопати и вот мы замыкаем этот круг этот круг можно замкнуть двумя методами первый метод это от эксплуатации опять в проектировании но это значит у вас совсем все плохо это значит выкатили такое что вообще не жизнеспособна и багов там столько чтоб сжечь огнемётом и по все заново написать но это конечно большая проблема для бизнеса так не бывает поэтому дорого долго и очень больно поэтому вот за эволюционные подход мы хотим какие-то баги фиксить и трансформировать систему из точки а в которой мы находимся которые иногда даже смотреть страшно но тем не менее в точку б где мы хотим оказаться ситуация максимальной стабильности ну вот общая стабильность системы выглядит примерно вот так но в действительности она выглядит чуть-чуть посложнее и это не все взаимодействия внутри которые можно вообще о которых можно говорить потому что мониторинг с нагрузочные тоже после нагрузочного можно понять что у нас мне что что-то не мониторится мы добавили что-то в мониторинг задокументировали потом вы меняли выходку то есть тот просто слишком много стрел чему и давайте не будем и причем здесь связь стабильности пропускной способности который мы говорили ну вот все очень просто стабильность системы это возможность корректно отработать какой-то объем входящих запросов на определенном уровне надежности и не даст с недостаточной пропускной способностью вы просто не сможете обеспечить вынес мы тоже не сможете понять у вас система нормально работает или нет потому что у вас просто где-то будет battle.net и кто-то будет отваливаться по таймауту что-то что-то будет где-то генерится ошибки и вы без пропускной способности нормальный не сможете функционировать никогда даже если у вас все отлично во всех остальных местах давайте посмотрим как увеличить эту самую пропускную способность наш первый закон масштабировании мы переносим нагрузку на масштабируемые компоненты если у вас какой-то компонент не масштабируемый и он столкнулся с нагрузкой что у вас будет при повышении нагрузки правильно он взорвется как вот у нас на в первые ситуации на слайде кино было как у нас во второй ситуации на слайде ки было все взорвется если у вас что то не масштабируется она вот выглядит вот так в какой-то момент вот ваша система то есть она вроде как и edit но чувствуется что какая-то вот несколько нервозная обстановка возможно там уже где-то искрит внизу под машиной а может быть просто сейчас все упадет и все свалиться в крутое пике а зачем масштабируете если у нас все работает у нас все работает четко перестал с этим масштабированием зачем это все нам нужно дело в том что у вас сейчас работает под определенная нагрузка одним образом когда у вас нагрузка поменяется и у вас система будет вести себя по другому когда у вас даже есть нагрузка не поменяется но новые фичи вы и выйдут в этом про профиль нагрузки тоже немножко поменяется у вас обычно фичи нагрузку добавляют они убирают и количество данных не уменьшается обычная постоянно растет и в этом смысле у нас постоянно что-то все меняется если у вас нет плана масштабирования даже если у вас нагрузка всегда одинаковы в какой-то момент вы упадете как что масштабировать ну быстрый ответ конечно все чуть более полный ответ все что касается именно продавай нагрузки то что касается работы с именно в вас к нагруженными компонентами потому что если у вас есть какой-нибудь ботик внутри внутри компании ну его масштабировать наверное не обязательно потому что вряд ли ваша компания там если ваша компания вырастет там из например 10 человек в 100000 тогда конечно этому бочку придется несладко но кажется время найдет с его переписать а так в принципе все com все точки которого касаются которые касаются трафика нужно уметь масштабировать по крайней мере для того чтобы у вас было отказоустойчивость если что-то если один компонент умирают то вы переключаетесь на на его пару по крайней мере если это выход если вы хотите однократную однократный отказ поддерживать сколько вы отказов хотите поддерживать однократный двукратный трехкратный готовы ли вы платить за это очень много вопросов в общем нужно есть пав убираем самая большая вот эта работа состоит им он отвратительный масштабируется это касается баз данных любых системы хранения и проблема в том что они дико медленные просто потому что они должны выполнять определенный объем работы и не должны при падении этот стоит терять поэтому там блокировки вот это вот все вот кстати вот этот синий график если кто-то пор кто-то еще помнит когда вот мы там давали нагрузка потом дубом вот такой вот синяя вертикально зеленая вертикальная линия это были как раз блокировки когда у нас количество блокировок возрастает с ростом нагрузки и в какой-то момент все умирает вызвать отказ проще простого кто ронял прот миграциями вот я ронял такое бывает у кого вообще миграции автоматизированы и из вас кто то вот тут кто-то не ронял пород миграциями интересно ну вот и и мы переходим к тому что мы должны формироваться и масштабироваться очень аккуратно то есть вот у нас есть какие-то бэг-энде у нас есть база данных и мы для того чтобы с ростом количества данных справиться мы что делаем мы это с данные количество данных растет у нас проблема в том что данные в случае если у нас там просто кластер какой-то базы у нас все эти данные раскинуты по всем нодом то есть у нас резервирование большое а толку от него нет потому что данные у нас одни и те же копия что происходит при увеличении объема данных скорость падает время миграции раз растет цена ошибки растет ну и можно просто положить все 1 миграции если вас данных много поэтому что происходит когда у нас миграция происходит вас к нам очень часто реплики отваливаются там старые данные все очень плохо мы перекидываем запись записи и чтения на мастер мастер тут же гибнет потому что он не справляется этой нагрузкой вот технологии у нас плохая которую мы используем может на майский эль используем она тупо згрлс и все решится тогда ну как показывает практика не всегда решается это тем что мы берем вот эту систему и начинаем ее сортировать то есть мы разделяем данные и вместо большого количества данных в одном кластере у нас есть несколько кластеров с очень маленьким количеством данных и это значит что у нас общая нагрузка на систему падает дальше единственное что балансировщик который у нас там стоит нам нужно сделать немножечко более умным потому что он должен понимать стоит у него там стоит каталог куда на какие бренды все это все это делать и потом мы можем делать гил распределенность отсюда и идея в чем если у вас вышел из строя один компонент единственный на котором все держалось из которой идет трафик не важно это баз данных backend или что то еще у вас дом горит если у вас вышел из строя один из 30 кластеров ну 3 процент прям трем процентам людей не повезло мы конечно примем все усилия и очень быстро все поднимем но честно говоря компания которая теряет там который обслуживает 90 девяносто шесть с половиной процентов трафика и компания которая обслуживает ноль процентов трафика несколько разные эмоциональное состояние несколько разные в этот момент появляется ну и что вот такая вот у нас история мы делаем его распределенные костра сделали делал распределенной кластера сделали state сделали раутер у нас все хорошо у нас мало данных ну и в общем что что нам дает масштабирование масштабирование когда нужно делать прежде всего масштабирование нужно закладывать сразу если вы делаете проект под нагрузку у кого сейчас вот новые проекты на вас висят которые вот вы проектируете остальные мучаются счастлива я так смотрю в ну и это значит что если вы стараетесь проектировать какую-то систему под высокую нагрузку сразу закладываете масштабирование почему и шарди рование почему потому что когда вы делаете масштабирование уже готовые системы она делается сложнее а шарнира ваться ещё более сложно потому что данные очень серьезно завязанное когда вы сразу работаете системой которые вы знаете вот эти данные здесь эти данные здесь эти данные здесь у вас немножко другое отношение к самому процессу написании кода и немножечко другое отношение к тому как вы вообще подходите к дизайну системы вы сразу работаете в правильной парадигме и таким образом вы можете сэкономить на железе потому что если у вас одна большая . очень горячая она стоит очень дорого а если у вас очень много маленьких дешевых сервировка на которых лежит здесь немножко данных здесь немножко данных здесь немножко данных взять много маленьких серверов много маленьких виртуала чик проще чем взять несколько больших систем потому что ну потому что у нас ситуация такая так что нужно дублировать и умение работать в crosse bc сегодня это не роскошь это не та большая необходимость если вы не работаете skross dc если вы не можете работать в его распределенным трафиком это скорее всего по вам выстрелит потому что резервировать нужно не только не только данные но иногда еще и провайдеров такая вот у нас история ну и давайте быстрые выводы значит пропускная способность приложения это база для стабильности если у вас нет пропускной способности у вас никакой стабильности речь идет речь идти не может как бы вы что они вы корневых отеле вы не выкатывали у вас все рано или поздно грохнется скорее рано чем поздно ситуация с железом ухудшается ухудшалось ухудшается и ухудшаться будет вне зависимости от того что нам говорят новости потому что это общемировой тренд вычислительные ресурсы будут постоянно дорожать поэтому-то . оптимизации которые кота мы приходили когда у нас уже там совсем бабло мед иссякал сейчас сильно сдвинута к началу разработки и те люди которые будут сейчас заранее думать о производительности будут экономить свои компании очень много денег и себе очень много нервов идем в распределенность как я уже говорил это обязательное требование в принципе у меня наверное все вопросы пожалуйста спасибо большое о пакете памятный приз до оглянитесь вокруг просто владимир хотел выступать в пустом зале нет мы хотели выгнать выгнать этих трех человек которые сюда пришли первые и все и спокойно заниматься своими делами надо поработать пришел на конференцию пожалуйста добрый день меня зовут алексей можно отмотать на слайд который был от круг с разработкой проектированием и стрелочками конечно стрелочки это наше все вообще вот вот этот или вот этот следующий вот этот не трожьте но не на там многих стрелок не хватает там новым умерли карат короткий вопрос давайте когда нам все-таки идти по красные стрелочки и на долей в тот момент когда мы хотим зажечь текущий проект до загадаем это значит с концом все ну это не с концом вы не можете просто взять магомед прийти в дата-центры на женщина физически это значит что должна произойти должно произойти транзишен должен появиться новый проект с новой архитектурой с новым видением который будет потихонечку принимать на себя трафик это нормальная эволюционная система революции вам никто сделать не даст хорошо тогда следующее это путь нужно понимать что это очень дорого это просто боль поэтому должен был спросить как тогда это бьется с масштабированием вот который показывали на следующие слайдах если его не заложили если не заложили шарды очень просто есть эволюционный подход он не предполагает отсутствие масштабирования вы даже в текущем проекте у нас тут есть примеры в текущем проекте можете перейти от данных которые лежат в одном месте на шарды просто это нужно подготовить это да этот это сложный процесс и чем больше нагрузка тем процесс сложнее но он тоже делаем может и чем раньше вы его начнете делать тем проще вам будет ну то есть это зелененькая стрелочкам разработка это зелененькая стрелочка в разработку да то есть мы ничего но в действительности это как бы красная стрелочка в проектировании потому что мы но мы проектируем не систему заново а мы проектируем часть системы то есть у нас логика система остается а система хранения меняется и уровень хранения меняется по и сюда тоже дорого и долго но но мы не сжигай проект хотя здравствуйте меня зовут александр у меня вот такой вопрос на одном из последних слайдов у вас есть рекомендации самого начала разработки все масштабировать ну или точнее предполагать в архитектуре системе масштабирования но надо понимать что ну допустим как делается в небольших стартапах вперед один разработчик он скачивает какой-нибудь пример из интернета состав cover flow запускает его и и это все работает а примеров на масштабирование там как правило нет и требуется уже наверное ни один разработчик а там три то есть здесь трейдов всегда между ценой на железо и ценой на на разработку масштабируемой системы с самого начала да то есть мы начали разрабатывать масштабируемую систему год делали через год получили им биби и не стартанули прекрасный вопрос вы же понимаете что мы живем в реальном мире и никто не будет странно если разработчик например студент который хочет сделать стартап будет думать так а вот если у нас будет миллиард пользователей то есть безусловно есть определенные критерии я поэтому там написал какую-то такую магическую цифру который на которую не надо в действительности ориентироваться в полтора терабайта когда мы точно уже пора когда мы точно должны уже думать о масштабировании дано системы к этому моменту уже спроектирована и мы начинаем идти по красной стрелке до потому что нам нужно очень много времени потратить на аналитику того как мы работаем с данными так как как мы эти данные будем трансформировать как мы будем трансформировать обращение к этим данным то есть довольно довольно такой большой процент мы не сжигаем продукт на предыдущем вопросе у нас была дискуссия мы оставляем логику продукта но мы меняем обращение к системе хранения данных я понял спасибо большое да меня роман зовут спасибо за доклад работаю в банковском айти вопрос такой и в банках есть большие системы на базах данных получается и база данных они не очень хорошо большие такие масштабируются начиная от того что закупка железа для масштабирования это очень плохая история как бы виртуалке не все любят и облака в банках конкретно до заканчивая тем что реально архитектурно планирует изначально системы так что есть там большие объемы данные большие таблицы в которых все ходят соответственно возникает какие-то конфликты в блокировки им stabber мы здесь было плохо применяется есть какие-то у вас примеры кейсов помощь лоббированию в таких случаях когда вот подобрались и все я к своему счастью к с серьезными такими банками не работал с вот этими серьезными системе двараку в котором все очень за регулирована поэтому здесь вот если кто то есть давайте после после доклада встретимся расскажите как это может быть может быть сделано я работаю системой которая сильно гибче и мне просто везет спасибо еще вопрос уходим уходим уходим великолепно спасибо большая видимо все остальное шепотом в кулуарах спасибо что пришли до друзья не стесняйтесь спикера хватать и разговаривать"
}