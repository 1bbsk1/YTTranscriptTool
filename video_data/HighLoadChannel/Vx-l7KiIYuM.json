{
  "video_id": "Vx-l7KiIYuM",
  "channel": "HighLoadChannel",
  "title": "Кое-что о вероятностных структурах данных / Павел Айткулов (piano.io)",
  "views": 1022,
  "duration": 2453,
  "published": "2020-04-14T11:07:05-07:00",
  "text": "аккорд к себя я позиционирует себя как дат инженеров я очень люблю скалу функция программирования вот такое разумное функционировали которое как бы монада не существует они полезны но не стоит их использовать везде где можно но там что пару хобби чем я занимаюсь какие-то числа об этом так чего не будет в этом докладе вот не будет жесткого теоретического петра сальса каких-то там скит листов структур данных который внутри как бы использовать вероятности но мы пока что такое рассказывать то есть страшных еще не будет но вот будет те грязные структур данных которые позволяют нам экономить по памяти мы подождали что данных у нас много что это десятков миллионов сотен миллионов может быть миллиард или даже без какой-то бесконечный стрим в то же самое время мы храним какой-то ограничены объема памяти но чтобы так что что-то как-то это использовать то есть это либо констант на память либо какой-то костанае количество бит на элемент либо еще что то раз у данных у нас очень много то мы пытаемся мы говорю что наши задачи очень ограниченная то есть мы не можем взять наше общение и чуть-чуть оптимизируйте получить что-то вот совершенно другой у нас совсем шатре ваших права мы уже не можем чего делать будет совсем как это базовый коммерсант двусмысленно дети понимаете что теоретически касается от базового чем отличается ну ладно это неважно и такой школьный и студенческий уровень теория реальности а вот план маршруте норовите лета я хочу сказать три структур данных маскате алгоритма и как-то использовать в жизни вот надо сказать предупреждение что ну если ревности то это уже как-то что-то не надежно смысле что вот есть такое определение надежности что когда ушел программу ставит на верную технику а вы в этот момент спите спокойно что если вы работаете в какой-то банковской сфере и каждый миллион их запрос будет это чаще что-то неправильно ну как бы этом нормас уволиться банка или там мы тоже каждый милиарный запрос кто-то умирает в результате ваших действий это тоже никуда не годится в наше время анод совсем что голову лучший меч голову медь лучше на плечах если бы работу в какой-то мешок конторе типа там корпорации oracle или берем тут благословить что я не соответственно здесь рассказано компании несет ответственности за то чтобы это чтобы голова была его бы ею пользовались что такое первое замечание что нам не всегда нужно иметь абсолютно точные значения в каких-то больших системах что вот количество просмотров на ю тубе она вот здесь ограничено сусле что мы покажем что это 3,4 миллиарда просмотров можно ну возможно не где то есть что вы там столько то миллионов там 506 2716 но простота с тем угощая распределенная то даже никто не знает в какой конкретный момент что происходит это очень сложно ну вот сейчас говорят что dice позитано переместить возможно на первом году что там 6 4 миллиарда просмотров вот и даже если вы президент крупной страны по вам все равно показывают какие-то ограниченные числа что совсем точно нам но на бесполезность . бизнес вампиров значимый прилавок с точки зрения как задача это всего лишь считать количество уникальных элементов каком-то да да сайте если ciklum выразить этот стандарт select distinct еще раз объемы что у нас они очень большие если у нас объем ебальники то но это классическое значимую потому что эти поймите все положения взяли секс в попу спросили бы количество это как бы не интересно но допустим что можно использовать какие-то внутренности базы данных допустим если бы мы знали распределение наших данных и в какой-то момент видели что что-то происходит нехорошая нужно производить ребаланс или три практических данных то вот нам достаточно иметь приблизительное значение candy стинг то есть такой плюс минус несколько процентов он он достаточно рассмотрим такой есть некоторый идеальный мир что но у нас есть набор объектов и будем смотреть и хэши от этих объектов но хочу от нуля до единицы в довольстве и будем смотреть именем минимальное значение хэша вот на этих четырех объектах этот из головы выдумал числа что в данном случае встретить число вот 0.68 она более вред на чем встретить какой-то очень там миллиарды неверные долли чисел на на этом маленьком do the city если бы увидели ну реально одну миллиардную тоже что-то как-то это вот это невероятно ну дайте вот там внутри используется шарден то есть мы внутри алгоритма мы бьем на под потоки начинки и для не считаем вот что вы можете сказать про предназначение то есть это минимальное трение хэша нам нашим допросить его там у кого-то там одна миллионная то есть примерно грубо можно оценить что здесь у нас примерно 1 миллион объектов но парят порядка миллиона что это не 10 лет или 10 12 вот вот у меня такая версия что вот рассмотрим уже на два шага на два потока то вот здесь как бы хочется верить что наши шары они должны быть более менее минимален общения шейн они должны быть примерно одинаковые здесь уже возникает некое подозрение что ну вот в первом получается у нас слишком одни к значение чем во втором то здесь есть что-то подозрительное давайте разберем на 4 вот здесь допустим значение где от 03 она очень сильно выбивается и это совсем-совсем очень сильно подозрительно что что же происходит здесь вот совсем по никам вот внутри алгоритма просто мы бьем наши все данные на какие-то подпадать и считаем для них минимальная не ха-шана каждом ну вот этому по цене под потоки и с помощью какой-то математики которая в статье описана там буквально один атом кода который позволяет нам оценить количество легальных объектов вот в этих данных ну то есть вот такой двойной переход сначала мы пытались искать минимальных ешь но давайте будем считать как в биткойне считайте количество нулей в префиксе минимального хаша мы переходим от облав уже к этому к префикс улизнули но и там уже можно еще сэкономить в том смысле что вот это значение префиксы из нулей это всего лишь укладывается в какое-то заданное количество медиков есть у нас 64 битный бит то собственно достаточно нам всего лишь 6 битов на хранение вот этого значения то есть мы перешли от минимальное значения х шаг максимальному префиксу из из нулей и с помощью нехитрой математики вот к сожалению но смысле вот это прямо это из статьи взята от 135 это но не номер такие-то в сборнике то есть это страница 7 8 я обещал ничего сложного не будет поэтому ну скажу что что кстати можете стоит считать ну это вот вот эта боль я вот на это смотрю с таким же выражением лица смысле что я посмотрел я не очень много чем понял там за но не делайте так в общем вот такой что мы здесь ничего не менее мы просто посчитали и получили количество нулей префиксе вот для числа которого обычно видео пистолетом достаточно хранить просто число 5 в этом достаточно а внутри авторы запускали на разных на разных данных они получили наборных неких магических констант которые спали смотри алгоритмы вот вот эта вещь используется ну практически во многих о чем базах данных распределенных нераспределенных там просто используя синтаксис довольно смысле что мы явно видим что наша функция она какая-то ну что вот она считает привези на количество вот там с точки закрепите что чтобы оценить ну что вот гипер loc-dog это способ оценить количество уникальных на кого-то точность это многомерных объемах вот как это если бы мы это делали честно все какой-то базе данных без без использования то как бы это можно было делать мы выбрали наши данные каширу либо их за заданный диапазон решаемые подправляли седана на определенную ногу там бы вот это надо отвечала бы за этот диапазон она начинала честно количество этих объектов и обратно на тарелку данного результата мы сложили в этом случае нам нужно прочитать седана я обязательно их передайте повысить и все полностью вот если пользователь прилавок то каждая независимо но да может у себя просто про прогнать ну прочитать локально все посчитать гипер лопнув который занимает вот реально там несколько килобайт данных вот эти там уже кинуть то есть место перегона терабайтов вам нужно передать будет в итоге ну какие то единицы килобайт и все будет хорошо а ну тут оценки такие есть что вот от авторов смысле что если мы разобьем на там на тысячу стримов 2004 стрима нам потребуется всего лишь из 40 байт данных и получим стандартно шикунов 3 процента но это если кто не помнит что такое вот 7 тогда лет вот который коу коу сян у нас там нет 3 секунд слева справа вот это есть задай эра которого одна вот можно использовать до 200 остатоков номера можно еще больше но если что вот и если мы будем использовать 2 в 16 под от потоков то нам потребовались шторы килобайта его там будет какая-то более лучше точность так вот в итоге что мы задаем в конструкторе сколько нам нужно вот этих шагов это очень занимает очень мало памяти и мы приблизительно считаем количество лимонов но приблизительно существам один два три четыре пять процентов нужно ли это где-то простых жизни ну это вот я немножко говорил про для баз данных я вот лично сам не программист баз данных поэтому возможно вы тут есть если такие люди ну далека вы уже знаете это потому что вы что-то вашей жизни где бы это можно было использовать и еще вот я вот такой пример для себя обычный потому что есть у вас какое-то сетевое оборудование вы хотите считать количество уникальных каких-то там значений типа источник приемник попыток соединения вот здесь у нас ограничение что наша железяка она ограничена очень по памяти там очень много всяких соединений собственно объектов элементов сотни тысяч пакетов в секунду возможных мыслей в течение суток это же нормально миллиарда вот здесь как это можно еще использовать то есть вот у нас есть наш бесконечный stream и мы можем создавать гипер лак лак как каждый гидроблока ждать пять минут и который живет в течение 30 минут и если мы увидим что значение в новом гидрологи отличается от среднего значения по больницам смысле что значит что-то там нет ни хорошее происходит это уже какой то признак ну что сейчас все они хорошо если вы работаете в крупных компаниях типа фейсбук apple amazon и netflix google тонн или к там тоже на реальность куча задач который можно решать но надо думать следующая задача это блин фильтр блюм это фамилия вот он изобрел его 70-е годы по моему вот такая задача что сначала абстрактном смысле вот у нас есть мобильный телефон ну давай мобильный телефон на него поступает входящий звонок нужно проверить это прямо на самом телефоне что это спам звонок или нет то есть мы не хотим вот момент ходить куда-то в интернет в какие-то там другие источники данных вот прямо телефон считаем что она старый несовременно если какой-то совсем урезанный вот новый тут синим если вина видели на смысле что то это я пытаюсь сказать что наш мобиль телефон это абстракция что это может быть и база данных или к эта система который приходит какой-то запрос и входящий request она хочет сделать что-то там еще но не хочет делать его тяжелого мы пытаемся сэкономить что мы можем держать это где-то у себя близко где-то в памяти чем дальше потом делает чтении диска или хождение но там длительно вычисления часовые вот то есть здесь в этой задаче мы всего лишь отвечаем на вопрос только да и и нет и ни на какие больше мы не отвечаем если бы - это все влазил в память мы могли бы хранить это просто где-то в хэш-таблица мы могли бы там перечислять все объекты могли бы понять в campo редко не пришли вот в этом у нас ничего нет но когда у нас объем большие просто много чего нет а кто тогда сказала уже так давайте немножко на разогрев если не за ту прошло 11 минут чтобы все не уснули уже такая задача смысле попрошу приносят подумать секунд 30 минут и вот у нас есть задача что есть каждый бл-10 слотами мы туда оставляем 3 элемента с какой вероятность возникнут коллизии ну прямо нужно в у меня посчитать можно бумажки вот по снять что такой вот сверху мы случайным образом строили три элемента они не пересеклись снизу вставляли не случайно она пришла к лизе вот нужно это посчитать ну прямо не знаю давайте время засекаем я можно подумать короче на потом мне это часики тикают я могу сказать как я бегу марафон это тоже на за это время ты так бежишь бежишь и там бежишь бежишь бежишь бежишь от lg g штамм этом потом табличка такая 1 километров и осталось еще 41 и вот в это время занимаем вас еще секунд 30 ну а прямо прямо сказать потом почитать там получается конкретное число вот это да молодцы спасибо вот это да давайте вот легко видеть что единица это неправильно ответном смысле но все обычно принято начинать вот что где когда то же если что ответить пиши пушкам вот здесь говорят что лучшая часть единицам начнет смысле что первый ряд выставляем хоть куда безопасно вот мы втроем от выставляем на у нас одна ячейку занята то есть вагона 9,9 вот мы там уже потом следующая сама последние на смиренностью 80 еще куда доставляется хорошо но это еще не пройдет лет потому что нам нужно было задачу чтобы сколько же будет коллизия не тот случай когда все хорошо вероятность запомнить это единицы вычесть значение вот участвовать вот те люди которые сделали литва ментам в течении 20 секунд вы молодцы да я вам что-то нужно подарить так это штаммы задача что их по 20 дней рождений новость она просто на 10 элементах ну если кто знает это классическая сколько нужно взять людей чтобы как минимум пару людей возникло к видео днем рождения вот эта функция она растет как примерно вот так лайфхак это тоже проснулись что она растет как карнизом то есть если на интенсивном что читаете достачно взять куриное нужно малики как sentique но спасибо что пришли взять на интенсив от пола этот пример тоже там случае если бы мы где-то жили на плутоне и очень длинный год был бы это то самое такс это чтобы она очень близко но зачем все рассказывали смысле вот эти хэш-таблицы фильтров пересекаются вот в нашем идеальном мире предположим у нас есть такой что коллизии полностью отсутствует у нас есть бесконечная память такой машины тьюринга такая скажем так который вот совсем идеальная но под полом что она есть тогда бы мы всего лишь кормили где-то вот битовые флаг на это лете и тогда бы было все хорошо там буду человек - портирование где ты находишься чего бы тогда расскажите нет еще бесконечно он наш мир вот он сожалению и и не бесконечна и еще количество вообще-то мы не работает там идея в фильтр чтобы будем использовать сразу несколько функций то есть это вот мы добавим элемент здесь у меня есть биттеры какой-то set я туда ставлю сразу несколько значений от разных хэш хэш-функций то есть пошло не так считал их позиции туда поставил мы добавим следующий момент это на самом деле уже не важны я просто здесь показать что происходит вот здесь еще к лизе нет вот еще давлетова здесь возникли к лизе масти тех самых местах переписали на цвета говорю сейчас не смотрите просто мы где-то статике вот цитату совсем убрал станции чтоб чёрно-белая было что против вот их нету как же делать нам запрос на на эту штуку вот у нас есть уже посчитаны какой-то blue фильтр и мы проверяем как элемент снизу да вова а мы для него тоже считаем все вот эти значения хэш-функции и если во всех местах у нас стоят если то это наша структура данных говорит что скорее всего объект присутствует ну если хотите то есть нолик то это гарантирует что объекта никогда не было ну точно не было а там за счет к лизе может быть какие-то другие элементы понаставили вот эти единицы и поэтому возникает вот понятие fools посетив ну еще сразу замечу что из-за этой штуки из blue фильтр нельзя удалять потому что мы можем сидеть и другие гид и выставила то надо пояснить что the full позитив и вот этот confession и matrix конфи german tanks на русском к сожалению с летом какой-то слова кафе женатого и сомнительно после этого 2 дата санте солдата сатанистов и она стандартно известно вот есть четыре числа обычно это вот про позитив фолз негатив-позитив против сейчас чуть-чуть я скажу что это значит сейчас мы рассмотрим на понятием ну у нас есть какие-то числа и они что-то значит ну примите вот для какой-то приметам если они имеют разные значения понятие поэтому давать этот низкий тест вот мы получаем ну я тут написал что это значит если что наде анализ то что 140 человек от отваром и какой-то медицинский тест проверяющий наличие болезни 140 мы правильно определили что они больны 20 внутри чем у трояна прилично они не больны 113 наша наш то сказал что они больны но на самом деле они не больны ну как бы это осмысленный плохо что вы говорите что он болен а у меня вот он в панике что ему делать лечится чего-то вот еще есть вот эти восемь человек которые фолз негатив на самом деле ты сказал что они не больны они оказались больны это вот что вот эти восемь человек они такие счастливые ничего от не лечиться потому что не заболели умер и нужно следить а если бы мы искали нефть то вот эти штаммы числа в данном случае ну диагональ вообще там все то что мастер зовут 113 мы нефти попытались то есть наша вещь модель сказала что там нефть из ее не оказалось то есть мы бурили и потратили деньги а там нефти нет вот это плохо а вот в тех в 8 случаях нефть как бы есть но мы там даже ей ну а нам наши к этому модель наши деньги сказала что ее там нет ну как бы это не так страшно то есть вот здесь висят от примет области это все аккуратно нужно смотреть вот конкретно для объем фильтром и по построению это алгоритма получаем что собственник охранялся всегда будет равна нулю примат гарантирую то позитив мы находим ну все элементы который мы добавили мы всегда их найдем потому что как убитый в этих местах мы ставили мы их же спрашиваем поэтому все хорошо трудно это те элементы которые как бы который отсутствует вот мы чаще всего всегда будем говорить правду но вот совсем в заданной фон хвалить обшитые мы будем промахиваться то есть это вот примерно числа которые будут в реальности мы в итоге промахнемся порядка там 7-10 раз на вот этих объемах 6 миллионов запросов висельщик изо рта to the prompt немцы но на это у постели так вот тут уже можно без наркотиков здесь это станется с википедии просто здесь математика но если совсем посетить полчасика там с винишком там с пивом то ее можно понять ну там все по счетам уже смысле что как как все математика работает она не очень сложно уже такой курс университета хотя бы что такое число еды и вы понимаете его но там dance плюс вот если все посчитать то становится но не так все страшно то на хранение объекта нам потребуется всего лишь порядка там 10 бит на каждом вечные устроить ошибки важно пить что это всего лишь биты а не байты то есть вот что если нам нужно хоронить что-то с ошибкой 10 минут и это одна миллиардная нам потребуется порядка 30 бит замечу что 30 бит это все еще меньше чем 4 байта а это еще 4 размер указателя еще на dri-fit труда которая вот наши объекты но можно сказать любой объект он довольно толстый жирный дату в нем в любой строчечку любым а потом он занимает сразу же несколько десятков байт или там выше ну килобайта и и так далее внутренние представления это всего лишь у нас как мы увидели это бюджет то есть от всего лишь расставлены этапе текке поэтому нас нет никакого memory footprint то есть никаких лишних указатель у нас нет у нас кусок памяти 1 и больше ничего но как уже ранее сказал минусы что наша посылка значит только да нет еще у нас мы не можем честно удалять перечитать объекты но честно понятия частности на конечно так и относительно мы можем попробовать завести 2 блин фильтр который будет то есть первый который все было хорошо а на 2 мы будем спрашивать удаленные объекты то что там объект удаляем мы можем его туда поместить и тогда мы будем делать по запросу в 1 во второй вот ну тут тогда следующая задача что нельзя честно и удалите объект а потом его снова добавить но тут как бы снова решение мы можем зависеть уже три были фильтр из профессий их ну и так далее насколько вас рекурсии хватит но это уже какой то понятно и сразу думаете понятно вот как можно комбинировать есть у нас еще раз раз это внутри сегодня рецепт то мы можем легко и просто их не этом смысле складывайте пересекать то есть если нам нужно сделать два запроса для фильтры которые спросить если он и в том и в другом то это всего лишь логическое и и мы можем взять внутренние поставления бюджетов и сделать их логическое и примотано рецептах ну логически или то же самое присутствует ли он в одном или так вот в конце строчка это совсем у меня реальностью строчка это было с парком что каждый чанкс и и скажи лысенко я делал фильтр а потом и в конце видео сил в один вот это прямо кусок кода который который что-то показывать а есть еще ну какая такая задача что чисто по углю фильтру и по их распределению битов их количество понять сколько мы туда на добавляли но там тоже форму к тебе действия если что и тут мы можем встать и так вон то есть мы при создании blue фильтра мы задаем изначальное количество уникальных объектов которые мы планируем добавить и вот эту fools позитив ошибку который добыл занимаем порядка 10 точности там порядка 10 30 бит на элемент и отвечает на вопрос на вот это да нет присутствует во множестве тянет так как ещё можно это рассматривать если какие же еще в диспенсер для фильтра там нам нужно какое-то урезанная киева или хранилище значение кнут ключ-значение если у нас вот этих значений не так много то мы вправе завести на каждое значение отдельный блин фильтр и тогда спросить все их какой были фильтр ответил тогда мы и говорим что вот это у нас значение для для заданного ключа вот тут надо учитывать что наша ошибка немножко меняется чтобы как бы штатов в порядках 10 раз мы можем что где-то привкусом относительно первоначально вот если же у нас множество значений больше чем как бы вы спрашиваете уже там тысячу уже как-то и неэффективной глупо но можно попробовать организовать на них дерево вот какой такой страшный смысле что мы начинаем с корня спрашивать в какой же потерю нам идти и спускаемся в него и там за какой-то лагерь операции мы поймем какое же о назначении то все можно но там много технической работы как это все контролировать размер ошибок размер для фильтров это вот отдельно задачи так вот давайте рассмотрим задачу про было что нам приходит звонок на телефон но в данном случае мы хотим вообще избежать потерь смысле на фунт посетив то есть сделать прямо сто процентов вероятности но телефон он такой довольно длинный смысле что это не 32 что уже довольно ну-ка это строчка ли там какой-то такой объект что давайте заведем тоже на это блин фильтр какой-то но у нас есть возможность при процессов и пробежаться по списку всех номеров всевозможных из посетить наш blue фильтр входит ли вот этот фолз позитив и вот эти все данные мы возьмем и выпишем куда-то сбоку как как сет как данная и тогда мы просто спрашиваем наш основной график и испрашиваем еще сбоку маленький объем данных который говорит ну промокнуть или нет это будет вот совсем без потери ну чисто теории есть сжатие с потерями это вот здесь мы за счет такого в возможности пробежаться по всему пространству данных мы этой избегаем конечно с точки зрения там теории мы не выиграем по поймите с подъемом потому что он как бы есть лирически предел которого не сбежите вот на таких маленьких объемах как телефоны номера ей там реально телефон то там есть реально много разных решений я тоже показываю самый день так вот руку люди просто кто знает что такое вот трой набор цифр а у дерева окей классно хорошо ну вот те кто если что не знает то я попрошу мозг на пару слайдов и потому что сейчас будет немножко больно возможно в общем есть такая штука называется но у немножко определение она позволяет сохранить нам из слова в 1-ну использоваться в обработке языков разных видов кроме хранения причину смысле можно искать значение с опечатками и другие разные здесь у нас содержится слова вот же сян сян сян сян сян сон и song samsung черное это признак конце слова белая это внутренний узел вот и мы за счет такой организации этого сохраним анод время что ключи крутится то есть ключ от а ну полноценно стала она будет черном внутри но она является какие-то префиксом над слова ключица который тоже в конце чёрно вот пальчики это реализуется как у нас каждый узел дерева но это дерево да как видно на картинке а каждый узел дерева это какой-то объект тег и в нем внутреннего хранятся как этом апа в dictionaries следующая символа в следующие узлы и нам еще нужно хранить linux слова там еще что то вот это уже тяжелый объект тег он реально будет занимать уже там 30-40 но счастливые выше байт вот а с точки зрения интерфейса нам хочется ну давайте все таки хвастаемся нам хочется всего лишь как бы две-три вещи нам хочется знать что какой-то префикс валиден что какая-то строка является полностью был полноценным словом и и иметь возможность переходить на следующие уровни вот первые две двери вещи которые сказал что какой-то префиксы что является префиксом нет опунция на слова это всего лишь тоже ответ да или нет и вот эти вещи как раз можно вынести в нем фильтр за счет это мы получим ну экономию по памяти то есть то есть вместо хранения нескольких там десятков байт мы получим всего лишь порядка там сколько-то 10 20 30 бит на хранение одного узла ну это вот это возможно тяжело было спину ладно пусть суммарно + фильтры используются но практически в любом к шее или базы данных вы там какую не возьмете его сероватое и найдете а просто проще похоронить будем фильтр памяти проверить что у нас все хорошо и если что-то не хорошо-то как раз сделайте длительная но в смысле чтение с диска или кита расчета вот так всякий чуть потом скажу да тут осталось 3 задача это называется cold не скетч эта штука которая позволяет нам считать количество сколько раз объект встречался в каком-то дата сети данном случае объекты какой-то нам приходит н он не фиксированный . как параметр как аргумент ну там идея о чем родственны блин фильтром смысле это расширение что мы берем используем уже тоже в несколько хэш-функций но храним небитый а то есть не логически значения храним количество у нас есть вот прям года матрица где мы расставляем + 1 оба этих значения то есть у нас пошел на объект мы прочитали хэш-функции соответствующих элементов матрицы мы сделали эти плюс 1 и так далее как же нам считать количество вот тут давайте секунд пять можно подумать как как нужно писать я вот в красно выделила те места где вот эти хэш-функции как можно за несколько раз алина встречался ну да вот и зал и слышу говорит о наследстве прочитать названия название структур данных называется аккаунт минский вот посчитай минимум равно счастливо до поэтому мы просто берем минимум из этих значений и она вот если отражает и если вы хотите не было и все такое но это было бы совсем точно но за счет к лизе мы можем так где то где-то обманываться вот и получается такие вещи так тут есть проблема перекоса что если вот у нас еще 0 и здесь есть но если бы наши мы туда сюда более добавляли бесконечно у нас все бы элементы матрицы уже бы там были ненулевые больше но мы изначально стартовать у нас только матрицы вот когда мы потом спрашивали мин которого точно не было то наш был grid вот этот минимум минимум из чисел больше 0 он как минимум число от рабочей 0 я сама он бы говорил что элемент это образом присутствует но мы же вы там не добавляли за счет некоторые проблемы есть но она там тоже технически решается внутри но это надо понимать что что что то есть еще раз да наше внутреннее представление это еще раз эта матрица из целых чисел мы можем вот эти два представления просто братья складывать это всё лишь нужно сложить поэлементно сложить вот эти внутренние мотивы из чисел внезапно здесь же еще можно и вычитать если у нас есть один дата скетчей есть британских и мы уверены что 1 является потому что другого что не демон в 30 числа не уходим самым также можем по лимитам вычесть у нас останется матрас из полученных чисел и как все хорошо это это честно законы операция вот в алгоритмах точнее в описании там задается всего лишь двумя параметрами есть разные вещи можно задать при мамадышского вы хотите но можно задать там относительной погрешностью и уровень уверенности и мы получим получим вот размеры такой матрицы которые будут внутри использовался вот в общем и такого сейчас мы научились считать еще и количество то есть вот задавать такой конструктор с автором занимать фиксирую память и вот мы считаем вероятность на количество хождения какого-то элемента давайте как это еще можно а ну тут такая такой это правда что это совпадение все чтобы зимы это также не стал автором смысле что компаунд мин и это вот и ответ такой probably что вот у них кормов и вот эта фамилия на м большая длинная по сути вот они не за как они выиграли ну наверно я думаю все таки к аккаунту тоже хорошо ложится они могли в названии статьи конечно поменяться ну так совпало так давайте посмотрим некоторые уже мысли все структур данных смотрели алгоритмы . таимся как-то это использовать в жизни на практике для хранения лайков ну предположим что у нас какой-то там очень большой круто сервис уровня youtube а что количество пользователи количество видео нас порядка миллиарда вот ну хранителями лайки это не проблема так счастлива если у вас видео занимает а мне какой-то гигабайт это на хранение четырех байтов 8 байтов и да как бы не шло им на количество а есть проблема накрутки что тот самый человек не имеет права лайкать и дважды трижды сколько раз он может быть зарегистрированным и поэтому нам всего в каком-то виде нужно ну вот у вас нет да просмотров и 100 миллионов лайков или видео на маленькой поэтому если мы будем чествовать это хранить это такой большой взрыв это дорога вот ну тогда like представляется всего лишь некой парой это индикаторах пользователя индикаторов этого объекта который что это видео или какой-то пост на мы можем всего лишь навести блин фильтр на факт like или dislike тогда та же самый человек уже мы уже провели он не имеет права лайкать во второй раз ну там есть собственно другие проблемы связаны с удалением его все такой конечной когда я как раз ждал это ее хранение ну классически кивал и сторож либо ну как же стал можно можно конечно теория коммунисте что это не является этом случае проблемой если наша еще объемы растут но смысле вот у нас была в один моментом 100 тыс пользователь потом стали миллиона миллиарда вот система растет и количество видео добавляются то можно ради типа вот по каким-то вещам то есть это делать отделенный blue фильтры на вот таки можно просверлить здесь еще всяких социальных всех было еще показывать что вот это видео или понравилось также вашим друзьям ну вот в данном как бы подходит нам кроме как пробежаться по списку и спросить прямо кто из ваших друзей la kill тут я ничего нового не прилагаю да но нужно еще отметить что в социальных сетях есть такое понятие как начал графа или естественно граф что для большого людей как мы тут в зале то количество друзей фолловеров вот эти всех а нового порядка 150 двести-триста то есть она среди она у всех одинаковая но и celebrity у которых там барак обама lady gaga и тогда ли у них миллионы фолловеров мира возможно друзей зависят системы вот и поэтому если вот какой-то барак обама водится куда-то на сайта ему мешает показываться там детям нагрузиться и вот эти 150 тысяч людей тоже лайкнули когда ему это мало интересна всем normal интересно давайте посмотрим следующую задачу так я назвал это право просмотра хранения просмотров ну такой аналитика что у нас есть какой-то типа доске объявлений блок сервис мы хотим видеть количество уникальных просмотров и разбивку по просмотрам за опушке времени они разных сейчас день неделя месяц и прочее и чтобы она как бы реально двигалась мысли чтоб там слишком много перечитывая надо было то есть всегда можно опять хранить абсолютно все просмотр где-то там делать сильные запросы но мы жадные к но давайте снова заведем блин фильтр на пару на факт просмотра дает получается диктатор пользователей индикатор вот это объекта смотрел ли он стал как конкретно объявление тем самым мы можем количество умников но то что вы как количество лайков данном случае мы вот это можем все держать но на разбивку по временам мы можем завести на каждый квант времени мы разбили наше вот наши дрожжи разбили на маленькие кусочки вот на самое предыдущем час каждый час мы имеем права сдвигаться на следующий то же самый день он складывается суммарно из из часов недели складывается из ней ну там месяц и прочим здесь можно использовать ту идею что out минске чем мы можем складывать и вычитать и это поддерживать скользящее окно на эти данные так что это такое у нас есть это месяце мы хотим но при пришел новый час мы хотим сдвинуться в данном случае мы меняем всего лишь от этого переходим к этому у нас есть очень большая часть и всего лишь у нас есть один новый час только текущей есть сейчас который был очень давно и нам достаточно всего лишь прибавить и новые значения и вычесть значение которое было давно вот и таким образом скользящим окном мы можем все это поддерживать и дешево и сердито от мужа близка к завершению давайте я вас мира джима скала java я недолюбливаю использу если вы начнете что-то google этого сразу выйдет глава это гугловской библиотека там тоже желательно в исходнике всегда смотрите что внутри происходит сейчас это же поясню вот есть танкист extremely он на джаве apache старк использует его и разные вещи очень легко битвы посмотреть на друид это большая лап система которая очень много что позволяет там прямо по документации вот эти ключевые слова искать смотреть то можно ну очень хорошо дать гуглите там очень много то есть вот рассказал про коуп беспечно на самом деле вот эти скетчи это целый класс алгоритмов которые для поддержки to hide media много что можно творить ну если вы то из каких-то других языков программирования просто ну добавляйте свои за к программированию поэтому это все еще стиле это не проблема вот если взять реализацию я полезно салоники спасибо стрим ли ты увидел что в внутренние представления колпинский чё там это массив лонгов прямоугольными массив логов но в моей задаче нужно было всего лишь ну порядка 50 миллионов 100 миллионов объектов положить я понимаю что вот на всю мою строчку вот эти мои 100 миллионов они будут раскиданы то есть значение значение в в каком-то конкретном щеки она не будет превышать ну там уж нам и 100 миллионов ну так значение она так то влазит в in win 32 который поэтому если мы заменим ломка на инт и тем самым у нас просто позволит сэкономить в раза памяти ну там не были объемы предка гигабайта но это там я не могу так просто раскидываем на этом много еще чего есть вот смотреть отраслевую просто почитать про кайтен фильтр это структур данных который похоже чем то на блюм она его посильнее из него можно удалять но чуть-чуть подороже все такое понять его можно наверное но я попытался у меня не получилось так же стоит отметить проводить реализацию стерилизацию смысле кровосос объекта маленькие там килобайты мегабайта в обычно не задумывайтесь вы можете прочитать диска массив байтов потом вызвать и стерилизатор и получить объект ваш какой то заметите схватка будет двоение утроение памяти если вы прочитали что-то получили у память массив байтов потом еще вызвали получили оригинальные объекта вот если вас ваш объект а он реально тяжелые уже гигабайты ну если там десятки гигабайт и вы будете тем самым дублировать то же самое память опана выкидывать новому можете где-то не пролезть просто нужно сразу аккуратно корабль диска читатели что-то вот это учитывать так еще можно подумать что вот с помощью этих технологий мы можем в принципе даже уместить какие-то вещи даже в браузере на куклу потому что ну 123 килобайта мы можем держать где-то там в браузере спасли на телефоне для каждого сайта и там гро говорят это какое-то понятие количество лайков или но смысле что балотелли лет а вот прям то положить не делать никаких запроса грубой силы вот она всегда работает всегда есть выступление вот мы тут взяли задачу нам бизнес позволил купить classic 1 станут еще машин мы ее сделали мы молодцы да ну вот с помощью этих вещей которые часто не верится что их можно решить буквально в одну две три ноты и там с учетом food allergy всего готова его что она грубая сила работает но она и стоит дорого всем спасибо я заплачу ну там не у меня сегодня такая функция смысле можете задать любые вопросы отвечу на них это же с вероятно спасибо за доклад я может пропустил какой-то момент как социальные сети используя блум фильтры фильтры для подсчета лайков гарантируют отсутствие фолз позитив ошибок так ну во первых я не могу conti ровать постояв они работу как они отработали для меня это тоже никто черный чик я не зна как работает в гугле или там в кататься и прочтите выскажется неприятно если мы скажем пользу что ну like науку это записи мы будем ошибаться это в одном не ляд нам случае то есть это то есть вы не знаете вот в реальном социальных сетях возможно такие ошибки я думаю я считаю что возможно потому что это не за всю вашу историю сколько вы посмотрите постов вы вряд ли посмотрите миллиарда против если будете смотреть соцсети круглосуточно непрерывно то в течение сколько лет один раз где то возможно вам покажут женой давать 0 спасибо еще вопросы хотя на этот вопрос это же мог бы сказать что вопрос хороший поэтому я не буду отвечать но главный вопрос по применению а есть интересные примеры применения таких фильтров более таких ответственных системах на пир ходовых систем и так далее ну тут надо быть специалистом я не могу ответить если надо знать конкретно системы то возможно что то слышал можем поговорить но лун фильтры применяются активно реализация гсм деревьев и соответственно и лосин деревьев написанные практически все базы данных нет они это чтобы делать дальше чтение на низких делась местам зерном и гарантированно ответим как нужно ну да лично мы используем где где на объемах порядка 100 миллионов пользователей и нам нужно такие же объем запросов день поэтому в неком смысле мы получим покажем человеку или покрытой рекламу ненужную но это вот 12 случай задней поэтому на но там бесполезно всем спасибо тогда выберите из двух вопросы какой бы лучшей и мы выручим ему приз ну давайте первым"
}