{
  "video_id": "diQ360bbUd0",
  "channel": "HighLoadChannel",
  "title": "HDD, SSD, RAM, RAID, и кого на ком кэшировать / Михаил Конюхов (Perfect Solutions)",
  "views": 1176,
  "duration": 2397,
  "published": "2017-04-22T14:48:19-07:00",
  "text": "вроде все подошли рок вечер меня зовут михаил занимаюсь система администрированием всяким разным вот на этот раз расскажу про систему ввода-вывода это не какие-то enterprise и системы это на основе обычного linux обычных серверов и что на этом всем можно сделать и по большей части о том где можно себе прострелить ногу очень неудобном многие так делают ну вот для примера будет описано некоторые классическая схема до имеется несколько hdd или ssd каких-то накопителей далее физика рейд какого-то уровня л.м. у кого есть у кого нет файловая система вот проблема всей этой конструкции ввода-вывода в линуксе вот их там три они описаны это такое распределенная набор багов по всем этим слоям при этом они не прозрачна то есть вот например довольно часто встречающуюся ситуацию что у нас есть сервер сам по себе он на этой машине все работают быстро ввод-вывод файловый быстрый ну вот мы найдем заводим виртуалку и это virtual очка начинает тупить тормозить по вводу выводу и вот как это все происходит такие пример сравнения двух схем по дефолту да не все одинаково кроме того что в одном варианте жд hdd в другом ssd вот в примере в нашем 5 рейд из трех винтов не особо вы быстро бесплатных фактически и создавших фактически десктопных mx-4 результат в которой а вот по дефолту без каких-либо там тюнингов да мы можем получить совершенно не большие числа в операциях ввода-вывода и то есть нам повезет небольшие числа мегабайтах на hdd на ssd мы получаем гораздо более интересно поэтому ну и это наверное есть причина почему очень часто выбирают а создать как быстрое решение нам до быстро мы возьмем его сейчас вообще что такое операций ввода-вывода это одна операция правильная в жесткий диск он в себе он имеет помимо механической части еще контроллеров которые умеют что-то делать собственно он может сделать за 1 в самым глупым простом варианте может за раз прочитать записать сектор может переместить головку ну все эти минимальные вещи сделку из полезного для нас он может один сектор 512 байт либо 4 килобайта прочитать записать вариант более умный он может сделать несколько н секторов прочитать записать и вот первая и вторая операция воду удар вот в этих примерах одного сектора или инспекторов может происходить за одинаковое время зависимости от того как мы будем этим всем пользоваться ну и третий вариант как бы совсем по уму когда мы за одну операцию выполняем несколько операций об их снах во второй строчке n на m это тоже одна операция но по времени она будет очень длинный но в любом случае это будет оптимальное чем поштучно писать эти сектора каждой отдельной операцией ну в общем то том что такое по уму и в чем разница в разных дисках вот на картиночке изображена два винта 1 там совсем маленькое количество головок у другого большое количество головок они с двух сторон глина расположены за один оборот hdd можно сочетать или прочитать один сектор одной головкой чем у нас их больше тем собственно мы можем больше провести одновременно вот по вот этой схеме второй пункт and секторов можем просчитать записать вот ну примерно такая разница которую мы можем получить просто из того что из геометрии наших винтов мы как бы наши сам важное число которому нас все должно быть кратно это количество наших головок вот сколько головок у нас есть у диска столько мы можем делать кратно ему блоки рейда можем кратно ему делать размер кластера файловой системы в конечном итоге вот тем что мы делаем эту кратность то есть у нас есть винты на допустим вот на этом примере за раз можем прочитать записать 6 секторов у нас большие сектора 4 килобайта и мы можем 24 24 24 килобайтами блоками работать клёвого здоровом и симметрично этому разведи рейд сделали блоки райда симметрично этому выше разбили f с правильными кластерами и вот у нас получилась хорошая вещь что минимальная операция ввода-вывода которые мы делаем что именно практическое чтения записи 2 4 килобайта за то же время за который мы могли бы по-глупому ну ничего не заморачиваясь ни о чем прочитать записать там 512 байт или просто 4 килобайта о чем это все о том что голод диски и их производительность любят мерить в и опусах любят мерить мегабайт в секунду во всем разным там в попугаях слонах ну практическая суть в том что нам нужно ну как бы результат вот с первую очередь нам нужно там в субботу нам нужны select insert и в вебе нам нужны какие-то запросы отдача статике да в том же у в любых приложениях есть свои метрики и вот именно не нам нужны можно мерить в обсох можно мерить мегабайтах от вашей задачи на как бы в эту игру про обе метрики и про и псы и про той и про мегабайта собственно способ как можно выиграть некоторые передаваемое место некоторые передавая медан объем передаваемых данных за одну операцию далее далее про рейда ну raider всем знакомый вещи есть мир и которые имеют свои преимущества не умеют правильно умные алгоритмы читать в два раза быстрее есть strife последовательно работающий которыми писать-читать два раза быстрее надо так некоторые водный момент 5 6 рейд может все знают и думу 6 если кто то не знает о то же самое что 5 но отдельный на отдельном диске пишется алгоритму пишется такая же контрольная сумма как ссор с пятым ради но по-другому алгоритму то есть мы имеем два резервных диска более интересный случай да вот часто часто употребляют wraith red 10 1001 вот интересно задача для собеседований кто поверх кого делать вот здесь нарисован raid 0 поверх 5 рейда для и резервирования и выигрыша скорости и если в пятом людей пользовался умным алгоритмам можно выигрывать скорость чтения но это все так вот некоторый вот случай жизни я его немножко более подробно разберу что было слева что стало было freja был юфс 2 там были довольно быстрые винты 10 карт оборот в секунду в пятом раунде проблему той всей конструкции была в том что там все было все криво криво разбита и ff2 имела свои и хитрые поведения в такой ситуации практически ничего не кашира вала в реальности что было на реальная нагрузочку которая там было 1200 abs на чтения показывал zabbix 140 на запись работала вроде как верхний потолок был 1500 временами упиралась ну нагрузка на это был сервер с базы на пол и раз было три тысячи select в секунду ну работала но уперлась вот или чуть схему решили переделать переделать по двум причинам первая община во-первых упирались вторая причина дорогие винты и не хотелось масштабировать покупать далее следующий сервер в теме 10 тысяч никами такие были условия собственно взяли linux x4 дешевые винты 7 и 5 к оборотов в секунду в точно такой же 5 рейд но правильно красиво разбили взяли x4 и все у него прекрасная работа с кашами вот данные которые здесь написано пуля до 40 и abs да это реальная нагрузка не верхний потолок на верхний потолок он как бы стал ниже чем был вот это реально нагрузочку почему из 1200 abs of превратилась в 40 ну во первых потому что большая часть данных на находился выше постоянно качай файловой системы в кафе блочного устройства и ну просто не требовался где-то делал постоянно пересчитывать вторых чтений которые происходили происходили большими кусками в субботу в первую очередь там нам нужно иметь определенные горячие данные с которыми работает пользователь и сейчас его имейте их было постоянно игрушка на запись ну собственно обновления до лета insert которые летели они все падали на диске вот тоже создавали свой свою небольшую нагрузку на чтение на запись со временем в базе выросла нагрузка с 3000 до 6000 select of в секунду ну она работала и работает предел который может быть здесь достигнут вот тут очень тонко игра здесь во-первых можно поменять структуру базы и упереться во вторых можно поменять вариант запросов ну начать делать запросы чуть по-другому это же упереться можно упереться в количество все сколов но вообще вот это все это пример вертикального масштабирования про язвительности ввода-вывода поэта хочу сказать такую вещь что нужно всегда иметь и горизонтальное масштабирование вертикальным можно все себе оптимизировать улучшать и улучшать но в один момент трудами разработчиков там кривым select ам или как то еще все испортите она работает пока вот она стоит но в принципе это можно добиться и как бы на даже более дешевом железе получать большую производительность если вдумчиво подходить ко всей вот этой структуре islay о насте собственно между примером было и стало ключевая разница именно в симметричности разбиения и собственно смене файловой системы по поводу кэширования вообще есть более глубокие соображения как бы память отличная вещь для каширования на чтения на запись всем всегда страшному в современных судах вроде питания не отключается каждый день но тем не менее она может отключаться пропадать и данные будут потеряны люди часто копируют вот на ssd в чем есть проблема каширования я создаю и вообще проблемы кэширование записи при проблемы кэширование записи вот в памяти когда кэширует записи об этом думаю это вот на и создать почему-то иногда не думает происходит печальнее момент поставили к тому же пятому разу услышишь какие-нибудь там 256 гигабайт 250 она есть работает но когда это все делали не считали нагрузку и оказывалось такая штука что ssd она не успевает падать на рейд и в конечном итоге созда кончается но и в этот момент как бы на увлеченные анальгином воспаление легких становится крупным и смерти сервера то есть заканчивается производительность и как и создает забивает все становится скоростью райда по поводу вообще с точки зрения софта с точки зрения все вот есть два подхода один подход чисто как бы сисадмин ский там мой замок не может ничего делать да там и там берем и поднимаем потолок наших возможностей поднимаем верхнюю планку того что мы вепсов вы могли выжить полторы тысячи теперь можем 2 500 выжить но можно там рай даме raid 0 поверх ведь 5 этого на играть довольно хитро и получится много можно на каждой выжимать хорошей скорости на больших рейдах сложно встроенных неплохие как бы не не хуже чем на там на 1 2 ssd но хочется немножко тоже другом сказать о том что нужно снижать реально используемые операции то есть вот с одной стороны верхний потолок поднимать это хорошо с другой стороны лучше писать свой код лучше пользоваться буферами и пижаме и с это вот как раз предыдущий пример где вот она и была использована просто реально использование то есть приложение не поменялось на поменялось просто немножко нас троечка и в итоге произошел выигрыш нужно немножко немножко усилий и она заработает наверное все если даже наверное есть какие то вопросы задайте их я обязательно тысяч просто докладе короткий вышел очень быстро я очень очень просили его ужать изначально он был на полтора часа я буду надеяться на ваши вопросы я отвечу на много-много у кого-то knob это ну давайте вот так вот русские русскими словами скажем это имеется ввиду размер блока рейда который он производит вот вывод смотрите давайте я верну к этому слайду к слайду слайдов слайдов слайду вот этому 24 килобайты то имейте ввиду то что он одновременно запишут на один винт вот я скажу русскими словами потому что в во-первых у у железных рейдов в разных вендоров есть немножко разный терминология она отличается софтовый поэтому поэтому по-русски вот смотрите допустим мы узнаем что 24 килобайты можем записать прочитать сразу да как вы сможете давайте у нас будет на 5 рейд для простоты что мы можем собственно с этим сделать да вот мы можем за раз почитать пописать 2 4 килобайта 5 хотите или 5 лет собственно можно вернуться к тому как устроен алгоритм 5 рейда на один диск пишутся данные а на другой пишутся данные b на 3 к 45 рода соответственно есть такая штука что пока он не опустят данный на оба диска ссор и этот он не завершит свою работу соответственно в этой ситуации что мы имеем 2424 и здесь к сор из них чанг имеете ввиду именно мдд маски чанг ну если говорить о подаем с камчатки можно использовать именно вот эту величину 24 килобайт или красную ей больше но вот по дефолту в эндодерме когда-то были большие чанки 65535 вот это очень-очень и оптимально потому что и свои используя использовать шибко больше чем может диск получается уже плохо то лучше взять минимальное но вот собственно кратное вот этом то есть она но это скорее не строение фиба езды и linux суда это скорее сравнение конструкций все правильно да да да да но вот собственно это и было поясню момент вот собственно 140 abs на запись смотрите это я немножко поясню это нет писались одни и те же вещи поясню вот это рабство намерены и не попадающие в уровень файловой системы опускающийся на диск если будем смотреть что был на уровне файловой системы у нас будет одни и те же 140 x 4 как известно умеет буфере завывать до данные я пускать их за меньшее число операций вот это с одной стороны большое спасение от 60 в сторону 140 в сторону 60 ну и соответственно это привело к тому что не изменились не изменялись метаданные не падал кэш собственно ситуацию такой можно было выразить на free bsd нфс 2 легко и как бы это не не какая-то болезнь geforce2 ника это более freebie есть эта болезнь той системы которая была сделана и у нее да у нее одна из основных причин на самом деле одна из основных причин такого такого поведения да кабы то что в в райской шни работает нормально это именно кривая разбивка когда кривая разбивка она сносит башню планировщику и наступает проблема здравствуйте спасибо за доклад интересно хотя и коротко у меня знаете вопрос вот как вы относитесь к использованию пятых рядов продакшене отрицательно негативная поясню в один момент вот очень хорошо что сказали об этом вот raid 5 6 у них разница на самом деле вот давайте даже пойдем до этого я еще скажу как негативный отношусь к миру им в продакшене расширенный ответ мир в продакшене имеют одну классную проблему что мир после только пишет на два диска данные и данные а он не проверяет и не имеет неких механизмов проверить что он туда записал кроме механизма которые когда ему smart ответят чувак у меня стало плохо поэтому мир и имеют на большие нагрузки на запись если у диска сносят контроллер башню может записать одно сказать что я сделал все хорошо и вот наступает такая проблема мира на проводах этого троит 10 мирры и проще ну вот я эту ситуацию встретил буквально три года назад на винтах одного вендора было очень неприятно фан деле получить исторический я использовал 5 ряды до определенного момента тоже несколько лет назад в нем все хорошо в нем нет деградации произвольности до тех пор пока вылетишь винт не вставит назад вот это сама большая проблема которая исправлен фастов ну да вот я про сути тоже хотел сказать что самые super video production которые 6 если хочется наигрывать производительность объединять его вот я до этого я работал в процессинговой системе да то есть у нас вот тоже были 5 ираиды изначально до тех пор пока мы чуть не встали на грани аварии в почву скажем закон корпоративными правилам просто запретили в продакшене использовать которые я бы еще даже знать кое-что добавил по поводу использования мира в продакшене вот umirov есть алгоритмы я буду говорить про mdm linux вы про софт верно у него я не знаю сейчас остался ли старый алгоритм или нет ну вот буквально несколько лет назад был очень веселая штука что работал могло на работать на двум вариантам читать перед попеременно фуловый винта из другого либо с одного но и были некоторые или body когда режим чтение включался в чтении с одного винта независимо то вылетел 2 или нет вот этот момент с мировым тоже кстати очень очень неприятен коллеги разрешить или марку я у меня прям напугали немножечко вы серьезно проверяет 5 и 6 по разница только в скорости вы меня реально напугали сейчас вы понимаете что основная проблема рейда 5 5 даже не в этом а в том что вероятность выхода из строя смотреть какая ситуация у вас вылетел диск в рейде пятом на нас контроллер допустим аппаратное неважно есть такой показатель замечательной у диска через какое количество бит на чтение со стопроцентной вероятностью случится ошибка чтения вы знаете про этот показатель а теперь вы догадываетесь наверное что происходит когда вы меняете диск в рейде пятом вы вызываете полной чтение остальных трех винтов но там или скольки там у вас винтов есть нет ни в выводе бы говорить о том что он медленный когда он из-за того что мы выдернули вин вставили он медленно не не поэтому его нельзя использовать его нельзя использовать по одной простой причине что в дисков у современных объем рос в одну сторону то есть он увеличивался сильно а вот это значение вот этого показателя через сколько байт произойдет не восстановим а я ошибка чтения она стоит на месте у десктопных винтов она в принципе 10 в 14 у серверных обычно но я имею винтов серии там сторож была баба на 10 в 15 но при покупке многих систем про это просто не то что забывают на это даже не смотрят понимаете в итоге собирают промышленный массив raid 5 которые размером там условно на трех дисках там 4 дисках по 4 терабайта до 10 14 там наступит где-то на 10 ти работе помощи с памятник не изменяя взять два полных чтения поэтому вы меня просто прям до жути испугали поскольку raid5 там медленный то что в него винт обратно стояли понятие эту нагрузку контроллер может как-то регулировать сам да с какой скоростью ему восстанавливаться более того если мы говорим о raid 5 на большом массиве данных то общеизвестно что горячий объем данных обычно небольшой то есть вот этот вот момент что ему надо вот эту контрольную сумму посчитать налету он обычно она мизерная и как бы сильно нагрузки то не несет raid 5 нельзя использовать чисто потому что вероятность выхода винтов в момент recovery там очень велико и у многих массивы и на и диктат умирают и ментально семья даже немножко поправлю вот эту ремарку с одной стороны вот ошибка чтения возникающие да они разные бывают как вы сами знаете да есть рекавери балда можно перечитать вот именно вот сейчас я поглубже ножка расскажу река в рыбу ошибки при установлении 5 райда при рисинки происходит чаще от визита сказывается на скорость не только тем что те два винта читаем но мы их еще и не можем нормально нагрузку дать касательно анри камера был ошибок тут есть очень другая даже веселая штука которую отлавливали с опятами рейдами для того чтоб у синтез новый диск вставленной он нагружаете 2 и как бы ничего плохого когда диско 3 вот здесь очень классные шедевр если в пятом ради поставить 15 дисков в один сервер а потом удивиться что блоки питания эту мощность не смогли выдать боли более такой например жесткий пример с которой дом ну тоже случается есть у кого-то какие-то ещё вопросы смотрите у нас ну как братством фрегатом перестановка на linux это была не такая более более организационная задача да ну можно было бы все то же самое сделать на то и дело тоже с 2 до то есть не особо мучаясь правильно разбить ее заработал бы буфер на запись перестал бы сбрасывать по поводу flash кэша там тоже соответственно задача стояла в том что не нужно повышать стоимость нужно ее понижать и стоимость будущего масштабирования тоже и одной из важных важных вещей то что мы здесь заменили диски на более дешевые мы не стали докупать осознавших да то есть один одна из основных причин именно играться с тем что есть это не повышает стоимость конструкции вот кстати можно добавить про ssd интересная вещь по поводу надежности я создаю немножко я упустил и не рассказал хотя время есть давайте расскажу вот что все имеет всем известной проблемы до него ставим ее ошибки чтения там возможные проблемы записью проблемы с контроллерами но и создай вроде как не имеет в механике не имеют большинства проблем даже их можно в принципе кидать иль них перегрузкам горе устойчивы за что их ноутбуки созда и поставили но они нато в бухте стать что у них есть проблема им нужно нормально и стабильно и постоянное питание ssd если и создает чисто жестко резкой выключите из розетки то некоторые вендоры умудряются потом уже больше не залетать ssd это как бы один момент другой момент касательно надежности и создали и прочего не все файловые системы делают адекватные высоко на и создай вот это вот вопрос для меня самого на фланге одессе кто-нибудь знает почему fsck экстренно ssd меньше их меньше меньше вред нас восстановить все по по полу чем на hdd не знаю может быть кто-нибудь сможет даже и еще сказать что-то по этому поводу можно расширить а что простите восстановить смотрите запись на диск у верне не так в запись файловую систему являет собой три операции минимум там ой ноду блок положить на один жанр вот там там много интересного смотрите чтобы эти эти три операции я не могу сделать это марна и стрельба она одна не то есть одна может пройти не против смотрите поскольку их три в любой момент времени может так получиться что одна пройдет остальные 2 нет чтобы такого не было придумали журнал журнал ok а как бы нет аж так что конкретно что что конкретно восстановить понимаете основная задача файловой системы не восстановиться это как бы эта магия невозможно восстановить и с у меня из трех операция прошла одна задача чтобы у меня не было противоречивости чтобы мне система не говорила слушая этот блок записала а на самом деле нет с этим журнал справляется что не так что конкретно на ssd что карьере то на ssd всякие не делает что она может делать наш детей а вот конкретно очень интересно ситуации возникает именно вопрос о то все верно как бы хорошо расскажи про три операции до этого до этих трех операция честно пишется журнал и вот собственно в этом и наверное заключается момент моего непонимание почему на ssd и высоко чаще чаще делает им и надо пустой смотрите я вам какой x 3 x 4 4 работает идентичны и там и там знаете я я вряд ли могу вам сказать почему express x4 я на самом деле честно не там ну как сказать разница есть конечно не скачут прямо безумно капитале нет разницы единственное о чем может быть это в том что со временем ssd просто уходит больше времени на запись блока то есть по мере износа у них уходит больше времени на запись блока если контроллер работает неравномерное допуская то что какие-то блоки изнашиваются больше какие-то меньше вы получаете просто не первую скорость записи но и соответственно у вас больше вероятность того что из трех операции какая-то попадет там в медленный блок который как бы тяжело перезаписываться например как вариант но на мой взгляд тут как бы фиксики более того если у вас важные данные я думаю вы знаете да опция файловой системы сначала в журнал потом куда нибудь еще не отправляем ну я понимаю что вы получаете так деградацию по производительностью как говорится и лишь очередной вопрос не умели использовать вопрос жизненных ситуаций происходит спасибо смотрите есть вот вот этот вернувшись вот вот так вот этой картинке да почему считывать один сектор они целые дорожки целиком потому что у ну на что можно рассчитывать дату съесть диски которые заявляют что мы можем просчитать сколько там за оборот есть те кто этого не заявляют суть в чем даже если у диска заявлено чтение целой дорожки может провести такая штука что ой я сбился с разметки и мне нужно перри позиционироваться провернул холостой оборот но это проблем механики hdd надежно можно сочетать прочитать один сектор все остальное vendor зависимые вещи которые зачастую в конечном итоге счетчики смарте на количество ошибок чтений прочего ну то есть это то на что я бы не рассчитывал скажем так то есть есть я помог даже у меня в десктопе состоит в дашка которая которая на это способно 6 да вот там дальше было шесть число головок но да там написано что мы саратова крыши секторов иметь еду 6 6 головок то сектора находящиеся один тур рим 6 головок но у них номер одинаковый номер головки одинаковые номер головки разные номер сектор номер дорожки один и тот же но собственно вот эта штука которая вот если не прибегать к симметричном разбиение с одной стран сносит башню планировщику в том же линуксе и он начинает выстраивать очереди большие на чтение что нам нужно читать сейчас что потом но если соответственно развивать симметрично то и выше уже двигаться по симметричному разбиение файловой системе размер сектора это физический размер ну как бы иметь здесь вот это вен и the vendor на я величина именно от самого диска по стандарту исторически они 512 байт сейчас есть физическими размерами 4 4 килобайта у меня есть еще вопрос вот вы я здесь следует вот вы не рекомендовали ssd в качестве кэша нор количество информации но фактически стал что нужно думать про чем это делать да да и рекомендовали снижать вес допустим у нас есть приложение которое мы не можем его снизить например банальный торрент да нет урай который раздает который вас к чарам случайным образом по по винчестером двигает головкой и механический его изнашивает и тут мы ставим ssd вот там а поможет или нет качестве каша для чтения не для записи в качестве каша до зачисления созда конечно поможет ну именно использование ssd как как чтение с одной стороны это как бы клево здорово у вас сюда есть независимый от питания кэш с другой стороны быстрее использовать оперативную память если вы не заморачивайся питание если у вас есть рядышком резервный сервер от можно перезагрузить 100 лучше память на чтение но если у вас есть проблемы с тем что допустила сторон до вам после перезагрузки нужно иметь горячий кэш что и создан чтение прекрасно вот по поводу кстати вот мы не можем поменять в ситуации когда мы не можем менять приложение да она работает как как торент она много читает чуть-чуть пишет все по разным частям базы именно оптимизм суть оптимизации на уровне вот того что файлы система заработал так она должна работать а не поперек того то есть в принципе невозможно вот нет в этом плане невозможно от когда ваши как бы ваше количество вот уже оптимизировали сделали все и вот если вот эти 60 превратятся там в 2 500 но эти диски этого не выжмут вот это предел вот честно сказать лучше хуже сравнить как-то объективно не могу я использовал флешка счет facebook использовал его на запись использовал его на чтение ну так в качестве поэкспериментировать попробовать на запись ну скажем так тут оказалось что у тебя свои задачи не могу предсказать что у меня не будет такого гурста что вот он не кончится что владимир не вырастить нагрузка и не останется постоянной на чтение флешка ешь использовала было в принципе нормальный кроме некоторых моментов что можно рубануть сервов по питанию и после этого флешках destroy флешка в корее заново все то есть если создать потеряет данные по выключения питания каша у вас нету то есть слушаешь это не сохраняет и никакого там механизма восстановить как-то его нет только заново вопрос можно простить я с другой стороны вопрос следующее вы говорили про ряды из хдд а что бы вы посоветовали в качестве рада из ssd и как выбирать размер страйпа в этом случае смотрите у создается как бы у них ни у него к счастью нет такого как бы физического сектора до сектор у него логически существующей просто для работы операционной системы чтобы ей было привычней физические ограничения в m3s создана тоже сколько она за распишут читает часа на память не могу сказать да я может и давно очень интересовался ну я думаю что есть здравый предел размера данных которые можно прочитать записать по поводу рейдов рядов на ssd ну с целью резервирования здесь они ну как бы использовать мир тот же или там 5 рейд которым уже много сказано не очень было бы правильно то есть от чего резервироваться в случае ssd тем же мировым да но он ничего не сделает из нас рубанул в питании попортил особо диска если это 5 все то же самое мы портим тоже все диски 6 и все то же самое то есть но в резервирование здесь я думаю что вряд ли можно выиграть кроме как то кроме резервирования скажем на другой сервер да где другое отдельно электропитании резеро не блоков питания в сервере чтоб их было два в разные линии в разные в разные станции вот по поводу увеличения размера но собственно рыть последовательно stripe позволяет и выиграть скорость и нарастить размер вообще нарастить размер если не хочет выигрывать скорость можно поверх all weima смотрите-ка кто создает как вот по верху и создаем то же самое что л.м. поверх диска без рейдов цыси рассыпалась по все вот именно проблемой создав в том что мы внезапно выключаем сервер и вот как тех фрейд не собирай они все равно все четко теряют такой вопрос недавно с коллегами обсуждали тему сидел для бедных и вот как вам такая идея взять два сервака объединить харды в strike и выход любого сервера он совершенно никак не влияет на саму систему он закатывает закатывается заново там за 15 минут голову осень снова синхронизируется поднимается снова вопроса реальности 15 минут то есть если это реальные цифры смотрите другой стороны это имеет некоторые проблемы у вас два сервера да допустим работают они как cdn то есть когда они оба живы они распределяют между собой нагрузках работы только один то есть это корпус врагов ну а если работать только 1 2 живет просто рядышком как резерв до то при выходе из строя 1 включается в работу 2 в принципе 1 перри развернуть если это реальные 15 минут вашей схеме это не беда вот у нас она я делал тоже cdn для бедных вот там была другая проблема то что когда два сервера который одновременно работают богатой муль типов им туда проорал легонько распределяет весь интернет сюда и сюда нагрузочку между ними 50 на 50 определенными and1 сервак выходит устроена другой пролетает вся нагрузка то есть вот именно если машину на замену то хорошо а если 2 в работе то может не найти свой предел до выхода из строя ну да тут основная идея это максимально быстрое чтение с минимальными накладными расходами ну и с минимальными расходами на диски на железо на все но вообще по поводу производительности дисков да и объема сделать когда-то считал что но это сейчас к цифр актуальны и потому что цены на рынке на железо всяко не такую же тенденцию имеют дешевле покупать оперативную память и если у вас много чтения конечно это pero te vi чем быстрые диски то есть вот купить там несколько плашек оперативы больших в конечном итоге дешевле чем 15 к винты но почему потому что 15 винты это соответственно они маленькие не маленького место и другой форм-фактор другие платформы и вот оно всё собой тянет но если углубиться в архитектуру то это 20-то ровно соси и около шести в ssd ну и плюс там около 200 в оперативке но она просто как конечно же самому ну а ssd идет кэшем уделяем выход любого из компонента он сразу же выключается весь euromonitor убить за это переключается на рабочий по всем вопрос насколько это живая схемы то есть это пока вы только рассуждения ну как сказать живая и неживая да и то с одной стороны в принципе вот вопрос того будет и мониторинг выключать и включать другой в работу то есть если другой ну там два момента в первых лиц мониторинг увидел и это все отработал отработал самой резервирование и второй момент что сервер который стоит в запасе но потенциально живой а потом хотя бы знаем то мы периодически у кати тестируем то есть ну горячая замена как бы она она живая у нас тут на горячие замене работают сервера на хостинге есть вот машина которая на которой работают virtual очки там память цеху и прочее рядышком есть свободная машинка если это сдохла то хранилище внешне отдельно да то это сдохла здесь завели фиг бы вот запас главное увидеть что все сдохла сдохла реально не завести две копии вот все вот эти вытекающие вещи все просматривать то есть спасибо киева на большое спасибо спасибо друзья это все на сегодня там если еще еще не вышли были там пиво андре есть карамель я увидел спасибо что пришли приходите весной на рид приходите через год на high лот и пишите отзывы когда вас об этом попросит пожалуйста для нас это очень важно"
}