{
  "video_id": "B99qU_PwmeU",
  "channel": "HighLoadChannel",
  "title": "Эволюция распределенных атак в Интернете: 1994 — настоящее время / Георгий Тарасов (Qrator Labs)",
  "views": 2213,
  "duration": 3028,
  "published": "2023-04-28T06:20:17-07:00",
  "text": "а Итак ретроспектива продолжаем Приведите спинки кресел вертикальное положение мы летим в 94 год и обратно посмотрим Как развивались распределенные атаки на отказ в обслуживание за эти годы К чему они пришли Сейчас И на что есть смысл обратить свое внимание Но перед тем как мы поедем с места в карьер Я хочу вас спросить вот как вы думаете в чем можно померить видос атаку в каких юнитах ее можно измерить Какие есть варианты Я ведь в секунду отлично биты в секунду еще есть варианты запросы пакеты время Down Time количество машинок вот найти Отлично все эти ответы верные потому что это все таки бывают разных категорий и для каждой категории есть свои ключевые метрики рост этих ключевых метрик и является движущей силой для Революции где-то так Да если мы вспомним эволюцию в природе естественный процесс там есть движущие силы борьба за ресурсы наследование мутации естественный отбор вот Adidas А так есть своя эволюция и силы которые движут мы можем примерно для каждого класса вывести для широкополосных Атак которые генерирует очень много трафика Ключевая сила это рост канальной емкости у интернет-провайдеров сколько полосы мусорного трафика можно доставить до своей жертвы для Атак которые генерирует большое количество пакетов в секунду это в первую очередь сколько пакетов может обработать устройство амортизации где-то по дороге для прикладных Атак в которых стоимость генерации единиц атаки довольно дорогая это запросы в секунду как правило прикладной уровень очень важно сколько одна машинка в букете может сгенерировать запросы в секунду сколько одновременно открытых соединений она способна поддерживать течение выбранного времени также количество серверов в интернете которые могут быть проэксплуатированы для создания атаки типа blification как правило всем атаки это большинство их прикладные протоколы поверх udp помимо всего прочего есть еще средства защиты от DDoS которые тоже растут впихиваются в эту гонку вооружений и необходимо их каким-то образом атакером превозмогать Ну и мой любимый Прошу прощения качественный фактор это возникновение новых протоколов сетевых механизмов и распространение их реализации у вендоров и у массового пользователя для того чтобы понять куда нас эти движущие силы завели зазначный период Давайте посмотрим на порядки развития по метрикам про которые мы поговорили за период период с 90-х до нашего времени данные субъективные сугубовыборочные которые мне понравились Ну вот они здесь на ваших глазах канальной емкость на границах крупных провайдеров скорость обработки пакетов в секунду на роутерах Да здесь сравнятся Cisco 2,5 и те машинки которые сейчас стоят в содах количество хостов выросло примерно в 100 раз а Домашние Сети и офисные сети переехали от килобитных диалоп модемов на гигабитные сети если говорить про средства защиты от DDoS то специализированные коробки которые фильтруют трафик подросли в среднем 100 раз по полосе а облака за счет распределенности за счет масштабируемости и увеличение количества подключений выросли примерно в тысячу раз понятно что в таких условиях говорить о какой-то конкуренцию за питательную среду не приходится все прекрасно уживаются любовь сосуществование новых методов сами старыми и говоря про самые старые методы мы отмотаем на начало нашего периода это эпизод из карьеры знаменитого хакера Кевина митника он вознамерился получить доступ несанкционированный Разумеется к машине своего давнего оппонента от том И шимамура для этого Он хакнул машинку в лабораторной сети и постарался представиться логин сервером с которого был доверен и логин на искомый терминал Проблема в чем если спуфить подключение представляешь чужой машины нужно сделать так чтобы настоящая машина не смогла ничего сказать нужно как-то вывести из обращения до этого митник использовал генерацию большого количества Син пакетов со взломанной машинки отправил их с указанием чужого спуленного ip-адреса валидного из этого Калке но неиспользуемого сервер логин который на картинке честно принял их всех в очередь по открытых соединений забил ее до потолка и честно слово сенаки несуществующей машине при этом когда митник успешно спустил соединение представляясьваген сервером один сервер не мог ничего сказать терминал который проверял остался на пакет потому что он уже был очень плотно занят В итоге митник получил посадил туда закрыл соединение отправил резец сервер вся эта атака длилась 16 секунд и что это правильно пример сифоуда одна из самых старых Ну по крайней мере в летописной истории самый старый вариант атаки про который мы знаем тогда это еще была нераспределённо Это был просто так с одной машины но так как после этого пошел подробный разбор этой ситуации с логами и прочим клестах потом вышла книжка шимамура Потом вышли книжки митника одну из них вы получите за самый лучший вопрос к этой презентации люди по крайней мере те кто интересуется интернетом и технологией узнали что Так оказывается можно было и здесь мы подходим к началу нашего основного периода это годы когда те Adidas атаки с которыми мы сейчас умеем и привыкли жить появились развились и успели наделать довольно много шума и говоря про синфлот который нам продемонстрировал митник буквально через два года пользователи одного из старейших мировых интернет-провайдеров нью-йоркского Феникс обнаружили что их мыло сервера не работают Феникс решил устроить крестовый поход против спамеров который рассылали тысячи писем через сервера спамеры нанесли Ответный удар использовав все с нескольких взломанных машин и положили нафиг все три моего сервера реакция дежурного администратора была очень простая очень страшно мы не знаем что это такое если мы знали что это такое мы не знаем что это такое Однако спустя полутора суток даунтайма это незнание растворилось люди поняли что они имеют дело с десять одинаково в сервис распределенной атакой на отказ обслуживания с использованием sin пакетов генерируемых машинок реакция массово Медиа на эту историю была сдержанной в основном об этом написали профильные колонки в технологических изданиях Однако это чуть ли не первый способ когда об этом вообще кто-то когда-то написал за пределах мелман рассылки реакция профессионального сообщества была немножко интереснее мы не знаем Сейчас сколько трафика было на генетилено в этой первой исторической Adidas атаки на Phoenix Однако много скорее всего не потребовалось потому что спустя два года товарищи исследовали товарищи исследователи проводили некий research и выяснили что для среднестатистического сервера достаточно 20 пакетов в секунду сенов чтобы держать очередь по открытых соединений полностью забитый и сервер не примет больше ни от кого CP Connect 20 пакетов в секунду это ну не очень много даже по тем меркам верно Тем более если у вас несколько машинок их гонят экспертное сообщество центр реагирования сэр глубоко рассмотрел причины и симптомы возникновения проблемы и выпустил экспертные рекомендации они очень общие и За все хорошее против всего плохого провайдеры не пускайте спущенный IP трафик входящий исходящий через свои сети если у вас куплен значит это атака он вам не принадлежит а не принадлежит вашим хостам Не надо упускать отлично замечательная идея А как мы это сделаем но есть набор рекомендаций Но если вкратце забежать вперед станет понятно что никакие из рекомендаций центов полное местами в частичной мере не смогли быть исполнены Этот способ бороться с атаками себя не зарекомендовал путем каких-то массовых внушений интернет-провайдером хостером и транзитным сетям практически подходы к решению вопроса оказались куда более успешными буквально через семь дней после этой атаки товарищи обсудили и сгенерировали новый способ борьбы с фудом на открытие соединений механизм принял название сингукис уже через месяц появились первые реализации для тогдашних популярных северных операционных систем и для понимания того насколько технология оказалась удачной применимой и в принципе годный по сей день возьмите любое средство защиты от DDoS коробку операторскую защиту Облачный провайдеры софт который ставится на вашей балансировщики почти во всех них будет реализован механический кукес для того чтобы фильтровать не валидные входящие Син пакеты от несуществующих или не принадлежащих абонентам IP адресов вот такой вот долгожитель метод и по его образу подобию уже в новых протоколах реализовывались подпорки чтобы это дело не испортить а мы едем дальше помним что атака на penix больших кругов на воде в мировом сообществе не создало это сделать через четыре года молодой человек 15-летний Хакер с Ником Mafia Boy который с помощью этого же уже хорошо зарекомендовавшегося в кавычках метода атаки взял и обронил все крупные доткомы существовавшие на той момент самые крупные из них сайт онлайн-магазинов в течение 8 дней у них кошмарил делаю по несколько Атак в день пока они отколупывались после очередной атаки поднимали сервера он волевых обратно потрогать технических история сохранила очень мало но пока мере байкома успел запомнить что им прилетело По меньше гигабита по тем меркам это конечно были астрономические цифры в полосе Майкл Кача именно так звали Мафия боя взламывал энное количество машин университетах Калифорнии Санта Барбара и университета использовал их для генерации трафика он особо не шифровался наследил везде только и хвастаться со своими успехами за это и сел в тюрьму село в тюрьму не просто так а потому что спустя несколько часов после первой атаки президент Клинтон тогдашний собрал саммит посвященный кибербезопасности на котором был постановлено что с этими досером надо что-то делать надо Их искать предъявлять обвинения и сажать в тюрьму что в общем-то и случилось этот момент этот эпизод можно считать точкой отсчета преследование органами силовыми для тех кто устраивает организует видос атаки а мы едем дальше перемещаемся в Россию и смотрим С чего у нас началось понимание с массовом сознании продадут в РФ был известно уже очень давно примерно тогда же когда случился penix и дот комы в журнале хакеры были статьи в 2000 втором году потому как устроить Дедус атаку тогда это можно было спокойно обсуждать А в 2004 году случился эпизод который стал новостью и о нем узнали очень много людей очень много людей узнали потому что на хостерах мастер-хост и вложенными в петерхоз очень большое количество сайтов рунета надо большая часть сайтов рунет она не хостилась и все они легли когда мастер-хост и их провайдера таком были атакованы и не справились С входящим мусорным трафиком атакующий использовал уязвимость популярной утилите ремонт админ для винтовых машин которые позволяла получить управление над машиной посадить скриптики которые генерирует трафик скриптик умел гонять полную палитру популярных методов на тот момент технических подробностей потому сколько там было битов в секунду или пакетов история не сохранила но так как самым главным докладчиком по этой истории на эти был достаточно Филипп кулин вы можете спросить у него он знает это и еще очень много всего интересного про рунет А мы едем дальше и нашим глазам открывается совершенно новый способ эксплуатации машин в Интернете для организации так это аппликация про него экспертное сообщество узнало раньше чем он случился успев Подготовиться и изучить возможные векторы такой деятельности уже упомянуты нами американский сырт еще в 2005 году выпустил бюллетень в котором говорил большое количество появившихся в интернете рекурсивных DNS resover of которые отвечают каждому встречному поперечному на dns-запросы может привести к проблемам кто-то может захотеть отправить много-много маленьких dnsquery на рекурсивной резоверы запросив какую-нибудь небольшую зону и исходящий трафик может стать таким большим что он забьет каналы этих серверов угроза инфраструктуре DNS Ну как бы поговорили про угрозу А вот она и случилось буквально меньше чем через год после выхода этого бюллетени случилась крупнейшее на тот момент и чуть не крупнейшие вообще во всей нашей истории атака на корневую DNS инфраструктуру ряд Атак на топливо до мейны точка ком точка OK и на руднест сервера которых на тот момент было сейчас их так или иначе выходила полностью из строя в одном случае и частично в остальных трех из четырех трафик сгенерирован таким образом достигал уже гигабитных значений перевалив через психологический порог но интересно здесь не только вот это а то что атакера пошли немножко дальше чем исследователь SRT и сказали А зачем нам набивать name сервера исходящим трафиком разве в этом реально прикол реально прикол в том что мы можем подставить IP того кто нам не нравится И тогда все эти DNS ответы полетят к нему на хост машину и даже если каждый сервер сгенерирует не так уж и много то просто банально их количество помноженное на трафик который можно на фактором квалификации насколько то что отправил атакующий по размеру отличается на то что отправил DNS сервер создаст условия невыносимой для выживания жертвы и с этого момента атаки типа DNS profication прочно вошли в нашу жизнь а также все их веселые собратья буквально любой протокол прикладной который основанный UTP нам будь то ldap ssdp ntp repe1 message of the day тоже если кто помнит есть такой протокол все они не только потенциально являются векторами для создания так Но и светились так или иначе в дикой природе надо даже а мы едем дальше и Мы уже поговорили о том что кто-то создает ботнеты для того чтобы генерировать их трафик дедуса так кто-то использует собственноручно взломанные машины кто-то распространяет их через уязвимости в программах удаленного доступа еще один короткий эпизод Перед тем как мы перейдем к активизму это моварь под названием Зевс который распространялась уже через почту таким образом помимо традиционных троянов которые Там воруют данные или шифрует машину таким образом оказалось возможным подсаживать на машинки тех кто кликнул на вложения в почте таким образом Windows машины офисные домашние стали очень популярными участниками вот натов в те времена но не только таким образом но еще и добровольно 2007 2010 годы это период расцвета до досок активизма Что такое активизм на это попытка заявить какие-то политические требования протесты и так далее с помощью методов киберпреступности как мы сейчас понимаем с помощью взлома с помощью доса с помощью дефейсов и прочее вот видос активизм выражался в том что пользователи устанавливали себе добровольно утилиты на своей персональной машины утилиты эти занимались генерацией трафика по кнопке сообщаешь destinational адрес выбираешь тип атаки жмешь Старт мы знаем утилиты и к ним еще добавилась Такая замечательная утилита Как слово лорис которая реализовывал новый невинные доселетит А так пока мере в дикой природе и в распределенном варианте это медленные атаки с использованием htp когда открываются соединения которые никогда не закрываются их становится много сервер начинает всех обрабатывать в соединении шлются например заголовки по несколько байт раз в минуту сервер вынужден ждать пока им всё это шлют он исчерпывает свои вычислительные ресурсы и встает колом медленная атаки в массовом сознании начались сосового риса и продолжаются до сих пор в измененных вариантах активизм активно использовался для того чтобы атаковать основных рупоров борьбы с пиратством это ассоциации правообладателей музыки киноконтента это те кто гнобил WikiLeaks и многие другие мы переходим к следующему историческому эпизоду это тот временной период когда методы защиты как раз появившись начали активно эволюционировать видоизменяться Ну и мы увидели несколько очень крупных Атак которые сразу подняли планку метрик по которому мы считаем довольно высоко и начнем мы конечно замечательной компании Sony для которой период с 11 по 14 год был не очень хорошим понятно что там наложилось много факторов землетрясений в Японии которое уничтожила часть производства утечки информации ухода ключевых сотрудников судебные скандалы но немаловажным фактором во всей этой несчастной истории был именно DDoS атаки на Sony привели нас к осознанию новой мыслидос можно использовать не только для того чтобы просто положить ресурсы чтобы все об этом узнали но и для того чтобы этим видосом замести следы или скрыть факт взлома каких-то машин в инфраструктуре Куда приходит либо мы мы начинаем Deus атаку у нас ложится например Firewall экран веб-приложений которые не в состоянии обработки эту нагрузку его приходится выключить из обращения вывести в параллель или вообще погасить в этот момент можно организовать попытку взлома получить Shell посадить бэкдор который нужен провести еще одну DOS атаку для того чтобы снова все легло и инженеры занимались отскребанием видоса а не поиском того где у них внезапно появился несанкционированный доступ вот атаки на Sony Это хорошо продемонстрировали первый такой инцидент случился в одиннадцатом году Sony сначала потом взломали сервера PlayStation Network вынудив этим взломом выключить Sony сервера на более чем три недели три недели без консольных игрушек Вы сейчас можете такое представить довольно трудно себе представить стоило это суммарно больше 150 миллионов по их подсчетам недополучной прибыли атаки на сеть Sony PlayStation продолжались каждое Рождество каждый год 11 12 13 14 год а четырнадцатом году еще Вишенка на торте крупнейший дадос на все основные сайты Sony взлом и утечки всего что только можно киноконтент сценарии ранней версии игрушек и так далее тому подобное Это был Заключительный аккорд в этой истории для нас чем интересен этот период и Конкретно этот эпизод группировка который кошмарилась они большая часть времени под названием вот эти самые ребята она использовала нафармленный ботнет из роутеров в основном комодити роутеров в подъездах домах в домашнем Интернете В общем Она не только использовала для своих Атак но еще издавала его в аренду всем желающим вот ребят У нас есть бутмент вы можете оплатить Некоторое количество вычисленного времени и отправить атаку туда куда Вам хочется они заявляли мощность своего батнета более 100 Гигабит по тем временам это был не прям совсем Обалдеть Какой рекорд но тем не менее это была психологическая планка Которая так и приближались но еще не переваливали перевалили не очень скоро Но сначала мы посмотрим что происходило в российском интернете примерно в тот же период мой дорогой коллега Артём гавриченков 11 лет назад делал доклад по нашим собранным метрикам вот несколько интересных цифр из него они сейчас в исторической перспективе выглядят занятно полоса атаки Прямо скажем не очень высокая количество Атак за год на больше двух тысяч из них всего лишь 40 более 1 гигабита ограничено возможностями интернета тех кто генерирует и Особенно тех кто принимает Да бизнес-инфраструктура каналы больше гигабита еще тогда было можно сказать невиданным делом поэтому больше гнать атаки на чьи-то сервера смысла особого не имелось самая долгая атака четырехзначное количество часов трудности представить но уже тогда были такие атаки это означает что такой вариант борьбы с Адидасом как Black haulting Да вот нас сейчас атакует мы видим сети из которых летит трафик Мы сливаем весь трафик Холл вообще не принимаем это соединение не принимаем ничего который работал в 90-е который работал в нулевые с таким атаками это не работает потому что за это время там найдется достаточное количество настоящих хороших юзеров в этих сетях которые надо бы пропустить а если мы просто выключим для них доступ Мы потеряем очень много Ну и размер ботнета 200000 активных IP адресов Это значит что большая часть бутлета это Windows машины какая-то часть из них задействуется Под атаку какая-то часть находится в резерве потому что все айпишники светить против сервиса защиты не очень правильно забанят и потом не сможешь атаковать нужно какую-то часть иметь в резерве помимо этого Windows машины Что делают ночью будет их выключают пользователи уходят на работу приходят с работы есть некоторые пик присутствия участников вотнета который можно задействовать вот тогда так и происходит то есть мы говорим довести к активных адресов это вполне возможно будут миллионник Вот это миллионники в 2011 году это была уже не новость даже в рунете А тем временем мы говорили про 100 гигабитный порог и случилось Вот что в тринадцатом году организация спам-хаус внесла который борется со спамерами в интернете и с прочими не благовидными личностями внесла в черный список адреса когда печально известного провайдера кибербанкер владельцы и пользователи кибербанкера оказались этим недовольны и как и спамеры в случае спальник нанесли Ответный удар они начали доносить Хосты спам хаоса первая атака пришлась около сотни гигов Понял что сам это не вывезет обратился к начинающей тогда можно сказать фирме клаудфар с ее облаком не проблема отфильтровали 780 гигов написали отчет прислали графики Ага сказали Сибирский лесорубы из сбербанкера и налили в трое больше и плох стал уже клад фару вот такой легкий переход в три раза больше полосы означал что возможности по генерации Атак типа dnsm profication у хакеров примерно не ограниченная и ограничено они только одной вещью это магистральными каналами в интернете сколько можно прогнать трафик через backbone Вот такая будет атака проблемы с генерацией проблемы с задействованием публичных ДНС долларов для устраивания публикации вообще никаких нет не было в общем-то Нет сейчас Единственное что может порадовать это то что с тех времен и до сих пор количество Тех самых машин DNS серверов в интернете которые можно задействовать для фикейшн оно неуклонно снижается по ряду причин кто-то закрывает от себя порты кто-то мигрирует на облачные ДНР сервисы и не нуждается больше в персональном общем этот график медленно продолжает снижаться какой-то момент возможно он достигнет тех значений когда гонять совсем не выгодно но этот момент еще далеко не наступил когда мы говорим про атаку нельзя забывать про защиту Что происходило с средствами защиты Adidas в тот период началось все с коробок как мы их называем это кастомер он прямо из оклепмент оборудование которое ставится в инфраструктуру заказчика это сервера специализированный юниты которые умеют быстро отфугуливать плохой трафик пропускать только то что разрешается имеет гибкую систему настройки правил но очень быстро стало понятно что с атаками в сотни Гигабит и в десятке мегабит в секунду справляться могут только батареи таких коробок их нужно составить инфраструктуру 5-10-20 это капитальные расходы это лицензии не прогнозируемой Касты поэтому естественным стало для ряда крупных игроков перемещения коробок взять оператора связи у него связанности больше у него трубы толще он можете позволить держать специализированный центр очистки на котором этот трафик будет фильтроваться и подключать к нему целое количество клиентов которым нужна защита Adidas так появилась операторская защита на начало десятых годов это как раз тот момент когда выделенные коробки которые начались с фирм арбарра двена циска стали переезжать крупным интернет-провайдером возникает новая проблема Когда у вас атаки уже далеко за сотни гигов и каждый оператор их может вывести на своем магистрали плюс у оператора ограниченное количество точек подключения ограниченная география как правило Ты даже если это тируан то он захватывает энное количество регионов пропустить трафик на очистку через эти ограниченные стыки становятся трудно так возникли все эти фильтрации распределенные или многие еще называют их облаками Хотя это не совсем облака с точки зрения организации сети которые используют подключение к разным провайдерам имеют большое количество центров очистки в разных регионах и умеют за счет увеличения площади своей поверхности принимать на неё большое количество трафика и честно обрабатывать каждый пакетик каждый битель который туда прилетел чтобы до тех клиентов которые у них защищаются долетел только чистый трафик вот этот путь был проделан примерно за 5-6 лет и как и случае с атаками о том чтобы пожирать ресурсы друг друга речь не идет Все эти варианты прекрасно сосуществуют имеют свою целевую аудиторию свои специфические задачи и самые крупные игроки их обычно у себя комбинируют мы едем дальше в сторону настоящего времени атаки продолжают поднимать планку в цифрах и в массовом сознании затрагивая все больше и большее количество людей в шестнадцатом году стало ясно что участниками Вот это могут являться не только взломанные машинки или сетевые устройства но и любая IPTV камера домашний Smart TV Или например чайник с выходом в Интернет мы тогда шутили каждого чайника случился в шестнадцатом году первая атака случилась на сайты следователя Брайана кребса Security который как раз расследовал действие хакеров на протяжении многих лет и атака это произошла с использованием ботнета названного мирай Мирей это замечательный кусок кода написанный на осях он умеет вот такенное количество разных методов Атак все возможные фулды на транспортном и прикладном уровне с хитрый комсомоляцией чтобы обманывать коробки фильтрующие используются например капсуляция заголовком герои туннелирования многие коробки которые его тогда видели они думали это для какого-то сервера в инфраструктуре пропускаем фильтровать не будем и многие атаки за счет этого достигли цели атака внезапно выстрелила сразу на 600 гигов количество ботов которые засветились в этой истории почти 150 тысяч и это было не предел потому что очень скоро случилась атака на французских хостеров где мы такие достигли цифры в терабит в секунду С условностями но все же это произошло атаки продолжались некоторое время не снижаясь в интенсивности новых расправился за счет гигантской канальной емкости и быстро соображалки А вот Атака на DNS провайдер Дин который вывела его из строя на очень долго объясним примерно 14 тысяч популярных сайтов которые у него ризовались принципе почти все Восточный побережье США Она произвела впечатление уже на тех кто с интернетом знаком как Рядовой пользователь потому что у них все перестало работать и опять же именно так и на один запустила расследование судебное разбирательство в рамках которого нашли авторов мирая и привлекли к порядку как победили бутмент Рай на Казалось бы А эти устройства уязвимые их прибавляется каждый год становится все больше заражая заражает на это будет только расти кто-то очень умный дальновидный Сделал такую вещь он слил исходники мирая на гитхаб таким образом на месте мира который мог согредировать сотни тысяч ботов возникла больше сотни аналогичных бутлетов которые боролись за один и тот же пул взломанных устройств уязвимых роутеров чайников из скороварок один развалился на кучу маленьких каждый из них по отдельности не смог оказать такого эффекта извалить кого-то значимого таким образом по принципу разделяя властвуй кто-то просто уничтожил эту угрозу сведя ее к обыденной мы говорили с Вами про атаки на Сони Лидер склад и метод который Они использовали тогда это как-то не прозвучало А вот после Атак умирая и потому что стал более популярен массовым сознания они стали больше говорить история что оказывается за сервис это очень популярный метод заработка среди киберпреступников что таких вот это существует Уже довольно много они принимают черт возьми оплату через PayPal еще раз у меня 6 и каждый за 20 баксов может организовать атаку на со недоброжелатели или конкурента при этом ему не нужно будет нанимать хакеры о чем-то с ним договариваться чтобы кого-то взломал берешь в аренду вот нет из 50 тысяч устройств и фигачишь сечение часа на заданный хост очень просто самый крупный из DDoS сервисов под названием видос который организовали два израильских подростка был выведен на чистый воздух раз шестнадцатом году но Естественно что как с любым событием которое попадает в массовое сознание на это не послужило предостережением а скорее призывом к действию поэтому на месте видосы появились сотни других бутеров они просто переехали в даркнет и сейчас Вы можете найти их там если конечно вам этого хочется еще на шажок ближе к современности это то с чем мы живем последние четыре года этот период характерен тем что мы увидели новые типы Атак то что было до этого количественное наращивание методов видосов которые мы все уже знакомы последние четыре года принесли нам кое-что совершенно новое первое что нас удивило это атака с комплектацией но не какой-нибудь пилил Да а м кэшт Казалось бы инструмент который почти у каждого занимается кэшированием контента куча ресурсов очень крупных с большим количеством серверов на Edge используют mem cash оказывается его можно использовать обратившись к нему запросив достаточно большой кэш И точно также указав адрес жертвы в качестве получателя И они прекрасно будут ссылать мусорный трафик повинуясь действием дедостера атака сходу пробила все возможные потолки разогнавшись до 135 терабита там психологические порог улетел куда-то в сторону все не психологические пороги улетели куда-то сторону такое так и никто еще не видел прилег на 8 минут а камай их отскребли оперативно а затем должны сразу поняли в чем прикол и угроза здесь в чем не то что этот метод какой-то слишком сложный или он отличается от того что мы уже видели а в том что если в тот момент восемнадцатом году зайти шоданом и посмотреть количество по открытым портам количество серверов которые могут участвовать сходу Это примерно 90 тысяч ничего не подозревающих организация в интернете Естественно что пошла массовая работа по тому чтобы убрать их из доступа чтобы закрыть возможность нужно как-то снизить количество модификаторов наш любимый церкви вместе с гитхабом который писали по спортом по атаке выпустили ряд рекомендаций вот самая Ключевая из них выключаете тогда Никто не сможет спустить хорошо работать как далеко не везде можно для кэширования Используйте себе И при этом сохранять те метрики которые вы на продакшне имеете но так или иначе Нашлись и другие пути выяснилось то что ценен то есть например в определенной версии сразу открывает utport наружу Когда вы ставите ммкш это можно попачить привести небольшую ревизию у себя в хозяйстве и закрыть таким образом такую дырку что вроде как-то худо-бедно справились буквально через год случился новый прикол который никто не ожидал мы с вами говорили про модификацию на базе протоколов потому что в ней очень просто скупить никто не проверяет Source адрес Кто он шлет трафик фактор ампликации тоже довольно большие это десятки сотни X умножается полоса умножается количество пакетов в ряде случаев с помощью tcp Казалось бы спуфить бессмысленно это не так выгодно фактором публикации не такой большой Ну перепошлете вы перепошлетевый сегмент при пошлете в другой раз что это стрёмно что ли Вот результат атака которую мы выдержали защищая наших коллег и серверском продолжалось больше чем пол суток и с помощью аппликации пакетов сенак на транспортном уровне эти ребята в кавычках сумели пробить планку в 200 мегапакетов в секунду это на секундочку очень много тогдашний синфуды которые мы как правило видели на своей сети о которых продавали наши Западной коллеги это десятки мегапакетов 50-60 30 pps 200 208 Ну не очень прикольно было но справились фактором такой атаки реально низкий он работает за счет пере посылки одинаковых сегментов при их не получении они за счет увеличения Именно поэтому поры до времени использовать его для широкополосных недостаток было не очень выгодно потому что зачем вот данные из нашего отчета сколько модификаторов С каким фактором мы видели в девятнадцатом году из UTP Да видно что фактором квалификации единица десятки сотни Вполне себе достижимы но количество таких машин снижается и разогнать мегамощную полосу с помощью них уже к девятнадцатому году стало намного сложнее приходится конкурировать за эти ресурсы А на фоне этого атаки с использованием tcp сена комплектации внезапно стали более выгодными И теперь мы их видим достаточно часто Особенно учитывая что число потенциальных хостов которые могут быть использованы в этой модификации оно сравнимо с общим количеством таплификаторов которые по всем протоколам есть делайте выводы буквально следующим эпизодом стало то что мы вообще не могли ожидать что кто-то заразит сотни тысяч микротиков одинаковым Ботом и устроят нам прикладную атаку на десятки миллионов запросов в секунду это же прикладной уровень Мы помним про htph воды помним про медленные атаки Которые случались Ну вот это нифига не медленная атака это серьезнейшая нагрузка на любой балансировщик на любой Edge Тем более что она использует htps соответственно затраты на тело шифрование такую атаку кроме с очень крупных сетей и специализированных провайдеров переживать пожалуй никто не в состоянии Яндекс с честью справился поделился с нами данными Мы провели исследование и назвали этот мэрис с латышского чума потому что эффект сравним с чем мы в принципе при попадании в продакшн инфраструктуру выдержал похожую атаку началась опять же общественно административная работа по донесению до сведений сведений до владельцамикротиков что если у вас старый микроот вам нужно попасть закрыть эту дырку про нее уже годами известно все про него говорят вас по-прежнему уезжают как ботов доса таки работа на эту тему повелась мы выпустили плашку у себя на ресурсах не являетесь ли вы членом Вот на этом мэрис не фигурировали вашей айпишник оказалось что возможности мэриса были в двадцать первом году засвечены лишь частично потому что уже в этом году Google получил вдвое больше атаку С тех кто еще не светился поэтому рис как чума продолжает шагать по мировому интернету и набирать себе вредных поклонников мы поговорили про все что у нас использовало наш привычный стек протоколов с которым мы живем с середины 90-х на отсепите ЛС http htps что насчет новых реализаций как они влияют наша жизнь как они с точки зрения видос Ну вот если говорить про htp 2 пример уже в семнадцатом году китайские исследовали китайские исследователи выпустили бюллетень с способами с атаки который эксплуатирует мультиплексирование запросов в одном открытом соединении в том же году вышел метод http2 цунами это эксплуатирование компрессии заголовков которые потом разжимаются и убивают за проксией таргетный сервер netflix два года Три года назад нашел целых шесть вариантов до 10 в дикой природе пока это все не очень светится но пока готовилась этот доклад первого отрапортовала что они увидели первую атаку с использованием как раз первым методом мульти у меня соединений запросов соединений с использованием htp 2 на своей сети она пока не очень большая но завалите и кого-то уже вполне можно смотрите Что здесь происходит те вещи которые являются факторами качества жизни у новых протоколов мультиплексирования постоянно квирты соединения которые висят на сервере сжатие заголовков для экономии трафика все эти вещи можно эксплуатировать как лазейки для организации дедовса так в рамках спецификации данного протокола что с htp3 и 3 здесь уже все круто мы спрятались шифрование транспортный уровень полностью 3 у нас использует уровни чтобы хорошо и секьюрно доставлять трафик но есть проблема ее собственно говоря товарищи из группы очень хорошо опубликовал то что трафик очень похож на трафик Почему Потому что скупить его на уровне UTP совсем не трудно ставится Quick трафиком такие атаки мы еще не видели но я ожидаю что мы их Скоро будем наблюдать Ну и под конец мой любимый рубрика чем из всего этого узнали чем Мы научились Ну я для себя выбрал несколько важных факторов первое то что дедовс атаки работают по накопительному принципу новые методы к нам приходят старый никуда не деваются синдфуд по-прежнему в топе а так топ-3 топ-5 каждый год рекомендации которые выпускают экспертное сообщество помогают лишь на бумаге только реальные практические реализации защищают нас от так пофиксить протокол чтобы через него нельзя было доносить просто невозможно потому что смена протоколов длится декадами и за это время положить всех кого только можно Ну и повышение качества жизни который несут нам новый протоколы и в принципе развитие интернета это одновременно повышение возможностей для атакующих поэтому новость светлое будущее с новыми протоколами с новыми видосами и надеюсь новой защитой Спасибо большое за внимание буду рад вашим вопросам Привет Спасибо за доклад У меня два вопроса таких прикладных В общем ты маленький Неуловимый Джон но задумался может быть кому-то понадобишься Как посчитать не знаю сколько надо инвестировать защиту от DDoS А если тебя еще не доносят И второй вопрос типа что делать и куда бежать Если вдруг начали а у тебя там не знаю нет какого-то опыта и готовой инфраструктуры Спасибо OK на эти вопросы нам часто приходится отвечать касательно как только сервис публикуется в интернете он сразу становится потенциальной мишенью для этого так может быть не персональный мишени Но может под атаку попасть провайдер твойстер твой dns-сервис что приведёт к недоступности защита подход к защите он масштабируемый есть маленькие решения для маленьких ресурсов которые в том числе позволяют при росте трафика при росте клиентов при росте бизнеса апгрейдится достаточно гибко в этом отношении облака наибольше наибольшая возможности для этого предоставляют просто потому что они смотрят на твои метрики у тебя трафик растет стоимость растет на все это прогнозируемо я ответил вопрос Что делать если вас уже доносят если вас уже досят бежать в заоблачный сервис первым делом менять свои айпишник подключаться на проектирование если это веб-сайт и тут же прятать свой Origin IP чтобы Вам не налили напрямую мимо DNS записи придется потерпеть отель Привет Спасибо за доклад У меня вопрос такой на подумать вот нас был DNS plain Tex протокол прихватывается всем Чем только можно и это можно использовать как плюс так и в минус у нас Мы захотели securies и сделали дионидж и теперь Если у вас есть какой-то вот над Он может поднять диване соединение и с управляющим центром будет общаться защищенным тела с протоколом это не увидим у нас был http plain Tex протокол можно перехватывать чем угодно плюс сначала htp2 htp3 теперь у нас Квик работает в браузере и ни один Middle Box туда не залезет Вот как ты думаешь мне кажется ли тебе что индустрия в погоне за секьюрностью и легкостью разработки сама себе начинает придумывать проблемы это один из факторов которые очень сильно усложняет защиту когда ты находишься не в инфраструктуре у того кого атакуют либо там откуда атакуют как прокси или работаешь Как анализатор транспортного уровня не раскрывая шифрования жить теперь очень трудно приходится придумывать абсолютно новые подходы к защите которые пока еще в деле себя не проявили будем так говорить потому что теперь фактически будучи ничего Спасибо шифрование Вопрос такой Спасибо за доклад А какие из всяких новых там не знаю стандартов технологии которые сейчас предлагаются ты считаешь там многообещающими с точки зрения защиты ресурсов Ну может что-то интересное из нового а если говорить про то что в протоколах например реализовано то Я приведу один простой пример это квика htp3 там сделали две очень хорошие вещи Первое это устранили риск атаки на компрессию заголовков то есть теперь нельзя раздувать ответ раздувать http запрос или ответ с заголовками для того чтобы увеличить полосу атаки там теперь это предусмотрено вторая вещь Это реализация syncook но уже в кулике это ретрей токены Это те же самые но не пришлось извращаться с полями А это было изначально Придумано и внедрено проблема в том что это живет на прикладном уровне опять же в браузере и фильтрации транспортного уровня на коробках как мы это делали 10-20 лет это сделать нельзя Спасибо большое за доклад в общем-то У меня вопрос по такому реальному кейсу в общем-то наш проект он последние несколько недель сталкивается с дедов с атаками то есть регулярно каждую неделю у нас видосятся при том что там прилетает Ну порядка Ну 300 тысяч запросов в час Ну типа мы не можем масштабироваться там по определенным причинам поэтому это проблема Вопрос такой справится ли вот эти облачные распределители трафика если такие вот некоторые решения готовы в России которые смогут работать наш трафик с учетом того что у нас так получилось что трафик на проекте он вообще в принципе похож То есть у нас там один момент подключается сразу ну там до 100.000 человек И они начинают помогать в игру вот если Спасибо за вопрос Я предложил такой вариант первым делом защищаете то что у вас работает может быть авторизация например логин система сайт визитка точка входа для пользователей её можно защитить Облачный сервис хоть русский хоть международный начните с этого Найдите тех кто сделает вам это бесплатно и пока худо-бедно живете с бесплатной защитой Посмотрите предложения от всех облаков до которые дотянетесь Выберите из них то которое для вас кажется наиболее подходящим хорошо спасибо большое Привет Спасибо за доклад Мне вот интересно Если бы перед тобой стояла задача публичный блокчейн как ты это сделал Хороший вопрос Если этот блокчейн по определению полностью децентрализованы без каких-либо точек синхронизации Тогда скорее всего пришлось бы найти способ представляться участниками этой пилинговой сети в которой происходит обмен общие данными спуффити адреса на более низких уровнях там если там использовать тот же самый tcb в качестве транспортного уровня спуфит трафик и давать по щам каждому Перу этой сети если же есть какая-либо централизация где этот Ledger например публикуется обновляется показывается всем желающим задача сводится к предыдущей ко всем досадам есть сервер значит можно довести мы можем задавать вопросы пока Олег не войдет чтобы закрыть конференцию давай пока не вошел давай у меня один небольшой вопрос предысторией У нас тут недавно произошли некоторые события после чего достаточно крупная фирма по фарендике сообщила о том что из неё уходит крупный игрок и теперь в Канаде будет все плохо И вот вопрос Ну Каспер ушел и вот вопрос как мы можем дальше жить если нас начинает подводить системы которые мы доверяем то есть система которая предоставляет защиту от в том числе Просто берут и уходят и разрывают контракт как нам дальше жить здесь два варианта могу приложить План Б план а облака очень трудно откуда-то вытравить так как они геораспределены имеют инфраструктуру как правило куча регионов взять и закрыть сегмент чтобы он вообще перестал работать до них труднее предоставить лицензии коробочных устройств могут себе позволить взять и закрыть рынок если говорить про международные облака они не ушли сейчас с российского рынка например Потому что в этом нет необходимости у них другая модель работает поэтому с облаками такой рис немножко ниже второе план б не складывается В одни корзины и иметь одновременно запущенных несколько пилотов какое-то из них в продакшене остальные вход Спасибо огромное Это был великолепно тебе сувениры от конференции и скажи кому подарим книжку за лучший вопрос Какой вопрос был самый щекотливый самый приятный Окей Я бы хотел вручить при за лучший вопрос вопрос по поводу новых механизмов защиты для новой светофор отлично Большое спасибо за внимание"
}