{
  "video_id": "FQijPdVAnQw",
  "channel": "HighLoadChannel",
  "title": "NoVerify: PHP-линтер, который работает быстро / Искандер Шарипов (ВКонтакте)",
  "views": 2278,
  "duration": 2536,
  "published": "2020-07-17T06:50:15-07:00",
  "text": "всем привет меня зовут р но обычно я использую имя алекс среди из за того что это город кем говорить как написать мое имя немножко себя потому что скорее всего меня здесь никто не знает я сам на самом деле по на печке не пишу но очень осуждаю в ленте ри когда кто-то пишет код на php и раньше я занимался go компилятором в команде intel поэтому я прага довольно много знает внутри и ещё я работаю над в комьюнити в нижнем новгороде в казани сейчас я работаю в команде в к в бэг-энд инфраструктуре и печки для меня любимый язык в том плане что его довольно интересно анализировать статически потому что там очень много вещей которые могут пойти не так сегодня мы будем говорить о статическом анализаторе но verify и почему он статически потому что он делает проверки до того как он запустится есть еще на самом деле линцера которые делают часть динамического анализа статья который можно найти на хабре она написана автором этого линкера его зовут юра и он начал этот проект то есть он сделал прототип моего интегрировали сейчас я его поддерживаю и статье можно найти в том числе предыстории сравнении с некоторыми существующими лидеры которые написано обычно печки что мы разберем в докладе основные три пункта которым разберем это сначала как мы к этому пришли общая как мы выбирали лидер и в итоге как наше решение отвечает на наши запросы то есть как она решает наши требования потом мы рассмотрим какие компромиссы нам пришлось сделать какие компромиссы мука другие команды делать когда они интегрируют статический анализ к себе в проект в котором возможно раньше вообще не было никакого сиай и технические детали то как устроен ветер изнутри и немножко описание того как могут выводиться типы и такие есть конфликты между типами которые у вас в программе и которые вы описываете в документации мы начинаем с идеей продуктовой разработка в к для контекста что это такое что на себя представляет продукт для нас в какой-то сайт и мы его разрабатывали печки в кавычках на ко пи пи в основном и для вконтакте важна скорость разработки то есть это скорость x и багов скорость новых как мы выкладываем новые фичи и в общем как быстро наши разработчики могут от первой фазы до последней код выкатить но когда вы очень быстро это делаете скорее всего можете допустить ошибки то есть если у вас стоит дедлайны жесткие вы торопитесь и скорее всего вы допустим больше ошибок чем в противном случае а из этих ошибок будет страдать пользователям нашем случае пользователя это обычные люди которые пользуются вконтакте обычное в плане то что они ра очень разные то есть нет какой-то определенной категории они очень разные и поэтому мы не хотим чтобы наши пользователи страдали что мы можем сделать контролирует качество но в общем-то это противоречит нашему первому пункту то есть мы контролируем качество чем больше мы это делаем мы скорее тем сильнее замедляем разработку мы этого не хотим в итоге что остается мы могли бы делать через review кода и сделать его больше или делать его везде обязательном или писать больше тестов но это слегка тоже противоречит потому что тесто надо писать review надо делать то есть это плохо автоматизируется команды инфраструктуры занимается в основном не этим а что мы делаем это мы собираем метрики рассматриваем метрики если что-то нужно быстро починить то есть скорее всего что-то пойдет не так если она не так пошло мы хотим это быстро откатить понять что оно пошло не так и быстро выкатить рабочий код обратно это хорошо но нам еще важен строги pipeline то есть чтобы код который не валиден вообще не попадал в мастер чтобы вы откатывать не нужно было это есть тема доклада сегодня мы рассмотрим строги поймаем и в строгом по и плане нам очень помогают lenser и то и статически анализаторы кода давайте выберем в какой-нибудь линдер которым будем добавлять pipeline для этого воспользуемся простым подходом перечислены наши требования потому что есть из чего выбирать он должен работать быстро это означает что в нашем пай плане есть несколько шагов или enter должен занимать не очень большое время потому что это то время которое разработчик ждет до результата то есть скорость которой он может получать фидбек поддержка своих проверок означает что скорее всего в ленте не все есть то что нам нужно нам нужно будет наверняка добавлять свои проверки которая во лидирует код с точки зрения нашего проекта то есть находят какие-то проблемы которые именно в нашей кодовой базе чаще появляются или мы не хотим чтобы они появлялись опять не все из этого можно покрыть тестами ну или удобно покрывается тестами и важно их поддерживаем масть мы их можем написать много но будут ли они хорошо поддерживать например мы можем на регуляр как написать но регулярке вау становиться сложнее когда нужно учитывать контекст и семантику языка но и синтаксис его поэтому это не подход большая часть извините raw который мы рассматривали они написаны печки они не подходят по одной причине в основной причине они работают довольно медленно насколько медленнее раз в десять в двадцать медленнее то есть они могут самый крупный наш файл анализирует десятки секунд десятки секунд на файл то очень много наш линкор может всю кодовую базу за десяток секунд обработать то есть порядке просто а что такое-то фатальный недостаток и что разработчики делают когда не вид фатальный недостаток пишет свое мы написали печки вентер нога и вроде все круто написали свой велосипед отлично мы почему нога во-первых потому что до печки точно не подходит уже по скорости скорее всего по крайней мере сейчас пока нету а хода в тайных компиляции но почему вы не взяли другой компилируемый язык причины есть год это хороший компромисс то есть компромисс между чем компромисс между скоростью разработки производительности и мы это докажем на инфографики то есть у нас есть довольно научное представление об этом вот здесь цифры все из моей головы то есть они не ничего не подкреплены и скорость выполнения у нас хорошая у нас поддержка довольно лёгкая но му скорости разработки возможно немножко проигрываем но в наших приоритетах то есть мы выигрываем из-за этого нам важнее вот эти два пункта если упрощать то вот более простая инфографика php медленнее га быстрее хорошего то есть он более эффективен его легко изучить на базовом уровне это значит что даже если у вас есть команда печки разработчиков скорее всего среди них есть те люди которые слышали огонь возможно кто то из них смотрел на docker знаешь что он написано go и возможно рассмотрели в его исходники у них есть к это базовое понимание если немножко их поднатаскать недельку они будут способны писать гоку от в принципе там будет не очень много дефектов потому что в год хороший touring и у нас очень много лидеров в go люди в среднем пишу чуть по качестве нику а потому что там способов отстрелить себе ногу чуть поменьше чуть в кавычках на самом деле намного меньше проще в поддержке чем многие и поэтому при а чем раз пример ну тут сравнение не субъективному для нас он хорошо подходит как мы в итоге адресовали требование линдер быстрый мне скорость быстрее за него можно писать расширение мы это чуть дальше рассмотрим в данном случае нам интересно то что мы можем разделить проверки опыт сна и которое в номере полежат репозитория это что мы для себя написали то что в open source и нет но они подключаются туда вы также можете своей проверки сделать его легко тестировать разрабатывать отчасти потому что в go из его стандартного дистрибутива идет такой прибор для тестирования которое включает себя и профилирование и тестирование вообще в основном использовать для юнит тестирования но если быть особо лавке можно там и интеграционное тестирование сделать то есть нас интеграционное тестирование по сути через тесты написаны горные какие компромиссы возникали во время написания нашего лидера и того скрипта которого запускает на оси oy как мы настраивали интегрировали его начнём с проблемы когда вы только запускаете лидер какой-то на старом проекте который никакого анализа не использовал тут неважно но фифа и линейную рифа и любой linker скорее всего после первого запусков что вы увидите это о май гад там такое количество ошибок что это никогда никто не исправит просто хочется немножко так закрыть от себя это число и удалить лидер и больше никогда его не запускать что мы будем делать чтобы этого избежать ну во первых мы не хотим наверное на каждом уши или на каждом шагу запускать все проверки на всем проекте на том где там у нас миллионы этих ошибок режим дефо может быть кто-то был на докладе про статический анализ там рассказывалось про бы из войны в общем-то в navi рифа это из коробки есть то есть вам не надо утилиту для бассейнов отдельно прикручивать то есть изначально мы учились что нам нужен такой режим добавление каких-нибудь директории в exclude этой скорее всего есть что-то что вы просто трогать вообще не хотите и даже есть танки это изменение произошли вам проще это не трогать вот сторонке оставить и оставить даже с дефектом но чтобы она не модифицировал с вами потому что вы в истории потом там будете например начать можно с подмножество проверок то есть не подключать прямо все все все что включает стилистику включить только то что находит реальный баги с этого можно начать поправить их включить что-то еще и как вы поймёте когда он включает что-то еще мы вы будете спрашивать коллег то есть как только они стали достаточно счастливы когда там ничего уже почти не находятся включаете еще у них появилась работа как мы настроили свой сетап то есть div которые мы на предыдущем шаге в первые же запросу режим диме он подразумевает что у вас есть система контроля версий dance чегет то есть если у вас из vento сорян переходите на git и что мы делаем мы во-первых устанавливаем при комет huge или при пушку это не суть важно и проверяем самое такое что быстро в для проверки до того как вы запишите код то есть на вашей локальной машине когда вы запушили уже то уже запускается себя и проверки и в номере то есть два режима основных работы это с фул анализом и peaceful анализа в общем то разница лишь в том что на себя скорее всего хотите запускать фу анализ на локальных машинах какой-то менее строгие на 100 быстрый анализ то есть скажем там может быть разница между пятью секундами 15 секундами мы машины вся и можем загрузить сильнее ложного срабатывания это наверно причина номер 1 и когда отвинтив отказываются и выбираешь что-то другое что меньше находит но реже важно выстреливает и насколько они мешают ну мешают очень сильно и люди пушек просто в обход то есть они видят что у вас все это сработало на самом деле это не ошибка у вас скорее всего будет механизм чтобы обойти лидер то есть запушить как-то с каким-то флагом чтобы она не проверялась лидером у нас этот флаг называется на грифе на при пуше храмики при пуше хуки и соответственно лимите ruby red название мин а из этого довольно часто использовал of пока не раньше то есть название увековечили один из примеров ложных срабатываний которые на самом деле не всегда ложно срабатывать на в среднем показывать неоднозначности это его явление например в данной функции принимается что то что должно содержать поле но не факт что если вы вызываете функцию за разных контекстов что у этого чего то есть это поле то есть мы тип никак не описали и lenser в строгом варианте мог пожаловаться вообще делаешь как у чего-то вы чего непонятно q-tip ты можешь так без проверок возвращать поле казалось бы ну на самом деле это может быть и не ошибка придирчивость другой класс ошибок которые могут находить winters меня придирчивость этим можно описать некоторые ошибки например когда вы используете алиасы который для многих людей не особо поняв например so i saw в печке то же самое что и аккаунт на самом деле он никакой не сайт вычисляет а просто количество элемент возвращает для хищников например сайтов совсем другое означает в их ментальной модели соответственно скорее всего в кодовой базе если у вас есть side of the возможно кто-то по ошибке вас скорее всего канут имел ввиду но это придирчиво что делать с этим да например быть строгими и навязывать правила и чтобы все с ними соглашались и не давайте им вообще никак входить то есть сто процентов complaints должен быть везде но это не работает практически никогда потому что чтобы это работало в вашей команде все люди должны быть такого же характера как и вы то есть они должны быть ровно такого же уровня не знаю культуры или восприятие качество кода если они такие же педантичные скорее всего будет бунт это плохо можно не блокировать пуш или commit если у вас какие то вот такие придирки исправь сайтов на аккаунт но она как вообще никак на код не является скорее всего не ошибка это просто придирка но тогда пример в какой процент не будет соблюдать это правило 99 процентов пример скорее всего вас всегда в ходе будут оставаться эти лишние сайтов и можно делать конфигурации для каждой команды чтобы либо у команды либо у разработчика был свой конфиг и на тех людей которые вот совсем не хотят заменяется и зов на аккаунт вот или пускай пропускает все остальные последуют правилам неплохой вариант ну тогда пускай системность чуть будет проседать то есть каких-то особых директоров будет как чуть менее хорош а можно такие проверки запускать не каждый раз ненастья и не на при commit huge хуки скажем какой-то рутины крона 1 месяц и как-то править все что она находит после активной разработки но вопрос а кто это будет автоматизировать кто будет проверять то что на правильно обработать тоже не очень хорош тот или можно общее чем дело ты просто выключить стилистические проверки тоже вариант то есть у вас всегда будет компромисс между счастливым разработчикам и и счастливым лидером или метро сделать счастливым легко вообще просто все ставите на максимально строгая и неких не дайте этом способов обхода интер счастью счастлив на насколько счастливо разработчики неизвестно возможно вас команде никого не останется технические детали как реализовано ver faith внутри мы прям совсем глубоко небом уходить поскольку этой печки конференция не go конференции но рассмотрим как ним высокоуровневого расширяемость как обеспечивается расширяемость на verify сообщала написан примерно следующим образом есть но very high gain хоп репозиторий может такое найти там есть фреймворк часть которая используется для того чтобы реализовать linker и и сами проверки а не лежать немножко отдельно а еще он умеет подгружать проверки то есть вы можете написать отдельный модуль на год соответственно поскольку на грифоне написанного и они себя регистрируют в этом фреймворке и когда этот фреймворк запускается из бинарник а наверх то есть он подгружает все вот эти зарегистрировавшиеся наборы проверок и они работают как единое целое то есть номер файлы библиотека и бинарник которые соответственно является лидером наши проверки будем их называть в коллинз и примерами того что они могут находить из того что не находит печки шторм это что не находят open source на наверх но поскольку нам просто это довольно важно они не особо подходит для общего использования скажем так например именно использование наших функций или классов не знаю даже глобальных переменных которые следуют нашим конвенциями то есть какие-то вещи нельзя использовать каких на местах особых по разным причинам то есть на скот ставил болезнь газета написано это лимитер находит какие-то проверки стиле которые не соответствуют всеобщему в печке комьюнити ни в каком пср они написаны они даже противоречит ему но они для нас является стандартным то есть он проверяет их в open source это покидать нет смысла потому что это не то чего мы ходили чему вы хотите следовать у нас есть также проверка которая требовать сравнивать например строки оператором сравнение 3 равенство то есть identical и в том числе он требует передавать флаг для строгого сравнения функции для сравнения строк еще одна интересная ошибка иногда разработчики когда комитет они перед тем как сохранить файл могут нажимать это комбинации клавиш и эти символы могут оставаться в какой строке ли еще в коем части q то есть у нас один раз включим массива было буква русская ну соответственно скорее всего разработчиками хотел нажать control с но раскладка было не то написал и переключу раскладку сохранил файл за комитетов то есть в ключе был не совсем балетный ключи то есть у нас находятся такие клики в массивах такой башни пройдет как он работает именно с точки зрения архитектуры для начала чтобы расспросить печки нам нужен partire da мы вас вы не писали что странно и но мы не можем использовать печкой парсер который написан на php во-первых у медленной конечно же а во вторых как мы будем его использовать с год только если через все делать обертку поэтому мы используем горный парсер то есть у написанного вот вы можете по ссылке приведенной у него есть несколько проблем для нас самое актуальное интересно это то что он к сожалению работает только с utf-8 печки парсер который встроен в сампе шпион скажем так encoding агностик ему не важно на каком языке он но какой кодировке оон парсит файл но в нашем случае это не так и соответственно нам нужно как-то различать utf-8 от не utf-8 ну какой не utf-8 часто встречается в российских проектов на печке windows 2 надпись от 1 у нас есть некоторые такие файлы как мы распознаём есть файл encoding xml там перечислено все пути где у нас лежат utf-8 сердце то есть если мы встречаем файл который вне этих путей мы просто его стриминга вам потоком налетал конвертируем vt8 то есть без такого заранее конвертирование полностью это нам помогает процесс парсинга выглядит так и анализа сначала как минимум нам надо загрузить печка штурм стопы поднимите руку кто вещь и штурм стопы знаешь что такое окей ну скажем так три зала как минимум в общем от этой вещи которые похожи на печке код на самом деле он никогда не исполняется и он описывает типы описывает типы входов выходов из функции стандартных и там еще есть интересные вещи веранды они позволяют описать например что вы возвращаете элемент вернее тип который является типом элемента массива другого параметра это полезно для функции типа эрой поп где вы принимаете массив типа т и возврат будет именно вот этот то есть мы его можем описать через этого инструкция bright мы это используем как начальную информацию о типах то есть фундамент он подгружается первую очередь есть это мета-данные он поглощается лидером и мы уже начинаем анализировать сорцы непосредственно на перед тем как мы это сделаем мы говорили что мы работаем в режиме дефо то есть мы подкачиваем оригинальный мастер или если у нас уже был мы можем отказаться от пола но семантически to fetch происходит всегда и дальше мы проверяем либо локальные изменения это похоже на то что описывали в том докладе про статический анализ предыдущем случае это бы и celine то есть мы относительно buy online а находим из новые и часы предупреждение которые появились в вашем коде и второй режим это когда вы можете указать диапазон ревизии то есть первую ревизию последние и между ними все включительно это новый год все что было до это старый кот анализ происходит примерно так то есть мы теперь имеем метаданные какие-то информации типах мы берем все ваши солнце ты их пышные и парсим их над а с т происходит анализ надо понимать мы прямо надоест и делаем анализ то есть мы не имеем никакого промежуточного представления которой она была бы полезна это задел на будущее то есть надоест с сырым анализ делать не очень удобно особенно вы очень сильно заря давайтесь на библиотеку и на типа данных которые она предоставляет результаты анализа особенно в его типов сохраняется в каше этот кэш использует при повторном анализе то есть вас может быть прервана less than 50 секунд второй за пять секунд это очень хорошо и мы получаем после этого pipeline а отчета мы скажем предупреждение хорошо мы делаем это дважды то есть мы сначала находим предупреждение для старой версии кода дабы из лайма потом для нового кода фильтруем фильтруем с помощью разницы то есть мы ищем предупреждение которые появились новые версии кода но их не было в старый и получаем именно тот список предупреждений который передаст уже пользователю вы скажете вы делаете анализ дважды это как-то очень медленно вы же хотели быть быстрыми но правда в том что несмотря на то что мы делаем это дважды все равно в десятки раз наверх быстрее чем другие лидеры и там есть задел для оптимизации можно его как минимум еще процентов на 30 ускорить то есть это не совсем является горлышком бутылки вполне себе позволительно на уровне файла анализ происходит примерно следующим образом поскольку в печке можно вызвать функцию до того как она определена вам нужно знать информацию об этой функции до того как в ее анализируйте поэтому сначала мы проходим весь файл и делаем индексацию выявляем типы всех функций зарегистрирован класс и уже после этого происходит анализ то есть анализ это второй проход по файлу в общем то большинство интерпретаторов компиляторов тоже так работает то есть они делают как минимум два прохода или чтобы не дело второй проход вам надо чтобы у вас были какие-то декларации до использования например такси требует из-за чего там нужно заголовочный файл описать его типов это та часть наверное самое интересное в ленте и та часть которой чаще всего ошибки бывают и она до сих пор не совсем корректно то есть с точки зрения корректности системы типов пички который сложно очень формально определить если рассматривать модель то она выглядит примерно так это семантическая модель она не является реальной то есть это просто то что вы можете в голове держать типа они бывают expected и экшн эксперт это то что мы описываем в комментариях например то что мы ожидаем примерно как мы описываем какие типы будут в программе но это не значит что это то что реально в программе используется если вы описали комментариям какой-то тип не знает что такое именно будет значение передаваться excel типы это то что реально в программе ходят какие данные вне перемещается например если вы присваиваете чему-то число то очевидно excel тип будет in том мире флот если это число с плавающей точкой соответственно казалось бы excel типы лучше они же реальны они всегда соответствуют действительности но не всегда можно получить axle тип иногда тип мы можем получить только по аннотации например и аннотации тоже мы можем разделить как минимум на две категории это те которые очень доверительные например печки шторм стабса который мы считаем что они смоделированы до того как мы их используем что там нет ошибок и то что пишут разработчики остальные там могут быть ошибки это мы тоже дальше рассмотрим excel типа тоже мы можем разделить на несколько частей спички 7 этих возможности стал больше мастер таким то есть все становится немножко лучше но вот проблема которая таким ты не решает к сожалению по моему очень похоже слайд уже на несколько докладов был сэлфи места тиками но все же здесь у нас cells это то что нам позволяет сделать печь в семь допустим у классов у есть наследник и мы из этого класса наследника можем вызывать методы которых нету фу потому что он расширяет его правильно но если мы получим фу наследника из меню static с этой аннотации типа возвращаемого is the film the image of the мы не сможем эти методы вызывать нам идеях не даст нам то есть мы мы сможем фактически но идея не будет подсказывать вам почему потому что вам нужно указать static статика означает что это позднее статическое связывание в печке то есть там вернуться может на самом деле не фу а наследник класса то есть когда мы пишем new static мы возвращаем не просто этот класс там не просто будет не уфу там может быть new bar если это класс бар который наследуется от фу соответственно нам здесь нужно как минимум 2 информация типов то есть никакая из них не является избыточной они обе нужны к сожалению поэтому экшен здесь у нас будет цэлт мы в принципе это возвращаем реально и она проверяется печка 7 но для того чтобы ади я работала или нити работали нам нужен static потому что если мы вызываем этот код из контекста наследуемого класса класса наследника-то нам нужно знать информацию что это не тот же самый базовый класс то есть у него больше методов пример того как можно легко понять что таким-то это совсем не то же самое что и статической типизация хотя бы сегодня уже слышали что вы можете проверять только на границах функций то есть на фарш no boundaries в начале функции в конце то есть входы проверяются выходы проверяются под входом я имею виду аргумента функции но внутри функции можете делать какую-нибудь ерунду например присвоить ему значение in the хотя вы описали что это вроде бы как то никто не будет ругаться но кроме наверное педантично валентина то есть можно было бы ругаться и к этому конечно что вы типа немножко нарушаете те которые декларируют но с точки зрения письме здесь все норм ok чуть сложнее на если мы возвращаем фу мы в начале функцию определили что фу и т.п. здесь информация о возврате нет никакой и вопрос что из этих типов может быть правильным ответом как видим три варианта и при этом один из них неправильное 2 стальная некорректно но мы сейчас разберем разница между ними печки шторм и вентер выводят второй вариант то есть несмотря на то что у тебя у вас здесь возврат всегда int выводится тип как или этих двух типов то есть такой июня на этих типов почему потому что сначала у нас была информация тпп потом мы присвоили 10 соответственно тип переменный фон должен быть как минимум совместим с этими двумя типами то есть это тот тип который которым можно присвоить оба этих значения аннотация их проблема в том что они могут лгать в данном случае мы написали что возвращаем числа возвращаем строку из либо лимсе работал только на уровне аннотации и the kind of the здесь мы бы считали всегда что возвращается int но excel типа как раз помогают нам от этого уйти то есть у нас expected тип это int но их шоу на самом деле строка поэтому ли enter на самом деле может дать дать предупреждение что вы обещали вернуть int но возвращаете строку вот поэтому нам это разделение важно то есть ли enter на самом деле знает что возвращается строка настоять у меня аннотаций я не уверен что это правильный термин но что я здесь имею ввиду что у вас у класса который реализует интерфейс есть метод который в общем то нужен для того чтобы реализовать интерфейс и в интерфейсе хорошие комментарии там есть документация там есть типы а вот в реализации комментариев нет и там либо написали inquiry так либо вовсе ничего не написали на вопрос а что возвращает это этот метод можно представить что он возвращать то же самое что описано в интерфейсе то есть find в данном случае это не так то есть возвращается строка вот это не очень хорошо в точке за ним печки наверно плевать но нам важно чтобы что-то сходилось и у вас есть два варианта здесь поправить код первый вариант это возвращает int очевидный вариант мы возможно в апреле нужно защищать другой тип что делать написать что вы возвращаете строку то есть сделать явно информацию о типах такой чтобы ее могла я идея подхватить и линзы чтобы правильно ваш код анализировал то есть грубо говоря эта информация была вообще не нужно но люди довольно часто все-таки пишет in her dog или вообще опускают комментарий здесь не обязательно писать in her dog чтобы певички шторм понимал такие типы у вас будут но если у вас типа описание правильно вот тогда будет проблем и в печке шторме я есть некоторые наборы багов в ли интерес некоторые наборы багов и они не совсем пересекаются да и мы используем одни и те же файлы для метаданных то есть для типов и если мы поправим все то что нам нужно спички штурм статусах из jetbrains репозитория сломается скорее всего азия ну то есть некоторые вещи там будет не совсем корректно вводится если оставить так как есть у них то у нас не все правильно работает поэтому у нас есть некоторый небольшой форк где пара починок атома чтобы пока исправить то что не сходится не знаю насколько они далеко разойдутся но в целом нельзя его рекомендовать выпечки шторма но необходим для работы линкера пример двух проектов которая создана на основе на грифе это печь при критик и печки consistent я сейчас вкратце о них расскажу они используют наверх как раз как библиотеку то есть то как можно реализовать свои проверки их можно считать примерами пользование наверх и так фреймворка откуда эти проекты взялись на самом деле я как говорил нога больше писал чем на печке и я для глаз создал пару утилит одна из них go критик другого консистенции ответственно печки версии это просто адаптация там проверки специфичных для языка но идеи полностью сохранены что проверяет пичкает consistent в некоторых случаях сложно сказать что является правильным или что является неправильным поэтому пички consisting работает так что вы чаще используйте то правильно то есть он сначала проверяет всю кодовую базу наличии альтернатив тех операций которые являют имеет одинаковые и имеют одинаковый эффект но их можно описать по-разному он подсчитывает какую из них чаще используете и рекомендует везде использовать именно эту альтернативу например у некоторых функций есть алиасы о которых я уже говорил если вы один из них чаще используется он и будет рекомендоваться другой вариант это когда вы конвертируете значения между разными типами как минимум два из способов печь пик болеем типу привести или например использования ключей то есть вы можете использовать двойные кавычки или одинарные контролировать это вручную на просто почти невозможно я наверное сам кто-то кто носят пишу в зависимости от настроения в общем случае кавычки двойной одинарные проверять очень сложно потому что в зависимости от контекста вам разные нужны но если на уровне скал по например на уровне ключей то там настроить можно печь петли тика это что-то типа в colin's то есть это отдельно репозитории с проверками которые можно катить на номере fly но они очень педантичен и что я под этим имею ввиду например вот это не баг то есть можно использовать столько м п чтоб сравнить две строки что одна из них больше другой но проще было бы сделать просто сравнение строк у нас есть оператор для этого как бы тоже не баг на возможно это слишком навязчиво для некоторых зря бочков но код в общем-то упрощает это хороший пример этот пример упрощает код другие проверки там гораздо более такие строгие поэтому они еще не являются частью на гриф ой то есть такой полигон для экспериментов просто и прогоняя его на печке корпусе то есть я какое-то количество довольно большой кода себе for call и там гоняю всякие гипотеза анализа что выстреливает становится в печке критики реализованным как я сказал поскольку это еще один набор вы можете использовать его вместе с другими проверками то есть в идеале у вас есть свои проверки your links и вы можете собрать наверху и берлинцы печки критика это будет 1 бинарник но будем называть . линдер то есть это сущность которая выполнять все проверки ну и до наверху это проект на open source и он выложим с гитхабе и что может пойти не так все это мусор за никто не дай других гарантий скорее всего что пойдет не так гайд да что-то пошло не так что то сломался не запустилась действие негодовать главная громко и удалить на вери файн нет оформить тикет то есть зайти на репозиторий оформить тикет доложить о своей проблеме скорее всего она будет решена в течение дня или двух если только это не ночью в воскресенье хотя иногда и такое возможно он не хватает к этой фиче знакомая ситуация вообще удалить наверх а и свой линдер написать вот хороший способ то есть своей ленте rip совет все а круто на самом деле не просто тоже еще заведите ему возможно фичу добавим свечами сложнее потому что скорее всего там может возникать обсуждения например у нас может быть разное видение того что важно что нет но тем ни менее скорее всего проще написать расширение наших линцера чем писать с нуля почему потому что у нас была цель ускорить то есть мы довольно сильно ускорили на перфомансе там сложно еще быстрее работать и столько напишите этой массе или нарасти например но там уже разница будет процентов на 15 20 возможно это не то ради чего стоит стараться у нас разница была в десятки раз я во время презентации использования сусликов кафиров поэтому chiar коду можно ссылку получить и там есть генератор эти горе raw то есть и отдельно эти часть рисовал и можно комбинировать их кафиров на этом у меня все спасибо за внимание у нас есть довольно много времени на вопросы спасибо искандеру но вы хотели тебе вручить благодарность и колонку и пожалуйста не забудь что тебе нужно будет выбрать самый хороший вопрос по этому мнению поэтому поздравить законность кого-нибудь она но если будет один вопрос то запомнить будет легко привет спасибо за класс секунду я вас не вижу меня свет ослепляет вот сейчас вижу придется slepetes а ради такого вопроса так я вопрос забыл когда я пишу свои расширения дополнительные какие-то правила я их пишу на гору так что потом мне надо скомпилировать новый бинарник или эти расширения как-то кладутся рядом в папочку я использую ваш бинарник он динамический подтягивает в ран тайме при запуске это хороший вопрос сейчас надо пересобирать бинарник но поддержать плагины которые в рандами будут регистрировать проверки в общем-то не настолько сложно потому что в плагинов год только одна проблема их нельзя выгружать но в ленте риф выгружать не нужно надеть запускается и умирает на другой вопрос что это не будет работать с режимом гангуте сервера то есть наверху есть этот режим и он работает обычно долго ты демон висит и работает плагин выгрузить нельзя будет с другой стороны скорее все проверки там не нужны эти в общем технически реализуемые то есть если вам это реально важно можете еще завести я думаю за пару дней можно это сделать чтобы она работала соответственно вы можете проверки клозета отдельно скомпилировать их отдельно отгружать и сошку в linder но он для linux ой для лица будет работать для винды нет окей второй вопрос критик например и хорошие хорошие примеры где strcmp можно заменить на знак больше или меньше может быть есть опция или есть план автоматического фикса кода запустил лидер он нашел эту же поправил это класс задач который близок то есть хорошо когда можно автоматически поправить это все ради требует некоторые ford кто-то это должен сделать к сожалению мне кажется нас пока таких приоритетов нет если у нас в команде попросят это то я бы это сделал но времени это займет довольно много соответственно пока ленте работает только на детектирование он находит только проблемы чтобы вправить возможно можно написать отдельную утилиту скорее всего информации которую вот линдер достаточно для замены то есть он очень точно размечает область в которой произошла ошибка спасибо сейчас auto-fix нет спасибо за доклад у меня такой вопрос а можно ли как-то интегрировать новой печки штурмом насколько мне известно у нас уже есть интеграция как минимум связал студия код спичкой штормом я не уверен но если ее нет в принципе я думаю можно написать то есть это тоже вопрос не очень долгой разработки друзья спасибо большое за доклад вот у меня немного философский вопрос послушав про то что такое линдер и вопрос такой вот зачем это всё но в плане печки тут же винтер он своего рода немного дополняют строгую типизацию и ну как мне видится то есть он но немного так сказать сужает рамки php говорят что вот так вот не надо делать так нужно делать с одной стороны это увеличивает однотипную написанного в команде это хорошо с другой стороны как то помни это сужает рамки вот как у ваши мысли по этому поводу лично мои мысли но я вообще за то чтобы сужать рамки я написал линзы счет для guy 2 550 спешу я вообще люблю запрещать вот что об этом думают другие я не уверен но вот некоторые люди реально хотят чтобы можно было творить да я хочу написать присваивания чтобы она была выражением и результат присваивания что где-то еще использовался она так красива в одну строчку напиши отдельно то есть экономишь одну строчку возможно ты где-то ошибешься то есть если а.г. извините что передал много холивар of на эту тему у вас было я думаю это уже ответ можно ничего не говорить холивары какие то точно есть думаю этого достаточно спасибо привет спасибо за доклад на самом деле интересно а насколько вообще полно поддерживается php то есть если какие-то конструкции или какие-то ситуации которые линдер вообще не принимает спички и очень много магии есть много нюансов как это все работает и как бы если с этим какие-то проблемы не вся магия распознается то есть что то что очень популярный тип это магический гитлеров она обрабатывается и иногда даже правильно но очень много магии в коде практически никак не проанализировать поэтому нас пока такой подход что если тебя в ходе много магии то либо ты скорее всего это вентером проиграть не сможешь равно либо тебе нужно писать меньше магии то есть более явный код написать и у этого есть свои преимущества в гонку мир все почем прямо пишет там магии почти нельзя сделать и у нас же есть особенность что у нас не совсем пичкая капли шпион требует чтобы все типа выводились то есть у нас есть некоторые еще ограничения которое уже есть то есть кот с романец компилируется скорее всего для этой части но довольно хорошо подходит шо я был спасибо привет спасибо за доклад у меня первый вопрос связан с предыдущим на счет версий и возможностей кепи т.п. какова совместимость с собственно обычным пока п то есть все ли вы поддерживаете есть какое-то подмножество которого не поддерживать и наоборот и есть ли какие-то особенности в ленте ли в этом номере фай который учитывает это расхождение и второй вопрос про конкретные метрики бенчмарки какие вы получили то есть десятки раз производительность ногой это конечно очень здорово звучит но если какая-то конкретика там 105 процентов 105 процентов это не в действие на со статьей есть таблички от вам их цифрами то есть можно и appstore там в конкретно с разными лидером были сравнения и мне вас есть вам очень интересно наверное можно в наверх и выложить документ у меня есть сравнение именно с фаном кажется он один из самых быстрых лидеров в частности потому что он сильную партию используют вот наверное стоит выложить то есть прям конкретно удобных данных в открытом доступе вроде пока не выкладывалась можете запустить проверить вам понравится хорошо но чаппи чаппи поддерживает 5 точно весь 7 скорее всего весь но у нас не очень много тестировал в на щас кодовая база выпечка 7 переходит но вся проходит проверку лин сером но поскольку там довольно много предупреждений мы еще не все поправили то сказать то что там нет других тонов использовать сложно скорее всего все работает нормально печки 8 поскольку не дает много нововведений таких уж сильных скорее сюда же спички 8 будет работать как только немножко парсер подкрути всего хотя и кажется что пока нет вопросов во всяком случае публичных не осталось поэтому теперь тебе нужно выбрать самый лучший вопрос а я даже помню вопрос про холивара в эти вот этот вопрос социально-этические он самый такой сложный то есть технически решить проблемы не просто не сложно а вот социальный вопрос я только не помню кто сдавал кто-то из той части у из того глада супер поздравляю и вы можете продолжить обсуждение в зоне для дискуссии а мы будем готовиться к следующему докладов спасибо"
}