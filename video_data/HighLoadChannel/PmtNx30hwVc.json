{
  "video_id": "PmtNx30hwVc",
  "channel": "HighLoadChannel",
  "title": "Как быстро разрабатывать программное решение на C++ и Lua / Александр Боргардт",
  "views": 1978,
  "duration": 2816,
  "published": "2019-05-14T14:39:53-07:00",
  "text": "история со мной началась в районе летом даже сказали перед летом даяна попробуйте поискать себя и заниматься чем-то прикольном я короче такое отдыхаю пью коктейльчики между этим этом занимаюсь пор ну короче концентрируете пытаюсь там решить ряд технических ней технических проблем потом где-то ночью когда я уже сплю уже сон и я там не знаете потерял немножко гантель iq зоне твой друг хорошие и говорит знаешь а у меня друг полиглот надо сказать отдельно он так много ездить он не полегло смысле умеет писать там на перле ассемблер и лиффи вот смотрите по он кроме этого еще умеет там русский английский немецкий и идешь и еще в сети языке которые как бы он почему то можете легко выучить он пытался дает всему но он и он начинает ночью где-то вроде где то в районе двух не это все рассказываете у него какая-то боль я это боль не до конца понимаю я пытаюсь сделать типа так давай чуть-чуть успокоишься ты мне расскажешь вот помнишь мы делаем выбор ликей шины ну да пусть что такое помни ты мне потом полгода назад про это рассказывал ну ты же помню что мобильные приложения ты тут тоже делал помню было делом ну ты же полностью мы еще немножечко занимаемся game девам ну там чуть-чуть ну да я помню а ты помни что как бы это все завернуто в огромную платформу и обмазываем джинны цен на кучу равно да я помню был такое но вообще если что там платформу на самом деле цена какие-то места и вообще там есть как и для не игр то вообще каждый раз конкретное решение всякое такое да помню было такое да помню он говорит давай так у нас короче все плохо я луч ас по меня билеты и придут там в москву не через кокто приеду к тебе там типа завтра-послезавтра как билет игры но я короче вылетаю прилетаю на место он меры все тоже рассказывает но уже внятным языком этом вид с проблематикой постановки задач и решения и оказывается вот то благодаря там одной из того с чего он строит там solution и это некоторые такое авторах новичку дональд туск мастеру а вся в марвеловский комиксы никто не читал да там хотя бы магните если кто-то читал мо нет ладно краткий пересказ в мире marvel есть такой персонаж называется таск мастер у него фотографическая память и очень мощный математический аппарат за счет чего он у таких не очень классных героев типа соколиного глаза капитана америки способен скопировать их техники боя ну прям и построить против них таск мастер занимается вполне понятно самом деле задачи у него есть конфигурационный файл после того как краска мастеру скормили он зачем-то входит переменное окружение потом это все чудо ходит в конгресс и они там и запускается то что на у них называется 1 applications сервер то что они очень любят 1 и строит там свои прототипы и финальное решение на перле ну или пиррол подобно моршине потом после чуть-чуть поковырявшись в коде где-то часа полтора 3 и он вообще там есть такие раннеры где местами для того чтобы первым был пошустрее воткнули много-много плюсового кода очень много + авокадо и в финале на нижнем уровне запускается много о виртуальных машин и запускается иногда в 8 виртуальные машины ну хотя любят они почему ты луиджи скрип и всякое такое я говорю не ноет конечно прикольно ну и а в чем как бы твой а на нижнем уровне есть пользовательский код который пишется возможно не всегда программистами не всегда там там если это игра то возможно и гейм-дизайнером что тут понаписали ну потому что быстро надо было на прототипе zero если что там есть места как бы не стесняйтесь вот и вот это когда приложение пир слой состоянии типо типо раз и собрали mvp в состоянии то начинаются там перетру бац и и манипуляции и там и там это все может вы кинуться но иногда начинают проект может начать вот прям вот в такого каркасе к я говорю так все-таки что-то пропало а пропало все что что связано с плюсом почему devops и админ это два равных человек точнее и сергей и devops забыли перенеси последние своем машину они приезжали со своей на ноге и немножечко не потеряли но очень легко забыли несущая часть всего и потеряли большую часть си плюс плюс кода и все проекты могут функционеров принципе без этого потому что внесение там изменений можно на разных частях как ко мне давай поэтому как бы мой друг там первыми вы пару дней не так напрягался но как бы когда но же решать проблему a research от такое неблагодарное дело главное время не убить на research непрерывной ну хорошо давай я посмотрю чуть ближе на таск мастер пойму там как выглядит про построение запросов как ну как бы чтобы понять как это переписать надо так за ривер сити у тебя уже и кусков исходников нет есть пользователю запускаем тоска masters команды хантом и ттп что-то там sku и involvement in my понимаешь таск мастер поднимается обязательно runner ну понятно он и это некоторый дополнительный слой диспетчеризации после того как запрос в ране рельсам отработал из иди спать через сон приходит злого виртуальную машину там отрабатывает какой-то набор бизнес-логики это чудо не дай боже ей надо сходить в базу он делает за передает запрос в lua runner точнее в райнер прошу пощение потом он отдает авто мастеру таск мастер и валит строку которая пришла и зло а потому что это перловый arm которые решили и зло пробрасывать именно строкой сил оленем вором это так да и ты в этот момент ок начинаю волосы начинает шевелиться loa строка и вал форма вый запрос а потом хождение в подвигах ну ладно самый простой ответил подогрев эта схема начинается раскручиваться назад и в принципе там через какое-то время запросы дается пользователю и вот если не дай боже надо сделать больше чем то мне на 5 запросов количество rp софтом колеблется между 100 и 1000 это лучшие показатели типового потому что вот это все с непрерывно схемы с его ленин строк и и хождением они короче до хорошего перформанс они довольно я так напрягаюсь я я почувствовал там чем то что короче проблемы будут обязательно еще и за базы я прям оказался прав я решил запустить в команд было несколько как базу посмотреть в миску соль а тебе не надо за ручками смотреть в тебе иску или интерфейс короче не нужен и говорят так а как это вы предлагаете делать запустит ask masters of правильной командной строкой конфигом и он умеет говорит так так так так я запустил ну ладно сделал запрос написал не вы съели подобно a warm up 1 дном перлова вам стиля мне был ответ я получил я так напрягся и ради интереса заглянул все-таки в эту схему хранения данных а люди поверх колонн личного дизайна напилили такой что-то среднее между от jack store джам и некоторыми оптимизации вокруг всего того чего что могли ну то есть если у вас 50 булевых флажков ну ладно 50 этот прибор ну короче большое количество булевых лажа очков они могут его в но при этом на уровне arma ii таск мастер а она выглядит как в принципе что то нормальное но в этот момент ты хочешь по селекции ты не можешь найти скажем всех людей с женским полом или всех людей там потому что она все со компенсировано и это пугает из чего я говорю смотри у нас есть набор проблем первое это настоящих и ттп 10 потому что я был на этом могу кататься по 10 как бы написать это какой-то микс между до версии 0 0 1 0 1 0 1 1 то есть вот все то что вот прям кровь из носу нужно есть а все остальное нет поэтому это будет ужасно вторая большая проблема это ужасный отжиг сторож настолько ужасны но как бы компрессия булевых флажков но это прям боль вторая проблема я performing он у нас ходит там от 100 за врп со всюда тысячи это лучше типа показательных клубы на самом деле там обычно хуже никакой горизонтальной масштабируемости при нем можете забыть напрочь стабильность нового как бы если иногда до а точнее почти всегда людей ночью будет ли там про разработчику чтобы они пришли что-то если что экстренно починили или посмотрели то есть стабильностью не пахло тёлки мин спид это вообще отдельная боли но как бы у вас есть разработчики там вот там гейм-дизайнеры вас есть перловки си плюс плюс и короче и вот этой всей команды дружно они ходят вокруг каждого из проектов из-за чего там количество людей она всегда будет допустимо низким из чего был сделан вывод надо набор свечей который как бы не будет протянул решает проблему оппонент p1 добавить websocket потому что уже как бы все 2017 год он же сторож ну нормально они компрессия на подогрею шесть глаз подашь надо поддержать старые напилить новелла api потому что без него ну как бы хорошо бы чтобы было с ними приятно запуск каких-то функций или каких-то действий по от времени ну потому что у них это имитировало был них там enfeeble бук есть огромный который раскатывает на специализированную машину огромные кром то вы и как бы это уже боятся монти нить короче руками и каждый раз когда просится еще что-то добавить там переключить перекрестить ну короче молятся и делаю ну как бы это плохо там на ну поэтому сказали вот уровень исполнимости надо но есть один минус 15 сделать чтобы как бы не в 5 разработчиков ходил вокруг там не знаю 1 багио хотя бы полтора или два лучше один конечно это идеальная ситуация но не всегда горизонтальное масштабирование мы никуда не убежим потому что 2018 год когда единственный способ потому что берутся то купить еще более толстую машину потому что хождение в базу это боль по времени по всему и а в играх или в приложениях не так страшно если вы нарисуете круглешок и он там секунду покрыт в игре как бы если это пошаговая боевка там 78 а если это мультиплеер быстрый ну и как бы вас убьют если это будет медленно в это играть не будет никто окей начались элемента ция слой на слой сети но с ним понятно sim + плюсом понятно и решение ну потому что если + lucy можно быстро писать зачем мы сделали хендлер лошадь такое если очень упрощать конфигурируется lua state потом обратным способом написано строковый индификатор который приходит джейсон рпц а то что будет вызвана на эту функцию очень примитивно но у не в тот момент уже так было поэтому надо было поддержать как она сделана чуть ниже событийный цикл без него никуда thread пол для того чтобы исполнять наши функции которые пришли как не пришли захотели по которым в процессе выполнения той или иной бизнес логики надо исполнится и для того чтобы это все как-то работала и делегирование минимально было взяли просто обычный дизайн task-ов ключами кроме сами из 11 тире 17 стандарта и вроде хорошо что внутри внутрь положили свежая модные bus to disguise без том это гост 166 и дальше очень удобно парсинг и т.п. на самом деле он очень реактивный то есть там разработчик реально запарился чтобы она была реактивность если где-то не кэш там парсер он под почти что имитирует потока вость потом и там все в обвязана красивыми свечами код читаешь он не везде идеально написано потому что надо быстро ну чтобы он быстро работал но кот читаемый быстро про лазишь как бы использует документация вполне годная бухту надавать должен один из немногих проектов где бустовой документации все-таки не отстает на 5 релизов дальше для того чтобы интегрироваться хендлера melua взялись l2 очень приятная обвязка для плюс плюс а я использовал в разное время нативные интерфейсы использовал бриджи и смутой использовал разные части но это не так и hotel sole 2 позволяет многие штуки те спрятать а во-вторых код там все-таки читабельный много шаблонов которые не перегружают код а именно нужны для того чтобы инвариант какой-то 1 плюс еще человек бисера защищает о том что как запустить лу остыть машину с минимальным у вверх и дам и это почти что так там у вверх этом максимум до двух процентов доходит при очень сложный женой сборки со стороны си плюс плюс а вот если вы что-то на стороне плюс плюс такое страшное написали что нативно нельзя сделать вот там до меня не доходило больше двух процентов я просто ли вы еще бенчмаркинга нить для пула взяли от группы почему электрод группы простой ответ туда можно функцию положить которое будет или слушать или смотреть как ты просто и использовали ее мощный модный тренд пол взять но там будут вопросы с кастомизацией временем жизни не хотелось про это решать хотелось чтобы пойти запустить или thread или функцию и она имела имела семантику worker of просто понятные точки кастомизация очень удобно как выглядел слой кастомизации слова ковырялся я с этим недолго я чтобы интеграционный слой написать я поковырялся буквально день или два большая часть того там стоит ли конфигурировать это типа просто за инициализируем state даем те p-cad же дефолтный которые уже есть инициализируем ниц и лидируем радуемся дальше очень простой это синтаксис лям пришедший к нам си плюс плюс 11 очень просто понятно и удобно и самое главное когда ты вот таких много хантеров описал все остальное уже идет проще почему я именно этих энвера это интересный момент с этими фермерами связно что вот каждый finder который вы видите на слайде он был написание с первой попытки то есть их там где-то порядка 200 хендлеров вот эти шесть не получилось короче без одной баги написать с чем связано связано с тем что во первых не ошибайтесь при передачей индификатор of ну то есть эта штука если там написано so if they intel и double если вы на бум напишите она не будем она скатиться к тому что вы сказали что но это некоторая особенность ну такая что интересно на этом наборе слои методов это связано с тем что не очень хорошо копировать большие state и в фары из того как ттп слойка или websocket нам слоя поэтому лучше по запросу работать лучше точечно но по запросу и вот после того как вы описали вот эти все методы обычно миллиардами си плюс плюс 1117 вы можете пойти загрузить из файлика вошло а кот в частности это тест тесты были просто их запустить и вот когда я написал там портянку из интеграционных слой я говорю ну короче идите напишите мне теперь тесты и ло разработчики используют просто lua файл написали вокруг моих методов тестирующие обертки потом я сел и написал плюсовую часть и мы это все собрались за три дня ну то есть api повторить которые они писали там достаточно долго мы смогли за три дня благо что там были опытные разработчики с обоих сторон а что по времени по времени в 18 минут ох тяжко то да это была операция 0 мы ее собрали все с тестами вот этим всем где-то за полторы-две недели и сразу почти что дали в продакшен то есть неожиданно люди почувствовали профита того что делают не за несколько месяцев как им обещали а типа за пару недель типа денег там двери в половину от полутора недель до 2 с половиной писания и примерно где-то еще пару недель там точечного деплоя потому что там были нюанс из их инфраструктурой если бы не было их инфраструктуры то мы бы за тепло люси я думаю за пару дней и буквально через это мы количество машинок пять или шесть машин просто выкинули все заменилась 1 это прелестно ну как бы не потому что там потный reforms in a потому что они не итерации рефакторинга не улучшали форум создавали скорее бизнес свечей и персонами там не очень страдал там в основном все упиралось в интерпретатор и других языков потом она еще одной из операций а промежуточные пришли сказали знаете ну как бы мы много лет мучились там кэшировать на уровне lua кашира вали вот где-то в какой-нибудь прослойки или не дай боже в бане ну дайте нам уже какой-то быстро кошек ну взялись и плюс плюс один из 17 нардепы сделали простой кивер ссору вообще без индекса просто наобум люди сказали спасибо ну потому что неожиданно эта фича было сделано типа заполни деле и еще два дня на полу разработчикам раскатывал причём надо сказать должны с каждой последующей итерации разработчики которые без нашего ведома трогали это было больше это позитивно это означает что то что мы делали она была не в саму себя распространялось как она внутри работает кэша впервые не ферментации он был однопоточный неожиданно очень захотелось титулу ну скажем так некоторые особенности заставил нас сделать ее немножко потока безопасная немножко этот тип a ride в райт локи и немножечко наша операция была дольше когда бак фиксили нового типа быстро выкатили быстро поправили еще раз выкатились это типа суммарный автора 1 операция заняла где-то порядка недели все то есть от начала создания пищи до deploy а потом не рассказываю плюс плюс разработчики медленные но бывает итерации один жила-жила но потом люди между 1 2 ты рации захотели нормально он джек сторону то есть люди начали понимать что короче вот плоском прессе это типа способы но не очень хорошие начали думать как сделать обжиг сторож с понятным для людей то им и как сыну как бы чтобы это было удобно но честно скажу я сломался я воткнул мангу ну то есть black jack store джеффри табло мангас смеси plus plus драйвер массивным драйвером потому что он позволял некоторые моменты лучше за мультиплексирования нескольких уровнях что позволяло сделать более управляемой у workflow исполнение всего для лимонку стало приятно схема в принципе не намного усложнилась появилась еще одна часть которая работает с мангой которая защищает тебя от разных проблем но как бы мы выполнили в пол в принципе все то что просили от нас мы сделали но вот девелопмент спит до сих пор еще страдает и есть вопросы с этим и горизонтальную масштабируемость очень хотят горизонтально то что как бы когда у тебя много много машин когда у тебя не очень много машин все таки приятно когда можно не платить все знают поэтому мы начали долго долго думать смотрели на вторую операцию картинку и поняли мы хотим третей итерации чтобы 7 механики были асинхронными почему потому что когда у тебя сеть проходит через хин ер который исполняется на три пули потому в кошель это все обязательно будет обмазаны дизайном с блокировками обязательно будет обязана синхронными вызовами быта и ты начинаешь пытаться оптимизировать такой код у такого кода есть будущее у такого куда есть разные подходы но нам для задачу когда у тебя задача фактически это написать applications сервер такого к сожалению не может быть будущее но мы решили что надо смотреть варианты варианты были такие взяли рассматривали 3d мьютекс акан варваре и был и что-нибудь там не совсем заходила посмотрели а давайте попробуем все то же самое но с файл стоит машину с автоматом написать я оказалась неожиданно что от проекта к проекту состояние авто мото она динамическая поэтому нас что-то там типа асинхронный автомат динамическим набором состоянии сложно говорить сложно программировать сложно поддерживать и мы подумали нет потом нам обещают в си плюс плюс и двадцатом или можно уже здесь с помощью был стадия взять можно попробовать кручины взять там много вариантов как взять к рутины типа boost контекст пусто а закрутить два ну короче как попробовать крутим плюсах их много вариантов ведь проблемам нет еще надо замочить на состояние lua виртуальной машиной и вот этого всего и много-много слоёв абстракций я как бы не решился ну как бы я экстремал но не на столько экстремал ну то есть диплом фичу тестируемую один день я ищу готов морально маленькую причем очень маленькую большим покрытий мини-тест а вот что то вот такое тащить продакшен намного слою диспетчеризации нет и последний конкурсант он посмотрели на actor модуль отдали акторов не буду сильно углубляться но если базовый это вот очень похожи на комбинацию того что нам надо было puffy чем динамического автомата асинхронной модели принятия в если очень шлиц это вообще можно и без мьютекс of на вход и выход ну короче достаточно много было точек кастомизация самое главное позволяет выкинуть блокировки вне явных местах а в явных их как бы не писать ладно но как бы до 5 горизонтальный и опять приходит эти люди говорят мы хотим собрать ваши блики фиксируем в 50 инстансов на одной машине накрыть engine и сам или там один огромный engine.exe много applications которым мы так думаем думал мы на самом деле смотрим еще на список того что наступит вы понимаю что вообще если правильно готовить та модель акторов еще работают тем более умеющий уже библиотек которые решает там самое главное это библиотека это главное ее отличие от всего что есть она позволяет внедриться в ту кодовую базу которую вас есть если немного готовить свой ухода выбор то можно профит добыть быстрее чем внедрение нового framework а а никто не любит из плюса веков добавить гулять 35 фреймворк в вашу программное решение мы так посмотрели начали переписывать нижний уровень во-первых мы поняли что нам надо избавиться от их хендлеров и хотим просто интерпретатор la nuit а чтобы у тебя был стать ложь ней он там запускаться на всем выделенным труде чтобы он общаться с миром ему сам без блокировок общаться туда-сюда роутер нужен для того чтобы за вместо роутера фактически нужен для . кастомизации который позволяет бизнес-кот дописать на уровне си плюс плюс а если там фильтрация нужна какая-то или специфичные сессии ну короче то что нельзя заказ тренировать на уровне la это просто дополнительная . оптимизация для плюсовых разрабов смотрим на это так сказать то что у нас уже было долго долго смотрели поняли первое отказываемся от всех дизайна со свечами кроме сами 3 нежизнеспособна ну покрайней для нашей задачи отсоединяем явную связь с бытийных циклов и трат пулов ну глупо ну как бы тот момент когда быстро надо было собрать понятно сейчас когда у нас появилась чуть-чуть времени и мы там баги фиксят между вот этим всем надо затем неожиданно захотелось иметь несколько событийных циклов потому что иногда бывает так что на один ты сидишь в серверах этапа и высокие то на другой доскажу садишь клиентские ну тоже в принципе og второе добавили абстракцию road акторов заменяем переделали дизайн кашей пока тоже уже ничего инновационного в принципе тоже самое единственный момент обжиг сторож за счет того что он был на манге он нас защищала того что мы не работали с дизайном блокировок а у нас был пунктом очередь и актарой и каждый actor на зама блины на свою очередь он ее разгребает удобно немножко пришлось про и защищаться слов сластей там и фактором это было связано с тем что сюрприз-сюрприз ты запускаешь в отдельном труде у нее есть немножко шаре новостей до между плюсовым миром с твоим миром и там надо аккуратно переливать данные в этот момент actor служил таким интернет еще один но и свойства тигра ционный leer который нужен был для этого отдельного выделенного утра да кстати интерес момент это отдельный выделенный интернет и за счет booster группы тоже был запущен в едином месте и как бы джонни л'си по тем же правилам и это удобно что все авторы исполнялись ровно на том трат пули который был в системе и это очень удобно ну естественно мы строим топологию между ними и мы начинаем проявлять сообщение они начинают жить вообще не позволяют выкинуть в ней еще большим количеством мьютекс авто что механика передачи сообщения нам всегда полезно горизонтальная масштабируемость мы вроде сделали все ну то есть это треть итерациями вроде хорошо обычно говорят что на 30 рации херь это на прошу прощение портят продуктовые решение и начинаю писать name и нет мы реальным но компонент перри использовали но горизонтальный муж-то берлин не до коновалов вот про ально ну мы начали это собирать взяли engine x взяли observer сделем он все пока хорошо запустили на несколько applications серверов вроде тоже неплохо вроде как бы так раз и она работает начале партии взяли тестовую луну большой обвязку них есть много ложкам куда ему одной из игр попробовали запихать это туда с болью но как бы мы начали запихивать неожиданно из кейсов который прилетел неожиданно engine с приходит в observer об серверах идет в мангу и неожиданно приходит тайм-аут по времени уложить логично ну а когда много пользователей она не будет быстрым не будет ли таким классным кстати для примера все-таки попробую это смотреть что же там такого тормознут а ну кто кто из game дева знает кто не изгибу поясню вот у вас есть какая-то игра скорее всего у вас есть пользовательская сессия у вас есть там сессии каким games а если у вас есть комнаты у вас есть ну короче куча разных объектов которые должны быть в горящий памяти который выкидывает горящий памяти вы прочитаете ну да аккаунт и лидерские сессии дам это я немножко раз синхронизируется со своей анимация ну бывает но мы все равно смотрим на эти тайм-аута и понимаем что надо с этим как-то жить мы понимаем что нам надо взять динамический стоит который будет во первых быстрее во-вторых он будет между всеми машинами потому что одна из проблем монголии топор каждое observer а если он не попал в кэш ну если пользователь попал не туда the observer должен в мангу сходить и получить оттуда данные но без этого никак и можно до откуда-то подгрузить в наш кошек поэтому для того чтобы мы придумали что нам нужен свой кошек какой-то большой распределенный кошек мы начали думать что от него требуется первых он почему-то он неожиданно оказалась должен быть семантикой че людей мы смогли какой-то вот такой набор очередей там active and you к вк ну короче не будет перечислять о чем говорят ну хорошо очереди нам конечно нужно нож и нам нужен киева или сто раз уж мы вспомнили какой-то вот такой набор киева листва раджей там aerospike редис memcache и ты так начинаешь думать так динамически state у нас уже состоит из ребят им кью у нас со 100 ну короче с кучей разных компонентов а потом вообще ищу как бы пришли люди говорят но он вообще иногда должен выборки делать что где я начинаю просто реально заикаться в этот момент когда вот мне предлагают вот из этого всего надо собрать динамический state написать как бы каждому из этих вещей интеграционный слой но том что уже было сделано но это работы там пару недель плюс тесты плюс за deep ловится но это не долго на самом деле но как бы ты начинаешь ошибка попытаться подобрать варианты поставить видеть ведь а нам на еще один момент который я забываю все надо говорить об сервера не должны жить внутри очень большого такого дина тейта возможно это не состоит может представляться в виде там какой-то чинала который не имеет семантику чистое очереди или имеет семантики выбор ну короче какое-то очень гибкие заморские стоит и мы начали перебирать попробовали подумать о кассандре мой коллега предложил я так вне в нервной напитали кортни сандра давай без меня у кассандры есть много кейсов когда она выигрывает но там есть много докладов у одноклассников где они идеальны готовят кассандра но готовить кассандру это типа нанять ещё 52 52 5 devops of которые будут думать только про конструкцию на ней это короче норма на самом деле для нее потом мой коллега говорит а давай воткнем инновационный базука крауч она короче мастер мастер она умеет короче разные штуки и тaк и я так думаю так ну ладно как на транзакция в подгрести построить систему очереди или чинов я наверное придумаю но вот это слово мастера мастера и и вот логически гибридные часы я вот счет побоялся я на самом деле долго искал другое решение неожиданным другим решением так как у нас уже есть ло разработчики в принципе и я много-много разных докладов но я ль тарантул почему его во первых тот же самый la а во-вторых видеоуроков тренингов уже плода сад по тарантул очень много ну и в третьих как бы есть понятный чате в который ты приходишь пишешь проблемы тебе с очень высокой долей вероятностью ответят на него то есть 99 и 9 потому что можем просто в общем потоке пропустили этой почему тарантул и был очень шикарный доклад на на кон столь тарантул плюс так он ну короче какой-то доклад но конференция про тарантул было это маман сандерсон рассказал короче как они используют у себя в облаке и на самом деле я проникся тока к они построили система очередей это почти то что нам надо было другая сторона это покрывает необходимость того что нам нужен какой-то киеве ли стоишь там действительно 95 раз вовремя нужен киева или сторож но некоторые просто на грани нам иногда нужны сложенные выборки и если нам надо где-то хранить много мид информации берем тот же тарантул кейч упал позволяет решить кучу проблем мы взяли мы заменили тарантулом интеграционный слой для сервера мы написали как раз таки за полторы недели на плюсах то есть там чисто просто просто добавили в нашу портянку всех акторов еще один actor умеет ходить 2 антон и умеет принимать запросы специальном формате просто быстро и надежно дать + + + просто быстро и надежно и багов продакшене мы решили что динамик стоит у нас им тарантула мы счастливы и довольны и мы в принципе живем вот такой конфигурации у нас есть отдельный info да да я вроде успеваю я по времени смотрю я успеваю же да подожди до вопроса там еще до я расскажу до конца нам все нравится мы получили систему которая умеет в мастер мастер асинхронный но нам этого достаточно мы получили систему каналов мы быстро писали код на си плюс плюс а и это очень важно ну то есть многие расскажут что си плюс плюс долго очень быстро в продакшене но при этом это дорого там людей это не так ну то есть современность плюс плюс этой не си плюс плюс 98 это современный модный си плюс плюс которым как бы приятно жить и где вы когда и тебе не хватает динамизма подключит и луанну как бы не сложно но если подключить любой другой язык но другими ну как бы я не имею права ним как бы вот это правда как бы от тесты много развей ну как бы есть много библиотек которые позволяют течь джим о кабуз тесты просто писать ну почти просто писать тесты когда ты один раз это первый раз все прозу сложно но когда ты хотя бы полчаса поигрался с этим это уже просто си плюс плюс хороший нормальный язык microserver стенах и ттп это не только уже удел не знаю питона java script арубе ну короче не только скриптовых или java той же это в принципе хороший шанс ведь чтобы делать то что должно бы очень под большой нагрузкой когда вам говорят все плюс плюс это сложно долго и больно они всегда в версии иногда проверяете вот мой проверили нас получилось мы интеграционные слои для любой наши погремушки писали не дольше полторы двух недель это же приятно приятно ну как бы как то так меня все 1 раз вопросы ни одного профита меня пугает и очень понятно все рассказал или не слышно вот до или непонятно было очень понятно или очень непонятно кому было очень понятно поднимите руку кому было очень непонятно поднимите руку а почему одни и те же местами очень непонятно пройду и закапывайте вопросы ребята вот вопрос отлично привет 1 раз аж привет расскажи пожалуйста писали ли вы какой-то код внутри тарантул именно на воле вопрос использовали ему хранилище из нет так не получится если ты хочешь ту магию очередей про который говорил те тебе придется написать много кода на автора 0 и если бы не было большого леса лекций ты бы фиг в этом разобрался это там такой ну не скажу что сложный квест но такой непростой то есть он где-то среднего уровня ну как бы мы прошли мы смогли спасибо еще вопрос здравствуйте у нас раз добрый день скажите просто выдавали оценки вот этот код мы пишем бы быстро этот ход мы пишем медленно быстрее медленнее расскажите методику оценки вот как вы мерились скорости относительную скорость между язык смотрю я верю оценку скорости того как это быстро или медленно но мирилась во первых там нет ни какой хитрый методологии типа вот ну то есть как померить скорость разработки это квест на самом деле но если очень простая примерно выполнял набор таких уже упражнений в разное время я примерно знаю что взять азию взять вот этот этот готовы компоненты сбу стоит они очень быстро страх мои коллеги говорили всегда устраивали время но я отделил это на 2 и в принципе мы всегда угадывали ну то есть вот все то что я рассказываю спили волос не команды стать человек как это все любят рассказывать это команда из трех иногда 2 приходящих разработчиков который просто между проектами бегать которые просто помогали делать ну то есть принципе там и дробь 5 там 400 человек а вот такое скажем можно получается вы сравнивали задачу которую делали второй раз с первым проходом но ну я бы не сказал что прям сравнивал я примерно оценивал но потому что на си плюс плюс я пишу уже достаточно долго то что в моем родном городе как известный или гопник или программист поэтому пришлось как бы учиться очень быстро уметь программировать чтобы не догнали еще вопрос о на галерке я вижу негромко нельзя на запись до нас потом убьют за это слышно на меня да спасибо вам за ваш доклад очень на самом деле понятно интересно чуть-чуть цифр можете сказать дома такой нагрузки вы говорите вроде именно о осиба ей я просто ночью думал вставлять не встали страшные слайды андрея о какой нагрузке изначального вот таск мастер она работает в виду мог выдержать не там до полутора-двух тысяч черкесов при условии что в базу не входит когда мы неожиданно вот это написали даже в 0 тарану 0 операции не ничто во что все-таки 3 2 3 вот там уже от 50000 руб с в одну ноту при этом это там надо не забывать что на одной ноте крутится плети шин сервер в нем крутится несколько loa state of и скорее всего это не только допустим игра или в папа там подгрузили еще потому что одна из свечей applications сервера это возможность уход катаре лауда безвозвратного прям типа вот сказал ему секрет им интерфейсам websocket ним перезагрузить мне в игру зе вот оттуда код он короче дела и понятно в этот момент у нас были падения но в тот моим когда работу от ну как бы прося в тот момент да происходит ход катаре лаут а в тот момент когда нет там от 50000 и я видел максимально в одну ноту свыше ну очень приближались к 100 там от 90 до 95 потому что там есть некоторые нюансы там еще скажем так железо не идеально ну то есть как бы каким бы гениальным код не было как бы я там не не чинил его и не выкидывал расширит поттер и сколько ядерно длиной на одной машине к сожалени только 16 я думаю что если бы мы ну как бы у них больше нет ну как бы у них много машину они все по 16 ты для них это стандартная конфигурация и мы проводили бенчмарки не настоящие но как бы benchmark всей системы это не очень продуктов ну как бы это некоторые метрика давай скажем то это мылась вы же в виде я видел выше 150 тысяч не 150 х 150 тысяч но опять же это бенчмарки на более дорогих машинах бенчмарки на ну короче больше толще тачка больше результат как бы но зато мы доказали что вот актара хорошо стелется ну то есть это на что многие рассказывают к рутины в двадцатом или в двадцать третьем стандарте вот они помогут нам решить те проблемы ну как бы я вот не готовы 20 до встретим так я знаю что будет 20 я увижу в двадцать третьем дай бог ток в компиляторе работающим поэтому как бы взяли то что работает сейчас где-то 150 если есть вопрос я могу до отвечать по цифрам не в принципе понятно для оценки спасибо вам за доклад еще вопросы коллеги давайте смелее понимаешь они говорят что им доклад был полностью понятием возможно пропустил слайд вы сказали про 50р 1000 ps на но ну а насколько был минимально она строится из 3-5 not ну то есть там есть нюанс что каждый ноды они должны нечетное число потому что в tarantul и есть специальные магическая цифра к чтобы сергей а потом если что вернул машину в строй ну то есть они нечетными числами собираются всегда 35 инертных курация еще вопрос о нет там вопросов не нет права знакомый но смелее то давай не будем мучить ладно спасибо sage как раз нет то попрошу спикера выделиться лучший вопрос среди слушателей и вручить а вот надо было за это тогда бы они лучше говорили не давайте если что можно еще попробуй как-нибудь вопрос задать на последнего то есть тебе ни один вопрос не понравилось мнение есть мину на руках не не мне понравились все я могу и не как бы вопросы которые мне понравились есть но вот видевшие всегда есть ему как бы я знаю спасибо за доклад почему не sharding почему они шарлин где я не знаю проблема в том что все что не из памяти медленно отдается но то есть нет я понимаю сортировать вообще можно не но он водой sharding это как бы это их религия давайте мы так сказать и оставим это за скобками если по факту там выглядел так история что иногда есть ограничение старого кода и как бы новый код который пишется там уже нет таких ограничений алуа у них изначально это просто локонов точно гейм-дизайнер он не ну как бы он не полноценный разработчик он человек который ну там думай долго про так он не пал на полноценный программист он долго думает про то как сделать игру максимально интересной и да да простите меня геем разработчики не обижайтесь на меня пожалуйста я не хотел вас обидеть они думают про то чтобы игру сделать интересный захватывающий экономику прочитайте вот это все когда и как бы и у них были ограничения тот момент когда писался им там будто ск мастер он это была там в районе 2008 года там ну даже может попозже в тот момент был там вот хендлер вот вот это пределами члена не был у вся поэтому как бы новый код может быть и можно будет за шар одном из текущей прости ну как бы технически ограничение мы живем в и просто я довольно много сталкивался с ограничениями в шар денги в плане интеграции между пользователями которые там живут на разных нот авто есть стандартная для game делала вообще проблема когда там путь там быть элемент инвентаря надо передать от одного другому там всякие дикие могут быть варианты вот есть ли здесь какие-нибудь проблемы или только поддержка старого года посмотрел у нас с этим не ну то есть я мне такой кейс рассказано то есть как мы собирали решение ну как три руни не рассказывать старые люди не люди короче тех кто больше всего смотрят на этот проект короче какие наборы кустов и ограничений надо и балансировать как бы в конечном итоге мы или прямым манга запросам но с особенным дизайном запроса чтобы не было публикации не дай боже минут а в конечном итоге через дайнэмикс стоит ну ты говорил в нем делаешь логическую транзакцию живешь с ней вот кстати у нас победитель он заставил больше всего меня говорить вот он да ну ладно аплодисменты победителю достается книжка прошу прощения доставляя счастье"
}