{
  "video_id": "oeraQtoP7fQ",
  "channel": "HighLoadChannel",
  "title": "История миграций ИБСО. Как работать с Oracle от 7-ми до 18-ти / Иван Шаров (ЦФТ)",
  "views": 1734,
  "duration": 3171,
  "published": "2019-01-14T00:11:19-08:00",
  "text": "добрый день уважаемые слушатели очень рад что пришли на мой доклад к историям начиная с версии 7 доверься нас название такой 7 до 18 частично аналогия там с рабочим временем ну а есть 8 часов окончание рабочего времени 078 иногда зачастую людей начинается рабочий день о чем будем говорить прежде всего немного расскажу о продукте пса совсем чуть-чуть чтобы у вас было представление сколько за продукты как он оказался на high логе почему про него рассказываем именно здесь немного расскажу о том что нам помогает быть вместе 40 уже начиная с версии 7 версии если быть точным сфере 734 поговорим о том почему нам и нашим клиентам приходится обновлять орка и какие мы для этого используем и инструменты и средства о компании центр финансовых технологий провайдер финансовых решений компания большая работает больше трех тысяч человеков имеет реал и более чем в 12 городах основной центру тем не менее основной центр разработки находится по-прежнему новосибирске достаточно большой центр внедрение находится в москве но все равно основные разработчики тестировщики и основной мозг находится прижима действенность сибирский базируется в академгородке частности в технопарке и счетом несколько зданий мисс и о себе я работаю компании с 2001 года с 2003 года я являюсь сертифицированным администратором оракла на тот момент это было урока 8 май дальнейшем получил сертификацию по всем продуктам опасения сим база данных включай там 9 10 вот последнее к 12 версия с 2015 года являюсь руководителем группы анализа экспертизы и тестирования занимать как правило проектами связаны с нагрузочным тестированиями погрузчик hyster превысила нашего флагманского продукта и пса анализом проблемы производительности связанные с базами данных тут основная деятельность что такое псу сразу скажу что веб-сайт внутреннее название такой фактически же сленг основного флагманского продукта компании zepter банк то есть до 2005 года продукт так назывался ипсо и в документах многих час до фибры по установке полгода пусть и разработки это название фигурирует это снова прижилось и частично там люди которые работают с банковскими системе не хотят полковники такое празднование ваш epson узнаем во все слои люди можно работать вот но тебе 2005 года система официально поменяла sonnets of the bank менее но внутри как бы термин написал он живет ее до сих пор как бы достаточно широко используется система начала развиваться разработал стал 1995 года сразу скажу что это была не первая система банковская система которая разрабатывалась центра финансовых технологий оптические то уже 2 или даже 3 система которая выходила на рынок стоит а система это система это кори банкинг кто такой кори banking ну как вы знаем банках достаточно много систем различного рода занимающимся этом различные эту деятельность то есть и кредитные системы квантовой системы количество их может исчисляться сотнями но все эти системы тем или иным образом взаимодействует с одной единой системы с той самой системой для хранятся именно ваших деньги информация о том какие банки есть счета и какие средства надя счетах они всегда хранятся в одной единой системе кори банки то есть все сходится на нее то есть если вы перечисляете какой-то сумму денег не важно куда там допустим там другу счет дам другой банк другую организацию пока ваши деньги не пройдут через курить банкинг они не попадут на нужный счет они не спишется сошел с вашего счета так вот и все это и есть корень банкинг достаточно большое число клиентов у нас использовать то есть полого вода момент это приви там более 500 финансовых институтов российской федерации то есть в принципе систему острова на не только сразу скажу банковских организациях но в том или ином виде на использовать допустим крупных корпорациях почему а данной системе и какое какое отношение данный системами тхай вот для примера я приведу такой график на этом графике отображены день работы системы а именно 15 января 2013 года одного из крупных банков на тот момент на графике отображается количество запросов которые выполнять система в секунду то есть это ну 15 января нельзя сказать что какой-то особенный или уникальный день вот в общем-то достаточно такой типичный обычный день то есть система работает в среднем с интенсивностью до полумиллиона запрос в секунду 2013 году то есть уже на тот момент количество запросов системе являлся таким числом еще 5 лет назад надо момент я не могу сказать что вот это вот ситуация является там какой-то экстраординарный или уникален а сейчас уже несколько банков достаточно крупных которых количество запросов выполнимых секунду ворог ли уже превышает данное значение то есть самое настоящее хайло какие есть преимущество системы которые обеспечивают и и лидерство на рынке и столь долгий цикл жизни то есть фактически 95 года система развивается разрабатывается уже прошло фактически больше двадцати лет тем не менее мы являемся лидером этого рынка система активно развивается и надеемся будем жить еще достаточно долгое время самое первое преимущество о котором ключевое преимущество которые системы это то что система устроена слайсер до разработка со своим языком программирования или плюс в общем-то это твоя среда совместно с языком называется технологическим ядром системы имеет свою версию фактически cv3 сейчас предлагает можно купить отдельно продукт оформить лицензию который будет содержать себе голы технологическая ядро и использую его можно начать разрабатывать какие-то финансовые финансовые продукты вот дополнительно есть универсальное рабочие места навигатор который обеспечивает фактически рабочие места и ну интерфейс работы к системе отметим что все поставляемые банковские продукты которые реализуются в рамках системы то есть как цифры ты так и сторонними разработчиками допустим своим банком они реализованы в рамках этой среды то есть на языке перри плюс когда банк получая систему он соответственно получает готовый набор банковских продуктов в этой системе и получает сразу исходные коды тех банковских продуктов которые будут у него работать то есть фактически это пик некий аналог open source of только с уклоном для банка наличие исходных кодов она помогает прежде всего и сотрудникам банка знакомиться с возможностями и особенностями особенностями работы системы повышает уровень доверия к системе какие качества о реализации мы гораздо лучше и больше доверяем тем продуктом и тем систем исходный код которых у нас есть мы можем не полностью не разбирался в этом исходным кодом не можем не являться полностью экспертами но если у нас есть исходный код мы знаем что в случае необходимости мы сможем разобраться и с этим продуктом она у работать гораздо комфортнее свое время когда система выходила на рынок этого фактически начала 2000-х годов 2002 уже 2003 год у нас уже были достаточно крупные внедрение перед нами стала проблема выглядело следующим образом оракал в тот момент сформировал палетку выхода и жизнь на цикла своих я своего основного продукта именно с базой данных где была как бы обозначена что каждые два года у нас будет выходить новая версия базы данных жизненный цикл и и будет приблизительно составлять там пять шесть лет мог меняться то мы в принципе такие случаи были там чуть больше становился в некоторых случаях мы как правило эта цифра как бы придерживалась после окончания жизненного цикла этот как в основном жизни цикл взрывался пример саппортом наступала фаза так называемых ценит саппорта после которого уроков говорю следующее что на этапе xt не саппорта мы сокращаем уровень поддержки который вам обеспечивается то есть частности если какая-то была обнаружена проблема в нашем продукте то мы будем рекомендовать вам мигрировать на новую версию аркл это один момент не очень приятный для нас и наших клиентов и второй момент связан с тем что на более критично то что поддержка после окончания пример саппорт остановилась дороже для банков и ощутимо дороже но там речь шла о приблизительно 10 20 процентах лечения стоимостью поддержки то есть это в общем достаточно большие серьезные деньги то есть оснований для миграции на новую версию оракла у наших клиентов соответственно и у нас были достаточно большие и они на данный момент до сих пор присутствует как мы стали готовиться к этим изменениям ну во первых за тот момент отчасти нам помогли работы связанные с со сбербанком то есть на тот момент эта компания выбирала для себя аппаратную платформу под нашу систему и было требование проведения тестирования ряда аппаратных платформ соответственно была разработана методика тестирования предоставлено которая позволяла среди преимуществ сравнить преимущества или недостатки этих платформ и соответственно горя взяв свой продукт мы соответственно и протестировали эти платформы по результатам тестирования мы сделали следующие выводы во-первых мы сразу взялись тестируется на новой версии аркл доступны на тот момент это была версия 9 204 обнаружили что существует достаточно серьезные риски и не основной риск связанный при работе на этих платформах а это были платформы enterprise уровне то есть много процессами система там над минимальная система которая не тестеру этот момент содержал 16 процессоров это 2003 год кто уже было достаточно много системой ты про и звания основной риск это производительность и основной способ снижения этого риска который мы но тот момент видели и в принципе он такое остается это проведение нагружая тестов на данных платформах при этом желательно постоянной проведения нагрузочных тестов выводы после проведения этой серии тестов были у нас следующее что во-первых нужны хорошие инструменты генерации воспроизведения нагрузки что существует конкретная специфика конкретных платформ то есть не все платформы работают одинаково хорошо или одинаково успешно есть нюансы связанные с именно с реализацией тех или иных достаточно нескольких вещей на для конкретных платформ то что работает допустим хорошо на платформе x может работать не очень хорошо на подходе мне очки вы x для нас было новостью то что костюмы в принципе об этом под уже подозревали но убедились на собственном опыте повтор call содержит достаточно много не скоро он не оптимизации под конкретное аппаратное решение в принципе каждая уважающая себя компания будь то бельем или hp содержат как выяснилось достаточно много материалов именно связано со спецификой работы базы данных oracle на данной конкретной оборотной по аппаратной платформе к сожалению эта информация не всегда но находится простым доступом и зачастую большей частью содержится в головах там конкретных специалистов там или инженеров отметили то что методика тестирования нагрузочное тестирование для банковских продуктов имеет свою специфику об этом чуть позже я скажу и положительный момент который был у нас по итогу домик sister ним что мы можем успешно работать на версии 9-ой release 2 на тот момент у нас были достаточно хороший внедрение на восьмой версии oracle с отрезком нагрузочные тесты успешных проведения подтвердила нас нас и наших клиентов о том система работоспособна успешно работоспособном на версии деятель из 2 таким образом мы получили ответ на вопрос как нам готовиться к номер semargl прежде всего проводить на груше на тесты для проверено грушей тестов соответственно вам нужны средства утилиты нагрузочное тестирование вот первое средство нагружаем тестирование которое мы стали использовать достаточно широко для progen тестов мы тут утилиту с простым названием стресс имела достаточно атакует простой интерфейс ну нельзя сказать что оно было сделано на скорую руку наверное придется все таки сказать что она был сделан на скорую руку то есть имела так примитивно интерфейс управления то есть верху там кнопочки сценарии тестовые сценарии которую поднялись они писались на языке + гель анонимный блок дается именно секундные команды там вызовы процедур можно было оставлять был такой блог об ошибках сообщался и предоставлялся там индикатора работы утилиты дело в том что при нагрузке тестирования когда мы запускаем сессии сессии работают понятно с регулируемой с задержкой некой частотой здесь имеют и сценарии цикл то есть разные фазы проведения тестирования то есть фаза там подключение к базе данных допустим фраза там загурский начальных данных которые дальнейшем будет протестирую и само тестирование при этом сценарий может находиться фазе как стать выполнение никого нет никаких команд такие в ожидании не постоянно же работает им колбасит без знака поработал подождал то есть интенсивность она соответственно задается интерфейсе управления и в принципе период эти вот утилита запускалась радостно так лампочка мигала неудобства было связано с тем что при тестер небольшого колеса сессия речь в этом тысячах сессий было достаточно неудобно работать во первых для того чтобы если у вас были разные сценарии вам трио запускать не несколько версий утилит было ограничение то что одна утилита не могла там содержать запускать больше 500 сессий поэтому соответственно допустим для тестирования 10000 эти нам приходилось запускать порядка 20 30 копий этого стресса и в принципе сидел человек который запускал выжимал кнопочки стартовать нажимала кнопочки остановить в общем то еще была развлечением но тем ни менее задача основной она решала нагрузку создавала мы получали там необходимые результаты дальнейшем эти средства могу личности о нем были нами усовершенствование вышла новая версия который назывался уже скрип стресс в принципе также не была возможность там ручного управления основное преимущество то что было была добавлена возможность 1 утилиты запускать и управлять списком ролей или списком сценариев то есть можно было несколько их запустить там установить разное количество и одна кнопочка отправь их на выполнение плюс ключевой момент то что был обеспечен централизованное управление этими каретами то есть можно было запустить несколько экземпляров этого стресс крипто они все подключались единую так называем управляющую базу данных и был интерфейс предоставляет это управляющая базе данных который позволял одновременно запускать проденем тестирования собирать результаты и останавливать тестирования то есть фактически нас появилась возможность даже реализовать полностью цикл тестирования без человеческого участия опускались утилиты и через интерфейс нам обеспечили мы запуск их и останов сбор результатов это достаточно нам позволило сократить нам время проведение тестирования исключила человеческий фактор связанные с ошибками при запуске там тестируют то есть когда вас много утилит очень достаточно просто там промахнуться остановиться остановить эту утилиту не в то время или наоборот запустить избыточное количество ролей здесь как бы соответственно это исключалось мы плюс дополнительно к этому был такой еще момент ну чуть назад дело в том что в первые utilities 3 скрипт сценарий писались на языке перри успели и фактически работали в базе данных что создавало на самом деле дополнительно нагрузка на принципе небольшая было но в принципе наш немного расстраивало то есть именно логика самого скрипта нагрузочная она создавала дополнительно грузка на базу данных версии скрип стресс сценарий писались на языке java script работали на клиенте и уже своей логикой не создавали нагрузку на базу данных дополнительно здесь была реализована возможность на самом деле которая достаточно редко встречается ли достаточно там так аккуратно странно реализуется в современных даже средствах накручен дастер не именно возможность передавать параметры между разными ролями то есть это возможно самокритично с точки зрения если вы пытаетесь реализовать некий бизнес процесс то есть там в виду день у нас есть роль допустим оператора в банке которые создают некий документ и есть роль контролера который проводит этот документ соответственно когда оператор это как бы разные руль и роли разные сценарии и соответственно строить проблема том что когда оператор создал документ надо как-то об этом сообщить контролер о том что документ создан его надо фактически отправить в обработку вот для этого скрипт стрессе бы было сделано эмуляции неких эмуляции очередей и соответственно информации о том что коль допустим создал документам помещалась внутренней учить утилиты и уже другая роль там и этого гриба в эту информацию о том что создал документы в одессе каторые занималась проводкой в первых версиях подобного рода лайку приходилось рисовать через базу данных что создавало некую нагрузку так отметим что сразу на тот момент спор специфика наших методика тестирования отличная от тех в итоге который мы до сих простучали особенно тех методе которые используют допустим протестировали приложение ну во первых конечно наших методиках тестирования всегда обозначается цель тестирования роли операции там задержки между операциями критерий успешности теста но для нас и для банковской систем прежде всего критично и количество созданных я народных покерных документов практически не фактически кори банкинг он характерен тем что это фактически это упрощенная грубо говоря машина которая создает платежные документы обрабатывает их ну в общем все это вот основная функция которая должна мне реализовываться при этом пользовательское взаимодействие системы то есть работа операторов и контролеров она конечно важно этим людям и сотрудникам банка это прежде все сотрудники банка естественно должно работать должно комфортно желательно чтобы интерфейс откликался быстро но если какой-то момент и какая-то операция будет работать дольше для нас это не является критичным по сравнению с количеством созданных и обработанных документов то есть у банков есть требования что все это платежные документы они должны быть обработаны полученные течение q это времени они должны обработать за определенное фиксированное время если они не успевают поесть эту обработку банк может попадать там штрафные санкции или от клиента или от регулирующих органов но если как был оператором там и при счете притормозил если это время ты какой-то операции стала то дмитрий секунд и 10 очень жаль но оператор никуда не денется он сотрудник банка он подождет к сожалению которых документах и методиках нагружен стерни особенно сейчас это встречается относительно часто то есть когда банка доля тендер информацию на систему и предоставляет требует проведения на груше на тестирование представлять методику проведения нагружена тестирования не зачастую встречается роли встречаются операции вот цели указать там времен как операции требуется но абсолютно не учитывается тот факт что на самом-то деле систем можно обрабатывать создавать и обрабатывать документы которые создала у нас это иногда расстраивает хорошо то есть мы взяли и провели на грустные тесты убедили что система работает но новой версии что происходит дальше здесь надо сказать о том как у нас происходит разработка банковского продукта cvt разъем то несколько баз разработки называем базы дев день непосредственно разработчики производят кодирование и тестируя свою функционала по мере того как разработка закончена выполнена там написано некая операция или там группа операций эти операции переносятся так называемых дистрибутивные схемы люди которые приносят операции на дистрибутивные схем или дистрибутивные базы вот это не совсем разработчики это в чистом виде именно тестировщики то есть они контролируют проводят минимальный религию кода и убеждаешься что те тесты которые были предоставлены разработчикам тестировщиком они проходят надо на базе такое фактически приемную тестирование стремительная база она характерна тем что это некая такая упрощенная копия банка в ней есть как бы данные есть бизнес-процессы и фактически и проверяется то что именно эти операции они работают как с данного ну некоего мифического банка если каких-то проблем с операцией не обнаружено данные наработки переносим на это лунную базу база эталона это лунная база она такая же как distribute на такого дней нет вообще данных это чистая база когда банк покупает нашу систему то свою жизнь он как раз начинает именно с эталонной базы данных им при стрессах чистая голая база с готовым функционалом и уже в дальнейшем производит наполнение настройку продуктов на этой эталонной базе есть еще как бы база сопровождении но они как бы живут на старых версиях продуктов и использую старую версию допустим старой версии орков этого миграция продукта у нас получается выглядит следующим образом то есть первоначально проводится на груше на тестирование новых версиях oracle проводится адаптация средства разработки внутренних средств разработки под новую версию oracle т.е. соответственно если всплывать какие-то ошибки ворог ли они заводятся в поддержку уроков смерть своих там разрешение если удается там будем получить решение мы пытаемся их обойти в какой то момент мы приходим понимание что наши средства разработки и нагрузочные тесты те производители производительность на аверсе нас устраивает соответственно после этого мы уведомляем наших клиентов о том что мы провели там на грудь на тристану на версию rpl и соответственно предоставляем клиентам свои планы миграции то есть общается с какого времени наш продукт будет работать и будет поддерживать новой версии oracle одновременно за этим следует сообщение о том споком версии с какого с какой версии прикладного нашего продукта и с какого с какой даты мы не будем поддерживать старую версию руку плюс минус там цифры корректироваться могут в течение там месяца-двух но принципе обычно мы этих данных стараемся придерживаться далее проводится миграция бас разработки то есть наши разработчики начинают работать уже на новой версии oracle однако дистрибутивные базы эталоны остаются еще на старой версии oracle разработчикам при этом запрещается вводится запрет на использование новых фич и новых возможностей которые имеются ввиду которые встроены в новой версии or call после того как находит мало версия продукта нашего продукта еще на старой версии oracle мы инициируем процесс миграции дистрибутивный баз данных то есть через версия происходит синхронизация базы разработкой по версии с дистрибутивом базами данных какое-то время достаточно небольшое как правило это время составляет одну две версии наших продуктов а продукты у нас выходит каждый квартал то есть ответственного это получается там от трех месяцев до полугода мы позволяем устанавливать обновления наших продуктов проводить наших продуков на старый предыдущей версии oracle но наступает момент когда в средствах обновления информация о том на какой версию это обновление может ставиться изменяется то есть устанавливаться версии oracle много и соответственно те обновления которые идут клиентам они уже не могут быть установлены на старую и прежних версий oracle client это говорит о том что у такие вот изменения они уже содержат себе какие-то возможности которые задействуют но задействован в новой версии орков старой версии oracle этот функционал может не работать если клиент хочет у нас самом деле данная настройка может поменять но уже тут действует на свой страх и риск также предоставляется и разрабатывать за комплекс мероприятий по сопровождению и поддержке поддержке наших клиентов то есть создается документ замечание по обновлению продуктов not последнее название документа вот связаны с 12 но вот таким вот образом вот аналогичной версии документов они готовились и готовится на каждый новый version cue данный документ содержит в себе все три требования которые необходимо выполнить клиенту для обновления новой версии какие компоненты обновить какие изменения задержка новой версии что там происходит с параметрами и соответственно сама инструкция по обновлению оракал с одной стороны она частично дублирует те документы которые есть у рака у недостаточно хороший документы по обновлению по миграции но во-первых эти вещи как бы адаптированы адаптируем под нашу систему и написаны русским языком отличия документа for call которые то начиная с 10 версии там перестал делать русскую документацию надо иметь ввиду отмечу что обновление базы данных клиента то есть в банке производит сам клиент сами банковские работники проводятся семинары вебинары и завтраки так знаем бизнес-завтрак есть у нас такой формат мероприятий которые проводят наши клиенты бизнес завтраки то есть когда сотрудники банка приглашаются никита никакой гостиницы проводится завтрак и во время так сказать завтрака рассказывается о каких то моментах элементах заведениях появишься нашей системе то есть мы максимально готовим клиента процесса миграции еще раз повторю что прежде всего уведомляем заранее этих датах когда будет новой версии oracle как это будет происходить миграции что ему делать и куда обращался также мы рассказываем о тех но и видениях которые появились новой версии oracle и что с ними делать это достаточно важный момент почему потому что у раков зачастую достаточно агрессивно продвигает новой версии своих продуктов для примера возьмём вот около 12 появилась так и рубцы и мымре общем анонсировать они и стали еще насколько понимаю 2013 году вот один из слайдов в том с презентации с конференции oracle вот уважаемый человек комбинирует вице-президент oracle рассказывал об этой опции они анонсировали фактически эту опцию анонсировали они и следующим образом говорили о том что как бы горкой появляются на формат хрени давно хранение данных по колоночный который обеспечивает вот на слайде стопроцентная рост это конец сокращения времени изучения запросов 100 раз это как бы очень хорошо это очень быстро спички приводили примеры где я говорили о том что использование вот этой опции она там на некоторый запросов которых еще раз работает быстрее при этом утверждалось что для использования то опций не требуется никаких вот изменениях приложения то есть там легко настраивать полностью совместима все замечательно конечно безусловно наши клиенты они это большие банки где достаточно квалифицирован что там эти специалистов который тоже посещают аналогичной конференции там встречается сотрудники мура call естественно у них возникает желание использовать вот допустим подобную и удобные опции однако частности вот конкретно с этой опцией мы столкнулись с тем что не все так хорошо сожалению орган слегка преувеличил ценность и позже в данной опции связано это с тем что данное на рикше на но прежде всего работает только с не изменяем с неизменяемым и данными об этом на презентации не говорилось когда мы первый раз провели тесты с моим reaction мы увидели что объем чтение нашей системе возрос в три раза это было для нас несколько странно то есть мы включили in-memory выделили счетом несколько там сотни гигабайт памяти под подымем реза кэшировать дополнительные данные общем чуть ли не из дисков вырос по сравнению с аналогичными тестах без от рубцы и в три раза выяснилось что такой момент дело в том что для in memory и спорта отдельного вас памяти и смотреть на данные когда изменяется уроку требуется соответственно то данные с диска подтянуть а подтягивает он соответственно подтягивает он не конкретно вот эти данным употребит сегменты данных сразу достаточно большие куски то есть у меня есть табличка том выборе одну запись аура галки они с диска там не знает сотни мегабайт . может быть вот и вытаскивать один момент и второй момент с которым крайне было неприятно столкнуться связан с кем что враг лезть оптимизатор запросов куст быстр оптимизатор достаточно неплохая штука и этот cost buy stop theme затар использовал in-memory только в том случае если у вас на данных не было индекса то есть если на данных был индекс обычникам любой индекс там уникальными камешек важны портал оптимизатор использовал индекса нет тогда только оптимизатор начиналось пользу кем мэллори то есть предлагалось соответственно фактически клиента за от некоторых изучала удаляет индексы ваше появление станет работать быстрее это проверили нет быстрее работать вот как бы такой достаточно актуальный пример для нас тогда вы criminal достаточно агрессивное продвижение каких-то вот таких вот вещей она достаточно сильно расстроило нас и в принципе клиентам необходима доносить о том что вот есть вещи они как бы иногда могут работать но не нашем случае так хотелось бы дополнить нас рассказать о тех кейсах которые мы дополняем сталкивались при миграции наших продуктов на с разным версию мор oracle например части при миграции на если 10 же лишь два были проведены достаточно большие работы с адаптация систем покинул горилла прикрепим кластер связано это с тем что начиная с этой версии oracle был реализован дополнительный класс продуктов там за андрей greed for строчит который обеспечивал построение кластеров для базы данных и обеспечил горизонтальная масштабируемость базы данных oracle то есть можно было взять один сервер типично там стресса raccolta 17 можно было поставить дрездена масштабирования начала чтобы забыл поставить 2 север подключить рук тоже низкой по системе и тем самым обеспечить практически двукратный рост произнести 3 4 5 там в принципе до нескольких сот нестеров николай орешка можно было использовать в принципе данная технология на уроках чувствовалось 7 версии но начиная десятой версии оракал реализовал свой стек программ обеспечения который позволял это делать до десятой версии то использовались там решение сторонних провайдеров сторонних разработчиков которые стоили дополнений денег начинается это версии это уже было бесплатное ходила в базу данных конечно это было достаточно интересно и мы не могли пройти этой возможности и клиентов и более спрашивали запись адаптации с тем подарил peak action кластер несмотря на то что опять же оракал заявлял о том что все достаточно легко и просто иммиграция полностью прозрачна оказалось что это не так но то что у нас была своя среда разработки нам тем не менее достаточно короткие сроки удалось адаптировать свою систему под работы с репликой сын кластер нос функционально все у нас как бы работала но столкнулись проблемой то что производительность все дерил и прикрыв и глостер она все-таки достаточно далеко не горизонтальная эта версия также запомнилась тем что мы столкнулись с проблемой логика lorena платформы о чипе weeks выглядел он достаточно забавно мы брали запрос выполняли его два потока фактически две сессии выполняли один запрос обеспечили там тем самым некое количество обрабатывать бокс мод на графике чуть меня там 500 тысяч брали 16 потоков опять ты выполняли это запрос в общем количество блоков который обрабатывал oracle уже составляла внучек меня 3 миллионов то есть рост есть там не ленин и ну рост есть далее шестьдесят четыре потока вышли на некую палочку в 5 миллионов блоков ну как бы не очень хорошо как бы но ладно терпимо а далее запустили 128 потоков то есть 128 потоков обеспечивает ту же самое производитель как шестьдесят четыре потока при этом сервер был 256 мидер содержался то есть процессор на мощность еще было достаточно много утилизация сервер в этот момент она составляла там порядка тридцати сорока процентов для нас это была достаточно неприятно поскольку система которой на тот момент работал и банке она уже подходила к вот этому объему обрабатываемых данных система проблема оказалась только типичный для платформы hpx воспроизводилась только на супер доме и только на десятой версии несмотря на то что мы обращались и к нашим партнерам и варкал заводили запросы проблема на десятой версии так решительно не удалось спасла банк то что вышло 11 все оракал где эта проблема была отчасти решено почему oracle не смог решить эту проблему не захотел там допустим тут тот момент у них кстати там конфликт начался с компании hp они даже заявляли об отказе поддержки платформе питанию или какие то другие там соображения были ну нам как бы не известно при миграции на 1 ст у версию релиз drop нам удалось использовать уже наработкой который нас были связаны и стрела припишем кластером и принципе мы достаточно легко смогли использовать решение только утром и решение появившийся тот момент это инженерные системы результаты но тот момент это будет самой высокопроизводительной системы для баз данных oracle отличались достаточно сильно отличались чтобы производить лучшие произведения других постановщиком к сожалению во времени мало поэтому я про некоторые проблемы упущу отмечу что при миграции на 12 у нас стал основной раз проблема с адаптацией запросов под новую версию то есть достаточно уровне поменялся оптимизатор появились так называемые адаптивный механизм адаптивности запросов вылилось это в то что попытка была не очень удачно у нас очень много проблем было с падением производительности по причинам плана у нас появился сервис решением этих проблем с нами через аналитики прикладной производительности что нас ждет во первых уроках сокращает жизненный цикл своих продуктов с одной стороны с другой стороны он обещает что новой версии будет выходить гораздо чаще фактическом горит что каждый год будет выходить новой версии с одной стороны это хорошо потому что тем самым весь пучок установка новых версий новых хищного функциональности клиентам другой стороны это добавляет нам работы каждую тырново версии надо тестировать как мы к этому готовимся у нас появляется продукт серый должен тайм был доклад александра каблукова два часа назад который позволяет сократить время простоя у нас есть стенда нагружен тестирования которой автоматизированном режиме прогоняют обновления прикладные обновления и соответственно могут использоваться для тестированных версию роколл есть у нас продукт появился пять лет назад машин тестирования продукт для функционального функциональных тестов которые обеспечат прогон пользовательских сценариев сейчас их порядка там несколько десятков тысяч и позволяет посчитать покрытие кода тестами и появился сервис аналитика производительности связаны с тем что опять же oracle оптимизируется развивает свой механизм построения запросов добавлять на элементы выпустим часто 12 вертеп оптиной производительности другими словами говоря запросы которые работают нашей системе и которую строит oracal не могут меняться и меняться по достаточно своеобразным и интересным не всегда очередным правилам и требуется сервис который бы контролировал поведение этих запросов базе данных чтобы помочь нашим клиентам при работе с этим вещаем вот создали сервис который позволяет собирает данные от оракула по запросам и анализирует или предоставляет информацию или клиента о том что не запросы меняется или нашим сотрудникам сопровождении ну и того коротко что она помогает работать с оракулом уже начинает там 7 версии фактически до 18 это свои средства разработки свой язык перри плюс открытый код это достаточно важно на самом деле открытый код просто зачастую проблемой при миграции продуктов является то что продукт был разработан за рабочий куда-то ушел где код никто не знает система критичная бан говорится мигрировать этот продукт нашем случае такая ситуация полностью включается кот всегда доступен свои инструменты тестирования сервисы которых я упомянул ну и соответственно люди которые работают с этим продуктом не обеспечив данную работу в общем-то спасибо за внимание если есть вопросы просто спасибо за доклад у меня такой вопрос а то говорили о разных версиях но очень для меня не хватил информации о том какие использовались методики вот конкретно перехода с конкретный какой-то базам пример со мной версию на другую то есть были какие-то рекомендации для всех одинаковые или в каждом случае индивидуально и решалась то есть именно каким образом происходил перенос переход грубо рядом с базу там счас 1 до на другую с 11 номинаций и так далее это pump это было ли там апгрейт существующей базы и так далее то что больше технической pharmacies то можно как правило это ты провела to break просто базы данных соответственно волокла езда механизма есть утилит отказа им дата быть обретя систан которых начиная там с 11 версии уже является достаточно хорошим продуктом его можно использовать на самом деле зина 100 версии мы клиентам рекомендуем его использовать есть ответственно ручная иммиграция которой мы рекомендуем прибегать случае если риски достаточно большие базы достаточно большая и соответственно в этом случае обретя систан может не обеспечить соблюдение того временных рамок для проведения бреду тем более что бы ручная ручное обновление позволяет иметь больше возможностей для варьирования там опции настроек при проведении обновления то есть мы составляем еще рассмотрю документ который содержит достаточно общие рекомендации и основные правила миграции если клиент достаточно сильно кастомизированные teach in the в этом случае компания предоставляет сервис и помогающий клиенту и поддержку при миграции продуктов то есть фактически там приезжает администраторы а цель ты не садятся вместе с сотрудниками банка проводит взял тестовым миграцию получает результаты составляют инструкцию там наш но и вот общий там рекомендации от результата прайс адаптирует по требований клиентов обижайся что все это работает дальше уже соответственно с этой инструкции клиенту за проводит миграцию не сказать что после этого все хорошо после этого еще некий некое время производит проводится достаточно плотная поддержки клиентов на момент каких-то нюансов особенности которые могут первое время всплыть после миграции продуктов то есть оповещается там службы сопровождения потому что миграция произошла в этого клиента может быть там чудеса там следует достаточно пристально аккуратно следить клиента говорится о том что делать если что-то происходит то есть не надо звонить и я рад что все плохо это самое вы можете позвонить конечно но лучше если вы соберете куют информацию и предоставить и то есть мы не имеем доступа к базе данных клиента банковской это как отдельная организация отдельные солдатам и потребовать безопасности так как они реально обеспечить достаточно важно вот на коммуникации х говорить куда что писать кому писать какие материалы предоставлять того что ваша проблема была решена на более быстро но бывают случаи что действительно после миграции какие-то сотрудники компании сидят у клиента и тестовый период имейте идут первоначально мониторят и сами сотрудники банка нам решать проблемы возникающие к сожалению тут конечно бы хотелось бы больше внимания и поддержки от oracal иметь в принципе уроков даже иметь сервисы предоставляет сервисы помощи при миграции но это такие безумные деньги кто просто вот нам известны случаи когда бы кто-то имеет пользу ну кто-то воспользовался такими сервисами вот сели за доклад я хотел спросить о то проводите нагрузочное тестирование на каких данных то сила у вас разные банки разно объем данных в базу данных разный первоначально тестируем новой версии мы проводим на показать тестовой некой базе тестового банка у нас объем ну зависит от скажем так задачи тестирования на данный момент это порядка там 300 гигабайт то есть мы считаем что это база она соответствует объём лично у нашего банка большинства наших банков которые работают системе документации по миграции принц у нас есть требования и пожелания к банкам чтобы они организовывали проводили также дополнительно грушина тестирования связано это с тем что он не потому что нам лень это делать в том что банки зачастую ведут свою разработку и достаточно много разработки и мы не можем обеспечивать корректности работы лишнего кода нашей системе это сделать может только банк он как бы мужем конечно помочь частично но это уже не будет входить в рамки вот обычных работ связанных с помощью при миграции и банка при нумерации на новой версии урока некоторых банках есть нагрузочные стенды также используется будут вспоминать который в принципе автоматизирует эти работы но скажем аккуратно пока еще не пользуется не во всех банках это используется потому что это достаточно дорого и трудоемко вот мне показывает что пожалуй все спасибо за то что пришли на мой доклад если какие-то вопросы можно будет выйти там ещё обсудить"
}