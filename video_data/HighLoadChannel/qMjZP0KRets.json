{
  "video_id": "qMjZP0KRets",
  "channel": "HighLoadChannel",
  "title": "NoBigData: потоковая система аналитики ClientSide-производительности / С.Рыжиков, А.Сербул",
  "views": 181,
  "duration": 2604,
  "published": "2017-04-10T06:25:09-07:00",
  "text": "меня зовут сергей рыжиков я директор компании битрикс и саша sirbu и аналитика разработчики компании у нас к вам любопытный доклад вообще мы не очень были уверены что нужно его рассказывать и спорили мне кажется олег именно для этого нас приглашал для того чтобы все таки сделали этот доклад совсем недавно встречаясь с коллегами из амазона мы им рассказывали как используем их же сервис и потому что ряд сервисов которые совсем недавно появились например kinesis а которому тут будем упоминать и вообще архитектура проекта вообще дают конечно фантастический пример как за очень небольшие деньги можно эффективно построить решение и вообще мне иногда кажется что айти мы как-то забываем об этом сайте очень много про бизнес то есть мы должны эффективно а эти инструментами решать задачи бизнеса наверно поэтому нас опять же двое у меня будет сначала создаем бизнесс новые вступления я объясню что мы затевали как решили что получилось а потом саша в технических деталях подробно расскажет как все это устроено доклад у нас отзывается таким образом и в нем будет много разных слоев ну давайте начнем у нас кстати будет звуки уже просил коллег чтобы подключили вообще мы будем говорить о новом сервисе который мы ставили перед собой задачу разработать или вообще а скорости сайтов клиентской скорости сайтов и вообще тема производительности на нашей платформе работают 130 тысяч сайтов и нам дать ответ во первых быстро или платформа это важно но с другой стороны самому клиенту посетителю сайта в принципе ему все равно как генерится страница ему все равно какую там хостинг где расположен важно как это быстро появилась перед глазами и существует много разных подходов к измерению к ответу на вопрос что такое скорость сайта саша вот нашел несколько цифр из google sky аналитики которые показывают вообще на что обращают люди внимания время переключения там 100 200 миллисекунд становится заметным задержки на одной из конференций например яндекс выступая про интернет магазин и говорил что 600 миллисекунд критическая величина 600 700 и дальше начинается сильное падение конверсии ну разных подходов в основном довольно легко доказывается что чем быстрее показали тем лучше конечно странице чем быстрее загружается все составляющие это в итоге все приведет больше скорости быстрее сгенерировали а что ему их быстрее доставили компоненты быструю каналы хостера минимальные задержки но как это все посчитать в один набор внутри наших продуктов есть целый набор технологий много обычно рассказывали на партнерских конференциях и я помню первый момент когда мы придумали это был монитор производительности это еще внутренней инструмент он измеряет производительность все платформы на появилось одно число она как нам всегда шутят в попугаях измеряется там 30 хотя у него есть физическое объяснение смысла но как только появилась число появился объект дискуссии между хостером между разработчиком между клиентом и они все задают друг другу вопрос а почему это число такое вот эталонная стоит 30 у меня 15 и у меня 50 это хорошо или плохо но я не буду об этих технологий сейчас детально рассказывать летом мы поставили перед собой задачу мы должны измерять клиентскую скорость то есть мы должны ответить на вопрос быстро она отображается этот сайт у клиента или нет ну первоначальный проект выглядел так давайте воткнем серию серверов будем не просто дергать сервис проверять он работают или не то будем его загружать и делать замер ну во первых это ресурс а во вторых это очень критикуемой а структура то есть когда ты начинаешь объясняет например разработчикам что вот так мы замерили скорость вашего отображения она очень легко подвергается сомнению бы я действительно с точки зрения самих посетителей важен канал причем они могут быть например на lt я не знаю там на вай фай еще где то вы можете находиться в других городах фактически стало понятно что нужно замерять на клиенте нужно брать клиента ставит же с овский счетчик из каждого клиента собирать объемы данных и умудряться давать ответ все бы ничего но данных то очень много и нужно понять как их собрать посчитать сколько обойдется сервис посчитать самые разные показатели коллеги а сейчас будет видео со звуком все получится да надеемся у нас есть небольшой ролик который показывает что в итоге получилось а потом немножко по технике для посетителей вашего сайта важно насколько быстро откроется нужное им страница это и является потребительской оценкой скорости сайта мы специально создали очень простой сервис который дает вам ответ быстро ли работает ваш сайт по мнению ваших посетителей сервис скорость сальто измеряет скорость загрузки ресурса у реальных пользователей и отображает данные для тысячи последних посетителей сайта работать с сервисом очень легко яркий виджет в любой момент покажет вам текущую скорость загрузки вашего сайта у клиентов разработчики найдут в этом инструменте дополнительную выгоду ведь сервис показывает не только скорость загрузки но и самые медленные страницы вашего сайта не качественный хостинг медленный интернет канал и не оптимальный код или результат экспериментов определите причину и оптимизируйте сайт контролируете скорость до и после изменений делайте ваш сайт лучше каждый день с сервисом скорость сайта от компании 1с битрикс скорость сайта взгляните на ваш сайт глазами посетителей но для маркетинга меня и позволяет вы понимаете на технологической конференции обязательно должны быть ролики должен быть праздник скорость сайта получился сервис при обновлении клиенты получают совершенно новое число принципиальный момент ну вот это выглядит вот так вы в административном разделе сайта я сейчас перескочу дальше вот эта цифра она для клиента и помимо того что мы говорим 0 31 секунды на самом деле клиент обычный человек который не ходит на highload conference он не может определить это хорошо или плохо и мы ему дали ответ что это очень быстро у нас простая довольно шкала она тоже просто и восприятие если ваш сайт загрузился и появился перед глазами посетителя за 0 5 секунды мы говорим да это очень быстро он загрузился до секунды ну просто быстро потом не быстро медленно и очень медленно ответ очень простой они можно дискутировать можно говорить хорошо это или плохо но это число считается на 1000 последних просмотров вот тысячи последний человек расположенных на разных точках со своими каналами в их страничках стоит же с он фиксирует ну фактически вот с точки зрения разработки последнего первую синюю линию данном кроме которые нам показывают время отображения отправляет в облачные сервисы дальше они собираются ключевые параметры помимо самого числа мы даем гистограммы распределения собственно как расположились хиты например есть тут и среднее медиана в течение которого мы считаем большинство увидели с такой скоростью соответственно разработчики могут любой фрагмент посмотреть какие хиты туда попали с какие параметры по ним были и зачастую с удивлением узнают что там говорят страниц очень медленным буквально несколько секунд уходит на выявление есть еще один график который уже по времени нам расписывает и показывает но собственно зеленое это время отклика наверное главное на что стоит смотреть но еще раз подчеркну это не время генерации страницы даже да это совокупно генерация отклик конфигурации и когда первый байт по большому счету поступил это комплексный получается параметр в включающий в том числе и генерацию в себя очень много синего это фактический объем джесс и его скорость рендеринга на ваших клиентах вот в хорошем проекте на самом деле и зеленого и синего должны получиться немного это не очень здоровый признак и владелец этого сайта знает о той проблеме которые у него есть у него там есть джесс овский компоненты очень такой мудреный но когда у него 0 31 сказал обо мне это нормально я не буду больше разгонять меня устраивает это число вы же написали очень быстро хотя в принципе 0 2 он может рассказать буквально там за несколько дней и здесь тоже можно посмотреть из чего состоит то или иное число какие компоненты какие параметры что получалось внутри уже на сегодняшний момент вот это число мы брали для пресс-конференции 29 числа уже на сегодняшнее утро 23 с половиной тысячи сайтов мы обсчитывать и это примерно там 50 миллионов хиту пользователей чего нас там хитов около 40 миллионов пользователей каждый день вообще довольно большая лавина документов материалов которые поступают мы помимо всего прочего мы каждому пользователю водоем уникальный как а потом его еще и трека им в течение там некоторые истории некоторого времени 23 тысячи сайтов но вот к слову аудитория рунета 68 миллионов в общем большое число мы с удивлением узнали какое количество клиентов проходит через наши проекты ну и теперь мы точно можем сказать быстро или сайта на битрикс или нет 22 процента это вот по вот этим всем проектам 22 процента это очень быстро 48 попадает в категорию быстро ну и соответственно 24 6 кстати мы посмотрели что есть очень много проектов которые в разработке либо они находят то чаще всего они попадают в 46 пока идет разработка никто обычно не следит за процессом что получается по дороге а потом начинают отслеживать но есть ещё одна любопытная цифра потом позже об этом поговорим какой эффект происходит есть любопытное высказывание что все что мы можем наблюдать или измерить она начинает улучшаться мы это перефразируем так как только появляется некоторое число которое вы начинаете измерять она начинает улучшаться то есть вы уже начинаете понимать в лучше или хуже хороший у вас хостинг или нет и это очень любопытно пример одного из наших клиентов обновился смотрит на число 1 девяносто пять секунд написано медленно мы по сути на грани очень медленно начинает нервничать но это же неправильно это же неправильное число что произошло с первым рассуждал поговорил с разработчиком перевезли в штатах сидел перенесли штатов поставили в россию выиграл ну ни много ни мало в общем прилично выиграл еще ничего не менял по проекту просто перенес хостинг у нас есть такая опция сжать же с и css ну архитектур платформы требовал там некоторые особенности при разработке ну и мы эту особенность умеем обходить одну галочку включили получили еще один выигрыш приблизились перешел на стандартные компоненты часть давно была написана особенно с каталогом товаров поменял сделали вернули стандартный компонент чуть-чуть поправить дизайн приблизился перешел в композит есть у нас такая технология разработки в итоге он увидел свои 035 и говорит здорово все меня устраивает и это всего неделя недели от момента когда он увидел это число к моменту когда его проект стал в несколько раз быстрее причем по большому счету он принципиально в продукте ничего не менял не в продукте не в проекции но пожалуй только компоненты немножко поправили в которых была ошибка таким образом число стала объектом диалога между разработчиком клиентам иногда между нами нам обратили внимание у нас там был один компонент который много на джейси лопал дата справедливому поправили компонент все стало намного лучше это комплексная характеристика она для всех она в том числе и для нас но вот по цифрам оказалось что композит лучше всего лучше всего помогает клиентам но это не единственный параметр их достаточно много дальше перейдет саша будет уже делать доклад на технику а я собственно хотел вас спросить как вы считаете пока вот саша все это не рассказал какова себестоимость всего этого сервиса для нас сегодня сколько он нам обходится 23 тысячи сайтов 50 миллионов хитов день ну версию какую-нибудь 20 тыс долларов по тысяче на проект неплохо да ну еще есть версия ну 1000 вы представляете что такое 1000 верите в это число ну давай попробуем сюда посмотрим под капот у тардис о туда как вообще принято измерять скорость как вообще принято измерять презрительно системы вип-системы в частности сервис мониторинг мы многих мужчин zabbix как ты делал мониторинг делаю функционально тестировали собираем метрики вот что мы можем померить до чаще во что верю . количество просто джинны кстово качество запросов в базу я сейчас немножко вас вожу состоянии что в мире администраторы разработчики мы дальше будет намного интересней но все равно это по консервы мониторинг это черный ящик что еще можно померить ключевых параметров на сервере ну конечно число и количество процессов латрун рейдж да и какие процессоры работают например с диском или серию товарищ показывает перегружай систему или нет это мы все знаем но это и не может нам до конца помочь что еще может быть почему тормоза система проваливаться в своп и начинает тормозить сайт начать тормозить но мы это видим на графике резьбу не надо applications съел всю память система выдала своп известно все будет тормозить вот ну так же sword появляются у нас вот здесь вот на на графике допустим отдельно что еще если проявить армейскую смекалку можно написать скрипты которые будут нам обрабатывать там hadoop ему придется взял о геологии веб-сервер логе приложения и строить гистограмму считать момент разных порядков от этих хитов вот черный экран да либо ну просто смотреть в админку apache просто вариант это гистограмма флору то есть мы подключаем математику которая позволяет нам измерить серверные показатели показана скорость хитов от скорость отдачи скорость выполнять бизнес-процессов чтобы мы поняли клиенту хорошо ставили get таким образом это более сложный шаг да долл позволяет немножко заглянуть все-таки скорость наверное мой взгляд один сейчас лучших инструментов определение все-таки комплексами производительности веб системы это пиво бинго использовать классический подход работы с со стримами активно собирает поднимите пожалуйста руки кто знаком с этим инструментом многие знакомы она собирает и спички метрики и отправляет значит в выборе сторож войска или позволяет и агрегирует на лету эти данные в принципе нам нужно было пемба но только которая собирает информацию с java скриптов и который можно масштабировать до бесконечности фактически архитектур нашего сервиса очень похожи на pingu но она масштабируется и реализован в амазоне сожалению чтобы это все вот посчитать измерять загнали нужно быть очень умным газель графики и так много скриптов 3 тогда и тому подобное это достаточно нужно иметь высокого ли фикации хорошо ходить это иногда они сочетают и параметры ну и плюс нужно любить математику не все любят математику хотя многие любят программировать поэтому мы попытались все-таки найти короткий путь как быстро получить результат ну естественно сайт будет органе то есть вы все будете мерить наймите умных людей программистов математика все равно возникают проблемы как с последней мили до сосед играют world of tanks и будет вам тормозить сеть торрент-клиента запущена был вай фай 4g lte это тоже это вещи который вносит тормоза вносят задержки и может тормозить браузер компьютер может быть перегружен или будешь тяжелы с кем то есть я хочу здесь сказать что серверных инструментов и свежего математики не хватит чтобы понять хорошо клиенту с вами или нет поэтому нужно искать выход и поэтому нужно вот этот гепарда который бедненький такой медленно нужно искать выход как все-таки мерить как мерить скорость к счастью до между консорциума world он предложил api которая позволяет изнутри глаза weekend и посмотреть на скорость генерации страниц новейшим тайминг кто использует знаком с ним это браузерная api который позволяет получить метрики глазами клиента насколько быстро у него также чаще страницы его мы задействовали это мы собираем случае javascript а параметры который рассказывал и мы должны куда-то отправлять для агрегации вот здесь возникают интересные базе конечной задачи если все клиенты все больше власти 23 тысячи сайтов начинаю всех хватит причитать начинают мямлить эти хиты возникает нагрузка на вставку этих записей порядка от 500 до полутора тысяч запрос секунду базы данных ляжет базы данных для таких кейсов не предназначено база данных больше это традиционная машина а здесь у нас потоки здесь у нас bigdata это только началась мы ожидаем роста нагрузки раз в десять еще вот плюс нужно из этого потока доставать гистограмма распределения видите льда на графике приду в предыдущей слайды видеть последние хиты и считать медиану как это сделать вас устали ходить нет не получится у вас будет огромный кластер и база не для этих задач создана поэтому а плюс еще надо эти хиты очищать постоянно как очищать страны были что да нет там from в убьемся не получится нужно искать решение вот по если мы посмотрим в книжечки будут картиночка из книжки сборе коллекции стэнфордского университета про обработка больших данных здесь ну эта теория обработки потоков что у нас памяти будет мало в базу выходить не сможем это дорого надо иметь какое-то привычное хранилища ну и так далее и иметь какие-то подготовят запросто есть нужна никакая другая математикой технологии мало того мы здесь управимся в то что это придется самим писать вот это все вопрос как бык ну вы понимаете да это дорого что делать плюс здесь появляется интересный алгоритмический стык хеширование канализация ну нельзя все данные собиратели за это нужно как-то хитрить математически за теории вероятности чтобы правильно рассчитать чтобы получаем что мы считаем использовать известно это было у фильтр никто лучше вид мартин то есть используя технологии при большом таком потоке база данных нету да и памяти мало что делать и тут значит мы работаем с амазона достаточно давно и вот amazon выпускает сервис газовый кризис в котором эти задачи оказались лишены потерли руки потому что вся эта математическое живущая хрена она решена в канзасе как он работает он получает поток входной размещает его где-то в памяти у себя облаке а мы подключаемся маркерами и сабли кришна причем количество worker of можно варьировать от 2 до 10 миллионов считываем эти данные обрабатываем то есть фактически какое-то событие в потоке происходит например но что-то случилось в пыль с какой-то какой-то worker об этом узнают вы знаете сколько мы сэкономили времени использую вкд зис ну немножко слив и про кризис 1 шарда колеса может до 1100 в секунду держит при удобного сохранения имели мегабайт в секунду в пакете может у нас не более 50 килобайт но на чтение там качество ничего не больше но чтение мы делаем просто параллельно вниз как вы понимаете то есть огромный поток мы делим на маркеры и они спокойно спокойно кушаю значит эти данные дают нам циферки хранение данных к лисе до суток прямо тут валяется вот и стоимость то есть фактически 1 шар да будет обходиться всего в 50 долларов в месяц на всю это вот хранение обработка храниться довольно довольно дешево и главное бизнеса во как теперь лить даны в кризис как удалить вымазал чтобы что-то отправить нужно авторизоваться по с веса 4 сформировать степи заголовки с подписями и так далее как это делать мы понимаем что ну можно конечно все данных со счетчиков принимать какой-нибудь при допустим ли какой-то server data подписывать отругать но более быстрое решение используя джон x но как подписывать заголовка математик устроить ужин x ну конечно можно носи написать модуль джин иксанова писали до нового года наверно потому что не документирована из и сложно требуется позволь музыка тысячная да вот еще поставить cookies но вы выбрали ло оказывается можно на лула встроить код в джин x1 и очень хороший китайский разработчик и записал воды ни слова модуль что такое лова кто стал к слову это очень простой язык с простой такой виртуальной машинкой которая интерпретатор которую можно может поддерживать джет джет компиляцию которая очень быстро в джин икса и главное главное он выдает и фуке из-за я drudging саут-энд модель всю то есть как в чем суть engine x а почему он прекрасен потому что там использую дни блокирующий обработка сокетов через системные вызовы select пул таким образом можно открыть 50000 сокетов и они будут содержаться и мы будем по мере поступления доха готова сидеть на дергать и мы будем данный перестал проектировать поэтому но позволяет строится в логику джин иксов это прекрасно логику джилекс правильную и выполнять нашу подпись генерацию подписи амазона мы написали скрипт но несколько десятков строк и решили возвращаться два дня в итоге сервер слова который обрабатывает более 500 запросов в секунду с индексом но не было всего пять сотых вот 500 и вот под колеса вопрос секунду л то есть фактически сервер свободен оказался помнишь наш демидов говорил про и блокирующие соки ты обратить внимание данный а вот прям рассказал что именно используем на боджин exe позволило такое огромное количество сока этот каждых держать постоянно каждый клиент и пишут туда 150 тысяч открыток столько допустим сколько да и и задача решена красиво архитектуру теперь как это хранится в кризисе ну значит вот это запросы который имеет админку куда где тут буфер да куда эти слегка заселяются но мы видим число вопросов мы видим что латвия доставку 25 миллисекунд вы получите 100 миллисекунд но это worker уже получаю то есть у вас еще много свободного места есть теперь нам нужно данные склады и собрать как попить worker и в данном случае водкой onesies вот наши счетчики до водкой месяц вот надо забрать эти данные да и обработать их куда-то сложить ну опять же бросили какую какую-то рациону таблицу не хочется писать потому что это не масштабируется это сложно это дорого это не для этого предназначена поэтому вы выбрали динамо тебе это близко или хранилище амазонской которую они около десяти лет его пилят и использую для всех сервисов ну это бесплатно если кассандра вот это вот кольцевая базу данных ну или с 3 допустим такие вещи то есть нас за час прыгать в арками в worker и мы подняли выпечки 8 штук почему на печке потому что быстро эффективно если надо мы их перепишем державе например да и один чистильщик скрипт который с помощью нам хитро идет алгоритм он стены и сосчитай скалам скалам и хиты собирать удалять нельзя у нас эвристик они мы определяем примеры таких это удалить и делаем запрос по индексу где nobody бедную склеили и лишних это удаляем то есть восемь маркеров очень простой код там и одессе стульчик если они будут плохо себя вести если нагрузка вы здесь сразу допустим перепишем на чем-то чем только прекрасно работать теперь алгоритмы как и данные 9 за облака доставать как я сказал бы хранил дела по тебе вновь гель ты же последних хитов профили пользователей как настроить как стоить гистограмму как стать истории хитов и как чистить в activity бросим рассказал значит как дали доставать смотрите был риск некий что раз мы всех кто хит хиты пишем надо достать тысячи последний как до 100 тысяч после них в нож теперь поддерживаются вы создать вообще вышка или что это такое это меткость в кольце по-русски да но с какой-то нибудь небольшой навесками для того чтобы они работали быстрее и можно было устриц поэтому то можно разобрать данный либо подключил либо по индексу а попросту в индексу да мы добавили нет x на таймс там и мы доставим последующих то все все ну там по данному сайту ну да по листам два типа индексов в общем один используем для выборки под ли операция в голове очень быстро там 10 20 миллисекунд при любой нагрузке потому что я дам тебе все достаем получаем такая у нас простая модель к то есть киты хранятся в одной таблице у которой ключи это это у нас типа сайт да это у нас время и грудами по этому сайту константа даме все хиты range такой то есть ну а кто такую то вообще это вот идея обработки данных window к определенным это в потоках часто используются чтобы принципе и сделали все элементарно модель данных как это как это в изнутри вот воде льем данных видом гибель это вставки мы видим да это производительность то есть здесь мы видим запросы и снова тебе чтения хитов но мы видим что папочка выбирать за 45 минут 1000 китов для отдаются на 240 миллисекунд да там еще есть сетевая задержка некая но то есть вывод на не ходим в базу в доску или дергаем последние счетов в по индексу все и работает очень быстро в салат эти 40 миллисекунд как вы агрегирует а ну как вы агрегирует мы получили 1000 хитов это небольшой массивчик мы в памяти построили выбили гистограмму посчитали медиану это можно кэшировать но поколение воду в принципе может сделать еще будет быстрее работать таким образом то есть система она распределена можно она поддержит онлайн агрегацию то есть запрос на агрегацию могут быть но если будет могу скоростей динамо тебе просто будет а потому что берс пока нам достаточно вот этой табличке я расскажу сколько это стоит вот что есть вопросы то есть все проблемы с запросом мы решили ну конечно ночью то нагрузка маленькая да огнем большая мы дописали свой авторский индивида по тиви который уменьшает количество пропускную способность размер кольца а фактически делом о типичных серверов то есть он пульсирует вот так у нас поэтому решили получилось и по деньгам эффективным вот сколько это стоит то есть примерно 400 в пике это 400 долларов в месяц на базу это если без авто скиллинга на 410 долларов и на хранение 7 долларов ну объем хитов + авто скальник снижать во сколько раз у лечение мощности базы если в тур защелки это пики происходит за одну две минуты это очень очень интересно особенно под новый год это упрощенная схемка мы обсуждали потом в отдел маркетинга подошел значит дорисовал точилочка вот в принципе ну мы видим до javascript и убью голосе ручка бозона это не обязательный элемент тут там принципе иногда очень полезен мы используем также мы используем балансировщик для того чтобы он же ник соски и машины при необходимости можно было раскидать сюда одна может получиться их несколько до worker и и хранение данных давай на этом слайде немножко прокомментируй вообще рассматривалось конечно много вариантов как сделать счетчик первоначальном ищет али что давайте там будем 6 часов хранить но есть сайты у которых 6 часов это столько хитов у этих сайтов там меньше и в итоге получается что должен усложняет всю систему хранить по-другому выбирает получается дороговато бизнес задача звучало так мы должны помочь улучшить вообще скорость сайта глазами человек поэтому получили появилось это число 1000 его нам кажется достаточным причем нагрузка обращение к самому числу происходит крайне редко то есть тогда когда владелец заходит в админку сайта мы первый раз получаем одно число интегрированы и когда он заходит в подробности мы получаем одним хитом тысячу строгом запрос одним запросом и все остальное рисуем уже на клиенте то есть получилось все съемка компактного прямо как нарисовано вот еще раз мы бомбим цифру до уже 2 из 3 тысячи сайтов больше восьми тысяч доменов и сетки ты более 550 миллионов это в сутки мы принимаем и столько и теперь вопрос да сколько это стоит и торгующий вопрос тут даже есть слайд завез будет себя высылает сколько это стоит ну фактически есть проект поместился в тысячу долларов в 1000 долларов в месяц обходится весь проект разработки этих данных ado эта разработка да разве он не мог подтвердить ваши версии просто так это работает 1000 эксплуатация занимает порядка 500 долларов в месяц и весь проект разработали за две недели вместе с пилотными данными в день сейчас подключается где-то пятьсот-семьсот проектов по мере того как вы выпущено обновление ну собственно вот там немножко мы поэкспериментировали у нас там немножко динамо лопала сделали вот как раз торца скайлин другие какие-то характеристики но kinesis динамо обходится нам в итоге недорого у нас одна машинка снг никсом мы даже не стали мудрить если честно сейчас отказоустойчивостью потому что то есть их можно поднять в двух в dc и они будут выполнять задачу по шагам работа из них написано что если его не будет или что-то упадёт в общем аварий нет они прошу мониторится задача решается на самом деле даже чуть подешевле чем 1000 получается весь проект эксплуатация угол 500 долларов в месяц и трафика на сто двести долларов просто трафик там порядка 15 мегабит входящий в заходящим выплатим из-за исходящие тоже нет исходящих этот мегабит наверное здесь можно еще сказать что вообще весь этот проект является составной частью другого проекта по обработке больших данных которые мы недавно представили по рекомендациям по персонализации для интернет-магазинов и для сайтов и фактически он же является приемщиком объемов данных связанных с обработкой больших данных то есть там не только в динамо а вернее еще в другую динаму есть пару ручейков куда данные затекают воронка куда попадают или анализируется в больших объемах вот собственно так выглядит сервис если есть вопросы пожалуйста часто я принимаю микрофончик и выдадут и вот здесь еще есть вопрос микрофон если можно начинать вопрос номер один навигация 3 это информация только о фактически загрузки страниц вы как-то ajax запросы мереть не очень критично 3 не работа надо конечно ваша платформа не использует а x или это не нет среди в форме никакой привязки нет мы просто не считали нужным в этом вопросе в этой ситуации решать ну то есть мы так вы даже не формулировали били задание понял вас аякса нет поэтому многие 4 острая как вам это хочется сказать ну оригинальности спасибо за доклад вопрос такой возможно я как-то невнимательно слушал я понял все гениально системы понял что она обошлась недорого но мне почему то кажется что можно обойтись и без amazon kinesis да конечно вот и развернуть что-то подобное для обычной какой-то для своего допустим маленького сайте катом такого просто воспользуюсь и соответственно меня возникает вопрос а в чем тогда вот преимущество было для вас лично kinesis а вот именно вот ну вообще вот вы предлагать самому себе писать такой сервис или меня ну сделать такой внук нет просто он сел или без амазона чем помог и найти с такими что вот им выбрали именно его aion стали вот свой сервер посмотреть кино с 2 engine.exe apache можно списать запуска только на apache зачем сальто джин x зачем два веб-сервера жрет роль буфера позволяющему масштабировать количество почти за ним при росте нагрузки такую же роль выполняет kinesis он буфер визирует данные и мы можем гибко масштабировать количество warcraft дальше если это делать синхронно система получается жесткой то есть прошел запрос запиши она получается дорогой мы можем мочи например количество врагов уменьшать объем увеличивать то есть это элемент гибкости элемент масштабировал стоит очень дешево вот и он решают задачи он фактически стрим превращают делят на части буферизируется чтобы это реализовать даже в джон exito надо тайм-аута миграции это дорого и долго в память а у них память у них там целая про структуру для этого просто скит ринга алгоритмы можно было и без kinesis подобная инфраструктура поднять в своих virtual как на своем железе но так как у нас вообще все хозяйство размещено в амазоне то мы собственно и выбирали сервис посмотри что есть и вот буквально недавно появившийся comedies нам оказался решением почему как раз коллеги из амазона приписать приходили насчет кейса вообще узнавать потому что очень мало ещё использует сервис а тут у него практическое применение реальная нагрузка идет и прям видно польза как он работает а вот вы приводили пример с клиентом который перенес хостинг за там из-за бугра в россию и у него от этого все за хорошилова стоит ровно обратная ситуация amazon не тормозит если на него большой трафик наливает как вообще вот там же канал будет а для сайта неважно в тормозит он или нет он обработает за 20 миллисекунд или за 200 принципиальной разницы нет тоже все равно замеры сегодня от момента когда например сайт отправил запрос в то есть пользователь при просмотре этого сайта отправил запрос реальное число пересчитывается секунд через двадцать до вся цепочка упаковали очередь собирается ни одного сайта в кино наши прощения для сайта понятно что это неважно вопрос другом у вас же каждый вид проектируются у вас и отправляются за рубеж там просто этого трафика с ростом числа сайтов и хитов будет дофига и совсем за рубеж комитету когда я же никса моего оборачиваем по сделает ну да да да да и gemix там и стоит забором такая тогда там в амазоне стоит был отравиться по x 800 не заболеть занят здесь смотри там трафик это реально копейки но 15 мегабит я назвал цифру роналдо все спасибо это совсем не критично не по деньгам не по нагрузках добрый день скажите вот у вас был слайд где показывали что включение композитного сайта уменьшает там на секунду буквально загрузку страницы до при этом насколько понимаю включение композитного сайта это по сути страница подгружается и все блоки аяксом подгружаются если правильно понял и дальше вы сказали что аякса вы не меряете то есть тогда получается что не совсем верно эта оценка раз вояк с не миритесь скорость загрузки страницы увеличилась уменьшилась на секунду нет не суди вернуться все верно композит делает страницу статической технически размечается большая часть блока в статикой даже если она динамика оно все равно есть на главную у пользователя она может быть представлена идет первый хит статическая страница со всеми составляющими залетает и появляется у пользователя пока все это рендерилось готовилась пошел композитный хит и он какой-то блок данных может например либо обновить либо вставить ну зависимости от реализации и с точки зрения пользователя это уже не важно но как бы это не влияет на скорость восприятия нет задержки вообще-то роже де всего luxury мы не верим этот композитный хит мы не верим этот аякса вы хит потому что что для нас важно это замер отображение а психология ручается что вот когда она появилась человек уже начинает изучать знакомится со страницей в принципе да могут тянуться большие имидже и до могут тянуться какие-то составляющие с точки зрения скорости это неважно уже он уже считает что загрузилась страница добрый день мне бы хотелось об объем данных генерируемых соответственно в день я значит в потоках получаемый объем данных там месячных динамо вот потом еще хотелось бы спросить просто немножко не понятно что такое kinesis там по потокам то есть это не является и номере дтп с то есть worker и это буфер в память то есть грубо говоря печного двор кира они просто перекладывают динамо и на стране kinesis никакой агрегации не происходит заначек генезиса это обеспечить масштабирование маркеров все они собирают маркеры обрабатывают агрегирует что-то пишут где драма что-то не вижу где добыть они уже обработал и это делать синхронно мы раз мы сделали систему асинхронный в этом в этом для этого нужен был kinesis то есть peach печные worker и получается они делать какой-то математику понизил они отвечают они туда пишут они обработают да но главное что они не занимаются поучением данных и не занимаются таким борьбой за память на не занимаюсь без разъема еще скажи какие-то объемом там порядка несколько десятков миллионов цветов в сутки а приветливых больше 5 7 сутки мы принимаем объемных несколько гигабайт а был сбор слайд и загибаясь к лисе работы хищники которые не надо тебе которая удаляет лишние хиты там хранится только не тычки топлива больше хранится но по ним очищаются поэтому там порядка 7 долларов что-либо платить бесит за заданы за хранение ног вопросы у вас там есть соответственно график в самом битриксе в интерфейсе да то есть где идут задержки то есть вы не храните история тыс человек не может еще цветов и храним последний ты сколько последующих это о временной интервал неважно зависимости от сайта у кого-то это два часа а у кого-то это два дня просто как бы отследить то есть например он неделю назад у него это видно на графике будет а мы мы не ставим перед собой задачу сделать аналитику по сайту по проекту то есть написать там не знаю недугов analytics или еще что-нибудь делать срезы здесь вопросы для разработчика то есть например вот у нее такой чудо то есть как бы он делает изменения и должен увидеть вот именно как раз динамики ему и хватает хват наделал изменения буквально смотрит даже если двухчасовое окно ему более чем достаточно бы увидеть что у него спала он передел на пред женскую часть и у него был такой сильный фрагмент и он провалился и все его не осталась вот такая вот клиентская сторона стала и еще один вопрос соответственную в рамках там выбора платформы не рассматривали ли вы колоночный баз данных и in memory решение такие как например вольт т.п. смотрите как all colors базу данных они используют для дата боинга зачали щас тут не нужны они медленные они в них писать долго и дорого зато они быстро двигаться не для этого кейсария но в данном случае не смотреть там вальдо бет он как раз связь иным решением как раз можно написать обработчики нажал которые будут делать агрегацию в артели соответствовали гель масштабировать в альби это а он также линейным масштабируемый то есть как бы сервер добавили и у вас соответственно чистите нужно было проще взять готовый решили похоже об спасибо ну что ж спасибо большое еще вопрос есть ли у меня простой вопрос про мобильные платформы мере тени меряете если планы выглядели платформы пока не меряем но есть плана а какие планы если не секрет у нас же есть мобильное приложение готово и она такой нативный hybris а что имели управляемой на джейси соответственно мы планируем внутренней рабочей страницы которые пишутся на джейси считать считать скорость загрузки отображения когда они появились одна из самых частых ошибок когда например имидже не вешают на луизе лаут или там не kosher уют не знаю верстку или остальные части это приводит просто безумной загрузки очень долгому отображению клиента будет что-нибудь но пока вот выпустили в таком объеме"
}