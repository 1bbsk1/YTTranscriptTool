{
  "video_id": "Rty4yjE6qJk",
  "channel": "HighLoadChannel",
  "title": "Как сделать сложное простым. История создания Проект1917 / Сергей Спорышев (ITSumma)",
  "views": 12186,
  "duration": 2635,
  "published": "2018-01-16T13:41:05-08:00",
  "text": "расскажу вам как в короткие сроки реализовать достаточно сложный проект проект и при этом остаться в добром здравии так говорится ну немного себе в данный момент так что то сломалось тут а в данный момент я руковожу отделом разработки высоконагруженных проектов компании эти сумма наверное все уже побывали на нашем стенде починили наш сервак чем мы занимаемся вот что-то с пультом беда ребят я нажимаю и ничего не переходит так ну тогда я пока расскажу чем занимаемся основной профиль нашей компании это администрирование и поддержка высоконагруженных проектов то есть мы отменим такие проекты can предках хабрахабр корр прайс постнаука новая газета наше радио но как компания которая начинала своем разработки и которой сейчас имеет очень большой опыт в поддержке в решении каких-то очень частых проблем мы продолжаем заниматься также разработкой и наиболее такие прикольные наши проекты были это тот же самый 1917 мы делали билетную систему для фестиваля нашествия сайт карамба то вы делали и мы и очень много спецпроектов для различных а вкусе и автомобиль года альпина паблишер которые стоят рядом с нами ну давайте перейдём собственно говоря к проекту вообще есть такая она знаменитая шутка когда я поступал в университет все туда шли чтобы за два дня научиться писать игры когда я выпускался hyip на игры прошел все лишь мечтали написать свою социальную сеть и при этом обязательно за два дня дольше нельзя надо за два дня очень быстро чтобы все было сложно и в конце июня шестнадцатого года у меня появился шанс реализовать мечту миллионов в конце июня к нам пришли ребята из проекта 1917 и попросили помочь им реализовать web частях проекта то есть предполагалось что это будет социальная сеть где буду там в николай второй постить свои фотографии ленин будет ему ставить лайки троцкий будет ума комментировать и не секрет что мы были не первое кому обратились обратился проект кто то говорил что в очень короткие сроки это сделать невозможно либо стоить это будет очень очень много денег мы же поняли что в принципе задача вполне реализуемая и мы успеем это сделать в обозначенный срок что же вообще это за проект сами создатели проекта горят что это самая лучшая социальная сеть в истории потому что все ее пользователи уже умерли но при этом они продолжают воевать в комментариях и называют друг друга нехорошими словами можете вот почитать то есть что ж такое то есть проект 1917 это проект выполнены в формате социальной сети где пользователи являются реальные исторические лишь освещаются события происходящие происходившая ровно 100 лет назад то есть проект приурочен к 100-летию революции все материалы основаны на реальных исторических дак документах письмах публицистических материалов используются данные из фото архивов из видео архивов пользователи которые живут мы с вами которые живут наше время имеют возможность комментировать эти записи лайка делиться материалами других социальных сетях facebook vkontakte twitter и так далее и самый ключевой момент проекта была обозначена конкретная дата и время дедлайна это 14 ноября 15 00 на это время была запланирована очень много пресс-релизов в это время тот же самый яндекс начал давать трафик на проект на красной площади человек с мегафоном делал официальный релиз проекта соответственно понятно что вероятность из-за каких-то там чрезвычайных происшествий сдвинуть это время хотя бы на час равна нулю то есть обязательно нужно успеть именно к трем часам то есть как вообще жить с этим было очень тяжело сейчас я вам расскажу на этапе согласования работ с клиентом мы решили определить четко четкий timeline как будет проект реализовываться понятно что материалов очень много постов много и сайт наполнить контентом нужно не не за час до релиза а гораздо раньше то есть на начало августа мы решили уже выкатить в продакшен админку и начать верстать в сентябре какие то дорабатывать новые фишки в админку в и начинаем привязывать данные в октябре было решено реализовывать уже взаимодействия с пользователями нашего времени то есть сделать то же самое в таре за цию реализовать шер и лайки коментарии на 7 ноября то есть хорошая дата было решено проводить нагрузочное тестирование и как я уже говорил 14 ноября запуск проекта на пост-релиз на и время была спланирована что где-то спустя неделю после запуска мы реализовываем push-уведомления то есть пользователей на сайт нужно будет возвращать и такой кто же важный ключ момент в декабре сайт должен был быть переведен на английский язык и вот 3 июля мы подписали все бумажки и сделали 1 комментарий территории это был хороший такой день было солнышко в иркутске я помню как вообще мы построили команду то есть когда у нас сложный проект у нас жесткий график очень важно чтобы ваша команда не стала выглядит как вот эта команда что у вас есть 1 вася которая работает и над ним 10 менеджеров то есть как работали мы во-первых первый наш принцип никаких ракетных технологий хоть у нас сроки сжатые сроки определены мы строим не ракету которая должна прилететь на марс и спасти человека у которого закончилась картошка мы всего лишь делаем социальную сеть и если в процессе решения какой-то задачи в процессе обсуждения чего-либо в какой-то из рабочей чатов приходил я и скидывал вот такой стикер это значит что что-то идёт ребят у вас не так нужно задачу разбить на более мелкие подзадачи решать по отдельности и не усложнять себе жизнь наверное есть кто-нибудь зале кто хоть раз себе в жизни говорил эту фразу я хочу все переписать я тоже себе очень часто говорю и все разработчики которые работали над проектом себе это всегда говорили это желание было направлено именно в этот проект то есть если ты когда-то с там что-то сделал решил поменять сделал это в проекте от как ты хочешь то есть и не повторяй ошибок делай все делаем все по нормальному и как бы как выглядела наша команда у нас был менеджер проекта всегда работало три программиста 2 админа 2 тестера и в определённый момент было принято решение команду разделить на 2 га к географических зон и и часть ребят у нас уехала работать из москвы чтобы покрывать больший размах дня то есть нас главный офис иркутский разработка основ сначала велась в иркутске дальше то есть как как какой был выбран стек сейчас вообще айти struct сфера жизни та самая верная интересная сфера для работы каждый день появляется что-то новое каждый месяц выходят новые фреймворке новой технологии и во всем этом очень очень легко заблудиться включить что-то ненужное включить просто что-то потому что это модно так делать не надо то есть не забывайте старую русскую поговорку чем круче джип тем дальше идти за трактором и в программировании это поговорка просто прям божественно то есть как решили построить 100 км и в качестве веб-сервера мы поставили engine с php-fpm для базы был выбран мускул 57 в качестве бэкон давал фреймворка мы выбрали уровень потому что это наш как бы в рабочий фреймворк мы найдем все делаем и как бы на который уже был на пхп 7 написан для фронтового фреймворка взяли 1 5 guler то есть вопрос хороший наверно может кто-нибудь потом за нас почему такая версия на него вам отвечу для работы с графикой мы взяли imagemagick для работы с видеоматериалами с гифками мы взяли фнп обязательно используем нам кэш и для сбора работы со статикой мы используем gulf собственные нами и какими-то написанными тасс коми вот прошел месяц и мы уже ребятам выдали админку то есть как построили админскую часть как сайт наполняется контентом за основу мы в бэг-энде положили пакет аль 5 репозитории это пакет для вора в который позволяет буквально тремя командами реализовывает нам restful api делать нам все модели создавать из коробки миграции с сложными отношениями одной команды одним рутом он генерирует нам полностью контроллер для работы с данными фронтовая часть админке была выполнена как одностраничные в приложении и активно используется сервер снг ресурс чтобы как раз этим api взаимодействовать и также на стороне фронтам и попытались резать самописный такой джо скриптовый кэш чтобы из админки данные не постоянно не гоняли сервака если мы что-то один раз загрузили и мы с этим просто работаем на просмотр мы это каждый раз не гоняй мы храним это в каше вся админка построена нами на angular компонентах при этом очень важно было обсудить за как с клиентом как они хотят работать то есть идеальный вообще вариант админке что одним каким-то разделом работает одновременно пять человек кто-то обновил там название кто-то обновил текст то есть все должен там сразу подтянуться измениться клиенту это было не надо клиент четко раздела что нас например будет человек который отвечает за текст паста будет человек который отвечает например за порядок постов в одном дне мы сказали ok и сделали так что компоненты не пересекают между собой и обновляют только те данные с которыми они работают чтобы не было такого что дар вася подвинул текст пост вверх петь и в этот момент обновлял текст петя нажал кнопку сэйв после него сена жалком вкусив и васин старый текст перри затер пятен новый текст такого мы не делаем и мы посчитали что в среднем на компонент мы на разработку тратим где-то 1 час и какой-то принципиально новый раздел в админке мы выкатываем за день собственно пример вот можно посмотреть самой такой простенький наш компоненте к это текстовый редактор понятно что это обычный tinymce ее но немного до пиленые видно что у нас есть кнопки вставить ссылку вставить героя и сразу в тексте видно что текст будет вставлен при этом ссылка на владимира ленина где будет потом красивый папа pci кс го фотографией и так далее вот так вот выглядели люди которые первый раз увидели нашу админку они очень радовались им было все очень удобно а пользоваться было настолько просто что научили собаку модерировать комментарии и вот так вот у них приглядела работа давайте пойдем дальше админку мы сделали подбираемся уже к публичной части проекта к фронту так получилось что те же самые макеты нам поступили чуть позже на ходу каждый день менялись задачи понятно что это 1 3 тревожный звоночек мы можем не успеть мы решили сразу верстать и привязывать дан ножевые данные то есть как мы решили реализовать фронт для каких-то поисков фильтрации сортировок мы также используем пакет который используем в админке по территориям то есть работаем со всеми данными как с репозитория какие-то блоки на сайте с точки зрения php кода мы выделяем в отдельные сервисы обязательно не у нас подключается как объекты одиночке и четко мы должны их выстроить так что мы один компонент вытаскиваем из сайтов и вставляем к это другое место и все работает например есть нас такой базовый компонент называется календарь то есть ты заходишь на сайт у тебя видно что сегодня это 3 июня сразу же от этого компонента у нас выходит компонент шапка это красивенькая картинка с популярными постами с возможностью поделиться дальше от календарь у нас выходит уже лента постов то есть которая уже общается с календарем и получаю смотрит какой день мне надо нарисовать от ленты у нас например дальше вложено зависит на примерке блоки рекомендации или бог подписки а например также от календаря зависят такие блоки как погода валюты дни рождения то есть прям как почти как настоящим фейсбуке можно все сразу посмотреть если например на бэг-энда вую часть то есть на сервер можно предсказать нагрузку то есть были прямо обозначены что за определенное количество рпс то ток с каких устройств будет просматривать какие будут пользователя к киеву ты у них машины это будут телефон или это будет там pentium 3 мы предсказать не можем поэтому было решено публичную часть фронта делать максимально просто то есть во первых вся static она сразу практически достаются есть каша для какой-то динамической уникальная пользовательской информации мы юзаем api которая не афишируется вся динамическая загрузка работает через html то есть у нас сервак генерирует уже статичную ленту например вы прокрутили ленту уже пришла новая html к то есть данное не в джейсоне если вдруг все равно нам надо как-то работать уже на странице живо скриптом мы либо оптимизируем либо минимизируем использованием использование того же самого angular а и активно принят используем библиотеку been done с которая позволяет реализовывать одноразовые связывание и все у нас картинки изображения оптимизируется риса и средствами джинкс с помощью модуля что теперь имеет фильтр и в случае пихта пиковых нагрузок мы раздачу статике переводим на сидел вот мы сверх стали сайт наступил октябрь месяц нам уже надо работать с пользователем то есть мы делаем лайки делаем шер и делаем комментарии как мы их реализовали буквально за одну неделю то есть во первых что такое интер like либо комментарий по сути с точки зрения базы данных это обычная таблица которое реализовывает связь мы не тумане то есть например по стадии есть юзера иди мы решили немножко подойти по другому и с точки зрения того же самого равиль работать с этим отношением никак с отношением то есть например у нас пост имеет комментарии мы выделили отдельную сущность комментарии которая имеет вызван пост вызван автор при этом когда ты например в google и я хочу сам написать лайки тебе предлагают использовать такую связь на вред как морда имени когда у нас таблица хранит не 2 айдишник а то есть объектов которые на связывает а например like to play candida примеру вас там хотите в лайки делать для постов хотите в лайки делать для видео вам предлагают сделайте like toy play каиде мы решили что нам такое не надо лайков у нас реально будет только одна таблица мы не будем так вся жизнь усложнять дальше и активно мы используем методы мутаторы то есть что вы например одной строчкой получить на странице число ширин гафа число шиллингов например это у нас там в kosher акаши рф фбр дальше активно на фронте используется local storage что или которые случае например не поддержки браузером может опуститься до уровня кук там например складывая информацию о том что этот пользователь по лайкал эту этот пост той чтобы каждый раз мы нигде нет ни делали запросы в базу не получали список постов чтобы там просто кнопочку сердечко сделать тёмненькой что вот он по лайку мы положили один раз все local storage страница с рендерилось сердечко за красилась лишь не запрос базу мы не делаем обязательно мы не каширу ему уникальную а пик для как для работы с пользователем то есть пользователь должен в реальном времени получать актуальные комментарии то есть не должно быть ситуацию 100 я написал комментарий обновил страницу страница прошла без моего комментария то есть ты не скажешь пользователь чувак извини у нас пять минут каша так что тот через пять минут он появится так быть не должно и если вдруг нам понадобится какая-то именно динамическое общение с сервером мы спокойно можем заюзать из коробочный правильные ивенты с каналами над которой работаю за жест на джессом и как раз сейчас мы начали это использовать мы начали делать виджет который в реальном времени показывает самые популярные комментарии на сайте дальше под подходим к шеренгу то есть многие спросят почему мы не schooling это гурт готовое решение из разряда индекс шеер и так далее суть проекта в том что помимо каких-то статичных страниц где там посты либо информация человека информация конь там прессе у нас очень много спецпроектов где человек может пройти тест загрузить свою фотографию ему сгнили там открыточка он не и шею социальную сеть фейсбуке должно нарисоваться красивое послание при этом если другой человек увидел в фейсбуке своего друга эту картинку на нее нажимает он должен попасть не на эту заглушку а должен попасть на страницу теста то есть на уровне engine сам и батов отправляем на заглушке не ботов редиректом туда куда нам надо например я прошел тест и мне сказали что я не щипают обидели немного меня так меня фейсбуке это нарисовалась дальше также была такой дек такая проблема что редактора поначалу каждую картинку для метатегов рисовали руками и мы то в какой-то момент надоело и мы решили подумать о можем ли мы как-то им помочь жить то есть например была вот такая вот стране open graph картинка здесь видно что у нас есть аватар очка есть логотип сайта понятно что такую картинку сгенерировать это две строчки кода дальше например кто-то выложил фотографию тоже видно что есть у нас логотип есть название проекты есть как красивенькие 2 градиента это тоже спокойно можно генерировать либо шеринг какой-нибудь статьи в газете тоже видно что есть кое-то фоновая картинка есть логотип газеты есть название статьи и также для системы шаринга мы реализовали свой механизм подсчёта то есть в чем здесь была проблема много как во многих ситуациях когда люди делают всю систему шеренга им нужно как-то актуализировать число реальных репостов они начинают где-то по крону делать запросы как и социальной сети и не подозревают о том что тот же самый facebook за очень часто обращения к пи по одному и технику тебя забанят на очень долго мы решили подойти по другому когда например пользователь шарит в какой-нибудь пост свою социалку например вконтакт мы в этот момент делаем запрос копеек в контактов с пользовательская уже я питаюсь живо скрипта получаем и актуальное число репостов прибавляем цифру 1 складываем в базу соответственно мы постоянно поддерживаем базу количество шиллингов актуальном состоянии и даже возникает такой эффект что например ты по шерил а число увеличилось на 10 значит то-то вот место смести с тобой сейчас шире ты такой о круто все реальном времени работает как мне это нравится дальше вот наступило 14 даже не тот еще не 14 подступала 14 ноября ничего не предвещало беды мы прошли нагрузочное тестирование спокойно мы уже сайт полностью подготовили production ну как в 9 вечера по москве появилось такое сообщение ребята решили передумать и сдвинуть разработку пашей на сейчас то есть чем была проблема самый пик трафика ожидался как раз на первый день запуска проекта и базу подписчиков нужно было собрать ужас вот в этот же день то есть собирать ее где-то через неделю когда например интерес может проекта упасть либо что-то людям не понравится больше вероятность того что в какой-то пласт пользователем и уже не зацепим поэтому было решено делать куш и в 9 вечера до запуска проекта то есть как все это всегда и происходит в чем вообще была главная проблема ну вот все знают какая подписью гуся этого должна быть все очень плохо то есть в чем проблема push-уведомлений главное то есть когда люди разрабатывают push-уведомления сами они не обращают внимание на главную такую проблему что цена ошибки при разработке это новый домен и потерянная база подписчиков например вы долго долго колдовали и наконец-то добились что вас в браузере появилась вот эта площадка то есть я подтверждаю на правку мне уведомлений ну и такой очень простой пример если кот у вас выглядел в этот момент вот так что вы не сохранили talkin' а просто его за консоль или больше человек эту площадку никогда в своей жизни не увидят пока в настройках не сбросит перми шины на пуш и понятно что пример очень такой нереальный но не стоит забывать что цена ошибки остается прежней во время создания скриншотов я не потерял домен дальше что мы как мы решили реализовывать паши то есть за основу был взят сервис firebase гугловский так как времени оставалось мало мы обязательно смотрим документацию делаем все как документации и на этапе того что например человек мог не не быть не авторизован на сайте мы решили делать очень просто мы генерируем какую-то уникальную куклу этому человеку и в базу сохраняем talkin' с этой кукой потом человек авторизовался на сайте мы посмотрели что у него есть кука в базе есть talkin' скукой мы берем перри привязываем пользу talkin' на конкретного пользователя и потом уже спокойно ему рассылаем какие-то персональные уведомления и в качестве рассыльщика мы лишь и решили использовать пакет провели в cm который всю работу с firebase он берет на себя то есть если кто то когда то работал на прежде сэмом либо уже своей orbison те знают что для того чтобы отправить сообщение нужно все поделить на пачке по 1000 токенах сделать отдельные запросы то есть у равиля vcm пакет все это берет на себя при этом он очень просто позволяет генерировать пайлот выше то есть делать куда персональную картинку для человека персональный заголовок персонале нити x персональную ссылку и так далее мы успели то есть не буду говорить какой ценой но мы выкатили пуше за за час до релиза что же было на следующий вечер а про проект написал завелась про проект написала медуза а cnn би-би-си economist ребята вы купили третьяковскую галерею где устроили очень дурой стилизованный банкет на которой на нас пригласили и такая небольшая ирония до декабря 16 года главный офис нашей компании официально располагался посреди леса то есть очень прикольно когда вы сделали проекта котором написали в cnn а сделали вы его в лесу а вот мы запустили проект все хорошо работает подниму поправили на дворе уже декабрь нам надо делать локализацию фактически получилось так что лен река локализовали мы проект за два дня и это вы не выглядела как знаменитая игра warcraft 3 как же мы ее сделали во первых у нас было два домена до true и дот ком мы решили что-то какая локаль мы будем перевод передавать в глобальной переменной сервер локаут из например света ru версия там будет лэнг 0 если ком будет единичка дальше как мы перед перестроили админку то есть многие когда разрабатывать такие вещи советуют сделайте отдельные палит какую-то таблицу для текстового контента сделайте отдельные поля для там каких-то небольших строк потом делайте айтишники в зависимость от того какой язык подцепляете там запись отсюда либо запись отсюда мы решили сделать проще мы сделали так называемый зеркала например у нас есть пост съедешь ником один и у него есть поле лэнг 0 дальше мы нажимаем кнопку копировать он перри сохраняется в базу с идиш никому же 2 то есть с новым и поле лэнг выставляется единичка то есть это уже английский пост при этом если у поставил какой-то автор например николай второй и мы его так так ни разу не копировали николай второй тоже скопируется уже с полем один если допустим потом был посредником 3 который написал тоже николай второй мы копируем его у нас уже николай второй скопирован мы спокойно перри привязанным пост на английского николая 2 и все очень просто работает а для каких-то обычных стокового контент нам прямо там пункты в меню там надписи из разряда комментировать мне нравится мы решили использовать прямо встроенные механизмы которые поставляются с лораном как вообще проект живет сейчас то есть основной функцией фонтану и функциональность мы уже как бы разработали практически ничего не меняется но сейчас очень большой упор ведется на различные спецпроекты игры тесты и до сих пор у всех возникает желание все переписать и энергию направляем в мирные цели то есть например если белку это спецпроект и что-то сделали плохо мы это не переписывая мы это реализуем уже в новом спецпроекте например у и спец проектов было от нас игра поймай и ленина то есть это логическая игра про кошку то канал его ловить ленина если вот получалось те нарисовать такую картинку тебе говорили что ты изменил ход истории ленин не смог попасть в россию также мы реализовали tender был такой проект и вот предлагают познакомиться с великой княжной марией но якобы сказал не хочу потому что на данный момент есть сто восемнадцать лет это как-то не очень и такой самый топовый был тест это как раз я показывал скриншот кто ты в 1917 м году люди заходили просто толпами на данный момент на ее генерировано порядка полутора миллионов различных результатов все постоянно это шире или все постоянно гоняли туда суют туда сюда эти картинки и этот проект к сожалению не позволил мне спать двое суток потому что в один прекрасный момент чуть позже расскажу что произошло ну и в качестве водов что я хочу сказать сложно сделать простым легко усложнить усложнить что-то и сделать простую вещь сложный еще легче вторых вспоминайте историю революция не всегда приводит хорошим результатом учитесь обязательно на своих ошибках то есть пока вы сами не положите сервак вы не поймете из-за чего он лег пока вы сами не допустить какую-то сложную ошибку вы не поймете почему что-то сломалось то есть потерянный демин кстати в ушах это не самое страшное что может случиться и вот как я уже горю почему не спал две ночи мы сделали этот генератор уникальных открыток ну взяли и забыли сделать так чтобы они автоматически спустя какое-то время удалялись за одну ночь на жестком диске мы потеряли 160 гигабайт данных ну просто сошки гаем бегов место просто ушло в небытие и цифра аптайма 99 , 99 это не предел то есть всегда можно это это улучшить не гонитесь за модой то есть следите всегда за своим стеком следите за тем что вы используете не создавайте там больших огородов то есть если вам нужно решить какую-то новую задачу посмотрите есть ли у вас уже инструмент который для нее подходит не надо там находить новый модный какой-то фреймворк документация которому из только на китайском языке вы его так а это модно это круто давайте попробуем так делать не надо ну и под конец никогда не создавайте себе выдуманных проблем то есть один мой знакомый друг дима не так давно наверное все слышали про сидел на улице 4 часа заминирован им тапком он не мог стать оказалось что задача ложная за это была фальшивка кстати у димы передает привет всем докладчиком всем участникам конференции спасибо за внимание жду ваши вопросы вопросов нет а офигенно на смотреть что случилось это бывает учить начинают начнем сломалась это это не проблема спасибо что заходите здравствуйте спасибо за доклад вопрос такой ну не секрет что в принципе когда проект новое обычно всегда все легко и быстро а вот сейчас на прошествии там какого-то времени как какая самая большая боль и самая большая сложность в вашем проекте вот как раз это была эта боль решилась она в ночь со вторника на среду мы когда выкатывали общий проект как мы реализовали ленту то есть лента это текущий день просто вы выкатывай большой список постов человек даст ролевая до конца подгружаем следующий день и так далее когда мы мы у нас также еще мобильное приложение когда мы его запустили мы поняли что вес страницы очень большой она не успевает просто все от рендерить мы решили наконец-то все переписать ленту мы перевели этом на асинхронную загрузку мы и по чан карина очень маленькие порции мы полностью поменяли виджеты рекомендации заодно поменяли там кэш накрутили где можно и вот это боль исчезла но эта боль преследовал нас на протяжении двух месяцев спасибо так а вон там еще мужчина чтобы лишний раз находить здравствуйте спасибо за доклад для такой просек вы говорили что и у вас есть седин который автоматически включается при каких условиях какие-то не автоматически мы просто мониторим трафик если у нас это выходит спецпроект понимаем что народу зайдет много очень будет большая раздача картинок то есть при этом народ будет дальше проваливаться вовнутрь проекта то есть заходить на какие-то другие страницы мы просто переключаем раздачу одной кнопкой строкой в конфликте включать понятно да у нас усвой мониторинг и еще вопрос вы говорили что после лайка вы кладете local storage айдишник лайкнут по стадом то есть вам приходится другого браузера в момент авторизации первый раз страница инициализируется мы делаем запрос который один раз все это получит положит сторож и будет уже затем работать то есть вы зайдете с другого браузера вас равно все это подтянется и последний вопрос какой сейчас у вас пол серверов и какой примерно рпс короче проблема в том что все это выдерживает спокойно нагрузку в полторы тысячи рпс это всего лишь один сервер с 8 ядрами которые спустятся в selectel и это это один сервер очень хороший результат да спасибо я вас прорекламировал java саблей а ты обещал здравствуйте и спасибо за доклад о такой вопрос вот процента же вы его как-то подключаете сервер это поняла садим у нас просто есть наш именно конторский сидел который это несколько серверов уже именно наших мы спокойно трафик перекидываем на них синкай matt touch и и все они как-то где-то распределены они где-то находятся в других странах или как да но не могу сказать где сожалению но у меня два вопроса первый собственно говоря почему angular 15 а короче один из главных принципов мы используем только то что мы во-первых а хорошо знаем б если мы что-то не знаем мы сможем быстро найти ответ начали разработку мы реально в конце и в начале июль июля а первое более-менее стабильная версия 2 angular вышла спустя две недели и нам было уже не до того что все переписать мы решили продолжить при этом что с 1 1514 мы работаем уже очень-очень долго много мы знаем все подводные камни которые могут произойти поэтому мы решили не усложнять себе жизнь и делать то делать тем чем умеем пользоваться и второй вопрос вот если так ретроспективно посмотреть на весь проект то чтобы сделали по-другому если бы вот ну или вы вот все оставили как есть наверное я бы мы бы ничего не меняли то есть реально этот проект то есть мы работали реально над очень большим количеством проектов это как бы наш может быть венец нашего творения то есть мы реализовали все наши нереализованные идеи мы решили все наши какие-то старые ошибки поэтому сеть вдова в данный момент своей жизни я не хочу ничего менять может быть через год я думаю пойму что это такая плохая вещь получаешь надо срочно все переписать спасибо спасибо за вопрос спасибо сергей отличным доплаты полностью согласен со всеми тезисами такой более организационный вопрос а как было построено разработка я имею ввиду кадре view дипломе тестирования сейчас на все отвечу вообще-то к тестированию я даже не притрагивался я прямо очень не хочу туда лезть у нас работало два тестера которая и нагружали проекты делали там как она регрессионное тестирование так далее на первичную было да все ручное ну кроме нагрузочного нагрузочной мы делали танком как вообще было построено за deploy у нас отвечает всегда один человек то есть гиды не совсем нас сбор статике накат миграции там чекаут на новую ветку то есть очень простая система но в один момент времени там какой-то день за это ответственно только один человек чтобы там не случилось беды кто-нибудь не докатилось статику и каким там css и не дошли сама разработка происходило в очень таком вакх анальном режиме то есть только два человека общались с клиентом обсуждали пул задач пул задач менялся со скоростью одна новая и 1 перенесенная задача в полчаса поэтому мы определили определенный скилл map наших разработчиков кто что умеет кто что это сделает быстрее кто что сделает медленнее и в реальном времени просто раздавали все задачи периодически не спали сами и самый такой был критичный момент а ты реально неделя перед запуском мы построили разработку как у нас просыпается в иркутске первый утренний программист выходит на работу в 8 утра где-то до середины иркутского дня он передает работу дневному программистом в этот же момент в москве просыпаюсь я потом я отправляю дневного программиста спать сам переезжаю из офиса в квартиру мне выделяется персональный системный администратор который просто раз 15 минут звонит миской проверяя что и не усну я же дожидаясь когда просыпается утренний программист передаю ему задачей так мы жили неделю спасибо не за что так еще вопросы да то есть у нас ибо кандиру и fontaine de russie добрый день я тоже из иркутска рад приветствовать земляков 10 у нас есть человек спите раз иркутской есть человек сам сэр томас иркутска из москвы сургутская из иркутска 40 а вы откуда сыр куска я сыр куска теста с значит у меня вопрос такой вот вы использовали фреймворк laravel нам ухо пышный из функционала выбрали какие-то вот уже вещи которые были созданы конкретные там или все писали сами в большей части мы использовали на коробочное решение но когда мы подключили на пакеты 5 репозиторий мы нашли в нем наверное большую портянку багов мы ее переписали этот пакет используем до сих пор его написали разработчикам хоп описали проблемы они где вот на данный момент у них решили и в том же самом уровне 2 мы что-то тоже мы юзаем свою до сих пор сейчас даже не сходил я уже настолько к этому привыкли думаю что это из коробки ну то есть вы очень много решений брали вот именно уже каких-то за сжатые сроки придумывать велосипеда не надо надо сходить и купить себе велосипед и ехать с ним на прогулку и еще у меня вопрос такой по производительности база данных я к сожалению забыл немножко в этом говорили по моему клуба сданных вы используете 5 7 вот как оно я так полагаю проект действительно весьма высоконагруженные как майские льва с этим всем делом справляется какие то вы может быть используйте репликации или что-то но у нас во первых есть резервный сервак то есть до базы по стану реплицируется постоянно во вторых у нас есть чудо админы которые там все за оптимизировали и очень много сейчас идет не в базу идет в кэш то есть все когда сложные выборки например там сложная сортировка списка как газет по выходу последний статьи то есть все это один раз сутки кладется в нам кэш ты забывается и все теперь и генерации каша где-то посреди ночи мы выполняем чтобы какой то нагрузки на основной трафик на сайт не было кое-что на том же сервере до лежит что из нас один сервер у нас один резервный один боевой у нас все на одном сервере если начнут подтормаживать мы просто либо а возьмем еще один сервер либо протез помощнее возьмем том что он всего лишь 8 ядер сейчас ну ладно связи больше всего за доклад пожалуйста здравствуйте спасибо за доклад у меня тоже повара велю вопрос во первых как вы его оцениваете с точки зрения быстродействия связи с другими цифрами марками и второй вопрос как вы его оцениваете с точки зрения работы с nu с кодом написанным ранее просто мой собственный опыт таков что писать на нем быстро и удобно работать но поддерживать старый год уже не так быстро и удобно как хотелось бы но вообще как бы оценить с точки зрения вообще качество сама framework а то есть для нас это блин топ топ 1 потому что мы как-то раз нам стало скучно мы полностью разобрали посмотрели все вендоры все как устроена также в чем его плюс у него есть встроенный механизм и оптимизации например когда можно файл с роботами закодировать то есть сделать из этого прошло просто обычный статичный массив те же самые конфиге которая там заполнять это 10 что ли ну стандартная папка конфигов это 10 файлов которые можно одной командой просто в один статичный массивчик тоже запихать и все то есть оптимизируется он очень хорошо с точки зрения какого-то legacy старого кода то есть мы во-первых либо а мы какие-то новые проекты сразу пишем с нуля норовили либо если носки это были проекты до этого и мы их мы берем частями переписываем выделяем какие-то сервисы переносим выделили перенесли а какой то именно старый воробей nikon d в принципе там все нормально переписываются все удобно все быстро так привет сергей привет всем спасибо за доклад у меня такой вопрос довольно ну он скорее организационной я так понял что у вас весь highload был в основном по условиям работы что у вас было трое у вас были двойные морские совсем было трое то есть но фактически то есть какой-то конкретный момент времени работало три программиста на самом деле туда залезли у нас почти весь наш отдел разработки все там поучаствовали вот как бы дать это был михайло ты-то был от спасибо здрасте спасибо за доклад и у меня тоже вопрос про лари вел именно то что почему именно он то есть как бы сказали что она оптимизируется но например те же самые и второе symfony2 да джен тоже 2 ниже тоже свой оптимизации почему именно лоран здесь такое чисто субъективно просто удобно просто очень много им пользуемся а пользуйтесь но почему и вы много пользуетесь то есть а с чего собственно чего так сложилось исторически так сложилось я спасибо мы начинаем со времен третьего уровня им пользуемся почему ты до сих пор радуемся жизни так вот еще здравствуйте спасибо за доклад и такой успешный хороший проект все реализовали пришлось ли отказаться unit тестов или это было медленно я еще в еще раз повторюсь я в тестировании вообще не лезу не июне тест эти же код пишем у нас это этим занимаются тестировщика и они все это пишут я туда вообще в тестировании просто не люблю это не мое жизни идет нет нет значит и есть задача еще нибудь логировать пользоваться и какие-то де еще раз можно чуть блокировать по железке и действия какие то есть задача там складывайте логе там можно чуть-чуть я реально плохо логировать пользовательские действия надо а да то есть во первых мы обязательно лагер у им действий модераторов редакторов что вдруг там кто-нибудь решит что-то напакостить то есть мы все тут фиксируем пользовательскими над окинула героем какие были комменты когда это все оставлено в какой момент там авторизовалась авторизовался человек ответ от социалок и там возможные какие-то ошибки при получении там тех же самых токенов и так далее и тогда как что и зачем лагерь стройным лора вылив ским воровать 2 : log так все те к сожалению не могу выделить лучшие вопросы поэтому все кто задавали здесь есть классные наклеечки вклеивать и в себе можете по 2 штуки даже да и вы выиграете там крутой 3d принтер запасе большая за доклад вам спасибо что пришли послушать"
}