{
  "video_id": "75Wg5m7v5jE",
  "channel": "HighLoadChannel",
  "title": "TechTalk \"Все как у людей: введение современных инженерных практик в легаси-системах\"/Никита Приймак",
  "views": 937,
  "duration": 749,
  "published": "2024-04-10T06:03:34-07:00",
  "text": "Здравствуйте С вами п+ 2023 и сегодня с нами Никита приймак специалист разработчик в платформе CH Газпромбанк Здравствуй Никита наверно по традиции начнём с того где ты работаешь и чем ты занимаешься Да здравствуйте Ну собственно говоря Меня зовут Никита Я начинающий техлит в одной из команд разработки Газпромбанка основная Разработка и сейчас я занимаюсь внедрением современных инженерных Практик в своей команде в целом в нашей организации мы как в других компаниях сталкиваемся с различными вызовами с различными проблемами задачами И постепенно ищем способы для преодоления препятствий Сегодня я хотел бы поделиться Какие практики нам в этом помогают И как мы их используем А вот вы говорите про изменения эти изменения вносите в какие-то старые системы или новые коева Да конкретно в нашем случае мы работаем с leg системой Ну вообще самый такой тяжёлый нюанс Мне кажется при внедрении Практик это как раз то что система должна продолжать работать если она выполняет какие-то бизнес-требования Да всё верно Это одно из требований предъявляемых к нам как команде разработки естественно мы должны поддерживать как старые интеграции так и создавать новые и не создавать проблем для других смежных систем в целом нам в этом помогает то что мы решили Как ноги наверно компании перейти на микросервис архитектуру в первую очередь Для этого нам пришлось разработать первым шагом приступили к разработке Стандарта для разработки микросервисов то есть мы сели и совместными усилиями нашей команды начиная там от разработчиков заканчивая архитектурой создали стандарт где проработали тщательно каждый пункт по те задачи и требования которые с которыми мы сталкиваемся на ежедневной основе надо отметить что мы то также периодически проводим ревизию этих стандартов и изменяем То есть можно сказать что они развиваются вместе с нашей командой А и вторым шагом Мы решили внедрить в нашем проекте Дора метрики Дора - Это я так понимаю аббревиатура это не поп-певица которая Дора как это расшифровывается и Откуда это взялось а Дора - это абревиатура Да действительно которая расшифровывается как research and assessment это группа исследователей которые занимается оценкой и изучением применения Практик на основе их исследований были созданы определ метрики в целом в до Их достаточно много но мы используем у себя только четыре основные - это время на внесение изменений То есть это то время которое проходит от того момента как вы взяли задачу в работу и грубо говоря задеплоил данная Метрика позволяет оценить вообще эффективность процесса разработки вашей команде следующая Метрика - это частота плов если переводить на русском наверное будет так это количество релизов грубо говоря которые вы производите в единицу времени можно в днях счита Можно месяц это Не суть важно а данная Метрика позволяет оценить насколько гибка и автоматизирована ваша команда А это релизы что подразумевается под релизами то есть deploy of Production или там не знаю Веги те делается да непосредственно это dey of Production То есть это деплой именно в продуктовую среду то есть тот сколько изменений вы доставляете в прот за единицу времени Вот именно в прот не в тест То есть как часто бывает что А в тест у нас каждый комент Лои в тест вот у нас такие релизы здесь конкретно вот то что видно пользователям Да конечно конечно А следующие две метрики - Это чисто среднее время восстановление системы и частота ошибок при изменениях а обе эти метрики А первое говорит нам о том насколько быстро мы можем восстановить систему после сбоя вторая говорит о том нас Какой процент вообще ошибок происходит Вместе с нашими изменениями то есть сколько изменений содержит какие-либо ошибки обе эти метрики говорят о надёжности и Отказ уче устойчивости нашей системы а в целом соблюдая все эти четыре метрики и придерживаясь определённых ПС Практик мы можем обеспечить себе быструю эффективную И главно качественную разработку продукта Угу а Конкретно нам в данном случае помогают в этом следующие инженерные практики это нит и интеграционное тестирование А думаю все наши слушатели знают что это такое и как это применять отмечу что большое количество тестов большое количество покрытия вашего кода тестами написание автотестов компонентных тестов и других фидо а позволяет вам ускорить сам процесс разработки увеличить количество деплоя в прот так как вы не тратите большое время на ручное тестирование и на тестирование обратной совместимости что на самом деле может стать как раз Тем Ким горлышком который не даст вам добиться высоких результатов по дор Ну вот по поводу тестирования как бы насколько я знаю есть много систем таких больших в которых много всяких тестов и опять же автоматизированное тестирование оно само по себе не быстрое Вот время выполнения тестов оно может занимать часы там не знаю какие-нибудь профили У вас есть Вот мы сейчас выполняем быстрые тесты и для них метрики считаем Мы выполняем там медленные тесты для них средствами CD пайла Вы можете на самом деле настроить Какие тесты будут запускаться в зависимости от внесённых вами изменений то есть не обязательно прогонять Все тесты которые есть в системе действительно займёт слишком много времени но я думаю она в любом случае будет намного быстрее нежели тестировать это вручную с учётом того что у вас может быть например по 2Т деплоя в день если верить Дори и как они говорят элитные команды пло не сто раз я так понимаю есть какая-то боязнь быстрых плов что если мы очень быстро будем чего-то закидывать впт то это ВС очень быстро будет ломаться понял действительно есть мнение что скорость разработки ведёт к ухудшению качества кода целом ухудшению качества разработки Однако исследования Дора говорят об обратном если им верить то придерживаясь определённых практи в м мы лично убеждаемся на практике Вы можете обеспечить себе быст тку Для этого просто нужно следить за тестами следить за покрытием тестом кода Нужно обязательно придерживаться определённых до Практик как я сказал до этого и в целом соблюдать дисциплину и стандарты разработки в команде собственно говоря возвращаясь немножко к предыдущей теме какие мы ещё практики для этого используем Следующее о чём бы хотел сказать это тоже относится к тестированию это контрактное тестирование Угу а-а по моему субъективному мнению достаточно редко используемая вещь для многих незнакомая э практика позволяет вам обеспечить согласованность между контрактами между А и двух смежных систем и следить чтобы при их изменениях а другая система об этом узнала то есть контракт описываете с помощью каких фреймворков Да мы используем для этого Framework Пак э Сейчас он в целом наверное можно сказать становится стандартом для Java разработки а Однако у него есть свои нюансы которые можно упомянуть Я наверно расскажу о них чуть позже когда буду говорить о сложностях с которыми мы столкнулись Следующее о ЧМ бы я хотел упомянуть это фича тогы данная практика уже не Нова вы в целом можете найти много статей в Google и видео на YouTube которые рассказывают Как использовать зачем это нужно вкратце это практика позволяющая вам ограничивать функционал вашего кода без внесения изменений непосредственно в код или деплой приложени таким образом вы уменье риски при поставке изменений Вы можете поставлять и вы можете быстро устранить ошибки которые возникли у вас на Боевой среде в связи с внесением изменений Это непосредственно влияет на такие метрики как среднее время востановления системы и частота ошибок при изменении а также непосредственно позволяет на самом деле и увеличить частоту развёртывания и время выполнения задач так как вы можете поставлять задачи частями А вот эти изменения они в ранта происходят Или надо перебирать подходы к реализации могут быть разны для этого могут использова и обычные конфигурационные файлы так и база данных так и отдельные сервисы и таким образом вы можете обеспечить себе как и ранта изменения так и просто изменения связаны с перезагрузкой приложений А вообще вот как бы идут всегда бои по поводу того как нам организовывать ветки в репозитории Как у вас всё это сдела да В данном случае мы используем это достаточно новый Я думаю подход клени и Стандарт работ который говорит нам том что вева може по-разному Не суть важно и все изменения ВНО именно не в это вет содержится тот который всегда готов пю на мы убираем все долгоживущие ветки и стараемся декомпозировать задачи так чтобы они не занимали больше одного-двух дней то есть Таким образом у вас есть некая ветка треть на примере вам нужно сделать задачу по внесению изменений например в кодд Рас графи для делаете в не изменения буквально в этот же день и на следующий какое-то Вот это маленькое изменение вы обратно свае и т же вы можете уже сделать релиз То есть вы просто пачку от резную ветку заливаете её на Навля веткой дальше рез обратно сливать не нужно всегда содержится актуальный код Ну а какие-нибудь фикс там что-то что надо точно также пачку их от и обратно снитесь то есть всегда пате Сва похо ВОМ поет нам количество коллизий и конфликтов во время жа во время разработки несколькими разработчиками например уменьшить само количество кода вносимое в изменениях и упростить процесс код RW а также обезопасить это процесс так как чем мы меньше кода ревью тем мы тщательнее это делаем тем меньше ошибок мы можем допустить А если мы ещё При этом применяем ранее описанный нойте контрактные тест иглы мы сразу Тестируем функционал обрат и если что у нас всегда есть возможность отключить новое введение даже если о дала ошибку Наде мы не зафиксировали Е во время тестирования Ну я так понимаю все все разработчики хотят сделать лучше и вот дотри это как раз такой способ объяснить бизнесу что мы делаем И зачем мы это делаем есть какой-нибудь такой заключительный вывод который ты можешь сказать по поводу применения этих метрик у вас на прое я считаю чтоэто не только самом для разработчиков вю очере для бизнеса так как это даёт им понятные и понятные и достаточно эффективные метрики для оценки результативности работы и команд разработок а Подводя всё это к итоговому выводу Я хочу сказать что важно соблюдать Если вы хотите вот использовать такие подходы как у нас нужно в первую очередь понять действительно или они вам нужны а потому что я думаю что для маленьких команд или стартапов такие сложные инженерные практики ведения большого количества дератизации документации просто окажется неэффективным займёт слишком много времени например написание тех же тестов занимает время А фреймворк пакт требует согласованности между действиями команд и их тестами то есть ну в стартапе и нету много команд обычно тогда но вам на самом деле может и не понадобиться контрактное тестирование Если вы работаете внутри со своей системой исключительно А например tbd требует также грамотной декомпозиции задач и что на самом деле требует опыта от аналитиков и разработчиков тоже поэтому изначально это даже можно замедлить ваш процесс разработки но в итоге вы получите Профит от того что у вас сократится количество ошибок в проде вы будете работать на меньшими кусками кода и делать его быстрее у вас будет постоянная готовая тестовая база автотестов и тестов которые уменьшат работу по регресс тестированию буквально до нуля и позволит автоматизировать этот процесс полностью и у вас будут хорошие отлаженные CCD паланы которые будут быстро доставлять ваши изменения впт и реагировать на любые ошибки Угу Аа так возвращаясь Да к своему ответу Подумайте Действительно ли вам это нужно Если нужно Не бойтесь Не бойтесь это внедрять э Путь будет тенистым и сложным но результативности меня заставлю Себя ждать да Никита Большое спасибо было очень интересно встретимся на конференции Да спасибо большое С нами был Никита приймак и ваш ведущий Абашев Алексей Y"
}