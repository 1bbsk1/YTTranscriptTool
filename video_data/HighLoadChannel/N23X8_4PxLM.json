{
  "video_id": "N23X8_4PxLM",
  "channel": "HighLoadChannel",
  "title": "Внедрение SRE. Итоги 5 лет опыта / Павел Притчин",
  "views": 3595,
  "duration": 2777,
  "published": "2022-03-21T14:13:18-07:00",
  "text": "привет меня зовут павел я сегодня расскажу про наш опыт в dota с темой сырья сначала пару слов обо мне что вы понимали кто такой как здесь оказался и так далее с 11 года я разработчик пишем но тут найти до сих пор очень люблю все шарпа этот язык ездят на чеке кстати здесь ребятам сверху будет хорошо явно сфере с 15-го года я работаю в dota сначала занимался бы кофе сам потом пришел техническую команду мы делали rabbit мы делали распил сервисов и архитектуру с семнадцатого года я лид в этой технической команде там еще больше познакомилась с инфраструктурой полюбил это дело и стал заниматься как велит каким-то практиками и так далее с девятнадцатого года наша техническая команда пришла в платформу так называемый где уже был сырья он развивался расцветал и мы туда перешли я лично на себе проходил он boarding как обычный рядовой разработчик прочувствоваться сказать все что там было не придумано из двадцатого года мне далее уже возможность лично все эти серьги подходят практик которых я расскажу внедрять ну из 21 года я стал хотя тут инжиниринг но сейчас не имеет значения пару слов про нас да да да конечно это про пиццу этот основной бренд и так далее но не только с некоторой времени у нас есть два стартапа это кофейни гренки там сейчас 3 открыта в москве самаре и сеять доннер ных по казенной точки доннер 42 а все это работает на базе нашей единой информационной системы которую разрабатывает обслуживает подержите внедрять в практике краз наша команда находишься в dota инжиниринге пару цифр мы в 15 странах больше 720 и пиццерий я посчитал в петербург 40 есть пиццерии вот в самом черти корда так что заходите тоже а 16 миллионов клиентов нами пользоваться польза вас когда-либо 2 2 тысячи сотрудников прямо работает у нас то есть они ежедневно стала кость нашей системой который мы все разрабатываем все это дело создает 15 500 человек управляющей компании и 200 человек из них войти sharp разработчиков у нас районе 70 больше о себе команда разработки много сервисов и все это дело поддерживают планету сдуру восемь человек поддерживать как с помощью как раз эти три подхода моя цель сегодня заключается следующем есть книжка от гугла который вы наверняка все знаете читали их на самом деле две книжки и я хочу рассказать о части практик как мы у себя их внедрили как мы их поняли и тогда ли поделиться с вами опытом поэтому сначала я расскажу про то она же рутина и как ее замерять надо ой потом я расскажу про дежурство коул alert и и что с этим связано подход про и село некоторые вещи про системное улучшение то есть не все здесь про реакцию что-то еще про то как не допустить проблемы будущем ну и пару слов про продвижение собственно самих идей и сырья но с началом есть базовые предупреждение пожалуйста учитывайте свой контекст если вы здесь увидите это прям не значит что это вас будет работать прекрасно и замечательно у всех своя ситуацию всех свой масштаб какие-то вещи появлялись например ну года три назад cadence был не 200 человек атома 50 человек и так далее много при вас давно я не работал в гугле и я не могу отвечать за то что вот правильная интерпретация каноничная вот практика этого только у нас и правильного так делать и конечно же фундаментальных выводов наверное не будет каких-то больших а текста постараюсь сделать все таки читайте требу к сирии workbook ну и еще прекрасная книжка за проектов клаус системами встретим валим тут так что вперед ну что ж начнем с управлением рутиной это вообще на мой взгляд ключевое понятие вообще серьге тайл и все там крутится вокруг него стоило нам нужно замерять управлять и снижать его соответственно вообще стоил это такая работа которая ручная по своей сути которые делают люди ну например там прописать какую-то запись там если тебе необходимо это повторяемая работа например из нам нужно зак накатывать регулярное скрыли миграции от разработчиков то они будут повторяться так и так плохой признак повторяемости то что мы не можем предсказать когда именно будет повторяться обычно бывает то очень много какой-то рутинной работы то ее очень мало она автоматизируем а это принципиальное свойства tylo это такая работа которой мы все-таки можем переложить на машину ну например мы не можем приложить на машину там заключении договора с контрагентом пока что боты не умеет это делать ну например анализ какой-нибудь костов или прогнозирование чего-то мы уже можем переложить это работа тактическая точно приносит здесь сейчас какую-то пользу ну например весьма с 1 сентября из супер мега большая нагрузка на продакшене то мы хотим ее быстренько прямо сейчас увеличить мощностью чтобы пережить этот день самое тоже страшная в той новой работе это то что на линейно возрастает с ростом сервиса здесь причем не только с ростом сервис я в будешь у нас там 15 стран она возрастает с ростом любых размерностей то есть участница больше то есть для появляется новый бизнес и появляются новые страны появляется больше разработчиков команд который с этим всем работает это канонично и определение из книжки но на практике полезно в эту-то еловую работу еще включать вообще любую работу на продакшене который делается руками во время инцидента например также полезно сюда включать доработки в мониторинге и в конфетах кажется что эта работа с кодом ну типа infrastructure скот и все такое на самом деле нет это тоже той лава работа потому что это не ката по сути в некоторые конфигурирование того что тебе нужно сделать мы в той а также включаем баги и и апдейты версии баги исключается только если ведется какая-то прям плотная работа с каким-то контекстом разработана фичей сразу по синю баки тогда это не таил остальном баги тоже идут сюда и разные ниже нервные процессы исключается всякие там риттер команд и так далее ну вот например говорил анализ костов это вот сюда по не находит уж это может автоматически проблема стоило следующий его очень сложно выявлять мы не можем контролировать то что мы не можем выявлять поэтому его надо выявлять мы не можем сделать потому что он часто скрыт какой-то личной коммуникации то есть ты пишешь своему любимому админ у вас пожалуйста сделай мне микро жку почему ты ему пишешь ну вот он хороший парень и всегда делает и ответственный и вообще любит накатывать миграции с другой стороны тоже есть проблема что тебе когда пишет кто-то пожалуйста дай доступа к такому-то серверу тебе эта работа на пять минут даже может быть знаете что есть такое правило 6 работать меньше 5 минут просто возьми и сделай вообще нигде не отмечать здесь это очень негативно влияет потому что из этих вот маленьких частей состоит огромная то и который накапливается в команде то они равномерно распределяется мы проводили опросы среди наших сырья ребят и вот эти 9 человек мы опрашивали как видите у кого-то прям очень много тыловые работы за последний квартал то есть равен 90 80 процентов у кого-то и совсем немного и есть еще какие то люди которые вот прям склонны к тому чтобы в я щас быстро возьму и сделаю эту самую работу ну и собственно цель держать это все меньше 40 процентов почему уже не держать меньше ну потому что здесь больше то людям становится сложно работать они выгорают от этого всего ну и самое главное что не сможет делать проекты инженерные которых тоже дальше расскажу решением проблем этого стал human backend интерфейс все запросы которые приходят в личку перенаправляется через единый канал на той стороне находится дежурный которые там как-то какой-то своей схеме ротируется чем который трое запрос еще не важно кто там находится кто-то обязательно придет и сделает эту работу так у нас все находится в словакии вся коммуникация находится с лаки и мы все любим словак это просто на сидим конечно же логично было сделать это через него здесь видна форма где чек может быть той то бить выбить выбрать уровень сервиса написать какой-то description конечно понятно сначала это не было формы сначала это был просто запрос в аке где человек что-то писал на той стороне это обычные карточки на доске операционки где живет дежурный вы можете видеть что здесь есть то же самое название данном случае купить настройки и сертификаты тот кто делает запрос он не знает кто его возьмет в обработку но при этом может написать все что ему нужно будет сделать потом дежурную эту задачу и уже разбирается с тем что надо делать мы здесь можем учитывать например то какое как часто те или иные люди делают запросы ну просто для разработчиков это тоже то я на самом деле только с их стороны и что удивительно обычно одни и те же люди в командах за выполнять такую работу если прийти к ним потом и спросить ребята что это вообще каждый раз на спросите миграции какие часами это не можете звонить и мог во первых очень много полезного вторых может быть часть работы с них еще можно искать тот бороться стоил на подступах ну конечно здесь видно кто ее исполняет эту работу и кита теги которые можно не навешивать с тегами кстати как всегда самая главная проблема это то что они постоянно кроется перед конфигурировать появляется что-то новое что старую добавляется никогда не удается нам попадаете правильно в категории если кто-нибудь оформил тикеты в какие-нибудь там ажуры vs и и прочие клады и предназначен для вас эта категория ну как бы просто дайте мне скорее оформите get неважно что там стоит анализируйте можно но особо пользы от этого не будет при этом параллельно остается всегда еще канал справочная так называемый это тоже канал с лаки который сначала был до появления той формы куда люди могут свободном режиме свободной форме написать свой вопрос часто люди не склонны тут не бояться или незнайка сформулируйте думаешь я просто спросить хочу что это такое типа мне прям вообще там нет какой-то работаю а потом работа там конечно оказывается поэтому оставляем канал справочное выглядит примерно так там задается вопросо пишется какие-то апдейты конечно же на это тоже реагирует дежурный ажурный видит что это не просто спросить а там работа на два дня он конвертирует этот трек в flash request важно оставить людям возможность несмотря на he-man в конкурсе смотря на то что мы абстрагировать них эту проблему стоило оставить им возможность все равно лично общаться с дежурным ну например когда кто подает заявку там ему флаке отвечает bosch типа важная вкуса вот она пришла статус такой это вам написали такой-то комментарии 50 ведь и пожалуйста все учитывается например сохраняется личные отношения теперь про замер рутины мы его замеряем например через количество тех самых запросов это очевидная вещь то есть если к нам приходит к утечке тикетов наш сервис ds кто мы можем на основании этого количества тикетов посмотреть сколько же у нас их было в тампа неделю например мы учитываем синенькое тот собственно запросы к этой форме красненькая это вот запросы в канал можно делать какие-то разные выводы на этот счет например видно что не удается сто процентов людей перевести на request вот это так называемый он часть остается в канале например можно взять какую-то часть выявить там локальное изменение и глубже разобраться что же там такое происходило почему же вдруг количество этих запросов стало больше ну например она могут стать больше потому что большое количество запросов на будущий доступов вот буквально проблемой всех месяцев происходит очень большой на им приходит новых и новых людей и команде сырья приходится на не выдавать всем доступ и это поэтому категориям входит в топ категорий если взять 1 неделю посмотреть выявить самую топовую категорию и придумать какие-то действий вокруг неё в данном случае перенести часть выдачи прав на метры в процессе он бардин га то этим самым можем от этой рутины избавиться еще можно смотреть на то какое количество запросов у тебя находится в конце дежурство the screen сладко дежурство это остатки новых запросов которые обычно в пятницу накидывается на дежурств недели и это какое-то количество запросов прогрессе если после одного дежурство много запросов остается на следующее дежурство в этом явно то что то не так значит нам нужно увеличивать пул дежурных например прямо сейчас токсическое действие чтобы потом можно было все это обрабатывать то есть уровень то тем самым получается растет еще одно действие вокруг замера тойла это действие по опросу то есть мы проводим опрос и мы спрашиваем самих ребят которые дежурят какой процент tylo вас там был за последние 4 недели это палка о двух концах с одной стороны сами люди которые последуют прекрасный могут ответить на этот вопрос с другой стороны и в из-за характера работы некоторых часть теряется то есть какое то количество информации теряется забывается ты не всегда можешь оценить так может примерно с несколько те общие проблемы не проблема и так далее и старайся это вопрос а сами дежурные перечисляют стоил который у них был способ которым пользовались начали по замере рутины это просто заставить всех вести таймшит и то есть каждый журнал садился и пытался в течение дня заполнять сколько какой работу он делал на какое время это хорошо работает когда у тебя совсем плохая ситуация и очень много всего происходит вокруг и нет никаких инструментов даже там чем у быка интерфейса но не каждый дежурный готовы тратить на это время идет там через пару недель такой работы все от этого устают в общем мы только от этого отказались некоторые выводы тоже скрыт но его можно замерять например вот всеми этими способами которых я говорю единого способа замера tylo нет все они хороши и только в совокупности всех этих показателей можно сделать хоть какой-то вывод о том что у тебя происходит стоило когда уровень tylo выше нормы надо вкладываться например вложения может быть то что мы не начинаем какой-то другую работу а все наваливайся и боремся этим time сам-то например вложение может быть то что мы прекращаем на время там на два дня например работу и дежурном приходит и они разгребают все эти карточки которые там появляются вторая важная часть дежурного важная часть в сырье который тоже посвящено много глав вывод сами книги это он кол сюда входят дежурство на продакшене сюда входят allure the incident management & paste martin по опыту стало понятно что хороший процесс вокруг этого уже дает какой-то определенный уровень сервисов по стабильности ну например если тебя если просто наводил нормальный процесс ты уже там условно три девятки сможешь соблюдать своем сервисе даже не вкладываясь как-то очень сильно в архитектуру в изменения и так далее соответственно наложение это процесс начальных этапов когда там только еще хотите берите сырье или вообще ситуация очень плохая со стабильностью дает очень большой boost как ни странно все эти alert и которые подают продакшн и это все та же самый тон и мы его тоже учитываем как-то ведение карточек инцидентов происходит на той же самой доске операционки вот здесь можете видеть что вот это конкретно alert упавший он происходит на продакшене падать на эту доску и дежурный его обрабатывает если это не критичный какой-то alert то его надо просто закрыть написать что-то нужно сделать и подправить что в следущий раз он не возник натирается работа дежурного давайте рассмотрим процесс инцидент менеджмента который начинается когда alert все-таки более серьезный чем тот который можно каком-то синхронном режиме там за пару дней закрыть ну потому что он произошел и ушел дальше мы возьмем наше мобильное приложение додо пицца и посмотрим что происходит поступает alert на сигнал сигнал на пейджер дежурный отвлекается смотрит что там происходит параллельно все конечно же дублируется в слать и потому что опять же для дежурного это один из основных инструментов потому что часто приходится коммуницировать с разработчиками не только в карточках но еще и с лаки поэтому недавно переделали тоже системы сент моему ты опять же сделали ее на базе служака здесь например встать или видно что это не работает сайт и мопед и богато мобильное приложение на казахстане и талер который не создала систему мониторинга то редко кто создал support support можешь создать такой лет и фактически сразу породит инцидент для для разработчика также есть автоматически лифт и попадаем и и система мониторинга интересным является то что это все то что падает в канал она пока что не стала инцидентом даже в случае с альбертом который саппорт прислал все равно есть какой-то шанс что не ошибёшься что-то там не так поняли что полога все нормально что это не все что видно на самом деле поэтому есть alert и а есть собственные инцидент это дежурный может создать publish есть кнопка этого может из этого ли рта сделать полноценный инцидент как он принимает решение о том что надо делать инцидент это решение остается за ним каких-то автоматических правил вот нам за много-много лет пока что выработать часто не удалось если ваша такое получилось вас есть кит автоматически правило граждане инцидентов подойдите потом мы поговорим я думаю будет очень интересно меняться опытом фактически мы смотрим на следующий ну конечно если это часть по приему заказа и она не работает и заказы мы не принимаем то есть выручка не идет тут как бы понятно скорее всего с вероятностью 99 процентов президент будет создан если только это не сбой системы мониторинга такой тоже иногда бывает если в саппорт очень активно пытается качество что там идет не так ребята напишу десятки пиццерии там у вас реально что-то не работает а мы это не видим по той тоже скорейшей incident и он должен быть за промоушен бывает так что идут ошибки но ничего нет конечном счете все равно решение оставляемой на откуп дежурному может быть так что какой-нибудь там я прохожу мимо вижу что-то ребятам реальная проблема вами говорим давайте создавать инцидент потому что создание занят фанатичка за не пуст мортом после инцидента если инцидент все-таки полета создается он пишется в публичный канал наш нам очень много людей там 200 человек то есть the mighty плюсом часть бизнес который связан а где ведется такой огромный лоб всей системы и работоспособности сразу же назначается роли то есть в инцидент те во время горячей фазы это обязательно есть commander по дефолту это дежурный который был и назначается скрайбер то есть вот и будет записывать все действия он же будет уже публичных коммуникаций у нас приходит происходит инцидент и что-то работать не так явно мы должны в паблик выдавать статус типа вот мы реально не работаем вот разбираемся вот щас починимся становитесь осталось немножко все это собирается в виде нами те то есть он даже постоянно ссылка закрепленная и лог скрайбер пишет в канал инцидент менеджер инцидента конкретного которые сольются под эту дату оттуда потом автоматически будет создан по спортом с разбивкой по времени происходит разбор там как бы своя история чтобы это не буду говорить но на выходе в конце мы вот в этот самый канал где происходит во всей системы гардероба способности пишем китай тоги сколько был инцидент как он что не работало может быть китай причины это важная часть открытости для всех кто в этом участвует чтобы они понимали что мы как-то разобрались проблемы она как мне сейчас закончилась что можно сказать по процессу инцидент менеджмента часть али артов приходят в инцидент ему часть allure то всегда остаются ли ртами и видимо это их судьба оставаться такими инциденты сто процентов происходит в куст мартом и который тоже имеет хоть свой уровень критичности уровень оценки например для опять же части биту семьи приходят выручка оценка посмотрим нормально делать по недополученной прибыли то есть потому сколько потоки потерялась заказов а при этом для кирпича считают для того что присходит покойся то есть запись сирии можно просмотреть сколько там и сколько пиццерии стали в 100 книг строку механизм вставания штопать что-то идет не так чтобы заказанного не принимать или сколько например они ладно alert и и экшена этим после поста мартом а это та же самая операционка который тоже на самой ту же доску операционки попадает все это менеджер то через ежедневные стендапы дежурных которые по утрам в 9:30 происходит куда приходит собственно жирной ну и те кто там ему должен помогать и так далее там это все обсуждается и какой-то ведется регулярный tracking текущей той новой активности ключевым понятием в сырья является собственность сервис ловил объективы я рассмотрю это на банальном контры управление котором собственность сервиса logic тоф является вот представь сейчас холодно вокруг нас это комната и явно внешняя среда холоднее чем то что у нас происходит здесь по температуре и по этому она как бы сподвигает нашу комнату охлаждаться есть датчик температуры который замеряет текущей пирату рискует установлено значение там случае допустим вас игралась который поступает на управляющие устройства у тебя есть данные о текущем состоянии температуры в комнате и целевое значение прочь устройство понимает решение если сейчас у нас температура холоднее чем и должна быть ну мы должны исключить нагреватель чтобы он нагрелся есть температура не холоднее то тогда мы играть и не включаем ли даже включаем кайтах охлаждать или чтобы он и ты делаешь там это типичный контр управлением котором собственно является с его на самом деле пойдем по аналогии дальше мы собираем два важных параметра индикатора первый рейд это количество правильных запросов ношения всему количеству запросов и второй это латексе попытку я рассмотрю сейчас процесса салона именно секса свете как более простом для каждого из сервисов которых у нас там много мы снимаем эти показания со косарей то раз в неделю при этом для этих же сервисов установлен целевые показания как они установлены здесь очень неоднозначный момент мы проанализируй все сервисы выявили некоторые как тический путь заказа то есть прям в то без чего вообще никак не может происходить заказ и те сервисы которые осуществляют мы посмотрели на активность contribution в этот сервис потому что есть предположение что чем чаще происходит изменение в сервисе тем больше он не стабилен по своей сути конечно же можно еще узнать у людей которые отвечают за бизнес часть что является важным что является менее важным на основании этого можно побить все сервис на кита группы определенные по пакетам , попадает в группу четыре девятки это сервис падают там три с половиной девятки какие-то в три девятки и мы можем считать общей секса стоит всей системы то есть взять среднее за неделю от критических сервисов это будет наша целевое значение ну как бы тем самым 1 неделю можем считывать показания секса среды по каждому сервису это будет наш температуру в комнате условно и мы можем установить какое-то целевое значение которое надо установить интересно что если ты хочешь соблюдать четыре девятки и выдавать это в паблик то конечно тебе внутри надо объекте вставить на три с половиной девятки ну то есть если ты тигр одном трюк спокойно девяток утечку вашу запас чтобы там нет если ты хочешь соблюдать в три девятки общую стабильность системы то тебе надо ставить чуть повыше его то есть он уже ставит три с половиной девятки чтобы если ты упал ниже немножко то есть там будет какой-то лак небольшой в неделю это не было бы заметным мы считываем вот допустим нас происходят события в неделю упала общая стабильность всей системы так это выглядит на тепловой карте первая колонка вот желтенькое красненькое так роста где общей собирается средний за четыре недели плавающим окном показатель каждый неделю по понедельникам садится группа уважаемых людей которые смотрят на это все дело и смотрит на эти индикаторы дальше есть варианты то есть тут надо проанализировать мы не можем просто автоматически принять решение надо ли нам сейчас упарываться по стабильности мы должны быть и что там происходит даже если может ли в красную зону это просто первичный хотя 3g первичное событие ну например бывает так что что-то вот-вот просто оно произошло и мы не считаем что это проблема что можно сделать ну например если идет тренд есть точное понимание что эта проблема то мы начинаем старт активности по стабилизации бывает происходит ложные срабатывания и тогда нужно подправить систему мониторинга так чтобы следующий расположен справа от мне не произошло а бывает так что нужно снизить просто уровень сервиса например если у нас есть 2 сервиса модификации которые могут мы точно не будем заниматься мы пишем рядом новый супер крутой модной сервис идентификации да это важный компонент доу находится на критическом пути down ага стреляет мы не будем точно него вкладыватся поэтому не стоит его вообще в эту систему освободить пусть будет вне этой системы это решение о том надо ли включать активность ирина друг редактировать это как будут наши управляющие устройства в этой налоги и идем дальше допустим мы должны сейчас включить активность по стабилизации и тут есть разные степени жесткости мы пробыли все степени жесткости начинают полного 100 по всей разработки когда что то идет не так заканчивая частичная синхронным исправлением в режиме в чатик пишите там что вас как происходит давайте исправлять ситуацию все это делается но все-таки по стабильности здесь наверное важным правилом является то что нужно придать нужный уровень тревожности всем вокруг чтобы они легко и с удовольствием зашли в цикл стабилизации и не занимали свои хичиго разработкой это по сути как бы наш нагреватель в данном случае то есть мы включаем нагреватель по обучению стабильности интересным сайт эффектом здесь является то что если одни и те же люди делают сдачи по стабильности вместо того чтобы делать фичи который увеличивать нестабильность там и еще как бы общем в плат нестабильности уменьшаем здесь то есть как бы внешняя среда здесь тоже становится более теплый что ли и в конце нужно просто фиксировать когда мы оканчивает а вот субботник так называемый по стабильности и выходим из него а похожие ситуации есть вокруг light он все то есть там приходит об репорты по объекту и из расчета каждой команде каждый команда сама по своим ключевым пунктом смотрит что там надо включаться или не надо они сами это решают у себя вот допустим нижний график и the end point который тут есть но при этом то никто не следит потому что это просто сбор лобов вопросы эти сложные места с его опробовали мы alert и на бизнес метрики допустим на них ставите слова до алевтина бизнес метрики есть но практика показала что проще поддерживать нужный уровень сервиса путем того чтобы работать с технически миллиардами то есть вот в данном с сайтом или ватности обычно бизнес метрики дают слишком большую задержку и они не чуть другие факторы влияющие на них не только что наша система часто страж и вопрос как убедить бизнес вот собственно взять ее восстановить разработку чтобы ложиться в стабильность это сложный вопрос мы его убеждали по-разному во первых это все в принципе падает а никого убеждать не надо то есть и так всем понятно что делать но если все более стабильно то здесь конечно будет проблема можно чуть просто делать там очистки 100 синхронных вливаний задачи по стабильности если что-то идет не так и так далее мы еще пробовали такую вещь как рисовали арты т.е. это такие ленты которые упреждающие предсказывают что нас идет тренд на снижение стабильности и поэтому это не возникает из литых подправив что таким самым ты не съешь весь бюджет ошибок и сможешь естественно не дойти до грани такой мы тоже используем интересный эффект этих лордов заказать в том что когда они перешли под контроль разработчиков и когда мы на них столетия лорд и направлять с пейджером внезапно уровень стабильности сервисов резко поднялся чем когда был перес команда в виде придаточную звена между этим всем подход и соло в принципе универсален можно навесить объекте вы на что угодно например вот на эти двадцать пять измерений то его я уже говорил что например можно навесить если у тебя большое количество задач в прогрессе где-то в середине-конце дежурство потому что есть в команде такое правило когда если это происходит то вы собираетесь и привлекаются дополнительные люди чтобы собственно разгрести эти очередь все это конечно хорошо но все это к сожалению реактивные меры то есть у нас уже произошла проблема а мы потом только начали а не разбираться мы уже начали тренд на снижение стабильности и мы потом стали разбираться с от самой стабильностью в подходе сырья заложено важная часть это часть по системным улучшением каким-то упреждающим действием чтобы этого не допустить система улучшения необходимо потому что довольно сложно делать некоторую часть работаю в одиночку то есть за время дежурства неделю там или даже две не все получится сделать какие-то работы требует коллективной работы месяцев разработки ну например если тебя в принципе есть проблема того что слишком не до утилизированы сервера и тем же перейти на кубер notes но это не работа на неделю-две то есть тут надо заряжать нам делаешь это серьезное а при этом мы не рассмотрим ситуацию как другие люди делают кит работ получением рассматриваются те кто дежурить они же лучше всех знает к надеясь это эти же самые люди будут делать эти же сами работы необходимо не только поддержание часто развития системы ну например бизнес часто может требовать снижение костов на клауд инфраструктуру и вот это не укладывается в типичное понятие работ командой сырья по стабилизации сервисов то есть это что-то больше для этого мы используем такой понять как инженер проекта jing project то есть это проекты которые ну например это вот та же самая система request шлаки например эта подготовка инфраструктуру губерман свет очень серьезный сервис принять или вот создание с нуля какой-то там системы alert of и также инженеры проектом и поэтому механики может работать например исправление после довольно крупного падения но стоит вопрос как это все совместить с дежурстве потому что дежурство они все перетягивает на себя поэтому мы обычно их ограждаем эти самые проекты в этих проектах есть всегда лидер ответственный который заинтересован в том чтобы это сделать это какая-то получается параллельная работа то есть вот есть дежурству со своими там ротации так далее там гребут делают alert и инциденты и так далее сова следят и параллельно происходит инженерные проекты не всегда из лидер у них всегда есть команда который в этом участвует полноценно или нет у них есть цель оценка план что было понятно что делать насколько и как это долго них осталось какой-то и самое интересное что этими проектами тоже можно жонглировать то есть если у тебя как у чек который принимает решение о распределении приоритетов у нас от лидера сергея за это отвечала вот я когда был продукт оунер нам платформу так раз за этот учил здесь выбор то есть есть у тебя сейчас ситуация на продакшене стабильно и например у тебя есть какое-то количество людей которая дежурит просто не не занимается инженерный работает тут ты продолжаешь делать или может приостановить проект например и пить и туда или это может быть два проекта сейчас ситуация стабильна и что-то поделать может длинный проект короткий проект о чем я здесь какая-то маневренность приостановить его и так далее это вот описание типичного проекта например здесь ребята хотят перевести собственное слой и рыба же спустить его на уровень как бы дальше то есть до конкретных команд разработать то что описал это вот в общем глобально работает это контур останется как такой глобальный контур резервный что так но вот может быть внутри для команды из описание проблемы метрики кто в этом тоже участников мы экспертизы положим получим оценка в сроках кто будет делать и вот это все для того чтобы их отделить все таки это операционки требуется свой процесс ну типа колясок ароматом с целью и так далее то есть это прим команда отдельно собирается там раз какое-то время те кто не дежурит а не делает это сам проект можно управлять схема дежурство пример с был такой права была что мы лидеры проекта не брали дежурством какое-то время там два-три месяца ему давали чтобы он прям сфокусироваться на своем проекте и не думать ни о чем другом смыва избавляли за счет измени схема dyrus который тамра сколько на месяц меняется от этом напряженном низкой человек потому что часть не все равно будет уходить на дежурство есть те кто является просто руками они должны будет хоть не дежурство ну просто потому что те же самые люди кто в команде дежурит и ниже делаете проекта параллельно все это пляж паттайя то есть если уровень то высокий это заряжает специальный проект который уменьшает этот уровень то его ну тут есть проблемы то я все равно проникает везде и очень сложно переключаться между инженерной работать фокусированный в команде и тем что происходит на продакшне прямо сейчас здесь требуется очень высоко квалификация инженера потому что один тоже человек в один момент времени вот сегодня дежурит завтра он делает какую-то работу на каком-то проекте послезавтра он может быть видеть этот проект поэтому порог входа в такую систему выше чем просто взять какого-то человека происходит по стайлеров с фокусы с ним нужно постоянно бороться также я расскажу про еще несколько подходов то есть для того чтобы нам влиять на качество разработки и не достигать от всех проблем с лордами мы например придумали такую штуку как фреймворк пуне функциональным требованиям также еще скажу так же мы пробуем подход на лсд это подход как раз от гугла который говорит он абсурд watch system design то есть подход про то как можно сделать например я примчусь не буду говорить ну интересно что если у кого-то хотите просто бесит то я очень рекомендуем задач будет конкретную задачу человеку типа как бы ты спроектировать такой the service pro порассуждать и он прямо вот там все путь видно сможет он продолжатель не сможет для того чтобы влиять на качество которое потом падает на продакшен виде систем также можно использовать подход серы все еще мы сделали вещь как называемый сырья куратор то есть когда идет разработка нового сервиса от команды сырья отправляет специально телесный человек который как бы присматривает за тем как там ведется разработка то есть командах нету devops of нету людей которые инфраструктуры в сервису это делают разработчики поэтому при разработке нового сервиса на тучи все замечания и завести вы все-таки до продакшена это делать серия куратор подходом ft факт сути это большой-большой чек-лист где написано как надо делать как не надо делать например здесь вот нас написано что скажи пожалуйста есть ты разработчик сервиса на нагрузочное тестирование чтобы проверить свой сервис он сидит продакшен если у тебя там какие то есть определенные нюансы еще один подход это rfc то есть когда какой-то разработчиков сделать супер большое изменение в системе затрагивает не только еще вы сервиса еще всех остальных он пишет такой запрос на комментирование то есть сначала мы пытались решить эту проблему путем создания канальчика где все решают что надо делать что не надо делать но это выливалось в 200 постов и срача поэтому в итоге мы пришли к формализованной системе и как раз такие команды сырье может очень сильно повлиять на будущее сервисы не допуская ошибок которые были предыдущих сервис сам фундаментально повысить стабильность у них пишется этот документ он потом становится дизайн доком где вот в путь по сути переходит документации можно посмотреть что там собственную автор имел ввиду какая схема архитектура дизайн почему на такие требования так далее это все проходит серию review и потом соответственно идет работа что делает ассирия куратор это который говорил он помогает дизайном и архитектурой это собственно прямая обязанность засилье заниматься архитектурой сервиса в том числе он эксперт pointer струна вопросам он собирает информацию при на том как работает в целом вся эта система как вообще живет разработка если там у них какие то проблемы то есть он такой агент изменений на местах это время сборщик информации земли что он не делает он не выполняет какой-то дивов свою работу за дежурного и этим всем занимается дежурными а и завершение пару слов про продвижения идей и советов как это все собственно все появилась самая главная причина по которой у нас появился в подход и сырья это большая нестабильность системы в то время когда он появлялся то есть это тут аргумент которому не надо доказывать что-то идет не так да все есть проблемы были нестабильность как будете решать ну давайте вот попробуем этот подход а также можно посмотреть почему подхода средств принцип подходит вам как компании ну например если вы работать в довольно небольших командах профессиональных то это как бы соответствует духу сырья если вас есть критические сервисы стабильность которых вам прям очень важно соблюдать прям очень нужно и вы готовы в это вкладывается например для нас этим является прием заказов то есть важно принять заказ поэтому все что угодно должно быть сделано для того чтобы могли принять заказ дыре подход при этом супе рациональный в нем нет каких-то кажется эмоциональных вещей типа давайте за мир во всем мире вот он проделал сделать и самое главное почему у нас это тоже появилось это какие то люди которые горели этой идеей то есть если вы хотите чтобы подобное сделать он точно уже люди которые будут гореть от идеи которые почитали все книжки ходит говорят нам сирия сирия и так далее мы продвигали довольно много и на всех уровнях то есть для бизнеса мы продвигали это на регулярных выступлениях в формате вот расскажите чего там происходит в отделе грубо говоря в данном случае наш архитектор рассказывает про ту зачем нужен губернатор на примере погрузки товаров начале 20 века ирландскими рабочие также есть регулярно встречи для разработчиков где тоже приходили и рассказываю что вот ребят смотрите есть такая прикольная штука из его давайте вот мы посчитаем otdyx и так здорово считайте тоже себя строить сеть вопросов и ответов мы делали club asteria то есть мы приглашали всех заинтересованных этой темой специальный клуб который приходил регулярное там можно было делать доклады на разные темы тем самым люди проникали с этой идеей в самом-самом начале когда книжка только еще появилось мы сделали такой читальный клуб то есть вот 1 неделю люди собирались они обязаны были прочитать эту главу и потом эта глава там обсуждалось и завершение расскажу резюме все практике все подходят серьги очень сильно влияют друг на друга при этом конечно не обязательно прямо сразу делать все можно начать чего-то одного ни одна практика не получается сразу в идеальном виде вот мы например начали там сколько четыре года назад или 5 лет назад тема пуст more to move то есть абсолютно понятная конкретная вещь берешь делаешь если по система падает она падала и продолжает падать и будет падать то вот и это разбираешь этим самым уже приносит какой-то эффект ни одна не получается сразу в идеальном виде например мониторинг нам мы там переписывали последний раз год назад и вот думаю что до конца года еще у нас раз переписать потому что опять он все таки какой то не идеальный получился нужно много контуров управления вот этих вот циклов с обратной связи ставить объективы на секс с рейд на другие показатели на то все что угодно система по сути выглядит как огромное количество циклов обратной связи которая позволяет цеков управления в эта которой сигарилл который позволяет поддерживать нужный уровень стабильности и даже есть еще один системный цикла с этими дженерик проектами которые позволят еще выйти куда-то новый качественно новый уровень и при этом все это за счет довольно небольшого количества людей которые всем занимается напомню нас там всего 8 человек занимается поддержанием инфраструктуры нужны как реактивный так и упреждающие действия сырья в итоге проникает везде разработчики тоже вдохновляются этой историей берут на себя дежурство по своим сервисом в разном порядке песку говорить не то типа вечером не готов но вот днем сейчас готов поддерживать хорошо перед ним мышцы как раз передаем сервис пейджер в разработку ну и на этом у меня все я готтфрид не вопросы ну и потом судьи спасибо спасибо это было классно а тема вопросов смотрите у нас есть время где-то на 2 или 3 вопроса а дальше будет дискуссионная зона это на выход и направо первый вопрос здесь павел спасибо за доклад хотел узнать испортили в какую-то нотацию для спецификацию для ведения нотация село примеру может быть апаны слов или что-нибудь свое используете и как развитие дальше вопроса пробовали вы с помощью этой нотации генерировать примеру те же самые даже борды насколько знаю есть инструмент например слов который позволяет из нотаций которые купер несовместимые генерировать сразу даже борды зависимости от вашего и нотации слу спасибо за вопросы мы не пробовали нотации вокруг из его потому что в нашем и при этом случае главная проблема была не в том чтобы сделать большое количество вот этих объективов то есть их ты довольно легко было сделать а в том чтобы все таки сделать процесс вокруг них чтобы он поддерживался то есть вот как то есть окей можно было бы упростить эту рутинную работу но фактически вот мы установили их там три года назад по с ключевым сервисом они особо не менялись после этого и сна начать работа была вокруг того чтобы все таки исправлять включать этот режим повышение так что я уже ведется активная разработка на вы снова появляются и наверное какие-то новые требования появляются к новым сервисом или это все в принципе легко проводится без стандартов да у нас есть активная разработка есть новые сервисы мы сейчас отошли от политики микро сервисов и их не очень много маленький сервисов основном количество сервисов оно такое некрупные и в них что-то дорабатывается для них уже есть это все установлено если появляется новый point но он просто там по процессу вносится куда то кажется что там в целом немного ручной работы поэтому вот в нашем случае это не очень применимым спасибо за доклад интересно значит тоже примерно на этом пути вот хотелось бы узнать каким образом вы приходили к конкретным цифрам и солей как согласовывали с бизнесом и как вы заставили бизнес посчитать стоимость простое давай начнем с конца про стоимость простое он выражается в деньгах на самом деле нападениях то есть вот если говорить я говорил про ведь у сейчас там где прием заказа мобильное приложение сайт коса если заказы не принимаются то ты можешь посчитать сколько у тебя недополученной прибыли например если у тебя там минуты идет там 200 заказов и ты не принимал заказы 10 минут и в 200 умножаешь на 10 и знаешь средний чек заказы ты можешь писать стоимость денег которые мы недополучили от этого это довольно на масштабе легко убеждает что надо что-то с этим сделать и не допустить такого будущем в би ту би части с этим сложнее потому что там получается только считать стоимость простое точки и серийной и количество отданных сертификатов но там обычно очень сильно подмешивается к это локальная внутренняя работа или не супер идеальная работа конкретной точке по этому отделить мы это не можем к счастью мы начинали всю эту систему вокруг биту сейчас иди сюда легко считается поэтому объяснять было не надо а не смотря на то что кажется что все очевидно что он потерял сколько денег все равно есть люди которые говорят что дескать ну как бы а зачем о чем еще составном фичу разработку чтобы это все делать моей картине мира это все происходит примерно так то есть на каком-то уровне иерархии компании все родился человек в ответственности которого находится слова стабильность на крайний случай то сева он ответственный за все если найти этого человека и в работать вокруг него то ему не надо объяснять зачем это сейчас приостановить активный фича гривен development на две недельки чтобы стабилизировать систему а по опыту всегда такие люди находятся они могут быть просто негде где-то рядом с вами ну и третий в момент я считаю что надо просто начинать делать и своим примером показывает что ситуация улучшается можно чаще счет небольшого там попробовать убрать выбросы нестабильности или еще что-то и потом уже с результатами этого эксперимента прийти какая-то вот смотрите вот мы немножко времени потратили да все разрабатывается но уже стало лучше обычно от такого все говорят да без вопросов давай двигайся дальше все до на этом мы наверное завершился с вопросами не будем усложнять выбор я выдаю орды второму хорошо завершающим до в подарок идёт книга и у нас есть еще одна маленькая штука для спикера что же это вот тот замечательный пакетик да спасибо ещё раз за доклад"
}