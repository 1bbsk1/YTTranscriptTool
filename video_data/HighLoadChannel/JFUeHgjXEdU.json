{
  "video_id": "JFUeHgjXEdU",
  "channel": "HighLoadChannel",
  "title": "Статический анализ кода++ / Анастасия Казакова (JetBrains)",
  "views": 557,
  "duration": 2414,
  "published": "2023-01-19T05:55:17-08:00",
  "text": "давайте начинать чуть-чуть буквально пару слов скажу про сверши вы понимали чует лет вообще про си плюс плюс говорю еще я умею я провела 8 лет в разработке в продакшене на сей на си плюс плюс и в основном занималась различным на двор кингом всякие роутеры битвой и вот в эти запускали мы 4g сети писали такую штуку как эсеров это полете контроллер который управляет политиками пользователей и соответственно ускоряет или замедляет ваш домашний интернете в зависимости от того что вообще происходит вокруг вас сейчас я работал в компании jetbrains не разрабатываю в продакшене занимая такую забавную позицию produce маркетинг менеджер маркетинг нет но в общем так или иначе работаю с плюсами нашими продуктами и создать летными найти меня можно в твиттере там пинговать писать спрашивать любые вопросы несколько лет назад я стартанул оси присутственные лидер группы в питере этом довольно большое вен сейчас тысяча с чем-то человек подписаны на метод мы немножко пахал делись во время пандемии и что-то не из подвигались ни на какой онлайн но сейчас потихонечку все возвращается есть еще если вы может быть слышали большой московский этап но и вместе с организатор московского митапа пытаемся возрождать и в питере тоже формате dream капа в общем собираемся в барах и обсуждаем си плюс плюс кто любит формат приходите у нас хорошо но и да еще немножко участвовал в организации конференции си плюс плюс раша как все на программного комитета собственно говорим про анализ кода почему и почему это важно ну когда она спрашивает про анализ кода все-таки говорят ну потому что качество только то есть стандартный ответ сейчас буду мучить вас типа что такое качество и вообще зачем про это говорить и тут хочется упомянуть что на самом деле качество будет очень разная вы может быть слышали про такое понятие как внутренние качества и внешние качества до продукта внутренние тока но вас внутри устроен внешне это то что под непосредственно пользователь там видят на сколько у них там кита баги внешней есть прикольная статья мартина фуллера такой известный чувак на рефакторинг собак съела вы наверно про него слышали у него есть блок в этом блоге у него есть очень прикольный блокпост году 2019 про то почему внутреннее качество важнее чем внешние брата почему в этот прекрасный график когда вы сначала долго занимаетесь внутренним качеством продукта а потом быстро начинаете набирать новые фичи растет быстрее круче чем продукт который сделан по принципу фига кафе дагов productions очень плохим внутренним качествам советую почитать если кому то интересно эта история ну собственно про качестве я уже наверно раз 20 сказал это слово вопрос что это такое да давайте попробуем понять что это для каждого из вас вот сейчас просто сядь вот вы сидите подумайте какое слово приходит вам в голову первое когда я говорю слово качество софта ну там на си плюс плюс и или на другом языке и неважно я подобные эксперименты сделала как в твиттере спросила людей чего не думают и мы не наговорили кучу зов вот наверное у вас какие-то из этих слов тоже всплывали сейчас голове когда задавала вопрос и это все важные слова когда мы говорим про качестве их много и на самом деле каждый из вас я вас уверяю представляет себе разные слова ну по крайне мере в разном порядке с точки зрения приоритетов для кого-то важнее что до ваш софт работает так как от вас попросили ptz для кого-то важно что этот код там читабельный расширяемый и так далее для кого-то важно что в нем нескольких the security дырок там что в нем не знаю нет он диффенбахия если мы говорим про си плюс плюс до наше не определенное поведение любое любимое что он дам надежны и так далее для кого-то важно качество и 5 или там не знаю формальное прохождение критериев тестирования для нас для всех качество это на самом деле разные вещи и это нормально но есть такое прекрасное сообщество международный консорциум который когда-то попытался выбрать 5 самых главных слов про то что такое качество они выбрали получилось вот так а тут как бы каждый волен сам думать на тему того насколько это правильный или неправильный выбор потому что мне кажется что все слова на этом слайде важны если мы будем про качество но это не выбрали эти пять говорят что вот эти пять точно определяет все остальное сопровождаемая безопасность надежность эффективности размер размер здесь наверное очень интересно как понятие потому что размер имеется ввиду что размер вашей коды база соответствует этим задачам который он решает но это наверное да про там про читаемость про расширяемость вот про такие истории что он там ни там не написано куча лишнего кода который непонятно зачем все поддерживают потому что ничего не делает такое тоже бывает ну окей хорошо предположим у нас в голове есть какие-то слова 5-25 которые нам важны с точки зрения качества кода дальше то что с этим делать как это контролируете главное мышь тут про си плюс плюс до собирались поговорить как это контролирует на си плюс плюс и что для этого есть и какие есть проблемы с точки зрения качества кодов си плюс плюс и ну давайте поговорим про наше любимое где болит всю плюс плюсе болит много лет иногда болит про одно и тоже иногда болит прочтут ну новое вообще есть тепла стас foundation это организация занимающиеся в частности стандартизации языка си плюс плюс какой-то там так большими конференциями мировыми реализации и так далее не проводит опрос в этом году еще не было поэтому есть результаты прошлогоднего просо где берем спрашивали где у вас болит то есть вопрос звучал на самом деле как ваш основной фарш женщин point да все предплечье что вас больше всего напрягает что больше тебя фрустрирующая забрала ответы и попыталась их немножко поделить на группы там сумма ответ вне сто процентов поэтому не удивляйтесь то можно было выбирать много разных ответов в общем вот чего болит у людей все плюс плюсе можно заметить что верхней части этой таблице находится все что связано с инструментами с проектными моделями с теме нашими несчастными пакетным и менеджерами с которыми мы страдаем и никак не вы страдаем до какое-то универсальное решение так далее это такое как бы не совсем про код в нижней части таблицы находятся что желтенькое вообще стандартные вещи которые всегда болят все предплечье вот как 40 лет болят так и болят да все что связано там ставим so if this memory сейфти и на самом деле сегодня нас попытаюсь убедить в том что эти вещи можно решать с помощью кода на лист за в современном все плюсе современного инструментария и он в эту сторону развивается с верхней части таблицы чуть хуже на про это тоже немножко упомянем но и да там есть еще какие то вещи про то что я называю новые вещи в есть такие да какие то новые фичи там проблемы с тем что параллелизм вроде появился на стандартной библиотеки не совсем еще появился и так далее но это как видите не сильно почему-то людей беспокоит остальные вот вещи или беспокоит сильно ну окей ответ на самый главный вопрос вселенной вы наверное вы знаете я сам тоже попытаюсь объяснить и опять объяснить почему такой забавный пример вообще этот пример искусственный этот пример придумали тестеры в одной из команд которые я работаю когда тестировали некоторый функционал в инструменте воды и не вы придумали и это кусочек кода на си плюс плюс и который нормально компилируется вполне себе корректный синтаксические вобщем-то семантический за плюс плюс что он делает вот если вы сейчас внимательно посмотрите на это там чуть чуть буквально 30 секунд и подумайте то на самом деле вы должны осознать что все что делает этот код это собственно возвращает ответ на главный вопрос вселенной то есть делает вернуть 42 если убрать все ненужные шаблоны это шаблонные переменные какие-то инстанции вот эту всю прочую ерунду останется просто кот у которого в моем функции будет написано вернуть 42 и это такой же абсолютно код что мы имеем мы имеем код на си плюс плюс и в общем-то какие-то довольно ну будем условность четыре строчки до если скобку не считать какой-то с какими-то шаблонами наверное не самый простой читаемый но абсолютно корректны и компилируемый которые делают очень простую вещь и тут в общем-то вопрос про то почему последнее время особенно твиттере очень много таких трейдов где любит паше иметь + + на тему того что в нем 10 способов делать одно и то же в нем правды сейчас есть по 10 способов сделать одно и то же это будут абсолютно валидные корректные там синтаксические и семантические способы написать одну и ту же вещь и это проблема с точки зрения качества кода потому что ну люди перри пробуют все 10 безусловно молотова вашей команде перепробовать все пять а если команда большая то и все 10 почему то вот эти тренды пошли mingw си плюс плюс обычно возникают у людей из геймдев разработки уж я не знаю почему у них так громче всех болит вот там из примеров приведенных этот трек от тима суини из epic games про то что вот типа нельзя разрешать людям добавлять все что они просят си плюс плюс и есть на самом деле такая цитата из недавно выпущенной книжки гугла про то как они пишут сот она вообще-то пропиарено мне кажется что она к языку и нашей ситуации все плюс плюс тоже очень хорошо применимо они там говорят про то что вот как бы если у вас есть какой-то и пиаре какое-то количество способов его использовать то рано или поздно все эти способы будут использованы даты все будут вот все возможные пути прохода через вашей 5 люди пройдут хотите вы этого или нет точно так же с языком если у вас есть 10 способов сделать одно и тоже хотите вы это или нет но если команда большая на попробовать написать одно и то же там 10 разными способами и это на самом деле не очень хорошо потому что ну во первых это очень тяжело как бы монтеррей 100 тыс если у вас есть огромная кода база в которой один человек пишет то к другой что пишет иначе хорошо будем объясните нам так делать особенно если вдруг они начнут друг друга переписывает на кадре view упаси господи да ну то есть это правда тяжело и приводит каким-то странным последствиям надо бы договориться ну ладно хорошо просто еще болит все плюс прете ну как известно все плюс прессе много лет болит про не определенное поведение наш любимый антифа inbi серебра и тут есть такой пример есть очень известная история про linux во ядро про 26 30 не сами у себя на одном из своих ресурсов описывали собственную историю и приводили примерчик кода собственно полагается посмотреть его увидеть ту строчку в которой проблема кто увидел поднимите ручку и ну в общем да вот она эта прекрасная строчка разыменования потенциально нулевого указателя там очень интересные истории я вам рекомендую ее почитать поискать моих слайдов будет ссылочка там история про то что пришел человек дописал строчку кода в уже некоторые существующего кода базу и вот собственно вел эту ошибку и его время нашли то есть там прям реальной проблемы до какой-то дырки безопасности не случилось на ситуация в чем ситуация в том что мы разыменовывает нулевой указатель там ниже если вы заметите в конце есть проверка что указатель не 0 но внимание gcc очень умный если вы один раз три за миновали указатель он выкидывает он оптимизирует проверку на нал дальше ну потому что он считает что вы уже раза миновали указатель зачем его дальше проверять-то нормально все будет уже взяли уже все хорошо уже вляпались но понятно что дальше если это не код ядра там тоже есть люди как бы не дураки пытаются от всего защищаться пытаются как бы не писать не пускать вас в 0 адресное пространство как бы чтобы туда ничего не записали на мышь в ядре а там все можно а значит на самом деле с помощью вот этой маленькой строчки можно на самом ли организовать ваш некоторые такой не очень хорошее может быть не очень добрый код который будет находиться поэтому нулевом адресу который вы там потом как-нибудь вызовите сделать что нет нехорошие к счастью уязвимость вовремя заметили в дурку закрыли код переписали пример остался в памяти потомков чтобы объяснять им почему не определенное поведение очень часто стреляет в ногу ну как бы тут ничего не поменялось за много лет успеть окей этого анализ кода нам нужен для того чтобы ну во-первых пытаться достичь прекрасного совершенства по тем параметрам которые вам важны из тех слов которые были вот на одном из первых слайдов выбирайте какие вы хотите оптимизировать лучше все но все не получится как обычно уменьшать степень раздражения команды потому что написать десятью способами одно и то же в одной кода базе это очень сильно раздражает вашу команду и все кто поддерживает а только года база все истории про то что пришел другой человек и переписал весь код от человека который ушел из команды да это вот наши объективно реально ну и дать define by heather со всеми вытекающими отсюда последствиями на самом ли та же история про качество кода отлично хорошо говорю про качество кода сейчас я начну говорить истину запустить его компилятор с тремя в да и все будет хорошо поймаете все вардинге из конвертируйте их попросите компилятор сказать им что это все ошибки все это уберете будете счастливы я сейчас запущу историю про то что компилятор находит не все я сейчас попытаюсь практическую сторону поговорить вообще пробовали когда-нибудь муляр данные флаги паре давать при нашем зоопарке проектных моделей вот сверху код он на семейки снизу он к тоннам оик файлах то есть в отличие от проект на модели мы даже делаем это по разному а ещё сверху по-разному передаются флаги случае масло c и и ну там слова о богатстве и кланк у нас примерно одинаковые флаги кушают да то есть как бы нам нужно понять каким компиляторами мы это будем собирать какие там флаги правда ли что они все везде есть не всегда компилятор и одни и те же проверки у себя реализовывать но ведь gcc и кланк пытаются маслице немножко в стороне а снизу еще вот прям прикольно пример про то что когда вы набрали на миг файлах это делаете уверяю вас не видела миллион людей которые передают влаги через степи flags это неправильно правильные флаги для компиляции это сеть секс и к сладкому что себе бета флаги препроцессора но куча людей мы крал их пытается влаги компиляции все тебе flags почему-то запекать не знаю почему видимо названием нравится когда я говорю про проектный модели тут вот результаты трех опросов вопрос который мы делаем джесси developer экосистем 20 21 год этот самый опрос foundation на 21 год чтобы просто показать вам разброса все популярности проектном моделей до семейка сейчас одна из топовых проектных моделей да и пользуется наверное большинство но у нас все еще зоопарк других проект на модели берите геймдев там почти все будут на эмо сбил деда на майкрософтовской проект на модели берите им везет там почти все будут на миг файлах куча всего нового там растет появляется там бэйзел не зонда довольно популярный на многих проектах их много у нас нет стандартной проектной модели и они разные и когда вы что-то пытайтесь сделать с флагами компиляции вы вдруг это начинаете осознал ok давайте немножко про сам язык на самом деле сам язык тоже пытается становиться лучше этот говорю что все плетусь одни и те же проблемы до почти 40 лет на самом деле не очень сильно сейчас пытается защищаться от типичных более типичных проблем и улучшать качество кода написано на этом языке за счет каких-то языковых вещей самые вот такой простой громкий наверное пример это предложение которое сейчас рассматривается в комитете по стандартизации на анализ времени жизни объекта привет раз да то есть это те самые lifetime и есть тот самый вот когда предложение проползал который рассматривает комитета ссылочка на него которая как бы признана говорить людям что вообще-то у них вот тут может быть проблема потому что если пусть бог сделает рио локацию то у них получится висящий итератор предложение по пояс по анализу времени жизни объекта предлагает искать это в компиляторе то есть это анализа который предлагается добавлять в компиляторе ну тут как обычно до предложения если вы примет комитета то одно реализации в компиляторах это совсем другая история когда мои ищу получим тем не менее на самом деле в компиляторах если говорить прям конкретно про эту вещь уже кое-что можно получить во первых есть экспериментально ветка к ланга если в не включить минус вы lifetime вы получите некоторые проверки нам далеко не все реализованных проползла но какие-то вещи уже работают во вторых эти корчик lifetime справила есть вижу студии ну и как бы мы там у своих инструментах тоже их реализовывали через data flow анализ немножечко про data flow анализ про анализ потока данных я хочу час поговорить подробнее это важно на самом деле такая штука довольно интересная через которую кажется что можно написать много разных хороших проверок на си плюс плюс и и есть подозрение что сейчас инструменты будут в эту сторону активно развиваться собственно data flow анализ это анализ потока данных он может быть очень простой он может работать только внутри тела функции вы так или иначе все равно можете найти например те же висящие указатели внутри тела функции которые как-то образовались с помощью такого анализа ну ладно внутри тела функции предположим можем глазками как-то посмотреть ну или как бы да и такой-то простой анализ data flow анализ можно делать внутри единицы трансляции тогда мы сможем поймать ошибки и те же самые висящие указатели которые случились потому что ну не знаю указатель освобождает через какую-то другую функцию понятно что локально в теле функции мы это не найдем потому что у нас операция делита на вынесена в отдельную функцию но если у нас например анализ работает в рамках единицы трансляции все прекрасно мы за детекцией такой демпинг point шикарно на самом деле дат flow анализ позволяет делать довольно большой спектр ошибок искать это не только подвижки указатели это какие-то бесконечные циклы это какой-то мертвый кот который можно находить не используемые переменные вот эту всю историю можно находить в рамках вплоть до там вот единицы трансляции как вот здесь пример например с недоступным кодом на самом деле сейчас хороший должен быть вопрос а можно ли во всей программе запустить data flow анализ на самом деле да и есть даже некоторые пруфов концепт на это дело в клан ги пытались сделать такой эксперимент по data flow анализу в рамках всей программы там есть два подхода как это делать один подход живет много памяти другой подход живет много циpкa потому что один сначала строит прикопают хадера и дерево по всей программе заранее второе делает это по мере надобности по запросу по нужному я слишком не буду вдаваться подробности такая что вообще-то это работает мало того в свое время ericsson или 2 митапе показывал прям работающий пруфов concept который лежит на гитхабе там два не 2 наверное но несколько тампе ток может быть очень простых чеков реализованы но они правда работают в рамках всей программа не только в единице трансляции в общем можно делать такой анализ на всей программе я пока не знаю ни одного ну такого прям production инструмента который бы это делал на всей программе наверное тут много вопросов к подходу с точки зрения performance это какой-то оптимизации там потребляемой памяти времени но вообще-то это может работать и это можно сделать с помощью клан га ok возвращаемся к истории про си плюс плюс получше не могу не сказать вам что не надо использовать макросы знаете на минуту историю bear на часто спрашивают чтобы явно страус то поменялся плюс плюс если начинала очень сделать заново всегда одно и то же отвечает на будет я бы макросы не делал ну смысле что не не точил бы да то есть не использовал и вот на самом деле сейчас появляются какие-то предложения в языке по того чтобы макрос ты все-таки где-то не использовать например для типичного случая использования макросов но где мы все пишем окраса до этой функции логирование трассировки где мы все время выводим имя файла и номер строчки и все время это делаем через два прекрасных макроса и вот чтобы этого не делаете так не писать вообще-то появилась в си плюс плюс 20 штук source локейшн это функция в стандартной библиотеке stood source локейшн которая с помощью которой можно переписать код вот так вот и можно просто вызывать функцию они макрос аллилуйя мало того что даже есть checker и которые это позволяют находить и менять в частности вот есть сандерленд это если слышали про такой чтобы аксанар куб sommer source вот эти вот ребята у них есть в проверках проверка которая находит функции в частности там трассировки оги рования написанные через макросы предлагает их переписать через тут source локейшн ну и если говорить про то куда развивается язык то понятно что комитет по стандартизации я извините тоже но как бы ни не только пытается локально какие-то фичу поправить но и глобально думать про то как писать код лучшего качественности плюс плюсе и тут конечно нельзя не вспомнить и присту скоро гайдлайн и которые появились пятнадцатом кажется году с тех пор их много обсуждают пытаются реализовывать конкретных там инструментах книжки даже по ним пишут недавно вышла книжка агады вицина и кейт грегори который называется beautiful сипло спас и она рассказывает про то какими именно проверками скоро гайдлайн iv уж точно нужно пользоваться но тут тоже такое немножко до написали большие core гайдлайн и теперь обсуждает что из этого нужно использовать что нет на самом деле вопрос того как именно ими пользоваться но очень хороший потому что любые гайдлайн и если нету инструментария если нету практического какого-то их использование очень тяжело использовать и никто не будет сидеть там с огромным талмуд им да там книжкой грубо говоря и проверять следуем и гайдлайн нам или нет если инструмент вам в лицо не пишет что вы делаете неправильно никто не будет этим пользоваться но такое в кале гайдлайн и за сам ли очень много простых практичных правил которые очень легко реализовывать в инструментах вот там например простенький пример про то как именно передавать параметры по значению или по reference суда по там прям правило написано которые инструменты могут заходить у себя да то есть там ваши не знаю или я или анализатор кода может просто у себя это правило закалить и вам его все время выкидывать там просто проверяется размер той переменой который передается и есть как бы да какое-то условие есть тоже аналогичные правила про то что там делайте так или не делаете так каких-то конкретных ситуациях которые практичные и с точки зрения того что они легко кальции на самом вот эти правила в основном сейчас и ходят каких-то инструментов да то есть их можно найти какой-то реализации есть правило более сложные которые связаны с какими-то абстрактными понятиями ну например они говорят про то что если у вас есть похожие лямбды что такое похожее лямды начинаем спрашивать мы одно дело если у вас есть две не знаю там лямбды у которых просто переменные по-другому называются да там понятным тело лямда примерно такое же другое дело если они делают что-то одно и то же семантически вообще-то написаны по-разному вы помните да пример про 42 все плюсы это очень легко сделать как понять что эти лямда идентичные на уровне не человека который вы смотреть на код до с помощью инструмента вообще не очень понятно поэтому некоторая практическая применимость этих правил на уровне автоматизации на уже не инструментов пока что под большим вопросом там таких правил много там есть про вот эти самые сингла jackal отрешен и волшебное правило знаете я еще вы не веря когда училась мне вот этому учили про 60 строчек кода по 140 символов и значит не символом больше не строчкой больше всех мониторы разные все по-разному воспринимают информацию почему 60 почему 140 символов откуда вообще взялись эти цифры не понятно да то есть это какие-то параметры которые не очень объективные поэтому с такими правилами проблема в том что в их автоматизировать их не вполне форсит не пушит инструменты выше и не знают как наса деле я уж не говорю про вот эту самую цикла мотик complexity это вообще что-то такое очень абстрактная как инструмент должен понять что у вас очень сложная функция ну вот вы еще может быть можете понять это один человек вашей команде конечно функция простая вы ему говорить вообще прочитать невозможно но и вот вы друг другом спорить и в этом смысле автоматизация таких правил она ну не то что невозможно она сложная надо как-то договориться до каких-то подходов как вы будете это реализовывать поэтому такие правила редко реализуется в инструменты ими можно пользоваться только ну вот человеческой головой до тыс вы берете гайдлайн не пытайте этими правилами пользоваться есть вообще правило которое кажется инструментом что но вот людям которые делают инструменты как мы форсить не очень хорошо на людей потому что они говорят про то как менять интерфейс и например про то когда нужно добавить там я не знаю функцию const экспорт inline или новый клип и это вроде все хорошие правильные правило но они меняют интерфейс а хотим ли мы менять интерфейс с помощью какого-то инструмента которые там качество кода intellij как бы до анализирует может быть и не хотим почему мы должны это форте это хороший вопрос поэтому гайдлайн на самом деле там есть вот до три градации правила просты и понятны и легко автоматизируем и немножко спорные с точки зрения самих правил или как бы да не однозначно трактуемые те которые как-то меняют интерфейс что возможно не очень хорошо делать в инструменте но инструменты есть если вы не в курсе то гайдлайн и есть виде реализованы некоторые библиотеке есть вижу студии есть какое-то количество проверок в clang той де есть в сценарии в анализаторе доступные там в кубе в сон в ленте который сам analyzer и есть в инструментах которые делали джонс есть еще на сам ли кучу анализаторов который занимается анализом в какой-то предметной области их на самом деле всегда тоже хорошо использовать потому что они обычно рассчитаны на конкретную предметную область ну там типичные примеры это миссия of those are для каких-то встроенных систем до либо это crazy например для qt это прям некоторый встроенный анализатор который для qt снова кода используется или тоже встроенный анриал ходы рту который использовать ребята которые на unreal engine и пишу data analyzer и который не просто анализирует код на си плюс плюс она не учитывают специфику там ds или условно пару слов хочу сказать про места тут на сам ли очень интересный тренд потому что сейчас несмотря на что места эта сертификация появляется очень много запросов на то чтобы иметь митру автоматизированную на уровне и доена то что вас министра проверки были прямо в игре почему люди наконец-то осознаешь что это важно потому что когда вы приходите к сертификации со своим кодом стоимость правки в вашем коде невероятно высока у вас есть там сертификация вам нужно ее пройти и вы сидите там до тратить неделю на то чтобы это все поправить а мистер вообще довольно строгой к с точки зрения но каких-то правил она там запрещает кучу конструкции как раз пытается уменьшить количество вот этих вот 10 способов сделать одно и то же свести хотя бы до трех и лучше это конечно делать на моменте написания кода поэтому такой запрос понятен от разработчиков стоимость низкая проверки можно включать какие-то там какие вам сейчас нравится а потом уже на сертификации прогонять полный список ну и плюс тут как бы есть прикольная тема что можно получить вообще-то но прикольные репорты на seo и генирельдо насколько вы соответствуете там спецификации мистера если вы это на себя и смогли завести и плюс возможные инструменты вам еще могут помогать какими таковы к фиксами есть инструменты которые предлагают сразу исправления увидите ошибку и сразу и исправляйте автоматически есть какое-то количество инструментов которые умеет делать митру и вот тут есть собственно есть собственно количество отсеков которое реализовано не не знаю ни один который реализовывает все ну смысле на вот это питон кода анализа важный момент хочется сказать я тут говорю про кучу инструментов вопрос такой должен наверное вас возникает столько у нас инструменты все плюс плюс неужели они все разные анализируют самом деле нет сейчас покажу один простой пример в коркой двойных есть правило про варги и проверять и к функции есть очень похожие правила в миске которые на самом деле про одно и тоже и есть очень похожие правила еще в таком как бы до стандарте кота называется cert там тоже про то же самое написано то есть на самом деле все наши правила которые у нас есть и наши стандарты да про качественных очень сильно пересекаются все таких причине можно найти очень много люди пытаются уменьшить количество способов написать один и тот же код по-разному и делать какие-то глупые ошибки наверное последние просто хочется поговорить сейчас в точки зрения качества кода это не напрямую анализаторы кода но все-таки вещи важные для качество кода этого первое форматирование да все будут в плюсе ну наверное формально нету стандартного формата ну блин все же мы пользуемся clang форматом так или иначе да все моего под себя как-то кастомизируемый для нас это практически стандарт де-факто есть важная вещь которую про него стоит помнить у него нет обратной совместимости по верхним в частности возникают конфликты на конфигах то есть он по разному разные версии интерпретируют конфигурацию как формата плюс у него довольно облегченный пар серко да он такой не очень настоящий поэтому он может делать некоторые вещи которые компилятор трактует по другому то есть он по разному парсит код отличие от настоящего компилятора но это сделано просто для его ускорения и с этим просто люди живут вторая вещь важная здесь это правила именования качественный код чтобы он был легко читаемы чтобы он легко поддерживаем и хорошого чтобы следовал какому-то не просто до формат у него был там in den тация пробела стояли одинаково условно но и чтобы правила именования были одинаковы есть миллион способов именовать переменной я всегда люблю вот эти названия про screaming сны и кейс мне просто нравится когда не пишется мне кажется прикольно но вообще я свои стили в там в гугле во льве нам репозитории van riel н жене они не всегда совместимы они часто про разные есть инструменты проверки правил нейминга в коде мало того эти инструменты проверки часто очень хорошо помогают с точки зрения исправления исправления нейминга это полноценный рефакторинг переименования да то есть там не ручками переименовывать но какая-то поддержка в кода генерации ну и наверное последние просто надо помнить когда мы говорим про качество кода я говорила про возвращаясь к примеру про 42 до 10 способов написать одно и то же это про синтаксис про то как именно писать и правило эти разные и в разных стандартах они часто конфликтующие пример си плюс плюс скоро гайдлайн их есть правила которые конфликтует с тем как например рекомендует стандарт она реален же написать код люди с этим часто сталкиваются запускают clang тайги на q1 анриал и джон получает кита проверки которые конфликтуют гайд лайнами там которые по games выдает и это про синтаксис кода и этим тоже можно управлять некоторых инструментах она позволяет настраивать как именно вы хотите писать какие-то конструкции ну стандартную битву prais'd конский в сконс наверное все все плюсуюсь и слышали но там таких много на самом деле просто остальные менее громкие не такие лаконичные красивый вот ну и собственно да короткая самаре про то просто мы поговорили про то что есть ошибки в компиляторе если вы смогли правильно все включить у себя если они смогли проверить все что вам нужно есть языковые новинки которые сейчас в принципе направлены не только на получение новых фич но и на улучшение качества кода и за ними стоит следить такие как lifetime и или source локейшн и есть анализ потока данных которые очень перспективен с точки зрения того что он может поймать и думается мне что в какой-то в момент времени в инструментах прямо нас появится не только анализ данных рамках translation и юнита на и в рамках всей программы и он будет нормально работать по производительности я искал гайдлайн и которые хорошее но не серебряные пули надо их всегда к ним как тогда критически так подходить без ндс или анализаторы которые нужны если вы используете какой-то вес или условно да то есть работаете в какой-то конкретной области но и анализаторы стиля просто чтобы возвращать 42 каким-нибудь привычном вашей команде способом они десятью разными на этом наверное все можно задавать вопросы спасибо все очень динамичный доклад получился особенно вот когда кот стих fall to me с утра бодрит прям даже на слайдах лучше чем кофе давайте перейдем к вопросам если у кого-то в зале вопросы вот можно микрофон передать у нас есть микрофоны засчитываются климатической сложности необычное ты если можно то есть это считаешь их и форой вопрос здесь дальше ты что то есть например датой пришел пьер там у вас метод там заплати склону лишь 60 и вот вопрос как раз у вас на последнем месте было на предыдущем слайде что единство команды по сути дела за команда на первом месте то есть у вас тот тут проверяет ваш код просто так ой ой а вот давайте тогда давай 40 давай вот это перепишем вот этого метод этот сюда это не происходит по факту то есть ароматической сложность вас появится автоматически если есть такой человек который вот ходят по коду а вот цикла мать и ческая сложность 80 азии 120 это такого нет то вам и не надо пони и знать поэтому плане и знает у кого есть такой кодори вьювер флаконов вот поэтому кому надо у того она еще уже кому не надо антоний и знать не будет но вот но в целом как бы считать ее наверное можно как раз для этих review ливров но для это по-моему как раз у sonar по моему есть я абсолютно согласна смысле что кажется что все гайдлайн и пара аккадцев романтическую сложность 1 гайдлайн и произведите хорошего квадре viewer о своей команде который будет следить и бить их по рукам тут скорее вопрос что люди пытаются как-то автоматизировать до понять там как помочь и есть какие-то гайдлайн и в частности вот скоро гайдлайн их которые говорят если у вас там не знают соматическая сложность больше чем условной а.н. придумайте себе сами н в команде им пользуетесь но тут как бы считать долго сложно и выхлоп непонятный потому что после этого приходят очей который за это отвечать да на фига мне выше метрики что я не могу понять как у меня кот сложные до ну то есть это вопрос к применимости гайдлайн а в гайдлайн и вроде есть но их как бы и нет знаете такой грн по количеству слов строк слышал в команде у нас был человек который прикладывал голову к монитору wella что если строчек кода больше чем вот у меня от волос до моей бороды значит в голову код не влазит нодари factory этого до этого просто про то что меня тоже давно не верю черри продаж на экран должно влезать на экраны были вообще другие тогда не знаю если еще вопрос в зале вот там вот делать есть вопрос и микрофон спасибо за доклад очень интересный вопрос касательно интеграции и там решение того что васи лента иди и решение а т.д. то есть допустим ся на cайте поставить какую-то диагностику за разряду вот это стоит заменить на это еда хочет предложить для этого кексик поскольку вот эти операции сложнее чем полностью своей инспекции и как боретесь решаете проблему спасибо за вопрос на самих случае кванга там все довольно просто ну то есть ланговски анализатор предоставляет действительно к в фиксе они очень просто интегрируется в инструменты они много где щас интегрированы есть clang powertools в вижу студии есть интеграция в этом силой не ришару переесть еще каких-то инструментов короче складывали все просто но он же там как бы это дерево строит source локейшн и выдает но то есть он там скала применять could fix в такой-то локации такой-то строчки выводы я пошли на этой строчке применили открыт fix на самом деле это очень быстрые просто работает и можно легко получить там обновлять парк во время и тут прикольно что можно же писать свои проверки можно же писать свои комплексы можно собрать кастомный clang да с какими этой проверками которые вы в своей команде хотите делать и каю picsart ми который может быть не применимо в целом но применимы вашей конкретной команде вы можете на сайте таковых fix и его ой классно мы спать пошли с интегрировать ну как бы да просто подсунув кастомный как воды едет и сейчас многие инструменты позволяют подсунуть кастомный clang и получить как бы интеграцию просто инструмент это очень просто мне кажется как раз за этим будущее в плане работы с фланга скажите есть ли у нас вопросы из онлайна нас пока нет вопросов с онлайн а можно продолжить вопрос из зала скорее не вопрос на самом деле хочу подчеркнуть что он много было примеров когда вот иди-иди единство стандарта именно рулит то есть я видел на своем примере 2 развалившееся команды ровно когда то есть драка 4 квадрильонов то есть поэтому наличие одного инструмента да этот этом сейчас говорю банальщину но зачастую однако зачастую важнее каких-то конкретно принятых правил потому что вот инструмент который говорит так ребята вот вы конечно pureview или not я сказала что откуда стоял такой вот этот так вот это так и все как бы судане листья то есть вот это возможно бывает даже важнее чем отслеживание каких-то странных вещей хотя конечно вот пример вот и сдвинув это да это я сам не согласна что стилистические штуки они же сложные то есть но вроде как можно писать все так и так да ну там на этом на драки искусство скосов мне кажется там пол комьюнити перебралась на эту тему а таких штук много там про как там типа вот эти цели чем types вот эти все истории и пишут по-разному где писать авто где не писается акты есть вот эти подходы про вот как бы до протупил и про ways of the надо выбрать стиль и хорошо бы что был инструмент который будет за этим следить и собственно вот там мы в одном из своих инструментов раз пытались реализовать какой-то набор настроек где вы конфигурируете как вы хотите писать код и после этого инструмент это контролирует на уровне там каких-то проверок кода на уровне коды генерации вот на таком этапе но понятно что до хорошей review рту тоже поможет но не всегда может все это прочитать я вот от себя хочу вопрос скорее не вопрос задать про стиль у нас в полисе принято так что мы пишем так какой код вокруг поэтому в одном файле у нас может быть один стиль соседнем free я сейчас про эту историю расскажу я когда работал в йоге когда мы писали пещере у нас была такая странная штука у нас когда кто-то уходил из команды мы переписывали весь его код можно было проще переписать чем еще там происходит и это было прямо катастрофа номер здесь у вас человек уходит и вы садитесь блин половину куда базы переписывать за него ну что это такое так нельзя марка видом перестали так делать научились писать более-менее одинаково договорились внутри себя и как-то кот стал на какой-то более универсальный да не то что это код человека давайте его выкинем но если вы пишете в разных стилях случается ровно это человек из команды уходят никто больше не может это прочитать потому что человек не привык к другие люди как они не привыкли так писать им тяжело это поддерживать им проще переписать у вас случается огромные кометы до как бы ваши ветки где люди переписывают в общем-то работающий код добавляя пару новых багов по дороге как известно давно то есть это нехорошо так как так не стоит делать наверное это плохо с точки зрения поддержки там кода и так далее но к причалу poms оси люди не объявляют что уходят они просто они просто таких сейчас не время для кода я пойду взаймы с чего нибудь другим на конференции съезжу такое"
}