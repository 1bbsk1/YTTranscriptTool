{
  "video_id": "cpXTUMxDFec",
  "channel": "HighLoadChannel",
  "title": "Нагрузочное тестирование Atlassian Jira / Алексей Матвеев (Райффайзенбанк)",
  "views": 1471,
  "duration": 3040,
  "published": "2019-05-15T05:09:18-07:00",
  "text": "значит меня зовут motre и я архитектор в команде jira confluence дин банки и вообще часто возникает вопрос я софтвер архитектор да есть enterprise архитектор есть softer архитекторы но по сути в принципе у всех возникает один тот же вопрос о чем они занимаются ну например да софт архитекторы спринтах код не пишут и вроде как лишние люди зачем они вообще нужны вот отвечу на это вопрос так что архитекторы занимаются всем ну то есть я например ответствен за весь процесс разработки нашей команде который занимается jira и confluence начиная от того там какие паторны использовать какие мы там должны в гите ветки иметь и заканчивая какие мы должны метрики собирать для того чтобы анализировать работает ли наш аджиры нормально и между этим конечно есть соседи есть тестирование и нагрузочное тестирование это одна в общем то из частей вот нашего всего процесс тестирования и вот сегодня как раз хочу рассказать про то как мы строили у себя нагрузочное тестирование на шейдеры мы начали это с нуля у нас вообще никакого опыта в команде не было и сегодня я хочу нашим опытом поделиться о чем мы сегодня поговорим ну сначала просто пройдемся что такое нагрузочное тестирование какое оно бывает потом поговорим о том какие есть элементы нагрузочного тестирования то есть что надо проанализировать перед тем как начать нагрузки тестирования как там базовый профиль составляется как скрипт и пишут как надо запускать его как мониторить то есть про все это поговорим ну и напоследок да я расскажу про подводные камни про то с чем мы встретились для того чтобы вот вы услышали нас опыт и если вы тоже начнете вдруг что-то делать на то вы можете нашим опытом воспользоваться но сначала про нагрузочное тестирование но в общем зачем и когда нагружать но понятно если мы нагружать нашу систему не будем то вот наш систем на всякий случай на картинке то ослик дату она короче работать не будет и в общем-то нагружаем ну во первых при разработке нашей системы до нам нужно понять оценить вот мы разработаем к это программное обеспечение мы там до проводим функциональное тестирование все у нас работает а что будет когда мы выйдем в продакшен и когда реально люди начнут работать не понятно мы должны на груше на тестировать когда мы делаем релизы то есть у нас например каждый релиз мы на груше на тестируем чтобы понять что прот у нас будет работать нормально после вывода на грудь и тестировать можно при оптимизации когда мы начинаем двигать какие-то настройки смотрите насколько это влияет на нас на привет жира до наношу g room ну и конечно при выборе платформы ну допустим jira ее можно подсоединить там и кора cloud mais quel week postgres у и можно в общем то сделать нагрузку тестируем чтобы понять какая база данных наиболее производительные и потом уже учитывая другие да там водные например какого носились компетенции по этим базам данным сколько это базу данных стоит мы уже принимаем решение такой конкретно баз данных например мы будем использовать зачем вообще тестирования в нашей команде ну вот как обычно бывает до лютню ставят жиру начинают и и настраивать все работает но в принципе почем нагрузки тестирование все и так хорошо и отлично у нас в принципе был то же самое мы поставили дыру она работала все хорошо и тут мы решили внедрить такую большую функциональность incident management а там нужно было писать плагины для него там большое количество пользователей добавлялось и мы подумали и решили что нет сервера нам не хватит нужно брать дыру дата-центр но вопрос а сколько нот нам нужно но нужно две ноты 40 и 60 80 непонятно и вот именно тогда мы начали заниматься нагрузочным тестированием вот это было где-то вот в прошлом октябре и второе для чем мы сейчас используем на грустной тестерами это при наших релизах у нас каждый релиз проходят нагрузочное тестирование чтобы мы понимали что наш пород не упадет потому что у нас jira она очень важно и там любой простой там есть она падает на 10 минут у нас разночинной этом звонке аварии и в общем нам нужно чтобы jira и работала стабильно какие виды тестирования это вот основные виды тестирования которые нам в принципе в джерри нужны сейчас по чуть-чуть и расскажу про каждый начать лоу testing это вообще вот стандартное самое первое с чего начинается когда мы делаем базовый план нашей нагрузки но это средняя нагрузка и начинаем да подавать нагрузку там допустим плавно разогнали ее там за 30 минут и вот начинаем по чуть-чуть нагрузку подавать до нашего базового плана по ступенькам и в конце мы начали дошли до нашего базового плана чуть-чуть на нем по были посмотрели и завершили и дальше проанализировали результаты нормально работает или нет другой вид тестирование этого льем тестирования здесь вот в чем проблема что вот когда мы только поставили нашу дыру у нас и шифтом ну 2000 например там 50100 тысяч мы пишем наши плагины наши скрипты и они работают все быстро работает но что будет если у нас там станет миллион еще до 1000000 тикетов которые были видеть два миллиона три миллион что случится и вот как раз вводим тестирован на это отвечает мы должны ну в нашем случае мы должны на генерить этих и шуе и посмотреть как у нас jira будет функционировать когда мы будем подавать нагрузку есть ну stability даст тестирования когда мы берем рассчитываем вообще пиковую нагрузку на нашу дыру берем от нее 80 процентов до нее тоже плавно доходим ну здесь самое главное грустно тестер не плавно доходить чтобы система успевала разогреваться и чтобы она ну не загнулась да когда мы сразу подадим там 50 тыс пользователь она возьмется да и рухнет ну в реале вообще такого не бывает вот мы соответственно выходим и начинаем часов 7 вот на этой вот восемьдесят процентов от пиковой производительности начинаем посмотреть как jira себя ведет и по результатам до принимаем решение нормальная все написано там не стал ли на загружаться процессоры нормально все у нас памятью делаем какие-то выводы если там у нас утечки а в джаве потому что все для geely пишется на джаве вот и следующий вид тестирование то стресс тестирования когда мы подаем вообще не реальную нагрузку на джиро она может захлебнуться может упасть но как если мы опускаем эту нагрузку тот жира должна прийти нож нормальное состояние вот вот такие виды тестирования для нас они актуальны и мы вот стараемся их делать дальше я расскажу вообще что мы делаем что мы не делаем и первое с чего вообще нужно начать тестирование это нужно вообще понять требования к нашим на грустному тестированию первое нужно понять время отклика какое мы ожидаем от нашей системы в нашем случае это было проще потому что у нас уже была от жира сервер мы знали отклики мы прекрасно понимали чего мы хотим видеть ну и в общем там нам главное чтобы время этого отклика не выросла дальше нужно понять интенсивность запросов которые мы подаем дыру про это дальше расскажу как мы ее считали нужно понять какие используемые ресурсы для нас приемлемо да ну то есть например для нас там приемлемо загрузку не более 80 процентов полу если она начинает там 90 выше то понятно что что-то идет не так нужно понять максимальное количество пользователей для нас это тоже было понятно потому что мы в общем то понимаем какие пользователи нас и джерри работают ну и бизнес метрики а сейчас я про них побольше поговорю на бизнес метрики это вот по сути вот операции который мы делаем с жиром то есть мы для того чтобы начать нагрузочное тестирование должны вычленить операции которые мы производим джерри но вот у нас получилось вот такая таблица понятно что операции больше ну jiri например можно до использовать му в какой-нибудь эшу и там можно сплит делать эшу и но здесь очень важно и она выделить те операции которые мы считаем реально влияют на нагрузку потому что мы не можем потому что каждая операция под собой содержит скрипт который впоследствии надо написать чтобы протестировать и мы не можем писать скрипты для всех возможности операции у нас просто ресурсов не хватит поэтому мы экспертные оценки вывели что вот у нас должны быть вот такие операции дальше для каждой операции мы посчитали интенсивность какое количество операций в час мы выполняем расскажу дальше как читали и кейсинг прессинг это по сути интенсивность какой интенсивностью мы будем подавать вот эти операции то есть понятно что она она измеряется в секундах здесь понятно что она не должна быть меньше чем вот реальный на привод создании заявки берем она не должна быть меньше в секундах чем реально создается заявка создании заявки это не просто когда мы там допустим через рез запрос по от послали заявка создалась нет создании заявки это зайти в дыру нажать на кнопку create и шью начинать заполнять поля это вот все состояние шин потом нажимаем на кнопочку create она создается и вот вот вот эта вся операция это есть создании заявки вот писсинг берется с запасом потому что обычная ну мне кажется что всегда когда мы начинаем подавать нагрузку то время отклика она увеличивается поэтому нельзя посмотреть там искать а вот ну там 90 секунд как бы ну и давайте возьмем 3 senden секунд нет она в реале когда нагрузка будет подаваться увеличиваться будет увеличиваться поэтому надо брать запасом как рассчитывали количество операций в час ну здесь все просто дамы во-первых и сквозь запросы базе данных писали ну например там с какой частотой создаются заявки в двери но понятный establish табличка jira ищу где можно выбрать посмотреть от создания ipad построить графики вышли средний вот тебе так получается серийный какое число логе смотрели в логах мы смотрели допустим ведь как как как часто идет обращение к с бардом но и экспертная оценка тоже мы использовали даты когда вы сняли вот эти операции какие важны не важны ну понятно что экспертная оценка это уже так последнее что нужно делать чем точнее у вас данные будут там три сквозь запросы это точно логе это точно тем как бы лучше вы сделайте ваш вот именно профиль нагрузки лучшего определитесь какой интенсивностью какой частотой у вас вообще идет нагрузку на g room следующая важная вещь нагрузкам тестированием это вот такая вот рампа когда у нас подается нагрузка нагрузка подается как я уже говорил не сразу все пользователи а мы сначала разгоняем то есть мы говорим например давай сначала подадим там нагрузку 30 пользователей мы сразу их 30 не подаем вы сначала один два три последовательно включаем для чего это нужно вот пользователь вообще в реальной системе они обычно не заходят все вместе они заходят по очереди и падают нагрузку тоже по очередь поэтому на на тоже стремится сделать так чтобы нагрузка реально соответствовал нашей системе и дальше этот как раз мы все делаем время разгона теста и мы сами его определяем сколько мы хотим на прогалину хотим за 30 минут чтоб разогнались дальше у нас вот это идет длительность теста на который мы просто не увеличивая нагрузки подаем уже ту же самую нагрузку и смотрим как ведет жира на этой нагрузки а дальше все зависит от того что мы хотим сделать мы можем уйти в завершении теста но обычно делается как а когда составляется базовый профиль мы достигаем допустим 50 процентов вот мы прошли да так поднялись ход пошли дальше говорим этого еще 15 прибавим опять делаем раз вот это разгон на 15 потом опять смотрим еще он и 15 еще и так вот доходим до базовой профиля то есть мы идем именно вот так ступеньками и в результате вот когда мы получили дауд была табличка была вот операции операции в час песен на основании этого мы уже вычисляем у нас есть там файлик с экселем в котором формула прописаны и мы уже просто подставляют эти данные операции количество операций intel интенсив количество операций прессинг мы получаем уже вот такую табличку которую уже реально надо заносить в план тестирования здесь получается что значит во первых мы видим операции в час видим сколько у нас должно быть юзеров и причем вот ведь это написано базовый профиль за 15 процентов то есть мы посчитали этот профиль как будто той таблички 15 процентов для того чтобы потом по 15 процентов увеличивать то есть вот у нас есть количество виртуальных пользователей прессинг потом в какой час частотой вот 10 секунд например да каждые 10 секунд мы будем добавлять пользователей дальше 20 минут вот у нас будет одеваешь нaйти вот имея вот такую табличку можно в принципе уже делать план тестированию но сначала поговорим о том вообще какой инструмент мы выбрали для нагрузочного тестирования выбрали мыло у драйвер выбрали почему потому что и товаров азен бо банки базовый инструмент по нагрузкам и тестированию имеется хорошая компетенция всегда можно спросить тебе помогут и в принципе он имеет все функции которые нас устраивали поэтому мы решили пойти слова драгером лайнер он состоит из каких частей вот 1 штука который устанавливается на рабочем месте да человек который танкисты начинают писать это то где мы пишем скрипты второе это репозитории этих скриптов куда мы все сгоняем третье это контроллер который на основании подготовлю нашего теста выбирает скрипты смотрит какой нагрузкой надо создавать пользователи вот на этих виртуальных генераторов создает этих пользователей и эти пользователи уже соответственно бомбят наш веб сервер там ну в нашем случае applications and jerry бомбит а так он может принять все что угодно куда направить и ну и самая основная часть оспой 1 и в лордране это там есть analysis потому что не достаточно запустить тест и вообще надо проанализировать результаты и вот как раз lode runner а вот вот этот analysis там можно получить два типа метрик первое это метрики самого low драйвера это какие метрики например какой response у нас был когда мы подавать подавали запросы какие ошибки получал роутер low драйвера когда-то подавала те же запросы какое количество пользователей было в каждый момент то есть это все что собирает low драйвер и плюс нам еще нужны метрики с каждых хвостов дыры до нам нужно например сколько циpкa было на applications характере в короче говоря до какого размера цыпа вырос нам нужно посмотри какой был объем памяти на каждом из серверов то есть это уже системные метрики лаут райнеро их тоже может себя вот этот анализе с братья выдавать но мы сделали по-другому расскажу потом как все в принципе дальше нам нужно atmos табличка есть тест твой план мы делать готовы в тестовой план нужно добавлять скрипты скрипты надо писать вот low драйвере принципе если кто-то пользовался selenium да ну как бы все знают там можно открыть браузер записать потом там нажать сгенерить java код там тихо все генериус вот тоже самое воды ранили можно сделать ну казалось бы до чего сложного ну записали все теперь вы с производи вот этот скрипт и получая результат но так не получается скрипт обязательно нужно доработать но приведу пример почему мы допустим есть у нас вот создаем и шую есть у нас поле product name который стоит зерокан фрисби bucket и bamboo когда мы записывали скрипт мы туда указали только jira если мы будем постоянно запускать наш скрипт а мы только будем обращаться jira jira jira jira это неправильно пользователи так не работают пользователи выбирают разные данные поэтому наша задача при доработке скрипта сделать так чтобы выбирались разные данные и вот на самом деле вот это умение она является самым сложным которому надо научиться именно вот при разработке скрипта вот начать доработали мы скрипты все скрипты есть делаем план тестирования плод но это прям скриншоты из lauder анира выглядит это так то есть вот такая вот табличка да и мы начинаем прям вот наши скрипты там вот у нас они юси 0102 прямо вот начинаем их добавлять туда и это будет вот как бы наш весь тест дальше для каждого скрипта мы начинаем задавать параметры как раз вот в той таблице который мы рассчитывали вот я показывал большую да где были там пользователи как часто мы запускаем duration вот они все тут есть вот мы задаем до что вот нам нужно пять юзеров начинаем мы с одного добавляем 4 через 4 секунды 13 через 3мин 13 км у каждого юзера и вот и делаем это в течение двадцати минут и вот так как мы рассчитывали это было 15 процентов то есть прогнав вот эту часть мы получим 15 процентов нагрузки дальше добавляем еще следующих еще следующие 15 процентов следующие 15 процентов следующих 15 процентов и она короче идет вот нам нужно сделать так чтобы дошло до 100 в принципе все а дальше и вот что еще лода ранили хорошая штука есть то что мы вот параметры которые вводим их реально видим на экране то есть вот они все наши разгон видно да потом ступенечки пошли все наши скрипты показаны все ступенечки должны стоять друг под другом скрипты все должны заканчиваться в один и тот же момент что было нормальной нагрузкой вот как раз здесь мы видим что вот у нас тут проблемка у нас скрип дань заканчивается раньше чем другие но это означает то что ну где-то параметр неправильно указали над зайти и проверить параметры для для вот этого именно скрипта вот то все должно быть четко все план тестирование есть мы готовы его запускать но здесь опять возникают проблемы вот для нас на самом деле вот именно для нашей команды это все самая большая проблема это запустить нагрузочное тестирование потому что во первых нагрузочное тестирование мы запускаем на отдельной среде для того и перед тем как его запустить мы должны соответственно взять все провода до зеркала поставить туда добавить какую-то наши новые релизы которые мы делаем добавить пользователей для тестирования потому что пользователь у нас не реальные пользователи которые там в дверь и работает это отдельных там 1000 пользователей который будет грузить нашу систему а когда мы этих пользователей добавили нам еще нужно раздать им право на все проекты на все доски чтобы они создавать умели вот для этого в итоге мы написали скрипт он работает эти вот эта часть у нас как бы закрыта она нормально вот следующая важная штука это перед тем как запустить на груз на тестирование надо вообще проверить что вашу систему реально работает то есть вы должны пройтись по вашим операциям посмотреть что если вы ищу создали оно создалось если вы отредактировали то отредактировали и еще помимо этого надо не только ваш софт посмотреть еще что у вас и hard нормально работает ну допустим если взять роджеру дата не разошлись ли у вас индексы у нас просто такое было мы не проверили там что нас индекс на самом деле разошлись запустили тестирование провалились провалилась стали разбираться смотрим у нас проблему с индексами нужно посмотреть не загружали вас циpкa такой тоже у нас было получилось как мы запустили наш нагрузочное тестирование потом стали анализировать и смотрим что уже там буквально падали там 1 15 процентов нагрузки а у нас уже сцепу на одной ноги ушел там в потолок стали разбираться оказывается был установлен плагин который не должен был бы быть там когда мы проводим нагрузки тестирование он запустил там джобс свой и тем самым все на грустно и в общем тестировании испортил она грустно тестирование идет до одета шесть-семь часов поэтому шесть-семь часов и я все впустую и дальше важная часть это подготовить тестовые данные то есть вот когда мы запускаем тест и вот мы взяли сп рода наши данные положили их на нашу среду тестирования где мы будем проводить дальше мы например должны там редактировать эти данные но мы точно не знаем вроде вот например у нас там в тату седан редактировать нельзя то есть нам для того чтобы отредактировать и шую на надо как-то начинать искать всей ищу которые в статусе оупен то есть это очень сложно мы делаем по другому мы просто заводим кучу данных в тату seo upon перед началом тестирования и на них уже эти тестирования проводим и мы точно знаем что оно должно работать потому что мы эти данные подготовили вот в общем такие вот три этапа кажется что непростые ну а самом деле очень все сложно я потом дальше расскажу как мы пытаемся с этим бороться следующее это нужно собрать метрики то есть мы тестирование провели как бы отлично но теперь надо понять прошло вообще нагрузочное тестирование или не прошло для того чтобы собрать метрики у нас 7 3 к отображается в графа не да и такой инструмент для можно и там из разных источников подступить данные и просто крайтом визуализировать и в графике и посмотреть на результаты у нас граф она состоит вот из каких частей первое это сингл metrics там у нас например количество подключений базе данных мы мониторим потому что на самом деле для jira это как бы очень важно у нас например одна из основных проблем доводку вот ну мы же вообще постоянно мониторим до в нашу вообще дыру и и вот замечено как только начинает повышаться количество подключений бате все жди проблему вот то есть за этим надо следить значит количество б д потом есть нас такой плагин я просто не знаю знаю ты там на джетте есть такой плагин вот он тоже ну ну не очень хорошо он себя ведёт короче карен нагрузки и он периодически у нас выкидывает ошибки у нас там тоже вот прям показывать какие ошибки вывел джей ти для того чтобы мы вообще поняли что там было с этим плагином ну дальше мы чем мониторим циpкa целый блок у нас там есть да по всем нашим аппликационных сервером по базам данным мы мониторим какая у них нагрузкой цпу была память мониторим мониторим скорость доступа чтение записи дисков везде тоже на базе данных на при на серверах приложений дальше это наш плагин который у нас там есть интеграция он тоже для нас важен потому что там в общем ситуация в чем что есть система есть наша jira и через эту систему начинают поступать к нам сообщение и посередине у нас шина и в этой шине скапливаться эти сообщения jira их потом выбирает и вот мы должны вообще посмотреть с какой скоростью они у нас там скапливаются потому что если она там накапливается никуда не идет значит нас какие-то проблемы с интеграцией чё-то у нас она не забирает сообщений создает шум и следующая часть это как раз вот метрики самого low драйвера это у нас получается вот какие ошибки у нас возвратились когда мы подавали запрос сколько какое количество пользователей было какое время отклика было на запрос это все это мы берем и slow драйвера это же вот сюда пишем к бывают табличку и тоже и и анализируем потому что это на самом деле очень важные данные потому почему потому что когда мы видим на что у нас например загружаться путана 90 процентов то мы сразу лезем смотреть какие были ошибки при этом но в общем jira она обычно с прокси и ролями падает если ты ее очень сильно нагрузил она просто начинает выдавать прокси error и пользователи не могут уже обратиться но потом естественно что другое приятное чувство когда нагрузка уменьшается на начинает отвечать вот вот вот такие у нас барды теперь вот немного про подводные камни но во первых кто пишет скрипт и вот как я говорил когда мы начали заниматься нагруженным тестированием jira мы не умели писать скрипты и вот тут нам пригодились наши ребята которые занимаются в raw айзен банки только нагрудным тестированием и они в принципе такой сервис к ним можно у них можно в принципе это нагрузочное тестирование заказать сделать ну то есть это все будет платный с тестом из своего проекта платим им денежку они нам делают нагрузочные тестирования и мы именно так и поступили потому что опыта у нас не было вот мы к ним пришли сказали что хотим они нам помогли сделать все там базовый план сделали мониторили сами все скрипты и писали отчеты нам давали то есть первые первые вот как бы запуске вообще написание скриптов это было вот чисто их не работа то есть мы именно как бы ввели то есть мы уже помогали анализировать результат потому что мы знали там как держишь работает но вот именно написание скриптов там базовый план мы давали какие-то данные которые нас просили и все больше мы в принципе ничего не могли сделать но потом когда время шло мы захотели запускать нагрузки тестирование чаще вот но сейчас мы запускаем его практически каждый день и понятно что ну постоянно дергать ребят не хочется у них есть свои проекты потом это тоже стоит денег и мы решили что нам нужно взять вот это нагрузочное тестирование в команду как мы ее брали то есть я вот с ребятами сидел аниме все учили показывали там пару дней потом сам пытался запускать эти тесты анализировал смотрел ошибки и вот потратил там но не знаю месяц полтора два когда я уже стал понимать что я могу сделать и к ним не общем-то обращался по минимуму после этого у нас есть тестировщики в команде стали как бы привлекать тестировщиков например написать скрипты и там запустить скрипт и там если что то не получается вместе смотрели вот потом ребята вот из на груше на тестирование устроили курсы по всему райффайзенбанка вот как делать вообще как делать нагруженные тестирования туда тоже вся наша команда сходила и вот постепенно тестировщики тоже научились писать скрипты запускайте анализировать дальше у нас вообще команда да она ну так называть его вс команды да у нас и разработчики тестировщики и operations мы все вместе в одной команде сидим соответственно потом стал operations подключаться и в итоге сейчас я вообще ничего не делаю по навороченным тестированию доната что архитекторы они вообще такие люди там придут и идут вот и получается у нас тестировщики пишут на грустные скрипты делают базовый профиль базовый план рассчитывают проверяешь а скрипты работает а вот уже подготавливает саму систему запускает нагрузочные скрипты это нас operations уже делают ребятам а утром мы все вместе анализируем результаты обычно это и анализирует operations потом начинает тестировщик они там смотрят если все ok ok если все сложно тогда уже собираемся все вместе начинаем смотреть вот то есть мы вот таким образом шли к тому чтобы начать писать скрипты и следующее тоже важная штука вообще понять о правильно работают мой скрипт ну вот пример простой приведу есть у нас там плагин он делает что создается и шью добавляются согласующие этой сети согласующие согласовывают и еще переводится в другой статус вот все в принципе вот вот и вся операция стали думать как это дело за автоматизировать но первое что что приходит в голову первое что приходит в голову написать один скрипт ну просто сразу создать добавить 50 пользователей и согласующих эти 50 согласующих согласовал согласовали все создала все хорошо посмотреть нагрузку все супер вот второе это создать еще добавить 50 согласующих а уже вторым скриптом делать согласование два скрипта я больше чем один поэтому мы решили сэкономить и сделали один скрипт и в итоге получилось так что мы подали очень большую нагрузку на джиро то есть мы там создавали допустим по 10 и по 10 тикетов там с 50 согласующими они сразу начинали согласовывать у нас просто jira подала мы очень долго разбирались пока они решили посмотреть на эту проблему с другой стороны что вообще правильно ли мы это делаем то что в реале у нас получалось что там 200 согласующих за час согласовывают вот эти запросы от такого не бывает их там 10 там ну 15 вот и нам пришлось переписывать скрипт то есть вот здесь тоже важно именно разделить операции и правильно написать скрипт ну тут как бы приходит только с опытом у нас вот хорошо ребят тоже есть которыми можно пообщаться в том что у них опыт большой ну и мы до сих пор из нас какие-то вопросы мы к ним ходим модели нагрузки какие у нас модели нагрузки у нас пока сейчас реализовано две модели нагрузки 1 the performance testing когда мы вот именно доходим там до 50-ти процентов начинаем там постепенно повышать на базовый план вышли упали все смотрим анализируем результаты 2 который мы используем реже это вот проверка на стабильность системы как раз когда от пика 80 процентов берем на него выходим и идем там в течение семи часов и смотрим что происходит жир и мы его делаем редко почему нас только две модели вообще нам бы еще хорошо бы вольем до чтобы посмотреть то что у нас если прибавляются очень быстро и от жира она очень чувствительна к объему вот этих вещей да у себя в базе данных и нам обязательно хочется посмотреть а что будет если мы у нас будет там три миллиона ищу его отводим тестируем нам для этого нужно но пока мы до него не дошли потому что у нас просто не хватает ресурсов мы пока вот именно вот я переговорил но самая большая проблема с запуском тестов и каток мы с этой проблемы реальны разберемся вот тогда уже как бы начнем заниматься волен тестирования запуск тестирования вот первый самый важный этот чек лист вот реально у нас ребята по нагрузкам тестирование курсы читали и говорили вот когда будете запускать готовить систему обязательно делайте чек-лист вот какие операции надо сделать все это слышали но когда начали туда вон какой чек лист учетом чертом пользователи добавил это посмотрел то посмотрел туда сюда вот а потом когда начинаешь тебе все что посмотреть все становится больше больше больше больше и реально над делать чек лист просто чтобы перед каждым на грустный тестированием сил так по чек-листу так это проверил отправят проект правил все нормально все пошло на грустной тестер не вот чек-листа это прям most вот мы как раз сейчас делаем постоянно туда чет добавляем и вот им пользуемся второе все-таки среда нагрузочного тестирования должна быть отдельная среда у нас сейчас она вместе с пользовательским тестированием ну потому что отдельная среда это дополнительные ресурсы за ресурс над платите все такое вот но проблемный pro pack проблем заключается в чем что ты хочешь провести нагруженные тестирования ты подготовил проверил что у тебя все нормально а в этот же день какой-то разработчик вывел туда новую функциональность чтобы показать пользователю и в итоге у тебя на грустной тестера не пошло не так то есть вот вот хорошо иметь отдельные среду вот реально это бы решило бы большое количество проблем но и вот мы выходим из нашей вот ситуации с разными средами наши получается как среда 1 этаже где у нас польское тестированию идет и нагрузка но если мы запускаем нагрузку днем она у нас нагрузка идет 7 часов но это практически весь рабочий день и получается что люди уже тестировать не могут а мы запускаем нагрузку практически каждый день поэтому его записать запускаем ее по расписанию как росла удара не ли такая функция есть она автоматически на 12 часов ночи запускается и как бы идет утром мы приходим и анализируем результаты ну принципе коллеги все что хотел рассказать рассказал задавайте вопросы готов ответить zdravstvuite на самом деле вопросов достаточно много но задам основной которого появился зачем такая команда devops а до я здесь вот зачем такая команда devops а если самого devops а как такового собственный нет можно чек-лист проходить же каким-то автоматизируем срез мокрым типа дженкинса или что то еще проверять все параметры которые необходимы после этого он сам будет запускать тот же тест и анализировать результаты также и выводить их удобно но правильный раз такой да все правильно все так и можно сделать но для того чтобы это сделать нужно ресурсы то есть нельзя просто сесть и сразу все сделать то есть сначала до приходится что-то делать вручную но но это примерно как и совсем да то есть вот когда ты начинаешь там какую-то программу писать ты вы стараюсь какой-то сайтом сиди который у тебя удовлетворяет что быстро уже начать вводить бизнес функциональность о том ты уже начинаешь допиливать в принципе вот мы до тоже по наша одна из целей это строить вот именно в pipeline до чтобы у нас все запускалась и делались но пока вот мы до этого не дошли но да было бы круто согласен вот спасибо за вопрос рюкзак так я отдам хорошо ещё вопросы есть да есть спасибо за доклад очень интересно вот у меня возник вопрос почему вы запускаете настолько часто нагрузочное тестирование и почему я так понял из доклада что у вас не соответствует проц среда и среда для тестирования пользователей нагрузочного тестирования да у нас среда для тестирования и нагрузки 1 этажа потому что у нас пока нет ресурсов чтобы выделить отдельную среду потому что ну вот нагрузки тестирован должен быть лайк под хорошим вот алле-оп рот это все-таки значительные ресурсы вот а почему мы запускаем каждый день ну потому что так получается что мы делаем плагины и они очень часто реальные эффекты производительность дыры ну то есть вот вот последнее допустим там недели три мы запускаем часто почему ну во первых как я говорил у нас допустим мы подготовились нагруженным тестированию но тут что-то пошло не так это первое а второе что мы реально начинаем выявлять баги то есть мы мы реально видим что плагин и не работают на большой нагрузке сразу варим разработчику давай вот у тебя проблема у нас разработчика плагина ну ну так быстро все делает вот и короче говорит ну всё я готов давайте еще раз вот мы еще раз и вот мы гоняем постоянно смотрим как она всё менялось фактически то что вы находите в результате нагрузочного тестирования успеваете исправить фактический за день ну и когда-то успеваем когда-то не успеваем иногда просто отрубаем эта функциональность чтобы не уложил хотел спросить о результатах в каких улучшений вы достигли в рамках системы вот постоянно прогоняю туда тоже дорог фиксы постоянно это дошел а в целом насколько в целом да вот значит у нас в общем сам большая проблема была какая но я говорю у нас жира она то есть если jira вообще неважно лежит она не лежит если жиры может полежать там три часа и не встать и это нормально ну то ok у нас такого не может быть у нас джерри весь инцидент management если у нас даже не работает там 10 минут уже начинается звонки потому что все инцидент туда заводится и мы когда вы вели релиз новый то есть ну это было где-то в марте то у нас нагрузка тестирование было но она еще у нас не было поставлено вот на такой поток чтобы каждый день мы могли запускать и у нас сбой в было очень много реально то есть у нас там jira падаванов причина двух месяцев и сейчас когда мы стали постоянно тестировать и находить эти баги у нас в принципе джерри ну достаточно стабильно работает то есть вот мы все оцениваем в авариях у нас в raw 1 банки такая штука есть что она есть оценка системы и одна из них складывается из этих аварий авария в свою очередь тоже распределяется по разным оценкам да то есть если он там час лежала ну там этом двоечка есть она там четыре часа лежал от четверочка и это все накапливается это все потом идет свою оценку в оценку твоей команды ну и в твою оценку то личную как бы вот поэтому он обрушил источник короткий вопрос собираетесь ли вы переходить к тестированию на продакшн среде на местные примерный production нет на продакшен и переходить пока не собираемся дальнейших план да просто я помню был в одной организации и там как бы говорили ребята а вот вы не заметили что иногда по ночам наша система не работает ну как бы это вот как раз мы делаем на грудь на тестирование продакшена вот и то есть жир и это монолит мы не можем там взять например какой то там микро сервис если были какие-то микро сервиса оттестировать там пять процентов позиции заденет fixing жира монолит если мы начнем ее но продакшене тысяч она начнет не работать то у нас как бы будут проблемы а она должна работать 2407 спасибо да добрый день я здесь до одежды для меня да собственно вопрос и половина уже что хотел задать уже ответили на вопрос еще есть вопрос 1 вы говорили что нагрузочное тестирование 7 часов вы запускаете его дела часов ночи до не перекрывается ли это с работа и вашего service desk а то есть имеется ввиду что вас наверно это по разным часовым поясам либо отделение по разным часовым поясом и цвет менеджмент должен быть 24 на 7 если вы запускаете соответственно на где-то рядом с продаж там то не терпит ли это продаж и на время тестирования нет у нас отдельная система она вообще с продакшна никак не связан он находится в другой сети но это не то есть это не produces light по ресурсам да это меньше чем продакшн и вы делать экстраполяция когда мы делаем сыр полет до это как бы плохо но в наших условиях мы делаем циркуляцию и хорошо и еще такой вопрос а вы рассказали про косяки в плагинах которые вы находите были моменты когда у вас проблемы возникали имени интеграции потому что у jira очень много зависит от интеграции с тем же confluence bamboo и так далее и так далее и дело может быть даже не в самом плагине именно в подсистеме с которой вы интегрируете сюда вот в чем нам помогло вообще нагрузочное тестирование как раз в прошлом декабре мы думали как жиру интегрировались другими системами и первое что приходит в голову это rest дан уже есть хороший rest можно по нему там создавать запросы и все делать и вот когда мы стали подавать нагрузку то у нас жира просто перестала работать мы вот посчитали ту нагрузку которую нас системы будут делать если мы делаем это все через rest мы написали все вот эти риски все сделали и стали через них нагрузку jira упала после этого мы решили делать всю интеграции через шину но то есть проблем с тем что не выдерживают вы тестировали другие подсистемы как они обрабатывают допустим запросы jira или нет нет мы тестировали то есть мы для нас другие системы они просто подавали нам запрос и вот и все то есть неджи раху-это smp системах леджер да то есть они просто у нас jira она в основном принимает запросы отдает она по моему настолько там в составе у нас хранилище данных все все остальное она принимает допустим есть мониторинг до в банке какая-то инцидент произошел сразу автоматом джинджер с отдалась и шуя и вот вся проблема в том что вот этот мониторинг может нам создать в одну секунду 2000 еще и когда он это начинает делать то все листы не выдерживают jira начинают уложить паркет спасибо спасибо за доклад а у меня вопрос тоже косвенно связаны с количественно времени на тестирование вы сказали семь часов я хотел спросить у удовлетворяет люд продолжительность тестирования вас и и или вы уже достигли той точки когда нужно оптимизировать время продолжительный 7 часов нас не удовлетворяла когда мы запускали ее во время рабочего дня это было много но сейчас вот мы составили базовый план ну то есть там ведь как получается что есть то хочет снизить время тогда надо там не по 10 процентов повышать ступень дело к допустим по 20 вот и она может свалиться где-то там посередине и тут уже нужно как бы понять а где она реально упала мы сейчас сделали там по моему по 15 процентов этот разброс он достаточно точен для нас и вот и так как это запускается ночью вообще никого не эффект от нас как бы все устраивает то и сети я правильно понял в ближайшие временем ну не будет оптимизации по времени да нет нет мы так и продолжим с этими семью часами вот единственное что мы хотим ну когда-то начать волен тестирование делать сколько там будет по времени я не знаю пока поэтому еще будем с нашими ребятами советоваться вот которые занимаются нагрузочным тестированием но пока о да вот она идет 7 часов нас устраивает спасибо добрый день спасибо за доклад у меня вопрос по ну есть какие-то результаты нагрузочного тестирования да есть какие-то настройки которые там появились да там новые после нагрузочного тестирования есть ли какой-то процесс передачи этих настроек aps у автоматизирован ли он или этот док овский документ с инструкциями и какие планы да хороший вопрос вот прям книжку подарю за этот вопрос ну вообще я как бы много занимался jira тоже выступа есть такой от лосины user group и в общем jiri вот перенос вот этих конфигурации она состоит из чего 1 перенос плагинов 2 перенос самих конфигурацией этого дамы экраны какие-то наделали еще что то и 3 если мы используем там допустим какой нибудь там скрипт райнер наверно все там скрипт рамир знают то вот именно вот эти скрипты у нас сейчас есть перенос вот этих объектов скрипт райнеро у нас есть автоматом переносится плагина в принципе о спорте factory забирайте все просто а вот действительно конфигурации у нас пока переносов нет то есть мы вот как вы говорите да делом духовки и файлы но мы в этом направлении движемся то есть мы смотрим ну вот есть да там project на фигура тары configuration manager мы взяли project на фигура tor потому что у нее есть а фишка вот я как раз этим занимался то есть я там дело юристы для того что все автоматом переносилась то есть мы дамы к этому процессу идем но пока к нему не подошли и еще один вопрос спасибо большое за ответ ещё один вопрос по поводу а пиджи русских да не было ли у вас планов разделить пользовательскую часть и api для бэка и проводить нагрузочное тестирование ну отдельно api для внешних систем и отдельно для пользователей нет мы пока так не делали честно говоря пока даже ну вот работы пользователи может просто сильно влиять да на работу дыры а вот внешней системы которые например там забирают там эти киты или вы не через api работаете через базу и поэтому это нет нет нет мы работаем через api через свои плагины которые у нас написаны но для нас в принципе в нам важно и работа пользователей работы системы работа пусть на самом деле нам гораздо больше важностью работа систем потому что работа пользователи если что-то не работает аварию сразу у тебя в кармане вот а если не работают интеграции то в принципе это как бы меньшее зло поэтому мы сюда тестируем и и работу пользователей системы смотрим как это все вместе работает именно из-за этого вот вышли что система сильно очень грузило нам дыру именно поэтому мы решили изменить не через рис ты а написать вот свое ядро который у нас сейчас меньше города браузер дыру через интеграцию спасибо и последний вопрос вот все-таки про обнуление для да про лайк в части данных ну не то что там контура разные контуры а вот именно по данным как часто вы обновляйтесь до пруд лайк и обнулить если и обновляемся у нас автоматизировано то это обнуление то есть у нас за плату запускается там ноги play план бабушки до который нам разливает про вот это вот его а то потом всё от от мужа там на остальные среды разливаем вот мы стараемся ну вообще по хорошим надо это делать каждый релиз когда мы делаем радуйся стали очень часто релиза делать ну вот сейчас мы обновились вот на прошлой неделе последний раз обновились продам спасибо большое алексей спасибо за доклад я здесь справа кому-то колонны хотелось бы узнать как тестирование нагрузочное внедряется в общем слов разработки как команда узнает о том что они чтут нужно пофиксить асад не asap важно не важно иногда я понял ну здесь у нас как у нас в общем то вся команда сидят вместе соответственно все тестировщики все там операция всем там мы все сидим вместе соответственно но происходит это как приходит к нам например бизнес новой задачи и перед ребята давайте вот вот внедрим новый плагин а мы говорим ну как бы не вопрос давайте внедри ну давай сначала нагружена тестируем и вот тут начинается работа потому что бы базовый план по этому плагину сделать чтобы написать скрипты и чтобы сделать lan тестер это все наши тестировщики делают дальше мы начинаем это запускать и смотрим какие то есть проблемы ну там на сейчас основной переносить эти проблемы находит вот потом operations канатам на стендапе он начинает поднимать ребят я вчера смотрел у нас как бы не работают чё делать будем надо либо скрипты переписывать либо у нас есть какая-то еще бизнес функциональности на и у нас есть уже product owner который нам это все приоритизирует чем мы реально должны заниматься вот недавно вот как раз обычно приоритизирует кстати говоря вот в большинстве случаев стороны нагрузочное тестирование приоритизирует потому что им тоже очень важно знать что он от жира не упадет потому что это как бы на репутацию то есть ты что-то делаешь делаешь а у тебя программ не работают что-то уж лучше пусть функциональности какой-то не будет но чтобы оно все нормально работало"
}