{
  "video_id": "sLDYgmhNxfU",
  "channel": "HighLoadChannel",
  "title": "BeyondCorp: модель DevOps-безопасности без регистрации и VPN / Глеб Лесников (Додо Пицца)",
  "views": 1610,
  "duration": 2895,
  "published": "2019-05-15T05:25:13-07:00",
  "text": "меня зовут глеб лесников есть компания додо пицца и я вам расскажу про то как мы делаем нашу корпоративную devops не только безопасность я вам расскажу сначала про то как мы еще к этому всем пришли какое открытие мы все вместе совершили что для него нужно и опишу наши так скажем сам большие проблемы и трудности с тем решениям которому в итоге пришли да и будет немножко губернатором так совсем чуть-чуть что за докладывать собственно к вернется и так собственно давайте поговорим про нашу жизнь в стартапе с мы уже работаем семь лет получается система начала развиваться в 2011 году нашу информационную систему кто-то из которая называется у нее была одна база на проводе и один на приличный сервер и один сервер на дэви для разработки и собственно там один и прикажет сервер на дивиденды кришна сервера вроде чем меньше 10 серверов везде естественно использовались публичный ключ и и собственно запароленный ртп вас туда было типа там от 2 до 10 разработчиков и вообще не было так скажем инфраструктурных и не только корпоративных сервисов то есть у нас был reset и все в нем делалось частично и zabbix для мониторинга который был с логином и паролем и вроде как все нормально было затем в 2015 года мы начали такой достаточно взрывной рост и собственно этому времени уже накопился там кое-какой технический долг именно по безопасности не только ну вы представляете когда у вас там уже есть несколько баз и несколько разработчиков там больше десяти то эти разработчики хотят себе локальные среды им нужны базы там копии баз рода копии баз нужно просто локально типа вообще скачать не обязательно для окружения ну и мы начали там закрой доступ к базам типа всего вам нельзя ходить вот вам там и сквер к копия базы или следующая штука которого мы нашли это любой там мы искали и леска berkley антипод это грипп или там дабы фаржа умеет пользоваться sh тоннелем ну типа прокидывать connect через тоннель вот и затем затем мы пришли до такой штуки которое зовется в жук скрипт это скрипта снова шаг который так в жив и он открывает несколько тоннелей сразу на несколько басу то есть у вас там пять баз предположим то пять серверов и он также и сразу до 5 серверов открывает sage тоннели также где-то в 2000 там 15 и 16 обнаружил такую штуку как наш прокси команд кто знает что такое sage прокси команд так вот пять человек из четверо ну хорошо то есть что такое стаж прокси команд мы делаем бастион хост это такой хост который стоит перед там всеми серверами оставим на нем на tkat или собственный саша сумеет прописываем вы саш . конфиг строку в proxy команд и вуаля у вас все работает все проектируется вот так выглядит после этого ваш конфиг то есть и request for выглядит примерно так то есть ваш компьютеров сначала коннекта бастиона поднимаете себе туннель и затем через этот тисе пи туннель вы попадаете напрямую вдруг какой-то instance который стоит за бы стену соответствовать их из танцев не от внешних публичных адресов или даже если они есть то на них может быть закрыты порт для sage от всего интернета соответственно с этим жук скриптом и туннелями и вот эту все связочка которые у нас было все было хорошо но у нас была высосана общей приватный sage ключ для девелоперов потому что но тоже у нас все было на винде и приватные ключи общем и распространяли такой путь и ключ папка распространяя девелопер . папка на все машины наших девелоперов сами естественно ну сама эту структуру пользуясь личными ключами у кого есть общее со включая я даже не смотрю кто из вас использует исключить то что много кого есть прям общее вот какой-то come on ключ у кого вот вообще никто даже между серверами даже между серверами нет никогда никакого come on stage вот-вот ну вот есть люди это удобнее просто дайте более там все же под на там как бы чтоб будет вот если этот общий сашку чем просто регенерироваться у нас смотрите у нас компания добра двери все остальное там freedom and possibility практически и не то чтобы там мы сильно не доверяли нашим разработчика поэтому или там аналитиком поэтому это в принципе было нору и мы просто генерировать ключ и все было ок но даже с этим училась наш причем были вопросы конечно же по аудиту аудит логинов то есть при том что этот общий стаж ключ там в чисто для паз он вообще в принципе ну там ты ничего не мог сделать с ним до но даже тогда мы уже хотели иметь этот аудит логинов и задумывались ли в этом затем конечно же мы захотели иметь так скажем приватные ключи для разработчиков и не только и даже подумали о том чтобы это все там автоматизировать но автоматизации вот этих вот расследования ключей она достаточно быстро вышла за рамки оси был ну то есть принципе ты не можешь делать на айсель и какую-то вменяемую систему для менеджмент ssh ключи приватных также но очевидная проблема что общего у приватных ключей нет 2 факта релиз сингла саймона в принципе есть по модулями там можем чет накрутить вот и чтобы иметь настоящий так называемый ушел час но обоюдное доверие в работаешь с раса с ключами тебе нужно чтобы все юзеры должны имели публичные ключи всех серверов вот представьте если вас там 10 тысяч серверов то но это либо практически нереально либо это можно сделать через hf педана из рекорд но это тоже очень сложно по факту то есть вам нужно иметь седана из всех чтобы этому еще всему доверять ну если кто-то интересуется может прочитать что это такое но это очень сложно реально особенно если вы в клаудитт а если у вас ваши хвосты то и ваш dns это еще нормально утра за пример нет своего собственного данной сервера нам это прям вообще сложно и ясно все сервер должен иметь публичные ключи всех юзеров и это еще ну не то чтобы еще сложнее на это примерно то же самое по сложности потому что у вас мы же в облаках всем его жюри и у вас серверы приходят-уходят там перезагружаются должен быть какой-то прям контроллер какой-то сервис который постоянно все это делать естественно не такие есть вот но мы на них если честно тогда еще не смотрели и соответственно уже в 2017 у нас получилось что мы владели примерно там 100 серверами базами данных там диво перски в окружении me у нас стало три региона америка европа и китай и еще там девелоперские регионы в итоге мы просто сдались потому что ну уже прям тяжело было все разруливать туннелями вот и у нас также появились такие поползновения в сторону того самого devops ада которая означает убил гитлера нет как вообще ты можешь раны если у тебя у разработчиков только какой то какой то общий наш ключ на прот и у них вообще даже не было лдп на пруд и по собственно доступов у него нет за доступов разработчиков нет и как вообще ему отдавать в руки что-то вот и достаточно быстро к этому пришли что вообще все разработчики должны иметь доступ на пруд ну что мы не хотим заниматься по факту но там очень мы хотим devops сами как команды инфраструктурой мы очень хотели devops у нас было мало разработчиков так скажем много и тоже мы начали задаваться как вообще организовать доступ разработчикам на проц чтобы при этом было аудит чтобы мы могли всегда знать кто зашел почему куда что там делал вот и естественно еще один вопрос который обязательно появляется у нас он тоже появился почему собственно не vpn где радиус где active directory чего не можете поднять там домен что за дела да и соответственно где vpn радиус active directory но тоже надо сразу понимать что массажер вот ими кротики в офисах и этот кто-то пытался настроить vpn mikrotik ах он должен меня понять вот но это не то чтобы сложно но это слегка нетривиальным пока я настраивал vpn на mikrotik я читал rfc короче то есть если на в каких-то в протянет ах это там кнопочки понажимал и все работают в большинстве сам случаях даже на убегать и так в доме кротики там надо понимать чем там викинг там чем вторая фаза и писака отличается от первой вот и вообще в целом даже когда мы начали внедрять в.п. у меня были вопросы к модели безопасности типа мы в 2000 там 1818 году находимся и внедрять что-то без двухфакторная авторизация ну там в продакшен или не только уже задаю стоит задать вопросы а там еще по факту требовался радиус требовался ну или этом active directory ну любая в общем система типов рипы если ты хотел использовать логин и пароль и а мы уже опять же 2016 году мы знаем что использовать просто логин и пароль и не очень правильно также известна выпьем за собой тащит паблике infrastructure эту инфраструктуру для собственно сертификатов и общего доверия у тебя в любом случае должна быть модели познать и появится но vpn прям без него практически не работает я таки криптография и когда ты это все соединял еще вместе микротика приходилось узнавать такие злые слова типа как россия signature хоббиты я по радиус япы радиус это когда тепло часто радио сервер ты создаешь подключение pvp но он там идет в радиусе сервер проверяет там логин пароль всяко такое в общем это так себе работала почему не open vpn потому что vpn типа софтовые медленными хотелось все таки четко быстрее в итоге мы запилили vpn мы сделали описи как и два сайта сайт между офисом идиот мирским окружением на прост мы пока мы тогда еще не очень хотели или думали вообще об этом вот и соответственно мы начали запиливать пойнту сайт vpn для разработчиков удаленных все за все по строкам и это запилили естественно нам потребовалось сразу же сделать как я ем этим как я работал один из mikrotik of поэтому экспортировал конечно ключе если он там сломается брик лица то чтобы не остаться без собственно пикаев и пришлось леденец boarding на там разгребая кардан с вашим вообще те вещи которые ты не хочешь делать но если только ты не человек который очень хочется это делать и и добил крышку конечно кружка в гробу и писек одолел то что он довольно просто не работает ну да описок и к едва не работает для купания и каждый релиз микротика какие то баг фиксы записи какая во 2-ом рандомна викинг падал в этом типе через восемь часов он иногда падал там все очень плохо с этим в это время на продакшн у нас собственно продолжал работать наш уже в скрипт он прекрасно бухал аналитиков девелоперов когда что нужно посмотреть или какие-то внутренние системы потрогать архетипе сервис и у нас быстро к переехали уже тогда она ос два прокси то есть у нас опять же напомню что у нас живет и мы пользовались просто гуглу четкой и заходили там в пробитые были от менеджеры визитки на в ки баны еще 10000 сервисов которые вы рано или поздно начнете устанавливать себе в так в продакшен и вдов чтобы иметь нам the same ip серва билете и все остальное при этом опять же все что кроме все что кроме скажем продакшена и не только работала через саму чипсете работал через волос 2 guide хоп работал по сам лу и мы тоже компании ремонт френдли нас три офиса достаточно свободно график то есть ты должен иметь возможность работать из дома и у нас распределенный контакт-центр которому нам к сожалению пришлось сделать там систему микросистема чтобы они там могли заходить и смотрите мы и мы сделали на ос вопросе если бы все сидели в одном офисе наверное как то вы все по-другому было там что vpn 1 офис надену для на офиса сделать изи вот но у нас сразу же такие ограничения и затем я пришел в гости по знаку я пришел гости в офис google пообщался с разработчиком там и игре вот вообще как внутри себя делать безопасности к такой взглянул на старше все очень круто там и работая вообще откуда угодно приезжаем вот такой заказов казахстана нельзя почему там дела с и еще у нас есть тогда же такое приварку называется paint карты так круто и от корпус классно вот потом есть с на забыл на следующий уже день что такое и случайно увидел статью про be at копия даже не помню что за статья но я начал копать я и просто меня достигла просветление что все что мы делаем в принципе более-менее правильно нужно вот только доделать чуть-чуть и вообще будет нирвана то что же такое агент карт google взломали в 2010 году они очень обиделись там сергей брин вырвал металл и начали очень всю свою внутреннюю корпоративную сеть перестраивать полностью и как 2 часа там google google уже там работал 10 лет у них была очень большая инфраструктура там десятки до центра включились серверов и у них был очень много всяких vpn-ов там сетей остального и о чем они этом году начали перестраивать в 2014 году они опубликовали с 1 статьи он пробьет карп сейчас уже пять статей есть вот сайте banggood.com можно у него зайти там есть ссылки на эти собственно пять статей на то как они там это все делают и что же такое and core это такой фреймворк у него есть три основных таких заповеди первая заповедь звучит как периметра лишь дизайн она гласит что подключение вообще какой-либо сети не важна эта сеть там корпоративные школы дома еще не важно просто наличие так скажем какого-то из интерфейса в какой-то сети они не должно определять доступа его уровень то есть если ты там пришел на работу включился в зерна шнурком у тебя просто так не должна мне должен появляться какой-то интернет да или там еще доступ к продам это первая заповедь и то есть когда они начали это делать они решили что все больше никогда ты не будешь получить доступ просто потому что там твой разбери по и в сети 2 вторая заповедь это контакта и доступ к сервисам там и сервером и всем остальным выдается на информацию об контексте у вас и ваше устройство то есть что ваши машины что вашего же ваша машина она зарегистрирована в там в google.com корпоративном регистре этих девайсов там и что у нее зашифрованный диск прямо сейчас что у нее вот в тот момент когда вы подключаетесь какой-то системе у нее должен быть зашифрованный диск там обстоятельства антивирус быть зелененьким если это windows не должны знать о падает должен стоять пароль на компьютер у вас должна быть сессия с вашим провайдером с учеткой и прийти это динамик access control и он гласит что вся коммуникация сервис и вообще вся должна быть аутентифицирован авторизованы за фронта есть в принципе вы были вылезает как быть 1 принципа до что просто так ты не можешь получить доступ к там к сервису это сюда в первых должен быть там зашифрованное соединение с ним ваш успех ты должен уметь ты должна вот эти цитироваться в твоем сингл стоян правой дрифтом провайдере той учетной записи корпоративный ее ты должен быть авторизован для того чтобы там зайти на какой-то и серверов здесь на как это все работает у них и у нас и вообще у всех то есть у вас есть меньше девайс это ваш лаптопом меня или еще кого-то этот этот компьютер когда он хочет получить доступ к там вот sage жаждете серверу он обращается к прокси и также прокси и варите на сингл свой нос то есть на там в нашем случае это аккаунт google com там где ты продлеваешь перри подключаешься к сети ты получаешь здесь гугла то есть он он проверяет он проверяет до базу данных юзеров то что хочешь направляли группе что везде и отправляет информацию в pipeline затем из pipeline собирают весь контекст что твою я правильный что твой девайс так скажу в реестре девайсов что у него там все включено что все сертификаты всякой фотографиях проходит и он ее тот же pipeline авторизуют access control engine типа что да пускай и соответственно ты получаешь доступ по ssh или почти тебе или по степи и тут я понял что вообще у нас почти бинт курс то есть дано дэви у нас вообще абсолютно не beancurd но напротив у нас все с этим хорошо у нас есть только со что на лету самый жук скрипт у нас везде и прокси и единственное что плохо это включи да по которому вообще не было никакого тамра заключению авторизации никого не было то есть духи целовался этим и с ключом но дальше никакой авторизации вообще не было и у нас нет ни у нас не было менеджер девайсов то есть мы вообще не знали с какого устройства наши девелопера заходят через аж на наши сервера так что мы вообще не собирали винт абсолют мы не знали кто зашел когда почему и и зачем соответственно что вообще нужно для bento корпус для меня от крупа нужно вот эти вот все вещи это собственно прокси это какой-то движок который решает пускать вас доступ или нет так же вам нужно знать все о ваших девайсах это может быть такие система как mdma был девиз менеджмент например microsoft инчон мобайл iron там их тысячи этих систем сейчас то есть вам нужно знать все о ваших девайсов причем желательно google и не только они знают все вот о том в ток при пв тот момент когда вы заходите то есть обычным д.м. он тебе говорит что у тебя нет пока шифрование на ты вообще можешь зашифровать вот тебе нужно сделать иначе там попались его течёт не пройдет вот то менять курс гордиться что ты обязан иметь шифрованный диск вот в тот момент когда ты захочешь вопрос это большая разница или ты обязан иметь там последнюю версию операционной системы когда ты заходишь на продан и политики доступа то есть нужно нужен какой-то робот access control system которая будет разграничивать там что админы получают суда что не админы не получают суда или наоборот ты можешь дать суда кому то можешь не дать известно что вообще на рынке а я вот к мужчине просто пошел что на рынке google а не как обычно они такие типа что сделали все люди подходили вот как минимум там три штуки три сервиса они подходили именно после гугла а google также освежает ну можем только порадоваться за них в общем они сейчас активно выезжают на этот рынок у microsoft в их же active directory сервисе есть также вот есть там всякие скилов тигр это решил телепорт amazon вообще ничего нет интересно вот так же есть достаточно хорошо open source решением мы то есть сомнительное табличка вот видно что microsoft и google и не знаю вам видно что-то там да нормально должно быть что есть и soaz решение из хвост то есть вот решение тонну лазера не знаю как оно произносится zero короче она состоит она делает все то же самое что и скалы в тиват самого низа и если саш . ком соответствие давайте посмотрим чего и вообще есть гугла угла есть бренд корм решение которое называется который выглядит как джек лады за саша то есть сейчас вот способ прошлой неделе ты можешь сделать так чтобы у тебя g-класса саша работал только если у тебя только если у тебя менеджеры вайс то есть только если google знает про то там за chrome за диска лишь или нет также у них еще раз которых за циклов дадите тоже он он заработает париса айдан тетивы прокси это тот самый http прокси какого узла прокси но он умеет еще и проверять девайс знать откуда ты заходишь логировать все и в общем не давать доступ без вот этого контекста и вот контекста в полисе он by the palm даже не даст зайти в админку google а если у тебя не провели контекста такое заходишь с казахстаном тебе говорить о мусоре выйдет в какую страну в который все хорошо вот так выглядит интерфейс то есть это это их вот средства для получения контекста тебя но остается в chrome и там есть типа такой маленький агент он и рад хром грунтовый браузер он отправляет информацию в google и затем ты можно устраивать вот такие вот политики тут видно что можно заблокировать какие-то страны можно выбрать можно сделать так чтобы ты захотел только с меньше девайсам с там свежим свежий операционка и всем остальным у ажура есть forwarding прокси то же самое что и 17 прокси у ажура из конечно лакс с то же самое что и к текстовое поле с то есть он тебе говорит вот здесь тоже видно что ты должен быть там со свежим апдейтами всем стальным также у них плагин в mxt шо то же самое что и текла из наш интеграция с менеджментом чтобы там удобно собирать контекст мы же в свою сторону выбрали скилов тем решение оно там было низким причинам это счас он не привязан к облаку и он работает вообще везде в китае не только и в нем есть ртп как у мы тут нет разработчики на 150 от разработчиков нам очень важно чтобы мы могли заходить на винду все-таки g-класса саша это круто но мы в ажуре вот и а логин vmx должен появился только там типа месяц назад в некрасовском облаке соответственно в общем мы выбрались к лавке да мы пользуемся джесси там какая-то провайдером они там умеет вообще все нам и вогту и все что хочешь мы ставим на машины с на своей машины клиент он проверяет девайс там что у вас стоит пароль на вход что у вас зашифрован диск и ставим агент на сервер и чтобы работал ssh достаточно просто добавить в sage конфиг их каштаны в этот туза до может быть кто-то не заметил о чем вы там тоже что важно hd claude сашу тебя не будет работать у тебя не будут работать всякие там дата гриб и ansi был и все остальное а вот у этих ребят у них работают они были усы сашком тоже работают и у телепорта полон тоже работают то есть ты можешь просто обратимся был этого щас просто гримасе полстакана машины и провалимся на любую машину там хоть в китае хоть не важно потому что эти ребята как бы они проектируют open ssh твой машины через себя тоже там через сосны гостик на open из другой машины там всего на тех самых boring технологиях которые были там пять лет назад саша приносил вот просто с так скажем с проверка девайсов и ролл guest access control of соответственно как же мы делаем доступ к нашего там базовым сервером и окружением вот тут повторение этого слайда чтобы для закрепления что у нас есть девайсы и прокси в нашем случае прокси это бастионы и есть вот этот access control engine который собственно девы дает доступ и по поводу того как мы получаем доступ к вот того как мы получаем доступ к серверам мы пользуемся сейчас саша сертификатами вот то что я рассказывал раньше про sage ключем про то что там вы должны знать про сервера все сервера должны знать про вас что эти прикрытие ключи в принципе ты их один раз там сгенерировал и все их потому ротировать невозможно в общем мы пользуемся сертификатами все решения которые вот там были в списке они все тоже пользуются саша сертификатами где в любом случае нужен такой но вот это вот прокси он тебе выдают сертификат на две минуты который ограничен пайпе это все поддерживает опытный саша ки ади сертификата лакируется в на сервере на сервере в а услуг то есть ты знаешь конкретно на какой сервер когда и кто зашел потому что знаешь кому то выдал это сертификат и что самое интересное чтобы это работало тебе нужна одна строчка в жажде конфиг то есть сервером вообще ничего делать не надо там добавляет просто these keys вот и и все соответственно как работает и sage без эроса ключей работает достаточно просто ты отправляешь свой публичный ключ в access control engine он тебе возвращается этих cotonti выдает сертификат на две минуты сервер заранее отправляет свой публичный ключ и получает сертификат сервера затем когда уже ты заходишь прямо на сервер вы имеете сертификатами своими и и все и все работает соответственно на вот этом базисе ssh сертификатов у нас в принципе построены все ртп и вот только тебе не работает так у нас в общем все работает поверх этих сертификатов соответственно базы мы part for team точно также тем же самым уже скриптом но там есть всякие разные уже теперь крутые тулы например is a shuttle сейчас я попозже нём расскажу то есть жук scripts мы его записям скорее всего ну либо вы сами можете написать он элементарный просто он просто выкидывает там вот ту маску r2 server к вам на локальную на локальной api и вы просто им пользуетесь при этом вы знаете что собственно но за эти две минуты невозможно его украсть этот сертификат и вы знаете что все ваши аналитики что вообще все кто все кто угодно когда они подключаются через скрипт базе вы знаете все о них вообще абсолютно ртп работа немножко посложнее там есть прокси через локалхост тоже x 509 сертификат то есть там юзер ведет платформу платформа на генерируя сертификат поднимается прокси то есть зачем это все чтобы не открывать ртп порт наружу то есть тут тоже рапопорт не обязательно открывать соединение происходит тоже через ssh через этот порт 4 4 2 1 то есть тут тоже есть из-за саши ключи и саше смысле сертификаты и ртп сертификата как работает доступ к же тебе сервису все то же самое у вас есть один сервер прокси вы делаете request к прокси первый раз прокси идет в в движок авторизации джок авторизации проверяет нам ваш девайс откуда вы куда зачем почему и собственно прокси рует все что вы там хотите в менеджере графа нее где угодно соответственно мы написали тоже такой микро сервис сервис og который собственно по аннотации но сейчас мы делаем это просто холмам вот потом мы собираемся по аннотации типа ты его и сервис или ingress ты выставляешь аннотацию и у тебя автоматически генерируется и ты автоматически закрываешь твой ingress или твой сервис вот эти вот прокси который проверяет собственно твой контекст чтобы вытащить наружу безопасно наружу вытащить один какой-то сервис hd типичные для внутри корпоративного использования для тех у кого есть там google аккаунт или там не знаю опыта в или active directory вы можете просто добавить аннотацию все будет хорошо работать при этом этот и этот сервис будет работать в публичный интернет вообще у гугла ну как и в принципе наверно у нас все сервисы все сервера вообще всё торчит в интернет потому что но они не боятся ну что этот же access фабрик да этот прокси он этот сервис будет ждать подписаны и джордж который собственно выдает который собственно выдает максимум какие вообще проблемы есть с этим всем проблема на самом деле зафером потому что но поднять vpn сайта сайт и типа вот вам vpn вот хотите сделать еще хотите это просто а закрывать или там приоткрывать саша достаточно сложно соответственно доступ там каким же там с топазом примем бастионом и всем остальным мы по-прежнему делаем 4 руками туда сбиваем это реально тяжело то есть чтобы чуть обновить трудно достаточно это делается все не динамически совместно мы либо всегда буду прикручивать консул потом либо мы ну во первых есть опять же курсе дел по рт форвард как и сказал кудрин это будет чуть-чуть то есть это все то же самое что и дел по рт форвард и в принципе этот жуткий не нужен потому что ты всегда знаешь куда ты хочешь зайти поэтому если у тебя база там или сервиса комбинации то можно пар форму лица туда куб сидел под формат например в сочетании сажу русским active directory и конечно лакс а сам он вам гарантирует что во мне выдадут refresh токен если у вас нет контекста и снова google claude то же самое вы не можете курсе дел пользоваться с а какая если у вас нет если google не знает о вашем девайсе также есть штука который называется пассаж открывает sage тоннели из джейсон файлика не то есть это не я их держит постоянно типа демон это не наша там уже крипте к более надёжная туза бьет может написать и есть еще магическая штука когда называется ssh отл он прикидывает целую подсеть то есть представьте у вас есть там 16 потеть вклад провайдере у вас есть какой-то из бьянка руб решение типа netflix без или что-то еще и вы можете просто взять и прокинуть удаленную потеть через ssh к себе на к себе на компьютер вот ну как бы в ethernet попробуйте это реальная магия очень круто работает вот она в принципе решает но даже dns умеет боксировать вот то есть это такой vpn через ssh вот и из-за такой тулы наверно надо будет firewall все-таки настроить в этих или как-то бастионы переделывать потому что но это прямо всю жизнь и сама это же одна из больших проблем что это в принципе решает вопрос транспорта там da bass да например или до сервисов но юзер это мой склеили или где то еще или пробить и они все равно остаются с паролями без в факт арки все остального но тут из вариантов есть там всякий сторон где мых жуков болты или тому войска вели есть интеграция с этапом она правда за деньги только в общем вопрос из конечно с базами он не решается ну с другой стороны там тот же самый ldap он же не проверят ваш ваш второй фактор поэтому ты тоже считать это прям абсолютным решением мне кажется тоже нельзя и тоже очень болит от неподготовленных приложения например есть такая штука то развивается сервер когда вас уже много разработчиков вам выгоднее не покупать каждому там поводу идеи до купить сразу light серверы у вас там будет эти лицензии автоматически обновляться по длятся и все такое и это вообще боль потому что он не нужно постоянно если нужно постоянно держать поскольку у тебя нет так скажем сети да у тебя нет доверенность и тип ну что то все сети не доверены то но люди очень открывают sh соединение постоянно и не могут работать с идеи пока у них 0 там с райдером мышц шар программист пока у них пока у них нет вот этого лица лицензии а чтобы получить тебе нужно открыть сиденье в общем эта боль если бы в нем была какая-то авторизация в этом light сервере ли они сами вы его хостеле вот было бы гораздо удобнее то есть это или то что мы видели рыбе thank you монитор он просто ломает прокси он там как-то с хакерами плохо работает и общем у нас только с сексом с павликом получилось всё нормально запроектировать плюс не все приложения умеют world best access control такой который ты хочешь то есть графа на допустим она умеет читать ходор типы x там юзер е mail и пускать тебя вот именно по тем юзерам с этим кадром но этот кадр доверенный и в принципе группа нет и проблемам но группы допустим естесно тебе не даст то есть ты авторизацию внутри граф она все равно будешь там делать пробитые readonly то есть ты там ничего делать не можешь параметре прекрасно работает допустим в позади вот этих прокси но допустим или рт менеджер в котором все таки может что-то сделать вам социальные сети в которых тоже нет авторизации вот он не работает и таких приложений достаточно много то же самое киба на общем чтобы кибанова слабость как с контролем и вот эти вот две откорма подружить подружить нам нужно будет что-то что-то писать вот то есть и подготовлены приложение это тоже источник более и как бы самая не то что самая большая проблема но самое большое угроза вот этой всей системы это потеря как один шов и если мы посмотрим на экран то есть карт снайпер эта штука вы можете скачать на гитхабе и своим коллегам у своих коллег а тащить пароли если подмените там dns вот вот так вот прям даже с 2 факт аркой даже закаток и почему потому что до человек нажимает сайт google у него появляется окошечко он водит туда логин он оттуда логин вводим пароль вводим фактор q на самом деле да не аккаунт google и ком аккаунт google ком чет там new компьютер shop secure вот то есть это реально ну сам большая проблема если вы потеряете вашу сессию его конечно перепроверить постоянно она пройди допустим вы можете перепроверять счастью еще на каждый чих то есть google этому если ты заходишь на внутренний портал там в котором вы обмениваетесь фотографиями котиков у вас там второй фактор и сессию там редко спрашивают об ради работы что там на каждом щучьих у тебя заставляют там делать вещи ну и хорошая защита что случилось да и единственная хорошая защита от когда шел от потери кренделей это удвоив и до так называемой этой секрете ключи yubikey google сейчас выпускает их названием тайтон security key ведь то они еще есть сейчас рынок активно набирает обороты microsoft а это писался в фейсбуке собстна что это такое вы это работает в хроме и фаерфоксе это второй фактор не циферками а собственно токи нам причем этот токен он знает сайт по которому вы заходите в пока который у вас браузере то есть он знает что вот этот челлендж который генерируется в на девайсе точнее в браузере он подписывается и соответственно если там будет аккаунт google кому компьютер шоб он такой же подписанную идет в google и аккаунт . google . аккаунт google ком он собственно узнает о том что вы потому что вы идете не в аккаунт google ком настоящая там через какой-то fishing google год назад по моему уже год назад всех перевел на эти ключи и у них этот этот год не было ни одного утерянного аккаунта там сотрудниками всех сотрудников вот соответственно тоже будем закупать эти ключи для защиты наших аккаунтов начало для девелоперов и потом вообще для всей компании потому что кто знает что там можно сделать даже сейчас с аккаунтом в общем самая главная мысль которую я бы хотел всем донести том что доверять сетям нельзя вот особенно в п нам там который заходит через подключить через радиус или там через сертификат вот и собственно рецепт вент карпом который сделал который придумал google собственную не только что нужно контролировать пользователей до которых есть пароль и обязательно второй фактор ключ когда вы контролируете пользователей и устройство то что на устройстве в там full description firewall и все стороны включенном вы можете использовать шлюз для проверки этого всего и надежно защитить ваши серверы сервисы от злоумышленников я обещал логин пароль нашего вы можете прийти попытаться взломать на шпрот или что-нибудь еще вот все вопросы вот человек вопрос о сути алексею чайкиной теплым ну во-первых хотел бы сказать что сайту сайте пена это не так уж и сложно да только не нужно для этого mikrotik использовать второй момент почему было бы не поставили не купите обычную c-класса 90 не настройте это на ней потому что и сайту сайты клиентские пена не поднимается но в принципе даже мы жгли но я говорю мы смотрели на сыскался мы смотрели на fortinet в принципе но вообще объем вот этого на торг инжиниринга фаерволов особенно когда ты хочешь взять сделать в общем мне лично было трудно как бы мы вообще самцов то пишем давно мне очень интересно настраивать своего admin admin у вас есть зачем тогда да тогда понятно второй вопрос сокровища вообще ничего нет насосе только mikrotik как бы и все вот ну я понял да что в принципе вся суть beyond корпуса когда программист начинает сети настраивать собственно вопрос про второй про то что вот про пекина mikrotik опять же если у вас себе давать структура почему бы не поднять стандартную оснастку на видео и делать какие там тоже интересный вопрос у нас как бы опять же как и сказал да у нас тут над разработчики но у нас do that разработчики лет виндовые инфраструктуры нас нет домена зачем нас нас на серверах крутятся asp.net приложения и им домен в принципе это веб-приложение это даже там не какие-то корпоративное право же не и в которых ты заходишь там с виндовой авторизации да это просто вот в приложении со своей собственной там авторизация всем остальным домен там ну как бы под бизнес новым бизнесом требованием домен там не нужен и вообще у нас там у всех make практически на со всей компании make кроме вот тут от разработчиков которому тоже переходим на маке потому что сейчас есть dot net core который работает круз платформе на магии винду тоже умеет это же хорошо ладно спасибо ну то есть да есть журок active directory есть уже active directory domain services вот но он уже все ужасающей работал счастья бы но и да это все нужно нажать active directory то вот есть манжет active directory во жулина она просто ужасающе возвращение когда не пользуйтесь и это просто жесть ну может быть я никогда ну там чтобы чтобы допустим через нее зайти на виртуалку у тебя должен быть пароль не больше 16 символов там не делаем что там хаши и вот это все я начал посмотрел и понял что зима не сегодня точно и сегодня спасибо за доклад я дима сисадмин которую вопрос такой вы храните всех пользователей в гугле правильно то есть это ваша база данных пользователь сотрудников это корпоративная вот что вы делаете когда вам нужно предоставить доступ кому то не из компании то есть какой-то аутсорсер там еще какой чувак не знаю такой очень часто было прекрасный вопрос мы их читаем сотрудниками компании то есть вы заводите был главой учетку которую стоит там пять долларов но это 10 но зато мы уверены но посмотрите как какие у нас есть варианты я думал я думал об этом какие у нас варианты у нас есть варианты им пробить куют ядру да или там садить рядом или мы их можем считать за людей и дать ему четко но вот на кроссовки там уже больших компаний жизнь green бюджетом эти блюда g6 по аутсорсер и которые работают на вас у них тоже точно такие же там microsoft.com аккаунт и они ничем но как бы они просто да на контракте вот у нас сейчас мы делаем 3 тесты с людьми мы выдали google учетки они там конечно типа сегрегированные да у них там нет никаких там особых доступов не максимально там сегрегирован и не входят там некуда на правду них нет доступа естественно что есть робот access control но при этом да у них есть учетка они сидят с нами в слойке они заходят на серверах которые на которые у них есть доступ как раз такие вот ну текущие решение так бы мы им выдали в наш публичный ключ вообще я не будь этого все имели а текущие решения на позволяют их сегрегирован достаточно удачно при этом давать им но при этом знать о них все об их компьютерах там об их там в общем об этом контексте то что я рассказал а сколько у вас всего гугловских учетки если не секрет 343 180-ку шумную году possible for me тысяч до 380 вопрос скажите а вы карточные данные храните ох не оправится чего не слышали rs крс доллар эй-нет что просто как двухфакторная авторизация вы сказали что вы некий ключ у любых групп грейс пользуйте и при первом там не знаю заходе на фишинговый сайт это все утекает и печаль так вот ну просто есть ну говорит что типа google переходит 1 токены так называемые и так далее просто есть другие варианты там отпечаток пальца там не знаю может быть какой-то там генерится ключ со стороны и так далее просто то раз они довольно хорошо реализовали это наливных не легко поднимается и быстрого раса security всмысле который вот эти игроки ну ты эти циферки ты вот тебе показывают давайте ещё раз посмотрим вот я показываю вот эту штуку то вот как раз таки вот эти циферки они спасают тебе показывают это ты вбиваешь свой аккаунт те говорят виде циферки открыт снайпер он работает с этим он умеет он теплость и это то что вы планируете внедрить ну вас еще этого нету на выбор кино у нас есть так и но у нас есть и валите раз и секирой де циферки это называется т.п. тот time time нет там one time passwords они точно также пишутся то есть тебе показывают виде подцепили кивни запишешь она каждый раз разное они не повторяются никогда не ты сыпешь и шок прямо сейчас ты сессию можешь украсть они fish обильные мы можем попробовать вот прям сейчас скрыться из области в течение 30 секунд до смысле так это же прокси как снайпер это прокси ты делаешь вот такой сайт и он практикует тебя в google авторизацию или куда угодно вообще или вожу и ты показываешь в фишинга вам письме человеку вот этот логин да он выходит и в эти и за 30 секунд он их водят и все как бы ты у него украл все из не можешь делать все что хочешь и это прям работает как раз таки токен он от этого защищает потому что он знает что ты идешь аккаунт google ком и следующая версия токена она же будет проверять лсд лсд найди то есть он даже будет знать когда тебя какое-то государство или кто-то еще там корпоративно к эта сеть за за прокси равата войти л.с. то есть ты не самим гуглом общаешься через за тело завод с кем-то кто то есть посередине вот то есть тут тоже замочек url все верно вот прям вот creed снайпер ставьте развлекайтесь внутри сети кто там и он еще знаете что вот этот токен этот он имеет короче ты он видит что у тебя есть токен и он такой сразу же нажимает кнопочку типа ты виде циферки может или бык обхода есть то есть он понимает что у человека токен и сразу же его переключает на менее как бы надежную авторизацию вот и как бы люди которые типа знают они поймут что водителя циферки не надо вот нужно таким но при этом в гугле можно вообще запретить любые способы это фактор на авторизации кроме токены то есть то есть если как снайпер выйдет токены в этот запрет будет включен то но ты не сможет ничего запишите все еще вопросики а вот тут ещё вопрос есть все время живут но давайте выйдем говорим да"
}