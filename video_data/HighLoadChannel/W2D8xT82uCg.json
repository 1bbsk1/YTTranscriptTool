{
  "video_id": "W2D8xT82uCg",
  "channel": "HighLoadChannel",
  "title": "Тестовые стенды по запросу в условиях распиливания монолита / Дмитрий Скоков (REG.RU)",
  "views": 1362,
  "duration": 2574,
  "published": "2019-01-14T00:13:15-08:00",
  "text": "всем привет спасибо что пришли привет тем кто смотрит трансляцию меня зовут дмитрий скоков я уже игру наша команда занимается различными задачами в основном связанными с повышением качества жизни разработчиков чтобы они все улыбались и радовались среди них вся и сиди pipeline и мы занимаемся beat'em мы интегрируем внутренние сервисы инструменты среди прочих мы занимаемся инструментом который позволяет поднимать тестовые стенды по запросу и собственно сегодня я расскажу вам о подходах которые мы используем а проблемы с которой мы столкнулись и расскажу в целом историю как мы до этого дошли немного о компании игру это крупнейший в рунете аккредитованный регистратор доменных имен наш основной продукт это наш сайт также мы представляем около сотни различных услуг так или иначе связанных с поднятием вашего интернет-проекта это хостинг vps shared hosting различные панели цифры на экране итак мы эти компанию поэтому мы любим hyip мейнстрим все что современная но при этом немного проверенная временем есть отзывы кстати главное язык разработки у нас pearl так вот инструмент который существовал ранее он был красив удобен интерактивен у него был какой-никакой лапку и позволял отслеживать занятые ресурсы мог позволить вам сказать на какой стадии сейчас жизнь его цикла находится задача может быть кто-то уже знаешь что это за инструмент но вряд ли эта табличка вики все наши разработчики ходили в одну единую табличку и ручками писали там что они заняли определенный stand естественно за табличкой был нарезанный пул виртуалок заранее подготовленных и в целом все что вам нужно было это ssh и руки вы заходили сами поднимали себе на выделенный заняты обозначены виртуалке всю систему это было до немного долго ну и всех в основном все устраивало были более приоритетные задачи на тот момент поэтому можем отмотать примерно год вперед за этот год мы полюбили докер он нас начал спасать во всех местах где у нас были проблемы мы завернули наш монолит который состоял из фронтэнда как у всех engine со статикой backend перловый который отдает клиентам обслуживать запросы и 5 backend куда приходят наши партнеры у нас самописная перловая очередь для каша мы используем редис и для перманентного и не для перманентного сессионного база данных меркана почтовые сервера для рассылок массовых которые вы наверно все очень любите бэк-офис это внутренний инструмент который позволяет нашим клиентским службам техподдержки управлять услугами клиентов решать их проблемы видеть мониторить тоже перловый собственно за прошедший год пока мы все заворачивали в докер разработчики перечисли пробегали в чате кричали что-то про трески спрашивали кто занял когда освободит но кричали не очень громко чтобы мы сорвались с места и побежали исправлять это все но катализатором стала отжили зация компании мы начали внедрять скрам у нас начал увеличиваться количество людей пол виртуалок и без того небольшой его стала прям катастрофически не хватать появились новые кейсы использования для скрам команд собственно скажем команды использовались для того чтобы распиливать наш прекрасный монолит тут мы не стали чем-то удивительным мы взяли и ядро оставили его как есть посчитали что ри факторы чего будет несколько тысяч человека лет и решили что мы будем отпиливать по кусочкам искрам команды будут писать сторонние сервисы и как-то их труд ком женить собственно проблемы которые мы решали частично мы понимали в нашей команде к разработчикам и к сожалению забыли сходить сразу но проблемы мы решали так как мы видели как должно быть потом мы конечно в процессе сходили к разработчикам и кое-как поняли что мы в целом все решили но буквально за 2 дня до конференции я сделал рассылку на всех разработчиков почте и спросил ребята а что мы собственно сделали это было процесса ради процесса или все-таки у вас были какие-то более которые мы сняли и в ответ мне пришло много писем но одно из них прям идеально иллюстрируют какие проблемы у нас были и что мы собственно решили у нас было четыре небольшие проблемы маленькие тестовый сервер а всегда были заняты не было момента когда ты пришел захотел тестовый стенд и взял его спокойно нет они всегда были сломаны модули пирло устаревший дам базы ты накатил не туре по у тебя кончилось место у них всегда не хватит в одесской полетим всегда мы сталкивались с тем что когда тебе нужен тестовый стенд ты приходишь и у тебя сервис не стартует потому что убивает сумке или раму достигая пределы и собственно для решения первых трех проблем всегда нужен был программист вместо того чтобы заниматься своей непосредственной работой программировать он ходил и чинил это все либо дергал отмена говорил поднимем не виртуалку рашид что-нибудь это затягивалась на несколько дней явно надо было что-то решать ну мы решали не потому что мы решали эти четыре более этом ужасно узнали постфактум но где-то внутри мы чувствовали что что-то нужно менять и так кейсов которые которым кейсы для которых у нас используется тестовые стенды в компании 1 стенд это ручное тестирование тестировщики часто в дополнение к про бежавшим функциональным тестом написанному для selenium а нужно еще что-то потыкать проверить так ли это работает там или цвета к . мы используем их как сервер разработки так как мы растём растут потребляемые ресурсы наших сервисов и не все вновь пришедшие разработчики могут позволить себе на комнату старом ноутбуке сразу все поднять поэтому какое-то время они могут использовать тестовые стенды для разработки поступает задача они поднимают заказывать все те строй стенд и идут работают того же сами решать как скажем команды для тестовых на тестовых стендах проводят дыма в кажется каждого спринта не поднимают to school с тем что они напилили и демонстрирует свой продукт и естественно воспроизводим баги баги с prada которые не воспроизводятся на локальном окружении воспроизводится на тестовых стендов и мы его используем как стейдж мы накатываем в нем миграции смотрим сколько времени это занимает насколько мы считаем базу либо просто проверяем как работает вроде тот или иной функционал у нас ухода есть несколько режимов процесс the edge of local и докер по моему можно включить тот иски режим который нужно и проверять собственно исходя из кейсов мы решили что нам нужно использовать следующий критерий для инструменты которые мы сделаем внедрим и будем использовать нам нужен ssh мы пытались убедить разработчиков что им не нужен ssh входить внутрь плохо просто поднимите ходить и снаружи смотрите что вы сделали не это так не работает мы сдались довольно быстро поэтому ssh приоритетней критерий скорость развертывания так как до этого разработчики долго несколько лет терпели мы решили наверстать скоростью развертывания струн стендов тем более это время которые не упустили нам нужно горизонтальное масштабирование как я уже говорил мы довольно быстро растем и нам необходимо безболезненный довольно быстро добавлять новые ноты куда можно развернуть тестовые стенды нам нужен сулит на основе ресурсов потому что тск не всегда диска может занимать много ресурсов мы не хотел убить какую-то определенную ноту поэтому нам нужно смотреть и более-менее равномерно распределять мы хотим чтобы тоски между собой шарили ресурсы потому что в какой то момент времени вы можете забыть о том что вас поднят отрезка и не использовать ресурсы будут заняты нам нужно разграничение прав как я уже сказал мы используем его для staged там продавая база довольно сенситив данные нам не хочется давать доступ к ним всем подряд мы хотим знать кто сейчас имеет доступ к ним естественно на саму правовую базу доступа у разрабов нету по моему и нам необходимо просто то заказа потому что если раньше для всего нам нужны были программисты то сейчас в цикле жизненном задачи есть разные места где программист уже не нужен тестировщик должен уметь сам себе поднять тестовый стенд верстальщик не особо разбираюсь что там в перле должен тоже нажать одну волшебную кнопку и получить магию в том числе у нас этим занимаются и пьем и люди с улицы кто угодно может тебе заказать собственно бесполезной фичи которые нам не нужны это отказоустойчивость мы не следим за миграцией тесак между нодами нам проще и быстрее поднять новую если старая сломалась по каким-то причинам собственно да среди критериев скорости развертывания у нас было разворачивать тестовый стенд не более чем за пять минут в том числе если вы используете продала базу нам не нужно было сироп к трафика то резко поднимается в единственном экземпляре не сканируется поэтому бесполезно of the discovery что у нас водит варианты которые мы естественно попробовали прежде чем что-то выбрать ранчо раньше он используется для продавая регистрации естественно мы решили попытаться его прячете куда-то и сюда но не то оказался довольно оверкиль нам плюс иногда непредсказуемым именно в части прокиды вание ssh и внутрь а как я говорил я довольно приоритетный был критерий поэтому rancher заварки износится нет дженкинсон тёплый пол виртуалок по сути та же табличка вики только с автоматизацией небольшое снятие боли и экономия времени этот вариант прожила с примерно два месяца пока мы собирались опрашивали кого это сами придумывали как это будет работать вполне жизнеспособные вариант но нет шаринга ресурсов между полками поэтому заменил дженкинса символы опыт не было до сорта предыдущий вариант в том числе иногда упирался по ресурсам поэтому мы в образовательных целях попробовали еще и на балу чтобы мы могли можно быстро молодежно управлять ресурсами поднятой виртуалке быстро их менять не понравилось хороший возможный вариант но опять же sharing ресурсов между тестами не было ну и всеми любимых губернатор да все наверняка ждали этот вариант как как вы помните на предыдущем слайде все бесполезные фича неровно про кубер на это у нас нет таких объемов у нас нет необходимости как ты вас коллировать у нас в общем еще один о варки льный вариант от которого мы естесно отказались плюс очень высокий порог вхождения даже для нас а использовать где-то кроме этой задачи у нас в тот момент не было необходимости поэтому тоже отказались естественно мы решили делать качество начали с концепта концепт довольно простой скорость приоритет в том числе и у компании номер один поэтому скорость можно оправдать что угодно любые деньги затраты если вы это делаете быстро поэтому умерла fs как концепция нам очень импонировал учитывая что мы любим докер неизменяемый слой поверх которого делается слой изменяемый дает невероятный прирост скорости вместо того чтобы качать сразу все нам нужно простое пиарь который мы будем дергать с разных мест и нам нужно экономить ресурсы у нас полный социализм у каждой доски есть владелец и у каждый каждый владелец может иметь только одну т.с. как только он приходит хочет заказать еще одно старое сносится выкатывается новая возможно жестокий вариант но во-первых он действительно позволяет экономить железо повышает утилизацию во вторых вполне работоспособный никому это не нужно любой человек может поднять поэтому если разработчик заднего bts круто тестировщику можно попросить из другой команды стек любимый докер конечно мы все завернули сразу в него python 3 это второй основной язык разработки да не бойтесь 1 не панацея ddns для того чтобы мы могли держать записи о том как обращаться как с кем и собственно не держать их на центральных и на серверах где нашей инфраструктуры чтобы быстро могли туда без админов что-то писать ctfs который заменил нам о lfs потому что z fsm мы работали хорошо глубоко его понимали и знали в сапорте он был проще поэтому его взяли pipeworks прекрасно утилита если вы не используете попробуйте нужно для того чтобы управлять сетью изначально была в контейнерах сейчас докер тоже отлично дружит со всем мы позади spells которым мы храним всякие метаданные сервиса смешав это все в кучу потрясти две недели и мы получаем сервису опять же не похож на вики но уже авто генерируемый это веб морда которая показывает владельца айдишник то я скин айдишник завязано практически все имена доступа вас с aj а печники владелец моды на котором это все поднята умеет ли это тск в полную базу или нет центральный образ в принципе для тестового стенда можно использовать любой докер-образ но у нас есть сама собранный большой очень большой образ внутри которого есть куча других образов адрес по которым можно достучаться внутренняя печник и время жизни когда умрет собственно время жизни сделано для того чтобы мы не менеджеры кто забыл удалить свою леталку тск а она автоматически сносилась давайте посмотрим что под пока по рассмотрим под капотом и это небольшая отсылка к тому что мы используем докер в докере да мы немного любимых вращаться по сути мы в итоге запираем разработчиков контейнере в котором подняты еще много контейнеров а если вам нужно что-то заказать вы приходите дергаете и 5 обычным крылом все просто есть имя анера есть время жизни и есть триггер который говорит вам нужна полная база или нет вы дергаете пешку а пешка идет и сервис на нику одну из нот ноты которые умеют держать полную базу имея специальный так fulda логичный так если вы заказали полную базу the service идет на конкретную ноду которая является своего рода она бесконечна в стремя скачивают все обновления с мастера и кладёт их в папку что понятно на ноги происходит следующее в папку в которой складывается майской базы данных там же рядом лежат папка в котором хранятся все репы они обновляются ежедневно чтобы опять же сократить время до чекаута там же хранится в арле брокер чтобы пробрасывать его внутри контейнера собственно pipeworks стартует виртуальный интерфейс сто три контейнера и цепляет а во внутрь его бриджу говорит что у вас теперь такой имя и собственно старту ица непосредственно ваш отец к после этого естественно сервис edi аспиды с делает записи о том что определенном айпишник у выдан такая-то запись делает записи в подвеске пользователь который дергал карл получает обратно идиш ник и apes ником в принципе не очень дружелюбно для каких спеллов или не очень технических людей поэтому все это мы вернули дженкинс в дженкинс и у нас много schedule отца это в принципе такой большой крон или хранилища кнопок для того чтобы что то сделать любому человеку поэтому вы приходите в дженкинс выбираете сервисы на экране сейчас dagger compass and в котором у нас есть для каждого сервиса который пишется на слайде монолита у нас было их 5 сми и змей память собственно сейчас сервисов порядка 25 для каждого из них есть key value который единицы 0 true force когда говорит нужно стартовать этот сервис или сейчас вы хотите поработать исключительно просто тремя отдельными руками вы вбиваете репы и нужные ветки у нас языки не компилируемый поэтому репы пробрасываю ца внутрь контейнера и чика учиться и собственно последние параметры вы говорит через какое время хотите чтобы умерла . и нужно ли вам полный обазом нажимаете заветную волшебную кнопку да да конечно не настолько большая красная и без настроек но работает практически как волшебная вы так вы получаете нотификацию matter most в чат где у вас есть адрес по которому вы пойдете в ssh есть адрес по которым вы можете зайти снаружи в скобках тут видно есть напоминалка о том как достучаться до любого вашего сервиса если команда с кровавая написала сервис пять минут назад то она у него тоже может поднять в тиски engine xi есть мапо которая по имени контейнеры имени сервиса прокси ru этого вымя супер сервис edi тоски и специальная зона здесь немного не показательное время 7 минут и 4 секунды заняла сборка потому что здесь заказывал еще статика текущая наша боль это в пак и сборка компиляция статике если вы не заказывайте компиляцию вы не верстальщик допустим вам не нужна самая последняя версия то это снимает сразу три минуты времени и вы получаете намного быстрее потому что вас при компиляция из мастер об откачивается собственно выводы которые мы из этого всего сделали не бойтесь отказываться от ненужного тяжело было перебороть себя и и решить что отказоустойчивость нам не нужно нам было тяжело админом было тяжело админа внутри нас было тяжело мы смирились в итоге это никого не убивает поговорите с разработчиками обоях если вы не разработчик придти домой после конференции поговорите с ними у вас явно есть какие-то более если вы разработчик расскажите о своих болях не стесняйтесь люди в соседней команде за стеной могут просто не знать что что-то болит и у вас это может болеть 20 лет пока кто-то не придет волшебное не скажет ребята давайте исправлять описать свое часто проще быстрее чем делать франкенштейна и закон source а у нас заняло написание две недели вне основное время рабочие так что в целом мы управились быстро найдите какого нет разработчика если вы не разработчик попросите вам помочь либо пишите сами да еще забавный кейс учитывая что мы сделали время жизни тоски которые умирают это случайно увеличилась скорость разработки теперь чтобы пройти этап да такое опосредованно теперь когда капеллу или какому-то участнику определенного этапа южного цикла приходят и говорят чувак через три дня через три дня чистая часа тск все умрет он бросает все дела он все знают что можно ее заказать и через пять минут то же самое получится но нет через три часа умрет поэтому он бросает все дела и идет смотрит что там получилось пишут фидбэк и все таким образом этап который мог длиться день-два длится ровно момент пока живет тск так что это тоже не больно и может быть даже каким-то образом поможет вам на основе разговоры с разработчиками с которой мы теперь общаемся постоянно не так часто как могло бы быть но да у нас есть туду мы собираемся делать закреплением нтс потому что в основном с храмом нужно чтобы они каждый спринт приходили в конце на дому и запускали определенный адрес они забывают посмотреть на айдишник какой сейчас у них тоску кто-то перезапустит и мы все-таки планируем перейти на губернатор но не то чтобы это прям горит в основном это вызвано тем что наш любимый rancher апдейтер страна вторую версию а там каберне тасс нам так или иначе придется разбираться с ним поэтому попробуем и здесь в руку нам пригодится нет оставим все как есть и да у нас в планах максимально изоляция из сервисов потому что все новые продукты которые пилятся скрам командами они иногда знать не хотят о том что у нас вообще что-то существует рядом они хотят точку входа которые они будут дергать и все и поднимать исключительно то что им нужно больше нечего поэтому мы пока в процессе придумывания как сделать эту методику еще как-то объединить чтобы во время старта у нас пробивалась по нужным репом собиралась это в кучу и запускался только нужные сервисы спасибо вам что пришли спасибо что смотрели я готов ответить на ваши вопросы если они есть я могу про фасилитировать у меня есть три майки который я раздам тем кто задает вопросы а еще к ним бонусом прилагается сертификат на три месяца в ps а по-моему и домен в ru и рф ну что продаем той подарю да вот я на всякий случай повторю для трансляции желе или я что мы не перешли в свое время на cabernet с нет нежели как я говорил скорость у нас приоритет в том числе внутри компании поэтому пока бы мы переходили на кубе рн и тасс мы бы потратили не знаю полгода год разработчики в это время все еще страдали мне тяжко смотреть на плачущих разработчиков сейчас мы потратим это время уже имея готовый сервис до закономерный вопрос я вы ожидал на самом деле не знаю там есть контакты напишите мне или в telegram или в почту если мы запланируем зал point source там есть немного внутреннего нашего я думаю не сложно будет если она вам нужна тобой мы можем микрофона разносить а давай как мы едем в прод это наверное тема отдельного доклада как мы едем на парад ну двух словах в двух словах у нас ежечасно собираются репы собирается релиз релизу у нас происходит ежедневно большие минорные делают сами разработчики пуша прямо в рот и у них есть еще одна большая кнопка за рестарты сервиса каждый час собирается сборка они гоняются юнит-тесты сборка делается из мастера это основная ветка разработки куда обливается все фича ветки из продав сливается она вместе чтобы избежать меж конфликтов в будущем пони прогоняются юниты пони прогоняются функциональные selenium и тесты компиляции и тесты документации после этого если тест успешно у нас нельзя чтобы упал хотя бы один тест нажимается еще одна волшебная кнопка которая собирает все образы я говорю что у нас в планах больше изоляция сервисов сейчас у нас это в ранчо все новые сервисы это отдельный стак там что только 20 их и во время рестарта не все рестарта c так как у нас green blu нам не страшно нам не больно то есть у нас есть переключение не сказав если что-то не поднялась на мне важно поэтому при нажатии кнопки собираются образы но кировские дергается ранчо и говорит качай новые образы запуская они запускаются в соседнем стеки место у нас грим то он запускает blu ждет half чака если все отлично переключаются на верху х прок все трафик льется на новый инстанции по это если вкратце происходит это как и в большой выкатки так и в маленькой у нас всегда ветка прот катятся в пруд понял спасибо да вот там всего за год нормально а вопрос такой картинку со структурой там докеры сериала а вот эти ноты это стандарт докер я правильно понимаю что это отдельный сервер as a standalone докеры да это не только ubuntu докер игре по round robin раскидываются между ними какой отрезка будет никакой на текущий момент мы смотрим загрузку я пытаюсь помню какую долю мы смотрим загрузку попросту ресурсам и в зависимости от того на какой ноги их меньше туда поля им но я продаю что несколько тестов можно на одной ноте жить да там ноты они довольно большие они держат 1 что-то около 5 7 3 сок получается что sharing у вас все равно в рамках одной надо только между нодами даже линга не по пляжу нету сил у нас такой тоже устраивает пока может быть мы потом губернатора спасибо спасибо давайте вот рядом чтобы микрофон далеко не уходил да я вот у вас там далеко увидел вы сюда здесь спасибо за доклад по скажите вы сказали что используйте доки в докере да а это настоящая дочь в докере или используется через про брошенные соки нативный не не прям самом деле шные там wrapper ну собственно стандартный wrapper для докера которые иным спаис юзают и запускается с привилегированным режимом он является короче wrapper поверх внутреннего докер не позволяет вам находить видеть другие виртуалке только своим но это на гитхабе лежит дент он юзает приобрело и мы его тоже взяли был понятно посему вот там вот в конце зала спасибо за доклад вопрос такой если разработчикам нужен новый софт какой-то как это решается это первый вопрос и второй вопрос вы говорили что можно заказать full базу то есть получается что разработчик локально получает данный пользователь из боевого правильно первая часть вопроса если ему нужен новый какой-то софт тонного свой контейнер засовывает или делает сайт и контейнер своего сервиса и собственно говорит rancher у что можно не rancher упростить и он описывает свои сервисы если мужчин там манго в данный момент времени он говорит я использую манга контейнер и он поднимется когда он дёрнет песком она все выключается включая сервис и вот это описание сервисов позволит понять что нужно еще и манга которая должна быть соединена с его контейнером ну как в compose он в ком позам собственно описывать от и второе до разработчик получают данным но он во первых это делать не локально на сервере во-вторых мы точно знаем где он живет нет мы знаем кто получает эти данные то есть у нас нет мы не пускаем всех у нас есть определенный список подтвержденный тем вредом что это нужно для какой-то задачи доступа выдаем мы там если видно в процессе заказа есть возле галки надпись что выдается только при одобрении тимлида и пишите на почту насчет софта я немножко еще уточню то есть я имею ввиду что разработчику там на perlen там иначе чем то еще пишет ему например какой то новый модуль понадобился или новые конфиге то есть он создает вот эту леску на пару часов и он сам выкачивает какие-то модули устанавливают их пишет конфиги потом следующий разработчика будет с этим работать смотрите если нужен новый модуль то у нас есть в пять лет уменьшится секунд файлам и все зависимости туда прикидываются у нас есть специальный мейк который пробегается по типам файлов и докачиваем то чего не хватает то есть вас ветки есть засыпан файлы вы добавили модуль во время старта накатываются миграции в том числе на урезанную версию miss kelly и накатываются новые модели если вам нужно что-то там поставить внутрь контейнера в треске вас sudo apt-get вперед спасибо пожалуйста вот посередине зала здравствуй спасибо за доклад расскажите вы как-то борки с паразитной на нагрузкой для тестовой среды от других сред современно запущены скажем 4 там не знаю один что-то делает накручены как о тестировании другой в этот момент на момент тоже самое и общая производительность скромно то контейнеров достаточно слабенькая становится так как у нас как раз да тут я немного упустил такой проблемы в основном могут опираться и abs и потому что полная база если в этом они пытаетесь что-то сделать то начинают жрать и опцию других с ней борятся практически все сервисы с запускается сауна и сама найсом это позволяет не вылазить им не сильно мешать остальным у нас нет как такового нагрузочного тестирования то есть мы не делаем синтетические тесты сколько рпс of мы выдержим поэтому настолько паразитные наверное не возникают по крайней мере ко мне еще никто не приходил не говорил что тск не вывозят спасибо вот там рядышком было спасибо вы ведь сказали что одна тоска дается одному человеку дает один человек может только одну получить может ли он его поднять по времени если нет то есть три часа либо новая да и сколько занимает регрессию сколько регрессия тесты все тесты про на есть все наши тесты занимают фидбэк вы получаете за 20 минут у нас юниты интеграционное они в общем они не то чтобы хрестоматийные они они сразу и те и другие как попало они там тасс кейсов что-то около 70000 и они про гоняются за 20 минут тесты компиляции довольно тяжелый на каждый модуль прогоняются за 14 минут и функциональные тоже в районе 17 ну в общем через 20 21 минуту вы получаете фидбэк в том числе у нас есть такие же тесты которые прогоняются покажут по каждому и мэру спасибо за доклад у меня такой вопрос у вас отрезке раскатываются и содержимое тесак из китайской кого-то или из имиджу же по сути дженкинс дергает очки анти был который прогоняется смотрели поднимается базовый образ тоски виртуалка только допплер в ней уже есть образы всех сервисов которые были на момент утро этого дня они ежедневно обновляются и пуляться если вы написали это пять минут назад и указали что вас новый сервис он тоже притянется если вы сказали включить вашу репо вы тоже дженкинс и можете указать то есть там список мы не проверяем что он жестко привязан вы можете нажать следующую строку и вписать новую репку она тоже выкачивается спасибо большое тут надо сильно повезло с тем что мы интерпретируем и языки мы можем просто бросать внутрь головы да здравствуйте всего заклад у меня вопрос по базе я правильно понимаю что у вас в образе лежит какой-то дам и вы его разворачиваете на каждую машинку смотрите у нас есть два дампа есть дамп разработчики аналогичного немного локальную машину не хотите себе поиметь 800 гигов сенситив данных тем более поэтому есть ноты на которых разработ который выступает сливом для мастера для просьба за они постоянно ее реплицируют если вы заказываете тоску с этой полной базы делается snapshot в этот момент и он пробрасываем внутрь миску или и вы работаете с полной базы можете дропать что хотите то и делаете ну там наверное дропать и заново накатывает будет сильно шатать из-за разницы в snapshot их по сути вы никому ничего не ничем не мешаете если у вас не полная база то у нас тоже есть дамп который утром уже скачался ежедневный даосский дам который выгребает какие-то нужные для разработки вещи из пруда но делает ее меньше она весит там 5 гигов в итоге развернутая и когда вы поднимаете треску с разработчика я базе да он просто поднимает эту этот контейнер сюжет можете затянуть есть команда которая помогает вам притянуть свежий дам если в этом заказали на три дня . а если мне нужны изменения вот из моей задачи как разработчики сделал то есть и их руках мужчины которую правильно еще раз если он я вот структуру базы поменялось меня например и она не автоматом накатывается и руками делают у нас опять же есть инструмент для накатывания миграции во время выкатки большой вы просто пишете миграцию в репу а инструмент говорит у нас есть вот такие то изменения нужно накатить не нужно есть что то что мы там какие-то heavy миграции миграции на которую я смотрю на сколько не будут что-то шатать если не прям сильно что-то будут реплику ломать или что то еще я еще и админов зову а так вовремя выкатки они приходят вы просто пишете миграцию обычная шкель то мальте таблицу и во время выкатки оно нахуй уходит туда понятно спасибо за версту вот там между раз благодарим спасибо за доклад скажите пожалуйста вопрос немного сбоку какие конкретно плюсы опции сетов с используйте по и подобный структуре и и как он у вас взаимодействует если взаимодействует с докер только не на уровне воли move вообще чисто для snapshot of простое понятно легко поддерживаемое пол не разваливался нет вырву один раз развалился пул мы там с чем-то накосячили но вот за время существования это месяцев 8 наверное вот это единственная проблема а так используется исключительно того чтобы сделать снапшоты у нас есть пул он с него просто снапшоты прокидывает большими для чего закодируем на только для вольного да он делает снапшоты пробрасывать внутрь до низа я возьму обычный до хсс у вас скоро время жизни вот этих тестовых сред она в часах измеряется до максимальный срок жизни три дня то есть бывает кисть когда тестера не нужно дольше жить вот в этой тоски в этих данных возможно мы тоталитаризм официальный детали туризм на самом деле когда вы тестируете больше трех дней наверное что-то у вас идет не так где-то затык поэтому нет смысла держать тоску в ожидании когда кто-то освободиться убейте поднимите и заново 5 минут уж подождете вы внутренне держите каких-то там суровых изменений обычно когда вам нужно тестировать у вас все это есть в репе ok заставьте себя хорошо качни а среднее время жизни какой вот по больнице среднем мы на самом деле не замеряли в целом в пределах суток да еще у нас все с полной базы не могут жить больше дня в конце каждого дня full dp все сносятся потому что вот эти снапшоты долгоживущие начинают из-за разницы между основным и snapshot там данными начинают прям сильной жаль диски понятно спасибо большое кто-нибудь еще ладно давайте я выберу 3 ребят вот вы задавали про базы данных вам а тут кстати да косяк вам придется задавать вопросы и быть определенного размера у вас наверное только если нелька то вам не повезло вы можете выбрать на самом деле любую или давайте вас сертификат любую мойку уважаемые слушатели пожалуйста не забываем голосовать на выходе это очень важно вы как генератор больших в количество вопросов да и с буковками можно с буковками так и как и кто-то еще был кто мне понравилось он ее забыл пока отвечал поэтому давайте выберем вот то я помню отвечал извините если я про теплее отдельно я могу рассказать в кулуарах спасибо что пришли в отличная публика"
}