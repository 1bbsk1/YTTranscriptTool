{
  "video_id": "cfsICOzt6Do",
  "channel": "HighLoadChannel",
  "title": "Мал, да удал. Анбоксинг микро-виртуалки Amazon Firecracker / Василий Пантюхин (Amazon Web Services)",
  "views": 8997,
  "duration": 3024,
  "published": "2019-05-07T13:24:38-07:00",
  "text": "спасибо день коллеги еще раз василия пантюхин архитектор amazon ну и поговорим на этой сессии affair крекеры давайте сразу от печки начнем танцевать мал да удал ну о чем я буду говорить что то наверное маленькая такую и легковесная ну прям классное и мощная вот но хочется даже глубже копнуть вот мал да удал это какой-то вообще конфликта 26 все презентации должны начинаться с конфликта меня тоже здесь есть конфликт из них некое противоречие да то есть противоречие чего то с чем то вообще у люди существа достаточно противоречивые то есть и даже много людей не нужно 1 хватает чтобы он как просыпаясь думал блин поспать или вставать до или написать статью на хабр на выходные жена хочет чтоб ты пропылесосил исходил ботинки сына купил вот но и то что мы делаем на самом деле тоже полно каких-то противоречий и собственно публично облака который сделано тоже людьми они там достаточно много таких природных каких-то свойств которым нам нужно понять как жить как как с ними бороться потому что они друг другу каким-то образом конфликтуют и одна из вещей таких природных вот прям фундаментальных особенностей публичных облаков это мульти tennant ность вот не хочу переводить это слово потому что кто-то предлагает мульти аренду нас я не знаю вот как-то мне не нравится многопользовательское окружение тоже не отражает что такое мульти tennant ность на всякий случай скажу это когда у вас разные workload и разные аккаунты разные пользователи живут на одном и том же на одной и той же инфраструктуре делят эту как-то инфраструктурами же с собой ничего друг о друге не знают и на самом деле вот сделать это сложно а еще сложнее когда мы говорим о публичных облаках еще одно свойство природно это хай лоу и поверьте мне в случае амазона это такой настоящий холода здесь вот здесь вот картинка есть я ее за скриншоте с одного из это реальные данные вот что по осям за какое время в каком регионе я не скажу вот но миллионы каких-то попугая и просто поверьте да это и полностью вот соответствие тому что я буду говорить это вот об одной из систем которой я сегодня буду говорить миллионы функции миллионы запросов в секунду это прямо настоящий холод и что у нас получается получается что опять противоречия нам с одной стороны нужно как то вот изолировать максимально держать все в наших пользователей на аккаунт и которые они используют workload и максимально изолирована с другой стороны нам нужно им обеспечивать должный уровень производительности желательно чтобы он был вот прям классный собственно как это делать ну давайте опять начнем рассуждать от таких каких-то больших кусков да есть существует настоящий момент две основные технологии то есть это виртуальные машины и контейнеры и у той и у другой технология свои плюсы и минусы главный минус контейнеров давайте лучше из виртуала главный минус виртуальных машин в том что они грузится долго то есть вот если вы запускали виртуальной машины там в каких-то кладут провайдеров вы знаете но это ну это хорошо пускай будет десятки секунд а то минуты а то прям вот совсем долго почему ну если этого причины потому что как бы для того чтобы загрузиться много что нужно сделать виртуальной машине зато у нее есть другое классное свойства виртуалок они прямо железобетонные изолируют нашего клоуны при этом в собой точек зрения то есть с точки зрения безопасности изоляция а еще нам нужно изоляция с точки зрения ресурсов потому что уж если ты заказал себе этом 8 гигов рамы до памяти то это память должна быть твоя никто не должен претендовать на память которую ты заплатил их ожидаешь у себя увидеть другой стороны у нас контейнеры и получается что ситуация это наоборот у нас контейнеры грузятся быстро буквально там может быть секунды там вообще может быть мгновенно они легковесные они действительно потому что они грузятся быстро мы можем их классно быстро масштабировать горизонтально но есть одна проблема но никак есть одна особенность и они утверждают что это проблема но если одна особенность которой мы к сожалению жить не можем как публичный клауд провайдер она заключается в том что у нас у контейнеров есть жареный керна у нас ядро она разделяется между всеми контейнеры которые его используют вот вы скажете ты сейчас будешь ругать контейнер и потому что они небезопасны нет я такое не скажу почему потому что они безопасны и потому что если руки у вас правильно растут вы умеете варить у вас все будет хорошо несмотря на то что даже до существуют какие-то уязвимости проблемы в другом даже если бы не было вот на текущий момент мы имеем полностью безопасное решение на контейнерах теоретически в будущем это не исключает сожалению возможности что кто-нибудь найдет способ и эту изоляцию пробьет и у вас один workload будет видеть другой workload один пользователь мульти tennant увидит другого tennant а поэтому мы себе позволить не можем потому что это противоречит просто сути публичным облака и получается что он нам нужно ну вот как-то с этим жить и сам парк стоит способ с этим жить это просто взять все самое лучшее у мамы виртуальной машины у папы контейнера все это дело скрестить получить некое конвергентные решение ну с которым как три жить дальше мы это и сделали собственным и мало того что сделали мы это решение которое называется fair крекер как вы уже наверное догадались мы его уже используем в продукте vi поэтому так настоящим продукте we тот самый холова то те самые критически важные для нас сервисы это в частности лямда это сервер лес функции и фар gate это сервер лес контейнеры и вот я как раз сегодня расскажу о том чуть-чуть приоткрою вообще amazon не очень любят говорить как там все под капотом работает ноут сегодня мы немножко при откроем вот эту вот тайну и расскажем как нам в этом помог как нам фар cracked помог улучшить нашу работу наших сервисов смотрителям да это сервис сервис функций ваша задача взять какую-то функцию написанное не знаю на питоне положим кинуть ее куда-то и она волшебным образом исполнится и вы получите результат ну как бы вот такой смысл так она работает как лямды работали до fair крекером мир до fair крекер мир после fair крекера работала это очень как это правильно но зря потому что нам очень важно нам действительно важно гарантировать изоляцию work лордов и поэтому для каждого аккаунта который был который работал в амазоне мы выделяли отдельные и ситу инстанции ситу это напоминаю это виртуальной машины наши да и вот представьте себе мы уделяем виртуальную машину которую потребляет ресурсы и штук как бы живет вы хотите запустить линду который выполняется упускай будет 200 миллисекунд ну нормально и лямда запускаете вы ее ну предположим там не знаешь фантазирую раз десять минут чего не проверяете там живой неживое какой не сервис и получается что у вас машина живет постоянно а у these утилизируется на протяжении часа там буквально несколько секунд то есть у нас есть большая проблема с наши миллиардами это утилизация то есть вот немножко по-другому перерисованная картинка еще раз эккаунт и которые шарят разделяет между собой собственно железо и часть гипервизора том что такого гипервизор это отдельное таскаете вопрос как трактовать этот термин а все что выше выделяется пот эккаунт то есть еще раз говорю это бешено не не выгодно с точки зрения утилизация ресурсов что же делать-то а собственно для этого и придумали fair крекер вот сейчас я расскажу как собственно нам стало легче когда мы его придумали и внедрили но кроме того что моего придумали и внедрили у себя нескольких сервисов amazon решил начиная с прошлого года немножко пересмотреть вообще свою позицию работы с окна с ворсом ну то есть я в частности много раз слышал обвинение что ребята ну вот вы недостаточно сказать кантри бьетесь open source пришли новые люди действительно новые люди известные fopen source комьюнити и им стоит задача ну наконец то давайте давать миру то что мы делаем в том числе да и фар крекер один из таких примеров продукта которые мы разрабатывали для себя которые мы используем по-настоящему в продукте we который однозначно будет дальше развиваться но потому что мы просто видим как многие вещи улучшились и которые мы готовы поделиться с вами не то что готов мы уже поделились идите на гитхабе пользуйтесь смотрите еще один вопрос пока я приступлю к архитектуре на чем написана расти модно почему модно и почему на расти я просто в самом обсуждение не участвовал когда выбирали язык но вот все эти документы читал это очень такое интересное чтиво когда действительно то инженеры плюсы и минусы разных языков обсуждали и так далее и вот в итоге проголосовали за 1 ну потому что безопасно с точки зрения то же самое памяти да ну я не знаю как на расти сложно достаточно например сделать там не безопасность точки зрения там памяти до код ну просто ошибку получите по performance у все нормально то есть он реально язык который дает вам производительность накладные расходы там сопоставимые с там современными плюсами да еще очень важно что раз он уже давно используется на самом деле 15 года на нем написано очень много таких классных и при этом действительно highload решений в общем ростовым мы выбрали собственно нужно писать продукт нужно фланге техническое задание сделать до писатель техническое задание опять же много страниц разного текстов смысл был следующие смысл было такое что первое принципиально мы идем с кремом то есть качестве гипервизора мы выбрали квн вы наверное те кто работают с амазона мы вы знаете что у нас как бы два любимый гипервизора один старый а второй как эта старая жена и новая жена вот второй мы любим как это чаще общаемся с новой да все старые инстанции они на оксане на центр exim все новые инстанции которые с конца семнадцатого года идут на кого мин я мы потом поговорим немножко о почему квн ну один из принципов квн это как раз кстати требований со стороны виртуалке а еще принципы чтобы он запускался быстро вот здесь вот цифры стоят на самом деле вы скажете а вот как можно такое абстрактные цифры поставить естественно есть какое-то рефлекс на железо на котором мы сформулировали эти цифры то есть оно должно запускаться за миллисекунды виртуальная машина которая запускается за сотню миллисекунд если бы тем более корректно все таки да у нее должен быть накладные расходы на виртуализацию минимальные вот здесь определенно было там were first на архитектуре 5 мегабайтов всего лишь вообще на всю всю всю виртуализацию дополнительно тратиться ну мне кажется разумная цифра а еще важно и даже два свойства первое это свойство того что вы можете плотно запускать здесь от сформулирована как количество в york микро виртуала который вы запускаете на ядро в единицу времени именно в этом смысл потому что когда мы говорим о сервисах типа лямда он должен быстро взлететь отработать и умер ну и исчезнуть умереть да еще одно свойство которым здесь я как раз не написал это перри подпискам то есть я уже говорил что дайте мне 8 гигабайт рамы она должна быть моя должна быть такая возможность а еще должна быть возможность перри подписки который используется очень много где а там не знаю в телефоне не там в интернете сетевых технологиях и так далее у вас физически 8 гигабайт 1-ом запускаете 1 единовременно вы можете на 16 и это никому не мешает это тоже опция которая должна существовать и которые здесь используется так вот вот эту картинку мы уже обсудили это та самая линда о которой я говорил что неэффективно у нас было почему мы пришли с ферро крекером а пришли мы вот к чему первое внизу у нас не виртуальная машина а настоящая bm этом то есть настоящая железка поэтому когда я говорю настоящие то есть вот там полный взрослый доступ к железяки то есть если это intel это intel витте вы полностью все функции процессора используйте и так далее и так далее вы можете на текущий момент просто железки в облаке заказывать себе и ставить ну что хотите там а поверх этой железке стоит у вас 6 ios мы говорим о виртуализации сейчас да а дальше у нас запускается fair крекер что у нас получается было у нас ситуация когда под каждого заказчика под каждый каунт мы запускали одну или более виртуальных машин которые чаще всего они работали неэффективно они простаивали а в этой конфигурации у нас есть какое-то количество железа и мы можем настолько плотно запихать виртуалке в это железо при этом они же то есть там смотря что за workload если говорить про ту же саму линду она 200 миллисекунд отработала и умерла все то есть там еще и конкуренция приятно то есть плотность ещё увеличивается этом с этой точки зрения ну чего анбоксинг добыл в названии обещан давайте пройдемся по основным компонентом сыр крекером вот такая вот красивая архитектура давайте отдельно по каждому компоненту мы поговорим потом все вместе соберем железа на чем работает сейчас fair крекер на чем вы его можете запустить на текущий момент ну давайте так сначала я покажу вот это то самое железо которая считалась референсным вот цифры 125 миллисекунд 5 микро виртуалок на ядро в секунды и так далее ну нормально я бы не сказал что это как это мега супер машина но такая хорошая машина называется артрит моя металл ну собственно вас никто не заставляет только такие машины используют во первых есть и другие а во вторых на следующем слайде там будет показана возможность работайте с виртуальными машинами так вот если завершить железо-то на текущий момент вот именно сейчас сегодня а то работает только с н телами мы однозначно сделаем ближайшее время ну как ближайшему там несколько месяцев вперед будет м д & white arm зачем md вы спросите ну зачем дешевле монолит дешевле ну то есть даже если смотреть в том же самом озоне int и левые инстанции андестенд с и 10 процентов экономии то же самое только дешевле ну но для нас еще и диверсификация то сказать поставщиков arm аватар мне вообще нравится вот эта идея вот arm это о aiuti это вот мульти tennant на юте и очень интересно посмотреть какие решения появятся когда мы начнем поддерживать arm то есть вы можете выбрать там какой-нибудь маленькую дива сик и делать действительно мухи tennant и когда разные пользователи нагрузки будут реально изолированно друг от друга но ждем по крайней мере армии md вот пока сейчас нету но опять же можно низ не верит ни она сама можно сходить на гитхабе посмотреть ну вот вы скажете васильева ты там показал в эту железку но мы то знаем что это дорого дорого ну правда дорого если моя рекомендация если захотите поиграться зайдете в amazon закажите ой ой три момента не забудьте ее погасить если просто побаловаться потому что иначе вам в конце месяца такой счет нормальный придет ну а нам все-таки этом более-менее мощная машинка где можно поиграться еще так что дешево и чтобы вот вообще не запариваться можно ли запускать фар крекер виртуальном окружении можно но не в амазонии в амазоне не стоит виртуализация не работает можно это хоть как угодно комментировать это осознанное решение мы не разрешаем настя твердит виртуализацию все с а вы закончили да а вот есть другие опции зато если у вас mac например запустите на параллели тот же самый debian я знаю что народ запускал запустите в своем гугле хотите в ажуре я здесь нет не рекламирую просто говорю что это работает или там на фьюжене на венгерской то есть это работает реально можно и усе она там на ноутбуке запустите свой рак раки на побаловаться сто процентов рабочей конфигурации единственно что смотрите чтобы тому не ваша ubuntu или debian был правильно этом из последних версий следующий уровень у нас ядро то есть сожалели поговорили идем в ядро от сидона самом деле все достаточно просто я уже все про анонсировал к в м что такое квн я скажу сейчас банальность наверно все это знает но я скажу чтобы вот мы были как это one piece до 75 что такое квн квн это некий тулкит для того чтобы делать гипервизор и помните я говорил что такое гипервизор еще терминологически надо договориться да вот кмм он сам по себе с моей по крайней у моей терминологии это не не является вот прям гипервизором целиком это вот некая часть да и его основными задачами является настройка цепью процессора виртуального да и старт виртуальной машины вот я упрощаю понятно что это вот прям совсем примитивная модель мира но вот это так чего здесь не хватает вот на одной цепью мы можем работать наверное нам еще нужны какие-то девайсы которая запускается в users прессе и чтобы девайсы у нас появились какие-то хотя бы базовые девайсы нам нужно совершенно другое как бы не компонента который называется в м м опять же не не буду спорить потому что слово там аббревиатуру м м и понимает по-разному и кто как вот вот я это называю м м что такое м м в м м это а уровень который отвечает за эмуляцию страсть до парка ретиро основной vmm таскать вариант это был прямо сейчас появился еще фар крекер почему мы сварили собственную свое собственное решение они использовали кому тут через слайд я расскажу или на следующем ну то есть еще раз хотелось рукавом чтобы вот совсем точки надо расставить вы скажете ну эмуляции устройство потом ты нам будешь рассказывать о том какие там как вы делаете специальные устройства для far cry кира специальные здесь в особом смысле я поясню quam живу не пиве он не поддерживает пару виртуализацию ну так и есть он не поддерживает пару виртуализацию но никто не мешает это делать другом уровне то есть никто не мешает это делать на уровне там клемму элиф аир крекер а вот здесь как раз вы можете пара виртуализацию поддержит что такое пара виртуализация это когда у нас условно горе операционная система ваша гостевая в курсе что она живет не на настоящем железе она знает о том что она живет на виртуальном железе и она использует чаще всего какие-то дополнительные возможности связанные с этим так то есть устройство мы делаем пиве партнеры паравиртуализации он и обещал почему клеем этом они использовали ну собственно чего изобретаете еще один велосипед возьмите что есть несколько причин для этого у нас была одна из причин это то что кому это большой зрелой со всеми вытекающими отсюда следствиями продукт им очень сложно что-то туда дополнительно вносить то есть слишком много людей участвовать в принятии решений слишком много кода который нужно просмотреть слишком много изменений нужно сделать то есть я поверьте мне клемму действительно серьезно рассматривался опять же я просто видел эту дискуссию когда обсуждались вот что выбирать решили что нет решили что до решения хорошее но мы все-таки пойдем другим путем вторая причина крема все-таки безопасность так как продукт большой полноценные толстые много таких девайсов умеет эмулировать и так далее у него на самом деле поверхность атаки больше а нас-то задача сделать микро венку то есть с точки зрения поверхности атаки нам тоже хотелось бы это все минимизировать но еще одна особенность это новый код у кремом классный кот но реально то есть этот зрелый продукт там уже все так как очевидные баги они пойманы там nuby дырок хватает ну в общем и целом конечно там качество кода она уже вот какой то гарантированно но есть нюанс поэма в том виде который он существует нас не устраивал потому что все равно надо что-то было бы туда дописывать но не было бы их это и сделали а вот все что новое дописывали там чтоб клемма это приписывали к качеству кода было такое что с к новому это дописывали бы так что в общем в итоге решили штуку ему не наша мы делаем всего с нуля не собственно пока не пожалели устройство какие устройством и виртуализированные что мы делаем но консоль консоль вещь нужная и полезная хотя можно и отключать второе клавиатуры при этом клавиатуры мы сделали клавиатуру такую хитрую я думаю что многие от неё бы не отказались такой с одной кнопкой кнопка reset на клавиатуре зачем затем что ну как-то не доверяем и тем софта маму рис эту тех операционных систем которые могут запускаться на прост мы не знаем что там будет запускаться поэтому может автобус это не работать мы hour дверный reset сделали одну кнопку и и драйвера вертолёт вертолёт сейчас я расскажу что это такое это вот такой как раз классный пример паравиртуализации когда мы можем позволить себе сделать устройство проще не бывает то есть это настолько примитивна и устройство по сути wear to you это рен баффер вы записали что-то в буфер позвонили в звоночек и амиду вы это гостевая система да а кастовая система прочитала из буфера все ну через файл да то есть в случае если мы говорим про устройства блочные этот файл файл то есть если сетевой то это тоже файл там так девайс сейчас мы работая на высоком вот если кто специалисты скажет ну в какие-то случаях нам нужно вот верта и он слишком простой иногда то есть все как бы он и сетевое устройство или там он блочного устройства даже не пытается из себя изобразить иногда нужно хотя бы 02 там на сетевом уровне чтобы он пытался что-то изображать частности для интеграции с контейнеров сейчас интеграция с высоком оно на самом деле есть но нам не нравится как она сделана потому что на мне нравится в host ну вот и тут как бы для профессионалов комментарий чтобы что еще нужно нужно чтобы у нас был была возможность контроля потребление ресурсов сетевых сторожевых если надо вы фитилек прикрутили если можно больше фитилек открутили сделали в амазоне есть несколько таких вещей как это сказать таких фундаментальных принципов которые никто не имеет права нарушать один из этих принципов заключается в том что любые сервисы они общаются друг другом только через api ой только через open не важно итак ваши сервис и амиду внешние которые вы используете как пользователь эльтон наши который вообще никто никогда не видит там внутри нияма зоновский не бывает такого что какой-то сервис идёт напрямую в базу данных другого сервиса это наказуемо это вот как вот знаете там ну в общем запрещено не буду я никаких аналогий ну и собственно здесь тоже мы должны делать api чтобы управлять всем этим должны делать api сделали собственно есть специальный фред можно делать этому open api всго гири открывать посмотреть это все хозяйство если хотите ещё один момент есть такое зло это хард coding да когда прямо в потом надо зашивать какие-то creed день шел и вообще хотелось бы иногда передавать между хвостом и виртуальной машиной параметры ну тут же самый там не знал один пароль да вот самое простое и это мы делаем через своя мета сервис me the service тот же самый rest api вы туда это пробрасывать и ну а те кто уже пользуется amazon нам знает волшебный айпи 169 254 вот тот же самый подход как высоту шкаф вы просто читаете этот оттуда и получаете эту информацию там метаданные которые вы туда опрокинули хотите кастомное хотите просто информацию о виртуальных машинах ну и здесь тоже вот смотрите вот все что я рассказываю здесь на самом деле я надеюсь вы уже увидели услышали два главных принципа идут до 1 почему виртуалке медленно грузились а потому что у них очень много legacy emdu классические виртуалке и поэтому одним из принципов был избавиться от всего всего всего лишнего решаем мы конкретно вот эту задачу зачем нам эмулировать например устройства которые не знают 10 лет назад уже никто не использовал то есть избавьтесь от всего лишнего и сфокусируйтесь на одной задачей и второй принцип это упростить не просто избавиться но даже то что у тебя осталось и архитектура и компоненты которые ты здесь делаешь сделать их максимально простыми вот чтобы чтобы не было проще чем эта и на бред для этих целей вот мы здесь даже свой собственный такой простенький простенький стек написали ищите пейте типи типи стек там я не знаю сколько строчек кода но вот проще не бывает и собственно ну дай еще один момент нужно логе вами наружу выбрасывать из виртуальной машины ну тоже так можно ну хорошо я уже говорил что виртуалка это главное и плюс заключается в том что изоляция но здесь мы пошли чуть дальше то есть кроме того что мы говорим о том что мы запускаем workload в отдельных virtual koch мы еще на самом деле изолируем дополнительный слой изоляции туда вносим который называется джиллер ну это самом деле здесь нет никакой секретной кухни это те же самые си группы который часто используется для ограничения ресурсов и the namespace и и the sea camp и по сути это все школы firewall до который умеет ну и чуть всеми любимы я так чувствую что на тему уже времени нет поэтому расскажу про интеграцию вы говорите о кей вы сделали fair крекер а нам-то как с этим жить вот нам сейчас надо изучать ваши опит нам нужно это все каким-то образом к своим прикручивать уже сложившихся сложившимся решением ну когда-то до в каких-то случаях до когда ты уже что-то уже работает на текущий момент ну одно из интеграционных решений этого св кто знает что такое свин кто-нить но это очень прикольная операционная система она прям заточена под работе в облаке там вообще предельно упрощенная работа с памятью вас томский дилер простой простой запуск одного приложения power гипервизором работает уже в свои рак раки нам работает другой пример интеграции и вот это вот прям классно потому что мы еще умеем делать еще и контейнер div говорить то есть с точки зрения вас сильно то ничего не менять не надо потому что если вы умеете работать там с контейнер где-то он is fair крекером он будет точно также работать только будет запускаться не просто контейнера контейнер которые завернуть у метро виртуалку и соответственно это тоже работает давайте это я пропущу вот смотрите когда мы только это было в ноябре мы объявили о выходе fair крекера один из самых популярных вопросов по крайней мере ко мне вот закачки спрашивали говорит пока тоже есть карта контейнеры их уже уже придумали чё вы это не использовали зачем варить все свое ответ у меня был следующие ребята потому что карта работает крему а мы не хотим клемму по уже причинам которые объяснил вот мы решили сварить своем но получилось очень интересная штука ребята из кота встретились с ребятами которые разрабатывают fair крекер договорились потому что и те и другие видят в этом огромный плюс и новая версия карты контейнеров какая-то контейнеров она консультант коты контейнера на и концептуально вот об этом же дав изолируем in ворами тебя запускать контейнеры упускать некий такой саб сет того что делает fair крекер и уже 15 уже поддерживает и клемму и fair крекер то есть получилась как бы вопрос бы я почему вы конкурируете оказывается мы друг друга исключительно гармонично дополняем то есть сейчас вы можете там в ту же в самом убери там в зависимости от версии да тут это отдельный разговор в их там пишите кота и все или к такому и запускать подката либо кому-либо fair крекер на самом деле прикольное решение только зачем а зачем нам на чем на основываться на должен наш выбор и когда мы должны быть фар крекером когда мы должны быть крема ну вот это мое мнение да она не является отыскать каким-то там официальным или очевидным для всех но мне кажется что выбор такой более-менее понятны то есть кто знает о том что такое apts versus battle ну то есть это известная тема да давайте буквально несколько минут и секунд я на это дело потрачу то есть пять своего котеночка вы любите если он заболеет вы его понесете к врачу к ветеринару и чтобы его лечить типичное workload для pittsburgh лот это пускай выходить mais quel в контейнере его реально дорого не лечить его правильнее если у вас что-то начинает как-то работать неправильно вот такие большие workle о воды в контейнер и их действительно пытается держать сколько можно а существуют другие workload и которая называется котел скотина это на самом деле очень жестоко звучит но этого общепринятый термин что делать со скотиной когда она заболеет еще раз это как бы не позиции амазахов но и и убивает вырасти другая да что делается котла контейнерами его просто убивает и запуская другой точно такой же никто никого не лечит это еще раз говорю что это официальная терминология то есть она таскать много где использовать так вот кота склеим а потому что к ему это вот такая она большая полную функционально вы там действительно мог много можете чего разных вариантов сделать вот это больше наверное пропер а если у вас реальный котлу вам реально выгодней масштабируется горизонтально быстро поднимать быстро опускать этот счет избавиться убил запустил три таких же the fair крекер будет лучше работать почему потому что он быстро просто работает и дает вам изоляцию при этом там ну скажем так не хуже не будем здесь это сказать сравнивать ну вот собственно вот так и получается что вот такой зверь fair крекер чего мы начали сегодня начали мы с я заговорил о противоречиях да и казалось бы вот когда есть у вас какое-то противоречие то вам нужно какое-то компромиссное решение это еще и нашим и вашим да вот это называется по-русски такой среднее качество который удовлетворит всех на самом деле иногда так и бывает но если у вас есть четкая позиция что вы хотите сделать и вы готовы я уже говорил наши принципы когда мы делали fair крекер избавиться от всего лишнего и максимально упростить вас получается не компромисс какой-то а получается что и там хорошо и там хорошо и получается что у нас есть возможность запускать очень быстро сотнями на самом деле там кому интересно подходите я покажу демку да за минуту запускается 4000 виртуалок вот у меня вот она прям готовая эта девка можно ее посмотреть очень плотно очень быстро и при этом это будет реально изолированные workload и то есть смотрите мы уже amazon очень трепетно к этому на самом деле относятся вот мы уже используем в продукте we это решение что она нам дала ну во-первых мы стали лучше использовать утилизацию да в чем это выразилось нам стало это дешевле ну нам стало дешевле мы с вами тоже поделились наверное вы знаете что тоже сам фар гейтс и там январе цены упали там на 50 процентов 3550 процент далее то есть с точки зрения утилизации выигрыш огромны и сто процентов нет нет никаких сомнений что мы будем дальше развивать этот продукт возможность интеграции с кота контейнерами с контейнер де сейчас больше и больше всего каких-то таких интересных интеграционных решений которые действительно работают появляется еще и упрощает жизнь вам то есть меньше переделывать легче адаптируется тому что вы уже используете ну как бы суммируя да вот разработали этот продукт и реально мы видим в этом пользу но и очень хочется что и по крайне мере тем из вас у которых есть в названии ваших сервисов слова молчите нэнси потому что это ключевое да просто так его городить не нужна а вот если вам нужно реально марте теннант изоляция то и для вас это решение будет интересно спасибо я так понимаю время для вопросов да перед этим мы бы хотели сказать вам спасибо за выступление спасибо вам за то что вы гласили благодарность спасибо организаторам да вот теперь вопросы ну да да он молодой человек да спасибо очень интересный доклад расскажите пожалуйста как вы смогли так сказать продавить ну принести вот эту идею в жизнь как вы дали жизнь fair крекеры и как вы смогли не выбрать компромиссный вариант скую ему то есть у вас же был выбор или все эти а вот сюда и это намного более дорогое решение и наверняка у вас были не было гарантий что у вас гарантированно все это удастся сделать и уже была потребность вот прямо здесь и сейчас нам это нужно вот скажите пожалуйста на самом деле очень хороший вопрос как собственно мы продавили вот именно эту идею потому что не было гарантирует что это все взлетит а здесь наверное ответ он в культуре компания так вот когда говорят про культуру там говорят ну залипуха все это как бы реклама и так далее на самом деле в действительно в амазонии из культуры и часть культуры 2 есть вещи которые здесь важны первое а иногда нам говорят ребята покажите как вы принимаете решение он приезжает знаете там с каких-нибудь в большие боссы им начнет экскурсию делают по кампусу покажите как вы принимаете решение это исключительно скучная вещь очень скучная вещь выглядит это следующее это называется на арахис six пейджер опять же внутренней термин 76 страниц чисто у борисова текста приносят каждому раздают и каждый сидит читает и увлекает то есть реально это там 10 минут просто все молчат или только там что-то подчеркивает и так далее и потом все вопросы какие-то и после этого начинается дискуссия при этом к этой дискуссии тоже готовится есть такая вещь называется pr-эффект effective вопросы и народ старается вот эти все вопросы скользкие заранее продумать и ответить вот поэтому во первых выбор он и это прямо вот нельзя вот этой всей процедуры избежать это обязательная вещь в мазовии 2 есть еще одна вещь тоже культурная я бы хотел ответить вам там технически как-то но я его не разрабатывал все таки far cry gear потому там вот совсем детали я знаю там я какие-то вещи вижу бы там наверное лучше чем просто снаружи но все равно это называется fast в то есть две культурные разницы то есть вы например придумали классную штуку вы приходите боссу говорить и слушать и вообще вот супер дай мне не знаю там 100 тысяч долларов и я тебе через год сделаю конфетку вообще тебе дают ты через три месяца понимает что идея это было так себе ну ну ну не работает ну не потому что ты дурак а потому что хорошо получается у того кто много экспериментирует а кто много экспериментирует тот много ошибается и поэтому у тебя должно быть не просто право на ошибку а ошибка должна поощряться и в амазоне это называется файл fast то есть если ты впрягся во что-то и ты через какое-то время понял что это не работает не взлетает ты говоришь ну извините облажался и тебя наградят не на каждом вот и мне кольцо здесь ответ как раз вот на ваш вопрос это чисто культурный то есть они обсуждали реальные технари и плюс и минус разных этих потом кто-то горит все вот и едем с этим слетит не взлетит взлетела молодцы не взлетела бы взяли бы закопали стали бы что-то другое делать и не расстраивались бы а наоборот таскаете потому что именно эти шишки и делают нас лучше спасибо спасибо небольшой опрос реализация под arm когда примерно планируется ну я не знаю конкретно до вопрос когда будет arm да ты у меня нету ну до конца года точно будет обещая да но опять же есть на ките вы можете сходить и посмотреть что там происходит то есть это не какой-то секрет что там вот я уже говорил что очень большие на это дело надежды поэтому приоритетная задача ну а какие-то сроки конечно не скажем я просто не знаю привет ещё раз спасибо за доклад вопрос собственно такой вот свете всех спектр ну да у нее всего прочего тестировались но это понимаю что это вот как раз наложилось давать примерно разработка fair крекера как бы на вас все эти новости тестировалась и проседания производительности после применения всех нужных патчей и так далее убирались покрытия понял зрения смотрите вопрос про наболевшая спектром мэл down и так далее то есть я думаю что тестирование именно fair крекера не производилась потому что все очень сильно зависит от вор клода поверьте мне когда все это случилось я слышал совершенно разные от наших реальных российских заказчиков с которыми мы работаем кто-то говорил блину нажав на у нас на 60 процентов кто-то говорил а мы ничего не почувствовали то есть как бы здесь что-то сложно мерить и случае far cry кира я думаю что измерения ни каких то не производилось но вопрос очень правильный и если вы зайдете собственно на git и посмотрите там прямо есть раздел документации как запускать это в продакшн и там вот а все эти channel как бы эффекты до чего и уязвимости они все там написано просто что ты должен делать в частности написано и если ты настоящий параноик каким должен быть настоящий ты сказать безопасник мальте френдинг ты должен выключить например и там вот прямо перечень вот такой a small чем фредди ним выключенным у тебя понятно что производительность как-то а вот как оно там тоже не только важно что это фары крекер за завернуты там важно что что ты туда еще заворачиваешь то есть там поэтому скажем так знать об этом нужно следовать безопасности инструкциям которые именно там описаны fair крекеры против всех этих уязвимостей нужно какую падение производительности ожидать ну и не знаю oceanfront расскажите пожалуйста какие есть инструменты или интерфейсы для мониторинга fair крекер виртуалок вопрос по мониторингу очень хороший вопрос то есть с точки зрения опять же мониторинг мы должны смотреть что внутри происходит или sunfire крекер если просто on fire крекер то есть api который вы можете состоянии сама фары крекера проверять да то есть там какие-то логе тоже пишется и у меня был слайд прологе как выпихивать логе из виртуальной машины то есть ее очень почему ну то есть зависимость того что вы запускаете в этой микро виртуалке ну в общем и целом мы категорически вам рекомендуем там и логе операционной системы выпихивать и там приложение просто сифон то есть в кастовой машине вы делаете фифа она умеет в это фифа выбрасывает туда вот ну а вот таких прям готовы каких-то средств естественное средство есть те которые мы используем там в лимбе или фар гейте ну вот они чисто специализированные под наши workload и поэтому здесь может быть какую-то часть вам самим придётся сварить но это новый сервис еще в ноябре его открыли коллеги да а вот еще коллега хочет что-то задать на суде расти алексея мтс паскаль пожалуйста такие потери собственно на far cry cry вот сравнение с тем реклама то есть если какие-то сравнительные данные потому что ничего не пока ну да вопрос по конкретике ты сказал что к ему не подходит почему не подходят какие потери по сравнению с q и мы герои кроме загрузки которые уже в принципе то есть если говорить про производительность то у меня нет этих цифр я честно я не знаю насколько то есть вы спросите а грехи от наклеим насколько отличается от оверхеды на конкретных цифр у меня нету к сожалению ну вот как как есть да но смысл как раз я думаю что они меньше насколько значительно меньше это вот ваш вопрос вот но они меньше по той причине что там ну все просто вот эмуляция какое количество устройство ему lithium allure уйти в крыму но много и это все как бы вы должны это все каким-то образом поднимать на вер вопрос касается пример сетевые потери если какие-то реализации потому что тот же висок сыта что свое значит по сетевым потерям если вы посмотрите на том же самом гитхабе там есть прямо цифры от которых исходили по сети какие должны быть характеристики труси естественно есть сетевые потери вообще там где есть виртуализации от этом сколько ты теряешь а вот конкретных цифр у меня нету но я думаю связи с тем что ну по крайне мере вертай о он практически там монета нельзя с высоком вот висок сейчас в экспериментов там к нему есть вопросы к висок у пока что официальная версия что так security у меня есть ощущение что не только это спасибо но у вас слезная если ни у кого больше нет вопросов ну вот там есть чем до спасибо за доклад у меня вопрос такой как я понимаю все это про исполнение кода которому мы не доверяем правильно немножко не так вот смотрите ну пускай будет так то есть вот в облаке может 1 денон другому доверять ну наверное может но ты исходишь из того что это очень агрессивная среда то есть это мультики надо агрессивная среда здесь не про доверие здесь немножко про изоляцию наверное хотя может быть да возможно да наверное это скорее так вопрос такой понятно что это нужно amazon потому что у вас есть там линда но для чего этого допустим него есть какие-то примеры использования или может вы думали как это будет использоваться ещё с точки зрения бизнеса и на ну с точки зрения бизнеса вы хотите сделать свой микро amazon например на контейнерах и предоставлять свой какой-то там infrastructure за сервис платформы за сервис на микро сервисах в контейнерах и понятно это то есть основное основной сна использование как я вот за ужас в завершении таскать официальной части сказал основным индикатором для того чтобы вы смотрели на fair крекер должно быть слово молчите на то есть если его нету ну зачем это все это лишнее конечно понятно понятно спасибо ну от а бизнес-приложения то мы сами придумать можно сколь угодно вот васильева сильва 2 из кейсов если у вас есть какой-то высоко регулирована я среда например там хиба где-нибудь там в европе в работы с медицинскими данными или писей dss в случае коммерческих данных вы можете в своей какой-то однородной среде пытаться запускать разнородную нагрузку ту которая является песня безвестной который не является серьезной в данный момент вам для этого приходится генерить отдельные виртуалке при этом еще гипервизор подпадает область действия регулятора а здесь вы можете смириться с тем что вы пускаете набор мебели и ваш весь instance он как бы в скупе но зато вы хотя бы в нем можете еще и наплодить допустим посредством контейнер де какие-то не все эти сосны и нагрузки которые вам интересны и интегрировать в этот же свой сервис благодаря этому вы с одной стороны уменьшаете область действия аудита и тем самым экономить деньги на его прохождения и не требует отдельных физических ресурсов для этого это очень круто спасибо большое спасибо это классная когда один слушатель отвечает на конгресс другой услышать или меня на платный реальный классный кейс у нас регламент спасибо большое спасибо мы продолжим еще видимо к и дискуссию вот там у двери потому что мне тоже есть ряд вопросов назначить и лучший вопрос пожалуйста а вот мне вот про пися dices прям как у меня я затем не на вопрос или ответ который обращение вращение на самом деле коллеги подходите давайте пообщаемся если есть ещё какие-то вопросы"
}