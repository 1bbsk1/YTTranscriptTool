{
  "video_id": "4hD4MO3B_tc",
  "channel": "HighLoadChannel",
  "title": "API Gateway: пустая трата сил или полезный инструмент? / Василий Сошников (Quantil Inc.)",
  "views": 20863,
  "duration": 2969,
  "published": "2021-10-04T02:47:02-07:00",
  "text": "хотел бы начать с того что немножечко погрузить вас в то о чем будет этот доклад то есть содержание 1 важная часть мы разберем обе get get away на функции функция детализировать сильно не будем поскольку их можно реализовать совершенно по-разному есть шин разные битвы которые используют разные инструментарий для их реализации попробуем ответить на два важных вопроса на мой взгляд когда пикет вы и нужно используйте когда его использовать не нужно потому что это полезный инструмент но не всегда увы ну и напоследок api getaway очень важная часть сервис миша а также есть очень важный инструмент который должен быть недалеко от опеки 3 это сервис discovery вот попытаюсь его коротко рассмотреть в конце поскольку и первая и вторая тема на обширной она большая и них можно делать целый отдельный большой доклад вот так же походу я рассказать некоторые технология называть не буду по названию приводить лишь примеры но какие-то технологии я все-таки приводить буду это не говорит о том что я советую использовать только эти технологии для решения той или иной задачи просто их использовал скажем так я и у меня с ними большой опыт ну начнем соответственно с картиночки на этой картиночке в принципе базовой архитектуры разбивка на функционала который присутствует должен присутствовать в api getaway но не обязательно в полном объеме потому что кому-то нужно одни функции кому-то одни функции вообще не нужен и если коротко идти функции это transparent proxy эта трассировка запроса в квартира вания запросов routing и балансировка то есть раз кидание запросов и балансировкой то алгоритм это какое-то логирование этого при кришна firewall его и к сожалению затрону меньше всего потому что я в этой теме не очень разбираюсь это протокола то есть поддержка одного или нескольких протоколов как правило все таки несколько потому что но в современных реалиях редко один портак покрывает все ну и конечно авторизация вот но и архитектура api ну точнее где пегед вы находятся он находится между некими клиентами и некоторые некими бизнес сервисами бизнес это может быть что угодно это может быть я не знаю учат это может быть биллинг это может быть что угодно вот то есть если кратко опеки то вы это набор функций если этих функций нет то скорее всего это не api getaway красс цель следующий скажем так секция этого доклада это рассмотреть каждую из этих функций чуть более подробно и описать зачем она нужна но про модификацию думаю в принципе здесь все знают что это такое но тем не менее там по буду капитаном очевидность и немного почему хорошо иметь ратификацию в единой точке в опе getaway ну тут сам особо в этом предложении был ответ на вопрос единая . бизнес-сервис а мне нужно думать о том что им нужно реализовывать of own дефекация и мне нужно с чем-то интегрироваться у них есть это из коробки их изначально закрывает некий зонтик которые обеспечивают эту функциональность вот какая какая у нее роль на самом деле это просто но унификации просто все запросы проверяются можно им исполняться на этом бизнес сервисе или нет это там если мы используем сервисную модели если у нас там клиентская модификация этого можно проверять чеку это дополнительный токен логирование осложнения я даже схемку покажу примерного логирование зачем она есть ну базового лагеря нее выйдет очень просто что есть некий в компании скажем так принятый стандарт потому чем его героем и зачем мало героем вот эти лаги они складываются куда-то по опыту это несколько система них я чуть позже расскажу на следующем слайде для разных целей ну например для аналитики для статистики потому что не только метрики скажем который может но можно собирать полезны для статистики но еще и черт возьми логе для разбора проблем без лагов никуда когда я седины и . и понятно маршруты откуда куда пришло и где упала это очень неплохо но и был такой прецедент такой случай для мониторинга я привел на самом деле очень смешной примитивный пример это можно делать обычными метриками по соотношениям но иногда можно и это делать и пологом потому что влогах все-таки больше информации о причинах возникновения той или иной проблемы и пример соответственно логирования поскольку он все-таки чуть сложнее я попытался зарисовать на примере того как но я это видел как мне показалось хорошей реализации я здесь использовал слово imagine их не тут потому что рекомендую ужин x использовать для перед проскочу немножко пояснить а только потому что там скажем я его использовал вот в этом большом проекте используют до сих пор представим что у нас есть ли некий эйдж не кейдж это там за им так физический сервер на котором стоит engine x а за этим engine xm стоит что-то там некий сервис услуга что угодно и какой-то бизнес сервис вот так к этому жертва просто поскольку изначально важен и катей существует только exo слоги и снимем много проблем скажем так был разработан ну например их тяжело интегрировать с той же кафкой чьи это можно сделать можно их перекладывать ну там возникает много вопросов и проблем по их доступности скажем так поэтому там был реализован кастомный модуль который напрямую связан с кафкой кафка уже это все скидывать дополнительный буфер который их иногда до обогащаете делать разные преобразования этом не хочу детали скатываться какие именно плюс этот буфер уже дополнительно раскидывает на внутри системы это hadoop историческое хранение но дешевая и сердито кассандра там часть данных помещается по ключу значения для поиска influx именно для сбора каких-то там метрика интересных вот ну и соответственно фу на основе этого всего на основе этих хранения этих логов строится некой data api которая там использует много кто нас это большое количество потребителей от разработчиков которые там условно делаю для жены к стати кастомные модули подсчётам engine x еще что-то потому что по ним можно много чего понять о поведении да там каких-то скажем так заказчиков конкретно заказчик который пользуется этой системой вот коротко это выглядит так в случае логирования и у этого много профитов и поле за трассировка это очень важная функция которой у вы часто забывают она необходима на необходимость ну допустим самом привези нам случае для дебага представьте что у вас огромное количество таких и j на которых огромное количество условно вот таких api guide wave где какое-то количество тоже огромный бизнес сервисов это все как-то связаны между собой коммуницирует и нужно иногда понимать кто откуда зачем куда пришло уметь это прервать еще потому что может быть зацикливания запросов в рамках вот этой всей огромные экосистемы вот поэтому это очень важная функция в самом простом примитивном видео навле как просто индификатор и возможно условно через запятую но как кастомных ядер индификатор и через запятую маршрут который прошел запрос лот при этом надо помнить что прохождение запрос должно иметь скажем так лимит то есть нельзя чтобы запрос бесконечно гулял по системе условно тот логически можно брать можешь допустим 10 систем если там запрос прошел и он все еще живет у скорее всего пара убивать и как-то фиксировать это событие то есть функция трассировки это отлов проблем первое второе смотреть изучать свою структуру как там гуляют запросы это бывает крайне полезно об этой функции увы забывают даже разработчики таких известных инструментов как яндекс одиссей по г bouncer многих проксей штука называется крайне просто упс извиняюсь transparent proxy они на самом деле даже и джин x не помнит случае тисе пи проектирования просто недавно этот пачек писал джон экста для своих нужд но это крайне важная функция о чем она представьте что у нас есть некая прокси которая еще и пикеты и она общается с неким брендом этот backend может быть просто базой данных либо просто кодом с чем угодно и в случае скажем так их взаимодействие всегда приходит скажем так локальный ip то есть эти прокси это большая проблемная и для дебага и для всего вот если вот просто самом простом примере поставить там и чепрак себе с transparent proxy режима и поставить там условно по г bouncer и подарю вот в таком даже случае если мне про пикет в игре мы увидим что в пожгли будет видеть только локальные печники это очень плохо это невозможно отладить иногда и даже если айпишник и клиентов используются для мониторинга вы будете видеть только локальный пик это почти невозможно отладить есть системные способ и это перк можно эмулировать как эмулировать ну например если мы используя если вы используете протокол ftp можно использовать но apes некие внешние прокидывать в бэг-энд это известная там скажем так стратегия вот если мы говорим про вас к уровне протокола с игры про низкоуровневые протокол это люди пить и себе то существует такой метод как прокси протокола их две версии 1 2 вот очень полезная штука не надо помнить желательно до того как вы вышли в прод потому что в прозе есть мониторинг в котором иногда охоты видеть нелокальные печники клиентов в при конечно вырвал его коротко упомяну потому что как я сказал я не большой специалист в этом предметной области но его базовая задача это анализ запросов которые идут через api где твой с очень простой целью понять что из этого там плохое где там есть скажем так скажем так ск юри тише то есть проблемы с безопасностью например инъекции или еще что-то я просто ну и такие решения видел сам не делал вот я знаю что есть еще железные решения которые обеспечивают ту же самую функцию насколько я знаю поэтому исходя из опыта фундаментально количестве железных решение от софтверных решений которые можно разместить на том же api guide вы это цена софт дешевле как ни странно это что железное решение тем тяжелее обновлять и монтэйн нить вот но эта информация старенькая у меня вот по железный против софт поэтому могла немножечко устареть очень важная функция о которой забывают картирование запросов они очень часто забывают при проектировании api guide воев причем под квартира ванием я понимаю сразу две вещи о чем тоже по опыту часто забывают первая вещь и самое важное это ограничение на количество запросов какую-то единицу времени на конкретный бизнес-сервис это первая важная функция но есть и вторая важная функция она называется замедление запросов потому что в случае если мы исчерпали лимит будет 2 8 2 возможной ситуации либо мы прекращаем обслуживание что может быть нормально но не для всех систем либо мы просто замедляем входящие запросы вот обе функции важны но надо там смотреть какая из них скажем так важнее для конкретной бизнесе бизнес-сервис а вот и прелесть основная квартира вание и суть это сделать позволяет сделать так чтобы просто бизнес сервис и не упали под нагрузкой другими словами тут свою цитату размести лучше отказать в обслуживании нескольким условно клиентам чем наблюдать что весь протопал это мне кажется всегда лучше вот ну на самом деле пример небольшой жизненный и он супер упрощенной на самом деле то что много чего не а то не отображает скажем так некоторых связи с овне то есть как там квартира вание можно например сделать используют там тот же индекс опять же если вы умеете писать на си и подари же на x это отдельно ипостаси у и это там кастомный модуль xs но режима доступа к точнее доступа кантер доступ контента и некий рулон джейн который позволяет определить что условно к этому сервису там такой это вот квота у него так скажем в минуту вот этих вот и они не живут там в рамках api guide в они живут отдельно потому что эти квоты они могут быть динамическими правила могут меняться потому что если там большая компания там и много клиентов много сервисов соответственно этот рулон джен получает данные о том какие правила для какого бэг-энда применяйте за внешней системы там редис который связан уже со многими многими системами здесь частично я их даже скажем подсветил это там некие портал это некое с с о которая понимает обще клиент существует или нет такой это некий там service line 3 гости в отдельные тоже подсистема вот и все это естественно как шапочка над как зонтик над бизнес с неким бизнес сервисом вот сервис discovered весьма сложная долгая глубокая тема но тем не менее хочу видео посетить потому что она очень важная , просто если представить что цель ofiget вы защищать сложную большую к систему где кучи business service of the возникает рано или поздно вопрос а как мы понимаем во первых что какие бизнес сервис и сейчас есть какие у них правило какие конфигурации как мы это раскатываем и так далее это очень большой пласт вопросов вот и важно понимать что эти вопросы тут сожалению ошибку презентации написано процентную часть от имел эту процесс ную часть извиняюсь автокорректировка произошла и я пропустил эту ошибку и важный момент важный момент что появление никого service desk ariana себе влечет очень важную вещь процесс на изменения потому что вы должны будете обязать команды чтобы команда или клиентов где-то регистрировали свои сервисы регистрация может быть двух типов либо ручная либо автоматическая и тут уже это все переплетается с рядом других процессов которых я чуть позже расскажу когда сделаю небольшую ремарку по поводу сервис discovery вот но ключевая часть ключевая часть юра discovery как ни странно это не кот это не условно установкой сиди за кипера консоли или там любую другую dd которую вы любите которое там будет осуществлять эту эту функцию это ключевое это процессная часть если вас много команд вам каждой команде нужно будет там привить регламент как они будут работать с этой новой системы вам это также надо будет проинтегрировать с api деталей чтобы обидеть его я знал о том что появился такой сервис или у него изменились какие-то правила также процесс должен быть по-хорошему завязан на некий сиди в идеальной вселенной потому что любое изменение процессы в день нового элемента она требует как минимум тестирование вот но и ответить на ключевые вопросы на которые я в рамках этого доклада ответить не могу потому что они в разных компаниях по опыту по-разному это как лучше связать вот эту систему с discovery с конфисковать и раване им из конфигурированием но конфигурируем бизнес-сервис то есть какие у неё там есть робот их протокола и так далее и вообще нужно ли это связывать может быть вообще идеально будет там ручной сервис discovery назовем вот так вот как это там правильно хранить конфигурации как правильно хранить все там информацию капотирование вот эти вот правило это там одна система или несколько это все там вопросы которые уже архитектурные надо их там пристально рассматривать глядя на конкретный там найти ландшафта условно но на мой взгляд по крайней мере потому что там интернет пестрит разными рекомендациями на эту тему но они все по моему мнению по крайней мере может быть субъективному не затрагивает процесс ную часть то что команда должны быть готовы к этому нововведению все команды in в структуры еще в добавок и процесс этом тестирование как минимум вот но если коротко про сервис discovery архитектурную часть и вот ту проблему которая там но была у меня по опыту и которые важны который уже там можно решить не отвечая на те вопросы которые хотел бы посвятить это очень смешная проблема представим что у нас есть некая система квотирования она вот примерно в простом виде очень упрощенном виде выглядят так что есть некая очередь в которую постятся изменения изменения скажем так что вот такой the business service изменил скажем так свою конфигурацию какую-то тут возникает ключевой вопрос кто должен вопрос эти всем кто должен какать изменить даже доставляться допегит в есть два базовых подхода это пуш ап роуч и пула про что с одной стороны либо нотификации летит сервер api guide вы либо наоборот и вот подумайте внимательно какой бы метод вы использовали потому что очень сильно обжегся когда скажем так опеки твой сам ходил ну скажем так в эту очередь как подписчик и забиралась данные попробуйте подумать и в конце может быть ответить на вопрос почему я обжегся на обратной схеме когда афиге твой собирал данные за череде они наоборот вот дальше радченко балансировка но думаю этот этим механизмом здесь уже пользовались примерно всем вот роутинг это ну в случае степи это просто мы должны знать что есть такой там условно сервис у него есть такие url и они работают по таким правилам балансиров когда мы понимаем что у нас такой бизнес сервис больше чем один и на них как-то надо уметь правильно балансировать в каком-то режиме с учетом квот желательно вот я принципе о нем много не хочу говорить о том что достачно простая и примитивная функция она становится только сложный когда у вас таких сервисов очень много и вам надо накатывать кучу таких конфигураций вот в принципе приведу пример у которых очень хорошая документация хорошо описано скажем так базовые принципы да гугловские amazon и мама зоновские скажем так сервиса а еще неплохо кому интересно может дополнительно прочитать про ту протеже алгоритмы был у селедки которые есть вот а теперь то о чем забывают тоже очень многие api готовы помимо того что это там логирование это трассировка там циркуль breaking который следует из трассировки это еще поддержка нескольких протоколов мы живем сейчас таком мире думаю для вас всех не секрет что у нас куча протоколов для веб этом мы используем и части pit-11 как правило кто-то 20 а кто-то уже даже 3 использует это в песок это которые умирают но если мы говорим о сложное действительно сложно я не знаю отели coming раз ложной компании у них еще неожиданно появляются еще и протоколы вроде м куб м крутите и какие то другие уже протоколы и по хорошему насколько мы говорим об api guide в который должен уметь работать с любым api то по хорошим он должен и уметь поддерживать дополнительные протоколы при этом существует но в камере исходя из моего опыта два мира существует внешний мир внешний мир это наша внешней клиент наши клиенты внешне который общается с тема есть внутренний мир внутренний мир это то как наши сервисы внутри общаются то есть в нашем контуре конкретным и тут появляются еще дополнительные протоколы потому что ну например сейчас там может модно использовать внутри gr5 например и черт возьми да это хорошая технологию надо использовать надо понимать что аппетит и должен уметь это же работать потому что это уже не текстовый протокол это уже там другой и он по сложнее также джейсон рпц используют достаточно часто вообще очень много дополнительных протоколов внутри может быть на базе ti si peu de pe а может быть даже у кого то и на более низком уровне в теории у телефонов ты точно есть поэтому надо сюда помнить в том что api где-то еще должен поддерживать несколько протоколов это крайне важно при чем надо понимать существуют два типа протоколов для кулона внутреннего мира и внешнего мира и как правило они разные ну очень разные а не скажем так могут быть одинаковые том плане что для внутреннего мира их больше а вот теперь небольшой скажем так зарисовочка про масштабируемость и марка я бы даже сказал потому что там api guide вы много где видела много там где скажем так шатало ручками делал и делаю до сих пор в ком-то видео как ведь мы все понимаем что там api guide вен появляется в тот момент когда уже существует некая legacy с этим левой это legacy она никуда не денется она будет работать она будет жить даже развиваться идут вот на этом рисунке хотел подчеркнуть что если там было принято решение да мы делаем api getaway да мы выбрали такой то набор функций то мы сразу должны помнить о том что этот мой мой совет рекомендация о том что сервис и легкости тоже должны быть там закрыто api guide твой потому что все должно работать по одному сценарию это важное процесс на изменение но а новые сервисы они будут немножечко отличаться я чуть ниже расскажу потому что пи getaway в современном мире распадается на самом деле на 2 company на два разных термина кто работает немножко по-другому чуть ниже расскажу то есть если мы говорим о старых сервисах их просто на к накрываешь api guide wame если мы говорим о новом новых сервисах также открываем api гитаре это важная рекомендация которая хотел бы дать и давайте попробую подвести промежуточный вывод из всего того что я сказал выше первое не все функции которая перечислил обязательно вам на самом деле может понадобиться только две из них одна может быть все вот и не все функции надо автоматизировать тот же сервис discovery на это сложно на самом деле много много процессной возни будет именно процессной с точки зрения взаимодействия команд и не только вот поэтому вам там условно если вы задумались об этой истории надо просто понять какие функции для вас важны и чего не дают вам как вы будете их использовать вот какой основной плюс api готовые меньше разработки то есть представим что у вас там сколько команд и каждая из них там делать свою авторизацию раз за разом естественно тратить на это время если у вас появляется она одна централизованная там через api guide вей у вас команды об этом выше не задумываются и занимаются уже своим делом вот это лучший контроль особенно если у вас очень много бизнес сервисов вы там начинаете понимать там опять же прикручивая логирование трассировку о том как у вас запросы живут там появляется точки оптимизации как минимум вы можете там найти какие-то проблемы в теории в теории но не всегда это еще повышает стабильность потому что если появляется квотирование централизованная становится жить проще тогда но не всегда вот минусы аппетита и это сложно да все говорят что существуют готовые решения и пиджи kong engine x плюс но они в реальности требуют доработки то есть если вы сейчас возьмете api и пиджи побежите поставить и ничего не произойдет но в случае пережил скорее всего даже поставить не сможете он очень сложный он собой тянет половину репозитории linux смысле с точки зрения технологий поэтому это должно быть завершена и решение ну и самое сложное это сложно интегрировать там в текущие процессы потому что опять же внедрение to make гитовы она потребует какого то время при этом ваши команды уже все равно будет бежать параллельно куда то что то делать и к этому на этой ноте мы подходим к важному вопросу когда его используя то есть когда действительно пора задуматься о том что надо там выделить команду либо какой-то пилоте кк сделать и скажем так представить api getaway ну если у вас очень много команд то есть вас большое количество проектов вас бурный рост тогда действительно там когда piguet твои произойдет у вас уменьшится тот look'ов помнишь и то есть стоимость потому что у вас часть функций дженерали зиру и цапфа пикет в этой тумаркин потому что люди перестанут тратить время на те вещи которые они соответственно делают рамках конкретных проектов вот есть еще одна вещь которую там спасибо когда давно подсказали 2016 году еще с помощью api ветвей можно начать монетизировать api очень эффективно опять же при условии что вас много много проектов монетизация api это что это по сути биллинг api на основе логов которые там тот же сапеги то войдут вполне себе можно сделать пилинг и так много кто делает на самом деле когда не использовать когда проектов мало они фиксированы и бурным ростом будущем не планируется там я приблизительно даже какие-то расчеты скину которыми можно первый же чуть дальше вот и тащили на следующем слайде уже вот краз два диаметрально противоположных примера давайте просто при стадо во первых как измерять там тессео и внедрение api где-то в это время время которые тратят команды на реализацию того или иного сервиса вот давайте просто представим что у нас там пять проектов в мобайл каких-то в общем без разницы и мы все понимаем что для любого такого проекта будет логирование обязательно потому что команде надо уметь депозита что происходит будет он дефекация потому что ну вряд ли какой то там проект будет без avanti фикации будет к это роутинг и балансировка запросов потому что мы прекрасно понимаем что но в современных реалиях поставить один backend на одном сервере это скорее всего не очень правильно потому что это может упасть что-то пойдет не так опять же непонятно как такой один маленький сервер масштабировать без без балансировки вот и просто предположим что каждая из команд тратит три человека недель на то чтобы реализовать эти функции которых я перечислил выше то есть в принципе три месяца это не так много вполне себе можно делать аппетит vinegar с такой ситуации не нужен но давайте подумаем есть у нас большой проект те же условия только скажем так количество сервисов больше их стало неожиданно 30 функция ровно такие же и мы ищем также такими же медными подсчитаю получаем уже два года вот такой ситуации уже можно задуматься о том что возможно аппетита войну же но я вернусь своему предыдущему тезису сейчас при условии что его внедрять не меньше этого срока потому что если там внедрение пиги твой два года занимает это тоже возникает вызывает вопрос а нужен ли вам в таком случае вот это скажем так небольшой может быть даже в ком-то смысле примитивные расчет но в принципе он показывает зачем api getaway нужен в крупных компаниях и собственно добавим к тому выводу которая делу выше о том что пеги твой нужно использует рога толькогда когда стоимость внедрения и поддержки будет меньше стоимости с реализацией таких функций на business service of blood только в таком случае можно оправдать появление аппетита и в любом другом случае оправдать его нельзя у меня даже был на самом деле комичный случай в моей практике когда команда который давай дали задачу реализовать конкретно там бизнес-сервис нечаянно реализовала еще api guide with touch не утонула в нем закопалась в итоге скажем так про любила все сроки вот это неправильно api guide во-первых он был не нужен а во вторых это не правильность использования инструмента поэтому вот это правило я веб сказал нам за основу брать но еще важный момент о котором часто скажем так и не пишут те кто пишет тропе гитаре и либо его упускают это о том что внедрение перед твоей и то есть дарте зация процессах внутри компании если компания к этому не готовы по тем больным причинам то бегите скорее всего ничего не поможет но он там будет локально где-то жить один не принося пользы никакой вот почему это там травматизация процессов потому что при появлении петлей и в случае если появляется новый тип логирование анти фикации допустим даже в таком простом трассировки вот три функция все равно надо с каждой командой поговорить каждый командир сказать что сейчас мы живем так либо вот тогда-то через сколько-то времени будем жить так что перед вашим сервисом становится такая штука что она работает так и у ней такой-то и slay что самое главное потому что хочу сказать страшную вещь у api gotway всегда есть целый ну то есть время когда мы может валяться больше чем у любого сервиса компании иначе если эта штука падает падает все и небольшая скажем так ремарком точнее будет несколько про сервис мышь смотрите api готовит хорошо это понятно ставятся перед сервисами живётся там может быть есть централизованная api guide with a mad архитектура уже зависит от каждого конкретного случая но что возникает случае если у нас очень много сервисов я ищу хотят общаться между собой вот то есть не использую некий центральная пиги твои потому что центральный api готовит не очень наверно хорошо появляется новое скажем так термин называется сайт корр прокси его смысл в чем представьте себе что у нас есть некий betway там который на входе с мотором работает со всеми запросами но поскольку сервиса общаются еще между собой то необходимо соблюсти вот эти базовые правила базовые правила например по той же модификации между сервисами между этими сервисами соответственно в рамках вот этих вот маленьких кусочков еще появляется стоит как прокси которая скажем так как менее api готовый их закрывает и все общение идет между сервисами через этот сайт кайт про сайт корр прокси вот это крайне важно и я предел от отметить то есть один реализованной о беге твой работать может и будет и даже может масштабироваться но когда сервиса начинают общаться между собой и вы хотите чтобы все эти правила были едины у вас появляется еще одна такая свою сущность как сайт корр прокси которое по сути маленькие пиги твой и закрывает этот маленький маленький скажем так бизнес-сервис вот я на самом деле это реальный пример который я украл аж из презентации по 2017 года вот того как там скажем в ландшафте одной крупной компании может выглядеть опеки твой и зачем он нужен и кстати заметьте здесь несколько протоколов есть пускай они все высокоуровневая если коротко то api guide вейпа стоит становится зонтиком над всеми бизнес системами обеспечивает там несколько видов api обеспечивает мониторинг и логирование чтобы понять что происходит черт возьми еще обеспечивает об и тестирование потому что условно есть прот а можно там в ходе оба тестирования по соседству от продаж что-то протестируйте понять может ли какая-то функция идти в систему или нет но инфра арки страшно это уже там отдельная история просто был масло дела никак не связано на самом деле вот но опять же как видный слайда там в той каретной организация с с а работа сквотирования сервис discovery и менеджер конфигурации кстати 10 отдельно на рисунке выше показывал ну я пример как строил как вместе здесь отдельно тоже там слюны и это приносит нам большие скажем так сейчас профит и эта система уже реализовано там 1 организация вот и еще одно ремарка простираешь discovery потому что на этом честно съела уже собаку это очень хорошо это популярная штука все ее хотят но когда и и внедряет обычно выясняется что она не работает это важно чтобы появился сервис discovery в компании должно быть предпосылки ну например должен быть хотя бы процесс для все капса который позволяет автоматически регистрировать что-то либо в рамках этого процесса не что там должно проверять о том что этот сервис который вылетает в протон зарегистрировался сервис discovery если этого не происходит то скорее всего ваш сервис discovery не существует вы просто руками туда что-то добавляете ли вы бегаете по команд вы просите шум от удочек добавили поэтому если нет процесса который позволяет контролировать регистрацию сервисов сервис discovery то скорее всего сервис discovery просто не нужен к функции проще это делать вручную либо на уровне конфигурирования это как это вынести поэтому и еще важный момент сервер discovered и за того что это слишком популярна и начал там общаюсь все-таки скажем так коллегами по цеху обнаруживаешь даже мелкие проекты почему-то его себе делал зачем-то тратя на это время мне кажется это тоже бессмысленно поэтому подумайте насчет и функции дважды особенность . в разрезе процесса вот извиняюся дублировали слайда произошло добавим к выводу собственно которым я там сделала выше собственно а фига твой там смешивать эрин архитектуры сайт который спалит только если компания большая имеет плавный рост или хочет чего-то оптимизировать внутри если этого не и это должно быть централизованное решение если этого нет то то скорее всего api gotway но он может быть и нужен но он не будет иметь там сильного эффекта дальше неожиданный бонус api getaway позволяет монетизировать api с помощью логов и либо даже продажи аналитиков если ваш сервис совсем крупной вот так же ключевой момент опеки твой может уменьшить там стоимость владения там и реализации а может и увеличить опять же надо считать вот ну и напоследок api где твои без процессов скорее всего не зависит по опыту и в принципе все я был супер быстро готов отвечать на вопросы спасибо итак наши помощники сейчас будут ну давайте наверно и рядышком до большое спасибо за доклад у вас доклад получился такой видео на небольшого detox а вы ни разу не произнесли слова кубер нить из и я вот хочу чуточку сломать на вот этот вот момент каким образом совместите айпи где твой и кубер notice то есть большинство функций я который вы описали ада поверните санина подерутся достаточно темно и можно ли сказать что губернатор съезд ай педе твой аппетитные больше не нужны или повернется предоставляют но какие-то дополнительные возможности в а функция пиги твой спасибо а саша да и так и так это как как развернуть смотри вот по опыту я не видела пикеты которые ты вот взял из репозитория поставил он у тебя прям закрывать все вопросы о кубер найтись прекрасный вот дополняет я проект упомянул div все капс да все cops можно сделать на кубики например оба тестирование можно сделать на кубики она все прекрасно будет работать и это там вопрос того как там конкретно там тебе нравятся потому что это можно сделать все и нанси бы спокойно чтобы ван следы была роль который регистрирует в условном идите сиди какую-то сущность вот not чистом мое субъективное мнение мне там купер найти нравятся там вот для себя и сиди по вам отличный инструмент но опять же он не исключает наличие совершенно отдельного аппетит в ingress например которая предоставляет кубер нить из он от опеки твое крайне далеко честно скажу и более того даже могу вспомнить был забавный вопрос там году 2016 дженкс конфи человека раз который грыз ты делал задал вопрос а нужен ли он до здесь ответил привет меня зовут виктор x5 retail group мы просто пользуемся тоже а перед вами у меня вопрос от которых зависит мой второй вопрос куда мы ставим об идее твой ноут фоне допустим кубер упомянули мы ставим о беге твой перед каждым ходом или мы ставим его на границе внешней сервиса как такового в своем видении осмотри случае у вас сервис общаются между друг другом внутри пар что-то давай определим сервис давай определим что такое сервис наш терминологии но и некий backend который что-то реализует да да про они общаются внутрь его бывает да но смотри значит у вас там условно там что-то типа беша может быть когда они еще друг друга и кто-то сверху ходят верно бывает и тогда тут у вас два варианта условно либо через некий центральные общаться один большой либо ставить сайт к прокси еще перед конкретному диким быком дам окей когда я наверное не вопрос а скорее такое о планировании в adwords я вижу призыв который выглядит так ребята пишите свой опеки твои рынок не очень нет не нет немножечко неправильно может быть ибо посыл звучал так но он не в этом смотри можно взять и поставить опять же он будет работать не надо не надо да я ее это очень сложно и колдунство который не работает можно взять kong но можно и сразу обнаружится что в нем чтоб не хватает вот я просто но как бы хочу смотреть если мы говорим про некую внешнюю границу сервиса как логическая единица ну типа сервис куда ходит конечный пользователь там неважно машина этот человек то вот на эту границу ну нам по моему опыту а педжета мрак опять же это история про монетизацию в первую очередь со стороны потом вот ну на мой взгляд мы пользуемся gravity и вот из того что ты описал на мой взгляд ну типа 90 процентов функционала за там без процентов времени закрывает вот именно на внешнюю логическую границу отлично довольно простое решение вполне может быть это так и просто делюсь опытом вполне может быть просто ясном почему некоторые съемки показал то есть чуть более сложная вещь до учетом кафка некий ds раскидывали в трех систем тяжело гав уже там понимая что там не все системы могут там правильно достаточно к и систем тогда доставить данные для самой кафки опять же я задал вопрос неспроста почему там пуша прочь против пула прочь с там стоит же распространение конфигурации тоже ключевой вопрос на самом деле может быть ответьте мауро выжигаем gravity пул пул пул то есть он забираю ходе он он хотел бы читать конфигурацию и тут возникает вопрос а как он и в manga скорее всего он ставит некую галочку о том что он не прочитал я не скажу сходу это ключевой момент варим можно можно мониторить сами gate вы и на предмет конфигурации мы тренировали конфигурации довольно понятный ты можешь это версия не рование мониторить на стороне de tv ты можешь понимать когда он забрал когда нет а зачем так сложно эти можно проще это одно из решений да это одно из решений а просто споткнулся на пулев тем что приходит статусах родить дополнительного внешней системы тут возникает смешной вопрос что будет стоять систему рухнет большой нагрузкой от чего лучше наоборот блин ответил на вопрос ну посыл в этом но она бы я оборот гарантии что конфиг доехал мусор на мониторе что доставлены они есть там смотри условности очередь позволяет еще все современным нормальные очереди не все современно верно они могут там условно давать какой-то базовую гарантию именно пап ушел ну то есть это можно сделать там не сложно но вот я про я понимаю что ваша реализация это индекс плюсы ход плюс какие-то вещи сейчас реализация да это engine и дженкс причем пропатченный перри пачино я вот почему сказал пол того что патч нет недавно даже скинул на тему прокси в 2 которой он не поддерживает и джон extremes i уже и до кучи му дали огромное количество party большая должен структур развесистые go разные там требования определенные спасибо так у нас вот здесь был вопрос к вам пробираются спасибо за доклад и у меня такой вопрос обошли тему такой функции и пгт как объединение данных от нескольких микро сервисов вот мы сейчас как раз проектируемую инфраструктуру микро сервисный зашел нас вопрос про be open детей и мы думаем вешать на него эту функцию или не вешать что можете сказать ну где разные мнения слышал я сам такую функцию не трогал я знаю там минус и плюс тяжело сказать но смотреть на окей и вопрос вы сказали у вас есть пачаны перепачканный gemix это закрытая форма за или это можно где-то на и деревья и не будет не будет в чем по контактам там есть трость и спасибо за доклад у меня вопрос по сервис машу если у вас какой-то уже практический опыт его имплементации какие то ваш быть использовали уже например там и stylo len керт еще что-то у нас сейчас как раз мы думаем использовать сервис наши ли обойтись без него вот может быть посоветуйте что-то в этом ну еще не плох как сайт корр прокси опыт был нареканий не было честно скажу но там есть ограничение которое накладывает истину в принципе они их там и перечисляют которые они есть там на протокола в основном anger писи по моему давний то есть вы должны будете принять там еще какой то есть я не помню но если там сервис используют живописи внутри именно та принципе очень хорошая решением на мой взгляд вас не использовать задач на сервис наш есть он ножичка специфический какой-то самописный самописный там много инструментов воспользоваться структура очень увесистая поэтому как сказать я я в нему которые вне стал прикрывайте там особый случай понятно жизненно итак если у нас еще вопросы есть ли вопросы из онлайна традиционная тишина так так вот нет нет вопросов так у нас вот посередине еще парочку вопросов и наверное на этом перейдем дискуссионную зону спасибо за доклад вопрос по отказоустойчивости получается каге твои таким узким узким горлом где будет отказывать какие паторны вы используете чтобы избежать хороший опрос он не имеет состояние и очень легко масштабируется с видом на хранить во внешнюю систему внешней системы это там могут база данных очереди которые к нему что-то доставляют иногда это даже файлики тех же тех же конфигурации которые к нему там приезжают сами вот его можно достать безопасно безболезненно масштабировать там ключевая момент который может отказать это обычно внешней системы по отношению к нему но если там построить правильно и в нем ничего не хранить потому что если в нем появляется там что то что оно похоже уже на состояние то есть некая база данных то возникает вопрос какую реплицировать как и масштабировать так далее тому подобное то есть правильный подход держать все вне и copycat вы уже доставлять информацию которым нужно на для работы вот и ну то есть в синхронном режиме но например вот тут правильно заметил где на тему как называется там versio не равале конфигов то есть условно если там даже упала не что что доставляет конфиге будет то очередь если вы могли бы еще что-то сироп конфиг после поднятия доедет и при этом этот момент там аппетита и будет работать но со старым конфигов да это проблема но работать будет страсть подскажите графики и опеки твой как друг на друга мочиться это граф covert просто протокол но его есть можно использовать как компонента реализации не смотря для чего тахограф использовать направлении схема покласть и ну например но это стоит бэкон должен поддерживать граф кельта можно завернуть хотела поехать в тисе пи ну там много способов итак на этом мы можем скажем так закончить официальную часть доклада к василию вопрос какой опять же какой вопрос из зала вам больше всего понравился каберне this купер нить из понятно хорошо там наши помощники подарит вам подарок теперь скажем спасибо большое василию за его очень интересный рассказ после доклада естественно с василием можно пообщаться в зоне цифровых дискуссий на этом все спасибо"
}