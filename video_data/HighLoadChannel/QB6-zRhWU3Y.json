{
  "video_id": "QB6-zRhWU3Y",
  "channel": "HighLoadChannel",
  "title": "Путь мониторинга модульность, гибкость, devops / Всеволод Поляков (Grammarly)",
  "views": 237,
  "duration": 2092,
  "published": "2017-07-30T00:47:31-07:00",
  "text": "нас / а мы занимаемся поддержку привет а сайте под описание годами я собрал аппарат quality платья итоги самара вот 20 мой участок важного мы раскачки потому что старайтесь тем топ продаж и называет по счету почему не могу заметить нам предстоит мы решили переделать под его разработчики опечален теперь он любит поддерживаться мониторинг будет минус там уже потратили на году команда работа пишут на значит он играл предложение просто оплата у нас зависит от сначала приложение для нас на даче побудил его том записка добавить источник источника сделать вы видите на графике мы добавляем чтобы очень много действия никто не хочет это уже не переносите карта просто и несколько microsoft office головой фатальной периоды кит по собачке гибрид a long ago лис и малость сколько законный помада с тобой оба зоновской малевича ноги не по полиции за бровями мы просто хотим мы летали суетливо затем некоторые виды используется 2 места два за врата тарзан здорова-здорова уже много момент это просто поставить буду эти три стоп единство ты можешь за понимание как у максимально пришло верилось по цене там то время допроса очень довольна визировать и сделали так долго думали как разработчикам система мастере полтора выплаты денег уже почти все так что универсаме если полседьмого выросла и мама тоже бесплатно работа сделали звена чтобы сделать или нет . кроме ночью а постоянно сталкиваться им we have some other потом или вами мы могли . или данных вообще обратился познали бога граммов работа 2 раза стоимость обеда действенность это перекусываю еще собаку на заднем привет публикация люди стали новичками если это так то у собачек чуть работать состояние того система может подниматься до вы оба магомед но потом в общем есть фирма обязала и систем крайне калибров очень волновалась автомобиля всегда полно фото так сила время подадим наборщиков если должен был там я лажанул кромом проверяют будто бы она вообще про будут паразитарных и я понимаем печеньем положили опыта похоже типами любовь испания запускали и результатом было потратить а за 1 готов вместе в форме и он принимал или команда лиги если бы и соперники поспать но минусов и желание видеть его черта по метке компании примечание проверка там особо злата огневич быстро не попал не попал не погладит ошибок и определенными что нафига это можно сделать видео lime crime by дороги и в доме где живет поэтому мы поставили что поделить на след день ну погоди маленько стране ли вы количество посуда драма и данный затем а уже за передавался занимает не мог на это у тебя нет у ребят утра миллионы сегодня можно метать когда вы добавили прекрасно мы взяли приветливой потому что ценим и привязывают пачки цели вместо поза будущий результат и разговоре про пиво we start i времени дома думаю с этим еще из и представили нормально время сидит на бис пользовалась и все не даст то ни стало быть через пропала а потом перевернут от законной сердцу помогает разобрать времени спасибо баллами просто отдельно все дела не будут плавными градиентами знаем когда принято без мир полон для проекторов ему крепкого кто раз гречка , пропал номера было добавить туда процентов его вера подай другим по забрался это спас мою это и на брата показал можно нормазе запросто модератора направлений и прямо мороз по спине блоге повторить весь видео бункер expand аватар вот и игнорируем и начали очень забавно баня провода вот сообщение пару минут 2 пусть даже мистично если пассажир погиб подросток обрекает мониторинг фронтэнда как я уже показывал это на съезд java script сайт новый сайт он написан на java скрипте там html к и каждый раз когда юзер совершает какую-то какое-то действие или каждый раз когда выпадает какой-то эксепшен каждый раз когда мы хотим отправить метрику с самого сайта на нашу сторону чтоб потом это иметь вот можете посмотреть агрегировать посмотреть данные с этого мы просто делаем get запрос генерируют лаги лаги целятся в excel excel сохраняет в себе власти встреч или генерируется то метрики вот мы генерируем метрики распадаются с дества здесь отправляет дальше дальше ну как вот по всем этим графиком которой показывал раньше не сохраняются и мы можем это все смотреть и там допустим сравнивать количество время обработки сколько там у юзера обрабатывалась на frontend отправил запрос пришел ответ сколько это заняло времени и сколько времени это сделано на бэг-энде или там на еще каком-то бэг-энде сколько-то времени в сумме собралось вот это достаточно удобно еще у нас есть плагин для текста сша который разворачивает source map я думаю кто знает тот поймет о чем речь если что мы можем потом подробнее об этом поговорить и у нас есть всякие штуки используя лакташи метрики мы очень сделали кривую такой статус метрику чтобы понимать у скольки процентов юзеров начинаются ошибки то есть если там один юзер валит 500 ами то нам в принципе и все и все равно там заливку это клиент типа ну пускай валят мы не хотим просыпаться ночью если у там 10 процентов пользователей в каждой сессии начались выбрать 500 на engine.exe да та же проблема и определить где 500 где нет не сказал бы что ну где типа легальные 500 и а где 100 который нередко это чувак это не самая простая задача мы просто берем там уникальной айпиес складываем стад де и там говорим вот этот уникальный человек генерал столько двухсотых этот уникальный человек generals только 500 их потом на основании этого вводим процент люди которые получают 500 и которые получают 200 понимаем поскольку уникальных процентов юзеров 500 ошибки разработчики все мониторят и к моему глубокому удовлетворению просыпаются ночью это достаточно прикольно но наше все сервисы из-за этого стали работает лучше разработчики намного больше внимания уделяют качеству тому что они пишут они отвечают перед бизнесом за продукт который они представляют он написал что-то за диплом случилась ошибка ты знаешь как это откатить случилась ошибка ты знаешь как это найти ты можешь ты ты не идешь к псами говоришь о боже мой у нас проблема помогите мне искать где тут логе находятся это цента хочешь смотришь так так так вот здесь вот у меня такие то какие то ошибки пошли или там подключаешься по gemix или как как-либо ещё про сравнение времени обработки чего-то фантазиям бэг-энде я говорил и и из познаю за ради я помню тоже уже а потом рассказывал мы сейчас вот если у кого-то есть идеи и обустройством пообщался на тему мониторинг безымянных сервера хранения метрик безымянных сабиров то есть когда метрик много добавляется именно с уникальным именем постоянно добавляется добавляется добавляются метрики сколько и хранить как их хранить как это все агрегировать это такой достаточно сложный лично для меня вопрос несколько вот таких опыт и леди с удовольствием послушаю и хранения метрик самих apple конечно в разных мест скутеры эти с окружениях тоже если кому-то я что ставить в будущем благодаря и и у меня пожалуй всех есть опросы нормально спасибо за доклад я вопрос очень простой я как понимаю вы в амазоне для развернут и ада в амазоне вы говорите что там существует множество решений которые недоступны обладателем дата-центров возникает вопрос почему вы не используете cloudwatch он медленный он достаточно глупой вы говорите что вас мало метрик неужели даже такого малого количества метре которые влезают в 20 мегабайт оперативной памяти cloudwatch медленный 20 мегабайт оперативной памяти то на каждую ноту ну то есть influx находится на каждой ноги отдельно большой сервер пока то рассказывал томска сандра и он находится отдельно пути плане нет это малая подвижность и не может сетями и только нечего делать более минетов а та штука хорошая многим людям она подходит если хочешь масштабировать схож долго долго долго хранить данные с большим разрешением и тибета надо на самом деле не выдумано надо тогда он не очень подходит спасибо добрый день спасибо за такое от меня два вопроса первый у вас достаточно сложная схема разного сорта который вас находится прямо на каждой ноги с помощью которого собирайте метрики у вас там я не помню штук семь пам компонентов вы их сами то мониторить и да как ну то есть это достаточно просто сансу клиентам сам вот эта вот эта штука которая запускает все а на мониторе cs6 сервера то есть там поставят идут пинге то просто достаточно тривиально допинге проверяет работает ли он дальше апликэйшен мы его мониторим через influx система она пишет метрики тебе если используешь diamond или коль где можно написать триггер сенсор или чек который будет так же самое при помощи сестричек of проверять работает ли там где омон прилипали где то что же стати ты просто проверяю запущен процесс работает он или нет если теряются метрики это донат и солярка что эти вот например не поступает внутрь метрики тогда либо софт и кстати если вы смотрите поступают чеки то есть они нет ни от арбата в этом куча процессов накапливать которое пытается обратиться к influx у и забрать у него метрики чтобы там вот получить какую-то 55 мин последних данных накапливать все мониторится при помощи сенсор я понял и второй вопрос где у вас система оповещений с помощью которые то вы разговорчиков будете что-то но мониторинга должна быть не только система сбора данных моя система реагирования данные на оповещения дал вот рассказывали или я потерял я всё идеально забыл показать но это просто такой вот такая штука она может быть абсолютно разной вот есть сервер и у самого сенсор есть такая концепция как хендера то есть на какое-то событие ты можешь выполнить как скрипт достаточно просто и есть скрипт который конектится к божене которого песок пейджер beauty и дальше уже из пейджер директоров со или уважение мы используем уже не по ряду причин уже дергаются разработчикам то есть сама команда по их расписанию все такое но это уже внешняя штука за которое мы просто платим деньги потому что она удобна и звонит ситуация у нас есть несколько уровней эскалации то есть примеру за все инфраструктурные штуки там практически там например самой наши большие базы данных наши балансира не знаю там сеть место на родах всякие такие инфраструктурной штуки отвечаем отвечает abs команда дергает сам сервер когда видишь то есть где то проблема дергая триггер общение и уже не получают типа так такую штуку ну ка скажи ка abs команде что у нас такая-то проблема и текст проблемы в итоге он же не пишет сообщение в слайд если там если уровень очень высокий он уже дергает саму abs команду и говоришь эти потоки так пацаны тут проблема из abs команды по расписанию выбирается человек который получает если он не получает получается опус команда в общем там спустя там две минуты смазка пять минут звонок 10 минут вся опус команда получает смски и все месте бегут к ноутам у разработчиков примерно такая же система точно также их чек срабатывает что там какая-то большая большая беда дергается sense сервер sims веб сервер дергает уважение уважение дергать расписание разработчиков смотри кто из них прав кто не прав у верне гну кто из них сегодня дежурит кто не дежурит и дальше уже зависимость от этого дерга этом следующего человека предыдущего если разработчик не отвечают дергается abs команда если abs команда не отвечает дергают этом разработчики которая за это могут быть и частично привлечены какому-то проекту так это уже более-менее специфичная и не универсально вот мы сделали так очень удобно спасибо за выступление можно с можно слать но дай скажите пожалуйста вот получать 100 тыс складывают в influx биби и только с ын су клиент с этим работать то есть вы никаким веб-интерфейсом никакой разработчик напрямую вот эти influx baby но ты не смотрит так ну чаще всего нет но если начинаются какие-то проблемы на external storage же то можно посмотреть как там уже мы оставляем web-интерфейс на всякий случай если как раз уже вопрос безымянным собираем если сервера не будет именно значит надо будет общим от отдельная штука мы его оставляем на всякий случай то есть если вам необходимо будет уже графону сможете подключить конкретной ноги и там смотрите это вот достаточно удобно здрасьте у меня такой вопрос из за того что я понял вы перенесли написание вот списка метрик и поведение мониторинга нас монетик метрик на разработчиков и в итоге chef или что там у вас он по сути генерит какой-то список метрик который потом sense у discovered а почему вы просто ну вот вы говорили да что за биться мне подошел взяли бы написали чехова и рецепт который бы там через забит себя и configure все то же самое через забег сопя и но тут второй вопрос в записи все метрики хранятся ну то есть можно было быть дергать все через обе цепи но это было бы то есть мы получается во-первых так некрасиво архитектурно потому что ты даже если ты дергаешь через замес японии они через веб морду все добавляешь то надо все равно делать и описание всех ролей за биг си то есть ты ну то есть чтобы вот он там что-то исполнял либо каждая нота отдельно роль все можно труда можно также чтобы разработчики писали то я так понимаю что рецепты чего никогда-то же сами пишут который отвечает за генерацию собственно этого листа но немного нет они нас не пришло рецепторами из до tabaqui с которого гений арест мутации все можно автоматизировать но вторая проблема zabbix а в том что там нельзя хранить метрики много и долго то что они используют mais quel это неудобно там ну пока мере версии который мы использовали это было полтора года назад там были большие проблемы с добавлением графиков скринов то надо было где все отдельно по выносить под каждый сервер но не очень удобно и еще вопрос вернуть понимаю что метрики в конечном счете discovery ци для каждой ноты и для каждого приложения а если вам нужно например оценить перформанс приложения которое там стоит на куче нот и нужно взять много метрик с разных нот и когда их посчитать и вот что то получить от все делать на котором 2 года тогда как configure ца the nike страну сторону куда 2 2 знает в каких серверах взять какие метрики как посчитал отлично вопрос я забыл об этом рассказать получается когда мы пишем 0 метрики вот отсюда в стад де винн flux пишет метрики без имени сервер на котором он находится то есть могу метрика примерно вот такой формат если мы пишем на глобально хранилище мы пишем вот такую полное окружение то есть это окружение роли имя ноды и дальше пошла метрика длиннющая если мы пишем на локальный flux мы просто пишем метрику ленюсь и и соответственно монографии всегда может знать там по окружению пароли какие-то ноды ну то есть и по имени но да вот тоже через тоже через сито доение чичи через grifid составе конфигурируется через шеф а посмотрите ну в граффити получаса назад граффити много метрик там например prada балансер баланс r1 и пошел там дальше engine x там есть там что-то что-то что-то поняла ну получается в случае там если например мы хотим оценить общую производительность 10 not мы добавили еще одну ноту нам надо пойти руками в графит добавить это как-то учет не от вот эту эту штуку умеет grafana я бы хотел чтобы вы обратили внимание но тут нету в общем в компании есть такие типа wild card ты можешь я понял да да вот эту дома там добавляешь но там сразу появляется прав они там и сразу появляется агрегации сразу все видишь можешь отдельно перейти на каждую ноту типа эта клевать ну то есть ты можешь получить здоровенный goldcard как какое состояние допустим на всех балансиров имена всех базах данных и потом отдельно переходить по каждой ноги вниз смотреть как именно такие графики именно на ней спасибо самый классный мне все понравились ну мне кажется сама деталь нa nokia я будущая что всем все понятно если вдруг что я здесь буду сегодня завтра может навсегда подойти и спросить уточнить и нет нет нет еще и если у кого то есть ответ а вот эти вот вопросы или какие-то мысли я буду очень благодарен и очень рад побеседовать дружески дружеской семейной обстановке спасибо"
}