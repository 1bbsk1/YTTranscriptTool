{
  "video_id": "PIBuf3E4C04",
  "channel": "HighLoadChannel",
  "title": "Postgres 14 и высокие нагрузки / Иван Панченко (Postgres Professional)",
  "views": 11270,
  "duration": 2415,
  "published": "2021-10-04T02:44:45-07:00",
  "text": "коллеги добрый день начать снова так получилось что я по вечерам здесь в этом зале почему-то все время оказываюсь вот и я кстати очень интересно астрономическое явление сейчас наблюдая вот значит я сам как у высоцкого снега фуражек тароф кроме них ничего не вижу а вы подсвеченное вот этими экранами прекрасными таким красным цветом напоминает сумерки как раз сейчас вечер и меня такое настроение как на закате я вижу красную значит зал такое освещенный вечерним солнцем выбран морду бьют какие то значит загадочный фонарик вот но хорошо начать с астрономией переходит к подвесу высоким нагрузкам вот значит ну я собственно хотел рассказать что нового в 14 версии потому что совсем недавно произошёл фича фриз пару месяцев назад даже меньше 1 собственную полтора месяца назад прошел фича фриз вот стало ясно уже что входит в ту версия туда попала довольно много вот и я просто хочу сделать такой обзор первую щит для тех кто не очень внимательно следить за комент тестами за списками рассылок за разнообразными публикациями которые начинают появляться я вот быстренько расскажу основные вещи значит в четырнадцатом по здесь очень много всего нового поэтому обо всем я конечно рассказать не смогу даже обо всем что касается работы под высокими нагрузками касается производительности даже об этом а всем рассказать не смогу но о чем-то чуть подробнее что-то просто перечислю но мы либо в кулуарах сможем обсудить подробнее либо значит есть в конце есть ссылки что почитать потому что уже есть хорошие обзоры на эту тему год все я конечно еще не успел перепробовать своими руками но кое-что пробовал вот и об этом я буду рассказывать более подробно окей поехали значит краткое содержание предыдущей серии на самом деле еще недавно вышел 13 по сгрыз который из-за коронавируса не был обсужден на здесь на хай-лоу де не то что адекватно вообще никак а там тоже было несколько важных вещей я не могу о них не упомянуть которая касается именно производительности вот что это такое во первых это мега фича которая называется сжатие но же дедупликации бы дерево вот значит если раньше одинаковые ключи входящие в бы дерево повторялись знать о столько раз сколько раз они входят вот плюс еще с учетом version насти могли повторяться большее количество раз поскольку есть разная версию записей анастасия lubin никого с коллегами сделала такую вещь чтобы ключ к хранился один раз и к нему хранился подобно тому как это делается в яндексе типы джин хранился список вхождения вот это позволяет сократить место которое занимает яндекс и достаточно заметно его ускорить в ряде конкретных случаев вот первый источник который лучше почитать здесь это доклад настил убей не кавайно конференция по жуков индия год с небольшим назад вот там есть слайды 2 очень хорошо она об этом рассказывает на что это одна из таких мажорных mega hits 13 по сгрыз а вот другая фича это инструментальная сортировка на все это некая оптимизация исполнителя подрисовок запросов значит что это такое вот представьте себе что у вас есть скажем какое-то количество ключей как в этом примере 3 вам нужно получить результаты набор строк отсортированы по всем этим трем ключам а вот у вас запрос исполняться таким образом что перед этим уже результат отсортирован по двум из этих ключей раньше двенадцатой версии после все равно перестать и воровал бы по всем трем что дольше чем как сейчас когда он просто до сортирует по недостающим у ключу вот дальше значит появились некоторое ускорение в прп же sql значит когда-то я делал доклада про сравнение процедурных языков и позволил там плп же sql за то что он очень медленно считает арифметические выражения теперь он стал быстрее их читать потому что он не пытается планировать их исполнение значит ну вот аппарат и ускакал значит да ну вот насчет имеются был функции на этапе планирования на самом деле небольшой оптимизация про нее долго варить не надо вот то что трон кейт ускорился это заметно в том случае когда вы активно работаете с большим количеством всяких табличек которые то наполняйте то стран кризисе вот приходилось очень сильно страдать когда много таблиц вы начинаете транг видеть потому что это приводило к тому что целиком шарит буфера ваши сканировали в поиске того не осталось ли там чего нибудь от этих таблиц вот много раз сканировался ты была не оптимально наше время когда шарит буфера бывают большие и очень большие это совсем тяжело значит это оптимизировали там в 4 свои версии это оптимизировали еще раз стал еще легче значит хулиганить с большим количеством таблиц создавать и удалять транг лететь в любом количестве значит еще полезная вещь это толст значит как вы знаете большие записи в подгрести охраняться не целиком одним сплошным потоком они режутся на маленькие слои секи которые традиционно называется почему-то толст так вот значит а раньше для того чтобы обратиться к текстовому полю которая хранится в форме толст за толщина поля начат она всегда извлекал из только целиком даже если вам нужен из него самое на л.к. но если вы хотите достать начала полю только например со бустер то тогда все эти тесты и все эти слои секи этого достань они будут извлечены только те которые нужны сначала вот но это тоже иногда сильно помогает вот значит дальше вакуум индексов параллельно на надо понимать это правильно это не сбыте мечты человечества о том что в вакуум работал параллельно в несколько потоков на данной таблицы или надеть на дальнем индексом это совсем другое это значит страшно индексы могут вакууме ца одновременно разными маркерами вот к сожалению одна таблица пока что не может вакууме ца параллельно несколькими маркерами и поэтому нам приходится использовать секционирование таблиц вот значит еще один небольшой пачек of the vacuum при вставке вот значит существовала такая проблема что если таблица у нас opengl для меня идет только добавка the vacuum не приходит мне потому что в ней нет мусора вот но соответственно не вычитает визе билете map вот и он придет туда очень нескоро для того чтобы что сделать для того чтобы избежать в раб и раунда на это будет нескоро и все это время вас плохо будут работать индексом диска на из-за отсутствия визе bellissima вот теперь это не так это починили стало лучше значит двигаемся дальше в 14 по згрлс значит но на мой взгляд самая интересная фича 14 по адресу это вот такое вот иллюстрирован графиком повышение масштабируемости по коннектор что по осям по горизонтальной оси количество в логарифмической шкале количество одновременно работающих сессии по вертикали tps и вот но неважно в каких единицах они в данном случае шкала относительно что что зависит от того что за машинка главное что красная кривая это того как стал осени то как было то есть суть в том что андрис фронт нашел некоторые на его взгляд излишества в функции получения snapshot а вот но к сожалению это нет какие то большие радикальные перемены которые могли бы наверно еще лучше улучшить результат вот но тем не менее вот такая штуковина что у нас уже не загибается но это понятно это readonly запросы это такой идеальной сферический случае вакууме на то что открывание загибается вниз это все равно очень здорово вселяет большие надежды вот ну посмотрим фильм это придет на практике скоро станет ясно вот то есть под газ 14 нас есть все основания ожидать что он будет лучше работать с большим количеством одновременных сессий вот значит прикольная фича которая почему-то назвали bottom-up делишся или восходящим удалением или удалением с низу вверх или значит вверх ногами на самом деле это еще одна оптимизация индексов значит но существуют может быть многие слышали так называемый ход оптимизация индексов которые загружают в том что если новая версия записи при апдейте попадает в ту же страницу то в яндексе новая версия не заводится называется ход такой оптимизация который позволяет сократить распухание saw при массовых апдейтах вот эта другая оптимизация которая тоже касается массовых апдейт в том что когда у вас индекс растет он растет о том что страницы сплетаться то есть когда страница переполняется она split тициано 2 страницы это понятно и вот идея в том что перед ним как сплитить страницу подумать а вообще одна дали сделать может быть в этой странице есть старая версия которое можно зачистить не дожидаясь пока придет вакуум прям сразу вот и теперь значит перед попыткой по плетить страницу b3 после апдейта вот который мог бы ну то есть тот же самый ключ вставляется еще еще один раз страничку там ну мы смотрим может быть оказывается можно не сплитить страницу если у вас вы постоянно облететь и одно и то же очень хорошо вы можете теперь резко уменьшить распухание вашего индекса вот но это значит что производительность будет лучше вот насколько конкретно это помогает в принципе есть уже уже народ пытался значит поверить это но достаточно идеально скажем так случаях когда просто пытались доказать что вот действительно перестает расти то есть эта штука работает там более-менее реалистичных примеров пока еще не померили к чему это приведет но в общем скоро я думаю такие результат тоже появится вот значит асинхронный append ну мы пост гаспра до последнее время и думали что секционирование которые есть полюсе плюсы вдв то бишь с положение секции на удаленных серверах это хороший путь шарден гума этот путь прошли он работает вот ну правда из-за больших издержек которые несет и вдв это не слишком производительный вариант но вот по крайней мере он работает на чистом красивой вот мы сейчас идем дальше а тем не менее в puzzles упал патч который позволяет одновременно сканировать удаленная партиции асинхронным уложим то есть следующая портится сканируется не дожидаясь предыдущий все это делается автоматически вот но к распределенным запросам большая проблема значит это планировщик который в общем должен достаточно четко представлять себе какой когда надо выбирать этот план год но понятно что для очень быстрых запросов это ни к чему но для запросов которые дольше чем что то в этом уже есть шон конкретный смысл вот и как раз по моим экспериментом я сам это пробовал лично вот он не всегда соображает что пора уже этим пользоваться вот он это делает для достаточно больших таблиц только но посмотрим здесь наверняка можно как-то его обучить любом случае то что это получилось это хорошо давайте дальше значит покрывающие индексы покрывающими индексами мы называем не совсем точно названием называем индекса с дополнительными полями у которых есть вот такой вот ключевое слово include это поле который не входит в индексный ключ на которой тоже хранится в яндексе такие индексы нужны для того чтобы организовывать яндекс диском то есть очень быстро извлекать данные из таблицы не заглядывая в саму таблицы только в яндекс вот но вот индексы типа с погиб теперь тоже имеет такую возможность раньше это было у индексов b3 у дес нот теперь дсп gist это тоже есть а значит геоинформационная система тоже смогут хорошо быстро искать индекса unless к нам с доставании им дополнительных колоннах вот как это работает здесь примерно написано вот запрос есть геометрический запрос находится ли . в определенном бог секи видите здесь оператор меньше собака это означает не нос и ухо а это означает что точка принадлежит box вот ну вот соответственно здесь используется такой индекс потому что он есть и видите там написано индекс английском это значит а индекса достаточно для того чтобы извлечь полностью это таблиц что все попали вот но yandex disk on понятно дело работает заметно быстрее чем просто индекс can потому что ему не надо заглядывать в основную часть таблицы так паку значит по вакуум есть ряд изменений вот на там изменилась по умолчанию значения параметра умолчал молчалина и одно вот который фактически означает что диски стали быстрее по отношению к памяти это параметр это основной сравнительная стоимость доставания страницы с диска по отношениях доставания ее из кэша вот теперь считает что это в 2 раза не в 10 раз дороже по умолчанию 5 значит вакуум научился исполняться параллельно с кан карен для операциями над индексами раньше они друг друга блокировали вот еще одна полезная фича которая сокращать ненужное усилия вакуума это автоматически не заход в индексы но как он обычно сканировать таблицу начали смотрит если там bloat вот вот теперь если был out of таблица мало то тогда он может уже решить что в яндекс идти тоже не надо на таблицу он прошел знает что большого профита уже от того что он заглянет в яндекс не будет значит он туда не пойдет значит ещё одно небольшое удобств для тех кто мается с тостами появился параметр процесс tales of значит что это такое но те же самые тесты о которых я говорила не лежат в отдельных специальных табличках и поскольку это отдельное табличка их можно докупить отдельно а вот основную центральную часть таблицы по бокам ведь отдельно раньше было нельзя без тестов но теперь вот такая справедливость она восстановлена и можно по вакууме и центральную часть таблицы без постов тоже если вы например вам надо это сделать быстренько не дожидаясь пока пока глава комитета ст и вот вы можете сделать это так вот но еще там исправлен некий баг из-за которого при падении полюса авто вакуумный worker мог не упасть вот но его чтобы не приканчивать руками исправили баг он теперь подать сам по поводу реплик некоторые изменения по поводу реплик вот не все знают но есть такие параметры которые можно уронить реплику вот это не очевидно но тем не менее вот так и документы про это есть но кто ж ее читает можно уронить реплику если например вы увеличите макс connections на мастере вот потому что оказывается для того чтобы реплика была уверена что на перевале переварит волны надо чтобы в ней какие-то при аллоцирование структуры памяти были нужных размеров чтобы она точно знала что на переварит все что придется мастера и поэтому вот эти вот параметры на реплики они должны быть не меньше чем на мастере если вдруг вы на мастере эти параметры увеличите то через вал нам есть специальная командочка вал протоколе вот реплика об этом узнает и скажет я не могу больше работать вот до 400 версия она останавливалась а сейчас она не останавливается целиком а просто-напросто перестает пережевывать вал то есть аппликация останавливается а на запросы реплика продолжает отвечать вот но такое поведение кого-то может удивить вот то есть кто-то может не заметить что реплика начинает отставать там и это приведет к нехорошим последствиям то есть принципе админы про такую вещь должны знать но если вы хотите увеличивать эти параметры на мастере вы лучше увеличите их вначале на реплики если хотите уменьшить их уменьшить их начали норе если вы хотите увеличить эти параметры увеличивайте их начали на реплики если хотите уменьшать уменьшайте в начале на мастере лучше держать их одинаковыми там и там поскольку реплика имеет шанс у любой момент переключиться и стать мастером к этому лучше быть готовым продолжаем значит все удобнее удобнее работать с полюсом restore команд теперь входит список тех параметров конфигурации которая не требует перезапуска это здорово значит еще одна многообещающая вещь утилита которая позволяет откатывать назад или продвигать вперед по истории применения wolof ваш сервер machines вот теперь можно в качестве соуса качестве то бог чему подгоняется использовать не только мастер но и стендбай это очень здорово поскольку это может ускорять переключение ролей в кластере это важная вещь многообещающая но надо ее к конечно еще как следует погонять чтобы убедиться в том что это действительно помогает но это бы это большой шаг вперед значит логические репликации появилось два интересных параметра значит во первых streaming равно он и тогда большие транзакции будут передаваться постепенно значит до сих пор большие транзакции копились прежде чем быть передана мифологической репликации вот четыре года плавал в море этот патч пока наконец значит он не был не попал в 400 версию не стал за комичен вот но еще появился некоторые загадочный двоичный формат в логической репликации который обещает быть более быстрым пока не знаю насколько вот но вот наверно на максимум там процентов на 30-40 можно получить снижение затрат вычислительных на логическую репликацию вот посмотрим но это полезная вещь которую давно надо было сделать вот значит в статистических view шкаф тоже есть некие изменения уже startactivity теперь можно добавить с помощью специального параметра можно добавить вернее она там есть его можно начать заполнять поля queue рейде значит полек вериги это некоторая волшебная строчка которая идентифицирует sql запрос вот значит такая строчка уже есть например в позже штат statements вот но позже startactivity вы не могли предвидеть cast at state нас чтобы понять об одном и том же запросе идет речь вот теперь же такое рейде есть и тут и там и вы можете соответственно соотносить те sql запросы которые вы видите во вьюшки activity и те которые вы видите в а вьюшки statement вот вообще это может иметь и какие то другие тоже значит полезное последствия для того чтобы найти афишировать sql запросы не приводя их полного текста год еще появилась новая статистическая брюшка к стад стоит нацу прилагается еще вьюшку с таким же названием и суффиксом info в ней всего одна запись и она говорит от о том как жизнь у строительству основной вьюшки там хранится момент времени в которой последний раз она была сброшена она накапливается потом сбрасывается если кто не знает и количество переполнения ее на там какое-то количество запросов мне может хранить какое-то количество строчек может быть стоит минусах 5000 по моему вот но она управляется параметрам и если вы видите что диалог большое значит там переполнение может быть вам хочется увеличить этот параметр вот чтобы не терять информацию вот значит что еще появилось еще появился параметр еще появилось top level такое поле top level of state минусах она что это такое запросы могут быть многоуровневые скверны когда вы вызвали функцию а в ней ещё там sql запросе какой-то исполнился значит если вы включите трек равно all the тогда у вас будут и верхние уровни вы и и значит более низкоуровневая запросы попадать статистику но раньше их трудно было отличить один от другого от теперь появилась еще атрибут to play all true или false который говорит этот запрос случился на верхнем уровне или внутри для меня загадка почему не сделали просто целочисленное поле level тем более что в коде который вычисляет от top level там как раз так и написано если у его больше единиц это за гадство посмотрю вот честно говоря мне было бы мне хотелось бы чтобы его целочисленное сделали так но может быть еще есть по исправит я напишу об этом вот ну и еще вот тоже обстоятельствах есть такой поле роуз где считается какое количество строк попал работку этим sql-запроса вот раньше не все виды запросов туда попадали например если вы делается крейг лейбл с select намыливаться то что здесь перечислено они раньше не считались там теперь считаются так значит еще одна фишка появилась вот так бывает со ст отвал в ней 1 запись всего одна запись и там хранится вот такие вот цифры по валам вон то есть сколько баллов записано грубо говоря там как когда отдельным параметры можно включить чтобы еще считалось сколько времени ввод-вывод занял значит то есть если у вас там большой вал трафик вы хотите разобраться что с этим происходит ну во первых в стоит минусах есть поля насчет валов сколько встретимся вызывает вал трафика но и вот такой вот итоговый общий тоже тоже такие полезные циферки будут значит дальше следующая фича резалт кэш это то чего давно ждали но пока не совсем доделан до конца если это возможность кэшировать промежуточные результаты при исполнении запросов значит сейчас кэшируется в некоторых случаев значит кашель с результаты внутреннего цикла вниз ты глуп вот но вот здесь вот написано есть пример значит запроса в котором можно получить как раз план спешу то здесь вот мы берем там все запросы от какого-нибудь карта мира и то есть мы идем по запросам и для каждого запроса мы лезем заказ то миром и вот поскольку каст вами ранее в общем повторяются часто для запросов каждый раз доставать их не интересно и вот они теперь могут быть закодированы вот ну надо сказать что там используется hedger такой ситуации тесто вот то есть этот хэш как при 2 численным получается но в некоторых случаях после собирает нас ты глуп но в этом случае он может избегать повторений внутреннего цикла каширу их по ходу дела вот значит еще когда не хватает места мы часто начинаем подключать на в этой был space и если мы хотим перенести таблицу в другой той был space или хотим перенести индекс другой travel space это тяжелая процедура потому что это большой лог все время переноса вот то есть можно с помощью из куриного и открыли команда altar можно перенести таблицу lindex другой то и был space а можно теперь сделать тренингах скан caring ли то есть практически не блокирующая операция где новый индекс уже будет создан в новом той был спейси значит надо сказать что если вы хотите перенести таблицу в другой travel space to для этого специальная утилита она в позу с не входит но она где-то сбоку и и разработали в компании сайбер тек используйте на свой страх и риск она называется позже сквиз она значит может сделать много хорошего в том числе на умеет переносить таблицы значит на в другой то и был space другой диск грубо говоря вот следующая фича конвейерный режим мы давно мечтали о том что можно было писать запросы один за другим в по сгрыз значит не дожидаясь пока исполнится предыдущий запрос кидать следующий чтобы все шло быстрее чтобы сетевую латентность нам игнорируешь меня так сильно ее бояться вот значит ли pq появился такой режим который включается вызвано специальной функции ли покушай вот кстати интересно кто никто здесь есть клиента на ли pq непосредственно писал вот прям носи с ли pq оао и но таких людей не много и в этом как раз проблемам потому что до всех остальных это дойдёт тогда когда эта фича появится более высоко уровнях библиотеках сайте педжета мы или чем чем мы еще пользуемся но вот кстати я такой схеме что в джей би би си что-то подобное уже есть точно не уверен может быть есть не знаю год да значит но вот такая фишка есть надо посмотреть насколько она реально помогает вот ну очевидно что какие-то конкретные случаи когда много мелких запросов а сеть при этом валентная высокого тент на и это будет помогать дальше значит fpv появились дополнительные параметры дополнительные параметры значит keep connections равняется of ну это очень грубо конечно управление коннекторами через ftp значит суть том что обычно я в девушка если оно создало connect она его сохраняя что потом повторно использовать а теперь можно это дело отрубить вот и ну это если у вас много мусорных коннектов нам висит который вам не нужны вот можно сказать keep connection зов и они тогда будут одноразовыми что конечно наверное большинстве случаев не нужно но каким-то экзотик какие-то экзотики захотели чтоб так было вот значит batch сайт это значит это размер пакета которым отправляются и сирт и на удаленный минут на этот фон сервер год то есть раньше чертики шли по одному туда сейчас можно их пакетиками отправлять это должно быть гораздо быстрее вот значит и важно фича такая раньше вдв если отвалится основном и сервер перезагрузиться например удаленный сервер то значит на кд отвалится к нему и он автоматически не будет восстановлен а здесь вот теперь он будет восстановлен то есть теперь вы можете смело перезагрузить вот этот форин сервер свой и продолжать с ним работать но надо сказать что если это произойдет внутри транзакции то все честно произойдет там безо всякого обмана транзакция свалится второй раз не сможете в транзакций обратиться к удаленному серверу если он перезагрузилась но если не в транзакции то тогда пожалуйста connect будет восстанавливать вот значит еще маленькая смешная такая оптимизация значит shared памяти дело в том что при параллельном исполнение запросов подгрести worker и общаются между собой через shared памяти там при этом постоянно выделяется структуры вот но то есть постоянно в операционной система мы получаем там сегмент shared памяти для того чтобы с помощью его обменяться с брендом вот но теперь есть такой небольшой кусочек который можно предупредительность его размер управлять вот этим параметрам можно выделить такой кусочек и он будет уже как бы не оба целоваться каждый раз заново можете им пользоваться и вот эти графики показывают насколько большое может быть ускорение ну вот ребята эти графики сделала непосредственно те ребята которые делали этот патч вот ну вот видно что здесь есть группа хороших графиков это те которые выше вот и единицы относительное число процессов по горизонтальной по высоте 30 относительно единицы насчет такая может быть несколько раз можно получить выигрыш за счет того что каждый раз не создаются новые сегменты shared память значит дальше по статистике по статистике измене так много вот нашли некие недоделки в использовании статистике ворох она как с плохо использовалась значит появилась возможность создавать статистику корее статистика по выражениям это хорошо вот и значит оценка количества записей в пустой пустых таблицах она стала равна нулю что тоже иногда бывает удобно вот значит новой операции конкурент ли при портировании можно отцеплять партицию can caring ли значит то есть раньше если вы а цепляли партицию вот и при этом вы с ней работали она блокировалась вы новое и старое дорабатывали запросы с ней после чего она фактически отцеплялся новое не могли использовать эту партию до тех пор пока не могли работа спарте церовани таблицы пока не завершится вот это вот оцепление партиции теперь они будут продолжать в ней работать они просто не будут ее видеть вот соответственно еще одна фишка что теперь раньше конкуренты яндексе можно было что-нибудь одно только за в один момент времени теперь можно много вот но пункт разное говорит о том что мы подходим к концу значит это некий еще некая разнородная сборка так интересных фич значит появился альтернативный метод компрессии но надо только не забыть под компилить соответствующую библиотечку эта компрессия то 100л z4 быстрее вот это все к тому что значит производительность постоянно народ не устраивать люди ищут как бы с ним но можно его прочим вообще не жрать такая который существует существует давно год значит можно транг этих теперь раньше нельзя было тратить при секционирования даль иную секцию которая через давай теперь можно вот значит появился параметр idol fashion time out который позже автоматически убивать недействующие сессии вот полезная вещь значит и уже то о чем я говорил еще одна оптимизация зачистки шарит буферов при опираются step от ран кейт вот ну еще одна часть сколько их у меня будет не так много на самом деле еще одно разное значит добавили атрибут hand компилятора cold для обработки ошибок считаю что ошибок в целом меньше чем не ошибок вот это может немножко ускорить нас вот энгри ментальная сортировка теперь используется еще его конных функциях вот что такое на ментальная сортировка я говорил год значит пространственного порядочно это это же за кривая значит некий патч благодаря которому gist яндекс по пространству стала строить быстрее теперь вот и индексировать можно секционирования таблицы при этом индексируется реально секции параллельно исполняться могут теперь индексной сканы по индексу типа бета регист и вот значит параллельные с колпачками блоков это имеется ввиду чтение чтение с диска то есть раньше разные варки рассчитали по одному блоку прочитал почитал прочитал прочитал так как по одному а теперь они могут читать больше блог уже какую-то пачку так быстрее работать здесь речь идет о чтении с диска при насчет правильном исполнении секунд скана вот но собственно на этом перечень fitch который хотел рассказать закончен вот я надеюсь что каждый может быть нашел себе какие-то интересные фичи которые он хочет узнать чуть подробнее значит прежде всего я рекомендую эти серии статей которую мои товарищи написали значит игорь легче написал про тринадцатую версию статьи сколько нового в чертовой дюжине вот а про 14 версия павел лузанов написал в целых пять статей по всем коммент тестом вот где какие-то вещи он разбирает очень подробно вот принципе там можно найти больше информации чем я рассказывал по некоторым fi чем меньше но по большинству конечно больше 5 статей огромный труд вы просто обалдеть и всех читать это нелегко вот но познавательно вот лучших обзоров пока не относится можно там поискать другие обзоры в сети на на них всегда и на них очень много ссылок там вот в этих поэтому рекомендую начать чтения с этих статей на хабре вот ну и напоследок я хотел бы сказать что мы планируем провести позже con frage а 20 21 сентября пока что я сейчас объявляю эти даты впервые вот регистрации еще нет на днях появится следите за анонсами спасибо за внимание вопросы спасибо иван отличный доклад поднимайте руку раз она вот напомнили про в деве как раз и у меня по этому поводу опрос блокада говорили в деве много накладных издержек много это насколько то есть если считать унаследуете по сети более-менее приличный и мы там один тот запросто выполняем напрямую к серверу и через их деви там условно прослойку и не поставили сколько мы процентов потеряем в производительности или сколько миллисекунд если речь о коротких запросов можете потерять несколько раз даже вот а еще каждый день вопрос из нас запрос грубо говоря в котором еще время таблицы с грубо то есть время таблица даст на локальном сервере по и в деве и соответственно пойдет уже на второй сервер если какая то время время таблиц создается запросе ну то есть если мы время таблицу сдаем и дальше просит огня им время таблицу которая создавалась на одном сервере как 2 поля сможем другую серого до в этом случае мы был потери какие дополнительные или нормальный план запросу составе то там никаких травм от вас запрос составит все точно такой же но вам придётся достать какой-то количеству записи через ftp перетащите сюда чтобы здесь сделать вот но если это много запись чем длиннее результат запроса которые череды вы делаете тем насчет меньше издержки и здесь тоже будут не прогнозируем избушке да по большому счету нет но и невесты что не прогнозируем прогнозирует будет несколько раз ты иди лучше спасибо добрый вечер а вот по поводу парами красе шоу и dual time out он настраивается для соединения для конкретного или для сервера глобально внутрь он настраивается для сервера насколько я знаю и получается то есть цельсия когда нет никаких запасов мы ничего не выполняется оно будет просто разорвана если нет запросов то сессии проработает это время после последнего запроса тут то есть время выполнения запросов то есть если это не касается а билл idols версия татав который запросов нет спасибо за доклад у меня вопрос про каши первое это по времени сколько он живет и второе сколько памяти вы выделяете и можно ли это конфигурировать значит выговорив лежал тишь да да значит он живет в рамках одного конкретного запроса вот или точнее в рамках действия 1 1 но ты плана в рамках этого запроса вот сколько памяти на него выделяется насколько я понимаю столько сколько надо в рамках work мимо но там есть какой-то коэффициент вот я не помню какой какой-то какая-то доля памяти на эту дело может быть выделена на туркмен а вот отдельного параметра насколько я помню нету насчет этого наверное он появится впрочем спасибо за доклад был интересно очень хотел спросить там был небольшой пункт про тоже теперь и функционал в рамках транзакций теперь кэшируются хотел спросить чем это связано и не вызовет ли это проблем с расхождением данных в рамках одной транзакции нет на у и так она возвращала одно и то же время в рамках транзакции зачем тогда каширование добавили просили одно и тоже было чтобы быстрее работала наверное ну вы почувствуете это если вы на у безумное количество раз вызываете то есть вы создаете какие нить маленькие лёгенькие записи в которых 10 полей типа timestamps дефолтном"
}