{
  "video_id": "l4yLfON3ffQ",
  "channel": "HighLoadChannel",
  "title": "Архитектура АБ тестирования сделай сам / Сергей Аверин (Badoo)",
  "views": 333,
  "duration": 2355,
  "published": "2017-04-22T14:46:00-07:00",
  "text": "здравствуйте меня зовут сергей я работаю ум это свой сайт социальной сети заказ новыми людьми у нас зарегистрирован аппарат один 105 миллионов пользователей поэтому я сейчас не могу сказать что мы большой проект порядка 10 миллионов пользователей заходят сергея извините что перебиваю поближе к микрофону вас плохо слышно и порядка 10 миллионов пользователей заходят на сайт течение дня все это дело работает мощью 2 дата центров в каждому больше тысячи серверов и обрабатывать в сумме в пиках порядка 50000 динамических запросов в секунду но backend соответственно еще больше у нас два больших офиса один москве другом лонни разработка ведется и там и там вот головной в офис в лондоне и мы используем достаточно стандартный л л м п стек правда сильно доработанный из обычного mais quel php много разных си си плюс плюс самописных программ linux engine x спасибо со своего и разные разработки оля memcached но в том числе много open source продуктов вышла из нашей компании например пин бы это анализатор производительности php-fpm такой из патч для php и мы делаем разные почти для пить пиво для печки юнит недавно released для морской или пушем их в ядро проектов для кого доклад в общем то надо понимать что мы большая социальная сеть мы заинтересованы в том чтобы нас пользователи жили долго поэтому для тех сайтах где пользователю может идентифицировать его посещение сайта можно отслеживать долгосрочно и пользователю вам нужны надолго и нужны как бы одни и те же для разного рода банков социальных сетей для блогов проекта с большой посещаемостью и для тех сайтах где нужны более сложные критерии оценки чем просто вот единоличная продажу заказ или регистрация пользователей там где важна больше не прибыли от а сколько человек проводит времени на сайте про сложности я честно говоря пытаясь всех убедить что да не очень просто но ничего космического в докладе нет вообще я уверен что вы можете повторить это силами двух трех разработчиков за три недели я это делал в одиночку по большому счету ну большую часть и длины даже для небольших сайтов вы можете повторить этот проект сильно сильно похожи архитектурой и сразу же начать измерять результат в реальной прибыли вот ну вы конечно спросите зачем вообще человек который все сделал доклады по протоколу и халат будет нам рассказывать сейчас про оба тесты и праха и лот потому что мы выросли и нас понадобилось некой новой методика оценки качества запускаемых fitch нужно понять как улучшать сайт нужно понять поднесет ли новая fitch больше денег или нет и раньше мы сделали так выбирали какую-то новую фичу запускали ее в маленькой стране с небольшого посещаемости и если нам повезет и юзер этой страны не свалили там и оценивали циферки и сравнивали их обычно либо с цифрами до запуска теста либо с цифрами соседних стран примерно похожих по менталитету но как бы идей много продуктовая команда растёт на всех идей стран не хватит поэтому получается так что нужно как бы выбрать из нескольких похожих вариантов но хочется достоверной оценки к какая все-таки из вариантов намного лучше остальных и самое главное оба теста можно проводить на очень малом количестве пользователей если вы выдерживаете условия как бы неприкосновенность этих пользователей не портите условия теста то достаточно взять там тысячи две три и пользователей результат для всех будет такой же поэтому даже если все они свалят сайта урон будет невелик ну и вы конечно сразу же меня спросите зачем городить велосипеды зачем нужно будет делать свою систему и же много классных систем которые можно в интернете купить за 20 долларов в месяц вот отвечу мы эти системы многие разные пробовали в итоге по итогам этих проб мы выбрали одну она называется optima если мы какое-то время пользовались пытались интегрировать мучились мучились вот так примерно выглядит интерфейс этой системы где вы задаете эксперименты то есть вот одна попытка что-то исправить и дальше у вас есть интерфейс редактирование в узелок интерфейс где вы можете загрузить страницу своего сайта выбрать какой то текст или кнопку которого хотите улучшить редактировать и и css свойства изменить текст увеличить шрифтом поменять картинку добавить из этого всего воссоздать несколько вариаций утони в табах вверху написано в орешин один в рейд шин 2 они соответственно собой сравниваются и вы оцениваете результаты вот но проблем был добегать во первых это гадина тянет за собой 22 килобайта джек вере во вторых это все грузится с внешнего сидена поэтому страницу при загрузке прыгают сначала нам показывает старый дизайн потом бег и новый в третьих совместимость с нашим ходом у нас сайт работает ну примерно как у фейсбука то есть разные части приложения грузятся отдельными xml и перекрестными некоторые вещи сильно динамические и поэтому нужно было сильно морочится интегрировать все это дело к нам вот локализации понятия в языков у нее нет никакого нет поддержки переменных окончаний я уж про русский язык даже не заикайся и самое главное невозможно выбрать пользователь по полу языку и прочим то что эти переменные которых хранятся в дебрях нашего сайта их приходится протаскивать в java skype переменные и писать сложные условия выборки на java script те которые выбирают эти группы и самое печальное что очень ограниченное применение потому что такое jars кейп-код нет никакого api и поэтому можно тестировать только веб-сайт больше ничего не с ним о его не какие-то фичи завязано время и цифры вот поэтому получается так что печально но главный вообще не в этом главное в том что такие системы все и подобные они все из мира ecommerce у них важно как три страницы главной странице сайта каталог и стоится товару примерно протока что ребята вчера рассказывали на докладе проведе саула что есть три главной странице интернет-магазина анализируем воронку продаж то есть морем где пользователь сваливает пытаемся улучшить оставляем их пользователи на сайте доводим его до кнопки купить и он нажал купить все следующий пользователь нам больше не интересен там все достаточно одноразовые а мы ни фига не интернет-магазин мы анализируем поведение нам гораздо важен важнее что пользователя на сайте остается чем вот то что много платят поэтому нам нужна статистика по большим количество параметров например как часто заходят на сайт сколько времени проводит на сайте как много чатов он открывается много картинок он лайкает и за больше гораздо срок чем от момента захода его первый раз на сайт до момента нажатия какой-то кнопки которая является целью поэтому мы решили сделать свое решение и оно как и всегда имеет свои плюсы и минусы и минусы как известно продолжение плюсов в из плюсов стоит отметить большую гораздо применимость можно тестировать с м с можно уплыть из нибудь уведомление на iphone например выдерживает большие нагрузки никакого java script и никаких моргающих страниц заранее подготовить и шаблоны или лице ссн выглядит так как вам нужно и весь ваш функционалу в общем-то перевода на другие языки и локализации окончания на русском языке ставки картинок зависимость каких-то условиях доступен весь ваш прибор доступен но из минусов очевидно надо ходить нужны разработчики нагрузка теперь под на ваш сервер а поэтому нужно дополнительно сервера процессами время память и для многих открытий что статистику результаты тестов тоже нужно считать самим поэтому нужно строить статистическую систему вот и самый печально что не надо пробовать вот делать свой звук редактор это как бы сложные гендерным большому счету мне нужно и объясню почему просто вы очень-очень много потратьте время на этой проект будет не несу неразумным совершенно по срокам по времени и по цене и по этому на эту вещь нужно сразу забить я считаю и из нее можно прекрасно жить вот как у нас устроено в системе тесты есть у вас письмо которого знаете что плохо кликают аж на соседние песни кликнуть намного лучше вот такое письмо с плохим тут ветер и дальше у нас есть там три продукта один проданных говорит что слушайте я знаю точно нужно сделать кнопку красный и тогда клик рейд вырастет в небеса и все будет прекрасно этого письма но есть дизайнер с другим мнением он ведь что нужно сделать зеленый заголовок тоже дизайнеры любят зеленой заголовки а есть 3 продакт-менеджер который говорит что слушайте я знаю котики это самое важное без котиков ни одно письмо не работает и поэтому в итоге у нас вот рождается вот такая вот иерархия из трех типов объектов первый это тест тест как бы это отдельная ну таблицы в базе сущность которая показывает что это одно конкретное исследование попытка улучшить какой-то маленький функционал на сайте с определенным сроком начала сроком конца у тесты есть две группы или три группы четыре группы которые определяют аудиторию пользователей над которым который мы покажем определенные варианты группы между собой не пересекать то есть группа определяет людей с одинаковой ментальностью например мы знаем что вот девочки любят котиков а мальчики котиков не любят и поэтому девочкам и котиков показывать будем а мальчиков нет чтобы мальчики совсем не расстроились и сайт они подбегали вот поэтому варианты у нас будут разные среди вариантов соответственно съесть контрольный вариант он использовать для статистики в нем ничего не меняется это просто группа пользовали которым покажем то же самое что и было раньше они нужны для сравнения для оценки результатов и несколько вариантов с измененным дизайном в итоге все это дело на пару вот в нашем тесте на практике выльется такую структуру вот будет тест на попытку прогона этого дизайна письма будет две группы мальчики и девочки между собой непересекающиеся у мальчиков будет контрольный вариант вариант с красной кнопкой и вариант зеленым заголовком у девочек будет контрольный вариант вариант с красной кнопкой вариант с котиками потом мы как бы прогоним письмо посмотрим что вот отправлен 2000 клику столько-то посчитаем click to rate тут соответственно в группе мальчиков побеждает письмо зеленый заголовком она дает полтора процента прироста клик трейдеров группе девочек побеждает письмо с котиками очевидно она дает даже полтора процента прироста кликай вот так не плен на все это дело на резину только по большим количество параметров и с высоты птичьего полета как бы когда мы задумались задумали всю эту систему хотелось бы конечно что вы работал до примерно так пункт первый вот заходим на facebook страницу выбираем куда текст или письмо в нем редактируем значит растягиваем мышцы заголовок доклеиваем картинку из не ну короче все это очень круто но минимум погода и не меньше очень очень дорого поэтому и нет никакого смысла это делать поскольку тест ваш идет неделю зачем вам делать огромный интерфейсе на который будет создавать письмо которое идет неделю вы сами можете взять в разработчики за 5 минут шаблон списать все свойства что картинка должна в двадцать раз больше это лишние затраты сил поэтому совершенно нормально найдешь во время разработчика которые подготовят два шаблона красные с котиками или там два css файла или два дополнительных значений sms-уведомлений заходим в какой-то бы кофе интерфейс вписываем эти значения настраиваем параметры тесты группы время запуска конца вот и дальше пункт которого к сожалению как не избавиться приходится лезть php код 1 осы вместо где вот отправляется этот текст в функцию выбора шаблона списывать еще один вызов функции которые соответственно выбирают зависимости от пользователя нужный шаблон вот один раз потом можно несколько тестов прогонять дальше выбираем метрика или список набор метрик из которых мы будем делать выводы о том работают эти варианты или нет запускаем тест прогоняем и убеждает что это метрики собираются и дальше берем кого думного садимся значит за интерфейс аналитики какой-то и анализируем результаты потом значит встраиваем этот шаблон в качестве основного вот а теперь собственно архитектура но для начала сделаем систему сбора статистики на которой все это базируется вот значит есть у нас вот такая иерархия из по сути 5 объектов но два из них одинаковые 1 этапе api для статистики очень простой есть ровно одна функция которая два либо три параметра она принимает тип события она принимает юзер айди и она принимает опциональный параметр какой-то которого хотите записать например у проголосовал за единица проголосовал против 0 тут все просто она соединяется со скрабом это отдельный сильный демон который написал фейсбук который по сути является большой трубой сокетов которые можно из которых можно строить деревья например с сотней разных стран баф собирать все записи на одном сервере он ничего про эти записи не знает по сути это просто большая водопроводная труба и он очень-очень хорошо переваривает огромный объем вылившейся в него данных поэтому у нас например на сайте примерно 100 миллионов записи иногда в день туда валится причем он настолько умный что данные не теряет и в случае если он uplink потерял до следующего сервера он их пишет файл потом когда плен появляется из файла выписывает обратно вот все скрою демоны у нас подсоединяются к одному скреп коллектору внутри дата-центра куда валится информация со всех со всех со всех машин с php вот скоро и в коллектор настроен так что создает на каждое событие отдельную папку и внутри папки создает файлы с этими записями по одному файлу примерно в каждую по одному файлу примерно в каждой две минуты вот так вот выглядят примерно эти папки вот так вот выглядят файлы которые он создает и вот такие у нас записи до to use ради и значение параметра дальше вход включается скрип процессор статистике которая tiff файл разбирает и кладет базу данных он работает много потоков ничего сложного в этом нет в php просто for кайтесь намного процессов и делайте флаг каждый тип события кладется в отдельную таблицу причем таблица создается 1 на день что быстро работал чтения-записи вставка повторные события мы где-то где можно выкидываем например вот забегая вперед что если пользователь два раза как бы часто в одном и том же тесте нам не нужно хранить эту информацию мы просто записываем одну запись что дауна часто в этом тесте там где нельзя берем по 100 записи и пишем бал концертом в таблицу для некоторых данных нам вообще нужно только агрегат типа среднее значение 1 5 минут поэтому мы написали отдельный php фреймворк как бы маленький который агрегирует значение из этих файлов и пишет нам раз в 2 минуты значения текущее среднее вот все это очень просто и вот в итоге получается в самом простом случае вот такая таблица время use ради и значение параметра из файлов много много таких таблиц баз данных и совершенно обычное лучше конечно использовать большим количеством ядер памяти и все такое вот мы используем их стратегия нам лучше масштабируется поеду но в принципе в вашем решении может быть погреться все что угодно нечего тут особого нету вот такая у нас получилась очень очень простая архитектура который собирает статистику и значит давайте теперь сделаем из нее об и тестирование вот это подвинем все в угол в неизменном виде первые добавим отдельно базу который хранит настройки тестов что в этой базе вот наша знакомая структура из 3 объектов каждый в отдельной таблице везде связи 1 кв м очевидно у тесты есть айди название теста даты начала до конца и статус запущен остановлен там подготавливается группы соответственно имеют айди со сквозной нумерации имя и разные критерии выбора пользователя нас там они фиксированных порядка пяти страна по язык возраст и что-то еще вот и соответственно варианты контрольный вариант и несколько вариантов которые подготовлены там дизайнером программистом в каждом варианте хранится значение соответственно и имя этого шаблона которое должно быть вызваны ли значение переменной которая изменится либо какой-то и вот текста sms уведомления который мы пошлем и дальше над всем этим делом накручен бэк-офис интерфейсе он как бы ничего сложного себя не представляет в а суть это редактирование 3 таблицы он позволяет создавать удалять тесты группы варианты он проверяет что группы не пересекаются по аудитории по их условия он заставляет вас указать дату начала и конца теста он позволяет запускать останавливать тесты и он может вам делать некий дебаг это очень удобно например расскажи мне какой вариант увидел пользователь x или расскажи мне в какой тест попадет изрыгает соответственно вот так вот все это дело примерно у нас выглядит слева колонка с тестами справа булочки с группами в группе заданные условия вот что любой возраст 10 процентов пользователей и мужчины и женщины говорящие по-английски только в ирландии вот так выглядит страница создания тест имя описания и соответственно дата начала конца вот так выглядит страница редактируем эксперимента выбирайте нужные языки выбирайте нужные странные возраст пол и количество процентов от этой аудитории которая льна попадет в тест для того чтобы оно было небольшое вот и здесь создаете на последней странице нужные варианты в которой вписываете значение этой переменной которая должна измениться например название шаблона дополним все это дело теперь api тестов которые мы будем дергать с php кода который будет нам отдавать это значение посередине поставим memcache ну что быстро работал и был красиво вот и все это дело будет у нас вызывать api статистики и туда репортите информацию о том что конкретный вариант был просмотрен конгревом юзеров это всего лишь одна функция тоже ничего вообще сложного она принимает объекты юзера и она принимает некий контекст странице где где ты сейчас находишься соответственно в php страницу 1 расписывайте вызов и функции вам выбирает тест группу вариант в котором этот пользователь должен сейчас твой причем жестко привязывают что один тот же пользователь должен видеть один и тот же вариант соответственно для той странице где ты находишься она отправляет эти данные статистику как факт просмотра то есть вызывать нужно тогда когда вы точно знаете что этот вариант будет послан пользователю вариант там получит это письмо 7 осведомление ли мы там пошли маму какое-то письмо с заданным интервалом которого выбрали а в ответ возвращает либо ну это значит что в тесте не участвуешь и мы данную статистика не посылали ничего не надо менять либо заданное в варианте значение переменной или тип поведения или название шаблона вот то что вы тестируете у нас примерно в системе доходят до 3 миллионов вызова в день в среднем где возвращается не ну то есть пользователь в тесте участвует вот про выборку тестов вот самая сложная часть этого api это выборка тестов она выбирает пользователь тест про это я расскажу чуть попозже группу выбрать дальше очень просто если выбранный теста группа убирается просто по условиям потому что группами чтобы не пересекаются и соответственно дальше абсолютно равны вероятно можете использовать остаток от деления выбирается контрольный вариант либо один из вариантов с измененным дизайном причем абсолютно равна вероятно и вы будете дальше статистику сравнить сырых цифру 5 между собой потому что примерно одинаковое количество пользователь увидит каждый вариант вот как выбрать тест хуже всего когда люди делают вот так вот юзер айди и остаток от деления на количество пущенных тестов потому что когда количество тестов меняется то меняется совершенно распределение пользоваться между этими тестами и большую часть пользователь перераспределяется получается так что пользователю неделю участвовала в одном тесте потом другой какой-то т закончился после перекинула еще в 3 какой-то тест вот поэтому здесь надо по морочить написать какой-то красиво алгоритм который буду использовать либо consist in fashion либо заранее в делал несколько боров пользователей выбирал один из них там жестко до конца от теста либо например самый как бы фиговый на самом деле вариант написать алгоритм который помечает тех кто еще в тесте не участвовать приклеивают к разным тестом и потом привык каждом вызове этой функции проверяются каком то есть этот пользователь участвует а вариант выбрать очень просто вот остаток отделения только лучше всего используется c32 потому что ну я вот сделано при расследовании нашем сайте получается примерно около полтора процента разница между use ради заканчивающимися на бит 0 и use ради за качественно бит 1 вот так что лучше использовать crc32 любой хэш-функция так остаток от деления все просто скин процессор статистике которые у нас был просто дорабатываем до того что мы собирал отдельную таблицу больше у немножко размера и получаю вот эту статистику об участии пользователя в тесте создавал бы таблицу где был бы юзер айди номер теста номер группы куда он попал номер варианта который он увидел и если очень хотите можете сделать коллить подсчет количества хитов но в принципе это не очень нужна ну и соответственно я ещё делаю да тоу попадания в первый раз тест и дату когда он последний раз увидел шаблон вот вот такая у нас получилась архитектура дополним ее одним маленьким штрихом сделаем скрипт который будет копировать нашу информацию от теста в бал со статистикой просто чтобы тупо было удобно joy нить чтобы это все было в анализ шоу в рамках одной базы данных вот мы и самое главное прикрутим интерфейс анализа то есть какую-то систему которая нам будет говорить чего в итоге какой вариант победил тут пространство для творчества огромные хотите используйте сырой сквер периодическим начинали с этого можете joy нити таблицу со статистикой на таблицу с фактами участия пользователя в тесте и тогда вы любую метрику например количество кликов там или хитов разбивайте в количество вариантов которые в этом тесте участвовали и можете такой же примерно отчет как я вам показываю построить хотите напишите скрипт который будет подобно отчеты генерировать и например запихивать в excel в экселе файл хотите сделать и графе и красивый графический интерфейс хотите сделать ибо кофе страницу с графиками у нас и бы кофе страница с графиками есть для того чтобы отслеживать какие то аномальное поведения или выдачу огромного количества шаблонов вдруг случайно какие-то всплески вот лучший вариант большие бизнесы делать системы бизнес-аналитики то есть отдельную там enterprise штуку за кучу денег который имеет свою базу данных которые много много много много данных искал о ночных баз данных джон нет между собой и соответственно генерирует вам какой-то report мы используем такую систему бизнес-аналитики но по очевидным причинам маленьким бизнесом она не подходит поэтому я бы на самом деле реке на лавочку и подходит как бы если что вам нужно знать о точка join и там очень простые вот пример запроса вот и как все теперь это у нас работает работает это примерно так расписывайте в код места где за юзер заходит на сайт и зарегистрируется код который собирает статистику и дальше в ходе обработки запроса дергайте нужны функция выбора нужного шаблонов варианта поведения в общем api нашего система тестирования она в ответ возвращает null это значит что пользователь тесте не участвует либо она возвращает контрольный вариант это значит нужно показать тоже что был раньше либо она возвращает новое измененное значение ваши переменные или там время нового уведомления или но я не знаю количество писем которые надо послать или новый текст sms который надо послать соответственно заходите в интерфейс настраивайте тест дожидаетесь пока там все готово запускаете тест завершайте тест и в базе данных получаете большой набор таблица статистики таблицу с фактами участия в этом конкретном тесте и таблицу которую вы скопировали из базы данных с тестами с описанием чё за тест группа и что за варианты соответственно берете кого-то ум на узловой садитесь и начинаете анализировать результаты либо вот залез власть в бейн анализируйте результаты вот про оценку результатов собственно вот финальный важный слайд из нашего опыта вот какие мы вынесли я вынес для себя важной ремарки это то что условия тесты не должны меняться от начала до конца но это очевидно тогда у вас будет как бы тест в пробирке лабораторно правильный и тогда вы можете быть точно уверенным что результаты можно верить но при этом достоверность результатов нужно проверять потому что есть такое понятие как там контрольная выборка и она должна быть больше какого-то определенного количества пользователей поэтому для этого воспользуйтесь google напишите там g тест confidence вот почитайте доклады аналогичную тему там ничего сложного есть просто 1 форму вот отдельная ремарка про для сайтов у которых много разных языков переводы часто портят результаты к сожалению когда вы создаете новый там версию с м.с. одни переводчики переводят на один манер другие переводчики переводят на другой манер поэтому в итоге в общем если вы делаете тест без разбиения там по языкам то результата a-к оказывается немного смазанным поэтому постарайтесь во-первых карат с заканчивается проверять то что группы у вас действительно были гомогенными они имели все одинаковые поведения аудитория была в них подобное соответственно по двум трем ключевым параметрам то есть разбейте результаты дополнительно по стране и посмотрите что цифры клик рейтов примерно одинакова во всех странах либо второй вариант и мы на примеров про сразу практически часто очень выбираем там либо один язык либо 2 либо если больше то мы делаем отдельную группу на каждый язык соответственно при анализе результатов иногда может быть такой интересный результат когда значит на одном языке один вариант побеждает на другом языке другой вариант побеждает и ничего страшного это нормально и хорошо не стесняйтесь выбрать ни один вариант а два просто сделайте так что в одних странах показывался вот нужный вам перевод которого сделали который победил в этой стране в других странах показывался перевод который победил в тех странах если у вас такое получается что девочкам нравится письма с котиками а мальчикам зеленых заголовками не стесняйтесь внести в код дополнительный iv и отсылать один тип письма мальчиком он в эти письма девочкам только без фанатизма прошу вас вот и в общем и целом то что я вам пытаюсь донести это то что смотреть хейг рейд на больших проектах достаточно узколобые день лучше выбирать несколько параметров и делать комплексный анализ спасибо вопросы спасибо интересный доклад спасибо но вот у меня такой вопрос вот ситуация когда у вас зеленая кнопка красный заголовок все круто все просто мы добавили их и сделали там в просто на уровне шаблоны а если например ну то у вас сравнение ну скажем так что мальчиком нужно показывать что он выдает его посетили пять вот таких страниц это видимо вам понравится вот это а для девочек нужно там показать не котиков грубо говоря а там у вас есть такие на три подружки которые нато пошли угу куб и там не знаю вы выбрали вот такой вот там подарок картинку я не знаю что угодно это не относится к тестам у нас есть похоже алгоритм он и так тестом большому счету отношений какого не имеет просто предсказание поведения предсказание того что пользователю понравится меня и я имею виду что вот мы пытаемся там кастомизировать эту рассылку зал чтобы она стала эффективной то есть если например идея не просто там что-то перекрасить а именно на уровне функционала то вы именно будете инжектить вход вот эти вот надо 5 вариантов там-то уж уже там не пять минут на уровне шаблона да там неделю на уровне передал допустим если взять письма-то шаблон письма которому пошлем когда тебя за лайкал один человек и залайкали два и более человек будут разные шаблон письма если тебя за лайкнул девочка или если те за лайк там мальчик либо те озолотились смешаны то есть мальчик девочка табачек тоже будет разный да но без фанатизма то есть максимум того что я видел это 6 вариантов то есть вы прямо это в код и инжектить и и завязывайте да но мы стараемся такой функционал если это как бы какая-то функция на сайте типы там поиска завязывать это именно в тот без бизнес-логику поискового демона если он как бы знает то там какие пользователи нужны то он соответственно ну просто меняем как бы там у горит в ранжировании грубо говоря и вы енджэ какие прямо hark одитинг виде теста или каким-то другим образом привязываетесь носом там на самом деле как бы пройди тест и есть два варианта но смотрите и вот это все тестом отношение к кого не имеет давайте потом это встретимся и объясню просто вот эту нас к тестам отношение имеет просто дав hard кожу несколько вариантов но немножко по-другому а сейчас расскажу его опыт ну если мы покрасим кнопку войти на кнопку поддержки у нее будут кликать 1 там несколько недель у ними что она выглядит реально лики теста показательным на грани вот она работает блин простите микрофон звенит да да да смотрите мы берем кнопку на сайте этом в письме красный красный цвет ну конечно будут больше при котором просто стала данная по рассказу как что красная кнопка само по себе ничего не значит потому что может он через два дня и свалит сайта вашего задавали красные кнопки ну да либо он свалит сайта но вот у нас я забил the girl fight and виде в месяц вы руках не поймаете не почему мы смотрим срез больше чем время заката шел тест я не понимаю вот вас идет неделю а задал бы до 2 недели блин не слышал а тест идет неделю тест идет неделю а человек свалят через три дня поставок т закончился а чай отсека задал бы красная кнопка за месяц например такой может ведь вот он новый год музыки задолбался но может может быть может быть конечно поэтому мы стараемся смотреть результаты теста за большой во-первых чуть дольше их гонять чем две недели во вторых и больше временной промежуток там захватывать обычно остается идет месяц на самом деле вот так сейчас сложилась вот тебя задала несколько вопросов вам есть скажите у вас получается горит отвечает за то что не бывает наложение этот этот тестов на 1 странице для нового папу папу пользователя лучше стараться так делать а судя для 1 куб у пользователям может быть тест на разных страницах типах или это как решить в один момент вы как вы режете это лучше типов видео гнал bra top на варианте лучше чтобы один пользователь частота в одном тесте но как повезет учились в письмах и мы делаем один пользователь может попасть несколько скажите что у вас получается за плату за парковку самих т т т т т т т т т т химический персонал то есть и возможности запустить т т т т т с без вливания на продакшен нельзя так но не совсем так у нас допустим вот где мы тестируем email за подготовку тестов отвечает тот кто пользуется интерфейсам это в основном менеджер который отвечает за почту и у него интерфейс вы обычный веб-интерфейс куда он вписав выбирает текст из письма и вписывать замены вариант сам этот перевод автоматически переводится автоматически создается шаблоны на всех языках которые он указал и функция которая выбирает шаблонов она навечно в хардкоре на вход сайта поэтому для запуска тест ему нужно только дождаться выкладки которая два раза в день происходит нажать кнопку старт кнопку старт не активируется пока фреймворк не найдет все шаблоны которые лежат продакшене у которые нужны то есть в каких-то местах так в каких-то местах без php разработчики не обойтись то есть у вас принципе у вас интерфейс позволяет как менять и текстах и дизайн чистишь текст техника тех сейчас я только текст вопроса определение юра на викенде также вопрос а как вас скажет с кэшированием таких страниц блоков и если это не письма примеру если на сайте мы готовим в про то что по аренды рен он одинаковое время занимает что для вариантов с измененным дизайном что нет того что это заранее подготовленный шаблон полностью весь файл целиком просто в этом файле кто-то там поменял две строчки а здесь шаблон кто заканчиваться на . тпр лист который шаблон за конечно . а b 2.2 . а когда приходит запрос на frontend каким ключом определяется как какой бы вариант показать папу папу пользователю мы шаблонизация на клиенте не используем нас на java script шаблона не отрисовывать на стопах и по часть отрисовывать шаблона она всегда знает какой юзер айди янкиз отвечает за это он мне однин из php сервер который чтобы их завтра нас на встроен способ как session и либо соответственно в момент 8а шаблонизатора будет выбран нужный вариант сергей привет спасибо за новый доклад вопрос такой как вы управляете растущей цикла магической сложности вот этим большим количеством мифов как со стороны программистов им ну тяжко я подозреваю постепенно становится и бизнесу тоже потому что ему нужна сколько держать в голове или это не проблема это не проблема потому что для того чтобы запустить тест нужно писать ровно одну строчку кода чтобы поддерживать это все не то поддержки было девочки девочки ну то есть одно дело письмо да а в будущем вот эта страница показывается так это так и вот таких сверчков как бы как и понимают добавляется больше больше смотри такие как бы решения чисто техническими не бывает они всегда основаны на разуме поэтому есть некая договоренность во первых что если какой-то вариант большую часть победил то мы никогда никогда не встраиваем два варианта в строим один просто берем файл шаблоном который у нас был удаляемого из репозитория этот файл который был сгенерирован как подменный вариант переименовываем то чтобы он был тем основным шаблоном чаще всего это так худшем случае когда дауд у вас есть разделение но понимаешь мы через этот это просто уже немножко прошли да у нас есть письма которых есть ifo но мы просто договорились что там больше 6 их не будет но опять это все сделано так что шаблонов не 6а шаблон 1 просто в шаблоне некоторые переменные которые попадают шаблонизатор они ну как хвостик дописывать они определяют допустим там типа той ту подчеркиванием mail такого подчеркивать mail и у нас есть как бы ровно одна переменная которая передается там чтобы ну типов шаблонизатор которая определяет 11 6 вариантов то есть это все один шаблон просто выбирается одна из 6 кусочков текста какие спасибо 6 pov это большой вопрос можно здесь сергей по поводу той части где у вас идет сбор статистических данных по тестам потом идет их обработка складирование в базу потом еще агрегации этих данных из разных таблиц они рассматривали здесь более такой целостный вариант как мы придешь например в рим с мангой где можно хранить все данные в одной коллекции tom принять данные хранятся в одной коллекции но эта коллекция подготавливается отдельными скриптами запихивается в биосистем где стоит колоночный базу данных которых такие join и нативные как бы любит а в принципе спроектирована для таких джайнов то есть мы допустим у нас есть там статистика за три месяца на нам в общем-то не сдалась эта слишком много данных и мы берем с арестом за последние две недели и запихиваем его единой таблицы в бизнес-аналитику то есть по придется как то избыточное в данном случае получается на инструмент нет на самом деле нет нет блин не то что избыточно просто если у тебя есть возможность иметь один сервер на котором будет база данных и интерфейс для аналитики и join и будут занимать вменяемое время так чтобы менеджер не начинали кусать локти то это решение более простой и дешевый но я также например был на докладе от одноклассников у которых есть сколь там системой бизнес-аналитика построена на нескольких там из коваль базах насколько я помню не там вообще с помощью поиска или делают join и кто-то например использует я ниже по моему используют hadoop отдельно для сложных вот выборок ну то есть просто пространство решение там очень огромная если типа умещающийся в один сервер зачем тебе hadoop hadoop у нас тоже есть но мы пока только попробуем его пока все влазит в одну большую как бы систему с базой который быстро делает join и спасибо тебе еще сама родился мы дойдем я так думаю на слева вопрос есть вот вот здесь да сергей спасибо за доклад мне вопрос следующие как я понял что вот это все касается каких-то текстурах переводов и прочего нет это также например мы сделали тест пользователя нужно уведомить с со звуком и без мы проверяли какой смысл лучше работать днем какой лучше работает ну речь идет о контенте а когда у вас есть два три варианта например организации бизнес логики или какой-то последовательности работ java скрипта или генерации страницы ведь этот путь при continues integrations он видел еще пройти определенные тестирование как вот у вас свято завязано то этот человек еще раз смотрите вот вы в или нега мы тестируем не только текст и не только шаблоны мы тестируем цифры например время по ссылке уведомления через две минуты через пять я хочу немножко другой спросить тестируете ли вы например разные виды страница притом собраны совершенно по рад и стираем то есть речь касается не только дизайна а именно предоставляемого контента или последователь свой контент и и но условно просто абэ тесты не инструмент супер мега инновации надо понимать что это всегда по большому счету средства тестирования малых изменений да мы делаем новую главную страницу которая совершенно по-другому выглядел дома проводили а pt100 собирали результаты с помощью этой же системы вот но как бы отдельно шаблоны в двух разных файлах то есть отдельные обработчики java скрипта в разные файлы обрабатывают отдельных жестких скрипты получается у вас один и workflows предварительном тестировании потом уже выкладкой правильно но это очень сложная задача которая по большому счету она уже на грани возможностей находится с ним не очень нужно это делать достаточно просто разным пользователям показывать пиздите процента много главную страницу о 50-ти старый и просто посмотреть на поведение если их как бы есть возможность в отчете их нарезать на две группы то там все сразу будет понятно да в таких сложных случаях тестировщики а имеют отдельную task в котором тоски они триггере от нужные варианты из ту подсматривают что все работает java script кликается топки на месте дизайне пополз принципе мало отличаются от разработки обычного сайта в таких сложных самых понял спасибо коллеги спасибо за вопросы к сожалению время истекло ловите варги"
}