{
  "video_id": "PUE6Avu1Yak",
  "channel": "HighLoadChannel",
  "title": "Как жить на острие технологий в продакшне и не сойти с ума / Александр Курганов (Uploadcare)",
  "views": 930,
  "duration": 1737,
  "published": "2018-01-16T13:14:59-08:00",
  "text": "да всем привет меня зовут александр я front-end разработчик заплатки кроме этого я еще один из организаторов питерского сообщества frontier fsp frontend еще немного даже успел преподавать в питерском политехе я начал заниматься в в 2011 году в первые годы это были такие простые сайты которые разрабатывались либо в середине либо если очень повезет в конце нулевых и уже тогда я для себя понял что поддерживать актуальность проекта очень важно 2013 году я попал в amplifiers он тогда был не про смм там я успел поработать там с большими музыкантами и актерами политиками и с ними мне повезло время на задача не как практически никак не ограничилось поэтому я мог часть времени уделять обновлению какие-то плагинов кусков кода и прочего в 2015 году я решила что хочу поработать в офисе не вините меня за это и попал в веб-студию и там столкнулся с сильным ограничением времени на задаче из-за чего мне были проблемы с поддержанием актуальности проектов и в 2016 году я попал в оплот кир где теперь живу как в сказке я пришёл на проект чтобы с нуля полностью делать новый frontend мы решили отделить frontend полностью бэкенда чтобы связаны не были только посредством джейсон api новый front and data такой пока что не очень сложный сингл публикация на реакции редакции сервер сайт рендером с генерации статике из markdown у с с модулями сейчас еще экспериментируя со столиком панин снов production они пока не попали с кучей плагин их в посте с и сам описанных и чужих я сейчас наверное все таки не буду очень подробно рассказывать про новый frontend это сейчас не так важно важно что мне приходится поддерживаете старый fontaine старый frontend очень тесно связан с брендом он работает на джанки там параллельно существует несколько разных дизайнов которые писались разными людьми в разное время у некоторых отдельные системы сборки одновременно можно встретить как джек very так и реак средах сам скрипт и компилируется из кофе скрипта и бабелем из и с 2015 в стилях можно встретить и styles.css и счас и просто css файлы и из-за кучи legacy кода разработка на старом frontend идет очень медленно принести туда что-то новое практически невозможно поэтому приходится мелкие доработки писать на том что есть и методично избавляться от каких-то больших кусков и писать x0 и моя история не единственная такое случается сплошь и рядом и наверняка многие из вас тоже попадали в такую ситуацию почему-то в нашем frontend мире не принято думать о далеком будущем почему-то многие пишут одноразовый frontend если честно моя история это еще цветочки я вам хочу рассказать историю действительно страшными и рассказал мой хороший друг валентин 7 роль ник возможно многие из вас про него слышали когда он пришел в купи билет он столкнулся ну наверное самый худший кодовой базы который я когда-либо слышал во первых frontend безнадежно устарел некоторые пакеты устарели устарели на несколько лет найти по ним документацию кроме того что попало в not модули в ритме было практически невозможно нельзя было просто взять принести какой-то новый компонент и использовать потому что обязательно будут конфликты или этот компонент уже не поддерживает ту версию реактор которые у них и что-то еще сложно было искать новых людей потому что из-за дефицита разработчиков нашей сфере вряд ли кто-то согласится работать с таким устаревшим стеком у трех разработчиков ушел почти год чтобы как то более менее актуализировать frontend чтоб можно было нормально работать при этом за этот год на новые фичи тратилось только 30 процентов времени представляете какая то потеря для бизнеса и в полную силу работала так называемая теория разбитых окон not модули хранились прямо в репозитории сами модули подчинись прямо вновь модуля то что изменялась никак не документировал ась никто нигде не записывал что они изменили якось и до сих пор у них сдерживает выпуск новых фич конечно уже не так как год назад на оставшийся на оставшиеся legacy нужно еще примерно три месяца но силами уже семерых front эндеров в последнее время frontend сообщества действительно стала походить на какое-то собрание анонимных апдейта голиков джуны junior of запугивали проблемами с личной жизнью здоровьем если они будут пытаться угнаться за технологиями джуны выросли и теперь несут эти идеи дальше лично мне кажется если разработчику сложно поддерживать актуальность фронтэнда внедрять в продукт какие-то новые решения то ему наверно стоит поменять сможет специализацию или может вообще поменять профессию мире фронтэнда действительно все меняется очень быстро новой библиотеки выходят практически каждый день и может сложиться впечатление что хотя бы узнать обо всем этом невозможно но я хочу вас переубедить я хочу рассказать как поддерживать актуальные существующего стыка и как внедрять новое решение я утверждаю что нужно жить на остаток называемом стреле технологий нельзя относиться к этому как к хайпу относитесь к этому как важный полезной части нашей работы моя позиция такая обновляете свой стэк не фиксируйте версия с в своем стеки обновляйте структуру приложений и следите за браузерами следите за спецификациями и внедряйте новые решения без страха кто-то может спросит почему я решил вообще об этом заговорить во первых очень часто слышу разговоры о минусах о недостатках вот этой гонке за технологиями постоянно повторяется мантра работает не трогай моя история которую я рассказал начале истории моих друзей которые приходя на новый проект с матами без сна и личной жизни актуализировали или полностью переписывали frontend но хочу предупредить что подход о котором я расскажу чуть дальше он подойдет все-таки не всем если вы или ваши руководство рассчитывайте что проект будет жить дольше чем вы будете писать первую версию топ такой подход точно для вас он вам точно подойдет если вы или с вашей помощью решили проверить какую-то идею и нет уверенности что проект вообще будет существовать то наверное вам этот проект вам этот подход не подойдет вот когда прототип докажет что имеет право существовать как долго долгосрочный проект тогда стоит переключиться и если вы например начинающий фрилансер или работаете в небольшой веб-студии где временно задачи выделяется по принципу послушай сколько просят разработчик и да я в два раза меньше такой подход то же время вам вряд ли подойдет но даже в этом случае пробуйте договориться собственный резонный вопрос а почему подход работает не трогай плохо ну во-первых работаем со старыми библиотеками со старыми подходами вы не получаете всего что может предложить вам современный frontend мир конечно можно взять какое-то решение и реализовать его на своем стеки но скорее всего это придется делать самому и потратить столько же или может даже больше времени чем можно было потратить на обновление stiga я говорю не только о смене там с библиотек или смене архитектуры смене подходов но и об обновлении существующих решений ведь некоторые не хотят применять даже минорное обновление и кое-кто не буду называть имен брезгую даже патчами если например вы замените старый джек верен а допустим библиотеку свершил дом или обновитесь с 1 на 2 angular или с 1 на 2 виджет ваши приложения точно прибавить в производительности и это несомненно окажет влияние на ваших пользователей оставаясь сидеть со старьем вас остается мало возможностей как-то улучшать user experience скорее всего если вы конечно ответственный разработчики как я там и большинство здесь вы уже уперлись в максимум того что можете получить и переход к новым решением может помочь вам сдвинуться с мертвой точки и мой любимый пункт я его не просто так выделил жирным давайте не будем думать о плохом о природе этого термина на давайте представим что вы просто внезапно решили сменить работу так вот если вы внезапно уйдете из проекты при этом поддерживая его актуальность в не оставите после себя не поддерживаем и ископаемое и сами вряд ли обрадуйтесь придя на новое место увидев там frontend на печке тот же с и печь css или на первом же quay но естественно у всех подходов есть минусы я поговорил со своими друзьями пообщался с разработчиками из нашего сообщества и выписал для себя несколько таких часто упоминаемых тезисов самый частый это трата рабочего времени естественно на изменение нужно время но если честно легче тратить время небольшими итерациями чем ждать когда припрет и тратить намного больше времени и сил потому что проблемы будут накапливаться как снежный ком и справиться с ними потом будет намного сложнее чем закрывать по одной задачки в течение всей жизни проекта в проекте могут появиться конфликты если разработчики некоторых пакетов с низкой очень социальной ответственности как случилось со мной не поддерживать не обновляют свои пакеты но это тоже на самом деле не совсем минус потому что ну всегда можно попробовать найти альтернативу или как поступил я внести нужные изменение самому можно for ткнуть внести нужные изменения используя своему в проекте фаркоп подправить pull request и ждать надеется что его примут это еще так скажем побочным плюсом очень хорошо скажется на вашей понторез активности и не секрет что многие работодатели на это смотрит сейчас конечно могут появиться некоторые новые баги которые не заметили создатели но опять же это тоже не такой неполноценный минус потому что бог есть всегда баги это вполне себе нормальная часть жизни разработчика если вы жёстко зафиксируйте свой стэк это не спасет вас от багов вам все равно придется писать какие-то доработки вам все равно придется писать новые фичи вы все равно столкнетесь с богами если после обновления или после внедрения какой-то новые штуки вы обнаружили бак не стесняйтесь идите вы shews если баку же заведен отпишитесь о своем кейсе попробуйте развернуто объяснить как его воспроизвести а если знаете как починить то как в пункте выше пор кэти шлите полей квест и улучшайте свою open source активность и нужно быть готовым что в некоторых ситуациях придется побачите использовать полифилы но опять же это тоже не назовешь минусом потому что скорее всего поли фил или плагин для вашего транспортера уже кем-то написан вы потратите совсем немного времени на его внедрение пользователи которые живут в современных эвергрин браузерах получит лучше user experience и как нам не сказали это нет не очень часто упоминаемых пункт мне сказали что с твоим подходом обязательно вырастет сложность продукта вырастет порог входа и нам будет сложно искать новых людей но это вот совершенно неправда потому что скорее всего новички изучают новые вряд ли junior будет изучать старые подходы и вряд ли сильно обрадуется придя на проект и увидев там верстку флотами или даже таблицами поэтому я считаю что все эти ни один из этих пунктов нельзя назвать минусом некоторые из них можно назвать неудобствами но не больше перед тем как я перейду главному расскажу как поддерживать проект вечно молодым я хочу сказать как не надо делать во первых ни в коем случае нельзя что-то внедрять только потому что это будет неплохо смотреться в резюме если вы хотите что-то попробовать и добавить какой-то пункт в резюме сделаете это вне вашего вас нового проекта в нерабочее время резюме это не повод что-то тащить в продукт и ни в коем случае нельзя что то применять основываясь пусть даже на положительном опыте других если вы прочитали где-то в твиттере или вам рассказали ваши друзья что вот они внедрили какую-то штуку и проект прямо расцвел это не значит что вы должны бежать и повторять за ними во всем нужно сомневаться все нужно проверять но давайте к главному в 2015 году андрей листочки в своем докладе анти hyip на харьков джеймс предложил систему с помощью которой можно не сойти с ума современном frontend в мире я до этого пользовался примерно похожим подходом но андрей листочки очень хорошо сформулировал все пункты я для этого доклада взял за основу его его систему он предлагает создать для себя некий бюджет времени которое вы готовы тратить на обновление на поиск новых решений я для себя его складываю из части рабочего времени и небольшой части свободного времени андрей предложил распределить этот бюджет следующим образом 10 процентов бюджета на осведомленность 10 на исследования 20 на вложения и 60 на применение если вы не видели доклад андрея можете посмотреть по ссылке сейчас я не буду его подробно пересказывать андрей говорит что такое распределение что на последний пункт так много времени можно уделять потому что за это платят но это не совсем верно потому что мы все-таки работаем в такой сфере где платят не за символы файлах а за знания и справедливо будет сказать что нам оплачивают все четыре пункта и для себя я по своим каким-то внутренним ощущениям распределил бюджет там следующим образом 10 процентов на осведомленность 20 на исследования 30 на вложение только 40 на применение но давайте по каждому пункту отдельно на этапе осведомленность вам достаточно понять что я себя представляет технологию или плагин или пакет который вы хотите внедрять и понять в каких случаях каких ситуациях применяется это все для этого читайте социальные сети читайте популярные сообщества популярных разработчиков слушаете подкаст по моему мнению подкасты это лучший способ получать информацию обязательно ходите на встречи сообществ на встрече таких больших сообществ как веб-стандарты и на городские если вы из питера приходите к нам на спб frontend мы всегда рады читайте рассылки я постоянно накапливаю ссылки я даже сделать так чтобы ссылки из твитов которые я лайкаю автоматически попадали в мой пакет ссылки из емэйлов я так же отправляю в pocket я подписан на несколько подкастов все это читаю слушаю я либо потом по дороге в офис и обратно либо дом и вечером либо когда гуляю либо иду куда-то допустим в магазин то что понравилось я добавляю специальный список wunder листе на этапе исследования вы должны понять чем технология может быть вам полезно и вообще может ли она быть вам полезны возможно не все возможно какими-то отдельными идеями отдельными решениями и обязательно нужно сформулировать доводы для своей команды если вы не можете сформулировать доводы для команды скорее всего это просто хотел к или опять же лишний пункт в резюме я этим занимаюсь я ссылки накопившееся внутри листе вычитываю еще раз смотрю документацию заглядываю в код смотрю поддержку браузеров я этим занимаюсь в перерывах между основными задачами ну естественно когда twitter уже прочитал все идеи какие то мысли я записываю в заметки к тоску в интернете если понимаю что вот это решение может быть неполезной дальше отмечаю там звездочкой если нет то просто удаляю этом этапе я чаще всего пользуюсь к на юз компакты был от конга кс и табличкой not green это если речь идет о каких-то фичах ноды и платформ статусами мажорных браузеров на этапе вложения вам нужно понять как вы будете внедрять технологию сколько на это понадобится времени вы должны согласовать все с командой попробовать что-то в отдельной ветке или в отдельном репозитории я этим занимаюсь либо в офисе в прямо в рабочее время либо в свободно если у меня нет никаких планов я создаю карточку в отдельной доске в целом и ее назвали лимбу создаю либо локальную ветку либо локальной репозитории что-то пробую на этом этапе очень много отваливается если я понимаю что внедрение стоит слишком много времени пользы от того или иного пакета в проекте вы слишком мало или если нахожу вдруг какой-то альтернативной боль альтернативное более простое решение на этапе применения вы уже все знаете о том что собираетесь внедрять вы все согласовали с командой с руководством создали себе нужных карточек стрела знаете сколько на что потратите время и просто пишете код на планирование итерации или спринта я нет несколько карточек из лимбо добавляю вместе с основными задачами по трое по проекту и таким образом поддерживаем ее актуальности проекта не отнимает у меня больше времени чем я готов на это потратить а проект всегда остается актуальным и так обновляйте свой стэк не пренебрегайте ними норн имени тем более патчами и сильно не затягивайте с переходом на мажорной версии внедряйте новые решения ищите ищете вещи которые сделают ваш проект лучше и след следите за развитием технологий следите за браузерами следите за spicami и в итоге вы получите свежий производительный проект вам будет легко искать себе новых людей и вы сами будете расти как разработчик что наверное самое важное на этом у меня все ссылка на доклад на экране если есть какие то вопросы буду рад на них ответить на самом деле глупый такого про слегка мы с одним человеком недавно общались на эту тему мне посоветовал приходи пораньше пока ордер и в задаче нет занимайся обучение и самообучение мы потом уходи пораньше тоже чтобы сайт своим продуктов или задачами не отвлекали от полезно подобного рода совет но это на самом деле немножко несправедливо по отношению к тебе я считаю что рабочие задачи в рабочие задачи нужно также включать и задачи по по обновлениям по поиску каких-то новых решений если это это делать то лучше пробуй договориться чтобы это было основной не нужно приходить на раньше на работу высыпайся выходил с работы вовремя и провода говорится что в тебе давали на это время привет спасибо за доклад есть такой вопрос вот есть например крупные спа приложения которое написано пир мангу ари и есть цель перевести на 2 гулар приложение эволюционирует постепенно соответственно сразу два прибор как мы не можем использовать как вот какие вообще должен быть итерации какая декомпозиции чтобы вот это ну честно я не работал с не с первыми со вторым ударом ну это к примерил и я миллиарда вверх я понимаю у нас но у нас происходит примерно то же самое то есть мы у нас мы не то что внутри одного фреймворка там версии я не знаю насколько они совместимы мы вообще полностью переходим от одного подхода к другому и не страшно если ты если тебе вко какой-то какую-то часть времени жизнью проектом придется использовать два фреймворка ты всегда можешь не за если пользуешься например в пока мы лера пор лапам поделить все начинки сделать два отдельных vendor чанг и там где нужно у тебя будет подгружаться 1 там где нужно там 2 0 то есть это не страшно ты можешь использовать два различных фреймворка своим править проблем что проект например в релизе да и там нужен с теста минимизировать там и размер приложения ну а если делать без начинки проезжу балет например да то получается что версия на втором говоря нам всегда будет в роли догоняющих потому что предложение развивается да да я об этом говорю нет я не говорю не о том чтобы писать 2 отдельных версии параллельно то есть вы останавливаете разработку на первой версии angular а и делайте грубо говоря какие-то отдельные не знаю странице отдельные если это сингл причинам как как это всегда поищи называется положенные на странице отдельные страницы делайте просто с другим но с другим vendor чангом ну то есть сам нормальное решение это другая прекратить разработку на первом прям лодки и постепенную то что дело уже на первом перевести на 2 конечно при перейти сразу невозможно никогда то есть это ну это вот ты потратишь как в купе билете там год и бизнес из этого выстрадать но у них просто не было выходок здравствуйте спасибо за доклад меня зовут андрей у меня простой вопрос вы говорите что нужны все время до нужно поддерживать кодовую базу такой чтобы она работала на современных браузерах ну есть мнение что пользователи реально не обновляются такой скоростью браузер и вы одна обновив свое приложение вопрос сломаете для людей мы же прочь все таки не код ради коды делаем как бы он работает без как вы разрешаете эту проблему естественно мы следим за аналитикой во-первых мы смотрим какими браузерами пользуются нашей пользы мы не применяем ничего если думаем что наши пользователи не смогут этим пользоваться конечно у нас есть какие-то очень маленький процент пользователей которые там до сих пор на и одиннадцатом живут и для таких пользователей мы применяем полифилы или там делаем фабрики какие-то но сейчас если честно вот наша статистика статистика нашего наших пользователей большинство сеть пользователей сейчас живут в эвергрин браузер так называемый то chrome firefox edge который обновляется автоматически использовать или уже не на должна держать кнопку обновить у них все обновиться сама и постепенно последний по моему из обновляемых вручную браузеров это и 11 если я не ошибаюсь и android вывод 44 и они постепенно постепенно глобально снижаются я думаю там год-полтора еще и они вообще исчезнут и можно будет полноценно внедрять все новое и понятно спасибо и второй вопрос от вы говорите что вы от ford от for каетесь от библиотеки пропатчить и ей будете держать у себя форк но отправив там pull request ну очевидно что при таком подходе вам нужно будет еще эту библиотеку поддерживать потому что она скорее всего ума интерьер обновиться не в том ключе в котором как бы вам бы хотелось но если вы не управляете комьюнити в этом месте но это что ж не сложно вы можете обновлять если обновился оригинал вы можете просто так скажем сложить его свою если он фундаментально обновился так что это не вяжется что как бы в java script мире бывает очень часто и в мире вот я честно я с таким не сталкивался чтобы вот так фаны фундаментальная стараюсь но также не знаю побеседовать с моим тренером чтобы он принял все таки вот был request и переходить на его и q либо пропатчить еще раз уже новую я понял спасибо саша привет спасибо за доклад хотел спросить когда в оплот керне нужен будет в крови скоро очень жду года три уже потому что у вас вашим делал вещи деда мы пока что пока не можем это сделать потому что виджет это все таки не frontend его не не раздробив я но это один большой кусок но скоро в третьей версии не будет не будет еще останется часть частичной же кэри но в четвертом уже точно не будет пока неизвестно пока не могу сказать спасибо за доклад такой вопрос а ты считаешь свой подход к рефакторинга масштабируемым с увеличением для проектов больших размеров существенно больших размеров потому что сложной задачей рефакторинг она обычно растет нелинейный да с объемом кодовой базы право быстрее но вполне себе да то есть но единственное что чем больше у тебя проект тем большую часть от рабочего времени тебе придется откусывать на обновление на исследования и это типа неизбежно и это окей да обязательно никуда если тебе этого но нет если тебе этого не дают делать тону соболезную все вопросы мне еще остались наклейки ладно спасибо докладчика мы уходим на перерыв"
}