{
  "video_id": "VMrDdyld0xU",
  "channel": "HighLoadChannel",
  "title": "Масштабирование микросервисов на Go / Matt Heath (Hailo)",
  "views": 2779,
  "duration": 2501,
  "published": "2017-04-22T11:09:08-07:00",
  "text": "она любит izia сингла этих акций ао лозинского в частности мы отслеживаем местоположение всех водителей в нашей системы режиме реального времени для того чтобы найти таксисты которые находятся в данный момент времени ближе всего к вам сломали ну так вот с наши такой базовой инфраструктуры мы не отправлялись когда мы перешли на 2 континент вы чудо печка я 1 печкой это то что она глупость пайки сандра в кисангани своей спальной быть реплицировать континента на континент относительно просто все данные но и мой сказать о бок о в основном мой опирались на вот эту часть и овечки java маски и причем как для каждого города в отдельности то есть каждый раз пинать фактически заново для каждого города каждый раз корпуса и естественно это вызывало целый ряд проблем когда нужно было бы сказать одно и то же в разных местах и когда нам нужно было на вы фичу добавлять что приходилось у добавлять сразу и в колабами инфраструктуре да и повысит услугам по г соли на нашу инфраструктуре по городам и у нас была очень большая проблема с коммуникация между командами по мере того как мы на нем нанимали все больше где росла наша команда у нас проблемы стали уже касаться масштабирование не столько технического технологического сколько вопросов коммуникации между людьми не что полевые синьки и поэтому пришлось нам пересмотреть нашу работу и с технологической точки зрения поскольку мы очень быстро расширялись ну и также масштабировать в плане взаимоотношения между членами команды то есть мы с одной стороны разрабатывали новые фичи что естественно дело нашу базу кодов больше и замедляла нас у нас была очень не четкое распределение обязанности например платежи да когда платье шелк кредиткой а то все это шло в 3-4 разных мест и непонятно было кто за что отвечает естественно системы рушились и у нас была очень медленная система преодоления отказа и кроме того нам не хватало автоматизации потому что все это приходилось строить с нуля не потом они использовались никакие другие инструменты в общем не очень все у нас получалось результате то есть мы это стремились куто'пи был раньше главным архитектором ведущих компаний который говорил о том что наша задача создать очень гибкую систему она мы же предложение до которая позволяет вам таксишку выглядеть работать должно каждый раз сто процентов случаев так вот нужно создать систему высоко гибкой высоко высокой скорости реагирования с высокой степени доступности но при этом исходить из того что в этой системе могут быть и сломанных компоненты что на самом деле всегда так плохо вот мы исходя из этого и перестроили нашу инфраструктуру и перешли в основном на гол у нас конечно и java сервиса остался до данная мы все храним их у нас есть классичны балансировщик нагрузки сверху дальше такой рутинный горькой а дальше вот эти вот все сервисы которые которые обмениваются сообщениями с вышестоящей субстанции через работники у нас проводится очень а активные анализ данных для того чтобы оптимизировать работу по городам и все это позволяет нам реализовывать эти узлы катар мы стремимся составить почему же гол если вдруг кто не знает это гол gopher символ языка гул голос это язык очень похожий на язык си вот есть конечно руби есть печки есть такие высокого уровня скриптовые или сценарные языке почему же мы решили опираться в своей разработки на гол почему не java машина вы уже используй почему он не продолжать нам было использовать жанр я попытаюсь объяснить голову это отличный язык как тор и которым очень просто научиться по ощущениям это классический скриптовый язык но при этом она может создать такие отеческие бинарные скульптуры очень эффективно и те нашим разработчикам нам необходимо было предоставить инструменты мы давали ему платформу которая давал возможность другом разработчику быстро написать код и и сразу на производство отправить если говорить об услуге то она стала из трех компонентов сэндлер который берет вас запрос на что то сделать но логика которая производит обработку данных ну и если нужно сохранение будь то в кассандра эггман кашель и нам необходимо было предоставить простой способ устранить их услуг оставляйте предоставление этих услуг и мы для этого создали такую внутреннюю библиотеку platformer мы тогда таким образом мы берем запросы ставим их в очередь и потом получаем обратно и сообщение которое направляем а пользы пример клиентов другу есть вот такая штука когда все определяется в пакетах мы работаем с пакетами и есть функция с определенным интерфейсе и если разработчик дает нам функцию gator соответствует он фейс он может сделать всё что угодно мы берем сервере квест мы используем в качестве формата прот колбаса если что-то идет не так то мы можем соответственно это обозначить как ошибку мы можем иметь множественные умноженное представление одной функции а с другой стороны когда функция уже готова вы можете просто зарегистрировать вот таким образом ой это я поторопился части вот видите она не адольфу эта функция warhammer это означает что я даю команду исполнить исполнить это на серой зоной с другой стороны нам нужно иметь возможность хранить данные что непросто даже если вы используете кассандру у вас все равно услуг много в регионе если вас кластер из тонкостей 15 услуг мы не будут успей разное нам нужен также создавать пул соединений и это может создавать несколько сложности инфраструктурной команде с другой стороны нужно иметь возможность этим всем как-то управлять не заботьтесь о том что делают с фронтальных ас продан свою очередь не должен понимать что там у него на за ним происходит а мы проводим автоматическое конфигурирование если вы хотите соединиться с memcache то вы просто импортируете соответствующими для отёку и вы можете печатать вот так вот наш обед и назначить ему ключ и собственно все это не означает что разработчикам не приходится иметь дело с тем каким образом хэшировать определенный ключ к определенному серверу и конечно необходимо проводить повторную хеширование для большего було если я имею ввиду если я имею дело собственно с окси по мне вот эта вот вся техническая сторона вопроса вообще не должно меня волновать нужно чтобы это как-то помимо не обязательств и так мы используем такие библиотеки многое делаем бесплатно позволяем разворачивать услуги проводим и service desk аварий конфигурацию отслеживание ну и многие то есть некоторые другие вещи и если мне нужно создать некую слова не нужно это будет нужно быть очень быстрым а чтобы не создавать новые нити бузины создавать новый пакет репозитории вот что подписываетесь и вот эти все сложности мы используем специальный учат а вы можете запросить новых новые сервисы вы получаете соответствующее сообщение соответственно дальше можете код написать отправить все это на открытом коде используем genki а потом мы можем использовать это в системном виде как это разворачивается если у нас такой вот огромный позднее услуг и они постоянно появляются и исчезают иногда они ломаются тогда мы удаляем создаем новое есть а нельзя сразу то могу сказать что я хочу чтобы было там тут этот развернуты на таких-то сервера стресс это будет слишком сложно так вот у нас такая вот такой очень простой вид интерфейс и соответственно мы позволяем мы можем сделать несколько вещей во первых у нас есть возможность создать бинарной структуре и по поскольку у нас статическая компиляция идет у нас все это наталкивается в один не личный файл который можно на любой сервер у нас есть отдельная услуга проверенная которая позволяет взять ребенок на структуру из поставить туда куда нас когда мы только начинали такие штуки как докер еще были только зачаточном состоянии по-моему это была версия 04 и мы не хотели ими пользоваться до тех пор пока они не она сейчас у них ситуация поменялась сейчас а мы сразу докер контейнеры используемая сразу их вот сюда соответствующий реестр отправляем вы можете произвести развертывание в таком контейнеры контейнеры тот можем вот таким образом через с докер своего немножно процесс 10 зал соединиться со звездой кино и театра через обороне is also a concert halls of велик ли творец почувствуете сами с террасой с 3 ствол олеся я писал символа сколько связывать низкого звука представительств а рано понял и любит на спасительный создал бывали мопсики очень савагов она полна оным инете искала вентилятора и моей мамы фильма классический либо 35 сомневались это нас пугает самих они от народа совестно кисло нее полистали стоит рассказывать облить интрига стали покормить его чтение книг есть свой на странице нескольких этот голос пикард шел тихо . тобрекс по мне так она она символ связи сказать об исламе со мной срубить его почва резьба на той ремонтной они 1 га будет скьяволе он моё своего а mathers lp 2 боюсь conti трава короче days они жили тихо пути перец блоге многих остальных следует отварить вычитаю скрыть боль надевай их вы поймете и своими вполне да пошли из моего приказа это не фонарики аналитики там скупость вот так до ночи она с тобой исполним . . она садить процентным release the way to fit лавин и письмо месяца акций а мы его так хотят спать под маской порой они спецназа там она всегда говори есть часто серебро савельич либо вниз уровня там поискового с правительственными nokia житель appartment а он рад от своих мастурбировать отделимы до 120 из объединить в одну сеть и заплатили камеры это около города повезли дальше жизнь листа обрывался сами что the table варнава у таксиста своим жертвам у или бурнашев обсудить этот лейтенант раскроется ударе агнес of a lovely teen top стала таким простуды , и сайта английское кризис и взять борис а объеме refin съезда бабский затвор когда ты уже догнал обработано поститься больные стоит вот с вами видим плане сервис я обычно здесь естественно ткнулся подачками вчера сахадж рублей quake боевиками просим занимает керамические фигурки и fields of business а где у лист информатикой и из этого подлезть получались он восходит равно а ему и не нужно платить способа а на митинг совпал с 10 вращаем на причале лета созревает тщательный анализ и долго не давать отваренный how important какой в этой оценке пойти сугроб о-о-ой вычисти новыми такие теории состояние семейство маленькие ладошки а вот смотрите искусную и в самом деле не в состоянии kuvings whole life собственность выглядела найти am c годами считают эти женишься электричку это быть испорчен обычно фактор прекращать чайничек понятно прыгай смогу а о моем телефоне 30 слов о tetra guppy сайта стебель из мусора там есть выгода оцени монтировать экзопланет их до свидания покамест с этим объявляйте chery в свободном движении so does anyone об издании а выпили сам упал на кассе от пола перебить начинаете не создать достаточный сервис таким одних нынешний on опции понимать возьму этот союз 1010 ниц новые лет со любительский вычислительно на улицы переполнены сам учится по плестись появилась она мой год профилактика мы потратили комната и оплатил . эти твари кофеварки вот это все демидова а события близкие спенсер и а на какой то из этих числа все митинга без официального стриминга отметить такие через полчаса чего сгинет ростислав со выигрывает очень мастеру индекс нас самым кого я там тетивы глазки застроена собаки к 4 порции по рифу и через порядке крайне . с таким же стоит купить hey подъем счастливый синтезатор очки с центре ниточкой вы играете ли быстрее on с лица специального него их нет еще и гордость российского самим одесский да вы сами таксист будет стриж треугольник охранником багров эти цифры написать сами французы также мелко появились и заберу the course of this was a усиленно балотелли испросив учение о таком и не того анти-вич она потеряет солидарность с из резины и фактически взобралась на испанском она часто или экраны достигни каменских винный духовных собачкой сильное свидетельство рада быть комнаты селиванова слуховая память или turns давосе своих выбрать сами прошли не дает ведут себя новый офис по ул 10 за такими никотин добавки боимся за это ножка великом городе зашли улыбались полости убыточность часто 3 iphone аптечкой давайте пусть отыскать 1 2 3 петельки swiss она изучала всяких там сами выходов чем тонн если а над этими варёной из мечты не плачь ты и так холл и часах говорим эти сканы но его это как , как стать анальные роды или space in a показывались появится убедительность поиски на советы быть такого письма у сада почти i can also a la guerre только тогда всех мультипаке столько станок из конечно они есть как из кабинки лиц начинаем через порвав слышали про человек или со скользящим по форме отдаюсь сосиску и выписку из моих проблем и у вас есть и худеть или болгарина что на полоски не испачкались быть хотят прочность очень против зла у этих автомайдана важно понимать причину заповедь соликамск развалилась поднимайте руки вам подойду с микрофоном так спорта вы разделите сервиса на микро сервис то будет будут выше накладные расходы для коммуникации между сервис между сервисами и шины обмена сообщениями вы не проводили линию не говорили что вот все вот дальше мы не будем торопить пусть будет вот так до такого уровня был у нас такой пример мы тут с очень прагматично когда мы разбиваем функционал по моему не было времени говорим ситуация когда мы не хотели бы что-то больше разбить на меньшие компоненты но у нас очень много gps точек которые подгружается выпей потом через ребенку питаются получается что в этом случае есть смысл все-таки а раньше моих 200 на 200 чтобы делили да потом в очередь ставили это было очень все сложные криво мы поняли очень быстро что это было неправильно решение есть у нас опять уровень и ряд услуг которые мы тоже называемый песен с одним только исключением г вот вместо того чтобы считать их отправлять в а ребятам kill мы сразу отправляли поверх ребенке если него сажать еще один вопрос а почему не отказывайся jal и а хороший вопрос и сложный когда мы начинали нам нужна была платформа которая это другой падешь на нас были php разработчики и жанр собачки которым понравился гол а все же русские разработчики теперь рады из радио коньки писать на гол у вас есть библиотеки которые должны собственно поддерживать и то и другое хотя сейчас мы просто все эти услуги все эти сервисы переписываем на голос java чтобы не было необходимости поддерживать жало у нас вот тут вот еще был кажется вопрос вот здесь в первом ряду спасибо мадса я работаю над интервью у нас аналогичная инфраструктура из небольших модулей отдельных процессов и многие из нас я думаю хорошо знакомы с этими идеями но когда у нас много маленьких модулей возникает проблема документирования и получение единые картинки нашем проекте на где-то 50 модулей вас 150 сколько 153см все три впечатляет конечно а как же как же вы тогда не тонете в таком большом количестве 5 по каждому модулю мне кажется преимуществом перехода на микро сервиса в том что вы можете четче понимать трафик на уровне кода у нас нормальные доки комменты есть такая вещь как гудок который все это превращаюсь достаточно хороший пей документацию плюс у нас про такой буфер нас и протыкал bofors используется если мне не важно знать как сервис работает мне просто нужно чтобы она работает то я могу ориентироваться по entre ориентироваться по интерфейсу смотреть где поля пассивная и активная и так далее с этой точки зрения мы переходим к ситуации когда нам нет необходимости понимать каждый компонент если мне нужно отправить сообщение вот в этот компонент мне нужно понимать характеристики этого и просто работать интерфейсом так конечно документации у нас есть и передавать и все такое но в идеале я надеюсь что мне не приходят мне придется их читать если позволите еще небольшие вопросы об обзоре в идеале когда к вам присоединяется новый член команды на ваш заборчик допустим он будет заниматься небольшим каким небольшой какой-то областью и ему не нужно заботиться об остальных статам с лишним услугах а скажем только 20 сервисах есть кто-то кто захочется имплементировать новые функции и это может повлиять на систему как же тогда эти бедняги смогут понять ваши сос вот эти сотни ну да и технологическая проблема ли это не просто сделать а boarding это очень важный момент когда вот так как нам присоединяется он должен пройти некоторый период адаптации где-то в течение месяца или двух мы позволяем ему взглянуть что называется за кулисы хотя мне понимать как работает каждый из компонентов но целом понимание достигает а если есть какая-то функция которая разбита на несколько сервисов то соответствующая команда будет понимать как это работает и она сможет нового разработчика постановку сделок здравствуйте у меня вопрос касающийся используя рыба танки что вы делаете когда когда он нападает когда рыба танки у падает несколько вариантов но естественно по-разному эти отказы могут выглядеть как и в любых других ситуациях основной связано с а city park сами мы рыба танки работая с ним работали еще до перехода на гол и преимущество было в том что мы заранее знали в чем плюсы в чем минусы мы знали что есть некоторые проблемы которые потом более поздних версиях были устранены и мы работали с одним из аспектов этот проблем мы кластеризация осуществляли не горизонтально а в рамках каждой зоны доступности и обменивались сообщениями между ними что сделало систему гораздо более надежны но была у нас проблема что когда у нас от отказа допустим очнулся какая-то часть она и просто визируется неправильно поэтому нам необходимо был какой-то инструмент который мониторит статус рыба танки и ключевых компонентов каждой зоне доступности чтобы у нас была возможность отследить если у нас есть некая проблема которая роняет целую базу доступности чтобы вот этого избегать мы используем мониторинг состояния рыба танки скажите а сколько у вас в командах человек работает вот надо эти места писец 53 сервисмен 50 backend инженеров с вообще вся совокупность ханжи и наших инженеров на пять шесть команд разделено они могут работать из дома иногда не в разных странах проживают мы hipchat используем практически не общаемся друг с другом лично и конечно вот разделение зон ответственности нам очень помогать"
}