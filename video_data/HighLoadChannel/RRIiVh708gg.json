{
  "video_id": "RRIiVh708gg",
  "channel": "HighLoadChannel",
  "title": "Javascript фреймворки: должен остаться только один / Сергей Аверин (Acronis)",
  "views": 903,
  "duration": 2824,
  "published": "2017-04-10T03:32:56-07:00",
  "text": "спасибо что пришли я изначально конечно хотел больше сделать доклад именно про сравнение фреймворка но потом подумал что закидают помидорами поэтому на самом деле доклад вообще просто адский троллинг как как водится у меня вот и он совсем не праха и лот скорее про менеджерскую задачу которая стоит нас над всем этим делом включая frontend вот собственно про что же в итоге получился доклад так вот правда как выбирали новый фреймворк и почему выбирали и какие задачи решали сначала немножко компании потом проблемная зона задача как мы смотрели чего сейчас есть компании как выбирали вообще из чего выбирать как оценивали варианты как в итоге решили переделать один из подходящих вариантов под себя затем сравнили пилотные проекты на двух конкурирующих технологиях какие получились результаты и как в итоге решили переходить вот а вот теперь настало время очистительных историй вот немножко про компании значит акронис очень большой российский бизнес который обслуживает 5 миллионов пользователей из которых примерно процентов 10 это корпоративные клиенты которым их работы покупает лицензии соответственно компании само по себе тоже очень большая у нас 17 разных офисов аренде находится в трех разных странах и самой большой рэнди находится в москве но при этом разработка у нас распределенные вот еще есть удаленщиками которых я здесь не посчитал при этом масштаб разрабатываем и софта самый разный есть у нас коробочный софт под windows есть коробочный собственным интерфейсом который мы продаем на предприятии есть софт который мы сами продаем и сами внедряемые эта смесь и коробочного клаусов то есть и клауд софт который мы продаем по подписке и домашним пользователям и корпоративным есть даже сов с которым мы продаем сначала крупным хостинг компаниям которые уже от своего имени продают его под своим брендом и hand юзерам и у всего этого дела есть огромное количество интерфейсов и речь идёт именно в продуктах они а веб как таковых сайтах на самом деле вот когда я пришла в компанию стали стал разбираться в чего же у нас есть как же все происходит выяснилось что внутри компании есть в админке разного рода которые мы делаем сразу на куче разных технологий начиная от true frontend типа xds или anges заканчивая сайтами которые пишутся на ruby on rails и в которых джек вере просто там переключает страницы или графики вот перед коллективом стояли вот такие проблемы во первых технологий много они все разные разработчиков из одного отдела в другой не перетащить не помочь какому-то проекту потому что ruby on rails разработчики катара пишет на джиг вере про ингур жест ничего не знают во вторых выяснилось что существенное количество людей работают part time to be kind разработчиками the front end разработчики у нас напали есть ребята которые на печке пишут и они же делают на in горджес сайт который работает с ним как с брендом и их не очень много у них проект маленький и смысла заводить им отдельного frontend разрабатывает вот и в итоге я насчитал что у нас есть java люди rubber люди питон люди и печки люди которые все делают frontend вот и при этом в компании нет верстальщика ни одного то есть есть несколько людей которые эксперты знают эту область но работают они обычно кадрами на инге ртс в итоге в этих проектах совершенно разный стиль кода совершенно разный стиль комментариев они по-разному deep ловится в каком-то месте мы с помощью ruby on rails собираем н горджес приложения с помощью рубишь снова сборщика рейка по-моему называется вот и в итоге везде разный зоопарк в каждом отделе зоопарк свой а еще короче получается так что с наш самый самый флагманский продукт который написано xds это огромная админка там сотни экранов он сейчас построен на базе версии 4 а в 2015 году совсем недавно зарелизить уже в версию 6 этого фреймворка и вроде как мы отстаём аж на 5 лет вот версии фреймворка который мы используем возможно тоже с этим надо что-то делать вот значит пришло конечно же начальству и поставил задачу задача была дана сверху нам нужен толстый клиент на frontend технологиях который будет общаться состоит лишь backend api максимально везде где мы можем это внедрить нужно единый библиотека компонентов единый look and feel для всей компании потому что мы немножко страдаем от того что нас shift и где-то разные где-то по пикселю верстка поплыла в итоге получается так что у нас два соседних отдела рисует какие-то common и элементы для всех на админок которые дизайнерами нарисованы одинаково немножко по-разному вот где-то верстка там на html а где-то верстка запихнуть же скотт каком-то собственно шаблонизатор и и css слой тоже принципиально разный где-то он накладывается из трех-четырех файлов поверх друг друга за соски него и существующей framework вот очень хочется чтобы мы наконец-то могли подключить нормального верстальщика и нанять разработчик из ну как бы с меньше зарплаты который бы отвечал с одной стороны сообщение с дизайнерами подготовку дизайнов с другой стороны как бы джалла скриптером приносил и говорил что вот они хотят вот этого вот здесь нужно анимировать вот этот интерфейс и при этом как бы мы бы могли нанимать джесс кадров в проекты не топового уровня то есть сейчас он достаточно много работает ребят которые там прошли огонь и воду они знают java не знаю тот нет и в этом плане для них любой java script framework даже самые запутанные это не проблема потому что они в принципе очень опытные но вот этого хочется все таки как то иметь возможность нанимать там ни одного из ста хотя бы там 2 из 50 вот и есть такой еще отдельно пике верите у нас большую часть людей которые там делают frontend это либо бывшие бы киндеры либо там текущей портами бы киндеры поэтому очень хочется что все это было понятно бы кант разработчикам менеджмент когда видит лучше видный код джейсон начинает говорить что блин мы ничего не понимаю все плохо давайте перепишем от но зачастую причем это не так вот значит посмотрели что же на самом деле мы имеем в компании оказалось что у нас есть партнерский продукт который написан на тот же и для него мы пишем plugin и на тот же это очень древний фреймворк очень особенный он работа как там компонентная модель этот не совсем виси но с этим мы решили ничего не делать потому что мы не можем какой другой framework использовать иначе вы можете не можем сад и партнерки работать для сайта собственно у нас почти нет какой-то динамики нам важно чтобы его индексировали поисковики и нам важно чтобы он работал быстро нам там java script особо не нужен поэтому какой-то супер фреймворк для него вообще нафиг не уперся это задача которой мы не должны решать вот из оставшегося чего на самом из чего на самом деле делается админке тнг с первой версии это ruby on rails плюс к генерирующий страницы на бэг-энде плюс какие-то джек вере до пески которые делают некую динамику и большая часть продуктов написано x4 ты очень высокого уровня во фреймворке который больше всего напоминает dotnet или cute на котором собственно большую часть продуктов компании серьезных и взрослых написано ok полез я разбираться что ж блин такое этот xds оказалось что это огромная махина просто то есть это такой локомотив коды на горе страницы 395 классов этого фреймворка описаны вот значит каждый класс имеет глубокое очень дерево наследования то есть в этом плане все очень сильно слизана с того как строится каюте дот нэт и прочие вести фреймворке которые работают где-то в винде или в линуксе под де стоп вот в итоге получается что зачастую код который ради барыша он находится где-нибудь на 3 уровня выше чем чем тебе сейчас надо разобраться в этом действительно сложно вот значит класс секс panels ну вот это только методу из него только методы обычно столько же событий столько же свойств разных вот совершенно понятно что ни один разработчик запомнить все методы всех этих не может совершенный поэтому постоянно приходится работать документации что понять как сделать даже самую простую штуку потому что ну какой то размер какого-то компонента там есть h 3 разных методы они три разных размеров возвращают каждый по-своему вот в итоге ну как бы мне было печально очень первое время вообще ничего не понимал смотрел на все это делаю и вот задавал себе вот такой вопрос господи за чужую все это написали вот значит индексная страница флагманского приложения бла мной напечатана на листах анализа немало 51 лист ший в том 6 я вам увеличу вот это дело вот вот вот этот дом дерево в нем было тридцать две тысячи с лишним нот это просто индексной страницы сгенерированный фреймворком см еще не на ту кнопку ничего не нажали просто загрузились загрузились страницы и все от рисовала вот совершенно стало очевидно что блин что то тут стороны происходит как бы явно и есть какая-то фигня с этим вот значит полезли смотреть как же блин делается ей в этом фреймворке оказалось что значит пользователю получать сразу библиотеку ей компонентов которые скинется css а ты должен css нам записать поверх тогда получи какой-то свой кастом лескин и много компонентов которых не было их пришлось там реализовать как бы с нуля в итоге зачастую не везде но вот очень часто я натыкался вот на что-нибудь вот такое вот это как бы jal скит класс который с одной стороны это ей компонент но с другой зачастую видно что в нем аж три разных как бы сущности смешивается это джаз кейп-код и 1000 код и это какие-то очень странные директивы местного шаблонизатора вот эти вот x индекс x каунт или вот это type of values string записанные фигурный в квадратные скобки вот и что конечно разобраться в этом все очень трудно и поддерживать все это очень трудно еще выяснилось что зачастую компоненты когда наследуется друг от друга они умеют кусочки этого шаблона вырезать и перри скидывать по кусочкам то есть вот есть таблица у нее есть там шаблон ячейки и шаблон заголовка и в итоге существуют компоненты которые там 2 три раза друг от друга наследуется в одном что-то меняется и все ломается или выходит новая версия фреймворка компоненты которые поверх этого сделаны перестает работать вот а дальше выяснилось что это единственный видимый мной framework в котором есть такая штука как влияло think полезли как бы посмотреть как же почему откуда вот эти теги оказалось значит что при изменении размеров окна при изменении размеров какого-то компонента framework также как это на десктопе вычислять сам размеры блоков сам и вставляет и финнлайнс ссн то есть типа left right with height мало того там очень хитрый алгоритм сделан алгоритм который берет текст и он оценивает его размеры запихивает его в невидимый div и смотрит какого размера этот div получился при заданной ширине и так как бы он мимикрирует под функции оценки размеров текста сколько это тех за мед в этом блоке и вычисляет эти блоки а потом короче выяснилось что алгоритм этот он еще и противно древовидный то есть он по 6 по 7 проходов делать то что он как как браузер тоже натыкается на какой-то компонент который ну не влазит начинает увеличивать его родительские компоненты тоже по ширина пересчитывать вот в итоге начинаешь двигать правую страницу браузера и четко видишь такие за тупые вот про изменения размера этого framework и как бы вот но с другой стороны это дает тебе типа benefit что во всех браузерах это работает абсолютно одинаково и по проблемы совместимости между браузерами ты не паришься потому что максимально тебе этот вопрос он так закрыли попутно значит выяснилось что компонентов очень дофига и все эти компоненты это каждая из них это instance java script его класса у которого там от трех до пяти уровней наследования той до семи до восьми вот каждый из них этим волшебным лаутаром оценивает своего размеры они выставляются знаю альбу считывается выставляются у родительских потом высчитываются размера и в итоге все это дело попадает ну генерирует а вот такие вот веселые штучки онлайн css и который вставляется прямо в дивы этих компонентов прямо вот в теге поэтому получается такой огромный дом дерево странная но попытки понять как же play all things работает я короче на тусу вот на вот такое совершенно страннейшее место в этот момент не стал совсем плохо и я понял что я не пойму никогда как это происходит вот вы все еще помните да что речь идет все-таки о производительности вот все это дело конечно не удивительно занимает ну почти 2 мегабайта уже в по сжатом виде вот поэтому совершенно не удивительно что на каких-то тестах типа там а как это будет работать нам на мобиле выдает в веселые веселые времена загрузки вот но тем не менее это не такая большая проблема на самом деле для нас потому что большинство клиентов корпоративные и как бы они лезут в админку когда им нужно либо что-то настроить в первую неделю после покупки продуктов либо когда адский пипец то есть нужно достать бэкап и они в принципе я думаю человеку которого адский пес готов подождать 16 секунд пока наконец загрузится админка тем более это здесь речь идет достаточно тонком канале ну ладно короче с фары вор кам понятно очень сложно и запутанные а само приложение полезли в код приложения как бы получается так что в коде мало комментариев какие-то трудные места не объяснены получается так что всё приложение жестко связаны вместо там 1 год класса как бы длину надрез по на 1000 строк мы имеем дело там обычно с тремя четырьмя классами по 1100 которые очень жестко знают друг о друга и так вот по кольцу общаясь пересылать себе события меняют состояние внутри себя и у нас как бы внутри очень большие проблемы с границами между моделью и логика и бизнес-логике и между бизнес-логика и view получается так что у нас есть в юкос и которая называется как-нибудь и по волшебной реализующий определенный функционал панель которая и одновременно отрисовывать себя и отрисовывать дочерние компоненты и в т.ч. у нее дофига внутри бизнес-логики который умеет переключать какие панели внутри которые умеют отсылать уведомления даже зачастую они лазят на сервер ice view классов лазит на сервер поэтому ну очень условно получилось так что у нас вот такой вот ним весело m plus size то есть вот граница между контролем и view очень-очень не определено получилось так что и в моделях есть бизнес-логике и в контроллерах есть бизнес логика его view есть бизнес логика и ей логика и состоянии приложения тоже размазано по всем трем видам классов поэтому в этом плане трудно например понять откуда пришли эти данные или кто является авт авторы авторе то тивной . и откуда вот эти данные взялись и к той в хранит на текущий момент самую самую достоверную копию этих данных то что она есть нескольких частях приложения вот а еще получилось так что значит сам фреймворка gs он всех как бы очень толкает к архитектуре построен на publish субскрайб потому что в принципе у него все ее компоненты аниону завязаны на этот механизм и как бы программисты невольно выбирают то что предлагает framework и вроде как вроде как public субскрайб правильный паттерн но когда ты начинаешь смотреть на приложение в котором типа 100 страниц в итоге получается что ты пытаешься разобраться блина к чему же приводит нажатии вот этой кнопки в этой панели и что же она дергает и выясняется значит что во-первых события могут неявным образом попадать в родительский класс и которые все очередь генерят вторичные события которые попадают какие-нибудь класс из бизнес-логика и которым свою очередь генерят еще о событии или несколько событий затем значит часть событий игнорируются фреймворком потом меняется какая-то модель эта модель генерирует события то что данные вам не поменялись появляется еще пяток классов которые подписаны и изменения и в себе меняют какое то состояние которое зависит от состояние этой модели и в итоге значит через 3 часа ты наконец строишь стройную картину и понимаешь как бы что у всех событий на название события они ну очень очень похоже везде есть он клик и тебе нужно понять это он клик от этой кнопки которые ты нажал или он клик от соседней кнопки которые то нажал а потому что framework не запрещает подписку любого компонента на любой то есть ты можешь добраться из какого он супер контроллера до кнопки в конкретной панели подписаться на ее он клик и это будет просто он клик в кавычках и такие дела очень трудно держать потому что нет какой-то уникальной селективность этих компонентов то есть там есть свой механизм за со компонент к вере похоже на expose в котором можно написать ну как риггс запрос который говорит найди мы там все кнопки которые вложены в определенную панель с определенным названием поэтому когда ты пытаемся чёта 3 factory очень трудно найти все вообще места где мы реагируем на конкретно события вот зачастую у нас это даже приводило к циклам событий когда приложение зависает потому что постоянно появляются дочерние событий она человек их обрабатываете это цикл бесконечен пока та не напишу какой хитрый iv типа если ко мне это событие уже приходила его не обрабатывают а мы дальше у не обрабатываем речь идет а вот запутанные именно архитектуре вот ну все самая вот а у меня к вам большой теперь вопрос мы сейчас поиграем в игру вот в коде крупных приложений жестко очень связанностью между ролик логика view между размазана стью функционал и стоит и по разным классам и очень плохим разграничением зон ответственности там между языками технологиями проще чего обычно нет правильно вот вот так вот получилось причем непонятно самом деле почему получилось потому что на мой взгляд могло быть лучше ну вот как бы короче объекты рэй мы проверили остальное как получится и вот вечно и вот эта вот история про то что когда ты начинаешь на самом деле писать тесты ты про многое узнаешь про свое приложение что самом деле нифига не надо было делать такое количество связей потому что замок от 15 объектов ради вызов одной функции очень геморойно вот в этом плане как бы получили ну что получили тесты давай до свидания вот ну какие выводы ну как бы вот такие конечно выводы в но на самом деле настоящие выводы в чем что фреймворк очень сложны для понимания в разработчиков особенно разработчиков которые до этого не защищали докторскую диссертацию по джаве во вторых код который получился он очень запутанный в нем много очень связей все классы друг про друга знают и событие которые появляются они как бы никем не контролируется из это приводит к таким фейерверка образным взрывом изменения стоит в приложении когда 15 мест подписан на какой не стоит события потом generly свои дочерние события еще какие другие места еще начинают обрабатывать эти события вот и в этом плане фреймворка бы жутко синхронный и это асинхронность она взрывает мозг получается так что компоненты правят люди которые понимают одновременно язык шаблонизатора намешаны джесс код html5 и всё это в одном файле обычно верстальщика нанять там но я не знаю сколько сейчас получает верстальщик вот там за сколько 40 до 60 тысяч невозможно этих датчики посадить его за простую рутинную работу вот в этой панели убери эту кнопку потому что сборка всего uiaa происходит в джесс ходе с методом создания инстансов джесс классов то есть ли описываешь большое дерево какую кнопку в какую панели вложить какие параметры передачи какие ссылки на какие события потом подписаться вот соответственно главный мой вопрос был виноват ли в этом фреймворк на самом деле ну конечно виноват частично потому что он подталкивает тебя к publish я вскрываю потому что он подталкивает тебя к такому вот им вести которые они сами делают вот такой вот псевдо им вести потому что в нем как бы нет dependency injection из коробки потому что он не говорит тебе как тестировать и вот это все вот дела собственно речь про что про то что на самом деле как бы нам то нужно несколько производительность как бы производительность кода сколько просто нормальный четкие правила понятны для разработчиков куда классе файлы как называйте программу что такое хорошо и что такое плохо какую архитектура полезно как архитектура не полезно нужен код в котором можно нанять человека дать ему две недели он в нём разберется начнет его нормально дописывать не выстрелил себе в ногу путем там разыменования каких не хитрых слуг и попытки отследить где же это событие заканчивается нужно четкое разделение работы по людям одни люди делают верстку другие люди там верстка вдыхают что-то третье люди ответственны за работу с api 4 там с дизайнерами нужно разделение языков и технологий желательно по файлового вообще чтобы можно было каким-то людям которые не разбираются в шкоде давать какие-то вторичных задачи например переводы то есть локализацию на нужный язык я про это расскажу еще вот конечно хочется менее связан архитектуру потому что тестировать это нереально написать тесты для этого очень трудно очень очень очень трудно поэтому хочется какой-то изоляцией понятный микро компонент которая каждый ответственность за свой маленький кусочек и проще ей слой вот поэтому почему главный посыл как бы всей этой презентации это самый главный слать что все ваши песни про производительность фронтенда на самом деле в итоге управляются в лучше видны код отсутствие стандартов и и как бы мы наняли нового чувака оон 4 месяца правит одну бабу давайте сначала улучшим производительность разработчиков дадим и в руки нормальные а не гнутые инструменты и они сделают намного лучше код и который будет намного лучше работать потому что эти задачи были решены на уровне фундамента то есть мы как бы будем стоять на плечах гигантов вот ну соответственно решили что мы как бы надо что-то менять надо что-то выбирать конечно же нужно не как-то независимый непредвзято оценить к ее все это дело вот ну конечно я полез в интернет ну а чё как бы делать тут как бы все mba лезли интернет вот а выяснилось короче что за пять лет пока я значит управляла и работал на спички есть а в мире джесса многое поменялось в этом плане пришлось много выучить заново ну и вот этот вот тысячи этих фреймворков каждый который как две капли воды зачастую похожую на друга особенно вот во flac framework ах это прям вот придумай свое название . джесс и из этого adac там где google web кит уже давно живете на уже давно умер надо как-то выбрать блин что делать ну конечно надо было что-то подумать как бы посмотреть как другие где-то что-то выбирают в интернете залезь и где-то короче спереть результат в итоге выяснилось что спереть результат у меня не получится ни фига придется делать честную оценку потому что они все очень разные вот поэтому для начальства был сделан целая большая серьезная презентация в которая реально непредвзято была попытка оценить какими же на самом деле framework ими пользуются разного рода компании сайты вот именно про компании сайты отсюда слайды вырезал остается именно честные цифры это вот количество строчек кода вообще написанных с момента появления гитхаба на разных технологиях плюс-минус вот значит вот это слайд который рассказывает о том на каких крупных конференциях за рубежом были сколько докладов по каким технологиям на конференциях посвященных именно фронту и в 2015 году вот и везде картинка разное вот на этой картинке соответственно тренд популярности запросов в google и их тут несколько вот здесь вот если присмотреться видно что все технологии идут на самом деле на спад кроме реакции снг с если взять таким другие старые более-менее фреймворке типа j охуенные нашего любимого xds а то тоже все идет на спад в этом плане с rectangular им никто не поборется потому что это единственно что идет вверх и вот вот мы дальше смотрели вот такое исследование где 2 200 тысяч разработчиков был опрошен оказывается которых выбору какой-то эту технологию это вот американской компании которая делает клауд азии продает им как бы клауд айди некую вот получилась вот такая картина совершенно другая то есть вот те разработчики которые там поддерживают продукты в них еще силен на пир борьба он который был по большому счету старел но тем ни менее кит существующие проекты которые доделывают на нем существуют и существует много вот вот это вот российский уже рынок мы пытались оценить кого же мы можем нанять потому что ну как бы очевидно что это мы не в космосе работаем мы нам нужно делать продукты в компании продуктов многое планов громадьё поэтому кого-то надо нанять здесь вообще картина другая выяснилось что так или иначе с какой то из версий с а поскольку он достаточно долг из какой-то из версии бэтмена поскольку он тоже родился там 2008 году так или иначе кто-то имел дело то есть это никакой на самом деле гарантии не дает о том что человек прямо сейчас готов чего-то сделать рилтайм на этом фреймворке но тем ни менее выяснилось что среди растущей технологий праймеры реакции появились внезапно бурбона xds причем вакансии по ним есть реально есть их достаточно много вакансий по бэтмену больше чем вакансий сознанием реакция вот какая удивительная картина на российском рынке в итоге мы короче в методом пристального скрещивания все эти исследования максимально скрестили оставили то что нам интересно туда добавили еще тот же и добавили cs6 которые собственно изначально хотели вообще переходить а тот же потому что его используют ну parallels с которым мы тесно интегрируется и на котором у неё к еще написано вот значит здесь было наглый вырезано 5 слайдов я не буду рассказывать про то почему нам все это не подошло потому что рассказ там очень скучный на самом деле вот поэтому как бы я наверное не буду на этом останавливаться потому что ну как бы если вы полезете звучать как-то сами для себя сформируйте какую-то картину для себя мы оценивали исходя из наших задач одна из задач было то что технология должна быть более менее встраиваемого по частям в существующий код то есть нам нужен не монолитной фреймворка скорее набор каких-то методики библиотек которым можем потихоньку внести вот в этом плане оказалось что knockout это вообще не фреймворка view и библиотека тот же это просто мамонт x6 как бы хоть и привносит но в архитектуру но на самом деле мало чем отличается от s4 там появилась поддержка какая-то работа с мобильными устройствами более лучше но концепция не поменялось там чуть лучше стало архитектура но для нас как мы оценили примерно одинаково что мы на ис-6 будем переписывать честно архитектуру prema вот так как они предлагают что мы будем на любой другой фавор переделать примерно одинаково по затратам вот в итоге отказались потому что все тот же ей слой все тоже public субскрайб и в итоге как бы истинных кандидата на самом деле было только два это был ндс по понятным причинам вот который еще активно очень отстаивали и несколько отделов компании и некоторые внешние советчики но с ним возникла очень интересные дилеммы как бы то есть с одной стороны это действительно выглядела очень хорошим решением с другой стороны я много очень видел статье на хабре которые обсуждают ну и вообще в язычном интернете тоже которые обсуждают некий допущенные при проектировке именно концептуальные ошибки приводящие к тому что как бы все очень круто но мы запутались наши как бы собственное зрение на это дело такое что если брать версию 1 на который у нас компании есть два проекта и посидеть покурить исходники то у этого фреймворка реально хорошая модульность разделения на отдельные кусочки каждый из которых делать свой маленький функционал вот это очень полезно и хорошо но нет единого стиля раскладки по файлам нет единого стиля именования каких-то переменных и единого стиля форматирования кода то есть вот так то вечно в виде как бы пьет пеппа 8 который бы хотелось как-то получить до кучи с вами оркам но ни фига не получится и он причем со временем там этот стиль раскладки меняется вот так же от себя добавлю что зачастую находятся места в ходе которой по-хорошему были бы должны быть отдельными классами на их почему-то виде в виде объекта с функциями туда пихают трудно де бо жить очень много разных хитрый магии очень сложно интегрировать каким-то новым технологиям там что стандарты абсолютно все свои проектных слипшиеся вообще речь не идет вот как собираетесь это дело тоже не очень понятно но как бы вот этот вопрос можно решить но самый беда что как бы начальству я это продать не мог потому что грибы всем ну и понятно я тоже как бы говорил что ребята все они делают новую версию код будет несовместим чё делать дальше непонятно но кей полезны смотреть версию 2 вот версии 2 прямо вообще отлично выглядит как то что нужно такой бэкон на ориентированный подход все разложено по полочкам хороший очень синтаксис на typescript то что надо но блин нет шансов на релиз вообще нету я то есть я самогона и не понимаю вот это вот супер мега google корпорация она как бы давно работать с питоном вот пример того как бетон переходит с версии 2 на 3 это просто хрестоматийный пример того как надо делать надо поддерживать синтаксис старой версии надо быть backward compatible здесь какой то адский ад просто да то есть и по он будет несовместим мы сейчас что-то новое делаем вот альфа версия для него никогда нет документации когда мы запустим ся непонятно и самое главное у нас во всех трех языках еще и разный синтаксис ну зашибись блин то есть это это что это решение это это типа это вы извините меня это локомотив фронт-энд разработки то типо самый крутой framework все страшно любят пить и и чем чем не делать с админ коми которые сейчас пишет четыре человека на нгс прийти и сказать ребята вы знаете мы просто садимся и все переписываем у нас ничего не станет лучшим просто переждем на новую версию а зачем приезжаем ну потому что старую забросили они меня конечно же спросит слушая есть такая штука как впитал в питоне типа пай 2 to 3 ну типа давать над равен какой-то парсер он нам сейчас переформатирует код она хоть как-то начнет собираться ты лишь извините нет причем мало того что нет она сейчас все еще поменяется завтра завтра у нас будет другой синтаксис вот это вот это продать тоже никому невозможно просто совет директоров ты меня посмотрят и уволит на завтра и все то есть все как бы чуть делать снг с непонятно мы дальше стали смотреть и было второе решение с которого выбрать это rect же с который сделал facebook с удивлением оказалось что это не фреймворка всего лишь ей библиотек да ладно не фотографируйте но дам я вам слайды то можно это скачать в конце все будет у него очень четкая понятная структурность четко понятно что этот единый data flow который только получает данные только их отрисовывать каждый компонент изолирован у каждого компонент и есть декларация чего он получает на вход чем он в итоге отрисовывает как чего внутри он хранит в виде промежуточного стоит а нет вообще какого-то магических фильтров и прочей фигни который надо ткут и подключать учите знать как работает в этом плане все максимально предсказуемо это очень классно мне очень понравилось что есть очень простая возможность тюнинга производительности четко понятно как она работает четко понятно как ее использовать ничего супер сложного в этом нет есть даже серверный рендеринг который нам не нужен но круто что он есть вот значит до кучи к этому как бы шла архитектура flags который активно двигает facebook мы им посмотрели на все это дело у нас как бы был соусов с одной стороны то что ван вей data flow это что синхронной обработка как вы стоит машины где четко понятно определенное состояние приложение это супер но как приложение делится на независимые блоки и как разделить его как внж ужасно какие-то отдельные сущности не очень понятно потому что по большому счету мне вот лично кажется что там явно есть анти паторну виде того что скоро хранят данные одновременно реализует бизнес-логику реализует еще логику измененить их данных то есть этой модели контроллер одновременно идея с единым диспетчером как единый and bass с уникальными новыми событиями где можно быстро найти в коде где что поменялось и делать быстрые рефакторинг ее компоненты работает и заливаем друг от друга это супер но совершенно непонятно как обеспечиться динамика как открыть и там например на одном но вот я сейчас расскажу как открыть на одном экране два окна которые бы работали независимо друг от друга но при этом генерал любой одинаково например события вот по большому счету значит фейсбук нифига не зарились его коды то нету то есть это нифига не framework это некая архитектурная идея причем на самом деле в 80-х годах изобретенных которая называется ну и в and bass ноги и давайте посмотрим какие сторонний фреймворке которых блин вот реализуется эту фигню я короче штук пять их пересмотрел они все как две капли друг на друга похожи они все в этом плане намного хуже чем нгс же с и намного хуже чем xs потому что в них ну вообще нет почти ничего да там лучше видно как работает от архитектура но все еще нет и речи ни о какой динамическом создание створов как бы их выгрузки какой-то линковки ей компонентов между стороны так чтобы и части приложения работали изолируем друг от друга и можно было бы два компонента создать одинаковых с одинаковым view и два контроллера они бы не воевали друг с другом этими событиями вот поэтому в этом плане с разработкой в приложением как бы все очень странно то есть зачастую непонятно как это делать зато в этих фреймворков виден развитие java script и за последние пять лет в виде там из аморфность и в виде нормальной модели в виде принесения кита библиотеку вынесения функционал библиотеки в виде поддержки ecmascript 6 вот это вот хорошо только блин нифига нет вообще инфраструктуры тестирования никакой в них и не понятно как писать тесты особенно с этой новой супер архитектурой вообще не надо писать тесты и нет интернационализации вот ну как бы попутно мы конечно наткнулись на typescript в этом плане вот это прям вообще бомба я подумал что вот самый супер вот убрать излишней креатив разных разработчиков это очень любят делать свои велосипеды с помощью этого отличный может typescript этот транс компилятор то есть он ты пишешь код напоминающий java script на самом деле с таким же синтаксисом только расставляя типы то есть у каждой перемены есть какой-то тип причем они могут быть сложными могут может быть у переменной одновременно как бы несколько типов и в итоге он эти типы убирает создавай тебе java script file с абсолютно таким же синтаксисом где просто убраны эти типы и там еще есть несколько полезных синтез шугар вещей которые все абсолютно соответственно стандартные к москве в 2006 то есть это просто компилятора зак москве 65 там например есть вот такие вот сложные типы данных к ты можешь сделать целый контрактом объект со сложной структурой и теперь у тебя разные части приложения заранее знают что из-за переходит вот такой вот вложенный объект хитрый или там например повторяются в нем поля и соответственно это используем это как некий клей между отдельными частями приложения то есть каждый пишет ориентируясь на какой-то интерфейс эту бизнес-логику вот и компилятор при сборке сразу же проверяет вообще можно ли скомпилить это правильно ли ты организуешь доступ к этим полям правильно ли тип ты в них как бы подразумеваешь потом там есть интерфейс и то есть как бы забегая вперед фреймворк который мы написали и основу силен интерфейсах то есть мы как бы ориентируясь на принцип solid разбиваем на более мелкие зоны ответственности и делаем так чтобы у нас там разные классы зависели от небольших интерфейсов получается у нас больше дик uplink приложение точно также есть поддержка дженериков точно так же примерно как в питоне есть т.к. у смысл декораторы как в питоне есть дженерики примерно как это принято в мире си плюс плюс и которые мы активную пользуемся и есть составные типы когда ну и в редких случаях можно сказать что в этой переменной может или строка или число ну тогда когда этого как бы не избежать и он тоже нормально с этим работает но еще в итоге в итоге после этого исследования вопросов стало только больше какую архитектуру выбрать как правильно нам как бы какое решение правильное как как идти в этом плане в ногу с развитием java script в виде в москве 6 вот где взять библиотеку компонентов и в этом плане x на самом деле даже руну как бы очень активно держит удар в нем все это есть нем есть своя сборка в нем есть механизм интернационализации в нем есть понятная архитектура и прочим то есть то что получилось то получилось странно но только как бы альтернативы то нет ну как бы она есть но вот как бы надо ее делать самому в итоге хотим frameworks typescript все хотели на этот момент frameworks typescript м без уже не хотела никто ну ладно чего делать значит допишем задачу сами себе значит же с кадры должны писать код листа щеки должны верстать общаться с дизайнерами явно совершенно нужно сделать максимально простой ей слой что в нем разобрался дизайнеры чтобы это было понятно программисту без жуткого наследования css стилей там в 34 уровне без жуткого наследования компонентов вот нужно сделать четкую понятную архитектуру в которой разобраться код примерно понятный backend разработчикам и нужно разделение зон ответственности отдельно верстка отдельный код отдельно контроллеры отдельно хранения данных стараться запихать состоянии приложения в один в один какой-то тип классов назвав его моделью в общем и главное больше границ правил и стандартов именования форматирование кода раскладки по файлам всего этого дела и при этом на typescript и при этом еще так чтобы это все дела не было монолитным фреймворком потому что все это дело нужно будет еще и потихоньку внедрить в существующий код мы в итоге взяли фреймворк который называется есть тот же с но он ни о чём не говорит он был наиболее такое революционные инновационные плавно переписывали пока от него не осталось вообще ничего вот в итоге было несколько проблем значит первая проблема получается так что стороны некий антипа тарного flags на практике у нас ничего хорошего с этим не вышло мы в итоге обратно разделили их на классы которые хранят данные и могут их менять и отдельно бизнес-логику в контроллере это примерно то же самое куда сейчас идет развитие flags а когда у них есть отдельно вынесены объект состоит им вот у нас этот объект состоит им просто называется stor получился значит было вот так получилось примерно вот так то есть изолированные блоки примерно так так же как в январе с таким же механизмом в виде модулей в каждом модуле там один или несколько своих старов которые общаются с одним ли несколько контроллеров и в итоге все это дело как бы работает отдельно от view view только читает данные споров и генерирует некие экшены которые единый dispatcher раскидывает но на самом деле ни единой у каждого изолированную блока может быть еще свой раскидывает между контроллерами каждый из которых решает ну подписывается на события реагирует он это событие или нет вот в итоге у нас как бы приложение работает как набор вложенных друг другу приложений в каждом из которых внутри как бы flags но некий такой иерархи к вам виси это на самом деле нет ни flags это тоже в висе вот это иерархическим вести где view просто вложены друг друга а контроллера изолированы вот значит вторая проблема в том что шаблоны facebook предлагает делайте вот так мы конечно долго мучились мы поняли что это вообще не вариант и мы стреляем себе в ногу я абсолютно не понимаю зачем мне нужно смешивать кучу джесс кодах фигурных скобок и круглых скобочек логику все вот вместе в ей компоненте когда по большому счету суть ей компонента в том что бьет какой-то шаблонный вариант в браузер мы посмотрели такого проекта квикс реактив бойцы написали свой сильно сильно похожий но в нем нет кода то есть только есть блоки так называемый который обеспечивает итерацию и и в млс и переменный больше ничего нету то есть задача компонента в эту переменную запихать заранее то что в ней будет выведена вот и задача компонента указать сколько раз интегрировать какой блок с какими данными вот так выглядит шаблон вот такой вот мы написали свой собственный парсер этих шаблонов которые делают из него дом дерево генерит вот такие вот шаблоны сильно-сильно-сильно такие же как и где нет же секс вот вот это уже дело автоматически генерится с этим делом работает реакции и соответственно суть ей компонента в том что он декларирует никакие пропсы декларирует некий state и эти пропсы запихивает ну в самом самом простом способе запихивает в блоке и в перемены вот по строю некое дерево которое потом рендерится для переводов мы сделали штучку который вы курсовые текст из этих шаблонов генерит нам файл мы этот файл ручками переводим на русский язык можно туда добавить какую-то верстку вот обратите внимание на последней строчке добавлен span вот этом это в делом пока закладываем для при реализации слов и соответственно дальше генерится такой же шаблону только в нем эти строки заменены на строки на русском языке и этот span тоже распарсенной подставлен в шаблон вот значит с динамикой и беда в том что как бы не очень facebook объясняет как это делается как сделать независимо работы двух компонент мы в этом плане но нашли несколько вариантов решений сейчас их прорабатываем чем в итоге получилось получился фреймворк с хорошим лапы с маленьким интерфейсами с дженериками близко-близко похоже на то как бы это было написано самом деле на джаве с dependency injection который обеспечивает связь классов внутри одного модуля у которого только две внешней зависимости to react илу дашь в котором можно сделать любой архитектуру захотим рефлекс можно сделать рифах захотим и висим можно сделать в висе потому что на самом деле там три спальни файлы плюс реакции из нормальный механизм сборки через в пак из наконец то у нас и мы избавимся от анд и maven который использовал их джесси и руби дурацкого который там тоже используется вот значит мы сделали 2 пилотных проекта 10 cs6 другой на реакции абсолютно как бы с нуля без использовать существующего кода оба повторяют фунт один и тот же функционал существующей админке но только одну единством страницу на ней на который некоторые кнопки не кликается достаточно немного все это вместе заняла ну где-то месяц работы в сумме вот задачи были сделать анимации сделать кастомный нами рисуем и scrollbar сделать отдельный интерфейс для узких экранов типа лео планшетов сделать отдельную мобильную версию когда экран совсем узкий и сделать что все это авторизировался ходила в json разгрузил реальные данные которые нас есть вапжя и с ними позволял работать в итоге получились короче такие цифры но на них в общем можно не смотреть ну суть в том что оба проекта реализованы с нуля поучились так что в как бы flux плюс react выигрывал от двух до пяти раз но с большой звездочкой что когда у нас будет столько же ей компонент сколько есть в их же эти размеры билдов там и скоростью инициализацию она конечно упадет бы что в этом плане мы теряемся с монстром индустрии вот ясное дело что просто так на все это дело не переехать поэтому мы примерно в селе покурили все существующие интерфейсы с дизайнерами собрали некий единый файл в котором 60 простых компонентов типы панелей кнопки 15 сложных это типа например нас есть таблица в которой можно выключить какую колонку ли отсортировать ряды или на переезд dropdown в которой можно теги набирать вот это прям конкретно сложные вещи я некоторые из них завер стал прям сделал рабочими компонентами на реакции от у меня за него где-то четыре дня мы в итоге получилось так что мы примерно процентов 10 все это сделали оценили как две тысячи строк кода за четыре дня и получили примерную оценку в два человека месяца вот реализации всех ее компонентов которых состоят наши проекты ну и собственно в общем-то последний слайд что долго думали как делать но пока короче решили так что новые проекты сразу дело но во фреймворке попутно создавая ты и библиотеку в отдельном репозитории старый код c не трогаем настроим независимыми блоками в него как бы новый функционал в виде как берем отдельную панель или страницу и и переписываем на новый либо если это новый функционал ты вообще делал эту страницу и и сызнова соответственно новый файл прикидывается ей компонентам внутри их джесса делая вид что это какая-то панель которая как-то отрисовывается внутри себя что-то делает а наружи ну максимум одно два события дает вот ну и конечно же при модификации старого кода ты либо портирует существующий функционал либо правишь как есть вот так что как бы суть доклада как всегда превозмогая трудности велосипеды баги костыли делайте все свое делайте свое потому что ваша команда теперь обладать их логии экспертными знаниями как блин она работает то есть мы читали исходники react и наконец понимаем как же он блин работает все у нас у нас есть пара минут на вопросы пожалуйста задавайте поднимайте руки спасибо больше за доклад будут это наверное самый полезный доклад на всей этой конференции я думаю что это вообще-то как про менеджерская работа на самом деле антенну мы в компанию себя примерно такую же технологию ну вернее как также шли только мы используем нокаут все-таки он больше подошел у меня вопрос был про модель приложение виси которой у вас получилось результате там есть один нюансик небольшой это взаимодействие между с об компонентами когда один саб компонент пытается как-то взаимодействие с другим sap компонентом здесь нет стрелочек как это реализовано в этом как бы суть идеологии flags а то есть что у тебя есть изолированной части приложения каждый из которых работает независимо вообще весь highload как бы в вебе реализуется с помощью и нормализации здесь на самом деле такая же абсолютная идея тебе нужно открыть окно тогда ты либо как бы на манер ридак сохранишь все данные в одном месте и у тебя на появившейся новый контроллер начинает независимо работать чего-то там обрабатывать в этом едином месте этот стоит менять когда он заканчивается то он кому-то либо фреймворк у говорит что я закончу мне надо удалить или каким-то другим способом как бы сам себя выпиливает но при этом с родительскими контрольными он не общается у нас дочерние контроллеры мог внутри от одного изолированного блока могут родительскому только один раз при создании отдать ссылку на то какой компонент и реакция будет отрисован внутри у того блока в котором этот контроллер как бы должен работать вот либо второй вариант видео сейчас надену на реализацию заводишь отдельные хранилища как бы данных динамической который создается только тогда когда этот контроллер появился туда копируешь те дали с которым будет работать этот контроллер генерирует также через dispatcher события о том что что то поменялось и так давайте как бы и родительские контроллеры получает уведомление о том что они свой стоит должны поменять о том что как бы что то поменялось системе и твой контрольный сам своем storie тоже меняет какие-то данные вот здесь один клип где нормализует либо если нормализует что все но все идет через dispatcher едины для изолированного блока ребята давайте эту тему холивара очень давайте уже перейдем берите его кека за жабры и тащите задавать вопрос а мы перейдем к следующему так массива"
}