{
  "video_id": "xHhRzCxcuJE",
  "channel": "HighLoadChannel",
  "title": "Экспертные системы для металлургии: пятилетка за год / Сергей Окатов (БФТ.ЦР)",
  "views": 421,
  "duration": 3188,
  "published": "2023-04-28T06:10:46-07:00",
  "text": "Привет Сегодня я хочу рассказать доклад на тему экспертной системы для металлургии Пятилетка за год Итак Меня зовут Сергей акатов я кандидат физико-математических наук сейчас являюсь руководителем управления разработки в компании bftcr также являюсь автором и руководителем курса backend разработка на кортлинг в компании отас но сегодня Я выступаю как частное лицо по опыту предыдущей работы которую я выполнял в качестве архитектора и руководителя команды разработки Итак речь пойдет о металлургии в экспертных системах в рамках работ реализовано пять таких систем в качестве примера я пишу опишу кратко пока что один из них это снижение потерь металла при сливе шлака из конвертерного ковша Итак что такое конвертерный ковш то есть кислородный конвертер это такая бочка около 12 метров высотой в которой плавится металл технологический процесс плавки показан на слайде и на нем нас интересует слив шлака обозначен что на картинке не показано это то что слив шлаков на самом деле производится несколько чаще и вместе каждый и каждый раз вместе с шлаком сливается какая-то часть металла очевидно что эти потери заказчик хочет минимизировать именно этому вопросу был посвящен именно этот проект как мы решаем прежде всего получаем данные опять же прежде всего именно с инфракрасной камерой но также и из другого оборудования и автоматизированных систем все эти данные поступают в нашу систему там мы их анализируем различными методами в том числе машинным обучением в итоге мы выдаем рекомендации сталевару и отчеты в руководством И как я уже сказал подобных проектов в рамках контрактов было сделано 5 штук сами проекты безусловно интересны но основное внимание Мы сегодня уделим именно условиям в которых они выполнялись условия эти были довольно жесткие я бы сказал экстремальные так вот на старте у нас была целая серия проблем во-первых работы были категории ниокр то есть готовых решений практически не было и собственно проект был посвящен тому чтобы эти технологии И вообще договор был составлен Так что целью в нем были чисто экономические в том числе держала достаточно мало технических требований то есть в целом задача была с высокой неопределенностью как в плане технологии так и в плане постановок задач во-вторых Прямо во время старта работ произошла смена команды аналитиков имевшаяся аналитик вообще при этом была сделана достаточно слабым А многие вопросы анализа как раз из-за смены отодвинулись на потом То есть все это состояние неопределенности но еще больше стало неопределенным с разработчиками была тоже похожая ситуация прямо на старте работ разработчики стали постепенно сливаться и в итоге на сто процентов сменилась команда разработки что это значило для проекта уверен никому здесь рассказывать не нужно сроки спокойных условиях когда проект делается в обычном рабочем режиме подобные проекты как правило выполняются за год каждый по условиям контрактов мы должны были реализовать за год все пять проектов Отсюда и название доклада Пятилетка за год И последнее если посмотреть на план работ первая тема нужно было сделать уже через три недели после старта и там мы должны были продемонстрировать готовую работающую систему А через два месяца нужно было должна была состояться защита результатом которой решалась Либо мы продолжаем работу либо все расходимся по домам и глядя на такие условия старта честно говоря никаких шансов на успешное завершение проектов вовремя как-то не просматривалась Но что же в итоге В итоге конечно не все было гладко были переносы сроков сомнительные решения один из проектов В итоге сдавали под честное слово потом него доделывали и тем не менее в целом проекте проекты были завершены и завершены успешные вовремя естественно успех был достигнут силами всей компании и вся команда компании выложилась на сто процентов но в этом докладе Я бы хотел сосредоточиться на собственной зоне ответственности то есть еще раз архитектура и управление командой разработки и главные причиной моего личного успеха Я считаю прежде всего мой опыт но также возможность его применять что наверное даже более важно как собственно завещал всем известный Стив Джобс когда говорил что нанимает специалистов не для того чтобы рассказывать им что делать для того чтобы они говорили ему что делать Итак вызов был принят мы начали работу на самом деле было сразу же очевидным что стандартными средствами завершить проект вовремя практически невозможно оценки в принципе уже сказал То есть где-то 3-5 лет нужно было на то чтобы все это сделать штатными средствами поэтому мы сразу стали применять серию экстремальных решений Некоторые из них мы сейчас с вами как раз и рассмотрим чуть поподробнее начнем с аналитиков как я упоминал команда аналитиков сменилась прямо на старте но основной проблемой при работе с ними разработчиков было не этом гораздо большую проблему доставляло вообще очень распространенная проблема стиля работы аналитиков а именно аналитик не столько занимался сбором информации сколько принимал готовые решения причем чаще всего технического архитектурного характера и принятие этих решений на самом деле у него не было ни полномочий ни квалификации например приносит он диаграмму в ней и говорит вот вам нужно сделать здесь сбор каких-то данных Здесь вы сделаете цикл здесь поставите такое условие приводили подобные документы естественно достаточно оживленным дискуссиям прежде всего со мной как с архитектором я думаю тут очевидно я вроде архитектора мне приносят фактически архитектурные решения которые я должен по их мнению реализовывать кульминация дискуссии была достигнута на вопросе Нужно ли получать данные из внешних источников между плавками Ну вроде бы тут все понятно с бытовой точки очевидно если процесс завершился мы отдыхаем Зачем нам совершать усилия куда там лезть что-то получать какие-то данные Лично у меня как у архитектора был совершенно другой аргумент логика включение отключение сбора данных это тоже логика ее нужно реализовывать на это нужно потратить ресурсы разработчиков силы деньги в итоге я продемонстрировал телефон сказал коллеги он сейчас включен или выключен очевидно экран выключен Но он же при этом связан с базовой станцией получает данные из облачных систем в результате мне удалось убедить коллег в своей правоте с одной стороны а с другой стороны в этот момент инициировалась определенная реформа В итоге был найден компромисс устроивший все стороны а именно роль аналитика мы разделили бизнес-аналитики стали как раз работать больше с клиентом собирать всю необходимую информацию Где Какие источники откуда взять как ожидает это все видеть заказчик эту информацию передавали системным аналитику и системный аналитик на самом деле принимал информацию не только от бизнес-аналитиков он принимал информацию со стороны всех стейкхолдеров а я уже как архитектор на базе всей собранной информации принимал решение технического характера в результате применения такой схемы скорость принятия решений и их качество на самом деле очень сильно возросли и правда очень довольны остались именно такой схемой работы Следующий вопрос Это стек так вот одно из моих ключевых правил это то что технологический прорыв делается на новых технологиях на старых технологиях вряд ли удастся по крайней мере самолеты на паровых двигателей двигателях так и не были созданы Несмотря на все попытки вопрос Здесь холиварный в другом а именно что считать новыми технологиями что считать старыми у меня подход простой если на рынке доминирует какая-то технология там 60 90 процентов занимает то имеет смысл поискать что-то более новое что-то более эффективное и интересное и знаете коллеги я как правило нахожу такие инструменты и тут надо оговориться я совершенно понимаю мотивы компании которые плотно сидят на Классике во многих случаях эти мотивы вполне оправданы Но в данном случае Мы работали над экстремальным проектом На первый план выходили совершенно другие аргументы и посмотрите на тот стык который мы применяли в итоге на нем практически отсутствуют самые распространенные известные инструменты Но вот кроме питон тут затесался но на самом деле питон не очень широко мы использовали и именно благодаря вот такому стеку на самом деле был успешно завершен проект почему Ну давайте посмотрим один пример у нас было дилемма выбора контроллера для снятия данных с вибродатчиков В итоге был выбран sepidas американская компания и на мой взгляд это было ошибочное решение но принималось оно не мной так вот ACP dass 512 КБ оперативной памяти сравниваем Raspberry либо 4 гигабайта либо 8 гигабайт до оси педанс однозначно это Промышленная сертифицированное решение разбери это считается бытовым решением Хотя честно говоря по характеристикам не выглядит оно таким в частности по радиационной Стойкости его вполне хвалят вплоть до того что предлагается запускать его на низкие орбиты так вот интеграцию с Айси пидас мы выполняли В итоге потратили на неё около 4 человека месяцев Почему так много там достаточно много различных трудностей релиза во-первых стандартный промышленный интерфейс modbus в данном случае для виброданных просто не потянул скорости пришлось использовать проприоритарный интерфейс как ревитарный интерфейс только под Windows Кроме того возникла серия более мелких проблем которые сильно отнимали время в частности вычисления точного времени конкретного сэмпла недели две наверное экспериментировали с ним достаточно много усилий потратили на это с другой стороны Разбери пай но у меня сын когда ему было 12 лет разобрался как управлять внешними устройствами с ним на питоне буквально за пару дней по инструкции с имперки так то есть опять же я ничего не имею против классики извиняюсь еще раз Я ничего не имею против классики Но если у вас экстремальный проект то скорее всего придется воспользоваться какими-то экстремальными инструментами Следующий вопрос Это работа с командой как я уже сказал на старте работ команда началась сливаться и в итоге заменилась на сто процентов и опять это не самая главная стала наша проблемы более значимая Проблема была в другом все они конечно отличные ребята кто-то сеньор кто-то Мидл в целом соответствовали рынку проблема в том что экстремальный проект требовал совсем не тех навыков которые предлагают рынок с одной стороны нужны были люди способные работать в режиме ошпаренной кошки это один этот термин на самом деле одного из кандидатов он как раз и отказался от под этим предлогом что не хочу говорить работать в режиме спаренной кошки хочу спокойно работать с другой стороны нужен опыт работы с модерновым стеком и вот в условиях утечки команды не до комплекта нужно было срочно найти Супермена которые способны завершить подобные экстремальные проекты за вполне экстремальное время и здесь мне помог мой опыт преподаванием в онлайн университете я стал привлекать выпускников своего курса и тут буквально пару слов о курсе вообще курс мы рекомендуем именно разработчикам с опытом но приходят на него люди разные в том числе был и менеджер по продажам был разработчик с 20-летним опытом и разные люди на самом деле доходят до конца большой опыт в разработке на самом деле не гарантирует что человек удачно получит сертификат в конце так вот особенностью курса является его Легенда по легенде это разработка стартапа Что может быть более экстремальным чем разработка стартапа когда из этих стартапов В итоге выживает порядка менее одного процента То есть к выпускники к моменту окончания курса уже имели навыки работы в экстремальных условиях и даже имели готовый стартап готовый проект в конце своего обучения и вот таких людей мы как раз и взяли в свою команду Xiaomi Именно таких выпускников проект был завершён сейчас парней из моей команды уже перекупили другие компании часть из них ушла на уровень плюс часть на сеньоров то есть рынок на самом деле достаточно позитивно Оценил квалификацию этих людей Следующий вопрос Это экстремальная архитектура тут Опять начну вполне с банального утверждения изменения в коде будут всегда Раз так значит возможность изменений надо сразу предусматривать в архитектуре опять же вроде очевидны Лично я это делаю применяя элементы гибкой архитектуры Что за элементы Давайте посмотрим чуть подробнее прежде всего очевидно модульность уверена что здесь не нужно никому доказывать что заменить модуль это гораздо дешевле и проще чем рефакторинг сильно связанный код так вот модульность у нас применялась на всех уровнях разработки если посмотреть на верхний уровень то мы разрабатывали именно 5 изолированных проектов а не один большой связанный проект во-вторых мы использовали микросервисную архитектуру понимают тоже может быть холивар что лучше Монолит или микросервисы Но в данном случае именно микросервисный подход позволил нам вовремя завершить проекты замена одного микросервиса на другое это было стандартная операция чуть дальше мы разберем Кроме того мы использовали гетерогенные проект был гетерогенный то есть использовался Как котлин так и питон в системе Что тяжелее было бы сделать монолитной архитектуре на уровне микросервиса тоже было деление на модули такое деление для меня Стало уже шаблонным я его оттачивал как на боевых проектах до этого так и на своем курсе В итоге шаблоны стали достаточно простыми точными и выпускники в принципе применяют без труда и посмотрите чем примечательно вот такая архитектура в ней очень легко заменить например Spring на фтор или любую бессерверную библиотеку Или например достаточно часто я сейчас задача это заменить например Oracle на постгресс кассандру кликхаус какую-то графовую базу данных или наоборот подключить две базы одновременно для обеспечения перехода с одного с одной базы на другой Как видите гибкость достаточно высокая обеспечивается следующий уровень это Нижний уровень модульности у нас обеспечивался на уровне бизнес-логики для ее реализации мы использовали вариацию шаблонов цепочкой обязанностей в ней при фиксации какого-то события создавали экземпляр класса контекст дальше этот контекст пробегался по серии однотипных обработчиков так вот однотипность обработчиков позволяла достаточно легко их модифицировать добавлять новые удалять какие-то менять местами то есть в целом достаточно высокая гибкость тоже обеспечивалась то есть в целом модульность себя на проекте показала вообще Великолепное и отлично гибкость была достигнута достаточно высокая без нее бы проект скорее всего не состоялся но не только в этом У нас не только модульность применялась еще один еще одним элементом является предиктивное моделирование то есть мысленно эксперименты с моделированием различных ситуаций в особенности неблагоприятных если заранее предусмотреть какие-то угрозы то можно заранее заложить способы как-то с ними побороться и принципе не в этом случае нисколько не нарушается потому что мы же прямо сейчас не реализуем это все мы просто закладываем точку изменений возникает естественный вопрос А как проводить такое моделирование Лично мне помогает просто сбор дополнительной информации по предметной области по планам заказчика Иногда нужно просто включить здравый смысл и прикинуть как вообще проект Может в дальнейшем развиваться и в качестве примера расскажу пример установки вакуумирования стали это тоже один из разработанных проектов в рамках этого Пула так вот на этой установке было Две позиции на которые оставались только вши и при этом один вакуумный насос и были периоды в которые непонятно на какую позицию в данный момент работает насос обсуждалось целая серия алгоритмов Что делать в этом случае и в итоге мы выбрали попроще алгоритм чисто для того чтобы сэкономить времени сэкономить время но при этом вопрос был поставлен и стали закладывать определенные архитектурные решения для того чтобы в будущем решить эту проблему что сделали завод отчитывал процесс вакуумирования с момента включения насоса Но мы предусмотрели именно период неопределенности в который стали запускать обе позиции именно обе позиции работали в период неопределенности но когда фиксировали разрежение на одной из позиций вторую просто сбрасывали вполне Нормальный рабочий алгоритм но в итоге он не был реализован как раз по причине дефицита времени и как всегда но тем не менее мы были достаточно готовы достаточно быстро решить этот вопрос Если это понадобилось бы но как всегда все пошло не по плану прямо в период сдачи проекта одна из позиций ушла в ремонт и стала постоянно выставлять статус занята и вот приходит высокий начальник у нас сдача у нас ничего не работает потому что система не понимает какую позицию ей обрабатывать понятно что надо штатное доведение решение не было никакого времени И тут отыграла другая точка изменений которые опять же никто нас не требовал одна предусматривалась скорее для нужд тестировщиков мы просто зафиксировали одну из позиций специальным специальной настройкой достаточно быстро буквально в течение пару часов довели эту реализацию до рабочего состояния и сдача реально состоялась суть этого примера в чем в том что мы закладывали на самом деле не одно решение в каких-то проблемах иных ситуациях различные варианты предусматривались закладывались большинство из этих точек изменений вообще никак не отыграла Но те которые отыграли их там примерно процентов 20 было они фактически спасли проект если бы их не заложили то последствия для проекта были бы весьма печальны Следующий вопрос Это заглушки микросервисы заглушки это такие микросервисы которые не обладают собственной бизнес-логикой их основное назначение это имитация поведения какой-то части системы имитация происходит с помощью заранее записанного сценария либо какой-нибудь примитивный алгоритм отрабатывает здесь на картинке Как видите надувной танк который имитирует наличие настоящего как я уже говорил в самом начале через три недели после старта мы должны были продемонстрировать работающую систему А через два месяца была защита Совершенно очевидно что Физически невозможно реализовать было проект за такие сроки как раз заглушки нас спасли вообще заглушки мы применяли достаточно широко для тестирования разработки отладки с помощью них Мы не только отчитывались продажники на заглушках делали продажи разработчики с помощью таких заглушек имитировали например интеграцию с заводом пока мы не вышли в цеха также мы имитировали работу модуля машинного обучения пока его еще не сделали А сделали его достаточно Поздно уже фактически промышленные испытания шли когда он у нас отладился и в итоге в цех Мы вышли достаточно подготовленными и проблема у нас не так много возникло Следующий вопрос Это оптимизация планирования при планировании тоже на самом деле сыграли особенности экстремальных проектов если на обычных продуктах с подробным техническим заданием часто стараются делать достаточно подробное планирование в принципе вполне обоснованно позволяет и финансы и бюджеты и время планировать в наших условиях никакого смысла в таком планировании просто не было Просто из-за высокой неопределенности смотрите пример опять интеграция с мест то есть системы управления производственными процессами некоторые данные необходимые именно для физических моделей мы могли получить именно смесь но интеграция с мест Это был какой-то бюрократический Кошмар то мы начиналась какая-то активная деятельность и вот вот так понедельнику нужно было сделать все то вдруг все отменялось и весь год Это история продолжалась в какой-то момент мы стали пробовать другие варианты они не подошли в самом конце была уже паника и в итоге волевым решением просто отказались от интеграции в самом последний момент достаточно быстро стали выдирать все необходимые параметры которые можно было получить только смесь некоторые параметры невозможно было отключить например по составу стали в итоге стали просто вводить их вручную frontendo поставили соответствующую форму так вот как в таких условиях планировать планирование конечно же было но главным образом высокоуровневая оперативное же планирование фактически выполнялось в режиме реального времени Суть в том что мы не делали ничего лишнего это было мвп То есть если мы мвп сделали Великолепного у нас осталось времени мы команду перераспределили там сделали технический долг никаких вопросов а если мы не сделали mvp то просто проект завален тоже что сделаешь делали мы планирование не делали но вот так вот ещё один нюанс который я бы хотел обсудить это планирование рисковых задач как всегда существует два подхода к разработке первый подход это мы делаем какое-то быстрое минимальное решение сделали убедились что оно не подходит делаем снова Чуть более лучшее Опять снова не то В итоге беремся за голову изучаем тему проверяем Тестируем делаем Как нужно оно работает второй подход мы изначально делаем обзор всех возможных решений Тестируем анализируем проверяем выбираем лучшее внедряем Все работает очевидно что второй подход он в итоге более эффективен и меньше времени занимает Но в данном случае в условиях экстремального проекта когда присутствовала явно большое давление со всех сторон прежде всего и со стороны заказчика и руководителя проекта более важное было именно защитить этап и Поэтому в этом случае как раз первый вариант он выигрывал именно в таком режиме мы реализовывали видео подсистему в начале делали ее на карте потом в итоге перевели на нормальный мультимедийные Протоколы ispdaas которые я уже упомянул тоже сначала пытались мод баз сделать потом в итоге сделали правильный проприетарный интерфейс нельзя сказать что я доволен таким подходом но просто реально в таких условиях он был более уместен Следующий вопрос Это мониторинг вообще зачем нужен мониторинг в таких системах заказчик крупное предприятие есть мероприятие по борьбе с нецелевым расходованием антикоррупционные меры поэтому никто не хочет подставляться И все нужно доказывать цифрами во-вторых предприятие режимное оно физически отделено от интернета поэтому если случается какой-то инцидент то мы не можем его увидеть в режиме реального времени только в записи И третье заказчик крупное предприятие там все друг перед другом отчитываются в том числе и нам нужно было по результатам работы отчитаться о том что все соответствует так вот Я встречался с разными системами мониторинга до этого неренко промониторинг вообще забывают и вспоминают только в самом конце когда потребовались отчеты наряде проектов я наблюдал раздельный сбор метрик и логов причем метрики вычислялись прямо на микросервисах многие использовались исключительно разработчиками если с админами метрики как раз шли для построения отчетов если бы мы использовали такой подход то скорее всего проект был бы провален Дело в том что состав метрик был согласован уже после завершения промышленных испытаний Ну и какие метрики мы должны были в микросервисы закладывать проблема мониторинга на самом деле мне Достаточно давно известно и я знаю что метрики это вообще расходный материал они очень часто меняются причем задним числом Поэтому вот такую архитектуру vet где реализовали каждый микро сервис отчитывался только логами но не простыми логами а именно полноценными Джейсон структурами в которых содержался максимум информации как входящий в микросервис так и исходящий эти логии В итоге собирались власти к Search и как раз эти логи использовались уже для дальнейших генерации необходимых метрик в простых случаях мы просто использовали кавку и получали готовые отчеты в более сложных случаях мы делали специальный скрипт который делал запросы в ластик Search получал нужные логи формировал метрики и делал отчет в одном из случаев мы просто сделали микросервис который в режиме реального времени делал запросы в эластик выдавал отчеты уже на арму руководителя но тут сразу же возникает много особенностей сохранять нужно все логи что потому что заранее не знаю что понадобится из-за этого данных накапливалось достаточно много и с такими данными конечно нужно уметь работать в одной систем у нас генерировался один гигабайт данных в сутки для подобной системы Это много я знаю что можно есть систему где гораздо больше данных генерируется но в такой системе это просто много с другой стороны в таком режиме винчестер двух терабайтник будет заполняться около 5 лет поэтому это не так страшно Зато такой подход позволил достаточно гибкость иметь и фактически задним числом позволил вычислять любые метрики любые отчеты строить на самом деле мониторинг у нас использовался не только для отчетности в частности тестирования выполнялось тоже на базе логов и по требованию тестировщиков мы как раз добавляли необходимые параметры влоги как Раз такие требования позволили обеспечить достаточно большую полноту логов но также на базе мониторинга я предусматривал и оперативный мониторинг и систему алертинга в общем там было куда развиваться Как видите выбранные подходы обеспечил высокую гибкость вычисления метрики этим фактически опять же спас проект поскольку мы сэкономили на разработке системы схема метрик по сравнению с традиционным Я честно говоря Боюсь даже представить на этом я должен завершить свое выступление еще раз хочу перечислить применявшиеся нами подходы и так роль аналитиков мы разделили на бизнесовых и системных stec мы использовали модерновый наиболее эффективный хоть и менее популярный команду мы обучали экстремальным методом фактически самостоятельно мы использовали гибкую архитектуру на базе модульности и предиктивного моделирования заглушки у нас использовались для имитации отсутствующих частей системы планирование у нас выполнялось в основном высокоуровневые при этом мы старались закрывать этап в первую очередь Ну и мониторинг у нас практически Спас на этапе подготовки отчетов и был достаточно гибкими многоцелевым заключение Я бы хотел отметить Вот что Ничего хорошего в экстремальных проектах конечно же нету и лучше бы их избегать хотя бы потому что среди таких проектов очень высок высока доля неуспешных Но конечно не всегда удается этого избежать поэтому полученный опыт он достаточно ценен Да совершенно успешным проект назвать нельзя некоторые цели проектного управления не были достигнуты но в моей зоне ответственности применявшаяся экстремальные подходы отыграли на все сто процентов и по разработке мы вписались во все параметры спасибо на этом за внимание готов ответить на вопросы в том числе в кулуарах в телеграме спасибо спасибо 35 минут хороший тайминг А ты Беспокоился все так у нас за лучший вопрос будет приз от Так что начинаем Добрый день спасибо за доклад Ладно по два я вижу тебя там выписаны много вопросов не больше чем по два за раз хорошо спасибо за доклад компании норнике спутник соответственно мы для Вас как бы потенциальный заказчик и вот у меня первый вопрос был говорить Не удалось пройти интеграцию хранилищем технологических данных чуть-чуть как-то погромче которая которая собирает Ну сбор данных происходит обычно если предприятия Единая система для этого в Android и соответственно вы использовали оборудование которое представляет Нам зарабатывать вы говорили что вы оцениваете риски и готовитесь каким-то изменениям потенциально Ну вот сейчас у нас санкции и сможет ли заказчик без вашего участия изменить контроллер и интерфейсы для него в принципе очень легко они могут быть заменены но хотел бы еще раз Напомнить это один из моих прошлых проектов поэтому наверное сейчас уже отвечать должен не я в принципе для этого все подготовлено замена нашлась и все умеют работать с подобным стеком она взята на вооружение в компанию да И следующий вопрос вынул связи с тем что сроки проекта были достаточно сжаты это известная проблема нашей отрасли Вот и предоставили заказчику портатив для демонстрации в нашей компании в частности принято сейчас принимать систему в том числе через то есть проводил ли такой разбор заказчик попадались заказчику код заказчик подраздел в данном случае не проводил там правда было были именно экономически нетрите именно сдавали по экономическим показателям в данном случае Нет так я потом вернусь а change of Rails быстро меняются призы не от горячей подарок будет от спикера секретный подарок от спикера прошу Сергей спасибо большое за доклад очень интересно Алексей меня зовут у меня один наивный вопрос А почему проект получился экстремальным это из-за сроков или из-за неопределенности требований или из-за того и другого знаете я боюсь этот вопрос наверное все таки не ко мне его лучше должны быть прокомментировать руководство компании Но в данном случае они скорее всего этого не сделают Спасибо и вопрос о технические там у вас Насколько я понял вы просто льете Джейсона В итоге там в свою там куда-то влог стэш или что там ластик Search и вопрос нагрузкой я поделил один гигабайт там на какие-то Свои оценки у меня получилось что какие-то сотни тысяч сообщений вам льются Да вот у вас выдерживает система лить прямо Джейсон сохранять и потом поверх этого гонять отчеты да на самом деле ластик вполне с этим справляется с одной стороны с другой стороны как видите у нас применялся применялась Кафка между микросервисами и эластиками она какие-то пиковые нагрузки снижало но и ластиком ластик на самом деле не один использовался там три узла хоть это на самом деле все равно одна машина там три виртуальных узла эластика Но все равно это наверное дало какое-то свое сутки нормально у вас есть вполне нормально да известно своей емкостью так это назовем в отличие от рэббита Rabbit он больше проверялтаем Кафка больше про миллионы сообщений Здравствуйте спасибо доклад хотел спросить какой прирост производительности скорости дал ктор по сравнению со спрингом кто тут наверное вопрос не в производительности на тот момент корутины практически не использовались в Spring Есть сейчас Есть Да сейчас на веб-флакс сейчас они поддерживаются на тот момент по моему они еще не поддерживались как раз за счет корутин мы обеспечили асинхронность ну и соответственно производительность честно говоря не измеряли сколько Но вот Вполне себе показали Сергей Ты следишь за лучшим вопросом следишь Да когда вопросы закончатся нужно будет выбрать готова все это как правило самое тяжелое Вадим прошу Спасибо большое ей спасибо за доклад тоже наивный вопрос было очень много обучения в ходе проекта было очень вы привлекали можно сказать джинов было много моментов где все могло пойти не так на Чьи финансовые плечи это легло на ваше этот риск лёг или на плечи заказчика Было ли это заказчиком как согласованная вообще как как вот эта история происходила заказчику вообще было все равно как оно будет реализовано особенно что вы осознавали и принимали этот риск Да спасибо на самом деле вот эти жены они правда они прошли огонь воду те люди которые сделали выпускной проект это правда уже Молодцы там достаточно сложные Условия были его реализации то есть они себя вполне показали уже К тому моменту То есть это больше отбор больше фильтр снова я скажите но в таких сроках Ну буквально обеспечен просто срыв их Да и как Вам удалось выходить из этого положения заказчиком То есть это были какие-то гарантийные письма обязательства или как заканчивали проект обычно Еще раз Ну вот сроки три месяца понятно что скорее всего мы не укладываемся да И когда мы не укладывается в сроки на какой компромисс шел с вами заказчик честно говоря вот эта часть работы с заказчиком она была вообще не в моей зоне ответственности я полностью сосредоточился на реализации как договаривались заказчиком Ну на самом деле по всякому договаривались где-то по-честному договаривались где-то не совсем по-честному где-то просто обходили какие-то требования В общем по всякому Да и еще один вопрос Если позволить предприятие режимное Наверняка вы ну внедряли проект как какую-то некую роль для заказчика на коробку Да вот как проводить обновление в этой ситуации что как обновление но обновление продукта все равно же есть какие-то уже дальше Вы развивали видимо не на нож предприятие как это физически было ставили ящик на площадке никуда подключать его без согласования нельзя было но в итоге согласовали маршруты подключения подключили систему А дальше флешках носили обновления логи тоже на флешках выносили поэтому гигабайт в сутки это достаточно много было им тяжело приходилось но тем не менее вот таким образом выходили Следующий вопрос Back and посередине Спасибо большое за доклад У меня концептуальный вопрос Как вам удалось обосновать и защитить у заказчика экстремальный выбор продукта вот в качестве примера вы привели бытовой контроллер Вы же учитываете дальнейшие риски То есть это вы не учли атмосферу да то есть это работа перепадах температур высоких температурах и пыль Ну и прочее вообще концептуальный вопрос как вы это согласовывали и защищали выбор экстремальных своих продуктов все то же самое заказчик согласовал сразу изначально больше экономические требования какое-то оперативное согласование конечно оно выполнялось но опять же система была достаточно изолирована поэтому заказчику не требовалось прям следить за всем Вот они дали интерфейс они интегрировали дальше уже было в принципе на нашей совести выбор Ну и по большей части если братья сепидос он получал данные с нашего же вибро сенсора поэтому там без разницы сами выбирали заказчику было все равно франтент справа тоже бык Сергей спасибо большое за доклад Михаил компании на тех разработчик один коротенький вопрос по поводу заглушек да то есть на деле Они же могут не соответствовать да про реализации на которой разрабатывается по Ну кто отвечает за контракт Каким образом он реализуется конечно могут не соответствовать мы сами для себя реализуем эти заглушки для того чтобы нам как можно без проблем не вписаться в те сценарии которые будут на заводе делали это по-разному на Первом проекте когда еще ничего не было понятно и как оно будет Ну там фактически делались физического коня в вакууме а потом уже когда вышли в цеха уже доводили до рабочего состояния на следующих проектах было попроще уже примерно знали как оно будет Поэтому пришли прямо с ноутбуком сняли примеры данных которые шли эти данные просто использовали как записанный сценарий В итоге именно использовали фактически боевые данные для моделирования ситуации с двух сторон получается с двух сторон И второй вопрос и второй вопрос как делается нагрузочное тестирование в сфере есть особенности и на основе чего прогнозируется нагрузка расставляли систему всю на стенде запускали нагрузку поток данных ну и снимали логи метрики слогов прямо видно какой урок Какая операция в какой момент времени происходило и в принципе прямо тут же смотрели какой микросервис у нас проседает по производительности Где искать бак то есть единственная большая проблема возникла именно с видео под системой Почему Потому что в стримере на тот момент не знаю сейчас возможно уже доведено до конца Но на тот момент достаточно сыра были обработаны метаданные прохождение метаданных буфером метаданных которые проходят через UTP поэтому на тот момент просто не смогли идентификаторы кадра пробрасывать вместе с самим кадром это была проблема видео подсистему пришлось на глаз фактически тестировать просто отмечали сколько частота кадров идет на этом микросерверке частота кадров на другом микросервисе по-хорошему надо было бы отслеживать весь путь самого кадра продолжаем задавать вопросы справа Сергей внимательно Следи за лучшим вопросом это будет тяжело прошу Сергей спасибо за доклад назвал его Что это у вас получился двухдневный хакатон растянутый на целый год в итоге поэтому по этой задаче с ковшом и с тем чтобы поменьше стали сливать со шлаком А как решили В итоге видел аналитика была там какая-то вибро датчики можете самому техническое решение рассказать Еще раз как как была решена задача сколько удалось сэкономить Вот это задача сэкономить выбрасываем устали вместе со шлаком технические инфракрасная камера стояла с инфракрасной камерой там все сложно достаточно там нужно правильно камеру выбрать который работает в правильном диапазоне длин волн там тоже целая история была Когда ставим эту камеру в принципе уже примерно видно если посмотреть видно что вот это вот часть это шлак это металл после этого натравливали машинное обучение который просто автоматически отслеживал Сколько идет шлака сколько металла подсчитывали подсчитывал машинное обучение подсчитывало Сколько в целом слилось смеси сталь шлак И сколько из этой смеси составляет металл суть в чем когда у нас он там металл начинал резко идти поэтому когда металл первоначально у металла практически ноль Потом начинал тонкая струйкой металла идти потом резко как пошел металл поэтому когда начинала идти стройка металла фиксировали и давали команду сталевару на подъем столько в Следующий вопрос тоже справа Да спасибо у меня совершенно общий такой вопрос я просто человек который никогда не с какими промышленными проектами не работала вам вот удалось получить такой опыт Как вы оцениваете потребность промышленности вот в таких АйТи решениях или вот они один сделали и следующие семь лет ему вот вообще ничего не понадобится будут с этим работать вот что вы думаете по этому поводу Ну наверное коллега от металлургического предприятия наверное лучше бы от меня ответил по моему мнению это очень важный востребованный ресурс и как раз в связи с тем что сейчас происходит такие процессы Я думаю экономия она сейчас стала бы еще более актуальной и честно говоря Ладно я не буду комментировать что там происходило могу сказать что касательно потребностей и конечных пользователей бизнес пользователи они ненасытные абсолютно То есть постоянно не хватает функционала какого-то вот с точки зрения экономии Ну например Наша компания перенесла цифровой прорыв в связи с событиями которые сейчас происходит на бюджетах распределили на внедрение отечественных систем а остальное Обсудим в кулуары Давайте последний вопрос мне уже нужно передавать зал следующему ведущему прошу Да Сергей спасибо за доклад на мой вопрос уже частично ответили но я хочу немножко прояснить дополнительно А вот вы сказали что обновление Соответственно по оно происходило на флешках А был ли скажем так была ли единая точка входа для обновления то есть Был ли pipeline то есть условно вот как бы сисадмин заказчика он приходит с флешкой с нее соответственно куда-то загружает все нужные пакеты и потом просто прокатывает или каждый сервис обновлялся руками по всякому было то есть в целом paypoint конечно же был нормальный штатный сиди в данном случае ручной но СИА это точно был то есть мы делали коммит шла стандартная сборка публикация докер образов дальше докер образ как раз через командочку сейф загружался на флешку достаточно большие образы были особенно если брать питоновские то там что-то по 10 гигабайтов некоторые образы были и вот как раз флешечка неслась туда дальше обратная процедура происходила специальным скриптом это все вытаскивалось переименовывалась потому что там внутри была собственная сеть ни с чем не совместима Но и выставлялись на стенды как правило это же не боевая система это на самом деле фактически прототип был поэтому там особо большого контроля не было в плане того что мы приносим как правда изолированная система поэтому у нас точка была в том плане что сисадмин знал где это как делать занимался выкладыванием на стенд на Боевой"
}