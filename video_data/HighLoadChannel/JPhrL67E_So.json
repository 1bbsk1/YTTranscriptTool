{
  "video_id": "JPhrL67E_So",
  "channel": "HighLoadChannel",
  "title": "Tempesta FW: FrameWork и FireWall для WAF и DDoS mitigation / Александр Крижановский (NatSys Lab)",
  "views": 74,
  "duration": 2427,
  "published": "2017-04-22T14:47:31-07:00",
  "text": "добрый день меня зовут женская ксандр компания sis мы делаем мопс проект только в чего его вы уже в исходнике можете его все найти ноги хобби и сегодня я нему скажу собственно суть проекта что это такое тибет это отверг его единственный гибрид теперь все году его это полностью стоит себя перед стек linux и его основные назначим все сначала поговорим о том зачем это все нужно нужно было его это главное функциональности то что это фильтр который работает и на третьем и на седьмом уровне то есть если вы выпитой гус могли указать определенная пи адрес которым нужно фильтровать могли чуть-чуть указать повод цепи хотя там нормально сборки здесь и него и сделать поиск по срок в пакетах теперь вы можете написать правил что нужно выдавать все запросы с такого-то айпи адреса и содержащий такой-то например usa виджет да или там еще другой заголовок и можете соответствие делать все необходимые операции по таким запросам и как вы делаете их на тот же джейк середа артикли сервере то есть первое это фол второе это в х и бог то есть мы начинали делать систему защиты adidas так и нам нужно было был хороший акселерат и до которых можно было строить логику анализа трафика чтобы анализ трафика так-то походил не только на прикладном уровне но одновременно и на сетевом уровне то есть нам вода время нужно ты ситуации знать что происходит абсолютно всех сетевых о вне того чтобы эффективно сетевой трафик как приятное следствие систем позволяет также строить нет и приложения для веба при конечно файлов то есть понятие что нельзя на системе как работает внутри теперь писек и запускать сложно xml passing тогда этим не менее можно с неё водить нагрузку на прикладной уровень где можно разбирать xml можно отдавать запросы по якоб и так далее в частности закопав достаточно тяжело это делать на обычном к силе от их собственного пытался он поджег рим первое это вообще ты чего мы стали делать то есть воде аж теперь фрегатов полно daisy дженкс есть во внеш куча все по всей есть быстрый очень по все есть все что угодно ей даже технологии теперь которые позволяют тоже фехтовать эффективно график тем не менее вопи во первых нужно здесь есть пример медленного htp запроса и фильтровать его достаточно сложно в опек вам нужно знать как из чего состоит ваш теперь запрос то есть вы смотрите на прикладном уровне на уровне по степи cerato вы не знаете как долго этот теперь запуск вам шел из каких маленьких кусочков он собирался какие были тайм-аут между этими кусочками второе что нам нужна высокая производительность то есть с а мы собираемся бороться с diedas на прикладном уровне то естественно система стоит на фантике на нее приходит вся высокая нагрузка от деда соответственно мы уже не можем как обычно аж типе сервер делать контекст свечи копировать и так далее то есть у нас сразу поднимается требование по производительности и далее мы оптимизируем систему специально к в качестве фильтры то есть она построена изначально ядро построена как фильтр не как обычно штабе сервер здесь пример по ситуации есть к вам приходит доз вам надо его профильтровать желательно это делать не просто пайпе адресом да потому что могут быть большой пак севера и тогда желательно не все какой там прикладную логику и первое что мы можем сделать из очереди донце сучаве publications фильтра мы можем запретить определенному пользователю спать сувать пакеты на наш пакет да то есть если подумать о том как можно на уровне используя популярно посоветовать запрос пауза и черту и по пятницу то чтобы это все нормально работа сделать это совсем не просто во первых чтобы это все было быстро нужно спускаться на уровень ниже и ниже у нас нету доступа к собранным цепи у нас нету пальцы аж теперь так далее но вы не выше мы уже как бы мол можем обладать только очень не не бани большой трафик соответственно хотелось воскресить уважьте как среда так для того чтобы во первых был доступ на всех уровнях сетевых чтобы была очень высокая производительность каков его и чтобы система в принципе могла в нормальном режиме активировать пока собственно то что нам не погас в текущих решениях первое то что теперь самый популярный подход дефекации adidas как раз решение на базе 5 догадываешься вендоров и здесь не хорошо то что по сути accelerator который стоит на арене винду и то есть пять плюс к нему еще шкипер акселерат и то есть это 2 2 софта на одном решении то есть сама по себе тебя это пассивный анализатор они имели он является активным участником дтп и соответственно не может обстреливать контент не может нормально темнеть и цель тогда это сеть решение но это все 2 что usa сексе ребят это если вы сходите сколько трафика может выпустить из себя в вол тот же обитает сдай сколько может себя повести лучшие сашки песегов ну вот на порядок глазницу до соответственно нам хотелось получить ешьте 5 ватт кто и все это умеет но что производить а как его или как у теперь последнее твоего вы то есть опять и вас у него есть расширение strings там что угодно есть но тем не менее аккуратно графика он не собирает для того чтобы написать горевала о ю завершит нам надо вас платишь типе теперь по сердцу уже по особо нам с pc 7 и нам нужно как на самом деле на настоящий шкип сервер для себя держать далее проблему еще с вами в том что в случае износа нам хочется иметь динамические пару то есть у вас есть система которая анализирует трафик и динамически генерировать плохого не автоматически добавляются в ваш и ваш список блокирования так как работы тот же файл по адресу блоге джон икса и надписями да и уже складывает их firewall соответственно вот эти за нами ческие правил хочется еще иметь резистентность чтобы система когда на ригу тица нас халява состоянии станет своих хитов в целом без проблем такой есть если мы не поговорим о совке говорим с вообще решения кто как можно решать проблему и и чаще всего решать эти отдаю в сиденье у вас может быть фильтрующие сидел который вам я скачаю график отдает контент и параллельно делать ситуацию но опять же здесь чес не бывают и как пара не строится тоже на собранных технологиях это теперь плюс акселератор и по firewall plus акселератор соответственно для того чтобы вы строить сети быстро желательно иметь тоже хорош инструментарий который не посредством вы понять именно вот эту функцию доставки контента и эффективная ситуации соответственно мы можем по сути дену который но требует более мощное решение для у него не будет дополнительных kamikaze между файлам и почти и сервером и она будет очки 100 по поводу теперь себе вот я сейчас говорю о том что они медленный округам здесь есть трасса здесь пример дженкс используется презентации но здесь дело не в конкретном сервере это тоже самое будет для любого другого прикладном всех этапа вам cherokee vanish так далее это просто как buy dance примеров здесь видно что первое то газ особенно для простого фильтра для паса ситуации когда вы после включайте джилекс а у него отрабатывает лет лимит вас нету записи вводов вы отключаете у вас нет туда ставки достав контента на есть потому что он должен выдавать 500 ошибку и соответственно у вас в топе висит passing htp то есть это достаточно интересный момент что очень горячая . под diedas где прикладном сервер поступишь типе далее у вас есть копен и дальше у вас пашей системные вызовы это поучение графика и отправка то есть соответствие который не контекст свечи уже то есть у нас и с прикладными штепсель вами две проблемы то копирования потёк свечи именно посидишь теперь здесь просто кокоса того же джилекс а она уже всех вызовов то есть мы видим что для того чтобы обработать заблокировать пользователя нам нужно выполнить достаточно мало системных вызовов и интересная особенность в том что если вы просто за пошить индексную страницу джон оксидов она вам отдается сразу если вы включаете лет время то и двигать работает через отдельный модуль и плюс к отдаче индекс на страницу вас еще отрабатывают вид лимитов участь что заблокировать пользуйте это немного дольше чем быстро дать ему стать частью страничку маленькую то есть ну и джексон вписался как или дуги ешьте приседание для ситуации как это полезная опция но описал все таки для обслуживания на моник запросов нормальных пользователей соответственно плюс проблем производительности у нас еще есть проблема доступ ко всем силам уровне для того чтобы наши классификатор хочу работали и хорошо анализировать график для того чтобы можно было понять и быстро найти запросы медленно ваш типе и таких атак следующие проблема с покамисть им не можете песен которые смотрели сходите в том что большинство из них сделано либо ос относительно старым по делам и не сильно не сильно оптимизируют конкретная конкретную плату соответствие мы пишем решение которое делает учитывая топотун который работает первый из этих вещей которые здесь у нас или нет в других решениях это обработка трафика то есть если мы посмотрим на то как обычные сервер обрабатывать входящие пакеты здесь на рисунке есть у нас два процесса каждый работать на своем процессоре они обрабатывают в сумме 3 сокета соответственно пакет который приходит разный пакет приходит в разные сокеты и у нас может получиться ситуация когда если у нас очень высокий трафик приходит то у нас может случиться что пакет который добавится в очередь . он уже устаревает то есть наши силы и адаптеры современный а не умеет разогревать каши процесса то есть пакет приходит и он уже ложится в кэш процессора если у нас очень высокий рейд пакетов то конечно быстро вымывается пакетами и когда дойдет очередь до прикладного процесса вы уже пакета не окажется в каше соответственно первое что мы сами делать это обрабатывать пакет асинхронных как работает файлов если у вас есть даже большая куча barium выпитый пусане все он работать синхронно ваш пакет пришел и он идет по всем цепочкам там идет парсинг это кусок там идет анализ заголовков так далее также работаем мы мы то есть мы также как и во все делимся на ход на одном ядре и пока плательщик разогрет построение в каше второе то что у нас нет очередей то есть у нас абсолютно асинхронная обработка у нас нет той же очередь и до себе это значит что во первых у нас сокращаются сокращаются затраты на да пойти на структуру данных нас нет синхронизации на добавление удаления из этой структуры данных у нас повышается повышать кошкин за счет того что у нас более посадку с обработка монтаж тебе пальцы вот с правой стороны этот обычный конечный автомат кота вообще используется большинство степей себя в серверов это обычный цикл и плюс еще свечу трициклом подход очень медленный тем что вы учитесь в цикле и вот когда например мы получаем в каком-то состоянии получаем переменную а вот в этом месте мы уже знали куда мы должны перейти мы уже знали текущее состояние мы должны вот в этом месте уже сразу считают следующую следующий бой данных из вас прийти нам не нужно выходить цикл и только здесь снова бежать по вот этому свечу мы точно за в этом месте куда мы хотим перейти соответственно если мы и делаем прямой переход без свича то мы сели ускоряя работу аж тебе пальцем в целом есть мы нашли 4 подхода к тому как может построить message тебе пальцы первое то вот to switch 2 винта что сейчас есть 2 это тоже классический подход и 5 гривен когда у вас есть просто таблицу переходов и у вас по одной оси в вашем ваш алфавит подругой состоянии соответственно пойти вот участь очень большая тяж цепью к такому получать очень большая таблица она должна работать очень медленно есть есть варианты сжатия этих таблиц но в том все но можно ожидать что будет его плохое использование дата каша с vici gaming работает метод за счет то как раз накладных расходов на цикл и плюс еще похуй похуй вот та каша кода понятно что здесь короткий пример у большого пальца у него будет очень большое количество стояний большой алфавит соответственно свеча будет длинный и у нас код будет большим следующее что приходит губ в этот паз обидеть два подхода то есть мы знаем что можно компенсировать таблицы переходов в конечно автомат и мы можем комбинировать его со switch-ем то есть например заложить в таблице только небольшое количество возможных переходов например 3 штуки да там на 33 любых всего вместе заходи внутрь и прихода если у нас не помещается у нас есть еще до плотины switch такой подход работает быстро но дальше посмотрим что с ним получается следующий подход это прямые приходы то что я говорю о том что по сути тот же самый свечу только мы сразу делаем jump если кто-то смотрел на то как работает видели он генерирует именно такой код у вас есть считывание переменной в цепи и на каждое значение переменной у вас сразу идет прямой джан вычитать переменную смотрите куда сделать вам сразу приходит никакого свеча у вас нету участвуешь быстро третьих по всей 5 подход у нас есть зубцы паца свой век до новой серии который позволяет делать и варианты стояли с п то есть искать некоторые нефти набор символов и делаете какую-то аккуратно бою к сожалению лучше был бы интересно и использовать но она сильно ограничена том как алфавит она может сказать соответственно я бы его пацана не годится здесь придём прийти на письма по всех этих подходов за исключением последнего по оптимизации и на самом деле довольно любопытные результаты для нас они были некоторые удивительными то есть 1 у нас есть gps это passing с какие запросы потом х2 парсинг строки заголовка шкип в хоть немного оптимизированная версия и big ходе войны то когда он вас просто очень большой конечный автомат большое количество переходов соответствует его подход бы он ведет себя не очень хорошо и мы все 3 силы на 2 архитектурах это школах и найс иван первое что сделали сделали гибридную машину то есть которая меня себе и switch и таблицу учесть на порядок быстрее здесь вот для ходовой он на порядок быстрее пасть чем обычный еще неожиданно получил что даже для большого количества стоять для большого fave то табличный автомат на самом деле довольно быстро то есть вот и сравнить в первом столбце то что для таблицы даже участь быстрее чем для свеча то есть на самом деле обычный подход при том что он не сильно нехорошую очень много жрёт память и там случайный доступ бантик показ довольно и третье последнее что год равен но с прямым jar met получилось вообще к самым быстрым из всех что можно то есть дальше оптимизирована вариант когда вы пытаетесь раскладывайте работы на каштанах там девушки с табличный автомат и на кэш инструкции там держите небольшой switch все равно проигрывает чем просто обычный хороший джон и самое интересное что если у нас на каунас диссы на гибридная машина написано ведет себя хорошо это найти у нас получается что гибридным машина она даже медленнее чем обычный вообще-то сам самка стоит свечь я в том что у вас не они сильно улучшили патч витёк семью нет и разные свечи и когда вы перекладываете вот эту работу с шодан на модуль по мнению кода то получать намного быстрее то есть за счет боль мощных бочку этих швеей то он а вот это еще быстрее далее вообще на машина состоянии этот фильм который есть только у нас она нужна для воды ситуации то есть есть есть вы такого ой к которому вы можете например нагревать всем антивирус с вашим ушки пещеру к вам приходит аж теперь запрос хотят что-то запостить нова школам какой-то файл вы его принимаете этот пост запасов проверять его антивирусу оперируются выдает вам ответ и зависимости от ответа уже все ребята вам отдаёт этот запрос по канту или пакиру соответственно это удобно делать через контекст switch то есть у нас есть машина то конечно автомат htp наш как работает по такому и у нас есть конечно автомат я бы такого аккаунт который отправляет запрос принимает так далее соответственно интуитивно понятно что если мы сейчас находимся в протоколе аж типе мы поняли какие то операции над запросам у нас поощрять достояние обработки htp потом мы понимаем что этот запрос нужно отдать а как у мы выключаем контекст этой машины состояний мы сохраняем видео о текущей стефани об запрос в стек указатель и отдаем через камбэк управление на другую машину состоянием это может быть я копать может быть дуга другой то есть это гибкая и соответственно фильтрующий модуль и они также работают через стек потоком то есть следующий модуль нашем случае это не просто набор call back off это могут быть полноценно полноценно машина состоянии которые могут активно взаимодействовать с клиентом клиентских запросов когда ты их прессовать получать данные так далее неограниченны в пределах одного запроса и также когда у нас якоб отработала также ставит дает хук и мы можем вернуться в контекст аж теперь то есть когда отработала одна машина она выталкивается со степкой и приключается управление на какую машину состоянии далее по поводу производителей впш соответствие иногда на в отелях ставят шоу статику . составляют например дженкс отдавать большие файлы если вы делаете действенно гусиный проекта отдавать с диска контент не хорошо да как ты должен лежать в основной памяти джен x и любой другой уж тебе себе вон работа поверх файлы системы и соответствие позволяют вам поднять все ваши данные в память тем менее если операционные всегда которые работают там a patch например они работают через файл из тему они считают hishe & a very hasta дали этот хэш режут на части и делать дерево директории и файлы системы forms тем это довольно долго опираться то есть всегда вызывают файл всем они долгие если вы добавляете новый контент у вас произошло например flash coat если у вас нужен новый контент то все у вас идет к это нагрузка на диск и по создание новых файлов при том что у вас есть каши не фрагов дескриптор соответственно в нашем случае мы делаем полноценную базу данных подобии того что делает apache это фиксирую то есть у них единственно кого есть то что мы видели парня слова акцентах боку данных так далее они держат в кэш нам они оба сданных соответственно все наши данные они сока записаны на карательную память они никогда не уважаются на диск они через механизм ума по синхронизируется с файл и благодаря тому что у нас все всегда всегда находятся в 5 5 мы можем работать внутри тыс 5 стек 18 мы у нас никогда с нами происходит мы достать из вытаскиваем из сша даны для того чтобы мы их вытаскивали быстрее у нас используется еще и специфичный оптимизация могу индекс во-первых мы используем достаточно быстро структуру данных которые знают как шаг процесса то есть каждый узел дерева то о чем рассказывают нам учебном треки о том что каждый узел дерева знают кэш максимально оптимизировать каждая кошелька и нас получается максимально быстро 2 то что сам себе в кэш он знает объема то есть на стадии конфигурации системы вас есть несколько процессоров вы нарезаете базы данных сожгите их по каждому процессору по каждой на монете и у вас все запросы они отдаются в зависимости от того он от своего ключа хэш-функция на тот или другой процесса соответственно у вас нету долгих-долгих трансферов памяти между ядами опять же если вернемся к классическим можете присягу когда у вас все лежит в одном большом fave нескольких случаях пей либо у вас вообще используется файловая система то все данные то есть понятно что данный собой фауст мёд крис я те страницы которые у вас находятся в почках и все это находится на одной из нот вашу систему если у вас на процесс two иная система то вас вы получаете довольно дорогие гости памяти от одного конца к другому счет того что вы выходите в одном месте и все процессы могут обращаться к ним тем же данным поскольку мы живем внутри и 2 сезон всем поскольку мы находимся внутри тыс 5 из т.к. соответственно мы можем минимизировать копирование к сожалению от как я не мы сейчас не можем избавиться полностью все нам нужно копировать вот трафик который приходит наш ответ и от нашего блокада мы должны вас копировать на диск то есть там есть одну копию не тем не менее если мы не берем естественности вы смотрели нас полная копия все данные которые мы получаем мы преобразовываем сотен и буфер linux и отдаем как есть клиентам мы кошевым и держим уже в цепочках как мы получаем вот багандов теперь содержит свою небольшую базу данных она сейчас зарабатывается активно и она написана с учетом того что в ней можно хранить и в кэш то есть сделать достаточно долгим длинные ключи индексированием и те же павел ситуации то есть с одной стороны если у вас фильтр скажем построить адрес в 4 да у вас очень короткий ключ с и вы фильтруете например по user джон и по айпи адресу то у вас участвует 1 ключ измельчите столицах и шоу тоже достаточно быстро работает на сто и джим вот по поводу ситуации для того чтобы мы наш модуль могли иметь доступ ко всем уровням сети у нас есть coбaке смесь у нас есть как у другого тех hp северов калмыки на фазы процессинга шкип когда мы распалась идею полностью аж теперь за после по какой-то его хода есть также калмыкии типичные на события по получению себе сегмента то есть получается и сегмент ник его лет но и пакету до всего того что есть сборка api то есть из из многих и педант ага можешь собраться один сегмент могут выкидывать сам прикрывающийся части и с учетом того что может быть такой товар фиг эти соответственно каждом уровне всей сети мы можем поставить call бейки и если делается моды классификации то он может использоваться и установить на любой уровень можешь посмотреть отдельный фильм посмотреть отдельно уже особенность ты спи либо получить данная почти пи на сейчас есть уже простой модуль ситуацию как раз используют на голову ситуацию по поводу биг маков делали письмах он немного устаревшие то какое то время назад у нас была стабильной версии на которую нам довольство гонять получать от 812 вас быстрее engine.exe с некоторыми оптимизация и самое важно для нас что мы хорошо съедемся то есть зависимости от большого количества пациентов и процессов мы хорошо целимся по большому количеству идеи то есть нам важно в условиях видосов удерживать большое количество полезных соединений у нас деградации там как раз очень паузы в отличие от обычных прикладных сигналов наконец это по вечерам который у нас сейчас делается к сожалению мы не успели выпустить релиз конце октября соответственно к текущее состояние у зеленым это то что уже есть у нас есть ядро сервер у нас есть балансе или нагрузки там относительно агрессивное в компании что можно делать на бойне провел там если большой язык того по каким заголовком этим значением нам нужно отдавать на тот или другой бок и если мы не сложный модуль ev3 митинга похоже на то что есть выпить и вас его джипси webcache filtering и классе frank чтобы можно было вставить и без тузикова и чтобы она хорошо работала с типовая в деле все виды это все в процессе главное что впш у нас мы вырабатываем нашу базу данных для того чтобы она работала параллельно то есть сейчас решаем задачи конкурсе для того чтобы решить за дальше президент насти чтобы не cashis так далее и еще дорабатываем спецификацию ваш типичных 2016 и семьдесят два три тридцатых по новым стандартам фильтр он после зависит от теперь тебе части где хранится в планах до марта это сделать до делать это функционально синюю ссср и более прогрессивные моделью выпустить по которое использует машинное обучение для обсе концы графика в общем все здесь есть ссылка одессе смотрите пока посмотреть пока еще подошли вы использовать нельзя защите от распределенной dos атаки дам изначально вы говорили о том что мы должны удерживать большое количество соединений разумно но при этом мы разгребаем очередь синхронно не создавая никакой да по очереди используя очередь насколько я понимаю так мы используем ядро до используя очередь соответственно сетевого стека linux самого но получается мы тогда переводим саму атаку от http допустим сервера на ядро linux то что мы допустим можем забить уже очередь ядра то есть это просто получается как перекидывание ответственности с http на ядро или вот как-то это можно разрулить то есть на сколько я понимаю да есть мы бы работали непосредственно с ником даст кольцевым мы бы тогда бы не знаю организовали бы какой-то пул определенной да куда бы скидывали пакеты и отложено бы их обрабатывали а в этом случае получается что мы ядру говорим вот получая весь этот diedas и там уже ну если справишься то справишься не справишься ну ты просто все connect и отобьешь и все так ледяного на самом деле хороший вопрос он такой не профи в глаз дело в том что в опять здесь посреди было что если вы не справляетесь вот у вас есть какой-то пакет ведь до которых вам приходит если вы вы не справляетесь распался то нужно попытаться сделать это быстрее сделать это быстрее пока данной живые в каше и пак исключив некоторую прикладную куда там контекст свечи и так далее мой учатся быстрее сделать то есть если взять просто производительность молотилки пакетов в нашем случае она сильно быстрее чем в сочи прикладного очереди сына уважаться это все на софт и q очередь да в этот они достаточно большие и здесь у кого-то прежде всего тем соображением что здесь нужно выбрать о том что вы хотите обработать короткие всплески да когда у вас немного пришел пришел графикой потом вас какой-то небольшого когда вы можете сгрести очередь ли ж бы же вы должны держать dosage продолжительное время большой трафик то есть в первом если первый случай то тогда выгоднее держать ослиного вот очередь и и откладывать пакеты сгребать потом во втором случае лучше пытаться обработать что мы можем успеть работ максимально бы составной десант вас потерять то здесь как бы подход которые вы используете единственного еще есть хорошая альтернатива что сейчас есть карт играть его на захват у которых после более больше буферы которые позволяют там держать больше трафика за больше время то есть за счет используем от этих карт гарантийного доступа то есть они так называются на самом деле там просто больше буферы приема данных можно как as a plan делать вот это время как вы будете держать нагрузку но вы остановите в том что как бы вы ни откладывали по очередям все он когда-то вам нужно это обработать будет ну а если допустим взять бы такой подход то есть мы берем не используем buffer операционной системы до а берем на ну из кольцово буфера делаем офсет мы знаем где у нас обсе для начиная со шкип ходор да и начинаю смотреть его то есть тут помогает соответственно ваш каш одновременно до который позволяет там за от единицы найти уже такой же пакет если он попал под фильтр мы опять за от единицы берем и этот пакет фильтруем все очень дешево пакет отбрасывается не нагружая дополнительные буфер и вообще ничего то есть вся нагрузка получается только если мы действительно большой хэдер пытаемся обработать даже типичный но делали без сразу по офз это дешевая операция там получается атон в сумме вообще я на сейчас не совсем понял о чем говорите то есть у нас пакет в любом случае что случай описан система что увидим выговорить по технологии типа над мапо до вот таких все у нас пакет где-то лежит в памяти до куда мы когда он пишется да там и откуда мы его можем достать в случае над mmo помыть если мы можем держать эти буферы на мой все но должны выделить какую-то конечную область памяти куда их складывать пакет она также может закончиться в чем здесь разница как бы между одним и другим то есть либо это едва держит и мы можем ядре увеличить эти буферы либо можем в виде space вас вот эта техника она сейчас немного от органа льна к вот этот подход в принципе то что можете делать в игре все что вы делаете в визу спейси просто скорость фильтрации была бы выше рай от на за счет чего за счет того что мы берем из ника напрямую до лезем в кэш сразу который мы уже сформировали отправил и можем сразу исходя из хэш-таблицы до вытащить совпадает ли данный пакет данный федор почти типичные с правилом фильтрации и сразу его просто отбивать не пытаясь анализировать и не загоняй его вообще никакие буферы то есть просто экономия самого буфера во вторых распределенная атака в основном идет по одинаковому федор ну редко кто будет делать распределенную атакус там с разными хотя бы часть ее 1 ну допустим там вот говорили там user-agent да он будет всегда один нет вы понимаете нас как бы цель проекта то есть пойдем что вот атаку где у нас от ботов идет одинаковый трафик а на кого никому не интересно вы пишите там построить 5 вас он вам отфильтрует быстрее да у вас есть железки и так далее к нам интересен именно прикладной adidas причем сложный прикладной тот дико работать через faustig да там например год кота использовать не посредством головы до либо те которые там есть бот как у которых есть загружаются файлы вот этих иезуитов так далее о них все время меняют то есть нам интересно более более агрессивной атаки и мы вот наш проектами туда нацелен на по поводу баферов я все ну не совсем понял то есть в целом мы всегда можем в ядре за то что вы за спейси обратно оно неверно то есть мы что-то делаем тот же подход над map когда мы полностью киддом весь стек linux в целом можно сделать в ядре мы также можем выкинуть но делать это помощь потому что у нас уже есть никто реализации цепи и вот то что перед ней мы можем тебе делится что почти то есть в проекте у нас есть патч те двое linux там нет таких оптимизации но в целом они есть в плюсе в ту ду на то что мы оптимизировали еще и посредством обработка пакет самого едва не ясно хорошо спасибо спасибо"
}