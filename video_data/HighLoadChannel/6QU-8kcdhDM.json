{
  "video_id": "6QU-8kcdhDM",
  "channel": "HighLoadChannel",
  "title": "Микросервисы как худший архитектурный выбор для стартапа / Даниил Подольский (YADRO)",
  "views": 14933,
  "duration": 3113,
  "published": "2024-04-17T01:10:23-07:00",
  "text": "так коллеги Добрый день меня зовут Даниил Подольский я провел в стартапах последние 30 лет Ну по другим подсчетам 20 лет неважно Это позволяет мне думать что я стартапах знаю довольно много а в основном про их темную сторону выступаю Я сегодня от компании ядро потому что я решил остепениться значит с 2008 года я рисую архитектуру для стартапов архитектуры инфраструктура есть 14 года архитектура по это очень разные вещи Но сегодня мы будем говорить о другом микросервисы вот как идея полюбил в тот же миг который познакомился с этой идеей и до сих пор разочаровался в ней не до конца Хотя доклад мой откровенно хейтерский так сформулируем тезис для начала микросервисы Это скорее проблема чем решение во всяком случае для стартапа Я понимаю что это довольно радикально звучит Но вот так об этом будем говорить Что такое стартап Да вот я не могу удержаться Да у меня Я немножко недоучка поэтому не могу вот без академического подхода Что такое стартап начнем с очерчивания Поляны собственное определение используя стартап это бизнес-проект созданный для проверки бизнес гипотеза именно так то есть это не важно Если у вас есть бизнес-модель и вы для неё пишете софт вы не стартап что это означает Для нас это означает что бизнес-стратегия у нас туманно бизнес цели нам не очень понятно тактика бизнеса у нас отсутствует мы как раз создали проект для того чтобы её выработать цели для нас для программистов сформулированы довольно невнятно и что может быть особенно важно мы должны быть готовы к тому что цель наша с точки зрения бизнеса изменится в любой момент да Мы все знаем что мессенджер с лак появился на свет в процессе создания компьютерной игры а что это означает это означает что стартап это эксперимент эксперимент высокорисковый обычно в современном мире считается что надо Как можно денег меньше денег выделить на первую фазу разработки ПО для стартапа поэтому этот риски по все по верхней границе Это важно Это будет очень важно чуть позже я придумал это определение сам Хотя смотрите Википедия говорит нам что стартап - это коммерческий была проект была бла-бла-бла финансирование для развития является крайне рисковым делом А ну то есть в принципе подтверждает мои слова даже Википедия теперь что такое микросервиса Давайте все в ту же Википедию заглянем микросервисы это такой вариант сервис ориентированный архитектуры Я думаю вы все способны этот текст прочесть я его читать вслух не буду А тут важно что С развитием Практик гибкой разработки диопс То есть ни в каких девяностых и даже в начале нулевых а без вот всей той автоматизации диплоя и тестирования которое есть у нас сегодня никаких микросервисов быть бы не могло А ну то есть теоретически могло а практически такую команду которая бы э собирала это всё гоняла и выкатывала э-э собрать на старта было бы невозможно Ну собственно в девяностых стартапов-то не было стартапы - это явление доткомов вот есть Яндекс который гудит немножко в другую Дуду нежели Википедия но тем не менее помогает ускорить разработку продукта сделать её гибкое управляемой проект из неделимого целого превращается в систему связанных между собой блоков сервисов Ну вот это определение оно довольно точное Здесь должна была бы быть картинка с разделением большой кучи навоза на много маленьких кучек навоза но я решил ее сюда не вставлять своими словами микросервисы - это способ проектировать приложение так чтобы единица обслуживания отгрузки была минимально возможного размера Ну как бы вот это мне понравилось действительно вот можем из таких кубиков можем разделить разработку между командами можем эти кубики горизонтально масштабировать позволяем позволяет нам из этих кубиков собирать бизнес-решение самые разные конфигурации Вот то самое изменение бизнес-целей в процессе бесплатно конечно ничего не бывает Поэтому чем мы платим полезные свойства оказывается что нам надо проектировать интеграцию Я понимаю что это все очевидные вещи я говорю я говорю я не могу удержаться мне на Да чертить поляну чтобы выйти на содержательную часть так вот проектировать взаимодействие между микросервисами приходится отдельно И это не всегда просто о том как это не просто завтра на фейл этапе ошибки в проектировании интеграции очень дорого исправлять прямо очень ну наверное так Коллегия поднимите пожалуйста руки тех кто работает прямо вот с микросервисами всё время Когда вы очень хорошо знаете насколько дорого стоит ошибка в проектировании интеграции инфраструктура для запуска приложения довольно сложная но то есть так вот в современном мире это стандарт или губернатик власти или ситуация в общем плавно меняется Это какой-нибудь не знаю тераформ кластер Ну в общем то есть это все огромный слой который остается под нашим приложением и обеспечивает его бизнес мысль Вот это обидно вот это по-настоящему обидно бизнес мысль оказывается оказывается ограничена вот этим нашим набором кубиков Если мы забыли интегрировать отправку SMS при проектировании прикрутить ее внутрь будет стоить нам А вот чего там будет это стоить мы поговорим в плане поговорим в содержательной части доклада Итак Почему не годятся микросервисы для стартапа гибкость вот это вот гибкость которую нам обеспечивает микросервисы она нам на этапе создания mvp в общем-то не нужна потому что у нас есть идея мы к ней идём А вот если у нас вдруг изменилась идея мы идем в какую-нибудь перпендикулярную сторону тут оказывается что гибкость микросервисов нам недостаточно я не буду никак ими тезисами подтверждать эту мысль Мне кажется что она сама очевидна масштабируемость не востребована дело в том что на этапе мвп у нас нагрузок-то практически нет Если у нас появились нагрузки Значит мы перестали быть стартапом Особенно это хорошо видно на примере финтех стартапов Да и как только у нас появляется нагрузка у нас появляется деньги на что угодно изоляция вот это вот изоляция бизнес-сущности в микросервисах она нам мешает потому что заставляет нас думать о коммуникации между микросервисами слишком рано обычно ещё до того как готов думать о будущих проблемах о проблемах масштабирования мы пока тоже не готовы потому что мы их себе не представляем потому что мы еще не знаем как будет выглядеть наше приложение для того собственно стартапы открыли чтобы посмотреть что из этого получится важно что текущие проблемы стартапа пока он стартап программирования никакого отношения не имеют и если вдруг стартап упирается в программирование то скорее всего что-то сделано не так причём самый тонкой стороны с бизнес стороны Ну так я думаю Ну вот такой типа делаем вывод понятно что микросервис из зло держитесь монолитов можно только в саркастическом ключе произнести ну про монолиты Монолит кстати хороший выбор но они тоже в общем-то не лучше микросервисов но эта тема для отдельного доклада мы сегодня об этом говорить не будем так вот понятно да микросервисы для стартап не гонятся можно заканчивать доклад но в нем есть содержательная часть которую мы прямо сейчас перейдем архитектура это важно смотрите этот доклад должен был быть философским Он должен был быть в маленьком зале для небольшого кружка единомышленников то что я в главном зале это счастливое стечение обстоятельств но тем не менее В чем смысл основная задача программистов стартапе Мы только что говорили о том что этого сухарисковый эксперимент соответственно у нас есть некий бюджет по времени по деньгам по людям в основном по людям кстати и мы должны в него уложиться каким-то образом очевидная мысль Но почему-то вот именно так программисты в стартапе для себя свою задачу не формулируют мы не можем себе позволить увеличивать риски основная опасность не уложиться Откуда она проистекает по моим наблюдениям это та самая ползучая сложность У нас есть сложность да то есть каждый компонент нашего прекрасного приложения сложный но мы вроде как эту сложность консулировали внутрь компонента Беда в том что это сложность склонна наружу из компонента прорываться мы оценили сложность проекта мы его и оценили каким-то образом выделили бюджет на Преодоление сложности ну там это нормальное такое проектирование мы еще никакого кода не написали а у нас уже есть миллион таблиц и миллион диаграмм Мы уже в принципе знаем где у нас начнутся проблемы и начинаем там подкладывать какую-то соломку там выделять на это на это больше времени Ну и так далее Возможно мы справились плохо э-э так бывает Но про то как справиться с оценкой предварительной оценкой сложности проекта Это совершенно другой доклад и скорее всего не от меня потом мы начали наш проект реализовывать и сталкиваемся с тем что сложность мы то есть сложность проекта начинает увеличиваться лавинообразно Почему почему лавинообразно мы поделили проект на части у каждого из них есть своя сложность общая сложность проекта считается как произведение а не как сумма сложностей Но это связано с тем что сложность прорывается в межкомпонентные связи и усложняет таким образом увеличение сложности каждого компонента увеличивает сложность не только свою но и тех компонентов которые с этим компонентов взаимодействуют то есть грубо говоря как мы имеем произведение почему это важно потому что если мы облажались и сложности у нас из компонента прорвалась в межкомпонентное пространство то дальше там начинается сложность проекта растет стоимость проекта растят и может таким образом я встречал это неоднократно Я за последние 30 лет сменил наверное 15 стартапов и примерно в каждом втором происходит именно это а именно Мы плохо мы неплохо оценили общую сложность но при разработке мы облажались спроектированием одного из компонентов сложность прорвалась и у нас оказывается что мы например вынуждены переписывать все компоненты системы все то наши 30 микросервисов на которых основан в нашем VP А чтобы добавить в каждый из них например мультиязычную поддержку Я встречался с этим так вот разработка архитектуры правильная разработка архитектуры приложения Это один из самых основных способов контролировать распространение сложности тут у нас имеется определение архитектуры из Википедии зачитывать я его не буду но оно подтверждает все то о чём я только что говорил что архитектура это компоненты и межкомпонентные взаимодействие значит повторюсь что инструмент у нас очевидный и в общем-то один мы должны поделить приложение на части так чтобы минимизировать вероятность прорыва сложности Эта мысль она не не основная да то есть в книжке про чистую архитектуру вы эту мысль не найдете она там есть но за кадром между строк вот там в основном в основном про то что мы основная задача архитектора это оттянуть принятие окончательных бедных бизнес-решений как можно дальше значит что мы делаем вот что делает архитектор он фиксирует межмодульные интерфейсы и создает между резервуарами сложности герметичный переборки Вот это делает вот этим должен быть занят архитектор это его основная мысль если мы ошибемся и поделим неудачно у нас получится прорыв сложности и скорее всего если мы имеем дело с микросервисной архитектурой вот этот прорыв сложности приведет к созданию распределенного Монолита распределенный монолит это такой Кошмар наш любого стартапного архитектора Да и не только стартапного любого микросервисного архитектора это такая архитектура которая достоинство не обладает не такими ни от микросервисов не от монолитов а недостатками обладает от тех от других а большая часть тех микросервисов с которыми я имел дело были на самом деле не микросервисы а распределённый Монолит а крайне неприятно потому что плюс сложности у нас ещё добавляется сложность взаимодействия между компонентами так если мы ошибемся в другую сторону у нас просто получится Монолит Ну что монолит это тоже не очень здорово но мы хотя бы знаем что с ним делать Вот теперь собственно содержательная часть начинается моего доклада Откуда берутся проблемы с микросервисами Дело в том что проектируем мы исходя из бизнеса идеи бизнес-задача мы думаем о бизнес-сущностях а микросервис - это чисто технологическая вещь а предназначена мы думаем о микросервисах и не имеем возможности о них думать иначе а мы думаем о них только с технологической точки зрения Как нам их запустить На каком кластере как фактически облик микросервиса определяет технологию на которой мы его строим поэтому было бы может быть и ничего на микросервисе плохая абстракция плохая она в том смысле что она течёт и и те детали реализации которые она должна скрывать она не скрывает Да потому что есть там внутри у микросервиса транзакции или нет почему-то должны знать все его соседи а не только он сам и накладывает дополнительные ограничения на процесс который мы строим поверх микросервисов то есть некоторые вещи поверх микросервисов сделать сложно поэтому мы их сделать не можем поэтому некоторые бизнес идеи идея остаются нереализованными Это важно Это плохо Это обидно Ну плохой выбор для стартапа доказывать тезис что микросервис плохая абстракция Я в рамках этого доклада не буду но готов подискутировать об этом в кулах рассказать как именно вот это вот абстракция под названием микросервис лишает нас важных возможностей добавляет нам сложные проблемы а еще микросервис сегодня это прям не микро Да вот как выглядит обычный микросервис Ну что Ну база данных рсбд таблицы на 3-4 до еще кэш на редисе к нему туда еще два три пять взаимодействующих с ним других микро сервисов А еще контроль идем потентности Да вот это вот все то есть когда в 90-х Мы строили электронные магазины они были попроще чем многие современные микросервисы Давайте не будем себя врать мы когда говорим микросервис Мы представляем себе что-то вроде автора в Ирландия какую-то такую белую пушистую сущность которая вот еще и сказали то и делает кролик грызёт морковку в реальности это монстр который грызет в основном на мозг и наши ресурсы так Ну так что же мы будем совсем с этим делать раз микросервис и зло будем лепить монолиты Скорее всего нет не будем Почему мы не будем лепить Монолита при этом опять любой современный проект будет состоять из частей нет способа в современном мире написать проект в одиночку это в любом случае команда скорее всего не одна даже для nvp вот для масштабный проект в сфере финтеха где довольно много крутился он одной командой не поднимается никак потому что вот последний раз когда я заходил в финтех я писал в процессинг руководил написанием процессинга ещё одна команда руководилась занималась занималась коннекторами блокчейну А ещё команда ещё одна команда занималась коннекторами реальным деньгам и четвертая команда занималась фронтендом ко всему к этому и мобильными приложениями то есть вот как минимум У нас 4 команды соответственно четыре у нас имеется как минимум компонента в реальности больше у нас в каждом из них происходит лавинообразный рост сложности если мы попробуем написать это всё как Монолит Да даже в современном мире в принципе все вот эти четыре вещи можно было бы закатать в один Монолит я это видел так делают некоторые люди испугавшись как раз вот тех сложностей о которых я говорил недавно процесс обязательно выйдет контроля стартап провалится Вторая причина по которой мы не будем писать Монолит даже для стартапа связано с тем что обычный Монолит связано с тем что любой особенно высокорисковый стартап создаётся не с целью а быстренько написать его и забыть мы рассчитываем на то что он начнёт приносить деньги мы будем его поддерживать долго и счастливо Ну то есть попадём в тот день стартапов которые выстреливает Ну Иначе зачем нам вообще тратить на всё на это время в свой проект и тут вот на этапе Когда мы вышли из фазы стартапа и начали развивать уже наш продукт с известной бизнес стратегией вот тут микросервисы при всех их недостатках показывают себя лучше в первую очередь они дешевле в поддержке во вторых они существенно лучше в масштабировании Ну то есть в принципе микросервиса был бы неплохо было бы писать микросервиса Если бы это было возможно и того на этапе в стартапе Нам нужен Монолит но нам нужен правильный Монолит который мы нарежем потом на микросервисы в языке года я вот эксперт по разработке по ядро а до того в нескольких компаниях евангелистом Мне кажется что Эксперт разработки по это близко так вот я должен вам сказать что есть специальный специальная поддержка для таких монолитов которые потом будет легко нарезать на микросервисы это тот самый пакет интернал про который мы если хотите поговорим про Итак строим правильный монолит из чего мы начинаем с чего во всяком случае начинает архитектор архитектор начинает с того что смотрит на задачу под правильным углом и правильный угол как мы в первой части доклада выяснили это угол под которым мы собираемся контролировать сложность Мы собираемся построить герметичные переборки для резервуаров со сложностью и сделать эти переборки Как можно более крепкими с одной стороны с другой стороны как можно более удобными для развития проекта надо сказать что это и при разработке микросервисов они только монолитов не вредно это не вредно вообще при любой разработке думать основную держать в голове Как основную задачу сложности Почему когда я начинал это была середина 90-х путем программиста был путь хитростей Мы сражались за байтом потому что их тогда частоты процессоров измерялись сегодня это не так это большая удача Прямо скажем для программиста оказаться на рабочем месте где ему дадут задачу которая заставит его сражаться за такты и байты в скобках замечу что на этих позициях обычно сидят седобороды мужики вроде меня только поумнее и молодому программисту сегодня достанется задача другая достанется задача где читабельность хода будет его основной метрикой после того то есть то что код должен работать об этом и не говорим у него должна быть читабельность он должен быть тестируемый а Это разница между тем как оно было в девяностых и тем как оно есть сегодня сегодня основной путь программист это путь прямо ты и ясности что еще мы делаем для того чтобы построить правильный Монолит мы применяем правильный фреймворк для мыслей я применяю Солид и об этом собственно и есть весь доклад большая часть которого заняла Подготовительная часть так вот почему это важно перефразируя честертона если мы будем строить автомобиль мы узнаем о том что мы его плохо спроектировали сильно заранее еще до того как он попадет на конвейер скорее всего еще на этапе попытки создать даже не то что опытный образец чертежи довольно опытного образца А вот и архитектура это веществовленная фантазия нафантазировать мы можем что угодно никакой обратной связи тот инструмент которым мы пользуемся для фантазирования нам не даст мы можем нафантазировать то что не будет работать это наблюдали неоднократно я уверен как фантазия приводит свободный полет фантазии приводит к неработающему коду Поэтому нам нужны какие-то инструменты которые позволят нам наши собственные фантазии не то чтобы держать везде но проверять инвалидность так вот соль это такой набор принцев проектирования для объекта ориентированного программирования и Казалось бы он не имеет никакого отношения к модульности к микросервисам к архитектуре но это очень удачный фреймворк прям очень поэтому я как ленивый человек однажды его освоив еще там в конце 90-х познакомившись с ним я решил что вот это будет основа Нет решил ты это потом но тем не менее это стало основой моей деятельности в рамках проектирования того и сего поэтому я собственно докладных о том как я применяю соли при разработке архитектуры как модульной так и микросервисный Итак строим правильный Монолит себе для изменения вашего модуля у вас должен быть ровно ровно одна причина всегда это означает что ответственность вашего микросервиса вашего модуля в рамках вашего модульного Монолита должна должна быть единственная если это выглядит как очевидное но таковым не является Но вот смотрим например Это пример из реальной жизни У нас есть модуль который выполняет периодическую операцию со счетом пользователя Ну там куда-то отправляет деньги А еще он отправляет отчет на e-mail пользователю об этом Где формируется email В каком модуле Где формируется мультиязычный e-mail для этого модуля для этой операции как это происходит то есть очевидно вот Похоже что нам нужен модуль который выполняет операцию с пользовательским счетом и модуль который обеспечивает оповещение И связь между ними все бы ничего до тех пор пока для подтверждения этой операции нам не потребуется подтверждение от пользователя вот отправкой отправкой запроса на подтверждение получением подтверждения какой модуль занимается Если честно то у меня нет ответа на этот вопрос Это всё всякий раз приходится организовывать по месту но а важно что об этом надо помнить Иначе если мы упакуем это всё ровно в один Я видела это как люди пакуют это всё в один микросервис и после этого начинаются проблемы потому что например подтверждениями Потому что у нас появляются новые подтверждения например раньше мы подтверждали только по электронной почте А теперь мы подтверждаем и через SMS а потом ещё и через оказывается что мы для совершенно не связаны с задачей по операциям со счётом мы вынуждены переписывать микросервис или модуль который у нас предназначен для для этих самых операций не сойдем ли мы с ума нарезая модули так мелко Это хороший вопрос Дело в том что особенно если мы решили что у нас все-таки будут микросервисы у нас каждый микросервис это единица диплоя это как бы его достоинство но одновременно его недостаток это единица связи одного с другим В общем можно и Сойти с ума Да не сойдем ли мы с ума объединяя не связанные задачи в один модуль вот сто процентов сойдет с ума Вот это даже даже не вопрос еще тут я хотел бы отметить именно на этом месте библиотека модуль это про то что мы делаем модуль микросервис это про то что мы делаем они про то как мы это делаем Это тонкая разница Но об этом мы поговорим в кулуарах очевидно модулем но я применяю его проектирование хранилища для модуля грубо говоря схема базы данных потому что все-таки большая часть наших модулей будет иметь дело с реляционными базами там есть схема схему надо разрабатывать так чтобы изменения в одном модуле не приводили к миграциям в более чем одном хранилище надо разрабатывать ее таким образом чтобы миграции не были больными У меня нет ответов как это делать но я знаю что об этом надо помнить когда мы проектируем нашу модульную архитектуру грубо говоря вот по одной базе на модуль и никаких меж базовых запросов этого уже достаточно для того чтобы начать думать правильном направлении про то что любой там где используется предок должен быть мы должны иметь возможность использовать любых потомков это очень спорный принцип для модульной архитектуры потому что не там Не там нет наследования но Казалось бы важно понимать что API У нашего модуля существует не только в пространстве но и во времени У нас есть несколько версий вот сто процентов у нас будет несколько версий нашего API у каждого из модулей потому что у каждого модуля будет расширяться функциональность и тут неважно API у нас сетевой или просто набор вызовов интерфейс который мы специфицировали важно что он будет меняться мы должны выработать требования проектированию нашего с тем чтобы Наследник во времени нашей нашего первого модуля А мог использоваться там уже где использовался его предок почему это важно потому что без горизонтального масштабирования сегодня обойдётся ни один проект Даже тот в котором нет нагрузок которые требовали бы масштабирования потребует у нас отказа устойчивости отказывая устойчивость это как минимум Соответственно А Или мы останавливаем наш проект и обновляемый одновременно это плохо или мы обновляем их по очереди Но тогда наш старый вот так вот сохраняем обратную совместимость расширяем API очевидным образом у меня кончается время Поэтому я разверну это в кулуарах обеспечиваем поддержку рефлексии возможно чтобы можно было у модуля спросить какой ты версии или чтобы пакеты запросы и ответы модуля содержали в себе версию Да особенно это важно для сети интерфейсе greation принципов мы должны зависеть от минимального минимального размера интерфейсов Казалось бы у нас Ну как бы мы уже зависим от интерфейса но тем не менее Вот то что я видел в одной компании которая попросил меня никогда не говорить что я там работал Потому что я не уехал из России не важно важно что там были API были сервисы у которых было три Ну пять методов vpi но при этом у каждого от 15 до 35 параметров и там штук 10-20 не обязательно это тот самый случай когда формально У нас маленькая а по факту очень большое потому что фактически каждый необязательный параметр - это отдельный фактически вызов API и они были такие именно потому что разным сервисом требовалось поговорить с этим сервисом и они вместо того чтобы добавить специфический метод они добавляли параметры уже существующие там был паттерн проектирования что это означает помельче делаем методы почётче то есть вот если у нас есть четыре задачи не надо их объединять в один метод надо их всех разделить на четыре разных метода модуля может быть больше одного API это важно и мы соответственно можем их по отдельности предоставлять разным другим модулям не обязательной параметры это абсолютное зло Ну извините советы от капитана Очевидность они и правда самые полезные Какие вообще бывают интерфейсы причем тут мы не зависим в любом случае от конкретики у нас в любом случае есть некоторые абстрагированный интерфейс бесполезен принцип Ну я осознаю что здесь я натягиваю сову на Глобус но тем не менее мне же надо как-то букву д приспособить к проектированию архитектуры поэтому я приспособил я вот таким образом это кстати вполне реальная задача которая Однажды перед нами встала оказалось что нам нужно из синхрон от синхронного IP перейти к асинхронному а так вот Можем ли мы вызовем вызове по API заменить на отправку сообщений отправкой получения сообщений Это в некотором случае в некотором смысле у нас не получится то в общем случае это не беда потому что это задача довольно редкая Но если вдруг Если вдруг такое потребуется хорошо бы что нам не пришлось переделывать слишком много поэтому есть такой способ Когда вы проектируете верифицировать правильно ли вы его проектируете вот таким забавным образом представить себе что вынуждены общаться с контрагентами через очередь иногда это реальная задача но чаще просто упражнения и того выводы микросервисы старта не нужны обойдемся монолитом Монолит Нам нужен правильный микросервис на ориентированный Почему Потому что когда нам придет время распилить монолитный микросервиса мы не должны рвать волосы не на одной из частей тела для проектирования такого Монолита нам надо смотреть на задачу с точки зрения контроля сложности и применять правильные средства правильных языков Я же евангелист нормально делаю нормально будет совет всех времен и народов капитана Очевидность понятное дело Спасибо вопросы пожалуйста первый вопрос сразу первый ряд Спасибо за доклад очень интересный топологии Да я может быть недостаточно ясно эту мысль сформулировал Но микросервис это чисто технологическая вещь фактически когда мы проектируем микросервисы мы проектируем архитектуру инфраструктуры а не архитектуру нашего приложения и в этом собственно беда микросервисов Спасибо Добрый день Даниил Меня зовут Андрей я из компании центр финансовых технологий Вот давайте представим что мы вот только-только перешли черту стартапа и вышли на более-менее работающий продукт уже с понятной глубиной какого-то бизнес сценария бизнес-процесса и начинаем быстро масштабироваться но масштабироваться горизонтально То есть у нас появляются некие Наследники видоизмененные бизнес сценарии Ну для новых потенциальных клиентов и аудитории клиентов Здесь вопрос как раз вот про сингл-респонден эти принцип И как же все-таки делить на микросервисы с точки зрения технологически или процессуально то есть с точки зрения предоставления бизнеса именно микросервисы мы в любом случае будем делить технологически у них нет в этой абстракции нет ничего кроме технологии процессуальное деление нам придется класть сверху на микросервисное и скорее всего каждый из наших процессов будет задействовать несколько микросервисов и вот тут нас конечно ждет очень глубокая пещера довольно грязная что с этим делать я не знаю Ну если мы заранее об этом подумали тогда у нас все в порядке Ну или почти в порядке А вот если мы заранее об этом не подумали то будем думать уже сейчас Ну вот если мы действительно сильно агрессивно масштабируемся горизонтально вот технологический путь микросервиса деление на микросервис вот он склонен привести нас как раз к распределённому монолиту когда мы что-то идёт Да и будет так и будет смотрите мы опять я вот эту мысль повторю мы когда думаем о микросервисах мы думаем о чём-то вроде ирландовского автора да то есть некая функция которую мы вызвали она или отработала и или упала и тогда её перезапустят и снова передадут эти параметры Ну в общем как-то всё произойдёт само вот реальный микросервис выглядит совсем не так это страшный монстр А что с этим делать Мы не знаем скорее всего от микросервисов придётся отказаться скорее всего это абстракция не как лишнее Да ну оказалось что они не нужны точно также Здесь нам придется Что с этим сделать придумать какую-то другую абстракцию на место микросервисов если мы писали на функциональных языках да еще на настоящих облаках вроде бы проще Но мы вот у нас что есть на руках и контейнеры с микросервисами будем плакать ответил ли я на вопрос Ну в целом Да в целом да да Живи старик Спасибо Здравствуйте меня зовут Арсений компания VK такой вопрос вот эти все принципы выделения интерфейса заранее они усложняют код и стартапа зачастую не хватает времени на поддержку от этого всего возможно стоит выделять какие-то абстракции уже после того как мы поймем Когда в какую сторону нам нужно двигаться и какую часть именно делать отдельным модулем в начале делать какой-то более простой монолит это дело в том что выделение интерфейсов заранее это основная основная Метрика Для обеспечения тестируемости кода а тестируемость кода Это такая вещь которая в современном мире для стартапа вопрос выживания то есть хорошие тесты не тормозят разработку А ускоряют ее начиная от Unit тестов поэтому нет в стартапе именно в стартапе вот в 21 в двадцатых годах 21 века придется выделять интерфейсы заранее для того чтобы можно было написать хорошие тесты такой у меня есть ответ Спасибо Всем добрый день Сергей компания X5 вы говорили о том что одна из основных проблем начало разработки стартапе на микросервисах в том что это дорого потому что но дорогой слой инфраструктуры под этим он большой сложный и так далее но как раз для решения этой проблемы у нас есть Облака как там публичные в интернете так и частные Облака в каких-то крупных компаниях если мы говорим про какой-то стартап про какой-то бизнес идеи в крупной компании то помимо внутреннего частного Облака в ней есть как правило какие-то там свои готовые принципы какие-то свои готовые уже сервисы там типа той же Кафки и так далее и так далее которые на самом деле уже являются часть каким-то набором готовых кубиков микросервисов которые можно переиспользовать и соответственно отсюда вопрос из вашего опыта где здесь проходит какая-то граница когда мы все-таки делаем Монолит или когда мы видим что у нас большое количество готовых кубиков которые мы можем потребить и тогда уже продолжаем разработку на микросервисах даже в стартапе Значит все-таки придется сказать что я там работал значит вот с описанной вами ситуации я сталкивался один раз в жизни когда работал на компанию reddit у них была инфраструктура для разработки новых микросервисов я работал на reddit иконами которые это инкубатор стартапов прямо в рамках большого редата в чём проблема все новые стартапы проектировались исходя из возможностей этих кубиков они все были как Близнецы братья никакая реально новая бизнес идея туда бы не могла быть пропихнута потому что под неё не было инфраструктуры ответил Я Понятно спасибо Спасибо большое Добрый день Я тоже из компании x5t наверное попроще вопрос задам там более человеческий вот мы допустим начинаем пилить стартап В итоге закапываемся в микросервисной вот этой вот лапше начинаем мучиться страдать и не хотелось бы чтобы это кончилось фейлом да то есть чтобы мы просто умерли из-за технологических проблем есть ли какой-то момент когда это можно отрефиксировать и понять что мы идем уже к фейлу и что-то исправить и что делать в такой ситуации вот мы обнаружили что пол пути Прошли мы уже не вывозим эту сложность можно спасти жизнь стартапа выглядит немножко иначе у вас есть бизнес который генерирует идея И у вас есть команда разработки которая пилит платформу на которой эти идеи можно реализовать а бизнес свою идею будет менять все время и когда у вас цикл изменения бизнес-идеи оказывается Короче чем цикл разработки платформы для неё Да я с этим сталкивался неоднократно Это значит что вы что-то делаете не так скорее всего вы слишком технологичные вам скорее всего нужно что-то сильно попроще чем то что вы вот вся та технология которую вы придумали для платформы для бизнес-идеи скорее всего для этой бизнес идеи нужна платформа попроще может быть даже сайт на тинке спасибо Вот все запомнили что Даниил про Эксперт сказал что они слишком технологичные Я между прочим не написано в моём севин но я знаю как там всё устроено Папа да да пожалуйста Привет Приветствую Даниил Меня зовут Иван Я из компании озонтех тоже является голыми к разработчиком сильно молодым микросервисы я бы посмотрел говорят они хороши смотрите у меня вот такой вопрос задам свою маленькую Но разработческую жизнь видел два подхода при тут такой душно немножко вопрос по поводу организации кода Как вы к этому относитесь то есть два подхода Когда приходишь в компанию тебе говорят Да у нас микросервисы каждый пишет кто как хочет архитектура паттерна репозитории транспортный слой бизнес логика Ну как нравится или же там вот сейчас своей команде я условно являюсь там пропагандистом такого подхода что мы должны договориться на берегу как мы пишем Как организуем свой код и так далее это ну по моему мнению я считаю что это нужно для передачи микросервисов из команды в команду для того чтобы вообще идея такая что написать там какой-то линтер который сильно будет бить по рукам чтобы была жёсткая организация кода чтобы было с ним проще жить чтобы разработчик не думал каких-то нюансов да сразу у него была часть решено Это первый вопрос как вот относитесь к этому я тоже за фашизм Ну условно И второй вопрос это вот вы раскрыли Я так понимаю тему пакеты в Ну если кому-то интересно Я послушал Точно Спасибо там не очень глубокая тема Просто я в других языках ничего Никакого такого средства не встречал можно обсудить потом что касается обсуждения друзья там Если вы откроете чатик зала там куча комментариев который мы к сожалению сейчас и вопросов которые мы не успеем сейчас публично осветить потому что время перерыва надо будет просто в чатике там поотвечать хорошо вот и кому за вопрос подарим книжку так так так так так так так так так был же хороший вопрос вот может быть название книги тебе подскажет отсюда был хороший вопрос Неужели человек ушел а нет вот Мамин Сибиряк здесь Какая книга Вселенная Вот как раз в Новосибирске отправимся"
}