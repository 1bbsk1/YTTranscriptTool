{
  "video_id": "P7ZDrOY4E84",
  "channel": "HighLoadChannel",
  "title": "Высоконагруженная Платформа 1С / Антон Дорошкевич",
  "views": 6134,
  "duration": 3404,
  "published": "2022-03-21T14:05:43-07:00",
  "text": "антон коллегам поднимайтесь на сцену он проведет доклад посвящен его платформе 1с спасибо спасибо а один вопрос перед начал конечно они могут перед началом вот один в какой то момент времени для меня произошел такой вот кардинальное изменение уже в отношении к 1с когда у них появилась поддержка postgres а ты же я правильно понимаю специалист до этой теме да вообще насколько это было мощные изменения это была революция я ней в докладе прям отдельно скажу а именно об этой революции когда тогда докладу я как бы без ложной скромности был причастен в первых рядах такой революции и милый 3а всем доброе утро зовут меня антон дорошкевич и один из никто но помимо этого я являюсь ведущим экспертом стране по эксплуатации 1с на поиски ель и архитектор эксплуататором больших многоквартирных системы 1с на сотни баз на 1000 десятки тысяч пользователей и сегодня хотел на холоде как раз рассказать про платформу 1с самое важное скажу в начале доклада нужно четко разделить 1 с это не бухгалтерия вот прям вот там бухгалтерия вот там один с платформы 1с бухгалтерия это одна из тысяч конфигурации реализованных на платформе 1с с думать что один с это бухгалтерии это то же самое что думать что вся мощь экселя это тот файлик который вы видели один раз на рабочем столе геэз две формулы и он больше ничего не умеет вот это совсем не так и сегодня мы будем говорить именно о платформе 1с будем говорить о ней как об инструменте очень взрослым инструменте бэг-энда который умеет решать сложные бизнес-задачи простые бизнес-задач но в целом любые задачи и отдавать вашему фронтэнда их так как вы хотите в таком виде по такому транспорту с такой скоростью и так далее с чего в целом состоит платформы 1с начнем сверху вниз а сверху виды клиентов которые работают с 1с клиентские части 1с толстый клиент это так сказать у нас наследие предков не буду забивать мозг он он отмирает помаленьку отмирает потому что это неуправляемый конфигурации 1с от них давно отказалась и все современных конфигурации уже работает только через тонкий клиент тонкий клиент это вот новая такая ну как новый мульт 10 уже ну до сих пор еще не все перешли новая часть клиентской платформы 1с его особенно с чем когда ты работаешь тонком клиенте никаких вычислений на клиенте не происходит вообще все вычисления на сервере то есть по факту это такой как ремонта об терминал знаете но там понятиях microsoft windows тонкий клиент чем занимается отправляет ваши команды на сервер сервер что-то делает поэтому обратно тонкий клиент единственный может что сделать разрисовать вам в интерфейсе то что ему пришло там вам надо чтобы если там остаток не остаток а этот клиент вам должен до что вот он красненьким было в табличной части ну вот этим занимается тонкий клиент вот он вам разрисует помимо этого тонкий клиент умеет соединяться с один с двумя способами напрямую сервером 1с тут супер clicker сейчас я попробуем воспользоваться да наверно попаду даже да вот он может соединяться как напрямую сервером 1с так и через веб сервера через ip сервера с 1с также работают браузеры любые любые браузер на любых платформах даже сафари дам с горем пополам но работает у сафари по вы везде с горем пополам ну работает но но из 1с им также и мобильные приложения мобильное приложение тоже делятся на два как бы класса есть прямо мобильные приложения написанные на один с это создаете прям специально под свою конфигурацию там оптимизированные все красиво дизайнеры поработали и другой класс это когда вы вместо мобильного уникального вашего приложу приложения вы используете мобильную платформу 1с и в ней публику указывайте публикацию базы и платформа сама автоматически все вам перерисовывать залазь интерфейса опять же чуть дальше это прям покажу и скажу сколько времени занимает опускаемся чуть ниже ну вы вчера проскакиваем веб-сервера в африке веб-сервера то есть как бы все они для 1с это внешнее и папе какой-то внешняя черная коробочка да у нее есть модуль для интернет информация сервера и до для apache хотите сверху сверху индексом прикрываетесь не хотите не прикрывать что хотите делайте это прозрачно для 1с дальше идут сервер 1с сервер 1с вот главная мощь 1с именно она сосредоточена не в базах данных она сосредоточена именно вот здесь именно здесь платформа к самая зрелая и и часть самое зрела туда на самом взрослая вся такая в тренде почти все умеет как и любая взрослая платформа она отказоустойчивого отказоустойчивость любых масштабов все что угодно делаете помимо отказоустойчивости еще и горизонтально масштабируемая и динамическая балансировка нагрузки и опять же это все можно еще и совместить то есть у вас грубо говорят 3 сервера могут играть роль как отказов failover of отказываться . так и сразу между собой делить нагрузку чуть позже опять же более подробно об этом расскажу опускаемся ещё ниже файловую базу данных но трогать вообще не будем это опять же наследие предков но как антон уже сказал там у нас в стране гораздо больше пользователей 1с чем яндекса прям намного больше не каждая бабушка бухгалтер умеет полиса индексом но вот 1с на поле сумеет вот они работают на файловых базах очень много бухгалтеров маленьких компаний работает на файлах базах тоже там ничего не надо ли далее готова и работаешь над нет ничего не над серьезные мышь михайлова де серьезный платформы конечно но инсоляции не бывает на файловых базах это обязательно субд и опять же субботы для 1с такой же внешние api это для нее черная коробка какие субботы поддерживаются на картинка перечислены 4s б.д. microsoft sql postgresql естественно обеим babyton oracle начнем с самых непопулярных в мире 1с это объем дебету не видел никогда в жизни не 1 инсталляции сам ставил пробовал работать но в жизни не видел никто они видимо как-то пропустили какую-то вспышку и и и и не пошло на oracle oracle есть в мире один с только у крупных прям сильно крупных карпов у которых в принципе куплено безлимитная подписка на oracle и им нет никакого смысла рождать компетенции по другим базам данных кому-то еще платить ну чтобы курит а даже формально бесплатный поиск гнезда как и все свободное по формально бесплатно тоже не хотим потому что нужны админы другие нужны какие-то знания куда-то нырнуть а вдруг не заработает а как там делать бэкапы и так далее много много вопросов они хотят и не задаваться вот есть анлим оракла давайте на нем 1с запустим давайте работать до работает больше ничего такого там сказать нельзя под почему потому что один с тут очень похожа платформы 1с опять же вега буду где буду говорить 1с я говорю о платформе и никаких таких фигур от платформы 1с похожа на amazon узкую аврору где данные отдельно а математика отдельно на данным любая математика любая агрегация нельзя в 1с у б д получить а там не знаю дай мне суммы всех нечетных чисел ну вот в этой таблице того в этом в таковом ну во первых таких задач бизнеса не бывает ну не бывает таких бизнес-задач во вторых так 1с не умеет то есть для нее сободы это хранилища данных все что нужно считать математически считает сервер 1с это математическая лошадка зубы д математикой напрягаются только выбрать правильный план планировщик больше собой ничего не делает ее задача надежно хранить и быстро отдавать скорости хотя растут до но не хватает их всех все меньше и меньше поэтому в 1с здесь на картинке нет появился такой механизм копии базы данных и mechanism in memory 1с опять же сервер 1с сервер 1с это не откладывается на особо на уровень свободы может если вы сильно захотите иметь и там карп лицензию а вам определенный отчет данные для него периодически копировать в базу данных находящегося в оперативной памяти сервера 1с и тогда вы will типе вообще-то по умолчанию систему превращаете в лапы с очень быстрыми отчетами там есть свои ограничения далеко не все отчеты можно так сделать например в течение с временными таблицами а нельзя серверу рассказать что вот там ты там по охране данные а здесь храни временный таблиц так не получается и там есть свои некоторые ограничения что можно хранить в памяти что нельзя помимо памяти это также работает просто с как в другой судьбе то есть вы можете поставить два подвеса один у вас вот он рабочий по сгрыз скотину мастер давайте его назовем а второе это под grease для тяжелых отчетов и сервер 1с сам будет разруливать что где ну как вы ему настроить и да вот он этот отчет будет браться с другой суммы девки с другого сервера и пользователь сверху будет выдаваться данные актуальны на такое-то время ну не будь он на самом деле любой отчет не актуален после сразу же в момент как то вы нажали кнопку если отчет делается по очень динамически изменяемый данных то через секунду он устарел а формируется он и при 5 секунд все вы уже в прошлые смотрите тот как вчера остролист ликбез был для айтишников смотрим на звезды миллиарда лет назад случилось а мы только час увидеть то же самое любой отчет сразу устарел сразу устарел если вы работы работа работаете с продуктивной базы данис копии на вчера для аналитиков ну так вот пойдем дальше по базам мир 1с буквально пять лет назад был миром mssql 99,99 инсталляции процента инсталляции было только на microsoft других вариантов не существовало примерно пять лет назад после появления компании под гаспра а пост блеске ели зашагал не только по планете и по стране ну и по 1с как бы вот например я подхватил этот флаг еще несколько людей подхватили этот флаг за пять лет чего добились по разным оценкам теперь количество инсталляций от 15 до 20 процентов всех клин северных инсталляциях работать на поиски ну с нуля расти просто цифры кошмарный вот но подгрузки я щас это прям тренд это тренд туда переходит все все слышат разная про него госорганы слышат нам деваться некуда мы под рот под минкомсвязи и росреестр мы обязаны перейти на пол грейс келли бизнес слышит о бесплатно и но он не считает операционные расходы на там на на админов на поддержку но что-нить еще услышит бесплатно память поехали ну поехали-поехали это это работает как бы все четыре базы поддерживаются все работает один с старается успевать за новыми версиями то есть под газ у нас раз в год выходит и мы со скелета раз два года примерно выходит но 1с старается высоко платформу под это дело перекручивать есть свои особенности попытки поддержать кроссплатформенность да у тви сделать написано что особенно windows и на linux работает сервер 1с на windows и на linux да это действительно так это работает на маке это не работает но это никому не надо на маке намокаешь смысле но есть нюанс как всегда например невозможно подключиться к mssql если у вас сервер 1с на linux там просто нет протоколов и драйверов на линуксе нормально для того чтобы самое со стилем работать вот такие нюансики есть но в целом в целом это все cross-platform что еще в платформе платформа на борту имеет кучу транспорта кучу видов форматов данных как меняться что меняться чем а вот с андреем не бородин подсказал что еще обязательно сказать что еще про the buffer тоже есть вот тут на картинке нет он там есть как нативная компонента но он там есть то есть если надо ты такой формат на те в целом 1с такая очень благодарная платформа вы можете расширять как угодно есть механизм компонент пожалуйста пишите ну грубо в понятиях винды белки встраивайте и погнали у вас будет всё что угодно любой транспорт а им таки у тоже есть сервера черри дентон в платформе прямо вшит уже то что становится популярным и очень широко распространенным в платформе появляется очень быстро и ваши трудозатраты равны нулю для того чтобы теперь работать еще и с этим протоколу теперь работать еще и с этим транспортом хотите http сервисы хотите rest хотите веб-сервисы хотите почта там чё там еще ну и в типе сервер все что у от все что достаточно хорошо распространено в платформе есть понятно что есть везде какие-то уникальные протокол или там мега мегафишки который три месяца назад появились но никто не будет гнать платформу за такими темпами когда вот она утвердиться станет действительно массам тогда она здесь появится но мы с вами на холоде я когда готовился к холоду меня заинтересовала такая штука хочу такую highload это что и как ни странно нет определения что такое хайло вообще нет каждый что хочет то и воротит ну естественно есть википедия лучший друг того чего нет определения да и там написано highload много пользователей сколько много не написано 10 тысячами ли он ничего непонятно сколько для тебя много столько у тебя и хайло вот что тут имеется ввиду под пользователи сначала давайте ограничение системы и ее нет сколько вы лицензию купите столько ваш пользователь из-за и войдет в систему а дальше обеспечивать это все железом обеспечиваете нормальным кодом да и вперед работаю ограничений каких-то вот но не знают у нас нельзя больше ста ты от 99999 пользователь может дальше нельзя такого в платформе нет реальные инсталляции которые специально не нигде не будет в докладе им графиков там будет пара графиков но нигде не будет графика всяких бенчмарков все эти синтетические тесты к жизни не имеет никакого отношения в жизни будет по другому не бывает жизни бизнес-задачи чтобы тебе в табличке из двух колонок просто прибавлялось единичкой писалось такой бизнес задачи не существует но по крайней в 1с такой задачи никто решать не будет она что она какая-то синтетическая слишком там будет куча бизнес-логика куча бизнес кода куча проверок и ваш tf который ну можно достать мы обработали вот на этих серверах миллион пользователей и что ну за это вообще без бизнес-логики обработали синтетика чистая такая упал на мое мнение это маркетинг а поэтому таких графиков не будет с точки зрения платформы как бэг-энда там конечно вас не будет работать пользователю да и одновременно навряд ли в бэг-энде сидят пользователя это запросы от фронтенда получается сколько мы грузили небольшой сервачок там всего лишь 16 ядер ну вот небольшой сервачок 16 ядерно serie 1 с помогут столько же на подвесе мы смогли его груза нуть в 130 тысяч одновременных http сервисов грубо говоря читайте в секунду 130000 потому что операция была очень быстро ну там где-то пол секунды длилась специально окружали бизнес-логика чтоб не просто так окей ответь но это никому не интересно да хоть какой-то бизнес логика на читала остатки каждый раз получала а вот 130000 но куда мы уперлись уперлись и в платформу не в код мы уперлись железо оно кончилось ну дайте сервера 48 ядерные там дойти туда 2 терабайта оперативы еще быстрее будет вот то есть ограничение по пользователям нет реальные внедрения с пользователями именно с пользователем говорят о том что одновременно работающих пользы в одной базе это важно в одной сейчас внедрение на десятки тысяч человек ну допустим почта россии документооборот работает на один с 65000 по моему пользователь одновременно работает вот это опять же ниф-ниф таблицы пользователи у вас 65 тысяч его записи до того что миллиона именно одновременно работающих под никаких ограничений там по хай-лоу ду пользователи в платформа не имеет реальной внедрение грета то что выдерживает очень серьезные нагрузки следующий момент хайло до который опять же у нас принято считать это большие объемы опять же нигде не сказано что такое но нигде не скажу что гигабайт это не объем вот вообще не считаем нигде не сказано что большое тасс петабайт кто хочет для кого что большое для того и большое опять же ограничения их нет ограничений нет сколько ваша субд с способны переварить данных столько один раз будет переваривать но не нова наверное и есть особенность особенность как раз вот тех состоит из тех десятков тысяч пользователей кем бы они ни были бы концов скими запросами ли реальные люди которые работают вот с этими объемами данных но реальный базы 1с а час переваливают за сотни терабайт ну на на больших инсталляциях опять же одна база одна база там сотни здесь десятки тировать это вообще уже считается нормально элементарно типовая там наша любимая 1с бухгалтерия да она сама по себе весь 5 гигабайт просто мы еще ничего нет оно уже 5 гигабайт тоже там конфигурация хранится вот так вот в чем особенность и почему на один с так все перила всю математику туда донесу pd на сервер 1с особенность в пользователях как они пользуются этими данными как пользуются данными пользователей в вебе в бой в абсолютном большинстве сценариев пользователь получает атомарные данные то есть дай одну одну запись скорее всего четко по индексу потому что вы не даете себе пользователям никогда свободы построить свой отчет все предопределено мы точно знаем что будет получено 100 процентов знаем что будет получен что будет выдавать вот эта кнопочка мы точно знаем в 1с таких знаний нету ни потому что ну там дураки и не могут понять пользователь до продаж там дана полная свобода пользовать пользователь сам настраивать себя четко хочет можно от грубо говоря power bi а если кто-то видел да ну вот вот примерно немножко ограничение ну примерно ты никогда не знаешь что получит пользовать что он там себе понастроил это раз одна особенность и вторая особенность пользователи 1с обожают обожают вы дать себе отчет который содержит например 400 тысяч строк помимо этого он содержит у таку 20 столбцов ну это помимо всего еще иерархический список который содержит глубину и счетом 9 например где 9 уровней и вот так вот все вот это а потом чего не делают когда я спрошу ты же никогда 400 тысяч строк не сравнишь но это невозможно ну ты глазами-то ты постареешь пока ты про анализируешь 11 и того смотрю у меня все хорошо больше мы ничего не надо вот такие особенности 1с они привели к мифу что один с медленно и что платформы 1с работает медленно нет немедленно работает очень быстро вы просто сравните какие объемы информации на выдает например такой отчет обожают на счетчике которые вот вам зарплату считают нарко в организациях они все работы в 1с там вариантов практически нет там 99 процентов точно в 1с считают зарплату они обожают такие отчеты обожают они по организации задают у такой отчет выдают потом смотрят поэтому посмотрите сколько данных выдалась там выдаются гигабайты данных покажите мне сайт который выдаст гигабайты данных за там хотя бы за за секунды хотя бы за секунды пусть выдаст не выдаст он тупо каналы порвутся ну чтобы перекачать он гигабайт гигабайтные отчеты и такое поведение пользователя привело к тому что сейчас везде стоят 64-битные клиенты 1с танки потому что в 32-битный клиент 1с тупо не вмещается информация которую они хотят увидеть на мониторе вот этот отчет он просто не влазит в 3 гигабайта ведь передается там и по 12 гигабайт результатов выборки да вот вот такие особенности это особенности это не ограничение так работа пользу понятно когда мы смотрю с вами рассматриваем платформу 1с как backend движок чего-то там нужно работать ну как с микро сервисом каждый например http сервис отвечает за четко определенную функцию заранее знает что надо заранее построены правильные индексы и отдает атомарная вещь ну либо даже если он отдает этот список он отдает его вменяемых масштабах нам это байта килобайта не не не отдает он туда десятки мегабайт следующий момент самый спекуляции он ее isla de количество операций тут вариантов миллион и каких операций чего за операции но это вот как шутка что это хирургических операций в секунду вот тут пара графиков опять же графики с реальной базы база примерно пять терабайт там примерно 500 пользователи работает просто графики чтоб что-то показать вот как работает графике это спас gris ну вот давайте вот посмотрим да что у нас тут есть вот есть волшебная циферка вот 40 коп секунду ну там циферка 40 миллионов до возвращено кортежей в секунду ну тут пожгли свернул кто то кто то такое задал кто-то такое использовать или что-то такое запросил что пост был вынужден вернуть 40 миллионов кортежи из базы в секунду один из отдать ну вот сервер 1с на обработку что тут всё тут интересно например на удалении 18 19 тысяч в секунду было удалено кортежей ставка 155000 в секунду кортежи неплохие скорость это не не синтетика синтетикой можно загнать любые цифры все что угодно могу вам нарисовать на не нарисовать прям сделать все там с видео снять но синтетика она смысла не имеет вот рабочая база вот пожалуйста количество операций количество операций тяжелых операций типа дели того но то она и inserto десятки сотни тысяч в секунду кортежей количество получаемых десятки миллионов в секунду следующий график здесь именно хамитов в секунду тоже это все тоже базы он 200000 комментов секунду произошло эта транзакция это не строк этого прежде чем такая операция вот вот вот highload много операций что это такое и апсид будем считать причем здесь платформа ну давайте считать только таксу бадди все вопросы и к железу а что еще считать непонятно плохим годом вы можете положить любую супер платформу например есть откуда-то пришла бизнес задача да откуда чат частая штука вот вам excel на 300 тысяч строк надо загрузить в базу а как можно грузить медленно но надежно по одной строке in certain sure to ensure the insert ну понятно вы там больше 200 строк в секунду не получить тут вы получите скорость 200 операций в секунду но это кто плохо то платформа не платформ этот плов программист который так написал платформе можно сделать спокойно набрать себе массив допустим из десяти тысяч строк и одной транзакции в судишь по вставить 10 тысяч строк и вы добьетесь скорости 50 тысяч строк в секунду потому что вместо того чтобы делать там 200 транзакции до в секунду суды бы делать вас всего 50 транзакций в секунду зато вставляет каждую транзакцию 10 тысяч строк то есть такие вот количество операций очень спекулятивный показатель но highload входит ну вот что-то там такое есть вот едем дальше отказоустойчивость здесь остановлюсь чуть поподробнее это моя любимая часть платформы 1с а потому что она прям совсем взрослая и оно интересное там хоть она будет делать да чуть чуть что такого а вот здесь от начинается магия первое что хочется отметить платформе 1с части отказоустойчивость это крайняя легкость настройки отказоустойчивость отказоустойчивость настраивается за 4 клика мышкой 1 клик давайте вообще откроем консоль администрирования да мы видим что рабочий сервер 1 больше нету рабочего сервер просто грим создать рабочий сервер указываем его параметры там где много вот этих цифрах с нулями непонятно можно все заменить нулями по умолчанию тоже нормальной циферки нажимаем ok все рабочий сервер 2 все ну не забываем галочку там централи сер писать все платформа отказоустойчивого в целом больше делать нечего не надо дальше пошла тонкая настройка то есть тут не нужно образование физика-ядерщика чтобы сделать один с отказоустойчивый тут не нужно читать миллионы страниц инструкций элементарнейшая вещь и платформа за вас все сделает никаких перезагрузок никаких прерываний сервиса у пользователей теперь новое требование функциональности есть такое там такое понятие в 1с каждый сервис требует обеспечить ему какую-то функциональность то есть он поступает вам какой-то запрос сервиса да и он от кластера требует что а где мне разместиться нотку куда мне пойти вот теперь новые запросы требования функциональности будут размещены на одном из двух серверов на каком на том который жив потом то кто настроен по приоритетам где какие сервисы вообще разрешены и так далее это все рулится требования назначение функциональности это вот примерно вот так вот рулится как на больших жизнь дорожных станциях в 1с ки примерно 30 сервисов кластера это такие сервисы как нумератор сервис управляемых блокировок сервер журнала регистрации сервис полнотекстового поиска сервис копии базы данных там и так далее и вот их в районе 30 помимо этого есть клиентское соединение ну то есть куда именно клиента назначен есть server service времени там и так далее каждый из этих сервисов вы можете назначить более чем на один сервер помимо того что вообще куда-то еще и более чем на один сервер одновременно либо есть неделимые сервисы их нельзя назначать более чем на один сервер на временно но их можно раскидать по приоритетам то есть если все сервера живы работы на сервере один если сервер один умер то вот ты конкретно идешь на сервер 2 если вы это не сделаете дата платформа куда-то раскидает эти сервисы но сама по умолчанию не хотите хотите все отдать механики механика тоже справиться хотите этим хоть как-то управлять пожалуйста настраивать как настраивать тоже опять же три клика мышкой вот в нашем с вами кластере который мы до этого создали отказоустойчивый я туда добавил еще 3 сервер мы сейчас возьмем сделаем следующее первый сервер будет чисто центральным сервером что это такое он не будет обслуживать клиентов он держит на себе метаданные все вот эти 30 остальных сервисов там 27 мм и 3 выведем час вот и такой сервер который отвечает за сам кластер как бы грубо говоря мы в нем и пишем клиентское соединение с информационной базой не назначать мы указываем предназначение функциональности что на тебя клиентов не садить не надо ты их не обслуживаешь создаем еще один сервер вот мы с вами и воссоздали мы там мы ставили галочка центральный сервер можем ее не ставить что это значит тогда при выходе первых ну вообще отказоустойчивость 1с определяется количеством центральных серверов у которого то галочка стоит если вот центральных сыров кластере не осталось то ваш кластер все он никого не обслуживает именно центральный сервер является точкой входа для клиентов 1с мы создаем рабочий сервер он наоборот у нас математическая вот та рабочая лошадка все функции сервера 1с да они выполняются на сервере один из я математик и мы как раз создаем такую математическую лошадку мы ему что говорим говорим клиентское назначение в окленд к смене и с информационной базы назначать а все остальное не делай вот ты кроме этого ничем не занимаешься вообще и третьему серверу в кластере создадим ещё набор требований значение функциональности мы на него вынесем service data акселератора это как раз то о чем я говорил это in memory база данных мы на него выйдем сервис копии базы данных это тот механизм который копирует ваши данные в in memory либо в какую-то другую базы данных и еще туда отправим сервис журнала регистрации все действия пользователь будут регистрироваться именно на этом серве и все остальное запретим вот таким образом мы можем горизонтально масштабировать платформу практически бесконечно мы можем создать еще 15 серверов и тоже туда отправить что будет то когда мы например на два сервера ну на более чем один серого назначим сервис журнал регистрации этой еще и с одинаковым приоритетом это не значит что теперь у нас на двух серверах одновременно ведется журнал регистрации нет это значит что мы платформе самой механики сервис даем выбор суши нам без разницы где будет этот сервис ты сам выбери его тут классный момент как он выбирает как механика выбирает вообще в отказоустойчивости в динамической балансировки нагрузки есть очень такая сложная задача как определить деградацию одного из узлов как понять что туда ничего не надо назначать ну вот не надо туда больше идти да кто ее как решает никто и полностью еще не решил ну что сказать мы решили все таки эту налоги стали использовать и из и побежали реализовывать также как это решено в 1с в 1с решено элементарно и пока эффективно пока это работает это называется уровень производительности что делает управляющая служба и роген так называемый каждому рабочему сервису айси каждом рабочему процессу на каждом сервере раз в 2 секунды дает задачу решить математическую задачу меряет время за которую он ей прислал обратно ответ таким образом мериться полностью вот полностью вся клумб лекс на я скорость и каналов связи в сечу ну есть просто такие уникумы которые например сервера по вайфаю подключают в кластер ну зачем то я не знаю ни вот таким образом 1с комплексно меряет производительность и на основании и определяет кому назначать этот сервис ко мне начать то есть куда-куда бежать то есть сначала смотрит на твои указания как админа кластер а когда ты в принципе и разрешил указать если у нее есть неоднозначность если вы и дали право выбора например вот серверов вторых может быть несколько дадут но с большая система там допустимых 40 и заходит новый клиент подключается клиент куда его назначить на какой сервер меня нужно пропить естественно нужно назначить на самый высокопроизводительный сер какой в данном рассказать вот определяется уровень производительность потом там еще куча куча куча параметров мозг не буду вам их загружать там определяется если контекст базы а если там еще клиенты page контекст база это дорого загружать и если есть то загрузим и вот если в производительности сервера отстает от других сыров больше чем на 25 процентов он выключается из выборов причем он выкидывается к считается он слабый на него больше точно ничего не назначается клиенты с него не выбиваются никуда они продолжают там работать ну новые туда не заходят ну вот так решено вопрос деградации производительность в кластере а там много еще таких нюансов моментов как можно настроить можно по памяти не по производительность можно сказать просто назначать туда где больше всего сейчас свободной оперативки пожалуйста он будет так назначать вот как как вы хотите так она и будет ну с этим с этим работать вот тренды последних как бы лет в один исида да и не водились и на холоде а недавно в 1 асе это пока растет но не пока маленькие это инструменты разработчика что вообще есть для коллективной разработки и коллективной разработки это вообще-то хранилище один из хранилище конфигурации 1с но это как сказать блокировщик захватил объект больше никто не имеет права работать это прям полная противоположность гету никаких тебе веток никаких чего это вот такой по блокировщик последовательно вот а народ сильно захотел гид до сих пор грызут этот кактус плачут но грызут в итоге они рожают рождают рядом excel табличку где пишут кто-то захватил стопам релиз инженеру было проще их как-то этот ужас собрать из из 40 веток программистов вот гид пожалуйста хотите доработает есть и dt следующая версия конфигуратора там где работают программисты он сбит он прям вот все ноты это пока еще не вошло прям в массы это пока все таки еще такой hyip в мире 1с а потому что крайне неудобно скорость подключения нового разработчиков к хранилище конфигурации занимает 2 минут скорость подключения к нового разработчика гиту занимает до двух дней потому что конфигурация а громадно скачать сбито 6 гигов xml еще и все разложите вдт подключить это долго вот потом он будет долго там соображать но потом в итоге подключиться ну и сиди куда без них все развивается есть и автотесты есть и авто сборки ванесса д.д. ванесса автомашин тоже опять же кактус этот начали грызть все плачут менеджер плачут где нам взять столько денег на поддержку тестов в актуальности разработчики тир готовые отлично и теперь я могу отдать любой код и мне вообще все пофиг но короче там тестировщики разберутся в общем тут пока идет такая большая драка между между разработчиками консультантами тестировщиками менеджерами нужны автотесты не нужны нужны авто сборки не нужны но в целом это все есть помимо этого из инструментов таких мощных очень инструментов платформе с технологический журнал на слайде самые популярные события технологического журнала которых больше всего нужны чаще всего зачем он нужен понять что на самом деле у вас творится с вашей базой самые полезные события это вот взаимодействия судов второй пункт sdb или скорость выполнения операций на уровне сервера 1с не только на уровне субботы но дальше там есть дбм эскильд дпп сгрыз это на уровне собой сколько какая операция длилась зачем это казалось бы ну мы вроде так и так знаем да не знаем еще раз возвращаемся с самого начала не говорил о пользователе огромная степень свободы агромадное вы не угадаете никогда не в какой отладки не на точки останова это не поймаете с какими параметрами пользователь задал отчет в тех нужно ли это все есть именно потом делаются куча куча разных парсеров есть платформенные есть самописные и на языке 1с есть ни на один с napier ленапе тот кто ток на чем не пишет парсеры технологического журнала для того что потом получать красивые графики чё у тя где просела по пользователям по базам по по операциям по строкам кода прям один и снова по строкам по по запросам субы d также тех журнал умеет вам выдать сразу план освободишь иного запроса то есть в целом потёк журналу можно даже посчитать нагрузку на процессоры прям вывести график как оспа именно один из загрузила не всего не вообще на железе как процессора загружен а сколько на процессоров за грудь загрузила что с памятью и так далее по идее на правильно настроенные тех журналы правильно проанализированы дает полную информацию это черный ящик это черный ящик этого самолета 1 и снова ну и на закуску highload у нас вырос все-таки с выпотом в баф сам первым понадобился холода вот представьте вы написали классное десктопное приложение в котором не найден если написали на чем в котором реализована 100000 бизнес-функций 10000 разных интерфейсов настроена огромная система ролей кому чего можно прав там ну вот вот представьте вас там то не знает он 15 тысяч различных окошечек и так далее сколько вам потребуется времени чтобы это все счастье заработала в браузере web applications гугловской и мобильном телефоне на мобильный прям мобильном приложении скок месяца годы вечность иногда вообще невозможно так вот в 1с это заработает быстрее чем на девушку упадет вода заходит ответственно чает не будем называть его разработчикам разработчик не должен это не заходит администратор нажимает кнопочку опубликовать все после этого вот так выглядевшие 1с на десктопе на десктопе вот так начинает выглядеть в хроме вот так web applications нихрома и вот так мобилки ровно 1 секунда ничего делать не надо полнейший low код ноль затрат и времени и денег и у вас готов альфа релиз понятно что скажет ой кто такие блин меню делает но вот чё за нафиг за свайпами чё у нас тут со списком все ясно теперь берете своего дизайнера интерфейса функция перерисовывать все перекладывать вас по-другому оформляется но ну например вот это сделано просто в мобильной платформе берется мобильная платформа туда публикации ваши базы все ваш директор счастлив у него на каймановых островах все открывается любимый его отчётик в мобильном ничего делать не надо вообще не а еще более начальство что он затратил на это 0 рублей 0 времени вот такая вишенка на торте про платформу 1с надеюсь что для хайло до платформы 1с станет ещё одним инструментом с помощью которого можно будет решать сложные б кантовский бизнес задачи и красиво это все во фрунт энди оформлять спасибо до встречи антон заботой вас и ваши один из антон спасибо большое сейчас несколько вопросиков буквально вот у меня я знаю что внутри один из я не настоящий сварщик понимаешь да есть музыка разработки ланской условно говоря но это не внутри эта сбоку вот какие отношения вот у ван скрипт как вот весьма которой находится сбоку с платформой можно ли писать отдельные сервисы на wan скрипт чтобы работать с платформ с обработкой как вообще это вообще как родилось как родилось изначально платформа развивалась как именно интерфейс на и приложение надо взять мышку потыкать потыкать а потом начали появляться задачи где нужно в консоли поработать да массово создать базы массово там что-то сделать массово подключить обработки внешние и что что то что то 100 так это все по фактов в платформе есть есть в консольные команды все-все но не так удобно как хотелось бы но например не умеет там в цикле чем делать и вот поэтому рядом родился вам скрипт который по факту берет все платформенные возможности работы из консолей и на у себя это все используют да на сама сейчас можно прям на один на один с написать модуль и он бы то вот вам скрипте более того сама платформа 1с и фирмы 1с пошла по этому же пути то есть увидев ван скрипт но поскольку они настоящие сварщики они не может тут не могут использовать уже текущей велосипед они придумали свой называется 1с исполнитель то есть ты теперь не один из разработчика один из повелитель а он один с исполнитель это к их папа весточки прямо да это прям их скриптовый язык ты пишешь как один из них у них было в чем цель чтобы на wan скрипте что-то написать новое тебе нужно из тела модуля ну в 1с популярная вещь fk типа выйди стилю сделан модели вот выйти из тела модулей за к 1с немножко окунуться в си в джаву то есть порог какой-то переступить вот туда в бок до написать функцию и обратно вернуться в 1с была другая история зачем нам их выдергивать отсюда мы им тут дадим кучу функций и пусть они дальше на один из пишут и они родили один из исполнитель то есть теперь у есть два скриптовых языка которые выполняются у платформы tawan скрипт это сбоку это open source разработка и и подержится общества и есть один из исполнитель это разработка самого вендора пожалуйста ну волен выбирать там у многих госкорпорации в них есть безопасники да в том числе и тишины и они например one скрип тебе никогда не разрешают использовать что это такое как ну а вот один с она ответственность несет вот есть один исполнитель год вперед вот такая история а правильно ли я понимаю давать еще один маленький вопросик и потом мы если есть вопросы в залитом и соответственно их зададим правильно я понимаю что в принципе с помощью ван скрип можно писать сторонние ну по сути дела микро сервисы которые будут работать до но это нет никак не имеет смысла это ван скрипт язык управление платформой а не для того чтобы написать что то такое что платформа не умеет для этого у нее есть модули ты прям в подпишешь и в платформу и стоят и ты их компилирует drl q там для linux свое компилирует но если ты ответственный разработчики сразу для двух из tempish вот и трасса и сама платформа уже работает все пожалуйста ванская кеды vans crypt это именно для управления функциями платформы не из платформ и вот он не для расширения и и модульного функционала у нее смотрит и функционал это чуть-чуть другое спасибо так если есть зале вопросы давайте зададим вот пожалуйста молодому человеку здравствуйте сидоренко дмитрий компания рта подскажите пожалуйста по стоимости владения 1с на песке и на пост gris самый популярный вопрос но волна дмитрий да тогда конечно смотрите она какой по сгрыз вы хотите то есть два паскаль со бесплатный и их куча нотку чада форков там и тогда но очки с чем работает один с каким под весом работает 1с 1с работает с подвесом от компании 1с они собирают свои версии подвеса со своими патчами без патчами для 1с 1с под весом не заработает вот это бесплатно просто бесплатно второй момент есть сборка от компании под гаспра бесплатная только для 1с ников и есть третий вид postgres а это под газ enterprise от компании под гаспра он единственный кто входит в ресторан порта замещения и это единственную штуку вы можете поставить на техподдержку к разработчикам postgres а так вот теперь а стоимости бесплатно бесплатно дорого дорого на уровне майкрософта стандарта примерно также также по ядрам лицензируется но вы имеете ну русскоязычную круглосуточную поддержку в москве бы без проблем и более того под вас еще и переделают ну если вы найдете да много ли по 2 ст microsoft sql переделал если были такие запросы с учета хотелось что-то там переделают поэтому стоимость владения коммерческими версиями одинаковы одинаковое но у под газ еще и варят в принципе бесплатность ну а специалисты то есть мы же говорим о том что он-де блажь вот подрисовываю стоят час одинаково сгибаем с успели по факту смотрите 5 лет этим занимаюсь переводим вот мы берем то клиента за ручку грим он такой блин о ну так вот стоит вот здесь такой я на виндоусе нами соски ели его там пропасть linux японского страшно мне перешагнуть надо года берем за ручку и полетели перешагивать вот а нет час разница в цене спецов ну нету просто тогда не будете вы отменить под gris но ничего там отменить зашел настроил он работает если у тебя что-то работает медленно в код смотрите вот 90 процентов проблем и тормозов это в коде 1с они не суббота виновата вот там нужно что-то обменять на больших прям совсем инсталляция мы с компании позже справа там one стоит тут не даст соврать три года там вели большую работу в итоге сейчас например их сборка от 1с она даже автоматически настраивается под твое железо по методичке настройки подвеса для 1с учу делать не надо 3 поставил и работой вот поставил и забудь твоя задача бэкап и настроить это максимально чуть не надо бы сделать все хорошо еще такой вопрос если можно опор перехода то есть вот средний проект сколько это месяц-два год смотри и знай что над и в я бы нормально это не не вижу дмитрий до перевернулся вот база объем и количество пользователей пример ну скажем так по за полтора терабайта количество пользователей то тысячи противный конфигурации это смешно давать руку и пппп наши старые перезалит и перебит губы у папы хорошо у вас план перехода состоит из двух релизов релиз номер один мы сначала переводим вас на управляемые блокировки на автоматически блокировка под газ не работает у ппф там я не может уже перешли я не знаю переводится на управляем блокировки это 12 месяц сам переход на пол и лишь затем это месяц подготовки заключается в чем анализ кода но часто выполняемую там грубо говоря топ 50 операций посмотрим будет ли этот код быстро работать на пастбище вот почему это важно подвеска хорошая сободы не прощает ошибок программистов то что вам прощала мастерские и сиди под газ не прощает поэтому в целом будет добро от того что вы перешли все раза работает быстрее а вот потом в районе опять же один-два месяца и сам переход это одна ночь переход только ты техникам другого они не дано все перешли и погнали рескидда вот мы перешли у вас утром все к 100 стала колом например да ваш риск это дотянуть один рабочий день до следующей ночи то есть это означает что мы с вами плохо подготовились вы нам выдали не те операции которые на самом деле делают пользователь да поэтому тут все от подготовки но средний план это 2-3 минут такой базы это 2-4 месяца и еще потом месяц сверху до напильником надо подпилить там выбрасываем выбегут и операции до которые вот станут медленными я не знаю антон если разрешит то здесь вопрос да еще одна во время дальше время есть спасибо антон подтверждаю своими глазами видел счастлива работающий инсталляцию 1с на подгрести а вот из вашего опыта отличие пух отварным требованиям какие рекомендации у 1с на полюсе чем отличается эти рекомендацию относительных microsoft и однако софта до чуть больше процессоров на процент выше больше ядер лидер памяти меньше на процессоров больше именно я der чуть побольше почему потому что postgres битву без вакуума не пожгли а вакуум эту фоновые операции которые нужны жизненно необходим просто жизненно необходимы базе без нее не кмс поскольку он ну и мастерски ель он не version ник у него нет этих проблем с версиями до appals господа version кого постоянного очищаться очищаться очищаться очищаться очищаться и на это вам нужны ресурсы соответственно то чего вообще не было в массе а тут она появилась ну дайте где-то процентов на 15 больше я der надо больше ядер вот всех кто как бы кто на пороге туда прыжка на побег он вперед в москву через месяц там подробно обсудим ну сейчас о вкладах обсудим не вопрос задавайте но вот это единственная то есть диски такие же памяти столько же даже меньше а вот процессор надо побольше то что есть фона в операции который постоянно будут работать постоянно будут работать и есть и такой вот без а что один с требует высокочастотные дорогие ядра в данном случае с корпусом это справедливо это проведешь любой суп д как я и сказал вся математика вся математика вплоть до агрегации сконцентрировано на сервере 1с чем выше частота тем процессор быстрее решает математику соответственно там прям скачок производительностью происходит если вы перешли с процов в 2 гигагерца на 30 там на 39 у вас там скачки просто вот так да это так это не поменяет потому что вся математика там дайте ресурсов памяти у нас есть такой это вообще такой тренд чует она медленно работает тогда сервер не там ну типа дорого вон у них же этот саб на уроке быстро работает ты видел сколько сервера там стоит ну это же oracle самом да вот почему так почему вот это должно на 4-х драк шевелиться а то должно на серверах за миллионы долларов да там а чего не полна тексты поисках медленно работ в яндексе быстрее это у нас вот инсталляцию 1с за 100 тысяч рублей сравняют с индексом да и сервер под полнотекстовый поиск мне уровня яндекса и у тебя будет мгновенно это такая штука да хорошо все босяк и пожалуйста еще один вопросик от секунд . у нас в онлайне нет вопросов случайно нет да хорошо короткий вопрос вы упомянули что планирует отказываться от толстого клиента анахронизм это прям на уровне платформа будет отказ но смотрите у папы уже не поддерживается объявлена через три года все ну то есть уже объявили что через три года у п п все у т-10 давно нет зуб 25 давно нет bp 20 давно нет но смысле недавно не поддерживается там обновляется только регламентированная отчетность ну грубо говоря лет десять у вас наверно есть за на толстых клиентов но это прям анархизм ой она не анархизм анорексии задрав а анахронизм анахронизм до 100 погнулся а на всех уровнях понимаете то что сейчас и терминалы уже никто не хочет ну терминальный доступ даже сама 1с надолго отбрасывается когда вот новая платформа плохо работает в терминале это слушайте терминал 19 век но уже чину перейдите на управляем можно же не ждать что когда вас прям молотком заставить переходить переписывайте на управляемую форму уже переводите массу хун от на управлял перед взял на управляемый опубликовал по http у тебя безопасность выросло в разы посмотрите мои доклады по взлому сервера 1с средствами 1с на ютюбе есть удивитесь как быстро толстым клиентом можно просто сломать все ок оскал антон вообще-то все данные страны лежат в 1с вот вот там все там ваша зарплата там все все данные всех физлиц как там все там чёрные бухгалтеры вот организации вы знаете давайте поблагодарим докладчика за ответ на вопрос у нас от организации спасибо ференци и презентик и просто выбери какой вопрос тебе понравился на самом деле мне понравился вопрос провод прыжок на пол сгрыз вот про план то что явно явно что до уже рада да ваш вопрос быть что уже небольшой презент бы уже уже больно довольно всем спасибо и сейчас наш докладчик переместиться в экспертную зону это на выход и чуть-чуть за колонну туда направо спасибо большое"
}