{
  "video_id": "Zn5x04Z4XLQ",
  "channel": "HighLoadChannel",
  "title": "Практическая оптимизация MySQL измерять, чтобы ускорять / Петр Зайцев (Percona)",
  "views": 10093,
  "duration": 2646,
  "published": "2017-04-09T09:46:47-07:00",
  "text": "настолько спада сегодня мы с вами поговорим о производительности надеюсь вы все хорошо покушали и вот теперь будет хорошая производительность восприятие информации ну что во-первых хотела сказать пару слов о нас как компания апперкоты мы занимаемся уже много лет успешным помогаем людям успешно использовать мои сколь и также другие технологии этой экосистемы как мария тебе amazon rds и в последний год мы также начали заниматься делать то же самое для для манга деве что наверное делает отличает нашу компанию от многих других то что мы предлагаем наш a soft как стопроцентно полбин source например если мы говорим про бирка на сервер то перка на сервер стопроцентно for open source у нас нету какой быть там enterprise edition которая закрытый или что-нибудь в этом роде но и второе то что мы на самом деле работаем не только с нашим софтом но и всем что доступно важна в нашей экосистеме да то есть некоторые после нашей используют майское некоторые марии де винне которые amazon rds авроры там и так далее и мы помогаем им использовать все что им подходит лучше всего носить о чем будет данная презентация мы посмотрим главным образом о том как подойти правильно к оптимизации mais quel и также посмотрим на некоторые практические подходы к этому делу почему я считаю что это важно но дело в том что когда у вас есть специфическая проблема да вы хотите например искать а какой же мне установить размер кэша mais quel такой вопрос всегда можно ввести в google или в яндекс и получить на него разумный ответ но как получить ответ об общем о схеме анализа и оптимизации морской это на самом деле куда более сложно ну первая вещь о которой нужно знать да что производительность mais quel сама по себе на самом деле неважно да и вот я смотрю там молодой человек сзади улыбается широко как же тогда там важно вроде да о чем же мы говорим если вам неважно но на самом деле хочу сказать вот о чем что на самом деле вашим пользователям вашему боссу важно прежде всего производительность вашего приложения на которая использует моей сколь может использовать другие системы и это то на чем имеет смысл прежде всего фокусироваться потому что если вы смотрите на проблему с точки зрения приложения то вам открываются некоторые другие более сроки подходы может быть mais quel не использовать в некоторых случаях до или использовать его не так также что важно что производительность приложения оно важно всегда до в каких-то случаях я говорю с людьми они не говорят вот вы знаете это вот у нас отчет он у нас на мог производительность неважно да там занимает он нас минуту или две или три это нас все устроит но если их спросить ребята а вот есть этот отчет и вас займет например месяц устроит вас это а не горит нет конечно не устроит вот значит производительность важна да просто в головах некоторых людей брось важная производительность это значит то что мы можем выполнить запрос за миллисекунды да там были может быть секунды и люди часто не думают что даже те процессы которые занимают минуты и часы тоже могут быть критичным по производительности а почему это важно потому что часто когда мы делаем какие-то алгоритм вас данных пишем какие-то запросы их сложность может возвращать не ли не линейно относительно объема данных например а то есть может быть что у нас объем данных вырос всего лишь там в 10 раз а скорость выполнения запроса увеличилась сто раз до создавая совершенно сюрприз и неожиданность что на такое такие тормозом у совершенно не ожидали что еще важно здесь но то что производительности приложения они могут быть не обязательно связаны с mais quel с этим тоже мне есть интересный случай я помню прихожу клиенту смотрю на них в моей сколь сервер и вроде бы у них как бы все нормально да там длинные запросов нет загрузка там сервера меньше чем 10 процентов я их спрошу ребята а почему вы думаете что это все mais quel ну вот сколько мы лет занимаемся всегда все проблемы производительности это всегда с mais quel да поэтому и туда и капаем ну иногда до каких-то случаях и нет что другое важно еще что даже если проблемы с mais quel часто решение могут быть не связаны с с моей ско или но вот например многие из вас знают андрея конуса сфинкс да большая часть его бизнеса особенно первые годы это спасать мой сколь пользователей которые пытались долго и упорно использовать мой сколь full texet но этот слоник не летает ну как с ним не стараться не пытаться его заставить работать низкий лицо в этом случае для таких задач как полнотекстовый поиск использовать sings это куда более разумное решение и таких инструментов на самом деле много сейчас которые позволяют решать разные задачи которые морской решает не очень хорошо то есть ну full фиксировать есть сфинкс elasticache другой другой вариант для каких-то задач и редис или таран подходит куда лучше если мы говорим о в аналитики данных data здесь часто подходит решение куда лучше вроде ходу вы или же вертикали каких то систем которые нормально обрабатываю данные параллельно да потому что mais quel любой запрос выполняет только в один поток на одном сервере что понятно на большие объемы совсем не стелется когда мы говорим о производительности о чем мы думаем прежде всего мы думаем о времени отклика почему потому что если вы посмотрите на вашего достичь нова пользователя то это то о чем он думает прежде всего да то есть если я захожу на веб-сайт или работаю с приложением и это приложение мне отвечает быстро то это всё что меня волнует на этом ваше всякие там клэрис пирса кантом число запросов секунды прочие же фигня будет ли интересует мало правильно же то есть прежде всего мы смотрим на приложение и хотим чтобы она была пользователю а отвечала да с временем отклика до который может быть разной для разных приложений для разных задач то есть нет какой-то такой определенной цифры до что время отклика не знаю за полсекунды это хорошо все что больше больше плохо но если мы говорим о реальных приложениях то часто мы рассматриваем не только время отклика но и другие вещи ну первый вопрос да что мы хотим чтобы это время отклика было стабильно то есть с очень многими случаями я сталкиваюсь что проблема не в том что время отлива плохое всегда в том что у нас иногда что-то происходит системой или внешние которое во ухудшает ну например часто люди жалуются вот у меня все хорошо работает но вот когда я запустил backup у меня все начинается быть плохо да надо с такими вещами следить или же бывает часто связаны с какими-то а вещами вроде всплеска загрузки да то есть веб-сайт может быть его там показали в какой быть известно телевизионной передаче там или кто-нибудь еще его упомянул трафик хлынул система не справляется на следующий вопрос который мы часто сп развиваемся в производительности это масштабируемость многие многие приложения начинаются достаточно маленьких систем маленький объем данных маленький объем поезд ли им нужен у них планы расти нам важно чтобы те алгоритмы те запросы те дизайн и схему которую мы используем они только не только работали сейчас но и работали на приложение будущего и некоторые подходы на которую наиболее оптимальные сегодня на текущие объёмы данных они могут быть хороши но не скейлится ну и третий момент это конечно эффективность которая тоже важно эффективность как с точки зрения использование ресурсов так и с точки зрения людей которые требуются для создания этой архитектуры но вот например интересный вариант с ходу да то есть сейчас ходу позже луч на традиционно когда вот hадeюcь только начинался он стелился на тысячи тысячи узлов но если сравнить эффективность например майское лес ходу фонда то мой сколь на одном узле мог сделать то же самое что hadoop на 10 и понятно что если объем данных достаточно маленький то использовать морской была куда более эффективно но если нам нужно то что на один сервер не влазят и нам дата с точки зрения ходу по мы можем запустить 1000 или 10000 узлов с моей сколь мы так поступить не можем с точки зрения нашей масштабируемость мы уже поговорили про нагрузку про размер данных и еще важно это у нас масштабируемость точки зрения архитектуры давай точки зрения инфраструктуры о чем здесь стоит сказать что в зависимости того в каком вы работаете режиме вас могут быть вам доступно талии на инфраструктуру например в многих областях сетях мы не можем так легко масштабироваться скажем так вверх до там сложно сказать вот а я хочу поставить сервер в котором у нас будет там не знаю 64 курс там терабайт памяти как у них нет там четыре очень и очень быстрый flash карточки чтобы я мог 10 тераватт локального быстро флеша получить до если вы работаете в вашем своем дата-центре и у вас есть выбор полностью и инфраструктуру вы можете получить это вы можете подключить такой сервер и не знаю там все 40 gigabit ethernet или даже не один вот если вы работаете в клауд то у вас могут быть совершенно другие ограничения и с которым приходится а с которым приходится работать следующий момент которому часто сталкиваемся когда мы разрабатываем реальные приложения часто у нас производительность это важная вещь но это не единственные вещи которой приходится заботиться например безопасность безопасность преподавание трафика обычно производительность не улучшает но на скажем так наоборот это те вещи которые могут снижать производительность и с которым придется мириться управляемость другой момент да то есть часто наиболее оптимизированный код да там и структуру его фиг поймёшь потом да то есть во многие случаях мы сталкиваемся что люди не хотят супер оптимизировать производительность если это выходит но делает код слишком сложный ну и есть другие разные вещи с которым приходится считаться но например часто реки нить могут быть потребности аудита связи с которым любыми изменение данных должны протоколировать а что добавляет еще дополнительные функции которые только стоит нам чего-то с точки зрения производительности следующие моменты которые стоит взглянуть это то что производительность эта вещь которую можно улучшать бесконечно нет такую систему которая максимально оптимизирована и в которую затратить много денег и времени нельзя еще улучшить производительность хотя бы на несколько процентов до что это означает это значит что нам нужно всегда знать когда а остановиться иначе ну мы просто будем тратить ресурсы за совершенно совершенно бесполезно что это значит а значит нужно каким-то образом нам определить какая нам требуется эффективность производительной систему и так далее но и когда они достигнут и мы можем остановиться следующий момент переходя уже к mais quel и мы говорили что важно у нас что это время отклика система теперь давайте посмотрим что же mais quel на самом деле вообще делает для своих пользователей а дело-то очень простой домой выполняем запроса на мою скроет там select id&t insert и и он нам через какое-то времени от от книгой откликается да и собственно говоря все что связано с производительностью мои сколь она может быть охарактеризована этим откликом на запросы ну понятно при разных нагрузках в разных объемах данных и так далее но если мы смотрим на эти запросы и смотрим на их времени отклика и фокусируемся на это вправе в плане оптимизации мы получим не а те результаты которые возможно получить значит что когда мы говорим об оптимизации майской ну наверно стоит сказать во первых одна вещь которые не нет на этом слайде это о том что лучший вопрос стоит оптимизировать от этого не делать вообще до очевидно вы наверно от этих много слышали от кого но что интересно с точки зрения моей школе вот если я приду к большинству людей да там мы возьмем приложение включим морской лоб и загрузим страничку вот большинстве случаев я найду несколько запросов которые будут повторяться до значит что их можно легко убежать потом удалить потому что второй запрос сделать бесполезно часто я увижу то что данные запрашиваются из из базы данных и приложением не используются ну почему ну вот он меня там этот класс инициализируется он там все поднимает из базы данных на всякий случай а на самом деле вот это как раз мы не используем очень часто в приложениях делается куча куча мусора на которая никому не нужна ну что когда мы оптимизируем ся на оптимизации над чем мы часто работаем ну первый очень простой момент а то что мы хотим чтобы наши запрос выполнялись быстрее другой момент еще можно часто что мы хотим чтобы они использовали меньше ресурсов но например у меньше памяти да там или же с помощью компрессия можем оптимизировать систему чтобы она использовала меньше места на диске а что может быть важно ну или же масштабирую лучше масштабируется до точки зрения железо с точки зрения размера данных и так далее если мы говорим о в оптимизации и подходы к общему часто мы смотрим на две вещи немножко разные первое это оптимизация скажем так транзакции ну например у вас есть приложение этот код и говорит вот вы знаете у нас есть такая функция поиска или же там не знаю архив которая тормозит работает медленнее чем нам хотелось бы мы можем посмотреть конкретно эту функцию кена запросы делают на майскую льда там и их оптимизировать другой вариант и таскать вода давайте мы приложение с оптимизируем в общем тогда можем просто взять посмотреть на все запросы которые приходят на майскую эль посмотреть какие из них наиболее медины и которые используют большего ресурсов и когда мы их оптимизируем то очевидно что у нас система будет работать быстрее в общем да но при этом если мы используем второй подход у нас нет скажем так гарантии насколько наш вот это вот тормозной процесс будет оптимизирован потому что может быть он-то и создает много наград много нагрузки может это какая-нибудь там аналитику которой большой босс смотрит раз в день и она составляет ноль ноль ноль один процент нагрузки но тем не менее она весьма важно ну и понятно что с точки зрения общей оптимизации мы смотрим и запросам и приоритизирует и дальше с ними оптимизм вот с точки зрения запросов как я уже говорил про это что первый вопрос точки зрения запросов и то можем ли мы этих вопросов вообще избегать избежать да потому что часто какие-то запросы бесполезны второй вопрос можем ли мы эти запросы изменить чтобы они делали меньше работы что значит меньше работы но это значит чтобы они сканировали меньше строчек читали меньше данные с диска и так далее все это мы называем простым словом работа по какой нас может пример но вот у нас есть запроса как запрос который по найти без индекса он делает очень много работы индекс мы добавили запрос делают меньше работы когда-то это действительно такое настолько просто что добавить индекса там или изменить настройки моей сколь в других случаях этом что они более сложная например у нас может быть плохая схема данных который не позволяет нам добавить индекс чтобы запрос выполнялся быстро тогда нам приходится изменять схему данных они только индексы запросов иногда нам придется применить какие-то другие подходы в мир как кэширование да мы можем кэшировать данные мы можем сделать какой нибудь там как таскать самолёта и был да там таблицу в котором при генерировали все наши результаты вместо того чтобы лопатить данные с большим и толстым грубой там много-много раз каждую секунду следующий вопрос по оптимизации что важно первое не стоит смотреть только на средние время выполнения запросов да потому что среднее время выполнения любого запроса но редко проблемы прежде всего проблема начинается с какими-то может быть таким это не хочу сказать экстремальными но близкие к тому в условия но например я помню ребята из flicker такой но относительно старый но крупный хостинга картинок рассказывай мне что у них проблем возникли когда вот какой то товарищ закрыл залил им миллион картины да через ebay и понятно то что работало для нормальных поиски нормально да там 1100 картинок в категории с миллионом картинок уже не работала на с точки зрения среднего запроса среднего после это бы не показалось следующий момент то что мы хотим тоже смотреть на тренды со временем потому что некоторые проблемы у них возникают циклично может это связано там с месячным биллинга можете это связано там то что вы 1 неделю удаляете старые данные да там и это может показывать проблемы ну и опять и когда мы смотрим запросы следует думать о о будущем особенно в девелопмент системах я очень часто сталкиваюсь с тем что девелоперы разработчики тестируют тестируют запросы на каких-то маленьких базах данных в своей конфигурации для тестов и не очень хорошо читают explain моей школе и в этом случае когда их не запросы выкладываться на продакшен да там или не начинают или чуть позже когда данные начинает редко расти все это ломается нужна сама учится читать explain и думать а как же эти запросы будут работать в будущем следующий момент понятно что мы хотим использовать меньше запросов чем меньше даже если мы анализируем то же самое число строчек то чем меньше запросов и можем использовать тем у нас лучше потому что с каждым запросом у нас добавляется время отклика сети у нас добавляется дополнительный overhead там на парсинг запросов на проверку привилегий и и прочее мы тоже хотим читать и модифицировать как меньше можно данных да то есть если мы можем выполнить запрос лимит 10 например то это куда лучше чем считать все данные просто прочитать несколько первых строчек в майскую льда там остальное в приложении стальной выкинуть то же самое касается что лучше считывать только те столбцы в базы данных data колонки которые приложения реально используют потому что майской в этих случаях может из использовать другие дополнительные которые оптимизации и выполнять запросы более эффективно дальше чем меньше можем обрабатывать данных ну во время выполнения запросов чем лучше опять-таки что тяжелые запросы которые делать какие нибудь сложной агрегации каждый раз для каждого пользователя это не очень хорошо для большой агрегации лучше посмотреть как мы можем это создать какие-то как таблицы с кэшем и так далее вот на что можно смотреть да какие у нас есть интересные метрики первое это сколько мы можем посмотреть сколько данных мой скальп проанализировал относительно того сколько он их послал клиенту эту метрику легко получить из mais quel есть для каждой запросы например в слог варлок данные ров сцен и рос экзамен отношение между этими как раз таки и то на что мы хотим смотреть есть у нас отношение где-нибудь там от одного до десяти приложения в целом обычно оптимизирована хорошо да там если же у нас мы на каждую строчку которому посылаем из майское ли обрабатываем 100 а то и 1000 то скорее всего у нас есть много возможности для оптимизации следующий момент а это посмотреть сколько у нас данных реально была послана с моей сколь относительно сколько было использовано приложением здесь к сожалению метрики которую дает мой сколь нет потому что мой сколь данные просто отдал его даже не знает как вы их используете но часто на это вы можете посмотреть просто сами по крайней мере для наиболее тяжелых запросов которые возвращают очень много данных да то есть если вы считали миллион строк на приложения до следует хорошо подумать о все ли вы их там и используйте да как то наверное вы их может не все ну вряд ли на одной странице показывается миллион элементов может они как-то там агрегируется и в этом случае частоты работы лучше делать на базе данных следующий момент а как мы уже говорили не всегда удается запросы оптимизировать просто добавив index часто нам приходится менять схему более кардинально поэтому часто имеет смысл смотреть на оптимизацию схема и оптимизацию запросов вместе правильно же и здесь есть две вещи одно это такие скажем небольшие оптимизации схемы добавить яндекс может изменить тип колонки там и лишил что-нибудь там изменить стороны engine майской либо другую которая изменение к уже схема сильная да там и всей архитектуры которые тоже иногда бывает нужно но она обычно требуется тщательно более серьёзного планирования да то есть если вы делаете полный и инженеры ваши схемы то это занимает существенно время так с точки зрения схемы баз данных нужно знать как работает индексу вот я дал там линк на мою презентацию по этому поводу вот следующий момент когда вы дизайне ти схема думаете о том какие запросы вас будут выполняться очень часто я смотрю что люди делают используется и а да там тулузу которая им делает такую как бы совершенно абстрактную и академический правильную структуру базы данных которых сожалений не работают с этого можно начинать но этим редко удается закончить надо смотреть как на этом работают ваши запросы и уже дальше смотреть ну и разные техники вы можете посмотреть квартире не jardin нормализация нормализация данных и так далее эти вещи которые нужно вести google и про них прочитать другие вещи которых у нас тоже имеет важное значение конечно инфраструктур операционная система май сколь версия мая сколь конфигурация вот и мы поговорим в этом чуть чуть более подробно если у нас есть система которую нужно оптимизировать да как к этому подходим и когда нас часто зовут с точки зрения консалтинга ну во первых есть эти вещи простые которые можно изменить очень быстрый которые часто достаточно да там изменить настройки mais quel можете операционной системы давать какие-то индексы может быть там включить какой-нибудь кэширование вот и это те вещи которые часто можно сделать буквально за за часы до встречи вопрос который более сложная да там весь и нам нужно купить новое железо сенсор или там сделать какие-нибудь камере конфигурацию сети изменить операционная система на более новую дать им или проапгрейдить mais quel это более сложная вещь и до которые занимают дни ну и наконец бывают случаи которая когда так все плохо когда даже этого не хватает до тогда нам нужно перейти уже к тяжелой артиллерии на может приходится переделать схему базы данных комп совершенно или же нам приходится изменить архитектуру приложения сказать что вы знаете мы теперь делаем sharding для этому вообще решаемо искони использовать и так далее и тому подобное ну если вы посмотрите на многие приложения которые скажем так росли они часто вот проходят через такие шаги про инфраструктуру мы уже говорили здесь нужно понимать эти у вас есть опции можете ли вы скейлится с одним узлом какое-то время да там или же вам нужно переходить на архитектуру которая поможет работать много маленьких машинках как например часто во властных структурах что у нас важно с точки зрения железа с точки зрения железо нам важны вот эти вот компоненты с точки зрения процессора что ну понятно да что сейчас серверные процессоры это intel с моей сколь мы а обычный чаще всего видим используются с этими системы с двумя сокетами для процессоров что ещё важно то что поскольку mais quel может использовать для одного запроса только одно ядро процессора то часто для нас быстрые процессоры более важны чем процессоры в которых много много на медленных core да вот часто это сбывается но и также смотрите кроме этого такую штука turbo boost до почему потому что современные процессоры если них используется не все кора только одна или две до то они часто могут работать значительно более высокой тактовой частоте и часто для нас важно не номинальная частота процессора а до скольки они будут делать turbo boost потому что если мы будем выполнять тяжелые запросы но которые используют только одну корт то что будет ограничивать производительности память когда мы используем память базы данных мы ее используем для кэша поэтому если данных у вас много то нам хочется чтобы памяти тоже было много здесь о чем имеет смысл думать о том какая порция хаос отношений между базами данных между размером база данных и памяти взяли она у нас лазит или же какая-то ее часть вот имеет смысл также смотреть на на то какая часть активно используют мы их данных у вас влазит память понятно что часто что у нас есть большая база данных но но и и серьёзная часть используется очень редко ее держать в памяти в память и дорого да поэтому когда я смотрю на то насколько хорошо базы данных влазит в память я не смотрю реально на отношение базы данных размера базы данных памяти но скорее на то сколько у нас операции ввода-вывода происходит особенно чтение да потому что если у нас вся активно используемая база данных в памяти то операции чтения которых диска по системе нас практически не будет следующий интере вот для вас интересно достаточно график здесь мы смотрели поведение определенного синтетического бенчмарка с разными а объема памяти и разной конфигурации системы накопитель да то есть вот это вот у нас синяя это рейд самый медленный красное the same быстро фьюжена и что и мы видим интересно да что если база данных плохо влазит в память то быстро я сторож у нас дает очень большое преимущество да то есть увидим что вот разница между там ногах у в пять раз дана внизу но когда у нас данные сланец в памяти лучше лучше то у нас разница между быстрым и медленным сторожем она сокращается какой-то вывод из этого вывод если у нас есть шанс догнать наш вор пинцет память то лучше инвестировать память до иметь может быть ну какой-нибудь флаш понятное дело до но может быть не самым выстроить но есть ли у вас объема данных уже такой что в памяти все равно загонять не удается да то в этом случае часто может имеет смысл имеет несколько меньше памяти но иметь самый быстрый но то есть более быстрый сторож вот что у нас стоит сказать про осторожно понятно что сейчас есть много разных решений наверное скажу в целях экономии времени только одну важную вещь что сейчас если вы используете mais quel или другие войн за как бы там alti база данных то имеет смысл смысл использовать флаг да то есть про диски которые крутятся забыли все с точки зрения сети с точки зрения сети чаще всего mais quel си производительность мой сколь севера упирается во время отклика они в пропускную способность на то что особенно учитывая что люди часто делают достаточно много запросов мой сколь на каждую скажем так страницу до часто бывают сотни запросу да там а в некоторых случаях я даже видел и там где десятки тысяч из этого выходит вывод какой то что мы хотим чтобы у нас было как можно лучше минимальное время отклика значит мы хотим чтобы у нас mais quel сервера и апликэйшен сервер сервера говорили как можно больше напрямую да там чем меньше как на сказать там шагов до там сити на этого хопс тем лучше размещать например applications эры в одном месте базу данных с другом в разных городах на разных континентах а очень плохая плохая идея даже если вам говорят а вот у нас лежит там между ними свое оптоволокно там на на какие-то гигабит на потому что скорость света она конечно и когда мы говорим о миллисекундах и долю миллисекунды фана уже начинает влиять правильный выбор операционной системы мои школьные более успешно используется на на linux да кто-нибудь майского ничего не другом используют но не стесняйтесь начнем но free везде еда тоже есть это такого еще что-нибудь есть кто-нибудь но не стесняйтесь windows server вот молодец не стесняется человек не от хорошей жизни же правда ну вот да на windows тоже бывает но большинство крупных проектах используют моей сколь все все-таки на на linux что имеет смысл в данном случае это использовать серверный вариант этой операционной системы до в которой и оптимизирован для этого которую не будет там меняться каждый там три месяца которую нужно постоянно апгрейдить и достаточно новый особенно если вы используете новое железо потому что то что касается флаш то что касается поддержки там функциональности новых процессоров это все поддерживаются в более новых кадрах новую дистрибутивов куда лучше чем в старых значит что интересно с точки зрения linux на самом деле настройки его дефолтные для многих и многих mais quel нагрузок они достаточно адекватны понятно что если мы пойдем какие-то там google там фейсбук они им важны последние вот 35 процентов производительности они инвестируют нового тюнинг ядра тоже или там часто даже компилирует вас специальные или даже по чат но для большинства людей это не настолько важно файловая система наиболее часто мы видим используется или либо их sti for либо xfs на разных нагрузках либо 1 либо другая может показывать лучшую производительность но вот эти две файловой системы ну и я уже смотрю многие фотографируют ленке тоже про это говорил более более подробно следующий момент версия mais quel то что нужно знать что новые версии в мае сколь обычно улучшают производительность до есть исключения если мы используем скажем так один поток тока до клиентской используем очень простые запросы то на самом деле поскольку май сколь становится более толстым делать пытается делать больше оптимизации запросов то производительность на таких запросов может не существенно но быть медленнее в новых версиях майской вот на прошлой неделе вышел mais quel 57 что очень классно там много очень улучшений как связаны с optimizer am так и общее масштабируемости то есть если вам нужно и ну хотите максимально фриз mais quel на него имеет смысл рассмотреть вот но а когда вы будете обратиться вы можете подождать перка на сервер который тоже 57 который тоже выйдет через некоторое число в месяцев вот май сколь конфигурация с точки зрения моей сколь конфигурации вот здесь что важно 100 дефолты в майской конфигурации плохие да то есть с дефолта me для майской работать нельзя но при этом тоже не смотрите него скрыть елки-палки здесь есть 400 разных настроек до вам скорее всего нужно будет исправить не знаю 510 для того что может быть там 20 для того чтобы получить адекватную производительность опять-таки можем посмотреть мои слайды или вебинар с более детальным по этому поводу если вам лень туда смотреть у можно вот взять вот эти вот настройки ввести в гугл вот и вы легко найдете ответы на то что их нужно поставить для вашей конфигурации так цвета мент вы меня кончилась на ты понимаешь что на самом деле мне еще есть пять минут вот вопросу не все но потом зададите с точки зрения процесса точки зрения процесса есть 2 важных вещей во-первых нужно почти разработчиков никого не видел вот потому что разработчики часто делают плохие запросы которые когда мы потом выкладываем код на продакшн они создают создают проблемы то есть хорошо если у нас есть процесс когда мы кем-то кто понимает базы данных отслеживаем новые запросы новые изменения схемы которые предлагают разработчики этого очень важная часть проблем процесса второй вопрос это в том что я никогда не видел чтобы такой процесс превратил все проблемы ну и потому что разработчики хотя часто причина проблемы с базами данных они всегда иногда два что-нибудь другое например база данных сама что-нибудь виновата поэтому это важно что вы с точки зрения на уже на операционном уровне доу был какой-то процесс чтобы ловить плохие запросы отслеживать изменения версии can mais quel и в операционной системы конфигурации также проверять всякие изменения железа насколько оно хорошо работает очень очень часто случается что например мы пошли купили железо которое лучше дороже поставили его а на самом деле она работает медленнее потому что мы там что-то не настроили травер плохой или там linux то это еще не поддерживает вот доверяй но проверяй как говорится следующий момент что интересно что за всеми этими настройками да у нас что чтоб мы не изменили железо операционную систему настройки мой вскоре это всегда каким-то образом у нас влияет на производительность запросов поэтому если у вас есть какой-то мониторинг что вы смотрите на производительность ваших запросов относительно времени то вы всегда легко поймаете если что-то вдруг стало плохо вот значит его тузы которые можно для этого использовать вот я покажу просто один вариант что вот мы сделали недавно эта интеграция с моей сколько фон схема с и граффити здесь видите можно посмотреть суммарное время отклика для любого для запросов морской что очень полезно потому что если начинаются на что-то быть плохо да мы увидим что у этого запроса съехал например план теперь у нас занимает резко в 10 раз больше суммарное время выполнения так ну ладно на это у меня уже нет времени мне говорить более детально вот но значит это о том что у нас что у нас важно смотрите за за за скоро производительности приложений и вот несколько финтов скажем так как можно оптимизировать вот ну что еще до как я уже говорил на прошлой сессии если вам еще интересно послушать на май сколь я буду говорить о разных опциях для майской любви к цена mytab если особенно вы из москвы возможно вы сможете прийти в пятницу и мы с вами еще побеседуем вот если же вы специалист по май сколько нам хотелось бы по вере видеть больше предложений о докладов из россии на нашей годовой конференции вот который проходит в апреле 2016 года в санта-кларе ну что спасибо господа вот"
}