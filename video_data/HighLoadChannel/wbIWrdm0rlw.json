{
  "video_id": "wbIWrdm0rlw",
  "channel": "HighLoadChannel",
  "title": "Как ускорить MySQL Handler Socket в 9 раз / Александр Яковлев (Мамба)",
  "views": 453,
  "duration": 2344,
  "published": "2018-01-16T13:11:21-08:00",
  "text": "о чем сегодня наш доклад сегодня наш доклад в первую очередь про тарантулу вот предыдущий спикер тоже много про тарантул говорила я продолжу доклад у меня о том как сделано репликации смазка эльф тарантул и это уже не не новое решение сейчас уже есть рипли кации 40 love тарантул есть репликация между я видел статью между мы съели и подбросом но вот это репликация в свое время была сделана первая из двух разных продуктов это было очень давно единственном и ее очень сильно доработали и внедрили вот основные причины почему я вам об этом рассказываю более 5 5 5 лет назад в нашей компании мы внедрили мы из кировска и решение хандлер socket позволяющий делать но эскель запросы в mais quel тем самым выбирался гигантский your head путем того что мы спели не тратил ресурсы капу на того чтобы и сколь превратить во внутренний язык и этого работала действительно очень быстро эта технология была внедрена там не знаю лет шесть назад мы ее используем более пяти лет и к сожалению вот версии мы искали 56 это была последняя версия когда которая поддерживает хэндлер socket 57 уже перестала поддерживать in когда мы читали пресс-релиз то 57 мы это увидели это к сожалению стал от гигантским разочарованием потому что мы это используем много где плюс мы очень хотели перейти на 5-7 потому что 57 уже наконец-то внедрили гис что уже есть в возрасте допустим давно это было нам нужно для мобильных приложений в 5-7 также внедрен был в мы с келли merge яндекс тоже в подгрести был уже давно и в этот момент стало вопрос что же делать нужен 5-7 но очень но он в 56 используем но мы используем много где 56 с канлер соки нам вроде как бы нужны это это можно было держать две версии 5-6 для хендлер сокета и 5-7 для всего остального кстати говоря многие так делают но мы решили что пусть будет лучше 1 перед одна версия мы с келли который мы будем использовать и она будет 57 соответственно что какие решения можно было предложить на можно было вообще избавиться от хендлер socket путем доставления машин то есть вот этот мы overheat то что как эндрюс socket снимает мы его возвращаем себе доставляем машины и вроде у нас и от него избавляемся путем доставления железа но этот решение прям сразу мы решили что мы хотим что-то новое когда мы стали думать об этом и я поговорил с ребятами из mail.ru и они мне сказали что у них есть репликатор они его так называют мое вот я его также буду дальше называть это разработка который позволяет из миски лет данные реплицировать в тарантул тарантул их изобретение вот и вот этот момент мы взяли на заметку и решили сначала попробуйте ну вообще что такое тарантул мы никогда не использовали в своей компании тарантул хотя многие уже его используют сначала мы взяли просто тарантулы попробовали его использовать как ммк что есть его в нем хранить его использовать какие были у старридж просто и посмотреть вот по сравнению с малышом насколько тарантул или быстрее или медленнее просто вот стало интересно и вот в этот момент мы получили что тарантул в два раза быстрее memcache а то есть место 06 миллисекунды тарантул на всем тоже самым на том же самом железе давал 03 мире секунды это было прям удивление мы решили что да да тарантул действительно заслуживает нашего внимания и мы хотим его продолжать из но мы хотим его начать использовать и третий пункт вот в этот момент мы решили что мы хотим сохранить текущую структуру то есть у нас есть несколько master of мы скверен их и рядом с ним славы и вот мы хотим только это оставит то есть к текущей славы с хандлер сокетом заменить на что-то другое и вот в тот момент тарантул виделся этим другим а таким образом мы взяли исходные коды единицы аникина из компании mail.ru и стали их исследовать и изменять потому что их репликатор достаточно старый он работает с мой с килем 51 и он работал на тот момент с тарантулом 15 это нас конечно же не устраивала нам нужно было его адаптировать под работу под работу смысле лим 5-7 и под современный тарантул 17 тарантул репликатор это небольшое небольшая кодовая база который работает на основании open source библиотеки lips леев lips лев open source там библиотека который умеет читать события которые происходят на мой стиль of scam мастер сервере и эти события обрабатывать тем самым этой библиотекой lips их читает белок в мы съели мастера и мы и репликатор его использует основное ограничение репликатора то что можно использовать только ромба из трипле коце june mix не стоит man работать не будет дальше огранить но это не ограничение просто его свойства репликатор это не часть не miss kelly не тарантул это некая просто сторонники летом и можно назвать демоном скриптом как угодно который просто забирает и от читает берлоге московского мастера и эти данные перекладывает в тарантул в принципе ними искренне тарантул а репликаторы даже ничего не знают еще есть ограничение что если вам нужно допустим 10 репликации то вам надо запустить 10 репликаторов один репликатор работает один репликатор обслуживает только один slave и последнее ограничение репликаторы это то что он будет только работать либо с перк он of sky либо 40 loves к сборкой мы с келли с марией db репликатор не будет работать особенности репликатора у него есть самая главная фишка которая вот действительно очень нравится этот так называемый холодный старт то есть если вам надо сделать репликацию какого-то количество таблиц баз данных мэйс в тарантул вам достаточно просто установить тарантул нас написать простенький конфиг что вы хотите реплицировать откуда это фактически айпи адрес юзер логин в москве и куда и указать тоже и пи адрес в этот момент просто его запустить все данные будут автоматически в момент старта репликатор поймет что в tarantul и ничего нету сначала все с бы капиtah току потом начнет процесс до гонки нового по берлогу то есть вам не надо тарантул заранее готовить и вторая особенность репликатора это то что в в рипли катаре можно контролировать механизм вообще репликации работает или нет то есть вот есть некий аналог рослых статус мои скверного то есть вы можете посмотреть вообще сейчас вы какой белок читаете какая его позиции читается тем самым хотя бы можно у создать некий механизм контроля репликации то есть работает она или нет когда все мы это придумывали была идея может быть вообще нафиг все это то есть создать что ну вот то что все используют тарантул использовать как с то есть мы забираем мы делаем запрос мы с келли каширу имаго вов тарантулы в следующий раз ходим в кэш но в тот момент это виделось очень плохим плохим решением потому что очень много нужны изменения делать в коде потому что в каждой в каждой процедуре кода в каждом методе нужно заботиться об инвалида ция этого каша я повторю хотелось сохранить максимальную архетипу архитектуру близкое к текущей но вот джефф этвуд не просто так сказал что одна из больших проблем программирования это инвалида ция мы взяли вот этого мы взяли запустили репликатор стали на него давать нагрузку сняли нагрузку смазки либо канлер сокетом и в этот момент стали думать на стало интересным насколько же все это очень но быстрее или наоборот не быстрее мы все ухудшили только а вот не есть график время ответа он разбит по тут всего буквально четыре дня наблюдений время ответа то есть вот очень хорошо видно что в тарантул время ответа тарантула не выходит за даже заново то есть максимальное во время ответа который было это 035 миллисекунды в прайм-тайм в то же самое время время ответа москве на ум и сквере через конгресс соки достигала там 11 миллисекунды в прайм-тайм то есть существенно в разы 3-4 раза тарантулу из тарантул получается данная быстрее на самом деле конечно ответ почему очень простой тарантула это абсолютно in memories баз данных где все да все данные держатся у вас в оперативной памяти в нашем случае в мы спели конечно же это было не так то есть конечно стояли очень быстрый enterprise на ssd но объем оперативной памяти на серверах был недостаточен для того чтобы все данные кашира вались buffer pool side и соответственно был достаточно большое о которой а вот ведь вечером когда данных горячая аудитория аудитория сайта была высока не все данные вмещались буфер кусай за и очень сильно работал ssd это очень просто но вот в этом и весь кроется ответ что в тарантул абсолютно in-memory баз данных вот такая картинка но кто-то скажет может быть это очень сложный путь мы придумали мы сделали какой-то репликатор из одного из одной базы данных в другую из москве или в но искать хотя тарантул уже буквально месяц назад объявил что они поддерживают эскель то есть их прямо нельзя уже можно точно назвать но из келим но в тот момент никакого искали не было то есть мы сделали некие репликацию и из мы искали в но из кирк тут скажет зачем но хочется чтобы вас данные держались в памяти чтоб так быстро было как в тарантул на используйте хип таблицы или используйте tmp fs перенесите туда и надо башни и файлы из землянки поставьте и все будет работать замечательно но это на самом деле не так и сейчас я расскажу главную особенность репликатора нашего вот представьте допустим что ваши базы данные содержатся 100 таблицы и на славе вам нужно всего 7 таблиц из этих сотни только 7 таблиц используются в запросы которые которые надо реплицировать таким но в моей сфере ты не проблемы пожалуйста реплицирует и 77 таблицы 100 но а вот следующее это прямо наш живой прямой пример что вот эти 7 таблиц это порядка 200 полей ну там очень просто но это реальные 200 поли то есть рост возраст вес и так далее все пользователи из этих 200 полей на словах тоже не нужно все нужно всего лишь двадцать одно поле из 200 мой стиль не позволяет реплицировать на уровне полей только минимальная сущность это таблица репликатор позволяет то есть мы репрессирован из 7 таблиц строго двадцать одно поле тем самым мы экономим очень хорошо оперативную память если реплицировать все 7 таблиц со всеми семью полями то эти данные занимают в память порядка 80 гигабайт если реплицировать только вот это двадцать одно поле то это уже будет двадцать два гигабайта и в уже можете под славы используют послабее машина там даже 32 гигов и все у вас влезет то есть вот в этот момент мы действительно сохранили немножко денежек потому что не стали ним не стали покупать новые там 128 гиговая машина взяли старый которая максимально поддерживает 32 гигабайта на борту то есть мы не тратим когда мы используем репликатор мы не тратим не расходуем просто так память которую но не тратим на то что нам не нужны мои replied мы расходуем память в тарантулы именно на те данные которые используем за счет этого у нас в тарантул один instance тарантулов памяти держит всего лишь двадцать один гигабайт вместо 80 если бы мы реплицировали вот как мы с келли вот эти 7 таблиц теперь по результатам но вот сейчас будет результат уже больше пар тарантул вот насколько он не нам очень сильно понравился и насколько я вам всем рекомендую его использовать и того вместо 10 серверов смысл хендлер сокетом тарантулов стал только один хорошие постоянное время ответа и это я вот имел ввиду то что на графике видно что даже в прайм-тайм время ответа подскакивает настолько незначительно что его даже практически не видно ресурсам и экономию когда мы реплицирует только то что хотим и нам нередко лицевым то что нам не надо тарантул действительно очень быстрый очень хороший ещё мне понравилось как можно либо сделать recovery после сбоя машина вот несколько раз была ситуация когда нам и сфере нам сервере с большой нагрузке а машина падала в керну панику падала на по пути по причине сбои контроллера мы и ребута ли она запускалась тут на начинался процесс а надо бы recovery который потом падал в кору и ты думаешь боже мы чё ж тут делать то есть процессе последних транзакций контроллер на чего начинал вы надо бы файлы просто записывать какую-то ерунду здесь все очень просто и настолько тривиально тарантул на каждую транзакцию пишет так называемые вал файл и даже если у вас вал файл записалась какая то ну ерунда который не неправильно с точки зрения тарантул набейте этот последнего iphone вал файл убейте из него одну строчку и все у вас все запустится то есть вот настолько они сделали понятный и несложный механизм вот этого recovery то есть вы да все что хотите чтобы у вас не произошло вот базу вы не потеряете если правила и если вы делаете снапшоты если вы пишете вал файлы дальше в tarantul и очень классной комьюнити то есть вот допустим вот эта ситуация очень простая когда вы находите какой-то баг идете куда-то в багтрекер ставите его и через год заходите он еще открытый в таранд или настолько прикольные комьюнити достаточно получить инвайт в telegram овский чат от дениса не кино и все его можете задавать вопросы в этом чате вплоть до константину осипова спросить его о чем-то и вы будете уверены что вам во-первых ответит а во вторых если это действительно баку воспроизводимые разработчиков тарантула в этот бак решат там в час и дни то есть это не какие то года также мы когда я подготовился к этому докладу о николай самохвалов использоваться спросил следующие а не получится ли с рипли котором он тоже самое что hustler сокетом то есть типа через 5 лет его просто похоронят а забудут о нем нет не получится мы его этот репликатор внедрили уже в своей архитектуре куда только можно мы его сами используем более того вот в этом чатике в тарантулов скам можно по рипли катару задавать вопросы эти вопросы я сам перехватываю помогаю уже порядка десяти человек мы мы помогли com кто-то давал доступ на сервер а мы заходили помогали кому-то просто советом один человек молодец мы благодаря нему поправили 3 баги который у нас не воспроизводились вот он пишет мне буквально каждую неделю каждой недели пишет о чем-то новом что еще про тарантул тарантул действительно очень простой то есть вот вот эта ситуация выходит новый мыске ли вы его ставите запускаете дальше он у вас не запускается вы идете в лоб в лоб файл смотреть вы видите что какие-то опции стали депре кейт от вы ползете в свой maintained на 50 строчек и начинайте колдовать с ним здесь этого конечно же ничего нету здесь восемь строчек и все и тарантул работает а следующее что было обид но что было открытием репликация в тарантулы см с келли работала у нас быстрее то есть данные по репликации приходили в тарантул чем в москве хотя так называемые отставание в маске лисы can be high end мастер на my square серверах всегда ноль как мы это заметили то есть момент того когда мы создали репликацию первый вопрос стала на обе вообще консистентную наши репликации или нет но что то она реплицирует счетчик берлога идет а вот реально там все туда доходит или нет и был написан очень простой по хавский скрипт который просто брал самую горячую аудиторию пользователей за месяц выгружала и и сравнивала ее на мастере и на славим из кельна и на таран туле и вот в какой-то момент мы ловили нескольких пользователей которые буквально зарегистрировались меньше секунды назад еще на славе их нету она tarantul и они уже есть скорее всего но единственное объяснение тому что конечно же все данные в tarantul и держатся в памяти еще что хотелось бы сказать про тарантул это как быстро делается снапшоты как делается быстро и варистор в отличие от золотого мы искали то есть насчет о 50 баз данных делается порядка 12 минут укладывается в 13 гиговый файл в нашем случае рестораны делается примерно 15 минут то есть ничего подобного в моей сфере и представить невозможно теперь из разряда туду чтобы мы хотели увидеть в tarantul и сейчас тоже про тарантул это первое что вот у него у них огромный минус и это к сожалению них в ту ду висит уже года три то что ключи у них in сенситив то есть пользователь с большой с маленькой буквы для тарантул воспринимается как разные вот в этот момент мы за этот баг не знает и не баг это их недоделка которая не обещает все-таки доделать мы запустили ее и начали ловить жалобы что человек не может авторизоваться на сайте авторизация идется слоев и когда мы их начали сравнивать мы начали понимать что это было очень просто видно что у человека просто в базе он с маленькой буквы заведен и вологин там не знаю иванов а он в свою фамилию привык писать с большой вот с точки зрения мы спели это одно и то же с точки зрения тарантула нет это надо знать и дальше все таки очень хотелось был тарантул когда-нибудь увидеть версию которая работает на мульте тредах дальше-то репликатор о котором я рассказываю распространяется по лицензии bsd можно его зайти использовать там постоянно поддерживается tracker можно писать в чат тарантулов ский все ваши проблемы будут устранены мы даже мы даже будем рады если будет больше людей вы использовать и больше багов будет ставить потому что мы в первую очередь сами используем репликатор которые создали можно мне также написать я всегда постараюсь помочь в общем-то все то есть тут на самом деле не так чтобы много о чем-то рассказывать единственное тут главное я еще раз скажу что но в данном случае мы выиграли очень много серверов который мы просто сняли отправили на склад дальше что за счет экономии от того что мы можем реплицировать по столбцам мы не теряем памяти и на словах используем не такие дорогие сервера и верим что никогда что репликатор будет только развиваться и приносить пользу людям все также пожег пожалуйста можете использовать у него к сожалению есть допустим минус который мы не учитываем потому что мне учитывали мы не используем внешние ключи вот как раз один из пользователей репликатора написал нам он использует каскадное удаление к сожалению здесь все будет не так хорошо все есть вопросы то есть вопрос спасибо большое максим медового вопросам вопрос номер 1 если репликатор упадет аллаху то время обернется что произойдет что сзади блок ну обернется записи пройдут но тогда он ну конечно же вам нужно нам и мы съели на мастере держать логе больше чем там за один час то есть белок у вас но и за этим надо следить за этим над следить я вообще держу там неделю там не 10 но он не так много пожирает место чтобы этим экономить а если это произойдет конечно же вот в нашем случае вот смотрите у нас было 10 серверов сейчас допустим это одна машина почему я сказал отрядах тарантул работает в одно ядро то есть на самом деле это конечно не в одно ядро он работает в минимум в три ядра одно ядро он работает используют для транзакционные части минимум одно ядро используется для работы с сетью еще одно ядро используется для так нас написания вал файлов то есть если вот вы его хорошо долбите запросами там на уровне там не знаю 30 тысяч запросов в секунду больше вы можете увидеть примерно что-нибудь там двести сорок процентов капуто есть одно ядро ссд реплика ционной а забита вы забили сетевой ядро и вот вывал ядро использует 40 процентов у вас машина там на 12 13 на 12 ядер допустим соответственно вы можете запустить 4 репликации одновременно в тот момент но к вашему вопросу не имеет значения и я расскажу свою мысль используются минимум четыре вот у нас запущенные на одной машине 4 слова-то дав тарантул и нагрузка идет на всех на все четыре одновременно чтобы максимально утилизировать все купол что машина не простаивала спасибо этот второй вопрос от долго большой вы переписывали приложение для того чтобы оно могло обращаться не к майскую не the slave тарантула не-не-нет вами не поняли мы взяли их не приложение которое работалось я понимаю ваше клиентское приложение бы туда это делать до дома обращались вы переписывали да не долго это буквально заняло менее недели то есть вот этот путь если бы использовать тарантул как кэширование сын валидации этот путь бы занял бы раза в три больше времени то есть это очень быстро всего лишь надо было на все переписать те методы где мы используем slave и все это очень быстро ок тарантул обращающий знать его клиент или поездка кто-то через у нас в компании пых используется и у них есть extinction в гитхабе о них везет кстати говоря в момент его использованием мы находили баги и дорабатывали его тоже то есть он вполне себе сейчас рабочие хорошие спасибо спасибо за доклад они не могли бы вы поподробнее описать вот эту хардвар ную проблему вы сказали про кернел паник и пара записи мусоров диски про проблемы с контроллером я не уловил это рейд контроллер или роллер ssd вот не могли бы вы поподробнее описать что зарыт смогли ли вы этот там как-то починить патчем или обновив саму железку и как тип какой как конкретно был всем симптом то есть с точки зрения приложения все нормально записалась а при чтении мусор или как-то конкретно этом если у вас это просто но вот представьте ситуацию машине семь лет стоит там адаптер курский контроллер но вот в момент когда я подключился к ней квн там я уже вижу как этот kernal паникуя и ребута you все нормально в ней но войти мелодия вижу проблемы с адаптеров ским контроллера там ошибки идут я запускаю мы с келли он урологи пишет а надо бы recovery там такие циферки бегут если понимаете о чем я говорю проценты насколько он восстановил уже базу и вот в момент запуска он пишет core dump то есть это вот чисто проблема действительно что контроллер при записи потому какого-то количества in последних транзакций писал в его файл но абсолютную ерунду то есть она состарилась железка на там до этого себя да да да да и то в ответственны то есть я подчеркну это не в сторону мы с келли какая-то проблема это действительно вот именно железная проблема но который в случае тарантул очень легко устраняется но я повторю убиваете один вал файл у вас все взлетает то есть чтобы вот там хотя bc запишите убейте эту строчку и все будет просто надо понимать у вас не только вал мусор перцу почему потом ну как вам сказать потому что потому что у вас когда вы snapshot тарантулы пишите там туда тоже мусор попадает но если фарша тарантулы я не пишу каждую секунду я snapshot тарантула делаю в 7 часов ночи а в семь часов утра к этому времени вот после этого времени вал файлы пишу то есть у меня snaps up to 1 1 сутки и я не особый специалист по москве или тарантулу не расскажете что там с чек суммами ухе по и увалов они есть или нет типа его love еще раз checksum и и поподробнее например вот у вас есть страницу в москве лида странице вы можете от ним как перед записью посчитать чек сумму и записать ее на дисплее файла с тем этого не умеют ну то есть можно и не очень понимаю чем речь но тогда в клан спрашивать и хорошо будущем вообще поддержку мария д.б. ой смотри db все сложно протокола репликации полностью у них но не полностью но он другой то есть они пошли своим путем в какой-то момент и у них протокола репликации они полностью изменили то есть с случае 40 вейпинг он и там все одинаково то смотри давай но к сожалению по другому но тут такое дело что пока вот из тех людей кто уже использует то есть вот мне написали из примерно из 10 фирм которые используют многие под очень серьезной нагрузкой никто не падаем марию db не использовал наверно тут мы будем отталкиваться если придет критическая масса людей с марией db мы начнем просто смотреть то есть пока все силы сейчас которую мы который у нас есть мы пускаем на поддержку текущего решения и фикса багов от людей то есть вот смотри да б наверно будем отталкиваться если действительно будет много пользователей ну не знаю может быть мое субъективное мнение что все-таки мария дубинина стоп популярна как это и это опять мое субъективное мнение еще один вопрос альтернативные решения какие-нибудь кроме тарантула рассматривались вообще нет мы не рассматривали решение таранда еще раз повторю потому что у них уже что-то был готовы не надо было начинать с нуля плюс mail.ru это очень дружественная контора команде это было второе решение то есть они в они на самом деле сделали за нас очень много в свое время мы мы просто взяли адаптировали это причесали запустили добрый день у меня два вопроса будет первый не могли бы чуть чуть подробнее описать архитектуру как у вас вот расположены где сервер москве эльсе репликатор и тарантул это все на одном сервере или это на разных машинах вот это первый опрос и 2 при каких нагрузках проводились вас исследования вот медленно и тарантула то есть это было обращение к одним и тем же данных в этом говорили что 7 таблиц здания все в них поля использовались и вот тестирование тарантула было произведено на тех же данных что да да хороший вопрос я понял а мы съели мастер у нас на своем сервере там очень мощный сервер а мы из филевский сервера stinger сокетом вот их было десять штук мыски каждый instance на своем сервере своим создаст своей памятью а тарантул мы просто на одном сервере запустили 4 экземпляра тарантула на разных портах я объяснял почему их тут же к ним 4 репликатора то есть все работает на одной машине как мы тестировали с этих слоев происходит фактически авторизация пользователей и работа с про файлом то есть в какой то момент мы просты в коде переключили что теперь мы начинаем авторизовываться пользователи работы с profiles тарантул в этот момент нагрузка на хендлер соки то упало в 0 потому что то не пошили запросы и они все пошли в тарантул и мы но буквально я на этом графике который был я там взял на прошлой неделе с понедельника по пятницу время ответах intel socket a на следующей неделе когда мы переключили все но тарантул я тоже с понедельника по пятницу взял ответ из из тарантулы просто совместила вам на график показал то есть это нагрузка на одних и тех же данных в одно и то же время в одни в одни и те же часовые промежутке когда вы тестировали ходили соки там нагрузки со стороны других данных не было никак не какой-то то есть там было вот там было только то нагрузка которую там и могла быть то есть там был весь сто процент трафик на авторизацию на работу с про файлом пользователя ну понятно он всего здравствуйте скажите пожалуйста у вас как-то 10 серверов использовалась для converse акита и там хранилась информация а вот а теперь вы используете один в таранто ли я имею сколько по ресурсов по ресурс с на емкости насколько мощнее стал сервер который короче тарантул ский он стал мощнее только в следующим образом что те сервера с эндрю сокетом это были 32 гиговой сервера и как раз это было вот то что в вечерние часы вот эти пики время ответы это из-за того что этих 32 гигов не хватало дальше можно было бы просто сделать взять эти 2 3 сервера старые из-под хендлер соки ты там разместить под по одному instance тарантула и в общем как я уже упомянул это всего лишь 21 giga двадцать один гигабайт в оперативной памяти эти данные занимают вполне их достаточно но я решил взять свеженький сервер с двумя блоками питания которые живучесть которого наверно выше это был брандо wandel который у меня лежал на складе запасной запасной что пусть вот я буду в нем больше уверен чем тех под этих 10 supermicro вских серверах вопрос умер ксандр за вы скажите пожалуйста а вопрос до дуэли интересен как новый альте таблицы в которых из которых идет реплика да как это отражается на структуре в tarantul и то есть туда через реплику приедет адель операции или и надо ручками накатываем что вы иметь ввиду пдд император что что альтеры а я понял знаете мы не пробовали еще ни разу альтеры это замечательный вопрос я думаю что вам надо за это отдать приз меня как раз спрашивали кому дать приз мы не пробовали это я все это хочу попробовать хотя бы на тесте но я думаю что проблем не будет потому что почему допустим основная есть причина с внешними ключами что вот мне задали недавно вот в чатике вопрос представьте вас есть две таблицы пользователей его сообщения в сообщениях это каскадный это внешний ключ на пользователя то есть при удалении пользователя должны удаляться все его сообщения через внешний ключ когда вы удаляете пользователи в берлоге от всего лишь только один делить в берлоге нету того что вот тут же прилетает там миллион девятов на его удаление просто когда это делит приходит на мыске левски слейд мы оскорбить что это внешние ключи опять же с этими по с этими сообщениями трет их это очень большая проблема как бы почему это нельзя вот ноги очень сложно реализовать в tarantul я думаю что в берлоге что с сальто раме будет несложно потому что и это заработает потому что в берлоге это будет именно как как изменение данных но я обязательно попробую спасибо вам я уже об этом совсем забыл то есть это поначалу многие спрашивали я об этом забыл присоединяйтесь в чат тарантула я вам и я вам отвечу спасибо"
}