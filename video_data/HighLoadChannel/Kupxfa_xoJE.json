{
  "video_id": "Kupxfa_xoJE",
  "channel": "HighLoadChannel",
  "title": "Интеграция PHP-проекта с 1С / Пётр Мязин (ГК Forward)",
  "views": 52,
  "duration": 2634,
  "published": "2023-10-06T07:20:48-07:00",
  "text": "Добрый вечер Спасибо что пришли последний доклад наверно уже хочется ближе к автопати к пиву у нас сегодня такой легкий доклад будет про расширение кругозора практически расширение сознания пива тут не помешало Меня зовут Петр Мязин я Достаточно давно работаю в PHP к системе и продолжаю работать PHP к системе Мне нравится делаю подкаст 5 минут к PHP кто-нибудь слушает пятиминутку PHP вот отлично кто еще не слушает Подписывайтесь телеграм-канал пятиминутка PHP он даже почаще обновляется и работаю в сфере логистики Что за сфера логистики у нас компания занимается международными грузоперевозками B2B секторе так скажем То есть это какие-то крупные контейнерные партии не для физлиц маленькие посылочки То есть это такой B2B документа оборот это наш фокус в плане разработки на PHP Да мы занимаемся документооборотом в корпоративной среде B2B а чем я хотел сегодня рассказать конкретно о том как мы интегрируемся с 1С все-таки 1С программа такая которая стоит практически в каждой компании корпорации в России и у нас тоже интегрироваться с 1С приходится Мы научились это делать поделюсь своим опытом и о чем я не буду рассказывать об интернет-магазинах выгрузки на сайты с этим никогда не сталкивался с и коммерсом Но те технологии которых я буду говорить вполне применимые для и коммерса я думаю может быть Вам будет полезно узнать Давайте немножко про 1С краткий ликбез что внутри 1С Это программа запускаем там есть какие-то экраны формы данные так вот данные которые хранятся в 1С Что это за данные они делятся по категориям это так называемый объект и метаданных категории есть справочники справочники городов стран список товаров или услуг которые мы осуществляем хранятся в 1С документы документы немного другой тип данных это счета акты может быть какие-то письма или документы наши предметной области какие-нибудь товарные накладные и интересный тип данных регистре регистры их сложнее объяснить и тут я на самом деле Всем рекомендую немножечко в 1С почитать погуглить что такое регистры возможно вам и ваших приложениях пригодится Ну вот как пример какие-то исторические данные курсы валют или цены на определенную дату если мы откроем наши PHP приложение то что мы программируем у нас есть urm entity модели и это все хорошо Матрица справочники это наши документы тоже антител А вот регистры по хитрее их можно сравнить либо с историей событий либо seventsorting моделью если мы разрабатываем на PHP в aventsorting модели может быть хранить какую-то историю событий то есть мы поняли что есть технологическая такая взаимосвязь между PHP приложениями и 1см можно провести параллели в 1С и фишки конечно еще куча разных других данных которые мы допустим не хотим проводить параллели не будем синхронизировать поэтому сосредоточимся на том что мы хотим синхронизировать А что мы хотим Но у нас есть менеджеры сотрудники которые работают в нашем классном софте написано PHP через веб-интерфейс ведут корпоративные документы оборот грузоперевозки они не хотят лазить в 1С им неудобно К тому же двух программах работать с другой стороны бухгалтерия целиком сидит в 1С программах не очень кайф работать они у себя а мы понимаем что у нас есть одни и те же объекты метаданных вот эти объекты данных которые нужны в той в другой системе как они там будут появляться хотелось бы чтобы как-то автоматически с помощью синхронизации проанализируем что же мы хотим синхронизировать Ну вот мы проанализировали у нас есть справочник наших контрагентов это клиенты подрядчики договора с ними наши услуги которые мы продаём и основные документы бухгалтерские это счета акты оплаты есть еще куча других интересных документов которые мы принципиально не хотим синхронизировать они PHP приложения менеджер не интересно всякие бухгалтерские заморочки там или вот документ о приёме на работу да он в один раз лежит но зачем она в PHP базе не нужен мы выбрали что синхронизировать важные для нас сущности важные для сданные как их передать из одной системы в другую если зайти на сайт 1С в документацию там есть вот такой экран такая страница с кучей базы вордов о способах передачи данных xml http json какие-то веб-сервисы все в кучу Давайте их попробуем разделить я для себя делю на такие три крупные категории есть классические технологии dbc ком это вообще только под Windows универсальный доступ к базам данных вот мы его Дебюсси раньше пользовались неудобно дальше классика жанров кого почти не спроси обмен с сайтами обычно так делают одна система генерирует файл выгружает его на какой-то общий диск на FTP сервер другая система Раз в час проверяет нет ли там файла с данными считывает загружает к себе то есть обмен файлами файлы любого формата какие мы сами хотим можно xml CSS самые распространенный Ну тоже не очень удобно потому что это по регламентам заданию какая-то общая папка современный подход который мы все умеем любим готовить http вызовы И в частности Давайте попробуем посмотреть в эту сторону второй интересный вопрос Помимо того Какой транспорт мы будем использовать понять В каком направлении вообще данные ходят Кто инициатор обмена где первоначально рождаются Этот новый документ или новый элемент справочников Какой из двух систем и оказывается что для части документов мы можем определить что они всегда рождаются в PHP приложения для Других документов например какая-нибудь Платежка из банк клиента выгрузилась Она сначала всегда попадает в один из бухгалтерию и потом нам хотелось бы PHP приложение тоже увидеть этот платеж чтобы менеджер увидел клиент оплатил можно вести груз а бывают документы с двунаправленной синхронизацией они могут родиться и там и там получаем распределенную систему и тут нам помогают идентификаторы U1 кстати сегодня был классный доклад про uid слушали Валентин рассказывал В общем повезло что в 1С из коробки изначально используется uid как идентификаторы Поэтому синхронизироваться вот в таком двунаправленном режиме оказалось достаточно просто все работает и Давай теперь к частности вот хочу из PHP приложения что-то Отправить какие-то данные отправить в 1С передать данный поищете протоколу еще лучше использовать rest подход Red подход всем все его знают все его любят оказывается оказывается что в платформе 1С есть встроенный rest интерфейс То есть все что есть в 1С все документы справочники они сразу доступны по готовой опишке она так и называется один срез можно нагуглить То есть можно прочитать отдельные сущности списки сущностей можно какие-то выборки делать по условиям и можно даже на записи этим rest интерфейсом пользоваться то есть писать что-то в 1С как раз то что мы сейчас и хотим и спички отправить документ в 1С причем Это самый настоящий такой rest которым мы привыкли все http глаголы поддерживаются как они должны быть мы с этим умеем работать и спички отлично кроме обмена данными оказывается в 1С rest интерфейса есть еще выполнение команд тут уже такая тема интересная как queria comman segregation принцип есть запросы как А есть запросы как команды команды выполняют что-то что-то поинтереснее потяжелее в 1С есть ряд встроенных команд которые мы можем через один из rest дёрнуть они прямо уже готовы программировать ничего не надо здесь они перечислены это все конечно 1 специфика Но если Вы точно знаете что вам Например нужно испечь приложение делать проведение распределение документов то это можно сделать вызовом по сети 1 поинта очень удобно хорошо 1С rest но есть мы ходим по http отправляем какие-то запросы что внутри этого запроса какой URL да На какой URL ходить и что в теле В теле запроса А и тут со стороны 1С был выбран протокол о дата о дата версии 3.0 если зайти на сайт у data.org можно прочитать что они позиционируют себя создатели этого протокола позиционирует его как лучший способ готовить раст интерфейсе ваши интерфейс вот стандартными и удобными есть даже какие-то там ИЗО провал Оазис стандарты Если вы сейчас пишете на rest интерфейсах даже не касаясь допустим 1С смотрите на удата на самом деле может быть это тоже интересная технология для вашего проекта А если посмотреть на Википедии что это за удар изначально это была инициатива Microsoft в 2007 году позже протокол стал так скажем открытым развивается некоммерческая организация или сообществами что-то в этом роде да то есть заходим читаем спецификацию на у data.org данные можно передавать в xml или в json мы используем json на самом сайте у data.org есть ссылки на референсные имплементации или там лучшие имплементации на практически на всех языках программирования питон javago Ruby в том числе напитки Вот они рекомендуют такой пакет его можно попить жесте найти и если на пути жить посмотреть там даже есть обертки под конкретные фреймворки то есть поверх этого пакета видимо какие-то сервис провайдера для равеля наверное удобно можно быстро интегрировать свой проект про у дату есть статьи на хабре неплохие вот эти ссылки сейчас ну нет смысла быстро переписывать в конце на последнем слайде будет ссылка на весь мой доклад сможете скачать девку и потом покликать по этим ссылкам и если набрать о дата поиск на пакет жести вот куча пакетов выскакивает и достаточно большое количество скачиваний то есть этим в мире PHP кто-то пользуется это я все к тому что дата это не какой-то там левый велосипед придуманы один из них а вполне замаревшая технология они взяли его дата за основу для своего 11 интерфейса нам осталось посмотреть что это почитать статьи на хабре и применить когда начали применять я стал замечать параллели с Граф киель интересные про у дату Я до этого не слышал Вот про Граф келье конечно слышал на слуху Ну такая достаточно модная популярная технология Кстати завтра будет доклад про граффиллина PHP обязательно Приходите вот я пойду Очень интересно значит особенности Граф Киеве в том Какой из себя позиционирует за один запрос мы можем сформировать клиента какую-то структуру которую хотим от сервера получить вложенные данные связанные данные Ну вот слово Граф как бы графовая база данных вот графовый доступ к данным и оказывается Вот эти мы тоже можем примерно похожие делать мы можем делать хитрые выборки с разными условиями получать За один запрос какой-то объект и вложенный в него сущности и если погуглить о Data против grav-q тема оказывается не новая куча статей в интернете люди сравнивают Ну я для себя называю говорю Так что дата это графьева на минималках то есть Граф кирта поинтереснее помощнее как технология Но для наших задач А в частности в один это только о дата там нет графьели вполне подходит отлично Давайте примерчики посмотрим как выглядит вот эти запросы к 1су с помощью протоколадата Я отправляю дед запрос на некий Урал на веб-сервис на Правильнее говорить http сервис с точки зрения 1С передаю туда квери параметр фильтр отфильтруй мне в каталоге товаров все товары с названием молоко и ценой менее 25 рублей и 1С вернет мне Джейсон или xml с списком товаров подходящих под это условия А вот другой запрос например хочу выбрать всех контрагентов вообще без каких-либо условий вообще всех но только два поля уникальный ключ и description какое-то описание контрагента можно использовать параметр Select то есть отборы конкретные поля можем вынимать Как выглядит ответ от 1С пример с контрагентами получаем json есть некий value это массив в массиве мы видим множество объектов в каждом объекте два поля уникальный ключ и описание контрагента Элементарно парсится json decot все PHP обходим форечем делаем Что хотим сохраняем нашу базу или еще что-то да есть много говори параметров мы посмотрели фильтр для условий отбора Select чтобы выбрать отдельные поля и сущности есть чертовски пока он сортировки В общем можно с помощью query параметров запросить данные в том виде в котором нам нужны и какие именно Нам нужны данные если посмотреть конкретно на фильтр на отборы внутри фильтра можно использовать логические операторы и или отрицание и комбинировать разные условия Хорошо пригождается можно использовать арифметические операции прямо в условиях отбора что-то на что-то умножить поделить сложить там вычесть честно говоря вообще не знаю зачем это нужно не пользовался и строковые операции можно поискать под строке поначалу строки по концу строки Вот это тоже бывает полезно то есть язык запросов достаточно гибкий куча разных операторов функций так скажем встроенных которые можно в URL передавать и получать нужные данные очень классный оператор экспант тоже в URL Пишу экспант если я хочу вместе с основным объектом который я забрасываю получить какие-то вложенные записи за 1 http запрос решая проблему N плюс одного запроса чтобы не делать дополнительные http запросы Например я хочу получить список контрагентов допустим там базе у меня 1000 контрагентов и внутри тут же в каждом контрагенте его основной договор пишу экспант основной Договор или хочу получить всех контрагентов и сразу все что внутрь контрагента вложено раскрыть все вложенные записи экспан звездочка и вот как придет ответ придет виде массива объектов каждый объект Это сущность контрагента у контрагента мы запросили два поля ревки description хорошо два поля чтобы лишний не тянуть экспант основной договор контрагента в этот объект контрагентов встраивается вложенный объект в джейсоне основной договор контрагента Красная рамочка выделил проблема в том что в этом в ложном объекте полей уже очень много То есть он прям Весь целиком выплюнулся а там допустим 100 полей внутри куча личных данных трафик и так далее и оказывается что и для вложенных объектов можно указать какие именно поля Мы хотим вытянуть из них ну вот делая референс на Граф Киеве Вот такой графкель на минималках действительно можно скомпоновать такой запрос чтобы вытянуть только то что нам нужно за 1 http-запрос так вытянули а вот еще примерчик запроса если я хочу получить карточку конкретной сущности зная ее уникальный идентификатор А я уже говорил там все Найди построено если у нас есть U1 можно прочитать карточку сущности по юаней сделав вот такой запросик на конкретный элемент а на запись она запись тоже работает пост для создания новых записей патч пут для обновления причем мы сами со странной PHP когда создаем новую запись поста можем заранее передать ножны нам ее один идентификатор именно с этим идентификатором все сохранится в 1С собственно то что нам и нужно для построения вот этого распределенного обмена когда объекты могут рождаться в обоих системах в хаотичном порядке нас спасают еще один интересный нюанс нюанс многие документы или сущности имеют так называемые табличные части счет клиенту я выставляю У меня есть Шапка щеток кому я выставляю клиент какой-то его ИНН или там идентификатор клиента скорее да Вот его ID дата счета номер счета а в середине счета есть вот прям на бумажный документ посмотреть там таблица таблица с нашими услугами загрузка машины 1000 рублей автоперевозка 5000 рублей разгрузка еще тысяч рублей это табличная часть То есть это массив строк вложенных в Документ и чтобы такой документ отправить в 1С записать в 1С не надо делать один запрос на шапку еще N запросов на каждую строчку все это записывается одним http запросом вложенным Джейсоном вложенным массивом очень удобно И что самое главное транзакционно То есть все строки запишутся или Весь документ не Запишите если что-то пошло не так так вот еще про запись интересный факт Допустим мы в такой ситуации находимся я что-то прочитал из 1С с помощью Get запроса и на стороне PHP хочу пойманипулировать этими данными что-то поменять и записать обратно пусть даже это не пользователь делает это какая-то там бэкграунд задача А что если пока на стороне PHP я манипулировал этими данными кто-то другой другой клиент внутри один из базы поменял этот объект который я хочу обратно записать и записать Я хочу тут запросом который все обновит а существует известный способ подход оптимистичных блокировок еще пессимистичные блокировки еще какие-то там их несколько штук в общем в 1С встроена поддержка в этом 1С rest интерфейсе оптимистичных блокировок с помощью hdp-заголовков я могу указать какую версию объекта я последний раз прочитал и вот сейчас я ее как бы обновляю 1С на своей стране сам проверит а не было ли изменений По сравнению вот с этой последней версией если изменения были мне запрос Не пройдет там будет ошибка http там код какой-то 400 может быть не знаю честно говоря то есть проверка встроенная ничего программировать не надо очень хорошо Это я все к тому что интегрироваться с 1С на самом деле не так уж и сложно есть встроенный rest интерфейс плюс Он построен по протоколу Data по которому куча документации и библиотек И на самом деле из PHP вам не обязательно нужны какие-то библиотеки скачивать на пакет GT искать можно сделать простой http запрос скачать какие-то данные файл Get контент Вот и вся интеграция то есть чтобы заинтегрироваться 1С Не надо долго писать ТЗ совещаться с 1С никами один http запрос и данные ваши так хорошо это 1С разинтерфейс и он строится автоматически по данным находящимся в 1С А что если нам не хватает двораст интерфейса Мы хотим в 1С что-то записать или какую-то прочитать вещь которой нет в rest интерфейсе и тогда мы уходим на более глубокую технологию она называется http сервисы то есть в 1С Мы можем написать контроллер по большому счету обычный контроллер как это мы делаем наших PHP проектах контроллер метод или функция на языке 1С которая принимает объект запрос дальше какой-то бизнес логику внутри 1С выполняет 1С там можно свой код написать и возвращает http ответ классика жанра Зачем может пригодиться например генерация PDF XL документов в принципе PDF документы Excel мы умеем и спички отлично делать Вики HTML PDF PHP spection Но если взять один из бухгалтерию там готовые печатные формы опд счетов-фактур то есть вот это все на Экселе через PHP spect вот никому не посоветую хотелось бы сделать один http запрос в 1С и сказать Верни мне счет-фактуру чтобы она прямо в PHP приложение вернулась и дальше менеджер что-то с этой счёт фактуре сделать допустим клиент звонить срочно Вышли еще фактуру на e-mail не знаю зачем ему нужен email можно обменяться с 1С Вот такими печатными формами 2 пример мы используем электронный документооборот между компаниями можно настроить электронные документы оборот чтобы юридически значимые документы в частности бухгалтерские закрывающие документы акты фактуры те же самые отправлялись электронной подписью через специального оператора знаменитые операторы диадок сбис мы ими пользуемся у всех есть а фишки детей можно посмотреть Мы тоже начинали интегрироваться но в 1С то это все тоже встроено есть готовые решения под 1С по работе с диадоком с тем же с бисом И на самом деле классным выходом было Вот что использовать готовые решения 1С А в нашем PHP приложении менеджер хочет что-то отправить вот через этот и до мы ему делаем кнопочку отправить через это PHP приложение делает минимальный вызов вот в этот http сервис в нашу 1С А там уже вся логика подключения к оператору мы док подписям шифрование все реализовано на стороне 1С то есть мы упростили себе жизнь используем и до через 1С с помощью htp сервисов Ну или еще какие-то может быть вас в 1С сделанная специфичные процедуры функции ваша 1С команда в компании есть или на аутсорсе что-то там запрограммировал и их надо эти функции вызывать из спички приложения небольшая прослоечка в виде сервиса поможет так чисто для расширения кругозора как это все выглядит в 1С вот так выглядит роутер Это какой-то гуи интерфейс где я описываю строку шаблона говорю вот на эту строку пожалуйста Getz запросы А вот на эту строку пост на этот патч запросы обычный роутер как мы привыкли приложениях но через такой интерфейс и дальше контроллер очень простой оперативный код что мне нравится в ходе 1С не то что на русском а то что он императивный и простой любой PHP программист не знаю 1С Может это прочитать тут есть входящий объект запрос потом парочка каких-то ифов ответ 404 если что-то пошло не так а если все пошло нормально в середине какая-то бизнес логика и в конце ответ 200 Это значит что мы можем открыть 1С и просто глазами пройтись пробежаться посмотреть там вообще написано нормально это то что мы хотели в процессе нашей интеграции от нашей один из команды то есть язык 1С на чтение отлично подходит для любого PHP программиста Давайте в обратную сторону порассуждаем что если нам нужно какие-то данные принимать на PHP стране за 1С то есть инициатором обмена является 1С 1С платформа должна вызвать по http наш пикот Может может оказывается 1С есть встроенный PHP Клиент не PHP клиент такой 1С газа и вот посмотрите на этот код он опять же элементарно читается тот пример какого-то запроса githubble создается новый запрос там отправляется получается ответ какие-то проверочки то есть на 1С написать вызов hdp-вызов достаточно легко любой один из них с этим справится вы сможете это прочитать посмотреть то ли он вообще вызывает тот ли Урал нет ли отпечаток телепорты Ну в общем это легко разрабатывать на самом деле легко оценивать тестировать а углубимся да А вот например как мы работаем с PHP из PHP Мы работаем обычно через очереди Джо ба чтобы все было надежно что если удаленный сервис сейчас недоступен нужны ретраи Возможно с экспоненциальным временем запросов А что со стороны 1С если вот прям тупо в один раз коде написать запрос А у нас сейчас PHP приложение недоступны или сетевая проблема И всё потеряется если погуглить на самом деле в мире 1С в их экосистеме есть готовые решения по надежной доставке сообщений в том числе через http протокол так называемая один уже слово шина намекает да какой-то интерпрета сервис написанный на 1 некие сервисы интеграции так называемые планы обмена Вот такая задача хотим чтобы 1С как-то понимал какие объекты изменились и только изменившиеся нам отсылал это если изменились конкретные поля планы обмена это встроенная технология в 1С которая позволяет быстро реализовать вот такую функциональность на платформе 1С То есть можно поставить задачу ваши 1С команде или на аутсорсе нам нужно чтобы вы нам доставляли данные надежно Я видел на Ютубе что у вас есть инструменты если вы не знаете я Вам подскажу делайте так вот один шину или планы Пожалуйста сделайте они могут это сделать там все инструменты готовы или что мне еще больше нравится это на самом деле постараться как можно меньше напрягать 1С команду А работать По пол модели скачивать данные из 1С со стороны PHP то есть максимально весь код писать на стороне PHP идея такая вот например в 1С родился новый документ и нам надо бы его за один раз передать PHP приложение можно сформировать json предварительно согласовав спецификацию этого Джейсона с 1С никами какой Джейсон Мы хотели бы получить на какой URL Какие данные потом понадобится еще пару полей Заново согласовываем заново программируем на стороне 1С Ну и на нашей стороне тоже Либо мы можем их попросить на каждое изменение вот этих вот объектов счетов или актов дергать маленький вокруг нашим PHP приложении передавая лишь идентификатор вот этот документы которые изменился в 1С и дальше мы сами сложим себе задачи в очередь и когда очередь дойдет worker прочитает данные за 1С скачает их по 1С интерфейсу то есть 1С Нику программирования минимальная ему нужно вот этот микро htp-запрос сделать мы дальше все сами прочитаем так называемая пул модель гораздо проще поддерживать проще коммуницировать Ну естественно вот этот вызов Кука все равно должен быть надежным чтобы он не потерялся где-то посередине то есть какие-то там планы обмена может быть Придется подключить вот из этого развивая свою мысль надо все упрощать максимум используем пул модель вот с этим Мы тоже по граблям походили думали вот у нас есть справочник городов допустим в 1С вставляют Новый город было 200 городов стало 201 напишем Так что только новые город вставленный к нам придет письки А что если поменялся какой-то адрес склада в 1С надо нам его прогрузить PHP так Смотрим там только при изменении адреса склада надо прогружать при изменении других параметров не надо прогружать на самом деле куча логики которая может быть и не нужна потому что ну вот наши логистика у нас справочники 200 городов мы можем каждый раз вычитывать все 200 городов из-за один раз интерфейс одним Get запросом появился 201 город мы вычитаем еще раз все 200 Это значительно упрощает разработку и никак не нагружает систему потому что в масштабе Вычитать справочник из 200 элементов это работает быстрее меньше чем за секунду там там вообще никакой нагрузки нет а на разработку все убрали убрали все ифы если поменялось от этого выгружать если поменялся это то не выгружать иностранец 1С Я имею в виду то есть максимально используем один раз 1С RS максимально используем пул модель минимально взаимодействуем с командой 1С берем Все в свои руки Вот я этот доклад показывал наша 1сной команде Вот они говорили да ты что надо Все на один раз писать Ну понятно каждый тянет одеяло на себя Итого Подводя итог есть классные средства если вам нужно обмениваться данными с 1С это 1С если их не хватает есть так называемые htp сервисы это те же самые контроллеры все пою1 идентификатором И это тоже классно и удобно и наконец если вам нужно уже завтра какой-то микроинтеграцию сделать можно вот буквально файл Get контент к 1С скачать зарплаты всех своих коллег и уйти в закат Привет меня зовут Петр Мязин Вы можете поэтому qr-коду проголосовать за мой доклад и ссылочка на pdf-презентацию с сайта пятиминутки PHP Заодно и на подкаст подпишитесь или пишите еще в телеграме А теперь слушаю ваши вопросы Спасибо огромное Какой самостоятельный спикер против закат зарплатами коллег меня особенно понравилось Ну что ребят поднимаем руки у кого вопрос так вижу две руки пожалуйста начнем Здравствуйте спасибо за доклад Вопрос такой вы описали разные способы интеграции до между 1С PHP Но вот вопрос А вот идентификации между двумя системами что используете что нравится что так в 1С раз вот в этом rest протоколе встроено Basic Count идентификация То есть когда я на стороне 1С на самом деле тресс надо включить там галочками и там надо прописать пользователей и пароля либо выбрать пользователей существующих пользователей 1С с которым можно дефекации через HP заголовки и в обратную сторону когда мы из 1С входим к нам в PHP делаем http запрос тут уже как хотите можно через http заголовки Можно какого-нибудь секретный токен прям в URL прописывать заголовки прописываем а кроме бейсика если кандидас подключаться ничего не пробовали А я читал косвенно так там всякие технологии от этот wout и еще что-то в общем вот он для сервисов не очень подойдёт к 1С видимо тут Вы лучше меня разбирайтесь потому что я их так ну по диагонали прочитал и понял да хорошо есть всякие технологии но мне Они пока не нужны потому что мои задачи они видимо проще Да мне достаточно без заголовка с бейкомфикацией в конце концов это у нас всё во внутреннем контуре предприятия в принципе достаточно нормально супер еще вот рука была и потом вот еще одна рука напоминаю Когда Вы заходите по qr-коду и голосуете за доклад это помогает программному комитету сформировать программу следующего halode Ну либо печь пираж в нашем случае Понятно спасибо за доклад Маленький вопрос про у дата Да вот протокола не про 1С больше ты его сравниваешь фатальный недостаток он не умеет дерево одним запросом целиком вытащить только определенное количество уровней заранее заданное у дата умеет или нет Ну понятно в 1С не особо актуально там из деревьев только что группа в справочниках но интересно всё-таки так Какова глубина вот этого дерева что она не ограниченная может ли он одним запросом Ну это хороший вопрос и действительно При нашей интеграции мы спускались максимум на уровень один вот то есть практика такая небольшая экспанс на один уровень Здравствуйте спасибо за доклад вот такой вопрос то есть там 200 элементов выгружающих через растаппи А вот если стоит задача именно выгрузки большого количества элементов там несколько сотен тысяч из того же регистра сведений данных актуальных на сегодняшний день то есть это rest API решается как-то на вас это проглатывает или всё-таки вы используете какие-то альтернативные методы проглатывает Да а значит нет не было У меня таких задач чтобы постоянно вычитывать сотни тысяч но были задачи в начале проекта условно вот нам надо сначала выкачать все данные за последние 3 года и мы делали это через у дата rest интерфейс на стороне PHP мы писали там как бы вот как было дело одним htp запросам получить все ю айди придет огромный пакет там на 20 мегабайт условно 200 тысяч юайдишников но он приходит ничего не зависает а потом 200 тысяч отдельных http запросов на чтение карточки каждого элемента который мы хотим скачать это работает примерно со скоростью ну вот конечно зависит от железа у нас было 1200 записи в час нет Минуту не в час минуту 1200 записи и мы это скачали за пару часов все что нам нужно было за три года Ну на стороне PHP использовались очереди то есть на каждую карточку записи создавался отдельный Job и laravelle Q это все Примерно перемалывал там вот пару часов и все скачалось ошибок не было ни единого разрыва У нас есть еще вопрос из чата и руку тоже вижу вопрос от Александра Иванова в чем преимущество вашего подхода по сравнению со схемами данных к примеру я не упомянул в этом докладе я что-то про него забыл честно говоря мы использовали suapp и я вот показывал как я примерно делю способы на категории что мне больше нравится что мне больше не нравится так вот http приятнее Почему Потому что его проще отлаживать с точки зрения PHP софт есть PHP extensions Up Ну Верните нам вот этот слайд сок я бы сказал он будет между третьим и вторым способом то есть уже ближе к http досок это тоже почти Просто внутри xml по определенным форматом говорят что он очень медленнее но я не сталкивался с проблемой производительности а вот с откладкой как-то все это неудобно честно говоря А вот по сети джейсончики Ну прямо вообще мечта так и была еще одна рука Можно пожалуйста микрофон почему такое большое желание всю логику реализовывать исключительно на стороне PHP как можно меньше обращаться к программистам 1С неправильнее было бы использовать двунаправленную очередь из другой стороны обмениваться только теми данными кто генерирует данным отправляет данные и очередь она также была бы безопасно и данные были бы консистентные получали своевременно Почему именно в PHP реализовано Ну Начнем с того что мы печки команда мы выступаем на печь пираша и нам удобнее работать PHP у нас есть и она аутсорсе 1с-ники и вот у меня вопрос мне поставить ticket Артему или написать ТЗ для 1С аутсорников и по деньгам может быть даже один из аутсорсника может быть даже дешевле выйдет потому что Артем профессионал он получает три стакана на секунду один из них там не так получается но мне все равно удобнее со своей командой работать Это вопрос и коммуникации и скорости доставки фич и ценности для бизнеса если бы мы были 1С команды мы бы сейчас тут выступали другую конференции говорили что вот типичники нас уже достали мы делаем все на 1се давайте жить дружно в этом же получается неправильность подхода что каждый тянет одеяло на себя когда можно договориться и написать одну систему можно договориться Дело в том что вот эти коммуникации они тоже съедают время деньги и двунаправленная очередь согласен технически это все будет работать тут вопросы организационный так еще вижу одну руку Спасибо за доход мне только вопрос Я так понял что вы при разработке вашего проекта использовали функционал 1С для того чтобы не писать как бы ну какие-то часть функционала на PHP хотел узнать по поводу того какой объем данных вашей системе вообще и насколько актуально для вас проблема производительности и так далее тому подобное Я имею с точки зрения один из Да тут как бы Такой тонкий момент что она конференции харлот расскажу по секрету у нас не хайлоут а это корпоративная b2b-система наши заказчики вот доставки грузов Да это не миллион пользователей Почты России это там 1000 компаний 1000 бизнесов и количество документов и данных которые мы вообще храним и системе в 1С оно не халотное то есть не сталкивались с проблемой производительности Но конечно я читал что там крупные внедрение 1С сталкиваются и как-то их пытаются решать но я не знаю как пример примерный объем число щитов в месяц например да выпускаем ну 10 тысяч счетов в месяц супер Спасибо огромное Так ребят остались еще у нас вопросы теперь вопрос к тебе вспоминай все вопросы которые были и Выбирай один самый интересный либо самый каверзный Да самый каверзный вопрос Почему все тянут одеяло на себя и Нужно ли делать в двух системах код Ну мое мнение по-прежнему что лучше ограничить так сфокусироваться на чем-то одном переубеди меня в этом знать такой мем чейндж майнд супер Спасибо огромное поднимите еще раз руку чтобы вам подарили подарок и от лица организаторов Спасибо огромное за подготовку за интересный доклад это было классно ребят Спасибо так благодарю Спасибо Спасибо друзья Вам спасибо что вы слушали что пришли на финальный доклад задавали много интересных вопросов на самом деле было классно как ведущий всегда очень приятно слушать вопросы вот ощущение что люди все-таки не работали в рабочих чатиках и не в Инстаграме сидели А правда слушали классно правда вот а на этом официально А завершаю сегодняшний день в этом зале с вами была Екатерина фирсо вычр директор альтернат а-а было очень приятно работать с отзывчивой аудиторией а-а хочу в качестве такой маленького бонуса себя как ведущий прорекламировать две завтрашние свои активности в 10:00 будет а Панельная дискуссия с григорием богдановым и ильясом а ревью резюме это возможность прислать своё резюме даже если Вы не ищете работу и услышать точку зрения а как оно на самом деле выглядит странной естественно никакие контактные данные не нужны e-mail телефоны ничего не нужно название компании не нужно вот но можно просто посмотреть как это выглядит страны адрес куда отправлять есть на страничке доклада на сайте либо в чате холод А можно найти по кодовому слову резюме и также завтра будет наше выступление Что происходит на рынке труда с обзором заработных плат выступление будет трансляцией но без записи там порядка 7 или 8 обзоров от консалтинговых агентств разной степени закрытости Есть открытая информация есть не очень открытая информация возможно тоже кому-то будет интересно спойлер Мне кажется многим Ну что ж на этом прощаюсь и напоминаю не разбегаться нас всех ждёт автопати с закусками напитками будет о чём пообщаться хорошая вечера До завтра пока"
}