{
  "video_id": "hQZ9tSF6g1Y",
  "channel": "HighLoadChannel",
  "title": "Key transparency: Blockchain meets NoiseSocket / Алексей Ермишкин (Virgil Security)",
  "views": 328,
  "duration": 3648,
  "published": "2018-08-16T04:40:06-07:00",
  "text": "детство меня зовут алексей ермишкин я работаю в компании вершил security мы занимаемся разработкой криптографических решений для бизнеса в частности мы промышленным в промышленных масштабах внедряем intent шифрование это шифрования . . когда отправитель заранее знает публичный ключ получателя почему именно так потому что это на наш взгляд единственный правильный способ обеспечить ой единственный правильный способ обеспечить защищенность передаваемых данных схему нашего доклада мы рассмотрим например и общения как всегда алисы и боба но в данном случае это не люди это роботы почему потому что когда хотят по защищенному каналу пообщаться например какие-то датчики какие-то небольшие девайсы у них гораздо меньше возможностей для того чтобы использовать полноценно все то что уже написана для людей например tls сертификаты саш vpn и и все остальное и так алиса хочет пообщаться с богом и она знает к сожалению только его имя или какой-то идентификатор например mail или телефон вот ей нужно как-то получить его публичный ключ вот для этого они используют какой-то сервер ключей но это не может быть простое например киева или хранилище потому что хранить в таком хранилище ключи абсолютно не безопасно их можно оттуда убрать их можно заменить можно вернуть например на существующий ключ ответ 404 будто его там нет поэтому этот сервер должен обладать несколькими очень важными и уникальными свойствами то есть он конечно же должен уметь возвращать ключи которые в нем есть но помимо этого он должен строго доказать что в нем такого ключа нет вот и до сегодняшнего дня это задача решена никем не было также боб и колеса должны иметь возможность отследить историю ключей то есть со временем когда бог там менять свой старый ключ и на новые он должен убедиться что со временем никто с его ключами ничего не делал никто их не подменял не удалял вот третий момент алиса и боб должны видеть одно и то же состояние в котором находится база данных потому что злонамеренный сервер если он таковым является может показать одну историю ключей бабу что все хорошо алисия может показать совсем другую историю в которой будет совсем другой ключ и это абсолютно неприемлемо с точки зрения безопасности и последнее но не самое важное это в случае если мы например хотим показать нашу базу кому-то какому то аудитору чтобы он убедился что мы ее правильно формируем и случае если эту базу например взломают истощат все данные мы хотим чтобы взломщики и просто люди которые на нее смотрят со стороны ничего не могли узнать о том чьи идентификаторы и какие данные лежат в базе но при этом сервере обязан все строго доказывать именно клиентам которые пользуются его услугами прежде чем мы продолжим поскольку в докладе есть слово блок член я бы хотел немножко объяснить свои отношения вообще к теме блокчейна извиняюсь конечно же им после того как они друг узнали ключи друг друга нужен протокол защищенной связи потому что 0 на сегодняшний день если у вас есть только публичные ключи вы собственно остаетесь сами по себе приходится писать какие-то костыли у всех свои они чаще всего бывают хорошие бывают плохие но чаще всего их все сами пишут и так про блокчейн и я очень люблю технологии блокчейн я понимаю как она работает но мне кажется что в последнее время все что крутится вокруг блокчейна это осевого криптовалюты смарт-контракты это все прекрасно это все отлично но это далеко не все что может блокчейн и это далеко не вся его философия то есть блокчейн это далеко не только смарт-контракты и криптовалюты которые все стали сокращать почему-то до слова крипто мне как человеку занимающимся криптографии это особенно бьет по ушам вот затем блокчейн и конечно же не обязательно должны быть распределены что когда мы смотрим определение слова блокчейн где то вообще нету распределенная база данных там консенсуса не совсем остальным нет авто абсолютно не так вот и как бонус небольшой я приведу пример абсолютно был членом и технологий которая существовала до биткоина за четыре года до него поднимите руки те кто может назвать такую технологию вы наверняка и много кто пользуетесь но просто наверное догадываетесь что это блок ч есть такие люди взяли отлично ни одного пожалуйста нет да да правильно абсолютно правильно это гид я очень легко это докажу в верх если вы смотрите на то как работает git на дерево комментов то можем отчётливо видеть что каждый кометы в принципе блок в каждом к мите есть ссылка хэш ссылка на предыдущий комет и вот он пожалуйста блок и вот вам chain да если мы будем говорить например про смарт-контракты то пожалуйста гид хуки прообраз smart контрактов то есть эта логика которая работает облачение которое влияет на то как он формируется энтузиасты даже написали шуточную криптовалюту bitcoin это просто git репозиторий с git хуком который добавляет монет тому кто запушил commit хэш которого меньше чем хеш предыдущего комменты таки пруфов work оля bitcoin вот таким образом для меня блокчейн это больше такой математический концепт то есть та база данных обязательно распределенная но обязательно которая предоставляет контроль целостности всей всего что там лежит вот мы сегодня поговорим о технологии которые родилась на стыке двух это кёниг и ки transparency unix это академический проект который родился в принстоне и стэнфорде исследователями они решили помочь людям безопасно хранить но в частности публичные ключи потом посмотрим что не обязательно должны быть публичные ключи вот затем к этому проекту присмотрелся google потому что там все только на стадии нерабочего пруфов con суп то они это дело фыркнули скрестили со своим своей технологией сертификат transparency это такой большой лог в котором находятся все когда-либо выпущенные сертификаты для того чтобы например как это недавно была какой-нибудь сотрудник не выпустил тестовый сертификат на домен google.com вот эти технологии решают как я уже говорил задачу безопасного хранения публичных ключей которые привязаны к идентификатору пользователей ну помимо публичных ключей на самом деле можно хранить все что угодно так немножко минутка тонкого криптографического юмора дальше мы будем говорить об одной алгоритмической структуре попробуйте угадать как она называется вы наверняка про нее уже те кто был на докладах про блокчейн слышали да все правильно это дерево меркель вот кто знает как она работает четверо я вкратце расскажу то есть дерево мирт ли никакого конечно отношения не имеет к ангеле меркель эта мерка лето математик и про него кстати есть малоизвестный факт существует популярный протокол обмена публичные выключаю называется диффи-хеллмана вот и мало кто знает что полное название этого протокола это протокол диффи-хеллмана меркли восьмеркой придумал всю теоретическую базу для него диффи-хеллмана взяли и написали собственно практическую реализацию довели это просто для до реального до возможности реального использования вот поэтому протокол назвали в их честь но они сами когда их спрашивают они говорят что все так это протокол диффи-хеллмана мерки так что вот товарищ был очень умный и собственно что он придумал у нас есть например массив каких-то пуска я буду транзакции в блоке или это какие-то файлы вот мы от этих файлов них тут 16 от каждого считаем хэши затем берем попарно и от каждой пары мы ее вместе складываем конкатенировать и еще раз считаем хэши потом еще раз так делаем еще раз пока у нас не получится один хэш который называется корнем дерева вот и он как бы зависит от всех вещей которые были внизу вот и чем эта структура примечательно во первых здесь для того чтобы доказать что какой-то файл есть в этом дереве нужно всего четыре промежуточных ешь и они обозначены синими прямоугольниками вот то есть когда мы их предостав мы их клиентам предоставляем он попарно и хэшировать по очереди и в итоге получаю тот самый корень вот этот корень он чаще всего используется при чём всегда лежит обычного за головки блока вот все эти транзакции вместе с деревом они могут быть в принципе отдельно еще одно замечательное свойство этого дерева в том что каким бы он не она не было большим корень поскольку это хэш он всегда одного и того же размера до если у нас там кэш 266 битный он всегда будет 32 байт вот то есть еще раз каким бы ни был большим блог каким бы ни был не было небольшое дерево хэш всегда маленький имеют корень дерева вот и поэтому чаще всего flight ноды например блокчейна и каких-то других биткоины или каких-то других блоки блокчейнов они просто обмениваются корнями и если вам и этого достаточно для того чтобы проследить целостность блоков и если вам уже нужно какой-то какая-то конкретная транзакции с блока вы уже скачивать это блок целиком и проверяйте если она там то есть считаете дерева и убеждаетесь в том что все хорошо но такое дерево отлично работает на доказательства наличие чего-то в нем вот как бы нам придумать что-нибудь такое чтобы доказать еще и отсутствие немножко расширим сознание представим что у нас в дереве лежат вообще все возможные хэши от 0 до самого последнего состоящего всех бинарных единичек да то есть здесь случае если у нас 56 бит у нас лежат все хэши от 0 до 200 до 250 шестой степени минус 1 это очень большое число это настолько большое число что я думаю ни один из занимающихся холодам людей на этой конференции не будет способен такое дерево обсчитать что же делать как бы нам его использовать по факту все почти все листья такого дерева будут пустыми тоже них ничего не будет лежать да то есть у нас кэша второго уровня будут чаще всего хэшами двух нулей кэша третьего уровня будут до 2-х шине i2c шея двух нулей вот то есть мы можем такое дерево симулировать несмотря на то что она очень огромное и использовать только те части в которых реально лежат данные что нам это дает во-первых как здесь нарисована значит мы части которая не используется просто не храним мы на место тех узлов где у нас пусты ну то есть которые являются пустыми частями дерево мы просто ставим заглушку какой-нибудь например просто узел помеченный что он пустой вот и когда мы до него доходим мы понимаем что там ничего нет вот и что нам это дает по факту поскольку у нас в этом дереве зарезервированные места для всех мышей мы то есть путь до каждого из кэша поскольку это дерево сбалансированное двоичная и будет этим самым hашем то есть у нас 256 бит берем первый бит единичка идем налево нолик идем направо и так дальше путь до каждого хэша и является самим кэшем это позволяет нам строго доказать не только то что в этом дереве что то есть но мы также можем предоставить путь до например by ближайшего пустого узла и сказать что ну вот как бы дружочек вот такой у нас есть путь вот такой у нас есть корень дерева дальше тут ничего нет ты можешь все права лидировать и это будет являться строгим доказательством отсутствие информации в данном узле вот и поскольку собственно дерево как бы огромная но в то же время в нем ничего нет а но это называется разряженным деревом миракла она позволяет как мы уже сказали доказать наличие и отсутствие информации в базе то есть теперь после сегодняшнего дня отвечать 404 на запрос публичного ключа на уже просто нечестно далее мы хотим теперь с этим деревом и можем в него какую-то информацию класть мы теперь хотим с этим деревом работать в течением времени вот что нам в этом деле поможет конечно же блокчейн это иллюстрация на тему того как блокчейн помогает проводить безопасной выборы в каталонии вот что мы делаем мы разбиваем время на эпохи например там раз в пять минут мы собираемся изменения которые пользователи хотят внести в это дерево применяемых панова считаем корень дерева да и потом затем подписываем например вот этот корень и предыдущий у нас получается тот же самый блок чем просто он основан не на множестве блоков в каждом из которых лежит маленькое дерево а на одном большом таком дереве мерку вот это позволяет нам построить историю ключей которую нельзя изменить задним числом вот далее как бы нам решить задачу того чтобы алиса и боб видели одно и то же как сделать так чтобы сервер не предоставлял разные истории разным пользователям очень просто во первых можно завести каких-то аудиторов сторонних которые бы проверяли нашу базу мы это легко можем делать потому что в нашей базе данные лежат обезличенными но мы также можем использовать публичные блокчейн и и просто например хэши от каждой эпохи класть в тот же bitcoin эфириум и так далее эпоху за эпохой мы будем их туда складывать эта технология называется анка ринг и carene и в принципе используется не знаю очень часто не очень часто но вот в приватных блокчейнов когда они хотят казаться публичными вот то это используется то есть и уже из биткойна этот хэш точно никуда не денется и когда мы предоставляем доказательства алисе о том что вот у нас вот такое было дерево на там момент времени x она проверяет его хэш в публичном был общение убеждается что все хорошо вот таким образом мы добиваемся того что все пользователи в любой момент времени видят одно и то же следующий момент нам нужно не только доказать что все все видят одинаково но нам нужно также защитить данные пользователей которые лежат в нашей базе первую очередь мы защищаем сами публичные ключи когда бог кладет в базу ключ мы его складываем тоже с какой-то с каким-то случайным набором байт прогоняем через хэш это что получается называется дополнение или commitment вот она собственно и лежит в дереве и когда кто-то у нас просят объяснить структуру доказать что структура дерева правильно построена мы ему предоставляем вот этот именно дополнение но когда алиса им просят у нас данные баба мы показываем ей вот эту случайную соль отдаем ей публичный ключ она проводит те же самые операции и убеждается что на том месте на котором ключ лежит в базе значит лежит именно то что положил туда боб они кто либо еще так что если кто-то посмотрит на эту базу хитрый и подумает узнать что же там лежит он ничего не увидит но и это еще не все мы должны мочь скрыть само имя баба из базы мы не можем это сделать просто с помощью хэширования потому что ну перебирать имена пользователей but for сам может каждый школьник поэтому придумали такую замечательную вещь как verify брендом фарша он как же она работает алиса спрашивает у сервера да мне пожалуйста ключ баба и скажи по какому yandex ты его в это дерево положил сервер ей отвечает какой-то абсолютный белибердой от которую алису встают волосы дыбом вот и что же ты мне такой отдал сервер как ты можешь вообще такие вещи говорить все все окей значит вот мои доказательства и как же это работает сути сервер считает от имени папа цифровую подпись но это необычно цифровая подпись которыми мы пользуемся каждый день она детерминированное то есть если вы возьмете там любой там не знаю поносили библиотеку крипто библиотеку и посчитайте цифровую подпись от любой строчки там десять раз вас будет 10 разных цифровых подписей здесь она всегда одна и та же там еще есть несколько элементов которые туда добавлены но в принципе это работает именно так и затем хэш от этой цифровой подписи и используется как индекс в дереве для боба таким образом не имея приватного ключа мы вообще у нас нет даже теоретической возможности ну кроме того что там взломают симметричной фотография когда-нибудь нет теоретической возможности узнать что по этому индексу лежит чье имя мы можем даже на каждой итерации на каждую эпоху добавлять в базу просто какие-то случайные хэши абсолютно рандомны и это нам еще по также позволит скрыть истинное количество пользователей которые значит находится у нас базе на максимальное количество конечно тот кто в эту базу смотрит узнает да но точно сколько пришло и кто изменил что такие данные то есть узнать будет невозможно таким образом и алисы счастлива и боб л вот то есть мы научились также защищать и пользовательские данные которые лежат у нас базе вот и этот ключевой этот сервер ключей уже есть вы можете его скачать просто если политики transparency вот в год хобби гугла этом месте образы все работает конечно еще в там в стадии прав of concept но то есть тут уже рабочие вещи мы их тоже у себя уже в принципе ставим и начинаем использовать для того чтобы хранить публичный ключ и пользователей вот и так небольшой итог по этой технологии то есть ки transparency iconx позволяют нам доказывать во первых как от наличия так и отсутствия что немаловажно записи в базе вот позволяет следить за целостностью позволяют скрывать данные с помощью грифа и был рандом function вот и также мы поскольку наши данные обезличенные мы можем просто целиком нашу базу давать смотреть каким-то аудитором которые будут просто следи за тем что мы там у кеши кладём по тем правилам которые описаны вот при этом аудиторы ничего не смогут сказать о том что в базе лежит но проверять целостность могут еще одно немаловажное свойства в отличие например от традиционных блокчейнов таких как bitcoin эфириум здесь очень малый размер доказательства потому что у нас одно дерево всегда то есть максимальное вот этот путь аудита состоящий из хэши которые нужны чтобы доказать наличие элемента в дереве он составляет 206 конечно но это ну пару килобайт вот и в отличие от тех там 20 там 30 гигабайт который нужно скачивать для того чтобы убедиться что там транзакция есть в каком-то блоки вот так что я считаю это поистине уникальная вещь которую стоит изучать развивать и конечно же пользоваться окей мы разобрались с тем как хранить публичные ключи и добились того что алиса зная только имя баба может получить этот ключ именно в таком виде в каком его хотел положить боб теперь что с этими ключами делать извиняюсь опять мы где говорил что мы кладем не можем класть эту базу не только публичные ключи представьте что есть зале те кто уже менял паспорт легко было ну вот обычно это не самая приятная процедура да но в принципе такой базе в качестве ключа могут использоваться нами рада в качестве данных именно паспортные данные вот и использовать такую базу будет одно удовольствие потому что ну никто ничего не сможет пони сказать также например использую уже некоторые технологии используют похожую конструкцию например для хранения балансов кошельков то есть ключи у нас номер кошелька значение это его баланс и таким образом полностью весь аудит вся история например траты денег с кошелька она прослеживается и мы можем защитить нашу систему от проблемы например двойной траты когда у нас на кошельке 10 монет и мы здесь мы не тратим два раза вот мы в принципе любые другие задачи которые подразумевают хранение данных по их идентификатором именно то есть любые базы пользователей там где пользователь запрашивает информацию друг о друге мы можем перевести в такую безличную форму благодаря которой они будут уверены в безопасности своих данных вот теперь о том что же с этими ключами делать на сегодняшний день как я уже говорил все кому приходится работать с чистыми публичными ключами приватными публичными ключами приходится писать свои костыли не существует какой-то какого-то протокола общего назначения который бы позволял безопасно устанавливать соединение например между двумя абонентами используя исключительно публичные ключи есть конечно ssh но он как бы настолько серверный и плюс внизу у него работает у панаса цель а у панаса цель это такая штука который ну если вы действительно заботитесь о безопасность что держаться подальше вот им поэтому когда ватсап выкатил обновление своей криптографии у них помимо того что они сделали значит протокол для обмена сообщениями они еще сделали реализовали протокол для именно транспортного уровня который работал там внутри их xml но тем ни менее назвали его 0 вот и чем он хорош и во первых как я уже говорил здесь не нужны сертификаты можно обойтись исключительно публичными ключами никто не мешает использовать сертификаты но тем не менее они не нужны как обязательный элемент затем используется по умолчанию только самые на сегодняшний день современные алгоритмы такие как кривая 205 19 значит там чача какой-нибудь хэш блэйк это все конфигурируется можно даже использовать там прусскую криптографию китайскую неважно вот но в принципе по умолчанию для каких-нибудь устройств на которых критичен размер кода и скорость подходят именно вот эти современные алгоритмы которые умещаются там буквально 18 килобайт от нам удалось сделать демку где была ардуинка с датчиком температуры вот и анапа но из протоколу общалась сервером там дальше с брендом вот и все это уместилось 18 килобайт и ещё один момент что касается этого протокола несмотря на то что там кто то может сказать что это костыль очередной он настолько простой и его на самом деле вот когда читаю спецификацию где-то вот уже через там на третьем экране уже в принципе понятно как все работает в отличие например от тел с это 300 страниц у борисова текста где ну как бы очень сложно все понять и не слиты особенно не сильно большой специалист в протоколах и в криптографии вот я даже придумал специальный такой термин который бы объяснил внутреннюю внутреннее устройство но из протокола и назвал его рекурсивная мясорубка значит как эта штука работает то есть внутри у протокола есть какое-то свое состояние вот любые данные которые попадают внутрь это могут быть публичные ключи это могут быть результаты диффи-хеллмана это могут быть какие-то метаданные это может быть все что угодно они все попадают внутрь направлены хэш-функцию там на самом деле не совсем хорошо там функция основанная на хеши которая наружу может выдавать байты не фиксированная любой длинны вот и когда у нас пришла первая порция данных мы ее прогнали через этот хэш получили как какую-то белиберду затем пришли следующие данные мы к ним подмешали то что было на предыдущем шаге опять прогнали и опять что-то получили и так далее по кругу пока у нас все данные которые нужны для безопасного установления соединения не были переданы и обработаны вот в результате у нас на выходе вот этой мясорубке получается два симметричных ключах один для отправки другой для приема и собственно все то есть это все описывается довольно простой машина состоянии состоящую из трех объектов всего первое это сайфер стоит в нем содержится симметричных шифров аутентификации и счётчик который увеличивается каждый раз когда вы вызываете метод зашифровать или расшифровать затем вот эта самая рекурсивная мясорубка которая отвечает за то чтобы обновлять внутреннее состояние вот этот внутренний хэш и формировать из него новые ключи шифрования и обрабатывать их вот и и самый такой как бы модератор всего этого действия это хан шеек стоит он ответ ответственный за то в каком порядке передаются публичные ключи в каком порядке их друг с другом значит проводить операции диффи-хеллмана вот и на самом деле в ноги очень много патронов которые описывают различные сценарии например вы заранее знаете публичный ключ сервера или вы можете его не знать и он вам его передает или вы можете то есть вы можете использовать ключи которые долговременные которые живут ну очень долго или вы можете их не использовать использовать только эфемерные ключевым всегда используются эфемерной ключи они защищают от перехвата трафика в случае если ваш основной приватный ключ потерялся или был скомпрометирован вот и собственно все то есть вот эта машинка крутится она описывается там парой сотен строк кода и позволяет реализовывать безопасная безопасную установку сессии между там пример серым и и клиентам вот и когда это все увидел нету сильно очень понравилось я написал пруфов concept и мы начали общаться с автором этого протокола тревором перрином который также является с автором messenger signal и так любимого сноуденом вот и где-то вот началу лета сделали надстройку над фреймворком который называется но и socket она уже описывает именно формат данных в том виде в котором они должны ходить в по сети но на самом деле все что она добавляет это одно поле которое значит может быть любым то есть там можно сжать все что угодно например параметры соединения максимальный размер пакета алгоритмы которые используются да во вторых она добавляет выравнивание внутри зашифрованных пакетов это очень важна для того чтобы даже по зашифрованным данным никто не мог догадаться об их содержимым да когда вы например шифруете запрос get flash у вас размер пакета одной длины когда вы шифруете запрос get flash админ он у нас немножко побольше да пример простой но на самом деле повод таким косвенным данным люди могут делать довольно далеко идущие выводы о том что происходит например группа исследователей ту смогла по трафику идущему снег флекса определить со стопроцентной вероятностью какой фильм люди качают не расшифровывая трафик вот чтобы таких вещей не было внутри добавляется выравнивание любой тоже длины в пределах пакета максимальной 65 килобайт вот и все это позволяет строить на самом деле любые нужные вам уже протоколы верхнего уровня можно это использовать как транспортный уровень в ssh том же самом выкинуть о-па-на сосед можно это использовать в различных aiuti устройствах до добавим буквы с валюте как говорят можно даже заменить и чтить и без как бы это не звучало кощунственно вот нам и в принципе для того чтобы протестировать эту технологию собственно в принципе то это и сделали вот в нашей детке вот я уже рассказал было arduino и мы заморочились даже написали модуль для engine.exe приветствую спасибо вам большое за virgin x который собственно тир минировал трафик шифрованный но и сокетом на отдельном порту вот и был микро сервис на гол в котором тоже реализован но и socket и который собственно принимал уже трафик снежинок со перешив рованный и отвечал на отвечал обратно тоже по ножу а уже со стороны браузера был обычный ощутите ps который смотрел графики изменения температуры то есть у нас целиком вся цепочка взаимодействие начиная от железки заканчивая браузером до включая backend она вся абсолютно зашифрованное защищен а вот и я считаю что это довольно неплохой результат вот к тому же например в гол это все там решается тремя строчками также это очень естественным способом ложится на различные пираты биотехнологии когда например каждая но до идентифицируется именно своим публичным ключом так происходит почти во всех блокчейнов например вот в торе тоже для идентификации нодов используются именно публичные ключи в различных перту перчаток то есть там даже не надо никаких цифровых подписей там просто люди обмениваются уже заранее своими публичными тучами в качестве идентификаторов и потом могут сразу строить зашифрованы соединений не нужно изобретать никаких уже там как бы протоколов еще чего-то костылей уже все можно использовать как я уже говорил в голову замена тело со на 0 ну с помощью библиотека который мы написали занимает вообще там буквально три строчки просто мы реализовали интерфейс connection который просто делает right i ride а внутри него уже собственно но из работает и можно использовать эти типы мы так и делали потому что ну как бы понятно что это overkill для там орите устройств тем не менее во все понимают engine.exe понимает вот и там сделать какой-то пост запросу даже в ручном режиме просто посылая байты в сеть на железке можно вот и таким образом заменить одно на другое можно абсолютно безболезненно и пользоваться как бы ну вот уже сегодня таким образом мы к нашей инфраструктуре в которой можем хранить безопасно ключи добавили еще и протокол который может использоваться для обмена информации с помощью этих ключей вот и так мы узнали сегодня о замечательном хранилище ключей и другой информации связанные с идентификаторами пользователей которые в принципе организовано так что можно всю базу давать смотреть третьим лицам и мы сегодня узнали про новый протокол общего назначения который я считаю на самом деле у которого есть большое будущее потому что ну реально мир как бы не остановился на сертификатах во многих ситуациях и почему много говорю о сертификатах потому что если вы посмотрите на уязвимости которые находят в библиотеках шифрования то очень большую часть будет занимать именно парсинг сертификатов на то есть тут то тут какое-то поле не так раскодировать это тут недавно вообще в сертификатах ну то есть в одной из библиотек нашли уязвимость которая позволяет там сертификатах там то ли смайлики реки рисовать то ли какой-то кросс-сайт скриптинг проводить в общем ну там пол полный трэш вот здесь у нас как бы чистое сознание публичные ключи только математика и ничего лишнего можно добавить цифровые подписи никто не запрещает мы так и делаем вот мы это тоже цифровые подписи как бы сами по себе они завра плен и это ну в какие-то страшные структуры вот на этом у меня все я благодарю вас за то что вы слушали и полагаю у вас есть много вопросов спасибо добрый вечер меня зовут алексей спасибо за доклад вопроса на своем деле 2 1 чисто технически я правильно понимаю что сигнал овский протокол будет работать и поудить и по тисе пи ему в принципе от транспорта вид транспорта не принципиален есть впр называется vr guard они используют но из пою т.п. не ной socket но и socket он как бы поскольку там завязано внутреннее состояние на счетчике постоянно увеличиваем все увеличивающимся вот он как бы больше как бы его роднит тисе пи но ребята немножко взяли переделали передают вот этот счетчик вместе с пакетом и забабахали очень крутой vpn-сервер наносят ну и клиент конечно вот я советую вам на него взглянуть называется white guard вот вам работает прилепи и второй вопрос наверное больше связан с реализацией но и соки to touch the cure на новый модуль это просто либо на гул или но и socket это протокол есть реализации на гол есть реализации индекс модуля и есть тестовая реализация видите библиотеки для embody девайсов но вообще это протокол то есть он описывает формат передаваемых сообщений он как бы не ну не панацея ну вы просто можете например если вам захочется использовать прочитать с пеку и уделить внимание этим вещам которые там описаны какой получается но по сравним давайте так с классическим из ассоль интересом warhead то есть насколько например из асель более живущий по ресурсам по сравнению с ной зам какие есть преимущество как по объемом трафика так по и и по скорости собственно шифрование потому что для того чтобы какой рынок ездит на северный рынок выходить то там будет это важно да я понял вопрос на самом деле хороший вопрос сейчас везде используется тел с 12 потому что тело с 13 тормозят как ни странно корпорации у которых он плохо терменируйте или что-то там еще а ну и в нем всегда используются эфемерные ключи они не могут подсосов но подсовывать свои использовать его с 13 счастлив улетел с 1-го в нем если не ошибаюсь 8 раунд рипов там есть варианты есть варианты когда там эти киты используются к примеру то они могут даже сосали цельсию ну условно возобновить могут возобновить но это сыр сессии шифруются симметричным ключом сервера если у вас этих серверов 2 вам надо уже как-то эти ключи ну раскладывать то есть это эта проблема терменируем ну да ну если у вас 2 терминатора например то это может быть в какой-то момент проблема ну как бы сейчас не об этом в нозе в максимально нагруженным в максимально сложном паттерне полтора роман трипа то есть сначала уходит в мерный ключу затем сервер отвечает и затем клиент уже может посылать шифрованные данные то есть раз мы экономим на пытаемся вот два но из по большому счету описывает стадию хан шейка которая благодаря отсутствию парсинга сертификатов отсутствую там тяжелых алгоритмов вроде обычного диффи-хеллмана там не эллиптического и даже обычных эллиптических кривых которые там во много раз медленнее чем для 2 519 то есть он ну на наших тестах он был в случае когда нитки пола его до 10 раз быстрее если используется keepalive то после hand шейка они сделали сам работают в принципе одинаково то есть там уже используется симметричное шифрование там а есть просто этим а я сам шифруются блоки там как бы особо никакой разницы нету там ну padding ну там убрали 20 байт вот если мы говорим о ситуациях когда у вас постоянно клиенты отсоединяются и подсоединяются то здесь но из ну просто как бы очень сильно выруливать тело да есть у тел с а вот эти самые способы возобновления сессии но на очень большом парке серверов там где нужно эти счастья . вот flyer например сделал свою реализацию то есть у них очень тоже много серверов они написали свою систему которая вот эти симметричные ключи которыми шифруются эти фантики ты о них как-то вот ну manager at и раскладывают по серверам ну это жесть ну вы просто почему вопрос угла была инициатива с протоколом quick если помните такой помните да помните что с ним снах нет плюс и конечно появились но они реализовались в http 20 который нужен вытекающей quick он как бы повыше все-таки уровня я понимаю вот а здесь ну у нас просто нет выхода у нас мы работаем в частности ну понятно там бэг энд как бы там можно все еще сделать на сердце просто длину вот ниши куда это куда этот протокол лучше всех под первая настройка в первой очереди тойоте то есть вы вряд ли в скомпилировать какое-то тело с библиотеку размерами 50 килобайт бед 50 килобайт ну ну 40 embed ну 48 паулюса 348 этого недостаточно и там вот в эти в этих 48 килобайтах не будет ну ну она как-то там что-то будет но это самые там какие-то тоже примитивные алгоритмы довольно там возможно медленно и неэффективные вот то есть народ на самом деле с им бедам мы используем бед вот но он не везде влазит вот и он тоже то есть кодовая база то есть чем еще хорош хорош но из вот этот а так шарф с у него гораздо меньше меньше гораздо меньше кода который нужно менеджере тестировать вот и это тоже очень сильно влияет то есть мы не можем обновлять embed постоянно на железках хотя вот в нем за последнее время тоже вышла там список багов связанных в том числе с парсинга стефи катофф и ночь позволяет делает аутентификацию по публичным ключам без сертификатов а это избавляет от необходимости поднимать например свой последний вопрос они смотрели ну ка бы кто слаб и вообще кто стоит за протоколом носит ну кроме как бы воцап с фейсбуком наверное да там рядышком где-то 20 купил да за ним стоит сигнал но это это те же люди которые сделали сигнал на которых молятся все параноики в мире до включая там кевина спейси теперь уже спасибо вот да так что это вот те же самые ребята его сделали еще вопрос вот спасибо огромное за когда клад действительно очень интересно хотел спросить вот мне показалось что но из по крайней мере он довольно здорово уязвим к таки человек посередине потому что собственно вот одна той схеме которая изображена да в том случае если соответственно мы подменяем сервер да то как бы вся история вот при этом ну понятно что в использовании сертификатов есть ряд проблем то и overhead в ряде случаев там и так далее но тем не менее хотя бы какая то такая вот есть может быть не очень иллюзорная защита от такой как будто таки то есть вот я тебе я поняла чего вот и кроме того еще в в алгоритме соответственно когда вы рассказывали об обмене ключами вот до того да там где была соль да там там же бог должен послать ту же самую соль элис нет нет разная а как тогда это будет равно просто шлет свой публичный ключ на сервер не не мы можем в принципе вернуться к ты как бы схеме ну или лаком как бы такое вот и последнее что еще как бы это ретроспективно а доказательства отсутствии ключа проще наверное то есть вот то что сейчас там есть там логарифмическая сложность да вот дерево примерка там все это вот фильтр у блюма констант на и как бы будет работать быстрее то есть сразу можно понять что данного ключа нет на самом деле там даже до логарифм очень редко доходят потому что мы потом труд ну там нет нет если как бы честно рисовать это дерево то всегда будет то есть всегда константам 256 уровней доказательства всегда вы всегда мы но мы не обязаны это делать то есть если у нас нету как бы соседи рядом мы можем просто положить нот в это дерево и сказать что то есть если у нас какой то не 0 not лежит в каком-то даже верхнем уровне значит ну все как бы дали рыночным очень сама радио желание поэтому ли да да да вот то есть она у нас так потихонечку потихонечку заполняется и там ну даже вот до 10 но это надо очень много данных чтобы вы считаете что в принципе это правда как будут использовать вместо просто k40ab дерево гектаров хэш не менее если мы хотим доказать что у нас ключа нет если мы хотели когда что ключа нет мы просто пытаемся пройти по пути который они своих в фильтр блюма тогда соответственно ладно окей пока не готов и проговорит ладно если вернуться к началу кого брался по поводу человек посередине вот вы можете чуть-чуть как бы раскрыть ему просто как бы смотрите в принципе да как бы вот история очень как будут интересная да надо будет посмотреть повнимательнее яд не был знаком с вот этими проектами честно говоря вот но как бы хотелось бы практически попробовать использовать вот но при этом есть подобное как бы подобный риск на вот что вы об этом думаете ну то есть смотрите здесь как бы и боб тоже должен следить за тем чтобы его ключи никто не изменил подразумевается что когда вы пользуетесь этими системами и то не только пользователи которые получают информацию из базы проверяют целостность но и пользователи которые кладут информацию в эту базу они тоже должны периодически там у нас должен быть грубо говоря дополнительный какой-то канал да да которой все тому а не надо за залететь что не тупо по метро до тройника мой ключ подменили потом спасибо большое спасибо возможно я просто что-то упустил вот вы не могли бы пояснить какую информацию алиса должна передать на сервер ключей чтобы получить данные данные баба просто его и же просто имя да то есть ну подразумеваться что там еще перед всем этим дат какая-то там авторизация аутентификация есть он уже не связано с криптография но в принципе то есть подразумевается что алиса просто просит у сервера ключика ну и мин именно по имени запрашивает данные баба вот а он должен не доказать что это именно ну все все именно так как было описано второй вопрос вы предвосхитили вот как алиса доказывает серверу что это именно она обращается за данными баба а это уже не входит в компетенцию этого сервера то есть тут уже больше бизнес-логика то есть запросить данные баба может кто угодно но просто мы смысл вообще всего это его действие что мы переводим вот атаки оффлайна таки да то есть что можно снова скачать базу и и прогул про брутфорс мы их переводим в онлайн атаки то есть для того чтобы узнать данные какого-либо пользователя нужно именно пообщаться сервером чтобы он выполнил какую-то логику там посчитал эту цифровую подпись да там все остальное и отдал их но в принципе да зная номер там телефона до или имя баба любой ну во всяком уже в терминах этой системы должен иметь право эту информацию запросить то есть ну ну вы поставите да перед этим серым какую-то организацию но это уже не входят в компетенцию и 2 вам мой последний вопрос там какой-нибудь сторонний убит вообще всей этой технологии проводился сейчас даже например вот технология verify брендом фанкшн и и еще не стандартизировали это все очень новая то есть там пару месяцев назад ну как это бывает со всеми свежими алгоритмами нашли дырку и и быстренько закрыли переделали то есть это на самом деле все эти технологии они еще вот это даже не пруфов концепт это еще раньше то есть это все очень настолько свежо и ново то есть ну да ну мы-то положим себе в production company мы не боимся я потому что читал все эти white paper и и по новую и по transparency как бы ну да ну математик тоже бывает косячок но нет гарантии что в каком другом алгоритмы да не найдется до завтра дырка ну сколько можно бояться на то как бы брать и пользоваться большое спасибо спасибо вам спасибо за доклад очень интересно у меня два вопроса вы упомянули что можно хранить данные в биткойне либо в эфире yummy каким образом биткоине это довольно хитрым способом делается создается специальная транзакция то есть правильно понимаю что оба вот этих вот участника должны иметь биткоины чтобы осуществить ну не биткойна иметь а просто иметь доступ к блок чем то можно поставить даже не надо ничего ставить есть всякие там браузер и этих сами сами bitcoin до должны иметь или нет нет не обмена но чтобы положить то есть они участники иметь биткойнов не должны но да то есть положить информацию в bitcoin эфириум стоит денег но как бы это не бесплатный способ транзакция получается между ничем все равно кладется биткойн да а так так то очень многие делают есть например сервис который называется пруфов экзиста мтс то есть вам нужно доказать например чтобы просто какой-то файл документ существовал на какой то момент времени вы берете его хэш и создаете вот такую глупую транзакцию которая идет из ниоткуда в никуда данного в которой содержится вот этот хэш той какой-то там еще остается там порубать для префикса вот и и сервис как в которой вы можете там сгружать свои документы они тоже там строят локальный там блокчейн из когда говорят что вот наш блок чей может там процессить 5000 там транзакций в секунду вот они просто локально это все цепочкой хэши скрепляет и потом в какой-то момент просто раз их и шик кладут вот просто в bitcoin понятно а второй просто грифа брендов как оно устроено в общих чертах ну как я говорил она напоминает очень сильно цифровую подпись но то есть есть про его такие есть то есть прямо у сервера есть приватный ключ у того кто у алисы должен быть публичный ключ сервера вот сервер своим приватным ключом подпись получается там как ну лан давать сервер до своим приватным ключом подписывает слова боб вот но это подпись она всегда одна и та же будет сколько бы раз он и она детерминировано потом он от этой подписью считает хэш да и вот эти 2 56 бит уже идут в базука ключ алиса когда получает из базы вот этот хэш она также получает от сервера эту цифровую подпись он не обязаны предоставить это вы сейчас просто нет рассказать о profile and the gnu сайдинг он же тоже все время одинаковой если мы то очень много ран давно не добавляем ну санин баба будет одним сайдинг алисы будет другим да да и здесь вот но нам собственно это и нужно нам нужно просто превратить слова боб в какую-то псевдо случайную последовательность но таким образом чтобы доказать алисе что мы это сделали не абы как а именно с помощью нашего приватного ключа это называется кстати zero но лишь пруф есть такая вещь то есть мы доказываем какой-то факт алисия которой она может проверить с помощью публичного ключа сервера я просто могу просто ремонта дверей от санина подключается ну про от просто по цифровой подписи это отличается тем что цифровая подпись всегда разное если мы возьмем обычную цифровую подпись сколько раз мы от боба значит посчитаем и и она каждый раз будет разная хэша будут разных почему но они так устроены в обычных цифровых подписей и сидис и всегда используйте я подпишу один текст он будет время разной да вы сидится в протоколе всегда при подписи рандомные константа она является частью процесса формирования цифровой подписью спасибо еще раз спасибо большое спасибо всем рада был представить свой доклад"
}