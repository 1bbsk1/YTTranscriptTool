{
  "video_id": "HZXz5guN6R0",
  "channel": "HighLoadChannel",
  "title": "TechTalk \"Kubernetes в Мир Plat.Form\" / Алексей Назаров",
  "views": 470,
  "duration": 651,
  "published": "2024-04-10T06:03:23-07:00",
  "text": "Здравствуйте С вами конференция Hell п+ 2023 и сегодня с нами в студии Алексей Назаров начальник отдела в компании мирп Здравствуйте Алексей наверно по традиции начнём Где вы работаете И чем вы занимаетесь Я работаю в команде инфраструктуры в мир ПТФ занимаюсь линуксом автоматизируем инфраструктуру поддерживаю инфраструктуру как код и одно из направлений - это предоставление платформы кубес внутри компании Ну это что-то такое типа внутреннего облака или или нет ну можно как оно всё начиналось скажем так если по истории расскажете если по истории рассказывать то разработка ушла частично от Монолита к микросервиса а микросервисы надо как-то поддерживать масштабировать доступность к микросервиса и сейчас как бы как говорят дефакто стандарт это куртис вот и мы используем кубернетес как оркестратор микросервисной контейнерной архитектуры и это всё на своей собственной инфраструктуре как бы железный Да да у нас воркеры работают на железных серверах чтобы обеспечить всю мощность А у уже инро инфе воркеры мастера ингс могут работать и на виртуальных серверах А вообще как бы Везде как бы кубер головного мозга или ещё есть какие-то места где где не кубер Или есть какие-то отдельные места где конкретно Ну конечно же нет потому что кубер надо использовать там где его требуется использовать То есть если у вас какой-либо Монолит то скорее всего вам р не нужен лини нагружен базы данных Я думаю лучше не использовать р для таких ситуаций А насколько Вы инвестирует в сам кубер то есть установили и всё Или там что-то пишете для него что-то делаете постоянно настраиваете насколько это активно Ну в нашей команде инфраструктуры куром занимается четыре человека это не время которое занимается команда куром мы естественно проводим r& Тестируем новые разные решения что-то выходит в тесты в прот что-то не выходит у нас был например написан свой оператор который предоставлял Space как сервис Он управлял доступом предоставлял доступ и разграничения доступом группам ль настраивал реквест лимиты Но вот провели нашли для себя оператор посмотрели что он может протестировали его и теперь мы используем его а от нашего решили отказаться потому что команда которая разрабатывает и поддерживает капсюль естественно гораздо больше обширнее пони мы е шарим секреты между проектами пейсами Ну секреты это конечно там какие-нибудь шные сертификаты не прям секретные данные ещё через капсюль мы настраиваем N полиси настраиваем кивер например в режиме в котором нам требуется примерно так организация накладывает какие-то свои такие требования на програмно обеспечение кото соотвественно вот этот вот оператор у вас я думаю был в соответствии написан в соответствии с организацией то есть там разделение на юниты не знаю какое-нибудь разделение спейсы а для того чтобы смиг на Капс вам надо бы надо было как перестраивать процессы скорее всего или что-то такое делать Ну распространение мссо как сервис у нас обеспечивается Через наш проект к нам приходят команды Например на созданием либо настройкой в нашем гите плоская структура то есть папка это название кластера а внутри папки это ямк с названием и в нём как раз хранится файлики сердишься под такую структуру и в том числе и капсюль мы перенесли на такую структуру то есть пользователи Ну а у него нет своего какого-то там языка D или чего-то такого или вы как-то конвертирова него у него отдельное сердишься какое-то разделение там не знаю на Production Stage ПК или что-то такое конечно разделение имеется У нас есть бета тестовые и продо вые кластера вот бета кластера - это кластера команды инфраструктуры где как раз мы Тестируем новые решения Тестируем новые версии операторов либо самого ку Бернеса И если всё удачно Нам нравится мы знаем что пользователям тоже это понравится мы уже внедряем это в тест и в прод вот а тестовые и продо вые кластера - это кластера Где живут наши пользователи Вот наши пользователи - это разработчики тестировщики админы разных проектов Ну инфраструктура описывается одинаково для всех кластеров Или всё-таки есть какие-то отдельные конфигурационные конечно кубернетес как раз для этого и использовался чтобы унифицировать среды и у на тестовые так и продо вые они однообразные кластера мы обеспечиваем однообразие нашим Ну для кубера мы написали не стали использовать решения которые предоставляются коммьюнити кубера например там кубер спрей мы чтобы знать про кубер непосредственно не на Верхнем уровне а и на низком чтобы мы могли его поддерживать вот Вот и чтобы мы могли хорошо поддерживать понимать как работает cuber мы написали свой unib PlayBook с ролями через которые мы как раз настраиваем и обновляем наши кластера Угу А вообще ну вот для меня например как для разработчика который хочет сделать кластер То есть получается где-то в гите делаю Файлик И всё И у меня сразу мне куда на почту прилетает урол кластера как к им подключиться или как вообще это У нас есть общий чат для всех пользователей кубера мы добавляем туда всех всем помогаем Кто к нам обращается плюс у нас есть внутренняя Вики где мы пишем разнообразные инструкции Как пользоваться Как получить доступ Как создать себе mspace например вот одно из хороших решений На мой взгляд У нас есть сервера управления куром на них мы настраиваем разнообразные приложения плагины для авторизации управления куром вот на мой взгляд это как раз упрощает работу для пользователей и им Достаточно знать в принципе только базовые объекты в самом кубе чтобы деплоить А кто разворачивает Вот кубер который разворачивает куберы кубер разворачивает кто его делает кто жит стражей Ну кубер разворачиваем естественно мы Анди пбм Ага хорошо а вся поддержка у инфраструктуры хорошо а вот этот вот кластер когда разворачивается он просто голая инфраструктура или там есть ещё какие-то дополнительные фишки которые вы накручивает Ну в кубе мы что-то можете порекомендовать может быть в кубе мы используем вс все самые хорошие решение которые мы находим Игрес балансе интеграция сватом для использования секретов автосортировка воркеры то есть мы например объясняем пользователям что вот у них есть какой-нибудь проект они хотят заехать из своего проекта нам к нам в кубер но не хотят чтобы на их серверах кто-либо вообще присутствовал хорошо Ну кубе - это кубер но сейчас Как стильно модно молодёжно использовать облака Почему например не использовать какие-то либо внешние облака либо например внутренние какое-нибудь Privat Cloud сделать э согласен а блока это круто и здорово Я думаю про облака можно говорить много и долго но отвечу вот таким образом первое я вот ни разу не видел чтобы облака предоставляли э SL п девяток Угу и второе у нас в компании хорошая команда инфраструктуры на всех слоях и в принципе Мы даже даём сервисы которые например есть у облаков Алексей спасибо большое было очень интересно встретимся на конференции спасибо С нами был Алексей Назаров и ведущий Абашев Алексей"
}