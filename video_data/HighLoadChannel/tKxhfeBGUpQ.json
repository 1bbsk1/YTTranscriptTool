{
  "video_id": "tKxhfeBGUpQ",
  "channel": "HighLoadChannel",
  "title": "Как с помощью BPMS (jBPM) заместить продукты SAS / Олег Терёшкин",
  "views": 146,
  "duration": 2855,
  "published": "2023-10-06T07:23:06-07:00",
  "text": "сейчас мы раздобудем кликер и сразу начнем пока не начали так вот он уже подходит у нас в конце будет небольшой подарок по классике за самые интересный вопрос или за самые интересные вопросы Поэтому будем рады его вручить самому активному из вас Окей давайте коротко расскажу про себя я сам занимался разработкой последнее время в Сбере занимаюсь Solution архитектурой более фокусная и руковожу небольшим с точки зрения сбера it подразделением Что у нас сегодня заготовлено я расскажу про тот продукт над которым мы занимаемся в Сбере для чего мы это все делаем Оттуда будет понятно что у нас есть компоненты саса и в этом году нам пришлось задуматься об их импортозамещении потому что есть ряд предпосылок которым этому последовали далее покажу прям дыма мы посмотрим видео как выглядит jbpm и разработка внутри бизнес-процессов покажу как там устроена интеграции с той же кавкой например как выглядят лоукод компоненты дальше погрузимся в общую архитектуру для нашей платформы как это выглядит с учетом обвязок вокруг со всеми базами кавками и так далее ну и заключение поговорим про результаты нагрузочного тестирования что в принципе можно достигнуть используя ppms системы на примере gpm Ну и некоторые рецепты решения проблем с которыми мы столкнулись в ходе проведения наших тестов поехали Кто мы такие нас достаточно легко узнать Я думаю многие являются клиентом сбера либо являлись либо еще будут и получали коммуникации из разряда о форме кредитную карту или там не знаю оформим потребительский кредит или там оформить какую-то подписку экосистемы Вот это мы то есть вот мы формируем эти предложения мы сегментируем мы их таргетируем то есть полный жизненный цикл подготовки этого предложения он делается на нашей платформе если говорить про общие цифры то это более миллиарды предложений в месяц для всей нашей клиентской базы которая более сотни миллионов в тотале Это около 10 тысяч всяких специфических компаний причем здесь сас исторически сложилось что компания сас представляет широкую линейку продуктов которые может использоваться в кросс-селле она может использоваться в рисках у них есть там различные кубики которые ты покупаешь и можешь таким образом купить время за деньги то есть пока ты будешь разрабатывать какую-то платформу на которой можно запускать эти процессы она у них есть из коробки поэтому многие сначала покупали saas На нем запускали А дальше думали что с этим делать там не знаю писать что-то своё на питоне либо внедрять какие-то опенсорсные компоненты Ну и в принципе наверное многие из вас знают такие компоненты как Enterprise гайдема кто-то может быть сталкивался там с последней версией платформы саса это вая э я в нашем сегодняшнем докладе буду фокусно рассказывать про компонент SAS ртм это реалтаем коммуникации клиентам которые по сути выглядит следующим образом то есть есть какое-то событие которое происходит с клиентом и есть какое-то действие которое мы должны по этому событию значит поэтому событию направить коммуникацию клиенту Ну вот тут три типовых кейса я проведу расскажу про один из них например там так бывает что клиенты забывают карты в банкомате либо там банкомат Не дай Бог ее заживал и что дальше происходит обычно мы звоним на входящую линию колл-центра и там вот начинается нажмите один или не дай Бог голосовой помощник В общем всё вот это вот для того чтобы лучше клиентский путь мы можем это событие словить неким движком понять что оно по каким-то методом связано именно с вот этой проблемой и дальше в какой-то конкретный канал через который Клиент уже будет взаимодействовать с банком мы подложим там специальные роли где у него будет инструкция условно Делай раз делали два и всё будет хорошо что же случилось в начале года SAS как и многие компании прекратила взаимодействие Что значит прекратилось взаимодействие Мы в моменте лишились экспертной поддержки То есть если там что-то на проме происходит не так то у нас был всегда я это называю Звонок другу да То есть вы могли совершенно там исходя из той лицензии которая у нас есть мы могли обратиться в экспортную поддержку и там проблемы были решены также у нас было команда которая выполняла доработки на этих компонентах то есть именно уже как третья линия Да и что ещё поджимало это окончание лицензии То есть у нас там как говорил большая линейка продуктов конкретно если говорить про Реал Тайны движки у нас вся эта история заканчивается в этом году вот буквально уже скоро и соответственно с 1 января она превращается в тыкву и в общем-то все эти компании прекращают работать ну и самое время задуматься что надо мигрировать Мы на самом деле стратегически в Сбере об этом думали уже давно Поэтому был некий Road Map по различным компонентам Не только сасу это там и Oracle это там всякие вендорские продукты от IBM что у нас было с точки зрения требований То есть у нас была коробка от саса там работали определенные квалификации люди которые могли без специальных навыков разработчика Да там не писать Java код там либо там на гол либо на питоне еще чего-то настраивать вот эти вот стратегии как мы вот обсуждали да то есть события надо какое-то действие и одно из важных древних это наличие в инструменте лоукод На уход компонент то есть хотелось чтобы аналитик используя только мышку желательно мог в неком дизайнере набросать этот процесс его скомпилировать там дальше там некая труба и это там не знаю тестирование Возможно если оно нужно и дальше это вся на все эти артефакты летели в промытом исполнялись это на самом деле там центровое важное важное требование следующее по важности требования Это хайлоут история у нас если посмотреть все источники которые поступают в реалтайме и посмотреть там реагировать за день там посмотреть пиковую нагрузку то она порядка там 50-60 тысяч ТПС rtdm справлялся с такими нагрузками там может быть не с оптимальным количеством железа но оно работало также нам желательно был опыт на Джаве Мы в основном так как банк у нас большая часть разработчиков пишет только на Джаве некоторые там немного пишут нагло может быть чуть-чуть на скале Ну и такое я называю сладким требованием хотелось избежать болячек сасов в чем была проблема когда ты берешь коробку у него есть определенный интерфейс взаимодействий чтобы тебе ее внедрить тебе нужно какие-то адаптеры написать Я не знаю Кафка туре стресс-тукавка ещё что-то у нас все события в реалме приходят в кавку дальше мы должны подписаться на какой-то из топик который отвечает за конкретное событие и дальше применить к нему какой-то бизнес логику обогатить а-а возможно вызвать какие-то там rest grpc интерфейсы и в конце принять решение о том э там отправлять в итоге ему коммуникацию или нет специально для конференции Я подготовил небольшое демо прошу коллег Сейчас на него переключиться таким образом выглядит дизайнер дизайнер jbpm здесь уже подготовлены компоненты Сейчас я покажу их тут сильно больше чем мы используем и в основном используем бизнес-процесс мы используем дата объекты без них никуда иначе невозможно В принципе какую-то логику обрабатывать это dmm таблицы и ddrl файлы давайте уже посмотрим как выглядит сам процесс это вот такой мог процесс который делает следующие вещи он читает что-то из сказки потом применяет бизнес правила дальше небольшой Сплит по логике там закончить процесс либо пойти дальше в случае если Идем дальше Еще одно правило и в конце концов кидает сообщение Вот пример Как настроить например вычету из сказки соответственно есть в бэке всего этого набор конфигов которые надо указать boostraps сервела если сертификаты и так далее из интерфейса достаточно выбрать название топика и указать в Какую структуру положить этот объект здесь соответственно вот мы видим класс и название перемены которые дальше по процессу можно использовать соответственно Как создать этот класс для этого сейчас мы перейдем в отдельный кубик в отдельный эссет который отвечает за создание даты объектов в нем уже заготовлено те поля которые в конце мы будем кидать в кафку то есть чтобы он парсил тот же сон тут собственно три поля можем указать их типы можем удалять можем добавлять причем стоит отметить что здесь можно парсить структуры различные вложенности не только плоские То есть можно здесь указать еще один класс отсюда на него сослаться это будет все работать пример добавления поля открывается формочка пишем название поля как оно есть во входящем джейсоне Ну и можно Указать тип Ну либо опять же Вот какой-то его класс соответственно этот код генератор который генерит вот такой java-класс с ничего писать не надо он его автоматически сгенерировал за вас дальше название этого класса соответственно указывается в названии самого процесса и можно исходя из него уже применять к этому объекту который вычитали сказки какие-то бизнес правила соответственно под это есть определенный кубик который называется бизнес-рол бизнес-руле достаточно указать ссылку на саму дмн таблицу на самом деле Main артефакт и дать ему по классике некие входные данные показать куда положить выходные данные Сейчас посмотрим как выглядит настройка с самой таблицы это достаточно простая штука во всяком случае когда ты уже настроила на все работает дальнейшие изменения точно простые иногда там указал какое-то поле неправильно оно не работает Ну нервы бывает не выдерживает собственно Вот сама таблица говорит вот у нас есть объект класса Input у него есть три поля в зависимости от этих полей он на выходе будет давать результат это стринга Дима нарезал там ро-12 вот сейчас добавим еще какое-то условие и на выходе дадим ему роут 3 в конце демо будет кинем два разных сообщения которые соответственно в зависимости от этих переменных либо будут заканчивать процесс либо идти дальше также можно выбрать хитполисе но это классическая история в демон таблицах Очень полезная в зависимости которые вы реализуете далее после того как вы какой-то вот и в сценарий Обычно разработали нужно разветвить логику то есть либо пойти налево до условно если говорить про процесс либо пойти там направо Вот И там в зависимости от этого может быть различные целевые действия у нас могут быть события которые просто мы фильтруем да просто откидываем вы ничего с ними не делаем собственно ту переменную которую мы указали на выходе мы можем использовать в Gateway которые которые эту логику разветвляются соответственно также выбираем этот результат эту переменную процесса и выбираем Condition здесь можно либо выбрать совпадающего списка тут интерфейс немножко пролагал вот он генерит вот такой кусочек Джава кода сейчас мы вернемся и он вернет значение То есть можно брать дефолты он пойдет наверх дефолт это то если этот случай когда в той Диман таблицы не выбрано Ни один ни одна из строчек не пересекалась также есть возможность Вот и в сценариев то есть всякие услуги сделать проверки на нал на больше на меньше зависимости от типа переменной до соответствующей проверки можно там более сложные функции формулы вставлять мы пока этим интерфейсом этим функционалом не пользовались тут надо простой пример просто сравнение на 500 какой-то переменной и способен транзакции Вот она сгенерила такое собственно последний шаг это запись сообщения в кафку Ну тут все как и на вычетке указываем название топика и указываем дата Объект который Туда положить вот он название этого объекта оно было правильно кстати сформировано я про это там забыл сказать Теперь что мы можем сделать Теперь мы можем поскольку все это разработано мы билде мы диплоим это там devstand записан на даст стенде соответственно на в проме это выглядит по-другому там есть некий Si Я чуть позже про него расскажу вот мы видим этот артефакт он сформировался переходим в кафку кидаем json Вот соответственно допустим вот такой и поменяем транзакцию чтобы была она чтобы она пошла до конца процесса чтобы это все дело тестировать и видеть что происходит Вот мы видим на выходе одно сообщение сформировалось ожидали два почему так произошло Можно перейти в значит отдельный раздел где видно полное исполнение процессов здесь полный Лог но видео аудитор реализован собственно это сами переменные вот мы видим ролл дефолт сформировался и можно посмотреть как это выглядит здесь конечно Тут такой детский пример в реальных процессах когда этих кубиков по тысячу на одной схеме очень сильно помогает Ну собственно вот второе сообщение которое мы кинули здесь это бизнес правила сработало соответственно он дошел довел процесс до конца Так теперь Мы возвращаемся к презентациям Давайте посмотрим Из чего состоит вот когда мы нажали кнопку диплоибилд что вообще произошло по факту сформировалась два файлика помнит джарник который он запихнул во дворепозитории дальше с диплоид на конкретную машину jbpm устроен Ну то есть основные его основные его элементы это дизайнер который мы смотрели и это такие сервер так называемый это то что исполняет конкретно разработанный артефакт прям есть совсем открыть жарко посмотреть что там внутри это свг это прям вот та картинка которую мы смотрели ничего интересного 2xml-ника по фактам то есть расширение bpmen по факту внутри это xml как и в любых наверное Java vpm-системах это drl правило потом два класса которые были на входе на выходе Ну и конфигурации всякие xml-ники и конфигурация которая отвечают за то как этот процесс будет исполняться то есть мы можем включить аудит мы можем его выключить мы можем соответственно включить более расширенный Лог можем это выключить это можно регулировать тоже из того интерфейс которым про который мы с вами смотрели как у нас секунду Как выглядит Общее решение у нас в нашей архитектуре то есть Вернемся назад есть источники событий их как я говорил там порядка 20 они стремят в кафку К сожалению так как в банке Очень много контрагентов очень сложно договориться чтобы они передавали только полезную для тебя информацию У нас там есть данные вот эти все передадим А то что ты уже тут Забирай мы под тебя что-то отдельно фильтровать не будем поэтому первым после Кафки элементом стоит флинк и в принципе если посмотреть дальше то часть задач которая делает BP можно было решить на флинке Но это дорого это дорого потому что изменения логики вот как типа dmm таблицы все равно править Джава код надо держать армию джавистов которая будет этим заниматься бизнес-требования летят по несколько штук в день бывает даже больше если там определенных асизм Соответственно что делает Флинт Флинт забирает сырые события делает какую-то предфильтрацию тех которые мы в принципе вообще не используем дальше для компании и перекладывать другой какой-то там неважно дальше консьюмер группы которая настроена эти сообщения выхватывает и тут может быть могут быть различные сценарии в зависимости от сложности компании типа компании основные здесь изображены это поход в базы есть случаи даже прямых походов в случае 40 просто какие-то транзакционные запросы код компонент который позволяет выполнять Ну там правда есть определенные нюансы я про них позже расскажу с точки зрения производительности Вот пример это может быть что пришла какая-то информация по транзакции там есть номер карты клиента мы там дальше мало чем можем сделать у тебя внутри процессу собственно есть какие-то специфические сервисы у нас части развернута на виртуалках в спрингбуте часть мы перевели в openshift такое некая такая миграция также есть специфические базы типа кассандр где лежит какой-то горячий кэш Возможно там от другого системы источника Ну и напоминает это все на самом деле некую шину когда-то что-то послушал сходил обогатился данными применил какой-то бизнес правила пошел дальше либо закончил процесс в конце концов это если если секс то ты попадаешь там в интеграционные взаимодействие 5 и кидаешь некое там сообщение как я говорил либо для VR либо там вот те эсэмэски которые мы получаем Да у нас есть интеграционная Кафка где мы там пишем текст СМСки ID клиент номер телефона и она отправляется уже конечному пользователю сейчас перейдем к блоку нагрузочного тестирования я сразу скажу что то есть я сейчас покажу успешный кейс как это может работать но из коробки это не работало и пришлось сделать определенные инкременты движку которые которой есть из коробки соответственно исходя из архитектуры увидели что основные компоненты от Кафка флинк и jbpm у нас есть инструмент который подает нагрузку что он делает он просто берёт j-соны и стримит их также в кафку имитирует то что к нам приходит реальные события далее флинк что-то фильтрует и передает jbp у нас получается конечная нагрузка которая на эту консилмер группу собственно приходит мы делали два теста это тест максимума и тест надежности по У нас есть некая в Сбере правила хорошего тона по методике Обычно она заключается из трех пунктов нет Сейчас расскажу про два Как проходил тест то есть мы изначально начинаем стримить со скоростью 2000 транзакций в секунду и каждые 15 минут эту ступеньку увеличиваем выглядит следующим образом вот тут есть две линии в начале их нет На самом деле они есть и как мы видим там где-то в районе 18-30 пяти наверное начинают расходиться Ну что это означает это означает что пиковая пиковая нагрузка с которой мы не копим лак сообщения для нас этого делать нельзя потому что тогда теряется смысл реалтаем коммуникаций если мы там отправим например через полчаса она должна быть реактивно направлена клиенту поэтому вывод отсюда следующий что максимум это 6000 после того как находим максимум Мы обычно делаем тест надежности для того чтобы проверить что там у нас не плывет Ram Что у нас там Ну какие-то там приложения не деградируют вкупе собственно 8 часов делали тест обычно делаем более длинные тесты но как вы знаете время перед конференциями Повторите собрать все графики не так много поэтому пришлось ужаться откуда берется 4 200 4 200 это 70 процентов от максимума это некий некий бенчмарк который мы используем собственно вот тест Здесь тоже есть две линии красный здесь не видно но Поверьте мне на слово не совпадают Я из графана специально название топиков здесь внизу привел чтобы видно было что они там есть 4.200 мы видим стабильно работает всё ок Но на самом деле если мы перейдем к реальным кейсам то впроми бывает вот так то есть какой-то источник там несколько какой-то определенных количество времени давал 20 тысяч ТПС А наша конфигурация которую мы собственно туда вытащили она держит она вот здесь вот по графику наверное в районе там 7000 Вот и визуально если на него посмотреть то ничего страшного не происходит Ну то есть мы Да мы держали нагрузку потом у нас наш источник который туда что-то генерил какие-то сообщения Он перестал писать мы этот лак весь из сказки дочитали и вроде все нормально На самом деле нет не нормально и мы убедились в том что мы теряли сообщение Почему так происходило происходило потому что мы сделали на самом деле два упражнения для того чтобы в принципе вся эта штука взлетела под такими нагрузками Первое это мы засунули базу в рам изначально тесты делали по классике когда есть какая-то там железная по зря либо железный большой оркл что происходит обычно bpm-система туда персистет с информацию о процессах это какая-нибудь контекстная информация это какая-нибудь информация об ошибках а логе там успешных процессах и так далее мы более вот такой конфигурации в 11 машин мы более 300 400 ТПС не получали Для нас это неприемлемо плохо масштабируется нам нужно 50.000 ТПС Это какая-то сумасшедшая получается с точки зрения железа конфигурация поэтому первое что мы сделали это перенесли Аж два базу в Рам и чтобы не накапливая ну то есть что-то происходит Тогда он начинает туда писать И если ее не чистить то рам соответственно разлетается в течение времени поэтому В общем Воля разработчика было решено поставить на крон строчку 12 и он просто основную таблицу подчищал и вроде как бы на тестах где мы выдерживали нагрузку ничего не происходило То есть когда я показывал успешно кейс когда две линии их в принципе даже не видно они идут синхронно всё работает потери нет но происходит когда накапливается лак и мы видим там интервал 5 минут если это было больше 5 минут 6% грохнулась был вау-эффект Вот соответственно немножко доработали добавили Вот это условие В общем если если будете пытаться vpm-системы адаптировать под хайлоут нагрузки то вот без этого скорее всего не обойтись Какие еще с какими еще вещами мы сталкивались есть список как я говорил есть специфичные базы в нашем в нашей в нашем АйТи ландшафте такими Кассандра эта штука без витрая в принципе плохо работает то есть если Ну то есть ты посылаешь один запрос он может отработать за 3 секунды посылаешь такой же запрос буквально через Там э-э те же 3 секунды Да которые ты висела отрабатывает за 10 МС вот э-э поэтому для того чтобы не складывать дополнительную очередь эти сообщения там просто попадали с ошибками которые потом надо отправлять надо использовать три траи так же есть функционал Ну это функционал хороший работает с коробки проверено можно пользоваться Ну и в заключение с чем мы столкнулись это бинды То есть лоукод это хорошо но не до конца когда он не использует бинды Oracle в принципе у нас на там 10 где-то наверное минуте теста прикладывался и мы не понимали там в чем дело ну там проанализировали поняли что он бинды не использовать пришлось немножко доработать Именно его движок с точки зрения той функции которая этот компонент исполняет давайте наверное подводить итоги доклада я выделил там четыре важных пункта про который там хотелось бы рассказать первый вывод Мы привыкли все исторические наверное так сложилось что bpms системы это что-то такое где есть Human процессы где есть человек это может быть там какие-то штуки связанные с одобрением кредитных заявок например где есть какой-то процесс там есть верификаторы Они между друг другом там какие-то выполняют какие-то команды что-то проверяют отжимает кнопки а-а это да это О'кей это работает но можно то есть на нашем примере мы поняли что можно использовать просто как там автоматизированную систему без участия человека Вот так же хотелось сказать что вы вряд ли найдете какой-то универсальное решение с точки зрения bpm потому что этих систем много то есть нахабре есть отличная статья где есть список там порядка по моему 20 bpms систем они там есть вендорские есть какие-то опенсорсные есть опенсорсные нос там с лицензией выбираете максимально то что нужно вам Например я знаю там коллеги из других банков отлично юзает команду у них всё с ней в порядке но там э-э есть компетенция Ну то есть люди которые разрабатывают что-то накамоде это в основном в том числе для них это нормально Если у вас есть команда которая никогда не писала код давать ей какую-то там значит ту же команду писать класс это будет достаточно болезненно то есть люди скорее всего либо будут делать криво и в конце концов там разработчик будет за за этих людей править Вот либо в принципе работать не будет большая часть таких мелких детских проблем она связана openstarsi обычно с документацией Ну то есть вот приведу пример когда мы сделали канаки Кафки Он просил нас то есть он любой Джейсон не парсил Он просил Джейсон обернуть там в дата или какой-то там другое не помню какой-то ключ и вот в таком формате он его тогда кушал э простое гугление там часы гугления по интернету не давали никаких в принципе результатов Хотя оказалось на что проблема решалась там в конфиге одним параметром который Ну никоим образом не очевиден это надо лезть либо там движок разбираться либо просто это знать лично есть комьюнити у jbpm Она объединённое скотч-джитой там в принципе это моя плюс-минус один продукт просто более модный Для клауда более лёгкостный Вот ребята оперативно отвечают когда ты сдаешь вопрос Они говорят Да действительно есть такая фича вот здесь ставишь такой параметр Все работает Вот ну и часть идей на самом деле по оптимизации там нагрузки про которые там сегодня не рассказал это там прям фокус на надо отдельно доклад под это готовить команда которая занимается этим давно нас все эти болячки знает то есть доходило до того что они говорят Ну у нас даже есть фича на это Но сделаем мы не знаем когда но по факту надо поправить вон там где-то там 10 строчек кода можете сами это попробовать действительно правильно получается Ну и заключение хотелось сказать что получая инструмент который стабильно классно работает есть некое желание запихнуть в него все То есть все взаимодействие с базой все логику не делайте этого пожалуйста у вас получится ну вы получите там проблема у тех монолитов тех bpm систем которые там ну там скажем таких классических типа Oracle типам когда мы там потом сталкиваемся с проблемой шумами соседей что ты там сделал там одно приложение там кто-то из соседнего сделал другое приложение он тебе всё сломал В общем получили деградацию всей системы у меня наверное все как раз осталось время на вопросы Спасибо давайте давайте пока сейчас я задам вопрос из чата он прям вот под твоим выводом Один в один скажи какие рассматривали ли вы альтернативы jbpm и какие критерии вы использовали при выборе Именно этого инструмента да Про это был даже отдельный слайд на самом деле мы там фокус на его прям Не обсуждали Давайте тогда обсудим собственно у нас было две альтернативы которые посмотрели это кому-то и каджита если погрузиться в историю насколько я помню где-то Я тоже на хаббре прочитал в общем там как получилось Activity это forkm а команда это forktivity А каджита я не знаю как жить разрабатывает та же команда то есть есть подозрение что там большую часть года внутри она как бы там своим если говорить про детали мы Почему BP мы смотрели вот на эти три инструмента он максимально лоукод Вот наверное это основной был критерий но про фотоковуде например дата объекта надо кодить но мы не хотели хотелось этого не делать Вот в каджите в принципе там близко к jbpm но он сыроват продукт потому что он на рынке не так давно вот я знаю что наши коллеги избера его сейчас пробуют как-то тоже один из движок который там централизовано вести в банке Они проводили ряд тестов там есть баги Но их скоро пофиксить Ну то есть Возможно у нас будет некое тоже тут миграции пока пока так то есть критерии следующие То есть у нас был значит возможности инструмента саса там был лоукод там была нагрузка Вот это два основных ну плюс вот прицепом получилось бесшовно с интегрируется с кафкой без адаптеров и и код который есть совсем мы сами можем читать и разбираться что происходит Ясно спасибо Так вопросы зала у меня вот какой вопрос У вас это развернута в одном центре Или двух У нас сейчас в трех дата-центрах то есть есть конфигурация но представим есть X виртуальных машин на каждого виртуальной машине за теплоэн Engine в которой тепло это стратегия разведено это получается то есть X натрий машин трудится над каждой из между собой никак не связано Они между собой никак не связаны Они смотрят в кафку на одной консилмер группы и соревнуются оттуда чтобы учиться Спасибо скажите вот вы говорили то что там посадила бизнес-процесс у вас пишет Можно пожалуйста пишет аналитик Я правильно понимаю То что у вас аналитики немного Java понимает то что по видео было видно что там достаточно много кода и Java специфика там генерируется либо саппортит разработчик В итоге я скажу так вот в команде которая действительно пилит промпроцессы есть джависты они занимаются какими-то корм вещами обычно не знаю там дорабатывают движок по то чтобы можно было там использовать наши там остались соединения с Ну то есть вот всё вот это какие-то микро доработки я бы сказал а попутно помогая в случае если аналитик там натыкал э-э на интерфейсе оно не работает Он садится вместе с ним и говорит Слушай ну там у тебя он там Джексон Джексон не Добавь как бы дополнительный параметр чтобы он не смотрел на все поля Джейсона у тебя их нету на этом ломается Ну то есть аналитику это непонятно всё понятно То есть команда разработчиков Мне кажется без этого никак Да к сожалению Спасибо так вот тут на первом ряду был вопрос такой вопрос Можно ли как-то дебажить если вот ставки написано javi то есть подключаться к процессу и отлаживать я скажу так если говорить с точки зрения как мы привыкли там не знаю если разрабатываешь на каком-то чистом языке Так где бажите соответственно нельзя то есть есть два возможных пути первый который был на видео когда ты создал этот процесс и смотришь докуда он дошел где там он сломался где он завис может какой-то блок случился и так далее и второй способ это Зайти на ту виртуальную машину где это исполняется смотрите оверлок сервер Log airlock Ты смотришь он туда откидывает то есть там так как классический Джаве есть уровень логирования ты можешь его выставить конфигах и соответственно наслаждаться всем всей той простой которая туда генерится Но это опять же аналитик который не понимает что пишет туда Java вряд ли с этим разберётся он смотрит есть какой-то НПИ А что это значит для него это тяжело поэтому он э обычно привлекает помощью более опытного коллеги они вместе решают этот вопрос у меня все с этим кстати тоже вопрос Мы как компания которая выросла в продуктами которые обязательно должны тестироваться независимо от того что это код разработчиков или бизнес правила которые реализованы в ходе разработчиков мне интересно вот имея бизнес-процесс из тысячи кирпичиков Как ты говорил да Как можно быть уверенным что он работает правильно и аналитик не допустил там ошибку то есть ли возможность имея набор входящих параметров и понимание Какой должен быть набор исходящих параметров проводить хотя бы интеграционные тестирование тестирование все этого дела Мы ровно Так и делаем делаем Это вручную сейчас не хватает какого-то автоматизировать автоматизированные инструменты которые позволял бы прогонять на самом деле просто то есть правильно ты говоришь есть все данные на входе и ты знаешь как текущая версия Рабочая на проме эти данные обрабатывают какой есть результат условно есть json вход Джейсон выход оказалось что не хватает Не хватает просто взять прогнать текущие версии кода либо взять их из архивных каких-то там э-э баз данных и прогнать новую версию сравнить и сказать вот этот гэп как бы это фича или это не фича Ну это это доработки ожидаемо в рамках вещей или нет а соответственно прямо такого инструмента из коробки нет Есть возможность тестового сценариев описание тестового сценария там Мы честно их не используем а просто ну руки не дошли вот надо попробовать но я думаю что глобально всё равно мы пойдём что-то более э такое то есть в отдельное наверное какое-то приложение которое будет именно вот генерировать логику которая рассказывала что у нас как бы э текущая версия кода мы там её из Китая забрали скопилили собственно исполнили или выход один выход два и там в неком интерфейсе сравнили div вот ясно потому что автоматизация это важно друзья еще вопросы вот я вижу Да Добрый день подскажите пожалуйста по замещению продуктов SAS в управлении моделями и процесс инвалидации этим занимались или вас только все связано с rtdm я понял вопрос Спасибо занимались это немного не тема этого доклада я скажу Так у нас в банке есть две платформы которые занимаются исполнением моделей в проме про это же речь Да это пакетное исполнение модели это Real Time исполнение моделей более детально что там внутри Я наверное сейчас не расскажу отдельно готовиться Вот Но действительно те компоненты саса которые отвечали за исполнение модели они вот мигрировали на эти вещи то есть там есть ходупная история которая там рассчитывают какие-то фичи исполняет это пакетное исполнение модели есть МРТ Она работает она работает в принципе так же как э ну архитектурно наверное работает примерно так же как gpm то есть какие-то нрт события и есть какая-то Модель которая из сказки вычитывает горячий Вектор цепляет холодный Вектор их мержет и дальше делай это предикт получается какой-то скор и отдаёт его например в тот же bpm такие у нас интеграции есть вот пассивы за доклад У меня вопрос такой знаете не технический а больше философский вот те события которые собственно ко всему этому привели с вашей точки зрения это больше головная боль оказалась и необходимость или это был такой толчок для чего-то Ну то есть для какого-то правильного движения Спасибо Но тот вопрос с точки зрения бизнеса насколько это вообще нужны real-time-коммуникации Это вопрос больше я говорю такой философский не с точки зрения бизнеса скорее с точки зрения вот айтишной он же был создан все было хорошо все устраивало а потом вот произошли события Да понятно и пошел сам по себе Вот этот процесс поехал это головняк такой просто ну вот ситуация изменилась Да ну что-то надо с этим делать Ладно мы вот делаем это или это всё-таки и какой-то позитивный толчок голов в каком-то правильном направлении внутри вот я не знаю я понял Давайте попробуем покрутиться здесь если взять предысторию то повестка импортозамещения не только Сбере но в России Она давно То есть она наверное больше пяти лет в различных индустриях с различным по И не только по на самом деле с оборудованием микроэлектроника и так далее То есть тема новая и когда сас нам помахал рукой в феврале мы собственно были к этому готовы в определённой степени Ну мы думали что это произойдёт чуть позже глобально У нас например лицензии заканчивались с 23 году То есть но мы не думали что всё кончится в двадцать втором Но в общем был Ещё 2 года ну по факту оказалось год то есть мы морально были готовы к этому то есть Мы понимали что надо на что-то менять То есть у нас были какие-то идеи внутри банка там разработать некую там свою систему есть какие-то более централизованные подходы от смертиха импортозамещения Вот Но когда я тебя зажимают уже в конкретный срок и ты понимаешь что ты бизнес потеряешь в конце года Вот либо ты инструмент какой-то должен сделать Ведь если посмотреть на самом деле на тот же rtdm это вообще не bpm-система ну то есть это больше напоминает наверное Flow программирования то есть кубики у них есть определенные правила их соединения там свои компоненты Вот они конкретно разрабатывались под задачу вот компанинга под задачу подготовки предложений ребята понимали Какие могут быть какие фильтры нужны какие-то нужны какие правила бывают именно Исходя из этого делали им делать не для этого то есть пьем Это скорее одна из возможных одна из возможных альтернатив на которую можно переехать и она Как видим Она работает на самом деле можно посмотреть я пачечной фай которые в принципе можно делать подобные вещи наверное ещё какие-то есть инструменты тот же флинк например может прекрасно и справляться с нагрузками там 200.000 ТПС при определённой социализации к нему прикручивают какие-то остальные Ну то есть можно сделать себе Мы пытались себе как сделать мы себе пытались сделать максимально не больно то есть Поэтому двигались глобально так посмотрели что внутри вот такие именно нагрузки ничего не подошло посмотрели что есть Open sorse сделали с торсом упражнения если бы не получилось пошли бы в разработку что-то своего Ну а это мы понимаем что наверное мы бы не уложились в этом в этот год может быть даже в два потому что компания SAS своим продуктами она на рынке но по-моему там 20 плюс лет там rtdm появился там в десятых годах уже как продукт промышленный который работал Мы про него уже слышали Я так понимаю про flow-системы ты говорил еще и в контексте того как Вы будете конкурировать со сберфлоу а мы никак с ними не конкурируем то есть есть как То есть есть текущий продукт там есть просверфлоу Да он работает он выполняет определенные задачи но как я говорил один из пунктов Выбирайте инструмент под свои потребности То есть если вам нужно лоукод ищите лоукод если вам нужно нагрузки ищите под нагрузки но например есть куча оппозитных недостатков У нашего продукта которые есть И тут некий трейдов Ты должен для себя выбрать на самом деле оптимальное учитывая что у тебя горит бизнес и учитывает что у тебя есть текущие других не будет Вот мне кажется берешь на пересечении все эти вектора и выбираешь оптимально для себя вот и вдогонку также вопросы с чата дружили ли вы свой сервис Open Shift ом Отт или синапсом мы дружили с синапсом соответственно это видимо коллеги избера задают фокусный вопрос потому что такая история терминала Что такое синапс синус откавка то есть есть ванильная Кафка есть настройка над кавкой специальной для сбера который там называется событийный сегмент синуса он стоит не только из сказки на самом деле но тут речь идёт про кавку Да с интегрировано мы собственно из неё и забираем все сообщения все потоки они у нас вот вернуться схему там был в начале нарисовано Кафка вот с ней мы собственно с интегрированы по поводу отит внутри Мы в Shift не лазили не ходим во внешнюю систему мы используем внутри поэтому нас не распространяется мы находимся МТС достаточно вот ну короткий ответ да и да Спасибо теперь не менее сложная задача выбрать из тех вопросов два которые тебе понравились мне понравился философский вопрос пожалуйста я помню человек который задавал его поднимитесь пожалуйста чтобы наши помощники вас увидели да Да не знаю как вас зовут на третьем ряду мужчина задал вопрос да мужчина вам уходит подарок от Миража Очень классно когда хороший вопросы и главное в тему Большое спасибо за эту тему которую ты осветил это актуально Это хорошо и очень надеюсь увидеть продолжение ваших интеграций в будущем и развитие технологий Давайте еще раз поаплодируем спасибо большое спасибо маленький подарок"
}