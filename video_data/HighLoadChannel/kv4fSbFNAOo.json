{
  "video_id": "kv4fSbFNAOo",
  "channel": "HighLoadChannel",
  "title": "Создание высоконагруженного облачного колл-центра / Евгений Пинашин (Tinkoff.ru)",
  "views": 3582,
  "duration": 2975,
  "published": "2019-05-14T14:30:14-07:00",
  "text": "итак всем привет меня зовут рина шины в день я работ инков рост всего время право call-центры по созданию высокое нагруженного облачного call-центра которая работает у нас на нашем опыте покажем те корабли по которым мы шли те шишки которые набили и расскажу так как следовало бы делать наверно изначальных вот в тиньков я занимаюсь вайп телефоне и всем что с этим связано в телефоне я занимаюсь уже более 10 лет у нас работает облачных клуб центр многие наверное слышали то что в тиньков есть такая штука как колл-центр для операторов которые работают прямо на из дома это вот есть наш областью call-центра он работает на базе нашего облачных платформ и в офис вот это наша собственная разработка которое на базе которой наш курс центре работает в цифрах это более 20000 операторов вот это более 5000 операторов в онлайне то есть это те люди которые в данный момент либо разговаривают либо готовы принять звонок вот это более трех тысяч одновременных вызовов именно телефонных вызовов в моменте именно вот разговоров цифры довольно таки внушительный системы телефонии как мы знаем любой колл-центр это не только система телефония это куча интеграции с различными системами как минимум там должна быть какая то м система куда все данные должны вноситься полу звоночком по клиентам вноситься получать информацию вот но сегодня мы поговорим именно про систему телефонии мы не будем затрагивать интеграции серым а потому что телефоне это по сути базовый функционал любого call-центра вот если говорить про какой-то маленький колл-центр то там все просто берем какой tts интегрируем srm вот на ставим логику звонков и по сути все работает но сегодня мы поговорим про call центр в котором а в момент необходимо обслуживать тысячи вызовов десятки тысяч вызовов и о сложности его проектированию первая сложность это конечно нагрузка потому что нам в моменте потребуется обрабатывать просто очень много вызовов большой поток вызовов второе это масштабируемость вот система телефония она не должна быть ограничена по своей производительности потому что сегодня допустим вас немного звоночков завтра у нас пришли там в два раза больше звоночков потом еще больше и мы не должны как бы ограничивать наш колл-центр наш бизнес в обработки телефонных звонков вот следующий важный момент это обслуживание без простое так как наш колл-центр работает в праге работает на бою там реальные клиенты реальные звоночки вот то у нас не должно быть простоев если у нас какие-то запланированные работы навсегда потребуется в какой-то момент там обновить какой-то софт произвести какие-то работы с железом то есть добавить это ресурсов и вот все вот эти работы они никак не должны затрагивать работу нашего call-центра еще один немаловажный момент это отказоустойчивость если вдруг какой-то сервер упадет какой-то сервис там перестанет работать это не никак не должно повлиять на общую работу нашего колл-центра то есть call центр должен оставаться рабочим вызовы должны идти вот давайте я покажу вам как у нас встроено схема нашего колл-центра все довольно таки просто и понятно вот давайте мы к этой схеме еще вернемся сейчас по порядку расскажу как мы собственно к этому пришли вот в банке у нас используется avaya как основная система телефоне и соответственно когда мы решили делать свою колл-центр облачный мы собрали требования и все наши хотелки отправили вендору вот но там готовое решение не нашлось потребовались какие-то на доработки чего-то там не было основным требованиям нашего колл-центра это была поддержка выбрать именно тот момент почему я объясню чуть позже вот ну и соответственно параллельно мы начали смотреть какие решения нам а вообще какие решения общей есть на рынке какие open source решению но тот момент это были два австрийских и крис вич наверное даже сейчас есть еще какие то возможно но все равно как бы основные этого вот эти два на тот момент последней версии астериска было 11 версия в которой как раз появилась поддержка выбрать из коробки примерно в то же время появилась поддержка выбрать see you free свеча вот эти две платформы а не сопоставим по функционалу но у них как бы у каждой есть свои + свои минусы какая то в чем то лучше другой но сегодня мы не будем сравнивать дабы не разводить здесь холивар вот если вы есть приверженцы одна или другая система я просто кажется что мы остановили свой выбор на из трески вот он этот момент там была поддержка выбор тисе он гибки в плане разработки у него довольно таки низкий уровень вхождения и немаловажный момент то что на рынке и есть специалисты которые могут его настраивать обслуживает в общем готовить сервисом телефоне определились и и так все входящие звоночки мы принимаем виджет вот который работает в браузере у оператора открывается браузер загружается виджет и он готов к работе это очень удобно то есть это нам позволяет как раз у технологии выбор тисе это очень удобно потому что не нужно никакой дополнительный софт нам не нужно никакое дополнительное оборудование устанавливать для операторов и оператору не нужно производить никаких настроек то есть если бы этого не было то было бы наверное очень сложно со стороны оператора то есть именно начать работу то есть это скорее всего было пока не документация где надо скачать там софтфон как его настроить где взять настроечки там эти логин и пароль и адреса серверов что как для операторов это не их работа также немаловажный момент это легкая интеграция виджета у нас например виджет используется не только в области он колл-центре он также используется на других проектах где требуется интеграция телефонии вот с визитом разобрались ну как вы видите это как бы важный компонент именно облачного call-центра так что касается исходящих вызовов тут у нас их два типа первое это обычное исходящие звонки который совершает оператор клиенту ручные вызову то есть оператор нажимает позвонить вызов ходит на клиента они общаются 2 это система автоматического обзор на который у нас работает вот схематично работа автообзоров выглядит вот так то есть у нас есть сервис автообзор bds предикатив идеален систем то есть обзор предиктивный ввод подключается он касты риску по протоколами то есть там дарт ничего нового ну и у него там есть свои интеграции своя база данных ты схематично просто это здесь обозначено как некая база данных вот автообзор работает на отдельном сервере и для совершения звоночка он отправляет нас торис командами команду original по протоколами но тут как бы кто знаком со 100 риском те поймут то что здесь все просто то есть отправляется команда риге нейт делается звонок на один номер когда там поднимаю трубочку он соединяется 2 номера вот ну в данном случае с оператором единственное что при ответе клиента у нас идет запрос ну то есть информация по звонку передается также во втором то что клиент ответил нам в табун возвращают действие которые нужно произвести со звонком то есть а логика там возвращает а номер оператора и мы соединяемся с оператором допустим вот если нужно там проиграть файл то нам также скажет проиграю такой-то файлы это файл проиграется вот примерно с такой схема мы начинали у нас было сервисов там зона вот у нас было несколько 100 рисков сервисов там зона была изначально спроектирован так то что он мог работать с несколькими серверами 100 риск потому что на тот момент уже подразумевали то что у нас будет нагрузка какая-то много вызовов и один сервер со списком не потянул бы эту нагрузку вот в общем поначалу казалось все хорошо растет нагрузка звонков то есть автообзор у нас отправляет команды позвонить 1 ст и риску становится тяжело подключается 2 то есть просто компания обзор на одна работа на одном сервере 2 подключим на другой и так масштабируемся но в один прекрасный момент у нас от астериска все события же идут на автобан но тот автодром который генерит звоночки вот и в какой-то прекрасный момент от рисков становится столько то что у нас наш оффтоп звон не успевает обрабатывать все события мы просто его доносим вот мы просто его ложим он начинает деградировать начинаются проблемы и как мы из этого выкрутились то все очень просто мы начали формировать вот мы знаем сколько asterisk of в моменте могут работать с одним сервером оффтоп зона там где автообзор там собственно и другие сервисы телефонией то есть обработка мишек потому что входящие у нас также вся информация по входящим и действие которое нужно сделать со звонком они отправляются на тот же сервер вот мы знаем сколько серверов астериска могут работать с одним оффтоп зонам вот допустим вот на схеме это три так схематично обозначена то есть мы берем 300 риска к ним ставим 1 через обзвона и получается шахт увеличивая количество шар дав мы тем самым увеличиваем производительность нашей системы с одной стороны кажется все окей вот она наша масштабируемость все замечательно оператор при подключении то есть когда оператор заходит систему он получает настройки виджета в какому сервер он должен быть сейчас подключен то есть какими там заданиями ум работает и соответственно подключается к нужному сервер asterisk а вот поэтому если мы посмотрим справа там такой небольшой хаос потому что 100 рисков много городов несколько и вот нужно в определенный момент то оператор быть подключенным к определенному серверу вот оператор у нас подключается к серверу обрабатывают звоночки но здесь есть одно ограничение то есть у нас очередь на обзор она также привязана к определенным мост и риску определенным серверов и соответственно туда же подключаться оператор и мы ограничены этим сервером на обработку одного задания то есть мы не можем сделать какое-то большое задание от обзвонить там сразу там миллион номеров то есть нам его надо делить на кусочки каждое делать отдельное задание отправлять через другие сервера вот это совсем неудобно взгляде на эту схему вот на тот бардак который справа тут прямо напрашивается использования какой не балансировщика и такой балансировщик есть и моему камаэль его кто знакомства ip-телефонией вообще тесно связывается для них это знакомое слово вот это довольно таки мощный инструмент и очень хорошо подходит в тех моментах в тех системах где требуется где прогнозируется рост нагрузки именно телефонных вызовов то есть если вам нужно если у вас стоит asterisk используется и у вас в прогнозах обрабатывать там много вызовов то не задумывайтесь используйте sip proxy но и мы соответственно успешно его внедрили себе разместилась sip proxy между ost ирисками всеми остальными танками то есть у нас состоится убрались все пользователи все регистрации у нас со 100 риска убрали все tranque там до из безе то есть у нас внешним оператором связи для нас выступает с бесси у кого-то может это прямо конкретные tranque к операторам связи вот сейчас у нас нас ты риски транг только до прокси и все 1 вот ну и соответственно с другой стороны из би си и все наши операторы они не видят наших 100 рисков они подключаются к практике us be seen устроен трамп на прокси вот давайте рассмотрим какую же роль вот в нашей схеме выполняют камаэль you came или равномерно распределяет вызовы на астериске то есть ну как у помнить из предыдущих схем у нас там много 100 рисков соответственно передними ставится все прокси и все входящие вызовы равномерно распределяются мы используем обычную стратегию round robin то есть там по кругу по порядку распределяем на все вот там есть ещё и другие стратегии если кому нужно вот вторая роль это выбрать сидит вы то есть у нас пользователи работают через выбор типа протокола с это шифрованный протокол вот если раньше они пользователи подключались напрямую кости резку то соответственно там было шифрование ну тащи фронта кто-то приходил от работы с шифрованием это вот эта работа шифрованием не собстна сейчас она вся остается накама или у и на австрийские уже чистый сип обычный пою т.п. и никакого шифрования ну и третья роль это регистратор то есть мы убрали все регистрации со всех asterisk of то есть у нас сейчас все регистрации на камаэль и это удобно когда у вас не десятки там точек подключения куда надо резать виджетом но либо телефоны аватара там буквально парочка и так давайте по быстренько рассмотрим распределение входящих вызовов с используем камаэль у то есть здесь когда звонит клиент вызов приходит на с bisi если это звоночек в наш call центр вот то соответственно здесь отправляет его к нам на sip proxy что происходит дальше камаэль отправлять звоночек на один из из доступных аст и рисков здесь парочка ст рисков нарисован чтобы не захламлять схему то есть он просто балансирует на один из даст из доступных для него посты рисков asterisk по протоколу они обращаются к нашим сервисом телефонией говорит вот пришел какой-то звоночек 100 кого-то номера на такой-то номер что делать сервис телефонии отвечает говорит соедини с оператором и отдает нам номер вот соответственно с ты риск дальше набирает на оператора но он не напрямую вызывает оператора как это он делал раньше он вызывает операторов транкс проксей вот на прокси настроена маршрутизация где вызов уходит на оператора после чего клиенты оператор разговаривают вот если придёт второй вызов он пойдет ровно по такой же схеме только уже через следующий asterisk итак если у вас 2 астурийского вас и вызов будет балансировать на один другой один другой если вас будет 5 as the risk of the на 1 2 3 4 5 и так по кругу если к вам в моменте допустим свалится сотня вызовов а у вас там 10 asterisk стоит то они также все эти вызовы все 100 вызовов равномерно распределяться на действия рисков по 10 волков на каждый эта kb ерунда даже если 1000 вызов придет на 10 as the risk of past австрийской по 100 звонков на один asterisk это не нагрузка 1000 звонков они в этом либо по положили бы asterisk либо просто отбились бы вот теперь посмотрим как у нас устроено исходящий вызов рассмотрим на примере обычного исходящего звоночка клиента который делает оператор сразу небольшое отступление когда мы внедряли кама или а вот мы также сделали доработки в нашем авто в зоне наших сервисах телефоне и вот если раньше мы привязывались к определенному серверу куда надо было отправлять наши original ты чтобы сделать звоночек то сейчас мы отказались от этого то есть на нашем авто обзвони либо при ручном ладони то есть наш origins сейчас отправляется под той же схеме что и проекта моего то есть тот же список доступных as the risk of у него есть также round robin он все origins ты отправляет по этим астериска то есть оператор в интерфейсе нажимает кнопочку позвонить клиенту на остались приходит командочка наша команда регина их на звонок этого клиента asterisk выбирается round robin как я уже сказала а стресс совершает звоночек на номер оператора в транг амаи лиу вызов доходит до оператора оператора случается автоответ дальше информация о том что оператор ответил передается через ами в сервис телефонии и сразу же начинается набор номера клиента всех тоже транс транс проксей вот далее этот вызов отправляется на из би си и уже дальше набирается клиенту при автоматическом обзвони когда работает слов зон схема ровно такая же только мы меняем канал и местами то есть мы сначала звоним клиенту и когда клиент отвечает мы ищем оператора и соединяемся пират ну то есть получаем также запрашиваем через телефоне данным оператора и нам дает свободного операторе мы соединяем вот если автообзор также то есть запускаем какое-то задание у нас там сидят сколько-то операторов контактность базы небольшая соответственно чтобы у примерно носили сотни операторов которые сейчас должны работа на этом задании вот запускается в сбор контактность небольшая соответственно чтобы загрузить действия пират здесь сотню операторов чтобы они работали на да там сразу там 1000 звонков сделать вот соответственно эти тысячи original тов также балансирует по все мосты резком и каждое старика набирает там лесу у нас их дети штука примеру набирает по 100 звонков и все счастливы все разговаривают вот но если дозвонитесь конечно и так вот все вышеперечисленное о чем я говорил вот эти все стрелочки это сигнализация вот но как все знают любой телефонный вызов это также и голосовой трафик это собственно самое тяжелое что есть звонки вот вот схема с камаэль я с треском которая показывала ранее только здесь нету стрелок signaling тут показан голосовой трафик и тут появился еще один компонент это dirty pain внизу вот это ftp proxy ее роль проксирование голосового трафика и прохождения трафика через над то есть мы не используем какие-то там сервис типа остин серверов to turn серверов и прочих мы эту всю работу выполняет отпер теперь джек если посмотреть на эту съемку то здесь видно то что весь голосовой трафик у нас я через asterisk и это нам нужно это нам нужно потому что мы записываем разговоры как и любой нормальный колл-центра ведется запись разговоров запись у нас настроено нас трески и там мы пишем поэтому нас голосовой трафик идет не напрямую там с медиасервер ос из бессильно вертепе прокси на оператора там то есть мину и астериске что был конечно хорошо для ст и рисков меньше нагрузки бы там было вот та вот гоняем через asterisk вот теперь давайте ещё раз взглянем на общую схему которую я показывал в начале сейчас тут должно быть по понять мне немножко потому что здесь все видно наши шарды серости сервис телефонии со 100 рисками наши sip proxy ртп прокси все как бы масштабируется резервируется все отказывал стой чего тут любой компонент можно масштабировать на самом деле то есть нам требуется обслуживать больше вызовов мы также добавляем шар долл вот если у нас возрастает ртп трафик мы также добавляем на торте пенжина вот если в производительность sip proxy упереться это чем-то очень постараться она очень производительны там десятки тысяч запросов в секунду просто может обрабатывать если это перекладывает на звонки ту это прям очень много звонков нужно еще не знаю столько операторов найти чтобы их обслужить ну в общем все равно там тоже есть резервирование и масштабирование то есть все звонки допустим входящие у нас из би си он также зарезервировано это как бы вот с bisi отправляет на прокси также равна дроби нам вот если мы допустим не справляемся нагрузкой ну давайте представим что мы не справляемся просто сип трафиком который нам идет с bisi мы просто добавляем еще одну камаэль у вас би си прописывается еще один tranque все и она начинает по трем но дома этот трафик гнать вот то есть опять масштабирование то же самое certify прокси и надо поставили в команду прописали в настройках и у нас как бы уже используются больше при типе проксей звоночки вот это что касается звонков ещё один важный момент который я хотел бы осветить с которым у нас были проблемы в свое время это запись телефонных разговоров то есть вот как я уже говорил звонки мы пишем на схемке обозначена то как настроено работает записи разговоров сейчас то есть мы со 100 риска как обычно настраивать запись разговоров на астериске просто берут микс монитор либо монитор функций астериска настроили и прописали взял плане все у нас запись ведется есть указали куда писать в каком расширении но путь вот и запись ведется все хорошо казалось бы файлы пишутся вов если надо но если хотите хранить в autocad большое количество большой объем данных то вы обычно как люди делают они на хан гопи конвертирует его в mp3 и уже как бы на выходе получают готовые потрепали в конце разговора вот нормальная практика мы тоже через это прошли собственно как сейчас сделано у нас мы пишем файлы стерео поэтому используем мониторе и пишем на два канала in и out вот пишем и на ramdisk они на жесткий диск это сделано с целью увеличить производительность asterisk а вот далее что происходит когда звонок заканчивается поговорил клиент оператором у нас наш сервис сам песни сервис на питание забирает эти файлы кладет на сторож сторож подключен каждому стрижку по нфс вот нас тораджи когда появились файлики там работает другой сервис который эти файлики склеивает в один стереофайл и переживает mp3 и тем самым на выходе мы получаем такой же легковесно mp3 но этим этом утихнуть в другом месте они на серверах со списком то есть их задача это телефонные вызовы вот какие проблемы у нас возникли почему мы пришли к этой схеме то есть первое что было это с увеличением количества аст и рисков и количество звонков у нас просто стал проседать наш торт там просто диски уже не справлялись с тем потоком с тем объемом данных которые мы туда писали и соответственно уперлись его производительность первым делом мы постарались уменьшить объем данных которые мы туда льем сделали мы это очень просто мы просто поменяли кодов в котором мы пишем файлы в австрийские файлы wav по умолчанию пишется всем ну все знают вот но там не совсем очевидно настраивается как бы но меняется кодек на гсм который более ужато и соответственно файлик у нас получать меньше в объеме вот по размеру мы перешли с писем на джесси начали писать лес у нас объем мало данных уменьшилась но это было временное решение потому что нагрузка росла и мы все равно пришли к тому моменту когда у нас 100 рассчитал проседать вот поэтому мы оперативно поставили еще минимум два сторожа вот почему два еще дополнительно то есть мы не 2 поставил нас 3х казалось сделано это потому что если у нас один сторож не справляется нагрузка мы ставим 2 казалось бы все хорошо вот мы раз параллели как бы потоки и всем легко но что произойдет если у нас откажет один сторож то есть это либо мы тогда теряем записи разговоров которые мы туда берем либо мы переключаем поток обратно один сторож который у нас не справляется и мы получаем каскадный отказ вот поэтому ставится минимум 30 с какой ресурс позволяет можно из 4 постоять вот и распределяем нагрузку на эти стороны вот ну и конвертация в mp3 она не доставляет никаких проблем на австрийский пока у вас звонков небольшое количество у вас хватает ресурсов рост и риска когда на сервере со стилистом потом работает как бы уже в пределах своей производительности и у нас там завершается несколько звонков и запускается параллельно несколько файлов там конвертировать в mp3 то у нас соответственно страдает качество разговоров потому что и так нагруженный серверу там нагружаем конвертации поэтому это такая проблема которая проявилась только вот на больших нагрузках когда уже предел производительность сервера ball вот поэтому мы это дело брали на 100 ржев у нас основная нагрузка на диске поэтому там процессор большинстве времени простаивают поэтому его решили использовать как раз под конвертацию файлов в mp3 вот казалось бы простой функционал запись разговоров а при больших нагрузках доставят проблем как вы видели у нас серверов как бы много узлов много поэтому нам надо за этим как-то на следить соответственно мы как и все белые люди пользуясь мониторингов стек у нас как бы стандартный это prometheus для сбора метрик ластик search для агрегатор логов графа на кибо на для графического отображения всего этого дела и мы используем гомер 5 для ну то есть в нем мы смотрим что у нас происходит на sip proxy то есть туда зеркале руется сип трафике там потом можно поставить красивый трассы найти звоночки посмотреть с ним не было то есть мы посмотреть все вот теперь интересно то есть так это стандартно вот что мы увидели в мониторинге когда внедрили всю эту схему все эти балансировки и прочее первый это конечно равномерное распределение телефонных вызовов по всем серверам мосты резко но это как бы очевидно вот если раньше у нас на графиках была полная чехарда какой-то сервер там работал в потолок в каком-то была нормальная нагрузка какие-то матчи курили бамбук просто простаивали без нагрузки потому что либо была выключена очередь либо туда ну вообще никто не подключен вот следующее это общее падение нагрузки на серверах asterisk а вот здесь также положительно сыграла балансировка так как нагрузка просто размазали по всем серверам у нас нет этих сыров который сейчас кипят уже вот ну и соответственно наш выбор теги твой который снял со 100 рисков просто всех пользователь всю работу с регистрациями из шифрованный трафиком это тоже положительно сказалось на их производительность вот ну и сейчас мы можем примерно в процентном соотношении определить запас нашей производительности вот то есть опять же если раньше вот в этой чехарде графиков было непонятно то есть сколько насколько загружен наша система и сколько мы туда еще можем подать звонков либо нам надо добавлять ресурсов то сейчас это более-менее наглядно стала вот и если там планируется еще добавить ну если планируется еще нагрузка по звонкам то есть будет много звонков то мы видим то что да нам хватит ресурсов силки либо не хватит и нужно добавить вот соответственно реагируем на перед вот и так итоге опять же повторюсь то есть сейчас наш облачный колл-центр это было ни одним днем сделано не одну неделю это было месяцами и годами десятки конечно лет вот но сейчас у нас в колл-центре 20000 операторов вот работают это более 3000 вызова в моменте но это не предел то есть сейчас если нам надо будет 10 либо 20 тысяч вызовов пожалуйста мы можем масштабироваться добавим мощностей и как бы эти звонки пойдут они никуда денутся вот в данный момент у нас около более 5000 операторов сидят и работают в смене в моменте разговаривают либо ждут звоночка вот у нас легко масштабируемая система стала мы любой компонент как вы видели можем масштабировать ведь будь то это sip proxy ртп прокси либо наш орды со стариками вот и сервисами телефоне и мы можем производить наши технические работы в любое время то есть нам не надо ждать там ночи чтобы звоночки там потому что прервутся потому что надо что-то перезагрузить то есть мы в рабочее время нужно какой-то работа провести сервер masterace кого он просто выводится из балансировки вот проводится на нем там необходимый работы также обратно включается и это можно сделать с любым узлом то есть из sip proxy то же самое можно сделать и септики проксей вот и немаловажный момент это конечно отказоустойчивость если у нас в рабочее время там свалился какой тесто риск примеру сервером случилось то у нас колл-центр наш работает да мы там возможно какие-то разговоры там просто порвутся вот либо там слышимость пропадет на зависимости о того что сломается там ртп прокси допустим поломалась одна из вот но общая работа колл-центра пытаюсь это какой-то маленький там процент звонков как бы ну да это проблема это сбой какой-то какие-то звоночки там маленький процент порвется либо там пропадет слышимость но общая работа оно продолжится люди будут звонить оператор будет работать вот всем будет хорошо спасибо вопрос спасибо за доклад вопросов сразу будет пачкой 1 1 это почему остриц когда при нефрите тут как бы много факторов пресечен безусловно он хорош он более производителен но как у астериска были на тот момент свои плюсы у нас мы знали как его готовить то есть мы уже знали как с ним работать соответственно мы он был для нас предсказуем то есть мы знали что от него ожидать если вы спаслись еще была как бы небольшая экспертиза и это была такая работа то есть вот сделаем и посмотрим как получится то здесь мы как бы точно знали что нужно сделать и какой результат мы получим вот это важно монет на второй вопрос как вы можете идеал планы на вот этой пачке as the risk of anti вам понятно то есть аджай fast и джайне используйте для каких-то ну то есть какой-то функции у нас есть ноги я потому сейчас не углублялся именно в dial plan там то есть во внутреннюю в кишки ost резко то есть да у нас там какие то там у нас какие-то метрики отдаются через один какой-то вот такой функция у нас там есть и последний вопрос мониторить или вы качества за лотков качество звука на примера заикания и прочее и как-то до мониторим этой карте степи это стандартная rts цепи то есть мы мониторим а в конце звонка мы пишем сидел всю то есть информацию остриц позволяет писать и в конце звонка он позволяет получить информацию о качестве разговора то есть та которая к нам пришла в архетипе задержки джиттер этом потери соответственно и и пиши все веры потом выводим мониторе но опять же это только мы сможем увидеть то что нам предоставляет artistic это сети относите какие-то задержки если это какие-то проблемы допустимо за там аппаратные либо софтверный то спинам этого не покажет спасибо за доклад евгений правильно я понял то что вот на общей схеме телефоны и сервис это ваша самописная который дает наш собственно разработка и тут несколько вопросов какие задачи они решают можно тезисно прям кратко на чем они написаны то есть какой стек технологий и какая база данных используется база данных oracle написаны на сишарпе задачи это автообзор это получение информации с риск то есть разборками событий это вот наверно основной ну соответственно вся логика у нас там как на них дела с нагрузкой обстоят то есть они сортируются тоже и дамы также шарди равно как бы это то что сейчас работает у нас это схема хороша на на конечно не идеально есть чего что подкрутите винт до есть куда стремиться и работа лотность над сервисами телефонии она у нас тоже будет будет еще маленькие просто теперь engine это тоже ваш адрес не трать бенджен это компания цепляясь его распространяет это раньше от балтики прокси который также работал с камаэль его дальше он просто перерос вот теперь джен этого ну сказать новая версия что или следует следующая версия вот то есть это вот теперь про которая разорваться параллельности проксей понятно спасибо здравствуйте андрей фанат году форсить вопросов тоже несколько первых это у вас оператор и одновременно и на входящих и на автор звони или то есть четко на определенной задачи сидят сейчас они на каком-то определенном задании сети они работают 1 вт обзор то они входящие не принимают но у нас также есть планы и работы по внедрению мульчи стильностью когда оператор может низким обслуживать и тогда nude отсюда же получается входящий поток у вас данный по дозвона то есть вы я так насколько я понял по циферкам по итогам дозвон вы просто закидывайте людьми у вас три тысячи звонков допустим 5 тысяч операторов с меня это поговорим прав зон нет я больше про входящие нет если входящие то у нас ну если звонков больше чем операторов то те звонки которые сейчас не моются не можем до они ждут ждут своего оператора в очереди но это не австрийской то есть это наши такая реализация данных по дозвона по себе славу по входящим что это параметр уже коллцентра вы то есть который мы сейчас здесь не рассматриваем сегодня задача была именно рассказать просите на телефоне то есть то что лежит в основе любого колл-центра 20 спасибо за доклад вопрос такой операторы регистрируются сразу на нескольких камарилло или хоть как просто если один оператор адрес зарегистрирован на нескольких как синхронизируется их станет за нас 11 оператор один оператор может одновременно быть подключено 1 прокси вот но второй оператор может в то же время подключить к 2 прокси и если нужно вызвать ну и мы любого можем вызвать то есть вы совсем один оператор всегда подключен какой-то одной из примет только когда то есть проблемы синхронизации статусом оператора нет занят он не занят сейчас можно ему вторую зону кинуть а мы аттестацию время виджета здравствуй пасибо за доклад об скажите пожалуйста от какого показателя вышли при масштабировании старицкая именно что упирались количество на временных звонков к лисенку в секунду больше и вот каков этот пример на показатель именно конкретно у вас на практике если можно поделитесь я боялась смотрите мы конечно упирались в общее количество звонков которые нас ты риски и соответственно смотрели на показатели именно в большую больше смотрели на процессор потому что он он был показателем при большом количестве звонков и соответственно когда нагрузка процессора тома росла уже ближе к там вот то это уже был такой знак то что нужно что то делать ну примерно какой примерно количество звонков с нашей накрученная логикой на наших серверах оно было несколько сотен там буквально на три-четыре сотни звонков и можно ещё один вопрос по поводу от вашего сервиса вот это вот сам описанного которым мы говорили с исходящими звонками все понятно и инициируется по они вызов ушел с входящими звонками когда вызов пришел на авто риск то есть единственный вариант получения через ами информации это просто слушать события вот а дальше как он ваш сервис узнал что пришёл звонок а дальше как он взаимодействует селим возилась все просто на самом деле то есть когда приходит звонок какие данные у нас там есть у нас там есть номер кто звонит и номер на который позвонил соответственно по номеру направления у нас всегда дано любая тесты всегда какая-то логика либо это номер отключен нужно проиграть файл и все и отбить либо нужно там включить какой-то и верку пример вот то есть это всегда по номеру направления делается собственное у нас также если звонок поступать на какой-то определенный номер вот и на этом номере там работают определенные оператор это один из операторов нам возвращается с которым мы соединяем здравствуйте скажите пожалуйста лк на схеме был изображён ртп engine насколько понимаю вас треска мои леса не могут справиться с проблемами надо то есть могут но представьте у нас несколько десятков asterisk чтобы оператор но оператор подключается к sip proxy спасибо все ок мы соединились начинается разговор у нас в оке от астериска который вызов пошел на 100 риск ответ у нас в сдп придет адрес астериска да у нас там настрой над все хорошо у нас на внешние печник но нам надо эти десятки внешних адресов иметь то есть это все нужно настроить носите и при масштабировании нам это всегда надо учитывать то есть нам надо иметь запас айтишников и каждый раз еще десятки сетевые настройки зачем чтобы не иметь одну точку отказов быстро теперь у нас все таки тоже имеет свои ограничения по производитель да согласен и поэтому там на схеме их было несколько их конечно меньше чем вас треска потому что они в разы производительны вот но их там не парочка как sip proxy прочитайте что настраивать теперь джен и проще чем устраивать сеть для ст рисков по этой логике ну да то есть нам не нужны ни какие то есть мы не опираемся ни в какие сетевые ну да если мы будем конечно вверх теперь же нам добавлять но это как бы редко случается когда увеличивается именно только в типе трафик ну такой в принципе он он как бы вместе звонками скалистом замков будет увеличиваться спасибо пожалуйста привет где тут вопрос немножечко нет уже при не про телефония про highload расскажи пожалуйста вот вас там 24 на 7 и все такое как вы деплоить как вы обновляете без down time of или сдан таймами как вас обратной совместимостью и вот все мы это мы говорим про deploy чего и монастыриска всей этой схемы они вас же там есть тут самописные там ну да да да это вот как раз все что касается наших телефонных сервисов и телефония здесь мы также можем вывести любой шарф из балансировки о его обновить и получили карту накатили это значит он должен быть обратно совместимый да да совет ну если конечно какое такое обновление где там нет совместимости то это то это конечно ночные работы какие то вот это это настолько крайне редко происходит вот то что ну то есть это какие там надо работать такие сделал чтобы не было обратной совместимости это что что совсем серьезно dress-up скажите как вы балансируете количество операторов то есть какой у вас максимальный простой оператора если я понял ваш вопрос это опять же пауков центровым показателем то есть сколько там оператор ожидает на линии звоночка то есть вот эти показатели интересуют правильно вот эту информацию я сейчас вам не скажу потому что но это курс на другой показатели которых у меня сейчас готов сказать ладно спасибо здрасьте подскажите пожалуйста какой совтав он использует ваши операторы приходите готовые решения у вас какая-то своя реализация и если своя то как например происходит синхронизация есть вот я звоню в колл-центр вашего банка мне отвечает оператор сразу там обращаться ко мне по имени что твич бить мою какую-то карточку то есть как это происходит давайте попробую ответить так же не совсем телефона в общем у нас используется виджет то есть оператор работает в браузере никакого собственному не используя в опера и разговорить броузер тут второй вопрос как бы я вот это этого ждал примерно нет ли у вас проблем с выбор тисе то есть вы через не мог звонить и какие то возможны какие-то библиотеки используйте то есть у нас похожая ситуация у нас идет очень много звонков именно из браузера повертись и и постоянно проблемы как бы ну у нас не наши операторы звонят оператор как бы наших клиентов и постоянно обновите браузер там какая-то одна либо отвалится которое обеспечивает там работу по выбросили там sip протокол другая работает и вот постоянно это жонглирование понял вас пропишите требование мы мы дамы как мы прописываем требование но плюс как бы все равно а мы сказали там всем там например использовать хром условно говоря потом какая-то новая там политика бац бац и отключать обновление в браузер не самый лучший 1 и она иногда ломается но тем не менее это еще не основная проблема вот мы с выбор ты сейчас-то из мы испытываем проблему в виде задержек речи передачи печи и именно они возникают на вот выбор tishina всяких транс к деньгах и так далее то есть как то вы с этим большую в мониторе лир типе трафик имена у оператора у которых наблюдается проблема вот это мой коллега может сказать минутам вот сидит возможно вы просто упираетесь в производители стиме на рабочей станции оператора то есть у вас начинает лагать браузер соответственно у вас так же и эти же лаги в звонки вы слышите то есть у вас просто браузер и тпр теперь дает задержкой вот а задержка как бы в телефоне и там в полсекунды секунду и больше это уже слышно ухом спасибо принципе понятно день добрый царь пожалуйста вот там где у вас python используется для перекладке где уже скажем так в офлайн вы уходите обработку там не планируется какой-то машин луниных еще что то поэтому почему может быть там эмоциональная разметка разговора там контроль спиртов и парят что это простой скрипке который просто занимается который просто берет в александр места хватит его другой там никакой логики нет то есть там не планируется ничего такого в принципе не обязательно было писать на питоне просто он раз был написан она работает как бы как часики но и и хорошо тогда вопрос анализ проводится потом именно машиной какой-то выполнение скрипта оператором эмоциональной окраски разговор это конечно это все есть но опять же такого центровая тема пошла именно коллцентра вы показатели у нас как бы есть разные системы для него мы пишем разговоры как раз у для дальнейшего их анализа но просто здесь как раз сырые данные которые наверно легче сначала обработать разметить и уже сжатыми запихнуть с разметкой чтобы потом заново нет открывать их и не скажем так превращать сырые данные 5d она вот то про то что вы говорите этим у нас занимается как раз голосовой биометрии они не с этими шариками работы а понятно спасибо"
}