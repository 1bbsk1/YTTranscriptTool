{
  "video_id": "UfUaQCYoTWg",
  "channel": "HighLoadChannel",
  "title": "Автоматизация тестирования клиентской производительности / Николай Лавлинский (Метод Лаб)",
  "views": 429,
  "duration": 3001,
  "published": "2017-04-22T14:48:20-07:00",
  "text": "и так сначала я скажу пару слов о себе я занимаюсь клиентской серверной оптимизации в вебе виде консультации у нас есть коммерческие услуги по ускорению сайтов ну и в свободное время в меру сил я занимаюсь пропагандой тема скорости и подобным вещам так в чем состоит наша задача когда мы говорим про тестирование клиентской производительности ну во-первых мы должны понять почему нам нужна автоматизация кто то наверное уже проходил до про себя какой-то ответ может дать но во первых современных приложений постоянно меняется код и когда он меняется естественно приложение наша начинает вести себя по-другому и здесь получается что если мы будем тестировать вручную как-то эпизодически то мы можем пропускать серьезной проблемы эти проблемы нам нужно получать до релиза кода мы не хотим чтобы мы уже увидели вот на этих графиков которые были прошлом докладе у нас в google analytics мы получили просадку производительности желательно все таки это делать заранее ну и ручное тестирование не подходит потому что во первых все разработчики ленивы даже если у вас есть какой-то специальный тестировщик который будет заниматься только вопросами скорости он что-то может пропустить его результаты тоже могут плавать ну проблем здесь достаточно ну и в конце концов нам нужно какое-то идеальное контролируемое окружении в которую мы получаем повторяемые результаты получить это в ручном методе на кого-то реальным компьютере достаточно сложно и в конце концов если мы хотим реализовать ту тему бюджета производились и которые говорил николай то нам соответственно нужно постоянно проверять а мы находимся в пределах этого бюджет или мы уже вылезли значит у нас есть как проблема что нам нужно получить в результате этого тестирования ну во первых нам нужно понимать время загрузки это вещь понятно и доступно и следующее мы хотим принимать как происходит рендеринг то есть когда он начинается в идеале мы хотим знать когда человек получил нужно ему контента то есть тот критичный контент приложения которые мы ему хотим показать для некоторых приложениях звучит так когда пользователь может начинать пользоваться нашим зайцам то есть там работает навигации и другие вещи следующие пункты мы должны понимать что будут видеть пользователи с разным состоянием cashier то есть человек пришел с полностью холодным конечно первый раз и человек пришел с прогретым конечным да у него уже есть к цитате к естественно него будет другая картинка нам нужно понимаете влияние сети здесь понятно в первую очередь это мобильные пользователи какие-то отдаленные пользователя мы должны четко понимать что у нас будет если у нас что происходит сетью ну и в конце концов мы должны понимать куда мы движемся в разработке нет ли у нас деградации производительность в процессе ну ещё один важный пункт мы должны понимать не случилось ли у нас что-то с конфигурацией наших серверов это вроде бы уже не совсем клиентская часть да но тоже иногда полезно что мы собственно можем взять чем можем пользоваться для того чтобы протестировать ну первый пункт мы так как являемся программистами мы себе захотим сделать какую-то эмуляцию браузера принципе подход достаточно вроде бы логичный то есть зачем нам гонять какой-то большой сложно браузер да мы можем в принципе загрузить себе страницу распарсить и и понять какие там есть ресурсы да но постепенно когда мы углубляемся в эту тему мы понимаем что нам нужно вообще-то уметь выполнять javascript код нам нужно учитывать порядок загрузки нам нужно много много чего узнать и даже если мы это все сделаем в идеале то все равно вот это наш эмулятор он будет работа совершенно по-другому относительно реальных браузеров так что в принципе мы эту идею откладываем остается нам это наш любимый настоящий реальный браузер то что у нас есть именно там мы и хотим тестировать я буду брать цифры их сравнивать естественно у нас как всегда не хватает ни сил ни бюджета на то чтобы это все разработать да то есть тестирует мы хотим но вкладываться в разработку всего с нуля наверное большинство из вас не хотят конечно приложение сделано специально для вас под заказ она всегда будет лучше но это дорого медленно и нереально первое готовое решение это президент сайт сегодня говорили такая быстрая простая штука но подождите причем 10 автоматизации да это же совсем не автоматическая штука на самом деле здесь есть автоматизация это open site то есть вы можете через запечься летном бесплатно свободно бросать запросы получать результаты отчетов но же в автоматическом видим ну здесь мы долго останавливаться не будем я про него еще скажу в одном пункте принципе это жизнеспособный подход но большую часть задачи которые в начале посторонние решает то есть он нам не даст никаких метрик по временам загрузки я его называю статический анализатор кода ваш сайт то есть он проверит оптимизацию картинок проверьте что вы отдаете в основном все с со сжатием и на этом проверка закончится нас волнует совершенно другие метрики здесь нам приходит второй пункт давай почти ну я так понимаю все практически пользуюсь vps там и вы представляете что он нам даёт в стандартном виде здесь я рекомендую вам немножко ближе познакомиться патриком мина нам хотя бы заочно который является главным разработчиком vbs теста и очень сильно двигать тему в производительности и у него есть канал на youtube и где много полезных видео как раз на вы почти в том числе продвинутых кейсах но на самом деле вы почти 100 опять же не решают наших задач и потому что если вы пользуетесь обычно мы почти тестом то вы видели что вы получаете часто какую-то очередь тестов там выйти и hain't five тест или там вообще может быть очередь из 50 тестов опять же это не применимо для профессионального использования здесь нам приходит на помощь и в обыщет исправит инстанцию тот же самый выпасть с но с важными добавлениями это по сути говоря в почти тест у вас дома на вашей собственной инфраструктуре который вам полностью подконтролен и работает вас внутри что это такое вы его запускаете у себя внутри за счет этого у вас есть полный контроль над его работой если вам совсем ли не настраиваете тестова агента at-st агент это - машина как правило с браузером с реальным то есть готовые образы dc2 то есть для такого быстрого запуска это можно использовать ну и в конце концов это open source то есть вы можете если у вас достаточно ресурсов в компании вы можете не просто его использовать можете писать туда какие-то расширения до изменять его так как вам это нужно но позже я расскажу про технологии в принципе впч тест сам сервер этапы чтобы приложение обычная там нет ничего магического нам есть часть кода на си плюс плюс внутри самого агента на виндоусе но в принципе ничего космического вот примерно схема работы в почти 100 у нас есть сверху вы почти исправить этот сервер это вот и есть вот эту pvp сервер который ходит в lucky shine внутри локейшнах есть тестовые агенты детства агента ты есть windows машинка с браузерами то есть здесь нарисованы три браузер основных который сейчас активно можно использовать это chrome firefox и интернет эксплорер в принципе исторически поддерживается сафари но сафари на виндоусе то есть смысл особо не имеет и в чем основной плюс в том что вы можете это тестовая агента плодить до распределять на них тестер изначально в почти предназначен для географически распределенного мониторинга поэтому логично может быть много и вы сами себе можете создавать много locations of если вам это нужно но в конце концов вы можете тоже public allocation подключаясь получать теста правда там нужно получать ключи что нам все это дает мы полностью контролируем параметры сети как вы помните наверное это пропускная способность к нам от нас плюс время ртт и еще bucket lose все это вы можете ставить произвольных вариациях 3 браузера chrome firefox и и я думаю большинство аудитории уже покрывает для десктопов мы получаем все те же самые метрики которые мы собираем визуальном интерфейсе обычного в с тестом и даже немножко больше мы можем собирать скриншоты и видео загрузки мы получаем надежный механизм очистки кэша как для тела соединение сбрасывается dns кэш всегда создается новый ti si bis и дней то есть вы видите полную картинку в точка зрения сети что же с мобильными устройствами сейчас эта тема естественно актуально сейчас там уже за пятьдесят процентов трафик перевалил мобильных в среднем здесь у нас есть в принципе поддержка android 4 плюс 4 40 более-менее свежего android и хрома внутри теоретически существует поддержка ios но она признана нестабильный сырой то есть на паблик инстансе вы можете увидеть реальные iphone и в которых по тестироваться но пока документация там мало ну и в целом вообще документации по использование реальных мобильных устройств немного известно что это работает на но у джеймса есть несколько android устройств на которых точно протестирована работа этого мобильного агента и в принципе если для раз критично именно мобильное устройство то вам стоит в ту сторону посмотреть но здесь есть и минусы реальных устройств это то что устройство эти в принципе довольно хрупкие то есть если вы будете запускать автоматическом режиме много тестов то вы так или иначе попадете на какие-то странные аномалии выбросы он может зависнуть может потерять сеть отвалится от своего контроллера то есть выбрать ставляете даже тот зоопарк устройств который подключен и какой-то машине которые гоняют тесты если для вас это жестко критично то используйте но желательно обойтись знать как а здесь можно обойтись я предлагаю использовать эмуляцию в хроме то есть мобильный chrome в принципе практически достаточно неплохо можно эмулировать десктопном кроме за счет вот это вот девайс view также мы можем придавить виртуальную машину где у нас работает вся вот это тестовый агент вся система по happy you как и и придавите да насколько вообще разница здесь будет здесь я привел небольшой benchmark он не претендует на научность но попытка посмотреть как влияет различные устройства на время по сути рендеринга страниц здесь берется десктопный процессор core i5 и galaxy s5 как такой среднее производительный смартфон сегодня вот здесь видно что с точки зрения маркетинга несравнимые там там четыре ядра и частота почти 1 вот поэтому посмотрим ну вот примерно такая разница у меня получилось то есть доступный chrome против мобильного хрома понят что это несравнимые вещи да но это примерно что мы получаем вот здесь мы получаем где-то 6-7 x замедление относительно десктопом этот тест он был привязан именно к скорости отрисовки то здесь сеть не было ограничено никак то есть сети изначально было очень много то есть для мам мобильник от была отличная вайфай соединения без помех там с максимальной скоростью которую может получить и для десктопы то же самое если мы посмотрим здесь кстати метрики видеть их дом кантат лауда ты la times да и они примерно пропорционально показывают разницу вот отдельно и валит javascript это только джек вари можете у себя повторить посмотреть результат здесь тоже разница где-то 6-7 раз то есть если вы вот таким образом откалибровали 100 можете взять чисто свое приложение и посмотреть что у вас получается и себе сделать такую заметку но все-таки нам-то нужна автоматизация да с чего я начала что нам нужно все это запускать без участие человек мы используем во я почти справит installs а че то он имеет restful api вот кусочек джейсона но может там не все читается но не критично вот здесь где-то внизу уже начинаются какие-то метрики вот те метрики которую вы видите в визуальном интерфейсе в отчете здесь они таким же образом выдаются нам джейсоне на самом деле несколько метров мы получаем тоже дополнительным вот и вообще говорят жизнь он такой большой и сам по себе по объему а потому что он включает в себя информацию о каждом запросе то есть каждый отдельный там стиле картиночка у нее есть все метрики когда начался запрос когда он закончился сколько он длился сколько было трафика там все практически заголовки то есть но детализация там просто запредельно нам скорее всего тоже столько не надо поэтому я в следующем покажу как этим всем пользоваться как можно сделать скажем так на коленке до по-быстрому систему которая будет проводить авто тесты с помощью web с тестом здесь синим показаны самого пищи теста что в принципе нам приходит уже готовые где нам не надо ничего разрабатывать зелененькие это наше части потому что там мы делаем то что нам нужно первое это очередь заданий то есть мы должны как-то тесты куда складывать в простом варианте это какая-нибудь табличка просто на среди быть test your real да сколько его тестировать там и его статус там уже вам в тест не ушел он есть какой-то результат нет дальше у нас работает вы почитать он соответственно сам общается с агентом сам ставит в очередь задачи и сам получает результаты потом он соответственно виде джейсона дает нам в обработчик результатов то что он сделал и дальше мы с этим можем делать все что хотим то есть у нас есть на руках метрики дальше вы можете рисовать бюджет и до проверять деградацию там и все что нам нужно вот как это может примерно выглядеть мы берем свой сайт или приложение определяем какие-то точки входа до критичные у нас для производительности в этом главную страницу там какую страницу логина или еще что дальше соответственно либо ставим себе бюджет на скорость либо задаем italon допустим что текущее состояние у нас за единицу да и берем проводим тесты уже по этим точкам здесь мы можем сравнивать результаты либо с прошлым либо с in талонам можем выдавать в какую систему тоже alert если вам нужно вы можете тоже блокировать комменты да то есть тормозить процесс разработки на этом если у вас такая дисциплина и к этим всем проблемам и тестом вы можете прикладывать your web с тестом то есть при том что вы получили метрики в джейсоне да вот в машиночитаемой формате вас все равно всегда может отрендерится ваш привычный вы почти царский отчет со всеми графиками там с рисуночками то есть вы просто напросто формируете you real и в своем вы посчитай справиться sound рисует вам полную картину например восходит the test вылетел да как это аномалия случилось вы элементарно идете по этому углу и получаете полную картину почему так произошло да что там было ну и дальше понятно значит как нам делать запросам тестирования ну это post запрос вот на ран test.php и несколько параметров то есть что тестировать как и параметр локейшн здесь как раз мы сеть задаем браузер сколько прогонов тестов first you only захват видео скриншотов и в каком формате подержите ещё xml ну-ка вот кому удобно можете из пульт xml мы спорим колесом результат тестов от примерно в таком виде получаются а ну это уже разобранный джейсон как у вас это будет выглядеть вашем языке здесь важно понять что вы можете брать каждый прогон в отдельном своем контейнере приходит то есть вы можете брать например первый самый прогон можете брать там медианы можете брать средний то есть выпустить автоматически найдет медианный прогон тесты вы можете брать только медианный можете брать все прогоны и считать статистику уже вся внутри это уже как вам нравится ну как это все на практике можно сделать я попробую на конкретных примерах показать допустим первый вариант вас есть какие-то проблемы либо с контентом вот которых николай говорил там с картинками например либо конфигурации например там текстов вы текстовые ресурсы бежать и статика не кэшируется где-то у вас потерян keep-alive для соединений возможно даже протестировать настройки tls а ну что если у вас правильно встроен т с у вас одно время устанавливается единение если у вас какие-то оптимизации не включен это возможно вы увидите это вы посчитаете потому что время тсн там тоже мерец ну и типично картинки не оптимизированы здесь нам приходит набор метрик сразу то есть у нас есть мини фай грипсы винкс и маешься и винкс все названия вот которые сколько джейсон это прямо их раны название в джейсоне потому что иногда не совсем очевидно между визуальным интерфейсом и джейсоном вот эту соответствие словить здесь надо понимать что как раз это не лучшая сторона в apache тесто потому что по сути говоря в причин смелет только j пеги и он считает их исходя из своего параметры качества j бега то есть он во мне говорит что возможно без потери получить экономию забегах он говорит что в принципе при моим нормальным уровень затем там пункт 50-70 процентов то у картинки должно быть вот такие если вы хотите смотреть экономию картинок я рекомендую использовать спит insights ввп режиме там гораздо лучше информацию вы получите к потому что вам скажу про png и скажет project без потери дополнительно что мы можем взять можем взять а объем трафика по всем типам то есть эта метрика готова и мы можем естественно брать метрику полной загрузке то есть мы берем время полной загрузке страницы в посте смирит это самостоятельно то есть это то время когда у нас загрузилась страница потом он идет две секунды смотрит если нет никакой сетевой активности значит он вот тот последний момент ставит поизошло дам вот этим фунт пойти туда и здесь вы соответственно можете померить трафик и в том числе исходящие от клиента к серверу если вам это важно но это относится контенту потому что если у вас опять же внезапно такое-то количество картинок вылезла лишних вы увидите это на общем трафике естественно общее время загрузки вас резко увеличится следующие вещи это типичная проблема с блокировкой рендеринга то есть у вас в принципе например общее время загрузки не изменилась но что-то мешает началу ринга но типично это какой-нибудь синхронный внешней g с фредди тормозной до нас здесь естественно css блокируют все вещи частично разблокируй шрифты и здесь следующие метрики мы можем смотреть старт рендер это метрика который изменяется самим ввп с тестом можем смотреть run fest paint это то что нам отдает браузер которую поддерживают и они различаются как старт рендер мериться в по тестам в посчитать контролирует вот это белое поле браузера то есть сначала ту же от белую страницу потом начинает грузиться сайт и как только пиксели из белых сменяется на что-то у него срабатывает старт рендер вот здесь есть небольшая проблемка если кто-то будет сильно на эту метрику уповать иногда он ошибается и старт рендер у него появляется когда в углу такая сера плашка появляется тепло 1к там что-то следующий кейс это сложная ситуация вот это скриншот из в почти с то здесь ситуация такая что здесь около трёх с чем-то секунд начинается рендеринг виде по сути но рендеринг не тот который нам нужен а рендеринг никого такого прогресс бара который заканчивается полезным контентом только где-то на 7 секундах и нас это не устраивает то есть если вы опять же зациклились на старт рендере дату вы не поймете что что-то здесь происходит не так как вы думаете что там делать сайт вот между этими тремя и семью секундами что-то делает да вот там на самом деле ситуация сложная в чем если так посмотреть то вы увидите тоже что вас сеть загружены то есть можно подумать что он грузии что-то важное но на самом деле нет там нет ничего важного здесь проблема в том что там вот на фоне этой на фоне этого сайта из видео она весит 50 мегабайт и соответственно выгрузить можно хорошо и долго на самом деле нам не критично загрузить весь ролик то на самом деле может сразу же показываться и потом подгружаться по мере там воспроизведения на самом деле здесь проблема была в том что там стояли большие тайм-аут и на пропадание вот этого прогрессбара не просто в секундах бы lezyne за данный браузер просто ждал пока тайм-аута закончиться вот я думал что и такая уникальная вещь на самом деле такая же проблема была описана в гугла и о недавней конференции значит таких разработчиков много так что здесь можно на что здесь смотрите вот как такую штуку не пропустить здесь опять же график из впч тесто здесь сразу много метрик выведена сразу здесь слева выделен параметр speed индекс видите он почти 6000 где-то справа time to start render он около трех тысяч то есть 3 секунд вот поищет индекс как раз и и показывает вот эту вот вич что у нас здесь график вижу прогресс то есть как происходило загрузка страниц вот видите на 3 секундах у нас мы получили некую полочку это ты есть вот этот прогресс барр да то есть мы что-то отрисовали а потом на 7 секундах у нас произошла практически стопроцентная отрисовка и собственно вот вот такую проблему что у нас страница чуть-чуть прорисовалась да но реальный рендеринг произошло позже ловит спит спит яндекс по сути он интегрирует вот это место над графиком загрузки вот этим то есть вот эта вся область сверху оно увеличивается подындекс если вы видите что вас старт трендом низкий но спит индекс огромный то значит у вас что то не так с процессом отрисовки но процесс рисуется исходя из того вот этот we see the visual комплит то есть это процент тех пиксели которые адресованы исходя из финального состояния то есть он ловит какая вас картинка получается потом начинает отсчитывать назад то есть когда эти пикселя были прорисована исходя из этого рисуются график и считается спит индекс следующая вещь это вас есть и какие-то внешние api которые вам грузиться на сайте но когда вы тестируете вы получаете очень большой разброс результатов ну потому что внешне опьянен будет грузиться из интернета и соответственно как они загрузится гарантировать никто не может при том что в идеале когда у вас есть вы почитают то вы можете агента поставить очень близко к тестировал серверу для того чтобы исключить вообще влияние сети и сеть тормозить только своими настройками торможения сети да они они так что она будет плавать там через какой-то интернет проходить и зависеть от каналов то есть здесь у вас получается проблемы со стабильностью как правило это и есть внешние счетчики виджеты и так так далее такие вещи что здесь можно сделать как-то всю стабилизировать вы можете если они не критичны для вашей загрузки или вы решили что ну вот они есть да но сделать с ними вы ничего не можете вы их можете исключить из картины то есть заблокировать по набору хостов есть такой параметр блок мы просто передаете список хостов и они будут мгновенные давать блок то есть браузер их нибудь ждать и вы получите результат тестирования на своей части приложения если они для вас критичны и они важны то вы можете сделать какой-то способ локального каширования их положить у себя ну там по расписанию обновлять и даже более сложная схема ну пример как можно протестировать а вот это бенчмарка это опять же скриншот в почти 100 здесь все сделано через впч тест такие графики вы можете рисовать если вы зайдёте в результаты и нажмите ссылку плод full & resorts вы получите такую картинку с графиками по всем метрикам и в параметре тест вы можете два теста через запятой написать и вы получите вот такой вот уже картинку с по считанной статистикой и как видите здесь он считает среднее значение по каждому тесту здесь вот примерно по 20 прогонов каждого теста здесь видно что в самом конце параметр согни фриком написано true то есть с точки зрения статистики это тест прошел то есть они не просто вам нарисую эти метрики сразу видно то есть у вас все значимые результаты или у вас просто в пределах погрешности так погрешность он тоже посчитал ну и полезно линии нарисованы это медиана следующая штука это когда у вас нагрузка на процессор то есть и пью boun нагрузка что как здесь тестировать в пасти у вас есть сложный javascript много дом элементов какой-то рендеринг мы убираем ограничение сети мы хотим быстро запускать тесты зачем нам тормозить и если мы считаем что мы с ней часто ничего делать не будем но количество прогонов мы должны увеличить потому что разброс будут дают чтобы нам получить значимую картинку нам нужно гонять тест больше вот когда вы получите нужно вам точность соответственно вы видите что у вас за сильно что-то изменилось какие здесь метрики у нас есть много первое the dog семью м с то есть это затраты на долота vento затраты процессоры в миллисекундах у нас есть то же самое для полной загрузке у нас есть средний процент загрузки happy во время загрузки страниц либо частично либо полный и 2 параметры developer tool всех рома если вы включите сбор то вы получите сипри у таймс и сибирью таймс док соответствие ну естественно мы можем контролировать когда у нас наступил дом конт loaded начало конец лорд вент то же самое может даже вы че стоим-то feels bad что получить именно чистую вещь без там влияние сети всех этих коннектов ну если вам не хватает вы можете добавить свои кастомный метрика через javascript и они будут отражаться визуальном интерфейсе будут отдаваться вам их можно задавать на лету либо прямо записать куда-то в самого посчитаю что им будет постоянно этот код выполняйте вам эти метрики записывать немного о проблемах как их можно решать первое самое главное это когда у вас есть не стабильность результатов самое главное это надо больше гонять тестов чтобы получать статистику берем если мы берем то уберем муж медианный варианту наиболее такой правдоподобный - агент обязательно тоже оптимизировать в принципе здесь нужно по максимуму убить все задачи регулярно которые внезапно там в индусы возникают теста ваген желательно должен быть рядом с тем сервером который он тестирует для того чтобы включить сеть дальше те сервисы которые вам мешают на стабильность вы их просто блокируете кроме того ресурсы достаточно медленно тесты достаточно медленный они требуют много ресурсов мы вас работает настоящий большой браузер поэтому здесь опять же вы можете запустить либо больше агентов для того чтобы они распараллелить и тесты либо изменить сами настройки тестов то есть опять же когда вы тормозите теста по сети вы можете регулировать да то есть три гаю теста вас быстро летать все равно не смогут понятно они будут ждать сеть также можно брать захват видео это тоже на срок который уже грузит сам агент ну и не надо забывать что все-таки - машины здесь нужно безопасности их нужно как-то обслуживать то есть опять же тест его агенты теоретически они могут отваливаться зависать периодических нужно перезагружать в почти sti тоже есть собственный мониторинг он вам не даст на мертвую машину запустить тест но тем не менее за этим нужно следить ну это - тоже обновлять для чего вся эта штука подходит ну во первых вы можете мониторить собственную скорость и сравниваются конкурентами тестировать ваши изменения можете оценивать настройки оптимизации вашего сервера вот не подходит для тестирования тонких маленьких изменений да у вас пределах там до 100 до 200 миллисекунд что-то в этих пределах потому что здесь скорее всего вам не хватит точности или тогда вам нужно делать какие-то серьезные меры по стабилизации естественно мы не тестируем сервер выпустить тестом для этого свои есть ресурсы мы не делаем нагрузочное тестирование не эмулируем реальных пользователей ну здесь сейчас я небольшой пример покажу как мы это использовали сделав собственный сервис называется вам ускорение сайт р.ф. он занимается тестируем скорости сайт то есть вы убиваете сайт он выдает автоматический отчет там сейчас есть вам может сравниться с конкурентом но это тест для обывателя для чтобы обычный человек понял ты меня медленно или быстро и примерно славные метрики получил быстро и понятно здесь пользуется вы посчитали справиться с плюс google pagespeed api отчет выходит на e-mail всего 16 метрик и трудозатраты вот на внедрение именно этого сервиса составили порядка 40 часов то есть это я считаю достаточно мало парада это за минусом там считаем что практически было как платформ для сайта для самого но включая там отчет e-mail и вся вся вот эта штука схемка там примерно такая же как я показывал то есть приходят пользователи он бросает в очередь свою задачу дальше приходит какой-то короновский обработчик бросает тесты на вы почти 100 параллельно тестируют их в гугле потом собирает отчет и управляет на емейл в конце значит вы в принципе получать хорошие готовы рабочий решению мы можем автоматизировать все эти тесты мы можем использовать его как в джейсон варианте автоматическом также никто не отменял визуальный интерфейс то есть все те возможности пабликам солнца у нас есть причем они нам доступно полностью безраздельно мы можем даже дополнять расширять стандартный функционал здесь здесь много ссылок по поводу того чтобы смотреть по поводу вы почти 100 я подобрал запоминать их не надо этому скачаете потом слайды но в принципе найдите патрика мина на ютюбе и его доклада там на velocity в основном это будет как раз то что вам нужно так у меня все спасибо да там есть такая штука как скрипт вот но там он может делать последовать действий но сколько я помню он замеряет последние под последнюю страницу то есть в метрике снимает с последней но чтобы он что-то сделал там авторизовался задать можно назвать это скрипт там свой такой псевдо язык есть и там набор методов там что он может делать второй вопрос если у нас несколько тестов можно ли запускать параллельное будет ну в принципе насколько я помню да он сам будет выбирать агентов он у него сего черити он знает загрузку агентов у него тоже есть такая панелька статистике то есть принципе идея в том то что вы бросаете ему тестовом сам уже разбирается с ними сделать добрый день спасибо за доклад у меня скажите такой вопрос правильно ли я понимаю что для настройки например плагинов в браузере мне достаточно просто на тестовом агенте но соответствующим образом во все браузеры подгрузить плагины то есть так это работает или как вообще это происходит то есть вы хотите протестировать и влияние плагинов на скорости либо возможно мне какой-то плагин нужен для работы плагин ну в принципе как там происходит там стоит обычный браузер он запускается с набором параметров командной строки они кстати настраиваются в конфиге там среди параметров что он делает он на меняет папку каша для того чтобы управляет бросим кэша и добавляет свой extinction принудительно вы почти ставский но ваш ум скорее всего кричать не будет то есть вы можете просто vps отключить зайти настроить браузер как вам надо вот и посмотреть что будет если нет тогда соответственно ваш плагин придется тоже в командной строке прописываем он включился хорошо спасибо а вот скажите если у меня там например поп апы используется это там вы почти из позволяешь этим работать по папа какого вида он виде слоя или видео канаш ну например увидят на ну вы почти тест вы эту точно увидеть на скриншотах потому что как он делать скриншот он открывает окно браузера тысячи 24 168 прямо снимает с частотой там по моему 100 раз в секунду скриншоты и вы в принципе эти попапы у себя увидите в сетевой активности скорее всего тоже да все эти ресурсы будут но мид метрики из них увижу то есть могу ли я например контролировать скорость загрузки этого папа по отрисовке в то есть как и как отдельный объект и весьма то есть предположим не интересуют он так я там вожу имя пользователя меня там рисуется какая-нибудь другая страница например с какими-то игра открывать я бы на вашем месте тестировал взял бы прям ural эту бабу папой прям туда его и загнал в тест сразу там можно так сделать но где то можно где-то нельзя как раз вот вот это вот это интересно то есть позволяется позволяет ли вот работает такие вещи ну попробуйте на публичном вот эту чтобы увидеть и дам публичным выпрямим такую же картинку вот здесь получите с эмуляции мобильных приложений той 100 просмотров через мобильный вот вы сказали просто в хроме настройте то есть это также я настраиваю например браузер там ставлю эту галочку и там знаю девайс на и просто потом через него работаю не только он сам настроек эмуляция да вы сразу задаете это мы соответственно какого типа устройства он против хорошо то есть я могу на там указать это грубо говоря в параметрах тестовом прогоне ты на таком браузере на таком и на мобильном сада ну каждый тест каждый вариант это будет один тест с каждым настройкой что спасибо да бред я здесь я правильно понимаю что агент это какая-то яворская штука которая запускает какой-то кастомный браузер и делает на нем какие-то свои действия по какому-то api то есть что представляет собой вот собственно управлять браузером а кто управляет там есть специальное приложение но как раз на си плюс плюс это такой резиденты типу демона который висит и постоянно выходит на сервер слушают нет ли там задач и задачи он запускает браузер ну там нет никакого эмуляции там запускает реальный браузеру с командной строки что-то вроде selenium агента до у них это вы прячетесь агент называется и он висит в панельке он еще там занимаются там всякими закрывает диалоги там кнопочки то есть готовое решение это по сути агент который запускается на любой операционной системе ну то есть не на любой под который его написали конкретно работает под windows и соответственно для вот мобильных устройств есть но jet ski агент так реализовано null это вот либо - либо мобильные устройства другого там нет пасся вопрос 5 минут есть можно пообщаться здравствуйте в доклад вопрос такой чтобы это все дело встроить в какую-нибудь цепочку разработкой типа там continues delivery было бы неплохо все эти результаты куда-то складировать вот и потом автоматически принимать решения если деградации нет и и вот мой вопрос такой как вы с этим поступаете поступает теле и если какие-то решения для этого спасибо если конкретно по интеграции посмотрите вы почти из вообще есть такая целая эко-система вокруг этой вещи например есть я существующие гранты тоски которые запускают впч тест через api и тестируют метрики и соответственно принимают решение там делать принимать кормить не принимать камень так что посмотрите может быть этот уже есть готовый вот конкретно для вашей системы складывать метрики здесь наверное если у вас есть к система мониторинга хорошо бы туда складывать чтобы она сама умело графики рисовать если нет ну здесь можно использовать либо то что уже есть в опустите его графики и метрики ну наверное тут свою над будет да спасибо за такой вопрос смотрели такой сервис как спид курс например который делать присед то же самое те же замеры только от полностью автоматизирована можно написать сделать там всякие расписание отчеты всякие критические точки настроить не пробовали нет не пробовал но это именно видит рассада да это счас который принципе ну и хопи даже есть небольшая правда так очень скудненько я но темнее оно уже есть и принципе все же и те же метрики которые были здесь показаний также там присутствуют и принципе довольно таки точные вот еще сразу сюда же не пробовали такие же solstic browserstack и прочь в которой принципе эти же фирмы все предоставляют том числе мобильный полноценно нормально одевается и все остальное да ну смотрите здесь сразу проблемы когда вы с любой saas возникает вас между тем что в этой стирать во-первых ваша машинка должна точно смотреть в интернет публичные это уже не всегда правильно н.н. ну хорошо во вторых у вас возникает а много-много неконтролируемых каналов интернет между вами и вот этим тестовым агентом то есть например вы полностью вот эту систему стабилизировать никак не сможете когда вас есть куда то свое вы его кладете прям рядом и вы гарантированно убираете вот эти флуктуации сети все-таки интернет ну на него надеяться тем более тестировать скорости очень тяжко будет то есть будет у вас и там сетевая погода текущая нагрузка каналов там сетевого бородку всего что вам не нужно между вами и агент как вот вот в этой ситуации ну потерян на поддержку инфраструктура твои опишите все таки вот счас это взял и использую что конечно сеть понятно опять же можно запустить несколько тестов и посмотреть там каким старым приметам что да вот плохо сеть работала или хорошо в конце к супер запустить тест и понять что вы плану помпе под ним поднялся все хорошо а вот в вашу по ходу ситуация так понимаю придётся очень много именно еще и структура заниматься верного но вас инфраструктура это php этот правильным сервер в принципе его не особо ресурсоемкие да вы куда предположили он работает масштабируемой часть это агент а вот сколько вам нужно агентов вот столько же вам виртуальных машинах надо быть поддерживать вот с windows и мы внутри да там есть затраты естественно это же windows то есть вы уже смотрите у себя то есть сколько для вас системно администрировать это будет стоить вот еще последний вопрос а касательно вот как раз интеграция завтра гель вопросов не прям конкретно интересует всякие дженкинс и проще вещи там есть интеграции готовы уже туда прям чтобы я просто сделал туре квеста его приняла и погнал цепочку ну посмотрите может быть уже есть вы просто их поищите вот и я приводил пример с грантом вот там прям есть но может быть это не совсем то что вам надо то есть вам же нужно не просто абстрактную проверка кит конкретной метрики для вашего теста и т запускать каким-то образом то есть скорее всего ну вы видели запросы отправить на тест в принципе это один просто запрос в результате это один джейсон в принципе вот если вы с этим можете работать то можете сделать всё что угодно синего цвета только джейсон и все да то есть какие то там подготовленной логе там для всяких получается джейсона xml и третий вариант это визуальный отчет чтобы снять глазами спасибо так все десять минут перерыв спасибо николай"
}