{
  "video_id": "otr55vmKf30",
  "channel": "HighLoadChannel",
  "title": "В поисках идеальной кластерной ФС: опыт использования LINSTOR / Андрей Квапил (kvaps)",
  "views": 4635,
  "duration": 2682,
  "published": "2022-03-21T14:06:28-07:00",
  "text": "собственно зовут меня андрей квапил и мой доклад называется в поисках идеальной файловой системы и и опыт использования линз top я работаю в компании видос мы являемся крупнейшим чешским хостингом нас есть два собственных дата-центра которые уже работают и сейчас счет 3 строится в общем то мы обслуживаем все всех клиентов в основном по чехии у нас есть мы в основном по восточной европе у нас то есть в россии мы не очень популярны пока что у нас очень интересный инфра занимаемся тем что с хотим сотни тысяч сайтов запускаем тысячи виртуалок для наших клиентов но и так же у нас есть какой-то колотить и мы также очень активно используем кубер не this он бормотал на нашей in free и open не было также рокс нас немножко используем в общем-то наскучили гаси наши инфра очень интересный тем что в нашем новом дата-центре мы начали строить использовать активное масляное охлаждение то есть это буквально вот такие вот железные ванны с маслом куда мы опускаем наши серваке и они у нас вот прям так работают сами серваке вся наша инфляция ком вот из таких вот и шпильман шатов мы практически ничего больше не используем это шоссе и 4 юнита высотой но и внутри там у нас 45 картриджей сорок пять серверов там intel ксенон восьмиядерный возможность ставить до 64 гигабайт оперативки от 1 до 4 м м е ну и 10 гигабитные сетка там собственно говоря сторож ему тоже крутим там же где и виртуалке там где наши workload вот на таких вот штуках штуки эти лежат в масляный на них запущена у нас собственно говоря все все все вернемся к теме доклада что нам нужно было от хранилища и всех решений которые мы рассматривали в первую очередь мы смотрели на open source решения и от хранилища нам нужно было в первую очередь производительность надежность и отказоустойчивость ну в общем то все вот эти вот слова при этом было важно чтобы она легко интегрировалась нашими текущими системами напомню оберните сну кабинет у нас тогда на тот момент не было планировался только было это не было прогноз ну да и q но и также хотелось чтобы она бесшовно можно было мигрировать виртуалке между собой и обновлять случае чего в принципе если рассмотреть все стороны как класс можно их разделить на три типа какие какие они бывают первый тип это у нас пасек совместимая файла система это как бы обычная файловой системой тогда вам столь же предоставляет обычным возможность научить его как обычную файловую систему где вас есть папочки файлики ну в общем стандартный такой режим второй вариант это когда вам хранилище предоставляет блочные устройства банальный пример когда вас там dfs до из db до в линуксе вот точно также хранилище может предоставлять вам блочные устройства но и третий вариант это когда вам хранилище предоставляя предоставляет некий api-интерфейс обратившись на которые можете там положить или забрать файлики ну всем нам известный с 3 или чтить и пел так как я сказал у нас огромное количество legacy объектное хранилище нам не подходила и поэтому мы выбирали вот из первых двух вариантов какие были варианты был их сейчас мы говоря дофигища сейчас их еще больше но расскажу про нашу историю конечно же конечно же первым делом мы посмотрели на cf потому что ну cf блин кто не слышала цеху цеха огромные комьюнити есть куча готовых решений интеграций с тем же окон стеком не бы like убером совсем его как бы легко развернуть бери используй проблема цеха в том что он потребляет просто колоссальное количество ресурсов а мы очень хотели чтобы у нас вот раз вот это вот шоссе 45 серверами хотели там виртуалке на хотели там же историк вот но при этом чтобы он был отказоустойчивой когда мы начали запускать танцев у нас просто неимоверно повысилась использование цпу и его был практически никакой но в целом при небольшой нагрузке он показывал весьма неплохие результаты дальше был вариант использовать бластер бластер оказался еще медленнее но глостер прикольно чтобы можно там блинным за пару команд взять развернуть и как бы вас будет вот отказоустойчивая файла система но так как мы хостинг у нас в основном была задача там хотеть маленькие файлы наших пользователей частым его и глостер здесь совершенно нам не подходил был еще вариант использовать lizard fs форк небезызвестный muse может быть кто слышал достаточно интересные файлы системам она прикольно ешь тем что там можно прям в конфиге настроить что типа я хочу иметь реплику там и она будет там гибко как-то реплицировать ваши данные при этом мисс интерфейс на маунте как feels и метаданные не отдельно этот момент когда мы рассматривали для сервера метаданных приходилось предлагалось готовить отказывай устойчивость помощью дерби дпс maker а для тех кто не знает но это как бы стандартный стык если вам нужно какой-нибудь ability сервер поднять сейчас там вроде более простые решения есть но тем не менее lizard fs показал стабильную производительность стабильно на медленно и тут мы пришли к by jeff с файлы системы которая нам очень понравилась он потому что она была прям сверхбыстрая она была быстрее всего что мы знали она практически не кушала ресурсов при этом она имела практически все что нужно например тоже отказоустойчивость которая реализуется вот кстати таким вот образом то есть для каждого сервера мы просто выбирали соседней серым нас было там два шоссе и одно каждый сервер 1 шоссе реплицировать данные на другой сервер другого шоссе но сама файла system by jeff с стоит сказать что на достаточно специфично я и была придумана учеными для цели ученых она используется активно в суперкомпьютерах но у нее есть специфика например у нее стандартные веке даже не описан стандартный способ восстановления данных принципе мы с ней поигрались мы нашли какие-то способы но как-то так получилось что мы ее внедрили в прод адам и вот еще проводили вот такие вот тесты на графике сильно не обращайте внимание здесь нам больше всего интересовало насколько файловой системы деградируют по производительности в зависимости от количества виртуалок который на которых который одновременно чит читают и пишут собственно на файловую систему здесь мы сели cv глостер диджеев с можно видеть что by jeff с даже там при 215 и virtual koch на 45 серверах чувствует себя вполне нормально слышно говоря это был основной фактор почему мы внедрили by jeff с но спустя время произошли проблемы мы начали находить очень неприятные кейсы например пользователь который загрузил файлик он там не полежал месяц и тут ни с того ни сего посреди этого файла какой-то первичный скрипт какой-нить кусок другого файла другого пользователя вообще ну какие-то такие совершенно неприемлемые вещи но и мы в итоге стали думать что с этим делать мы начали придумывать какие-то просто адовы решений типа там создавать лук девайсы на в кластерные файлы системе mountain форматировать mountain принципе какое-то время отработала но потому что видимо к метаданным было меньше обращения но и багов было меньше но они все равно были в общем то мы начали куда-то активно пытаться с мигрировать с нее начали смотреть другие решения не менее экзотические например вы что-нибудь слышали ошибок sheep dog это файловая система которая использует alibaba group создатели aliexpress в своих кластеров она прикольный тем что да она очень легко разворачивается клиент прям встроен в тему ее можно как блочное устройство просто взять там она умеет razer coding репликацию в общем-то все то же самое что цифры при этом гораздо быстрее но к тому моменту мы уже начали более активно подходить более правильно подходить к тестированию файловых систем и sheep dog не прошел никаких вообще наших краш-тестов то есть мы там припутали но до и после ребута у нас находились поврежденные блоки которые никак не устанавливались также был вариант использовать роза fs еще одна неизвестно не очень известная файла система она очень интересна тем что полностью построена на принципах и ranger coding причем рейзер coding там используется какой-то хитрый называется он моей терры жив кодинг и оно построено таким хитрым образом что может вам создать торги только из 4 и 4 8 и 16 устройств то есть не больше не меньше но в тем не менее работает она через фьюз имеет метаданные отдельно и показала как ни странно неплохую производительность но она смутилась что у нее нет комьюнити и в общем-то мы решили посмотреть еще решение был также вариант использовать ли у stripes blue stripes также очень популярная файлы систему в суперкомпьютерах она прикольная тем что работает полностью в ядре то есть как клиентская так и серверную часть метаданные данные отдельно ещё там есть так называемые almette некий сервис discovery который позволяет настроить high laver но failover в люстре и очень специфический например в случае если у вас какой-то из всд отвалится он сможет переключить на другой сервер но при этом он требует какой-то общий сторож который будет либо реплицирует лебеди либо какой нибудь общей из case интерфейс то есть в принципе можно было бы это как-то автоматизировать настроить но на тот момент мы были в мыле все и решили что люстры требуют достаточно большое время для интеграции которые у нас на тот момент не было был также вариант использовать a range of с она интересна тем что была новость что клиент a range of с внедрили прям в код ядра linux соответственно если у вас есть в range of с вы сможете исполнить эти использовать без каких-либо проблем с каких дополнительных модулей ядра имея как бы вот стандартная linux ядро ну а то что понимают в linux ядро как бы априори должно быть как бы стабильно целом она просто позиционируется как люстр тоже там супер быстрая супер-классная файла система но она не умеет блокировки не имеет отказоустойчивости и у меня нет комьюнити в общем да после всего мы поняли что счёта короче как-то плохо совсем с концертными файловыми системами но почти все из них используют дерби для отказоустойчивости но и мы тоже подумали а почему бы нам не использовать какой-нибудь где и не поднять на его базе какой-нибудь отказоустойчивый неф с сервер ну как бы почему нет простое решение собственного ряд что мы и сделали опять же у нас было по два сервера в каждом шоссе там было блочные устройства ilve ям там мы создавали дерби де который между собой реплицироваться и поверх этого блочного устройства мы запускали контейнер мы его запускали в копире но это принципе мог бы быть какой-нибудь и лекси контейнер users кейсов с сервером к этому него серверу подключались все остальные но у нас получался такой мышь is in a phrase серверов то есть 45 и 45 картриджей получается 45 из серверов и 90 клиентов опять же те же самые сервера они подключаются и работают при этом контейнер может спокойно мигрировать и минимальные задержки работала это честно очень хорошо позже мы додумались заменитель false сервер на из case таргет и от стал работать ещё намного быстрее есть классная skazi таргет называется есть идите если вы запускаете что-то в контейнере лучше бы чтобы это работало в лидер спейси потому что запускать ядерные штуки в контейнерах это априори не очень хороший дима что-то зависнуть или в общем заменили мы на исказит argued при этом на клиента не приходили вот таким вот образом то есть каждая ее каждое устройство приходил экспортировалась приходила как dfs days дпс dc поверх него мы создавали люм группу и дальше какая нибудь о по ним было уже нарезала виртуалке на них не запускал а при этом виртуалке могли работать с одних торги тов на одной ноте и на другой ноги были те же самые таргет и и виртуалке могли работать как бы вот с того стоит живьем группы то есть своего рода был такой класса миалгия большинство софтом гипервизоров такие как proxxon слабо не было они позволяют делать это даже без пластиковых расширений ок силвия мы любим лопнет в итоге мы сделали такие вот промежуточные выводы до что дерби диета быстро и это стабильно это отлично работает ну и как бы если нужен классный таргет который работает из визир спейси отвезти детей ну или на фарш если вам нужен визаж песни на false сервер прошла едем дальше чет мы подумали что типа как-то сложновато вот эту исказил вильям нельзя ли как-то попробовать к тому времени линкоров выпускает прошу прощения лембит выпускает лин старых новое решение которое пришло на замену дерби демедж это своего рода такой регистратор для блочных устройств по сути он позволяет просто нарезать вам устройство на ногах и отдавать их virtual com то есть если раньше была такая логика что мы брали одном общая дерби де устройство объединяли их нарезали это устройство на виртуалке то теперь с приходом дерби 9 эта логика немножко поменялось теперь у нас под каждую виртуалку под каждый контейнер создается отдельная дерби де устройств есть отдельный дерби де кластер при этом каждый такой der виде устройства можно отдельно snap шутить и отдельности ним работать если что-то с одним случается 2 из них как бы становится полностью 2 полностью независимы и с ним ничего не случаются но собственно говоря линз top это несколько файлы системы а скорее оркестра то я бы сказал что он как кубер нить с ног обернитесь у нас запускают контейнеры до аллен сторна спавнит нас настраивает блочные устройства на нотах под капотом у нас какой-нибудь увидим ли ctfs и либо что-либо еще поверх этого всего накатывается репликации с помощью der беде и с помощью того же deere биде который теперь умеет дисплее устройства своеобразной из case на уровне ядра можно отдавать его куда угодно при этом есть куча готовых драйверов реализации для кубера а ты ни был и прочно , как атака или чего либо еще ну и разумеется да есть классная и пей практически как у кубера но со своими заморочками со своей логикой принципе она есть она работает весьма классно так теперь я вам расскажу как работает сам линз торт графически представим что у нас есть шесть нот кластер из шести нот на каждый из этих нот мы создаем элви ампул и дальше мы заказываем валом и допустим создали один том 2 3 4 каждый из них создает с реплика фактор-2 при этом каждое блочное устройство это практически обычные блочные устройств вы можете его взять мдф дерби dismount ведь или настроить файл и систему например можете скормить его виртуалке то есть виртуалка просто запуститься с него все данные будут реплицироваться на другую ноду где находится 2 реплика но если мы запустим виртуалку на сервере где этого блочное устройство нету в этом случае у нас драйвер lens тора создать специальный диск вес устройства которое будет не будет содержать никаких данных то будет как бы redirected весь и он а остальные две реплики таким образом можем спускать виртуалке где угодно и не думает что что будет если они запустится там где данных для них нету хотя многие реализации драйверов поддерживает такую штуку как да и тела колите и вы можете сказать schedule мне виртуалку лишь можете сказать que берут штурм не контейнер всегда поближе к данным это очень удобно если вам нужно побольше и его не иметь сам линкор состоять из нескольких компонентов по сути это линз top контроллер который дает нам и пей ну и основное взаимодействие с ним происходит он сохранит свои данные в базе данных в качестве баз данных может быть использоваться как эти сиди кластер так и какие-нибудь стандартные реляционные базы данных типа позже 1 км sql может быть также локальный h2 собственно говоря хранить данные он в базе данных и есть еще у нас линз торс отели таллин старости лет это демон который устанавливается на каждую компьют моду на каждый компьюте сторож ноду потому что он должен быть установлен и там и там занимается тем что общается с контроллером и настраивает как раз вырезает он видим нарезает ctfs и настраивать дерби де чтобы было репликация да ну а мы с вами и соответственно драйверы уже общаемся ссср контроллером через и печь сила интерфейс в общем то вот такая схема очень прикольно что весь control плен с тором можно полностью отрубить и все созданные виртуалке они просто продолжат работать потому что один сорт что он делает он просто настраивает lm настраивать убеди но самая сам сам репликации самих данных он не занимается на самом деле инструмент несколько классных киллер фич про планирование размещения ресурсов еще расскажем мы можем например сказать чтобы реплики всегда размечтались у нас в разных комнатах например но в одной стойке наоборот в разных стойках но в одной комнате там это разваливается по принципу лейблов как в кубе ри умеет разные бренды такие как ztf с always in via мумии даже файлы сейчас они интегрируют можно даже какие-то венгерские решения к нему подключаются через коммуны и пообщаться с ними для тех кто работал с derby day знает проблему сплит brain что дерби диски train этом стандартной ситуации лидер беде который нужно уметь решать случае с сенсором есть такая штука как карточки breaker то есть дерби 9 версии теперь умеет больше 2 реплик и можно автоматически авто тереть и работать таким образом что когда вы создаете четное количество реплик блин скоро автоматически таки еще одну действенность для поддержания кворума то есть бесспорном а у нас как бы останавливается и он но и таким образом у нас сплит брендов гораздо реже происходит squid брейна ну и можно использовать envy me over fabrics можно использовать венгерские решение принцип lens for не ограничен дерби де хотя это и его наиболее интересная фишка умеет шифрование из коробки через люкс и классная фишка называется snapshot shipping снаб рок шейпинг это бэкапы встроенный прям сразу же в lens to our мы можем рассказать давай com раз в неделю сливай вот на такой то сервер при этом умеет как стандартный какие-то сторож школы либо из 3 он будет отправлять дельты то есть не весь не весь и мне все блочное устройство только дельты между snapshot ами вот по поводу коннекторов здесь я скажу чтоб отправь sms мы используем стандартный драйвер для opi не было и для куберы написали свои реализации для окон не было мы написали неофициальный драйвер который написано больше в отличие от поэтому и на мой взгляд он немножко лучше тем что во первых implement стандартную библиотеку не было а с другой стороны более безопасны с тем что все взаимодействие с линкором прошу прощения происходит из control toy но там моего то ни было но с купером немножко другая история вышла мы написали свое решение еще до того как появился официальный перевод оператор когда появился официальный первый оператор мы подумали а почему бы нам не смогли ровать на него посмотрели но принципе так и не придумали причин почему бы нам это стало бы лучше потому что на жки блин стол это просто хен чарт 1 оператор содержит какую-то более сложную логику вот ну как бы зато официальный в общем-то реализацией дофигища можете выбирать любую и сейчас я вам покажу небольшую дымку самого линкора я записал эту дэмку еще на тот момент когда у нас был огромный каберне this кластер там из 800 над сейчас мы его распилили но это в общем то отдельная история как мы распиливали кластер здесь я вам расскажу про то как про тот момент когда у нас работа у нас есть сенсор контроллер стоит full set это вот наш основной контроллер у нас есть in stores утилит запущены а извиняюсь 626 not у нас все эти ноты они как дисков ул так и дисплей с какие-то из них используются под сторож какие-то под виртуалке все они добавлен у нас в истории вот вы можете здесь видеть при этом каждая но до имеет некие properties по сути если это проводить аналогию с кубом это лейбл и над каждой надо имеет лейбл moonshot и название moonshot а хасис по сути и какой-то лейбл который обозначает роль этой самой роль и роль этой ноты то есть вот это вот надо у нас принадлежит open не было один где мы это используем да мы можем сделать за selected какие-то ноды например можем сделать лет все ноты которые мышь от 15 и мы видим тут у нас вот ноты из 15 маршрута вывелись m15 есть такое понятие как ресурс groups ресурс groups это конфигурация с которой вы размещаете ваши ресурсы например у нас есть ресурс groups у меня было 1 здесь у нас описано place каунт 2 означает что мы будем размещать две реплики эти две реплики будут размещаться в the red bull с названием тында дейта они будут всегда в размещаются в нотах с лейблом об не было один и всегда на разных шасси то есть таким образом мы описываем конфигурацию чтобы у нас реплики всегда были в разных шасси для лучшей отказоустойчивости все эти ресурс groups матрица с кубер найти с узкими и сторож классами и сейчас мы посмотрим набор количество ресурсов ресурс definitions это каждый ресурс у нас имеет на эту достаточно много имеет ресурс div не шин по сути каждое блочное устройство имеет ресурс div не шин то есть вот у нас 755 ресурсы финишем для кубе месяцев это по сути 755 resistant volumes 1892 ресурса для окуня было то есть виртуалке физические дома они все у нас тут но и в целом мы можем посмотреть количество реплик собственного диск фолдит с реплики они вот всего в районе семи тысяч реплику нас вот поговорим про плюсы и линз тора теперь хочется рассказать про его минусы и первую очередь хочется упомянуть про баги и обновления дерби де дел том что derby day идеальным он до сих пор содержит какие-то баги с каждым разом с каждым релизом их все меньше и меньше но проблема в том что обновляет терпите не очень удобно дробите является модулем ядра и для того чтобы обновить вам нужно согнать все виртуалке sh100 удалить аромат сделать дерби де потом обновить его перри компилятор брат на вставить можно обратно индз мот виртуалке и потом можно виртуалке обратно сгонять на хвост у нас это немножко проще потому что мы используем пикси будто бы и вермонт и как бы вся операция обновления выглядит как согнать виртуалке с кастой reboot нуца и как бы космос загрузить новый имидж уже с новым дерби де модулем но все равно это не так просто как обновить как там какой-нибудь тот же самый цех но обновление действительно очень важно и если вы планируете использовать дер беллен star всегда очень советую использовать последние версии потому что там очень много bug fixes особенно ядер беде чем как новой версии выходит там обязательно большое количество bug fixes ну и сам линз торт периодически имеет какие-то такие baby девиз есть например такая штука как и выкурить это если надо у вас недоступно там течение двух часов он начинает все ресурсы с ними пересоздавать на других но даг ну и она на данный момент работает немножко странно как бы это не так чтобы прям бак но неприятно тем не менее баг репорт имеется я думаю в скором времени это все пофиксят поддержку rdma и в дерби деталька энтерпрайз версии но и работает сенсор готовитесь к тому что у вас будет достаточно много ручных действий там есть несколько уровней утилит там дерби de an der где минич теоретически вам нужно будет знать как с ними работать как врезал ведь сплит brain как бы это не проблема если у вас там кластер из 5 и 7 и 10 not но гроба оснастили 800 она то количество операций ручных действий возрастает экспоненциально вот по этой причине и еще по той причине что наша она вендор сделал нам очень классное предложение мы в итоге решили отказаться от линз тора и перейти на коробочные решения но тем ни менее верю в светлое будущее ли история думаю что это классная технология вот если вам нужен дешевый сторож я думаю отличные решению ещё пару вам моментов расскажу интересных когда у вас есть блог сторож вам часто бывает нужен какой-нибудь ведра отменит он опять же если у вас legacy вам нужно чтобы несколько реплик вашего приложения имела доступ к одному и тому же сторону но облачные устройство не предоставляют такой возможности в этом случае мы используем нфс сервер про вишнер это еще один проект который я менты не купит нити six и он представляет собой все тот же самый но визга ниша сервер но позволяет автоматизировать providing the move то есть вы по сути в кубе и создаете red white fans том на верхнего запускаете на сервер провернешь и после этого он уже может спокойно проверить вам redber отмене тома который можно уже смотреть использовать вашему приложению не сказать что это работает очень стабильно но как бы и из всех решений что я знаю я думаю что это самое простое стабильные решение по поводу бэкапов я уже рассказывал что линкора есть наша shipping но мы его не используем мы используем свое решение опять же потому что мы его начали использовать смысле лин створ намного раньше того чем по или сеть модные новые фишки наше решение основано на крестике я проводил некий research смотрел разные решения для бэкапов и выяснил что из всех вариантов для бэкапа блочных устройств крестик работает лучше всего меня должны писал до какой-то статейку на хабр можете почитать на интересно этом с обзором в качестве бэкапом бэг-энда мы используем ctfs делает это по сути software raid ctfs declasse the red parity по сути тот же самый рейд просто он очень быстро восстанавливается на даже на больших дисках то есть нам raid 5 и raid 6 с коррекцией ошибок работать весьма классно ну и да разумеется используем снапшоты для консистенции перед тем как снять backup каждый раз обязательно делаем snapshot снимаем backup потом snapshot удаляем крестик умеет где дуплицировать то есть каждый раз у нас читается весь все облачно и устройство но отправляется изменение записываются только дельта и работает это очень быстро и очень стабильным мы делаем бэкап и наших virtual и чак каждый и каждую неделю но и здесь хочется упомянуть про несколько комьюнити в телеграме если вам будет интересно 1 тсд с ру-комьюнити куда можно прийти потрещать про классные файлы стену или просто про то как створок linux работает он может быть немножко токсичные как и многие русские комьюнити но я думаю там тоже своя атмосфера 2 чатик конкретным паулин створу ядер беде туда можно зайти вопросы по дерби типа задавать но и остальные два я думаю вы уже знаете пока уберу его пин не были как бы здесь можно обсудить вопросы интеграции на этом у меня все буду рад выслушать ваши вопросы по себе большая вот человек с микрофон может бежит это новые строчки из баз данных сынок-то не снимаю листик пожалуйста спасибо за доклад вопрос у меня такой как я понял у вас аллен starcounter a plain запускается в кубе ри как быть когда у тебя есть кубер есть какое-то количество такого же legacy которые запущены на обычных virtual koch хочется чтобы было как был какой-то сторож и не хочется чтобы у тебя был отдельный сторож для кубер и отдельный для виртуалок где лучше вообще размещать этот контроль плэй до то есть крутить его в кубе или выделять отдельные ноты и потом монтировать кубинцы пиве для кубера с этих нот вот как сделать проще лучшие ну смотри control плен allen store должен быть всегда установлен на всех нотах которые используют в кластер и то есть если ты планируешь их использовать для виртуалок то на компьютер точно также должен быть установлен in stores эти лет или тэмин надо не надо да и здесь вопрос встает как обновлять линз top потому что все одна процедура обновления лицо раз выглядит следующим образом мы ступаем все существующие демоны обновляемых запускаем заново как это делать это уже вопрос чем удобнее можно анти был можно купить его поднимать как бы но стоит понимать что светили то должны стоять без дев кластера и обновлять их все нужно одновременно как сделано или вас только кубер а у нас да у нас инфра полностью построена на хайбери у нас вообще все в клубе или даже то же самое вот они был у нас к убери вот ну или на сторону нас тоже вк убери то есть все обновление выглядит таким образом что накатываешь просто новый фильм чарт он обновляет все демоны всем спасибо еще у меня трусы кубер навскидку beer кубер насыщен купер в кабири кстати могли бы ещё подсказать как обстоят дела с квотами в кубе ре ку бери да именно квоты на диск если использовать линз торг если какие-то проблемы и вообще существует ли они конкретно с квотами первым space не подскажу ну вернее расскажу в самом кубе этом есть какие-то встроенные решение они не завязаны на конкретный сорт с линкором если имеется ввиду создать том какого то определенного размера то с этим проблем нет и ресайз работает как бы и если что хочется сказать что allen store есть такая проблема что если у вас есть надо с каким то определенным сторож полым допустим там ноты по гигабайта подобает ладно извиняюсь нету возможности создать там больше чем размер физической ноды то есть одна реплика всегда должна полностью помещаться на моду на в лесу нам работать нормальной решаясь есть и снапшоты квоты при этом отрабатывают и дальше мы не запишем хорошо инвестора второй маленький вопросик насколько больно down спилить кластер к примеру вывести 100 not из кластеров 300 но сейчас расскажу из кластер стану atv 300 но это не дам скелет ну а down скейл нам нужно вывести узлы и насколько на проходим по времени пока все данные от мигрируют я не уверен что на данный момент есть что это достаточно хорошо автоматизировано но процедура выглядит следующим образом просто берется надо с не изгоняются все устройства соответственно в зависимости от скорости сети скорости дисков нужно ждать пока это все про реплицируется но на данный момент я уверен что такое автоматизации сейчас в истории нету очень большое спасибо за доклад вопрос аллфин такой в продолжение вчерашнего разговора про пульс т.к. кибер канадец у канады которые непосредственно занимаются хранением они отличаются от вычислительных это одни и те же ноты или есть ну допустим у линз тора какие-то специальные требования частоте оперативен то есть почему почему нибудь должны не отличается от типичных компьют но да там есть некоторые рекомендации там типа использовать этот память но они не строгие и как бы принципе то но ты на самом деле те же самые просто отличаются конфигурация на сторож но дак ты создаешь элви ям ctfs пол и объявляешь его как бы что его можно использовать на диск класть на отдых есть масса такие можно принципе вообще ничего не создавать нужно просто добавить воды в кластер ну и может настроить айпишник с точки зрения там всех остальных ресурсов кроме и диска это абсолютно такие же ну да ну да спасибо так давайте возьмем из интернета вопрос отлично юзер 02 15 как тебя зовут какой вопрос привет меня зовут и часов у меня не стало просто 1 старт непосредств не весь мир где коллеги что мы тебя слышим очень хорошо не обращая внимание на фидбэк своего собственного голоса просто задай вопрос громкой целиком и мы победим хорошо андрей пытались пожалуйста опытом был ли опыт в развертывании нестор без использования дерпи диск нативными м.е. aver фабрик драйвером конкретно режим работы эти цепи и к чему этот опыт привел сравнении с дерби инсталляции хороший вопрос я с этим игрался но в целом я не использовал там улин скоро все очень хитро сейчас реализовано сейчас новой версии 5 они все это разложили таким образом что у нас есть слои на первом слое у нас может быть lvm на втором слое у нас может быть люкс и на третьем слое допустим там дерби де которые у нас реплицирует данные то есть и создании устройств такого типа просто описывается я забыл как называется сущность то можно описать какие слои мы будем использовать при создании устройства и как бы они будут работать мне очень было важно чтобы они внедрили возможность использовать широт старридж потому что я говорил линкора есть куча готовых коннекторов и и пей который был бы очень прикольно использовать с шарит старриджа которого обычно этому всего нету и я хотел использовать шире дым для того же самого через тот же самый инструмент жить устройство они вот только последних релизах ввели эту фишку я еще не по то есть как бы чтобы можно было создать алви им использовать ширины как жареный исказил он и его уже линкором нарезать на устройство здесь принципе дерби де не нужен как бы но при этом нестор можно было бы использовать как некий 5 интерфейс понял спасибо еще если момент а была ли опыт построения как дни идут в сравнение с тем же сторону с движком мой астор который может быть какой-то опыт был не есть сравнении с решениями на базе вместо просто все хвалят directx 9 хотелось бы понять сам вниз и б сам игрался для тех кто не знает о пинге bs это система построена на кубе рену неё нет несколько брендов мостар еще какие-то два там что-то чуть ли не запуск zfs визир спейси с моей стороны кред нас новым брендом я не играл с не слышал что panic некоторых тестах он обходит линз top но он пока что еще достаточно сырой он по моему вольфе он не умеет там там была такая штука что в случае если у вас на из реплик отваливается происходит полный rising каждый раз и вот этот момент пока что меня совершенно не устраивает и по этому не готов использовать мой astor но в целом проект open и без выглядит весьма перспективное я думаю что в будущем это интересно automotive хорошо спасибо за ответ вечно спасибо что подключился друзья давайте зададим еще один вопрос быстро а то я просто боялся что у парня рука затечет его на телефон и потом пойдем в цифровые кулуары и продолжим дискуссию просто уже не на этой сцене от соседнем помещении спасибо за доклад меня зовут евгений у меня два вопроса первый как вы тестировали все файловые системы какие действия делали сколько времени потратили на конфигурацию других систем по сравнению с нестором а второй вопрос как у вас устроена отказоустойчивость то есть если это один допустим дата-центры он будет обесточен вас вообще все упадет а если два вам нужно будет допустим как-то по сети уже медленно диски синхронизировать реплицировать я тебя понял давай сначала отвечу на второй вопрос как устроена отказоустойчивость между до центрами пока что не как мы планируем сервис который будет делать реплики в разных дата-центрах но у нас есть бонус 2 дата-центра не у нас находится достаточно недалеко есть стабильный канал между ними и в принципе как бы это не должно быть проблемой смолин stora есть вернее у линды то есть решение дерби прокси которая позволяет делать и за 100 рекавери и вроде как реплицировать это не стабильным каналом то есть можно отправлять данные там куда то на другой континент например во времени восстановлению сколько будет приблизительно хотя терпите прокси не знаю это проприетарных продукт по времени восстановления тоже хороший вопрос там есть аспект этом месяце изначально хронизации она обычно дольше дальше если у вас там например произошло какое-то отключение одна из реплик выбилась walker bay есть changelog и когда реплика возвращается на смотрит к последним состоянии корана было и она просто изменяя просто дельту скачивать то есть поэтому восстановление происходит весьма быстро нету full рисунка и работать весьма быстро первый вопрос был про собственно какими ведомствами до тестировали что делали сколько времени на конфигурацию остальных файлах систем потратили просто я например их очень быстро проверила я уверен что я не то что то нет ни до конфигурировал это было сложно это дороже оказалось я просто переходил к следующим решение первые четыре которые мы тестили достаточно много времени потратили на с тестированием и очень всерьез рассматривали использование цех но в итоге выбрали плохое решение берри льстец ну а дальше уже как бы достаточно быстро рассматривали потому что нам надо было срочно какое-то решение решить потом уже более спокоен по спокойном темпе и мигрировали с нашего дерби де решения на линз top пользуясь случаем хочу рекламировать своего коллегу который пишет свой цех в называется with a star я думаю что тоже очень интересное решение если повезет я поучаствую разработки open не было драйвера для него он кстати тоже будет на холоде и в москве выступать виталий виталий with a star отлично спасибо прежде чем мы переместимся в цифровые клары кому мы подарим книжку за лучший вопрос а можно человеку который онлайн спрашивал да конечно вячеслав напиши в любой чатик пожалуйста свои контакты и мы отправим тебе книжку скороговорка кстати новая только что родилась хостинг-провайдеры can фигурировали конфигурирование да не выглядели говорит к ним до теперь тоже памятные призы за участие в питерской конфи сейчас всё кида болтают да и друзья мы перемещаемся в цифровые кулуары там можно продолжить разговор и со спикером"
}