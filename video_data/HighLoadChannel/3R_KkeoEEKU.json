{
  "video_id": "3R_KkeoEEKU",
  "channel": "HighLoadChannel",
  "title": "Строим mesh-сети 6LOWPAN на основе Contiki OS / Владислав Зайцев (Unwired Devices)",
  "views": 1861,
  "duration": 2900,
  "published": "2018-01-16T12:27:39-08:00",
  "text": "замечательно здравствуйте меня зовут yaro а только ну в компании она варит девайс с мы разрабатываем различные радио решения радио решения разные от больших клинков на лора где от конечного устройства до базовой станции несколько километров до маленьких мер сетей в том числе для умного дома например где между устройстве может быть меньше метра тут надеюсь все представляются такой умный дом поднимите руки кто не представляет понятно ведь могу пропустить этот слайд если кратко то умный дом на радио немножко отличаются от проводного батареечном питанием тем что надо поддерживать связано с сети по проводу сигнала пройдет всегда по радио он может не пройти расскажу туда про другой проект тоже но на не очень больших клинках то есть там вся сеть занимает эти если километров между устройствами порядка 200 метров может быть система управления наружным освещением это система диспетчеризации для обычных уличных фонарей с этих уличных фонарей можно получать статистику то есть время наработки температуру текущую мощность сообщение об отказах этих светильников это помогает их обслуживать в том плане что не нужна бригада которое едет вдоль шоссе просто оператор своей диспетчерской получается общение что фонарь 123 перестал работать бригада культур ника к нему именно к нему выезжает заменяет его и и все хорошо умный дом и ну я на самом деле погнал слишком быстро все что это все что я рассказываю это я рассказываю про мир сети я занимаюсь меж частями и умный дом и система управления наружным освещением сделаны на мир сетях на одних и тех же практически устройствах но у них есть различия умного дома все устройства расположены очень компактным буквально внутри одной корт квартиры система управления освещением они растянуты в цепочку вдоль трассы и длина этой цепочке может составлять и километр 2 и 3 для умного дома принципиально быстрота реакции конечных устройств с актуаторами если вы нажали кнопку он должен сразу включиться свет для а сумма как правило не требуется вот сейчас прямо включить вот этот светильник гораздо важнее чтобы эти светильники все включили сами по расписанию у умного дома много устройств на батарейках это какие-то датчики температуры это выключатели которые могут не принимать команды для себя или принимать их с большой задержкой но они просто обязаны работать как а это довольно большого времени от батареек то есть это как минимум год вы не хотите менять батарейки сам выключатель и каждый месяц в а сумма что логично питание есть всегда там есть сеть 220 от которой питается фонарь и соответственно блок питания который питает наше устройство в умном доме в принципе не много устройств сети то есть это 2030 в сумма это могут может быть до 200 fonarev цепочки поэтому я кратко обрисовываю про что я буду рассказывать дальше чтобы вы имели представление чем эти системы отличаются меж сети и чистый мы строим на основе стандартных стик скоб стандартов и чистых сетей вообще есть несколько есть дигби из евреев есть sexual pan stik слово pansy циклоп она так очень общий стандарт под которым можно подогнать очень много всего можно разрабатывать свои чем мы занимаемся физический уровень с сети стандарта six локон это 800 802 15 4 на на этом же стандарте построен за это радио передатчики на 800 мегагерц или на 2 и 4 гигагерца то же самое частое вай фай что у вай-фая сетевой уровень это немножко видоизмененный ipv6 немножко видоизмененные он из за того что у полноценного ipv6 довольно длинные заголовки и они просто не не вмещаются в маленький пакет занимают слишком много места поэтому для сик слова по на заголовки и пиво 6 сокращены сетевой уровень это ipv6 сетевой уровень это ipv6 там еще есть некоторые протоколы для маршрутизации составления сети то есть после запуска некоторые устройства должны найти друг друга в сети и для этого есть специальный протокол транспортный уровень это у-у-у . почему не типе потому что маленькая скорость очень у сити очень большие накладные расходы на на открытии соединяете себе надо отправить туда надо отправить обратно поэтому основном все используют удap и уровень приложений наш собственный мы не стали там ничего особо изобретать затем мы изобрели все мы не стали поддерживать какие-то существующие решения просто потому что их нет удовлетворяющих нашим каким-то требованиям как я уже говорил сих слов он имеет отличие от компьютерных сетей даже если взять совершенно наиболее похожий пример вай фай сеть вашей квартире она все равно очень отличается несмотря на то что работает на частоте скорость передачи очень маленькая обычной скорости передачи это 50 килобайт в секунду и причем эти 50 килобайт это не скорость передачи данных а это скорость канала в этом канале еще ходит служебная информация city plus накладные расходы ну в общем да вся служебная информация это меж сеть то есть как у нас происходит передача данных от одного устройства к другому в случае вайфай сети мы передаем данные на роутер по схеме звезда роутер отправляем другому устройству в случае месите мы не можем отправить данные сразу на роутер мы его можем не видеть он может быть не в нашей зоне радио видимости зато мы видим вот два три устройства которые тоже не могут отправить данный народ но которые видят другие устройства поэтому мы ищем устройство которое говорит что она имеет где-то там по цепочке подключения координатору кроутер и отправляем данные ему она отправляет их дальше по цепочке в связи с чем возникает третий пункт так как у нас гораздо больше точек отказа и мы никак не можем повлиять на эти устройства они она стоит себе и стоит когда она сломается никто не знает то возникает проблема что некоторые устройства может взять и выпусти сети в этом случае приходится системе перестраивать маршрут в обход этого устройства за действия какие-то другие каналы внутри самих устройств это микроконтроллер на основе тихо царский микроконтроллер texas instruments серии c&c 1310 ct 2650 это новые 32-битные контроллеры а на основе ядра cortex m3 сказал да это arm cortex m3 с довольно таким серьезным фаршем у них 120 килобайт 128 килобайт внутренней памяти 20 килобайт оперативки это для меня это очень хороший жирный фарс мне кажется те кто с микроконтроллерами дела не имел сейчас недоуменными вот у них более того более у них есть не только основное ядро у них есть дополнительно ядро которое занимается всем что связано с радио ему просто отправляются данные она их отправляет в эфир всем этим она занимается сама в отрыве от основного ядра поэтому нас остается очень достаточно много процессорного времени для запуска своей маленькой операционной системы и более того у них есть еще одно маленькое ядро которое можно запустить на обработку прерываний на получения каких-то данных на обработку сенсорных сенсорных кнопок и так далее тут не стыдно немножко показывать это одна из самых первых версий устроив для умных дом томов собранная буквально на коленке из конструктора но в принципе можно понять что сам контроллер под ним плата с двумя шлюшками и блок питания собственно все что нужно для устройства которым управляют в умном доме и мы переходим к самому интересному операционная система операционная система называется kontiki операционная система разработана в шведской студии компьютерных наук если я правильно его перевел операционная система имеет свои особенности но на самом деле это не то что по другую то что обычно называют операционной системы потому что это не linux это это по сути rtos real time ago я операционка которая не сильно в общем то отличается от программы и и даже можно приобретать при определенной доли везения собрать как программу для linux и там запустить то есть там достаточно молоко да по сравнению с какими-то взрослыми перцовки me однако там есть приложение там есть потоки между ними можно переключаться это хорошо это удобно однако из-за того что это университетская разработка но на сторонних разработчиков они мягко говоря приют поэтому то чем я занимаюсь последние полгода это программная археология я пытаюсь понять чем думали разработчики когда писали эту операционку и пытаюсь согласно этому представлению понять что мне надо сделать надевайте каску археологов берите в руки лопату и поехали когда мы делали умный дом перед нами на конечно же встала задача сделать устройств с питанием от батарей у вас выключатель на стене висит весь прикол радио устройств в умном доме это то что мы нам не надо вести провод каждому выключатель мы можем взять маленькую коробочку ставить то маленькую батарейку и прилепить ее на стену на скотч у нас будет работать если мы передвинули кровать мы просто укрепляем старый выключатель выключатель из 2 место прилепляем на новых все хорошо устройства с питанием от батарей это довольно важная часть умного дома собираем прошиваем измеряем питание ток потребления ток потребления нас не устраивает с таким током потребления у нас маленькая батарейка cr 232 садится где-то за месяц нам грустно мы закапываем ся кот оказывается разработчики операционки придумали такую хорошую вещь на самом деле не только они придумали она в общем то лежит на поверхности вещь называется рабочий цикл о радио суть в чем наиболее затратные как это ни странно это прием сообщений потому что когда мы скорости у нас достаточно большие если нам не надо гнать гигабайт это мы можем очень быстро взять и отправить данные отправить данные это дешево по затратам энергии а вот принять постоянно держать приемник включенным в ожидании каких-то данных учитывая то что у нас большинство этого времени мы просто находимся в режиме ожидания мы ждем час 23 потом хоп нам приходит сообщение мы опять ждем вот вот этот процесс ожидания с включенным приемником усилителем там вся всем фаршем он как раз таки избирает основную долю энергии ответственна за 90 процентов потребления энергии если не будешь что придумали разработчики они периодически включают приемник раз там в 100 миллисекунд в 200 в секунду это можно настроить и ждут сообщений если сообщение нет они выключают приемник включают его через следующий промежуток времени если сообщить если они видят кусок сообщения то они включают то они не выключают приемник и принимают это сообщение в самом простом виде это вот так выглядит как на экране то есть нет синхронизации а передатчик просто долбит пятью 10 одинаковыми сообщениями пока его приемник гарантировано не засечет передатчик знает что он что приемник включает включается на прием 1 100 миллисекунд допустим и есть его задача долбить передающими сообщениями 100 миллисекунд в какой-то момент приемник точно гарантированно включится и примет сообщения есть еще более сложная версия когда приемники и передатчики за счет каких-то системных сообщений в сети синхронизируют фазу и можно уже не долбить все 100 миллисекунд а включаться именно в тот момент когда приемник включается на прием однако я не уверен чем думали разработчики когда вот это все делали потому что даже с учетом этого механизма даже с учетом этого механизма загнанного в огромной задержки раз в секунду он все равно ждёт слишком много у них были те же самые контроллер и у них были те же самые батарейки я не понимаю какой смысл в этом механизм если он все равно выжигает батарейку за месяц поэтому мы его выключили смысл в том что у нас есть два класса устройств первый класс это допустим роли которая у вас включает свет на кухне оно должно сработать быстро вы должны нажать кнопку сигнал должен сразу же дойти до реле не через секунду сразу же задержки уже в 207 секунд 200 миллисекунд уже некомфортно поэтому это устройство должно держать приемник всегда включенным а есть другой класс устройств с питанием от батарей к которым не обязательно реагировать на пакет сразу же если у нас кнопка не получат какой-то системной информации вот вот прямо сейчас ничего страшного как правило не произойдет это просто кнопка прикол в том что как правило у первых устройств есть внешнее питание они чем-то управляют исключая уж совсем совсем крайний случай типа каких-нибудь кранов на батарее которым невозможно подвести питание у них всегда есть питание это релюшки это ден меры это какие то светильники и прочее у батарейных устройств питания нет но им и не надо сразу принимать сообщения поэтому там есть в kontiki специальный define который изменяя который можно изменять механизм который ответственен за постройку рабочего цикла радио мы просто его выключаем и у нас радио работает всегда на всех устройствах это потребляет еще больше энергии чем в в том примере которые я уже описывал но мы же можем выключать и включать и радио поэтому если мы нажимаем на кнопку и нам надо отправить сообщение о том что кнопка на кнопка нажата мы включаем радио отправляем сообщение координатор дожидаемся от него подтверждения и выключаем радио все замечательно измеряем потребление она нас устраивают у нас судя по потреблению она будет работать пару лет возникает другая проблема батарея на устройство сначала работает через некоторое время она отправляет сообщение координатору но до него не доходит подтверждение в чем смысл система довольно-таки живая там шевелится нагоняет свой трафик она изменяет кита свои таблицы и если устройство видит что вот это устройство не ответила на несколько его сообщений то она считает что она выключилась что намертво и удаляет его и свои таблицу маршрутизации наше устройство как мы помним потому что ева выключена радио части выключена радиочасть она находится в спячке она никак не может ответить на это сообщение таблица маршрутизации что это такое это я потом расскажу таблицы маршрутизации каждое устройство должно знать о рассмотрим какую-то ситуацию то есть допустим у нас устроил вот координатор который а хочет отправить сообщение устройств нет руб устройство н хочет отправить сообщение координатору она зная у него есть таблица маршрутизации в которой записано что координатор доступен по цепочке которая начинается с устройства аж она отправляет сад сообщение предназначено и координатору а устройству аж устройство аж смотрит свою таблицу она видит в этой таблице что маршрут до координатора следующее следующее звено в маршруте дакар дало координатора сети начинается с устройства д она отправляет этот же пакет просто перселла этого устройству d и уже устройство д видит что у него есть в зоне радио видимости координатор она отправляет о координатору напрямую вот эта таблица в которой устройство смотрит а какое будет следующее звено маршруту есть таблицы маршрутизации координатор в этой таблице присутствует всегда он там присутствует первым номером это логично иначе бы они не могли с ним связываться однако в у каждого элемента в этой таблице есть время жизни в данном случае устройство просто видела что 20 минут ему какое-то другое устройство не отвечала на его сообщение и берет и удаляет его с таблица поэтому мы закопались в код нашли где настраивается время жизни этого маршрута и хорошо его так увеличили с 15 минут до десяти часов раз в час наши батарейные устройство просыпаются даже если с ними ничего не делали отправляют статусный пакет отправляют сообщает свою температуру напряжение на батарее и засыпают обратно этого хватает чтобы остальные устройства получили от них пакеты с подтверждением устройствах видят устройстве их из таблицы не удаляют следующий кейс как раз такие системы управления наружным освещением как она теоретически выглядит можно посмотреть на экране это трасса это фонари вдоль трассы этих фонарей там много их может быть сто двести штук в каждом из них устройство секту pan and young торчит связываются не струю другом соответственно по радио к ним проводом подходит только питания делаем тестовый стенд делаем 30-40 устройств 50 возникает проблема 20 устройств но как у нас устроен join в сеть устройство строят сети между собой как только они видят координатора они отправляют ему сообщения привет я здесь мой серийный номер такой моя версия такая то я умею то-то и то-то координатор им отвечает я тебя вижу твое сообщение получит ты включён в сеть возникает проблема устройства могут отправлять сообщения координатор а координатор им уже не может отправить подтверждение проблема заключается в той же самой таблице маршрутизации она имеет записи в ней имеет не только ограниченное время жизнь но и количество этих записей тоже ограничено как правило потребляемой памятью зачем вообще нужна эта таблица маршрутизации допустим всё там сделано проще там координатор знает структуру всей сети и он когда хочет отправить кому-то пакет он просчитывает весь маршрут он допустим координатор хочет отправить устройство номер два он записывает в пакет маршрут с устройствами 0 01 02 и отправляет его устройству не надо знать где но вот вот этому устройству не надо знать где там находится это он она знает следующую точку и она отправляет этот пакет просто следующей точке это хорошая стратегия если не если забыть о том что устройство могут выпадать сети батарейка села допустим торшер перенесли в другую комнату или еще что-то просто выключились поэтому в случае выпадение вот этого устройстве сети пакет вернется координатору координатор скажет сеть тебе надо перестроиться сеть перестроиться он получит информацию о новой структуре сети сможет просчитать новый маршрут и отправить его это большие задержки в cig слову пони сделано более просто коррелятор просто отправляет сообщение следующему устройству у него есть такая же точно такая же таблица маршрутизации и он согласно этой таблице отправляет сообщение следующем устройств хочет он он он достигнуть какого-нибудь вот этого устройства он отправляет этому это отправляет этому это этому а это уже на конечный пункт если какое-то устройство выпало то координатор об этом может и не знать он все равно отправит этому а а это устройство увидев что она выпала что она не отвечает на его сообщение сам перестроят маршрут запустит локальную перестройку в процессе которая сформируется новый маршрут от от от семерки как восьмерки ему по сути даже не надо запускать перестройку него есть запасные маршруты отправят просто сообщения по запасному маршруту вот так вот это более правильная вещь на мой взгляд потому что обеспечивают меньше и задержки мы увеличиваем количество маршрутов таблицу маршрутизации и получаем работу корректную работу сети на больших количествах устройств фонарь фонарь висит на столбе фонарь залить герметиком потому что там дождь потому что там пыль это все устройства попадать не должно вот проблем у нас выходит новая прошивка для этого фонаря мы не можем заменять все устройства мы не можем послать монтеров с ноутбуком которые будут подключаться каждому устройству нам надо какое-то онлайн обновления проблема 2 все мы ошибаемся мы можем сделать прошивку которая в реальных условиях начнёт глючить тогда шучу с учетом tale ну она просто не сумеет подсоединиться к сети а следовательно мы получим из фонаря кирпич поэтому нам нужна технология которая способна обновлять прошивку в себе по воздуху и б не допустят а кирпич его не этого фонаря что мы делаем в первую очередь мы начинаем использовать бутлоадер как устроена обычная прошивка микроконтроллера у нас есть программа у нас есть указатель на стартовый адрес при запуске контроллера он передает управление на старт у одри запускается программа мы добавляем bootloader и при запуске контроллера первым запускается бутлоадер а только потом если ему все нравится если его все устраивает он передает управление программе обновление у нас на данный момент реализовано вот так вот бутлоадер но соответственно по контроллер загулы загрузился запустился бутлоадер тоже запустился его все устроил он передал управление основной программе программа соединила с сетью соединилась с координатором видит что есть новая прошивка координатор говоря говорит ей у тебя есть новая прошивка он передает эту прошивку кусочками основной программе она и и записывает во внешнюю flash память как только она и и записала она проверяет контрольную сумму если контрольная сумма совпадает программ новый образ передан верно она устанавливает флаг готова к обновлению и перезагружается передает управление заново на стартовый адрес бутлоадер загружается видит что там есть флаг готова к обновлению видится там есть новая прошивка он так как он расположен в отдельной области памяти он может перезаписывать основную программу он вытаскивает из внешней памяти этот новый образ программа он записывает ее в основную память сбрасывает флаг обновления подбрасывает флаг запуска передает управление соответственно программе программа запускается пытается соединиться с координатором обращается к нему если все прошло успешно то она устанавливает флаг я запустилась все корректно и продолжает работать в нормальном режиме включает фонари нажимаем реагирует на нажатие кнопок и так далее если она не смогла соединиться с координатором возникла какая-то проблема я накосячил в программе то она не устанавливает флаг успешного запуска а вновь передает управление на старте воды с бутлоадер у бутлоадер запускается как или как и при любой перезагрузки смотрят в область флагов видишь вам нет флага успешного запуска значит но значит он понимает что у нас что то не так с программой она не смогла соединиться с сервером значится накосячил ящика эта проблема он берет из внешней памяти специальный образ с гарантированно рабочей программой которая возможно устаревший возможно бискотто функционала но оно гарантированно работает если ее запустить оно гарантированно соединиться с координатором и сможет у него запросить уже последнюю версию заново он перезаписывает основную программу этим образом он называется золотой и вновь передает управление на стартовый адрес программа гарантированно рабочие запускается соединяется и может запросить прошивку заново у нас есть еще одна попытка в общем то все задавайте ваш вопрос да пакетов данных но когда у вас возникает ситуация что надо передать критические данные там но выедает новый образ вам все равно нужно гарантировать я так подозреваю у вас поверки теперь все равно какой-то видим свой applications where которые контролируют что все-таки пакет достали дошли до адресата правильно да конечно настаиваете на какой будет оверхед например если вы использовали т.п. они сводят какие швы для этих целей стоит ли оно того , есть подтверждение на физическом уровне то есть при коллизии или помехи контроллер сам радиочасть контроллера по сути сама период правит пакет это уже снижает количество возможных проблем в передаче до довольно низкого уровня для критических данных ну вообще для для всех не некритических данных конечно у нас в в нашем протоколе существует потеряли недостатки подтверждение доставки у нас это второй пакет просто в ответ вы хотите цепи насколько я помню это только четыре пакета на установление соединения поправьте если я не прав мы используем один пакет туда и это уже отправка сообщений и второй пакет с подтверждением обратно то есть например если даже у вас посылается сигнал включи лампочку просто вывод и от пришлось идолам чик выключена правильным или контролируете нет конечно мы контролируем в ответ придет твое сообщение принято если устройства не видит этого сообщения в течение какого-то времени она посылает пакет заново без подтверждения ходят только совсем не важные данные типа данных датчика температуры ну не пришел пакеты не пришел через десять минут придет за придет следующий потерять его не страшно она кстати вот апдейт образа когда закачивать он тоже приюте перейти с вашим при тишины да конечно но ведь как сами сказали оверхед тисе пи только четыре пакета во время установления соединения но соотношение установления соединения с объемами данных которые будут период передана в пакете обновляемым там ну ничтожная чекнули устремятся просто но пускай мои четыре пакета вначале пошлем но потом мы будем иметь нормальный стабильное соединение что передать большую пачку данных то да так тоже можно сделать у нас просто весь протокол заточен именно по коду у-у-у т.п. поэтому я не вижу особого смысла конкретно для wot передача обновлений использовать другой протокол пакет с обновлением вся прошивка весит 50 килобайт это 300 пакетов примерно 300 пакетов по 200 с копейками байт в ответ им приходит 5 байт о нет нет нет и я согласен это вверх от а какой минуса выхода то есть про ради того чтобы передать как можно меньше данных нам позволяет скорость нам позволяет емкость и ну пусть будет энергомера ставрополь подскажите пожалуйста если опыт реального объекта где используется six лоб one was у на и максимум сколько точек реальные объекты расположены у нас в офисе это где-то точек 5 у меня дома это точек 20 и на тестовом объекте как раз таки на площадке где мы тестируем фонари это сто пачек а ты стал объектом площадь какая-то улице не знаю какая власть спасибо это умный дом управляют освещением это выключатели на стенах которые в общем-то дублируют простые физически но с тем но с дополнительным функционалом что я могу выходить из дома нажав выключатель у меня во всей квартире сразу выключится свет то есть там можно гораздо более гибко конфигурировать что я хочу включить что я не хочу включить это реле собственно для света это датчики движения которые включают в некоторых местах свет в зависимости от времени суток и а ночью в туалет аду нет такая мягкая подсветка чтобы мизинцем об тумбочку не ударился я прихожу вечером домой в коридор захожу на свет включается и не надо шарить в темноте выключателем сейчас пока дата только освещение температура планы грандиозные отопление вентиляция кондиционирование управление кондиционерами очень много можно сделать ни в плане железа ну то есть железки они в принципе все достаточно простые они на рынке все есть а именно в плане логике то есть это и просто сложная логика это и удаленное управление это и идея которые у нас давно есть нейронной сетью есть нейронные сети которые могут обучаться без учителя и подаются на вход данные сеть принимает какое-то решение выдает его на выход вы говорите ты правильное решение приняла или ты не правильное решение приняла через несколько сотен тысяч таких и и и итераций она внутри себя выводит какие-то правила согласно которым она может принимать правильное решение мы собираем массив данных с выключателей с датчиков движения с датчиков температуры подаем его на вход нейросети и смотрим что она выдает у нас получается какой-то период обучения типа в месяц где мы мы эту сеть не выпускаем в реальный мир а просто сравниваем ее действие с тем что делает пользователь и когда это не расчищать начинает действовать так же как действовал бы на ими как действует пользователь мы просто начинаем напрямую и и выходы перенаправлять на систему управления умный дом и получается что она предугадывая действия пользу если мы заходим в коридор она включает свет мы ложимся на кровать ночью она плавно свет гасит причем ее этому никто не учил никто не прописывал жесткие жёсткую логику о том что если кто-то лег на кровать в 23 и позже надо выключить свет она научилась этому сама если вы начнете ложится в четыре часа то она постепенно опять переучиться цена модуля цена модуля зависит от собственно и его функционала если вас интересует цена рыночно там и вещей и считали по себестоимость это порядка 500 тысяч рублей на более-менее крупных партиях больше соки что вы понимаете под бюджетом я понял сейчас грубо грубо грубо конечно грубо точнее не получится и я потратил около наверное 30 тысяч но если считать цену устройств но следует понимать что это конструктору он избыточен он заказывается малыми партиями за счет этого он дорогой когда мы у нас будет время для этого мы сделаем отдельное устройство для умного дома которое будет меч который будет дешевле которые будут проще мы мы планировали где-то к лету ну вот что-то лето уже начинается а мы все еще занимаемся фонарями но но думаю долг до конца года какое-то уже возможный но смысле набор для умного дома которой который можно будет взять поставите пользоваться будет возможно даже до конца лета я очень этого хочу я правильно понимаю что по логике обновление ну вот если пришел косячный образ дальше грузится обратно золотой дальше он обнаруживает снова новая версия 5 грузит косячный и собственно этот цикл продолжается до тех пор пока кто-нибудь не спохватится и не поможет ники репозитории какой-то обновленный образ с правильный который заработает но это зависит от того как запрограммировать логику в сама вот у вас как в самом простом случае можно просто выдавать оператору сообщения что узел такой ты не смог загрузится и был переброшен на золотую версию софта разберитесь к с ним может он сам дохлый может у него антенна отвалилась может действительно образ для обновлений неправильных залей еще вопросы да да на в сети есть грубо говоря три вида устройств 1 координатор второе устройство ретрансляторы и третье устройство в kontiki их называют листья потому что они всегда расположены на вот-вот-вот-вот они расположены на краях дерева и к ним не могут подключаться другие устройства они могут только сами передавать и принимать какая экономия до экономия касается только батарейных устройств потому что в других этого смысла не имеет пересылать чужие сообщения за счет своей батарейки это странно всем"
}