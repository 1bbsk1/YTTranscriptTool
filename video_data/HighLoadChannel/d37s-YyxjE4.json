{
  "video_id": "d37s-YyxjE4",
  "channel": "HighLoadChannel",
  "title": "DC/OS — больше чем PaaS / Никита Борзых (Express 42)",
  "views": 305,
  "duration": 2509,
  "published": "2017-04-22T14:47:59-07:00",
  "text": "всем привет меня зовут никита кости поправочка не мезосфера одессе с они переименовались буквально три месяца назад я хочу не со этого я расскажу кто я такой и откуда взялся общем здесь стою первая такая настоящий опыт продакшен у меня был десятом году в компании скалы xi это первый в россии облачный хостинг он уже не работает как компания вот но а там были очень жестокие технологии мы подсели ядро infiniband написали свой или два существующего и 3 общем полный хардкор на всю жизнь хватило больше больше того никто не хочется там же тогда же pilsa шеф и зная началась матч допустим полин конфигурации ну тогда это считалось интересным концептом вот итог этого всё начиналось только после этого я работал компании well more since это ребята которые занимается разработкой сайтов их сам известно про этот groupon они писали вот и после этого начинается там году стал за компанию с 42 мы занимаемся devops внедряем в нашим клиентам план доклада такой я расскажу вообще то что сна с моей страны а как я вижу проблемы над вы флотации у разных групп проектов я пошел на себя не применять если вы видите что у вас не так у вас все круче лего все вот хуже в это средний по больнице вот потом я расскажу про disease про концепцию рисе с какие компонента существует сейчас написано и как вообще это использовать его скажу лишь к про наш опыт смотрите дело в том что здесь и озарили велась 3 месяца назад а реального продакшна такого жестокого у нас нет у нас есть от тесты который мы гоняем причем это делаем потому что мы собираемся клиентам есть ребята которые это купить до этого хочу сказать что давайте посмотрим что мы собираемся вообще для чего мы работаем до мы хотим чтобы наш проект приносила клиенту куда ценность и за это нам платить деньги с на когда мы слышим разные название технологии там тысячи тринадцатом году был очень крест kitchen там же был популярен только вышел докер все тысяч девятом году внедрили шифтом с по пятам и тринадцатом году них стрельнул они начали тестировать потому что понятно что если вы админа пишете код то первых это будет очень хорошо по чтобы админ а во вторых что вам нужны какие-то тесты в 1015 году докер уже там за ним какое-то место пищевой цепочке все начали использовать докер вот и 1016 году так совпало что докер стал утка менеджер проектом что всякий кубер найти с и другие система в принципе уже доработать до продакшен уровня и это можно уже использовать 2 шестнадцатый год если посмотреть там по тем потому что интересно людям это платформы swarm икра сервиса и прочее вот а я хочу сказать как вообще сейчас будет буквально 67 слайдов для тех кто не понимала чему нужен по но в целом после прошу таковым нет нет таких людей но если есть это для них как примерно устроена было средние приложение это огромный какой-то монолит помыли 20 приложений которые принимала запросы нужен и суставов антенны ходила в базу за запрос на данными вот у нас были технологии но обычно использовали шеф там альянсы был диплом или копир странной фабрикам или вы любимы другими средствами насчет такое это просто зашли на машину этапа запускали там сделали допами грейда и вышли назвал список хостов на которые выходили просто так работала у нас был configuration дрифт кто не знаю что он fresh and rift окей это когда вы что-то сделали с тем полин конфигурации а после это совершилось до что а и после этого вы запустили того рецептом или playback но новый рецепт не удаляет данные которые в будущем к мукам были накачаны то есть вы из описания шеф какой-то пакетик нам резонанса было но по сути на машину не может удалиться что вы за это не написали в коде вот это было но это в целом не сильно вас на фиг тела потому что там полторы полтора пакета было там два три компонента все это было просто поддерживать тоже было просто вы просто поднимали нужным количеством машин амазоне или просто нужно заносили нужное количество физически может это центр и все это тоже как-то работала понятно где чего запускать ну у нас есть там машину с ролью бэг-энда раскатали там вся брендов на машинкам чтобы когда все заработало вот когда появился дать ему стало еще проще вы смогли паковать ваше приложение в контейнер там ну я не хочу сказать ничего нужен покер вообще стоит ли вы использовать не об этом the club вот вы перестали собирать нам руби питон на продакшене кто этого не делал до этого хорошо cto дело но теперь-то можно было не делать можно хранить конфигурацию вместе сервиса но это реально удобная штука вот и после этого появились пятнадцатом году в обиход вошли микро сервиса ну не крайне микро неважно какие сервисы которые теперь ваше приложение не состоит из одного сервиса 5 6 30 не важно вот это 40 компонентов вас появились в связи которым то есть не только напрямую что с бэкхенда фотона б кантом его за у вас появились для натальные связи между приложениями могло ваш консервы ходить авторизации состоялся ходить в базу но и прочее вот компоненты появляются и исчезают вы вас меньше контроля появляется при этом вот вам нужен код и был реестр сервисов ну все ради discovery либо не знаю файлик с описанием хостов и то в самом простом случае с без этого просто вы не понимали куда ходить dns тоже можно было изменение в целом тоже делали с помощью шеф элиас ебанул стало чуть чуть менее удобно потому что сервису стало больше вам нужно было больше писать кода но псд вам так акции жить было может жить стало сложнее окей всех в самом жить можно вот а дальше случились проблемы с тем совсем тепло и вас вам приходилось описывать зависимости между компонентами если допустим фабрики как то более менее можно сделать то в какой стране вы просто писали дополнительно библиотеки для этого я писал вы нас был сложный dipline несколько серверов разных компонентов вот а и конфигураций андрей здесь означает выстроит очень сильно потому что компонентов многое в каждом компоненте что-то нам что-то менялось вы просто после тепло и заходили на машины не всегда иногда я что-то меняли потом руками вот потребление ресурсов а че тут сложно но потому что у вас на одном сервере сколько должно быть microserver сервисов 15-20 12 то есть заранее а то почитать покупаем эти нужно по сервису осознанно вы дальше занимались замочить ручной локации проложения вы запускаете выговорить на этом сервис нужно на этом серве должен быть такой там сервис на этом такой сервис это неудобно а когда у вас появился докер в этих микро сервисов стала сильно удобнее но потому что у вас там дата упаковки то же самое вы могли изолирует друг к другу предложение примерно уже знаете что вот этому на красе раза больше чем то мегабайт памяти не стоит все нормально плюсы кампус но докер кампус или вот сейчас есть митап по рокер campo узла можете описывать сложные приложения там из не состоящий из каких компонентов там одним файликом тепло и лс тоже fancy был кто-то sc полтора форум машине на амазоне но целом это называется ситуация все меньше менее и менее удобно управлять ваши инфраструктуры как единым кем-то целом вы постоянно можете киты к стали поставлять в целом становится менее удобно ну обычно картинка с микро сервисе рисует обычный так здесь смысл как раз в том что у вас есть сервисы вас есть связи но по сути вам вам не очень важно где ваш интерес и запускаются таких машинах в этом нам озоне на дата-центры лет еще иногда говорят миха сервиса зоопарк языков и за партой технологии раз корее джунгли потому что вы и ну вы не особенно-то контролирует разработчик написал сказал что хочу взять могу отдать в сервис нога пожалуйста за тепло и тени теперь сервисного ну это очень часто случае который мы видели вот если у кого-то есть amazon стукалась amazon продакшене я вам завидую эти человеком до очень сильно потому что вы используете нку не кладут фармишь интера фору во все прекрасно работает все прекрасно должно работать хорошо вот ну вот реальная жизнь которую там есть у наших клиентов да у них есть совершенно разные площадки который до продукт одинаково тепло и со практически но здесь допустим по-другому на встроенной сеть совсем не знаю там связь там между там за центрами так то сделано здесь вообще нет виртуальных машин там это дни железки здесь виртуальные машины которые запускаются там вручную там помощью конспект а где-то там у заказчика есть там пяточек серверов там 2-10 серверов на которые доступа к psh что находится внизу ну как бы эркан виртуальная машина вот какие проблемы тут вот это нос реального клиента списана который мы занимаемся какие проблемы возникают ну вы занимаетесь настройкой low-level под каждый заново иногда это проще там это где-то вы что то ну что то можете перес пользовать но есть допустим вы используете культ русское облака и свои сервера то совершенно разный низкий уровень да это реализуется там шеф рецептами которые отдельно там конь там об инфра назовете до отдельно под нижний уровень отдельно предположения делать да это все хорошо тепло иногда тоже за счет площадке допустим вас нет интернет на площадке нету внешне нет выхода в интернет обычно диктуется требования безопасности банках тоже реальный кейс вот и количество ложных поддержки но увеличивается ну ну конечно не x умножить на играх но растет вот а давайте петь она не три вопроса который я хочу задать почему мы до сих пор выделяем память для наших приложений точно на компьютере это делалось помог пдп 1180 года если не ошибаюсь уже это дело у нас там был операционная система вот зачем это делать зачем чинить допустим круто хост на котором развернуто наше приложение если он сломался например не знаю если там положение упала или на linux упал в kernal понятно чем нам уточнить у нас есть ну вы рядом стоит очень сколько страшно которым можно просто проявление перезапустить и вообще зачем нам серый как таковое что мы хотим от него получить но я считаю что это просто ресурс который нужно использовать для решения наших проблем и задач и вот и ну и сам все сидят devops и такие да зачем с высшим образованием скорее всего почему вы должны заниматься этой рутины и нас есть более интересные задачи работать должны робота мы должны заниматься более интересными вещами а вот именно рутина работать вот есть такая концепция она ну распущен компании мезосфера но еще рядом с ними с эти летами которых компании находятся что лучше управляет это центром как единым компьютером вот собственно сейчас расскажу чуть-чуть про саму диси ос а потом скажу площадку это взялось вас на а есть такая система он здесь с которая консолидирует в себя на все ресурсы которые дата-центры это железо это сетевые балансировщик и ну как о каком-то виде вот и представить вам единый интерфейс для управления всем за центром и просто вот из вашей там какой-то консоли плюс она выставляет различные сервисы на верность его discovery это сделано не на консоли как вот очень час модно она в этом своем решении вот честно а дело в том что случае использование syoss вы получаете клауд агностик х систему которая работает своим опять поверх любого другого облака дата-центра 0 п п х любого возраста это получается едины . управления всем дата-центром там есть клей который который может и править всем плюс веб-интерфейс для dash board вот а что это за ребят мы восстаем рассказываю этот и сел с непонятно там почитали в интернете вышла там 3 месяца назад вот а дело было так 1009 году некий студент из беркли написал white paper ну работать студенческую до которого писал концепцию которая использована гуглом 2006 года работа с продакшене в углу пор как называется штука ну это когда все ваши ресурсы управляются все ваши чувства managed автоматически но при наличии кого-то это система которая знает какому приложению какую задачи сколько ресурсов нужно выделить вот после этого в 1013 году по собственно компания мезосфера они подняли заблуждениях неплохо вот но потом как как хорошим фильм про стартап тысяч четырнадцатом году еще немножко денег даче шестнадцатом году они зарелизили продукты syoss что-то такое а все это время пока не поднимали деньги они делали продукт позвали мезосфера вот это уж ты описал девайса просто переименованная мезосферы с это бывшая мезосфера вот и продавали различным клиентам свои решения либо вас как целиком либо кусочком но вообще-то все компоненты сейчас уже open source вот но не за суда был он под source она nitro компоненты были закрыты и они продавали как как в нем внедрялись и поддерживать компании мезосфера застаиваться в марте они подняли совсем много денег чем от компании microsoft в компании philip enterprise ну на мой взгляд это для того чтобы потом мы почему м с дало им деньги на мой взгляд чтобы потом сделать своем эфире просто опять для поддержки нко засвет мы не знаем это кажется просто интуиция вот кто использует кто используя seo с а разный компонент используются ну топовыми компаниями в числе компания сирии господи компании apple используется силе компания apple используют мест для сирии они запускают по мерах месяца фреймворк мы знаем джарвис который отвечает на ваши запросы когда вы говорите в айфончик там siri такая погода вот компания green бинбин описала свой целиком пас поверх мяса и всех этих пустую штук компании в райзен использует до syoss с целиком они просто но купили саппорт мезосферы вот мы делать 2015 года конца то есть почти 6 месяцев в разных ситуациях схемах тестируем исчез это было просто месяц + марафон куски вот и сейчас у нас есть люди которые хотят какого-то внедрение этой системы на место в пищевой цепи которые а ну да вижу я может быть компания мезосфера вид выход это по-другому вот это некое штука которая стоит на какой-то операционной системе но там может быть внизу будто я назвал коротко роз потому что она поднимается вверх любой процентной системы по свежим ядром и докером вот а уже поверх там от них и компонентов месяц и марафон запускается приложение которое собственно ну делают дела до вы можете запустить целиком пас кубер найти с поверх бизнес веры можете запустить допустим spark джо бы кто не не знаю что такое spork нет это не железо что кто знает вот так не объясняют окей может быть ходу бы стек с грунтом каком-то виде в котором это подержится минусом вот вот на мой взгляд именно для этого именно под эти задачи пишется это разные куски одессе а веса при чем то что я общался с ребятами дистресс чатиках они перед это кабель он ее компоненты под задачи которые есть у их клиентов то есть если там их клиентов привился там не знаю кроме там ну ка это другая компонентных интерес да им нужен запилить там нами за стойки они просто пишут по framework иисус начинает его внедрять вот а давайте так сейчас я расскажу что такое распределенное по странной с тем в направо до центра на примере обычной операционной системы у нас есть 7 низкий уровень это ядро а есть чуть повыше это не система вышек и это сервисы которые пенсионной системы представляет но и совсем высоко это наше приложение вот начнем мы с самого низкого уровня с ядра а да вот обычно когда мы пытаемся подумать в концепции это выглядит так то есть вроде как круто звучит чуть такое вообще непонятно хитов определенная система ядро не понятно давайте разберемся начнем это снизу за вот это не замена ледовский 1 кто так подумал нет это просто если некоторые абстракция которая запускается по миру существующего linux ядра и 0 минус машины вот задачи у метаться в целом похоже это управление ресурсами то есть но выделение под к задаче оперативной памяти диска процессор отомстил в портов но и других ресурсов это собственно управления процессами это запуск процессов остановка процессов роста как гидра если процесс умер то он сообщает об этом кому-то там выше ну и ты нет системе в целом похоже штука ну это изоляция процессов как это сделано очень милыми чуть позже расскажу не похожи на обычных ира до 100 чтобы все работало нужно на каждой машине который хоть использовать в этом я за скло стиле запустить этот кусок кусок мезосферы кто-то из его весами нас агента вот все компоненты одессе асане отказоустойчивых в том числе и местными мастерами замеса это они они используют один для отказоустойчивость стандартные решения я читал что тоске лица до десятых оставьте сна я не поднимал ее количество хвостов новость в моей инсталляции там это было мало там 20 по 30 хвостов ну действительно все это работает fold over он стал соблюдается все хорошо все хорошо работает вот а есть нужно минус представляет sdk для написания своих приложений а это как раз нужен для того чтобы запаковать какой-то жизненный цикл и приложения будут распределенную систему чуть попозже расскажу конкретно для чего это как это надо вот изоляторы в месяц являются докер именно с контейнеров но почему такое как бы два что замес контейнер дело в том что сама система была написана до появления докера случае смены с контейнером это просто обставлять 17 группами по сути то что делает докер только без всего его красивой инфраструктуры да потом они просто прикрутили докер вот когда он стал более меня prada шины рейде ну все стал всем хорошо вот самих а стены которого запускается собственное ядро это место смогут быть дифференцированы через ну некоторые меточки лейблы роли для чего это надо построить у вас допустим а куча серверов и какие-то из них и зажимном железных и виртуальных какой-то полина цели используется например вам нужно запускать очень какие-то быстрые но быстрые база данных бы станет намного быстрее диски либо например у вас на этих машинах это быстрая сеть там 10 гигабит на 1 а не отличается от обычных машин у вас вы просто включаете специальная ролью и после его запуска кого-то там фреймворк поверх мяса фреймворк может выбирать на к машине запускается сам знаешь что эти машины кит особенные специальные тонометра дали структура от самого места выглядят примерно так есть есть бизнес мастера вот они все работают они работают все в режим с тобой кроме лидер который работы жиме лидер вот есть for scheduler это собственно то сущность которая запускает задачи на самом деле это может быть и не scheduler который просто контейнеры docker запускает а может быть например ставка scheduler который управляет жизнью кафка кластера внутри мир внутри мясо вот есть собственно рабочей лошадки это минус агенты но то такая штука на которая запускается ваше приложение у них есть экзекьютора мясо докер но из устных , запускают меня за сказки и доки паски давайте покажу как работа запуск тоска и очень просто пользователь говорит что-то скинет мир там за почти до как контейнер вот scheduler спрашиваю точнейшие присылается информация из замеса присылается называемый offer в offer содержится вот такая информация это разные касты если он сообщает что у меня есть столько-то память cpu стока the disco а дальше подходит что дали нам выбор самого агента на которые будут запускаться совместно с например есть вас агент который если ваш агент который запущена сервер слабых fast значит что на этом сервере очень быстро там-то 8 сеть если ты пометил свою задачу как fast запустит там ну об обычной сервера после которые прилетают анонс о том что есть там ресурса вот после этого offer может быть принят может быть не приняты всем принято значит что вот этот так запустится на пункта агенте дальше - мастер говорит команду task launcher - агенту именно с агент запускается с помощью компьютера впускает какой-то task здесь докер тасс а что будет таких экзекьютора а после запуска собственному сообщается вверх по стыку что все хочу работает мы все запустили парк живой почему живость аска это просто запущенность контейнера там или просто приложение мы не знаем что внутри может там внутри запустила java сказала у меня закончилась память и упала для место это на этом уровне абстракции то посуда что все работает хорошо ну запущен вот ну точно простой отказывает один из компонентов через у теперь мы видим что у нас есть другие компоненты и при прощаемся на 2 мастер лучи с агентом чуть посложнее агента целиком обычно вместе с сказать и размести с запущен там контейнерами или досками в этот момент происходит перед scheduling то есть мы ищем где можно запустить все наши тоски в этом кластере иногда бывает что мы не находим например когда у нас сервер с лейблом fast network всего там один или два и на втором после него это место запуск всех всех задач вы туда просто к отелю надо просто задача будет не запущена интерфейс место выглядит так я знаю что ничего не видно меня есть второй слайд вот а тут постоянно просто пример какие-то непонятные то скинута кафка подскажу вот это интерфейса собственно самого самого гор компонента поэтому слон выглядеть очень красиво есть выше поставить более красивый интерфейс и который можно показать не стыдно вот тут самое интересное что есть просто описание ресурсов из яхтам в кластере который мы можем как-то за schedule и который используется вот все более менее понятно cassie cage ничего не понятно но я как мог объяснил самые самые простые вещи вот пойдемте вверх и по стояку теперь у нас есть и нет как я уже говорил и не там может быть любое приложение которое написано специальным образом есть у нас просто обычный но там spark до это все знают то знает спарки знаешь spark standalone знаете spark йорк это спок на месте тоже сам он посуду лиц задачи внутри самого запускает жопы внутри минус а вот так же мы можем обернитесь поверх и сел с снос . прямо сейчас не можем что-то сломано в последняя версия месяца но это честно сказал сам вот это просто так уделом абстракции по их этой абстракции запускают мир тоже кубер найтись и существуют собственные решении любых контейнеров называется марафон ну они называют распределенный и нет ну похоже на систем для на самом деле я бы сказать то такой лайтовый поста есть у него какие то есть совсем базовые функции пасов он может rolling диплом сейчас расскажу попозже вот марафон вот у него есть штук который делает rolling тепло и через чего у каждого запущенного тоска подозревается наличие колчака вот предыдущий докладчик рассказывал про такую систему выбирайте здесь такая же принципам то принципу узнаем что-то запущен это может быть http-запрос там слэш хаус это может быть открытый порт может быть любая команда которая хоть и запустить ну знаем что внутри этого контейнера там все запущено хорошо спецназ работает дальше на основании этого можем делать независимости вот который позволяет делать rolling диплом роли леди получить позже расскажу вам про словам он есть я покажу пример как работает да он тоже хавела берете можно поднимать там 3 марафона и случае отказа на улицу поднимется вот а с дома 2 14 года там плюс поддержка нативно docker то есть мы запускаем запускаем как докер контейнеры и в марафоне определяем там название мир же пропустил три порта все это работает вот марафона есть тебя бью ой есть ареста пьесу становится клиентом креста пи вот есть некое понятие концепция такая называется event api она все еще покажу чуть попозже в общем это когда мы можем получать любой нотификацию об изменении состояния кластер а внутри марафона это мой ведь полезно для собственно для роли на тепло и на пирсе мы делаем посторонними средствами эту штуку вот а так же самое важное фича что все запуски и не скриптов все ну все запуске приложения можем оформить как декоративное описание джейсен файле то есть мы вот когда а храним учи с блокером покер файлы внутри репозитория как наговорили предыдущий оратор мы можем там же хранить описание приложения как его надо запускать су-100 в этом кластере вот это пример а мы сейчас допустим ним тестовое приложение вот через веб-интерфейс совершенно ну понятно ну наберусь от вещи исключением вот такого непонятного айден а ты сюда если присмотреться там через лыж и написано тест грустно на основании вот этого надписи можно создавать никакие группы внутри 3 марафона на основании группа можно делать скейл поговорим всей группе там табов ресурсов или выключить эту группу приложением также поста логическое разделение допустим мы хотим сделать группу там cost and adding у вас там два кастом 30 как нас модели namespace губер найти съесть суши предыдущие the club а также есть собственно поля для заполнения для для запуска и меньше то можно когда-то питон да таким этим еще запускаем тестовый компонент это веб-сервер на борту 8 тысяч из там видно не знаю видно более осознанно описываем этот порт в разделе порты вот пишем хавчик на холсте к у нас на случай просто slash проверяется на код 200 и запускаем после этого подходит диплом как происходит диплом на основании такой вот этой надписи 27 это цели на самом деле имя докер имиджа марафон идет в доке baker registry и скачивает нужные между нашего запуская с теми параметрами которые мы описали в предыдущем шаге вот после запуска тоска это выглядит вот так вам видно да вот мы можем посмотреть состояние task-ов мы указали к лесу со 2-ым и где-то в нашем кластере запустили там положение двух экземпляров сейчас вот можем посмотреть стр 1 to die out самого каждого у каждого тоска то что там происходит внутри вот вот так выгляди классе декларативное описание самого приложения сашина банальные вещи пойди и самого хештег делала через интерфейс описывается просто параметрами также холостяк вот теперь чуть подробнее про уровень диплом а ну что это такое кто не знаю что кроме тепло и круто отлично а как это работает вы описывать в том же джейсон файле зависимость между двумя компонентами например на сервис такой-то зависит от там базы данных или там от сервиса другого и тепло и будет строить при тепло и бы строиться план тепло и который будет выполняться на основе этих зависимости если вы написали что такой сервис должен быть запущен перед диплом другого сервиса то снова запущен первым вот а что здесь интересно что мы например не можем обычно погасить целиком весь сервис и просто перезапустить нам уже делать это по частям ну как по частям мы можем добавить там один новый сервис один старой сервиса брать если у нас допустим при этом все работает уехал чек проходит то делаем дальше мы говорим можем сказать что знаете но в целом не очень важно можем пойти все сразу сервиса по этих заново или вас нет нагрузки можем пустить все кроме одного и потихонечку день заново или есть другой случай мы говорим мы не можем в целом пустить ни один из сервисов потому что все это нужно для обслуживания клиентов то что ну если мы запустим то нагрузка будет проседать а давайте запустим еще два сервиса никогда не заработают старый сервис убьем одну таким образом сосна происходит роль indie play пуще докладчик столом все это подробно рассказал из запаса повторяюсь вот а поверх самого месяца можно писать разные фреймворке немного фреймворк уже написано если у вас есть какие-то эти приложений их можно поднять поверх месяца и это принесет вам a profit в том что вы получите готовый жизненный цикл по управлению этим приложением что такой час поподробнее объясню например на примере кафки кафка запасается кавказе seas мы ставим эти framework это отдельные программы которые кафки отношения имеет так установилась не работает вообще то отдельные программ написано компании мезосфера вот она дальше уже подключается к минусу и запускает свои у брокера достаточно с кафкой запускается на их причем по заранее описанному конфигу для моего писали что нужен 3 брокера с таким таким образом не запускаются и дальше вот это положение которое запущена в марафоне но полностью управляет самим самой кафкой она может делать 3 балансировку по вашему запросу она может добавлять брокеров удалять брокеров ну почему кафка просто ну я могу здесь харди фейсом при этом сильно сложнее это сильно проще вот поэтому я дал кафку вот она может даже работать внутри здаров всем нужно кого-то топик создать в кафки вы нижних играть на машину а просто запускаете сальную консольную утилиту которых создает в кафки этот топик например вот в целом само понятие syoss это все вместе то все это все вот все вот эти вот сервис и все ennis ennis системы и ваше приложение как просто поверх я сейчас скажу про последний компонент так вот сервис us die sere с входят разные вещи я начну с даже гордо дашборд выглядит вот так в очень красивой тут сидишь информация по всему вашему кластера например по количеству всей памяти которые доступно вашим дата-центре нужно маленький дата-центр вам доступны все по уму 40 говорят памяти до размазана там почему-то количество машина чуть позже покажу количество загрузки поцелуи количество проблемных тасс которых не запущенное приложение вот чуть пониже этот вот это место до показано количество запущенных извините конечно запущенных task-ов и количество всего физических нас которые включена в кластер агентов на который спускается сова сова приложения вот средний столбец это и статус сервисов самого девайса много сервисов которые нужны для сына разных целей там discovery для мониторинга самади себя все это из дашборде вот а дальше раздела с нотами там просто красивая картинка о том как в спицы загрузками по вашему по вашему кластеру вот дальше из самого веб-интерфейса можно стать все совсем что из самары в интерфейс и можно ставить приложение время заканчивать и быстрее пойдем эта концепция примерно как apt-get только целиком на весь класс может поставить этом положении допустим по джеков куда я но родился на вашем кластере том каким то определенным таким определенным параметрам сделать это язык интерфейса мир вот так мы описываем количество машин который нужен да брокеров количество циpкa вот дальше настройки самой кафки у от режима стал она стали очень похожи на installer винды коров клик-клик-клик next next вот на самом деле вот все вот эти вот вещи это кусок пакета который собственно поставляет какой-то vendor ну либо мезосферы либо вы сами можете пакет написать вот это джейсон файл с содержимым с описанием что уже настраивать тыковки вот анну в самом на мой взгляд даже пост который вам показал это нужно только для продажи продукта клиенту ну либо киса демонстрации против реальной в реальной жизни мы используем обычно командные утилита вот а команда утилиты нет полную полной власть над всем стыкам 10 выставляется любым любым компонентом который есть девиз а в том числе могут стать пакеты самое классное вне что она расширяем а когда вы оставите пакеты с консоли сейчас консоли вы их мир стоите так же и для консоли я покажу мире кафки например вот так вот здесь можно марафоном управлять вот а вот так мы ставим пакетом кавказкие топ цены там до запуска а а дальше нас появляется команда дисков к которая позволяет управлять жизненным циклом самой capture и создавать топки делать или балансировку и прочее вот после собственных ли я хочу сказать про сети серый discovery сразу скажу ну есть проблемы сети в плане того что сеть в докере работает как обычный контейнер то есть ли бо бриджес либо холст вы не можете использовать докер networking вы можете прикрутить к не какой-нибудь sdn это будет на ваше усмотрение дети сами то не поставляется вместе с мезосферой здесь я сам вот а также я знаю что есть успешная реализация просто к лику внутри месяца я даже знаю людей которые это сделали них это все работает вот калика это некое подобие l3 поверх вашей существующей сети в мерзости есть один из сервисов в 10 раз витамин с dns который собственно все ваши тоски которые запущены и местности выгружает как как просто dns имя имена и может он пойнта пустим своих сервисов и используйте в качестве in поиск для кого-то приложения ну конечно понят что никому rolling где плоть источника что это dns-записи жизни как только сервис перезапустится вот у самого девайса она мастер рисковали есть некоторые проблемы но у них это решение это минут мэн минут мента распыленной балансировщик для использования тремя за с кластера то есть эта штука на самом деле работает на api тейлз и use space демоне как это получает вне этого месяца этого трафика вас не будет существовать штука исключительно внутри и между существует это как работает также выпускать какой-то пакет на виртуальный интерфейс который вы заранее определили в марафоне пакет herlitz а 5 был сам посылается заголовок в angry man где говорит она эта штука запущен у тебя там на машине такой-то отправь туда данные о собственно определяется через марафон лейбла в разделе нет вот настоящий строителей был такой то такой то и практику виртуальная пи адрес туда уходят ваши данные и рекомендуется использовать для постоянно подключение потому что количество первых это используется linux т.к. там ресурсы с tells the crew заграничные подробности можно узнать на сайте минут мена вот ну работает примерно так то есть у вас есть какой-то вид вот он vip который запущен на низких кастах тут и дальше трафик за них road зависимости от того где эта штука запущена если кто-то умирает от а потому что не приходят наш опыт очень небольшой с этой штукой во первых мы заменили мы and men мы используем для как раз rolling тепло iv штук на 3-м трафик это аж типе балансировщик который включается камера фонд event api выстрел сейчас вот и занимается тем что делает zero ставролен диплом когда вы в марафоне при допускаете какито приложения в этот момент и в этот момент сообщается трафику через завернут api что даже не выпущено убери его и за собственно балансировка выбираете его 104 на зеро там тепло это все равно это все работает на просто установка трафика и хотя сторонником понятно занимает немного времени и трафика и собственный метр есть теперь предполагается выносить его наружу не кластера поэтому он поддерживается цель поддерживать websocket ешьте пе-2 мне за насколько это важно для работает внутри до нужно вытащить его наружу вот это классная штука дальше мы сделали continuous delivery на основе дженкинс и но общей схемы выглядят по тыс ну опять же схема не нова просто здесь место код вашего кластеры amazon воспользуетесь ios вы собираете это так в детей загоняйте во всякие пригоняете вкусно сам процесс сборки да после этого вы кладете его в баке реже store артефакта ремиксов с неважно что в этом используете вот и после этого по команде сявы тепло и текут окружении внутри этой мезосферы внутри этого мы используем последние zhang из версий 20 в котором появился плагин pipeline в котором можно декларативно описать pipeline сборки вашего приложения чуть позже покажу как это выглядит она так выглядит так-то с ником собираем один лишь это тестовый сборка там дым от нашего дома блога вот м1 версаля 2 имидж и потом с помощью команды села марафон диплом диплом этого дома стоят а вот так выглядит примерах конфигурации дженкинса внутри вашего репозитория вашему репозиторий лежит не только докер файл и там даже 1000 дженкинс файл в котором вкус написано как собрать это это это для вам предложение вот и после этого еще один закинуть файл в котором просто описан целиком pipeline то собери одно приложение собери второе предложение команды там ниже за этого марафон групп обреза тепло это положение на продакшн вот на что если вы смотреть в сторону дисса стоит брать внимание это не только что система проставляет все опять на мониторе юных которого мониторинга именно метрик там нет есть целом реализация в притаился который может подключаться к марафону и выигрывать это метод выходить в метрике но мы это не пробовали вот наш сосед коллега который только этим занимается этим водам сергей если какие-то просто будут по этому поводу можете обратиться вот от стали зова налоги в целом как и в любой другой системе но вы можете указать в докере что все логику газ туда да это будет у вас работать то тут пас тут просто даже если у вас нет фона нужно это сделать вот и сеть но я писал как это работает но тут надо подумать нужный вам пролин тепло из нужен как ну как-то это делать вашей системе вся документация который может помочь находится в одессе с а его все два слоя то есть в них не так группы где проводится онлайн этапы где рассказано про компонента типа минут меня на про компоненты там еще которые не назвал их общем по живой комьюнити их искали работ специальный человек то есть вот эти вопросы slug чатике вам обычно отвечает все опросы который я сдал меня всех ответили вот подкаст мы идем с кости кости кости да это про devops вот можем послушать и телеграм-чате которым телеграм-канал в котором мы пишем скорости новости про devops также есть метод который проходит в москве называется 2 этап маску который мы собираемся практически 1 квартала получается и рассказывать всякие devops штуки может любой продать доклад на занятом вот это мои контакты спасибо вопрос на самом деле увы в вопросы мы не успеваем особенно задать поэтому если хотите ловить и никита в коридоре ну вот 10 минут там остался на перерыв и на подготовку вот так что если хотите ловить и никиту мезосферы это интересный процесс извините"
}