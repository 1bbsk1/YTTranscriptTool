{
  "video_id": "hTCXaAKIArk",
  "channel": "HighLoadChannel",
  "title": "100500 способов кэширования в Oracle Database / Александр Токарев (DataArt)",
  "views": 3060,
  "duration": 2512,
  "published": "2018-07-19T04:59:47-07:00",
  "text": "итак меня зовут александр я работаю в компании dataart занимаюсь вопросами связанные с базами данных соответственно как спроектировать с нуля так и поддержка имеющихся сейчас модно вот такие какие-то опросы делать перед началом презентации вот кто из вас работал 40 вообще великолепно теперь выше поднимите руку кто использовал около резалт кэш отлично а теперь есть те кто верит что оракал это база данных удобной на все случаи вот была робкая попытка поднять руку 2 пути это хорошо значит у нас есть 2 и прагматики и один мечтатель то есть благодаря вот таким как вещам как бы двигается прогресс про что я буду рассказывать про резалт кэша да уж пока 414 чтобы мне известно и так какая у нас программа значит я расскажу как есть кэш и что такое резал кэш как он сделал другие базы данных все такое самом деле это все шаблонно потому что значит будет такой скучный технический семинар который можно погуглить да и полно всех уже наверно опыта я буду исходить из кейсов значит это будет 2 кейса из-за проектов нашей компании и один кейс я случайно нарыл в интернете мы его разберём значит какие у нас есть конечно тут все понятно есть буфер кэш где блоки и statement кэш где лежат планах есть есть соответственно резалт cachito где лежат наших kireev это мы обсудим а это детали реализации и есть отвесной конечно в операционной системы собственно резалт кашьяп сказал по большому счету штука такая сугубо арок новая то есть он когда то был в моих sql потом его героически выделили очень много было полезных песни что наконец-то мы от него избавиться на пост грязь и я его нету он есть в том или ином виде в стороннем продукте по джипу и так сразу кейс был у нас такой продукт на сопровождение хранилища 1 ст ворота 20 раба 300 пользователя работают есть какой-то тоскливо отчеты работает 20 минут пять тысяч строчек возвращать его делать по 350 товарным позициям как он работает есть какой-то select какие-то join и и есть функция функции как функция все хорошо только она рассчитывает загадочный параметр называется величина трансфертного ценообразования работает 0 2 секунды вроде не о чем но дергается столько сколько у нас скаю в нее 400 строк и сквере по или сквере соответственно продукт на поддержке менять особо не хочется потому что бой знак гламурный ризал тыкаешь не использовать потому что суровые админы продукт на поддержке но что делать пилим решение которое еще 48 17 как его пилим это оставляем как было нашу функцию просто переименовываем и объявляем ассоциативный массив где соответственно ключи это нашей скаю товарные позиции значение это соответственно рассчитанная цена трансферном преобразование и делаем очевидную функцию которая что делает если нету в нашем ассоциативном массиве такого айдишник а она идет нашу функцию запускает или он помещает наш кэш сохраняет возвращать соответствие если это есть то оно там есть и все хорошо что это нам дало мы свели и количество вызовов функций к тому количеству которое на самом-то деле надо и у нас отчет стал в четыре минуты всем пользователям стало хорошо недостатки и достоинства от решения непонятность вот этой большой на картинке был у него и много обращаться это архитектуру памяти все вот эти штуки они хранятся в пиджей просто global area которая она инстанции руется на каждое подключение к базе данных соответственно как бы больше подключений больше памяти ну соответственно это плюсы и минусы память дорогая серверная админы нежные соответственно как бы что у нас хорошо все работает очень быстро собственно как бы очень легко это делать сконфигурировать не надо нет никаких заморочек с мир процентных задействуем минусы понятны память идет с базы данных анала китецу на сессию соответственно нужен пыль ускорить сейчас же не мог написать как бы что-то внутри базы данных но и соответственно нет никакой автоматически инвалида ция в принципе других базах данных обычно как это делается ну есть какой-нибудь сложный запрос из которого чуть храним к выгребается просто это храним к она берется материализуется какую промежуточную табличку как имиджа bам или чем-нибудь и вначале выгребать из него есть вы не нашлось то идем в нашей сложной к вере я ну собственно побольше учета похоже на oracle материлась if you ну это не очень интересно так на второй случай где я не получилось а как бы получить такого эффектного пиппина есть такой вот тоскливой enterprise да есть классическая архитектура есть тонкий клиент 4000 пользователя не где-то живут там в разных частях нашего земного шара есть 2 j босса на которых считают вся логика вещей memory кластер есть соответственно основного ракал есть урока под дата гордон соответственно есть такая на и сможет задачка эти системы расчет рекомендации что такое рекомендации приходит какие-то документы от различных системы распознавания такие вылью пары где-то что-то параметр распознать где-то не распознали что надо делать надо так сделать чтобы в итоге к бы пользовать их обработали и все значения появились соответственно надо вывести рекомендацию рекомендацию надо вывести не просто да надо учитывать что это многоязычная система то сейчас поддерживается порядка 30 языков то есть для этого соответствие для каждого языка свой стек сегодня ми все такое соответственно это все учитывается когда мы считаем скоро рекомендации потом надо учесть что если как бы есть возможность значит рекомендации в предыдущих данных этого клиента надо взять предыдущих если таких данных нету надо взять у клиента с такой же индустрии если их и там нету то надо взять похожего клиент под прибылью очень на самом деле порядка 12 весьма сложных правил какие были сначала допущений больше 100 пользователей этим всем занимаются на временом у 2 3 колонки для распознавания и 100 строчек никакого файлов да вообще скучно так наступает время релиза произошел код фриз java все боятся трогать а работает все пять минут ну посмотри и приходит к нам в команду разработчиков баз данных соответственно что делать нужно если что-то там одержали само собой надо базу данных меня чинить куча всего мы посмотрели на все это дело поняли что вот этих киева или парк на самом деле довольно часто повторяются значения ну там по 10 раз по 5 соответственно будем использовать базу данных чтобы кэширует потому что она типа уже протестировано не надо заморачиваться катили красном в котором нет и полна текста поиска и прочих всяких ништяков используемый сервер сайт резалт кэш почему потому что все возможности по тюнингу иску или а не исчерпаны потому что там используется орков и так search engine самый сколь довольно мудрый кэш будет использоваться и в принципе большинство данных для рекомендации она пересчитывается раз в час и по или сколь запрещено просто запрещен запрещен средства что такой ризал тыкаешь это область памяти в которой шарится все результаты запросов которые with consistent и происходит автоматическое войн валидация потому что то есть нам не надо как бы указывает что надо вот такую такую пятую десятую таблички используют все работает сама требуется минимальное количество изменений в приложения счет если как бы прямые руки то можете вот так что приложение вообще не надо менять ну и бонусом можно кошелек поняли свою логику но она у нас запрещено так как его включить очень просто взяли поставили hand резал кэш и собственно на плане мы увидели что вот у нас появился индикатор результатах которые оттуда и возьмет соответственно при первом выполнении базы данных произведет какую-то работу при последующем исполнении z или любой другой сети там никакой работы нет все хорошо второй способ который позволяет разработчикам приложений ничего не делать это так называемая ато тима берем для таблицы указываем галочку что она должна запрос не помещаться в резалт кэш соответственно никакой его чем-то нету приложение не трогаем обрел а все уже вырезал кэша сразу же вопрос как вы думаете если есть в базе данных одна табличка помечены как ризал тыкаешь а вторая никак резал terza курируется результат такого запроса нет вообще никак соответственно как бы чтобы он закрывался мы берем помечаем в табличку как резалт кэш и все все вроде бы хорошо так да причем tracking но соответственно как бы есть в соответствующем вьюшки в которых можно посмотреть как это смотрите есть запрос днем join какая-то табличка а в табличке зависимостей их 1 почему потому что у раков определять до пенсии не просто тупым синтаксическим анализом а он осуществляет его по результатам плана выполнения работы в данном случае почему вот такой план выбрана потому что у нас только один стал одна табличка используется и на самом деле табличка джобс связано с табличкой мпла из форм кей constrain даме таким образом уберём выпиливаем форме кей constraint который позволяет сделать это преобразование join revelation и что мы видим мы видим две зависимости почему потому что план так менялся то есть уровни трека и то что не надо трогать стать с на все таки вернемся к предку или да там работает по другому там дополнять и работают в ран тайме чтобы можно было динамической ce que el и прочие вещи так делать соответственно киши ровать можно не только запрос весь целиком можно кэшировать онлайн вьюн мы взяли одну часть визиток аширова ли и соответственно он где-то частями использует предположим для одной вещи нам нужен кэш отель другую лучше бы подсчитывать из базы данных чтобы не напрягать мы берём интервью опять являем как рисовать кеш и видим вот идет кэширование только по одной части а вторую вещь мы выгребаем каждый раз из базы данных и наконец в базах данных то женщин капсюля ция хотя бы это никто не верит мы берем view встали в нем резалт кэш и соответственно наши программисты даже не догадываться что она кашированная и вот мы видим что на самом деле только одна часть его работает in- validation ну просто смотрим за статусом publish чтобы показывает текущий стане валидности кэша соответствие как бы когда у нас запрос в зад кэш я уже говорил что в базе данных никаких как бы работы нет когда мы извлекаем берем делаем отдать a statue все равно поближе почему потому что апдейт не закончился и другие вещи должны видеть старый лизал кишит то самое пресловутое консистентной по чтению но в текущей ему сессии мы увидим что нагрузка параша пошла потому что он его игнорирует и это в принципе разумно соответственно сделали commit все результат инвалид все работает сама казалось бы мечта до 1000 считаются правильно просто всем за десяток вере но нет вскрылись ряд нюансов как только делать select for a bad baby нынче слетают как только есть не индексированный внешние ключи произошел апдейт по табличке резалт кэша который предположим вообще ничего не затронул но при этом что-то поменялось где-либо ввп на табличке тоже все свалилась и вот самое третье интересно который максимально портит жизнь если есть какой-то апдейт таблички которая помечена как резалт кэш по ней что-нибудь сделали ничего не отработала потом в этой же транзакт поменяли любое другое и она как-то за эффекта что все равно ризал откажешь броситься еще есть такуан типа third порезал пишу как бы когда там разработчики как бы слышать что есть такая класно вещь они делают мульт как о есть хранилища сейчас мы возьмем как бы какой-нибудь запрос который на 2 3 partition х работать там на текущей дате и на предыдущей помечу его как резал кешью будет добраться из памяти тот меняет картину задним числом и вещь как слетать почему потому что на самом деле единица depense треккинга were sold кэш и это всегда таблицы и не знаю я будет никогда не портится и или не будут соответственно подумали и решили что пойдем мы в продакшен с такими вещами не будем мы кэшировать все наши таблицы возьмем только те которые нужны поста мир залп кэш для нашей долгой двери взяли все проверить perform an тесты 30 секунд все замечательные идем в продакшен накатили ушли спать приходим с утра видим письмо 20 минут минимум она работает в цехе свисают ну что-то пошло не так ну чё делать пошли в базу данных смотрим активной сессии 400 среднем строчку документе три распознавание 500 халонг минимум 5 8 ну почему мы потому что как бы для документов уже как бы нам челси кур надо лишь какие-то тестовые документы ну ладно нас удивило еще больше мы заметили что количество сессий всего в базе данных всегда равно количеству applications пользователь умножить на 3а резал кешью объясню почему он не любит когда его много спрашивают параллельно мы пошли к нашим разработчикам и спросили ребята что это не сказали ну как мы возьмем сейчас в параллели в 33 дымок все запустили и все должно заработать ну мы расстроились пятикратный нагрузка падение деградат что делать ну надо смотреть для мониторинга соответственно нас есть две ключевых вещи вырезал кэша джек этот список всех объектов и вырезал такая статистика это соответственно как бы статистика агрегат на freeze алкашу в целом есть еще такая штука memory report ну это вариации как бы на одно и то же нам не надо это значит oracle он волшебный чем есть документация великолепная на самом деле но она как бы для тех кто придет с других базах данных чтобы пересечь италию думали что оракал это очень круто а вот при залп кашу в нему вся информация она лежит на саппорте потому что есть нюанс а нюанс состоит в том что как только мы обращаемся к этим объектам чтобы разрешить проблему моё усугубляем окончательно как бы закапываясь а потому что до 12 2 уроков до патча который вышел в октябре у меня дома стоит о раковых с предыдущим по чем эти запросы вешают рязанских на статус и на запись до тех пор пока он полностью посчитается ну и так вот эти умные значит разбираем смотрим объектов 1000 откуда они вообще смотрим чтобы какие-то пошли каши по каким-то странным таблицам маленькие таблички и такие запросы какие-то непонятные удивить дайте каждую минуту эти запросы количество соответственно растет и время перешел с минутами мы понимаем кто то натравил на нашу базу и отель шли к разработчикам gt-r но в начале глянули в базу убедили что у нас на них опций стоит резалт кэш force а самая табличной аннотация чтобы все работало самой ничего не надо делать соответственно и что происходит все эти запросы они берут и просто вымывают наш кэш постоянно как мы постоянно не дергаются все груз ну пошли к разработчикам поговорили воткнули новый resulted потому что было возможно повлиять на ее теле в продакшене как вы думаете полегчало не полегчало количество этих каш и любых объектов она уменьшилась а потом бах вернулась снова мы думаем ну а чё делать-то давайте дальше ковырять смотрим куча запрос вы такие умные кучек hand of вот и какие-то непонятные смотрим что-то резал кешью смотрим что такое д со своей c кто-то работал с 12 го року он знает что это адаптивная статистика зачем она нужна для улучшения производительности конечно же вот но есть ли зал кэш она оказывается убивает резалт кэш потому что но вот так вот как бы конкуренция происходит это само собой написано только на саппорте мы знали как устроен workload как бы понимаю что в нашем случае адаптивной статистика не особо радикально улучшить наши планы мы героические отключаем как и написано в секретном мануале 10 минут у документы неплохо но все равно что-то не то что из-за чего возникает вот эти конкуренция конкуренция возникает из того что вот есть такая штука как защелки такой-то легковесной маленький блокировки не вдаваясь в детали как они работают пытаемся поставить ими новую защелку несколько несколько раз не получилось взяли уснули резалт кэш и тут так упрощенно да тут как бы те кто в теме могут сказать что тут не одна защелка тут их две врезал также ставится по две защелки на каждый блок пресечь и это детали вырезал кэш и их есть два вида 1 защелка она на тот период пока мы записываем врезал такое же данные т.е. если у вас запрос работает 8 секунд на период вот этих восьми секунд другие запросы именно такие же вот именно ключевые слова такие же лойди они не смогут ничего сделать потому что они ждут пока данный запишите в резалт кэш то есть другие запросы другие они запишутся ну подожду только вот самым блокировки на первую строчку сколько они ждут они ждут не документированный параметров резал такой уж тайм-аут соответственно после этого они начинают как бы игнорировать резалт кэш и работают но медленно соответствие как только вот эта блокировка с последней строчке при помещении с ней вас они автоматом подсаживаются начинают работать рязанской что в принципе магия есть есть второй тип блокировок на получение взрывов конечно тоже с первой строчки по последней но так как вещь происходит из памяти мгновенный то они снимаются очень быстро поэтому так есть что делать ну то есть потребление подсыпав опять есть злобный гибель что делать тебе когда видит в базе данных защелки он начинать говорить защелки weight time все пропало тут начинается самая интересная игра убедить дибич the weight time at защелок на самом деле он несравненно меньше чем и время повторения запрос пусть как показывает наш опыт наши измерения защелки нарезал трэша как бы занимают 10 процентов как бы от от самих как бы запрос ну то есть грубо говоря на самом деле все очень хорошо и так но здесь минут возвращаемся все мало вот смотрите вот агрегированные статистика как вы думаете что плохо самом деле всегда посмотреть как бы по названию буквально понятно почему стало плохо как вы думаете правильно потому что крепеж забит вот они одинаковы и вот видите как бы соответствие еще одно подтверждение properly зал то отделить от то есть кэш перри затирается почему но мы же см и умным мы всегда считаем размеры памяти взяли в размер строчка наша каширу мой результат для наших рекомендаций умноженное на количество строк и что-то пошло не так и нашли мы 2 бага соответственно на саппорте которой говорят что при переполнении вырезал трэша происходит деградация производительности и это тоже исправили вот том самом секретном patcher в темный секрет секрет в чтении этой табличке память выделяется блоками соответственно и нашем случае бласик лет то что workload в пять раз вырос поэтому не надо умножать на ширину ваших данных о умножайте на размер блока и тогда будет счастье что подкрутить параметров море есть документированные параметр песни документированные хорошо много но не надо по факту достаточно я как бы четырех параметров на один из них не документирован нам хватило даже 1 размер кэша взяли со 100 мегабайт у нас обмена очень нежные как бы enterprise 100 мегабайт куча проблем вообще взяли 100 мегабайт поставили 512 6 минут на документов все равно что-то не то смотрим еще раз что нибудь еще такое странное есть именно что значит но тот как бы не ошибается тот а ничего не делать мы просто взяли и не включили job который обновлять наши рекомендации а он работает так систем 6 лет жаба нет она опыт рабо нету на что-то делать и начинает стадника вы в таблице данные добавлять соответственно кэш постоянно инвалиде руется все включили job и получили кэш здорового человека соответственно как бы всегда есть свободное место инвалид и только в моменты пересчета кэша которых вполне как бы разумно и число и соответственно удаления данных нету что получилось на самом деле при пятикратном увеличении нагрузки мы получили скорость обработки документа 40 секунд и на самом деле это очень круто вот что важно чтобы как бы кашне переполнялся мы пока все это изучали мы обнаружили куча недокументированных фишек которые в ядре лиора где они великолепны и the shelf life это параметр который позволяет обеспечить consistent убирание кэша то есть соответственно кэш умрет вот этот вот кашерный запрос он умрет через 10 секунд и конечно почиститься есть еще боле интересный вещь snapshot это тогда когда он становится нерейт consistent и нет вот как бы вот этих вот защелок и это очень удобно то есть не нужно как бы рид качестве включите это она появится но ограничение они как бы понятны и словари темпы вы и таблицы external топтать при которой таблица тоже почему-то написано в саппорте в официальной документации нет соответственно недетерминированные функции коринн дэй гуидо рандом и прочих есть секретный workaround как пойти и коринде эти ограничения по факту всегда хочет кэшировать за текущую дату но она связана с по или skyrim обойти это можно ну и соответственно надо хэшировать то что связано с простыми типами данных то есть никаких блобов слабак и прочего это фишка горная оракла она используется на самом деле в куча все что связано с джаббой он кстати вот тот секретный hand где могут это обнаружили все что связано с жабами что нарезал кэш все что связано с апексом даже если вас не поставленный апекс апекса вы процессе крутится ворог ли там все нарезал кэш и все что связанно с динамик сэмплер из адаптивной статистику еще что делает ваше предсказание более правильным и оно все работает нарезал трэша так наша незабвенная картинка память как все работать и старриджа перекочевала в буфер кэш и соответственно резалт кэш наших резалт кэш он соответственно шарится на всю базу данных нет проблемы итак соответственно плюсы-минусы минимальное влияние на код приложения не надо заморачиваться на храним логику базе данных реткон чистоте и он тоже довольно быстро как мы убедились минусы дорогая память базы данных все-таки надо что то сделать чтобы он заработал иногда если как бы такие кривые руки от может привести к деградации производительности вот и всего вот этого может создаться ощущение что вот мы вот все такие кривая руки а все-таки и д'артаньян и вот мы берем смотрим саппорт оракла за 29 число и видим что новая версия а и b 40 системы она падает по причине резалт кэш потому что они решили и ускорить гораздо более интересен другой случай соответственно в дебрях интернет я нашел очень познавательные письмо службе саппорта одно из ведущих главных системы расчета лояльности российско тут их авторы как бы и города где ее разработали выступали вчера у них произошел сбой и система была недоступна суммарно час почему потому что драматическое увеличение кэша время выдачи из кэша во время накат апачей ну почему очевидно налили кучу в кэш-память не рассчитали наткнулись на блокировку и обращение добавок системным представлением к тем самым и почему но ребят не читайте документацию читайте саппорт ноты мест полно это написано везде на саппорте что будет плохо что они сделали но тут особо как бы что они сделали понятно сделали то же самое что и мы они увеличили размер кэша и какие-то вещи отключили и вот тут лично для меня интересно как они это сделать то что включить можно тремя способами можно выбери hand резалт кэш можно пилить новый залп кеш и появилась такая замечательная штука как и blacklist то есть можно не меняя приложение запретить кэшировать какие-либо вещи соответственно какое наши выводы отсюда всегда перед тем как что-то накатить посчитайте как это пофиксят вашу память и отключите кэш на период загрузки путями к отключили налили и включили лучше чтобы системы чуть-чуть по тормозило но заработал чем потом легла и все это светилась в интернетах и так дорогая память что же делать oracle и есть 3 решения заключительные как это решать есть клиент сайт резалт кэш как он устроен первое инсталлируем двух гигабайт миракла в россии клиент далее при первом обращении он идет в базу данных которые предварительным образом настроенной и соответственно он получает размер клиентского конечно из базы данных и инстанцирует у себя на клиенте этот кэш разве при первом подключении соответственно каширу и запрос первый раз идет в базу данных сваливает эти данные в кэш и все хорошо потому что все остальные 3d сколько бы мы там к этому драйверу потоков внесла ли в рамках одной машины они все ходят к этому кашу все замечательно интересен какой вопрос ну во-первых он иногда кстати скидывает статистику чтобы можно было промониторить не в мониторит клиентские драйвера как происходит на валидация есть два режима инвалид ации они заточены на некий такой параметр инвалид эй шон лок инвалид шон лок это величина которую оракал позволяет кашу на драйвере быть не консистентными как он поддерживается как бы если вот этот инвалид эй шон лок не прошел то любой не каширу и мы и запрос когда он идет в базу данных он с собой кроме результатов своих себя он еще приносит список инвалидных объектов соответственно there'sa лт и помечается включая как инвалидной и все работает как на картинке с первого сценарии результатами как инвалид валидный пошел в базу данных все хорошо забрал новый соответственно если прошел если время прошло больше чем вот этот инвалиды шлак усам ризал кэш он идет в базу данных клиентки ризал кэш и говорит а дай-ка мне список изменений он сам в себе поддерживать как бы свое адекват станет соответственно следующий запрос когда в него придет он сразу же пойдет в базу данных загрузить в кэш и все хорошо тут все конфигурировать очень прост есть два параметра величина вот этого отставание кэша и размер соответственно он минимальный 32 килобайта максимальной 2 гигабайта с точки зрения разработчика приложений как-то да собственно также как бы вписали hand резалт кэш как бы если он был то он просто начнет использоваться клиентский что надут нити что на джаве вот у тебя взял две про интегрировался по 10 как бы пунктом из запросы и что я получил я получил первое обращение создания и соответственно любил выбранный скажут ведь и тут тоже есть вот такая табличка да с остатками тоже память выделяет с блоками обратите внимание на select он такой не очень интуитивный я если честно не знаю может меня засмеют да я до того как начал с этим взбираться даже не знал что есть такой уж кгб ссср connect info вот почему все в таком виде так неявно к чему-то нету как бы нормально васи да да ну я на самом деле думаю потому что во первых бы проект функционал очень мало кто знает во вторых если вы про него узнали как баркал стал без продавать свой каширу щий сервер oracle к he runs вот поэтому вот так соответственно какие у нас достоинства дешевая клиентская память у нас есть записи нотные драйвера то есть все работает минимальное влияние вход приложить мы значительным образом сокращаем сыпью вот вывод и вообще сеть к базе данных мы просто к ней не ходим на мне надо учить умные всякие каширу числа это мы хотели каст и прочие добро и нету тех пресловутых защелок минусы очевидно это уменьшил рид консистенсии но в принципе сейчас это тренд это даже как бы позорно если у тебя ее нету вот надо как бы чтобы был оси клиент установлен два гигабайтами клиент ограничению в целом 2 гигабайта как бы это очень много лично для меня ключевое ограничение этой вещи которые я это мало информация продакшене на саппорте который мы всегда используем когда работаем срезал кэшем я нашел всего лишь пять богов это говорит о том что скорее всего это мало кому нужна и это меня несколько раз тратя учатся активно это изучаю итак вводим кучу все что мы говорили и так плохие сценарий для самодельного каша мгновенное изменение кэш должен поменяться если поменялись данные или если запрещено хранимой логика хороший сценарий есть команда разработчиков есть уже полевской логика есть какие-нить ограничение которые не позволяют пользу другие техники кэширование сервер сайт резал тыкаешь когда плохо когда очень много различных результатов которые так бы просто вымоют весь кэш когда запроса и либо занимают больше тайм-аута либо что-то ну то есть этот параметр настроен неверно и когда эти результаты из очень больших встреч в очень параллельными потоками загружаются когда хорошо когда есть разумное количество каширу им их результатов когда наборы данных они двести-триста строк мы сами для себя вывели вот параметру такие случаи двести-триста срока широкий набор это просто великолепно вот этот параметр он кстати настраивается есть параметр который определяет в процентах соотношение памяти как бы к общему размер лизал skashat сколько может и памяти занимать весь резал конечно соответственно вскоре должен быть дорогой потому что иначе временно защелки все съезд должны быть плюс-минус статичной таблицы но мы все равно как будет нормально работать но и должен быть тебе который случаю придет как бы и всех спасет ну соответственно резал кэш на клиенте та самая проблема мгновенной инвалида ции или если клиент который говорит вот хочу 7 драйвера вот блин вы тут умереть но надо хороший сценарий есть нормальная команда среднего слоя там полно и вскоре который может бы неплохо за крыши ровать ну то есть просто ничего менять не надо по факту и есть какие-то ограничения на железке итак вывод на самом деле я до сих пор считаю что мы за доклад он про боль сервер сайта и зовут кеша поэтому вывод такой всегда оцениваете память правильно с учетом блока использование апексом джебом и прочим и адаптивные статистике всегда используйте хотя не документированного я практически уверен штука jyj время раз документируется документируется параметры вымывания автоматического из кэша перед банком отключить и соответственно исходя из вашего вклада надо подстроить вот этот самый тайм-аут никогда не использую force для всей базы данных как бы нужна база данных в памяти позовите кость очень по всего тарантулом я думал она с удовольствием впишется в это вот и соответственно если у вас есть force до купцы проверяйте чтоб никто не начал палить его хаотичным образом как вышло у нас со сторонним детей лим и так и решите так ли хороша как бы адаптивная статистика как она рассказывает support вам ну собственно этом все вопросы очень приятно что есть вопросы нет это бы это был и само собой все пота с сэмом но как бы суть-то инсульт от этого не меняет том что просто все по сути ставилась как бы в очередь из-за защелок то есть тут как бы сами сторож то есть тут как бы суть в том что использовался арок новый полнотекстовый движок то есть как бы и суть то есть на самом деле восемьдесят процентов работы запроса съедал полнотекстовый движок с его многоязычность you и прочим и соответствует как бы она не поможет то есть он так на так устроен по сути то есть причем не когда семья до сих пор считаю что он прикручен а вы каким то вот внешним сервисом который там чуть ли не через сокеты работает то есть по факту мы боролись какой с полнотекстовым и вот там 20 процентов join то есть тут на самом деле нас тораджи далеко как бы не уедешь ну и тем более как бы ну вот вот есть production да как бы вот есть то что будем железку накидывать на ходу как бы люди топают не и мы с ним до вот микрофончик дать как-то все эти хитро устроен я не знаю что против записи исчезните young вопрос с какой версии можно использовать there'sa с 11 11 и второй вопрос когда резалт кэш на клиенте синхронизации и отладкой вообще этого всего дела как ну как интригующе вот то есть как бы это есть отладка происходит через вот эту вот самую табличку которую показал то есть ты смотришь как бы то есть ты сможешь куда он пошел не пошел но вот на самом деле механизм работает очень четко вот-вот задали на выйдешь ну вот этот лак да вот задали 3 секунд реально каждые три секунды будет ходить в базу данных и говорить не поменялось ничего не поменялось ничего то есть на самом деле он работает вот просто работает здравствуйте спасибо за доклад скажите пожалуйста ведь есть же ещё из jyj в чем разница он это буду черкаш да то есть как бы ну это не то то есть это блоки данных а это строки то есть как бы наша задача не не заставлять базу данных выполнять запрос то есть как бы не тратить процессор на него ничего то есть как бы ну лежит а новый джеймс процесса потребуется больше то есть все равно пойдет выполнение разбор какая-то движуха то есть штука в том что мы просто берем как бы немцы платок и выдали то есть в этом замысел тук-тук да вижу я так понял это на самом деле не для огромных в некотором смысле статических таблицы то для именно живущих таблицы из которых из которых надо что-то вытаскивать но в совершенно не в большом количестве ну я бы сказал так то есть oracle как в зависимость от того в какую часть документации посмотреть говорить по разному но он как бы в итоге правда он само собой говорит на саппорте что это больше для систем как бы поддержки принятия решений то есть где есть некие агрегата и как бы который все-таки пересчитываются да вот например табличка раз десять минут обновлять но это нормально ну вот как она у нас как бы обновлялась там как бы много много много раз до от этого возникали проблемы но вот в частности я и стали кома таблицы сигары которые пишутся прям вот нон-стопом в огромном количестве ну и соответственно цель биллинговой период закрытие все это дело аккуратно взять и пересчитать соответственно я так понимаю даже разбив образом на на connection pool и по клиентам то это тоже не спасет тоже как минимум на сервере на клиентском сервере где java машина тупо кончится память нет просто не понимаем килобайт дойдет и упадет ну вот проверен если поставить меньше начать выгребать больше клиентский драйвер упадет я помог пасибо добрый день спасибо большое , здесь этих левее практически перекликаясь с предыдущим вопросом не замечали ли вы к деградации вообще полностью базу данных после какого-то большого количества объектов 0 какого количества объектов которые поместился в рязанской потому что мы реально на определили что ну там примерно там до 500 объектов кафешек базы все нормально это перекусывает как только почему бросал к большой размер 100 миль хорошенький память есть все есть но как только там больше десяти тысяч объектов орг oracle в этих защелках весь погибает и все и все становится и есть такое дело опять таки тот самый магический позже между еще разочек я специально поехал в уроков нашел тех технических специалистов всех дружненько поднял на уши искал говорите почему ну в принципе лучше не пользоваться но это опять таки то есть как бы друзей я исхожу из чего зачем это придумали мне кажется это было вот как буд то есть они вот игрались но очевидно это корни функционалом все таки как бы для своих вещей так как бывает когда ты берешь can функционала которые у тебя делать в конторе выставляешь наружу и все вылезают все баги он заделался и сначала дали динамик сэмплинг одри динамик статистику очевидно потому что как бы я понимаю на что мечтает oracle чтобы кто все покупали в опцию in-memory до который как понимаете сих пор нет внедрение в россии много много много но вот живу я этих людей не видел то есть суть в чем ну да и есть нюансы точно спад 300 объектов как бы в основном живет как бы ну вот игру до 1000 долину на факту как бы вот какие-то странные люди мне звания дочь как бы есть опять и на саппорте документации что если у вас срезал . бы больше 2 гигабайта все вокруг этой цифры почему-то крутится да лучше не надо то есть это они тоже там пишут спасибо спасибо за доклад особенно в начале доклада когда я увидел selecta из изолт каша джексу меня и окна во сердца потому что наступали наступали а дальше они натыкались на эти баги да и вот частично на мой вопрос уже только что ответили на вопрос следующий с учетом того что вот все эти критические замечания справились исправляется 12 2 имеет смысл вообще использовать или зовут кэш когда можно там юзаю зайти на мере ну мы и займы на самом деле не собираемся отказываться с вами пустого как разобрались с этим недокументированные возможностями ну просто вот вроде все хорошо да то есть как бы есть действительно целый слой каширу ющих решений до но тот тоже самое у нас вот используется всякие каши до хотели касс тот же самый но там возникают как бы проблем с транзак но ночью совсем как бы и то есть вот например у мы использовали полнотекстовой штуку но она хорошо работает чуть ну просто дом то есть на самом деле к сожалению тут нет универсального ответа тут все зависит от задача спасибо без но по китайских китайский есть меня можно до меня вопрос такое смотрите 40 секунд это в принципе тоже многовато вообще-то для запроса да ну то есть это это хорошо но но всё равно много нет не для запроса отделе процент для право не для рубля для фасада строк и 8 колонок на самом деле на самом деле это нормально то есть там просто надо видите что то есть я написал скачет примера слова и фильм до на самом деле ну тут как бы такие как вы пошли такие инсайдерская штука вот вот эти вот штуки три дополнения когда мы от на катере мы врачи поразились мы дубль они будут максимуму два-три слова а как бы там нормальные люди придут предложения по двадцать строк и что есть параметр занимает по двадцать строк это очень хорошо то есть ты просто берешь читает жизненные предложение сери шла маша по шоссе 25 как бы и а надо выдать правильно и содержит очень ли качать людям жизнь то есть как бы люди там вздохнули но просто получается что новый результат после но после загрузки документа до получаю там через 40 секунд а получали там через 20 минут какая разница как бы вот какая раненый за 20 минут как бы можно бы там систем мотивации людей как бы завязано на сколько они документов обработают надо это специфика ментам то есть поэтому этот это бизнес как бы задачи надо я помню спасибо то есть 20 минут мне кажется это очень размещать этот возможно вы искали тоже с 11 оракла можно использовать уже давайте так с 11 2 вот так вот как бы в 1с 8 в 1 с очень грустно всё да вот я хотел спросить на нас к у нас 14 насколько это грустно грусть . печально лучше вообще не трогать покажу 2 наш к обычному это потому что устроены по-другому защелки в 11 а защелки были ваще последовательны понятно всем спасибо то есть один сначала спасибо большая"
}