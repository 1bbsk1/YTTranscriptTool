{
  "video_id": "al9PTWHy1-I",
  "channel": "HighLoadChannel",
  "title": "Минимализм Kubernetes / Александр Кириллов (Evrone)",
  "views": 2086,
  "duration": 2888,
  "published": "2020-04-14T11:17:36-07:00",
  "text": "ну что давайте поговорим про кубер нет еще раз всем привет меня зовут александр я технический директор компании euron обычно большие конференции это же не только про технологии но и про общение и я с радостью пообщаюсь с вами в соцсетях ну или как-то свяжемся если вдруг у вас останутся вопросы по моей теме и вы не успеете их задать давайте немножко подойдем к теме этого вопроса кто мы и что мы делаем чем занимаемся компания euron занимается продуктовой разработкой разработкой на заказ и это довольно важный нюанс давайте объясню почему среди наших среди скал по наших проектов есть совершенно разные и монолиты и проекты на микро сервисной архитектуре написанное на большом количестве языков и сравнительно большом превалирует конечно руби потому что мы компания которая изначально занималась руби разработкой но есть остальные языки не готов 80 процентов руби и остальные процент и делятся между собой стальные и проекты настолько разные что там используются различные базы данных и киева или хранилища и брокеры сообщения да и вообще много других сторонних сервисов и так как проект и зачастую к нам приходят уже готовые который мы либо поддерживаем либо развиваем то зоопарк клауд провайдеров на которых они постятся и работают тоже довольно таки большой и то и облачные провайдеры и какие-то бермята серверы ну наверное как и все мы автоматизируем большую часть работы касающиеся качества касающихся автоматики deployment раскатки приложений а последние проекты практически все кантине резеро ванны и мы используем также и различные реджи спрей для хранение образов в том числе и классические docker и джесс 3 docker hub который позволяет хранить и оглядываясь на весь этот зоопарк я как технический директор немножко унываю я хочу иметь ну по большей части контроль над всем этим надо автоматизацией над хранением над конфигурации я хочу infrastructure аскот что это значит это значит атоматически развертывание инфраструктуры это значит автоматическая доставка релизов автоматическое масштабирование при увеличении нагрузки там где это необходимо где еще больше необходимы и ручное управление и соответственно мне для этого нужны какие-то инструменты верно вся тема о которой мы сегодня поговорим родилась и за довольно таки большого холивара между разработчиками разработчиками и мной и разработчиками потому что когда я к ним пришел с своим со своей проблемой что я хочу infrastructure скотт у нас возникли на возникла ряд вопросов на которые нужно было ответить так как вы видели весь этот зоопарк он довольно таки большой и разработчики привыкли работать по разному они привыкли к разному они привыкли работать нативно с докером а локально возможно разрабатывать с помощью докер кампус а иногда проекты приходят уже с настроенным окружением на dockers форм ребята ездят по конференциям слышут различные инструменты такие как нам от и подобные и пытаются тоже их смотрите использовать так как большая часть нашей разработки это руби разработка так исторически сложилось что есть сервиса который позволяет нам автоматизировать некоторые вещи например класс от 6 ну и какие то еще подобные ему не будем на них акцентировать внимание и когда я посмотрел на весит одну на весь этот зоопарк игры ребята но в больших проектах мы и наверное большая часть сообщества использует кубер ниц правильно давайте попробуем использовать кубер ниц и стандартизировать наш devops отдел и все что касается ок жение deployment а давайте попробуем использовать cabernet как основной инструмент на что я получил сразу несколько тезисов 1 убирает сложный да ты что там огромная документация там полно сущности которые нужно изучить и чтобы знать как это работает а еще он неимоверно тяжелый наверное не зря его ставят на большие кластеры сервера и он там занимает некоторый процент ресурсов и он довольно небольшой сам по себе но если мы начнем изучать вопрос особенно с точки зрения разработчика так uber нет он не такой уж и сложный честно скажу научить кого-то работать кубер ниц требует не так много времени мне кажется хватит недели для того чтобы любой разработчик понял какие то основные тезисы основные сущности в кубер нет и начал с нами работать или или как-то взаимодействовать если дальше развивать тему то почему он не сложный конечно же при использовании любых инструментов мы стараемся использовать наработки которые были до этого и их очень удобно использовать кубер нет если вы используете пакетный менеджер фильм он не только пакетный менеджер не только пакуют до ваш deployment но и предоставляет какие-то набор шаблонизация наверное все вы они уже знаете кроме того сейчас существует огромное количество хабов и решение где любые практически ваши зависимости уже упакованы ферме вам достаточно просто их поставить на сервер более того используя hell вы можете довольно таки спокойно организовать deployment практически одной кнопкой что я имею до одной кнопкой не только развернуть ваше приложение но и развернуть окружение для этого приложения давайте рассмотрим маленький пример если у вас есть хоть у ханны есть отличная вещь это управление зависимостями вы можете указать то те черты ну то есть пакеты которые используют харин как зависимые он их подтянет с конфигурирует и установится на которую на готовый кубер нет кластер то есть вам по сути достаточно иметь всего лишь два файла чарт и файл зависимостей вот в данном примере мы ставим две две зависимости это подгорский и редис и конфигурируемых то есть они конфигурируемые с теми параметрами которые вам необходимы для вашего окружения это обычно чарт но это пример черта то обычный черт который хранится так же как и любой код который пишут разработчики мы используем систему контроля версий мы используем опять же выкладку по тегам как а релизные обновления и все это работает то есть получается что мы любой сетап но практически любой можем обернуть в чарт и и дым патент на его выкатывать но его нужно куда-то выкатывать откуда берется кубер нет с на серверах да ну или вообще в мире очень часто и когда вы только начинаете сталкиваться кубер ниц самое простое решение это взять его и использовать как сервис практически все наверно клауд провайдеры сейчас поддерживают кубер нет а за сервис то есть он достаточно просто нажать одну кнопочку нажимай другую кнопочку вы можете разик ловится купюрница на российских серверах да наша клауд провайдер российски тоже теперь предоставляет cabernet как сервис и вам не нужно заморачиваться и думать как же мне его руками настроить и развернуть но также вы всегда можете развернуть в полуавтоматическом режиме на ваших был металл серверах если это необходимо и требуется по безопасности и для этого тоже есть touring вам не нужно вручную нигде ничего делать есть куча инструментов начиная от янцзы был заканчивает у лингам который поставляется уже скомпилирован am виде вы можете сконфигурировать кластер и развернуть его на ваших машинах конечно же можно просто развернуть ими скрипта мин который дает коберн из коробки но мне кажется это не очень удобно вот с тяжестью с тем тезисом что он тяжелый немножко сложнее мы знаем что кубер нет обычно ставится на несколько нот и внутри он имеет множество компонентов новинка которыми нужно как-то управлять которые внутри вот это пакетного решение находится сейчас практически не практически довольно много готовых решений который представляет вам кубер ниц как дистрибутив canonical в ubuntu имеет свое решение rancher имеет свое решение даже мезосфера сейчас раскатывает на себе купюрница кластер вам также достаточно его просто сконфигурировать определенные какие-то цифры и он развернется если интересно есть огромная таблица тут и и быть не видно там порядка по моему 120 строк типов кубер ниц которые есть сейчас это и счас решение как сервис и те которые ставятся инструментально если интересно тут будет и qr-код по которым вы сможете собственно посмотреть полностью что там есть какой список насколько он большой один из продуктов про которые я сегодня буду рассказывать и так отрез это дистрибутив кубер nights которая разработала компания rancher labs что это такое это облегченный кубер на етс насколько облегченный спросите вы он занимает один бинарник это один баннер и файл размером всего лишь 40 мегабайт и минимальные требования которые в него заявлены это 512 мегабайт оперативной памяти для запуска на машине и в развернутом состоянии когда он запущен он потребляет около 75 мегабайт памяти все остальное остается вам фото пират вода pure vision как у них получилась ужать такой большой продукт до таких маленьких размеров для этого нам нужно сначала взглянуть немножко на архитектуру купюрницы мы не будем погружаться полностью во всей остальной части мы просто их обрисуем мы все знаем что в купер нас есть мастерноды и worker ноды 2 неотъемлемые составляющие мастерноды управляют кластером worker ноды на них запускаются соответственно контейнеры ну и все остальные сущности в рамках домена кубер ниц давайте чуть-чуть поподробнее рассмотрим мастернода что там запущены из каких компонентов она стоит эти сиди сервис это распределенное хранилища данных киева или распределенные киева или хранилища в котором хранится вся эта информация кубер ниц куба pi server это по сути и перед который предоставляет вам возможность манипулировать сущностями через какой-то интерфейс и он складывает информацию о текущем состоянии кластера в хранилище метаданных куб контроллером менеджер этот модуль управляет сущностями такие как под и deployment и сервисы и так далее то есть он занимается вот чуть-чуть верха уровней работы и есть клад контроллер менеджер это модуль отдельный модуль который занимается отвечает за интеграцию с клауд провайдерами и ищет куб scheduler но он распределяет сущности по собственному адам занимается саду лингам если посмотреть на все эти модули мы можем из них выбрать наиболее тяжелое это хранилище метаданных и клад контроллер менеджер что я имею ввиду под тяжестью в данном случае эти сидит разработала помолвку с разработчики операционно стеклорез разработали это хранилище метаданных для хранения информации в кластерах на базе corvis она довольно тяжелая ну скажем так в минимальных требованиях для нормальной работы ему требуется 1 гигабайт оперативной памяти ребята и скоро из при создании больших нагруженных серверов рекомендуют использовать 8 гигабайт оперативной памяти для стабильной работы распределенного хранилища метаданных из каждой версии выпуска губернии с да и эти сиди минимальные требования все больше и больше растут раньше это было 512 мегабайт оперативной памяти сейчас гигабайт с теми возможностями которые предоставляют купюрница на сегодняшний день там требуется хранить еще больше данных это я говорю о кастом ресурсов и подобных вещах но ребята из гончар labs подумали а давайте попробуем заменить это хранилище и они заменили его на sql lite естественно потеряв ха-ха я вел ability потому что is your light будет запущена только на одной мастерноде и не как вы к нему больше не получите доступ только на одной тем не менее они оставили такой маленький бэкдор чик и вы всегда можете подключить любое другое хранилище и да не только эти сиди вы можете подключить туда подгрузки майский для хранения этих метаданных но искали like скажем так так как они адаптировали это подвески ллойд скиллы как искала идет из коробки следующая часть тяжелая с их точки зрения это callout контроллер менеджер почему да потому что он в своей кодовой базе хранить интеграцию со всеми клауд провайдерами и не только кладка провайдерами то есть не только интеграции запуска все с чем взаимодействует кубер ниц с клаудом все там хранится вся кодовая база соответственно вы не можете взять себе и получить дистрибутив кубер ниц исключительно для амазона или исключительно для до карьер чтобы там только эти интеграции были нет компилируются все вы получаете весь полный набор не не зависимо от того где вы разворачиваетесь даже и соответственно эту часть тоже можно облегчить грубой взять и вы пилите и так как мы делаем облегченную какую-то версию да они решили взять это все и выпилить следующее это worker но ты что на них на них куплет он отвечает за жизнь и цикла подав на ноги и следить за ними и куб прокси в proxy управляет под сетью кластера под сетью сейчас сеть губернатор настраиваемая то есть вы можете использовать различные типы сетей виртуальных и если опять же смотреть на эти компоненты то к прокси для кадр с довольно таки избыточной ребята решили оставить только flonal не давая возможность подключать какие-то другие скажу так типы сетей и в итоге вся картинка того как облегчили кубер ниц выглядит вот так это один бинарник который хранить себе все составные части q бернес причем один и тот же бинарник запускается и на мастере и на worker нодир просто с разными параметрами то есть тем самым они просто унифицировали дисплей дистрибьюцию мы решили использовать catrice в продакшн для проектов которым не требуется много ресурсов либо это маленькие проекты которые достаточно тепло ведь на одном кластере на одной машине либо это маленькие стартап чеки но с перспективой роста дальше которым требуется там отдать 2 3 машинки и ресурсы этих машин у заказчиков ограничено а иногда вообще приходит заказчик говорит вот вам машинка пожалуйста уложите все в нее крутитесь как хотите мы попробовали и давай я хочу с вами сегодня поделиться о тех теме как же так ошибками или теми нюансами бы лучше звучит с которым мы столкнулись первое с чем сталкивается стала мы сталкиваемся при диплом нити cabernet это балансировка запросов запросы приходит к нам в квесте и дальше их как-то запросу нужно учить до сервисов в ктс из коробки поставили обычно до обычно это делается интеграция интеграционным клауд провайдером либо лот балансиром слова провайдера либо каким-то установленным внутрь то есть если вы например использовать amazon используется amazon навский load balancer и уже он занимается этой проблемой в гугле другой на и так далее ребята из к tres решили просто ну а зачем вам на маленьких машинах целый большой лот балансер вам достаточно использует трафик и добавили трафик как покинул входящие в пакетное решение то есть по умолчанию тогда у вас поднимается к отрез там где появится трафик внутрь но вы можете использовать любые другие решения то есть вы этим не ограничены те сервисы которые делаются внутрь этого облегченного кластера изменяются с помощью подмены манифестов которые идут с ним то есть вы можете обычные ямал файла манифестов использовать и деплоить нужные вам вещи внутрь что дает трафик трафик дает вам возможность опять же сэкономить на ресурсах сэкономить на сердце менеджера если вы хотите использовать автоматическую генерацию tls сертификатов то есть он имеет нативную интеграцию с elastic все же сослаться на crypt и занимается сам обновлением сертификатов и следить за тем чтобы они были актуальны то есть данном случае мы избавляемся от небольшой но вот сущности которая который тоже нужно как-то саппортить и поддерживать и настраивать следующий вопрос и to persist данных и да я говорю о базах данных обычно маленькие кластер а я знаю что есть холивар на я тема до запускать база данных кубер нет или не запускать и эта тема массируются вплоть до жду сегодняшнего дня есть много тезисов за против но когда мы говорим о маленьких проектах обычно там выбирать не приходится база данных маленькие либо не нагружены и терять scheduling конфигурацию все что дает q бернайс из коробки делать это как то на стороне ну мне кажется это не очень оптимально если мы можем за использовать кубер не задавайте пробуйте его использовать опять же pure system данных это значит подключение persistent воли мтс когда мы deeply in кластер поднимаем кластер где-нибудь в облаках которые поддерживают менеджеру berlitz мы используем инструменты и touring этих провайдеров например эбби elastic блок сторож от amazon ну и подобные от всех других a digital оушена воли омс от google cloud engine тоже есть свои да на подключаемые диски и не задумываемся об этом задумываюсь только когда их тюнить нужно или нужно выбрать тип это вас тораджа в самом простом случае catrice позволяет использовать вам local storage причем local storage не тот который просто хост пас компания rancher labs разработала праве жене рф для locals тораджи которого нет изначально в поставке кубер нет который автоматизирует скажем так вам выделение вот этих вот виртуальных к вот на той машине на который заполнил на определенный ноги но тут проблема приходится прибивать скажем так под или тепло и но под к определенной ноги от куда подключены local storage и его миграция между нодами тут будет уже не уместно да рассказал с парнем сложном случае всегда вы можете подключить какие-то сторонние провайдеры все вы наверное знаете что есть различные клауд fs различные персис нас тораджи и провайдер которые поставляются с сервисами вы можете подключить их как и сетевое хранилище собственно это тоже никто не отменял одна из больших проблем маленьких проектов это логирование когда мы переводим проекты в кластер мы не можем дать возможность разработчикам в залазить внутрь ну как бы это не очень хорошо да вы можете со мной поспорить и мы это обсудим но я как технический директор не могу позволить разработчикам ходить в продакшн кластер где живые данные реальные данные а может быть и финансовые и доступ к ним поэтому сбор налогов или какой-то критической информации выносится на какое-то дополнительное хранилище то и дается интерфейс разработчикам либо какой-то его или какой-то инструмент и если мы говорим о классическом стыке сбора логов это либо ел кфк стек до грейлок ну и чему все привыкли на больших проектах на маленьких проектах это не работает чтобы запустить елка eliyev к стык и извиняюсь не дай бог грейлок вам потребуется минимум 4 гигабайт оперативной памяти давайте подумаем что же тогда для бедных для бедных буквально недавно около несколько месяцев назад компания граф она выпустила отличный инструмент называется грейлок это от инструмент скажем так от очень похожее на то как работает прометей он написан на голову он хранит в себе логе виде строчек не строчек отдельных элементов и по сути состоит из нескольких инструментов это само хранилище легковесная причем очень легковесное которая позволяет делать небольшие запросы параметре параметризовано и искать среди этих строчек и так далее и сам сборщик бром tail называется то что идет из коробки вот и по сути вам нужно будет сделать легковесные локи на promt.ru который идет из коробки тоже написано голы тоже довольно таки простой и графа ну и этого будет достаточно для того чтобы обеспечить хотя бы минимальный доступ к лагам для того чтобы видеть логе для того чтобы искать по ним искать не так наверно расширена как мы привыкли угрей лоб или в гифка но тем ни менее получить тот минимум информация которая нужна для дальнейшего дебага или анализа рекомендую посмотреть есть там не к некоторые минусы конечно но решение рабочие следующий эта метрики все же собирают метрики д н и метрики с сторонних сервисов базы данных киева или хранилища информация кластере а когда это нужно приложение мы заставляем приложение отдавать какие-то метрики и вот тут как ни странно никаких изменений не будет prometheus отличный инструмент более того он конфигу родильной быть всегда можете разделить только часть например только сам основным корма дуль сервер не диплом пушки твой уменьшить количество запросов в секунду периодических запросов к окружению тем самым собирает чуть меньше метрик но чуть за большие промежутки времени и ограничить например attention тайн для того чтобы не хранить там метрики за год хранить их за неделю ну к примеру ну и конечно же не забывайте выставлять лимиты потому что в один момент может противники лир и грохнуть его если вдруг будет очень большая нагрузка то есть камня клинит а в случае нехватки или экономию ресурсов следует относиться очень скрупулезно конечно же вы всегда можете использовать какие-то облачные хроничные инструменты одним из самых наверно известных является дата док причем to the top покрывает и метрики и лаги но у них появилась возможность хранить в себе логе искать по ним целый инструментарий единственный по моим ван дамм придется платить за каждую строчку логов больно но иногда необходимы следующие темы наверно с которой мы не сталкивались но она звучит практически на каждой конференции это меньше все эти ребята если вы используете кубер nights про и стива вы можете забыть окончательно для того чтобы разделить и стива в окружения вам нужно помог как минимум 2 или 3 гигабайта оперативки просто чтобы она запустилась другой вопрос будет она еще дальше там работать и сколько оно будет потреблять но если у вас нехватка ресурсов финансовых или еще что-нибудь и так далее м он все-таки хочется поэкспериментировать поработать с лимитами трафика ограничением . роутинга трафика внутри кластера ребята те же которые разработали трафик на его базе разработали скажем так имевшейся для бедных это моешь а у нее нет столько конечно же возможности как у и стью но какой-то минимум также она реализует а именно работу с трафиком различные метрики по по этому треку который хоть в постерах так далее и сейчас в принципе у появляется много много таких вот инструментов которые позволяют лимитировать потребление ресурсов мне кажется это связано с тем что многие кладут провайдеры например amazon и подобные ведут политику по развитию edge компьютинга когда у вас маленькие ограниченные ресурсы веб-камера например не веб-камера камера которая гбдд да или еще что-то и чтобы не хранить огромный объем данных которые оттуда приходят эти данные лучше начинать обрабатывать прям там прям на этаж прямо на конце и уже иметь готовые данные возможно это вот все идет к тому catrice отлично подходит для aiuti для а клауд для это компьютинга и так далее они это позиционируют как киллер фича когда я готовил это выступление до принципе на прогоне до о наступлении мне задали вопрос говорит спрашивается а поддерживает ли catrice операторы и я проверил и она действительно поддерживает операторы и кастомные ресурсы c ради поддерживаются внутри я решил проверить я решил поставить графа ну с помощью нашел на оператор hop и самый первый который там есть нашел а оператор праздник ловил его и он работает он отлично работают но естественно почему он работает потому что катрет поддерживает кастомной ресурсы и все что с этим связано чего нет в ктс единственное ограничение которое они поставили при интеграции но при работе с кубер нет они выпили альфа фичи они оставили только style ибо эта фича альфа fitch я им пришлось выпилить когда я говорю про поддержку кстати оператор выиг остальных ресурсов но наверное вот сейчас на текущий момент уже происходит перелом но мы все привыкли если мы используем фильм то нам нужно за деплоить внутрь teller на который управляет дальше инфраструктуры в третьей версии конечно же нет него избавиться но тем ни менее так вот ребята те же и за rancher лапса взяли и запилили к сам ресурс оператор вернее который управляет халим чертами внутри вам достаточно вот тот в и льюс который вас есть обернуть немножко вот в метаданные и просто скормить через обычный куб это люк теплой и скормить им вот этот ямал файлик нот и он вам сам поставит этот чарт разделяет его и сконфигурировать на базе тех конфигов которые там есть что в итоге в итоге мы получили легкий deployment он действительно легкий разделяет кадр с можно одной строкой я не стал где вставлять это реально одна маленькая строка минимальные затраты нарисую иисус навин станциях как я говорил выше балансировки вот все почему мы привыкли единственное вот те нюансы о которых я сегодня говорил нужно иметь ввиду всегда нужно иметь ввиду когда вы работаете с ограниченным числом ресурсов и раньше рваться утверждает что catrice это сертифицированный дистрибутив cabernet то есть это не просто поделка он получил полностью сертификацию и одобрен к продакшн и ряде если отталкиваясь от технических нюансов мы перейдем немножко к операционка organic менеджмента то что мы имеем даку бернис бывает разной но тем не менее внедрив catrice заместо dockers вором за место на над мы убрали распыление экспертизы по этим инструментом и используем единый инструмент и единую экспертизу по работе как с большими так и с маленькими проектами причем если у вас проект маленький и он вдруг в какой-то момент стал нагруженным то вам не нужно будет переделывать всю конфигурацию вам просто будет достаточно либо мигрировать его на кластер побольше уже на взрослый кубер лиц либо добавить просто ресурсы если это необходимо то есть не будет большого лога кто-нибудь сталкивался с переделкой dockers ларнаку berlitz больно очень ну и соответственно вот единая стандартизация а где в deployment а и работе с единым набором туринга дало вот вот такие вот организационные плюсы я буду рад с вами обсудить какие-то моменты в вопросах или после выступления где-нибудь в кулуарах спасибо большое так сейчас вам принесут привет спасибо за доклад очень интересно если какая-нибудь возможность сконфигурировать к 3 с так чтобы это было отказа устойчиво да есть такая возможность сейчас catrice и даже у них в репозитории есть интересная папочка называется production and production там набор инси был скриптов мой бог полноценные для того чтобы ставить кубер ниц на bare metal просто указывая пи адреса плюс но это то что дает вам масштабирование на n нот и автоматизацию по ability как я сказал изначально там и speedlight соответственно имеем один мастер возможность конфигурировать сторож для метаданных там задается при deployment определить la gente кластера и когда вы делаете первоначальную архитектуру вы можете указать не использовать встроенный я хочу подключить elastic search вот его адрес удалось изъять апостольский вот его адрес эти сети вот его адрес и talkin' то есть конфигурация методах хранилище метаданных возможно это дает hail ability потому что вы можете иметь ни один мастер а.н. мастеров да такая возможность там есть спасибо за доклад какое минимальное рекомендованные вами объем ресурсов на котором все вот эта штука в обвязке запускается имею в виду не только как бы основные сервисы plus monitoring плюс логирование это все зависит от во-первых вопрос будет ли там находиться проект скорее всего да если за вычетом ресурсов который вам требуется на сам проект то это где-то 2-4 гигабайт оперативной памяти и 2 и больше я der процесса на этой конфигурации он работает безотказно он работает безотказно на разбитой вот дальше можете на разбитое потому что они изначально как я говорила делали упор на юте и наш компьютер и поэтому у них заложено поддержка и arm устройств то то есть сироп на базе arm и классические остальные то есть x86 и остальные архитектуры спасибо большое за доклад понятно зачем использовать при маленьком количестве ресурсов которые сданную когда у вас уже есть капельный кластер зачем дополнительно разбора использовать к отрез для маленьких проектов почему не использовать все тот же борщик нужно да это хороший вопрос спасибо как я говорил у нас в основном это заказная продуктовый разработка и клиенты все разные и гарантировать скажем так и во первых они приходят уже со своим окружением они приходят и горят что-то у нас не так давайте на нашем окружении что-то по правам но вот они к нам приходят с просьбой сделать нам архитектурные решения разработайте нам проект с нуля но много много различных кейсов и мешать их собственно в один этап в одно окружении иногда даже нет физической возможности это совершенно разные клиенты иногда приходят клиенты с серверами которые закрыты за над за виза vpn и так далее которых вообще доступ нету но вот и и это их ограничение по безопасности это просто их ограничение который мы менять не можем все верно все верну да мы под них готовим окружение под каждому практически под каждого клиента отдельная то есть мы не собираемся делать большой хостинг мы работаем непосредственно с каждым клиентом индивидуально но вопрос хороший спасибо вот такой вопрос да что насчет lisk легковесного контейнер runtime и докер стандартно исправление от там используется контейнер де они хотят внутри внедрить поддержку creo но пока что я не видел сейчас они используют контейнер де нативно без обвязки докер то есть докер он же модульный сейчас do not отдельно контейнер де как инструмент контент контейнере tesa подъема контейнеризации да спасибо вот а вся остальная обвязка ему не нужно потому что все интерфейсы контейнер diy так предоставляет поэтому если вы поставили catrice зашли хотите сделать docker вызвать уж какую-то команду докера вам скажу что у тебя нет докер да все верно в северном да он потянет зависимости поставить контейнер де спасибо большое за ваш доклад задам два вопроса на первый вопрос предусмотренный на переезд с catrice на взрослых у бернейс такой без безболезненные какой-то если какие-то практики когда проекта rose rose но сначала был к 3 с а потом случилась страшный он вырос и и уже в ктс нам как-то тесно например по причине того что он был изначально сконфигурируем не как павел уберите на потом уже все-таки говорим война-то на исидой например перейти на вообще уже во взрослых и бренд это один вопрос и 2 про все таки чуть чуть больше хочется раскрыть практике poppixie стон сторож как файловая система уровне файловой системы так и на уровне ну допустим войску или образ вот потому что это часто атрибут многих проектов что люди от по-прежнему думают не клауд ради как получились понятно понятно да давайте по порядку отвечу мы не сталкивались с переездом сокотре на взрослый то что я сегодня говорил имеется ввиду у вас не будет проблем и создание конфигурации заново вы перри используете то что же сконфигурировали единственное что вам придется перенести то данные вот а так чтобы life играешь на сделалось к сожалению но я не знаю сейчас есть такая возможность даже на обычный кубер нет то есть равно это приходится подключать ноды подключен до подключать мастера тушить остальное да и так далее вот поэтому тут те же проблемы что и переедет обычно муку бернис то есть миграции например с одного облака на другой ну вот тут те же проблемы но вы всегда можете о нет не сможете не сможете подключить еноты например взрослого коберна езда большого к мастерам ca-300 есть такого там по моему нет потому что очень много ограничениями связаны с компиляции персистенция из и она не буду отнимать хлеб у другого докладчика сегодня уже обсуждали эту тему и не знаю вы застали или нет немножко наверно скажу все таки на стенде компании фант как раз дмитрий рассказывал про различные local store g вот и я думаю что у него в этом экспертиза гораздо больше если у вас есть возможность обратитесь к нему спасибо за доклад я хотел спросить а можно ли в катре с клауд саппорт назад включить что клауса порт назад включить внyтри нет нельзя дело в том что как как они дело сделал дэн то есть я специально смотрел изучал код там довольно таки интересно catrice именно продукт который написаны на гол это полноценный продукт единственное что они сделали они взяли репозитории брошенную репозитории кубер нет и подключили все модули к себе нет такого нет то есть это прям готовое решение которое вот ни шагу назад на нас спасибо александр за доклад вопрос такой как в таких стесненных условиях может быть какими инструментами вы обеспечиваете хранение и поставку в приложении секретов хороший вопрос есть разные проекты в некоторых проектах мы можем секреты публиковать в переменное окружение и использовать классические инструменты кубер на стс секретный конфликт нпс вот изолировать столько секрет сможем д конфиг maps у нас шарат на сути на вид по сути на весь кластер если там нет сын сети в данных и данные касаются только исключительно внутрь инфраструктурой так как у разработчиков туда не доступа есть доступ только у devops причем то есть мы разграничиваем доступ на оба на основании airbag то есть несколько ролей до разные доступа вплоть до того что мы для себя сиди делом отдельную роль которая она управляет только своим приложением вот сейчас вот то есть иногда секрета хранятся в нативном виде так это представляет купюрница если это сложные проекты проекты например финансовые где происходит либо работа с большим большим количеством инструментов внешних инструментов например еще как тогда мы используем волк hаши карп то есть там когда вы работаете слот есть несколько паттернов дэн есть возможность интеграции и волк непосредственно в приложении с помощью клиента есть возможность использовать его агент для того чтобы подключаться к нему он также внутри классе расположен к нему подключаться и выкачивать какие-то данные оттуда что мы используем мы используем паттерна когда в инет контейнере запускается агент монтируется директория общая для и нет контейнера который будет польза для единит контейнера и для основного запущенного контейнера в инет контейнере агент делает запрос к world выкачивает конфигурацию файлик и низ контейнер и завершается запускать составной контейнер и имеет конфигурацию уже готовы через этот логову сторож это первое а второе мы пробовали но еще в продакшне реализуем по-моему где-то года два назад или год назад авито рассказывай как он через entry point работают то есть они экспортируют переменные через entry point в entry point спускается агент забирает данные экспортирует их переменное окружение и дальше уже запускает приложение что это дает это дает если вдруг даже у разработчика есть доступ к контейнеру он в него заходит и он не видит этих переменных окружения которые за экспортировались в entry point потому что они за за экспортирован только в tom ford форки который сделал entry point и на внешку он к ним доступ не получит только если у него есть доступ к runtime у приложения это вот в кого интерпретируемых языках до скомпилированные языками это еще проще все равно доступ не получит если нет каких-то факторов внутри кода но так как происходит как code review это довольно-таки легко увидеть то есть вот несколько паттернов и разные патроны дают свои результаты здравствуйте максим меня зовут у меня вопрос такой вот в таких стесненных условиях опять же как вы какой подход применяете для разделения окружений дпс там стейдж продакшен вот если это один сервер да один маленький проект ну если позволяет окружении да то есть ли количество ресурсов но в принципе да это не очень хорошо держать продакшен ест эйджинг на одном кластер и да ну как мне кажется все таки production должен быть полностью изолированный вот если это мы говорим про например и у нас есть несколько окружений истый jing окружения до есть отдельное окружении которое пре-продакшн как на котором тестируется прямо релиз полностью да вот то их можно держать на одном их можно изолировать на им спицами можно изолировать на уровне организации внутренней структуры тоже хорошие примеры если вы посмотрите очень много уже тем про это говорилось да то есть много выступлений было вплоть до того что изоляция каждый сервис в своем нам спейси и будь это скажем так правда productions сервер до или это стейджинг плюс препарат да они все равно будут изолированы и потоки данных ну и связь как тогда она будет изолирован и самим namespace здесь можно сделать архитектур так что это будут маленькие части совершенно изолированные друг от друга не знающие в большинстве своем друг о друге и можно будет это итоге плавить в одном окружение тоже есть разные паттерн и но мы вот такое разделение по namespace он когда каждый сервис своем на экспрессию но практически не применяемых час то есть не такого пока уровня проекта диплом цена маленьком окружении вот там уже стоит задуматься действительно ли маленькое вам окружении нужно может быть все таки побольше и добавить лишь сеть локальная разработка в docker и кстати вот это тоже наверно вопрос который я не сказал да ну вернее так я встретил новинки большое сопротивление в том что разработчики привыкли работать в докер кампус а тут им предоставляют кубер ниц и нужно переключать контекст и одного к другому я думаю что это будет следующий тем моего доклада именно workflow разработки с использованием кубер ниц сейчас появилось несколько инструментов к сожалению забыл мы сегодня уже на стенде эти суммы обсуждали это инструмент который позволяет вам как разработчику приконнектиться к удаленному кубер нет серверу иметь доступ ко всем его сервисам которые запущены внутри потому что они общаются только через сервис а вот и вести локальную разработку вплоть со своей машины то есть кот синхронизируются с облаком там есть несколько возможности добавить свою локальную машину как ноду изолируя некоторые вещи дань но вот либо синхронизировать прям в облака текущую директорию да да да можно и у себя поднять вас необязательного т.д. но есть возможность работы с облачным если будет интересно это прям пойдем найдем делом инструмента цыкин и так александр вы выбрали лучший вопрос да провал хорошо встаньте пожалуйста кто спрашивал да да да да да вот про секреты мы дарим тебе подарок за самый лучший вопрос можно поаплодировать ребята все остальные как-то кому может быть работа немножко горькой кажется подходите у меня есть куча сладостей с вами поделюсь и так всем спасибо особенно мамба александра за ваш вклад их труды"
}