{
  "video_id": "2z4XO3fyn3U",
  "channel": "HighLoadChannel",
  "title": "Видеозвонки: от миллионов в сутки до 100 участников в конференции / Александр Тоболь (Одноклассники)",
  "views": 4529,
  "duration": 3622,
  "published": "2019-12-05T12:56:56-08:00",
  "text": "многие на этом может быть кто-то и уже меня и знает вот ну я отвечаю в одноклассниках за проекты видео лента а сегодня я буду говорить о видео звонках потому что видео звонки на первую половину состоят из видео основать его моего доклада будет в том чтобы правильно сделать переход сервиса от того что у нас были звонки один на один как групповым звонкам на 100 человек и расскажу зачем это нужно и прочие вещи немножко первый слайд я думаю как сказать вообще о важности сервисов voip звонков объяснить что это нужно вот я посмотрел в принципе сейчас невозможно найти messenger который бы не поддерживал звонки если посчитать по суммарной статистики этих мессенджеров которые они заявляют в разных сми то получится что более миллиарда минут в день пользователь разговаривают использую исключительный интернет то есть ну почему потому что это удобно да то есть вы общаетесь где-то и в этом же месте можете позвонить поэтому если у вас есть к это корпоративные средства общения свои мессенджеры там еще нет звонков возможных стоит туда добавить теперь немножко вообще в целом про историю звонков ну наверно первым таким общеизвестным был skype 2006 году в одноклассниках мы с 10 по 12 на всех платформах запускали свои звонки на базе решения от адоб и пару лет назад мы его полностью поменяли переделали на в партесь и вот и год назад мы добавили групповые звонки и сегодня про вот этот интервал перехода я вам буду рассказывать почему я думаю что мы можем рассказывать как это нужно делать у нас месячная аудитория пользующийся квантами превышает 10 миллионов человека в сутки у нас больше 2 миллиона звонков цель нашего сегодня конференции догнать звонки до 100 человек как и уже спрашивали с на вопрос зачем на 100 ну первое иногда хочется чем-то поделиться красивым кадром который здесь недалеко в горном алтае со всеми своими друзьями или с классом или еще с кем-то или провести семинар вот а вторая часть даже если вы считаете что вашему сервису что-то не нужно вот сейчас кто-то может спросить зачем на 100 а еще лет пять назад меня спрашивали зачем в 4к запускаете а сейчас каждый телевизор без 4k не продает сам и 4k еще в четырнадцатом делали вот это не то что опережение времени это если вы хотите сделать хороший сервис поставьте себе планку повыше если вы сможете добиться звонков хорошо работающих там на пятьдесят сто человек то когда у вас будут пользоваться пользователи там 610 и так далее у них все будет отлично итак кто видел мой доклад прозвонки я свяжу отлично человек десять набралось вам если паз был еще чуть-чуть побольше вот тогда я немножко расскажу как работает звонки для того чтобы всех остальных ввести в курс а потом уже сделать переход от перту перкин общий план у нас будет такой я быстро попробую сказать что такое звонки от каких они параметров зависит как их сделать хорошо потом мы сделаем переход от 1 кан и померяемся с конкурентами посмотрим какие варианты сегодня не будет как использовать какие-то библиотеки прикручивать там в партии сие всякие примеры вы прекрасно воспользуйтесь без меня гугла цель нашего получить групповые звонки и что вообще сделанные любые сервисы звонков в принципе 400 таких независимых относительно составляющих это signaling задача сигнале нга это вызвонить абонента обменяться начальными данными сообщить что умеет один абонент что другой и после этого наладить некоторый канал через который можно передавать уже видео и данные собственно говоря видео аудио нужно передавать используя кодеки это второй уровень работы третий уровень у нас есть сеть которая обеспечивает работу там в плохих сетях восстановления под пакетов пир toupper соединения может быть и четвертая часть это топологии которые добавляются в случае групповых звонков в принципе там даже любую из этих частей можно было вытащить на 40 минут на доклад но я подумал что у вас не сложит с этой общей картинки пазла того как работают звонки поэтому попробую успеть все будет трудно но в конце должно сложиться ну понятно перед тем как начинать делать сервис мы предъявляем к нему требования стандартные требования мы хотим чтобы наши звонки быстро соединяли есть у вас есть входящего снимаете вы хотите чтобы вы сразу увидели собеседника все было шустренько вот мы боремся за качество звонков и хотим чтобы картинка не рассыпалось не замирала в общем очевидные вещи мы хотим чтобы можно было звонить в чат и в которых есть 100 имение человек ничего трудного и вот кто эту коробочку видел у кого нить есть так как на работе о тоже человек сам 510 есть да вот одна одна такая штука больше в коробочку стоит больше трехсот тысяч рублей называется polycom позволяет позволяет позволяет вам удалось позвонить в другой то что два все соединить над два поля кому же 600 тыс вот единственный жалобы постоянно в отметкам чате ребята сделайте что-нибудь уменьшите задержку этой коробке то есть такая огромная коробка noolite у неё от одной-трех секунд и она реально мешает разговаривать кто разговаривал наверно знают особенность между городами на основании тащил мы выдвинули такие очень простые интуитивные требования старт звонка ну за секунду пальцы подождет это нормально 300 килобит в секунду приличная сеть чтобы можно было звонить интенсив хорошо бы уложиться в полсекунды было бы здорово ну и 100 зван пользователей звонки все хорошо что вообще мешает почему не так много сервисов это могут сделать какие вообще здесь есть проблемы но это все знают что в сетях данных с пакетами вас обычно это соки тут отправлять и стрим это улетает все как в черную коробку сама собирается все работает но все эти разные пользователи зараза любят звонить друг другу с мобильных сетей они бывают такие что сети будут перегружены если вы туда допустим кидаете данных больше то они у вас наоборот не пролезают звонить вы их теряете вам приходится восстанавливать blood мира такие сети когда у вас там ничего в сетях нет во всем но пакета пропадают ну не знаю вай фай за стенкой вот такими характеристиками можно характеризовать описать сеть ну например round trip очевидно простая вещь у вас сервер отправил данные клиенту получила каналу jint это минимальное время round trip все просто как он нам мешает как мы помним мы хотели трубку снять за одну секунду если у вас round trip 200 миллисекунд в принципе с установкой соединения например там типично если мы еще там какой-нибудь tls накрутил мы уже там 500 миллисекунд можем потерять пока установки соединения останется всего 500 миллисекунд это еще пара request of после которых мы должны закончиться поэтому с лишними запросами из ртт мы работаем очень аккуратно вот например пример того как если вам выставить app that этом в 200 миллисекунд посмотреть что у вас pink 200 если вы сделаете запрос по https вы увидите что установка соединения у вас займет до 800 секунд поэтому если он таком пинге уже установили какое-нибудь вы пакетное безопасное соединение проапгрейдили из двп кита тут как раз уже все время можете потратить вот о том в какие вообще цифры в мобильных сетях по различным задержкам хан шейками всему остальному есть в табличке есть ссылка на доклады можно посмотреть подробно следующая часть которую мы будем описывать сети до пропускная способность вы можете пролететь пакеты как угодно пачками там сразу забивать все в буфер они все равно будут равномерно с какой-то скоростью приходить какое-то количество пакетов в секунду или данных это будет пропускная способность как она нам мешает очевидно мобильных сетях она постоянно меняется и у вас есть шанс что если у вас просто способность упала а выданный передаете с тем же битрейтом они не пролезают вы видите соответственно во время звонка стол вот потому что вы не успели адаптироваться с этим вам придется тоже бороться потеря пакетов ну визит на простая ситуация пакет можно потерять и в этом случае у вас есть выбор или что подробности получить какие-то искажения или попытаться начать ретрансляцию пакеты и тоже можно получить так называемый стол что еще в сетях и сетях ей джиттер я о том что пакета приходит неравномерно каким-то сгруппированными пачками с кем-то интервалами джиттер легко померить если возьмете по пингу ети например сайт холода прямо отсюда посмотрите интервалы посмотрите что пин-код нестабильная величина которая меняется если вы посчитаете разность между соседними пинками усреднить и получите какую-то величину это ваш джиттер казалось бы как он нам может мешать предположим мы передаем видео в каждом видео один кадр это один пакет сетевой в общем довольно просто вот мы две птички вы отыграли нам должен придти 3 но он и за джиттера вот так задержался мы получили стол соответственно надо где-то накапливать пакеты с небольшим буфером это выравнивать и того сеть можно в принципе примерно характеризовать вот такими величинами как round trip ндс пропускная способность packet loss джиттер этого будет достаточно ну перед тем как начинать кидаться все это фиксить и говорит что мы сейчас все поправим надо узнать какие вообще интернету пользователи может у всех сеть идеальное любое решение будет работать ну 80 процентов случаев сейчас конечно и пользовались пользу беспроводное соединение это или мобильной сети или вай фай если посмотреть в россии выбросить западный регион то там все не очень здорово если по убрать крупные города вот если за исключением крупных городов посчитать среднее значение то вы получите примерно такие вещи то есть 200 миллисекунд это вполне реальность я проверял райков sky коробкой райп атлас и там действительно такие значения ну мы их ещё раз билете значение по типам сетей посмотрели что у нас вышли за средний характеристики поняли штамм где-то нужно на этом учиться работать и еще особенности при разработке звонков нужно учитывать многие забывают но мтс 3g это всегда симметричный канал клиент который у него всегда downlink больше чем uplink зависимости от того какой там против протокол это может быть 30 на 70 может быть меньше соотношение в средне обычно 30 на 70 вот при этом на вай фай хэна фиксирован интернете это всегда 50 на 50 иногда мы это забываем при разработке именно звонков это важно как это можно проверить можно сказать на speedtest и посмотреть какое соотношение скорости там в мире между мобильными и спи тестами и там фиксированным интернетом и тут я удивился оказалось что по миру фиксированный интернет говорят тоже асимметричный потом я посмотрел в россии он оказался слава богу симметричному я подумал ну ладно значит где-то бага не не у нас будем жить примерно с такими значениями и того что мы получили мы получили что 80 процентов пользователей использует беспроводную интернет параметры беспроводного интернета могут динамично меняться и он у нас асимметричный отлично с этим всем багажом двигаемся дальше вспоминаю что мы делаем групповые звонки как выглядит вообще алгоритм группового звонка алиса хочет позвонить кому-то борису направляет ему offer это алгоритм простого звонка час мыло докрутим вот отправляет offer который мо сообщает все что она умеет какие она поддерживает нам протоколы настройки так далее он ей в этом отвечает они с ней договариваются после этого устанавливают некоторые транспортное соединение и начинают обмен видео аудио данными все просто все архитектура выглядит так у вас всегда есть какой-то общий сервер вы их с коннекте ли дальше они как-то могут соединиться через пир toupper какие-то другие сторонние сервера и так далее и обменяться данными как данные проходят данные снимаются камерой камеры их кодирует на устройстве отправляет куда-то в socket на и соединение походит по сети воспроизводится на другой стороне кода кому отображаются на экране все просто ближайший план разбираем signaling как его сделать групповым разбираем что такое аудио-видео и следующие два пункта будут эта сеть и переход как раз групповым звонкам и все самое вкусное сик на миг очень простая вещь задача установить соединение сообщить о звонке выглядит крайне просто алиса звонит управляется nomer пуш на мобильное устройство или браузер устанавливается пример в абсолютно сильнее любое другое можно это неважно вот после этого они договариваются кто-то из них может снять трубку тогда автоматически другой положит в общем все просто у нас платформа поддерживать различных клиентов различные транспорта они все замыкаются на какой-то сервер который занимается обслуживанием этого звонка и пересылкой сообщений все максимально просто на случай если этот сервер сломается или там не знаю из происходит к это обновление есть президент на и хранилище в которой записываются все сообщения кто их получил и можно легко при случае потери сервера переключиться на примерно другой этим всем администрации занимается закипит где сложность сигналь инге известные сложность зигзаг lemans мы не хотим на самом деле некоторые сообщения применять 2 раза ну для этого все очень просто мы все сообщения амирова ли два раза не приедет единственный очень нехорошая вещь на создание звонка вот там иногда человек может создать звонок повесить трубку создать еще один звонок а может создать звонок не повесить создать еще один и они все не уникальны и непонятные то и transmit или он два раза нажал и так далее вот это фиксится очень легко на клиенте над генерирует уникальную одышку и понять и дупликацию делать в принципе в сигнале нге никаких сложности нету доброго до группового он дорабатывается нетрудно мы все самые а трансферы отправляем теперь алиса шлет не только борису ну и диме они все получают соглашаются них появляются канала данных между обменов между собой все здорово для того чтобы в общем-то справиться с групповым звонком и понять какие там технологии нам придется чуть-чуть поговорить про то что такое видео видео это там 24 кадра в секунду или 60 кадров в секунду для того чтобы их сжимать использоваться кодеки в чем вас на суть кодеков раз какой-то момент вставляется опорный кадр это типа g пешки и дальше ему накатываются div и которые говорят хранят только изменения вылета примерно так это опорный кадр просто положили джипег следующем кадре замес закодировали только изменения у нас движется машинка если ты еще раз тоже только изменения вот этот штука называется группа пик чем этан независимый набор фреймов которые можно декодировать которые взаимосвязаны с ним все хорошо а кодек это на самом деле алгоритмы трансформации между кадрами и чем круче кодек тем он лучше жмет и тем больше он сепию ресурсов нужно просто отношения битрейтов кодеков есть общие правила там есть ссылочка как делать вот общий такие мы провели таких цифр используем двинемся дальше нам нужно знать про кодеки самый популярный кодеки используемые для звонков это 200 вся 4 и випе 8 ветер себя 4 он хорош тем что он везде хардвар на работает он не живёт батарейку но энкодеров кодировщик of у нас на телефоне обычно один и декодировщику в 4 всего остального вам нужен wi-fi 8 софтверный который неплохо потребляет батарею вот соответственно поменять стоит приоритет на 264 для групповых звонков например и там есть ссылочка где-то можно сделать следующая вещь это viber себя кодек может кодировать с переменным битрейтом из константам очень многие кодеки на устройствах не поддерживать константный битрейт поэтому придется жить в той картинкой которая вас слева с аудио кодеками есть старые различные legacy кодеки есть очень популярный коды корпус он решит вам все проблемы он родился из двух других он в себя внутри содержит ссылки skype и содержит еще другой кодек который для музыки таким образом он решает задачу и кодирование на при низких битрейтах и при высоких вот что еще наверно стоит сказать что в опусе есть алгоритм примитивными скажи исправления ошибок farther correction то что эффект называется как работает эффект для аудио у вас в каждый пакет питаются данные высоком качестве и данные предыдущего фрейма за какое-то время в низком качестве соответственно если предыдущий пакет потеряно может достать данные предыдущего пакета в низком качестве что-то нормально проиграть в среднем довольно неплохо получается всегда когда пользуясь аудиокодеком и смотреть на эту табличку и эта табличка соотношение качества и битрейтом то есть когда качество входного сигнала битрейт который кодек кодируют из там соотношения вход-выход вот видно что опус почти решает все проблемы из интересного для себя наверно можете подчеркнуть рацион используется при кодировании там видео различных хостингах и старый кодекс пикс который использовался как раз исключительно для аудио вот до 32 килобайт в секунду он очень хорошо работает и так медиа топологии данных на читал чтобы понять как этого работают то по логике них особенности надо посмотреть как работают потери как с потерями справляется видеокодек вот если в первом случае мы видим хорошую картинку нас ничего не пропало то во второй строке мы теряем какой-то случайный кадр получаем минимальный артефакты не сильно заметить заметная вот если вы мы теряем опорной то до следующего опорного мы будем видеть только какие-то хаотичные накатывающиеся div и пока она не пьет следующий опорник очевидно что плодить очень часто опорники это дорого у нас растет битрейт это неэффективно поэтому почти все сервисы звонков в так или иначе поддерживают возможность допросить опорный кадр случае его потери то есть клиент может дать и ко мне новый опорник вот в в партии see the full inter flame называется фирмы мы будем может быть на запрос опорника дальше называть теперь какая топология самая простая наверное это взять все свое видео отправить всем своим друзьям мы запускаем запускаем один кодек и шлем то есть алиса включила камеру кода как правило свое видео бориса и диме все довольны единственный минус если у димы плохой интернет страдает борис потому что нужно качество понижать и если диму потерял кадры запросил опорный борису опорный тоже придет хотя ему был не нужен с точки зрения смешивания видео можно на самом деле все видео поклеить в один поток вот это вам потребуется некоторое оборудование и возможно вы получить какие-то задержки но такое решение тоже есть теперь все дальше про движемся с транспортом понятное дело что доставлять видео по тисе пи это крайне неэффективно эти секреты надежная вещь а мы хотим и надо что-то team match потерять и на этом не затыкаться все наверное помнят что тисе пи это горилла его протокол до надежное который в случае потери пакетов если они не пришли он вам их достать до зари transmute прозрачный от вас но вы за это платите такой истории вы иногда можете прочитать опять же таки пакет какой-то кадр следующий у вас пакет пропал у вас в буфере лежит птичка как летит вы уже с этим кадрам одним из 24 готова попрощаться нам степени до 100 прочитать поэтому рекомендовано и все сервисы звонков используют конечно же для этого ю т п не знаю кто видел поднимите руку то доклад видел много человек там до тоже 10 есть супер вот если не смотрели посмотрите там вот предыдущая тема именно почему все streaming все работает на и т.п. и почему вообще мы рано или поздно переместимся с tcp на какое-то более интересное решение что для нас нужно знать нужно на 45 доступен не везде и все равно есть три процента сетей в которых люди пине работ поэтому fall bitch найти себе нам придётся это наверно основной вывод из этого доклада следующе интересная вещь что пользователи могут между собой мочь устанавливать пир toupper соединения это максимально выгодно потому что вы в новосибирске звоним друг другу то было-бы классно нас просто запилили мы как бы напрямую пообщались чем мы бы использовали какой-то дополнительный сера который нам даст плечо вот но существует над над и 97 процентов пользу я сейчас располагаются за натом и у кого нет внешних и фишек эту проблему с одной стороны рано или поздно решит айпи вы 6 первыми кстати в россии в мтс запустила не сейчас есть полностью поддержка ipv6 и у них у всех белый и по клиентов на то они и теперь не за натом остальные пока все за натом вот над может пробиться может не пробиться это примерно наши цифры того к нам удается наш спирт супер цене или к нам приходится использовать fall back через сервер и здесь ссылочка как раз на тот доклад который вначале говорил там рассказывается как пробивать на ты так двигаемся дальше что нам еще нужно будет это джиттер буфер для чего он нам нужен нас есть кадры как обычно у нас появился джиттер у нас все застряла мы примитивно стартуем с какой-то задержкой знаем что у нас есть буфер мы туда выстраиваем там кадры с ним живем увеличивается буфер действительно динамический сам то есть если на вас кадр пропал мы застолье картинку у нас время течет потом у нас появляется увеличился мы его как бы в нем с этим буфером живем тут все неплохо но может быть обратная ситуация когда вам нужно уменьшить буфер то есть когда у вас десять сеть стабилизировалась время вам нужно нагнать вот это смешно если очень быстро ускорить то все ведь насчет очень быстро говорить голосом гномика вот на самом деле для этого есть специальные алгоритмы которые для вас незаметно подгоняют скорость аудио чтобы этого не происходило вот они убирают паузы между словами или звуки когда вы тянете нанизала 100 схлопываются да какая собстна говоря польза или не были бред от джиттер буфер если вы хотите что-то транс кодировать и поправить вам всегда предварительно нужно иметь джиттер буфер и его late in se будет не меньше лейтон сиджей 3 сети то есть вы всегда получаете дополнительный лейтон все мы помним что мы очень хотим уложиться в те самые полсекунды ну что собственно говоря выдыхаем теория закончилось вот начнем двигаться тогда в сторону практике что у нас была у нас были pure toupper звонки использовать библиотека в партесь и собранная подвиг мобильные клиенты был написан signaling прозвонки можно на хабре посчитать как они устроены как обычно не знаешь что делать смотри конкурентов соответствие выбрали какой-то набор конкурентов стали мерить какие у них есть характеристики сколько участников какие задержки как использует батарейку качества и так далее ну задержку посчитать самое интересное включаем таймер начинаем снимать видео звоним вот здесь видно на этой фотографии что там 10 миллисекунд задержка camera at the moment а как видео попало на объектив только над рисовал на матрице телефона вот после этого отправляются сети мы там видим задержку уже в звонки такой довольно простой способ это сделать вот не забываем мерить цепью на устройстве наконец настает 12 появилась такая возможность но мы по старинке привыкли это делать пирометр и так что мы пусть получили мы посмотрели что есть клиенты у которых типа вот sopa у которых максимальное количество 4 участника есть skype которого 25 и skype for business pro 250 вот и соответственно есть участники у которых стоит hangouts и зум видно что у зума чуть больше в конце вот но при этом окон гаусса похуже батарейка и на самом деле показал что качество лучше у зума и мы там по-разному это мерили но есть статьи которые говорят наоборот то есть и субъективные метрика вот hangouts раньше у него было порядка 25 участников теперь он сейчас перепрыгнул в раздел тоже 100 плюс мы посмотрели на технологии часть этих сервисов используют в открытой в партесь и другие используют проприетарный протокол но очевидно что от того какой вы используете внизу транспорт количество того сколько у вас участников звонке никак не влияет то есть есть решение и со своими протоколами зум состав звонками хэнгаутс новой партии сил в общем вы портите 1 а как бы характеристики этих сервисов разные помним что джокер буферном требуется если мы хотим что-то где-то пережать помним что хардварные 264 кодека обычно на телефоне один кодирующие там порядка четырех декодируют их с отварным мы не любим мы можем использовать и асимметричные каналы и со всем этим багажом знаний двигаемся к масштабированию и так рассмотрим телесный кейс у нас есть клиент у которого симметричный канал 3 мегабита вход полтора выход какой-то пакет lost джиттер и мы хотим передавать видео хотим гласные звонки звонки выжди предположим у нас есть и жены полтора мегабита еллоу там на 600 км на какие-то примерно ориентиры случаев эти два человека звонят перт опер то все просто им хватает сети им хватает входной сети выходной сети и мужа впритирку хватает потому что канал асимметричный ну и с кодеками проблем нету все кодеки свободны когда мы начинаем делать групповые звонки надо всех по пери замыкатель например самый простой вариант этой топологии томаш топология все на все все здорово очевидно нету серверов но возникает проблема что вам нужно раздать всем свое видео и при этом если вы кому-то не можете его раздать не прорезаете вам нужно понизить это качество потому что вы кодируете персонально для обсе ну не персонально каждому человеку а для общий поток для всех если это превратить вариант на 5 то вам тут уже не 3 не 4 мегабит не хватит поэтому у вас об ограничении 4 и больше не будет пока до тех пор пока не будет использовать мышь можно было бы например взять и всю картинку собрать на сервере но тут возникают такие вещи что для клиента это максимально выгодно то есть он имеет один connection сервером сервер собирает картинку он получает обратно но предположим у нас наши пользователи хотят пообщаться там с петропавловск-камчатского комсомольска-на-амуре новосибирска вот через московские серым тогда все будет очень плохо конечно съесть седины и там все будет лучше но суть такая что вы получите большой объем и джокер буферов которые вам суммарно внесут приличной в пенси вот чтобы это обойти есть еще топология and mixing который говорит что давайте не будем собирать общую картинку на сервере чтобы избежать этих задержек и просто по перекидываем пакеты то есть сервер на самом деле просто такой ретранслятор который перебрасывает данные тут становится все несколько лучше пользователь получает потоки всех других отправляет свой только один раз вроде бы все здорово но есть проблема первая проблема это с качеством дело том что все ваши получатели вашего потока у них сеть разные если подключился кто-то один с плохим интернетом то вам нужно ему доставить в плохом качестве вы обычно это качество понижайте и соответственно у всех просто картинка падает если есть один плохой клиент вторая история это шторм опорных кадров то есть если человек есть с плохим интернетом который постоянно долбит да и опорник дай опорник то все тоже начинают получать опорники вот это неэффективное использование битрейта качество тоже снижается ну что видно да то есть если нас централизованная система где мы собираем все видео в какое-то общее у нас очень много статей декодирования которые и лайкните добавляют и требуют оборудование вот-вот mixing все быстро и просто теперь по всем топологии мда мышь максимум 4 централа есть у него есть проблемы с транскодирования с джиттером и он миксинга собственно говоря ограничения по качеству и штурм опорников вот да вот здесь находится сети skype а вот сюда уехали все остальные со временем всеми перри мигрировали вот на такой последний вариант вот ну как мы помним они все по характеристикам разные значит там не просто and mixing а что-то еще есть вариант работы hangouts а как они хотели and mixing под себя на каждом клиенте мы запускаем один кайзер кодировщик в высоком качестве 264 кодека и в низком качестве в bios соответственно для пользователей у которых хороший интернет мы наш сервер прокидывает высокое качество для тех к плохой похуже ну и он плохой конечно адаптируют под самого худшего вот все неплохо нету джиттер буферов два качества два качества с одной стороны хорошо с другой стороны плохо это лишний trophix клиентов эта батарея и да если мы посмотрим на конгресс действительно он у нас самый теплый у него самый минимальный лари tense потому что действительно у нас прямой проброс идет по всем параметрам вот мы и у него немножко страдает качество потому что все равно низким качеством от кидаете битрейт у высокого да здесь другие топологии что у skype я не знаю не разобрал да вот если здесь мы по сравниваем то принципе цифры на лицом мы немножко решили еще шагнуть дальше поиграть в такую игру давайте мы с клиента все-таки не будем запускать софтверной кодеки по кодируем 264 будем использовать канал на всю катушку под один стрим это нам сэкономит батарею и трафик вот и соответственно будем использовать and mixing для высокого качества а для низкого качества будем использовать sandra lite схему когда у нас сервер будет он в данном случае не собирает общую картинку но он из высокого качества собирает то качество которое нужно каждому конкретному пользователю если он не в состоянии получить нормальное вот как нам приходится бороться с штормом опорных кадров мы их тротлинг для высокого качества мы считаем числе пользователю состоянии получать высокое качество наверное у них мало про падающих пакетов и они как-то из этих опорников смогут справляться ну это означает что мы не позволяем запрашивать чаще раза в секунду опорники если 3 человек спросила опорник подряд там на первый запрос он отдает потом ждет секунду потом следующий отдаст вот и что в итоге мы с таким вариантом получили это варианты типологии перт appear and mixing хэнгаутс и наш вариант очевидно хэнгаутс подтянулся на вариант с там где то 8 в пользователями когда работает и на митинг хорошо да варианта когда все в данный метод расскажу почему количество участников но в принципе ценой батарейки качество нам кажется нам удалось чуть более удачное то сделать но мы можем попадать на леденцы который для плохих клиентов мы решили этим пренебречь потому что если клиент с плохим качеством возможно ему даже выгоднее что нет второго плеча до человека которая дает видео потому что если у вас есть пропаже пакетов вы ее чинить и на интервале между вами и сервером в топологии central айзада когда у вас есть сервер который разбирает его имеет свой джемпер буферы томас кодирует он вам может отдать персонально опорник например может оставить определенный кадр и вы не прокидывайте это все для клиента и ваши вот эти вот действия по восстановлению пакетов никак не аффект от того кто отдает stream почему там галочка с бесконечностью но очевидно что никто не в состоянии не стони 50 не 20 не 30 клиентов запихнуть всех когда вы смотрите вы видите максимум 1 говорящего и какой-то список людей на экране вот пойми что у всех клиентов разная сеть разные устройства есть устройств которые не в состоянии там декодировать больше не опять и видеопотоков вот очевидно что нужно персональный по каждый подход к каждому устройству у нас сделан так что устройство сообщает сколько она может сколько она может проиграть потоков мы ему собираем как бы как задача рюкзаке там за сколько впихнуть ему в сеть можно всего разного мы у самого большого пользователя пихаем высоком качестве потом других кто поменьше в низком потом есть режим у нас настройки кодеков если мы понимаем что человек где-то там дальше и там ему включаем режим слайд-шоу низкий fps принципе вас там какие-то люди сидят внизу там обновляются раз в секунду и общем нормально там и пихаем звук если эти люди хоть как-то шуршат и если там совсем нету звука то мы их совсем не пихаем и с финальным решением так как в принципе мышь на самом деле работает очень хорошо в плане лейкен си батарейки всего остального его единственное ограничение до 34 участника там и совсем заморочились и дал некоторые границы мы поддерживаем меж потом понимаем что у нас есть проблему мы встречаемся плавно на нашу северную топологию в котором hdmi через and микст отдаем мозги через центр alive вот так вот куривший ася мы получили цифры на самом деле очень близких зум вот я предположу что они делают тоже что-то схожее с единственной то разницу что у ума нет какое-то свое решение несовместимой свой партесь и частично несовместимые но похоже вот а мы сохранили совместимость свое партесь и поэтому можем позволять поддерживать групповые звонки еще из браузеров грабли было бы все наверно очень быстро и просто но нет первую граблю которую мы очень легко словили мы же с сервера запихивали в максимальную сеть сколько лет и столько пихай оказалось что есть устройство в которых все переслать он может оказаться слабее чем сеть то есть вы ему можете туда засунуть столько видео и вроде бы у неё кодировщики играют вот на при этом ваш телефон начал сильно тормозить или перегрелся и начал тормозить тогда вы в этом случае у нас добавлено дополнительной информации я их сам телефон может хоть что он не справляется и попросить чтоб ему понизили качество следующая штука которую мы еще собрали это жалоба сразу приехала на скрин шеринг если у вас есть скрин шеринг вы его не можете запихнуть высоком качестве вы понижаете битрейт буквы цифра не видно вот срез на для всех screen шиллингов мы пытаемся и повышать приоритет и вторая история конечно же если вы смотрели вообще screenshare во всех сервисах там мышка так с интервалом раз в секунду life перемещается это потому что они оптимизируют для того чтобы смотрели рассмотреть все буквы цифры и там fps порядка там полсекунды ну то есть два кадра в секунду что-нибудь такое вот еще особенность что если мы даже делаем централа из для плохого качества на сервере рано или поздно мы включаемся в такую ситуацию когда сервер не может раскодировать всех клиентов мы не можем даже придите сколько их звонке ты все же можешь слушать но conversations of пришло куча народу нас это может не сложиться вот таким образом у нас все приходящие стримы транс кодируются как тем или иным сервером и есть все раздачи которые это все a транспонированное видео собирает благо мы все в одну картинку не складываем в большую до раздаём отдельными потоками мы можем себе позволить вот такую вещь и не ограничены ресурсами на о сервера при транскодирование наш топологии ну что как вообще делать сервер если вы захотите когда-нибудь написать свой сервер конференц связи со всеми нашими претензиями к топология не еще готовом они не нашли вот и пошли делать собстна говоря открываете юге писаки начинайте писать стандартные вещи которые вам всегда нужно делать при любых и т.п. и вещах это первый прессинг никогда не пихайте и дипе пакеты пачками вот они начинают пропадать это вот двадцать первого пакета вероятность пропаже вашего пакета если вы шлете их вот так не непрерывно отвесно пакеты нужно пробежать ну там не знаю хотя бы там миллисекунду на на секунду выберите расстояние которое хорошо работает вот для чего еще нужно повесить поток видео как я сказал уже кодеки вы не можете заставить его выдавать константный если картинка меняется битрейт растет с этим очень трудно бороться поэтому если у вас есть к это канал у вас устаканилось а битрейт тут вы потрясли телефон скорее всего картинка на другой стороне за просится потому что у вас много изменений битрейт вырос он не пролезает вот срез на тут два варианта если вы не просите у вас немножко под тормозит если вы не просите вы скорее всего потеряете избыточные пакета имя 43 транс светится там будут искажения вот так можете проверить клиент если когда вы трясете телефон на другой стороне у вас затормозила то пср есть а если посыпались пакета наверно по исиро нету ну или если он восстанавливать нари трансмита долго ждет то может быть пейсер а нету но он ждет и трансвит вот почему еще пейсер на самом деле может помогать в реальной жизни если вы запихиваете много данных и с вами какие-то другие люди тоже запихивают много данных виден в одну секунду вы можете где-то переполнить очередь и кого-нибудь дрогнут поэтому считается что если вы аккуратно не то не доказана вот аккуратно все размажете да вы ни с кем не пересечётесь и вероятность попадания пакетов снизится единственный который факт может точно сказать что потекло с меньше если у вас есть пейсер про транскодирование видео как я уже говорил даже на ffm пеги вы не всегда сможете себя себя гарантировать тут есть некоторые его эмуляция по ссылочке ну это собственно говоря транс кодируем видео пике пытаемся сглаживать через пейсер понимаю что там какая такая задержка появится наверное 10 мы уже все избалованные никогда не заморачиваемся санту но если вы пишете и типичный сервер то вам как минимум придется вспомнить что это какой-то размер данных который может быть передан сети максимальный и вот если вы передаете ну там сети 1500 неожиданно встречаете сеть в которой на 1100 то ваш пакет фрагментируется он конечно за вас там соберется но если вы потеряете какую-нить единичку этого пакета то потеряется все пакеты ну этот весь оригинальный пакет поэтому оптимально работать на чтобы размер пакета соответствовал льду в тисе пи есть кем-то алгоритм который определяет этот им то при установке соединения можно его повторить если хотите можно по discovery этим тут то есть может запуститься на ком-то дефолтном и запустить параллельный процесс и например там бинарным поиском поискать этот дом потому что если вы шлете пакет с флагом запрета фрагментации и больше чем размер int у то он не фрагментируется дропа еца вот на сайте посмотрите на картинку она получит к такая интересная тут мы поняли что не надо сложно извращаться что-либо писать и можно просто провести такой эксперимент это мы отправляем пакеты мы знаем что мы их отправили и считаем сколько пришло до сервера это пакеты с флагом запрета фрагментации соответственно там 98 процентов случаев пакеты с запретом фрагментации приходят вот при размере в 1350 в принципе можно фигачить в землю 1350 98 процент случаев он не прогнозируется понятно что флаг запрета фрагментации снимаете остальных пусть фрагментируется двум процентам не повезло саре вот мы это им мхк много где пользуемся исправление ошибок в партесь и поддерживает так вот эффект тоже поддерживает в общем вам придется их по исправлять почитать спецификацию суть в том что потеря пакетов беспроводных сетях даже в 13 процент это нормально это нужно чинить наиболее распространенная вещь для в партесь и для стриминга это негатив окна legend это когда у вас принимающая сторона сама трек от порядок пакетов и если понимает что пакета не хватает она его до запрашивает если вы знать как работает тисе пи он работает на окна селекции факт наложим технок ах вот особенность негатив окно лыжи метана в том что хорошо работает с веком с фарватер correction of про который мы сейчас поговорим дальше ну если вам интересно то детали того как писать фики наки и так далее тоже есть вот на этом видео что такое эффект эффект это когда вы заранее знаете что у вас ведь плохая вы пытаетесь туда добить дополнительное количество пакетов чтобы исправить ошибку и не тратить время на ри transmit потому что пока вы поймете что вам пакет не пришел пока вы скажете дошли вне пакет это все время возможно эти данные уже никому не нужны картинка уже замерла вот самый простой вариант века это например ксор конечно используется более сложной там вреда сломана можно использовать еще что-то пакет у вас есть какая-то пачка пакетов вы добавляете пакеты защиты избыточности при выпадает при пропадании пакетов вы можете что-то восстановить вот хорошим тоном вообще ну эта часть находится в драфте но мы своих протоколах так всегда делаем когда у вас есть канал и он у вас есть предположение что он мог измениться в лучшую сторону да вы кодируете видео 1 мегабит возможно канал уже 10 вы не знаете вот чтобы здесь не извините не облажаться вы начинаете этот канал пробивать эффект пакетами то есть если они пропадут и ладно как бы то есть избыточность добавляем пытаемся протесты мы с избыточностью какое-то время стабильно поработали на этом канале то это здорово значит его можно теперь поднимать битрейт кодеку и использовать эту часть канала вот что в итоге со всего этого у нас получилось получилось что мы запустили групповые звонки померили получилось что в групповых звонках у наших пользователей в 90 случаях скорость хотя бы больше 50 500 секунду средние количество участников 34 поэтому мы не зря запаре вали с переключением между мышь и серверной частью вот и средний дневной максимальная 27 человек не знаю пусть будет 1 класс вот какой чек лист вам нужно учитывать если вы делаете свой сервер в помнить про posing & dp сервер не важно даже чего правду про исправление ошибок собирайте максимум логов мы очень много де божились потому что бывают случаи когда есть клиент который говорит что что-то у него пошло не так потом нужно все отсматривать мы собирали логе всего сигнале нга все состояния в партесь и который она дает все управляющие команды которые были переданы чтобы потом можно было что-то отладить ну и как я вначале рассказывал нас есть масса было проблем с сетью с пакет лоссом понятно мы боремся ри трансмита миксером чеком смотрим энту вот с тем что у нас меняется на лету пропускная способность сети мы не забываем бег пряжу на кодек исправлять и примеряемся обратно тем самым фетт пакетами джиттер нам лечит только джиттер буфера msi она добавляет leithen симости ничего не можем сделать но и всегда экономьте на ртт пытайтесь минимизировать количество запросов мы например при входящих звонках в первую очередь максимум пихаем информации о звонящем в пуш чтобы если вы даже под конец gcm push схватили там уже были все данные при этом пока у вас трубка звонит в кармане у нас в это время начали устанавливать соединение сообщает какие у него там порты открыты и так далее да то есть мы такие штуки pride проблемные делать для того чтобы хорошо уложиться в одну секунду будущее что вообще будет дальше в звонках на самом деле в партесь и это вот не самая удобная штука это ртп поверх которого куча масса всяких extension of одни браузеры поддерживают другие не поддерживают кучки хто флагов вот на самом деле на нем крайне трудно работать поэтому многие пишут свой проприетарный протокол вот и у нас в принципе тоже наверно было желание вот с левого края перепрыгнуть правой и здесь из минусов мы потеряем поддержку в бар или придется наш протокол где-то на сервере конвертировать в партесь и чтобы он заработал в браузерах казалось бы что мы на самом деле умеем писать своих депре протоколы писали их очень много вот что статья на хабре как streaming сделать и даже если смотреть от stream он работает сейчас лучше чем в партесь и но нет это действительно сложно и вот это тот случай когда мы решили что стоит подождать знаете такой стадия кто знаешь такой стадия во много людей да эта игра это такая игровая консоль которая позволяет вам онлайн играть где-то на удаленном сервере на работ по верху и партесь и я ее сам не трогайте все люди которые трогали говорят половину кадров дропает поэтому гол сейчас очень активно лечат своего партесь и потому что в принципе это основной блокер для этой стадии вот и даже среди решений по улучшению в партесь ее предлагаются идеи перевести с rtb в parties in a quick несмотря на то что в крике нет возможности сказать что вы готовы терять по определенному там каналу поэт какой-то порядок процентов вот я не знак это будет работать это активно обсуждается кто сейчас меня понял знаешь что такое квик ох как немного на самом деле правда все здесь человек в зале знаешь такой крик а вы знаете что когда вы с хрома заходите в гугл в youtube с android заходите в гугл в youtube вы не пользуюсь больше tcpa используете quick поверх е д п от google и вас больше там нет sp-a мобильных операторах в том же mt se que de pe traffic ag или кого больше тридцати процентов так что 30 процентов случаях вы все пользуйтесь у женитесь и пикником поэтому если у вас есть этот пробел просто прочитайте что это вот сколько у нас времени к сожалению нету не расскажу тогда про него расскажу и расскажу ребят давать так сделал смотрите сейчас в 11 часов начинаются докладов соседних залах обратите внимание если вы хотите на них пойти у вас трудный выбор александру мы дадим возможность рассказать выводы отличие от да да тогда я чуть-чуть про quick расскажу все равно раз уж у нас есть время вот соответственно tcp протокол на самом деле довольно старое его придумали там еще в 70 четвертом году у него есть определенные проблемы вот одна из тех что он порядок пакетов там выдерживает еще что то и соответственно это как бы долго не фиг силой какие-то либо изменения в тисе пи делать очень трудно потому что они долго доходят до ядерные мобильных клиентов поэтому google начал пилить свою версию поверх и vdp вот они исправили все ошибки в тисе пи прошлого и в принципе он на плохих мобильных сетях он быстрее там на 20 30 процентов доставляет данные чем тисе пи поэтому просто включив где-то quick или переехав на него вы своим пальцем можете дать в такое неплохое ускорение и так теперь все таки выводы прозвонки крупно с чем мы разобрали мы разобрали как работают звонки что и мешает хорошо работать как хотя бы поверхностно написать свой сервер ну и собственно говоря когда вы начинаете всегда что то делать нужно начинать собственного рассмотреть что там у конкурентов вы наверно узнали теперь что любые звонки состоят из сигнале нга видео аудио кодировщика в сети и топология и надеюсь что вас сложился какой-то общий позвал его и общая картинка как это все работает да не все топологии одинаково полезны не стоит кидаться что-то делать всегда посмотрите проанализируете конкурентов что можно улучшить исправить что вам со всем этим делать ну кого есть чат или еще какое-то место куда вы не прикрутили звонки прикручиваете звонки хотите группа вы пишете свой сервер или используйте там открыты к рента я нас еще что-то и если вам это все не надо то возможно знание о сетях или о кодеках вам когда-нибудь и где-нибудь пригодятся ну а самое главное что мы выяснили для себя что на самом деле любые характеристики можно улучшить можно улучшить количество пальцы или звонки можно снизить light in se поднять качество но чем больше вы пытаетесь улучшить чем дальше вы движетесь тем ставится в больше сложность всего вашего решения иногда нужно вовремя остановиться всё спасибо спасибо огромное да не прощаемся вот есть мой e-mail если он истечении недели напишите с пометкой highload я обязательно отвечу на ваши вопросы если вдруг вы что-то забудете спросить успеете за неделю успел за неделю нет смысла не успеете за неделю они успеют за неделю написать я обязательно отвечу а потом могу не то настроение подроб и по настроению спасибо огромное тебе за доклад официально благодарность мне нужна помощь волонтеров чтобы еще и подарок тебе вручить да смотрите ребята кто остается верным этому залу давайте попробуем минут 10 сутки вопросы задавать это подарок тебе тоже троттер к митингам жидкий спасибо вот можем поговорить про вопросы да и как всегда на первом ряду побеждает человек задает первый вопрос приятный зовут антон мне если по вопросов начале презентации вы показывали что существуют леденцы при переходе со обычно сорокина soccer socket и соответственно вопрос если вы вы работаете все курсы катились все таки в обычном пакете у нас для signaling а может быть любой транспорт то есть если у нас уже есть мессенджер sraw тисе пи протоколом до в котором есть обмен для сигнальных господь и to throw тисе пи протокола это соединение то есть для браузера использовать socket в остальных случаях нет не имеется ввиду то есть secure sockets ветки то есть и person здесь суперсет с безопасностью на не от не везде secure sockets если у вас уже есть мессенджер в котором у вас есть persistent на и соединение но обычно вашего мессенджера есть персистенции конверт во время работы он может быть ты себе со цель не важно какое то готовы вы можете его использовать в качестве конёк так signaling signaling не накладывает ограничение какой транспортом должен использовать в каком-то смысле часть пользователи они меня то есть они не находятся зоне безопасности нет то есть часть сигнал может перехватывать нет как-то негативно прям спрашивать в таком ключе смотрите я вам говорю что качестве селенга можно использовать и высоких на и соединение всс да то есть браузерах и тсс в клиентах у вас есть connection к messenger вот ваш messenger он не всегда всс messenger это например tls поверх там внутри тисе пи просто у вас есть безопасный канал мы используем этот безопасный канал мессенджера который уже открыт вы не тратите время на ртп вы можете использовать его и на основе него уже делать как мы данки соединения ok а еще мы несколько маленьких вопросов прости пожалуйста если есть еще вопросы ребят задайте их и мы дадим тебе слово потом есть кого-то еще вопрос по диаметру вот дадим просто слова до чтобы был шанс у людей тоже здравствуйте спасибо вам за доклад на самом деле вопрос общем скажем так про индустрию есть ваш взгляд интересно услышать насколько я понимаю сейчас существующей системы они все-таки подходят к кому-то скажем так к верхней границе своей аудитории и следующим логичным шагом как мне кажется будет какое-то объединение всех сетей каким-то единым протоколом которые позволили звонить например со skype в одноклассники с ваться по skype и так далее как вы видите случится ли это ближнем будущем будет мой ответ не случится я помню джампер xmpp вот это вот все когда мы все хотели видеть универсальный messenger до ровно такая же задача универсальный массажер который может общаться со всеми другими маслами по общему протоколу вот этот вот та уникальность мессенджеров что один более быстрый там другой более надежно еще что то оно достигается за счет разницы протоколов это первая часть 2 все-таки они между собой конкурируют и они не пойдут навстречу друг другу что из одного массажера можно будет позвонить другой ну если это конечно мастер не принадлежат там одной группе компании и так далее поэтому я думаю этого никогда не произойдет то есть даже в рапорте seo secu и вот sopa несовместим с чистым в партесь и которые используются в браузера chrome и не друг с другом уже не работают тем не менее если выгоды от внедрения будет выше для всех участников как мне кажется разработать общий протокол это вполне осуществимая задача когда выгодно за единение да он в принципе есть в партии он плох но он тот самый общий стандартизированный протокол на которой бы все могли переехать все равно все пользуются какими-то частями и for коми его так или иначе спасибо я вижу здесь была просто вас не слышно 1 раз спасибо за доклад просто поводу сетей вот используете ли вы как-то крашеный трафик метки косо помогает ли это как-то вообще нести смысл видеотрафика как они должны помогать только если мы с каким-то оператором про что-то договоримся или что вы имеете виду ну вообще то есть если вы допустим граффити свой график и и потом допустим как то это помогает нет вот в общем случае без договоренности с оператором а зачем мне его красить если я собираю всю статистику на конечном устройстве я полностью знаю венгер ттп get loose и какой потерял сколько за интервал времени постоянно собираюсь что мне дошло возможно если внутри есть если поставить метки он где-то будет приватизируется по-другому между всеми операторами флаги косы имя так всегда сбрасываются на стыке операторов никто не пробрасывать вот даже помните telegram какой-то хитрый порт использовал утверждая что он будет приоритизировать а где-то если в каких-то операторах кто-то забыл что-то где-то его настроить и придет почти нигде не работает то есть я разговаривал с операторами на любом стыки между операторами всю про реализацию пакетов они всегда сбрасывают то есть это прям вот ну в надежде на какую-то бабу 1 из 100 какой-то маленький оператор может опрокинуть то есть нет смысла но если вы не купили это у этого оператора есть у меня такое возможно наивный немного вопрос значит если у пользователя теряется connect то есть картинка там качество падать еще что то то начинает запрашивать опорный кадры правильно но если при подключении забросит опорный кадр на и энлиль и начала восстановления пера тоже идет естественно как начинает восстанавливаться он просит опорный кадр вот у меня вопрос и он его к просит у источника но при этом входит через какой-то сервер у меня вот но я так понимаю что этот же опорный кадр есть у его соседей возможно вот просто у меня возникла фантазия что может быть имеет смысл его как-то очень коротенькое кэшировать и последнее опорный кадрах на сервере если в этом смысл может быть совсем глупость какая то что то вот такое ну можно если получаешь что для высокого кач для повышения качества сервиса мы микса валя систему тип and mixing и централизованной нарезки видео да то вы можете в принципе действительно в данном случае получать картинку сервера и хранить например парочку пир connection of к соседям то есть и папа миксовать не тот самый не вот central айсинг mixtape на миксовать мышь еще к этому всему добавить и скорее всего да это будет работать лучше если кто-то из них будет рядом то есть если померить пинге найти ближайшего и тогда может быть будет быстрее забрали то есть как то так то как то так вот там complexity помните график такой вот он растет растет и вот еще чуть чуть лучше но уже очень сложно вот это где-то в той зоне ладно спасибо хорошо и вот возможно заговорить еще раз привет я наверное сейчас услышал тоже такую вещь думал сначала не спрашивает провод к краске опорный кадр не провали разделить опорные кадры по тисе пи все остальные пою т.п. зачем порно а зачем а представь нас маркер и он как бы на нем строится круга вообще картинку сама важно да предположим у нас есть два потоп 2 connection а один типичный другой и типичный и в этом типе что у нас пропал пакет он и вот омбре транс minetit пошел там его доставать у вас уже все div и приехали опорника все нету и нету и возможно вам уже все к этому времени будет не нужна а в тисе пи есть еще проблема что вы отказаться не можете от него то есть если он уже его в буфер засунул в соке тный то эти хиппи будет из операционной системы отчаянно варит трансмиссии вы не можете сказать сервер слушая вообще уже все за frozen давай мне все новое я уже пофигу вот здесь у вас никаких шансов там выбраться не будет то есть проще просто образно говоря я пару секунд кадр потерять но потом восстановить общую картину да так как лейкен си вам нужно меньше чем полсекунды форзиции получать данные более старые чем пол секунды во мне интересно вы показывали такую классную вещь то что как бы показывать видео одновременно 100 пользователь на мобильное устройство не имеет смысла поэтому если допустим показываете то показывать определенный слайд-шоу с аудио вы делаете то же самое или вы постоянно шлете стримингом аудио аудио мы пихаем стримы только тех кто говорит те которые не молчат ну может быть на самом деле я в этом еще чуть-чуть сэкономил на слайдах у нас в случае если клиент кого-то выбирает фокусе до управляет потоком кого он хочет смотреть он посылает на сервер команду что ему нужно поменять паритет и вот этот сейчас находится в фокусе и тогда приоритеты меняются в упаковке кадров и у вас вот этот человек знает о качественном а эти все менее а вот эти вот вопрос про то как понять пользователь качественными поставим всю ситуацию что у человека просто правильно запущен какой-то процесс который режет ему канал но просто физически он становится low low quality каналам и как вы определяете то есть час уже хороший бренд вечернего или нет исключением того чтобы ему там покидаете feed for пакеты это пожизненное наберется нет это не пожизненно эта величина которая постоянно проверяется идея такая на gdp вы поддерживаете все время к это определенный пакет лосс вы для себя говорить эти popotitos полпроцента это норм если у вас пакет лосс меньше чем полпроцента вы начинаете пробовать промерять если у вас пакет лосс больше там пять десять процентов и наоборот понижаете есть какая-то граница в которой вы живете не повышая не понижая если у вас есть какой то вот там при один процент порядка вот такой вы ушли в границу все хорошо давайте повысим спасибо большое ну что было не так много людей которые спрашивали наверное знаешь кого лучше вопрос ребят до в качестве награды себя шкаф тубулин да вполне возможно и свой царский подарок питерский питерский каторг яркому команду от сердца ну ладно мужчина которая задал больше всех вопросов ходи как тебя , которые были коварными вам надо регаться круг света зайти вот под камеру давай как тебе сзади работаешь почему то все это прошу меня зовут антон я из команды зверь тех альберди войсез и мы занимаемся немножко другими вещами но я считаю что для будущей нашего продукта вопрос о том что так передавать видео вообще стремились достаточно важен добавьте звонки к чатам это все та же на думаю в будущем это будет возможно спасибо огромное спасибо всем кто то сидел"
}