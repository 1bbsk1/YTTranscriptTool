{
  "video_id": "r4xRpN1GUjM",
  "channel": "HighLoadChannel",
  "title": "Интервью с Олегом Литвиным (Сбермаркет)",
  "views": 469,
  "duration": 1467,
  "published": "2021-10-04T02:44:27-07:00",
  "text": "и вот мы снова с вами на конференции highload и мы здесь находимся на стенде сбер маркета вместе со мной олег олег здравствуй хорошая шутка я согласен олег а скажи пожалуйста вот сбер market и это вообще ну не простой продукт ну то есть они такое я бы сказал как некотором смысле интегратор такой вот большой большого количества разных других продуктов от расскажи немножко как как супермаркет ну ты устроен но смотрите как бы мы делаем по сути платформу то есть то что пользователи видят когда звонит на сайт это как бы только frontend сайта вот внутри вращаясь еще целый куча сервисов в первую очередь это наши бренды которые обеспечивают работу приложения для сборщиков то есть это весь наш и сапплай сборку заказав их доставку работу там с отменными заменами вот это такая ну операционная часть бизнеса вот отдельные системы которые позволяют нам управлять нашим огромным штатам сборщиков и как бы курьеров то есть я не уверен что есть смогу рассказал раскрывать точные цифры по их количество но это нас не очень интересует мы общем мы понимаем на самом деле что сбер market это большой продукты и на рынке присутствует очень давно и кстати некоторые некоторые думают о том что вот сбер market начал развиваться вот как продукт только вот именно в пандемию а на самом деле у него же большая история и раньше это был другой продукт да действительно компания вообще начиналось как маленький стартап и стали часто в 2013 года вот и мы там на протяжении многих лет как бы развивали нашу инфраструктуру нашу экспертизу во всех там процессах устроили там имели pipeline и систему которая позволяет сейчас скажем предлагать компаниям рынка услуги потом продвижению товаров в общем ну очень не только по продаже продуктов вот но мы там также тесно работаем с ритейлерами предлагаем сервисы для ритейлеров то есть чтобы это аналитика в первую очередь продаж аналитика потом профилям пользователей в общем разве такие штуки которые ритейлерам мои же компания позволяют в том числе развивать их бизнес осушать а вот ты же работает уже больше больше пяти лет да я такой данная да вообще как если компания с 13-го года развивается понятно что есть какое-то legacy ну как когда мы говорим что накоплен какой-то опыт и тоже всегда мы говорим про legacy в некотором смысле а как вы работаете вот с этой истории потому что понятно взрывной рост в любом стартапе это говорит о том что нагрузки колоссальный выросла особенно в пандемию я думаю что здесь реальность скачок был какой-то такой рост очень сильный а вот как это сказывается на поддержку старого кода как поддержку старых решений вообще что вы делаете в этом направлении да давайте расскажу то есть как бы супермаркет и вот он с 2013 года развивался как фактически это был один сервис написанный на ruby on rails на руках данный руках да и в принципе как бы сейчас но мы его называем нежно аналитик вот до сих пор собственно все core сервисы они работают в нем на нем развернутые вот и принципе ну я не могу сказать что мы вот именно взрывного роста испытывали с этим подходом там много проблем то есть для нас это решение отлично работало вот но конечно когда случилась пандемия все селин изоляцию и нас пошла волна заказов вот мы там фактически весь прошлые там март тушили пожары потому что там все горело и полыхало горел и пол халатом основная верно проблема была такая что мы уперлись базу а что вы использовали мы использовали до сих пор используем мастику мы как-то так сказать модифицировали ну мы там в какой-то момент там может быть чуть чуть попозже об этом и говорим у нас на данный момент вся инфраструктура про продавая развернута в яндекс облаке вот и на тот момент когда началась пандемия мы использовали собственную собственно инсталляцию на сиквел а вот но в какой-то момент нам там в общем помогли коллеги мы переехали на менеджер решения от яндекса вот сейчас с общим используем и их инсталляцию насколько я знаю там рекламный сервер вот есть мы ну в общем всю пандемию мы фактически вот наш монолит масштабировать в общем реплицирования базы вот там бата на данный момент она не сортированная это наверное сейчас является самое узкое место с туда сам большим челленджем да то есть как бы все осалил основные оптимизации они как бы связано с этим вот но как раз опять же у нас пандемией большой рост совпали с ростом бизнеса и с ростом команды разработки вы можете бирюли команда разработки и мы какой-то момент мы поняли что вот как раз где-то наверно в марте прошлого года о том что и организационно и технически наши вот вас какая-то прям трансформации внутри идет вы поняли что решение с монолитом она уже нас просто не устраивать мы не можем развивать бизнес как бы на этом вот поэтому приняли решение что мы должны все новые сервисы начали уже писать вне монолита то есть мы решили микро террасный помни про сервисный подхват дозировать след слушай начались такие подожди а вот первый какие цели вы выбрали вот-вот для вот этого от от почкования но мы как бы для начала начали ну скажем the kinks коринфа структурные сервисы и которые там со слабо требует слабой интеграции с основным монолитом то есть где по бизнес-процессам код и функционал не связаны с монолитом вот есть мы там вынесли конкретную систему где создает контент вы если там ну вот как раз у детей from сирии сервисы для по бизнес дамиром у слона жена начала интересно кстати история потому что то что ты говорил о том что у вас есть отдельно сборщики отдельно ниже всех разные интерфейсы суть ударом удар а вот и сейчас собственно мы к такому же следующем шагу приступили и начали начинаю выносить корт сервисы как раз такой самые наверное сервисом и сложный этап потому что наиболее больно это все будет понятно теперь вы приблизились само имя катки где она сама сама бизнес пользу это и рождается собственно говоря у вашего сервиса тоже очень интересно а как внутри вот эта вот трансформация происходит потому что она же требует не только вот работы с выделением какие-то сервисов она же и трансформации команды некоторые требует да то есть мы но изначально мы как бы просто приняли решение о том что мы будем сервису носить и особо над как бы выбором там ну технологией то есть ну понятно были некоторые ограничения но мы особо не ограничили команды его сейчас мы пришли к тому что ну в принципе основная технология для новых сервисов и того лэнг вот то есть мы активно используйте года соответственно мы сейчас нанимаем команды нога и активно еще перекручиваем текущей команды то есть у нас уже несколько треков обучения для наших команд рубишь иных прошло мое очень всех у чего вот сейчас немножко в сторону отойдем вот этот вопрос обучение передача вот этой некоторые экспертизы в том числе новому языку на платформе брошу все же по другому обще абсолютно а вы пользуетесь какими-то внешними внешне экспертизой ли вы внутренних специалистов по подготовке и переподготовке используют для переподготовки у нас есть как бы внутри такое скажем внутри компании институт менторства вот и у нас там есть в принципе люди которые готовы ли которые помогают им разработчикам которые хотят сам войти в этот технологический стык ночь над какими-то вопросами что касается ну именно такого центрального подхода к подготовке там и внешние внешне помощь пользуемся у нас там есть ментор и тренеры и снова снаружи нарушит а тогда соответственно еще есть еще чуть глубже капнем туда ну что выучить язык но этого недостаточно для того чтобы production хайло конечно выпускать это прям ну разного рода задачи на самом деле и вот а где вы покупаете вот эту экспертизу вы ее как-то наращиваете внутри или есть возможность где ты это же снаружи приобрести хорошие на самом деле вопрос ну по факту у нас просто есть ну мы почему еще выбрали go потому что у нас в команде были люди с очень сильно экспертизой в языке вот и плюсы удалось на рынке действительно тоже сильных разработчиков найти вот у нас в принципе ну как мне кажется очень именно с ну сильный снежный культуры в команде ему это хорошо да очень много реально крутых специалистов вот поэтому unut ответ на такое что конечно нас еще на голой ольги именно по-настоящему таких файлов сервисов еще нет вот новый очень большие экспертизы и сейчас вот мы как раз нам 1 1 запуске готовим у вас сильно растет команда до команда у нас вы в июне просто так здесь уже присутствует ага да команда выросла ну просто какими-то нереальными темпами у нас еду и я щас там по цифрам конечно ошибусь немножечко не думаю что больше чем на 50 процентов оно у нас там буквально еще где-то полтора год назад была в команде 20 разработчиков вот имя разработчиков в киндеров их на тренеров год а сейчас я думаю это уже больше 200 то есть мы больше чем в 10 раз выросли по разработчикам я прям солидно да это еще огромная было трансформациями на как бы самой командой как его организовать как перестроить процессы то есть об этом буквально на ходу колеса меняли автомобили самолет летит а мы его строим да ну как бы было сложно но я честно говоря тоже нет ну не верил мне кажется самым внутри что мы с этим справимся но по факту а вот слушайте когда упомянул историю что вы ну сейчас используйте сервисы яндекса noindex топ лотом виду в том числе managed services редактор и как вообще вот с этим вот с этой трансформация который внутри делаете как поменялся процесс тепло и например потому что это же тоже как бы очень связана история уже микро сервисы это не тоже самое что монолитное приложение выкатить да это тоже хороший вопрос ну мы на самом деле мы начали к этому готовиться ну уже довольно давно . мы мне кажется тоже где то год назад даже больше как раз наши монолитные решение начали готовить к приезду в кубер вот мы там полностью автоматизировали все pipeline и через гид лап вот построили nu'est эйджинг окружении в кубе ри то есть научились атмана ли запускать купер над все встречи никита есть там соответственно каждый каждая фича она разорваться в отдельные ветки и на каждый mr поднимается ну свой namespace в q бери вот там полностью рабочее окружение разворачиваться можно все тестить можно там потрясите какие-то интеграции с другими сервисами вот соответственно там все новый сервис которым мы начали разрабатывать они изначально ну рассчитывается то что не будут запускаться в cabernet всех вот мы там - кудрин этот индекс облака используем и соответственно там все все новые сервис они очень тесно с ним интегрированный вот плюс мы сейчас разрабатываем свою платформу для микро сервисов просто так называемый вот эти то такая будет ну расскажи подробнее да как эта страна это и утилита называется sbm beerмаркет силой вот соответственно она позволяет вам во-первых генерировать шаблоны для микро сервисов то есть там сразу вы получаете но девиз паз и это микро сервис в праге за четыре минуты такой скелет он условно говоря про просто сервис условно да то есть там генерится скелет сервиса к нему сразу идет вся обвязка мониторинг логирование trace и интеграция там автоматически заводится базы поднимается создает проекция в тепла by namespace убери то есть у вас все там стрижек прот окружении создается вот плюс там есть такой небольшой огромной автоматизация конечно это года дабы классический devops процесса у нас там боишься железы но по-моему там три или четыре команды работают это большой ресурс на это выделен вот для того чтобы как раз качественно делать эту инфраструктуру чтобы разработчики как раз смогли очень быстро включаться и какой-то бизнес функционал на этом разрабатывается уже ну вот это вот там ту market новой функциональности он конечно это всегда бизнес очень любит хотят чтобы как можно как можно меньше времени занимала мы вот придумали и все их нужно нужно же быстрее докатить это вот вопрос часто ли возникают ситуации когда нужно наоборот сделать историю откатить в обратно что-то выкатили и поняли что у какой не микро сервис леди во блин надо все вернуть верни афгане назад да ну бывает но это скорее как бы какие то ну довольно редкий случай мы считаем что это инцидент как правило вот но у нас на самом деле сейчас очень редко происходит потому что в принципе мы построили процесс так что там любой новый функционал он как бы скажем релиз и тепло это не связанные с 1 а мы сначала что-то диплом под фичи флагами это запускаем мы можем это платформ это позволяет носом есть решение мы проводим apts ты выкатываем функционал там на какую-то ограниченную аудиторию что можно на 5 процентов пользователей только там на какую-то группу пользователей скажем наиболее лояльных сервису процессе на них новых функционала и только потом его раскатываем поэтому сейчас это но такого практически не встречается ты прямо бальзам на душу офисе флаги и вот это все это прям вот я немножечко вернемся назад ты говорил о том что вы активно используйте менеджер обернуть с решения я знаю что есть некоторые люди которые до сих пор кубер нитью относятся очень ну знаешь такое с таким но таким с настороженностью что это типа небезопасно что это лучше все руками там регистрировать вот твое мнение по этому поводу ну как бы не не не хочу спорить с людьми которые предпочитают ручки подход тем более новому времени когда сама нравится когда ты как внутри понимаешь как у тебя всё под капотом крутится как вся инфраструктура устроено вот но масштабе вот любое вот это решение которое позволяет себе сделать автоматизацию полную получить интроспекцией у того что тебя происходит на продакшене гибкого всем этим управлять то есть когда у вас там не знаю ну реально вы там ожидаете какую-то маркетинговую активность или это там к это черной пятницы вам надо ну вот банальный пример я хожу на 5 захотел при том в конце перейти и нужно развернуть эту инфраструктуру то есть гибкая спилить наверх и потом там сворачивается но это очень важно плюс у нас история с купер нету самые очень активно еще используем для команды аналитики мы из команды то есть там панели иногда требуется но очень большие вычислительной мощности развернуть чтобы какие-то эксперименты или какие-то модель обучить требует развернуть очень большую большую структуру которая но она стоит очень дорого и мы там можем и буквально одним днем поднять и потом точно так же и свернуть на выходных например с келли вниз вот и ну это как бы это очень удобно вот все-таки месяц инфраструктур описаны в коде как бы когда когда на тебя просто в тепла pipeline также интегрирована это просто круто ну а . в качестве инструментов и только гид лап используйте и еще там пару конечно российским все пантера формой да мы там активная и ну там не знаю стоит ли туда глубоко об этом подсказку то есть там и и фильмы и вверх там все все все эти решения то мы используем ту же а с другой стороны ты вот интересный момент поднял что когда вы поднимаете вот новый микро сервис вы сразу туда закладываете историю связанность мониторинг каждом используется для мониторинга потому что для highload нагрузки мониторинг того что происходит у тебя в системе особенно в которой ты масштабирует вверх иногда вниз это очень важно да что используйте какие инструменты и как вы на это смотрите ну кажется на текущего ряда тоже довольно дефолтный стек то есть мы используем пробитой us вот для сбора метрик вот и используйте стоять на графа ну для визуализации для построения дашбордов вот плюс мы довольно тесно сейчас как раз наш пас интегрировали со всей этой историей то есть вы когда разворачивайте новый сервис в автоматом к нему получаете дашборд в купер нету со всеми ой извините игра парни и да со всеми техническими метриками то есть там и request и памяти в общем все всех тел выводится вот плюс можете соответственно добавлять свои бизнесовые метрики исхода вод суши а вот с этой точки зрения тоже интересный момент вот данные которые вот от текущей нагрузки есть мудрость блоге я говорю налоги понятно что в оперативном управлении там что-то у вас используется потому что такие до инциденте под разобрать новых куда-то складируете чтобы потом можно было ретроспективного анализировать да у нас соответственно логии так же стандартные решения белка стык используем власти каменная ластик да вот и там я сейчас не могу сказать это было из коробки интеграция или ну мы и там сами по себе делали но в общем у нас слуги они хранятся ну в активной логе за три месяца вот и все что тоже трех месяцев складывается просто найс 3 вот она также по кнопке мы можем это обратно поступили забери обои за что можно были как основной инцидента с безопасностью и мы там для того чтоб ретроспективно исследовать что же произошло у нас был был случай там кнопку большой злой а брат кажется что из 3 здесь прям общее местом огромное количество людей используют именно ну уже ну вот мы в целом посмотрели такой вот обзор и сервисов и технологии и вот чтобы тебе вот как ну условно тимлида так у тех лилит в некотором смысле он над своей командой вот чтобы ты захотел сейчас нового принести в команду вот что тебе хочется в ближайшее время новенького не то что вот ты понимаешь что вот сейчас у тебя есть люди уже что-то делается но вот одним глазом на что-то новенькое смотришь что такое лода можно подтянуть ну имя не сказать что это прям наверное новенькая в принципе для вас 0 до имени для всей индустрии с донатом в частности вот наша команда когда при этом представляю мы как раз нам разработать разрабатываем сейчас изм из монолита выносим скажем часть которая занимается ну очень надо отвечать за подготовку данных для отображения каталога вот и там есть такая интересная задача то есть когда у вас количество обновления данных примерно равно вокалисту чтение данных то есть данные очень оперативно обновляются вот и мы как бы сейчас понимаем что те технологии которые сейчас используют у нас есть там стандартно штык не очень там есть скажем подходящее решение для решения задачи очень дипломатично такого обходишь я понял хорошо но соответственно мы хотим сейчас попробовать почистить там и тарантул здесь недалеко потенции и aerospike хотим попробовать посмотрел на гарри счет в этой теме космос посмотреть на такие memory даты гряды чтобы в общем посмотреть потому что на там нашем текущем статьи повторюсь задача довольно так себе решается хорошо я понял с уже вы нанимаете людей скорее всего здесь можно прийти на стенд верно пообщаться более подробно за эту тематику я думаю можно тебя опять же ловить все два дня здесь на конференции задавать тебе вопросы вот скажи если что-то что ты как профессионал сейчас читаешь активно ну то есть понятно что есть ну понятно нужно про купить что-то почитать нужно по security по безопасности почитается нужно по базам данных почитайте понимаю что всегда чего почитать всегда больше чем чем времени вот есть что-то ты такой прям вот прямо сейчас на полочке прямо так сказать или там на рабочем столе лежит да я тебе сейчас две книжки параллельно вот не хочу как-бы чтобы кого ты там неправильное впечатление сложилось очень первая книжка этапа я название запамятовал это со почему серьги от google сайт убить джедая сам в общем активно пытаемся сейчас как раз менять процесса и подходы которые мы используем именно для поддержания стабильности работы production вот много идея туда черпаем вот и вторая книга это мартина лепка на дизайнер дата интенции publications хорошо прямо справа не приму ха ха хороший такой вот и дождались и два года назад активно меня на самом деле это очень круто по поводу и сырья и тоже интересный момент нужно же понимать что вот есть devops процессы они очень тесно связаны именно с разработкой среди это такой чистый abs поддержка вот уже с той стороны года у тебя прям совсем всех продакшене и тебе нужно активно влиять на то что у тебя уже выкатили так и в работе находится как у вас вообще устроено вот эта часть работы вас отдельно выделены сергей инженеры ну нам в классическом понимании системные администраторы ли у вас какая-то система здесь да тут на самом деле такой уж сложный вопрос потому что как раз эта часть на наверное ну и за роста команды в наибольшем час движение находится потому что мы там не всегда успеваем как бы во всех командах нужные компетенции скажем обеспечу по поводу компетенции кстати если здесь есть кстати на конференции сергей инженеры то вы подходите здесь можно будет этом понимаю что demax инженеры это такое не совсем протоссами но в любом случае здесь на стенде супермаркет можно подходить коллегам разговаривать про технологии про изменения процессов проецируя думаю что здесь коллеги готовы выслушать ваш опыт и мне кажется это будет интересно а мы с вами будем прощаться и встречи уже позже всем спасибо спасибо"
}