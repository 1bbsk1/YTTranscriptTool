{
  "video_id": "BEZKub1BYCE",
  "channel": "HighLoadChannel",
  "title": "Нормально делай - нормально будет / Карен Товмасян (Newmotion)",
  "views": 1945,
  "duration": 2828,
  "published": "2020-04-14T11:06:15-07:00",
  "text": "ну давайте начинать у меня сразу вопрос кто работать с публичным облаком отлично кто работает с публичным облакам от амазона кому хорошо спится по ночам обратите внимание что подняли руки кто хорошо спи те кто не работает с amazon не так окей значит немножко о себе меня зовут карен то в массе они работы в компании не мужчин мы занимаемся развитием индустрии инфраструктура электромобилей я занимаю должности инженера облачник а собственно по amazon у и у меня целых три а совершает сертификации на протяжении последних 9 8 лет я занимаюсь тем что то еще все из одного места в другое я начинал с nortel pbx нацистской усем потом это были миграции базы данных потом с 14 года я начинаю же тащить в облако и 16 года я тащу все в amazon иногда успешно иногда не очень но это уже тема другого разговора о чем будем говорить мы берём на себя роль маленького мальчика или девочка инженеры которого недавно взяли на работу инженера amazon щека мы посмотрим что он увидит в первое время или она и какие проблемы с какими проблемами он будет сталкиваться как он будет их решать и как потом он будет делать все нормально чтобы спать хорошо и когда он поймет как делать нормально он будет смотрите как делать еще лучше чего не будет так это нибудь серебряной пули почему потому что amazon за сто шестьдесят с лишним сервисов и решить одну задачу можно миллионом способов из которых миллион первое это шикарный способ после себе ногу вышли на работу нам устроили он boarding нам дали классный ноутбук далее с какой-то корпоративный срок readonly аккаунт в amazon и в общем то с таким прекрасным лицом мы начинаем ковыряться в нашем аккаунте изучаем как организована безопасность как развернуты ресурсы как развернуты сетевой стояк и прочее прочее какие практики как разворачивается руками не руками числа от фар машины литера форм сделаемся записи изучаем запоминаем и на следующий день видим выглядим уже вот так вместо того чтобы с позитивом роли видим и переключи на машине разработчики катятся продакшен и срут а вместо того чтобы делать нормальный лицкевич принципов виден вырываем полисе я стрелял карт на все ресурсы почему ты еще в роли вы для web application firewall это не могу сказать что это то с чем не сталкивается день но я повидал всякого и прежде чем мы продолжим надо понимать очень зачем нанимать дома зайчиков ситуация бывает до первой ситуации это когда компания расширяется и и нужен новый инженер все-все процесс наложено всего хорошего другая ситуация когда человека нанимать чтобы либо мигрировать в облако либо довести его до ума ну как происходит со мной и когда вы приходите на такое адаптационный либо миграционный проекта чаще всего видите очень страшные вещи поэтому чтобы понять сначала как это решать надо выбить хотя бы провести какую-то сначала композицию проблем выделив 3 глава 1 это соответственно безопасности насосались привлечь принципу если удалить рутовые ключей и переключи это дело двух минут то наладить правильную безопасность очень сложно потому что надо понимать о чем вообще лиц привел в principal это означает что у некого and эти будь то человек или мда функции счету инстансы проще есть ровно тот набор прав который нужен для своем нормальная функционеры и не больше или а за такое сразу с наскоку довольно тяжело вторая проблема это не эффективное использование ресурсов который выливается в проблем 1 то что нас есть толстые машины которые спроса на 2 процента и вместе это просто машина нас появляется не менее толстый счет и потом возникают проблемы третья проблема это ресурс созданный че за vs консоли то в принципе довольно большая проблема я встречу слайдах объясню почему палец принципу принц ситуация следующая то есть опять же что такой лист привел principal у некого ресурса или and ati есть возможность сделать то что ему нужно и ни капельки больше слева что мы видим да у нас есть некая полисе которая делает два действия может делать два действия она может читать объект она может положить объект или обновить объект и она может оделась пределах конкретной bucket некоторые люди в спешке делаю то что происходит справа не разбираясь что и как дает полный доступ на с3 и мы видим еще и что ресурс у нас указом вольска то есть это не только даже на все баки отдел что sculpey а вызова ганча только и ps3 но ресурс при этом доступны все есть аудит baked какой-то разработчик может туда пойти все объекты убить как это решается двумя способами первый способ это метод обезьянки он чаще всего используется когда все очень плохо и нужно начинать это дело пилить берем приложение либо вдм в ремонте либо в тестовом варианте отбираем у него все права абсолютно я случае если это либо legacy либо мы не знаем что он вообще внутри под капотом делает и нет времени разбираться и через либо динкой амазонский эксепшен и стиле user бла-бла-бла из note 2 супер форм бла-бла-бла на ресурс бла-бла-бла уже понимаешь окей значит он пытался сделать что-то у него не получилось зачем нужен доступ на это ресурспаки и вот так вот поступить что пока приложенном они функционируют но это такой болезненный способ потому что я сидел с такой прям сразу насколько на продакшн а если из получить downtime поэтому по уму над сначала разбираться что делал приложений что оно должно делать вторая проблема это неэффективные расходы то есть что происходит приходит человек через консоль к все быстренько поднимает думаю такой так у меня наверно здесь pandas поэтому не нужен сайте поки так и будем делать и в итоге становится таким объектом для шуток как это решается решается тем что в первую очередь надо рассчитывать прогнозирует нагрузку в amazon евро по крайней мере вы святой есть целые семьи разные семейства инстансов до который кто-то имеет преимущества по быструю сетку кого-то более быстрой памяти ли больше объема памяти у кого-то быстро типу если мы не знаем вообще что наше приложение должно делать какие мощности им нужно берем нам типы не паримся когда понимаем что этот тип не решает нужную поставленную задачу имеет смысл уже попробовать другой тип и здесь краевой краеугольный камень заключать в том что допустим мы используем badge бы да это задание запусками по расписанию который отрабатывает какое-то время за то время когда не отрабатывает платить за ресурс если вы взяли возьмите м тип которые от работы за 15 минут вы платите там за mt 15 минут столько-то денег но если взять например какой нибудь тип c который отработает за две минуты вы заплатите да там по часовой ставка будет чуть больше но в итоге вы сэкономите денег поэтому надо аккуратно выбирать тип инсов второй момент это масштабирование его называю по лучшим практикам amazon имеет смысл делать горизонтальное масштабирование вертикально масштабируем процесс долгий и не всегда эффективны и у вас есть какой-то кластер из машин допустим обслуживающий там фронт entire использовать стан пусть бт-5 large не хватает на не хватает ресурсы чтобы обрабатывать повышение коли клиентских запросов люди по незнанию начинает увеличивать размер потом как поток пользователь почему-то начинает падать и получаем не не до конца используем утилизируем ую машину поэтому вместо этого имеет смысл докинз при этом за счет такой прекрасной штуки как спад флит собственно отсюда и следующий пункт люди по незнанию использует on demand почему потому что я не знаю какая машина мне будет нужно я не хочу разбираться с резервированием я щас куплю дизер и на три года и у меня там через год я решу что мне нужен другой тип desert essence of самое такое оптимальное решение по лом которым commitment у то есть мы знаем что у нас есть такой-то тир он будет жить на таком-то стыке на таких-то ресурсов давайте то виртуальных машинах и мы знаем что так будет год и отсюда возникает второй вопрос да что если через полгода мы поймем что конкретно этот тип искусно не подходит тогда мы думаем что окей rise of tanks брать не хочу его потом надо продавать его никто не покупает у амазона есть конвертируемый resorts а это означает что если вы купили допустим 3 large то вы можете используя как на 1 т 3 large так и допустим на 20 medium на 4 ted уснул там на 8 тату майка и так далее то есть это конвертируется на он позволяет не продавать и не покупать по новой так далее но самые хардкорные ребята используют спад и при этом спад и дают гораздо большую экономию и если аккуратно научиться играть со термином полисе когда он приходит отбивка что дружок я сейчас подберу тебя машиной убью ее вы можете поднимать например даже отказоустойчивый кластер мозеса автоматизировать там какой-то крон пробой там 1 минуту забегать в помета дать и узнавать когда у машину собирать стир минировать за это время вы ее вытаскиваете из кластеры и там поднимать и новые чтобы уменьшить геморрой при работе с таким со спотами есть такая штука как под флит то есть вы в принципе счету флит вы говорите о кей у меня есть авторский 1 группа в ней допустим 10 узлов вы можете сказать там два из этих я хочу призер оставшиеся восемь паспортом тогда вы имеете вот эту самым дешевизну но при этом знать что два узла которую вас есть они всегда будут и они будут обеспечивать какую-то нагрузку и наконец третий боль значит в чем проблема амазонской консоли амазонская консоль позволяет создать необходимыми необходимо поднять необходимые сервисы поднять необходимые ресурсы за сравнительно короткое время всего-то в пару кликов микс npc's на финиш что получается что когда мы что-то создающая за масонскую консоль она за собой тянет много всего то есть поднимаясь и туристов нажимая бездумных снасть финишем параллелями bios волюма который мы можем не знать а если мы там решили что мы хотим еще и без полем думаю что он будет рута вам в итоге остается еще один на котором мы на котором мы даже не просили параллельно создается security группа который называется прекрасном словно уж вы сортира 1 2 3 5 10 и так далее с дефолта вaм правами на все сайды range на 22 порта мир очень много всего делается под капотом мы об этом не знаем и в итоге мы не знаем чему собственно работаем вот например давайте так кто знает по такой штука кодификатор зону доступность поднимите руки пожалуйста а кто знает то что идентификатор зоны доступности скажем так у вас есть аккаунт вы видите и мезоны доступности у вас есть другой аккаунт у него есть такое же имя зон доступности там есть один а это одинаковые зоны доступности или нет поднимите руку вот вот город с ромой разговорили на эту тему есть имя зон доступности и есть идентификатор звон доступности и в отличие от имени идентификатор всегда статичный а вот и лизун доступности от аккаунта к аккаунту разница если у вас в одном аккаунте если ст-1 a ссылается на какой-то один физически азотом или группу а за по-другому account это будет другая а за и когда вы начнете использовать прекрасную систему как ресурс access manager вы словите проблемы когда вы не сможете видеть ресурсы которые вроде как находится в той же зоне доступности и эти вещи они не видны сразу равно как и не видны другие вещи когда есть сервис который в качестве бэг-энда например конфет качестве бэг-энда для столь же использовать s3 мы об этом не знаем пока если мы не знаем там внутреннюю структуру конфига и самое главное в конце что мы не знаем какие собственно право нужно что поднять этот необходимость так не знаю какие права нужны этим ресурсом этим сервисом чтобы работать с другими пим амазонских сервисов в итоге почему приходим да там мы можем потратить время на изучение документации либо мы поедем на амазонский саммиты посмотрим как собственно эксперта amazon это делают и мы приезжаем на саммит и видим точно такую же картину человек либо через консоль либо заранее написанный платформой шин template или service application модель template за пять минут и тоже поднимает всё ребят ведь и за 5 мин все поднялось при этом титанической работы которая была чтобы понять как это запустить разработать стек разработать шаблон она игнорируется и в итоге вы нанимаете либо ним вы либо там какая-то компания нанимает уже обученных экспертов хотя можно было потратить именно самообразование как показы практика курсы экзамена amazon стать гораздо рожицу часовая ставка амазонской эксперт я сейчас говорю про нанимаемых не про амазонских объектов которыми вы общаетесь через вашего аккаунт-менеджер решением этой проблемы только одно не используйте амазонской консоль вообще-то больно это долго но это имеет долга срок это гораздо выгодней и amazon скую консоль надо ставить только для режима readonly либо для какого-то sandbox им вами что вообще понять по подруга сервис руками потому что в консоли на немножко интуитивно понятно разобрались с проблемами теперь давайте делать нормально да там первое что мы делимся с на удаляем рутовый ключей и переключил рута поскольку мы больше не используем консоль нам нужно делать infrastructure скотт кто использовал фармишь поднимите руки раз-два-три-четыре кто бы использовать таро форм ладно кто использован себя для амазона экстремалы пожарим и что сундук как вот принципе не будем гнать про инструменты будем подход сразу скажу вот не вдаваясь дебри стремитесь тому что слева почему потому что если вы делите управление ресурсами amazon и с разработчиками вы спите ему сам образом повышаете их экспертизу в амазоне что очень важно если у вас допустим главное этих приложение во вторых вы делите с ними ответственность и несмотря то что это такой подход которому надо стремиться и он потому что разработчики надо тренировать долга срок это победа но чаще всего у нас получается полнейший деспотии эксплуатации у нас есть набор шаблонов разработанная перед операциями эксплуатации разработчикам удается только параметры то есть у вас есть так допустим какой-то веб тир у него есть of the skin группа там есть тип машины минимальное количество максимальное количество желаемое количество кировской полиции там подсыпал и по сетке прочим разработчику дайте нотку параметры разработчика понимать что что при таком-то количестве запросов ему удобнее обслуживать там ему лучше обслуживает это так запросов там с десятью из с микояном эти параметры прошел code review это все уходит на выходку стандартная разбивка по стыкам работает следующим образом есть какой-то общий стек в общий набор ресурсов пусть будет например сетка какие-то базовые am роли там для для людей чтобы смотреть что происходит на стыке есть application specific стеки да там то есть у вас есть допустим 100 крепись ее внутреннему подсети вы делаете экспорт это и стык приложение через импорт целью подхватывать необходимые ресурсы чтобы там поднимать машины контейнеры для овна функции прочее организовали все красиво давайте вот вопрос залу какие проблемы можем получить когда мы допустим а далее клад формацию на лодку всем все могут доплыть и склад фармишь какие проблемы нас могут вас в этом случае практически такие что просите можете повторить стоимость ok стоимость принимаются какие еще варианты могут грохнуть да какие то еще могут быть да то есть мы поможем получить что зоопарки так понимаю об этом речь как нам это дело отлавливает допустим мы доверяем разработчикам надо виррейна проверяй управление там тем же клад формация нужно делить на два этапа это собственно перед тем как платформа читинский стык ушел production уже поставок же продакшне первый вариант это используется ф м нет связка что линд это не валидатор что делать enter это окон сослужат amazon она разработанным бывшими коллегами school любви совместно сама зонам это система которая проходит по шаблону сравнивая то что в нем указаны с каким-то набором правил которые заранее есть и мы можем еще делать свои правила какие-то да если они не включены по умолчанию это позволяет нам поймать по потенциальных проблем до того как они уж не стоит то есть кто-то например захар коде ловили бизону что делать не надо да там при этом этот цилиндр он поддержит уже по умолчанию лучшей практики ну какие то лучше да и за счет того что мы добавляли литр наши соседи pipe ленту мы уже фарси ну то есть не получится хардкоре заводе бизона или делать какой-то другой мусор но опять же помним это не валидаторы валидатор помимо винтера кроме линкора может еще например посмотреть что у какого-то ресурса нет нужного атрибута который линдер не видят у него нет такого правила но в любом случае надо еще пробовать создавать свои правила и это очень сильно помогает на этом слайде вы видите простейшие правила она делает следующее она проверяет что ресурс задекларированы если тут тип иисуса если турист с задекларированы вклад в машин темп лейте должен иметь при себе при а точеный из нас профиль что соразмерно такой термин как и ям роль если это правило не будет пройдена то есть нету ни стаса роли то мы получаем ошибку что у этого иисуса не при attach на роль в шаблоне но опять же то что показывает этот код до что делает этот он только проверять что есть атрибут и я - profile и в него что-то там записано но при этом он не знаю этот код не увидит там а если вообще такая i am роль но за счет того что свет или написано питоне и остальные правил тоже пишется к нему на питоне мы можем например написать используя амазонского sdk там проверку чтобы она пошла в по амазонские 5 посмотрела если такая роль в принципе и сделать наш сказать наш наши правила литра немного умнее но это первая половина проблем да мы разбираемся с тем чтобы минимум мусора попал в непосредственно в саму нагрузку когда уже имеем дело с непосредственно с развернутыми ресурсами дано смотреть чтобы вообще в аккаунте все творилось хорошо и есть какие-то вещи да где то не написали правил где-то не отслеживаем хорошо надо попросить помощью амазона чтобы помочь сделать все красиво да и amazon и есть приказ серый трассы 2 озер это сервис который по умолчанию идут ко всему аккаунту эту принципе можно отключитесь кому-то надо выбрав нужную нам роль он имеет доступ ко всему аккаунту и он просто смотрит на ресурсы и говорит о'кей дружок у тебя здесь по безопасности например проблема там я не знаю какие то порты закрыты или там какая-то i am роль имеет слишком много или ты упираешься в лимиты по умолчанию у вас есть только security service лимиты если хотите видеть там по оптимизации костров и performs и покупайте поддержку но это опять же это просто сервис советчик он ничего за вас сделать не будет другая штука которая может делать всякие крутые штуки называется конфиг и конфиг как и любой амазонский сервис состоит из 3 частей да это собственное пиво с которым мы коммуницируем или в котором коммуницирует другие сервисы это сторож backend который в случае конфига и ts3 и собственно сама логика конфига что делать конфиг он также имеет доступ ко всему аккаунту если вы правильно сотен будет иметь доступ ко всем аккаунтам внутри организации если используем матерком стрэндже и он содержит историю изменений ресурсов еще слово именно ресурсов и помимо этого мы можем видеть какие колесо у нас не complaint этой компании проверяется через лян доски и правило у амазона богатый богатый набор правил по умолчанию заранее разработанных но нам никто не запрещает писать свои и как уже сказано до пропустил садик извините значит имеется на ваши руки правил но при этом можно писать свои правила и при этом каждое правило это лямда функция которая выполняет какую-то логику который принимает на вход какие-то параметры и конфетки мы говорит о киу менять вот этот ресурс и я хочу проверить его на компасе по такому-то правила по таким-то атрибутом и писать правил самому это довольно трудоемкий процесс нож нужно использовать линда ее надо как-то выкатывать amazon написал open source инструмент названием а войскам фигаро т.к. это ролл development kit это скачиваемый инструмент вы говорите такая ница заговорите рдк crater ул и заранее пишите какой вы хотите runtime и поддержку насколько знать typescript и по моему еще java но я могу ошибаться какой ресурс стив вы хотите проверять и какие им тут параметры вы хотите овать но это не отменяет тот факт что ленту с равно немного подпилить то что сделает рдк он просто создаст необходимый скелет на логику что когда как понять что ресурс complaint или нет надо уже дописывать самому обратите внимание на этот параметр да он называется designs он стоит у майкла да то есть это правило она пологи будет следующим будет смотреть чтобы инстансы которой трек с конфигом имели такой то размер можно добавить туда с места 1 статьи список можно добавить какие другие параметр что там у нее должна быть ям роль или у него должен быть там по цаплиной и без и прочее но помимо этого конфет еще поддержат приказу штуку под названием limitation то есть здорово когда конфиг там говорит что что то не так но нам нужен потом идти и либо числа формация дело выправлять либо разговоры там руками поправлять чего я тоже собственные рекомендую у конфига из limitation то есть на случай если какое-то правило выстреливать не complaint есть ресурс который не сами не удовлетворяет требованиям этого правила может создать через систему simple сервис систем и jetsam может создать такую автоматизацию что ты случай что если у меня правило то не complaint решить вопросы тут тоже нужно через сны документа автомате писать за логику к и он должен сделать на меня тип инстанция убирать там роль при оттачивать роль добавлять авторские группу убирать езовский группы так далее при этом конфиг че за сам может получать информацию об установленных пакетов что очень удобно для например стыков на экосистеме microsoft там чтобы были почти последний установлена дата можем через configure что какие-то почти не установлены еще дальше на 5 их накатить теперь давайте лучших практиков поговорим да там большая практика это то что по сути либо эксперты амазона либо другие эксперты которые давно робуста музыки гуру там партнеры они говорят штуки сама зонам лучше всего работать таким образом и отсюда возникает у пруда как надо работать amazon да вот у меня есть например там икону с платформой и как мне например ее держать к ножу нее и писать накаких сервисов мы каких ресурсах и amazon придумал такую вещь как в лавке так-то фреймворк развили разбив его по сути как исследована занята фреймворка набор практик по которым мы определяем хорошо у нас спроектированы архитектура или плох спроектирую плохо зонт архитектура он поддерживает так называемый стал бы состоит из таких столбов окрашенных санс это про именно вопрос операции как мы эксплуатируем безопасность касается безопасности надежность и эффективность производительность и эффективность расходов но опять же возникает вопрос да там изначально в лавке так строим work это был один pdf документ длиной где-то в 300 страниц потом практик стала все больше и больше больше раньше amazon тащил за тащился мы использовать тур звену инфраструктуру да там в бти игры metal gear telstar о четвертом либо дтп стр сейчас уже amazon актину тащи сервис даже давайте то давайте выбираем иисуса давайте такие серверы то есть прилавки так фрукт уже развивается и опять же возникает угроза как мне понять у меня все по головке такт или нет есть окапи кастрировал arkitekt от ул что он делает это просто опросник безоплатной кстати который мы смотрим отвечаем на вопросы и по ним получаем какие-то рекомендации на базе ответов нас получается некий роду map и выглядят таким вот образом то есть мы заходим во лапки так титул нажимаем да framework лот начинаем забивать название вор клода указываем то какие то необходимо атрибуты описано что у нас будет продакшне production очень интересный момент что можем показать индустрии в который но иисус наша нагрузка работает это помогая тем что если например у нас там финансовые летом здравоохранение что-то еще что имеет более строгие требования безопасности дату рекомендации будут соответствующими когда мы задали нашу нашего клод уже за для параметра тачай начинаем отвечать на вопросы заметить что а в специфик вопросов нету есть просто общие какие-то принятые вопросы например как определяем приоритеты как мы определим потребность клиенту как мы определяем это как мы определяем то и обратим наш состав уже есть какие-то советы да там на каждый вопрос уже заранее дается какие-то советы на которые мы можем пройти по ссылочке изучить некоторые вопросы можно опять же до этого это опросник на честность нет смысла как-то пытаться читерите чтобы вам разыскал у тебя все хорошо потому что amazon не будет проверять они все хорошо или нет амазонские сервис они будут заходить к вам в вашей вор клады и проверять действительно ли все так соответственно цветной в этом путь по adeline сказали раз вы говорите что вы используете сам себя сиди когда вы отвечаете на все вопросы у вас появляется риски сейчас тут видео мне доиграется длиннее получил с чем хотелось бы на базе ответов на вопросы которые кстати в любой момент можем прервать если нет желания 72 часа там отвечать на вопросы его можно прервать и увидим следующее что их какие-то риски да там что мотайте на какое-то количество вопросов нас какие-то риски проходим на риски видим что конкретно по этому столбу есть какой-то вопрос да там что вы ответили так но вот стоит сделать таким вот образом и вы проходите по ссылке сразу попадаете на сайт амазонской документации где он говорит что вот успех вашего бизнеса если это касается да там конкретного вопроса зависит от того как вы там определяете потребности клиентов если там отличались к купировать по безопасности он бы что искать и исследовать комплексе вот у нас есть такой список ресурсов можем паком планете ответить следующий момент это мультиаккаунты тоже кто использует mask понимете руки по рост кто держит все в одном аккаунте а что делать все остальные ладно окей там три руки используют нас три руки используется сингла каныкей значит мы тебя констр-р также означает что у нас наша рабочая нагрузка разбито по нескольким аккаунтом по нескольким amazon узким аккаунтом и это дает нам следующее преимущество can соединенный биллинг понятно да у нас не будешь нас есть аккаунт на мне будет придать 10 отдельных читов-то который тут же через бухгалтерию проводите договориться чтобы на пожалуйста так принято 2 полезность которой на самом деле очень серьезно это управление доступом к и пи пи ай сервисов амазона в пределах самого аккаунта у овец organizations сервис который отвечает за реализацию масс есть такой термин как service control полисе это этакий примешь им boundary который показывает что можно делать в отличие от policy которые можно сказать что можно и если у вас еще есть роль который тоже что-то разрешает есть группы который разрешает полисе накладываются scp закрывает это все и на предел всего аккаунта можно закрыть доступ ру ту то есть вас есть дочерней аккаунт root пользователя есть но зайти к нему нельзя вы говорите такой the entity рут дэна и wildcard и все и это очень полезно потому что кто-то получил там ключики рута и захотела плохими что уже не может возникает вопрос как делить среды как нужно как как разбивать аккаунты как организовывать их и здесь уже самый базовый подход это делим на свету из вас есть аккаунт a production аккаунта тест ракам постоять им как сэндбокс какой то ли dmv и ремонт некоторые используют подход по проектам то есть есть какая-то большая организация у неё там есть несколько департаментов каждый использовать какие-то пишет свои проекты мы для них создаем так называемой organizational unit и внутренним садом аккаунт что проект а.д. проект об тест проекта протон проект б про ты так далее так далее так далее как делить по аккаунт и рекомендации как таковых нету есть общая практика амазона когда что у него есть отдельно аккаунт подойдет ли обезопасить весь отдельно аккаунт подлоге где просто единственный из 3 пакет в который все это пишется и дальше уже вы разбиваете уже как вам удобно по опыту могу сказать что если у вас относительно маленький продукт маленький продукт в котором работает какой стартап где работ ограничено количество идей дату особо разукрашиваться смысла нету да там создаем test daf про ты спокойно себе живем при этом знаем что теста окружена во столько-то денег до в окружении разработчики химическом азовских пока набивают руку столько-то денег продакшен стоит столько-то денег если же у нас допустим такая ситуация на software за сервис модель да и мы поднимаем инфраструктуру под клиента если мы ее поднимая виде отдельного столько ресурсов имеет смысл еще создавать аккаунт под этого пользователя под этого видим бизнес концу мира тогда мы будем знать что конкретно этот бизнес который если на зубе секта до или конкретно этот концу мир стоит нам столько-то денег это поможет принципе позволит договориться несколько его услуги со скукой сколько денег брать за услуг которые представляются масс можно реализовать следующем способами у нас есть core сферы saves organizations а это сервис который создает дочерние аккаунт с арни зашли юнитами и прописывать для себя service control палить из это относительно простой и понятный способ но всем хочется сделать быстренько сразу и хорошо поэтому сначала появился такой solution не сервис solution а в исландии зон это именно решение то есть она есть на портале а в solutions он создает некий секрет сейчас по памяти не скажу скорее всего там создается задаются параметры какие аккаунты поднять далее создается сиди gold line который эти аккаунты выкатывает опять же это solution это не сервис поэтому он из его из плюсов он поддерживает интеграцию с active directory или акты если вам нужен больше кастомизации имеет смысл спортивный газон после этого по-моему в этом тесте на столько раз в этом году на закате control tower делает ровно то же самое чуть по другому и тащит за собой в сингл саймон то есть вместо того чтобы интегрироваться active directory акта если у вас такое использование каким другим один тип провайдером тащиться в сингл canon хотите вы того или нет поэтому если бы эти реализовать масс с нуля до вот я те кто использует один аккаунт или вообще еще не поднимал ничего там и только зарегистрировал зарегистрирую компанию коммерческую на amazon скому а каунти имеет смысл попробуйте и то и другое просто пощупать и посмотреть но опять же отталкивайся от своих потребностей неважно что что советует большие дяди из нужных организаций третий момент это следующий момент сервер лес да там и то это будет не про подбор да именно почему сервисы иногда лучше чем instance блестели там со мобильные сервисы поднятые на и ситу первый момент это что сервис немножко по-другому подходит к оценке стоимости экономики решения если у нас допустим есть кластер манги поднятой на счету который может терпеть столько-то запроса столько-то записи в минут столько то там данных запеченных и нам нужно понять сколько скажем так сколько нашему нашему аккаунту сколько на шар не за сколько нашего инфра стуле стоит допустим один пользователь или одну польское действие тогда мы нам приходится брать общее количество пользователей которые хранят данные в этой базе данных и как прикидывать штуки на этом кластере нам этот пользователь нам один пользуясь итог то пользуйтесь становится больше около 100 размере не увеличивается значит пользуетесь один стоит дешевле количество пользователей падает класс стр остаётся тем же стоимость одной позе становится дороже очень сложно прикидывать если мы представляем какие-то эндрю за решение да там и тарифицируется вода сложно понять дам сколько сколько с него денег просить за эти услуги поэтому расчет оценить решение варьируют в его очень сложно прогнозировать другой стороны сервер лес подразумевает что его стоимость это какое-то действие какое-то время сколько отрабатывает некая операция какой-то один этом хранение данных одно обращение в динамо db одно сообщение в скс и прочее то есть каждая какой тобольске действие если мы понимаем как работает наша программа понимаешь-то ok регистрация пользователя подразумевает что он через а какой-то там статический веб-сайт триггерит лямда функцию которая там я не знаю отправляются sms уведомления которое отправляет сообщение в скс которая потом триггере другую ленту функцию которая потом пишет динамо или делать что-то еще мы понимаем что 1 поиски действия будет стоить там но не за одну тысячную центр есть к нам придет бизнес прайс токи мы собираемся делать pr компанию у нас будет 10 миллионов регистрации завтра сколько нам будет стоить высказать оки одна регистрация стоит там тысячную центр значит 10 миллионов будут стой там не за тысячу центов там долларов математик уже немножко не работает и за счет этого легко я прогнозирую что значит о кейт 100 поезде пришло 100 долларов там было потрачено там тысячи пользу пришла тысяч долларов было потрачено второй момент эксплуатационные издержки то есть здесь нельзя сказать что лучше потому что когда мы говорим про сервис я не знаком вообще существует ли какие-то стандарты разработки без серверных приложений поднимите руки кто не знает учесть такие стандарты например да вот книжка какая-то умная написано естественно стали стоки вот теперь стандарт отработки на линде ну вот я тоже не знаю понимаете и опять же не есть проблемы с базой знаний потому что ну нету какого-то универсального подхода к разработке сервис приложений до есть сервис apple конечно модуль есть какие-то сервисы которые рекомендуются для использования мы хотим разработать и приложение но я не видел ни одной книжки как написать highload приложение там с обслуживание миллионов миллиона рпс на сервер листа на базе лента динамитом и api gate вы и я такой книжки не видел если она есть я буду и кто-то знает я буду рад если поделитесь но с поворотной точки зрения да мы не несем никакой the single line контраста через линды у нас есть линда функция она поднимается в каком-то runtime я которому вообще ничего не знаем и кто-то за неё там отличается что часы на свои покер virtual коки как она поднимается где она понимает нас не интересует нас это не волнует нас интересует только что у нас есть одну не уберемся лимиты если что и что лента должна уметь сделать какие то это вызывающе и это нужно и нужно отвечать только за локи приложений случай senses and bass да у нас большие трудозатраты потому что машин надо выкатывать их нужно почтить их нужно проверять на безопасность да там security апдейта на и нужно управлять их конфигурации смотреть чтобы не попало чего лишнего туда но есть обширная база на нее да там открываем там не знаю best practices пол с квелли видим огромный список чего что можно видим там открываем best practices манга фортом дистрибьютор systems opel видим кучу всего то есть люди уже много всего съели с этими системами и знают как надо благодаря там есть какие-то не может стандарты как реализовывать да там решение такие вот в принципе на этом все я благодарю вас за внимание спасибо большое что пришли и делайте нормально и спите хорошо и как обещал qr код для регистрации в лотерею и адрес куда можно пройти для стенда сама зонам и если у вас есть какие то при весе мой доклад вы за какие-то противоречия вот ребята из амазона ответит за мой скажем так наброс я так понимаю секций вопрос сейчас да есть какие то вопросы как моя учитель школе голодец для сруб некого спросить тина очень положительно пищу почему раньше фармить был очень дорого очень дорого обходился до релиза fair крекеры переносных свой паркет нахер питер получалось так что если берем поднимаем таз тоску допустим с одним ядром и одним гигабайтом ципролет получается дороже чем поднять такой же размер если тунисом что вызывало очень таки странно выпуске по зачем тогда нужен фар гей я скажу так я сейчас использую far kid активно в продакшене в принципе эта структура очень нравится тем что nissan то что там есть какие-то софтсофт лимиты да как у любого сервиса амазона у меня есть возможность обеспечить масштабируемость задач без необходимости закидывать физических ресурсов потому что я знаю что тоски поднимаетесь на форекс коран таймов они поднимаются на кластерах амазона я там ничего не зная меня это не интересует и у меня есть возможность давать право пир task то есть это принципе даже фича исчез но в принципе я прям очень люблю фармит это лучшая семья работал поцелуями а не в обиду кубера воду бы сказал про просто ещё хотел спросить насчет furby то может быть вам известно когда они наконец реализуют pure system to для фольги то файловые вот здесь вот видите надпись а в с низом они вдруг вы знаете я не сотрудник amazon и у меня нету ни сайтиков извините да я я также концу мир каковы я получаю доступ тому что имеете вы как бы я ничего там больше не увижу есть какие то еще вопросы человек в тени здравствуйте здравствуйте большая спасибо за доклад вопрос очень простая почему вы не напишите эту книжку какой именно похер велес потому что у меня нет в этом потребности и они знают как имеет отношения к докладу вопрос ну идея с книжкой хорошая но скажем так я пока не испытывал потребность и как бы я описал цикла статей про ям потому что я устал отвечать на один тот же вопрос в сообществе a810 представьте участники сообщества в зале вот кто давно там сидит знает что там не знаю в неделю два три вопроса один и тот же да там вот у меня bucket поднятая четко не мог написать ничего не могу туда и писал цикл статей чтобы не отвечать больше на эти вопросы принципе я надеюсь что кто-то и вообще читать просто но вопрос как сыпались так и сыпется но литературе по сервису проблем в том что сервере суд относительно модно модное просите просто новая вещь и опять же да там напиши книжку по серой лесу что надо делать так и кто может гарантировать что то что я написал песню книга все-таки должна нести знание относительно беспристрастная a service pack очень далек от беспристрастного скажем так еще какие то вопросы у нас же еще время есть я все таки хочу продолжить поводу сервер лес давайте в каких случаях его стоит использовать что на нем лучше делать каких задач я бы сказала так и отталкивайтесь от проблемы давайте вы мне дадите проблема я вам скажу что это ее на сервис реализовать или нет ну допустим есть веб-сервер который должен обслуживать не знаю что за просто секунду ну окей если вы это поднимите на и ситу например да там этот веб-сервер перезабыл он хорош допустим effets s-class тире nokia хорошо докер-контейнер костина исчез классно рядовым в этом в этом случае да там вы можете посмотреть на эту проблему сэкономить точки зрения да у вас есть докер-контейнер нужно как с какими-то к почти по ресурсам и он говорит о'кей чтобы поддерживать 100 за обрабатываться секунду мне нужно тратить на него столько денег потому что у вас есть утки стоит денег и можно посмотреть например а если у меня я это перепишу нолям туда сколько времени она у меня будет отрабатывать сколько я за это буду платить опять же лямда берет деньги за факт вызова зовут амина именно request полученный вариант учту сказать за поднимем не линду обработки логику и за время сколько она отработала ну и соответственно сколько памяти вы и выделили если это дешевле то отсюда возникает следующий вопрос сколько будет стоить переписать этот сервис на линду и готовы потрать на эти деньги то есть опять же объяснение когда из-под сервисы когда не использовались такого ответа не существует люди годами писали сервисы на виртуальных машинах потом на docker потом на cabernet а сейчас им говорите пакетики с ним будет хорошо массива потолки вся проблема а можно я с другой стороны немножко про серравале скажу вот у нас недавно было на нашей компании пару проектов поток в обработка данных там вот такая вот схема штук десять разных квадратиков из них 2 это наша докер-контейнер а остальные это все масонские сервисы kinesis skin is fair хаски нас еще что то они друг друга все это перекладывали и вот какие то вот в в определенных местах так уже работал наш там java приложение в докере которые там допустим что что-то там делала а по сути вся вот эта инфраструктура часть это вот в таком смысле сервере less он более понятно становится мне кажется то есть не сервер сотни лямда а вот именно собрать из кучи амазонских сервисов какой-то там не зная pipeline обработки данных и в таком смысле получается как бы минусов нет что нам нужно как разработать зарабатывать этиленом д.а. в принципе вот эти вот плюсы перечисленные что у нас мы знаем сколько у нас стоит обработка одного события что нам не нужно поддерживать эту структуру масштабировать они все остаются еще вопрос так вопрос если есть один аккаунт и если best practice отделе отделение уж проектов уже в продакшене из него в пределах одного аккаунта или ну мы говорим про скажем так экосистему приложение работающих друг с другом или я бы сказал что имеет смысл держать пределах одного аккаунта но опять же зависит от того что это за приложение проекты целые да именно приложения которые общаются друг с другом я не вижу в этом смысла разбивать их на разные аккаунты то есть но разные аккаунт дают там ограничение по правам доступа и вам никто не запрещает использовать какое-то ограничение по правам доступа через те же ям роли или им полисе и за того что на чем приложение это работает другой момент что если вы хотите например это разные приложения разрабатываем разными программами вы хотите как-то отдельных разделять пределах там консолидированного учета но этот задача также решается как коста чистка ствола конечно таки каждый ресурс кодируется там отвлекаешь no name и вы все равно увидите что там конкретное приложение стоит вам столько-то денег рост еще вопросы а я про дира four ничего не говорил я вам я могу так сказать да там почему я люблю платформы шин потому что я очень ленивый и тара форум по моему еще не сделал откат когда у вас вы делаете таро форма плач что-то валится на середине пути он не возвращает строку обратно в то положение который был до апдейта если умеете тарифам такой функционал от его откат именно роль бекки ну вот вы сделали таро форм план потом на стадии по что-то пошло не так план не все покажет ну вот у вас бывает такое да вот как вы будете восстанавливать состоянии приложения что-то средний пошло не так вот теперь давно то ему нужно откатываться обратно как вы это будете делать окей тащим обратно старый стоит а что делаем с и я объясню почему да там почему я никакой там зените не фашист да я не считаю там людей которые свитера форм там какими-то ну не знаю ничего плохого не менее против таро форма не против насилия долго работалось на землю мы например медицинский кластер я свое время развращал стара форму потому что делать а импульс апдейт версии daisy wheel гораздо проще sister of ur нижний склад формейшн но вклад фарм ощущение мне нравится то что он поддерживает откаты из коробки и мне не нужно думать о том что что-то пошло не так если вы катитесь дара форум до и во время обновления стык опрашивают получить случилась какая-то проблема да есть у вас просим вас о через код у вас это изменение лежит репозиториями да там чесно на пушту мастер у вас идет дипломантами и ok вы использовали backup стоит хорошо вы вернулись обратно там рук вам это нужно сделать на уровне соседи плане так понимаю в это делать там если у вас там apple прошел с ошибкой то инвок степ там восстановить состояние из бекапа хорошо потом нужно идти в репозитории делать либо гитаре сетам либо убирать эти изменения либо писать их заново флот war начнет просто не ну как в платформа все еще остается вопрос там работы с кодом там систем контроля версий но calls for можешь хотя бы ситуацию с откатом берет на себя и при этом вы можете там если вам не нужен отказ такого машина это позволяет но в этом плане лично для меня клад формы шинам такой более что ли надежный ну что он быстрее отреагирую чем вы там этом в bell системы будете это делать вот про ansi был потому что он все было так понимание туда роста это как такового я могу ошибаться так отец-сан стеблями и допустим я поднимаю ресурсы в амазоне византия была невесть какой то стоит каком не скажет эти ресурсы я поднял повторно делать этого не буду как у чекиста я типа тегом да там каунт текст кажется это называется но тоже как-то знаете ну такой себе хорошо ну вот опять же да там вы на лету это в пределах побоку делать но вода вы пишете свой собственный стоит опять же знать зачем мне дать временная она стоит да там и какой примеси таком случае мне дает он сибай если например клауд формация поддерживать тоже там развертками конфигурации как чистить ссн так и через fn и не ты ли в принципе в обычную userdata равна как я могу накатить на сибирскую роль используя инфибл пул в той же userdata что мне понимается машина makita ga я пойду к себе возьму вот этого трудностями здесь вопрос они не снимал так как какое-то оскорбление а именно вопрос скажем так рисков которые придется на себя брать из использовать этот инструмент потому собственный xml я как бы не люблю риски я хочу чтобы система сама себе мединилла я сидел себе спокойно крепко спал нормально делай нормально было спасибо скажи пожалуйста если кинь подводные камни 53 это подать хороший вопрос а что мы поимеем виду под подводными камнями пока не stalker и снова падения там или что то еще обновление the tail а там что-то еще было дано ceкca у него нет например денисик по-моему я пытался делать dns всех в рот 53 там было сказано что в 153 именно как на им server не поддерживает услугу то есть мне нужно использовать какой-то external dns либо регистра либо провайдер и делать надо иной acer но это по моему пока единственно проблем с которой столкнулся вот друг друга и что с чем я немножко испытываю боль сразу 53 а допустим у меня сейчас ситуация да там ну словно вор клади абстрактный да у меня там есть главный аккаунт в нем лежат хоста зоны или допустимых замком тест . example.com там не знаю example local еще так далее и я допустим использую мультика константы же у меня появляется дочерние аккаунта и я хочу dns-записи перенести туда при этом не ломая как-то production да я хочу используя пример у меня экзампла ком будет лежать впр аккаунте от опасен тест example.com будет лежать дочерним аккаунте это нужно делать через как-то делегирование зон что за два часа прощение документация показалась мне очень сложно мой от этой идеи на время отказался пока до конца не паркурил материал потому что пока учитель неприятно вот а так в принципе он умирал 53 довольно нравится у него там есть к 1 балансе у него есть своя внутренняя балансировка что очень удобно когда у вас распределены предложению нескольких регионах кто ral 53 что значит работают я не знаю извините еще какие то время на вопросы закончилась давайте просто вопросы можно задать в дискуссионной зоне всем спасибо большое какой вопрос вам понравился больше остальных так топовый вопрос пророк 53 выбили из колеи спасибо большое следующий вопрос был про и фар gate есть человек который спросил когда фарги завезут и без нормальной убежал наверное ну ладно мы включаем крышку тогда вручаем вот люди тоже про один сингл аккаунт спросили убежали даже не знаю вот брата форм человеку бросил комментариям сибай про про вниз такого человека красной футболочки и человек в серый кофточки вручаем только одному а окей ладно спасибо спасибо вам за доклад"
}