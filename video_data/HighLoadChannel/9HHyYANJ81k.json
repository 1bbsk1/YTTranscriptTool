{
  "video_id": "9HHyYANJ81k",
  "channel": "HighLoadChannel",
  "title": "Конструктор / Денис Паясь (Яндекс)",
  "views": 2320,
  "duration": 2773,
  "published": "2017-04-22T14:48:00-07:00",
  "text": "значит Всем привет как тут Меня уже представили на всякий случай Повторюсь меня зовут Денис я работаю в Яндексе а Если точнее то я занимаюсь разработкой фронтенда для страницы поисковой выдачи Сегодня я расскажу про такую те решения которые мы приняли в процессе вот реализации вот этой вот замечательной фига могут быть полезны не только нам в рамках нашей компании нашей команды но и целом множество других команд вот в ваших например компаниях Я не знаю упомянул или нет но проект реально очень крутой почему сейчас расскажу Теперь уже в эпоху наверное до конструктора до того как мы его внедрили а разработка какой-нибудь даже типовой продуктовой фичи вот самый такой стандартный занимал у нас просто офигительно количество времени Ну в районе дву недель может иногда больше иногда меньше я на этом остановлюсь подробнее А сейчас когда конструктор внедряются за день причём такой же сложности А может и меньше и Что круче всего зачастую даже не нами не фронтенде в общем мне кажется что это просто какой-то офигительный сказочный результат но тем не менее это правда и как мы до этого дошли я сейчас и и буду рассказывать Ну обо всём по порядку как я уже сказал я работаю над страницей поисковой выдачи Если вы когда-нибудь вдруг почему-то пользовались Яндексом кстати советую то вы её скорее всего уже видели если не видели то вот посмотрите выглядит она следующим образом можете вбить в своих ноутбуках вживую она ещё прикольнее над ней работают 35 А может быть даже 36 или уже 37 фронтенде из городов Роме есть ещ менеджеры дизайнеры тестировщики какое-то огромное число ребят из бэнда В общем если всех сфоткать получится примерно так что мы все делаем мы делаем целое множество фичей всяких разных значительная часть из них продуктовая например вот эта вот красивая штука справа с фоточка Анджелины Джоли какой-то структурированный информацией фильмами где Она снималась в наших терминах это отдельная фича довольно п Ну она называется объект ответом если кому-то интересно кроме Таких вот крупных фичей есть значительная часть фичей помельче для пользователя они выглядят просто как ну не вполне обычные результаты на выдаче с картинками структурированные информацией видяшка В общем что-то такое немного особенное и вот таких вот фичей у нас на самом деле выше крыша в голове у меня почему-то цифра что их в районе 8 но Откуда я её взял я не знаю но я думаю она примерно похожа на правду Окей как всё это выглядит технологически если вот по верхам для каждой такой фичи есть источник данных то есть ребята из бэнда данные на майнили и через ещё один энд который у нас называется ре портом передали уже нам фнн в фронтенде У нас есть своя серверная часть где на основе этих данных Мы сгенерировать из себя для пользователя собственно фичу вроде всё просто Теперь давайте остановимся на какой-нибудь конкретной фиче и на Вот её примере я покажу в чём же у нас была большая беда и проблема Итак предположим что нам нужно сделать фичу как это всё начинается во-первых ребята из бэнда должны намайнить данные Например если мы будем делать фичу про новые девайсы фичи у нас в Яндексе такого рода часто называют колдунчик Если ещё раз буду повторять это слово не пугайтесь это просто фича Почему так это неважно Итак а для фичей нужно намайнить данные до нас эти данные доходят в виде Джейсон причём Джейсон очень специфичен под каждую фичу То есть если это колдунчик новых девайсов то там будет информация о девайсе ссылка на Маркет там не знаю название производителя может быть что-то такое если бы это была фича про социальные сети там была бы имя фамилия пользователя там что-нибудь ещё там не знаю его семейное положение в общем какая-то такая фита в предметной области фичи Ой параллельно с прит я вас слишком громко слышу Давайте потише сорян Итак параллельно с майнингом данных нужно нарисовать Для всего этого дизайн дизайн в то время у нас представлял из себе макеты то есть по сути картинки но с крами во специями далее То есть Ну нам было в целом достаточно удобно после того как у нас есть данные и дизайн ставится задача уже на фрон end где мы на основе этой входной информации реализуем компонент непосредственно под фичу в процессе реализации мы стараемся пользоваться какими-то общими штуками там кнопками ссылками из нашей небольшой такой библиотечка вот после того как фронтендер фронтенде кажется что фичу он сделал он отдаёт её в тестирование и тестировщик его убеждает что скорее всего фронтендер не прав что проверяет тестировщик во-первых что фича корректно работает под всеми платформами мы верстаем сразу под десктоп планшеты телефоны под все браузеры доля которых на серпе больше чем по-моему полпроцента в общем это просто огромное количество штук которые надо проверить Кроме того у нас достаточно сложная система логирования и тестировщик проверяет что разработчик в ней ни неся хорошо А ещё есть одна распространённая проблема что дизайнеры на макетах а всегда выбирают очень красивые данные которые друг с другом хорошо сочетаются и всё выглядит замечательно но реальный мир зачастую бывает жесток и бывают название там на три строки когда рассчитывали на одну или часть данных просто не приходит и всё разъезжается просто очень страшно выходит и в общем тестировщик должен проверять что такой фигни не было после того как тестировщик ВС это проверил он скорее всего возвращает задачу фронтенде на доработку фронтендер это дорабатывает отдаёт снова в тестировщика и так до победного как только тестировщик считает что всё всё выглядит замечательно фича катится в продакшн Ну плюс-минус так вот мы прошли этот цикл у нас В итоге появилось Вот такая вот замечательная ча колк новых девайсов вро РОНО о котором я рассказывал он достаточно длинный То есть он занимает порядка наверное 2 недель и Можно конечно сказать что там разработчики раздолбая просто всех уволить типа что тут верстать 2 недели я за день сейчас на фигачу Но на самом деле это конечно не так на самом деле у нас просто очень серьёзные требования к качеству то есть ничего не должно ломаться нигде ни при каких обстоятельствах на любых данных и так далее и всё это занимает довольно значительное время Ну окей фичу мы сделали А что происходит Дальше а дальше проходит месяц может больше и какому-нибудь другому фронтенде от другого вообще менеджера и дизайнера не от того что были в первой задаче приходит таска а вот сделай ко мне фичу колдунчик одежда Ну что вот те данные вот те макет вперёд фига и фронтендер может либо сразу начать делать либо подумать что где-то такую фичу уже виде давайка найду исходники может найду другого чувака который с ним может что-то можно вынести в общий компонент как бы и не верстать сначала Ну он эту фичу находит и понимает страшное Несмотря на то что визуально они кажутся Ну похожи А что тут одно и то же у них на самом деле в деталях различия просто чудовищные То есть у них полностью другие спеки полностью разные они в принципе Похожи только картинками даже подписи под этими картинками там разного цвета из разной информации в одном случае цена в другом какие-то Отзывы там светло-синие в общем фронтендер на это всё смотрит и типа если выносить это в общий компонент вот прямо так то хрен знает Может через неделю придёт ещё фича и мне опио этого компоненты придётся превращать в чёрт знает что И вообще если всё это выносить надо же и старую фичу перетест будет и в общем как-то всё это долго и на верста я лучше с нуля Ну ладно берёт верстат Ну я думаю вы догадались что происходит Дальше Дальше приходит менеджер Ещё разочек какой-нибудь тоже с какой-то фич а потом ещё один и е разок и на каждое вот из этого мы тратили по 2 недели и мы начинаем стоять примерно с вот таким выражением лица типа что за фигня происходит кажется тут что-то сильно не так если попытаться сформулировать проблему менее эмоциональные там без ругани то приходим к следующему во-первых фичи делаются долго и это мягко сказано Хотелось бы побыстрее во-вторых когда кто-нибудь умный видит что вот у похожих вече голову Я кстати не знаю обратили вы внимание или нет но вот на тех даже картинках в пяти фича цена была написана тремя разными способами что кажется тоже не очень хорошо так вот когда кто-нибудь это замечает ему может прийти в голову А давайте вот сделаем тут как-то ну более-менее одинаково А давайте а давайте поправим пять вёк так чтобы нигде ничего не сломалось и приведём их как-то к единому виду хотя бы в каком-то месте потом всё это протестируем В общем Задачка Задачка тоже та ещё очень весёлая но никому такую не пожелаю О'кей А почему так происходит если спуститься на первый уровень этого вопроса то ответ в следующем так происходит потому что Несмотря на то что у нас там компонентный подход все там модные технологии вот это всё почему-то фичи которые мы делаем невозможно реис почему-то они одноразовые В смысле не фичи а компоненты Они под фичу и всё Ну за каким-то редким исключения если спуститься ещё на уровень глубже и спросить а почему так происходит то можно найти два ответа опять же первый что разработчики все очень странные страдают фигнёй всех уволить нанять новых Но это как бы Ответ неправильный правильный ответ в следующем есть две проблемы первоя Ну и она на самом деле небольшая а первая проблема в том что под каждую фичу данные приходят Ну вообще разные В смысле вообще совсем они приходят в предметной области Кэн и нам нужно их Ну много преобразовывать как-то ими пользоваться короче это какая-то работа которая должна делаться уникально под фичу Ну ладно Это вроде решаемо вторая проблема сложнее это дизайн Дело в том что под каждую фичу даже похожую дизайн приходит разный причём зачастую складывается впечатление что он отличается Вот именно в деталях Не потому что вот так реально надо продуктово оправдано а потому что ну я дизайнер я так вижу я нарисовал всё как бы верста и кажется что это на самом деле тоже проблема и проб куда более серьёзно примерно с такими мыслями Мы пошли к дизайнерам и выяснили что их такая ситуация тоже парит но парит она их с дизайнерской точки зрения им не нравится что вот у нас есть серб страничка у нас одна а похожие штуки на ней решаются вообще по-разному разными способами то есть они на первый взгляд конечно выглядят одинаково Но если просто открыть одну фичу и другую примерно про одно и тоже они будут выглядеть по-разному и дизайнеров это парт они хотят консистентность и в качестве первого шага в верном направлении сами же дизайнеры предлагают а давайте мы будем начать делать прототипы потому что в прототипа очень В смысле Наоборот в прототипа сложнее накосячить чем в Фотошопе как-то вот неосознанно там что-то подвинуть куда-то и так далее плюс Это позволяет нам сделать следующее если дизайнеры начинают писать именно там код HTML CSS значит они у себя могут выносить какие-то общие штуки в компоненты Например если дизайнер понимает что А вот я сейчас делаю несколько картинок в ряд это решает такую-то задачу И это ну стопудов будет полезно другим дизайнерам он может ещё с ними посоветоваться при этом а то он может это вынести в общий компонент описать что это зачем это описать Какие штуки в этом компоненте настраиваются настраиваются чтобы другие дизайнеры тоже могли его использовать у нас для таких вот компонент появляется хранилище которое называется дет выглядит оно вот так например тот самый компонент с картинками в ряд он называется витриной дизайнеры теперь уже знают что у них есть компонент витрины и фи чах стараются его реис пользовать тут описано Какие поля в нём настраиваются то есть какой у него AP как его использовать и так далее О'кей А если у дизайнеров появляются компоненты то фронтенде сам Бог велел начать делать такую же библиотеку но уже на продакшн технологиях то есть с корректным там логирования под все браузеры и так далее и с такими изменениями схема разработки начинает выглядеть у нас следующим образом Бендеры ребята стабильные они по-прежнему собирают дизайн тут для них ой фу дизайн собирают данные тут для них ничего не меняется а дизайнеры при этом начинают делать прототипы вместо макетов и в процессе создания прототипа пытаются пользоваться общими компонентами из депота и если создают что-то новое что как им кажется может быть полезно для других дизайнеров выносят после того как у нас есть прототип и данные ставится задача на frontend Где на основе прототипа мы смотрим типа общие там компоненты используются или не общие если используется общий компонент то используем либо создаём такой компонент и вроде как всё хорошо остальные шаги с тестированием и выгод в продакшн не меняются вроде бы уже стало лучше но у такого подхода есть некоторая проблема Давайте на не сечас посмотрим жим вот такая колдунчик туров где по сути голая витрина и заголовок так как витрина у нас уже была сделана в одной из предыдущих задач Ну как-то протестировано вероятно неплохо то мы эту фичу делаем на раз просто используем витрину используем заголовок сдаём в тестирование тестировщик тоже уже не совсем глубоко смотрит потому что он знает что это общий компонент он там был уже когда-то протестирован и вроде всё это катится в продакшн тоже быстро это уже там не недели Это скорее дни вроде всё хорошо О'кей А через день может прийти другой менеджер и сдать нам вот такую фичу Маркет вроде бы тоже витрина но есть нюанс вообще-то наша витрина такого не умеет и фронтендер который на неё смотрит на эту задачу он думает Так ладно Мне нужно доработать существующий компонент витрины сдать в тестирование проверить что все фичи которые вы использует не отвалились за использовать это в своей фиче и Ну вот тот компонент сделали за 2 дня говорит он менеджеру а вот это я тебе будут делать 2 недели и менеджер начинает выглядеть примерно вот так чуваки и тут и тут общий компонент Мы вроде договаривались типа А таком подходе но в одном случае ты будешь делать его 2 дня а в другом 2 недели Что за фигня ну и мы такие действительно Думаем а что за фигня и кажется происходит это по следующей причине Дело в том что дизайнерская витрина уже успела уйти вперёд к тому времени как на нас поставили эту задачу дизайнер конечно сделал фичу на своей версии витрины мы об этом конечно не знали и именно в этом и наша проблема поэтому мы вводим такой процесс как версионирование и синхронизация Что это значит Это значит что дизайнер когда прототипи ет компонент В смысле прототипи ет фичу использует там какие-то компоненты возможно эти компоненты развивает как-то экспериментирует но когда он понимает что вот компонент в таком виде хорошо бы попробовать в продакшене всё как бы Мы готовы им пользоваться он ставит этому компоненту версию А кроме того он ставит задачу на фронтендер по реализации этой версии компонента если после этого ему нужно в компоненте что-то изменить это будет следующая версия выглядит это следующим образом и что нам это даёт любой и менеджер и дизайнер зайдя в депот может увидеть что компонент такой-то версии вот уже на вёрстке есть и Значит фронтендер сможет сделать это быстро компонента вот такой версии на вёрстки Пока нет но есть вот такая задача если какому-нибудь менеджеру это компонент понадобится то менеджер буде готов ждать поэтому в процессе создания дизайна прототипа для фичи менеджер с дизайнером могут договориться Как надо быстро или типа совсем офигительно вот схема разработки при этом меняются следующим образом Ну что делают Эндер всем понятно мы их тут не трогаем дизайнеры прототипи дизайн попутно вынося общие компоненты в депо и дорабатывать существующие а проставляют этим компонентам версии ставят задачи на frontend и в этом месте происходит синхронизация с нашей библиотекой таких же общих компонент но уже во фронтенде который называется конструктором собственно после этого ставится задача на вёрстку где мы из общих компонент собираем фичу при этом и дизайнер и менеджер на этом этапе уже знают что все ли компоненты у фронтенде есть всем ли мы можем воспользоваться быстро или Придётся подождать собираем фичу сдаём в тестирование катим в продакшн вроде всё круто Теперь уже но мы были бы не мы Если бы не пошли ещё дальше я вот тут говорю что дизайнеры выносят общие компоненты в депот А давайте подумаем а Какие компоненты вообще могут быть не общими Ну Серьёзно И мы для себя на этот вопрос ответили следующим образом на самом деле все компоненты общие даже если у тебя какая-то штука сейчас используется один раз всё равно хорошо бы тебе её описать Ну тебе как дизайнеру А чтобы другие дизайнеры поняли Зачем ты её вообще придумал что она делает и может быть чере через каких-нибудь полгода Она кому-нибудь понадобится и он сможет её Либо так использовать либо доработать и использовать это раз Кроме того У нас есть такие большие компоненты как лейауты которые говорят что сверху у тебя заголовок под ним тумба справа тумбы текст под текстом у тебя витрина и так далее Это тоже в большинстве своём какие-то устоявшиеся конструкции которые тоже хорошо бы описать Описать как и когда их использовать и собственно использовать Что даёт нам такой подход даёт нам следующее если у нас все компоненты общие то что у нас остаётся на реализацию непосредственно компоненты под фичу Что она делает А оказывается что При таком подходе компонента под должна делать ровно одно преобразовывать данные пришедшие в формате бэнда в формат который понимает а компонент конструктора Ну зачастую лейтов как компонент самых крупных Ой а раз так то оно то компоненты под фичу вырождается в по сути адаптер Что такое адаптер в нашем случае это чистая функция Ну как бы если у вас какой-то фреймворк это может быть что угодно но важно следующее важно что адаптер никак не влияет на окружающее то есть в нём нет Понятно Ни CSS ни дэ клиентского вся эта логика реализована в компонентах а адаптеры друг друга не реис пользуют и адаптеры не зависят друг от друга ну тоже Кроме того а один адаптер пишется строго под одну фичу ограничений кажется много но они особо не мешают а дают нам следующее потрясающее следствие что если ты правишь какой-то существующий адаптер самое худшее Вот вот если всё совсем плохо что ты можешь сломать это одну конкретную эту фичу всё гарантированно ничего вокруг ты не сломаешь потому что у тебя нет в нём ни клиентской логики ни клиентских стилей от этого адаптера гарантировано Никто кроме этой не зависит просто по постановке задачи и так далее Окей если показать это на картинке то вся схема выглядит следующим образом у нас есть код от бэнда который передаёт просто что-то на это что-то натравлю соответствующий адаптер который на выходе говорит каким компонентом эту фичу рендерить и что подавать на вход в этот компонент после этого это ВС попадает в Конструктор который уже Гене разметку и э разметка уходит в браузер Окей это нам даёт следующее тоже как мне кажется офигительно следствие У нас есть компоненты в библиотеке и все компоненты у нас общие А ещё у нас есть адаптер и При таком подходе получается что разработка компонент и разработка фич под эти на основе этих компонент это на самом-то деле раздельные процессы в некоторых точках они могут быть для некоторых фичей слабо связаны но в целом выглядит это вот так дизайнеры развивают существующие компоненты и создают новые ну развивают не знаю визуальный язык серпа и вот это вот всё когда дизайнер понимает что эта компонента готова для использования в продакшене он фиксирует ей версию мы по договоренности с менеджерами эту версию реализуем Тестируем на всех крайних случаях в общем в любой ситуации чтобы ком рабо хоро сделать фичу мы просто берём и пишем адаптер так как адаптер гарантированно не влияет ни на что вокруг ничего не может сломать и так далее и используют те компоненты которые уже хорошо протестированы то тестирование адаптера - э задача по сути тривиальная то есть нужно просто проверить что на вот этих вот кэндо ских данных всё ну продуктово выглядит плюс-минус хорошо И всё И это тоже катится в продакшн причём вот этот вот вот эта вот Верхняя ветка процесса она действительно чертовски быстрая Окей А теперь другой интересный вопрос Если адаптеры такая простая штука занимаются только преобразованием данных ничего не могут ломать то Нафига нужна фронте нерская квалификация чтобы их писать Ну и мы такие подумали и подумали что она действительно не нужна Пусть адаптеры пишут те кому это больше всех нужно то есть менеджер который ответственен за фичу или аналитик которому эи не все менеджеры не все аналитики там умеют в Гид умеют в наш Фло умеют в Коти там в репозиторий делать реквесты и так далее ну как бы мы Очень ленивые Поэтому нам хотелось всё-таки чтобы менеджеры это делали поэтому мы себя пересилила следующее во-первых мы сделали для них веб морду через которую они могут этот адаптер написать подключив туда реальные данные которые ему намайнил кроме того мы сделали для них сайт с документацией потому что мы-то конечно можем залезть в исходники посмотреть I нашего компонента но менеджеры же ленивые и в не очень любят Поэтому им нужен отдельный сайт выглядит это следующим образом веб интерфейс выглядит вот так просто для примера слева там плюс-минус реальные данные из бэнда справа какой-то тривиальный адаптер А вверху превью как фича менеджер будет выглядеть в продакшене единственное пожалуй не хватает это кнопочки сдать в тестирование но мы сейчас над этим работаем Роме того У нас есть документация про неё я подробно рассказывал на каком-то из Мо сейчас ещ раз упомяну что это Всё сделано на открытых технологиях есть 3 которые офигенно камизи это уже наверно третья версия документации Но с каждым шагом мы всё больше приближаемся к нашему идеалу Ну даже сейчас ей уже можно вполне пользоваться чем все и занимаются я Говори в начале доклада фи делаются за часы Ну или за дни то есть ВС равно чертовски быстро кроме того они делаются зачастую даже не нами а менеджерами Или аналитиками например у нас не так давно был кейс Когда нам пять новых колдунчик тире фичей Нафига аналитик раньше о таком просто я не знаю можно было только мечтать кроме того мы бесплатно Ну как бесплатно мы получили полную синхронизацию с дизайном и полную консистентность вне используют общие компоненты причём все компоненты строго общие когда ты одну компоненту обновляешь процесс это конечно достаточно тяжёло если компонента Ну много Где используется Зато гарантированно весь сер будет консистентной просто по архитектуре по постановке задачи и это тоже очень круто Ну и бонусом мы получили то что теперь и менеджеры и дизайнеры и мы работаем в одних терминах все знают что у нас есть компоненты из которых строятся фич А чтобы построить фичу все знают что нужно написать адаптер котора такая простая штука преобразовывает данные собственно схему подробно расписывать у меня уже нет времени но она драматически отличается от того что я показывал в начале основная Фишка в ней следующее что разработка компонентов и разработка фич на основе этих компонентов - это отдельные процессы причём разработка фич если фича у тебя не какая-нибудь Мега требовательная процесс очень быстрый решения которые мы приняли по ходу во-первых дизайнеры вместо макетов начинают делать прототипы а раз они делают прототипы какие-то части этих прототипов они могут выносить в общие компоненты раз у дизайнеров есть общие компоненты то нам и подавно хочется сделать себе то же самое то есть общие компоненты появляются и у нас Кроме того мы сделали версионирование компонент у дизайнеров и синхронизацию дизайнерских компонент с нами А ещё мы поняли что вообще-то все компоненты у нас общие А раз так то разработка фичи - это по сути написание простого адаптера по преобразованию Да который на основе этих компонент и строит фичу А раз так у нас есть Разработка адаптеров и компонент кажется эти процессы на самом деле не всегда связаны поэтому их можно вынести в раздельные процессы то есть отдельно развивать компоненты отдельно разрабатывать фичи и Кроме того разработка адаптера в процесс большой В смысле не большой а простой А мы ленивые поэтому мы сделали Так что адаптеры разрабатываем не мы к чему я всё это к тому что вы можете использовать наш опыт начиная от каких-то тривиальный выводов в духе что если для того чтобы там драматически ускориться вам нужно полностью изменить весь процесс для кучи людей А вы сейчас Боитесь это сделать Не бойтесь даже в Яндексе получилось при том что у нас очень-очень много людей очень большое число человек пришлось научить делать по новому Но мы справились А раз мы справились значит и вы скорее всего тоже справитесь кроме того Вы можете использовать какие-нибудь из наших абстракций из наших фишек которые мы придумали У себя в проекте например как мне показалось идея с адаптерами она достаточно крутая и может прижиться даже в тех системах о которых я придумывая это даже не думал подумайте на этот счёт возможно она вам пригодится Кроме того вам может пригодиться отношение к проекту как к набору общих компонент причём реально общих либо Возможно вы сможете дизайнеров начать делать прототипы или даже сделать для них депот в общем что угодно скорее всего каждый из этих шагов будущ применённые в нужном месте принесёт вам Профит А кроме того если у вас специфика работы такая что вы делаете много фичей на основе разных данных но ф у фичей визуально есть какое-то родство то есть они не полностью уникальные в каждом конкретном случае Возможно вы можете взять наш процесс целиком это конечно будет но Профит прине вам тоже как это принесло Профит нам в общем на этом наверное вс можно хлопать радоваться и задавать вопросы Спасибо за доклад просто нет слов выразить как какой крутой доклад Поэтому вот тебе при его вернуть я те это пришлю T а вопросы Привет Спасибо за доклад Привет А вопрос такой адаптеры которые пишутся не фронтенде они проходят какое-то код ревью и как много говнокод появляется в адаптера смотри а сейчас они какое-то код ревью проходят но мы хотим осознанно от этого отказаться Почему Потому что как я уже сказал По условию адаптеры ни на что вокруг себя не влияют а раз так то скорее всего тот человек который адаптер создавал Или тот отдел не знаю в общем те люди к которым он относятся скорее всего они будут его изменять И в последствия И значит им работать ровно с тем что они написали им не нам и отсутствие такого код ревю оно на самом деле позволит этот процесс ускорить Сейчас он ещё немного завязан на нас потому что вот как я уже показывал нет кнопки сдать в тесты но когда мы всё это сделаем мы хотим вообще дистанцироваться от всего этого просто типа пишите нам более-менее всё равно но тестировщики это конечно всё равно будут просто Just Вот спасибо за доклад пожалуйста у меня два вопроса Первый Как долго у вас заняло сделать вот всю эту экосистему вокруг компонентов адаптеров вот до конца и второй используют ли ваши дизайнеры Ну да отвечу по порядку заняло довольно времени то есть ушло года наверное полтора может чуть больше но у нас очень много людей поэтому изначально например вообще казалось что этот процесс Ну может и не сойтись но мы справились Всё круто а во-вторых дизайнеры у нас на самом деле люди Офигительно Я их безмерно уважаю не только потому что они гид используют я кому-то по-моему уже говорил я знаю дизайнера нашего который знает хаскел и на нём пишет Поэтому там серьёзные ребята очень круто спасибо Здесь вопрос Подожди Здравствуйте Меня зовут Денис я здесь Привет Денис У меня вопрос по поводу прототипов Скажите пожалуйста поподробнее что в них входит что они из себя представляют и что вы заставили делать дизайнеров Потому что если я сейчас дизайнеру подойду и скажу что тебе надо верстать код он истерически просто посмеет смотри нам в этом плане на самом деле очень повезло с дизайнерами потому что ребята которые у дизайнеров главные они технически подкован люди да то есть их там не пугает например то есть изначально была идея чтобы хотя бы там hml и CSS писали А что не могут сделать описывали словами Да но в итоге в какой-то момент когда мы пришли к дизайнерам у них уже появился вообще говоря свой фреймворк реакта подобный они написали и сделали на нём свои прототипы В общем они ребята какие-то чудовищные просто они просто ну взяли типа Окей код так код сделаем типа всё вот то есть на самом де пони что не все дизайне такие в базовом условии хватит чтобы это была какая-то тмка просто с ССМ если дизайнер какую-то фишку сделать не может Ну пусть словами опишет просто но важно что в централизованном месте чтобы другой дизайнер мог прийти посмотреть Ага ведёт себя так-то Вот примерно так Привет Здесь вопрос Меня зовут Аман очень интересный доклад и шикарный опыт вопрос У меня следующее то есть ну тут предыдущий вопрос был близок Если я правильно понимаю То вте у вас хранятся прямо уже готовые HTML куски которые можно использовать то есть дизайнеры по сути их сами готовят по сути да то есть у нас всё немножко ещё круче я как бы не стал в это вкладываться там на самом деле хранятся не куски а прямо шаблоны которые дизайнеры могут использовать причём шаблоны дизайнерскими написаны дизайнерами для дизайнеров но HTML куски в этом месте тоже бы подошли вот Да действительно дизайнер может зайти в этот сервис Я сейчас попробую промотать туда где он был ну кажется мотать придётся долго В общем дизайнер может зайти в этот сервис и а посмотреть Какие компоненты есть зайти и вот информации которая в этом сервисе есть ему хватит чтобы этот компонент за использовать и чтобы понять как он себя ведёт Я боюсь а не я наверное промотал уже вот то есть тут у нас не видно конечно ни фига но есть список прямо компонентов дизайнер смотрит и так далее Короче всё Да собственно второй вопрос Если все любые даже самые мелкие сущности вносятся в общие элементы то как происходит их структуризация Угу согласен смотри пока это всё лежит плоским списком но есть два но больших Первое у нас есть м благодаря которому у нас например нет 20 вариантов кнопок Да у нас есть одна кнопка с гибко настраиваемым поведением То есть у неё есть темы у неё есть какая-то кастомизация и он нам в этом нас в этом месте спасает Хотя иногда дест дублирование такое происходит Но стараемся от него изв СТ Семы хотим разбить это на два списка но правда всего лишь на два в первом будут храниться такие железобетонные компоненты которые вот уже там прошли проверку временем там их реально все используют короче штуки которые сложно и дорого править но они затронуты очень много народу а во втором вот те самые компоненты которые используются один-два раза но в перспективе могут вырасти вот в первую категорию иного как пере типам вы получается отказались от поняти Pixel perf Правильно я понимаю ну и да и нет то есть с одной стороны понятно что мы теперь не можем Ну как бы мы не Открываем две картинки в Фотошопе и смотрим так типа что тут происходит но с другой мы пока к этому не пришли но активно идём А так как все компоненты они в любом случае должны быть очень близки И и мы дизайнеры используем Пусть разный код на один и тот же набор компонент просто тоже По условию наши компоненты не могут сильно отли и как бы в этом месте кажется всё хорошо то есть там не Pixel perf но близко к этому если же у нас в компонентах появятся драматические различия как бы мы в какой-то момент скорее всего гребёнок тестирование компонент на продакшене да А в дизайнерские компоненты смотрим только мы Ну и стараемся типа реализовывать похожим образом То есть если например у дизайнера это СВР таблиц каким-нибудь не знаю ди там с дисплей T если у нас нет каких-то возражений мы делаем также чтобы впоследствии при развитии и нам и им развиваться было примерно одинаково дорого вот ну или дёшево Всё спасибо большое угу Здравствуйте вот вы говорили советовали нам попробовать внедрить ваш опыт да А какой вы использовали для этого инструментарий То есть вы там написали наверное как кучу велосипедов своих Да вот сколько это будет стоить если я захочу внедрить у себя в компании тут смотри в чём дело тут дело не в конкретных технологиях Да что тебе нужно взять этот велосипед и поставить его у себя тут дело в подходе То есть даже в тот момент когда ты начнёшь думать о проекте не как вот у меня есть там там страница и мы её как-то верстаем и вот это вот всё А как реально о наборе компонент готовых для реис пользования чтобы вы там не использовали Я не знаю там табличку в Экселе например Это уже скорее всего Может вам принести какую-то Вы не ну вот ты рассказывал про то что менеджер может зайти там удобно что сам написать адаптер Но вот эту систему разрабатывали то сколько Вот то есть получается Если я подобно захочу внедрить вот эта система на самом деле достаточно дешёвая то есть самым дорогим был было движение в сторону этого подхода это сейчас после рассказа каждый шаг кажы понят тут делать на самом деле когда мы про это ВС думали было дофига вариантов и в общем то чему Мы пришли нам в принципе нравится это сах готовых решений в интернете можно заю Я боюсь не могу Вам их предложить просто потому что у нас стек технологий свой То есть даже ес решения были они были бы для МКА что скорее всего Вас не устраивает вот поэтому тут к сожалению не хотеть самому создавать эти компоненты вернее их как бы компоновать писать вот эти вот дескрипторы очень просто а дело смотри в следующем Дело в том что работы у фронтенде дофига и когда к тебе приходит менеджер и говорит Ну через сколько ты сможешь сделать эту задачу ну у нас там ещё какой-нибудь проект на 2 недели и потом может быть ещё что-нибудь и может быть недельки через три я сяду таки до твоей задачки и буду делать её полдня А может Вот у тебя есть веб-интерфейс Вот Угу привет Здесь классный доклад даже Думаю теперь будем внедрять у себя как-то в каком-то виде постараемся вот вопрос в том что с адаптером Понятно вопрос то есть этот компонент надо потом куда-то вывести Ну то есть нужно определить место и Ну как он вызывается и так далее Вот как это происходит кто это делает Угу смотри ну в нашей специфике именно нашего проекта место у нас достаточно понятное у нас есть вот этот обвес там в виде шапки там левой колонки футера это всё понятно а внутри есть список который просто проходится по тому что прислали данные они нам присылают массив с объектами в которых по сути указан только тип Ну по сути тип источника и Кроме этого может быть вообще любая хренобус вхо тоже механизм вот этого конструктора он выбирает правильный компонент вызывает его с нужном возвращает мку и элемент один под одним эти данные которые определяют структуру они На чьей стороне хранятся и кто их правит смотри данные которые определяют что этот результат выдачи будет под этим а не наоборот это на бэнде потому что у нас есть понятие ранжирования то есть вот всё это там машинное обучение все фита А в рамках одного компонента Кто определяет что типа текст под таблицей а не наоборот это может определять либо лейауты леау либо если компонент леау достаточно гибкий то это может определить сам менеджер в адаптере то есть в рамках одной фичи он то есть появляются данные от бэнда смотрится если есть адаптер то это выводится Если нет то если нет то ус да ничего не выводится Понятно спасибо А Денис Большое спасибо за доклад Я потерялся О да Привет Спасибо большое за доклад очень интересно причём очень знакомо потому что в компании мы несколько раз испо использовали практически идентичный подход к разработке но вопрос не даже про технологии а существует такая насущная проблема то что пока разрабатывается этот движок генератор и всё чудесно работает но возникает такой момент когда технологию устаревают и его нужно переписывать вот собственно это когда вообще ставить под сомнение с точ Ну со стороны менеджеров вообще в принципе этот подход вопрос в том насколько много ресурсов у вас уходит на поддерживание Ну как бы актуальности технологии и их там Если я правильно тебя понял Это вопрос немножко про другую область то есть на каких бы технологиях это не реализовать оно скорее всего всё равно будет работать обновление технологи это какой-то параллельный процесс он происходит параллельно с вот эти с вот этим вот движением не могу сейчас тебе даже сказать сколько ресурсов Ну какие-то уходят то есть мы постоянно что-то меняем постоянно там развиваем там шаблонизатор то-сё но кажется что в рамках этого проекта это как бы ну оно не драматически влияет То есть я не не могу понять Как это связано Ну мы с Денисом уже обсуждали эту штуку и там конкретно в Яндексе Они использовали такую странную штуку как BM JS и у них все шаблоны были собственно вот в этом д Sony в таком это сложном непонятно зачем эта штука была нужна она такая вся страшная бы я тебе расскажу после доклада а по а потом оказалось что знаете можно вот технологический стек внутри поменять а этот Jon полностью оставить и то же самое они могут на сайте взять и фреймворк поменять который там в вю рендере там на react заменитель на ещё что-то А вот вся эта простыня все весь кнд это всё остаётся тем же самым то есть в данном случае конкретно к проекту легко заменяется а переписывать вот эту вещь Ну тоже наверное не сильно сложно Тут куча отдельных инструментов маленьких Ну взял его и переписал под новый стек допустим это с этим у них всё хорошо мне кажется понял ладно спасибо Спасибо за доклад Меня зовут Сергей я тут привет Вот вы говорите 30 разработчиков на фронтенде Вот вы написали такую штуку крутую вместо двух недель там часы дни занимает но при этом вы говорите что всё равно вот такая загрузка что менеджеров даже заставили делать адаптеры чем тогда занимаются сейчас эти 30 разработчиков на Легко легко самое важное забыть ти сейчас пока проект Вот его ти внедрили он уже выкаченная только по верхам это заняло у меня 35 минут в каждом из мест есть какие-то нюансы какие-то проблемы которые стоит дорабатывать собственно сейчас мы занимаемся этим плюс сейчас есть какие-то типа уникальные штуки тоже в уникальных местах и часть ребят занимается именно ими Но вот когда всё это внедриться в смысле вот совсем в умы всех менеджеров когда все менеджеры реально типа как сделать фичу Ну я сейчас пойду адаптер напишу вот это вот сразу просто да тогда действительно непонятно чем будет заниматься такая толпа людей это меня немножко беспокоит Спасибо за доклад у меня такой вопрос вот эта вся штука внедрена сейчас в серб правильно то есть на одной странице на одной песковой выдаче а планируется или как-то масштабируется Ну то есть на другие проекты соседние ещё как отчасти планируются Но вопрос такой на самом деле очень по теме и достаточно сложно то есть хотелось бы от масштабироваться Да без вопросов Но вот этот вот подход с библиотекой он очень хорошо работает вот именно когда проект у тебя один и большой потому что это по сути папка в проекте То есть тебе нужно поправить компонент ты правишь всё как бы то есть тут всё хорошо Если это реально выносить в отдельный Гито вый репозиторий если у вас не какой-нибудь Там perfor который с этим хорошо справляется то очень просто огрести сложность Вот именно в этом месте за счёт очередей за счёт конфликтов за счёт того банально что тебе нужно ревизию зафиксировать а там разные люди фигачат там это всё по-разному тестируются и в общем тут могут начаться проблемы мы в эту сторону смотрим пока не думали как их решать возможно решим и возможно я про это тоже расскажу но пока это живёт в рамках одного проекта мы сейчас это активно дорабатываем и вот это вот всё ещё ИК технологический на разных проектах немного может отличаться Может может да ну можно было бы хотя бы в схожих внедрить но там тоже из-за непонятно просто как всем одновременно коммитить в одну библиотеку то есть у нас наших 30 А ещё там со всех остальных проектов при этом никому ничего не сломать потому что экспертиза у каждого чувака есть только в рамках как бы своего проекта В общем это интересная задача Возможно мы её решим возможно я расскажу про это через год увидимся и нам расскажут как это получилось это плохо работает потому что если у тебя все компоненты общие то это отдельная команда Это и будет как бы всеми разработчиками или большей их частью потому что кроме компонента инфраструктуры пилить как бы больше не Привет Спасибо за доклад Привет Акто другой говорит показалось или давай два вопроса вот первое Сколько всего людей работало вот на всеми вот этими вот штучками чтобы дизайнеры понимали менеджеры ктото вас все все всес И чем-то это похоже на Ю только без рекламы мне каже примерно есть первое сколько человек работало Ну в самом начале типа это был один фронтендер это я дизайнер и два менеджера в какой-то момент команда разрослась типа до аж пяти или четырёх фронтенде в момент когда вот всё это прям вот активно активно пилила вот прям всё сразу сейчас в команде которая занимается кором три человека и в рам Ну именно три фронтенде тоже про дизайнеров и кэндес колько всех научить всё делать правильно то есть ребята уже как бы свыкнуться Так всё я не не вижу отлично Спасибо ещё раз это за доклад Все остальные вопросы можно лично подойти спросить лично подойти спросить лично подойти спросить лично подойти спросить лично подойти"
}