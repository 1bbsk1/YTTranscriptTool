{
  "video_id": "6uqabt_WfeQ",
  "channel": "HighLoadChannel",
  "title": "Российский балансировщик нагрузки / Павел Иващенко (TrafficSoft)",
  "views": 1496,
  "duration": 2532,
  "published": "2023-01-19T07:01:38-08:00",
  "text": "всем привет меня зовут павел of я руководитель разработки в компании nfr я не понаслышке знаю о том что последнее время спрос данного рода продукта в нашей стране вырос сегодня расскажу вам про наши решения для балансировки трафика в высоконагруженных систем их немножко о том кто мы такие чем занимаемся вот уже шесть лет мы создаем высокопроизводительные сетевые сервисы для операторов связи и айти компании среди линейке наших продуктов есть такие решения как карьеры great над виртуальный балансировщик нагрузки четвертого уровня и applications delivery контроллер это виртуальный балансировщик нагрузки седьмого уровня за нашими продуктами уже сидят больше 20 миллионов человек из 16 стран мира специализируемся мы на создание виртуальных сервисов которые работают именно на x 86 архитектуре мы в принципе не используем никакое про при литар на или нестандартное оборудование немножко подробнее расскажу именно про балансировщик нагрузки 4 и 7 уровня чем же они в принципе отличается балансировщик нагрузки 4 уровня он не терменируют на себе тисе пи сессии идет именно пакетная обработка данных за счет этого получаем высокую производительность в свою очередь балансировщик нагрузки седьмого уровня он уже терменируйте себе сессии работает с потоками данных за счет чего получаем большую возможность в плане создание каких-то функций фич добавлении удалении шифрования очень все что угодно начнем с балансировщика 4 уровня как я уже сказал работает у нас стандартных x80 частых серверах одна из главных его особенностей эта работа в режиме syn flood а так работает он у нас в режиме дорог сервер response что это значит запросы от клиентов в сторону бы kind of у нас идут непосредственно через сам балансировщик на балансировщик и как раз происходит балансировка по одному из методов балансировки которые настроены и отправляется пакет на выбранный сервер дальше на сервер у нас формируется ответ для данного запроса ответ у нас но есть если это сильно зависит от того какое приложение вас на сервере запущена но в целом ответ в среднем в 10 раз больше запросов и ответ у нас идет уже мимо player балансировки и отправляется к клиентам через стандартное сетевое оборудование что за счет этого мы выигрываем и в принципе выигрываем на количестве оборудования которое нам нужно установить в нашу сеть для осуществления балансировки нагрузки между букетами работаете он у нас может как в режиме ль 2 когда у нас между балансировкой ибо кентами именно эти два сеть тогда на балансировщик и мы просто подменяем mac-адрес на выбранный gateway и отправляем request и на него также может работать в режиме altri но для этого нам нужно на ботинках уже настраивать и 5 туннеле на балансировщика у нас трафик тогда заворачивается в эпичный туннель и отправляется через l3 на букинге все вроде прекрасно с dsr режимом но есть одно но в принципе какая-то борьба со syn flood атаками в таком режиме особо возможно не представляется никакие сен cookies естественно работать не будут потому что мы никак не можем повлиять на трафик который идет со стороны викендов к нашим клиентам как с этим справляется обычная пеллетс это open source твой балансировщик нагрузки из ядра операционной системы linux для этого он использует дропа entry механизм но этого дропаем три механизма и если не ошибаюсь он называется у них / 3 деймон это отдельный поток абсолютно который в общем этой работой занимать у этого метода которая не использует есть определенный минусов во-первых он блокирует всю таблицу сессии который у нас есть это значит что когда он начинает работать мы не же мне добавлять не удалять новые сессии дальше освобождение сессии происходит в каких-то произвольных пакетах абсолютно не факт что он освободит место в том боккетти где нам сейчас это место нужно за счет этого просто новая сессия она может не записаться и срабатывает он попробуем у значению опять же абсолютно не факт что когда это пороговое значение будет достигнута у нас по времени это совпадет с тем моментом когда мы начнем терять трафик на наших балансировщика что сделали мы во-первых мы реализовали лоб free таблиц в сессии сделали срабатывание нашего механизма / n 3 именно в момент создания сессии как это работает приходит нам новый пакет начинаем искать сессию пока ищем сессию запоминаем запоминаем запись которая больше всего подходит нам для удаления это сессии по которым не было данных это какие-то попал установленные сессии в общем любые сессии которые похожи на неправомерные эту сессию мы выбрали для новых для нового нашего пакетом и никакой записи не нашли значит нужно создавать пытаемся создать видим что свободного места в хэш-таблице нет и просто подменяем уже существующую сессию абсолютно без каких-либо блокировок нашей новой сессии балансировщик это сейчас используется в группе компаний вконтакте там насколько помню первый наш клиент этого балансировщика это был именно mail.ru group и одноклассники они они как раз столкнулись с проблемами syn flood а так у них на четвертом уровне балансировки использовался спонсорстве балансировщик из-за ядра операционной системы linux и в момент атаки один сервер не мог прокачать больше чем 200000 новых сен пакетов в секунду эту задачу мы я сказал с успехом решили наш балансировщик на том же самом аппаратном обеспечении прокачивал в 200 раз больше новых таких запросов это графики кстати с реальной сети это была реальная syn flood атака на одноклассников по моему с нашим балансировщика нагрузки им потребовалось в 40 раз меньше железа чем с собственным решением и просто я насколько понимаю по деньгам кейс сошелся дальше расскажу про балансировщик нагрузки седьмого уровня что же такое балансировкой нагрузки седьмого уровня это балансировка уже по какому-то поводу которую нас идет в тисе пи поток можем пейте отправлять налево какие нить и видео отправлять на право запросы к динамическому контенту там отправлять на какую-то третью группу серверов для этого мы реализовали свой собственный тисе пи стек и динамический планировщик задач который позволяет нам экономить процессор ные ресурса зачем в принципе все это была затеяна со своим собственным типе стеком почему не использовать стандартный ti si peste и клянутся пути себе стояка linux есть довольно серьезное ограничение в плане новых сессий в секунду там как видим результатов больше чем четверть миллиона новых сессий в секунду мы получить не можем это тест проводился если не ошибаюсь на процессорах intel 2699 в 3 фото внизу есть ссылочка в описании так что вы сможете подробнее про него почитать если же мы возьмем какой-нибудь обычный хардварные балансировщик например от компании а 10 networks to видим что результаты количество новых от четвертых соединений а в принципе тисе пи стек это это и есть основа нашей речи и нашей или 7 балансировки там то что по сути любое 7 7 балансировщик он работает как прокси сервер на самых топовых решениях вот компания added a 10 networks мы можем получить количество новых или четвертых сессий в секунду приблизительно в 32 раза выше чем на довольно мощном сервере кстати с обычным linux уйти себе стеком мы в принципе с успехом эту задачу решили я считаю что здесь можно рассказать про этот тест если честно не знаю каким образом именно тестировал у себя а 10 networks и какое вообще и что эти цифры означают эти или 4 соединения там которые были сделаны в рамках их тестирований да и вообще на самом деле в принципе сравнивать аппаратное решение с программным на в зависимости от какого-то количества ядер довольно странно потому что естественно аппаратные решения о то 10 они используют еще и специализированные чипы в своих устройств которые выполняет те или иные задачи там здесь я думаю а 10 я вставил просто для того чтобы показать что можно получить на обычных серверах результаты сравнимый с аппаратными решениями мы же наш тест делали на процессорах 26 80 в4 оперативной памяти было 5 гигабайт одновременных tcp сессии было порядка 500 тысяч с точки зрения или 4 балансировщика один request от клиента это по сути 200 типичные сессии что нам нужно сначала открыть и типичную сессию с клиентом после чего нам нужно открыть типичную сессию с абонентом и по сути один request от клиента это 200 типичные сессии с точки зрения балансировщика вот здесь как раз миллион шестьсот новых сессии в секунду на 8 ядрах это результат который мы получили это как раз те типичные сессии именно с точки зрения балансировщика нагрузки там то есть если взять количество request of которые у нас в этом тесте были это это будет в общем 800000 репостов секунд как же мы этого добились прежде всего все наше решение построено нас обойти на ориентированные архитектуре у нас есть разные задачи которые выполняют разные действия например rxtx задачи они занимаются работой с физическими интерфейсами вы считыванием пакетов из физических интерфейсов и отправкой пакетов обратно в эти самые интерфейса rxtx задача у нас разделены на два так сказать уровня 1 уровень эта платформа зависимая часть а второй уровень эта платформа независимая часть там за счет этого просто добавляя какие-то новые платформы зависимые части мы в принципе можем довольно легко переезжать с и на not move или или даже на роуз окита если вдруг очень захочется было данный момент мы работаем поверх где дальше рик стоит задача после того как пакет и вычитают им нужно разбалансировать пакеты между тисе пи задачами между тисе пи задачами эти пакеты балансируются причем в момент балансировки у нас повышается приоритет той или иной типичные задачи поэтому когда с одной задачей ядро процессора у нас закончила она ведет в наш еду лиры абсолютно кстати без каких-либо блокировок берёт и получает наиболее приоритетную задачу для выполнения в данный момент тисе пи ай пи задача они работают без каких-либо копирования данных этими в принципе это на самом деле это усложняет именно и написание функциональности и в принципе добавления каких то новых фич но при этом мы не плохо выигрываем в производительности потоки данных которые мы отправляем на ли 7 задачи они у нас представлены в виде цепочки пакетов то есть ни один какой-то большой буфер данных куда мы эти данные копируем это просто цепочка пакетов с который нашли 7 задач уже работают сердце или 7 задач это r7 switch что же такое в принципе это switch эль седьмого уровня где мы потоки данных распределяю между различными типичными сессиями в данном примере у нас еще нет никаких сессий абсолютно абсолютно пустой поэтому прежде всего потоки данных отправляются на задачу с цель of london да вот весть от pipeline обработки я про него рассказываю с учетом того что никаких сессию нас пока не установлена а сервис который в этом плане обработки указаны это вести теперь сервис также мы поддерживаем типе сервис цель сервис и чтить и peecher из я думаю по названию понятно тисе пи сервис это просто режим работы тисе пи прокси сср сервис это те цепи праксиса социально флагом http и https очень-то мы уже добавляется ищите типичный партер и какая-то хитрая логика балансировки сервиса социально флот он у нас делает хан шейки расшифровывать данные и передает потоки данных уже на чтить и репортер там дальше ощутите репортер он по сути парсит у нас и ищите типе заголовки и отправляет потоки данных во контент switch что такое контент switch контент switch он в принципе уже знает какой у нас урал какой метод для запроса был использован он знает про все и чтить и пи cookies и про просеять и типичный хедер филда который у нас в этом request есть поэтому контент switch уже в зависимости от того какой тип request и у нас был там по сути спрашивали если это какие-то статические данные или например это был запрос за каким-то видео или к каким-то динамическим данным на этой основе он выбирает группа балансировки группа балансировки это по сути группа викендов среди которых будет эта балансировка осуществляться выбрали и отправляемся в балансировку в балансировке у нас того что используется все все те же самые алгоритмы балансировки что его ли четвертом были это sources хэш в этот раунд робин и в этот лист connection в данный момент есть и request уже находит так сказать со своего получателей именно на этом этапе дальше у нас есть модули который занимается pure system сам что такое вообще persistent в принципе и так эта функциональность которая позволяет с помощью того или иного условия закрепить бэкенд за набор он запросов пирсе stars мы можем делать по клиентскому айпишник у это что значит это значит что все последующие request с этого айпи адреса они пойдут именно на вот этот выбранный backend там также мы будем мы можем делать persistent по каким-то по каким то учтите пику ком или например по каким-то полям и защитить pe заголовка там также есть возможность тел persistent появится цель саше найди после пирсе солнца потоки данных у нас отправляются на модуль контент модификациям что это такое в этом модуле мы в принципе можем добавлять удалять или или каким-то образом изменять учтите в заголовке тех запросов которые у нас идут там также можем работать с куками ну kookie мы можем естественно или добавлять или удалять по модификации никакого смысла нет после того как потоки данных у нас прошли всю вот эту вот версиями обработку возвращаемся обратно на 7 switch что ж у нас делает м7 switcher 7 switch теперь уже знает какому бренду нужно открывать те типичные соединения для того или иного потока данных это он делает через опять же тисе пи ай пи задача открываются типичные сессии о чем соответствие 75 же узнает и в открытой типичные сессии потоки данных разлетаются по нужным сервером теперь небольшой перерывчик сделаю глоток воды и продолжим про проверку доступности серверов приложений вообще проверка доступности серверов и приложения для но для любого балансировщика нагрузки и то это в принципе одна из основных и его функциональных возможностей что же у нас есть для данного решения у нас есть три различные методы холсте к это очки типе и семьи и типе различные методы балансировки могут быть привязаны как к одной группе балансировки в группе балансировки у нас настраиваются непосредственно бэкенд и на которые это балансировка осуществляется там также у нас один и тот же хавчик в принципе может быть привязаны к двум разным группам балансировки что же каждый за чихал чеков мне делать с ним печных алчак на самом деле он не снятся самый глупый просто с помощью айсин перри квеста он проверяет доступность сервера и никак на доступность и естественные как доступность самого приложения проверить не может я что типичный хавчик он в свою очередь проверяет именно доступность приложений а каким образом он настраивается в типичном холсте кими можем настроить ешьте теперь и квест который будет отправляться на то или иное приложение и соответственно настроить ожидаемый и чтить и переплате там если вдруг не пришло ответа или если вдруг ответ не тот который мы ожидали то все будет плохо this типичный хавчик он в основном нужен для цепи и сср сервисов он просто проверяет возможность установки типичного соединения с тем или иным приложением на том или ином сервисе в данном случае весь первый сервер у нас доступен и переходим ко второму если вдруг почти типичный halls чек у нас не получает ответа в заданное время или или получает ответ не тот который мы ожидаем то приложение на сервере 2 у нас помечается как не доступно и просто убирается из из группы балансировки естественно на время пока она обратно не живет в данном случае у нас оси пышный hell человек прошел типичный прошел на ищите типичный умер нос на сам сервер он у нас все еще стоит в бою все еще работает и при кейдж надин на нем будет обрабатывать данные которые туда идут оси эпичный hacer un vis тесто довольно глупый в случае если мы не получаем ответа на 7 pe request его заданное время то все приложения которые сейчас на этом сервере установлена они просто помещаются как недоступны и убираются из я круг балансировать где эти приложения были использованы что можно сказать про варианты установки в основном мы распространяем наше программное обеспечение в виде виртуальных машин для обычных x80 чистых серверов принципе мы можем быть установлены и и и на голое железо но водите виртуальных машин с ними на самом деле удобнее работать также мы можем устанавливать наш application delivery контроллер как часть виртуальной инфраструктуры например встать и на замену балансировщик и скутер не tissot или упор stug если вы еще кто-то использует вот сделать это мы можем за счет того что мы реализовали red rice флейтой для управления и для мониторинга нашим решением в поле уж мы рисовали restful api а естественно было глупо бы не реализовать web-интерфейс это мы тоже сделали через web-интерфейс можно осуществлять мониторинг и и управление нашим балансировщика что еще можно сказать естественно коли никто не отменял по понятным причинам там web-интерфейса my web интерфейсами но без ком онлайн интерфейс или иногда бывает тяжеловато мониторинг также осуществляется по обычным стандартной моей семьи протоколом оценки протоколу это все та же имеется какой здесь можно сделать вывод из этого всего два принципе оба балансировщика они имеют право на существование и 1 и у другого там есть свои плюсы и минусы аль 4 балансировщика у нас естественно выше производительность у нас есть возможность работать в adsr режиме что что сэкономить немалое количество денег на покупку серверного оборудования у или 7 балансировщик у него свои плюсы это естественно больше функциональных возможностей как в плане балансировки там мы можем как-то размечать потоки данных и разводить им по разным группам балансировки так и больше возможностей в отношении непосредственно разгрузки серверного оборудования помимо того что мы можем вынести из отеля float как минимум на уровень балансировки мы также можем например сделать уже именно защиту от sinful да с помощью этом простейших сен cookies там их тоже никто не отменял всем спасибо за внимание буду рад вопросом по его спасибо за доклад если вопросов зале а вот пожалуйста спасибо хороший доклад скажите пожалуйста вот буквально 2 наверное маленьких вопросе как левой поддержка джерси если нет появится и так далее и второе планируете ли вы не только виде софтверного какого-то решения для x86 распространять например ставится на смарт ники либо на коммутаторе напрямую то есть грубо говоря берем white box запускаем там контейнер а подключаем его как так оберните су и катим ваш софт на коммутатор на коммутаторе соответственно запускаются все ваши классные плюшки и таким образом у нас 7 switch это уже х дверный решение скорее они софтверным то есть насколько вы близко к коту сейчас со smart не камеры если честно работать не планировали в ближайшее время работа с боксами с балансировщик не пробовали но мы например там у нас был такой интересный проект у нас одно из наших решений и это карьер great над я вот как раз его мы устанавливали на лайтбоксы по моему компании лайнер если не ошибаюсь а вы именно на комментаторы ставили или на железке которые именно специализируются под фильтрацию трафика и балансировка по сути это твой бокс от лонир этом куда устанавливались это был просто сервачок в форм-факторе в форм-факторе свеча с арабской архитектурой и по моему то есть по сути коммутатор они специализированные решения на который спасибо большое власти языков фаны спасибо за доклад очень актуальный на близкую тему меня быть даже 3 вопрос есть будет время и по разным уровнем вот по api молнию по себе какой-то список вы использовали какое-то уже готовы или сами написали нет писали сами насколько он зрелый то есть у него есть реактив окно лишь там алгоритмов о control то есть насколько он хорошо работает с пирсингом вообще в интернете там с медленными клиентами с всплеском и так далее да это хороший вопрос просто прекрасный естественно всю всю функциональность современного 10 стека на данном этапе мы пока реализовать не смогли например в рудники у нас одна из самых самых наверно с нами томи таких вещей воплотите peace т.к. это доделать selective тут понятно один одна из проблем стеков рацион всем ее free bsd и linux и в стеке который вынесенную free bsd стек на diptyque tam одна и та же проблема с новыми коллекциями то есть новый connection а когда приходит он и часов хэш таблица хэш таблица на по спину лаком живет у вас как-то сделано у нас используется лук фри хэш-таблицах для реализации но как раз для работы с новыми соединениями меню именно поэтому мы такие результаты на новый конечный пункт я тогда еще 2 под можно до есть все время а второй вопрос вы говорили о себе vdo пойди достаточно потому что сделать себе дал приют штуки вот эти все потом перешли к шкип между цепи и аж тебе есть л.с. и что делается для установления новых соединений то есть у вас в техасе есть короткая сессия и есть но обретёте траншей кайфу хан шейк вас своя резина ссылаясь либо вы какое то используйте готовым опять же отличный вопрос немножко расскажу поподробнее там и когда в принципе взялись за разработку этого application delivery контроллера там есть тесто функциональных различных возможностей но который предоставляет же железные балансировщик и нагрузки их просто тьма там поэтому мы мы прежде всего сосредоточили сначала на платформе это как раз scheduler идите писты вот вот этот pipeline который я показывал из ну защите теперь снова сервиса там у нас сейчас ищите типичный парсер он который используется это по сути просто партии рот james is open source а цель ав аут мы сейчас делаем просто с помощью библиотеки окон из цель 0 но и почему именно так просто чтобы быстрее но собрать семена там какой-то готовое решение которое можно посмотреть попробовать там естественно у нас в плане в плане ускорения и ищите типе парсера у нас есть идеи я кстати знаю у тебя есть наработки в этом плане да естественно видео с точки зрения социально в общем-то тоже есть но несколько вариантов но пока еще не выбрали путь у меня есть комментарий что мы мерили хан шейки в альфе и в opens цели wolfie иногда бывает быстрее там математика она в принципе похуже чем в open цели по-проще но зато у них не to locate память то есть иногда вольф из рио казус можно вольфа использовать и у five есть видео хороший письма к собственной жене в five них своя лизации т с у них раньше кивнул сильно быстрее чем в open цели то есть ну как бы сейчас весь трафик который идет на и семен весь весом поэтому но без криптографии перестановки соединений даже песен печеньки это графитом плохо mellanox и новые не знаю как интер сказал они умеют отводить но они симметричны криптографии входит это же там с некоторыми оговорками то что если какой-то пакет и там вот третий вопрос это поссам htp во степи один там достаточно просто делаете в копи да там обычным текстом это кафе просто что делать из htp два в хоффман декодирование то есть там же пакет приходят меньше потом мы его должны развернуть у меня большее представление и принципе там уже это бы такие трейдов и то есть узел копи может быть дороже чем копировать с вами говоришь сочтите пи 20 этот вопрос нам еще предстоит решать там пока 1011 поняла на спасибо тогда всё кончится под спасибо спасибо за вопрос здравствуйте спасибо за доклад у меня на самом деле много вопросов я что-нибудь из пизы вот я правильно то есть я не совсем понял у вас планировщик он уровня я dralion визир space спасибо вот учитывая что у вас обработка визар спейси идет вас учитывается специфика аппаратной платформы как-то там numa карпини один обязательно pinning котором тогда естественно всей европе ниц и ядро настраивается пытаемся этих я беру брать вообще все что можно и планировщики прерывания а вот кстати и сейчас подумал что power management и вот гипертрейдинг они вас отключать или на самом деле с гипертрейдинг вопрос хороший потому что в принципе до определенного количества ядер ну там не знаю до тридцати до сорока работа со включенными китаю прессингом она идет даже интереснее с учетом того что ну что вы это не все ядра процессора которые используются но допустим там у нас процессоры на 90 der там используем там ток 40 и и тогда в принципе гипертрейдинг он даже дает какой-то прирост производительности но когда мы берем из и целиком весь сервак отдаем под какую-то одну виртуальный фунт в общем то все ядра процессора и практически всю память им которые у нас есть она уходит в виртуал то как показала практика с hyperthreading обработает может быть чуть чуть быстрее но когда начинаешь делать zero копилось теста там не знаю на на ti или на балансировки нагрузки от четвертого уровня отключенный гипертрейдинг он всегда выигрывает там система работает стабильно понятно это я ещё хотел спросить вот у вас будет проще как-то реализован то есть обратно и чтоб сервера могли бы лазер код балансировщик у сказать что сейчас больше нам на с ним нужно давать нагрузку а повторить еще раз под пресс я говорю ну вот и механизм информирование балансировщик о том что сервер перегружен это принципе сейчас можно реализовать за счет эти 1000 холсте к на самом деле а там если у нас на сервере будет установлена но там там какое-то приложение там которая как-то будет оценивать жизнеспособность и загрузку и например отдавать все время 200 ок а в случае там перегрузки там сказать не знаю 400 три штуки pig house чек возвращает только может вернуть только 200 ок то есть у нее есть ручки начинает какое-то значение это настраивается естественно дан ответ он настраивается фан также как и запрос еще последнего просто какое оборудование нужно чтобы 40 миллионов пакетов в секунду обработать но процессор там наверно и или сетевые карты ticket это было на оборудование одноклассников я насколько помню если не изменяет память это я сейчас это был довольно давно это был 2016 год по маме и на тот момент это были процессоры 2697 по-моему в 3 сетевые карты использовались in the узкий 710 м 40 кика пик некоторые даже есть еще вопросы в зале а вот пожалуйста добрый день я хотела узнать ну судя по всему и эдипе не поддерживается по и чем у бассейна вальс м там еще не то политики есть ли планы есть ли планы что это будет дано самом деле мы естественно хотим обе объединитель 4 7 балансировщик в одно программное обеспечение и сделать возможность балансировки как с терминации так и без терминации этом как тисе пи так и у теперь и второй вопрос наверное поддерживается в 6 что еще раз в 6 протокол поддерживается большинство к такому в четвертом балансировщик и поддерживается в или седьмом еще не успели давайте они тогда тогда больше нет у нас на самом деле у нас цель 7 балансировщик я бы сказал что это альфа-версия решения там его уже как бы можно взять там пощупать потыкать но до продакшен стадии вот он будет доведён в ближайшее время что павел спасибо большое за доклад подскажи пожалуйста вы как-то свой тисе пи стек бенчмарка эти с другими особенно на там мобильных сетях плохих на реальных пользователях в данный момент вот вот как раз вот этим начали заниматься там потому что особенно интересны всякие управление алгоритмы управления окном и алгоритмы управления перегрузками да там то что его так тот вествуд но который мы там реализовали сами у себя у вас высоту до сейчас он у нас выслать да он интересно себя ведет в некоторых кейс спасибо скажи просто а это появится все для запуска только на комодики железе или у вас есть какие-то рекомендованные пайнс и вам приходилось двойной вопрос unity какие-то сетевые определенных сетевых карт которые вы рекомендуете в принципе мы поддерживаем любую и x8 шестую архитектуру плюс еще были эксперименты с запуском норми но на самом деле никакого именно продакшен интересно production интереса у клиентов у наших нет а так это обычный x86 и сервера единственно требования та поддержка с с е и а вы из 2 ну я скорее даже почти вы интерфейс тут у нас были просто от задач обработки индусских дыру с сетевыми интерфейсами там вопрос очень интересный потому что на самом деле сейчас среди поддерживаемых интерфейсов этой intel 520 intel 710 и мило нокс эти сетевые интерфейсы мы поддерживаем мы отвечаем за работу за производительность с этим сетевыми картами в принципе мы запускаемся там ее с другими сетевыми интерфейсами но опять же берем лучшие сетевые интерфейсы не за этого не видят лучшие сетевые интерфейсы это 520 карты были это прям точно мы берем на них делаем любое количество очередей вычитываем в любое количество потоков и они все время дают стабильно на кого производительность берем какие 710 интерфейса и и уже видим что там при увеличении количества те очередей больше чем восемь на интерфейс у нас просто начинает падать скорость самого интерфейса мы не можем не вычитать не отправить в большее количество потоков именно с этим были связаны очень интересные архитектурные решения которые были приняты того чтоб можно было работать с разными сетевыми картами чтобы можно было как-то подстраиваться под них есть во мне очень интересно именно затачивать какие-то конкретные каких-то интерфейсов даже больше понимаете на наиболее распространённых и именно в этом виде там то что специализированная железо оно и и она и так есть и бизнес даже если в зале вопрос а вот еще а подскажите пожалуйста вот но по сути как бы любой балансировщик это такая единая точка отказа вот планируется ли и возможно уже реализовано когда есть группа балансировщик of между ними идет обмен теми же с эль данными там дополнительными и в рамках одного балансировщика например если несколько интерфейсов на вход тоже насколько возможно вот это все в рамках лечите 4 или 7 то есть вот это все работает как бы и сделано или нет да естественно в рамках резервирования интерфейс мы поддерживаем стандартный протокол ластики тут особо нечего мы хитрые не придумывали в нати и в r 4 балансировщик и у нас уже реализована синхронизация сессий и в принципе там ну простейший протокол в ираке с синхронизацией сессий в седьмом балансировщик и вопрос стоит намного сложней там потому что синхронизировать нужной информации много больше чем в четвертому и в седьмом мы естественно планируем это делать но потому что без этого никуда но это задачка интересно и сложно а как вы оцениваете переход на dpd к но я так понял что сейчас до пдк используются но это одна из опций вот оценивали performance да на самом деле из теста оценивали в 9-ке за счет их собственных драйверов у них все равно производительность чуть чуть чуть чуть выше получается чем у того же свободно тма по или но чуть-чуть это 5:10 процент 10 процентов не меньше почти большая этот целиком собственную зароботка вот весь ваш код ну как ну как я уже ли вы подевались на ком-то о консоль совершения ну естественно мы используем ее о концертные решений у тебя опять же например я говорю в эль 7 балансировки у нас сейчас и ищите репортеры и за джинкс оттуда встроен да и состояли мы реализуем с помощью обычного по нас цель а если например брать продукт карьера great над а там уже у нас все возможные протоколы динамической маршрутизации бейджики успев и и и там не все все все что можно придумать там наверно все есть естественно это не все целиком наша разработка для динамической например балансировки мы используем такой проект как frr это бывшая кого-то мы туда сами и к митинг и поддерживаем его и у себя же используем целиком ucun случится не понизить целиком лишь продукт не все решения точно но но какие-то отдельные наработки до в планах есть но пока рассказывать не буду очень круто будем с нетерпением ждать если взяли больше нет вопросов вы можете задать их в коих после секции спасибо большое павел очень интересный доклад всем спасибо спасибо"
}