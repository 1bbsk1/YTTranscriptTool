{
  "video_id": "i8y0ipnLiCA",
  "channel": "HighLoadChannel",
  "title": "Проектирование систем на основе моделирования и теории массового обслуживания / Максим Юнусов (IT1)",
  "views": 2542,
  "duration": 2867,
  "published": "2021-10-04T02:35:33-07:00",
  "text": "дабы утром уважаемые дамы и господа уважаемые коллеги хотелось бы представить вам доклад который название вы видите достаточно до сложная длинная на экране несколько слов по первому слайду слов о себе кто я уже было сказано главное хитер то компании аттилан работаю собственно профессионально то есть за деньги в этой отрасли с 91 года архитектором за это из 4 некоторый опыт имеют с удовольствием хотел бы с вами поделиться что хотя хотелось бы рассказать о докладе коротко в двух-трех словах хотелось представить некоторые практике который мы используем реально и активно используем у себя в проектах on the практике прежде связанные с программной инженерии расчет использование математических моделей то есть сразу предупреждаю я замыслил недоброе да я хочу показать много формул на экране показать математику многие математику не любят дэн но я постараюсь математика была не очень сложным умножить поделить да что-то очень простое ну и собственно горящую немножко слов о том как будет оформлен доклад структура доклада прежде всего я упомяну уже вот эти слова словосочетания программной инженерии дам многие из вас возможно в курсе что с недавних по программной инженерии объявлена мертвой да эта наука ушла из нашей жизни и собственно надгробную эпитафию прочитал bird on air если помните было такое неприятное событие падения нашор ракета-носитель нас к космодрому восточного запущенного да возможно слышали об этом после чего собственно и причины были объявлены не удачное сочетание факторов которые не смогли тестировщики проверить сбой программное обеспечение привел к падению этой самой ракеты до после опять же выступал бетон мир на эту тему и сказал с этих пор я считаю что программный инженер мертва инженеры больше не нужно считать не нужно смысла нет даже есть в космическую отрасль этим и занимаются собственно говоря кто у нас место инженера все у нас сейчас эффективные менеджеры у нас сейчас собственно г очень опытные тех лиды да и архитектора с продвинутой интуиции но все же собственно говоря давайте немножко отмотаем назад может быть все таки удастся откопать эту самую инженер 5 и использовать посмотрим я предложу наши варианта решения возможно он вам понравится начну с самого простого так первая часть у меня будет посвящена тому что я обосную зачем мы собственно опять же возвращаемся к этой самой инженерии зачем мы используем математические расчеты вторая часть некоторые практическая покажу как мы это делаем примерные какие проблемы мы здесь получаем очень простым итак предположим перед вами стоит некоторая задача да вот неожиданно завтрашнего дня вы выходите архитектором на какой-либо интересный высоко нагруженный высоконадежный с повышенным тему них безопасности проект да собственно говоря что интересует заказчика ну высокая нагрузка высокая производительность высокая презрительно стесните рисует заказчика очень часто очень частый показатель очень частый фактор какие еще качество сейчас у нас популярны да с годами эти качества меняется на со временем становятся популярны различные так называемые и летим и так что интересует нашего заказчика раме интересовали такие факторы как гибкость отсюда например весь год до 90 е годы интересовали такие понятия как ясность кода сейчас собственная заказчика очень часто интересует такое понятие как время выхода наверняка вот снизу обозначены time to make так называемый до соответственно время выхода на рынок заказчику хочется быстром то есть ему нужно чтобы все вот эти качества были выше указанные соблюдены та же самая производительность для нас это часто время отклика и пропускная способность но еще и собственно говоря чтобы это все было ну максимум в две недели до какие ограничения ставит перед нами заказчик обычно ну сразу говорит что все это делаете быстро но людей деньги и время выделяем по минимуму но это естественно требованием это понятным ну и опять же да непременно и ограничения джейл куда без него в наше время без сажаю никто уже не ходит и плюс к этому еще дополнительное ограничение последних скажем так 5 лет все любят майк россии микро сервисы да то есть опять же куда без микро сервисов в нынешний момент неважно в принципе что на самом деле это будет по сути но называться это будет мега сервис далее как у нас делается отжарил чаще всего называется русский процесс или русские водопад или русские джайю по-разному в разных источниках выглядит это так банальный водопад но собственно к при этом соблюдены все весь когда could do все собственно глеб основные митинги аджай его используются но как минимум хотя бы стендап ежедневный проходит на самом деле все это длится где-то с полгода через полгода выясняется никто неприятности через полгода это на самом деле первый раз показывается заказчику и заказчик вид слушая не совсем того хотел есть еще с приемочные тесты my и со всякими прочими хитростями можно добиться того чтобы попасть фичи ожидаемый заказчику то с нагрузкой и производительностью с надежностью попасть в это обычно не удается простой пример вот реально соседняя команды работали ребята собственно соседней дружественной нам компании гнали вот эти самые фичи до фича киев твои ли погода работали через полгода собственно говяжьей на настоящую нагрузку вышли в прод как всегда это высшего неожиданно для них собственно и получили что сообщает заказчику слушай наши ты инстанса пост гаи не справляются с нагрузкой заканчивает хорошо сколько надо надо 240 в режиме мастер мастер собственной пусть работают на проект пришлось переписать ну и классические случае возможно у вас тоже есть такие истории кота вы можете рассказывать в чем проблема требований к производительности определены на уровне интуиции ну чаще всего собственно заказчика это хочу чтобы здесь было 200 миллисекунд сквозное время в клика да то что это путь например до севера к той во владивостоке обратно в москву да это уже никого не волнует хочется 200 миллисекунд далее собственно грузка здесь две большие проблемы либо и сильно недооценивают либо наоборот сильно переоценивать запасом особенно если заказчик уже обжигался на этой теме давай сразу учтем что у нас будет миллион транзакций в секунду не меньше далее соответственно по проектированию да собственно как принимается проектные решения вообще собственно как часто принимается проектное решение архитекторами собирается некоторых консилиум выстраивается некоторая дискуссия да и собственно говорит тот кто громче всего за является решение то есть они и выдвигается да собственно ну на самом деле есть возможно в этом какой-то смысл у кого голос громче во того опыта больше да ну не факт конечно есть некоторые нюансы базам до принятия проектных решений зачастую либо то что мы пробовали и у нас получилось да так называя референсная архитектура до попробовали хорошо получилось давайте это использовать ещё раз и ещё раз и ещё раз либо наоборот мы этого ни разу не пробовали но мы очень хотим но не было мне в проекте ни разу на пиво тарантула но сильно хочется ну просто познакомиться что за зверь такой да вот на самом деле давайте его в тянем посмотрим как это работает возможно полетит вот как-то так далее соответственно и лизации реализация часто без оглядки на произойти нас вообще-то есть разработчики ли вообще не думают о производительность либо наоборот оптимизирует все то что видео для все что движется оптимизируется опытные разработчики особенно это грешат до забывая о том что нам сказал своими кнут помните да и его известную фразу к и всех зол в программировании это преждевременной оптимизацию тестирование тестирование собственно гая и готова бы вроде заняться тестированием производительностью но надо построить макет их построить стенды и так далее займутся они этим очень нескоро ну и вывод в эксплуатацию вот здесь как раз все и случается вышли в эксплуатацию дали настоящую нагрузку посмотрели не получилось два раза переписали 100 эти операции через полтора года что-то пошло ну как то так можно это исправить можно без проблем нормальный аджай у процесс до continues интеграция continuous delivery continues deployment все вот это да собственно горшок continues интеграцию нас был настоящий они как его называют то есть каждые 15 минут мы знаем точно собралось не собралось случае чего либо сразу обкатываем либо сразу исправляем если у кого-то continent играешь на проводится в рассудке вечером дата это не совсем а ну вот как то так антиннис deliver и примерно те же самые подходы и в конце концов непрерывное тестирования так называемая эволюционная их текстура фича функции позволяющие нам определенную нагрузка работает да у нас что под нагрузкой все работает для этого нам надо держать параллельно дорогостоящий одинаковый похожий на проц стенд на котором все это будет запускаться все это будет проверяться непрерывно собираться и мы всегда знаем в каком состоянии одна две недели спинка позволяет нам собственно горящих наши проблем в чем под здесь нюансы на самом деле микро сервисной архитектура и прочие сервис на их счету указывают работу нескольких команд соответственно их периодически приходится выравнивать для выравниваем подгоняем чтобы все вместе собрали свои решения а это занимает уже достаточно продолжительное время и на самом деле получается там реально не 12 спринта пару месяцев на то чтобы в конце концов выйти на нормальный нагрузочные тесты заказчик в принципе это может терпеть может не терпеть но если он действительно завязан на время выхода на рынок это его сильно разоряет можно ли устроиться в этом случае но можно конечно такой честный совсем отжал очень грамотно построить да ну не знаю очень мало команд которые работают по честному а j'ai lu с очень грамотным построением стал очень грамотными командами которые умеют во джейл и на одном бранче да все ну соответственно что думает на эту тему менеджер менеджер думает что вообще собственно эту тему заморачиваться не надо ты ходишь менеджер слушай уважаемый продуктов ним мы сможем с тобой потерять пару миллионов долларов если собственно говоря у нас вот стрельнет вот такой-то иск что будет продукт оунер а что уже стрельнул на проводе это уже было хоть раз не было но тогда давай не пальцы ног знаменитый наш подход знакомый вам тоже дающим эти проблемы позже будет проблема будем решать и собственно когда пытаешься с этим спорить по его это пример тот же самое джае ву основоположники да вот в данном случае тот же самый тенге кулеров которые сказали да в основной части цикла разработки игнорируйте вопросы эффективности то есть производительности не партесь закончите цикл разработки тогда думаем за производительность возможно вам знаком этот подход статистика показывать что подход не работает от своего совсем вот некоторые циферки 15 года и думаю к нашему время ничего не изменилось большинство компаний которые решают проблемы позже тратят на оптимизацию более чем неделю до на решение проблем к той возникли иногда существенно больше неделю решением решение понятно решаем проблемы до их возникновения очевидное решение да если мы внимательно почитаем классиков они об этом и говорят только вот эти вот цитатки которыми зеленым здесь обозначенным мало кто приводит что пишет вносите в проект лишь таки изменить которые могут указать дорогу к возможностям в улучшения заранее предварительно вносить проекта какие-то изменения вот что гай от классики если вы думаете что это только кент бек так говорит не тот фаулер тот же самый известный многим чтобы гаити поразительность я предпочитаю видеть работающую систему и смейте характеристики учитывая полученные результаты имеют строго определенной процедуры оптимизацию и тут же добавляет то что не цитируют то что они не приводят часто однако некоторых тектон решения необходимо принимать заранее молодцы ребята подстраховались да во всяком случае ни на какие судебные процедуры и не попадут никого не подставили некоторые проектные решения надо принимать собственного заранее вот единственная проблема не говорят какие и вторая проблема не говорят как но как я буду решать проблемы производительности заранее до того как построена систему и так есть очень хороший добрый старый оправданный метод математическое моделирование мы можем взять промоделировать до нашу систему до того как мы и построили формулы математика тем более что на самом деле компьютера то только функция до знаем что подаем на вход знаем что снимем с выходом можно все посчитать многие не хотят идти в эту область по одной простой причине построение математических моделей это очень дорого вряд ли у вас в команде есть профессор математики который сможет это сделать быстро да собственно эффективно мне все время повезло у меня был преподаватель математики ушедший из университета ставший простым программистом его эксплуатировал как математика при построении модели ну не у всех такая удача ввиду сложности этих процессов многие сюда даже не смотрят программный инженер мертва мы об этом уже говорили что могу сказать на собственном опыте проверено на опыте зачастую последним математических моделей во имя нескольких минут сложность этих математических моделей элементарно это просто алгебра простейший алгебра собственного ну и при всем при этом польза от них достаточно большая экономит огромные силы чтобы не быть голословным хочу привести очень абстрактный пример конвейер я работал на очень многие компании том числе их баинг почта россии вот сейчас разрабатывают смэв 4 и собственно конверт попадается везде поэтому его взял так как интересный пример возможность с чем-то подобном вы работаете вы кстати слово конвейер да это очень древнее слово там собственно по воды фильтра до архитектура конвейера по-разному его называли в разные эпохи помню собственно говоря одна девочка архитекторов solution архитектор его чтобы у нас было только многоуровневая архитектура и приходилось фильтр расписывать по уровням фиг ты пела уровне feat фильтры 2 ранее так далее сейчас эти фильтры называются микро сервисами но это дань эпохи да тут никуда не деться вся на конвейер остается конвейером простой пример возможно тоже знаком формирование печатных представлений на вход приходит некоторое сообщение на выход должны идти печатные формы пригодные для распечатки потоки собственно говоря на разных проектах у меня были разные да собственно тысячи сообщений в секунду до миллиона сообщений в секунду которое необходимо собственно превратить печатные формы в частности там на почте россии напиваться х гибридной печати занимались молотили все это с огромной скоростью и так требования заказчика я думаю понятно да по нагрузке еще к этому добавим чтобы было веселее требования по времени отклика сквозное имел только время обработки в данном случае будет у нас не более одной секунды на одно сообщение дома я задача простая многие из отвлек да здесь сидишь здесь тарантул здесь рыбе темпе и все полетело ну ладно орбиты мкс не в море да даже не кафка уже пульсар собственно и попытаемся все-таки посчитать перед тем как использовать технологии как это сделать есть такой замечательный метод называется из п и софтвер performance engineering хороший метод вот здесь как раз диаграмм когда упрощенное как его использовать по шагам у более просто здесь сразу скажу я не буду вдаваться в детали есть такой шаг здесь оцениваем время выполнения каждого шага то есть мы должны сказать сколько мы будем выполнять процедуру на каждом шаге желательно в тактах вместе когда-то в 90-е годы это было возможно то сейчас собственно это несколько затруднительно заранее угадать сколько фактов потребуется на выполнение тальные процедурки у вас да это проблема тающего да и отсюда собственно эта модель и немножечко притормаживает не работает что делаем вот собственно и первое отступление от методологии которые хотелось бы вам предложить реально из опытом что мы делаем свою очередь вместо того чтобы оценивать и бюджете ruim есть у нас одна секунда давайте аккуратно ее про бюджете руину то же самое что на пиво вы составляете бюджет семьи да ну так условно вы получаете вы на пиво 100000 рублей в месяц 8 сухой от на ипотеку до 20 раскидывайте соответственно на свои удовольствие питание кварплата и стран как вы это делаете но зачастую нескольким некоторым произвольным образом до с учетом того сколько стоит альная задач здесь тоже самое передаем бюджет и разработчикам отслеживаем выполнение его немного внити рацион их тестов интеграционных тестов то есть если мы этот бюджет теперь кидаем разработчикам нам не нужно собрать забирать полный стенд чтобы оценить как будет работать система в целом на каждую задачу на каждый этап у нас выделен бюджет разработчики попадаешь бюджет значит все замечательная система работает в целом исходя из моделей используем микро benchmark опять же для оценок ну и заключаем контракты с внешними командами говорим вы тоже должны укладываться в бюджет вот эта операция у вас должна быть выполнены доля чем за такое то время как то так над каждым этапом проставляется цифра да вот здесь видно 10 миллисекунд 100 миллисекунд и так далее расставили исходя из понимание сложности операции можем эти цифры передавать разработчику сосуда для работы сожалению нет это самое первое наивное представление эти цифры нельзя передавать здесь много чего не учтено прежде всего что здесь не учтена в этих цифрах то есть разработчик может сказать вот мне дали 500 миллисекунд я в них втиснулся на своем рабочем компе все замечательно компах называю заказчика будет точно мощнее значит там все вообще полетит вот пион такие соображения на самом деле неплохо бы учесть нагрузку почему да потому что собственно сообщение те же самые болтаются в очереди намного дольше чем выполняется собственно иисус на том же процесса и на диске и так далее находясь в очень они занимают больше времени простаивают в очереди как учитывать нагрузку то жилин интернета разработчики как это прямо на себе представляют многие у меня тысячи операций в секунду значит собственно г одна тысячная секунды это и будет время выполнении моей задач если задача будет выполняться одноточечную секунду то исходя из статистики у нас получается бесконечное длина очереди бесконечное время выполнения почему к сожалению потому что задача приходит неравномерно не периодически приходит случайным образом с некоторыми скачками формула несколько более сложная нанесите на сложный а вот здесь их привожу не сильно сложную форму по ним можно рассчитывать что-то да в том случае когда задача у нас независимый далее соответственно обратная форму мы с вами ишаем обратную задачку несколько то есть у нас по времени отклика эрте в данном случае считается время обработки доступны время обслуживания вот получается что если у нас 500 миллисекунд то время обслуживания допустимое меньше чем 1 микросекунда вы тысячи операций секунд вот такая неприятность отдавать бюджет в 500 миллисекунд разработчику было абсолютно не остроумно да мы не решали задачу полностью очевидное решение как можем собственная немножечко облегчить жизнь разработчиков масштабироваться до если ваш семейный бюджет тысячи рублей в месяц 100 тысяч рублей в месяц до как лучше от масштабироваться вдвоем вы уже получаете 200 до или как гайд на западе а втроем уже 300 то есть там есть вариант таким образом собственно масштабирование решает нашу задачу 1000 идя по собственной мы делаем нагрузку 1 одно сообщение в секунду сейчас это легко у нас купюрница у нас динамический масштабирование соседа собственного на поле раскидали все полетело были в деньги время на обсуждение в этом случае при одной операции в секунду у нас видите вся она не 500 333 миллисекунды в бюджет тиану меньше это из-за вот этого неприятного момента из распределение можем передавать эту цифру разработчикам как думаете вот нагрузку чинидов сегодня учли все бы было хорошо но все плохо на самом деле ситуация еще хуже приведенные выше форму работают со средними величинами в 330 это сайдинг а среднее значение а заказчику обычно не хочется чтоб у него в среднем до все выполнялись за секунду ему хочется чтоб все выполнялись за секунду ну или вы если вы с ним договорились 99,5 процента выполнялись секунду формовки которые позволяют по перцентиль им все это раскидать соотношение среднего с перцентилями здесь приведены мы ими пользуемся достаточно условный но работают хорошо если вас перцентиль 90 95 то делитесь соответственно 5-тый в итоге что получаем 80 две миллисекунды против 500 о которых мы говорили ранее я думаю понятно да в чем не приятно здесь и так что мы сделали уточнили у заказчика тайване и с учетом перцентиле распредели время по контентом по компонентам извините используем полученные знания вывели соответственно последнюю цифру бюджета можем отдавать ее разработчикам все ушли на иных самый хитрый догадывается что не все иначе покиньте задавал этот хитрый вопрос на самом деле есть нюансы все хорошо но есть нюанс введенные выше форму работает когда у вас собственно распыление нормально и летом собственно пуансона там вот это господи как специальные так далее то есть вот это самое м помечаемые буковками возможно вам знакома эта форма кендалла да когда там очень у нас помещается ммм коми когда вас м очередь при нормальном распыление все хорошо все это работает но бывает что на спине вас не нормально немножечко такой немножко более хитрое вот такой вот здесь вам издалека не видно это хвостик нарисован такой длинный хвостик распыление с длинным хвостом дан в этом случае все плохо например если нагрузка увеличится в 2 раза во сколько раз вы имел при к увеличится by очень длинного хвосте может увеличиться в бесконечность вот такие страшные вещи поэтому распыление надо учитывать тоже форму когда счет распыления здесь проведена тоже достаточно простая но выглядит конечно страшно но как ей пользоваться на следующем слайде я покажу как задачка очень простая здесь до сообщение у нас бывают сложные и простые и сложные обрабатывается примерно за 005 секунды даст точнее простые сложные за 2 секунды процент тоже примерно здесь покинуть до вероятность того что придет сложно или простое сообщение соответственно расчет идет следующий время отклика считается исходя из этого по формуле который показывает нам что мы не укладываемся в наши цифры из кстати дак словом фактически как мы это все используем как вы можете это все использовать есть куча программ стоит бешеные деньги там в евро и так далее позволяющие сети математические модели считать я рекомендовал бы excel дешево и сердито загнали модель куда собственно я сразу получить результат можете тут же что-то менять нагрузку проценты и так далее все эти формулы достаточно легко обсчитывается и к своим вся математическая модель здесь работа своей активностью боя тивности то есть изменением частоты прихода сообщений изменение в длительности обработки сообщений влияет на да и мед и к намного более существенно чем даже утилизацию ее надо учитывать не надо бороться честно кой мне лень писать вот такие сложные формы вот эти все сложные расчеты проводить рисовать эти модели в excel поэтому я боюсь очень простым образом есть у меня два потока задачи сложные простых сразу развожу на разные сервера и все то есть один сервер у меня молотит сложные задачи другие простые вариативность в рамках каждого сервиса у меня получается достаточно стабильно и предсказуемо и и расчеты простые и производительность максимально эффективно как то так в итоге что мы сделали с вами про моделировали проектируемую систему в excel определили вопросы для уточнения требований какие там перцентиле нужных заказчику использовали павел эффективных тактик масштабирования да и разведения нашей нагрузки по вариативности получили на руки цифры для обсуждения бюджет для разработчиков сколько им там можно на выполнение операции отдать предположение и контракты для внешних команд ну и сайзинг для бизе для бизнеса да мы с вами потратили на это 40 минут но я здесь больше говорил чем работал на самом деле на практике это примерно так же выходит около часа и вас модель более менее готова варьировать в ее можете вообще в секунды используя exxon в дальнейшем соответственно модифицируем нашу модель используя стратегию адаптируемой точности отгоняем циферки выявляем узкие места в системе определяем где самые длинные очереди собственно гаи узкое место и начинаем собственно бором тактик бороться с этими узкими местами до здесь у нас тоже есть свои методология свой подход свой чеклист какие тактики самые безопасные какие наоборот лучше оставить на потом например известно что кэширование это взвода и и лучше вообще никогда не использовать эту тактику ну и собственно говоря это правда рамки данного доклада уже не влазит у меня поэтому собственно этом месте я pf прерываю доклад и собственно говоря предлагаю перейти к части вопросов-ответов спасибо большое важно отметить что те кто нас смотрит онлайн у вас нас паровой с кнопка и или слева ну где-то оно там сбоку есть чтобы подключиться в эфир и вы можете прямо с вывести вас выведут на экраны вы прям зададите вопрос лично спикера это очень интересный опыт на мой взгляд а так можно пока начнет задавать вопросы из зала поднимайте руки к вам подойдут девушки и 1 микрофон да за самый лучший вопрос мы вручаем книжку вот которую максим вручит вне зависимости от того вы в онлайне ли в оффлайне мы вам пришлем или дадим здесь человек с какой ролью занимается данной работой но в данном случае вот на разных проектах по-разному бывало несчастное гаи мне как-то в жизни произвол меня программист у меня в математику да собственно занимался программист этой задачей но в настоящий момент все чаще это этим занимаются у не архитектор но предыдущем проекте этого учитель добрый день спасибо за интересный доклад вот ваших моделях очень интересно все расписано конечно платоновское распределение так далее как вот учесть часы наибольшей нагрузки когда больше сообщений поступает пиковые нагрузки вот да хороший вопрос на самом деле для по учету собственно пиковой нагрузки реально делаем самое простое решение здесь предполагаем несколько режимов работы системы в нормальном режиме в пиковом и жиме и так далее прочитай модели для каждого режима отдельно собственного и смотрим что у нас получается и возможно уточняем требование напел предполагаю что случайно пел dos атаки мы позволяем себе снизить немножечко наш выпуск нашего имя утки когда ухудшить вот как то так то есть разные режимы работы спасибо за доклад а у меня такой вопрос в плане многие любят видите как изменяется модель в динамике ну то есть просто как бы вот мы сейчас видели голые цифры это конкретно как раз они отражают информацию конечную мозги и у меня был такой опыт когда значит составляли имитационные модели значит ли заказчика чтобы показать как будет модель вести себя в этом плане я понимаю что некоторые формулы из этих можно и номинацию модель наложить что примерно понять как это работает как ваше мнение сталкивать вы сами-то то есть да тут два варианта есть расчета на самом деле имитационные модели для собственно г то есть те которые используют статистику прикидывают собственного реальный там моделируют ситуацию верных поступлений запросов так далее сообщений и собственно математические расчеты более простые аналитические да вот мы как раз более активно используем аналитические расчеты основанный на on вот то что его показывал этот теории очередей до известного возможно вам собственно говоря и на ционные модели мы тоже использовали но честно говоря они требуют больше затрат на сою подготовки эксплуатацию или соответственно до покупать уже готовый продукт который позволяет им подобное моделирование проводить и не всегда это возможно тем более я работаю на аутсорс и да собственно говоря мне каждый раз приходя в проезд проектов проект надо тащить за собой все продукты до заново все этапе покупать это неудобно мне удобнее работать с простыми моделями хотя в некоторых случаях согласен это эффективно был имитационной модели дает больше точность но с другой стороны для оценки мы же используем как модели чаще всего для оценки простого случае сложного случая то есть пессимистической оценки оптимистической если мы попадаем с нашими требованиями между ними то все замечательно то есть нам точность особо большая не нужно нам достаточно граница не кататься добрый день я тут у меня скорее вопрос такой административный а ваш проджект менеджер он в курсе что вы используете вот такие подходы для на последнем проекте пока это не внедрил да поэтому он еще не в курсе да и связанный с этим вопрос а как вы убеждаете проджект менеджеров что это действительно стоит делать и что это прямо правильный путь ну поджиг менеджеры бывают двух видов да когда мартин фаулер не буду повторять за фрагом что в некоторых случаях технический специалист должен саботировать решение project-менеджера да и то не очень хорошо по большому расклады убеждать всегда приходится деньгами да прежде всего мы показываем риски то есть собственная в процессе анализа задача ну как это проводится до чаще всего проводится мозговой штурм силами архитекторов есть их много да собственно или если у нас нет архитекторов силами технических специалистов просто рисуется диаграмм к компоненты и там прикрепляются стикеры риск здесь есть здесь потом садится кто-нибудь один и переводит эти риски в деньги на язык понятный менеджером что если мы здесь вот залетим давай этому моменту то мы потеряем столько-то если здесь потеряем stockade и вот это все подается на стол project-менеджера соответственно прага менеджер project-менеджера у кого кто отвечает за финансовым соответственно на этом языке разговор получается достаточно конструктивный спасибо добрый день спасибо за доклад ни один вопрос частные так скорее докопаться а второй на более глобальный частный вопрос это то что не секрет что иногда выполнить 10 операции дешевле чем 2 по очереди и как если более того заказчика очень часто нужно ни за одну миллисекунду выполнить задачу a million выполнить за минуту соответственно какие-то куски могут вот таким образом обрабатываться пакет на как адаптировать модель для пакетной обработки более глобальный вопрос вы очень интересно сначала устроили затравку pro 130 серверов под гримом уклонились от рассказа собственно как же ваша архитектура напиться на решение ресурсных задачу потому что у нас есть как минимум сетевая пропускная способность диски память ядра и разные задачи в разные ресурсы упираются о вашу модель сейчас от не учитывают спасибо да все так и есть собственно на самом деле первым но начну я со второго вопроса так сформулируйте еще вас да пожалуйста как как вы его начали но я так услышь модели не только к учету времени обработки но и ресурсов данного это первые опоздали это 2 а первый был как адаптировать модель капот batch обработки отдельных задач да все правильно и так собственно и по первому вопросу однозначно успела вопросы как адаптировать модель собственно к обработке матчевый до сложных задач и тут все то же самое на самом деле реальность просто единственное что вы рассчитываете это исходя из нагрузки при высокой нагрузке но если вы обратите внимание ожидаемое время отклика на самом деле варьируется очень медленно в зависимости от нагрузки там меняется собственно говоря очень незначительно процентами там не ледой долями процента да там все упирается в нагрузку при большой нагрузке действительно производились ресурсов имеет большее значение модель собственных достаточно хорошо подходит и для подобных расчетов если вы примерно представляете сколько у вас идет там собственно тельной операции потом собственно сами операции достаточно понятны и прогнозируемого их очень просто можете пометить башмаками до работа с памятью да ну как в гугле есть может быть знаете таблица до цифры которые должен знать каждый разработчик сколько времени у нас уходит на операцию ввода-вывода сколько времени у нас уходит на сетевую до операцию и так далее да знаете на в рамках сода у вас пойдет там две миллисекунды там например на обмен сообщениями в рамках сода да там или собственно при работе с диском данную сколько там есть у вас не дай бог какой хддд тонто еще и база данных из кельна и да там 200 миллисекунд например на транзакцию ну что то в этом роде примерно такие цифры представляя вы можете представлять как вы работаете собственно г с иисусом и понятно опять же что мы делаем когда мы работаем с иисусом нас этих ресурсов не хватает их всегда не хватает не хватает печь всего чего диска до самый противный иисус время операции вы не согласны но может и памяти нас памяти сейчас проще стало когда-то давно-давно памяти жутко не хватало там все в тиски в лесу помогать постоянно помните времена для меня сейчас память не является уже таким страшным местом как они на самом деле чаще всего самой медленной операции дисковые до приходится их оптимизировать что делаем самое страшное что можно придумать да собственно это сплошное проецирование когда собственно данные необходимые для выполнения задач проецируется просто в то место где они будут востребованы для собственного это сплошное копирование данных да и поддержка согласованности дальнейшее это надо очень и очень аккуратно все делать понятно и очень очень аккуратно разводить но это дает эффект по производительности си она является основным качеством данном случае другие качеством и при этом гробим конечно прежде всего поддерживаемых систем я ответил да мы все взрослые антон devops не просто такой ваш математические модели они где-то в бизнес цикле предприятия состоят ли то как программное обеспечение имеет свойство развиваться расширить свой функционал и соответственно иметь больший охват по каким-то метрикам показателем тем же и адаптация вот этих от моделей где-то в цикле заложена и как это делается у вас да конечно собственно и собственно проекция процесс ставить на бизнес-моделирования донат точно математической зените моделирование то естественно конечно это должно быть включена в процесс полностью включена в процесс начиная с этапа анализа где от аналитиков требуется сбор информации в частности более детальной до чем они обычно себе позволяют точки зрения до той же самой нагрузки до учет нагрузки учет пирс intellij учет всего собственного по времени отклика и так далее все вот эти качества нужно выяснять с чек-листы дополнительные да здесь появляются соответственно дальше соответственно этапе архитектуры появляется дополнительный пунктик необходимо проработать математическую модель производительность тоже соответственно включается до соответственно на этапе тестирования то выливается в некоторых как сейчас модно говорить с функцию которую включено уже нас там в процесс и continuous integration на и так далее да собственно который проверяет эту нагрузку все эти метрики соответственно учитывается на всех этапах работы и дальнейшей модель адаптируется подгоняется после прорыв гонки 1 до когда у нас появляется реальные цифры но как модель тут же адаптируется под эти цифры и собственная уточнена и опускается дальше в оборот то есть это еще и терцы он найдет то есть если правильно понял при проектировании фичу уже имеет смысл адаптировать адаптировать какое-то моделирование если мы видим риски по производительности до то есть опять же как сейчас это бенито архитектору не прыгает на все задачи сразу так как это был в двухтысячных до собственного решает все только там точечный объем где у нас есть риски где мы можем не попасть всем здравствуйте спасибо у меня такой вопрос по примеру немножечко не подойдет но частенько бывает система в которых данные после вот этого временного промежутка должны быть выброшены и когда мы подходим с точки зрения очереди прорезаем по медиане мы начинаем лопатить целую кучу данных который никому уже не нужны тут два основных напрашивающегося решения это выбросить чёртовой матери то есть рот лить каким-то образом и подойти с точки зрения лифа но он то есть last and first out и вот этого второго решения я нигде не видел мы несколько раз с коллегами разными обсуждая лет никогда не было приведено соответственно есть ли опыт внедрения вот такого подхода и возможно каких-то более-менее простых расчетов но что мы не смогли предсказать то есть по выгрузке данных до соответственно результатов которые получились но да то есть вот тот же самый конвейер что попросить тоже самый конверт что у вас по сути только если мы не укладываемся нужно все выбросить ну да есть такой опыт да соответственно там все всевозможные решения тайну опять же многоуровневые хранилище и так далее да the young так называемый когда собственного холодная горячая и так далее у нас идет да если мы не успели обработать у нас что-то ушло в холода собственного заморозили на время ну честно говоря последнее время мы обленились достаточно у нас на рынке много систем которые делают это автоматом и за нас и до фактически поставил железку да ну взяли тот же самый пульсар например да для организации очереди он умеет из коробки уже это делать главное там ему по листы поставить там снизу чтобы можем во все это выгружать и не заморачиваемся да понятное дело когда у вас на самом деле очень сложные требование по производительности не всегда готовое решение вас устраивает да здесь более сложные бывают кейсы здесь нового опять же случалось и такое да использовали всякие хитрые методы в частности например выгрузка кусками частями разделения да там собственно говоря чтобы не активировать сегодня блоком разбиение на некоторые или мину это опять же классе когда собственно для все это просчитывается сбрасывается в очень какие-то быстрые системы хранения в очень собственно самым что ни на есть простым примитивным без преобразования способом до которые потом легко поднять но такие же непонятно более дорогие и я не могу сказать общего там какого-то рецепта здесь каждый раз надо заново смотреть эту ситуацию у меня только вопрос ваш пример был больше про систему которая еще не создана что делать если какая-то система уже работает не первый год есть какие метрики имеет ли смысл вообще создавать модели не или если какие-то особенности дам хороший вопрос про legacy системы на самом деле с моей точки зрения да конечно имеет в какая причина для этого да понятное дело что вы в этом случае даже вам проще вы можете просто загнать уже готовые цифры которые идут там с нагрузочного теста да фактически в эту модель и посмотреть что у вас получается что вы получите в бонус к этому всему вы не просто подтвердите до мнения ваших тестировщиков о том что там конечное время отклика и пропускная способность будут такие вы еще собственно сможете моделировать это все на ходу вы можете варьировать цифры в том же самом excel изменять что-то модифицировать да например встречать нагрузку новую до появляются новые сообщения добавляются в другой сложности и так далее кто-то скидывайте и сразу получаете предсказание тут же сразу моментально в несколько секунд по-моему это достаточно хороший эффект который стоит за крат еще вот тут дополнить немножко туда получается речь не идет уже 40 минутах это как тот мимби ресурс начинка как рисуем саму сначала рисуем круг получается сало у система может быть очень много элементов то есть до сотни тысяч и функций как минимум ну опять же дан сотни тысяч функций я соглашусь то есть и система очень большая то нужно очень много народа которые обслуживает по большому раскладу если собственная функции функциями да опять же и но есть опять же функции связаны с рисками есть собственно места вот так называемые бутылочном горлышке до которые собственно трудно преодолевать где высокая нагрузка приводит собственных высоким риском в этом случае конечно же моделировать надо не всю систему целиком не все функции а те функции которые на самом деле у нас является узким местом но прежде всего если мы поговорим о функциях системы бизнес функциях дали системы функциях рассмотрим те на как который более всего нагружают систему до количества транзакций в секунду по которым более всего идет ну или satio соответственно нагружает какой не другой до элементом системе там очень требований требовательных диск куда очень требовательны к сети или еще что на территории epam моделируем только их ну и ещё один момент до пытаемся построить систему так чтобы связи в ней было минимум до низко связанную если мы это выполнили на первых этапах работы до собственного это и моделирование у нас проходит намного более эффективным если у нас система лапша да то моделирование конечно получается тоже некоторая проблема ответил здравствуйте вопрос скорее догонку к предыдущему есть такие системы на которых компоненты нарастает ну динамически то есть в текущей float добавляются допустим дополнительные валидации ищу жену на подобное вот если возможность помощью ваших формул как-то спрогнозировать это ну элегантно не путем просто мы рассчитали там 08 секунды роста скинем две сотые две десятые как-то более точно да на самом деле ну в большинстве систем на самом деле там минуту конвейерные особенно если там не требуется высокий нет высоких то его не по времени отклика там как вся на какой-нибудь оркестра tor болтается и все это ipad процесс у нас может идти как-нибудь очень неровно очень сейчас модно в сумочку какую команду до в центрах который будет всем этим управлять как-нибудь загибать все это неправильным образом можно ли работать с этими системами где бизнес потоки у нас имеют куча альтернатив да без проблем тоже да все это решается сразу по правде сказать это не мое формула газ на эти формы мы позаимствовали из той же самыми для vogue spain немножко просто перевернули немножко по-другому использовали но вот собственно и дан вот собственно и что там предлагается в частности предлагается следующая по всем альтернативам оценивать короткие пути и длинные пути таким образом говорить например что для прохождения сообщение у нас возможно длинный путь самое долгое время его прохождения и короткие соответственно и потом в соответственно эти вот пути уже осмотреть как оптимистичные пессимистичные сына и нашей работы смотрите попадаем и в них или нет а там дальше уже разные стратегии есть не попадаем даже пессимистический вариант меняем архитектуру и попадаем в пессимистически не попадаем точнее в оптимистически из не попадая да если попадаем в оптимистически не попадаем в пессимистический вариант применяем то тактики всевозможные чтоб выровнять все это дело до а если попадаем в оба вообще не боимся все все замечательно работаем дальше спасибо коллеги что выслушали не надо кстати данный основная задача моя была собственно заинтересовать вас в идеале заразить да не кровит имеется ввиду вот именно вот эта тема если что мой telegram я с большим удовольствием отвечают опишите если будет с кем-то это все обсуждать я буду страшно рад"
}