{
  "video_id": "4Y5lcLZaFbA",
  "channel": "HighLoadChannel",
  "title": "Zabbix 3.2 - мониторинг качественно нового уровня / Алексей Владышев (Zabbix)",
  "views": 15825,
  "duration": 3196,
  "published": "2017-04-22T14:48:25-07:00",
  "text": "Да добрый день Спасибо что пришли Сегодня я расскажу о зак 32 Это новая мажорная версия закса прежде всего да Разрешите представиться Меня зовут Алексей Влады Я являюсь автором закса я начал работу на над заксом В дено где-то девяносто седьмом году и сейчас в общем-то я отвечаю как за род Макса Так в том числе и зараз закса как компании сам закс разрабатывается уже не только мной и в меньшей степени мной больше командой командой закса о ЧМ мы будем сегодня говорить Ну немножечко о проблемах большого мониторинга и потом поговорим о том как зак 32 позволяет справиться с нашими с нашими с какими-то определёнными проблемами большого мониторинга Ну давайте сначала может быть определимся что Что такое большой Мониторинг это достаточно условное определение нуно может быть если у нас где-то больше тысячи может быть устройств тысячи десятки тысяч устройств Да это действительно большой мониторинг может быть сотни тысяч устройств даже Да и здесь возникают разного рода проблемы конечно большим мониторингом можно назвать не знаю мониторинг и 500 устройств и сотни устройств всё зависит может быть От количества метрик от того насколько сложна наша it инфраструктура Так что это понятие достаточно условно Какие проблемы возникают управление конфигурации Да это очень-очень большая проблема особенно что касается может быть скажем динамики Да когда наша инфраструктура не настолько статична нам нужно постоянно добавлять метрики Хосты какие-то управлять триггерами если мы говорим о заксе Ну что здесь нам помогает нам помогают здесь шаблоны и нам помогает здесь в общем-то возможность закса интегрироваться с другими системами с configuration Man системами с Pet chef а с другими с другими системами а другой проблемой является конечно динамическая конфигурация то о чём я уже говорил здесь зак предоставляет возможности связанные с обнаружением автоматическим обнаружением на сетевом уровне устройств зак предлагает авторегистрация к заксу и говорит Вот я новый хост Давайте меня монитор и также закс предоставляет низкоуровневое обнаружение это обнаружение на уровне одного устройства скажем появилась у нас файловая система зак тут же понимает что у нас есть новая файловая система которую нужно мониторить Да появился у нас новый порт в циско свечек понимает тут же принимает решение о том что нужно мониторить этот порт следующая проблема масштабируемость да Опять же зак здесь предлагает прокси для распределённого мониторинга прокси как способ немножко разгрузить зак сервер Z предлагает партиционирование Да вы все знаете что эндом закса являются таки relational база данных My Date скажем db2 Oracle Их достаточно сложно масштабировать как в общем-то и другие базы данных достаточно сложно масштабировать на запись Ну и здесь мы предлагаем позиционирование и активные и в общем-то активные проверки они тоже помогают убрать нагрузку забег сервера Ну я должен сказать что на самых больших инсталляция сейчас один забег сервер способен перерабатывать порядка сотни тысяч проверок производительности доступности в секунду Да это то что мы видим темах наших клиентов с версии с версией 3.2 а высокая доступность тут на помощь приходит мастер Master Master slave репликация базы данных Да решение от Linux H там coring pacemaker всё это нам помогает достичь высокой доступности зак сервера zab инфраструктур не только сервер но и прокси Ну иногда нам нужно делать что-то на стороне на стороне агентов в том числе ложное срабатывание - это очень-очень большая проблема вообще кто из вас использует зак хорошо а другие системы мониторинга или Зак и другие системы мониторинга да А И кто сталкивался со сложными срабатывания или ситуации Когда приходишь в понедельник открываешь inbox там сотни может десятки А может быть даже тысячи сообщений от систе мониторинга так две руки три руки Окей хорошо Ну действительно Действительно это очень большая проблема И почему это является большой проблемой потому что это Это убивает Доверие к системе мониторинга да то есть один раз мы получаем сообщение от там например закса да то что вот скажем зна недоступен Смотрим Да нет доступен вроде нормально работает Второй раз мы получили сообщение о том что мол недоступен Нет подключаемся всё нормально странно почему так а третий раз мы уже смотреть не будем да то есть третий раз Когда забег скажет там волк волк мы этому не поверим да и это действительно убивает Доверие к мониторингу к любому мониторингу и в общем-то пользователи начинают игнорировать все абсолютно все сообщения от системы мониторинга Ну какие здесь есть решения Да а всем известные решения - это умные триггеры когда мы когда мы принимаем решение не По последней проверке не по значению скажем не по последнему значению метрики а Анализируя историю за период времени проверки становятся менее чувствительными соответственно мы можем чётко чётко с проблемы и для выхода из состояния проблемы ну этот пример я привожу достаточно часто Скажем мы входим в проблему Когда у нас например дискового пространства меньше 10% Да это проблема Проблема Да потому что диск может закончиться достаточно быстро но выйти из состояния проблемы Вот этот выход из состояния проблемы Он должен произойти тогда когда у нас дискового пространства станет 50% да не 10.1 или 10.00 а допустим 30% 40% или 50% да соответственно нам нужны различные условия для входа в состояние проблемы для выхода из состояния проблемы зак всё это позволяет делать И на самом деле Вот то то что появилось в версии 32 одна из Новых фич это то что мы разделили рие выражения части то есть триггерное выражение которое определяет проблему и в общем-то опционально второе триггерное Выражение условия выхода из проблемы сейчас это конфигурировать стало намного намного проще мы не должны использовать макросы мы не должны строить такие сложные какие-то сложные конструкции которые нам достаточно сложно понять Да два разных условия Это новая функциональность версии 32 вообще на самом деле используя умные тригеры используя различные условия для входа в состояние проблемы выхода из состояния проблемы всё это нам позволяет Ну действительно фактически на 100% избавиться от ложных срабатываний Ну на самом деле это так то есть мы должны просто пересмотреть Те условия которые у нас есть в заксе если мы видим что происходят ложные срабатывания Обратите внимание на эту функциональность Подумайте может быть более точно определить проблемные условия и условия выхода из состояния проблемы Ну на самом деле возникает такой Парадокс чем лучше система мониторинга работает Тем больше она обнаруживает проблем и вообще что с этим делать Да мы заходим в консоль мы заходим в дашборд видим для не знаю для такого большого мониторинга для мониторинга больших it инфраструктур это абсолютно такая обыденная вещ Когда у нас есть сотни открытых проблем да вот сотни открытых проблем Мы знаем что некоторые проблемы будут решены допустим Не знаю там чере полчаса некоторые будут решены через Неде нас сотни открытых проблем и в этом ориентироваться оче сложно проблемы появ Проблемы исчезают Да что см делать Ну наверное есть два пути первый это каким-то образом уменьшить Вот это количество проблем На входе Да с самого начала и второй путь правильно визуализировать проблемы чтобы нам было легче понять что на самом деле происходит с нашей системой Ну давайте поговорим теперь о новой функциональности Что добавилось 32 в 32 добавились теги теги событий или теги проблем что это означает это означает что вот если раньше мы определяли Триггер Вот был у нас Триггер скажем сервер перегружен да Вот его триггерное выражение Возникала проблема что сервер перегружен и какие атрибуты у этой проблемы были это сервер мы знали где это произошло когда это произошло может быть группы хостов и вс верси 32 Ну например перегружен наверно имеет смысл добавить Да в каком дата-центре это произошло например Адам 2 в каком те это произошло скажем в про Или это может быть и и сервис да то есть Стью кагор все эти теги опциональные абсолютно мы можем использовать теги там Датан en можем использовать наши свои в общем-то любые произвольные теги и теги действительно дают нам возможность абстрагироваться Вот от этого низкого уровня может Серви ориентированный мониторинг Да когда у нас все проблемы привязаны к какому-либо сервису опять же сервисы могут быть низкого уровня сервисы могут быть более высокого уровня бизнес уровня но это уже возможно сделать например сервис db сервис Help сервис Web Когда возникает какая-то проблема связанная СБО мы понимаем что да это это проблема этого сервиса но мы не ограничены только сервисами можно предположим или г Application или какой-либо другой тег но мы этим не ограничены что ещё возможно фактически мы получаем различные измерения наших проблем то есть мы можем на проблемы смотреть с разных сторон И если говорить о структуре тега то сам тег состоит из имени то есть имя тега оно обязательно и опционально значение Ну например environment - это имя тега enf а Production - это значение тега Ну и различные измерения какого рода например сервис сервис там Oracle или сервис скажем http CL сервис наша helpdesk система Ну что угодно а сервис также то есть значение тега Да по сути имя тега можно получить из самой метрики Допустим мы мониторим фай в файле Мы видим что Ну предположим скажем My остановился мы вот этот My можем выбрать Да используя регулярное выражение взять myq и поместить его Как имя Как скажем значение значения сервиса с использованием регулярных выражений по дата центру можем поделить все проблемы по дата центру опять же можно использовать как константу можно использовать и пользовательские макросы Data Center в этом случае мы значение тега управляем значением Тега на уровне шаблонов у хостов или на глобальном уровне То есть это наши пользовательские макросы макросы Да и значениями тега не обязательно управлять на уровне каждого триггера индивидуально это не очень эффективно если мы знаем что хост находится в Дант York 2 ой мы просто устанавливаем имя скажем значение максан ВР 2 на уровне одного Хоста или на уровне шаблона ну скажем область К чему относится проблема к производительности к доступности может быть что-то связанно с безопасностью en Production или то есть насколько наша проблема влияет на пользовательские сервисы заметят ли эту проблему наши пользователи да то есть здесь можно получить массу различных измерений наших проблем и Взглянуть на наши проблемы с разных роп это может быть Константа это может быть пользовательский макро который мы управляем на уровне шаблона на уровне Хоста либо на уровне на глобальном уровне и также мы можем вытащить значение тега из самого значения метрики это полезно скажем для трапов для там SN трапов полезно для Лог мониторинга Где мы можем получить допустим там имя приложение да или имя процесса или имя сервиса и использовать его как значение тега Ну по сути получается такая картина у нас много-много проблем скажем сотни проблем но если мы посмотрим а сколько же проблем в продакшене оказывается может быть не так много может быть 30% или 20% от всего количества проблем Мы смотрим сколько же проблем у нас в одном из дата-центров тоже уже не так много всего лишь проблем да сколько критических Проблем критичных Проблем всего три проблемы если допустим я отвечаю за один из дата-центров Мне важно понять на чём мне стоит сейчас фокусироваться я использую фильтр мой дата-центр Critical Impact - это то на что то что сразу замечают пользователи я увижу что всего лишь есть одна проблема Я должен идти и исправить эту проблему это очень-очень важно версии 32 мы над этим работали долго и у нас было несколько дизайнов пытались действительно думать о том подумать о том а как правильно отобразить проблемы чтобы люди там из нока смотрели на экран им было бы всё понятно да что мы сделали зна здесь хоро или плохо видно по сути мы придумали новый такой вид это Monitoring Моторин проблемы и мы заменили Monitor EV То есть сейчас список список событий мы не показываем Ну вот раньше как было у нас был список событий произошла проблема исчезла проблема там и так далее и тому подобное трудно во всём говорим о том что у нас есть проблемы у нас есть триггеры но Триггер - это не проблемы Триггер - это по сути генератор проблем у нас есть один Триггер он может генерировать много проблем и у нас есть проблемы и вот мы смотрим на каждую из этих проблем индивидуально и что мы здесь видим Ну во-первых появился очень такой понятный На мой взгляд да то есть мы чётко видим когда проблема произошла сегодня вчера может быть год назад или в прошлом месяце вот что произошло в течение последнего часа очень очень понятно И наглядно А северити насколько проблема Критична ну здесь ничего нового А дальше Recovery Time если проблема решается то у нас появляется Recovery Time и статус переходит в состояние res Да проблема решена и этот статус будет мигать вообще любые изменения любые изменения на этой странице приводят к тому что статус мигает появляется новая проблема статус мигает течение какого-то время это можно всё сконфигурировать да можно сделать так что статус вообще мигать не будет либо будем мигать в течение 15 минут либо 30 минут соответственно Люди работают ночную смену они ну там трудно сразу мы смотрим и не понимаем где тут новая Проблема где старая если что-то мигает мы понимаем что произошло какое-то изменение Даше имя Хоста проблема и дальше у нас продолжительность проблемы acknowledgement status подтверждена проблема или нет А мы можем в общем-то кликнуть и посмотреть кем она она была подтверждена подтверждена когда Какие комментарии оставил пользователей дальше действия действия которые произошли как результат этой проблемы например было отправлено два email сообщения или был открыт тикет в Help системе либо Ну я не знаю зак перезапустил какой-то сервис автоматически Да всё это будет видно в списке сервисов если произошла какая-то проблема допустим зак был не способен перезапустить сервис мы увидим что что-то произошло опять же Клик нем и действительно увидим все детали Ну и может быть одно из самых главных новшеств это то что сейчас мы видим теги Да вот наша первая проблема тут же мы видим Окей эта проблема произошла в этом дата-центре в New York 1 дата центре в продакшене и сервис http balancer Да слишком много запросов в секунду это связано с сервисом http balancer дальше допустим сервис gir остановился что мы видим Data Cent frankfurt 2 другой Датан staging environment Service GE Ну Оке staging environment не так важно чем Production Ну и так далее и тому подобно Т понимание Что происходит в системе Ну ВС Это хорошо с другой стороны действительно если у нас будут сотни проблем что здесь будет здесь появится йн и в этом будет очень сложно разобраться опять же да появляются фильтры жи может работать в режимах первый режим есть недавние проблемы в этом режиме мы отображая как проблемы так и Неда недавно решённые проблемы Проблемы в состоянии решены проблемы если мы Переключи в состо в режим проблемы мы будем отображать только проблемы решённые Проблемы не будут э а что же было в прошлом месяце тогда мы переходим в режим истории и кликаем кликаем н по пенгу либо используем опции фильтра и идём идём дальше в историю Ну и какие здесь возможности для фильтрации это группы хостов это Хосты Application Ну тут по сути ничего нового единственное вот в группах хостов можно заметить что мы добавили иерархию для групп хостов наконец-то версии это доступно Да и есть фильтр в том числе и по тагам опять же меня интересует один из дата центров Дант New York 1 env Production Я задаю этот фильтр таким образом и всё я вижу что у меня уже не сотня открытых проблем А всего лишь одна проблема Да с моим http балансе и другая Проблема была Недавно решена с МЗ очень-очень полезны И если мы их связываем с Тага то это такой хороший инструмент для для operations действительно понять что происходит с нашими сервисами Что происходит с дата центрами что происходит например с перформанс либо Что происходит с проблемами безопасности оповещение А у проблем появились новые атрибуты теги Ну и конечно хотелось бы использовать их в оповещения и мы это делаем да в оповещения появились новые условия это теги скажем если я отвечаю за http balancer Я хочу получать сообщение там и в 2 ночи в 3 и в 4 ночи о критических проблемах что я делаю Я просто использую эти условия скажем http balancer IMP Critical environ Production и что мы ещё сделали версии 3.2 мы разделили операции на те операции которые выполняются когда мы Когда возникает проблема и на те операции которые выполняется когда мы решаем эту проблему да То есть раньше это был в общем-то один список и не так лег или или мы делали различные действия различные экшены определяли и этим управлять было не так легко сейчас сейчас мне кажется стало намного намного проще переходим к следующей теме корреляция событий вообще что такое корреляция событий вообще корреляция событий как я для себя определяю это возможность не знаю скажем определить какие-то зависимости или может быть взаимосвязь между разными событиями между разными проблемами да то есть мы получаем по сути используя корреляцию мы получаем больше знаний о тех проблемах которые на существуют и в версии 32 мы добавили два уровня корреляции проблем первый такой уровень или может это второй уровень это глобальная корреляция проблем когда мы работаем со всеми проблемами и локальная корреляция проблем её так называем когда мы работаем с проблемами одного триггера Ну сначала немножко расскажу о глобальной корреляции проблем что это такое я буду приводить простые примеры Да это очень-очень простые может быть наивные примеры просто для того чтобы объяснить Каким образом это работает Скажем мы мониторим сетевые устройства доступность портов У нас есть проблема Да что тридцать третий порт на цис на пятидесятая циска недоступен соответственно у нас есть онные теги номер порта и Switch Датан астм 2 пор 33 Switch Cisco 050 приходит Ещё одна проблема И мы пытаемся понять связана ли вторая проблема наша новая проблема с тем что у нас уже существует Да сороковой порт тот же самый Switch недоступен Ну тут корреляции Видимо нет Мы пытаемся в этом случае мы пытаемся скорть по портам То есть если произошла проблема с тем же самым портом На том же самом свече тут тут мы не видим никакой корреляции в общем-то один порт там 33 второй порт 40 Окей по нашему правилу корреляции Мы мы не находим зависимости между одной проблемой и второй проблемой а возникает ещё одна проблема опять же пор 33 наци недоступен Ну например вообще может возникнуть вопрос почему у нас та же самая проблема второй раз возникает Ну допустим мы мониторим доступность портов используя различные методы допустим с помощью с трапов с помощью полинга и например с помощью анализа си слогов Ну предположим Да соответственно вот допустим с помощью вот нам прил что порт недоступен а потом через нето врем с тоже обнаруживаем что тре порт недоступен На На той же самой цис Да мы обнаружили вот эту зависимость корреляцию что мы можем сделать забе мы сейчас можем сделать две вещи первая вещь Это закрыть старую проблему и второе действие которое мы можем сделать То есть либо перво либо второ либо сразу два и второ новую проблему Ну что мы впрочем и делаем мы просто автоматически закрываем вторую проблему просто чтобы не грузить дашборд не грузить наших людей которые отвечают за мониторинг иначе бы они увидели первую проблему вторую проблему и нужно было бы как-то пытаться не знаю вообще объединить всю эту информацию чтобы понять что что что тут запись говорит об одном и том же то есть мы закрываем автоматически закрываем а вторую проблему а ну и вообще Для каких случаев это может работать Ну конечно первый случай - это когда мы действительно мониторим один сервис различными способами да Либо мы мониторим один сервис с различных локейшен допустим там из Москвы из Владивостока там из Лондона из нью-йорка Да и мы не хотим видеть вот вот эти вот Может быть там п проблем горят одном и том же ну здесь можно придумать очень очень много применений вобще глобальной корреляции пример локальной корреляции это Это нечто другое это корреляция на уровне одного триггера и опять же Я приведу пример который достаточно простой Ну думаю что будет легко понять о ЧМ я говор скажем мониторинг сервисов есть фай который накапливает в себе состояние сервисов вот у нас 2 3 4 или три сервиса остановился сервис My остановился через некоторое время My запустился ris остановился ris запустился и и и запустилась сервисов может быть Сколь угодно много да и соответственно Вопрос вот сколько триер триггеров и метрик нам необходимо для мониторинга из этих сервисов самостоятельно вот в заксе фактически Да по одному на сервис да то есть одна Метрика скажем для мониторинга мала вторая для жи на каждую из этих метрик по одному триггеру действительно так так бы работала версии версии 3.0 что можно сде в 32 име одну метрику и один Триггер Я просто расскажу как как это делается Вот наш магический Триггер имя триггера скажем сервис там Down да то есть сервис или My недоступен что что это такое здесь здесь используется специальный синтаксис который нам позволяет получить значение скажем полу имя сервиса и значения метрики то есть мы вырезаем My мы вырезаем или мы вырезаем R из нашего файла да то есть один Триггер генерирует проблемы типа сервис myq недоступен сервис недоступен сервис какой-либо ещё сервис недоступен появляется Новый сервис в лог файле нам ничего не нужно переделывать тот же Триггер будет замечательно работать дальше несколько тегов предположим Amsterdam 2 environment staging и дальше имя сервиса опять же имя сервиса мы получаем из из строчки файла то есть мы вырезаем используя регулярное выражение и мы получаем сервис mysql Service girir Service redis сервис не знаю там pog или Service Oracle и дальше в конфигурации триггеров появляется дополнительная опция которая называется Tag for matching То есть когда проблема исет мы пытаемся скорть е мы пытаемся понять что мы должны ка какие из открытых проблем этого триггера мы должны закрыть и мы закрываем только те проблемы у которых совпадает значение тега сес Ну я поясню сейчас как это работает строка это трир генерирует проб остановилась дро Тут всё понятно а сес mysql остановился опять же zab генерирует проблему этот Триггер тот же самый Триггер генерирует проблему mysql остановился дальше mysql мы запустили mysql и вот здесь как раз происходит корреляция то есть вот это вот событие mysql запустился started Да started - это условие э выхода из состояния проблем ST - это условие входа в состояние проблем а мы видим что мы должны закрыть только те проблемы у которых совпадает значение сервиса здесь значение сервиса га сервис gir здесь значение а га сервис mysql мы закрываем проблему то что mysql остановился Теперь всё в порядке mysql работает ris остановился ещё возникла одна проблема что с редисом проблемы редис запустился мы закрыли проблему с редисом G всё ещё висит и запустили жиру соответственно проблема с джиро пропала Да это очень вот эта вот локальная корреляция на уровне триггеров Она позволяет нам допустим я не знаю есть у нас какой-то Лог событий в котором есть как проблемные события так и события которые закрывают эти проблемы и вот вот вот этот механизм позволяет фактически с помощью одного триггера обрабатывать обрабатывать такие Лог файлы либо скажем snmp трапы А ну в каких-то случаях может быть просто какие-то числовые значения вот теги сделали Мы теги в 32 добавили мы корреляцию но всё-таки это ещё фундамент для будущих изменения вот ту та функциональность о которой рассказал это лишь ну такая основа для функциональности которая может появиться скажем версии 34 и 4.0 эти и теги можно использовать лучшим образом и и корреляцию можно делать более умной да то есть сейчас это это это просто такой Pro of копт по сути которым уже можно пользоваться для достижения таких реальных целей для упрощения мониторинга версии 32 появилось ручное закрытие проблем наконец-то Я не знаю если мы посмотрим на этот ure requ посмотрим на количество голосов Ну это по-моему там топ три Один из фи Кстов из топ три да забег пользователи просили Сделайте пожалуйста ручное закрытие проблем потому что действительно Бывает так что например файл нам сообщает о том что у нас возникла проблема но событие по которому мы могли бы автоматически закрыть такую проблему его просто нет Да его просто нет Да например какой-нибудь медленная которая выполняется там 100 секунд возникает проблема А как её закрыть Да соответственно появилось ручное закрытие проблем но не все проблемы можно закрывать вручную только те проблемы для которых мы установили флажок на уровне триггера Да на уровне триггера мы сейчас можем позволить или не позво пробле скажем Пишем сообщение что вот там была какая-то проблема с myq ВС сделали Всё должно работать и появляется также возможность закрыть проблему мы тут скажем кликаем нажимаем кнопку подтвердить и всё проблема Проблема закрывается и в списке проблем она будет вид см образом увидим промаре и будет видно что проблема решена таким-то пользователем И если мы пойдём в список мы увидим Ну те комментарии которые оставил этот пользователь А что ещё нового добавилось в 32 иерархические группы о которых я уже немножко говорил тоже наконец-то да то есть вот эта функциональность она Ну я думаю будет очень востребовано у пользователе То есть можно делать иерархию Самое главное чтобы длина группы не превышала хост группа не превышала там 255 символов это наш текущий лимит более простое управление правами У нас есть Хосты иерархические хост группы скажем у нас есть группы группа там Европа может быть европейские страны мы просто можем задать права для одной группы Европа соответственно все эти права перет там СШ Германия Европа СШ не знаю Португалия Испания и так далее а фильтрация возможности фильтрации очень заметно улучшились версии 32 по сути мы фильтрацию добавили Ну практически на все страницы закс интерфейса Да и опять же можно фильтровать в том числе и по иерархическим группам Например я хочу увидеть в дашборде проблемы которые произошли с европейскими серверами Я просто использую там евро СШ Да и соответственно я увижу проблемы с европейскими серверами а полный список улучшений можно увидеть в документации на 32 и читайте Release Notes и можно задать вопрос Вообще как перейти на 32 И вообще я должен напомнить что 32 является мажорной версией 32 но версии это те версии такие версии которые мы поддерживаем в течение 5 лет Long Да с долгосрочной поддержкой 3.2 не является такой версией она будет поддерживаться до выхода следующей версии 34 плю 1 месяц то есть примерно 6-7 месяцев Но это не означает то что мы предъявляем какие-то ну скажем другие требования качеству продукта есть проходит также мы разрабатываем Также можно использовать в продакшене а также мы коммерчески поддерживаем если вам нужна коммерческая поддержка а сроки поддержки можно посмотреть на нашем веб-сайте Да Life cycle Release policy там вот 3.0 поддерживается в течение 5 лет 3.2 может быть до марта следующего года если мы в марте выпустим 34 ну и соответственно 4 34 смарта плюс там 6-7 месяцев вперёд Ну и обновление с одной версии на другую в общем-то как обычно действительно достаточно просто мы устанавливаем новые бинарник забе серверы прокси мы устанавливаем новый интерфейс запускаем зак сервер Ну и зак сервер по сути сделает всю работу за вас агентов трогать не нужно Да в заксе мы поддерживаем обратную совместимость с агентами начиная с версии 1 если вам нужна новая функционально которую предлагает предлагают агенты 32 Да вы можете установить новых агентов Но это делать не обязательно спасибо большое вот вопрос здравствуйте Спасибо за очень интересный доклад Скажите а при глобальной корреляции нотификация уходит при возникновении проблем или не уходит а сразу автоматом закрывается если мы закрываем новую проблему то её как будто бы и не было То есть при автоматическом закрытии нотификация о том что проблема возникла во втором ме глобальной корреляции не будет а нет не будет но если мы закрываем существующую проблему то будут нотификации о том что проблема закрыта проблема исчезла можно это сразу задам Да спасибо за доклад А не подскажете триггеры можно вешать будет на теге Ну то есть условно Я хочу получать Триггер который срабатывает только с тегом типа мент продаж да то есть они в триггерах будут участвовать Аа нет аа тут вот какие есть планы в заксе есть функциональность связанная с it сервисами Да it сервисы - это такой уровень абстракции над it инфраструктурой То есть когда мы определяем наши сервисы и нас в общем-то мало интересует то что происходит на самом низком уровне Да и что мы планируем сделать Я не знаю когда мы это сделаем но думаю что версии может быть 3.4 или 4.0 это мы свяжем а триггеры с it сервисам с it сервисами с помощью таго То есть если сейчас эта связка идёт через триггеры то есть индивидуальные триггеры мы должны Триггер привязать к сервису ещё один Триггер к сервису это менедж ну очень-очень сложно да то эта привязка будет с помощью с помощью тегов намного упростит Вот ещё два вопроса Спасибо А не подскажете а можно с помощью вот вашего сервиса мониторить метрики прикладного уровня у нас сервис нашар и мы там какие-то свои метрики ведём и хотим смотреть тоже на общем дашборде вместе с системными событиями И второй вопрос Если ответ на предыдущий да то можно ли делать мнение то есть допустим сегодня Метрика такая неделю назад она была другой Ну допустим с недельным окном потому что у нас бизнес периодический у нас там есть сезонность некая то вопрос Можно ли это делать с помощью Да ответ на первый вопрос да И на самом деле существует Если вы зайдёте на share.com Существует такой агент как раз под Да и можно из вашего приложения отправлять метрики сразу же на забег сервер всеми Гами вот эти ме теги - это не уровень Рик - это уровень проблем на уровне метрик у нас нету тегов То есть когда мы определяем проблему вот это вот проблемное условие мы к этому проблемному условию привязываем теги где мы уже говорим К какому сервису относится проблема в каком там скажем дата-центре Она произошла и так далее да и да да в заксе в заксе это называется то есть мы пытаемся скажем поймать аномалии когда мы сравниваем текущее состояние системы с состоянием системы в прошлом если допустим Ну если мы мониторим скажем какие-то или бимери мы видим что например количество регистрации пользователе сегодня по сравнению с тем что было неделю назад мы можем генерировать проблемы Да это ВС происходит в реалтай вот вопрос вот да первый вопрос Вот а-сервис я так понимаю это то что говорилось сла Да и я так понимаю что сла сейчас не считается по тегам Да только по триггерам да именно так да вот и соответственно ещё один вопрос Это вс-таки фильтры Да и использование этих фильтров скринов то есть хотелось бы условно говоря а сделать журналы проблем по каким-то тегам Да и соответственно разные скрины это повесить возможно ли это сейчас или нет потому что были с этим большие проблемы сделать именно журнал проблем вот а то есть воз то есть возможность скажем в дашборде показать различные проблемы Да ну даже не дашборд а условно говоря сделать свой кастомный дашборд Да который выделить какому-то конкретному пользователю Да условно говоря сервиса какого-то или ещё что ну вообще использование фильтра для скринов по сути дела Возможно ли или нет А на данный момент возможности фильтрации для скринов достаточно ограничены То есть я думаю что мы можем фильтровать Ну насколько я сейчас так вспомню только по хост группам Но на самом деле то что мы показываем вот этот вот Monitoring problems это это есть некий виджет который рано или поздно появится в скринах Я думаю версии 34 он он будет пере в сри в том числе и тогда в скринах мы сможем задать Список проблем вместе см с каким-либо фильтром в том числе и по тагам Ну то есть сейчас даже нельзя по тагам условно говоря сделать эти скрины А да скрины не поддерживают эту функциональность Да ещё вопрос тут Добрый день спасибо за доклад а Скажите насколько вот эти ивенты влияют на перформанс то есть вот у нас сервер работает на пределе сейчас на версии 3 если мы переходим на 32 Нужно ли нам апгрейдить А я думаю что апгрейдить не нужно А почему опять же нужно смотреть где botle Ne Да что мы сделали в 32 это вот вот те картинки которые я показал это это такая Визуальная часть под капотом много других изменений и в том числе мы отделили исторические проблемы от текущих проблем то есть мы на стороне забег сервера в базе данных держим список текущих проблем что это нам даёт это нам даёт значительный выигрыш по производительности когда мы просто Заходим в Monitoring problems мы получаем список этих проблем мгновенно моментально Да и в этом смысле Вы можете получить даже выигрыш по производительности с другой стороны мы сейчас записываем проблемы как в историю так и вот в эту таблицу Да и здесь ну выигрыша выигрыша нет поэтому мне трудно сказать Будет ли лучшая производительность либо худшая производительность Скажите пожалуйста как лучше организовать различные тифи Ну например на основе новых возможно тегов или е как-то у меня есть Гру устройств разные абсолютно часто не связанные с собой группы ответственных и какие вот лучшие стратегии в области версии 3.2 можно придумать Я думаю нужно я не знаю Мне сложно ответить на этот вопрос надо знать организационную структуру нужно знать каким образом вы делите устройства и какие требования по нотификация Да ну я я сразу не могу ответить Ну допустим по не нужно чтобы если устройство включено в определённую группу то каким-то образом Яне сказал что вот по триггерам уровня выше чем в этой группе нужно отправить SMS вот такому-то таким-то пользователям как это увязать правильным образом давайте это отдельно обсудим Хорошо Алексей спасибо за ваш продукт за доклад А у меня вопрос такой что у вас есть автоматическая э autod Discovery устройств там сервисов А как насчёт когда дело касается облачных различных услуг То есть мне появляются и исчезают Да как бы скажем так эти сервисы как в глобальном пишите сами масштабе это всё смотреть каким-то образом можно в дашборда это выводить не Ну на самом деле здесь есть решение Но скажем такое самое кастомное решение - это использовать zab API какой-то configuration менеджмент системы либо с Сервис менеджмент системой как только у вас появляются какие-то сервисы я не знаю там cons предположим Да дёргается Z API и добавляете недостающие Ну элементы для мониторинга в зак это один способ второй способ использовать если мы говорим о там я не знаю уровни скажем зак агентов то это авторегистрация то есть появляется новы обч какой-то сервис на нём есть zex Агент этот zex Агент подключается к zex серверу и мы тут же начинаем его мониторить Ну тут тут важно понять ну может быть какие требования Какие Какие сервисы Вы мониторить ещё момент по поводу того чтобы мониторить внутри докер контейнеров Угу То есть когда у меня приложение на сервере крутится то в принципе Агент не сложен туда воткнуть А внутрь докер контейнера у него идеология такая что одно приложение на один контейнер и как тогда мне метрики собирать с этого приложения Ну я думаю что я не помню всю терминологию Докера Да но есть возможность объединять докер контейнеры когда один контейнер по сути получает доступ к ресурсам другого контейнера и в общем-то это как раз и способ как можно прикрутить агента к к другому Дору и если вы зайдёте на доке Hub то мы сейчас предлагаем официальные имиджи Докера закса да для Докера который включает в себя и зак сервер zab Проси frontend базу данных и Агента в том числе Я думаю что это очень такая хорошая точка с которой можно начать и посмотреть как это может работать Угу Вот ещё был вопрос здесь вот вот здесь Наверное Добрый день Алексей спасибо за доклад вопрос по поводу графиков Угу они плохие Окей неплохие Да ну то есть сложно выбирать и к примеру даже вы упомянули докер контейнерах вы с ними поставляется плагины такие как Фер а которые позволяют выбрать кастомные сервера кастомные графики и допустим ринг то есть возможность делать график по одной метрике с каждого обнаруженного объекта в рамках одного правила Как пример Ява п да то есть от каждого хи то есть сделать это в один график вот такие вот вещи Ну то есть когда Ну графана да но мене тче системы не очень удобно особенно когда у тебя инфраструктура Ну то есть несколько стадий там йн продакшн альфа бете если сейчас нужны такие графические дабор я действительно посоветовал бы посмотреть сть стороны я не хотел бы раскрывать все планы Да но мы работаем и очень усердно сейчас работаем над скажем так дашборда нового поколения для закса Я надеюсь что до версии 4.0 Мы допили и в версии 34 уже что-то появится ну в 34 что-то появится в 4:0 Я думаю что это будет уже такой совсем хороший законченный продукт е один вопрос возник с эскалация и дежурства допустим сейчас немножечко сложно это настраивать вот может быть есть планы какие-то по упрощению вот этой вот схемы потому что мы допустим уровне эскалации дежурств каких-то политик вот мы настраиваем на внешнем инструменте на который посылаем нотификации из закса потому что там это ну действительно удобнее и проще Может есть у вас какой-то по по этой части а 4 ниб что мне хотелось бы сделать мне хотелось бы Добавить календарь то есть поддержка универсального календаря а ну я не знаю То есть да в род мапе это есть На каком месте Мне просто нужно посмотреть да то есть успеем мы это сделать или нет но календари они бы помогли ну такие универсальные календари помогли бы не только с дежурства но и скажем с теми же самыми триггерами да то есть когда мы например знаем что сегодня праздник и мы выражения скажем используем другие или у нас другие пограничные значения для триггерных выражений Ну то есть вообще сам сама концепция календарей мы о ней думаем Ну ничего не могу пообещать пока"
}