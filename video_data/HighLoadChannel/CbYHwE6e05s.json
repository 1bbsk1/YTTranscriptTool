{
  "video_id": "CbYHwE6e05s",
  "channel": "HighLoadChannel",
  "title": "Эволюция процесса деплоя в проекте / Денис Яковлев (2ГИС)",
  "views": 310,
  "duration": 2922,
  "published": "2017-07-30T00:47:27-07:00",
  "text": "мой доклад называется эволюция процесса dpf проект давайте немного познакомимся меня зовут denis я работаю в компании 2гис около полутора лет занимаюсь вопросами а continues delivery для проекта web отдела до этого работал в компании parallels и там прошел путь от инженера до тимлида и так диплом то есть если мы с вами и выпускаем не коробочный продукт мы пишем какой сервис который работает где-то ну как многие называют в дикой природе там на серверах куда заходят пользователи то у нас нам недостаточно просто разработать этот сервис и протестировать нам нужно еще его вот в эти в эту дикую природу нам надо еще как-то за тепло и то есть доставить туда код вместе со всем необходимым для его работы и из чего это состоит да то есть понятно нам нужно доставить прежде всего кода то то над чем мы работали большое количество времени там тестировали проще да то есть мы можем сделать это многими способами до всякими общедоступными это мне не очень мы можем datakam как как не заливать можем подключить серваке наши к системе контроля версия да и просто пу лица дальше данные если мы у нас база данных да мы используем в нашем сервисе базы данных у нас периодически возникает потребность с этими данными что-то делать на то есть нам нужно либо менять структуру базы данных либо поменять сами данные то есть если мы постоянно пишем ну какую-то новую функциональность мы развиваемся у нас ну неизбежно это происходит в основном это осуществляется с помощью миграции наверное все уже знают это механизм если мы в разработке используем какой-то общепринятые фреймворка nissan не нами написано которые мы уже существующие узнают там миграции встроены да то есть обычными командами мы это все выполняем вот как например у эми грей туджан к админу my great в общем тут все просто потом мало какой сервис но не требует конфигурации да то есть мы за delivery cod данные про апдейте ли нам какие-то изменения на случились мы должны сконфигурировать да то есть мы там у нас есть конфиг файл и и мы там есть какие-то значения мы их меняем и в процессе жизни у нас тоже в эти конфиг файл и либо добавляются новые значения либо старые там где прекратятся они дропают ну и после того как у нас это поменялось да нам нужно либо сервиса какие интерес стартовать либо оставить как есть и если мы все таки не обошлись без использования стороннего программного обеспечения соответственно мы же должны позаботиться о том что это программное обеспечение его на наши сервера к это поставить сконфигурировать определенным нашему ну а образом который нужен нам и своевременно его апгрейдить ну или не апгрейдить если там вдруг в новой версии этого софта вышла какая небогато что он все не вы не полегло сразу возникают да какие решения в лоб мы у нас там есть один сервачок да мы идем это все делаем ручками да потому что ну все шаги известны все известно как делайте либо у нас есть допустим когда команда разработки и команда эксплуатации на нам команды эксплуатацию одним какой-нибудь сидит вот команда разработки пишет от документацию что вот сейчас вот такой релиз и для его успешного деплоя нужно вот сделать то-то то-то и то-то вот и админ смотрит на эту документацию идет по ssh на сервак и ну и соответственно это все ручками выполняется то есть он раз сходил 2 сходил потом ему это все надоело он естественно берет то что общедоступные под рукой да он берет ваш первый все это автоматизирует нам потому что зачем мы все это делать руками когда можно быстренько все это автоматизировать и просто запускать баш это все просто хорошо да но быстро все это делается да там все хорошо мы работаем до cod delivery самые то ничего не замечаем это хорошо только до определенного времени да да то есть для когда простых проектов у нас есть допустим 1 сервачок на нем база данных и наш кот лежит да то есть это вполне менеджер был одним человеком да и это может там он вполне с этим справляться но мы же делаем мы же хотим развиваться до мы развиваемся у нас появляются ну во-первых наш сервис становится сложным у нас появляются новые сервисы у нас там приходят больше пользователю нас уже не обходимся одним серваком у нас уже появляются новые составляющие какие-то да то есть у нас уже не один сервером наш с кодом до вас уже большой боевой контур там через нескольких серверов состоящий там компонентом и прочее вот и у нас в связи с этой возрастающей сложностью с нашим развитием у нас появляются проблемы до которых у нас раньше не было у нас увеличивается количество документации ну то есть ну и вот этой вот документация которая упоминал дата то есть информации о том как мне провисит как ну ним никак специально обученному человеку провести релиз вот у нас даже если этого человека уже давно заготовлены где-то там скрипты которые их там хорошо в определенных условиях выполняли свою работу до сложность этих скриптов у него тоже возрастает их количество растет до теперь мне нужно ни один сервер апгрейдить а мне нужно обратить базу а гуриди скотт мне там еще что то надо делать вот и сложность возрастает это тоже тот ну то есть скрипт это тоже тот софт в котором может быть баги ну в общем это это начинает тоже приносить определенную головную боль ну и так как этот мы начали это все так быстро делать да пока мы еще как бы не испытывали особых проблем у нас возникает эта обычная ситуация не возникает присутствует какое-то количество ручного труда сначала это тоже как бы не сильно заметно потом это нарастает тоже как снежный ком и а ручной труд что это ручной труд это дополнительный тоже источник человеческих ошибок да то есть кто то что то не так не туда записал и записал туда ну не так тот второй неправильно скопипастил да и в итоге вот это вот такая вот получается ситуация когда очень много ошибок и все они возникают непонятно когда она закончена непонятно ни откуда берутся и в итоге вот у нас вот этот специально обученный человек который отвечал за релизы наступает такой момент когда он только и делает что релизе то есть у нет они свободного нету ни времени на какие-то другие его задачи нет времени нет времени даже поесть то есть он выкатил один релиз пока его выкатывал пришел второй релиз во время этого релиза случилось какие-то ошибки потом еще пришел патч на этот релиз в общем это вот большой большой такой головняк нервозность возрастает бизнес нам приходит и говорит ну чё вы не можете да да клиентов доставить код это же блин просто и быстро у нас еще он тут вагон фич идет дальше давайте что-то с этим делать вот в то же время не знаю как все достаточно давно определенное время уже существует такой подход в нашей индустрии да как им инфра стараться законы который говорит нам что мы должны подходить к описанию нашей конфигурации конфигурации нашего предложи приложение таким же подход также к ней подходить как и мы подходим к разработке программного обеспечения на это водки в море сказал это немного больше чем простая автоматизация да потому что автоматизация то мы просто берём тесто что мы ручками делаем мы загоняем скрипты он работает подходе infrastructure за коды мы используем все практики тузы и подходы как мы берем это из разработке программного обеспечения до нашего сервиса и применяем к на века описание инфраструктуры то есть если появился вот такой вот новый подход соответственно для него и для его реализации со временем появляются и тулы до то есть программное обеспечение вот какие какие вот инструменты есть да то есть есть такой класс программе класс продуктов configuration management systems да то есть cms не путать с content management system да потому что это уже достаточно известное более другое вот типичные представители уже у всех на слуху ansi был шеф по 500 вот и от они призваны созданы для того чтобы нам как разработчикам ну или как компаниям некоторым до помочь в управление инфраструктурой и вот 1 одной из задач одним один из звезд кейсов применения такие такого программы обеспечения это является приведение нашей системы в определенной описанная нами состоянии да то есть у нас есть абстрактный сервак то есть вот нам выделили дали да то есть там ничего нет или там есть как они голая ось то с помощью таких инструментов мы приводим етот сервак в нужное нам состояние дальше я немного то есть более подробно расскажу что счету это как давайте посмотрим на несколько некоторые из этих инструментов я выбрал те которые используются у нас в компании чтобы ну как-то на примерах объяснить ну во-первых ansi был до антипу программное обеспечение оно достаточно простое для понимания написано на питоне и модульная достаточно легко устанавливается и как мы для себя отметили в компании что порог вхождения для использования было он достаточно низкий да то есть если мы даем берем человека на говорим вот тебе ансип разберись и начни его использовать тону в концу недели у нас уже бодренько этом пишет все это там понимает вот то есть что нам нужно сделать нам сначала после того как мы установили ansi балда нам сначала нужно написать а что у нас вообще есть да то есть чем нам хочется работать то есть мы файлик простой текстовый да и создаем и вот пишем как 10 на примере что вот у нас есть группа веб-сервер они там у нас два и два из тех сам паладин example 2 игру под db серверов да то есть это db-1 db2 то есть вот вот это вот наша грубо говоря боевой контур и с ним мы хотим работать дальше вася близ такая сущность как play буки мой бог это набор инструкций то есть те шаги которые once i был предстоит сделать чтобы как раз вот наши сервера привести в то состояние которое нам нужно то есть play буки состоят из вот хост да то есть мы указываем код като то есть с какими хостами мы хотим работать это секс это вот как раз ок указываем те шаги которые nuance ему нужно сделать и есть командочка вот мы говорим что запустите вот этот вот playback а информацию о хостах возьми вот из этого файла и вот пример play book то есть вот вот мы указываем хост да то есть вот если кто запомнил веб-сервер это та группа хостов которые у нас указано в анси был инвентаре то есть мы говорим что вот мы и джинс хотим поставить на те серверов которые мы указали там и at the tasks состоят у нас его данном случае звук шагов то есть мы не работает в общем так буду есть мы сначала объявляем имя до чтобы нам потом было ну самим разобраться чем мы делаем да то есть мы пишем install in джинкс вот этот шаг у нас отвечает за установку и джеймса и пишем в данном случае ум это как бы модуль это вас в одну отвечающий за установку через свой ум мы говорим что юм поставь нам пакеты джинкс последней версии вот даль дальше следующий шаг мы должны как с configure and jynx и поэтому мы модулю тимплей говорим что вот у нас есть в рамках этого play book есть файл в default konce положи его пожалуйста вот по вот этому пути и после того как ты это сделал в одну то есть на тихой перри стартуем jinx то есть мы берем запускаем вот эта вот команда чк он был playbook с этим play буквам и после выполнения этого play book у нас нас на серверах группы веб-сервер спал по и получается настроен на установленные джинсы настроенные кант нам надо вот архитектура примерно как выглядит я взял это из ну из интернет это можно нагуглить эту картинку свободно то есть вот у нас есть хост инвентарь и play books кори modulo вести то модули которые написаны с самой команданте был до что вот как раз вот то что отвечает ей об этом ну и прочее casta models это то что там написано не знаю комьюнити рик каким-нибудь ещё contributor ами он плагин понятно да то есть вот и соответственно запускается ansi был идет по хостам и выполнять то что ему нужно примечательно то что на тех кустах с которыми мы работаем у нас ну дополнительного программного обеспечения не надо то есть у нас как наши серваке стояли ира вы работали так они работают ну там должен быть по моему только питоном питон по моему есть практически везде вот с этим вкратце вот так вот понятно давайте для сравнения посмотрим шеф шеф это тоже ну из того же класса программное обеспечение написано другой компании по моему мнению но немного сложнее тысяч не должны может быть намного сложнее чем анти был да потому что у нас а если человек ну как я уже говорил концу недели начинает писать разбирается one себе и начинает уже выдавать какой-то код до а по с шефом ему несколько недель приходится в недели две-три разбираться как там что работает какие фишки человек пройдет вот что ну чтобы выдавать какой-то тоже результат значит какими мы здесь оперируем терминами да то есть куб books рецепты то есть это у нас если его в случае ansi бывает а у нас код если кто внимательно обратил это код написанный на ямале до 300 человеко читаемое все там хорошо понятно случае шефа кабуки рецепта это у нас руби то есть здесь потребуется какое-то время чтобы освоить и ну если не полностью но каких но какой-то базовый уровень этот язык программирования дальше у нас есть роли это способ группировки ляд группировки этих водку буков то есть допустим у нас есть роль веб-сервер тоже до которую которая там для для настройки web-сервера нам нужно там поставить индекс configure еще что-то сделать там поприседать там еще прочее вот это у нас разбита на несколько кубиков и мы делаем отдельную роль веб-сервер как в котором говорим что вот эти вот кабуки у нас туда входят и эту роль назначаем на нужные нам серваке и тогда мы видим что вот у нас есть нам столько то веб-серверов и такие вот такими вот способами мы приводим их в нужное состояние вот есть у нас involvement это описание нашего окружения то есть если у нас есть девелопмент окружения есть пейджинг окружении есть production окружении на которое отличается какими-то настройками то есть мы здесь имеем возможность по-моему там джейсоне описать объявить список переменных которыми отличаются наше окружение и соответственно значение для каждого окружения прописать вот шеф у нас существует в нескольких конфигурациях ну то есть его как можно установить первый этаж с сервера то есть мы ставим отдельный сервак где-то в нашем окружении в котором вот как раз описанных хранятся все наши кубу key role in worriment и ноды с описанием там и прочее на каждом для каждой ноги нашей стоит клиентская программа из печенья даже утилитка шеф клиент которая настроена на етот сервак и она ходит туда за описанием за описанием этой ноты до то есть она приходит говорит я вот такая вот но да скажи мне пожалуйста что у меня есть по ролям по на какими дополнительным настройкам по рецептам че мне нужно здесь сделать да ну шеф сервак и отвечает вас выполняя пожалуйста вот эти вот рецепт и вот с такими вот входными параметрами ну и утилитка все это вот применяет вот если кто обратил внимание в анси для немного по-другому то есть в случае с шеф сервером да то есть мы во-первых ставим дополнительное программное обеспечение на нашей ноды и мы заходим на сами но ты либо как-то удаленно говорим что должны позвать вот этот шов клиент в ансамбле мы говорим once i был playback на нашей рабочей тачки и он идет уже сам посуди выполняет все на наших серверах вот ну это одна конфигурация шефа дальше у нас есть шеф зиру это такой лайтовый вариант шеф сервера то есть это без gui он in memory то есть мы просто его такого легковесного подняли загрузили туда всю нашу информацию там для тестирования проверили все это за тепло или убили 6 шаров и у нас освободилось все хорошо вот так же есть шевцова это вариант и как open-source версия по моему утилитки шеф клиент которая в отличии от первых двух случаев оно не требует подключения к какому-то внешнему серваку да то есть нам здесь не нужно ни шеф сервера низших зиру мы просто в этом случае говорим шов соло что вот у нас есть вот путь по которому лежат у нас там play буки рецепты наши поставь пожалуйста короче оттуда вот такие ну выпал не поставь я выполню пожалуйста туда таки это вот рецепт и вот здесь здесь естественно упал в такой конфигурации мы получаем что все наши руки рецепты там они должны храниться не храниться находиться в нужный нам момент времени на том же инстансе где у нас расположен шеф сола вот ну и это вот пример такой очень простой как у нас выглядит установкой джинса на шифер в рецептах вот допустим мы здесь это я хочу отметить что это очень маленькая часть функциональности до вот этих всех инструментов которые я упомянул то есть там есть гораздо больше много-много чего много возможностей us кейсов составляющих там и прочее это большие сложные инструменты они решают широкий круг задач и сейчас в рамках этого доклада мы говорим только пока об одном из кейси это вот как так нам за тепло это грубо говоря вот допустим мы что-то посмотрели определились там решили что он там подходит какой-то инструмент и что же нас ждёт помимо всяких технических вопросов да то есть мы же работаем в команде мы можем сказать просто что мы возьмем сегодняшнего дня мы используем допустим антипу ну хорошо что мы с этого еще дальше получаем получаем и новые такие процессные до что ли вопросы это мы прошли эта зона ответственности да то есть я как допустим team leader решая что теперь мы там используем on seba он у меня стоит вопрос а кто у меня писать play букета должен разработчики они ко мне приходят и говорят мы не будем писать play буки потому что мы не знаем боевую конфигурацию хорошо я иду к админам и говорю теперь вы пишете плей буки мне говорят мы будем писать извини не будем потому что мы не знаем приложения ну это пример из воздуха до чтобы просто понимали вот и вот это вот ситуацию мы должны как-то резал ведь потому что знание для написания этих playback of рецептов у нас получается размазанный часть знания у нас есть в одной команде часть в другой команде приведу пример как так как такую штуку мы решали у себя в команде в отделе у нас просто есть много продуктов много сервисов и они разной степени сложности и вот один допустим очень сложные высоконагруженные наш проект этого папе мы сделали так то есть у нас админы написать взяли шефа написали саму всю базу да то есть там большая нас там 3 дата центра по 18 серверов там все децентрализации прочее и вот эти вот такие тоски админы естественно взяли на себя написали всю эту конфигурацию разделились во все дата-центры там мы убедились что все это работает а потом уже в процессе жизни продукта как и когда меняются такие не знаю не критичные параметры не то что не критичные меняются те параметры которых админы не знаю так как я вот приводил пример да то есть это у нас в конфиге что-то там поменялось у нас мы начали использовать другие там еще какие-то утилитки до этого все то что решается в процессе разработки продукта админы короче пришли научили разработчиков писать play буки пока но рассказали что такое шерсть чем его едят как готовить вот и потом после этого момента команда разработки сама начала писать вот эти вот play буки ну и естественно когда изменения у нас какие-то критичные которые тонули там очень сложные которые рискованные та команда разработки берет и ну а она сама это пишет и просто на review отдает админом они смотрят там как это все будет ложиться в текущую инфраструктуру там сильно за фиксит не сильно ну и заставляет какие-то комментарии другие же сервисы попроще они взяли они посмотрели допустим что on seba турбин для нас слишком сложно избыточно там и прочее мы совершенно не слишком сложно избыточно они взяли ansi был сами написали быстренько разобрались сами все написали пришли к админам и сказали вот посмотрите короче вот можно ли так те посмотрели из там сказали да нет не знаю может быть вот в общем зоной ответственности возникает вопрос сразу же серебряной пули как им практически везде не туда нужно вот так вот резон ведь наверно в каждом проекте в каждом сервисы по своему ну и естественно у нас меняется workflow да у нас появляются новые тоски у нас появляется новый инструментарий соответственно вов о разработке у нас меняется если с разработкой ну допустим все с написанием все понятно да мы там что-то посмотрели изучили там нам предоставили знаю инстанция тоже в сервера там или еще что-то мы взяли любимые да и там любимый редактор текстовый как то там в общем приноровились начали писать но возникает следующий вопрос да нам же надо как то это все тестировать потому что ну это же получается у нас точно такой же код и как он себя ведет то есть нам нужно тоже понимать и если мы иной на этом моменте не дай бог мы наш сервер разработчики свой сервис deployed себе же на тачке на рабочий да то есть это то здесь все плохо и печально и без виртуализации здесь как бы не обойдешься потому что но мне же надо поднять тачку да вдруг там я что-то написал такое плохое что все сломалось мне нужно это все быстренько убить перри деплоить там но пофиксить впереди площадь посмотреть как что работает то есть если у нас нету ну как бы я я знаю я видел такие команды видел такие компании которые ну до сих пор на данный момент виртуализацию тоже вообще не использует не как это может это нормально так как бы хорошо допустим а я просто сам лично как бы уже на данный момент не понимаю как можно без виртуализации жить вот ну если мы ну так вот у нас мы диплом цену на своей тачке виртуализации нет то в этом моменте она нам просто необходимо вот и но vagrant это не инструмент для тестирования на это то что может нам помочь быстро как бы посмотреть что это такое vagrant вообще это такая программное обеспечение для создания виртуальной среды это как бы обертка надо множестве над многими провайдерами в виртуале вирт ну виртуализации да да как virtualbox vm ware там и прочее и плюс у него еще есть интеграция вот с вышеуказанными системами конфигурации дата с шефом сан символом с папе то чтобы развернуть мне тачку да то есть я поста я поставил себя vagrant и мне нужно просто сделать vagrant и нет это я указываю какой действительно дистрибутив чего мне нужно да у меня в текущей директории появляется vagrant файлы то там ну конфигурационный файл мое мое будущее виртуалке и в этой же директория говорю vagrant up и через некоторое время у меня ну на моем посте поднимается виртуальная машина где это могло уже делать что хочу потом ее грохнуть ну еще че-нибудь делаюсь ничего хочу и если мы говорим вот допустим мы там ну такой быстренький пример про сша в соло то вот в этом vagrant файле я пишу что у меня вот продвижением система шеф сола вот мои кабуки они располагаются вот там-то вот и пожалуйста на эту машину добавь не рецепт который у меня называется apache и отвечает за установку apache и тогда когда я поднимаю говорю vagrant up для этой машины под ним она поднимается и выполняется вот этот пальбу который рецепт который устанавливает apache этап просто то есть vagrant а самого и они достаточно для тестирования потому что вот я вот видел в программе рут конфа там есть отдельный доклад по поводу того как тестировать инфраструктуру но я на него хотел сходить но к сожалению вот в данное время идет там ничего не поменялось там насколько я понимаю рассказывают именно тестовый фреймворк ах который позволяет тестировать нам инфраструктура от себя могу сказать что я знаю только что существует тест kitchen который тоже основ он на во гранте и он позволяет писать тесты да то есть когда у нас он поднимает виртуальную машину и там ему указываешь тоже от проведение систему виртуализацию и потом говоришь вот у меня есть набор тестов которые ну выглядят достаточно просто который ну нам же нужно что проверить проверить что у нас все поставилось и там допустим демоны там запустились файлы на нужные нам файлы лежат в определенном месте собственно мы пишем такого рода тесты и он их после поднятия виртуальной машины прогоняет и говорит в окее либо не лакей это все такие самые простые варианты да то есть тестирование инфраструктуры это тоже отдельная такая большая тема где то есть мы тоже вот так вот с вами чуть-чуть приоткрыли ну как сказать дверку да вот в этот мир и то есть там еще много вопросов много техник in и прочее давайте немного практики то есть то что к практике чтобы хотелось порекомендовать с чего начать да потому что но инструменты большие информации много хочется там взять попробовать в общем от себя могу сказать что рекомендации таки это взять а если у нас есть какой-нибудь маленький сервис простой достаточно до или может даже то что уже известна дата есть у подставить тот же джинкс или поставить под глист прочее то есть попробовать начать с маленького написать рецепт play бухтам это каток который устанавливает вот такое простое общеизвестно это программное ну выполнять какие-то простые действия и тогда можно будет понять нужно вам это допустим на данном этапе я вас до сих пор еще ваш скрипт и и устраивают там или ручками вы делаете либо ну то есть понять нужно ли вам это и понять что вам удобнее и и существует вот эту ссылочки привел у каждого инструмента существует и комьюнити и best practice и и репозитории с написанными кубу коми да то есть опять же все все известно и программное обеспечение то есть которая нужно устанавливать configure там и прочее по поводу этого написано уже все тёплые буки выработанные без best practice и и мы идем в эти вот супермаркет или в galaxy и просто просто беремся нам нужно как кубики и выполняем формируем к вот у нас получается готовая инфраструктура по поводу еще такого немаловажного аспекта как стоимость можно сказать что эти продукты они в основном бесплатные шеф начал по моему с двенадцатой версии хотеть денег вот поэтому многие сидят на 11 версии до сих пор у ansi было ансем было не хотят денег за ну в порту анти болта город называется в остальных конфигурация все это можно взять бесплатно и быстро применить ну вот у меня все надеюсь хоть чем-то я помог пожалуйста вопросы скажите а для серверов windows ansi получив есть версии с учетом на ну install engine x такой командой на винде к сожалению не достанешь я вот конкретно боюсь вам соврать да я знаю что есть у кого-то у по-моему она была есть ну то есть я с вами то и дело мало имел лучше погуглить короче но для винды есть решение тоже у кого-то из них все понятно спасибо за доклад интересует какие сейчас есть хорошие практики деплоя баз данных как быть с миграциями с базами данных как и где плавить то есть делать делается несколько копий потом выбирается какая текущая как но существует несколько подходов да вы можете опустить рядом за деплоить посмотреть перепили то есть мы можем поднять базу данных рядом переключить на нее часть наших apple куб посмотреть да как работает да я потом старую выключите все мы можем ну текущего как-то тоже поменять но здесь мы должны быть уверены что наш код совместим то есть состав со старой и новой версии да то есть мы когда разрабатываем наши разработчики должны держать в уме что если я там допустим дропаю колонку как у них в базе да то есть мне нужно чтобы мой кот какое-то время еще работал с этой колонкой в общем у меня есть и но новая но новая схема база данных и старая версия базы данных и мой кот какое-то время должен уметь работать с обеими ну то есть со старой тоже чтобы чтобы ничего не по рушилась вот а так в зависимости от ваш это поведение вашего сервиса у нас сервисы то есть вот есть база данных сервиса вам просто говоришь эми грей ты на работы если она апдейтер так так вы тестируете нет махает не надо у нас у нас так сказать у нас три базы данных в разных дата-центрах да и если тут короче вдруг мы давно уже с таким не сталкивались слава богу да если у нас здесь получается конечно начинается 500 до у нас просто клиентов отправляют но вот эти два сервака на 20 до 22 центра и мы уже разбираемся но это такое то есть это чтобы так случилось нужно стараться это сделать так вот есть у нас много много шагов по обеспечению качества по тестированию тому прочее в сторону докер они смотрели зачем чиф и еще что то тогда можно иметь виртуалку у себя такую же виртуалку на продакшене я немного не понял чего вопросу как есть docker и шеф да понятно просто цель этого доклада но рассказать вот потому как про некоторое программное обеспечение докер у нас папа пока не используешь есть мы начинаем то посмотреть на docker му я еще не готов какую-то оценку давать этому да то есть мы в сторону дороги рассмотрим но мы еще пока нигде не применяем его в этом и был вопрос собственно почему используете эти технологии именно не ну я ответил на ваш вопрос спасибо спасибо за доклад у меня такой вопрос раз уж мы про тепло и как именно вы доставляете все-таки код на сервер и насколько именно серверов нужно доставить код и сколько длится диплом это вопрос к нашей практике да да именно у вас вот у вас это понимаю код на печке вот у вас он есть батори в фегриде ревизия когда именно как производит я уже сказал как уже сказал что у нас много проектов да и каждый deep леса ну как хочешь вот могу рассказать на примере 1w самым максимально которые что чтобы не говорить про все так как это в общем нас вот вышеупомянутой в баке есть мой диплом код ну то есть мы делаем деппу на сервера то есть сначала идет серверов у нас 3 дата центра в каждом дата-центре по 6 апликэйшен not там по две почти по 2 полному база данных там куча всяких кошелька ручную проще которые у нас на ну не особо часто апдейт тиц а вот и процесс релиза процесс тепло и 1 сервака это вот и как я уже упоминал это запуск шеф клиента то есть мы говорим шеф клиенты он короче уже идет об долетит все получается это где-то по по минуте минуте с чем-то nine апликэйшен сервера у нас идет вот но у нас в в основном релиза не там связанный с ним что код выкатывается новый ну и вот давайте посчитаем 6 минут на дата-центр то есть 6 3 18 18 минут у нас как бы про близилось ну страшновато в параллель вот поэтому как бы не то что страшновато просто дополнительного спокойствия мы приняли решение что вот потому что если допустим на 3 ноги у нас вдруг славу вдруг проявиться да чтоб мы могли остановиться и посмотреть я ответил привет denis спасибо за доклад было очень интересно и полезно хотел узнать вот ты упоминал про тесты на гранте хотел бы подробнее про это узнать мы тоже знаем vagrant in символ но вот в плане тестов я знаю что vagrant наруби написано я может немного выразился не совсем корректно теста него гранте есть такой тест kitchen фреймворк который использует vagrant это плагин для гранта нет это не плагина гранта это отдельные по по моему даже от тех же той же команды что и шефу написала но якобы и я не буду врать не помню точно и вот там в конфигурационном файле вот этого ки чана ты пишешь что вот у меня vagrant есть да мне нужно вот конфигурации там ubuntu там 12 и 14 еще какую сзади плавить вот у меня там есть шеф и вот когда все это вот выполнишь вот у тебя здесь лежат тесты выполни пожалуйста вот эти вот тесты то есть и ваша девушка вот здесь скажите у вас deploy автоматически запускается решение о тепло и принимается ну то есть вот принимается человеком то есть на кнопки нажимает кнопку и его . это все просто если где-то происходит какая-то ошибка есть какая-то обратная связь наведения на естественно как бы человек который нажимает кнопку он смотрит в лог стаж на предметном 500 их ошибок если там по пошло 500 он говорит стоп и как вы и разбираемся автоматически ничего не автоматически ничего да пока пока глазками так он там девушка добрый день и спасибо за доклад если какие-то возможности по рублику конфигурации то есть допустим у нас тепло и что пошло не так и мы откат весны для я ж так-то просто надела что его не будет в этом как сказать то есть откатиться можно но это дополнительные приседания да то есть у нас есть вот у нас вообще этот софт про который я говорил да он там для oral-b к не предназначен то есть если мы хотим иметь возможность сорвал бы часа мы должны сами придумать как с помощью вот этого софта мы будем рубиться то есть у нас нет нет такого что мы здесь сказались вот если вдруг читала пошла не так пожалуйста от катись на вот такую-то версию взвод из его здесь такого нет а здесь пожалуйста как вы решаете эту проблему то есть как вы откатываетесь мы не откатываемся мы идем вперед да то есть мы встретили бак до мы делаем новый релиз с пофикшены богам а если он пролезал работу вашего сервиса в гру говорила с ней я-я-я по я понял ваш вопрос мы просто на моей практике во сколько полтора года мы этому мы такого не встречали поэтому то есть это исключительный случай это как-то уже подключаем админом и разбираемся конкретно уже в чем причина вы не смотрели существует ли программы или обвязки которые позволяют вот эти блоки делать насколько ну во первых 3 программы есть но мы пока на них не смотрели то есть я знаю там капистрано есть по моему еще какие-то штуки которые вот это вот всю механику да они обеспечивают да что там хранят хранят или что-то что-то делает с версиями как когда ему можно сказать что если что случилось про 10 за пожалуйста вот на эту вот версию он просто этого уже это же другое софт другими способами решается просто комментарии вчера кто-то рассказывал что они свои конфигурации просто в детей тоже хранят и там можно спокойно трудиться ну собственно мой первый ответа и был про то что мы он короче то есть нужно нам надо немного присесть чтобы а тралл бы что вот этими штуками естественно мысу идем в git короче откатывает он и вот этот новый код уже короче выкатываем если естественно дал что вот все то о чем я говорил это вот эти вот play буки прочее это все это все хранится в дикий это все versio не руется всем известно кто что сделал можно посмотреть как бы на это нормальная практика добрый день а подскажите мы еще не используем но вот смотрели его шеф либо капистрано использовать вы вы упомянули а почему выбрали на пульсе анти был шеф и не выбор описанного просто может что то есть потом не не подскажите про как не могу сказать про капистрано вопроса знаем что он есть все я еще тут тоже не не готов судить но это soft это разного класса да то есть если это configuration management system как и стороны это специальный туза отлили тепло и то есть соответственно какие-то configuration management аске вам все равно надо будет решать вот этими штуками это они могут вот эти два класса софта они у вас могут существовать как бы параллельно"
}