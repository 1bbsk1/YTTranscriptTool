{
  "video_id": "hZddzQmtuTQ",
  "channel": "HighLoadChannel",
  "title": "TechTalk с Авито / Илья Сауленко",
  "views": 499,
  "duration": 848,
  "published": "2021-10-04T02:45:36-07:00",
  "text": "я привет я артем горевший бывший зэк хабре сейчас буду подкаст мы обречены приятно познакомиться взаимно до меня зовут илья я его vita с мая руковожу кластером s4 юнитов и все мы так или иначе занимаемся разработкой и нашу платформу за сервис внутреннюю вот такие дела платформ и за сервис расскажи мне что для ну на самом деле это такой сильно обширный термин и как многие современные термин и разные другие компании вкладывают абсолютно разные в нашем понимании нашем понимании это такая знаешь система инструментов и часто перри используемых сервисов которые позволяют бизнесом разработчиками это который собственно непосредственно делают основной продукт для пользователей тратят больше времени чтобы пилить крутые новые фичи и делать эксперименты и вот это все нежели бороться с интеграциями переизобретать какие-то те же проблемы которые там соседей из другого юнита уже решали в общем упрощают жизнь ну может каким-то конкретным примером там рассказать вот есть проблема вот это наша платформа как сервисы и решила таким образом ну например смотри когда ты делаешь там не знаю что нибудь каком-нибудь amazon узком или гуглом облаке у тебя есть там продукт который тебя предоставляет базы учесть продукт который запускает приложение там продукт который какие там очереди сообщение за сервис предоставляет но это все так немножко изолированная то есть amazon у неважно что ты за базу создаешь он там ее не как у тебя он не знает ее какое-то предназначение у тебя просто вот база вот то же самое с этим приложение поэтому обычно если тебе нужны у нас вы видите по штук 800 сервисов продакшене вот и запрашивать в разработке их там больше 1000 ватт поэтому мы хотим чтобы для всех для них был там общий экспириенс тестирование общей экспедиции заработки там то есть на ветку свечой делаешь у нас ли не автоматически тепло это отдельный instance изолированный который ты там твои коллеги из команды могут потыкать вот амазона ему не важно что это за приложение что это за базы поэтому если тебе нужно там тестовые или или окружение для разработки настроить это просто типа такие произвольные придворные разницы там с префиксами с чем-нибудь еще ватт и соответственно чтобы за интегрировать тестовую версию приложение с тестовой версии базы там ты уже тратишь больше сил времени и делаешь это каждый из этих 800 сервисов мы со своей стороны все эти барьеры убираем и разумеется это не создает немножко такую атмосферу когда разработчики сервисов они немножечко но имеют немножко меньше свободы чем если это все собирать по кусочкам вот но зато тот слой который мы считаем типа идеальным для 80 процентов людей нашей компании он он работает гораздо более тактаров у нас например при приложении ты делаешь сервис у него есть маленький конфигурационный файл об . там ты говоришь сам хочу postgres хочу редис среднего размера и типа приложению запускать на нагул ангел там и она тоже у меня 3 средний потребляемая вот и через через 30 секунд ты можешь уже развернуть локально с теми же с греками 7 и всем прочим дальше вы хотите тестовые окружении там где точно также изолированной базой интеграции с хранилищем секретов бесшовные который ты можешь тоже настраивать угодно и все это вот привязана в том числе к разным окружением как я насколько слышал что тли разработчик это вообще просто самое классное что может быть делать что-то для других разработчиков то есть когда твой кот он нужен профессионалам которые поймут любое решение который прекрасно знаю что его надо они при прекрасному тебе объяснить что они от тебя хотят это гораздо проще чем делать какие-то сервисы вовне проблема в том что не всегда нам нам в том числе приходится как-то вот балансировать между между вот тем удобством для пользователей и ограничениями которые нам нужны например новой платформы чтобы обеспечивать хорошее покрытие об сервами лети например или там чтобы не давать не делать каких-то очевидных мест где ты можешь выстрелить себе в ногу вот поэтому и такой вечный баланс и зачастую зачастую разработчики сервисов сразу понимают поэтому вот важно времени уделять документированию потому что без у тебя есть место которое там не очень очевидно не очень понятно то даже то что у вас есть история в слайде историю сроки никто не читает поэтому каждую неделю будет приходить новые человека спрашивать а что это почему вот поэтому если ты за документируешь это понятным важно понятным языком документации то ты вопросов будет меньше пользователей сразу будет больше понимания вот если если дать разработчикам прямой доступ почему-то изначально а потому вы забрать то такой психологический эффект срабатывает что вот реально тебя чего-то решили и даже если у тебя не пользовался но это тяжело а вот поэтому тоже очень много времени приходится уделять разъяснению почему мы это сделали почему мы с ограничением вели ну что иначе ошибка в штыки да как и вообще работает все разработчики допустим не имея единой платформы работают по-разному у всех свои подходы надеть свои способы тем более если у разных команд там вообще может быть что угодно как вот достигается это единогласие когда вы делать общего платформа для целой компании это это обсуждать это маленький какой-то комитет ваш технических экспертов или это реально большое обсуждение со всеми командами ну тут я придерживаюсь такого продуктового подхода и мы страемся спрашивать людей какие у них есть проблемы какие у них есть планы своего развития на будущее этом что у них может возникнуть вот но но в основном фокусироваться на проблемах потому что если ты не за этом придешь скажешь ребята вам нужна такая вот фича тебе все скажут конечно нужно а потом никто и пользоваться не будет вот если ты спросишь не знаете ребята чего вам не хватает они скажут нам не хватает не знаю вот этого вот этого микроскопа потому что у нас вот-вот гвоздики нужно забить вот или наоборот не знаю там у нас гвоздики а не где нибудь там в какой-нибудь дыре она норе под под углом 90 градусов поэтому нам нужно вот такой молоток специальный поэтому если спрашивать а как а откуда у тебя почему у тебя вот этот гвоздик за углом в 90 градусов появился что-то им пытался решить почему не почему не получилось что уже пробовал вот тогда получается более общую картину вот но разумеется специфика в разных командах бывает разное вот мы ходим и ходим по разным командам спрашиваем такие вопросы наверное чего стоит делать больше это больше погружаться непосредственных процессы точно наверное у нас были мысли как он такой десант засылать в команды которые прям будут сидеть там и смотреть что происходит как-то участвовать в деле митингах там немножко решать задачки это чуть-чуть усложнила секундами и вот машина стоит смотри я слышал такую фразу мне она общем нравится что когда ты делаешь что-то для кого-то нам для пользователей своих то они всегда тебе скажут где у тебя проблема они укажут тебе на все твои ошибки но никто и никогда из них не посоветуют как их исправить правильно все сотня советы будут наверное только ты можешь на как решить эти проблемы и указали мне не обязательно частенько как раз приходит с решением она может быть очень локальным и собирается никуда дальше чем вот этот конкретный случай тут тип я полностью согласен с тем что говоришь но тут есть еще другая часть пользователи приходят и говорят что вот вот здесь вот плохо здесь не работает и вот это все но не приходит когда все отлично вот поэтому это в том числе такой большой челлендж объяснять непосредственно под моей команде что блин ребята вы делаете крутые вещи и вот это вот есть там вот столько-то команд который она вообще не приходят поэтому если у них были проблемы они приходили поэтому тут мне кажется что вот я стараюсь увлекать команду в общении с пользователями чтобы они там из первых рук фидбэк получали и понимали вообще для кого и зачем мы это все делаем вот нужно с другой стороны больше также какими-то типа зелеными метриками это все подкреплять что смотрите вот у нас там есть есть 20 человек который сслыки постоянно жалуются и они все не работает ну вот а еще там прощает вот эти вот 600 они все идеально работает каждый день они всем этим пользуются время секономит с точки зрения мотивации тех людей которые которые самой платформы делают может быть вспомнишь историю какого-то компромисса где вам пришлось внедрять ограничение но которые были не совсем понятно вот так с ходу новые как разработчики этого этих ограничений понимали они нужны с ними будет гораздо лучше ну наверное самый такой явный этот с которым много проблем возникла на старте мы сделан выработали ряд таких ограничений по работе с базами данных то есть у нас как я уже говорил ты можешь там автоматом развернуть базу для нового сервиса вот нам и изначально сошлись на том что база каждого типа то есть там прогресс манга редис у одного сервиса не может быть больше чем чем один instance вот это было вызвано тем что супер упрощал этом работу с миграциями всяким таким во вторых казалось что большинстве кейсов действительно вот больше тебе не нужно особенно учитывая что в пузыре все там есть как бы средства изоляции вот например этот слой чуть чуть чуть чуть позднее и уедете нету таких крутых средств изоляции как к куб с gresso то есть по сути ты ты можешь поднять один хост этом есть номинально разные какие-то называются база вроде вы рвот но у них у всех общее там рецепшен полисе с у них там у всех все все остальные настройки поэтому там нет такой гибкости и потом возникла реальная проблема которая уже типа реально блоки la это было когда ну как известно у нас большой старый древний монолит со своими монолитных базами вот и оттуда функциональность выпиливает иногда этап роль проще иногда сложнее вот в одном из кейсов это было сложнее поэтому нам понадобилось мигрировать лучшим сделать новый сервис у которого своя база но он все еще понадобится в базу монолита вот и читает оттуда и вот для таких случаев у нас можно было этапе решать но очень-очень костыль на вот да но вообще то есть когда у нас каждый сервис имеет свою базу и мы стараемся кроме таких миграционных случаев не допускать возможность ходить в чужую базу чтобы инкапсулировать работу с данными внутри сервисы и тоже уменьшить возможность устроиться в новом ну и я спасибо за рассказ тебя спасибо что что поспрашивал даровал пообщаться до желаю удачи развивать платформа чтобы не жаловался красиво"
}