{
  "video_id": "1rt97dGBN3k",
  "channel": "HighLoadChannel",
  "title": "Backend на Swift. Существует и работает! / Роман Мочалов (Improve Digital)",
  "views": 4022,
  "duration": 3505,
  "published": "2018-01-16T13:19:48-08:00",
  "text": "что давайте тогда начинать у нас время час кто захочет потянется итак всем привет меня зовут рома я как и миша из сибири из новосибирска вот все москвичи думают что у нас стабильно холодно даже летом ну вот мы приехали сюда это тоже оказалось холодно так что мой следующий слайд я назвал его согревающим особенно в тему поднимите руки кто хотел бы получить бутылку от холодного но вот такого согревающего джека вот ну давайте здесь организаторов нет можно руки поднимать отлично моя затея удалась то есть вы не только не уйдете с моего доклада но еще и будете следить за тем чтобы понять как эту бутылку получить вот отлично давайте теперь начнем с представления меня зовут мочалов роман я тим летай с командой брук digital и сегодня мы поговорим с вами о бэг-энде нас идти здесь хочется ремарочку добавить что у нас компания занимается от ссор сам мы называем аутсорс человеческим лицом и у нас есть свои бы киндеры джавис ты вот о них я упомяну немножко дальше итак что же мы сегодня с вами обсудим но собственно первый вопрос который зреет у всех в головах у тех кто пришел на эту тему собственно зачем нам как айос разработчикам писать самим богат на свете хотя есть бы киндеры вот и можно ли вообще это делать дальше собственного второй части простите доклада мы сравним несколько 4-го фреймворка которые позволяют написать арестов http и всю protect магию то есть они скрывают внутри себя слова скрывают здесь не имеет какого-то отрицательного по текстов мы с вами понимаем что это свифт это open source но и фреймворке все open собственные мы можем легко выбрать нужный нам фреймворк просто посмотрев его год код на гитхабе третий этап самый большой этап моего доклада это практическая часть это дема то есть мы подключим с вами один в фреймворк который выберем на этапе сравнения и собственно я покажу вам дима как постепенно также шаг за шагом получить работающий backend и собственно он у нас выльется еще в клауд то есть он у нас будет не только локальным но и доступны извне дема записано в формате видео я решил не делать life 1 потому что это слишком долго и можно отвлечься и уйти вообще в другую степь но и код на слайдах я тоже не захотел показывать потому что и его было бы слишком много но и последний этап который мы с вами обсудим это итоге мы здесь немножко пахали варим спросим себя зачем же ответили ли мы на вопрос зачем в самом начале нам писать этот букет массив те и стоит ли это делать и я подведу кратенький итог и расскажу свое мнение кому по моему мнению стоит сейчас рассматривать эту тему и так прежде чем начать блог зачем поднимите руку кто пишет вообще на свифти так а в продакшен отлично а кто свифт на линуксе запускал вот-вот отлично то есть тут кроме бутылки еще есть возможность посмотреть как это будет работать на линуксе здесь немножко стоит оговориться что все клады в которой мы будем выливать который я расскажу и один из которых в который мы будем выливать наш backend они содержат под собой linux машинку но и соответственно свифт нас будет работать только на линуксе и я оговорюсь дальше почему это так и так собственно давайте рассмотрим те шаги те те проекты когда нам стоит собственных начать писать бэг-энда свифти помните наш второй согревающий слайд собственно как вам можно получить бутылку то есть я ничего не буду разыгрывать если вы надеялись на это можно посмотреть с настоящими бы киндерами как они себя называют джавис to me питание 100 миру местами в общем у нас команде есть завис ты у нас спор на кухне как-то разыгрался я сказал что знаю эту тему они сказали нет ты не знаешь в общем поспорили и бутылку я выиграл твоей ну тут был дэвид духовны но можно подумать что это я ну ладно дальше зачем нам еще стоит применять g-nise ft писать на нем но здесь самый популярный ответ на этот вопрос это домашний проект любая api который вам нужно и для которой вам не стоит изучать новый stack технологий вы можете написать сами следующие зачем это им веке на работе если вы собираетесь показать какую-то версию заказчику но бы kinder у вас где-то далеко им нужно два месяца чтобы начать они не знают что вам делать что им нужно делать вы можете сами написать быстренько прототип и показать это заказчику особенно в стартапах это хорошо работает на стартапах сам бог велел если вы не знаю мобильный разработчик вы начнете писать и код нас if they букет из и в те и все будете сами писать кушать-то хочется вот на любые безумные идеи там где требуются опишешь к вы можете реализовать зная как это делать как делать бэкон на свете но и я думаю у всех зреет вопрос вот ты рассказал когда она нам надо когда же не надо но и здесь единственный верный вариант ответа есть сейчас это высокая нагрузка то есть мы все с вами знаем что сверху у нас всего три годика ну а джаве 22 вот то есть мы с вами понимаем что java прошла все огонь и воду и медные трубы конференции по хайло ду посвящены джаве здесь мы вместо джан вы можно взять любой веб как бы в паре and it язык на котором можно писать backend там не знаю go скала если здесь есть бы киндеры мне кажется там сейчас скажут можно на габи сайте луч java и вашего свифта и все такое собственно здесь стоит сделать вывод что свифт это пока джаст фо фан для особенно для apple фанатов и baked на нем в какой-то высоконагруженные который требует высокой нагрузке или там scalability какого-то писать сейчас не стоит здесь но реально стоит посмотреть в сторону какой-нибудь java той же самой итак давайте теперь рассмотрим во фреймворке нас их будет четыре это вей партитура perfect и easygo у меня есть такая сводная табличка она объединена по блокам первый блок можно назвать грубо говоря актуальность солнышко сами понимаете что это хорошо а тучки это не очень с примеру perfect а вот он самой первой с актуальностью не очень хорошо он хоть и развивается довольно быстро и семимильными шагами но некоторые модули у него не обновлялись больше года но и для фреймворка который не знаю живет в том числе год это не очень хорошо но и собственно контрибьютором из лака активность это для open-source фреймворк а очень важные показатели у всех кроме зива здесь довольно хорошо и увэй пара вот он крайний правый с контрибьютором и вообще все отлично их там в два раза больше чем у у того же perfecto но из лаки вот ребята и ски-тур и это второй с птичкой и из вейпер отличают очень быстро очень активны следующий немаловажный этап для нас для тех кто начинает разбираться в этой теме пытается разобраться в этом выборе марки это документация с документации у всех все хорошо кроме зива сего у нас вообще такой младенчик по сравнению с остальными у него есть только где then start project и все и никакой документации но и сайт вы можете конечно посмотреть на код и понять как он работает но это не очень хорошо быстродействие это такая сомнительная такое сомнительное более в моей сравнительные таблицы есть статья на медиуме она датирована октябрем если ошибаюсь прошлого года то есть там просто энтузиаст который работает с этими framework ами напрямую с этими командами просто сравнивал их на mac и на linux новой машине у меня на предпоследнем слайде будут полезные ссылочки там буду в том числе эдема видео и ссылки на все фреймворке там можно будет посмотреть эту статью и сами мои почитать здесь стоит оговориться что быстродействие у perfect они такое там что у них разница там деятельности в 10 минут то есть там разница буквально в миллисекундах ну и давайте рассмотрим последний пункт бокс solution я его назвал это то что работает из коробки здесь несомненный фаворит вейпер он сразу с документацией работает правильно то есть то что написано закуп документации будет работать в коде а вот у всех остальных то что написано в документации не всегда работает в коде и приходится понимать или писать человек ну как же это делать и для кого-то тоже немаловажный плюс для меня это такая сомнительная тоже штука звездочки на гитхабе там и количество форка в том числе вейпер и кетура собственно не вот крайне некие на двоих имеют больше звёздочек чем вейперы perfect простите больше звёздочек чем кетура easygo то есть у вердикта по моему в районе 14 тысяч у вейперов в районе 11 и так можно подвести итог этой сравнительные таблички собственно у нас получилось что вейдер у нас такой безоговорочный лидер на данном этапе в некоторых в том числе вот в этой статье на медиуме некоторых источниках perfect является лидером но опять же это все субъективно довольно таки но им не понравилось что это все работает из коробки и для дыма для презентации этого фреймворка для рассказа о том как можно писать бэг-энда свифти выбор подходит лучше всех собственно давайте не будем затягивать долгий ящик начнем дыма-дыма у меня будет не такое большое что вот сейчас и там до конца презентации будет одно сплошное видео она разбита мне на семь блоков мы будем возвращаться к слои диком немножко разговаривать если будут вопросы можем наверно сразу на них отвечать если кому-то непонятно давайте вспомним тот спор с этой бутылкой собственно как я хотел его выиграть у вы про есть так называемая штука штука которая называется вайпер tool-box это скажем так конфигуратор который позволяет вам и steam plate of создавать темпы вы скажем так начальные проекты с которыми вы можете дальше что то делать ну и подумал я возможно можно выиграть спор просто создав вейпер тимплей давайте посмотрим как это работает собственно команд командой вейпер new наверное плохо видно да здесь я ничего не могу сделать вы парни и мы создаем собственно новый проект и давайте посмотрим в папочку файндер то есть у нас и знакомого здесь только свифт файл пикачу это мы пока не знаем что он значит есть конфиги и имели lays in сыну понятно там ридми source и паблике ну в общем во первых это не спортивно во вторых это не понятно давайте все-таки начнем сначала не будем использовать никакие вейпер template начнем с чистого свифт проекта собственно как создать проект нужно сделать команду свифт пк и нет так здесь я не вижу собственно у нас есть main свифт файл и есть пекарь свифт maker свифт это менеджер зависимости который счастлив то 30 поддерживается по умолчанию с лифтом но и здесь стоит оговориться что никакие какого коды и кортежи у нас на линуксах работать не будем поэтому мы используем именно дефолтный patch manager здесь мы видим что у нас есть имя этого пейджа есть зависимости это просто ссылки на git репозиторий на гитхабе либо у вас где то есть exp люди это те папки которые не будут включаться в building и в майнц лифте у нас в чистом проекте по умолчанию hello world давайте же подключим сюда вейпер вейпер у нас по оперирует по умолчанию труп летом друг лет это такой сервис контейнер который содержит себе все вероятностные настройки там запуска нашего сервиса вот мы видим здесь там традиции фти ран у нас есть но и вот сейчас мы напишем несколько методов первый метод это обычный кит вызываемую / лето собственно это метод локатор возвращает нам просто текст следующий метод у нас будет возвращать информацию о реквизите это просто description request а дальше мы посмотрим что у нас там будет растить следующий это у нас захардкожены какой-то джейсон и четвертый метод это у нас будет кастомная ошибка собственно мы можем вызвать некий метод и борт и в нем вызвать конкретную ошибку который выбор за нас уже подготовил и давайте теперь как это сбил дети как это заставить работать нужно запустить просто команду с you build в этой директории с вашим проектом собственно здесь building ускорен он подтягивает сперва все зависимости видео ускорено в 20 раз то есть то что у вас будет тянуться минут 5 здесь пройдет за шесть секунд то есть вы не пугайтесь собственно все зависимости сперва тянутся с гитхаба потом а не компилится ну и в конце вот видите у нас есть там линк ссылка то есть мы должны сервер наш за линковать но не сервер любой свифт проект который без xcode project ботает но и мы видим что у нас сервер старт стартанул у нас есть какие то там вардинге которые там в продакшене должны быть отключены но нам неудобно с этим работать из терминала давайте теперь скотт проект сгенерим чтобы нам было совсем удобно работать свифт пикачу xcode прочего один рейд мы должны к запустить команду и мы видим что мы получаем xcode проект и дальше все демов все этапы мы будем проводить именно в нашем xcode проекте здесь мы видим что все зависимости у нас подтянулись у нас появилась папочка но здесь правда плохо видно dependencies и давайте запустим наш собственный сервер из xcode язык skoda и посмотрим в пост мне это такой снифер скажем так наших запросов который проверяет и выдает нам нужные результаты сатаны мы видим что у нас сервер стартанул мы как в любом проекте видим влоги что у нас все запустилось давайте попробуем выполнить теперь наши методы мы видим что у нас работает строка дальше у нас наверное будет info да нет джейсон отлично джейсона нас вывелся тот который мы прописали дальше info собственно мы видим информацию рик вести и method not found метод not found тоже работает и так собственно сервер то мы вроде написали как бы и методы написали но настоящие бы киндеры говорят что нет спор вы не выиграете в таком случае ребята говорят что нужно добавить как минимум модельку потом они сказали нужно добавить basic авторизацию taken и но сказано сделано то есть дальше не буду оговариваться про вот этот спор дальше у нас просто будут шаги мы будем добавлять но в следующем видео в следующим темам мы будем добавлять модельку здесь сейчас покажется увеличена эта структурка есть у нас юзер контроллер и юзер свифт файл собственно юзер это будет та самая модель как к контроллеру я вернусь чуть позже собственно давайте добавим нашу модельку ограничимся пока структурой световой стандартный собственно у нас есть имя и email и пароль есть какой-то и нет и мы удалили наши старые методы и вернем нет некий метод get юзер и там за хардкорен нашего юзера но мы видим что на что-то работает не так у нас есть какой-то эксепшен у нас есть for men мы видим что у нас протокол response represent- и был не conformity юзерам рис прасад и represent- и был этот протокол который должен conformity класс либо структура либо другой другой объект чтобы быть выведенным именно в каком-то определенном методе вдруг лейте сосна мы должны добавить наши протокол здесь мы получаем джейсон q из нашего юзера и импортировать вейпер собственно response to be sensible это часть вейдера ну и мы видим что у нас все сбил билось давайте теперь перейдем контроллеру да мы видим что все работает а сейчас мы видим а запустим я немножко подзабыл уже видел действительно мой давайте теперь проверим что у нас этот метод юзер работает он возвращает нам джейсон все мы получили нашу структуру отлично но еще до стоит здесь упомянуть что из xcode проекта мы можем работать как с любым другим проектом несмотря на то что это backend мы можем поставить стоп точку и посмотреть вывести влог примеру request вот мы видим что в request и у нас есть какие-то параметры но если кто помнит если кто внимательно смотрел там на пасман когда мы выводили инфо там были те же самые параметры что стоит теперь упомянуть о контроллерах контроллер в рамках вейпера это такая штука которая позволяет объединять себе несколько методов связанных с одной сущностью сейчас как раз видео перейдет на контроллер грубо говоря это такой им висит для бэг-энда то есть контроллер модельки и все такое собственно давайте добавим метод наш контроллер который будет называться как он будет называться диме profile который будет возвращать юзера но мы хотим это сделать чтобы в дальнейшем те методы которые у нас будут привязаны к юзеру они были в одном месте и не было у нас вот этой беготни в main свифт файл но и не стоит забивать main свифт файл как об делегат всякими разными странными штуками собственно мы определили контроллер и назначили ему хендлер назначили нашему методу хендлер из контроллера собственно здесь все то же самое можно поставить стоп точку можно запустить но я немножко уйду вперед у нас все это действительно работает дальше ребята говорят что но не не бывает бэг-энда который работает локально в котором можно сохранять там что-то не знаю файлик джейсон просто на диск нужно подключить базу здесь стоит упомянуть что свифт и все клауд у нас работает только с linux машинами у нас не будет никакой корда ты то есть это сразу нужно запомнить и принять если вы любите кур дату либо возрадоваться если вы не любите ее также как я вот с вот таким зоопарком баз данных умеют работать все четыре в фреймворка собственно здесь как видите внизу этот но is clear баз данных верху мария добить тоже поиски я могу ошибиться если есть демопсы поправьте меня собственно мы будем работать с после почему пузыри потому что синтаксис способе работает тот сервис куда мы будем выливать наш backend очень хорошо и пополз где у него есть отличия документация но и на маке если это вас локальный проект запустить пузыри или mais quel но это примерно равносильные операции иногда пожгли работает просто быстрее и так это самый большой блок там будет отбил очка в середине мне хочется чтобы вы поняли как это работает поэтому не удивляйтесь что будет у нас кода минут на пять я буду его также комментировать собственно мы добавили зависимость нашу новую это postgresql провайдер дальше мы должны добавить этот пост критской провайдер и наша структурка должна conformity протокол модуль собственно это обычная модель к из позы и но мы видим что структура у нас не conform от этот протокол мы должны сделать файл класс то есть файл это стандартный святого и директива класс потому что модуль нам говорит что мы должны только у класса вызывать эти методы дальше мы добавляем 3 протокола первый протокол это сторож собственно у нас должна быть какая-то переменная типа сторож это реальный сторож который хранит себе айдишники данте фаеры и какой-то базовую инфу нужную для работы пожгли для работы с базой данных дальше у нас есть если я ошибаюсь represented by mike mike был собственно один метод у нас будет сохранять в базу данных а второй метод выдирать из базы данных нашего юзера когда мы хотим за хотим это сделать собственно вот эти два метода init и майк роу вы видите сейчас здесь но вроде бы все понятно вроде логично обычная реляционная база данных то есть здесь пока отношение к технеты отношения будут там дальше как собственно добавить это все базу мы должны conformity протоколу юзера preparation два метода есть это прибор который создаёт нашу базу данных с какими-то полями и revert который случае каких-то но неожиданных ситуаций отметить наши изменения и будет работать стандарту что нужно сделать чтобы вас грю заработал нам нужно немножко main sweet файл наш переделать нам нужно друг лет сконфигурировать для этого добавляем некий базовый конфиг дальше мы его конфигурируем добавляем некий провайдер какой провайдер мы с вами сейчас знаем это поиск ель ну и собственно это трейд сэйфти метод и мы должны сделать дукач чтобы в случае чего увидеть ошибку и воспользоваться подсказкой чтобы решить какую-то проблему собственно дальше у конфига вызывается метод preparation and и добавляется наш юзер то есть этот метод позволяет сущности юзер сказать что она будет она смысле сущность будет работать с базой данных дальше но и сам труп лет мы запускаем с неким с некой конфигурацией то есть это та конфигурации которую мы с вами выше задали но и давайте все методы теперь перенесем совсем в контроллер мы контроллеру скажем использовать дроп лет в качестве роутинга и труд это тот метод который будет отвечать у нас за все за все роутинга вот как вы видите люблю я да вот такую бутылочку у нас это середина то есть как получилось что мы как-то быстренько довольно прошли сейчас мы добавим методы в контроллер и собственно там запустим опять пасман и проверим как это работает мы теперь перешли в контроллер у нас будет несколько методов собственно первый метод это сейф который сохраняет нашего юзера в базу данных на и лот то есть дальше они у нас трансформируются сами собой то есть представьте что это живой проект это этап рефакторинга такой то есть сейчас они называются некрасиво потом это будет логин и реджистер метод давайте пока закомментируем этот лот и напишем метод сейф на как он у нас будет выглядеть метод сэйв нас выглядит примерно так как мы видим у нас есть бартлетт на три параметра собственно мы видим что из request a мы выбираем дату то есть дата это у нас рикиши джейсон то есть если у нас есть кэри request то там будет request сквере ну и собственно если у нас нет этих полей мы возвращаем bad request а если у нас есть эти поля мы возвращаем нашего юзера но вернуть нашего юзера просто так мы не можем мы должны его сохранить базу данных собственно мы должны опять же сделать три яйца идти метод спасибо свифту юзер сейф саиф метод это метод вызываемый у пузыри собственном i can форме метод модуль у нас user can фармит этот can фармит этот протокол простите но из собственного этого протокола из этот метод дальше чтобы все было совсем красиво мы делаем некую проверка на существование юзера как мы видим мы у юзера теперь можем делать sql-запросы стандартный и применять к ним какие-то фильтры мапперы и любые световые команды которые нам нравятся то и здесь все просто мы либо сохраняем юзера если у нас его нет базе данных либо говорим что этот юзер существует если он у нас есть давайте теперь напишем метод лот который будет возвращать это будет метод get по имени нашего юзера и дальше запустим собственно пасман и проверим как это работает метод лот как вы видите у нас имеет только один guard на один параметр здесь вот если видно стальных рядов строчка реку вере собственно это у нас куэрри запрос который через вопросик или там через амперсенд если несколько параметров будет иметь параметр имя дальше у нас примерно такой же экзист юзер такая же проверка и мы возвращаем этого юзера то есть мы можем вернуть уже сущность юзера потому что мы помним что у нас она у нас поддерживает response и презенты был протокол давайте теперь поставим стоп точки в нужные места в сейф и его л.с. re-therm который возвращает он redist ошибку и запустим все это запустим пасман во-первых и запустим консольного не консольную простите утилитку которая у меня подключена было в этом демона маки для работы с мозге базой данных и убедимся что действительно при сохранении вот такой сущности такого апликэйшен джейсоном мы получаем юзера то есть как видите я обновил у нас там пусто все в базе данных мы пытаемся выполнить метод сейф у нас есть юзер вот такой тест там у него есть имэйл есть у него пароль мы видим что мы попали в нужное место действительно у нас все работает сейф попытался выполнится он выполнился мы вернули нужного юзера то есть это то что увидит наш пользователь к примеру в запросе и мы видим что мы добавили в пожгли нашего юзера собственно вот это самая большая часть те кто выдержал молодцы ребята не унимались настоящие бы киндеры они говорили что ты вот классные у тебя прогресс идет но как же basic авторизации тоже такая базовая штука ребята из вейпера тоже все продумали за нас чтобы имплементировать basic авторизацию нужно просто подключить ещё одну зависимость это будет а в провайдер собственно of провайдер это провайдер авторизацией то есть авторизация там будет работать как по basic авторизации забоишься 4 так и патоки ну собственно мы добавляем наш аул провайдер мы его конфигурируем и у нас здесь появляется какая-то новая штука password authentication медовое недолго это такая прослойка которая написана ребятами из вейпера за нас и она нам говорит что запрос будет содержать себе password но email и password basic авторизацию собственно мы должны имплементировать метод password протокол опять же conformity паспорт атлантики был у юзера мы можем провалиться и посмотреть него собственно здесь есть стандартный паспорт и мелкий это те ключи по которым этот медовое password citation будут будет искать базе данных нашего юзера то есть нам тут нужно просто conformity этот протокол и не нужно ничего больше делать мы здесь мы можем еще вернуть юзера чтобы вернуть через request юзера чтобы нам было проще с ним работать собственно вот этот паспорт от интересен недолго и с одной стороны может показаться что это черный ящик на с другой стороны он открыт и вы можете легко посмотреть что там всего несколько методов и они довольно грамотно сделан и то есть здесь мы немножко метод лот наш перепишем мы будем из request возвращать нашего юзера собственно здесь проверка довольно просто и вы можете написать любую здесь если у юзера есть email и он не пустой мы возвращаем его но и говорим что он за лаги нет если его нет мы просто возвращаем ошибку но и собственно мы должны обернуть в группу паспорт дефекация medal в наш запрос то есть оборачивание его в такую группу позволяет нам позволяет вай вай пару понять что этот запрос он скажем так protect протектор или этот и он должен выполняться только с определенным условиям нашем случае этот basic авторизации все собственно мы добавили на шоу в провайдер у нас метод обернут в группу и мы теперь должны проверить что это действительно работает то есть мы еще раз запустим postman мы видим что у нас есть авторизация хейтер надеюсь помните нашего тестового юзера то есть у нас все было залогинен а но и собственно если мы изменили пароль на какой-то неправильный у нас возвращается ошибка вот это такой самый простенький этап он на первых порах сложный для понимания не понятно что такое вот этот недолгое но когда ты посмотришь его код то становится все логично и понятно ну и такие это такая штука токен авторизации я собственно все наверное знают что есть такой федор там авторизация брр там что-то такое обычно за ним закрывают какие-то документы юзеры relate от методы basic авторизации нужно нам только для логина собственно что нам стоит сделать с такие нам такие это такая же сущность как юзер видео здесь ускорено собственно у нас есть тот же самый нет мейк у нас здесь появилась отношение у нас есть у токина parent юзер собственно это обычное отношение в реляционной базе данных она работает так же в рамках пост близко или провайдера здесь мы кроме юзера добавляем в preparation насчет акен и схема у нас будет и добавляем конфигурацию сейчас мы добавим ее добавим токен аутентификации nvidia то есть это такая штука которая говорит что если у нас есть авторизация токен с какой-то составляющей то мы будем выполнять этот запрос ну и протокол мы опять же должны conformity но уже не password у детей был атаки на дикий был но и собственно объявить то тайпале осокин здесь тоже все просто все под документации что же мы дальше с этим делаем мы к нашему сохраненного юзеру просто привязываем в обычном отношений таки taken собственно у юзера будет какой-то child таким таким у нас будет состоять из имени и слову об скунс но и дальше мы его сохраняем теперь мы должны запустить это все но и прежде чем запустить мы должны опять же обернуть методы которых у нас будет два мы сейчас напишем вот окита в talkin' в группу talking от 9 сен медовое то есть мы говорим что эта группа методов будет вызываться только если у нас будет авторизация хедер определенного типа сосна методы вообще простые это юзер лист который будет возвращать всех юзеров джейсон и всех юзеров собственно и me это тот метод который будет возвращать нашего текущего юзера из request а если он залогинен если у него есть taken здесь мы можем тоже увидеть что у нас есть тестовый юзер тестовые таким у него и мы должны сейчас посмотреть что здесь действительно все заработает мы сейчас пост мы не добавим собственно авторизация taken авторизация хэдер простите у нас будет собственно br are taken и все мы выполнили наш метод me мы выявили нашего юзера которого за лаги или раньше и метод юзер ли сейчас выведет наших двух юзеров которые мы добавили там в рамках дома все на этом этапе мы закончили работу скажем так с hard кодом с тяжелым кодом вниз таким hard кодом которому мы привыкли собственно последний этап у нас остался мы не хотим чтобы у нас все это работало локально мы хотим чтобы это было доступно все извне куда мы можем все это вылить это собственно три вариации это эссе 2 digital оушен и heroku то есть опять же если здесь есть devops и простите меня за такие высказывания но по большому счету все сервисы представляют собой одинаковый функционал понятно что кто-то из них больше кто-то меньше здесь мы говорим про amazon digital оушена херак вот ниспадающим порядке но по большому счету это все linux машинки которые предоставляются вам ondemand и вы можете запускать на них свой лифтовый код мы выбираем heroku потому что во первых он бесплатен но собственно у него есть некий триал это там 300 часов аптайм а дальше он начинает становиться плавным и платным и становиться дороже чем digital оушен но в нашем примере собственно вы если захотите повторить вот те же самые действия что я сделал сейчас вы сделаете это все просто бесплатно просто зарегистрировав аккаунт на heroku без привязки кредитной карты на исе 2 in a digital шнивы этого сделать не сможете без привязки собственно мы должны создать приложение на heroku это может можно делать из веба можно из терминала то есть об клеит конфигурация и некий билл пик был пик нам говорит что у нас будет какой-то build пакет работать счастлив там дальше следующей командой мы подключаем под грейс келли здесь важно упомянуть что у нас есть там тарифный план хобби df это то что как раз указывает на бесплатность нашего тарифного плана если вы там укажите хобби basic то все будет платно но и командой git push и heroku мастер мы запускаем апдейт мы запускаем синхронизацию вашего git репозитория локального там либо на гитхабе с вашим heroku репозиториям то есть эта штука работает так что у heroku есть свой git репозиторий который должен быть синхронизировать с вашим ну и собственно мы видим что мы запустили веб-страничку у нас все то же самое у нас ремонт и веб делают все все это все те же самые действия но и когда мы запустили все это вылилось мы запускаем адрес который нам дает heroku и пытаемся выполнить наш метод то есть мы видим что наш метод выполнился но это уже не какой-то там 00 127 локалхост а это реальный удаленный сервер и так что хотелось бы еще раз про говорить что мы собственно пытались сделать шагов было семь я напомню то есть мы начали с простых методов мы дабы добавили модельку контроллер подключили базу данных сделали basic и токен авторизацию вылили все это на heroku на наших наш клауд наши api полноценно и работает она у нас получилась вот такая вот сибирская елочка буквально за 20 минут получили мы действительно все что хотели спасибо свифту спасибо в и пару то есть мы не лезли практически вэйпарк от мы знали что у нас там есть некий дуплет есть некие методы get пост но мы знали что их можно как-то сконфигурировать и по сути мы писали только swift код который мы хотели который мы знали этом все я думаю помнят еще фильтр который мы можем делать из эскивель заброса и так кому же я все таки советую сейчас разбираться в этой теме но первое это и из фаны такие как я то есть для меня это было просто джаз фофан мне было это дико интересно во-первых потому что свифт во-вторых потому что бэг энд как бы греет душу сама мысль что я могу отлаживать backend у себя на машине вот бы киндеры обычно такое слово говорят что мы там через два дня чего-нибудь от рефакторинг и посмотрим добавим логе они говорят ну и фрилансеры по моему мнению должны сейчас просто вот сломя голову бежать и смотреть во всю эту тему потому что ребята которые пишут свои мобилки насыпьте могут во-первых забрать себе немножко можно сказать просто денег с проектов которые они передавали раньше на какой-то аутсорс там java бы киндером и если это небось небольшие мобильные приложения которые не требуют хайло дай высокой нагрузке всего такого то это реально для них будет москв но собственно здесь на слайде я и ссылочки можно связаться со мной в телеграме по почте есть ссылочки на репозитории собственно всех четырех фреймворков статья про быстродействия и плейлист всех видосиков на ю тубе там вы можете посмотреть все видео по нажимать на паузу там все будет довольно понятно ну если что-то непонятно пишите лучше в telegram можно на почту но почту я реже смотрю чем telegram собственно спасибо за внимание готов ответить на вопросы спасибо за доклад ты вначале привел табличку где сравнивал разные фромборке вот это вот сравнение было на личном опыте ли на какой-то информацией то есть вот тут дымку которую она в паре сделал ты делали ее на других библиотеках нет смотри два ответа есть на этот вопрос первое вот предпоследнее ссылочка быстродействия это то что основано на опыте собственно это действительно табличка сравнение которое датирована октябрем ноябрем прошлого года там не я там другой человек который контактирует с этими вейпер этом perfect и танки туры контрибьютором и напрямую делал сравнение на своей машинке на linux вай это раз второе я пытался делать дома на 3 из 4 новый порт действительно заработал прямо из коробки у perfecto приходилось танцевать с бубнами когда надо было выливать на heroku это все то есть как раз простите как раз модуль выливки на heroku вот тот самый build пэк которые я упоминал он не обновлялся у perfecto больше года то что касается производительности именно по какому-то late in se когда я запускал дима но просто на локальной машине и the postman ну то есть там у тебя буквально там дверь 3 миллисекунды они примерно одинаково работает то есть это но не репрезентативная выборка то есть но и тестами я не заморачивался сейчас здесь будет samwell в час у него больше акцент в эту же тему но только именно на теорию и на сравнении и на быстродействия вот можно его послушать ok и сколько времени ушло на реализацию этой дымки там на реализацию для ники но смотри если покопаться именно во фреймворке понять как он работает и накидать ее покопаться во фреймворке понять как работает но все что касается работает до базы данных но это буквально три часа ну тебе больше не надо то есть там реально все понятно у выбора очень классная дока она не только классная тем что там все есть и все подробно она обновляется довольно часто но и когда я начинал готовить это в апреле вейдер был 11 потом в середине по 12 мая они вылили 20 и лис и дымку я переписал то есть и там был у них свой медиатор это как swear to the six ход тебя вроде предлагает но по хорошему ничего не делает то есть там примерно такая штука была просто приходилось переписать посмотрев на доку все что касается работы с базой данных там пришлось но немножко потупить и посмотреть как на примерах это сделано то есть не понятно было зачем они добавили вот этот протокол сторож в 20 сперва то есть потом стало все понятно потому что они как раз добавили вот эти штуки middle бы так называемые и они внутри себя по большому счету делает рекви запросы в базу данных и вот из этого стороже выдирают а мои дисней к примеру там твоего юзер вот но если суммировать но вот так вот по честному 0:16 наверное я потратил чтобы разобраться записать это все ну чисто календарных дней там реально было там две недели ну потому что я записывал это все в разное время там что-то догонял что-то прогонял еще раз 0:16 это вот прям но я все-таки без записи говорю чисто вот чтобы сделать проект и все в этом духе но окей смотрите теперь разобрался теперь умеешь есть какие-то мысли куда ты можешь сам при применить это какие такие классные но у нас есть такая штука я думаю можно поделиться это ничего не секрет у нас я ребята это можно а если смешно то можно ну да для меня было смешно у нас ребята некоторые в команде спорят можно ли об билда ну то есть инкремент билда то есть есть у тебя там 5 build ты хочешь 6 сделать ты его сделал и вот эта вот шестёрочку стоит ли заливать в репозитории или нет то есть кто-то считает это мусорным комментам кто то нет ну то есть вот такие холивары то есть нам вообще заняться нечем как понимаешь да и 16 часов вот на этот не но это было личное время даст фофан но и просто один из разработчиков нашей предложил такую штуку написать то есть у нас сейчас это сделано те кто не хотят к метать этот камень считают его мусорным они просто берут историю комментов и просто циферку из истории комментов она плюс 7 8 работает вроде правильно там с небольшой разницы и предложили написать как раз на heroku вылить маленький сервис который будет по бан блок возвращать последний номер твоего билда но для меня это смешно пишется это на самом деле то есть тут подключить нужно базу подключить там пост и get запрос сделать и все пишется это буквально там за час это очень постараться надо что потратить этот час ну круто окей и последний вопрос о видео хоть не ускоренно этом вот в плейлисте о плейлисте ускоренную да нет там ускорены такие моменты типа компиляции стягивание git репозитория они тебе не нужны гей спасибо спасибо за доклад я что-то пропустил видимо postgresql там все сущности настраиваются в какой-то tool же отдельно или это кот first козыри но это просто база данных которого тебя накатано на машинку то есть если это linux новая машинка ты просто скачиваешь не знаю если этого бунта делаешь какой-нибудь apt-get там впг сплю или наверное да она там работает могу ошибиться накатываешь базу данных заходишь в этот сон собственно под игре но она на всех машинах так работает создаешь юзера создает базу данных вот ты можешь это из терминала посмотреть командами у меня просто было gui утилитка чтобы было видно вот эту базу данных то есть она реально закончена колоколах от локалхост у эта база данных там называлась users потом там добавились такие на еще табличка все ответил на вопрос я имел ввиду именно сущности которые объект сущности это любые твои классы ну то есть примеру есть у тебя приложения там не знаю домру там машины и детали я машинах там есть какой-то класс ну структура мы видели что она уже не поддерживается свои пара 20 есть класс аута то есть у тебя чтобы записать это например шкур дату и то должен быть и не сменишь объект то есть здесь это класс модуль то есть вот вот так это работает вот такую параллель можно творить это ты сначала создаешь схему и все сущности конфигурирует в ней а потом уже наворачиваешь объекты какого-то визуального конфигуратора здесь нет ну ты изначально пишем в коде все эти сущности прописываешь и потом они уже попадают в базу до но эскорта ты тоже можешь blue блин blueprint открытие написать это все ручками понятно что я просто пропустил этот момент как эти сущности создаются и вроде ты не там специально не говорил все большое спасибо за проект мне как раз в рамках шефской помощи это все пригодится следующем месяце или ответить да привет я еще лично потом если кто дома обращусь к давай по приезду непрямого вот идей короче с этим вопрос с тестами как там быть то есть меня как раз есть ну свифт новый код небольшой я могу его полностью как раз перекинуть судя по тому что я видел и у меня есть тесты и мои тесты можно ли туда зацепить пробовал ли ты такое смотри у самих фреймворков по моему и увэй 1 perfecto есть там процентов 80 к вич самого фреймворка тестами покрыта и там они с этим как-то работает можно скачать их тестовые проекты и посмотреть я на самом деле не пробовал это все тестами покрывать мне кажется это все ну работает точно так же как с любой моделькой с любой сущностью просто я уточню что например типа даже в походе можно но не на все дела типа часы не покрываются к примеру типа начаты нельзя отдельно тесты сделать поэтому бакен на свете на часах я тебя конечно так хорошо знаю но странно нет это почти просто была типа отдельно что в xcode и даже не на все можно тесты сделать ну смысле подцепить поэтому интересно было как здесь цеплять но отвечая на твой вопрос не знаю не пробовал нахожу спасибо за доклад такой вопрос можно прикрутить какой-нибудь и что я могу к нему что еще раз html прикрутить какой да я не стал включать все что касается там какого то ей а потому что у меня и так по таймингу довольно много получилось организаторы говорили что мне код на грани фола то есть вот чуть-чуть еще и ребята уснут но я думаю что полезно было можно ты можешь использовать стандартные шаблонизатор и это там лив mastech кстати самвел наверное расскажет про это возможно нет вот там можно подключить html и то есть ты пишешь шаблон ты дальше его подключаешь к любому методу то есть там get index.htm или у тебя будет возвращать страничку дальше у тебя теми же шаблонизатора металл генерируются формой к примеру эта форма логина то есть у тебя есть текстовые филби и все такое но здесь просто для примера для именно кода вот для более четкого понимания это было все в коде написано можно можно спасибо у меня такой вопрос часто в качестве плюсов использования сервиса сердца приводит то что ну типа родной язык и 2 еще плюс приводит то что там mapping еще класса mapping используют и там и там одни и те же акте нибудь вообще еще плюс то есть сложный вопрос но на самом деле не знаю я вот говорил что там сверху 3 годика вот этим фреймворков там ну наверно там плюс минус полтора некоторым в основном там месяцев по 8 и ну то есть это совсем такая молодая молодые фреймворке есть плюс в том что вейпер написан сам на чистом си все у него нет креплений session авокода как раз самвел это упоминал там на своем предыдущем докладе у всех остальных есть хищный код но он немножко вроде как там подольше работает чем пьюр свифт но дальше для меня основной посыл был основной профит основной плюс то что я знаю свифт могу писать но такие хотели пехоте домашние проекте кино backend сопи шишкой то есть у меня были проекты где мне надо было не ждать сервер а показывать реально прототип заказчику у меня это заканчивалось тем что я выливал на amazon джейсон чеки и вроде бы все хорошо но все хорошо пока ты не ты дергаешь когда ты начинаешь дергать посты у тебя начинается канитель какая-нибудь то ты например и заворачиваешься в network сервисе меняешь просто теперь метод просто чист just walked и все методы дергаются гетами ну там примерно как в тестах можно это сделать но и у тебя нет тестирования вот запросов обычно все мне кажется пишет там network слой пишут get запрос и пишут post запросы и все баги которые возникают на каких-то методов они тут процентов 90 это под запросы но очень сложно с битом ошибиться с постом ты начинаешь там к вере applications джейсон что-то у тебя еще multiform какой-нибудь и вот это начинается такой последний этап когда ты подключаешься фишечку которая пришла томс аутсорс а там либо с твоей команды это вот такой очень отвлекающий этап когда тебе вроде проект уже сдавать надо а здесь ты можешь все подготовить у нас был прикольный кейс когда мы начали новый проект основой вот примерно таком опыте то есть мы ребятам сказали джавис там пишите описку вот по такой конфигурации то есть мы сказали где должен быть applications джейсон где-то multiform где там твари запросы мы это все проверили у себя и но там действительно была одна ошибка это мультик multiform с multiform да ты там ребята напутали вот на самом деле я немножко подругой там прошел то что вот есть с тем же успехом можно взять еще кого-нибудь ту же самую начальную цену заплатить принципе поднимешь всей сервачок ты также будешь избираться также будет входить разбираться фреза нации совсем вот этим вот подряд кайдалов там тех же самых начинаешься набьешь те же самые по тем же граблям похож не можно но я не знаю ни рубине питон не хочу учить знаю свифт вот для меня плюс то есть я грабли те же поймаю да я по документации похожу но я буду знать как это пишется и как как с этим можно быстро работать то есть когда у меня там не знаю там пару лет назад была необходимость тоже какую-то фишку накидать я посмотрел видосики на youtube и там django печь и вот это все подтягиваете там куча зависимости он в пол финляндии с гражданином еще с собой тянет как-то не захотелось спасибо спасибо за доклад вопрос такой можно ли делать запросы к стороннему api это реализовано в vapory еще раз ну вот у меня есть свой бег со своим appia ну мне там get какой-то запрос приходит я хочу сначала откуда-то с другого пи взять данные их как-то обработать и отдать можно но это обычный запросу тебе будет до смысле это есть в апреле мне ну там нет ну ты можешь стандартный rules and ask сделать ну то есть это обычный xcode проектом из далекого паре нет ну то есть про url сашин task тоже нужно помнить что если ты будешь запускать все это на линуксе все что начинается на нсв цнс классы у тебя работать не будут то есть там у тебя либо какой нибудь define именно она на операционную систему либо маг linux либо такой ну не знаю там в детом каким-нибудь стягивай в терминаль чеки а потом получая ответы обрабатывать он дальше не а а у нас просто ужас ну да есть если это не ns это все будет работать если это все там в snapshot of свифта лежит то да будет работать спасибо спасибо за доклад такой вопрос вот и оговорился что ну это так для технология как бы длину написания свифти да этот вейпер создан в основном для таких не крупномасштабных проектов домашних а вот если речь выйдет а highload принципе же свифт он строго типизированный язык хорошо подходящие для реализации от всяких быстрых серверов как это можно реализовать не но мы надеемся что это будет да и просто сейчас есть куча статей куча сравнение фреймворков того же там не знаю там но джесс и вейдера то есть понятно что там ребята набили там за 20 лет все грабли поймали я не знают как это масштабируется на выборе но вообще на чистом свете backend писать там пробовали несколько десятков сотен может там тысячи ребят и нет какого-то большого сервиса то есть вот apple вместе с киту райки тура разрабатывает свои биоме они maintained эту тему и на каждом доп добби они представляют на каждом прошлом году был первый да там когда свифт объявили не минут пока одну часть они maintained эту тему и есть подозрение что там через пару лет возможно какой-то сервис и пловы будет написано свифти именно backend и тогда в эту сторону потянутся то есть тогда там свист вот из этой скорлупке вылезет и там уже apple будет это продвигать но apple id одно имя это круто было бы да если бы в ходе появился этим place для создания проекта еще вопрос от сторонние модули я просто пришел вот с 2 допустим я хочу подключить для авторизации это реально сделать это же какие-то выпуски и надо или можно в принципе у них если не ошибаюсь документации есть часть прав 2 есть точно есть точно про подключение facebook off твиттеров и каких-то вот таких основных соц сетей именно там работа с таки нами то есть это все можно делать там есть коробки грубо говоря спасибо кто еще будет вопрос задавать все если нет вопросов спасибо"
}