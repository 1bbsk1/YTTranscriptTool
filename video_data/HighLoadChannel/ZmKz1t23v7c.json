{
  "video_id": "ZmKz1t23v7c",
  "channel": "HighLoadChannel",
  "title": "Как мы в 1С делаем свой PaaS / Басель Дарвиш",
  "views": 792,
  "duration": 2024,
  "published": "2023-04-28T06:19:52-07:00",
  "text": "Всем привет Меня зовут Басс эльдарвиш И сегодня я начну рассказывать о том как мы в 1С строим пас как мы водяной строим облака Ну и зачем вообще нам свой пас а начать наверное надо с того что такое для нас по платформа за сервис на самом деле если там спросить одних других третьих Когда задают вопрос о том что такое паста всех очень-очень разные представления о том что это такое и поэтому я постараюсь чуть-чуть конкретизировать 1С - это в первую очередь платформа один из предприятие 8 не знаю Там многие сталкивались не сталкивались Но вот бухгалтерия которые говорили чуть раньше построено как раз таки на этой зоной платформе платформа один из предприятий 8 это платформа это такой фреймворк который позволяет строить приложения совершенно разные разного размера для разного числа пользователей и так далее Это платформа это инструмент разработки который в парадигме рэп epicational Code позволяет создавать приложения так вот наш ПАЗ - это это самое платформа это самая парадигма как сервис Но для создания облачных сервисов Это больше чем просто создание приложений которые можно пользоваться через интернет это создание именно сервис включает в себя гораздо больше чем только какое-то приложение которое можно пользоваться которое ведёт учёт который хранит данные и так далее будет чуть позже ну и для того чтобы начать рассказывать о том что мы делаем Почему доклад будет по большей части обзорный Поэтому я буду рассказывать об идее парадигме которых мы создаем наш ПАЗ для того чтобы начать надо хорошо представить кто такие Наши пользователи наши пользователи это с одной стороны создатели приложений с другой стороны пользователи этих самых приложений поэтому мы у себя делим наших пользователей на две большие группы это конечные пользователи и это разработчики администраторы провайдеры сервисов и так далее Вот про вторую группу людей Сейчас я расскажу чуть подробнее это наши клиенты будем их называть дальше клиентами а кто это такие в первую очередь это как правило интеграторы это компании которые разрабатывают софт по заказу других средних или очень крупных компаний и так далее Это разработчики которые создают для себя то есть это компании у которых есть н хаос команда разработки которые автоматизируют свой бизнес или там создают порталы для того чтобы удобно работать со своими клиентами в своем бизнесе и это разработчики разных решений то есть профессиональные разработчики которые создают какие-то приложения какие-то сервисы и тиражируют их своей аудитории вот если всех их перечислять на самом деле За каждым из них стоит очень-очень много разных ролей пользователей здесь перечислено лишь Малая часть этих ролей какие это могут быть роли То есть во-первых это у конечных пользователей есть кто-то кто администрирует это решение как правило это будет администратор абонента есть конечные пользователи которые пользуются системы есть пользователи которые разрабатывают собственно для своих пользователей для вот конечных пользователей эту систему есть те кто администрирует эти команды разработки есть те кто администрирует сами решения в облаках и конечно наконец есть команды которые администрирует собственно по облака и делают это в связке неразрывно со всеми теми кто им пользуется когда говорят пас Ну как я уже говорил самом начале все представляют себе довольно разную картинку для кого-то пас этот набор сервисов типа очередейка шеи балансировщиков и так далее для кого-то пас это хирург или какое-то подобное решение но чего точно Ну все точно понимают что это что-то между ясом инфраструктурой и конечно вот вспоминается всегда Вот такая вот пирамидка где я это что-то такое большое массивная паста меньше а сверху это такой маленький маленькая вершинка пирамидки Ну почему она маленькая а я с большой на самом деле это пирамидка обозначает степень контроля того кто разрабатывает решение на происходящим в инфраструктуре у тебя там доступная очень многое еще если ниже там дорисовать это будет металл там тебе вообще всё доступно впасть тебя как-то там ограничивают в сансе ты на самом деле вообще не решаешь эту задачу сас это уже про конечные фичи про конечные там crm-кирпи и другие решения Там интернет-магазины и так далее ну и э-э в голове вот если как это Даже сейчас когда я рассказываю абсолютно очевидно что вот на самом деле мало а на одном мясе строится очень большое количество а-а Поэтому я предлагаю и мы в своей команде нет картинку смотрим Вот так я это не что-то маленькое Но это что-то основополагающее по с- это то что помогает поддерживать saas A saas это собственно то Ради чего вот эти нижние два слоя работают и работают для того чтобы этих сасов было много чтобы пользователи было много на одном сайте для того чтобы число фич который реализуется на сайте повербался было много и для того чтобы число решений которые реализуется на сайте тоже было много для того чтобы их было много Их создавать должно быть легко удобно просто и так далее И вот держа это в голове Мы пойдем дальше ключевые фичи которые люди ожидают от решения в Облаке причем в данном случае речь идет Не только о тех кто пользуется облаком те кто создает облачные предложения в Облаке Они то что пользователи облака Они конечно все ожидают скорость никто не готов работать с облаком который медленно в любом аспекте то есть страницы должны быстро открываться приложение должны быстро создаваться и должны быстро работать и так далее масштабируемость никто не хочет прогнозировать то как у него будет сколько у него будет пользователь сколько у него будет данных через год-два если мы готовы потратить только на расчеты прогнозирования то облака уже много не так нужны конечно надежность надежность это не сама цель это не какая-то потребность это естественное ожидание не может быть не надежно иначе в облака никто не останется Это главный страх удобство здесь все стандартно удобства нужно от любого продукта но и для вас платформы естественно удобства нужно не меньше обзор билити это такой наверное один из ключевых пунктов который хочется подчеркнуть Почему Потому что он отвечает на вопросы пожалуй большинству предыдущих это про то как мы понимаем и то как мы его внедряем в наши продукты это про то что решение для любого участника процесса который работает в Облаке будь то разработчик будь то администратор который администрирует какое-то решение в пасе будь то человек который администрирует или конечный пользователь который пользуется системой каждому из этих участников процесса важно видеть прозрачная система он должен понимать чтобы не происходит должен быть черный ящик которым происходит что-то непонятно и реализуются все самые страшные страхи людей которые боятся что данный пропадут там происходит Не пойми что оно не надежно и так далее поэтому обзорубилити это вот то на чем мы для себя считаем важным сфокусироваться и наверное не только для себя Ну и кроссплатформенность это кроссплатформенность причем тут наверное с разных сторон во-первых кроссплатформенность для наших пользователей приложение которое разработаны на нашей платформе должны запускаться с любых устройств с любых операционных систем и так далее с этим все понятно Ну и наша платформа должна помочь работать на любом стейке и Аса или там металла и так далее почему тут все довольно очевидно если мы выходим на рынке где есть какие-то я провайдеры есть дата-центры где можно разместиться все хорошо есть очень много пользователей очень много регионов где с этим будет множество трудностей если мы завяжемся в Эндер лучше на какие-то который есть только в одном месте в другом месте нет то все у нас будет не очень хорошо Итак это было сейчас про то про основные принципы которыми мои руководствуемся создавая наш ПАЗ сервис теперь про то из чего собственно состоит он состоит из сервисов публикации приложений здесь все достаточно понятно это платформа по аналогии со многими уже сегодня здесь обсуждаемыми которые позволяют публиковать приложения в Облаке Живет она крутится маршрутизируется доступно по разным адресам его там можно из регионов перегонять и так далее Это сервисы для разработки это инструменты которые позволяют собственно создавать эти самые приложения опять-таки прямо в Облаке их отлаживать их оптимизировать и другие такие задачи по разработке сервисы для создания собственных санс-сервисов это наверное одна из наших фишек в нашем облаке мы особое внимание уделяем сценариям когда пользователи хотят не просто создать какое-то большое приложение А когда пользователи хотят создать сразу сервис и на самом деле если посмотреть детально то на рынке очень мало решений которые позволяют помогают создавать сервисы каждый там изобретается и велосипеды по созданию именно сервис по созданию приложения фреймворков немало по созданию сервисов там всё сложнее и собственно это же конференции мы слышали много разных более с которыми сталкиваются люди при создании именно сервиса При обеспечении работы это конечно маркетплейсы здесь все понятно И многое многое другое и вот это вот все вместе мы называем icon intergrated cloudrations onlight это как и de и de это develping то есть основная идея опять-таки которую мы руководствуемся которую мы держим в голове это вот для разработчиков разработчиков все давно заботятся и создают удобные продвинутые биение тоже не разрабатывает в блокноте у разработчика на одном экране есть и кот который он пишет и с возможностей для отладки и публикации его в тестовое окружение запуск тестов получения их результатов запуск Продакшен своего приложения и так далее и так далее и так далее А вот для создания сервиса такого полного инструментария практически нет и вот мы считаем своей задачей сделать такую же интегрированную среду Но для того кто создает свои сервисы опасные и сосны значит в целом нашу решения наше облако наша платформу можно поделить вот на такие слои сам внизу Это я соль BR Metal чуть выше это низкоуровневый пас почему его называю низкоуровневым это ПАЗ Вот в одном из классических пониманий То есть это ПАЗ который управляет процессами в инфраструктуре запускает разные там микросервисы запускает СУБД создают их обеспечивает их доступность это сервис который обеспечивает работу всего этого по сети это очереди каши и так далее собственно пас который мы создаем это платформа с которой работают пользователи все эти пользователи которых я перечислял самом начале это пользователи это интерфейс в широком смысле интерфейс который позволяет от рождения идеи до тиражирования На многие тысячи пользователей свое приложение в одной парадигме в одном месте создать а потом продавать развивать и так далее дальше у нас идет это наша платформа для восприятия 8 это фреймворк на самом деле этот слой тесно связан с пасом я его выделил отдельно чтобы отдельно рассказать о том что о том как приложение будет работать в Облаке о том как это будет работать все модели сервиса мы задумываемся сразу на уровне самого фреймворка и многие фишечки которые которые помогают дальше сервису функционировать уже вот именно как санс-сервиса они помещены непосредственно сам фреймворку саму платформу некоторые примеры будут чуть позже Ну и конечно это приложение готовые построенные на нашем на нашей платформе и сам сервисы которые работают опять-таки на из нашей платформы в рамках доклада будет по большей части дальше будем говорить об этих трех слоях немножко будем затрагивать чуть ли не остальные слои тоже Итак начнем с самого низу масштабирования масштабирование это естественное там Какое облако без масштабирования для того чтобы обеспечить масштабирование мы реализовали свой движок Почему реализовали свой движок потому что мы начали делать во-первых очень давно во-вторых При появлении на рынков других движков на таких как кубы мы стали сравнивать свое решение и решение кубов в некоторых местах кубы проигрывали в некоторых местах выигрывали но никогда И до сих пор не набирается какой-то массы значимой Почему нам надо вот перейти на кубы подробнее можем с удовольствием в кулуарах Итак масштабирование в нашем случае основной сценарий масштабирования это увеличение числа пользователей причем пользователь увеличиваются по-разному они увеличиваются внутри одного приложения и они увеличиваются расползаются по разным приложениям число приложений которые пользуются одни и те же пользователи становятся все больше и больше это масштабирование мы обеспечиваем вот на слое низкоуровневого полоса и основной игрок здесь Конечно субдд Потому что приложение которое мы говорим мы которые которые которыми с которыми работает разработчик в нашем случае это приложение с большим объёмом данных это всегда очень тесная интеграция BD в нашем случае это поиск и у нас свой два Почему отдельные два Ну во-первых все по той же самой причине кроссплатформенность кроссплатформенность нам надо чтобы это работало на любом эрмитале и у нас многие тысячи СУБД поддерживать или завязываться на какую-то готовую платформу просто не выглядит возможно Ну и наверное Одна из таких важных технических деталей в этой области это то что репликация у нас только прикладная почему Можно задать вопрос Вот я асы они там так классно есть диски блочные которые можно подключить там к одной виртуалке если что-то произошло с гипервизором она быстро переподключается к другой и так далее ну у нас не везде есть там где у нас есть конечно эти можно пользоваться но он есть не везде и поэтому очень большой акцент сделан именно на прикладное управление с OBD ее репликации помимо этого конечно бэкапа это тоже огромное огромный слой огромный сервис и без бэкапов никто свои ответственные данные в облака не понесет и бэкапы нужны для пользователей пользователи хотят забирать свои бэкапы в любое время они это часть подхода выбилити когда они могут его забрать они уверены что данные в сохранности и так далее Это бэкапы конечно же технических сбоев оборудования Ну и конечно программных сбоев ошибки допускаются наши пользователи Это позволяет им восстанавливаться ошибки допускаемые и это тоже позволяет нам всем э быстро восстанавливаться это пожалуй один из наверное интереснейших пунктов в этом докладе это то как мы обеспечиваем прозрачность наших процессов вот у нас работает Там многие десятки разных ролей пользователей пользователей там опять-таки сотни тысяч пользователей работают с одним облаком и каждому пользователю нужно знать об облаке разные с одной стороны но с другой стороны им нужно знать что-то очень связанное например доступность приложения доступность приложения она обеспечивается работой естественной инфраструктуры доступность приложения обеспечивается работой нашего папы доступность приложения обеспечивается кодом того пользователя который создал какое-то приложение а то есть человек может в напаисе можно написать приложение которое будет не работоспособно но при этом с точки зрения там Яса и паса Все хорошо Все ОК но на самом деле этого естественно недостаточно и то есть недостаточно сказать что ну типа вот в пасе Все ОК а дальше Всё типа вот решайте проблемы сами как-то наши пользователи разработчики так никогда не получается надо им помогать если Любой кто работал по заказу с какими-то внешними разработчиками все всегда по-любому сталкивались с проблемой когда непонятно где граница ответственности проходит так вот в нашем облаке все слои проинтегрированы в один слой в одну большую графовую базу данных и на одного пользователя приходится порядка на одного администратора приходится порядка 2000 объектов у двух миллионов Простите объектов мониторинга Это позволяет очень сильно сэкономить время ресурсы и вообще по ночам руководство анализ что он из себя У нас представляет это все объекты на одном графе зависимости все свои проинтегрированы и все это представляется в одном интерфейсе То есть когда у нас появляется какой-то объект системе новое приложение или новый элемент инфраструктуры он регистрирует свои метрики в общую большую графовую базу данных указываются его зависимости и это позволяет что это нам дает нам это дает в первую очередь информацию о том когда что-то идет не так мы опираемся не на кучу непонятных аллертов они выстраиваются четкие Граф и вершина этого графа это вот та самая первая причина которая позволяет администратору быстро среагировать причем Она позволяет не только администратору быстро среагировать это же система позволяет конечному пользователю узнать Дело в том что его приложение например недоступно и что Этим уже занимаются администраторы администраторы в свою очередь уже знают что именно им надо чинить Это первый момент второй момент опять-таки такой подход очень сильно позволяет сэкономить на выстраивании на выстраивание критичности по реагированию то есть Да у нас представим себе ситуацию что есть какой-то процесс база данных работающих на каком-то Хосте и это база данных перестала быть доступным критично ли это или не критично сложно сказать до тех пор пока мы не знаем работает ли на этой базе данных какое-то ответственное приложение если оно работает и оно недоступно то это критично инциденты надо будиться срочно его чинить и так далее если у нас база данных например недоступно при этом и никто не пользуется то все хорошо Лежит себе лежит в штатном порядке в рабочее время можно будет проснуться и разобраться с проблемой система мониторинга автоматически и так далее все это вместе сильно снижает затраты и наверное одна из уже вот на верхнем слое важных фич которые позволяют на нашем по Асе строить эффективный SAS это то что мы сильно проинтегрированы мы сильно проанализировали сценарий пользователей которые создаются сервисы на нашем пасе и подготовили очень много платформенных решений которые позволяют эти создавать быстрее качественнее эффективнее и так далее Одна из таких фишек это фреймворк с пользователями то есть прямо на уровне фреймворка на уровне фреймворка разработки а потом на уровне по С платформы есть понятие пользователей и этот пользователь у нас не разные там в каждом приложении как это бывает очень часто это один и тот же пользователь которого можно в общей панели управления увидеть в одном приложении зарегистрировать а потом при необходимости подключить его к другому приложению взять и подключить его к другому приложению при этом каждое приложение может обогатить его какими-то своими дополнительными ролями может пользоваться стандартными ролями которые предоставляет платформа и это очень сильно помогает ускорить процессы создания приложений и управления помимо всего прочего пользователи облака то есть пользователи которые пользуются это наши клиенты которых мы говорили в самом начале это разработчики это администраторы которые а работают в Облаке и они зачастую тоже пользователи приложений которые администрируют и иметь пользователей на уровне фреймворка опять-таки позволяет не иметь 25 слоев которые как-то нужно отдельно держать голове там разработчик надо держать в голове что у него есть админка от неё там один логин пароль А вот есть у меня основной интерфейс там другой логин пароль и так далее и так далее Все это при помощи интегрированности пользователей в инфраструктуру фаз и в саму платформу позволяет очень сильно Здесь всё сократить Ну и наверное еще отдельно тезис о том что всем кто создается сервисы на самом деле нужна CRM и почему бы эту CRM не включить платформу но этот тезис Я предлагаю обсудить дальше в кулуарах потому что это вообще отдельная большая Тема и я с радостью поделюсь соображениями или послушаю то что на эту тему думает на этом наверное я все спасибо большое Давайте обсудим паспортас и все это интегрированное спасибо Добрый вечер Да спасибо за доклад было очень интересно Скажите а вот я не очень понял позиционирование этой системы это конкурент большой тройки Amazon Гуглу или это какой-то там оверлей можно вашу бас система ставить поверх например того же Amazon Да наверное все таки ответ скорее про второе это система которую можно ставить поверхность Хотя частично естественно функции пересекаются там у нас можно разработать какое-то приложение Amazon какое-то приложение там не позволяет разработать Он позволяет его сам запустить Мы тоже позволяем приложения запустить Что вы делаете если сервисы пересекаются Вы по агресс предоставляете в амазоне есть Аврора или RDS вы предоставляете губернатиз они предоставляют кубернетистость А мы вот не предоставляем кубернетесь и не предоставляем RDS это составляющие нашей платформы А мы предоставляем нашу собственную среду разработки в нашей парадигме с нашим собственным языком которое запускается в нашей платформе и это позволяет сделать И это платформа для быстрой разработки То есть это RDS или код как последние годы это принято называть Понятно спасибо еще друзья Да пожалуйста сейчас будет Битва титанов Потому что заготовлен супер приз для того кто лучше попросила за доклад я хотел уточнить как вы заботитесь о безопасности Может быть вы на своей стороне там обрабатывать или Используйте какого-то стороннего допустим стороннюю компанию которая помогает вам использовать вы rba запросы Может быть там я понял да наверное вопрос нет у нас обеспечение безопасности Это тоже вопрос разработки Ну вопрос там про обеспечение безопасности в пасе он чуть сложнее чем просто обеспечить безопасность наших данных это платформа сюда может прийти любой разработчик и создать свое приложение и его тоже должно быть безопасным на самом деле как-то можно издалека сказать но нам на самом деле не важно мы предоставили безопасный платформу а поверх неё кто-то там уже сделает все что угодно может сделать она может безопасным она может быть небезопасным но на самом деле мы вот не считаем что мы на это можем остановиться Поэтому в саму платформу разрабатывая саму платформу San Framework для разработки приложений закладываем удерживаем в голове возможности которые держат в голове не знаю подходы которые позволят приложения созданные на базе нашей платформы быть сами по себе безопасно Нужно постараться сделать их менее небезопасно наверное как-то так надеюсь я ответил на вопрос Спасибо еще вопрос да Опишите пожалуйста кто является точным клиентом вашей платформы человек это разработчики и что именно они должны разрабатывать вот вашей противме это разработчик который слайд номер три по моему вот значит это во-первых разработчик который создает приложение например CRM или erp для своего пользователя или я не знаю интернет-магазин или учетную систему или кабинет который какой-то компании позволит не знаю принимать заказы их обрабатывать передавать дальше и так далее Это первая категория наших пользователей вторая категория наших пользователей это те кто на рынке на самом деле много приложений уже написанных и людей комбинируют собирают вместе и тиражируют и вот это другая категория наших пользователей Ну и третья категория она на самом деле здесь вторая это тот кто делает это все ну для себя то есть не обязательно там для кого-то внешнего насколько дорогая эта платформа для для пользователя то есть для себя подразумевается что у частного лица там Может хватить ресурсов на то чтобы начать с ней работать да конечно все так это Я наверное все таки до конца Понял Вопрос то есть ну это стоимость лицензии 1С Ну да вот у нас наверное можно отталкиваться от неё это 7000 что-то там рублей как-то так Можно я ответил на вопрос Спасибо У меня вопрос такой кого точно нельзя перевести на эту платформу из пользователей это один вопрос и вопрос еще Возможно ли развернуть вашу платформу на on premi с инфраструктуре конечного клиента то есть я не хочу вот уходить вообще а так первый вопрос кто точно не наш клиент Ну точно не наш клиент сейчас тот кто имеет уже свое приложение смысле если у него уже есть готовое большое приложение написанное не на 1С или не на одной из наших технологий то он наверное как это это не клиент разработчик Но он все равно может быть нашим клиентом Там может заказать какой-нибудь решение и проинтегрировать все равно всем нужна CRM или все равно всем нужна бухгалтерия или нужна какая-нибудь другая система для управления и он может пользоваться нашей платформой не обязательно как вот основным местом где размещает какое-нибудь свое уже существующее приложение это может быть какой-то вспомогательное приложение или наоборот это может быть основное офисное приложение фронт у него уже на чем-то есть или наоборот у него может быть свой Быков А у нас сделать фронт и так далее таким образом наш клиент на самом деле кто нашим клиентам не является все наши клиенты наверное как-то так И второй вопрос Можно ли это развернуть его время да это можно развернуть его Время оно продается оно доступно Спасибо большое тебе спасибо и тебе памятные призы от конференции и Скажи кому из ребят которые задавали вопросы ты отдаешь свой сувенир так Ну я наверное вопрос так так так так надо все хорошо вспомнить какие же были вопросы Ну наверное всё-таки вопросы про то кто наши пользователи вот мужчине спасибо как раз оказалось что это два брата акробата которые задавали второй вопрос и третий вот они его и распилят в итоге но отлично красота Спасибо большое"
}