{
  "video_id": "LlIEboRi4m8",
  "channel": "HighLoadChannel",
  "title": "Postgres от начала веков и до наших дней / Олег Бартунов, Иван Панченко (Postgres Professional)",
  "views": 12241,
  "duration": 3020,
  "published": "2023-04-28T06:19:52-07:00",
  "text": "Добрый день но фанфары все же прозвучали ладно значит начнем вот такой доклад немножко исторический вроде бы АйТи молодая область еще не совсем фундаментальная наука там не пойми что история уже пора изучать Вот почему мы рассказываем в истории позлиса Ну вот Олег Бунин он умный человек Он уже понял это и видит что после такой ствол мощный технологический ствол который сам приносит плоды от которого отрастают всякие ветки значит возникают новые технологии тоже что-то приносит или ещё не успели Вот в общем этот пост - это явление такое в жизни человечества о котором уже можно говорить как об историческом явлении или в процессе Значит от начала веков до наших дней Ну конечно а начало веков понятие относительное Да вот мы знаем что таблицами пользуются Люди уже много тысячелетий вот значит эта штука очень древняя и явно это таблица да вот поэтому можно считать что база данных начали рождаться когда-то очень давно Вот Но мы хотим здесь в этом докладе показать вам как Как развивается база данных вот как но дело даже здесь не в том что это база данных скорее а как развивается человеческая мысль Как развивается коллективы разработчиков такие сложные международные вот как они живут и почему иногда им удаётся сделать вот продукт такого уровня который более чем продукт да вот ну Олег бортунов если кто не знает это такой известный разработчик Forza его надо знать Вот историческая личность один из основателей того пользователя который сейчас действует мы там подробнее расскажем вот Олег знает огромное количество подробностей которые нигде не написаны значит и они передаются из устное сейчас мы будем присутствовать призывной передаче Предания каких-то старины не очень далёкой вот Ну вот давайте начнем с истории все-таки когда мы говорим про историю с ОБД надо понимать что такое СУБД вот я не хочу углубляться в строгие определение что с OBD что они особо D но мы как практики Привыкли что какие-то вещи нам нужны чтобы считать что продукт является субдд не должен хранить данные А всё-таки должна быть какая-то структура данных должна быть какая-то значит надёжности хранения там то что мы в общем называем осинностью вот э если данное неструктурирована то это не база Поэтому вот я и говорю что с табличек наверное всё-таки можно действительно значит история база данных началась Потому что люди начали структурировать данные уже где-то 5.000 лет назад вот значит важным для развития баз данных Понятно является двойная запись в бухгалтерии которая придумали примерно 1000 лет назад Вот ну и там алфавитная картотеки которые Все мы наблюдали библиотеках в древности тоже является значит предшественником наших индексов да то есть что-то было что-то было это развивалось очень медленно как и все технологии а потом они рванули все-таки мы считаем что основы современных СУБД это статья кода 1970 года Вот реальная история с убдд началась оттуда А те кто считал эту статью да конечно Ну и как Ну она поразила своей красотой изящностью и то что делал Я раньше скажем например когда не знал эту статью Мне показалось я занимался ерундой вот эта статья она мне привела собственно к базам данных и пониманию того как можно работать с данными Ну вообще эта статья определяет то что мы сейчас называем революционными базами вот математическом языке что важно далеко не везде войти в основе всего лежит математика строгая вот в базах данных получилось так что её много Значит эта статья действительно заложила основу всего что потом было и того что мы будем рассказывать Все кто базовыми данными занимаются должны это читать значит перед мы пропускаем очень многое в базах данных потому что мы всё-таки говорим о послевсе но перед повисом был ингрис его разработал вот этот человек microstone Breaker будущий лауреат время тьюринга Вот и началось с того что он раньше занимался базами данных Но это был какой-то этап в его жизни и вот так получилось что когда-то он на Гранте Пентагона купил парочку персональных компьютеров значит в кавычках pdp-11 как они выглядят примерно так и ещё через какое-то время к этому компьютелю то что в Советском Союзе называлось УВО А по нашему терминалу вот и он и поставили unix Значит Юникс была операционная система в которой не надо загружать задание перфокартами и получать их на перфоленту потом вот а можно набирать команды и смотреть результаты это ему настолько понравилось что он придумал название ингрис вот ингрис расшифровывается как интерактив график ретривер System то есть вот такая вот Интера на именно интерактивную работу запал вот и ингрис это была некая сувд которая уже реализовывала концепции заложенные в статье кода Когда это было Это было семидесятое годы значит семидесятых до восьмидесятых семьдесят третьей примерно год значит Кто знает кто изображён здесь и Какое отношение он имеет к Энгельсу вот значит это художник агюст Доминик Жан энгр который имя которого пишется также Вот фамилия ингрис по-французски читается как энгар и поначалу люди путали кто это такой Но помимо связи с французским художником в базе данных впервые появился язык запросов этот язык назывался вот В каком-то смысле можно считать это предшественником нашего SQL но не совсем Скорее это другая ветка он тоже основывался на Революционной алгебре который работал код в этой базе уже был спланировщик возможно примитивные по сравнению с фосгосом но тем не менее он был способен находить оптимальный план исполнения запроса с джойнами подбирать порядок джойнов скажем так значит там была концепция же реализована словаря данных которые сейчас есть во всех базах вот там были была концепция Access методов которые есть в подписи уже реализована в каком-то виде там были блокировки хоть и примитивные но были вот набирал его руками 85 году был студентом в университете синьхуа и как вы помните Open Source в Китае в те годы не было как и в России Поэтому кто-то в Китай привез целый ящик распечатки исходных текстов ингриза и собственно Вот это китайский студент вейхонг он сам набил эти коды в компьютер и стал изучать ингрис Как устроен этот оптимайзер и впоследствии использовал вот эти знания он стал одним из ведущих разработчиков пориса собственно он разрабатывал тот оптимайзер изначальный который вот попал уже к нам такой пример насколько люди были мотивированы хвататься за любой за любое знание представляете целый ящик кодов напечатать мое время ко мне тоже так свое время Вот примерно в этих годах попали исходные тексты Майн фрейма операционной системы IBM vmsp это были две ленты и я тоже вот сидел только уже не вводил ручками отчитал с магнитных лент и мы делали свои операционные системы Там они их довольно было несколько штук и как бы они были Я даже про эту книжку одну написал про эту операционную систему то есть в те годы мы были очень мотивированы короче люди набирали руками раньше А сейчас ленятся даже ничего значит здесь есть две ссылки на работу что он брейкера значит он брейкер настоящий учёные у него когда разработал с МВД он писал статью в начале в которой описывал как он собирается и разрабатывать потом писал статью в конце значит Какой опыт промежуточных статей в огромной биография Ну вот значит это ссылка на две статьи которые есть смысл хотите узнать что такое ингрис как я сказал в то время разрабатывались языки баз данных Вот ql который был реализован в индекс в ингрисе вот и еще разрабатывалось два языка практически одновременно одними и теми же людьми Просто один удачный другой неудачный значит вот если сквер который разрабатывал Дональд чамберлен бойс значит и они же разрабатывали язык сиквел начали они разрабатывать сиквел позже а статью о нём опубликовали раньше значит язык сиквел означал вот все что же такое все а структурный английский структурный английский значит разница между сейчас продемонстрируем чуть позже вот значит структурный английский но потом оказалось что это слово уже кем-то запатентовано кем они кем-то не айтишным короче запатентовано вот и поэтому сиквел сократили Disk ql который произносится до сих пор сих пор участвует Почему вы так произносит Потому что раньше она так звался вот на самом деле история единственная более красивая чем просто сиквела убрали две буквы дело то что сиквел изначально обозначал сиквел сквер то есть был первый язык сквер который неудачный А это как бы его последствия сил и собственно статья так и называлась как последствия языка потом уже они придумали Как расшифровать структурный английский и так далее а копирайт этого слова было за копирайтинг английской компании поэтому они просто убрали гласные и осталось вот этот слово SQL но мы все до сих пор говорим сиквел Да ну вот любопытно была другая еще вторая ветвь значит ql когда закончился вместе с активной разработкой Энгельса тогда что он Breaker сделал на что пост скрыл тоже значит по той же схеме в этих был сиквел этих был пост там то же самое вот ну и после собственно тут же тоже и вырос позже как вот после ингресса вот значит статья бойса и чемберлена которым они описывают сиквел она тоже есть значит можно почитать Вот значит чем отличается язык вот сейчас я покажу Чем отличается язык Значит все знают как исполняется SQL не в том порядке в котором он пишет почему он английский потому что он ориентирован на естественный язык как считалось значит человек не айтишным образованием сможет писать SQL запросы вот выбрать Там кто-то из этого ведь для них это примерно как для наших наша динасик на родном языке Вот Но а сиквел он был написан ровно в том порядке в котором исполняется там синтаксис конечно тоже различался но вот основная его идея в том что он как пишется так и исполняется при этом это тоже декларативный язык вот ну и для естественным был такой порядок для других людей более клиентоориентированных которым не так было важно Как исполняется что получится пошли в сторону стекла и вот здесь как раз это видно значит были две команды восточное побережье США и Западное здесь по карте сразу видно какой из них Западное которое Какое Восточное вот насчет Stone Breaker это Калифорния Вот ларисон это ну Восточная половина скажем штатов в то время значит и вот получалось так что все набирали команды на одни были более учеными более университетскими ребятами другие тоже университетскими Но такими ориентированными на то чтобы сделать бизнес вот поэтому эти взяли ставку на язык SQL Значит на практическое применение потом сделали так чтобы это сказал стандартом и потом все побежали их догонять вот ну там А почему считаем ошибка куэль ошибку в том брекен Я просто quel даже самый великий дейт своей статье писал что куэль наиболее лучше подходит для реляционных баз данных Но это было чисто как бы Академическая работа и как бы они были отстранены они занимались разработкой лучшей базы в мире Ларри Элисон он в те годы Oracle и Ingress были почти равны по доходам по бизнесу но Лори Эллисон провел такую хорошую жесткую маркетинговую компанию по добору людей кадров он все время расстраивался что у стоунтрекера самые лучшие разработчики сами эти разработчики вспоминают что они шли работать потому что это был харизматический умный Чувак во-вторых у него был была команда с которой можно было интересно общаться И самое главное были доступ к этим компьютером где они могли по ночам что-то делать собственно а или саун Он был очень такой бизнесовый человек который понял что SQL и английский язык должны победить французский квель вот QUELLE это как бы французская А здесь SQL и английский язык он так и говорил Вообще Элисон известный такой мужик который очень его крылатые фразы за одно из которых я собственно не люблю Oracle И я очень рад что он конечно от нас ушёл потому что он в интервью сказал так что Oracle в России придёт только на наших ракетах Вот Но тем не менее Oracle пришел к нам не Знаки то в общем Сначала он пришел таким хитрым способом потом у нас Oracle стал собирать большие урожаи сказать с больших компаний но сейчас история Как говорится Сделала свое орков фактически ушел но то что он сделал правильный выбор это подтверждает значит ну как бы то же самое история то есть SQL выиграл Да есть такая схема Я много раз показывали ну вот видно что ингрис и был фактически одно из основ вот не все из этих баз вы знаете вот значит Итак возник постгвиз уже ближе наконец к теме нашего доклада Значит есть статья 86 года стоунбрейкеров которые рассказывает как он собирается делать постес он написал статью и побежал делать позли свою следующую базу вот значит 90-м году следующая статья которую он уже написал когда что-то сделал вот третья статья которая здесь это значит сильно поздняя статья уже взгляд назад одного из разработчиков очень интересная и мы рекомендуем Всё читать Вот так примерно выглядит статья изначально что он брейкера вот и он прямо в абстракты говорит что ради чего он эту базу создаёт и вот свои цели он обозначает эти на первом месте Как ни странно лучше Саппорт лучше поддержка сложных объектов Но это фактически отступление от классической революционной модели её расширение в сторону практики То есть он понял уже что нужно людям вот значит что хотел стоун-брейкер во-первых вот эти неотомарные типы данных он самых вынес на первое место вот значит дальше у него там есть расширяемость он понял что наличие системного каталога позволяет расширять базу данных если конечно в ходе это тоже Предусмотрено Вот и он уже понял тогда что типы данных которые заложены разработчики недостаточно там надо всё это добавлять вот дальше у него была такая интересная концепция активная база данных вот база которая сама реагирует на события и порождает события она называлась у неё активное вот ну к элементам активно относил триггеры которые во всех базах сейчас есть правила которые в позже До сих пор сохранились и вот ещё у него такие аллё-торы было это то что в пользу сейчас называется соответственно на тефай то есть возможность подписываться на события и получать их не знаю кто-нибудь использует лысый на tefly Я не видел ни разу в жизни людей которые этим пользуются вот не очень удобная штука но интересная вот значит он хотел развивать язык у него там уже была заложена новая новая идея языка Post qual Ну собственно языке воплощались все остальные идеи вот значит он заложил там также желание компилировать запросы то есть создавать планы запросов и сохранять Их и потом повторно использовать вот там его часть статьи посвящена выбору того использует ли он один процесс на все или каждому пользователю свой процесс Как это сделано в подписи до сих пор вот он Объясняет что ему надо сделать за обозримое время там небольшими силами серьезный продукт поэтому он выбирает модель процессной пользователя когда одна сессия порождает один Северный процесс мы знаем что это до сих пор после так это одна из проблем но вот так бывает что люди заложили сразу простое решение удобное во всех отношениях а потом оно сказывается на производительности Так что не всякая оптимизация преждевременная может быть он еще очень много чего хотел значит концепция вакуума там была вот но надо сказать что концепция версии тоже Дело в том что в изначальном позгасе все версии всех записей сохранялись в базе Вот то есть это была такая база с полной историчностью можно узнать было состояние любых данных на любой момент времени и поддержка этого как раз была в языке постквел вот любопытно что он заложил туда по этой причине 64-битный идентификатор транзакции мы знаем что современно плоскости он 32-битный 64 тогда казалось всё-таки много сейчас мы знаем что это не так Вот соответственно вот то что здесь ниже написано тоже выдержка из его статьи очень похожа на заголовок записи которые в подвисе сейчас есть тоже значит там есть поля которые определяет видимость этой записи транзакция которая создала эту запись транзакция которую я удалила точнее эту версию вот значит все это было заложено сразу в изначальной статье это было напоминаю 306 лет назад и мы до сих пор этим пользуемся вот что еще он хотел значит он писал там что-то довольно приблизительное восстановление после сбоев дисков значит он заложил там для того чтобы пользоваться вот этой самой видимостью определять видимость тех или иных записей Надо знать какие есть транзакции законы Какие не законы для этого в пользу есть силок такая структура вот он понимал что если это силок который часть база которая напишет на дискета надо иметь очень быстрый способ узнавать для каждой записи ходить в лог это слишком тяжело и вот он придумал такой циклический буфер в памяти в котором хранилась информация о том какие транзакции свежих у нас в каком состоянии находится какие языкомеченные которые еще работают Какие откачаны от роубочные Вот такая интересная структура у него была Ну вот этот пост он был разработан в 89 году первый релиз состоялся то есть от статьи до релиза прошло три года Примерно вот он работал он даже продавался Вот Но с языком становилось сложнее и сложнее пуск вел был прекрасный язык в нем был очень много концепций которые всплыл и не появились может быть даже до сих пор там где-то Начинает появляться например работать с историческими данными Вот и рынок давил Я так понимаю ещё раз Почему я SQL появился все-таки что что мотивировало их Ну потому что саундтрекер понял что он проиграл ораку собственно и его студенты вот два китайца два китайских студента они просто сделали этот SQL сами и назвали его позыри 95 Вот как раз я и появился в этом проекте Windows 95 был такой год что все было модно называть этим годом был коммерческий базой и по-видимому что он брейкер хотел там перебить в коммерческом смысле Но тогда не смог И вот поэтому выходом стало а поддержка SQL был в том же самом году для этого пришлось вот этим двум китайским студентам не только туда поддержку списать но и очень хорошо почистить код Вот и примерно в том же году когда это все было опубликовано уже тогда был Интернет уже можно было не перебивать этих самых распечаток Вот и тогда же пришел Вадим Михеев и Олег тоже вот стал разработчиком примерно тогда 95 году вот шестом году вышел уже пост Господь тем названием которым мы знаем Сейчас значит произносится это подвеску это очень проблематичное слово Вот первая версия была шестой потому что была предыстория вот значит вот это вот основная команда такая самая древняя команда разработчиков которые тогда сформировались здесь известных людей самых известных людей Том Лейн самый высокий вот а ниже вы его подножия сидит Вадим Михеев вот что разработал Вадим Михеев сейчас тоже скажем Олега китаец здесь так кто стоит вот Брюс манжан Вот янвик и фурнье Брюс стоит рядом с домом вот молодой Ну вот Олег тоже в 95 году вышел на эту тропу первого письма туда в как мы сейчас говорим сообщество список рассылки которые тоже тогда уже был вот заключался что Олег сообщал что он смог скомпилировать И прогнать тесты Вот это это было начало большого пути вот кстати скоро Олегу за это выписали акции какой-то компании которая сейчас по-моему уже не существует не это было известно компания Great Bridge и всех разработчиков пригласили туда организовал эту компанию тот самый человек который потом организовал то есть вот фактически я вот был вот и весь копирайтер принадлежал этой компании в то время в то время да вот значит Ну вот когда Олег выключил из компилировал это он увидел что внутри у него вот такие файлики значит данное хранились в таком файлики можно себе представить что на каждую таблицу несколько файлов и Попробуйте догадаться по их именам что же такое нет Вот видите ттб это такая стандартная территория это Time Travel То есть это как раз файлы которые содержат все версии все изменения кстати была Что старая версия переносится на оптические диски и вот процесс вакуум который тогда им задумывался он как раз именно был предназначен для того чтобы старая версия записей уносить на оптический диск он прямо так и писал статьи оптический диск вот ну там прошло небольшое время и вот Олег свой первый патч написал Он касался поддержки локали то есть возможностей работать корректно символами верхней половины аски таблицы как это называлось то есть национальными символами языков вот значит но тем временем Да переписка шла и по-другому поводу рождалась имя был вопрос как назвать потому что ясно что 95 устаревает со страшной силой вот другие тоже приходят продукты своими именами вот ну короче имя плохое было народ ругался причём не только русские но тем не менее Брюс вот таким патчем назвал его подвеской л и с тех пор мы ломаем язык есть специальное объяснение что не надо говорить постгре Это не постгре сам Том Лейн об этом просил Вот это погрешковел ну а мы можем произносить плоскость Вот русский След там есть и сайте вот значит Видите Там Файлик есть слоник.гиф там значит заглушка.гиф вот нарисовала Данил лундин значит прислал метис самирасов вот такой вот логотип возгласа слон который потом выразился уже в такого более простого слона вот там есть ссылки где можно прочитать про это вот с тех пор начал развиваться твой делит такие этапы сейчас некоторых из них поговорим подробнее значит важнейшая штука которая в постгасе была это mvc то есть мультиверсионный контроль доступа вот Суть в том что транзакции должны быть изолированы к ним Каждый должен видеть только то что он с чем он работает не мешать друг другу вот значит ну кто знает что такое миссиси тут знает кто не знает сейчас за две минуты мне объяснишь Ну вот можно считать что то что я сказал Вот но надеюсь что на хайлуде большинство Знаешь такое vcc значит сделал это Вадим Михеев вот до этого пришлось выпилить практически полностью историческое хранилище которое было сделано стоун-брейкером вот но надо сказать что что-то осталось вот помните что те Я показывал заголовок записей он есть вот Вадим Михеев что-то сделал весь фрагмент из его письма Олегу где он разъясняется там всё просто что понимать-то как раз из-за того что все версии там вот В общем на самом деле когда в один это все сделал это был шок для всех потому что вот этот тайм-тревел убрался появилась какая-то новость вещи и народ не мог даже понять что-то я бросился читать оригинальную статью арест там как все это происходило доделалось там и ничего не понял и просто писал Вадим Вадим ты мне по-русски можешь написать что же такое сделал Вот он написал что да только те записи которые были живы в момент старта запроса очень просто и понятно я ушёл довольный и мы с ним потом ещё работали по как раз чтобы те индексы не не росли ссылочка про что видение которое Все любят тоже сделал в один Михеев в то же время вот статья которая говорил то есть это обидно разработка научная вот которая была реализована в один Михеев в постгрисе начале идея валов в рейда хедлогов в том что все пишется в начале в этот лог а только потом на диск этот лоб потом может быть проигран после Крэша и все восстановлено вот но и как оказалось потом на счастье всем нам это пригодился для репликации для бекапа казалось что очень полезная вещь продолжает развиваться и до сих пор поскольку есть проблемы Вот Олег что такое сталкивался с тем что вдруг у нас на диске начинается большая активность там все пишется больше чем надо бы вот это сделал это как раз является следствием родовой болезни вот из-за этого сейчас у нас есть оптимизация ход цепочки То есть у вас таблицы есть еще индексы у вас будет Как раз на любое изменение у вас будет еще распухать индексы и очень много оптимизации в том числе то есть чем сейчас Алекс фёдором занимается в отношении толстая это все касается уменьшения райтом префикейши вот значит ход технология которая появилась насколько я помню где-то в первой половине нашего смысле 2010 года заключается в том что можно не писать изменения в индексы в случае возникновения новой версии и индекс указывает не обязательно на текущую версию записи она какую-то Откуда можно по цепочке версии дойти если это в рамках одной страницы это работает быстрее также появились для определения видимости ускоренной вот толстая которыми я говорил Это технология для хранения длинных значений вот которая была написана 99 году есть такая картинка на которой автор Олегу написал автограф что он написал зря он это так сделал так сделал потому что нехорошо в маленьких записях хранить большие данные даже если их рассовать на отдельные слайсики до тех пор пока ты не можешь эти слайсики По отдельности апдейтесь пока Каждый апдейт вызывает у себя обновление Да целиком её написал янви как раз в декабре вот прошлого года я как раз рассказывал о том что какой-то толст плохой и вот мы делаем более крутой там сейчас как раз благо был толст то что делается Олегом он подошёл и сказал вот к тебе Вот такая я считаю ГИС технологии индексов когда значит в 2000 году возникла необходимость быстрому поиске по массивам начали искать возможности индексировать Максима обнаружили что уже есть некая реализация это очень кривая это кусочек из документации начинается сообщение о том что есть ошибка Вот который написал один человек который оказался знакомым Олега попущена вот Представьте в документации тогда было написано Потому что есть такая ошибка ребят Вот и поэтому пришлось Олегу вместе с Федором Это был такой первый самый такой крупный значительный вклад нашей команды Вот это переписывание индексов альтернативной реализации на ней реализации рода дерева для поиска по множеству которые потом использовалась очень во многих случаях поиск по массивам полный текст и поиск и всё прочее вот значит статья хитростейна здесь он благодарит Олега Федора за это дело в общем они стали очень довольны приобрели огромную популярность в обществе Ну геста были проблемы переполнение сигнатур Что это такое когда вы индексируете значит с помощью РД дерева На сигнатурах что это значит там место если у вас используется позиционный вентиляционное хранение так называемое то есть каждому значению соответствует один битик сигнатуре вот поскольку значение много то соответствие неоднозначно То есть это индекс потерянный лося индекс Вот и сигнатура конечно длины очень быстро забивается единичками если много разных возможных значений получается так что у вас в дереве значит несколько уровней целиком забиты единичками и это начинает работать как полный перебор Вот это проблема И поэтому для реального текстового поиска гисто оказался не Очень эффективен и тогда в 2008 году вот Олег и Фёдор придумали Джин индекс который представляет собой на самом деле Джин это означает обобщенный обратный индекс но мы когда его придумывали мы использовали для нас визуализировали как Джин из бутылки знаете то есть магический такой которому Настолько настолько поразил то что мы сделали да что мы думали что вот этот индекс будет помогать во всех задачах будет всем рады и потом нам Пришлось все-таки сделать вот это название Джин но мы знаем что джином пользуются Миллионы людей счастливы Благодаря А Прогресс наверное все самые яркие примеры это постес вот пост используют как раз Вот наши гестовые индексы а значит Ну да гисто оказался он более обобщенным более широко применимым потому что индексирование массивов там это к этому сводится практически любая задача индексирования значит важная штука репликация сообщество очень сопротивлялось тому что в после появилась та репликация которую мы сейчас имеем вот здесь есть цитата такая душа беркуса в котором говорит что никогда в позе не будет одного рекомендованного решения для репликации буквально через шесть через год написал А давайте просто передавать валы и это будет репликация если тебе сказали ёлки как всё просто давайте И вот через несколько лет наконец это вошло в релизм девятый италикация которая имеем сейчас сам Великий Том Лейн говорил что никогда репликация не будет базах данных для этого есть внешние внешние тузы но потом Через много лет признал ошибку что действительно потому что пользователи Они не хотели пользоваться в котором не было репликации потом репликация так понравилась начали появляться какие-то дальнейшие улучшения значит попытки сделать кластер вот все они со своими плюсами и минусами и значит пока нельзя сказать что для позга есть или когда-нибудь будет один рекомендованный встроенный кластер потому что для этого есть внешнее решение Ну посмотрим куда это будет развиваться вот значит Джейсон это важная штука которая в свое время подняла популярность постгальская там в разы и мгновенно вот здесь тоже целая история но вот Олег и команда наша вложила Туда много труда собственно здесь самореволюционное Было это придумывание людей которые как колесо что нельзя хранить Джейсона видимо текстового представления нужно использовать оптимизированную структуру которая называется вот когда Джейсон би появился и можно было работать уже с данными быстро тогда как раз народ и начал перебегать на позу с каких-то на ускоренно-бозенок вот Джейсон тоже не остановлен там про это Олег много рассказывал поэтому не будем здесь повторяться Ну наверное пропустим и кнн но просто я не могу не сказать о нем потому что разработка очень крутая очень востребованная но недооцененная до сих пор это возможность одним махом очень быстро найти в любом пространстве точку ближайшую к данной других базах не было очень долго Вот и когда просто жуткое впечатление Когда у вас раньше долго искалась в реальном времени за курсором в Канаде этот доклад работал людях стали и хлопали потому что я показал что 10 тысяч раз ускорились запросы такие найти ближайшие рестораны например вот а всем хотелось есть и всем надо было быстро найти ресторан вот значит история полна текстового поиска по тексту из поиск тоже долгое время был там принципиальным отличием Пользуясь от других вас потому что мало кто в одном движке мог совместить и реляционную базу с обычными запросами и полнотекстовый поиск вот Ну понятно что он по скорости и должен уступать какими-то специализированными решениям которые только поиск Зато в нем есть транзакционность там бэкап вот запросы которые сочетают в себе и полнотехствие атрибутивный поиск универсальной базе данных он хорош вот он был сделан нами 2000 году для рамблера поначалу Это был поиск на базе гистового индекса внешне переломом модулем потом постепенно он вошел в пост пройдя некоторые интересные этапы эволюции вот стал стройным получил Джин индекс вот значит он был реализован там благодаря расширяемости возгласа которые потом под конец скажу резервное копирование тоже вначале был пожидам потом научились копировать базу бинарным образом архивировать валы благодаря этому восстанавливать на любую точку до которой можно проиграть валы последний технологическая новинка здесь это пи трек который уже несколько лет назад существует это патч который позволяет бэкапить бинарно базу не всю А только блоки измененные начиная с последующего с последнего полного бэкапа Вот это для больших баз просто необходимо полный бэкап постоянно делать нельзя расширяемость подвиса это вот тоже фича которая была заложена брейкером это один из важных факторов его успеха того что он стал таким психологическим стволом он сколько там всего понара расширяли фактически все полезно что там есть это какие-то расширения И поиск значит и Джейсон и разные типы индексов в которых нет других базах это все появилось благодаря расширяемости продумано еще тогда еще настолько использовал в мире и это один из важных его влияний на весь мир баз данных именно с этого момента началась расширяемость появилась везде мы доказали что мы не просто там можем добавить индекс или там сделать тип данных мы можем это сделать не останавливая саму базу данных и мы можем это сделать не только не останавливаем базу данных и Не будучи ядерным программистом позрится то есть обычные люди в обычной компании которые знают там силе что-то могут написать это все сами кастомизировать говоря базу к своим задачам это подтверждалось там многими другими примерами Ну я в своей жизни Вот все что мы сделали с Федей в потресе это было как раз шло из жизни мы расширяли погреб для того чтобы дать людям такие ручки по которым они могут приспособить все для себя вот надо сказать что расширяемость она отчасти такая вот есть так легко расширять не знаю глубоко ядра после потому что после сработает по простой модели 1 процесс на одну сессию Вот кто пробовал писать extention Nexus знает что это гораздо сложнее чем писать и для постресса вот значит еще один фактор успеха - это сообщество это переместивное лицензия которая позволила делать большое количество орков которые берут кот и возвращают обратно здесь очень много компаний сообщество прошло эволюцию если раньше были индивидуальные люди то сейчас посмотрите диаграмма вклада которую нарисовал Брю 13 версии здесь все компании все компании вот все принципиально разработчики позга сейчас работают в компаниях почему это так потому что подвиг уже больше не Open Source который пишется людьми на коленке для себя а Open Source с которым обмениваются люди которые работают с большими системами соответственно с большими заказчиками вот значит для граммов орков Она очень большая она постоянно разрастается кто-то умирает кто-то появляется Ну вот если вы после не было расширяем если бы не было такое лицензии то по-видимому не было форков а значит нельзя было бы такие силы масштабе привлечь к его разработке Вот но посмотрите еще раз на этих веселых людей когда они в 2006 году собрались в Торонто А здесь очень много узнаваемых лиц адек Здесь тоже кстати есть вот Федя в середине я вон там с краю То есть это мы впервые увидели друг друга до этого ругались и работали вместе только через письма и 2006 году нам дали Грант Мы поехали в Канаду встретились вот всего было столько посредистов разработчиков Они конечно не знали во что это всё сейчас это Большой Бизнес это большое количество И большинство из них этих людей Мы конечно немного Постарели Ну скажем так помудрили поумнели но вот мы до сих пор работаем вместе продолжаем вот ну В общих чертах все понятно что конечно детально истории один доклад Невозможно рассказать но постараюсь дать какие-то точки за которые можно зацепившись потом Изучить и понять это уже более детально Значит у нас есть фрезы из-за лучшие вопросы это две книжки и одна из них про поздний другая про солнце значит Ну мы же астрономы поэтому у нас есть лучшая в России популярная книга которая получила в прошлом году две премии литературных значит про наше солнышко небесное кому подарим вопросы надо задать вопрос конечно и одна книжка тоже совершенно уникальная книга написана Егором роговым нашим коллегой про внутренности по адреса поднимите ручку Задайте вопрос если стесняетесь то можно потом в зоне кулуаров это сделать но давайте так если есть вопрос Задайте 3 2 1 об Вот раз И вон там два раз два Денис мысленников с пиросов расскажите пожалуйста а когда в пост попали интервальные типа данных и может быть пара советов как их правильно индексировать и как с ними эффективно работать вот из первых рук хочется узнать ответ интервальные данные попали чуть ли не самого начала то есть они как бы сначала Ему эмулировать просто композитным типом вот сейчас это называется Range и сейчас это уже просто стало как бы некоторые API появилась которая позволяла уже не заранее предопределенное интервалы поддерживать А вы могли сами свои водить свои интервальные данные и индексировать то есть Поэтому написано очень хорошие статьи вот Вполне себе Джефф Дэвис занимался этим делом я могу вам помочь найти это тоже один из расширяемости такой Вот люди и второй вопрос спасибо да спасибо большое за доклад у меня может быть немножко наивный вопрос я не специалист по позже но я надеюсь что вы на него ответите вот известный несколько не оптимальности в постгры там то что я видел счетчик транзакции Может переполняться с известными последствиями оркеры сделаны по-моему в СПб на процессах а не на потоках и что-то там с автовакум какие-то слышал Есть нюансы А вот есть ли какие-то планы оптимизировать что-то из этого если нет то почему Спасибо планы конечно всегда есть по крайней мере 64-битный транзакции в нашем отечественном форте они есть и наши клиенты говорят что не сильно зависят но понимаете пробить это все изменения сообщества это вещь такая сложная долгая Вот и так далее значит всяких там автоваку и так далее естественно Люди работают над этим делом Просто после превратился уже не просто не те времена когда я сидел ночью поработал cvs сказал да и всё сразу пошло сейчас у нас целая процедура связана с тем что слишком много крупного серьезного бизнеса используют затрагивает Но это же и развивает компании то есть компания делает свои форки продвигает своим клиентам отлаживаются и потом уже как бы имеет возможность вернуть обратно Да все эти проблемы родовые известные да Третий вопрос что Да у меня такой вопрос Вы рассказали про историю что может измениться допустим в архитектуре построения железок чтобы сильнее всего повлияет на архитектуру пост А куда он двигается вообще базы данных они сращиваются с железом потихонечку то есть вот моя большая Великая мечта чтобы у нас здесь сошлись люди например которые смогли бы спроектировать SSD для того чтобы делать первоначальную фильтрацию прямо в железе Ну понимаете чтобы это не проходило по шине например обычная фильтрация X больше нуля сейчас мы должны все прокачать через шину через процессор это большой трафик и очень много нагрузки а SSD принципе могла бы это все сделать внутри себя и наружу выдать только конкретные нужные блоки то есть на самом деле идет мы находимся на том витке когда база данных начинает потихоньку отставать от требований пользователей и уже много раз бывало надежды возникает не только на того что мы развиваем на развитие железа железо оно тоже уже вы знаете там закон муратом конечно скорость света и так далее поэтому я отлично Вот мое мнение это перспектива это сращивание железа то есть специализированные процессоры уже сейчас как бы есть позы из которой работают с графическими ускорителями то есть они как бы ускоряют определенные виды запросов Джон и так далее То есть есть такие эксперименты но и конечно хранение хранилище Это один из самых важнейших аспектов адреса друзья еще один быстрый вопрос Вот пожалуйста второго ряда все отлично друзья спикером памятные призы Скажите пожалуйста кому подарим книжки мы уже знаем Я думаю что первый подарок первый человек будет выбирать Какой из двух книжек он хочет Это вопрос про то это вопрос человека который сказал что он не специалист пост вот тем не менее интересуется а второй вот а второй вопрос про железо отлично друзья Подойдите пожалуйста к спикерам за книжки Вот спасибо спасибо"
}