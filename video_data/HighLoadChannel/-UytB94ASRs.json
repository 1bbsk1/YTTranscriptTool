{
  "video_id": "-UytB94ASRs",
  "channel": "HighLoadChannel",
  "title": "PostgreSQL @Alibaba Cloud / Xianming Dou (Alibaba Cloud)",
  "views": 469,
  "duration": 3002,
  "published": "2017-04-22T14:48:25-07:00",
  "text": "всем привет прежде всего позвольте мне представиться я из китая меня зовут семен доу я знаю что русским очень тяжело произносить мое имя но ничего страшного я работаю в alibaba клауд занимаюсь пост грессов и его реализацией для облака моя работа заключается в основном в управлении прогрессом а также ядром босс gresso и сегодня я хочу рассказать о том как мы справляемся с этими задачами и как используем postgres для облака но сначала хах хочу узнать сколько здесь находится администраторов баз данных спасибо а если разработчики и и гидра баз данных ну что ж наша задача состоит в том чтобы сократить расходы на обслуживание баз данных поэтому я хочу задать вопрос как же необходим как можно создать из он спас gresso с нуля представьте что к вам приходит руководители и говорит нужно создать instance postgres аж как это сделать сначала нужно машина после этого необходимо написать несколько скриптов после этого развернуть уже сам инстанции сейчас я покажу как это делается и так это наша основная страница на сайте alibaba клауд где вы можете выбрать спецификацию сколько сколько ядер и сколько озу вам необходимо а также какое пространство хранилища вы будете использовать за первые полгода вы при этом ничего не платите затем платите около 6 центов за час использования сервиса после этого вы приходите на этот экран если вы выбирайте подключение указывайте основную информацию и дальше уже можете переходить к задачам управления вот так же не должны создать аккаунт администратора базы данных и за 10 минут уже вас будет и стелс postgres а именно этим мы и занимаемся после этого вы можете уже переходить непосредственно к разработке приложений но конечно же это далеко не все после создания инстанса вам больше не нужно беспокоиться о его обслуживание и управление им потому что этим занимаемся мы вы можете сосредоточиться только на развитие бизнеса и создания приложений все остальное мы берем на себя что именно во первых высокую доступность здесь два аспекта во первых это область полностью прозрачная то есть вам не нужно будет заботиться о том как мы управляем по с греком как мы занимаемся дедупликации как мы выполняем переключение когда мы это делаем и зачем все абсолютно прозрачно второе вам не нужно беспокоится о словах и какие связи находятся между мастерами слои вами вторая часть управления это мониторинг пиры чем я приехал сюда мне очень часто задавали вопрос как выполняется мониторинг с моей точки зрения существуют два вида мониторинга первый это мониторинг производительности когда вы создаете профилем как мы выполняем мониторинг как мы собираем данные данные о производительности об исключениях и оповещениях в этой связи мне кажется будет важно поговорить об авто восстановление то есть вам не нужно самому беспокоиться о том что происходит системой потому что в автоматическом режиме создаются оповещения и система само себя лечит третий аспект это резервное копирование и восстановление вы знаете что от ipad очень важный аспект и несмотря на то что у нас есть автоматический мониторинг иногда нам необходимо вернуться в какой-то определенный момент времени на примерно 2 часа назад если например таблица дропнул осилим и обнаружили в ней ошибку именно для этого у нас есть специальные операции которые позволяют восстанавливать базу данных соответствии с каким то определенным моментом времени при этом вы можете сделать это как за день назад за неделю или даже за месяц так же мы можем составить расписание для резервного копирования то есть вы сами можете решить когда именно будет выполняться резервное копирование ваших баз мы можем автоматически составить либо вы сами скажете укажите нам окна когда именно будьте выполнять резервное копирование так же мы выполняем улучшение ядра пост грессов мы делаем это специально для наших заказчиков поскольку они выразили в такое пожелание потому что платформа платформа очень сильно порой отличается от заказчика к заказчику именно поэтому мы вы мы выполняем ряд кастомизации для наших заказчиков мы можем выполнять обработку о м то есть ошибок связанных с нехваткой памяти мы можем выполнять ее hang то есть если у вас не хватает ресурсов ввода-вывода мы уже сталкивались с этой проблемой несколько лет назад но она по-прежнему остается актуальной также мы занимаемся управлением привилегиями в целях безопасности вы не можете позволить чтобы чтобы лук у наших заказчиков был супер-пользователь именно поэтому мы выполняем управление привилегиями также мы занимаемся прозрачным приключениям и управлением подключениями то есть мы можем совершенно прозрачна переключаться между мастером если вам так что заказчик даже не знает или когда происходит переключение или чего это было сделано так же мы занимаемся пулами пулы это немного больше чем просто подключение потому что очень часто мы используем прокси-серверы и если наш заказчик использовать свой собственный пул подключение и он недостаточно хороший то мы можем сами поддерживать подключение для того чтобы он не терял результаты своей работы поэтому давайте сейчас рассмотрим каждый аспект по отдельности и станет понятней высокая доступность это наверное самое сложное самая важная часть управления так как мы стараемся предоставить определенное качество обслуживания это очень важно мы говорим нашим заказчикам что мы можем предоставить что они могут получить за ту или иную цену как мы это делаем во первых у нас есть метаданные метаданные обо всех инстансах конечно же я могу вам в деталях об этом рассказывать но у нас более сотен тысяч инстансов в том числе postgres mongo db и другие особо д.м. поэтому как мы можем управлять таким большим объемом метаданных за малое время во-первых мы очень быстро обнаружил обнаруживаем где находится масса где sleeve и можем быстро их переключать дальше мы можем сделать из них оба мастера это выглядит именно так мастер конечно же должен знать дело находится после обнаружения это соединение так вот после обнаружения например этот мастер упал обычно мы не подключаемся к своему потому что в подгрести мы можем использовать абсолютно разные средства репликацию ключ аппликации поэтому нам совсем не обязательно подключаться к слову в случае сбоя вы знаете что слейд обычно используется для репликации репликация очень хорошо работает под гресь и так вот если мы обнажаем обнаруживаем что мастер упал а в мастере очень много работников их может быть сотни или даже тысячи так вот соединение будет переключена абсолютно прозрачно и slave станет сам мастером и при этом наши заказчики это даже не заметят подключение не упадет и продолжится работать такой какой она была мы также можем обрабатывать каждого мастера и половину всех наших инстансов то есть несколько сотен тысяч инстансов одновременно мы можем обнаруживать сбои мастера меньше чем за минуту но здесь у нас на схеме 2 мастера и они также могут сообщать друг о друге поэтому если один из них упадёт другой мастер перехватит его вторая часть посвящена мониторингу мониторинг это очень важная часть управления мы выполняем весь мониторинг на уровне хостов то есть мы выполняем прямо вы цветах все задачи по мониторингу и там жил храним все данные о мониторинге для этого мы используем специальные хост коллекторы которые передают данные затем в элемент storming а затем они направляются в базу данных но естественно здесь могут возникнуть ошибки и база данных может разрастись до нескольких терабайт после этого мы почистим наши данные потому что там хранится все сразу все сразу и нам необходимо эти данные очистить для того чтобы обеспечить хорошую производительность мы используя специальный api-интерфейс для того чтобы данные могли быть передана пользователям всех все передается поищи теперь вторая часть посвящена тому как мы наблюдаем за производительностью для этого мы используем различные правила и проверки например если instance занимают более 90 процентов циpкa это очень много и тогда производитель из может значительно снизиться для этого мы используем специальные проверки обычно пользователь получает специальное уведомление в таком случае в случае пользователь может перри подписаться для того чтобы снизить нагрузку на цп все эти данные хранятся специальной базе данных после этого мы можем объединить все данные и например отправить оповещение и и так мы можем выполнять самые различные проверки и затем уже принимать решение будет ли администратор пользователя или заказчик получать уведомление о том что что-то идет не так но также на основе имеющихся данных мы можем выполнять самостоятельно и исправление системы но это естественно и достаточно потому что это линия эта связь слишком длинное и нам нужно выполнять обнаружение на уровне essence of например проверять доступность это очень важная часть управления поэтому нужно сделать так чтобы эта связь не было такой длинный вот что касается мониторингом переходим к резервного копирования копированию и восстановлению резервное копирование это совершенно другой абсолютно другой модуль который является кстати я встроенным мы выполним все бэкапы выполняются в потоковом режиме мы не можем выполнять резервное копирование на диск а затем перемещать эти данные куда-либо еще потому что у нас слишком много essence of и нам необходимо чтобы данные передавались постоянная и при этом не занимались . много пространства мой пост gres манга тебе все они позволяют выполнять потоковое резервное копирование после передачи данных они перемещаются в другое место специальный сервис эти backup сервисы обладают рядом микро сервисов которые отвечают за мониторинг и обслуживание этих до этих данных и зернова копирования то есть после передачи данных специальный микро сервис обработает их и переместит в постоянно хранилище в alibaba мы используем для этого названия opens the rich кстати хранилище достаточно недорогое после постоянного хранилище пусто как данные туда приходят мы можем уже при необходимости заняться их восстановлением но на что еще нужно обратить внимание пост грейси восстановления происходит sword логом и с другими журналами то есть мы можем остановить данные именно в каком-то определенном моменте времени в зависимости от того какой именно период нам нужен поэтому если мы например что-то удалили или у нас ошибка в кортеже и мы хотим восстановиться за одну минуту или час назад мы можем использовать именно этот сервис вот так мы это делаем для наших заказчиков после резервного копирования пользователь может получить данные которые находились в постоянном хранилище через специальный интерфейс мы делали это раньше правда немного по-другому дело в том что раньше заказчики могли сами выбирать стратегию резервного копирования то есть они сами нам сообщали где будут храниться метаданные а где будут храниться сами данные но мы решили что хранения метаданных должно выполняться по расписанию для этого мы используем специальный специальный поток который посмотрел разделять эти данные на два на два очень просто последняя но очень не менее важная часть это улучшение ядра по с gresso мы очень много занимаемся ручными операциями и эта область разделяются на 4 4 подкатегории с левым как вы видите мы видим то что относится к ресурсам наши заказчики как правило небольшие компании у которых не очень много денег поэтому их ресурсы достаточно ограничены это приводит к тому что они могут столкнуться с очень большими проблемами например нехватка памяти нехватка подсистема ввода-вывода и так далее поэтому они должны знать когда они выходят за лимиты по памяти хранилище и так далее с этим очень много проблем поэтому мы потратили очень много сил чтобы решить эти проблемы 2 часть в данном случае у нас мы рассмотрим но на вопрос потому что облачная платформа совершенно не похоже на другое и мы используем ту же платформу в которой присутствуют и другие базы данных поэтому мы достаточно много сделал для того чтобы обеспечить управление привели гамме привилегиями и также сделать прозрачное подключение это две основные части нашего улучшения кирова я сейчас по очереди расскажу по каждому улучшению прежде первое всего прежде всего мы говорим с вами по поводу обработки объектно-ориентированного моделирования при силу этом мульте процесс и если один процесс задействую слишком много памяти то тогда данный процесс обивается подается сигнал ли не все и данный процесс завершается противном случае он обновляется прерывается все подключения и не все наши клиенты и переподключается переподключается сервер случае если осуществляется подключение то тогда возникает проблема каким образом мы не можем попросить попросить о своих клиентов перестроить или пи конфигурировать свои платформы возможно что-то делалось достаточно давно возможно у них сейчас не было исходного кода для того чтобы можно было переделать что таким образом эту проблему необходимо нам решать самим это инстанция так вы видите здесь контейнер ресурсов весь экземпляра помещается в один контейнер как вы видите внутри контейнера присутствует несколько процессов и если данный процесс процесс 2 используя слишком много памяти и превышает лимит выделенной памяти для этого контейнера то тогда специальную обработчика а.м. мы завершаем процесс после того как мы получаем данные сигнал мы перемещаем его из этого контейнера во внешний контейнер в данном контейнере доступно достаточно большое количество ресурсов поэтому а после этого да конечно данные процессы ещё использует много памяти и мы это не можем себе позволить поэтому процесс можем отменить но не завершить и после этого мы сможем вернуть весь объем памяти который был задействуем данным процессом и так как мы можем этого добиться прежде всего нам необходимо использовать команду consell для того чтобы завершить данный процесс но потом нам необходимо дополнительно лс для обеспечения безопасности так как мы не хотим чтобы данной информацией с процесса было потеряно таким образом необходимо разработать новый сигнал в по стрессе и поэтому если прогресс получает данный сигнал то мы делаем восстановлением задействованы памяти и таким образом мы проводим данную процедуру всего поступает сигнал от хондролон эта обработка как раз фото решения проблемы когда возникает проблема нехватки памяти в данном случае мы видим что мы не можем просто так передавать все эти процессы и решения наших клиентов так как может быть опасно но нам необходимо обеспечить управление привилегиями прежде всего нам необходимо понимать что суперпользователь и достаточно опасно и решение пользователям требуется много привилегий и нам необходимо обеспечить совместимость различных решений использование различных бинарного кода для того чтобы получить разиня рейтинге прочее и конечно нам необходимо учитывать и вопросы совместимости так как нам мы не хотим нарушать какие вопрос совместимости с сообществе прогресс разогрет прогресс и подвеса таким образом мы создали набор правил это не супер-пользователь но вот таким образом может обновлять определенные процессы посмотрите пользователи можно создавать различные пользователи с определенными привилегий например можно предоставить привилегии доступа к файлу таким образом мы повышаем безопасность и защищенность нашей платформы а теперь поговорим по поводу управления привилегиями дальше мы поговорим о архангел ввода-вывода это конечно проблема достаточно серьезная для нас так как требует масса ресурсов все машины как раз если вдруг мы столкнемся такую проблема что-то подвисает тогда весь все процессы останавливаются другие экземпляры также завершаются и не могут функционировать дальше даже если всего лишь save слайд в завис один экземпляр так как все находится в пределах одной машины 1 система а причина файловой системе x4 и проблем в том что по сгрыз во время анализа делает следующее и здесь конечно достаточно тонн а если мы блокируем какой-либо канал ex4 журнал и в этом случае с 4 и данный журнал работает на уровне h100 поэтому таким образом мы не можем нести никакие серьезные изменения поэтому мы пытаемся записать данные эти данные другие банки во время данной процедуры прежде всего необходимо заблокировать журнал x4 далее необходимо записать лоб и здесь зависть все зависит от вашей бизнес модели случае если вы создаете множество баз данных то таким образом вам предстоит записать большой объем данных и и на это потребуется определенное время во вторых вы записываете странице данных если это здесь мы не говорим о каком ли только ком культа буфере и обычно в данном случае мы говорю что мы не говорим о данных элементах если обычно вы пользуете стандартно среду то проблем никаких не возникает но как только вы начинаете используются различные сотни различных атмосфер различных сет прогресса и у каждая система каждого элемента есть определенные лимиты в использования ресурсов то тогда на у вас возникает серьезная проблема так как на записи ходит очень много времени тогда вы можете использовать функцию бьет стинга экземпляра и страниц данных будет много например 30 страниц и это ваш лоб и все находятся в вашем блоге журнале x4 и очень много проводятся операции ввода-вывода до настоящего момента мы использовали ssd ваших обычных решениях до этого использовали жесткие диски но диски просто не способны обрабатывать все эти процедуры ввода вывода но все еще все равно возникают серьезные проблемы по поводу операции ввода-вывода и когда мы вызывали сводим запись в журнал x 4 страницы данных мы выполним все записи на хост машине проблема серьезная более того есть определенный лимит ввода-вывода например на каждой инстанции каждом экземпляре каждым sperm можно пополнять например 100 операций ввода-вывода таким образом проблема усугубляется с ростом количества страниц данных которая нам необходимо записать и вот вы посмотрите какие мы сделали то есть мое решение нашли 2013 м году а теперь давайте посмотрим как мы решили данную проблему давайте подумаем о данных до тех пор до того как мы используя операция в синга прежде всего необходимо записать данные страницы с данными даже несмотря на то что требует гораздо больше времени нам необходимо выполнить данную процедуру прежде всего так как таким образом мы не блокируем никакие журналы и таким образом хост продолжает функционировать данный и и даже несмотря на то что экземпляр процесса несколько замедляется все равно он остается доступным после этого мы обращаемся к журналу x4 блокируемого объем данных которые мы запишем нужно будет гораздо меньше таким образом мы сокращаем времени записи logo и это значительным образом решает множество из наших проблем посмотрите давайте подумаем на это есть конечно здесь еще одна проблема когда вы синхронизируете данные то происходит отрезанный босс тогда записываем шейного и буфер переносим на основные зрителей после вот этих операций может еще оставаться где-то 300 страниц и это как раз и и очередная проблема но когда мы проводим делаем осуществляю меня чекпойнта их сынку то нам необходимо обеспечить согласованность эхо операции но в нашей среде объем данных может быть достаточно заметен поэтому мы также выполняем flashing данных даже после завершения данные процедуры и поэтому мы уделяем множество много внимания решение данного вопроса но я не знаю почему x офис и спугни используя проблема в данной системе нет давайте посмотрим с вами на первый элемент пресс силу мы будем говорить о прозрачном контроле за подключением и почему я говорю контроля не освещение о чем другом потому что мы с вами проводим две операции прежде всего посмотрите это сетевой прокси которые разрабатывая для всех процессов которые контролируют все экземпляры это мастер по умолчанию прописи подключается к мастеру и также поддержит подключение к нашему клиенту случае если разрывается links мастером то как я уже ранее говорил мы делаем еще ей то есть систем обеспечиваем высокая доступность системы в данном режиме мы завершаем работу мастера отравляем команду хосту a host завершает работу мастера после этого сетевом прокси мы даём команду на переключение и переключаем на слово или слои становится мастером но вы смотрите обратите внимание что пользователи не видит никакой разницы потому что с точки зрения пользователя вообще ничего не произошло единственное изменение мы и наблюдаем в этой части мы переключаем пользователи другой элемент потому что мы не можем создать процесс или воссоздать создать какой-либо процесс после того как запускается система высокой доступности потому что как только мы создаем какое-либо подключение и проценты прогресса достаточно требует множество ресурсов и поэтому а мы создаем данный процесс настолько заранее что было достаточно переключить работа с master on a slave до этого до этого поскрести это не было возможным второй момент вы как видите сетевой прокси pac личинка front-end и back-end но здесь вы имеете выключение к фронтэнда здесь мы связываемся с бэндом и так что же у нас мы говорим о края коротких подключение краткосрочное подключение у нас достаточно большое количество клиентов и очень часто возникают проблемы с короткими подключениями их борьбе за короткие подключение достаточно дорогие и обычно нам требуется организация определенного пула подключение но у некоторых клиентов это выполнит и если пользователь база данных разрывает подключение с прокси неважно почему по какой причине может быть они уже завершили работу с базы данных и решат возобновить подключения в другое время ну нам необходимо поддерживать подключениях мастера на случай если друг клиенту потребуется воспользоваться мастером поэтому здесь нет необходимости возобновлять подключение к мастеру а это сокращает время реакции поэтому вдруг если пользователю потребуется получить доступ к базе данных то мы просто используем уже существующие действующие подключение местная проблема в том что нам необходимо переключить пользователя и очистить все заявления утверждение переменные и именно это мы реализовали в kernel и в ядре мы переключаем пользователя с помощью определенной команды далее мы очищаем среду я считаю что это это завершает на презентации и давайте подойдем итоге мы сделали следующие изменения прежде всего это система высокой доступности мы предоставляем гарантии 99,99 процента доступности наших сервисов в течение всего года поэтому если мы падаем ниже данного значения то тогда мы будем выплачивать intent и несколько слов по поводу высокой доступности то прозрачность и репликация мониторинг мандрыка позволяет нам получить информацию о всевозможных проблемах и своевременное их решать третий элемент это резервное копирование и восстановление данных также мы говорим с вами о вопросах безопасности зависание операции ввода-вывода управление различных привилегий может быть у вас есть какие-либо вопросы на этом я завершаю свою основную часть своей презентации да здравствуйте спасибо не могли бы вы рассказать что касается по поводу операции ввода-вывода вы решили проблему с x4 в кино ли вы просто нам рассказывали как вы решили проблему с операциями ввода-вывода в кино ли а вы проблема sx4 в kernel и решили вы знаете это все зависит от поведения системы x4 то есть изначально заложено в данное систем файловая система поэтому мы не можем если решить а как вы тогда мы решили проблему не помещать данные в журнал да вы знаете здесь еще есть а отдельно и проявление в unix и проблема заключается в том что когда мы про его идеи на синхронизация целого диапазона и когда мы записываем конкретные данные на странице без протоколирования журнале то тогда это можете заработать на других платформах настоящий момент мы решаем проблему в линексе что касается других операционных системах the windows также частично работает но я не могу сказать с уверенностью по поводу других платформ спасибо вы монтируете s4 white bed или используйте другие чтобы иметь ввиду руководство пользователя после со да но там же есть определенные не опции по поводу x4 по руководство psg с рекомендует монтировать том x4 потому что в таком режиме происходит автоматическое протоколирование в данной файла систему и иначе мы можем получить двойное протоколирование мы пытаемся конечно изменить x4 на right back но в данном случае мы только лишь меняем журнала странице данные остаются неизменно и случае использования всем к если вам необходимо протоколировать и операции и даже если объем журналу небольшой то все равно проблема возникает мы здесь говорим об определённой процентной долей вероятности возникновения данная проблема спасибо у меня вопрос пиши всего большое спасибо за презентацию какого время задержки при исполнении запросов во время переключения с master on a slave то есть как время задержки в исполнения задач и команда вопрос хороший спасибо фактически существу здесь необходимо ради внимание на два момента пресс всего мы только ограничиваем одну длину 3 приключения между мастером и слева и поэтому если мы превышаем дано элементу мы тогда не переключение не выполняем второй момент секундах то есть и если мы переключаемся долго чем несколько мин то это ужасно для нас поэтому это неприемлемо вы столпились ситуациями когда репликация с мастера нас life проходила в задержке и во время переключения проходила потери данных это тоже хороший вопрос как вы видите высокая доступность очень важная часть но мы также мониторим передачи данных мы также мониторим задержку между мастером и и слева мы случае если в задержка превышает 1 минута то у нас есть определенные инструменты для контроля мы выполняем этот даже до переключения и обычно если время задержки превышает то тогда у нас мы переключаемся на дпс и таким образом контролируем процесс передвижения обычно время задержки не превышают лимит в одну минуту но конечно возникает определенная ситуация частотность в возникновении таких ситуаций конечно незначительно но они все равно возможно таким случаем нам необходимо решать данный вопрос самостоятельная мы можем задавать определенные контрольные контрольное время за задач и таким образом мы можем предоставить нашим клиентам выбору более высокая стабильность либо более высокая доступность таким образом если выбираете стабильность то случае задержки мы ее случай если время задержки превышает определённый параметр то переключением мы не выполняем а если вы выбираете высокую доступность то тогда мы переключаемся после вопрос а почему xfs не используйте вместо x 4 x fh хороший вопрос ну выйти наши ведь все составляет достаточно большую часть нашей системы так как у нас уже очень много решений в данной ос поэтому переключиться извините aquel его подходы достаточно проблематично и нам гораздо проще и изменить с данного человека лишь данного парсера на другой но так как мы не можем изменить только из-за этой проблемы у нас очень много большое количество различных экземпляров различных решений и вы знаете есть допустим самолет летит выше на другой не пересядете к сожалению это большая проблема но мы не можем ничего изменить но я считаю что мы подходим к решению проблемы достаточно систематически и поэтому если вдруг мы вносим какие либо изменения в движок то мы используем и новые станции новые экземпляры новые диалога но все равно конечно требуется определенное время чтобы что-то изменить у меня два вопроса во-первых у вас есть автоматическое исправление как он работает как этот модуль работает и второй вопрос вы храните бэкапы несколько недель и правильным сколько данных ваших резервных копиях позвольте сначала ты че вопрос по поводу резервного копирования но на самом деле наш резервные копии исчисляются очень большими объемами потому что у нас очень много инстансов поэтому данных и низ очень много несколько тысяч гигабайт совершенно точно но у нас есть так называемые еще холодные данные которые мы перемещаем в менее дорогостоящие системы хранения вопрос еще состоит в полосе пропускания иногда затычки возникают именно здесь на этапе передач данных но для этого мы используем расписание вы понимаете что резервное копирование занимает какое-то время именно поэтому мы распределяем все эти операции чтобы они не накладывались друг на друга восстановление конечно же работает много быстрее я не могу сказать сколько именно у нас резервных копий но вы должны понимать что самый маленький и scince у нас будет больше сотни гигабайт это самый маленький или sens поэтому вы можете понять как какими объемами мы оперируем чтобы что касается мониторинга здесь два два аспекта есть формальные оповещения которые отправляются отсюда и данные хранятся здесь это по поводу производительности здесь находится правила и проверки которые устанавливаем либо мы либо наши заказчики и с помощью их мы можем как раз узнать релевантны или оповещение или нет и и вы должны понимать что далеко не все оповещения получают наши заказчики это решает специальные правила и данные об этих всех оповещения хранятся специальные специальные базе данных и там уже решается будет отправлен оповещения или нет здесь же есть определение intenso мгновенное определение именно этот модуль отвечает за проверку работает ли и стенд или нет если с ним подключение какие ресурсы он и используют поэтому с помощью этого мы можем автоматически сразу отправить оповещение но все оповещения хранятся именно здесь для того чтобы выполнить автоматическое восстановление мы сначала должны обратиться именно к базе данных с оповещениями и узнать что именно пошло не так и как это исправить например если мастер недоступен то этот модуль получите оповещение и затем он уже под постарается исправить эту проблему вот это что касается высокой доступности есть например slave выходит из строя то здесь очень проще здесь мы можем использовать просто другую задачу для того чтобы переключить слои вам если например мы отправим задачу на восстановление слева то мы можем сделать это именно из этого модуля я ответил на ваш вопрос а что если поступило ложное срабатывание как как вы обрабатываете ложные срабатывания тогда автоматическое восстановление может просто ходить по кругу и и длиться бесконечно но я могу сказать что автоматическое восстановление выполняется постоянное требуется около 1 минуты как-то так спасибо за вашу презентацию у меня вопрос скорее с точки зрения пользователя данные заказчика растут и не помещаются в одном инстансе что вы делаете может быть вы применяете шаде нг или маршрутизацию или еще что-то отличный вопрос у нас очень много подобных проблем и честно говоря мы задумывались о хординги но пока мы его не используем мы используем разные сервисы баз данных и пользователь может сам увеличивать количество ресурсов памяти циpкa и делать это автоматически вы даже можете увеличить объем хранения и или ресурсы цп и при этом никакой блокировки не будет это все происходит очень быстро за несколько секунд и вы не получите даже ни малейшей и знаем авки или оповещения ресурсы увеличится автоматические все произойдет гладко именно поэтому наверное мы пока и не реализуем sharding в нашем сервисе потому что есть другие решения есть и другие момент на которыми мы работаем спасибо"
}