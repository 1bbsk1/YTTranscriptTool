{
  "video_id": "itz87IxUJ4Q",
  "channel": "HighLoadChannel",
  "title": "\"Где деньги, Лебовски?\", или Почему пора перейти на FinOps / Александр Токарев, Павел Журов",
  "views": 2489,
  "duration": 2677,
  "published": "2022-03-21T14:15:39-07:00",
  "text": "всем привет умещаться наверно покажется презентация и мы сегодня расскажем афин обсе собственно я возглавляю research & development в нашем во флагманском облачном продукте платформе я весьма не плохо понимаю в облаках и однажды написал запрос на 80 долларов google обе кг вере у меня зовут павел я занимаюсь сопровождением облака приватно облака в банке втб и у меня был такой случай когда я забыл к винтовочку в ума за ней и мне потом прилетел счет до 40 баксов после этого я очень расстроился и пошел чихать на фенокс собственно о чем мы не будем рассказывать мы не будем рассказывать как заниматься оптимизацией под конкретных провайдеров как заниматься трансфертным ценообразованием хотя фенокс это прекрасно решает и о том как рефакторинг приложения у нас очень мало времени поэтому мы учим быстро расскажу вам что такое фенокс зачем он нужен кто его заказчики мы расскажем про подходы к локации ресурсов на все ваши сервисы и покажем как выглядит дема процесса разработки приложения в компании которые поддерживает фенокс и конечно же под эти ложим уровнями зрелости синапса и так что такое облако все знают что облако это то что можно получить по запросу она бесконечно масштабируемым и работает в режиме сервиса что такое вот это же понятно devops это методология которое выравнивает сопровождении разработку гарантируя быстрый темп работ и как результат надежно и безопасно и высокопроизводительное приложение однако в облаке все не так просто во первых инженером дали возможности влиять на деньги как результат в конце появляются счета огромные довольно часто счета и в них не очень понятно что делать потому что на самом деле и списание в этих счетах они очень маленькие а в каждом облачном провайдере абсолютно свой язык абсолютная своя структура биллинговых файлов айти департаменте временем продолжает запрашивать новые новые облачные сервисы возникает множество проблем например компания тратит 870 тысяч триста восемьдесят семь долларов на облака много ли это мало на самом деле абсолютно непонятно одна команда говорит я сэкономил 20000 долларов на облаках также абсолютно непонятно неудачники или абсолютно нет бывает другие кейсы от компания тратит также крупную сумму на облака и одна из команд забывает выключать тестовые джип ушные сервера за 5000 долларов и на самом деле в итоговом счете это абсолютно не видно это скорее всего увидят только в конце года есть те люди которые экономят компании деньги и вот одна команда героически включает свой сервис днем потому что как бы где от транзакции а другая команда знает что у нее все запускается по ночам поэтому она запускает свой только по ночам на самом деле никто не понимает что не надо этого делать что это ложно экономишь на самом деле надо иметь один сервис упаковывать на него двойную нагрузку и получить еще скидку от amazon анализирует инстанции с 20 процентов ну собственно не далее как с утра я сделал небольшой printscreen чека с амазонского чита люди абсолютно стабильная и регулярно и теряют там деньги и в принципе те кто там живут они уже привыкли к этим потерям в том или ином виде самом деле более в разы больше во-первых никто действительно не понимает на что уходит деньги и как результат и заказывать все больше больше больше серверов и пропадает доверие кайте департаменту цикл бюджетирование становится все более и более сложным и финансовый департамент в итоге говорить о давайте-ка мы будем контролировать вообще все то что вы заказываете и мы теряем одно из важных определению облака возможность заказа инфраструктуры по запросу старые подходы в моем понятии уже не работают поэтому необходимо работать там со скоростью облака нам необходимо устранить месячная и квартальная review затрат и заставить а идти и финансы говорить на одном общем языке именно и так появляется методологией фенокс то есть эта отчетность в режиме реального времени на основе взаимодействия сопи облачного провайдера которая поощряет команды работать вместе за счет разделяемого облачного словаря и именно фенокс возвращает доверия идти и департаменту и как результат мы получаем баланс между скоростью разработки приложений их доступностью и их затратами может показаться что на самом деле это ед и назара хван хандрит south and abs но на самом деле это не так первые фенокс проекты появились в 2016 году вместе с amazon am есть свою синопском unity есть аналог essence of landscape and правда не настолько крупяных как у сам сеянцев ну и на самом деле поговорим о разработке да давай поговорим но может показаться что эта тема чисто менеджерская такая зачем вообще разработчику но нужен фенокс а в первую очередь большинство разработчиков вообще никогда не задумывается деньгах потому что они просто получают зарплату зачем думать о деньгах и в целом задача разработчиков большинстве компаний это пилить больше и больше фич расходы на облака это также чья-то другая задача для этого есть финансовые департамента пусть они этим занимаются я тут причем вообще топ-менеджмент редко вообще задает сокращение расходов как какую-то важную задачу повторюсь топ-менеджмент через более через средний менеджмент чистим лидов передает задачу пилить больше фич ну и в конце концов мало кто из разработчиков когда-нибудь видел счет за облака вот и вряд ли представляет себе сколько их компании реально тратят на это денег но давайте попробуем вас попытаюсь по крайней мере вас убедить что разработчикам это тоже нужно в первую очередь более явная более чистая картина того что происходит с финансами вашей компании это выгодно вам вам не нужно долго объяснять вашим финансистом почему вам нужен этот минус сервис очередной от амазона вы говорите на одном языке вы видите всю картину вместе вам не нужно готовить огромную презентацию и долгую речь а через метрики которые через contortion метрики который нам выдает фенокс а мы можем показывать эффективность более надёжных сущностей это сейчас звучит немного заумно но на самом деле и идея очень простая нам не нужно как и в предыдущем пункте нам не нужно объяснять финансистом зачем нам что-то покупать только в данном случае не зачем нам использовать какой-то очередной менеджер с от амазона там который данные со спутников разбирают почему нам нужна какая-то более замороченная виртуальная машина или база данных плюс еще и fi и финансисты и сами разработчики и менеджмент начинает явно видеть что более надежные ресурсы позволяют вносить изменения легче как-то когда фильм уже внедрен или какое-то время этот процесс происходит финансисты начинает видеть что да действительно разработчики то что используют приносит нам денег и они начинают fitch мне дать гораздо быстрее в конце концов вопросы денег так или иначе всегда возникают от них никуда не деться мы платим за инфраструктуру поэтому давайте хотя бы иметь какой-то общий рациональный базис к при таких обсуждениях ну и еще одна маленькая такая замечание такая достаточно прикольная штука чтобы написать в резюме для менеджмента как нам вдохновить наших разработку на то чтобы использовать фенокс в первую очередь мы должны говорить не о том чтобы сокращать расходы потому что сокращать расходы но это как бы вызывает такое отторжение да то есть типа я должен буду сейчас сидеть оптимизировать зачем мне это надо нет мы говорим о том чтобы подбирать правильно размер инфраструктура подбирать правильно то сколько бы денег тратим а и это должно быть задачей не только какой-то там одной команды до или не только такой лозунгом большим это должно быть задачу каждой каждой команды и каждая команда должна видеть что происходит другой команде таким образом мы задаем правила игры и показываем друг другу ну и обеспечиваем такую прозрачность этого процесса тем самым побуждая некотором смысле даже конкуренцию в частности помимо того что это мы порождаем конкуренцию позволяем измерять эффективность различных команд это также решает проблему больших цифрах потому что большая прозрачность меньше проблем с тем что счета приходит в конце месяца ну и наконец мы понимаем что разработчики на самом деле это просто люди и бизнес может не прийти не в приказном порядке сказать что чуваки давайте заниматься деньгами все от типа нельзя отходить а могут объяснить что рост бизнеса выгоден им что если мы сейчас начнем заниматься деньгами это позволит нам закупать больше оборудования нанимать больше работников снимать вас какие-то лишние обязанности и так далее так далее объяснить что фенокс повторюсь это не про обрезание ресурсов и не только правит сайзинг это еще и про отчетность и вот последние две вещи это на самом деле совские вы поэтому это нас повторюсь задача менеджмента ну и наконец нам нужно понимать достаточно такая дефолтная вещь которую очень сложно сделать когда нет финансовых метрик объяснить какому-то эффективному менеджеру то что три часа работы инженера когда они когда мы экономим 10000 долларов или 100 тысяч долларов это отлично а вот когда три часа работа инженера экономит нам 100 долларов на такой себя точно сити а фенокс тоже очень нужен потому что фенокс это еще про бенчмаркинг потому что бенчмаркинг позволяет во первых понять как мы находимся относительно других компаний и позволяет снизить и лимиты на облачное потреблению снизили лимиты на облачное потребление стали и тратят разум не наняли больше людей или просто удержали текущих финнов очень хорошо подсказывает и доказывают что деньги на облака не ушли впустую и и что действительно далее конкурентные преимущества в видео лучше всего time to market а именно поэтому я считаю что инициативы puffin обсуди начала должна идти от сити а финансам фенокс очень нужен потому что все таки планированием надо заниматься и надо бороться с тем что иногда денег просто не хватает возникают кассовые разрывы и необходимо понимать эффективно облака или нет вот коллеги за комп и рассказывали что одни в какой-то момент перестали пользу облачными сервисами это дорого стала соответственно это позволяет перейти к юнит экономики и понять общие сколько на вложенный рубль стоит наш действительно продукт и именно это дает возможность запросить у облачных провайдеров какие-то скидки как же сделать фенокс компании фенокс стоите двух вещей это этичная часть это менеджерская часть вначале нам необходимо научиться работать с биллингом данными сначала что действительно крутит вокруг файлов а потом мы уже работаем с api а им как только мы понимаем сколько мы тратим на каждую команду можно аллоцировать жареные затраты между всеми это можно сделать либо с помощью тегирования либо с помощью внутренних метрик продукта и начать избавляться от тех ресурсов которые простаивают важно то что некоторые вещи действительно интересным только менеджмента некоторые интересные команду как только мы можем работать с пилингами файлами можно заняться клауд на этих пулами для фенокс во-первых это интересно во вторых сейчас уже все написано можно сделать систему рекомендаций даже нужно потому что именно система рекомендаций показывает всем что фенокс внутри компании наконец-таки заработал как только есть рекомендации необходимо их исполнять это можно исполнять либо через api либо вообще как сейчас модно все через а их ну и давайте поговорим уже непосредственно об этом голодны и тиффин обсе тут мы очень много такой вот менеджерского был счета не загоняли сейчас давайте поговорим о реальных задачах что что конкретно мы должны сделать в нашей инфраструктуре в первую очередь приложение инфраструктура теперь нам должны выдавать не только метрики не только даже бизнес метрики а метрики которые связаны с потреблением денег здесь мы их называем концам шин это можно сделать с помощью того же формата памяти здесь нам даже не нужно ничего дополнение к кай дополнительный тузы в недель просто тот же прометей идеально подходит для этих задач и сегодня на доме я покажу как это можно сделать для того чтобы контролировать бюджет мы можем использовать стандартные средства контроля которые все из и так используют облаке тоже графа ну просто мы накидываем дополнительно дашбордов связанных с метриками по деньгам мы можем добавить тесты которые определяют потребляете наше приложение слишком много денег или все окей в нашей сети pipeline более того мы можем даже проводить различные сложные виды тестирования так называем progress of delivery в и анализировать то сколько денег потреблять новая версия и на основе этого делать выбор о дальнейшем о продолжении использования новой версии или нет теги таки на самом деле очень важная вещь саша говорю что мы либо метрики или использовали батыгин на самом деле точнее бы сказать что мы используем все это вместе потому что видеть просто потребление общей инфраструктурой этого мало нам нужно уметь это все декомпозировать не нам финансистов финансистом важно это декомпозировать финансистом важно видеть как какая команда справляется на уровне там команды на одни продукты на уровне трайбл долго не каких-то сервисов это уже важнее инженеров об этом мы поговорим подробнее чуть попозже ну и наконец фенокс позволит нам видеть потребление посекундно нет тогда когда нам счета приходят а именно в тот момент когда мы начинаем потреблять иисуса какие давайте немножко поподробнее поговорим о том какие инструменты нам в этом помогут первую очередь это все все те же метрик 100g таких как помятый или виктория metrics также из продолжаем использовать без бортиков анны для того чтобы но мы будем уже на них специальные даже борды связанные с деньгами используем alert и для того чтобы видеть что что-то идет не так где-то какое-то необычное потребление кто-то там запустил слишком большую виртуалку и так далее далее теги повторив motegi мы поговорим чуть подробнее но у них есть большая проблема то что нужно проверять их корректность и в этом нам очень хорошо поможет upon поле сержант штука которая позволяет внести говарда с помощью поле сириза код звучит очень пенсии но на самом деле это все просто можно написать с помощью декоративного языка олега то какие какой вид наши теги должны принимать дальше мы вводим уже какие-то специальные тузы в частности кубку ost юкос позволяет определить в вашем кластере кухонные часы сколько конкретно денег потребляет какой конкретного cold наконец мы начинаем определять сущности которая простаивают и через какое-то время вводим авто скиллинг который у нас и либо эти простаивающие сущности удаляет либо удалять те сущности которые потребляют слишком слишком много денег ну и самый такого же зрелый момент да это то что мы будем все вот эти вот проверки на потребление денег в исиде pipeline и допустим делаем к на личное тестирование на основе этого сегодня на дом я это покажу ну и как я уже сказал да мы начинаем с самой верхней тузы и потихонечку опускаемся вниз тем самым увеличивая зрелость нашего финанса синапса в нашей компании немножко капитанской архитектура есть два вида счас продуктов это мульти цветные сервисы когда фактически на группу пользователей свой старт свой компьютер они не разделяемые multi t на когда какие-то из этих частей шариться в том или ином виде и это важно для кого-то локации потому что локации это процесс разделения ресурсов между центрами затрат при этом если какие-то курсы не мочиться на центр затрат они распределяются между командами нет начинается обычно сам интересная вещь к подсчитать что их надо равномерно разделять кто то нет важно то что аллокация должна учитывать абсолютно все ресурсы это компьютер storage- network и так далее соответственно локацию у нас используют либо внутренние метрики либо тегирование и тогда уже фенокс дает четко ответ что же произошло внутри не метрики это им по нтв in point как у нас лежат time series данные с понятными метками и the tenant это единица за которую мы чардым внутреннего клиента это ее значение и они идеальны для мульти тент ных сервисов но хорошая новость в том что очень много библиотек чтобы делать метрики а плохая новый что появляется state as a стоит им лень и всем заморачиваться а также есть сервисы которые репрессирован и их так большинство соответственно приходится как то эти метрики выравнивают с друг другом необходимо уметь переживать restart ну и как уже было сказано командам тупо в лома теги наконец-таки мы до них дошли давайте поговорим быстренько что что же это такое и зачем это нам нужно первую очередь теги это фокса нами ну то есть мы каким-то семантическим образом пытаемся описать нашу инфраструктуру ну в частности просто берем какой-то набор слов и описываемым ресурс теги должны быть сам объясняющими ся если так можно выразиться сама выразительными то есть нам не нужно документация для тегов нам не нужно писать спецификацию о том что вот этот так значит вот это я посмотрел на так и я понял что он означает теги должны быть не только обойти но и о финансах и вот это на самом деле такая задача со звездочкой таки идеально подходят для того чтобы определять нагрузку на мульте instant сервисах потому что мы можем просто повесить так теннанта на каждую на каждый instant и таким образом видеть общий концам шин для каждого тента вы какие проблемы у нас есть такие для того чтобы теги были сама выразительными они зачастую должны быть многословными и это приводит неизбежно к тому что мы запечатываем ся и у нас все идет не очень хорошо далее я сказал что нам нужно внести теги и для и связанные сайте и с финансами но на самом деле соотнести инженерные сети с бизнес-задачами задача сама по себе не такая уж и простая не все продукты облачные поддерживают теги ну пример того же атаке твоим пульта или баз данных vds там тегов нет зачастую мульти теннант и продукты вообще не поддерживает теги до современные решения там тот же у подшив на основе кубер нить из в него в влипли на лейбле там по сути практически все на них работает но это скорее исключение из правил чем правило какие же таки мы предлагаем использовать первую очередь бизнес департамент у нас будет несколько тегов которые позволяют нам определить кто вообще ответственна за какой ваш голод а дальше у нас идет сервис здесь мы уже понимаем что непосредственно какой бизнес задачу какая бизнес-задачи сколько денег потребляет дальше мы чуть-чуть опускаемся от бизнес департаментов переходим к командам ну и наконец мы каким-то образом называем компонент вот следующий вариант мне кажется очень интересным здесь мы написали фонд байк ну по сути подразумевается то что для каждого элемента в распределенной системы для каждого модуля имеет смысл завести свой текст для того чтобы отслеживать такие черные дыры до то есть какой-то элемент распределенной системе может потреблять слишком много денег мы не можем это понять но потому что система распределенного а вот эти теги они нам позволяют проводить сравнение команды против команд как мы уже говорили по бенчмарки или даже департамент против департаментом может возникнуть вопрос один из самых классических тегов продаж тест почему мы не упоминаем его на самом деле все очень просто мы считаем что это т.к. он больше связан с безопасностью с контроль доступа а использовать теги для контроля доступа это плохая идея да есть атрибут ные модели разграничения доступа но там а источник этих самых атрибутов он доверенный у нас теги же может ну изменить буквально кто угодно и вот как выведем на гифке кто-то приходит оставит случайно или специально так под и у нас происходит отчет они не очень хорошие повторюсь protest df это security результат таки соответственно они должны быть out of скоб используйте различные уровни там уровень обычного продукта уровень какого-то облачного аккаунта и так далее но нить итоге но тут важно сделать пометочку в том что можно например разделить тестовые стенды да если мы хотим сравнить их потребление но не всегда это нужно итак какие же советы мы все-таки хотим дать по поводу тегирования используйте не больше 6 тегов на самом деле такой опыт показывает да и вообще есть психологии исследование психологическую тематику которая говорит нам о том что в среднем человек держит свои оперативной памяти около шести вещей так что этим удобно пользоваться будьте осторожны с опечатками очевидно почему но тут еще раз важный момент опечатки все равно будут мы все люди мы все ошибаемся поэтому нам необходимо вводить какую-то автоматизацию которая это будет проверять в частности тоже тоже apple выделите отдельное множество тегов для фенокс а почему но просто потому что если мы будем использовать все из общей кучи в какой-то момент у нас случится каскадный эффект когда devil команда разработчиков решила что нам нужно поменять так и у нас полетели барды связанные с финансам рекомендации рекомендации это то что приходит командам регулярно либо через почту ли ботить и важно что рекомендация от системы фенокс а должны обязательно братцев спринт и и в принципе это первый способ побороть это что инженеры будут очень страдать и всегда говоришь от не я это какая-то jira же финнов сайта много про софт скиллы и рекомендации дают очень ценную статистику сколько рекомендации выходит на релиз сколько денег они принесли сколько из них проигнорировали то есть если их игнорирует а зачем вообще такой фенокс сколько времени у рекомендации до того как выберут в спринте сколько команд вообще пользуются рекомендациями от вашей системы для разработчиков и все рекомендации касаются уменьшение пользования облачных ресурсов то время как для финансов ситуацию пить другая можно то что финансы тоже начинают работать той самой jira и от которой страдают так разработчики соответственно разработчикам мы предлагаем задуматься об удалении ресурсов о достижений правильных размеров серверов либо использовать более дорогие сервера но грамотно упаковывать ресурсы либо перейти вообще на сервис сервис и соответственно финансово в система автоматически рекомендуют либо начать переговоры с облачными провайдерами либо и перейти на резерве инстансов как я уже сказал я всегда план для менеджмента менеджмент надо еще раз рассказать что такое фенокс сделать его для multivan скучных и для мучительных сервисов есть создать даже бордель для финансовой отчетности и начать так называемые шоу backing это показ сколько команда реально потребляют денег как только команды понимают сколько они потребляют денег можно заняться локацией общих ресурсов и создать учебные материалы по уменьшению потребления потому что рекомендации без того без советов как исполнять они обычно бесполезны и добавить чарт бэк то есть фактически дать команде свой абсолютно независим бюджет на облака за которой она будет полностью нести ответственность ну и рассказать топ-менеджмента что синапс внедрен что же такое за отчеты как я уже сказал шел бег-это потребление из общего центрального кошелька и она в принципе никак не вредит и чаще всего это в энтерпрайза в то время как чарльз бег это реальные кошельки и это очень модно в облачных стартапах в различных аджая вых командах где нанять ждем вакансии есть резюме чертовски мало и на самом деле причина в том что фенокс он очень тесно связан с процессами внутри компании синапсов надо растить внутри себя и это те редкие люди которые очень хорошо понимают в облаках они понимают вопи облачного провайдера они понимают вообще что такое финансы и они умеют договариваться ну вот мы и дошли до дымке для начала давайте я быстренько расскажу архитектура она достаточно простая может так и не выглядеть на самом деле там все просто а у нас есть такой мышку мы видно будет отлично итак у нас есть хвостами не куб 1 ну дык который поднят у меня сейчас по машине и в нем установлен несколько компонентов в первую очередь это прометей и прометей и графа нам как я уже говорил дамбы все метрики суда собираем в том числе и некоторые метрики которого над относится к деньгам ну например метрик который относится к деньгам нам предоставляет куб cost который не непосредственно для этого и нужен помимо этого у нас еще установлено а голод это если кто то знает она la carga седин но только заточен под continues delivery то есть он умеет автоматом делать всякие к наличные diplo & blue green тестирование так далее и с помощью него мы диплом для map она на самом деле не представлять никаких метрик мы просто берем отсюда кубовые метрики подпой память также у нас еще установлен гид кипит который это на самом деле от мишин контроля на основе upon полисе джента и он нам поможет проверять теги ну и наконец вот эта вот штука майкл out на самом деле нам мне было жалко тратить деньги на didem и на реальные облака поэтому я написал некий мог который имитирует облака и отдает метрики биллинга и потребление облачных сервисов давайте с него и начнем собственно какие у них что он умеет делать мы будем можем создать базу данных задекларировать и estate также мы можем создать виртуалке и задекларировать их state и посмотреть биллинг помимо того что мы создаем внутри какую-то сущность мы еще также отдаем метрики прометею и вот тут есть одна особенность о которой я лично не знал но которое очень связано стадионе в помирилась момент в комитете нельзя для одной метрики разных для разных инстансов 1 метрики задавать разные теги ну то есть например у вас есть циpкa пода и вы хотите искать этот пот по лейблам так сделать момента и нельзя с этим можно справиться двумя решениями обходными можно сделать как делать куб стоит metrics то есть они завели отдельную метрику под лейблом а можно сделать так как сделал я накостылять на самом деле просто сделать цикле for метрику для каждой сущности естественно в реальности это может работать очень плохо так что будьте с этим аккуратным я не говорю что это совет я просто хочу вам показать итак давайте сейчас у нас есть дашборд на котором пока что ничего нету у нас есть aus der бардина голос мы которые тоже пока что ничего нету а сымитируем немножечко уже существующую инфраструктуру создадим с помощью нашего michael d 42 виртуалке он там что-то выплюнул на самом деле там нет ничего интересного это просто ну стоит через какое-то время у нас предметы и заскрипит эти метрики и мы увидим то что у нас в самаре cost появится какой-то какие-то новые деньги я надеюсь давайте проверим что у нас примет и работает до все торги ты об давайте пока мы его ждем я покажу что из себя вообще представляет юбку рост крепкого сна самом деле это гуди амином в которой расположена некоторые даже борды здесь что делать куб курск юкос загружает данные из облака побили нгу она и выдает их виде метрик а потом просто тупо перемножается потреблением по компьютеру memories тораджи или даже гopoдa если есть такие метки плюс еще он может даже сеть измерять эти даже бады они позволяют определить сколько конкретно у вас потребляет какой-либо тип он ну вот например мы видим что здесь у нас столько потребляет кибер пока на этом немножко остановимся давайте ему чтобы навлю добрый вечер на что-то пошло не так может не запустил workload нет я запустил вакуум дасти а может быть сейчас но все это еще и сложно да не подозревали что так будет на самом деле поэтому мы немножко торопились рассказам секунду да вроде бы все хорошо ладно давайте пока я покажу что я хотел показать может быть когда-нибудь эти метрики подгорица что мы сделали у нас там ну запустились несколько виртуалок и они в сумме потребляют ну какое-то количество денег в долларах и соответственно ну если кто-то попробует создать более большую-большую виртуалку то мы этого никак не заметим но потому что там сумма будет в кавычках большая как саша описывал бик-бик домбра еще для того чтобы такой проблема избежать мы сделали alert нас учит того что если кто-то вдруг пытается создать виртуалку у которой у которой потребление больше стоимость больше там 20 тугриков то у нас этот олег срабатывает давайте попробуем может быть она так заработает сейчас зададим стоит так здесь только не проснулась у них устройство писающих говоря не ожидал что она именно на этом моменте упадет может быть сейчас есть идея возможно и так нет не помогло потрясающе сказать что такое оргор allows на уровне ложек муки и хорошо давайте тогда покажем что такое out ну предположим что у нас этот aлекс работу и теперь мы хотим запустить приложение там в рисунке архитектура было написано что у нас есть некий pipeline на самом деле это просто куб ктл и кукол но уж извините и так что мы делаем для того чтобы запустить приложение в app allows нам необходимо создать вот такой вот кастомный ресурсе в котором мы опишем ток какой стратегии мы используем для обновления и непосредственно template самого пода но в там пойти самого бога нет ничего интересно он достаточно классический а вот шагах мы можем задать сетевой вес ну то есть сколько сколько процентов трафика у нас пойдет на каком этапе к наличного тестирования и дальше что самое интересное мы можем задать анализ анализ позволяет анализ представляете себя тоже кастом на ресурс давайте на него посмотрим в котором мы непосредственно задаем какую то поверку вот здесь вот такая страшная ковыряя которая на самом деле определяет стоимость его нашего приложения для начала мы его запустим и оба снова что-то идет не так я на самом деле на этот раз все запланированно здесь мы видим что есть мы прочитаем ошибку мы видим что какие-то проблемы у нас с тегами и здесь на самом деле в дело вступил в кипах который проверяет теги у приложений как я говорил о печататься очень легко египте позволять нам с этим справится давайте посмотрим как это работает в самом деле теперь есть две ключевые сущности the template который содержит непосредственно саму рига политику и constraint в котором мы задаем какие сущности проверяют ну давайте конце не посмотрим там на самом деле ничего особо интересного то есть мы задаем что мы проверяем для кодов для реплика сетов и для roll out of и передаем непосредственно то и который мы проверяем в темп лейте можно есть кое-что интересное помимо самой политики написано rega я здесь не буду погружаться в нее достаточно специфичный язык мы можем задать то как будет выглядеть constraint и соответственно то как будут выглядеть у него параметры вы помните я передавал там теги соответственно так серди в кабинете используют о пин-ап она перед мы можем задать различные паттерн и да то есть например мы можем задать какой-нибудь сжать или ином для наших тегов ну давайте попробуем исправить эту проблему будет очень весело из она даже не заработает так у нас была ошибка в бассейне в теге backend убираем его и пытаемся запустить подниму наверх оба все запустилось мы увидели что у нас запустилась приложение даже поднялись 5 реплик его можем перейти на страничку и само приложение поставить все вот такой вот дымком в котором у нас пастырь идет график ну помимо привожу наше приложение помимо вот стоит вас компонентов которые мы запустили в кубер найтись и она еще также использовать базу данных в нашем мини облачке которая почему-то отказывается работать давайте там может быть попробовать его перезапустить сейчас так сейчас она перезапустится и давайте там попробуем создать базу данных чтобы у нас хоть что-то мы смогли показать и так отлично ну и теперь у нас нет всех этих virtual которые я создал в начале но у нас появилась базам и у нее загрузка в 10 пипсов в кавычках давайте зададим ей еще также теги и загрузку в 20 abs ну и пока у нас я надеюсь подгружаются метрики в графа ну очень нами сегодня подводят давайте я продолжу рассказывать покупку что тут еще есть интересно на самом деле тут еще есть несколько прикольных вещей частности это были башмаки быть марки похоже на себя с но в целом заточены на тех которые связаны с потреблением именно денег здесь мы можем видеть что у нас кластером принципе все порядке кроме того что он отдан 1 вот ну и вот такой вот формы получили если вы давно используйте убираетесь вряд ли здесь будет что-то интересное но так сейчас но есть еще помимо этого также вот это очень полезная страничка то есть крепка сон состоит на самом деле двух частей из вот этой самой консольки а также из модели которая определяет то как у вас потребляются в принципе деньги в кластере и подает какие-то предложения потом как и потому как эти деньги можно сэкономить это работает ну похоже на ну например мы можем определить те инстанции которые были заброшены поэтому тут на самом деле никакой машины он гонит мы просто задаем трешхолд то есть сколько сколько запросов проходят через этот instance и собственно на основе вот этого критерия у нас определяется что ресурс обложил но что интересно мы можем посмотреть он мы можем посмотреть модель который выставил каюков для потребления по циpкa памяти и так далее и на основе этой модели каст вам предлагают что вот вы используете слишком много request что провайдеров charged именно паре квестом уменьшить их вы сохраните вот столько такое-то количество денег понятное дело что деньги и сейчас не настоящие потому что задано у нас цена для внутреннего какого-то циpкa вот так здесь у нас все так же без ответом печально а почему-то помяты не получает метрики мое предложение такое сейчас мы их в цифровых к варах это быстренько и разберем давайте продолжим рассказ есть папа был в направлен починить может быть у меня что-то получится да и табличку заберу эту себе уровни зрелости синапса и сначала все начинают извлекать информацию просто из инвойсов потом у нас есть автоматической рикон фелляции данных на основе файла потом мы получаем информацию из опер вашу меня не переключать clicker потом посмотрим соответственно и сначала мы получаем информацию по квартально потом помеченная потом мы работы в режиме реального времени сначала вся информация по фенокс хранится в адресах каких-то финансистов потом мы начинаем сохранять данные с малой степени гуру 0 раз а как только у нас есть полная информация папе мы уже храним полный не ограничить datasette изначально никакой локации нет потом мы храним локацию в разрезе стендов и потом используем теги метрики так как нам уже надо соответственно бюджета нет язик бюджета в попугаях есть бюджет в реальных деньгах соответственно как только есть бюджет у нас есть ли бы показ текущего потребления либо показ актуального потребления сначала модификацией приходит от ивана петрова потом они начинают приходить от финов системой появляются дэш барды в рамках всего приложения как только мы достигли максимального дни зрелости у нас появляются тикеты в системе нотификации и финансовые даже борды в разрезе каждого сервиса когда нет фенокс а понятно дело что невозможно ничего оптимизировать но как только появляется он в минимальном объеме можно бороться с idol ресурсами и помаленьку переписывает софт если же у нас есть api то можно добиваться того что мы используем озер tanks потому что мы видим картину в целом и можно упаковывать более плотные ресурсы автоматизация понятно все в начале разбирают макросы мексике потом и идет автоматизировано рассылка далее идет много-много программирования наоки облачного провайдера и вт для работы с ресурсами мы либо подчищаем их руками поквартальная либо ежемесячно либо можем это делать хоть каждый день на основе а и собственно клауд это еще то для меня что можно измерить таким образом фенокс это точно так же как и devops и методология которая выравнивает отношение между devops вами финансами создает прозрачность между этими финансами и из позволяет создавать выгодные быстрые и надежные приложения конечно же не все так просто во первых как мы заметили фенокс не всегда работать в прозе иногда падает но даже если мы опустим этот факт то синапс он может снизить скорость развитие инноваций и рекомендации очень часто не учитывают всплески в утилизацией и то что всегда есть оверпара него движением для desire рекавери очень часто забывают о том что надо думать не только компьютерного базах данных аппетит вы их куда же девать кучу резервированных инстансов они уже купленные к никуда не деть ну и на самом деле иногда забывает обо очень маленьких сохранения потому что 2 умножить их на количество дней в году очень ищите нормального фенокс а этого синапс на самом деле можно сделать на основе подсушить и технологии но требуется много клея и усилий необходимо убеждать команды что они должны быть ответственны за деньги и давать им возможность влиять на цены обучая их как переписывать свои приложения финансам же отдать только то что они хорошо умеют делать получать скидки и использовать резервированных инстанции и нокс и не только о деньгах и оставьте это очень много отцов скиллах и фенокс на самом деле не о том чтобы резать деньги о том чтобы их зарабатывать собственно в нашем гитхабе вы увидите дыма и мы обязательно его сделаем даже делала маришку и работающие вообще я уверенность будет зашибись вопрос на спасибо это было интересно да к сожалению у нас на вопросы прямо здесь времени не особо осталось но мы можем все вместе выйти вот справа есть такая кулуарно язона классно там микрофончик и все дела вот и позадавать вопросы там не разбегайтесь сейчас мы свернем ноут и всеми туда подойдем"
}