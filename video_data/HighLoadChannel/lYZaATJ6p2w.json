{
  "video_id": "lYZaATJ6p2w",
  "channel": "HighLoadChannel",
  "title": "TechTalk \"DevOps-труба между подрядчиком и заказчиком для легаси-приложения\"/ Денис Рылеев",
  "views": 62,
  "duration": 699,
  "published": "2023-10-06T07:27:18-07:00",
  "text": "привет С вами хайлот 2022 Меня зовут Козлов роман Я из подкаста лингвина с нами сегодня Денис Рылеев руководитель дивопс разработки в инвестиционном блоке Россельхозбанка и тема для обсуждения это дивопс труба между заказчиком и разработчиком для Legacy приложения dvds Приветствую тебя Да добрый день итак Расскажи пожалуйста о том какие проблемы были у вас и с чем пришлось Бороться и как вы это решили Давай начнем с первого проблемы проблема были следующие в какой-то момент Меня попросили подключиться к разборам еженедельным каких-то проблем подрядчиком с его поставками продукт получался постоянно сырой он постоянно там даже установиться не мог потому что какие-то возникали проблемы сразу после установки не то что там во время тестирования У нас есть некий внутренний продукт заказчиком которого является банк Нет наоборот мы как банк являемся заказчиком продукта подрядчика и этот продукт мы его на тот момент вообще не разрабатывали мы только его по инструкции вот подрядчика устанавливали себя и немножко сопровождали все остальное было на их стороне аналитика там даже сопровождение промо в принципе там sl3 было на их стороне понятно То есть постоянные проблемы при установке этого продукта проблема были связаны именно с поставкой исходного кода продукта проблема Ну как он был состоял из двух частей там часть нам поставлялась бинарники уже собранные которые мы Ну как бы просто ставили и все и часть кода была кастомизирована в неких скриптах и вот эти скрипты как раз которые под нас писались и позволяют дополни логику писать они приходили в текстовом виде И периодически там поскольку продукт делается не только для нас попадало то какая-нибудь наша не та версия топ-версия для другого заказчика то еще что-нибудь и это вызывало вечные проблемы там и довольно большой процент был связан именно с проблемой поставок проблемы отладки и запуска этого продукта даже вот даже просто поставка Потому что ты ставишь и понимаешь что нужно функционала тебе нет потому что он там пришел для другого заказчика или забыли наши там дополнения положить понятно То есть это однозначно тестовый контур это однозначно достаточно продолжительное время вообще возможно был в том продукте тестовый контур Да возможен Но к тому моменту у нас в тот момент не было своей разработки у нас даже тестирование было весьма ограничено поэтому как бы регресс он как таковой отсутствовал на нашей стороне в тот момент И очень многие вещи проходили даже до промо то есть продукт установлен он пошел до промо потом Выяснилось что данная версия не поддерживает какую-то функцию нужно откатываться на предыдущий сколько времени это занимало это очень много времени занимало вплоть даже не столько вот там откат на к Да сколько сама процедура была очень мучительная потому что поставка поставки шла инструкция в виде экселечки построчной скопировать файл такой-то Там выполните какое-то и поскольку он писался инкрементальная инструкция то есть раза один разработчик взял один из коиль поправил какой-то написалось выполнить Сколь такой-то потом через неделю там другой разработчик этот же поправил одну строчку опять выполнить такой-то и таких Ну вот одно и то же могло повторять там десятки раз но ты же должен их выполнить эти инструкции и Таких вот строчек было там Ну 150-200 на релиз и поэтому могут тянуться часами вот эта инструкция средним занимал где-то там ну от 3 до 5 часов выполнения понятно И какие были первые шаги как это можно было решить там как бы я вычинил такую проблему передача дистрибутива шла совершенно случайным образом то есть некие люди причем Это не один человек там несколько разработчиков но не разработчиков сопровожденцев с их стороны собирали какие-то патчи Да там так называемые и нам каким-то образом передавали либо в виде ссылки по htti по FTP либо по почте либо вообще там часть из них имела доступ к нашим внутренней и все это складывалось в шару просто вот в шару без версии без всего соответственно кто-то положил две свои изменения раньше другого там или забыл доложить или что-то еще мы вообще ничего вот у тебя есть какая-то черная черный ящик и ты его просто кладешь и на пром потому что он вендорский Да потому что ты не можешь его поменять и не можешь Я так понимаю да Тебе даже ты не можешь понять ну как бы пошли твои изменения нет у тебя просто есть вот даже текстовые файлы которые ты можешь открыть Но у тебя нет не разработчиков не сопровожденцев ни понимания как Что относится к какому функционалу бизнес Хорошо Окей мы нашли проблему какие дальнейшие наши действия Ну самый первый шаг был как бы сразу начать использовать какие-то базовые техники да то есть если это поставки то они должны быть версионируемые как бы понятно кто это сделал Когда и соответственно там сшами там со всеми делами чтобы можно было убедиться что это оно Первым делом первым самым первым шагом было попросили вендоров на своей стране взять и поставить Nexus и соответственно все поставки уже шли не через почту там Непонятно от кого а только один специальный человек делал этот дзипник клауф Нексус и мы на своей стране его проектировали и получали Понятно а то есть но код посмотреть нельзя Но можно было посмотреть хотя бы что были изменения и кто-то эти изменения вносил но часть кода мы все равно можем посмотреть вот та которая скрипты да то есть следующая идея какая была то есть вот когда этот процесс уже наладился Да они подняли мы все протестировать там сертификатами там шифровано каналом безопасность уже радовалась как бы дальше пошли мы как мы на своей стороне вот это все стали складывать в гипс каждая поставочка все что мы можем прочитать скрипты какие-то там вот эти скрипты и какие-то базовые настройки которые вообще они не меняются практически мы клали в Гид соответственно мы получаем соответствие один ЗИП ничек одна поставка в гиты мы уже можем сравнивать какие файлы поменялись совпадает ли это с тем что заявлено вендером там что они должны быть поменяны эти файлы до мы можем уже начать следить соответствовать эти файлы тем запросам в Джерри который у нас есть допустим на какие-то новые изменения или исправление старых дефектов Вот это уже позволил такие вещи делать и далее следующим шагом у нас было и скольз скрипты поскольку очень много логики там на SQL Мы решили что и тоже совершенно не было никакого механизма мы применили Ну собственно ликви Base ничего не стали выдумывать стандартные практики обучили вендора работе с ликви бейзом договорились о том как они должны писать Ну вот как в какой формат этого всего будет и они начали это делать дальше следующим шагом мы разработали формат поставки то есть ну простейший какой-то там договор там О папках да чтобы можно было понять где мы какие файлы удаляем разделили поставка на какие-то шаги удаление добавление файлов выполнение скриптов там и обновление варников у них там еще в комплекте идет томкат какой-то там выпуска небольшой части Вот и собственно каждый из этих варников было написано небольшой роль на амфибле и сейчас ребята которые занимаются сопровождением тестовых средств это все инструкцию выполняют в среднем но где-то там от 5 до 10 минут понятно то есть по сути пришла поставка она залилась в Гид ensible выполнил те действия которые прописаны у него Да там есть еще небольшая там утилитка которая позволяет отслеживать эти все изменения и рассылает уведомления там и в данном сейчас еще есть небольшое пожелание по доработкам чтобы это было уведомление еще не просто что пришла поставка А с небольшими этой информацией По какому какой Джерри Это относится к какому дефекту Вот и дальше уже наши сопровожденцы тестовых контуров это все ставят по запросу от либо тестирования либо релиз менеджера понятно То есть это уходит все в отдел тестирования дальше отдел тестирования проводит свои какие-то тесты да у них там порядка там 5-6 лет и они просто там говорят нам вот эту версию сюда поставьте а возможно ли еще до конца доделать и до автоматизировать тесты или они и так уже есть с этим есть проблемы во-первых не хватает людей до для в отделе автотестирования в этом Это основное управление в котором сейчас надо работать то есть Ну к сожалению тут помочь никак не могу и Ну то что это вендерская разработка которая довольно лигасевая то есть там она еще времен там консольных приложений виндовых соответственно все это работает на виндовых ростах и акции был пришлось писать для виндовых остов очень часто все разработчики представляют себе крупный интерпрайсы особенно банки это компании в которых обязательно работать из офиса у которых не применяется там удаленка у которой достаточно сложные внутренние процессы Как у вас сейчас с этим у нас с этим сейчас вообще не так у нас практически моей команды у меня следующая команда в Питере Я в Москве и в общем-то никаких проблем у нас этим Нет очень многие команды у нас вообще распределены еще больше то есть на васиб там какая-нибудь Уфа и Питер И вообще все сразу есть даже отдельные люди которые работают вне офисов То есть их просто где-то нанимают Да там я он работает с Ульяновска допустим Один человек То есть вы сейчас похожи на такую более классическую продуктовую команду нежели на какой-то классический Кровавый интерпрета у нас цель именно такая чтобы были именно продуктовые команды кроссфункциональные которые классические джайл который отвечает за продукт в целом и в общем-то находиться в офисе но не обязательно то есть в большинстве случаев Если есть возможность там команда договариваться Ну примерно там раз в неделю пересекаться да Если есть возможность но вот у меня нет ребятами спите раз в неделю не увидишься поэтому можно в принципе работать всегда из дома что получилось сделать получилось наладить процесс между двумя организациями как будто бы это опять же одна кросс нормальная команда то есть с той стороны появились как бы люди которые отвечают за сборку и у нас люди которые отвечают за ее установку у них есть какой-то протокол протрам Они соблюдают они по нему общаются и в общем-то все от этого стали только выигрывать с точки зрения сопровождения они экономят каждый Ну сейчас они в день могут сделать допустим там 8 поставок раньше они даже одну с трудом делали нет то есть ускорение процессов которые важны для бизнеса да то есть классическая марки просто в данном случае вот Правда не на разработке но на сопровождение С вами был 2022 Меня зовут Козлов роман с вами также был Спасибо"
}