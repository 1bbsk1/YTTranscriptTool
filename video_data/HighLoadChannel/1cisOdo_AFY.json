{
  "video_id": "1cisOdo_AFY",
  "channel": "HighLoadChannel",
  "title": "Как устроена система сканирования робота Spectro / Валерий Ильин (Яндекс Маркет)",
  "views": 79,
  "duration": 2741,
  "published": "2024-10-29T03:03:40-07:00",
  "text": "выступает Валерий Ильин с Темой Как устроена система сканирования робота Спектра приглашаем на сцену Да ребят Всем привет Меня зовут Валерий льн я руководитель группы компьютерного зрения и сегодня собственно расскажу про одного из наших роботов которые мы делаем в Яндекс Маркете Итак а Давайте в первую очередь расскажу как зачем нам нужны Роботы в первую очередь надо понимать что склад - это большое достаточно сооружение в котором существует огромное количество процессов и во всех этих процессах у нас участвуют люди Ну то есть там начиная от разгрузки товара сборки заказов пополнения и консолидации в общем во всех процессах участвуют люди надо понимать что это конечно там с одной стороны очень много ручного труда с другой стороны это чреват там другими последствиями давайте рассмотрим в принципе как выглядит график того что как как выглядит график икома в принципе как живёт яком То есть в принципе видно что там февраль март достаточно такие-то высокие сезоны это гендерные праздники у нас вот ну и сейчас ноябрь декабрь это тоже высокие сезоны это предновогодние чёрная пятница и другие соответственно праздники которые как раз-таки приводят к тому что склады находятся в перегрузке Высокий сезон у нас соответственно большой спрос на кладовщиков кладовщики - это такие сотрудники склада которые как раз вам собирают ваши заказы и впоследствии если там типа продолжать линию Можно прийти к тому что у нас соответственно с высоким спросом сильно растут ставки для разработчиков ой для кладовщиков Представьте только что один кладовщик будет получать как мидо разработчик Вот это Высокий сезон там зарплаты X3 В общем складу такое не нравится и нужно думать Мыслить как стратегически А собственно зачем нам своя разработка роботов А ну во-первых а идеальное представление что мы хотим сделать свой собственный там автономный склад с минимальным количеством ручных операций то есть мы хотим устрани убрать людей там с Долгих рутинных именно операций сохранить перемещение людей по складу как основной самый жирный процесс увеличить эффективность хранения и всё это там типа вокруг этого всего создать собственную систему управления складом с людьми с роботами чтобы в принципе повысить эффективность складов и складского хранения Ну давайте порассуждаем какое решение может быть идеальным ну такого нет на самом деле если там долго-долго начинать рассуждать фантазировать приходишь к тому что огромное количество процессов э на складах существует и Ну нельзя просто сделать такое вот универсальное решение которое покроет какие-то отдельные кусочки А во-первых всё зависит здесь от бизнеса э то есть понятно что есть отдельно Ритейл ские склады есть отдельно там склады с каким-то очень большим крупногабаритным хранением Ну там одним не подходит одно решение Ну которое подходит там третьим и важно что когда создаётся какое-то решение очень важно сделать его таким чтобы оно объя большой поток операций потому что ну тратится на разработку чего-то там достаточно мелкого что там будет покрывать какую-то маленькую операцию куда можно было поставить два-три человека абсолютно невыгодно Вот и здесь Да здесь как раз вот эти вот решения нам не интересны и Собственно как думаем насчёт того что нам нужна масштабная система которая бы нас погружалась вытеснялось что-то универсальное всё-таки можно сделать Можно сделать такой стек такое ядро технологии вот мы его называем у себя мобильную платформу мобильная платформа - это некая такая катающая телега по складу которая может двигаться В автономном режиме на эту тележку на пример можно поставить различную полезную нагрузку э и сделать допустим робота Спектра про который я буду говорить дальше это робот инвентаризатор наш э далее можно сделать робото мотус - это соответственно автономная тележка которая перевозит э там палеты или коробки из точки А в точку б по складу либо сделать робот дилекс который будет функционально взаимодействовать со стеллажами снимать со стеллажей всякие разные ящички перевозить из точки А в точку Б тоже будет закрывать собой какой-то большой процесс но сегодня я сконцентрируйтесь э это он проезжает 20.000 м за 2 часа вот э Что это значит что мы в принципе э там на одном заряде можем проезжать от трёх до четырёх раз склад и в принципе у нас ещё будет хватать чтобы там данные по выгружать какое-то количество отсюда у нас э общее количество сканов на ежедневной основе порядка 100.000 вот а это позволяет нам допустим делать большое количество экспериментов э сравнивать проезды друг с другом в общем делать много интересного С этими большими данными а там когда мы запускали робота Естественно он нам перед нами стояла задача сделать там по метрике Рей Рей - это Метрика качества про которую Расскажу чуть позже По нетронутым полетом э выше там 98% на данный момент это 100% То есть когда мы там проводим эксперимент и сверяя а и на данный момент на наших складах катается три робота вот четвёртый у нас также есть в лаборатории и общий суммарный накат по всем нашим роботам - это порядка 4.000 км Ну там плюс-минус 200-300 если там по общей статистике смотреть Вот и высота такого робота - это 12 м если быть точнее это 11,3 То есть это такая некая раздвижная конструкция То есть она из 6 мтро превращается в двенадцати трово робота и катается и сканирует по складу Ну давайте расскажу зачем мы это делаем какой процесс мы этим закрываем а Представьте что вы делаете заказ на Ну там яндекс-маркет или там где-нибудь на зоне вот типично процесс выглядит так что вы когда нажимаете кнопку заказать у какой-то ритейле ской площадки у вас происходит сборка заказа на сборке заказа идёт кладовщик если там к примеру вы заказали ноутбук он идёт е получает задание что ему с такой-то ячейки нужно снять паллету Забрать ноутбук и там отвести е на упаковку это в общем случае я там в детали сейчас не буду углубляться и представим что такой человек приезжает на какое-то место смотрит место такое-то должна стоять палета с ноутбуками она там не стоит вот в этом случае там товар Как раз-таки не найден запускается Процесс поиска товара на скваде и здесь два возможных вариан либо Заказ будет отправлен либо произойдет отмена заказа отправлен если команда соответствующая там команда ластов у нас называется если команда ластов там справляется за чере часа по-моему и в этом случае как раз-таки там всё всё потушили пожар отправили заказ Ну либо отмена заказа Здесь и там и продавцу неприятно то есть самой площадке неприятно и негативный опыт у покупателя а ну вот собственно Чтобы такого было меньше придумали некий такой процесс на складе который назвали циклическая инвентаризация Вот это процесс Когда у нас человека запускают вот как на слайде у меня здесь показано запускают в алеи Человек проходит там на специальной а платформе сканирует место сканирует товар Вот и производительность такого человека порядка 300 палета мест в день вот ну и если там ещё раз посмотреть на процесс то а человеку необходимо да В первую очередь подъехать к указанному месту из его маршрутного листа он сканирует ячейку там у нас такая некая плашка с расписанными местами есть и он сканирует этикетку с самой палеты на палете Ну там наклеен идентификатор её вот и как бы из этого строится у нас процесс инвентаризации по нетронутым полетам по тем которые не вскрывали ну и да когда мы начали разрабатывать робота естественно как бы в концепцию Мы положили то что давайте склад не будем менять склад перестраивать как бы это достаточно дорого перестраивать какие-либо процессы Давайте попробуем запуститься на том что есть вот ну позже для нас было приятно то что мы посмотрели как у нас как вот похожий процесс Ну организован на других складах у других даже компаний он в принципе организован примерно таким же образом как и у нас вот поэтому принцип работа робота следующее это как я говорю некая мобильная автономная платформа которая катается со скоростью ме в секун вот проезжает вдоль каждого палета места и приносит результат с него Почему 1 м в секунду вот когда мы запускали мы запускали нашу платформу ввосьмером Вот То есть восемь разработчиков собрались сделали робота мы Начали его запускать Конечно когда запускаешь у тебя там нет ещё тестировщиков ты сам разработчик там нажимаешь кнопочки там чтобы робот поехал там по прямой естественно тебя может ожидать какое-то количество неприятных Сюрпризов вот чтобы таких Сюрпризов можно было там загасить достаточно быстро разработчику нужно было находиться именно рядом с платформой чтобы там нажать кнопку экстренной остановки робот смог остановиться и мы там дальше продолжили бы что-то отлаживать вот понятно что у него есть контуры безопасности edar там ультразвуковые датчики но естественно как бы что-то могло пойти не так на на раннем этапе и вот чтобы разработчику было комфортно себя вести возле робота мы как раз установили такую удобную для ходьбы скорость с ноутбуком вот 1 м в секунду да давайте расскажу теперь про камеры так как системе необходимо сканировать палеты первое что мы начали выбирать - это камеры остановились мы на Промышленной камере вот производителя Я здесь называть не буду но если говорить про то что мы ещё рассматривали было ещ два решения Первое - это шные камеры которые там обычные в сети продаются и позволяют сканировать Ну там позволяют просто устанавливать их в качестве камеры видеонаблюдения Вот и были ещё камеры которые разрабатывают у нас коллеги из беспилотников Вот это камеры которые Ну нам тоже не подошли потому что ну во-первых они в принципе настроены на немножко другое они настроены на съёмку непосредственно там при достаточно сильным освещении то есть там типа Хади В общем там диапазон который нацелен на распознавание светофоров и плюс сама по себе камера общается с вычислителе по аналоговому проводу который на 11 мро там сильно не протащить вот поэтому мы остановились на промышленных камерах во-первых промышленные камеры как правило можно найти с глобальным затвором То есть это та штука которая нам позволила сильно избавиться от трясолобова под управлением здесь понимается захватить соответственно там ну отправить команду на то чтобы захватить кадр вот там полезно для программной для аппаратной синхронизации Вот и они очень гибкие с точки зрения настройки там фреймрейт вот поэтому взяли выбрали промышленные камеры а следующее начали думать как может выглядеть в принципе обработка кадров вот если там в общем в общем смотреть то то она строится там из шести шагов про которые я сейчас там более подробно расскажу вот Первое - это давайте мы получим некий кадр Из очереди То есть у нас Мы рассматриваем одну сторону инвентаризатора целиком это на каждой стороне установлено по пять камер вот считаем что у нас каждая камера является неким продюсером данных а наше приложение инвентаризации некий коню вот в этом случае мы с каждой камеры соответственно вычитывает и таким образом получаем некий батч который тащим вдоль всего изобра вдоль всего приложения нашего а следующее - это давайте определим то Где мы сейчас находимся роботом следующий шаг А вот здесь у нас соответственно мы умеем определять палета места как севика непосредственно то есть мы берём фотографию мы понимаем в процессе инвентаризации вот здесь наклеены там метки на такой-то камере и используем Это для того чтобы определить по фотографии Где мы сейчас находимся вот Но конечно бывает так что робот проезжает и там проезжает некоторые там технологические проезды и как бы не видит где он находится для этого мы сделали специальную локализацию арткам вот зде спра сверху условно красные точки - это то где они у нас наклеены то есть это некоторые такие опорные метки которые у нас уточняют локализацию самого робота на складе Вот они достаточно крупные Так что там с очень большой вероятностью они у нас распознаются ну и если посмотреть в принципе Как устроена локализация на нашей автономной телеге то это некий алгоритм Extended Common fil который выдаёт нам позицию робота вот в фильтр подаются там не этом ледаря домет колёсная домет данные по вот этим вот тегам на складе Ну и для того чтобы можно было центрована продуктовая задача чтобы робот находился там чётко по центру вот добавили ещё и эту метрику В итоге у нас получилось создать достаточно точную локализацию которая нам также выдаёт палет места непосредственно в приложении то есть напротив некоторых мест мы просто не видим се вишко Где мы находимся в этом случае мы берм локализацию например с самой платформы вот и это там если там наперёд забегать то это некая там хорошая продуктовая история Когда мы можем заехать на любой абсолютно склад настроить локализацию чтобы робот катался автономно и получать непосредственно полет место с него следую зада Это непосредственно наличие палеты Что это значит Ну вот мы определили Где мы находимся если посмотреть там на исходную задачу что делает человек человек поднимается к какому-то там этажу вот и смотрит Есть ли что-то перед ним или нет Вот с точки зрения компьютерного зрения задачу мы поставили примерно таким же образом Давайте там обучим некий бинарный классификатор который нам будет выдавать ответ типа есть в кадре что-то или в кадре палета отсутствует вот ну и там как в классических задачах и там на узких доменах Давайте метим какое-то количество данных через там возможные публичные источники вот мы выбрали толоку Вот и вот здесь если посмотреть на ту задачу в которой мы пытались разметить данные и обучить последствия модель Ну есть в такой парадигме моделька у нас первом приближении просто не сошлась вот вызвано это тем что если посмотреть на центральный кадр здесь в принципе можно там спросить себя а точно ли палеты отсутствуют Да локера не до конца объяснили что значит палета отсутствует в кадре А да мы сделали там классическая льная штука Давайте до уточним максимально что мы имели в виду и что мы хотим получить пону за разметку вот мы долили большое количество примеров обучение настроили Как нам нужно экзамен Вот и здесь мы как раз-таки там при к тому что у нас имеется там три класса э палета отсутствует палета На заднем плане или палета спереди Ну был ещё класс Понятно когда я не могу сказать ответ вот и на основе вот этих вот размещенных данных у нас моделька сошлась и она если посмотреть то работает до сих пор в этом же исполнении И мы как бы видим что это одно из самых На текущий момент надёжных наших решений которые мы делали в приложении и уже на данном этапе мы можем продуктово ввести некоторые классы это на отсутствие палеты То есть это класс empty либо на наличие палеты это классы No read и Label No RE - это когда мы отсканировали полету это забегаю вперёд отсканировали палет но не смогли распознать её Lab - это когда мы и отсканировали и распознали и в принципе это тот результат который полезен складу а Следующая история - это давайте вот ну мы определили что вот перед нами стоит палета что нужно с ней дальше сделать дальше как и у человека в процессе необходимо распознать некую плт метку вот на этой плт метке как раз-таки и закодирована информация о том где Ну что это за палеты перед нами и здесь мы поставили задачу там следующем Ну давайте просто попробуем распознать её при помощи осного декодера QR кодов но начали пробовать тестировать поняли что это вообще не работает вот Open Source Конечно хорошая вещь но иногда его ну как бы необходимо дот Нева вот в этот момент Мы приняли решение что ну по всей видимости нам нужно обучить некое решение которое бы нам очень точно локализовать вот эти вот метки Независимо Где бы они находились на фотографии и в каком бы состоянии не были то есть они могут быть подмяв нуты там на них может быть нарисовано не то что мы там ожидали Но это та самая тот самый идентификатор который бы был наклеен на поле Давайте обучим такое решение и оно нам как раз-таки позволит Ну детектировать уточнять область и мы её впоследствии за декоди А мы сделали такое решение мы обучили детектор собрали очень большое количество данных и сделали его достаточно надёжным чтобы можно было там применять Ну не только на вот такого формата метках Но и на других вот начали запускать на роботе на роботе у нас используется железка NVIDIA jetson Вот это если что армований достаточно большие которые которым нужно GP вот в первой итерации мы Ну попробовали запустить это там напу вот но оказалось всё очень медленно вот да что мы сделали Мы конечно пошли копать оптимизировать нуно очевидное решение Давайте переведём ВС на движок T т ну как бы сетку по возможности чтобы типа там ну сделаем явную конвертацию ей Да пришлось побороться Некоторое количество времени с конвертацией с платформой Ну как бы через это достаточно много Кто проходил Вот и по профилирование у нас пять кадров образует бач А мы в детектор подавали по одному кадру Ну на тот момент мы думали что ну Чего нет вот здесь же мы сделали некое бачева то есть такую операцию которая у нас схлопывается все пять картинок в один батч мы подаём тот же самый там детектор который уже в принципе там настроен на этот батч и получили достаточно существенный прирост вот э да следующее что после детектора ПТ меток шаг это декодер этих самых меток если говорить э ну там достаточно просто что ну декодирует QR код но бывают такие метки которые мы просто-напросто не можем Разде кодить это некоторые наури ды у нас и чтобы количество наури дов у нас на складе стало существенно меньше мы выработали некий процесс обратной связи э по которому делаем оповещение на склад в случае там если на месте а обнаружили какой-то наури необходимо его исправить это нам позволило существенно снизить объём наури дов во-первых сквад увидел что что если они некорректно будут размещать и вешать этикетки то им прилетит дополнительное задание на исправление э с другой стороны мы там существенно снизили с 20% наури дов до 3% и в принципе сейчас эффективность Спектра достаточно высокая а последний этап - это агрегация результата на данный момент На данном этапе это такой этап который у нас берёт там четыре-пять фотографий полученных по одному месту и выдаёт некую резолюцию по нему Какое же нам результат Какую картинку Нам необходимо сохранить чтобы она была наиболее релевантна складу Вот мы там используем некий объём эмпирик Вот и после сохранения результатов Всё у нас попадает в некую внутреннюю нашу систему которая установлена на роботе Вот ну если там посмотреть то это такая э кнд спаз грёбоного там не долетели до Облака Вот и в принципе это получилось такой некий внутренний лот с там порядка 10-1 rps Вот который нам как раз-таки позволяет отдавать результаты на сквад А да как я говорил ранее у нас имеется Метрика точности сканирования нашей системы э в момент когда мы только планировали там закончили грубо говоря там разработку основных блоков мы начали проводить эксперимент То есть у нас появился некий mvp который что-то сканирует Ну давайте померяем что он сканирует вот мы начали мерить и там за измерение брали такую метрику которая это отношение количества успешных сфер к общему количеству палета мест на складе вот здесь понимается что количество успешных сферо Это значит что мы пускаем перед роботом двух человек они перед нами размечают соответственно полностью аллею Ну там ряд это порядка 700 мест и мы проезжаем по последствии роботом и вот где Мы совпали с человеком там робот прав если мы не совпали или не принесли результат к сожалению робот не прав необходимо дорабатывать Вот и целевая наша Метрика - это было 98% ну когда делаешь там решение которое работает с товарами на скваде должна быть достаточно высокая точность в случае если там робот где-то на косячит или не принесёт результаты или там принесёт что-то некорректное нужно было бы это как-то разруливает составил 15% вот конечно грустная история вот э но мы пошли копать что ж пошло не так как я сказал ранее мы используем осный QR декодер вот э он внутри представляет собой следующее там есть Разде кодить э по всем банча Это было там наиболее эффективное решение которое мы могли использовать и с точки зрения там э качества распознавания и с точки зрения удобства использования э и если там посмотреть там на задачу ранее когда мы хотим определить палета места где мы находимся на данный момент роботом то мы ожидали когда мы используем вот это вот QR декодер э-э мы ожидали увидить что-то такое он нам выдаст области трёх QR кодов и ээ там Разде кодить их Но что произошло на практике он выдал область одного QR кода и куска бревна вот на соответственно тех областях где заведомо у нас нет QR кода у нас декодер отрабатывает достаточно медленно и плохо это у нас как раз-таки было причиной того что мы периодически ловили всплески по очень низкому FPS в приложении и начали е Тае сканируем Вот оказывается что мы сканируем всякое но ну как бы система работает достаточно неточно в этом плане вот мы решили проблему следующим образом Давайте обучим на своих данных на своём на там на вот этом вот специфично домене выделять делать детек кодов вот обучим свой детектор и прочим деде орный сделали получили очень надёжное решение Да И вот вот эти вот шаги у нас позволили Как раз-таки сделать динамику изменения Рей подрасти его до 80% Вот но да как я сказал ранее целевое то что нам поставили для Ну в качестве условий использования нашего робота это было 98 что же мы там е дальше ну естественно как бы между эксперимента мы там анализировали что ещё мы там не принесли где можем улучшиться и так далее Вот и на следующем эксперименте Ну как-то раз мы обнаружили что большой кусок у нас как раз-таки также запрятанном декодинг нодов он составляет там существенно большое большее количество времени и не приносит никаких результатов как же нам отфильтровать такие результаты А ну если посмотреть в принципе как работает плт детектор то это некий одноклас совы детектор который в сыром виде выдаёт набор боксов и скоров вот далее вот эти вот сырые боксы скоры попадают у нас в некий алгоритм nms Non Maximum suppression и на вот этом вот алгоритме э есть два параметра ключевых это iou трешхолд трешхолд по пересечению областей друг с другом и Score тш Score - это тот который выдаёт у нас детектор Вот и сам по себе алгоритм выдаёт новые детекции и если посмотреть что для этого сделали взяли датасет с эталонной разметкой со склада ввели продуктовую метрику ре FPS Ну чтобы найти некий такой золотой стандарт чтобы нам можно было запускать наш детектор мы там не уходили там в датасете в самом потому что он синтетический мы не уходили там сильно большую точность FS Поэтому нужно было что-то такое посерединке выбрать соответственно сделали продуктовый C который на входе берёт модельку предоброе в приложении на тех самых данных которые у нас есть Ну и дальше мы смотрим логики логи парсим их и впоследствии выдаём там продуктовые метрики ну и там порив раз 20 автономно мы пришли к тому что подобрали нужные нам пороги впоследствии это нам существенно помогло увеличить Рей в проде вот ну и последние проценты которые у нас соответственно оставались это те самые проценты по синхронизации кадров на момент там я не знаю где-то до последнего эксперимента Ну уже там начинается когда борьба за малые проценты уже там ище анализи что же ещ не так вот поняли что в той парадигме в которой мы жили достаточно длительное время что-то идёт не так в плане синхронизации то есть мы запустили приложение оно катается кадры видим синхронные но через там порядка там час-два после наката робота мы понимаем что что-то пошло не так и видим большой рассинхрон в кадрах рассинхрон доходил порядка там 200-300 миллисекунд вот ну и если там взять Вот эту вот колонку посередине изображений за Алай по тому что бы мы ожидали увидеть то в принципе можно увидеть там некий рассинхрон Ну вот почилить программной синхронизации в этом случае у нас json ко всем камерам становится неким хостом устройством которое отправляет синхрон сигнал вот и это у нас позволило снизить задержку с 200-300 миллисекунд до там порядка 30-40 то есть продуктово нам было Вот теперь ок вот ну и чтобы у нас там во второй версии мы сразу закладывались на те камеры которые у нас были на тот момент вот чтобы нам совсем проще жилось и мы там не мучились периодически об сеть или что-нибудь такое мы заложили сразу на аппаратную синхронизацию разработали свою плату и с этой платой соответственно уже реализовали вторую версию нашего робота что в итоге мы получили мы получили такое решение как раз которое нам позволяет на ежедневной основе актуализировать Сток нашего склада минимизирует количество потерь Когда у нас товар может быть не найден Ну то есть процесс Когда происходит поиск товара Мы просто-напросто минимизируем за счёт большого количества раз наката Спектра по складу вот ну и Однажды мы там когда склад был менее активен мы попросили наших операторов тестировщиков прокатиться по всему складу вот замерить За сколько ж мы там про 24000 палет мест Вот это казалось что производительность нашего Спектра это 22000 мест в час против 37 мест в час у человека что там достаточно существенная разница вот на самом деле у меня всё всем спасибо спасибо за доклад У меня есть один вопрос а не боитесь что роботы свой профсоюз организуют роботы бом люди Ладно конечно да такой интересный вопрос роботы не организуют Точно Вот потому что мы там Понятно их там разрабатываем следим за ними люди не переживайте тоже не организуют как я там сказал с самого начала это людей на складе вечно на самом деле не хватает вот ну надо понимать что в одном логистическом центре где у нас как раз катаются наши роботы одновременно находятся сквады и озона и перекрёстка и ламоды и ещё мы И это всё там небольшой так и ещ такой вопрос вот интересует вы сказали про мобильную платформу а Можно поподробнее что под капотом этой платформы Какое железо в ней живёт Вот про nidia Понятно А сколько вообще ресурсов требует Вот это приложение и вот это нейронка да здесь важно что сама мобильная платформа у нас катается на CP вот ну то есть там установ железка там установлен CPU Ну грубо говоря x86 ком Вот и по сути он обрабатывает у нас солидарное облако датчики у него внутри там крутится некий пасф вот по ресурсам нуно это где-то восьмиядерный Ну шести восьмиядерный Ну типа обычный комп вот ну условно представьте inel какой-нибудь вот и по памяти там порядка ну для управления хватает вот мы замеряли там чево то есть вполне то есть там не супер там типа в плане системы там очень достаточно требовательная телеметрия чтобы у нас данные соответственно передавались к нам в Облака Вот и вот для этого соответственно там побольше ресурсов выделено Спасибо А модель вот как обучали ско времени Какие реу подо блоках Вот но обучение самих моделек ну у нас есть внутренние инструменты в Яндексе который там позволяет реализовывать вот запуск непосредственно Ну там процессов обучения Да это некая Нирвана вот под обучение модели ну здесь больше времени мы потратили на сбор данных вот ну там Если смотреть то данные собираются сильно-сильно всегда дольше моделька учится там не так долго там данные собирали получается вручную делали фотки вот этих р кодов загружали пытались чтобы распознал но коды они могут быть разные и повёрнутые и смятые вот то что показали и насколько вот велика достоверность то что код распознается корректно и безо всяких ошибок Ну с QR кодами Всё просто ну QR коды в отличии от штрихкоды даже если там типа закрыть то распознается там одинаково доста минива Ну там есть Понятно Что там детерминированность имеется в виду что там код по там мы определили там параметры защиты что там сколько процентов может быть повреждено у QR кода но по сути всегда декоди один и тот же результат Потому что есть внутренняя чек сумма Да которая проверяет вот у штрихкодов немножко не так у штрихкодов там в общем можно и систему обмануть вот поэтому сейчас на данный момент основной стек это QR коды вот ну позволяет как раз таки достаточно точно отсканировать Ну и опять же вот упомянули о том что идёт 10-15 rps в пределах самого робота А сколько и каким образом он выгружает данные Какой объём уже в само Облако на выходе м на выходе Ну там выгрузка у нас асинхронная когда условно Робот стоит на базе вот Робот стоит на базе подключен непосредственно у нас к факу вот если смотреть по данным одна запись - это порядка Ну сколько 1 Мб наверно ну то есть одна запись подразумевается что это текстовые данные фотки метка там ну типа фотка палета места вот вот это всё необходимое чтобы там выгрузить вот чтобы не занимать весь трафик весь поток соответственно это мы с облачко ещё спрашиваем А вот пришли ко нам вот эти вот результаты потому что все остальные нам не сильно нуж то есть текстовые данные по возможности гоним все оском режиме у нас а вот картинки так как они более тяжёлые мы гоним немножко постфактум Вот ну потому что у склада есть тоже некий там свой внутренний пропускной канал И вот ещё момент такой не совсем понятен вот подъезжает робот поднимает камеру начинает сканировать а у него там пустая палета а отображается задняя стенка которая бликует результ ведь может оказаться ритель тоже было но вот ну если я всё правильно понял правильно понял вопрос то есть когда мы сканируем там сзади может стоять ещё какая-то палет сзади Это с другой с другой стороны вда вот вот как раз таки классификатор у нас позволяет вот это вот побороть Ну то есть он у нас ну у нас собрано достаточное количество примеров подобных вот да мы можем нужный результат Ну если мы там где-то проходим не проходим по порогам мы Режем эти результаты говорим что роботу плохо и на пост разборе понимаем что где нам нужно улучшиться я понял И ещё раз уточнить То есть получается робот отправляет оперативную информацию сразу после сканирования а тяжёлые ВС Когда уже возвращатся на бау Дания и мы это всё выгружаем постфактум непосредственно на базе но складу важно получить именно в том числе и картиночка робот Говорит одно по там системе стоит другое там первое что чтобы там людей не гонять по складу смотрит человек ОТС матри ет вот поэтому с высоким приоритетом мы как раз таки запрашиваем картинки именно те которые там складу нужны есть ещё низкий низкая там запросов Вот это по факту все картинки для того чтобы мы смогли там что-то ну с нашими алгоритмами дот Нева дорабатывать их пос фактам тоже работать А вот замеряли Какой общий поток данных по шине идёт от камер от ле Даров от всего прочего А по камерам Ну с каждой стороны по 500 500 мегабит то есть там порядка габита идёт по всем камерам Ну то есть там если кто-то говорит Почему же вы там не собираете данные а потом постфактум это всё не не не пересылается в облако Не сканируйте ну просто нет такого пропускного канала на складе то есть там если робот робота провести реально по одной Аллее то это порядка там 20 ГБ данных Вот таких аллей 16 Ну как бы сорян то есть это достаточно долго мы бы это по сети тащили по вай-фаю вот э по лиру там порядка я не помню то ли 100 Мбит то ли меньше Ну в общем там тоже какие-то разумные объёмы есть ещё с нижним уровнем объем данных ну там он не сильно значителен надо понимать что у нас в роботе суммарно три свича Вот и которые как раз-таки нацелены на то чтобы разгрузить непосредственно пропускной канал Ну то есть по большому счёту такой неплохой промышленный Хало получается да дадада да это такой типа маленький сервер катается у нас по складу вот вопросы ещё вопрос пожалуйста у меня такой вопрос восполнить тёмные пятна по процессу у вас на фотографиях все палеты запале то есть в какой момент у вас кладовщики собирают товар с палет Почему они всё время запале и когда работает робот и когда кладовщики как они не пересекаются Угу Хорошо я понял вопрос Спасибо А смотрите инвентаризация происходит как раз-таки ну ну по возможности по нетронутым полетам Ну то есть когда мы привозим Пату на склад только впервые мы её в первой итерации распа Мы меруем каждый товар Ну там Понятно наклейки условно там идентификатор вешаем и залечи и ставим обратно на полку вот то что кстати Они там все заны это такая типа немножко ну как правило сейчас они все распо ну просто так совпало вот значит мы ставим Это непосредственно на ячейку Вот и инвентаризатор в своей пользе он именно инвентари зру ет не тронутые палеты если паллету вскрывают то её с большой вероятностью её вскрывают ставят на место Ну вниз и ставят непосредственно в зону пикин то есть на самый первый этаж Вот либо отвозят на операцию пополнения То есть это там ещё другая зона вот с этими соответственно паллетами робот не работает но бывает так что паллету вскрыли А вытащили из неё там тот же самый ноутбук поставили на место вот в этом случае как бы она является трону той её Мы тоже сканируем по возможности но на данный момент никаких операций не делаем вот как раз-таки обсуждаем на данный момент со складом чтобы что-то с этим сделать Всё ясно спасибо Можно вопрос е да вы просто сказали что робот непосредственно сканирует только не тронутый палеты а а вот если человек достал получается товар и поставил его на место как робот понимает что это нетронутая тронутая уже палета тронутая или не тронутая она понимается по системе Ну то есть Если по системе уже с там единицей товара из палеты произошла какая-то транзакция это в принципе отобразится вот мы мы делали некоторое решения мы делали некоторые mvp для того чтобы определить трону тости и нетронутой палеты но мы в какой-то момент это немножко забросили потому что решили провести простой эксперимент отправили двух кладовщиков независи про инвентари звать ряд Ну и сказать по каждому по каждому паллету месту тронутая палета или не тронутая вот робот оказался точнее Вот не всегда не всегда это тривиально связано Это с тем как я говорю вот на этапе приёмки товара паллету в принципе сначала смотреть что вообще поставщик привёз и каждый пронумеровать вот так как палета в принципе там вскрывается с самого начала А потом она как-то залечивает Ну то есть там вскрыли пронумеровали заплети отвезли на место вот человек сам не всегда бывает так что определяет тронутая она или не тронутая поэтому это определяется системой можно ещё только один вопрос по системе безопасности правильно я поняла что когда у вас робот ездит на инвентаризацию непосредственно по рядам у вас там сборка не ведётся идётся а как они вместе задействуют процессы не останавливаются робот если видит впереди кон впереди препятствия перед человеком он останавливается там на расстоянии 50 смет Ну скорость робота там это 1 МТ в секунду она не такая уж и большая чтобы он там не успел затор он пропускает человека в приоритете конечно конечно любое препятствие на данный момент у нас роботы катаются с оператором То есть мы естественно идм к тому чтобы сделать полное Удан управление в случае каких-то там форс-мажорных обстоятельств Ну то есть мы там доделываем там некую систему там не знаю obstacle avoidance ну как бы из самих датчиков которые бы видели препятствия Ну и полностью покрываем делаем два дополнительных контура безопасности вот на данный момент у нас для роботов достаточно лидара вот ну чтобы в принципе не врезаться каких-то инцидентов на складе за полтора года в принципе не было Ну за год Спасибо большое у меня ещё один вопрос дополняющий А в какой момент у вас идёт сопоставление информации с робота с учётной системой когда он уже приехал на базу или в момен не не вот когда там в общем как сделано У нас у нас есть некая промежуточная система которая вот ожидает Ну которая как раз-таки в первую очередь она общается со ск со складской ВМС ВМС - это Хамед System И она общается с роботом вот робот ей присылает данные по распознаванию она зна знает в каком состоянии находится склад если она видит расхождение то как раз-таки вот эти вот расхождения она говорит что А пришли ко робот мне ещё пожалуйста и картинки вот по Вот вот этим вот записям она присылает картинки агрегирующие два самых интересных вопроса Ну тут сложно будет ошибиться Да спасибо вот два самых приятных вопросов"
}