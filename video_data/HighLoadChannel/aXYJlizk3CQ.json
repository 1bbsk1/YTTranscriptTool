{
  "video_id": "aXYJlizk3CQ",
  "channel": "HighLoadChannel",
  "title": "UDP против TCP, или Будущее сетевого стека / Александр Тоболь (Одноклассники)",
  "views": 41719,
  "duration": 3477,
  "published": "2019-05-07T13:26:23-07:00",
  "text": "и так здравствуйте пока еще последний находят у меня наверно будет к вам так вопрос у меня очень много материалов вот и мы можем с вами сделать это быстро или понятно но если будет понятно то вы меня должны будете простить может не хватить времени на вопросы здесь много людей которые любят их задавать их вы конечно же сможете задать после доклада давайте поднимем руки и для тех кто хочет чтобы было быстро раз два три 4 5 шесть 7 8 отлично кто хочет чтобы было понятно отлично почти все ее тогда мы сегодня начинаем с понятного доклада и еще раз всем привет меня зовут по-прежнему александр и я отвечаю за техническую часть платформы видео и ленты в одноклассниках а сегодня мы с вами будем разговорным платформы видео лента проходите-проходите садитесь вот работа платформ видео и ленты она напрямую зависит от скорости доставки контента до пользователя и занимаясь оптимизация my этих скоростей мы пришли вот к такому странному выводу что нам пришлось сравнивать tcp как ни удивительно с ю д п вот вот этими всеми вариантами оптимизации сетевой доставки я сегодня с вами и буду делиться на ком мы будем сравнивать эти оптимизации наши и сравнивать протокола тисе пи и т.п. конечно же на нашем 70 одном миллионе пользователей на видео трафике которого на спике больше двух терабит и на стриминге которые у нас иногда бывает пиковый только стримит больше трех терабит то есть в принципе нам есть над чем сравнить еще почему я сегодня буду говорить с вами про будущее про будущее наверное буду говорить потому что если у вас есть от большой сервис и вы принимаете те или иные решения какие протоколы использовать вы на это будущее так или иначе влияете вы развиваете это будущее и поэтому несколько легче будет об этом будущем сегодня говорить вот наши сервисы видеосервис и лента они сильно про контент пользователей смотрят или видео или контент фоточки там ульян листая ленту и собственно говоря мы пришли к такому вопросу как это доставлять по тисе пи или по и т.п. в принципе сравнивать можно многое можно arm сын телом сравнивать многие любят пахали варить союз и андр и там вот можно mortal kombat injustice вам сравнить вот но мы сегодня будем сравнивать такие кажущиеся несравнимые вещи как тисе пи и т.п. для того чтобы нам заняться этим сравнением нам потребуется немножко базовой теории буквально минимум что мы знаем обойти сетях все пакеты все данные которые вы отправляете они разбиваются на пакеты какой-то черный ящик эти пакеты отправляет да например вашего клиента которому вы шлете данные он тип пакета собирает в эти данные видите в обычном случае вы для вас это все прозрачно вы не замечаете что там на нижних уровнях если вспомнить немножко стеков то мы видим что у нас снизу есть ethernet не который задает пакета есть айпи пакеты и дальше на этом уровне есть и себе и и т.п. ты себе египет в этом стеке сильно друг от друга не отличаются они инкапсулируется в а эти пакеты и приложения могут им пользоваться отличие начинаются если начать смотреть в египте себе пакет и тут видно что у нас и там и там есть порты но в европе у нас есть только контрольная сумма длина пакета максимально простой а в тисе пи у нас очень много данных которые говорят что у нас явно есть какое-то окно есть так ново logic and sequence пакета и так далее очевидно что тисе пи более сложный если их очень просто сравнивать то можно сказать что тисе пи это протокол надежной доставки о юдифи ненадежность в принципе что мы сегодня хотим с вами сравнить но как бы меня еще с института учили и лет 10 назад я был абсолютно уверен что египет это что-то про не гарантирована доставку просто отправил куда-то ушло а если вам нужен надежный протокол то эта tcp давайте подумаем кто из вас думает что юдифи может оказаться в именно кейзи надежной доставки круче тисе пи поднимите руку отлично в принципе вас где-то три зала тогда я немножко сделаю другой акцент если вы уже со мной чем-то согласны то цель моего сегодняшнего доклада будет примерно такая рассказать вам про то как работает сеть то есть мы будем с вами рассмотреть какие-то кусочки пазла того как работает сеть какие алгоритмы там применяются и если у нас с вами все получится то в конце мы с вами прийдем к варианту когда у нас сложится что же там внутри сети реально происходит кроме этого попутно разберемся почему пришли к тому что надо тисе пи с кем-то сравнивать почему это оказались какие-то протоколы по верху диппер и как это делал google и прочие вещи это какое будущее вообще сетевое нас ждет чего сегодня не будет сегодня не будет теория сегодня не будет asian уровней модели osi сегодня не будет сложных математических моделей хотя через них все можно посчитать и сегодня мы будем трогать руками по максимуму я буду вам подсказывает что в этой ситуации вы можете потрогать сеть зачем вообще нам пришлось сравнивать и степи с кем-либо ну tcp его придумали в 70 четвертом году и лет через двадцать когда я там пошел в школу тут как раз про одноклассников было я покупал интернет карты стирал код и куда-то звонил причем если звонить с 2 ночи до 7 утра то трудно было дозвониться на интернет был бесплатный прошло еще 20 лет и мобильные сети пользователи на мобильных беспроводных сетях стали превалировать над проводными пользователями а теперь все так же активно не менялся вот у нас видно что у нас развивались различные беспроводные протоколы здесь выбил был по-прежнему неизменен 80 процентов пользовались сейчас выглядят как конечный клиент который использует вайфай или беспроводного 3g 4g сеть в беспроводных сетях у нас существуют такие вещи как пакет лосс когда у нас часть пакетов которые мы отправляем просто не доходит существуют такие вещи как перестановка местами пакетов rior дрыньк существует джиттер когда отправляется пакетики равномерно к они приходят как тоф очередями все это те цепи за разруливает за вас и вы очень часто не погружаетесь внутрь если посмотреть скорости себе соединения в россии и убрать западную часть россии по мы увидим что скорость у нас смириться скорее в кило битах чем мегабитах посмотрев среднюю мобильной скорость мы посмотрели что у нас с порядком мегабита пропускная способность наших пользователей 06 packet loss и раунд 3 порядка 200 миллисекунд если у вас нет своей социальной сети где вы можете это проверить то на самом деле я подскажу как можно проверить эти цифры например можно верить ртт есть такая коробочка от райпо ее можно бесплатно получить домой суть ее в том что вы подключаете себе в интернета собираетесь какую-то карму то есть алоэ сутками работать на вас какие-то люди что-то выполнять какие-то запросы потом вы можете выполнять сами ставить различные задачи например такой задачи я взял случайно в там 30 точек в интернете и попросил померить ртт да ну в суставе выполнить команду пинг до сайт одноклассники как ни странно очень много есть точек среди случайных у которых pink там от 200 до 300 миллисекунд и того что мы получили что беспроводные сети это некоторый не стабильный интернет который динамично меняется зависимости от того зашли вы там за стенку или еще что-то он сейчас самый популярный у него немножко отличные характеристики в виде packet loss джиттера и так далее вот и следующий у которым раз подвожу в на самом деле потребление контента она зависит от скорости интернета это очень легко проверить есть много статистических данных я вот выбрал статистику по видео которое говорит что чем выше скорость стране интернета тем больше вы можете тем больше пальцы смотрят видео но снова довольно очевидная вещь хоть и говорят что в россии довольно быстрый интернет но у меня таких цифр не получилось что еще говорит в пользу того что скорость это недостаточная у нас это например то что все крупные создатели приложений социальных сетей и так далее и видеосервисов они оптимизируют свои приложение для работы в плохой сети то есть после 10 кило бит полученных данных о 10 килобайт данных вы можете что-то смотреть или на скорости пятьсот кило битвы можете уже смотреть какое-то видео очевидно что скорость недостаточно что еще интересно вот нас произошло в процессе нашей разработки видео после чего мы поняли что те степени очень эффективен мы решили ускорить загрузку и сделали такой трюк конечно мы что-то померили предварительно но судьба такая мы загружаем видео с пользователя на сервер и мы решили эту загрузку распараллелить вот вы грузите 40 мегабайт делим на 4 соединения поэт по 10 мегабайт и загружаемых параллельным делали это на андроиде получили вот такой интересный результат когда сюда говорю унесете все будем трогать все можно будет посмотреть вот и тут на самом деле видно что то соединение которая справа параллельная но прям действительно быстрее загружает данные чем то что грузит в одно соединение самое интересное что когда он перешли к финальным результатам мы увидели что есть регионы в которых можно загрузить что-то насер в 3 раза быстрее используя четыре соединения то есть вы реально в 3 раза быстрее можете грузить по четырем тисе пи соединением явно что-то пошло не так вот мы при этом прирастили загрузки видео к себе вот ну и сделали некоторый вывод что собственно говоря если вы хотите что-то грузить-то он иногда это нужно распараллелить дальше мы конечно же занялись некоторыми примитивными исследованиями для этих следование вам достаточно опять таки чтобы потрогать сеть вам достаточно спит стык кого-то нет воркшоперов для того чтобы сделать такую интересную вещь мы с вами берем ограничиваем нашу сеть какими-то параметрами типа 1 мегабита плода два года здесь указаны ртт и потери видим что сеть утилизируем на сто процентов мы начинаем увеличивать с вами packet loss видим что социализируется меньше ну ничего страшного вроде бы пакет лосс пять процентов 20 осталось но если мы еще увеличим пинг-то к этому времени у нас уже и половина канала не будет использоваться то есть у нас есть каналы с высоким рты большим пакет лоссом то в итоге у нас сеть почти него интеле zero wanna дальнейшей трюк показывает что если начать использовать параллельные эти степи соединения вы можете просто несколько speed test of даже запустить то увидите обратный рост то есть если вы параллельно в этой же сети начинаете грузить-то ваша пропускная способность ну или утилизация сети растает и она примерно сравнимого с тем носом который есть отлично и того зачем нам сравнивать нужно дцп у нас получилось что мобильные сети у нас сейчас преобладают степени до конца утилизирует канал и при этом все данные которые ой все все потребления она реально зависит от скорости чем выше скорость интернета тем больше пальцы смотрит а мы очень любим наших пользователей хотим чтобы они смотрели больше это копаниче видно что надо для того же на что-то двигаться и переезжать и с чем-то сравнивать тисе пи с чем мы его можем сравнивать ну варианты у нас на уровне айпи есть и сепию диппер можем позволить себе еще какой-то протокол сверху очевидно что если мы параллельности сифилитик и запустим свой какой-то протокол то про него не будут знать firewall и брандмауэр маршрутизатора и все остальное и в итоге мы будем годами ждать к тому когда все оборудование обновиться начнем с ним работать второй вариант мы можем запилить что-то свое поверху dippy очевидно что мы не можем дождаться пока там android или айос примут это в свои в свое ядро поэтому будем фелисити протокола визир спейси принципе кажется и довольно интересным решением за перед что-то юзер space по верху и т.п. будут здесь его в рамках доклада называть elf made видите протокол для того чтобы его devil опять ничего не нужно вы просто открываете socket отправляйте данные для будем его развивать параллельно изучая тому как работает сеть сети бывают разные сети бывают с перегрузками когда у вас очень много пакетов и какие-то теряются потому что сеть перегружена сети бывают высокоскоростные с большими раунд рыбами и сети бывают очень странную как на последней картинке вот когда у вас на самом деле сети ничего не происходит но пакет все равно пропадают ну просто потому что у вас там вай фай за стенкой профиля сети вы как всегда можете потрогать сами вы можете выбрать у себя на телефоне tatul тот или иной профиль сходить на speedtest посмотреть что он покажет профили потребления которые мы использовали ну так как я рассказываю все про видео и про лента то очевидно что есть профиль видео когда вы подключаетесь и стримить и тот или иной контент у вас скорость соединения разгоняется по графикам то что вы можете посмотреть и требование к этому протоколу это низкие задержки и адаптация битрейт а потому что происходит ну и вариант того когда вы смотрите какую то ленту то есть вы что посмотрели у вас загрузились картинки после этого тишина вы что-то еще пролистали у вас там ходят данные 5 картинок и это некоторый протокол в котором мультиплексе руются полученный дано не ищу приоритизирует очевидно что приоритет того что пользы сейчас хочет это выше чем какая-то загружающийся в оффлайне картинка ну и конечно же сравнивать протоколы нельзя если мы не будем их сравнивать на самых популярных http 1120 какая собственно говоря их отличия стандартный стек двухтысячных выглядел как ттп 11 поверх осилят современность так это же цепи два ноль целыз 13 все это поверх тисе пи а возьмем оба этих протоколах если посмотреть основное отличие то http 11 у вас использует несколько соединений обычно в браузер и к пул пул соединений для картинок для данных и так далее вот а что теперь вы предлагаете спорт одно соединение мультиплексирование в котором передавать эти данные откуда это вообще пришло если посмотреть к работаешь тебе 11 вы делаете запрос получаете данные делаете получаете данные и обычно всегда браузер или ваше мобильное приложение если вы разработана пульт то есть у вас есть пул коллекции до картинок d5 и вы выполняйте правильно запросы за картинкой запись еще зачем-то за видео основная проблема что есть конкуренция вы никак не управляете вы понимаете что пользуюсь сейчас картинка которая уже пролистал совсем не нужно он хочет новые данные вы ничего не можете делать вид одном получаете знаю проблема что ваш типе 11 трудно отменить загрузку вот кто знает как в дтп 11 отменить загрузку как ну в принципе socket класс на самом деле да то есть единственный шанс это закрыть соединение дальше мы увидим почему это плохо но отлично что http 20 он решает эти проблемы он бинарное это нам не интересно он мультиплексе рует multiplexer уют данные вот он их позволяет приоритизировать можно доставлять что-то важнее что-то не есть такие штуки как отмена загрузки сервер push более детальность на них посмотреть то мультиплексирование мы запрашиваем с вами картинку и 5 картинка сразу отдается и 5 подготовил через некоторое время отдался и 5 отдалась до конца картинка все это происходит прозрачно логично что вы получаете высоко паритетный контент раньше серб уж такая штука когда вы просили что-то конкретно типа и пе ён вам еще нагрузку отдал на клиент за кашира вам картинки который вам точно понадобится для просмотра например той же самой ленты вот и отмена загрузки есть команды разит стрим который браузер выполняет сам если вы переходите между страницами и так далее ну или если вы используете мобильный клиент вы можете и вызвать отказаться от получения данных при этом не разрывает соединение и того на чем мы будем сравнивать и secu будем сравнивать на разных профилях и будем сравнивать на разных соединениях на соединениях типа видео и на соединениях тип http 20 мультиплексирование для получения контента ленты ну собственно говоря начнем сразу с простой сеть и сеть очень простая не существует только два параметра round trip and is round trip это наверно всем понятно да это pink это время оборота пакета время получения acknowledgement или время эхо какого-то испанца band west как его померить вы отправите пачку пакетов очевидное не пачкай приходит они могут приходить как-то прорезана мы меряем на каком-то интервале количество пакетов рассчитываем какая пропускная способность сети так мы с вами работаем стрела и был протоколами то есть с надежными очевидно что у нас есть так на ужин ты то есть мы откроем пакет и получаем они как наложим то все просто . про медленный интернет когда на заре когда мы запускали видео один мой друг поехал в калифорнию решил посмотреть серию новую своего любимого сериала на одноклассниках оттуда у него был round trip 250 миллисекунд у него был идеальный вайфай на 400 мегабит в кампусе google и он хотел посмотреть новую серию всего лишь full hd кто из вас думает что он смог посмотреть эту серию а кто думает что нет вот тех кто нет гораздо больше на самом деле правы и те и те ну или те кто воздержались на самом деле это зависит от настройки send буфер на наших серверах если у нас стенд буфер например лимитирован 128 килобайтами килобайтами то очевидно что у нас protocols окно лучшими там то есть все данные которые не получили подтверждение о доставке они хранятся в буфере таким образом бой быть больше чем за round trip размер буфера мы отправить не можем таким образом если рассчитать время round trip и рассчитать размер буфера то мы понимаем что от нашей 400 мега битной сети осталось 4 мегабита этого не достаточно что посмотреть 1080 всего один процент сети остался тогда я сел у него размер буфера и посмотрю как действительно меняется скорость отдачи одного сегмента видео в высоком качестве в зависимости от изменения размера буфера сразу оговорюсь у меня было of the spelling моего варись из буфера поэтому это то что выставляла сером было я всегда мог принять очевидно рецепты себе если вы передаете высокоскоростные данные на большие расстояния вам нужно увеличивать буфер отправки кажется все неплохо можно затем такой сервис как я обещал все можно будет потрогать зайти на сервер с платком которые вам по мере ты интернет до серверов netflix вот если зайти , получу от какую-то такую скорость я взял и включил у себя шейпер на ровно те условия которые были нашей задачке я поставил четыре 100 мегабит ограничений 250 р т и в общем то все вот и зашел на сайт еще раз и вот магия я получил 4 мегабита ровно я не знаю почему кажется что должно быть это погрешности но вышло что-то такое путь и как я не крутил у меня не получилось от netflix и добиться буфера больше 128 килобайт в чем суть на самом деле большие буфера и ты ли всегда хорошо да для того чтобы разобраться с этим нам нужно понять что такое он за flight он за play пакет вот у нас есть некоторые некоторые состояния сети сейчас у нас пакеты 1 и 2 они уже улетели и моих получили окно выжмет пакеты 3 4 5 6 они у нас отправленные мы не знаем их результат то есть некоторые вот он за fly пакет вот и какие то пакеты лежащие в очереди вот очевидно что если у нас такой буфер что количество пакетов вон за fly равно размеру буфер он недостаточного размера и в этом случае у нас сеть голодает мы не до конца используем возможна обратная ситуация слишком большой буфер тогда в этом случае у нас получается такая ситуация как распухание буфера чем она плоха если будем говорить с вами про мультиплексирование данных и отправлять несколько запросов одновременно например картинки в этот пакет в это же соединение и к этому отправлять например и пить только да у нас вся картинка огромное мегабайта я например влезла в буфер и мы пытаемся высоко паритетный 5 запихнуть у нас буфер раз пухом и очень долго будем ждать пока эта картинка уйдет очевидно простым решением является автоматически is killing буфера он такой сейчас доступен на многих клиентах он работает примерно так что если у нас слишком много пакетов сейчас может быть отправлено буфер увеличивается мы можем прийти вот такой ситуации что мы ускоряемся размер буфера растет и вроде бы все здорово но есть проблема если ему буфер увеличили его нельзя так просто уменьшить это более сложная задача и случае если у нас скорость проседает с вами то в этот момент у нас получается такая история у нас опять то самое распухание буфера которые есть то есть на скорость села буфер у нас довольно большой он весь заполнены мы ждем пока он у нас грубо говоря сдвинется на клиент если мы пишем свой юдифи протокол то у нас все очень просто у нас есть доступ к этому буферу если ты сипит таких ситуациях просто добавляет данные в конец вы ничего не можете сделать то если у вас есть свой протокол то вы можете пихать эти данные например вперед сразу же за он за flight пакетами в котором за flight те которые вы уже отправили сразу за ними посылайте что еще классно если у вас проект consolation и клиент скажет эта картинка больше не нужна ему нужны вот эти пять данным стал дальше контент и хочет его увидеть вы можете все это выбросить из буфера и отправить дальше а как это делается известно что чтобы восстанавливать пакеты управлять доставкой получать от новый jimin то нам нужен какой-то секунд сойди у этих пакетов очевидно что sequins айди мы выписываем только для oh so fly пакетов то есть когда откроем пакет выдается can say die все остальное в буфере можем передвигать как хотим до тех пор пока они не ушли и также какие у нас выводы по размеру буфера в тисе пи его надо правильно настроить и существует некоторый баланс либо мы упираемся все эти либо у нас есть переполнение буфера так называемые переполнения распухание вот если вы делаете свой эдипе протокол то у вас все просто вы можете этим управлять передвигаемся на уровень выше и сеть на основе чуть-чуть сложнее у нас в сети появляется ещё пакет лосс ну очевидно для мобильных сетей это вообще нормальная ситуация потеря пакета выглядит так вы отправите часть пакетов какой-то из них не дошел стандартный алгоритм восстановления ри transmit который выглядит он получает работу примерно так он отправляет пакета на каждый пакет получает от новый домен считает какое-то время ведь transmit тайм-аут оно равно там round trip у плюс какие-то константы некоторые величины и после этого перри посылает его если не получила вернемся к нашей кривой неэффективности тисе пи когда у нас утилизация 50 процентов а мы теряем всего 5 процентов пакетов очевидно что при таком и трансмиссии который просто досылает пакеты мы не должны вот такую проблему наблюдать поэтому чтобы с ней разобраться нам нужно будет понять такой конверт шин control его очень часто путают flow control давайте оба быстренько рассмотрим flow control это некоторый механизм защиты от перегрузки то есть у вас получатель говорит сколько у него данных в буфере свободно реально для того что он готов их принять то есть если вы покинете еще лишь сверх некоторого flow control или вот этого recieve windows то эти пакеты просто дропнуться вот и есть как его задача на самом деле это бэк пряжа от нагрузки то есть просто кто-то не успевает вычитывать данные есть conditions control у него совершенно другая задача у него схожий механизм она его задача спасти сеть от перегрузки когда вы реально перегружаете сеть и например вот такая ситуация происходит вышли какие-то данные часть пакетов у вас пропадает вы послали еще больше данных эти всегда на 5 пропали очевидно что вам нужно выдавать данные лимитировать выдачу данных некоторыми порциями за это отвечает как раз conditions control он защищает сеть от перегрузки есть некоторая так называемой тисе пи винду она на самом деле некоторый минимум из flow control и кондрашин control а то есть она явно не превышает эти значения если это тисе пи винда у нас равна единичке там и данные вот так передаем то есть мы утверждаемся торжествующий пакет и снова равно там на 5 4 там и сразу шлём огромную пачку из четырех дожидаемся кто уже дальше работы очевидно что когда у вас стартует соединения у вас начинается его разгон окна вы отправляете какой-то размер пакета делайте больше больше и больше сейчас изначально размер мешал windows 10 это 10 он дальше разгоняется в случае если у вас происходит перегрузка то есть очевидно у вас какой-то пакет пропал случались дропы вы складываете окно и начинайте разгоняться заново все просто как при этом выглядит ваша сеть вот эта сеть когда у вас все хорошо вы отправляете пакет из какой-то частотой с такое что вам приходит от новыми то вы начинаете перегружать сеть выдавайте пакета чаще отложим это приходит с задержкой то есть очевидно где-то буфера копятся на маршрутизаторах и так далее на устройствах и в какой-то момент у тебя фира ночная дропать и вы не получаете акино эти пакеты с точки зрения маршрутизатора как это вообще выглядит наш театр он немножко умный он не дожидается ситуация когда вы его перегрузить и и он сразу др опыт у меня есть механизм тикетов он вам выдает тикет на отправку если там канал освободиться и так далее и он суть его в том что дропа чуть пораньше если он знает что если сейчас у него будет перегрузка он начинает случайно с идеи дропать пакеты очевидно что conditions control срабатывает так что он схлопывается эти окна нагрузка на бюджет rpl опадает и все продолжает работать так работали старый механизмы кондрашин контрола которые были уверены что сеть это вот картинка сверху то есть любой packet loss to на самом деле проблема того что сеть перегружена по факту у нас бывают вот те самые сети которые внизу который говорят что на самом деле потеря пакетов ничего не значит это просто такая сеть потому что она беспроводная понятно что те цепи развивался и адаптировался и 1 кондрашин control а не оперировали только на лосс функцию после этого у нас появились кондрашин control и который на lost delay оперируют они смотрят и на потери и на задержки самое интересными в данном случае мы рассмотрим кубик и bear кубик это кондрашин control дефолтный с linux 26 он почти всеми используются он как раз смотрит на потерю пакетов и работает как мы говорили то есть потерял пакет с хлопнуло окно bear более сложный к джейн control его придумал google в шестнадцатом году он как раз смотрит на размер буфера если посмотреть на метод по методам фидбэка то вот у нас нормальный можете затар муж театра у которого очередь начинает копиться каждый следующий от налоги мать приходит дольше дольше и дольше относительно отправки и в этом случае ribber понимает что у него уже идет переполнение буфера пытается с хлопнуть окно уменьшить нагрузку на мышцы и кубик который дожидается потеря пакетов и после этого слова итак но вот немножко сложный график у нас вот по этой оси это время время того время соединения и мы видим что у нас происходит на разных кондрашин control of baby art вначале прощупывают размер время раунд 3 по начинает передавливать пакетами потом понимает что да там копится буфер и выходит на то что у него всегда минимальная задержка от любит работать агрессивно он переполняет целиком буфер буфер переполнился packet loss случился окно уменьшил его алгоритм работу выглядит вот всегда вот так кажется что бибером можно было бы все решить но в сетях существует такая чтобы как джиттер пакетная до задерживаются иногда группируются пачками вот то есть вы их отправились какой-то определенной частотой а пришли они уже групп очками а еще хуже когда вы окно лучше мента получаете обратно на эти пакеты они тоже как-то g перец и так я все обещал что все можно потрогать руками то берем pingu им например сайт хайло досмотрим пинги и считаем джиттер между пакетами видно что пакеты приходят неравномерно если рассчитать средний джиттер это порядка 50 миллисекунд очевидно что бибер может при этом ошибаться то есть чем хорош бибер он различает реально конце schloss когда он сойдет потеря пакетов в виде переведу переполнения каких-то устройств когда у нас буфер сначала вырос потерялся пакет и отличает его от рэндом лосса когда у нас плохая беспроводная сеть вера пропадает но по факту он плохо работает в случае высокого джиттера как бы мы ему могли помочь ну на самом деле у тебя окно выжмет не достаточно небольшой то есть он говорит каким пакеты видел есть еще selective канал уже нет которой говорят какие пакеты подтверждены какие у него еще не дошли эта информация недостаточно если вы имеете возможность раздуть а кто выжмет вы можете сохранить еще все времена не те кто не ваши отправки этих пакетов но и приходы их на клиентов то есть когда вы сервера ждете пакетный клиент клиент записывать время прихода по сути вы на сервере собираете джиттер клиентам у вас есть и джипер сервера дохода туда и джиттер клиента почему вообще эффективно раздувать ок потому что мобильные сети они асимметричны например у него 70 процентов обычно у 3g и lte я это в на скачку данных и 30 на плот и у него передача переключается плодом лота плодом лот вы на это не как при влияете если вы оплотом не воспользовались ну извините он просто простоял поэтому хорошая вещь и это если у вас есть это интересная идея увеличивайте от наложенных на стесняйтесь это не проблема вот пример того как можно окно выжми там поделить джиттер на отправку джиттер на прием и трек этих отдельных очевидно в этой ситуации выставимся более гибкими и понимаем когда у нас реально канзаши носа когда рэндом лосс и вот можем например такой ситуации понять что у нас вот столько в одну сторону столько в другой джокер и более точно тюнить на шаг ну да да пластики вас большая сеть вопрос какие канзаши incontrol а можно выбирать у нас много разного трафика видео это их картиночки понятно если мы хотим выбрать кондрашин control наверно стоит сказать что бибер всегда эффективен для видео потому что он уменьшает задержки очевидно что если вы что-то в real time смотрите то это ваш случай в остальных случаях обычно используется кубик он хорошо для фотографий есть какие-то другие варианты на самом деле кардашян control of даже на той картинке были далеко не все их реально десятки для того чтобы вам их выбирать лучше выбрать собрать статистику по клиенту и для разного типа профиля нагрузки попробую тот или иной как антошин control например вот эффект от запуска бибера на видео мы реально серьезно увеличили глубину смотрения но и google говорит что порядка десяти процентов у него уменьшается количество буферизацией в плеере есть они использовали бега от вот но понятно что мы можем с этим играться и все очень здорово но что на 100 клиентов на самом деле клиент немножко заторможенные и у них у всех кубика вы на это не можете повлиять на ничего страшного иногда можно проверить данные все хорошо и того что мы можем сказать про кондишен control для видео у нас всегда хорошо пибиар остальных собственно говорят случаях мы можем если мы используем свою дипика в джипе протокола можем взять scanjet шин control с собой с точки зрения тисе пи вы можете использовать только conditions control который есть в ядре если хотите за implement свой ведро вам нужно быть обязательно соответствовать спецификации тисе пи и вы не можете там раздуть а как это сделать изменения потому что просто их нет на клиенте очевидно что в этом случае если вы делаете свой эдипе протокол у вас гораздо больше свободы следующая часть это мультиплексирования приватизации то как бы новый тренд все сейчас этим занимаются какие у нас здесь есть проблема если мы используем тисе пи наверняка все знают такую ситуацию как хэдов line blocking ну или почти все не только лишь каждый у нас есть несколько запросов которые у нас мультиплексе руется через одну типы соединения мы их отправили 1 и 2 отправили в сеть какой-то пакет нас пропал и получилась такая ситуация все пришли кроме одного из типе соединение будет пакетом transmission за или транс месяца за время близкой карта те или больше и в этом время мы ничего получить не можем хотя реальности сеппи буфере у нас лежат данные другого запроса полностью готовы их бы можно было забрать получается что его мультиплексирование поверх тисе пи если вы используете http 20 поверх тисе пи она не всегда эффективно плохих сетях вот следующая проблема это так сказать распухание вуфера когда у нас картинка отправляется например в какое-то отправляется клиенту нас увеличивается буфер моего долга отправляем потом с пуля теперь запрос и он никак не может быть справитесь ирован таких случаях у нас не работает в тисе пи приоритезация таким образом если разобраться во всей реальной ситуации то когда у нас срабатывает потеря пакетов у нас есть ходов line blocking когда у нас переменный битрейт у клиента в мобильных клиентов это бывает часто у вас появляется эффект буфер болото то есть переполнение расписания буферов и таким образом у нас не работает ни мультиплексирование не приоритизации не сервер push и все остальное потому что у нас или , буфера или там клиент что-то ожидает таким образом если мы делаем свое мультиплексирования мы можем запихать туда различные данные это довольно нетрудно мы пихаем пакеты с номерами укладываемых в буфер ккк не говорю что он за fly мы не трогаем то что уже было отправлено то что у нас не отрава можем переставлять таким образом выглядит эта следует следующем варианте вы отправили картинки разбили на пакеты пришел приоритетный 5 запрос мы его вставили дослали картинку даже типа пропал пакет мы из буфера можно достать готовые 5 запросы он вот высоко приоритетной реально дошел бы клиентам это реально делается очень просто в тисе пи по определению при стриминговый передачи данных такое невозможно рассмотрим следующую вещь установка соединения если по профилирует наше приложение то мы увидим что большую часть на старте приложения у нас сеть простаивает потому что часто на цене и т.п. и потом мы получаем какие данные потом установим сиденье до картинок скачиваем эти данные так далее так это происходит сеть почти утилизируют с кем-то пиками чтобы с ним разобраться мы посмотрим как у нас на улице день и первое это резов dns и тут мы ничего сделать не можем установка tcp соединения установка безопасного соединения потом выполнении запроса самого и получение ответа сам интересное что вот эта часть работы сервера которые сервер выполняет запрос отвечает он обычно меньше чем установка соединения почему вот если посмотреть на сейчас очень модно все lotensin амброз меряю для памяти для дисков еще до чего то можно их 10 померить для 3g 4g увидеть сколько займет в худшем случае установка соединения party степей 100 л.с. а вот видно что это могут быть реально до секунды 4g это 700 миллисекунд на тоже существенно понятно что одессе пиннер развивался он не мог так просто все это время жить и вот установки соединения базовый алгоритм тисе пи это три выход шейк вы делаете сян сян ок вот ип отправляете уже потом запрос есть еще pifast албан если вы с этим сервером уже хан шиг-алей у вас есть какой-то кубке вы можете сразу за zero вард отправить свой запрос в принципе неплохо чтобы этим воспользоваться вам нужно создать socket сделать обязательно стенд у первых данных сказать что вы хотите фас топан в общем джинкс все это умеет просто включите это будет работать или в ядре включите стр м как померить что tls это плохо вот я опять настроил шейпер на 200 миллисекунд паппинга вал google.com увидел что умер тот этом 220 мой ртт плюс ртт шейперов потом сделал запрос по https дпс получил данные что почти теперь можно за пример tt получить то есть это работает для гугла с моего компьютера вот и для steppes это заняло больше времени очевидно что это оверхед tls а дефолтный вот который нам требует обмен сообщениями для того чтобы установить безопасное соединение для этого нам уже до нас все подумали добавили tls 13 его легко включить в jimsie опять с этим гамме вот и кажется что все работает но давайте посмотрим что там по факту на наших клиентах на мобильных которые всем этим пользуются тифа столб и классная штука по статистике есть куча статей которые говорят на 10 процентов будет быстрее установка соединения гарантировано но на андроиде я смотрел 81 всякие различные устройства ни у кого на восьмом андроиде нету то for на девятом я видел тифона эмуляторе но какой-то samsung смотрел и там не было тихо вот союз сам чуть получше вот вариант то у кота можно посмотреть почему так произошло ты почему в 10 постов панова предложили в четырнадцатом году он уже стандарт поддерживается в линуксе все здорово но есть такая проблема что the fox and шейки стали некоторых сетях разваливаться развалится и стали потому что некоторые провайдеры или там какие-то устройства привыкли инспектировать тисе пи делать кидать свой оптимизация не ожидали что там будет тавхид шейк поэтому его внедрение заняло столько много времени и до сих пор мобильные клиенты его не включают по крайней мере android по умолчанию ст л с 13 которая нам обещает зиру ртт установки соединения еще лучше я не нашел устройство которым он работает на андроиде для этого facebook сделал библиотеку физ она пару месяцев назад стала доступного open source ее можно притащить с собой использовал с 13 то есть очевидно что даже безопасность нужно тащить с собой и в ядре этого ничего не появляется и вы можете посмотреть диаграмму использования нашими мобильными клиентами различных версий android и вот девятки совсем немного это там где-то по может появиться tls а пока нет нигде 13 вот собственно варят что можно сказать про установку соединениям тифа в случае там может существовать не доступна на 95 процентов устройств то есть реально его нету tls нужно притащить с собой но если мы хотим все это повторить в виде питтом и это все тащим видите повторяем у нас получился результат что 97 процентов соединений новых создаваемых они используют уже имеющийся ранние ключ таким образом мы используем создание соединение за веру я т т т т 3 процента новых момент что выключится сохраняем на устройстве нко это время там живет x париться и так далее вот ищет этим похвастаться не может дай бог в пяти процентах случаев если вы все сделаете правильно вам удастся получить реальный зиру ртт котором сейчас все разговаривают еще классная штука это смена ip адреса очень часто приходите домой у вас там вайфая меня уходите из дома life а милиция 4g вот вы переключаетесь в этом случае те цепи работать таким образом вы вас сменился и пять раз соединения развалилась все если вы пишете свои дипифр такого-то очень просто внедряя в каждый пакет некоторые connection и дефекация сид connection айди вы можете идентифицировать это соединение если оно пришлось другого ip-адреса понятно что вам надо удостовериться в безопасности что него правильный ключ все расшифровывается и так далее вы можете начали стучать на этот адрес и у вас не будет в принципе никаких с этим проблем в тисе пи понятно делает иммигрейшн это невозможная вещь если вы делаете свой теперь протокол и вы пришли на тот же самый север до это нужно поколдовать немножко то вам это удастся еще ну понятно все говорят нужно перес пользоваться единение это очевидно потому что если девочка дорогая вещь там и dns и tls установка соединения и тот же самый slow старт когда у вас окно разгоняется поэтому соединение нужно переиспользовать какие есть подводные камни при использовании соединения но если у вас при себе стандартный keep-alive там будет поддерживать воссоединение и стандартный над который видит тисе пи соединения он оперирует тем что он видел сена кафе то есть задание завершено выкидывает mapping из своей таблице маппинга на на те мэра многие помнишь туда у вас не во всех публичный api адреса у вас есть на то обычно на домашнем роутере он хранит какое-то время этот mapping для типе понятно сколько хранить одной цепи непонятно очевидно что он то период на kings and тайм-аутом если его аккуратно проверить этот тайм аут то мы получим что порядка 15-30 секунд они уже начали больше 50-ти процентов соединяют разрушаться вы ничего страшного сделаем пинг-понг пакеты по 15 секунд а для случаев кого разрушилась у нас есть api мигрейшн который в принципе за за недорого позволит нам сменить порт на маршрутизаторе это будет не страшно следующая часть это прессинг пакетов это очень важная вещь если вы делаете свой dippy протокол если очень просто сказать то чем больше вы посылаете непрерывно пакета все тем больше вероятность у вас packet loss того что вы потеряете если пакет и проредить то пакет lost ниже это очень легко проверить теорий на самом деле много разных вот мне вот это нравится у вас есть три соединения 1 2 3 не в один момент времени отправляют например создаются у вас есть так называемый не шил windows 10 пакетов вы его так и пачкой хоп вот и все в одно время создали очевидно что вам бэн веса может не хватить в этом случае и если мы это аккуратненько попей 7 то есть разделим эти пакеты то мы получим такую ситуацию таким образом если вы поищите пакет а у вас вероятность того что у вас будут переполнения буферов иди на момент на она ниже но это не доказана как бы но теоретически получается так когда нужно делать песен когда вы создаете окно нужно делать пирсинг пирсинг нужно делаться пролежать пакеты когда вы интернете окно ну например здесь рекомендовано в половину ртт то есть рекомендуется не странствовать все пакета за половину round trip а это не улучшит вам время доставки но при этом снизит пакет lose ну и то же самое в случае если у вас кантерлот случился и вы решили уменьшить окно тут нужно ещё больше размазать пакеты это вот эмпирически подобранная цифра возможно не вас получится другими принцессами протокола и типичного или стихи пишет от этого нужно помнить про mt это размер данных которые вы можете переправить я понимаю тяжело нужно собраться у нас сейчас дальше будет все быстрее быстрее потом станет полегче мы отправляем пакеты пакеты у нас уходит например сервера на клиент по 1500 с размером и в какой-то момент на симулятор которые не поддерживают этом тонах фрагментировать единственная проблема этого фрагментация в том что если мы потеряем один пакет мы потеряем оба и нам придется все это ри transmitting поэтому в тисе пи есть алгоритм определением тупым ты наверняка многие знают каждый смотрит прям то у своего интерфейса отправляет его другому клеи одному клиенту другой отправляет ему все знают сколько у них им-то на клиенте потом запрещаются флагом фрагментация и отправляются пакеты размера вам ту если у нас в этот момент произойдет такая ситуация что кто-то внутри сети понял что него это уменьшит опасен и он сообщит но у нас типа пакет пропал потому что нужна фрагментация моего дроп или и мы по и сообщит еще размер int умы кем-то у размер поменяем и продолжим отправку курсом случае наш небольшой overhead это некоторая половинка ртт это в цепи если мы в дипе не хотим заморачиваться со semper то что мы можем делать мы в при отправке обычных данных разрешаем фрагментацию шлём фрагментированные пакет и пусть они работают параллельно можем запустить процесс который запретит фрагментацию бинарным поиском подберет нам оптимальным ту и потом на него выйдет но очевидно что мы посмотрим выйдем к это распределением tool но это не совсем эффективно потому что мы вначале будем как бы прогреваться определять его более хитрый вариант мы посмотрели распределение тупо нашим мобильным клиентам получилось очень просто мы взяли со всех клиентов отправили пакеты различного размера запретом фрагментации то есть если пакет не дает вам дропнется и очевидно что самый маленький mtu должен доходить стопроцентно но есть это пакет лосс небольшой поэтому эти вариации и потом есть 2 горки 1 горка это нам тут еще 350 у нас получается место 98 процентов доставка там сразу 95 и потом следующие уже надела 1500 такой стандартный тут еще кто-то потом уже у вас и там и даже 80 процентов клиентов такие пакеты уже не получат вот и можно на самом деле сказать так пренебрежем наш умею там одним двумя процентами клиентов пусть они живут на фрагментированных пакетах мы зато сразу будем стартовать с того с чего надо это с 1350 ну очевидным ту можно использовать пинту который в те цепи можно его подобрать можно взять 1350 и не париться и в данном случае мы взяли 1350 исправление ошибок если вы делаете свой протокол вам нужно исправить ошибки есть пакеты у вас пакет пропал для беспроводных сетей это нормально мы его восстанавливаем в первом варианте мы сказали что у нас есть три transmit с через ретранслятор mode очевидно пакет пропал мы подождали время ретранслятор и получили период правили его заново это самый простой горит есть следующий алгоритм это в пастырь транслит это все по алгоритму эти сети и мы их можем себе легко видеть и забрать когда мы отправляем пакет пакет на следующий пропал мы продолжаем салат нас есть передача других пакетов в это время нам сервер говорит что я получил следующий пакет но у предыдущего не было для этого делать хитрый ок который равен к номеру пакета + 1 которого не существует и говоришь и публике так выставляет флаг дупак это неважно он так эти тупаки посылает и на третьем тупаки обычно мы понимаем что этот пакет пропала и перри посылаемого заново это пластырь transmit что еще хочется классного сделать что нет в тисе пи что предлагают делать видите это farther correction кажется что если мы знаем что пакеты могут пропасть мы можем взять набор пакетов добавить к нему костер пакет и починить это эту проблему без дополнительных ли transmit of сразу на клиенте при получении данных но есть проблема с врат несколько пакетов ну кажется что мы можем починить его через какой-нибудь там парить protection рида-соломона и так далее мы так пробовали у нас получилось что все пакеты пропадают пачками средний пакет гэп у нас получился 6 то очень не удобный пакет глеб нам нужно очень много кодов исправления ошибок при этом есть q это пик на 11 я не знаю почему но пакетной отдать по 1с пачками пропадают за этого pocket gp то не работает сразу забегая вперед скажу что google такое тоже пробовал всех как бы грезит этим фиком но пока ни у кого не заработала когда эффект может помочь есть еще следующий вариант кроме ри трансмита через три transmit тайм-аут phase 3 трансмита есть еще тело скраб это такая штука когда вы шлете данные и у вас хвостовых хвостик пропал то есть вы послали часть данных послали 5 пакет он дошел потом начали пропадать пакета и сеть там провалилась пропадать пропадают вы получили только на 5 пакет вот что понять дошли ли эти данные вы через какое-то время начинается делать тел п telos проговорить вам в их конец получили или нет ну потому что очевидно что если у вас пересылка данных закончилась и вы ничего не шлете the pastry трансмиссии работы чтобы это починить делать тел п вот котелки можно добавить эффект можете посмотреть все пакеты которые не пришли посчитать по ним парите и делать отправку lps некотором парите пакетом это все классно кажется должно работать но есть такая проблема мы собрали статистику посмотрели как она выглядит и получилось что там 99 в девяносто восемь процентов у нас чиниться через пастырь transmit потом остальное у нас чиниться через три transmit тайм-аутом и очень маленькая маленький процент меньше процента чиниться реально через тел пик если вы там что-то еще починить эффектом это будет меньше чем 0 5 процента реально эти цифры увидит невозможно ну из того что здесь есть видно что те степени поддерживать век но это понятно нет в протоколе в виде пиво это можете легко поддержать но в принципе тех алгоритмов восстановления стандартных которые есть и теперь хватает нельзя было бы не задеть performance разговаривая сравниваете себе cdp тисе пи очень старый протокол у него есть много различных оптимизаций типа ls а там line to float то есть у вас есть отправка пакетов которой вы отправить большой пакет большого размера и сетевой интерфейс этим решает вопрос по нарезке пакетов управлять пакетами есть такие штуки как зиру копи сейчас дяди пита все недоступно поэтому если померить performance то вы получите что эдипе всего 20 процентов перфоманса против тисе без тех же серверов которые мы получаем но уже есть реально готовые решения которые позволяют в linux поддержать это а знаю проблема этого поддержки оптимизации позирую копий и палач сегментов воду в том что мы то потеряем пейсер сейчас у нас есть кейсер мы формируем один пакет отправляем другой и так далее и решаем эту проблему говоря последняя проблема которая утесе 50 times the market если посмотреть то в последнее время когда стали популярны мобильный беспроводные сети у нас появилось очень много различных стандартов тисе пи там терпит его новые converge incontrol эрик бибер и так далее но основная проблема что многие из них не внедряются потому что тисе пи выражаются к стене то есть во многих случаях оператора заглядывать и себе пакеты ожидают увидеть то что они ожидают поэтому его очень трудно менять и вторая ситуация что мобильный клиент обновляются долго и мы не можем доставить эти обновления если посмотреть из этих последних свежих обновлений что реально доступным на клиенте и что на сервере очевидно что на клиенте почти ничего по этому в принципе решение написание протоколов юзер спейси по крайней мере пока в эти все фичи накапливаете кажется не таким плохим тисе пи вы реально раскатывайте печи годами если у вас есть свой идите протоколу можете обновить версию буквально за один апдейт клиента и сервера но надо будет добавить вершин не гашишем и так финал что у нас есть центре сиф буфер вы можете делать минута был буфер если сами и у тисе пи у вас будут проблемы с буфер блатом в конце шин control и вы можете использовать те которые есть у эдипе они любые новый как жеж incontrol трудно добавить в тисе пи потому что нужно иногда модифицировать ок вы не можете этого сделать на клиенте мультиплексирование надо критичная проблема у вас хэдов line blocking случается при потере пакета вы не можете максим мультиплексирование happy поэтому аж теперь 20 по тисе пи не должен вам давать серьезного прироста вот случай когда вы можете получить установку суде за веру ртт в типе крайне редки порядка пяти процентов если вы постараетесь и там порядка 97 если вы это делаете руками следующее что еще важно эти мигрейшн не такая важная фича нового в тисе пи она никак не реализовано натан бантинг это вот не в пользу и т.п. в этом случае у нас в виде при нужно часто делать пинг-понг пакеты посетить в египте пока просто пока нет сеть оптимизацией в 10 эта опция не работает emdu исправление ошибок и там и там примерно сравнимое ну я скорость 10 конечно быстрее чем люди ты сейчас если вы раздаете тонну трафика но зато какие то оптимизации очень много доставляются если собрать все самое важное то мы увидим что у идите скорее больше плюсов чем минусов кроме перфомансов поэтому будем выбирать vdp что еще хотелось сказать мы собрались и тестовый стенд у нас есть клиент найти себе ну и т.п. мы трафик по шее пили каким-то шейкером отправили их в интернет отправили на сервер один сервис ростовом и 5 другой сидит и дипе причем входит на той же ростовые 5 внутри одного дата-центра чтобы отправить эти данные собрали разные профили клиентов наших мобильных и запустили тест ну тут наверное все просто очевидно слева у нас данный который приходит poi di pesce права по тисе пи вот второй тест есть право переход при переходе вот это какой-то пакет lost среднестатистический там типа процента раунд 3 те же самые 200 миллисекунд мы видим вот такие результаты измерив среднего портала мы увидели что мы смогли уменьшить и 5 вызовы на десять процентов время картинки на 7 вроде бы упоролись а активность проект процента выросла всего-навсего но мы не сдаемся верим что будет лучше по нагрузкам у нас сейчас порядка 10 миллионов пользователей на этой штуке трафик до восьми десяти гигабит извините много миллионов пакетов в секунду порядка шести ну и там 20 серверов всю эту штуку обслуживают в общем есть некоторые прокси для нашего протокола если вы будет свой протокол вам нужен checklist вам нужен песенкам то у discovery исправления ошибок обязательно flow control engine control и опционально можете поддержать иммигрейшн helps это легко помните что паки канала асимметричный и пока вы получаете данные от сервера ваша флот может простаивать пробуйте его использовать было бы наверное не честно у меня еще есть будет пусть будет 1 минута сказать что google такого не делал нас есть протокол quick google его за им пленит финансировал под интерфейсом htc p20 который поддержит примерно тоже самое когда вышел quick появилось очень много хейтинга по поводу того что если его проверить то получается что google говорит что все 100 работают быстрее я померил у себя дома на компьютер работает медленнее есть такая статья огромная куча картинок много измерений получается что мы все это зря делали люди померили за нас есть реально дома в измерения не работает даже примеры кода есть на самом деле у вас не будет от улучшить до тех пор пока вы не будете пролить запросы работать в реальных сетях пока у вас потери пакетов не будут реально делиться на кондрашин лосс когда у вас сеть перегружены рэндом лосс и так далее то есть вам нужно реально эмуляция реальной сети вот но есть позитив ребята померили сказали что крик не лучше и не хуже таким образом в идеальных сетях крик работает хорошо немножко про будущее буквально месяц назад гугл назвал версии htp 20 а поверх leakage типе 3 чтобы не путаться потому что степи 20 мог быть поверх тисе пи и поверх только теперь у нас эти петри была еще такая штука как google крик это крик который реализован в хроме и quick который реализовал ой крик который стандартизованный датированный клик по факту нигде не имплементировать и стандартной сервера aig века и tf novak века они них н6 с google к векам сейчас они обещают проблему порешать и скоро это будет доступна если вы ещё не верите что 10 умер то я вам скажу что когда вы пользуете chrome android ios в будущем алес и ходите на вот эти сайты google youtube поиск и так далее и даже google drive то очевидно что используется у вас при этом кликаю т.п. сейчас 2 процента сайтов используют крик 12 процентов уже всего трафика века есть мобильный оператор который говорит что 30 процентов видеотрафика уже на крики как проверить что вы quick если вы не верите откройте chrome откройте white shark посмотрите он вам напишет же фиг я искала и крик нигде не нашел на logic вик бывает в так же можно зайти в сеть в браузере тоже увидит что вас там magic вик ну и буквально пару слайдов про будущее нас скоро ждет мультипасс когда у вас есть мобильный клиент у которого есть и вайфай и там 3g вы можете использовать оба канала мультипасс ты сейчас в разработке скоро будет доступен в ядре linux очевидно что до клиентов он дойдет не скоро и думаю что на юге пеева гораздо быстрее за имплементировать следующие чтобы так мы проводим массу трансляции там объемом потрите рабби там очень часто использовать такие технологии как сидел и пир toupper раздачу когда у вас один и тот же контент может доставить всем пользоваться по всему миру очевидно что вайпер 6 есть multicast среди пи который будет позволять доставлять пакета сразу хочу пользователям подписавшись поэтому я думаю что эти технологии скором будущем будут не нужны если мы будем делить все по multicast она и пиво секс ну и собственно варя выводы очень надеюсь что из всех этих пазлах вам удалось собрать и понять как реально работает сеть степени так плохо если у правильно настроить но он реально проиграл и больше уже не развивается ну и не верьте heute не верьте хейтерам эдипе который говорят что визир space работать не будет натан бантинг это все и сломает и так далее все эти проблемы можно будет починить ну и да если вы что то не верьте 5 трогайте сеть руками я показывал как это почти все можно проверить ну и со 2 мотивационная часть настраивайте свой протокол tcp и дипе неважно под ваши профили сети используйте рецепт иди себе которые вам рассказал про tls инвокер одессе типа столб она так далее делайте свои эдипе протоколы если у вас есть ресурсы если сделали свой идите проверьте чек лист что вы сделали все что надо забудете кунти ерунду типа пейсер а не будет работать и если у вас нет ресурсов готовьте свою инфраструктуру под quick он рано или поздно к вам придет ну из окна говоря кто думает что будущее за и т.п. ну процентов 30 ну а для остальных я хочу сказать что мы с вами определяем это будущее то есть то какими протоколами будем пользоваться это решаете вы хотите использовать крик использовать хадис пользу своих dippy хотите остаться на типе оставайтесь на 10 и 100 раз спасибо с вами был александр"
}