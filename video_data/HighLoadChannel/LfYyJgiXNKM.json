{
  "video_id": "LfYyJgiXNKM",
  "channel": "HighLoadChannel",
  "title": "Хакнуть K8s: разбор пэйлоадов и способов защиты / Лев Хакимов (Сбер)",
  "views": 514,
  "duration": 2255,
  "published": "2023-10-06T07:23:03-07:00",
  "text": "Я рад вас всех приветствовать как уже было сказано все мы любим kubernatis Все мы любим хакать и все мы любим котиков и в этом докладе будет все в том числе и котики Но немного о себе сам я Дымок специалист работал одно время над проектом госуслуг есть такой портал Сейчас работаю в Сбере в брокерской платформе уже более двух лет играю в сети в команде оно занимали где-то входили одно время в топ 10 по России и один из организаторов воронежские цтф для школьников и студентов прежде чем мы начнем Давайте немного определимся с терминологией если кто-то с ней не знаком Ну и первое что нам надо сделать это поставить знак между словами контейнер и виртуальная машина Я думаю более чем большинство из вас поставят знак равно и будут конечно совершенно правы потому что Несмотря на то что в принципе использование этих технологий в принципе имеет под собой задачу изолировать какие-то процессы друг от дружки это происходит на разных уровнях в случае с виртуальными машинами У нас есть некий слой инфраструктуры то есть железа на которое сверху раскатан гипервизор и относительно него уже ставятся а-а программные пакеты с операционными системами которые изолируют не только программный уровень но ещё и э-э процессор оперативную память в случае же с контейнерами всё это крутится на одной операционной системе и изоляция исходит уже на программном уровне а занимается всеми этими вопросами некий движок для контейнеризации будь то контейнер D будь то РКТ подмен что вам только понравится Ну или конечно же докер в сочетании с контейнер D собственно если говорить про разницу то разница скорее именно в уровнях на которых происходит это самая виртуализация в случае с контейнером как мы сказали речь идёт о программных пакетах Ну а контейнерах речь и пойдёт следующая вещь которая Вы наверняка знакомы это Linux Space если не знакомы то сейчас будет краткий экскурс а-а это абстракции которые позволяют вам изолировать определённые процессы протекающие в вашей системе или определённые ресурсы си-группы изолируют вас по цпу и по памяти есть межпроцентное взаимодействие можно изолироваться по сети в случае с маунтом Вы можете изолироваться по файловой системе и просто не выйдете из определённой песочницы которая вам будет предоставлена по идентификаторам процессов то есть запущенный в этой изолированной среде процесс будет иметь один и ничего не будет знать о родительских процессах А вот родительский может за ним приглядывать также по пользователям И даже по времени Всего их 7 штук Ну и следующая вещь Это capabilities поскольку классическая юниксистема подразумевает что у нас есть пользователь зарезанный по правам и Root которому дозволено все и не выполняются никакие проверки это слишком грубая система большинство из вас понимает что конечно же иногда вам хочется делегировать процессу какие-либо полномочия рутовые но при этом Рута давать не хочется для этого и придуманы эти с их около 20 штук э-э вот некоторые примеры вот сравнительно безобидного копчён до весьма неприятных имеющих приставку сис в названии например как капсис админ позволяющий вам ремонтировать файловые системы либо capsys модуль позволяющий сделать инъекцию какого-нибудь новую нового модуля в ядро поскольку Да классическое разделение прав выглядит примерно так и в случае с контейнерами все это неплохо переносится и на контейнерную среду Итак настало время немножечко сборника полезных Вредных советов для юных админов если такие есть если у вас станет задача руками стартануть контейнер и вы конечно же захотите дать ему как можно больше привилегий потому что ну Чем больше привилегий тем лучше то надо просто последовать этим советам например поставить флаг приволочь Ну и сразу выдать ему вообще все возможные привилегии какие только есть и будете уверены это сделать вашему приложению лучше работать оно от этого стабильнее не станет но зато возможностей будет больше либо прицельно навесить какие-либо билетис благо их 20 штук и в случае если вы какие-нибудь понаставите какие вам посоветуют то вполне возможно что-то из этого выйдет Ну вероятно скорее всего хакеры это понравится а ну и наконец приколы расскажу один маленький интересный случай жизни мы в прошлом году проводили в рэнси ТФ и проводили мы его в клауди взяли мы у одного известного Клауд провайдера отечественного виртуальной машины как всегда раскатка задач инфраструктурных подразумевает что там есть задачи которые представляют из себя инфраструктуру из веб-сервера какой-нибудь там базы данных и одна из задач было с дженкинсом где надо было про эксплуатировать ряд уязвимостей выбраться В контейнер и с контейнера и внутри контейнера искалироваться до Рута и уже там получить флаг с данными и сдать его в чек-систему и не планировалось что из контейнера можно сбежать мы раскатывались на этих машинах как всегда в последний момент когда получили задачи и нам было уже где-то в 5:00 утра за 3 часа до соревнования уже было лень проводить операции там по внесению пользователя в группу докер и вот эта вот банальные Казалось бы вещи справедливо посчитали что если мы попробуем выполнить из-под суда докер Старт компов проекта то ничего глобально не изменится Ну потому что докер - Это всего лишь клиент который отдает команды докер сокету уже докер сокет отдает команды на контейнер D с конфигурациями по запуску наших контейнеров и по идее никакого никаких привилегий от того что мы запустили докер под судо не должно было быть но какое было наше неприятное удивление что нас хакнули сбежали на хвост причём сделали это Ребята с десятого класса что было особенно неприятно а при дальнейшем анализе Выяснилось что докер который мы получили вместе с виртуальными машинами при заказе был как раз таки в привилегированном режиме мы этого просто не знали и все контейнеры там по умолчанию стартовали с полным набором компаний очень неприятно но подобные штуки всё-таки стоит проверять Если вы работаете с каким-либо сторонним не своими виртуальными машинами Ну мало ли что там может быть лучше все-таки проверить Итак что же можно сделать если мы с вами оказались в контейнере каким-либо образом туда проникли и понимаем что контейнер привилегированный Ну можно смаунтить хостовую файловую систему в контейнер если есть там тот же капсис админ В некоторых случаях можно воспользоваться демон докер демон соки там ну твои клиент Демона как я уже сказал работает сокетом который отдаёт команды и мы можем слать наши конфигурации и команды на соке Докера и есть контейнеры которые этот сокет с Хоста опрокидывают внутрь себя например Это какие-нибудь системы сборки типа докеры докер То есть когда у вас идёт сборка вам надо в контейнере произвести докер сборку там прогнать тесты поднять тестовое окружение то в принципе можно воспользоваться демон соки там его просто прокидывают с Хоста Да этот контейнер может быть не привилегированным однако если у вас есть полномочия такой контейнер стартануть и выполнить что-то уже там Поэтому можно этим воспользоваться Для нас это настоящий подарок Ну и можно каким-то образом заставить контейнер выполнить ривершел на Хосте и уже воспользоваться там подключиться к нему это вот такие основные способы Давайте случаи с реверселом рассмотрим чуть поподробнее Кто знает что такое реверсел надо пояснить что ривердшел это перенаправление оболочки ввода-вывода куда-то куда Вам удобно например вы захватываете терминал и передаёте его там например через tcp-сокет куда-нибудь себе на ваш например компьютер До которого можно Достучаться Итак предположим Мы оказались с вами в некоем контейнере первое что нам захочется сделать нам захочется выполнить команду kapsh она у нас идет в пакете липкап и выводит все доступные capobilities выполняем видим у нас стоит капсис модуль значит можно попробовать индицировать модуль ядра Больше никаких зацепок Мы не видим Ну хорошо можно сделать модуль Давайте попробуем его запустить Собственно сам сплойт назвать это конечно супер сложным сплетом с плейтом язык не повернётся но тем не менее Всё что он делает он выкачивает готовый реверсел подставляет туда ваш какой-то статический ip-шник и порт э и просто запускает эту команду вот собственно говоря и всё просто делает это в оболочке ядра а-а модуля для Linux Ну что нам осталось с ним сделать скомпилировать открыть на вашем компе в данном случае мы считаем что мы смотрим этот контейнер в интернет и Ну или у вас есть машина которая с ним находится на одном Вы можете куда-то перенаправить себе открываете на ней netcat слушаете порт insertity этот модуль в кирнель и Поздравляю Вы Великолепные у вас куча наград сразу получается вы сбежали на хост можно делать уже какие-то шаги дальше Ну хорошо вот уже 10 минут прошло А у вас возникает как бы ну логичный вопрос А что с губернатисом-то вот докер хорошо но не все же его во-первых используют есть не только докер А вот собственно вопросы речи доклада про губернатиз кто знаешь такой куберетесь думаешь что знаешь Ага хорошо кто с ним работал как пользователь А кто писал какие-то До него манифест и отлично но тогда мне не надо рассказывать что губернатиз - это очень классная по В каком-то смысле такая стоит машина которая позволяет вам автоматически развёртывать ваши программное обеспечение поддерживать его лайкал там ещё есть много всяких разных фишек Рыбак э-э ингрессы всякие различные операторы классная крутая экосистема конечно cubernetis по сравнению с дойкером выглядит как что-то нечто навороченное тем не менее кто работал с ним поглубже чем просто как обычный пользователь тут понимаешь что это всё-таки относительно такая низкоурова низкоуровневая всё равно штука и далеко не все вещи там реализованы или предусмотрены заранее поэтому у нас и существует такие коробки типа openshift либо там Ranger например в которых ряд проблем уже решен и основные проблемы закрыты и как многие тоже полагают в частности менеджеры которые не сильно знакомы Если у вас есть губернатиз это решает почти все ваши проблемы у вас и программа в губернате сработают в 200 раз быстрее и конечно же вопросы безопасности там тоже закрыты Почему Потому что любая статья или сборник статей по Кубу обязательно натыкается на Рыбак все знают что Рыбак это ролевая система То есть вы готовите какую-то роль отдаете ей какие-то пермишены там на просмотр выполнения удаления различных э-э кубовых манифестов на создание и эту роль присваиваете аккаунт и всё классно Казалось бы вы можете создать например в частности вы потом когда уходите от того что у вас кубом занимаются только админы вы передаёте его как губернатос как сервис То есть у вас уже команда вашей продуктовая может заказать себе на импс и сама с ним играться вы конечно не хотите давать э-э этой самой продуктовой команде слишком много полномочий вы хотите её как-то зарезать и зарезают её конечно рыбаками у вас команда там есть У нее сервис аккаунт какой-то которым они туда заходят они не могут посмотреть стороннинспейс они могут только свои ресурсы могут диплоить там только свой дипломинг какое-то создать посмотреть что они создали там логи почитать но глобально повлиять на куб они по идее не смогут Но у рубака есть одна серьёзная проблема рыба Рыбак работает на уровне cubernetos и на уровне объектов губернета и никак не влияет на контейнеры их привилегии и вот эту всю штуку а сейчас для вас будет коротенькая драма в семи актах с прологом эпилогом и даже неожиданным предательством Итак Представьте наша главная действующее лицо Это милый Junior котик только приходит в продуктовую команду продуктовые команды куча задач что они делают они сразу говорят Слушай вот кстати наш котик обещанный смотри у нас есть какой-то там микросервис например и сервисы вот у нас новая фича которая надо реализовать и заодно Давай мы с мигрируем наш проект который где-то там был раскатан Давайте его переносить кубернец хорошо наш котик Все разработал там поставил новых пакетов потому что новый функциональности новые пакет это всегда хорошо Это же что-то новое дальше Ему надо было как-то раскатиться в губернете Сын пошел в соседнюю команду скопировал химчат попробовал запуститься Ничего не удалось пекла падает разбираться не до конца идет на стек оверфлоу пытается посмотреть там И как известно Junior от метла отличается тем что джун копирует не с ответов от вопросов скопировал какие-то поля завел то что ему насоветовали нажал хелим Им стало но заработало поднялся Теперь давайте посмотрим Какие возможности у нашего зарезанного по всем правам Джуниор котика были и что он потенциально мог себе затащить до этого попробуем создать свой пот который выполнит немножко не то что нам хотелось бы первое заставим наш пот мы будем просто создавать даже не дипломмент заставим наш порт не умирать воспользуемся любым образом операционной системы всё что запускается нам пойдёт пускаем там бесконечный цикл Ну просто чтобы он сразу не завершился сразу ставим вот эти параметры в True можно не изолироваться не по сети не по межпроцессному не по беду Почему допрашиваем и тупо можем так сделать Ну если можем значит нельзя что ли Ну до кучи Пусть он еще и привилегированным будет то что привилегированный контейнер всегда лучше чем не привилегированный дальше мы заставим уехать под на мастер Что делаем просто делаем нос селектор на мастер очень хотим так сделать И тут мы сталкиваемся что рядом с Junior котиком был ещё другой Джонни котик но со стороны сисадмина который при раскатке в губернатиса Он поставил Ты что на мастер шит улица нельзя Это что У котика не получится случайно положить продакшн Да ни в коем ни в коей мере конечно же ему это можно сделать он же может поставить толераншен к этой самой заразе и уехать на мастер даже если не смотрел ему явно запретили Ну и конечно на мякотку давайте мы просто в контейнер с маунтим весь хост и достанем все что там лежит это сертификатики какой-нибудь классный манифест и дальше мы можем заходить и уже развлекаться весь кластер наш в полном нашем э распоряжении развлекаемся У нас полный карт-бланш можем хоть все контейнеры Удалить Ну почему нет мы же всё это можем сделать собственно настало время положенного пилога от чего же мы защищаемся от того ли этого самого джуниорк котика или от того что он потенциально может себе понаставить типа натащить потому что если у вас там проект какого-то например не использовать какие-то договорённости по пакетам версиям Какие проверенные Какие Нет У него нет там прокси Нексуса со своими а-а пакетами доверенными которые можно ставить у него там потенциально нет возможности очень легко затащить какой-то новый непроверенный пакет особенно после 24 февраля это всё стало резко актуальным Вы можете поставить хоть какой-нибудь прекрасный майнер в систему которая просто будет поджирать ваши ресурсы но либо Просто что-нибудь вы сломаете или вы что-нибудь потеряете и потом будете искать свои данные на сейвдата Почему нет Ну что же настало время как-то это подлечиться и что самое интересное в Кубе есть возможности как от этого защищаться причём они поставляются из коробки но куб спрей по умолчанию выключает их надо переключать их чтобы они при установке заставились и подключить первая вещь которая есть у куба это Мишин контроллер это вот самые основные ворота которые собственно предназначены для чего от Мишин контроллер это некий перехватчик То есть как только у вас опекер принял ваши реквесты с манифестом он может туда Как добавить Новые поля вот через мутацию так и провалитировать поля и в случае запрещённых болеет Кладите вашу манифест а-а Сделано для чего Ну в частности в случае с мутациями как раз таки для того чтобы очень удобно эти механизмы пользоваться потому что у вас есть разврат который не должен ничего знать про устройство кластера потенциально всякие афинете куда ему надо там отшедулить ваш вот он должен там располагаться все можно уже дотащить на этом этапе Он должен написать эту конфигурацию и такие поля могут автоматически подставиться Ну а вопрос валидации Это вообще всегда тема Очень актуальная но есть такая штука как под Security от Mission Controller это уже готовый кубовый контрольник контроллер который имеет три политики безопасности политика inforce это прям строгая политика которая отклонит Если у вас есть какие-то запрещенные поля он не даст задеплоиться и выведет вам выведет что диплоид отменён в случае с аудитом он даст вам за тепло это Но это всё будет зафиксировано в аудите в журнале аудита а Уоррен просто в ивентах вам кинет предупреждение что мол ты что-то не то тут используешь дорогой но так и быть поставлен э-э и основывается этот адмишин-контроллера основывается на подсекьюрити стандартах это уже готовые поставляемые модули безопасности три уровня от самого легкого приволочь где почти все можно до строгого рестрикта более подробнее какие там Поля входят какие нет можно обратиться в документации просто ее не все до этого доходят но можно посмотреть Ну и конечно приятно что все это включается сравнительно легко вы при выдаче нам спейса навешиваете туда пару лейблов с нужными параметрами запускаете и получаете уже в принципе какую-либо стандартную Безопасность это мы никаких дополнительных средств не привлекали очень классная штука можно с ней познакомиться но она сравнительно свежая и работает она там по-моему версии 1.23 э сейчас вот там 1,25 но всё что ниже она не поддерживается если у вас версия кластера ниже то конечно совет конечно обновиться но тем не менее есть механизм встроенный и в более старых версиях под Security полисы Не рекомендуют сейчас им использоваться он помечен как dep recated и скорее всего скоро вообще уедет но тем не менее это фактически просто Ямал манифест на котором вы можете перечислить какие поля вы запрещаете и у вас тоже манифест не поставится следующая плашка это Security контекст Наверняка вы видели эту штуку в манифестах в частности Когда у вас довольно часто когда во что-то не взлетает и тоже идете на стаканов рекомендует что-нибудь там будут перекликнуть но надо знать что вы собственно тыкаете Первое это рано из Дон рут классно кажется что один всего лишь один манифест одна строчка пишу рано из нору и у нас в контейнере внутри проект будет запускаться не от Рута А вот Какие какого-то пользователя сразу вопрос от какого это строчка проблем не решает потому что у вас в контейнере уже должен быть заготовлен какой-то дефолтный пользователь от которого вы сможете стартануть То есть если у вас таких пользователей нет Э это Не сработает или если у вас пользователь есть но у него не даны там все пермишные напапки права на исполнение То есть просто там пользователь обычный может не подойти ряд базовых образов там по-моему в ноде есть готовый пользователь Ну вот который вот эту штуку позволяет делать но тоже надо или там в дженкинсе использовать дженкинс специально эту заготовленный Но это надо смотреть документацию не всегда это есть Ну опять же там какой-нибудь сборщик для Java типа джип этого пользователя вам автоматически может создать но раны User может позволить вам выбрать какого угодно пользователя следующие две настройки селинукс и секунд это знаете вот использование этих настроек Очень напоминает Один старый Хороший анекдот этот парень положил нам сервер кто хакер Да не он просто дурак А почему Потому что те Linux - это как раз таки вопросы безопасности а секунд позволяет вам разрешать или запрещать э определённые сисилы в обычной практике в большинстве случаев это никому не надо делать а если не надо Это можно уже проговорить в каком-то отдельном порядке а Ну и флаг приволочь мы с ним тоже познакомились следующий флажочек это побилитис тут тоже все понятно можно перечислить список с к побилитис read Only File System вообще полезная штука потому что дабы у вас злоумышленник не мог подменить вашу конфигурацию приложения в процессе очень рекомендуется пользоваться этим флажком prog Mount позволяет вам в режиме anast это не маскировать прокси систему и тоже это далеко не всегда всем нужно FS Group даёт групповые права на приманченные Томы Ну а здесь это в принципе аналог ciscotel Linux полностью но тоже это так Та вещь которую в принципе рекомендуется не разрешать делать потому что большинству людей ставящих какой-нибудь Обычно Application это в принципе не надо Давайте посмотрим на систему глазами хакера какие есть узы если кто-то играл в сети или в пинтесты возможно вам что-то покажется знакомым Ну первая утилитка пи СНГ Кто играл в бокс наверняка с ней знаком это как раз таки готовый набор набор скриптов башовых которая позволяет вам провести сканирование вашей системы они больше предназначены для вээмок но в принципе в контейнерах тоже нормально работают они пытаются найти уязвимости на Linux серверах Какие потенциально Там могут быть и простой отчёт аудит предоставляют а вот лингпис в частности как раз таки скрипт предназначенный для Linux машин есть cdk более пропачечные улучшенная версия скажем так принципиально другое приложение но суть выполняет ту же это такой гошный бинарь ссылки сейчас можно не гуглить в конце будет ссылка на слайды с ними можно будет ознакомиться и вот эта штука вам не только аудит составит Но даже попытается какие-то банальные скребки дисплейты вам предложить Можно попробовать этим воспользоваться иногда даже работает хорошо Ну а есть что-то там чисто для аудита и чтобы возможно где-то можно было в коммерческой среде применить в принципе Например можно воспользоваться Киевскую граната с бенчмарк это и как набор уже готовых аудит скриптов которые можно выполнять и посмотреть какие он вам отчёты составит Ну так и в частности это ещё и набор определённых без практисов по настройке хорошо А если говорить на счет сетевого трафика то какие у нас здесь есть инструменты Network policy стандартный установленный поставляемый в губернатисе из коробки Firewall в котором вы можете достаточно легко настроить Ingress и ГРЭС правила для кубовых объектов и определить для подав входящие исходящий трафик Почему Потому что по умолчанию У нас под в кубе видит совершенно ему разрешен совершенно весь трафик как до внутренних объектов Куба так и до каких-то внешних ресурсов но в частности у Вас например какой-нибудь тот же прометиус оператор стоит в отдельном даже спейсе но вероятно разворачивался Там просто дерьмом без особого без особых манипуляций с ним то ссылки стандартные у вас будут тоже совпадать соответственно Вы можете подгружать себе потенциально хакеры оказавшись может себе выгружать метрики о вашем классе это может дать ему определенные сведения о системе и составить какой-то Вектор атаки Ну и следующая штука Это ресурсы и с ресурсами когда особенно когда у вас идет поставка Куба как сервиса надо быть всегда осторожнее но в частности потому что команде никогда не бывает мало ресурсов и все хотят воспользоваться всем что им предоставлено и второе От чего в принципе защищается ресурс квоты есть два объекта у куба это ресурс квот или нет раньше позволяющий сдавать ресурсы квоты ресурсов по памяти для нами спейсов и в частности это избавляет вас от того что условно там разработчик пил кофе какой-нибудь лавандовый раб пролил на клавиатуру кнопка залипла на нолики и Вуаля у вас там в кластере э куча куча кодов заехала вероятно куб - это не убьёт но ему будет определённо плохо а от такого количества объектов Особенно если это было сделано в пятницу вечером когда уже команда там сопровождении уже пошла отдыхать Вероятно это может вам доставить определенный неудобства Поэтому чтобы такого не случалось можно просто изолировать по ресурсам определенные спейс это вам весь кластер сразу не положит Ну собственно на этом все подходит к концу Вы можете посмотреть эту презентацию сканировать если у вас какие-то вопросы есть вопросы Конечно есть Спасибо тебе Лев Давайте ваши вопросы Да можно писать вопрос еще вот в чатик если что так кто с микрофоном Да спасибо за доклад есть вопрос соответственно Как вы относитесь к смене runtime контент для контейнеров в cubernets допустим накату и в каких случаях вы бы порекомендовали это сделать а в принципе карта контейнер с неплохая довольно среда для старта но лично по нашему опыту контейнер и оказывается и значительно удобнее и в принципе с ним объективно проще на наш это казалось работать когда мы там например конфигурили кластер там под первый раз делали раскатки кластера там допустим условно на госуслугах то с контейнер просто проще работать наибольшую документации было Ну опять же ската это сравнительно не то что это Экзотика контейнер довольно сейчас стандартная уже вещь но тем не менее На мой взгляд для первых инсталляция это может быть сложновато Есть еще вопросы там рядом Да здравствуйте используете ли вы в Сбере оппо-гейт Кипер для валидации и мутации непосредственно объектов и в каком ключе может быть какие политики Спасибо Да у нас Open Gate Keeper используется у нас опять же у нас сейчас на данный момент стоит openshift с определенным количеством предустановленных софтов этим занимается команда сопровождение я прям по политикам не подскажу потому что я со стороны сейчас работаю именно подготовки конфигурации и я фактически пользователь не могу вам точно сказать политикам но опять же у нас наложены как раз что у нас обязательно должны быть только на чтение система никаких возможностей там Записи В контейнер не должно быть естественно всякие там привилегированные флаги убранные плюс нас запрещены например э то есть у нас например не согласованные соединения не одобренные кибербезопасности у нас не примени политике например то есть только с одобрение у нас те или иные манифест и могут встать и только там где проложены какие-то готовые дороги Вот вот здесь вот вопрос кто еще будет сдавать так Здравствуйте меня даже пара вопросов будет вас начале был пример когда вы запустили докер из под суда и там школьника взломали они взломали мы что вы докер запустили потому что Облачный провайдер какие-то привилегии на весь вот Облачный провайдер именно навесил привилегии на докер вот именно как раз таки изначально мы думали что ну как бы мы запустили отцу до наверное в этом был наш косяк начали проверять И ни на одной обычной барметал машине Такой естественно не срабатывает контейнер чистый Это был именно накручено провайдером то есть мы взяли у них машинку уже готовую с докером а то есть вы взяли докер который Да он уже был докер установлен на виртуальную машину интересно второй вопрос я тут до этого в 10 часов было лекция насчёт безопасности там говорили то что если мы будем использовать то что докер он больше для человека для оркестраторов используется типа кондиционер и если мы возьмем некий образ там маринованные системы можем избежать практически всех проблем которые тут причисляли Да да но опять же вот почему контейнер идет стандартные поставки Куба и Ну если человека только ставит Это неплохой способ для него первая инсталляция там кубов сделать и она идет стандартные поставки прям чисто докер а сейчас нету первой версии Куба были с докером потом его выпилили оставили только вот это вот runtime ядро но оно идет по стандарту Да действительно именно докер скорее предназначен для человека в частности потому что нам никто не мешает стартануть Ну как бы нервы контейнеры тот же подман проблему Road led-контейнеров решает Там они только ротест без рта это действительно определённом смысле повышает уязвимость она в данном случае Э я бы говорю я про это вы даже не рассказывал Если бы я подобный стенды не видел бы на практике где просто вот надо было поставить куб его люди раскатили Никто там особо опыта с ним до этого не имел посмотрели и Ну вроде работает так и оставили а потом вплоть до того что была там например одна общая суперадминская роль на всех админов можно было потенциально поставить галочку Delete pods нести весь кластер То есть я такое тоже могло быть вопрос краткий вы коснулись резонной системы А в Сбере Какая что нам мастерах на орках Какая система используется а-а Red Hunter kell поскольку сейчас но потихоньку идёт отказ да это же система общего назначения И вот я просто был на лекции в 10:00 они говорили что так нельзя делать надо использовать какие-то специализированные типа Федора корресс такое А ну да смотрите тот же говорил тот же это не совсем система общего назначения openshift поставляется уже с операционной системой предназначенной заточенной подши фактически тот же губернатор но такой на стероидах и там уже подготовлена операционная система специально для него предназначенная там для стандартных установок рекомендовалось использовать мы ставили там centoys например Она была предназначена для подобных вещей Ну да и можно в принципе воспользоваться уже приспособленными там типа coros Вот там ещё вот тут рядом на что съезжаете схема Это первый вопрос а второй вопрос почему а сложно будет подсказать потому что говорю я именно не сопровождении не сопровожденческой стороны еще сработают то есть все-таки у нас кластер обслуживает отдельные люди мы его используем именно когда вопс скорее уже как пользователя поэтому именно конкретно про с первым не подскажу но могу сказать что съезжаем мы сейчас на классический губернатор Но со своими доделками в частности там будет лежать какой-то свой образ допиленный под нашей задачей то есть там будет стандартные воспользоваться куб Но со своими додеками много внутренних корпоративных продуктов Извините перевез доделки ничего вы будете перекемпелять 5 бинаре или нет Нет скорее с окружением уже готовым поставка То есть это будет что-то вроде аналога там openshift а но от уже сбера То есть со всякими операторами типа там уже встроено прометиусы и так далее вещами э-э Опа гипер и вот тут Наверное вам не подскажу потому что говоря я с этим с этой стороны не работает в мире ну с этой стороны Поэтому мне сложно сейчас вот почему именно такой был собственный ещё последний вопрос что Калика фанал а возможно Ну в данном смысле мы используем истину проектах в принципе он нам достаточно нравится довольно удобен в использовании Хотя конечно требует определенных там сложностей с бы изучением и применением в этом практиками работы со стионом прижилось это калека тоже возможно но вот скалика честно не пробовал Лев спасибо надо выбрать лучший вопрос и человек подарит получишь подарок Давайте вот вам лучше последний вопрос еще вот Давайте Спасибо Вы сказали что есть ролевая модель что она позволяет обеспечить некий уровень безопасности она скорее дополняет На мой взгляд но не является панацеей то есть прежде всего мы говорим про аутентификацию для того чтобы обеспечить доступ систему Да именно без ролевого какого-то управления вот хотела уточнить что в части аутентификации вы используете Какие возможны дополнительные инструменты у вас там есть большая своя система в Сбере аутентификации используете ли вы ее для админского доступа или у вас какие-то свои собственные системы для обеспечения на уровне раздача рута на уровне операционной системы что вы используете точните пожалуйста по поводу именно доступа к кластерам то у нас это все-таки Прям такого доступа на машины пользователи конечно не представляется у нас просто предоставляется готовый Project сейчас на данный момент и по удаку к нему идет именно доступ к веб-панели ну и соответственно для раскатки приложений мы просто выделяется готовый токен сервис аккаунтом который вот только чисто там для дженкинса для дипломата ничего больше Ну да Рыбак именно что добавляет дополняет его ни в коем случае не является просто той волшебной Серебряной пулей от всего просто довольно часто когда смотришь манифест документации по уровню безопасности Рыбак как бы сразу вопрос безопасности в кубе сразу ассоциируется с баком наверное ну для новичков может быть в каком смысле но естественно не является там единственным конечно совершенно точно просто даже совершенно другой уровень безопасности о котором мы говорим просто Это скорее заблуждение На мой взгляд Так кто всё-таки получает приз за лучший вопрос Ну вот Давайте пожалуйста"
}