{
  "video_id": "CG5laYmuUsg",
  "channel": "HighLoadChannel",
  "title": "Игра на выживание: запуск трансляций АПЛ в новом формате / Алексей Голубев (Okko)",
  "views": 1173,
  "duration": 2615,
  "published": "2020-04-14T10:48:22-07:00",
  "text": "если кто не в курсе о к онлайн-кинотеатр показанные фильмы без рекламы за деньги на всех устройствах довольно спокойно начинался ну понятно что амбициозно но спокойно 2019 год хороший прошел две тысячи хорошо прошел 1018 нужно расти в первой половине на фильмах растем техническая команда 40 инженеров разработка тестирования devops соответственно ничто не предвещало какой-то спешке и вдруг нам удалось выиграть тендер вместе с нашими партнерами из rambler на три года трансляции английской премьер-лиги эксклюзивно в россии только вот это никакого телевизора за спиной постановка собственно транслируем фух один по крайней мере на старте точно и без рекламы тут мы ставим звездочку дальше на всех устройствах на которых работают и работают фильмы с возможностью кача по перемотке и просмотров записи с собственным продакшеном комментаторами русской озвучкой здесь представлен такой timeline в январе пошли первые какие-то разговоры об этом но пока такие несерьезные а вот что если тем не менее феврале мы поехали на конференцию дабл ю си в барселону и пообщались там с различными вендорами life транс кодирующих там прочих решений для того чтобы начать тихонечко готовится в рамках и рэнди соответственно в марте мы проводили всякие рэнди тесты и в апреле уже была официально понятно что мы покупаем 11 апреля объявили о покупке прав и в мае по сути сразу после майских праздников стартанул разработка витрины с предпродажи сезона параллельно мы продолжали и рэнди по поводу лайва также где-то вот в конце мая начале июня стартовал а работа над постройкой аппаратный для продакшена с точки зрения о к 1 июня мы стартовали разработку уже целиком витриной не только предзаказа подписки 17 июля за три недели до старта у нас появилась первая возможность не с постройка аппаратный протестировать что-то в полном цикле мы перво августа открылся витрина были сначала трансляции турников и 9 августа первый тур апл на все про все три с половиной месяца и 40 человек немножко деталей за что отвечает эти команда ока соответственно мы не отвечаем за маркетинг мы не отвечаем за какие-то ключевые бизнес требования типа что все должно быть найденной витрине и спорт вместе с фильмами хотя в принципе любителям футбола может быть фильмы и не очень интересны мы также не отвечаем за то что без рекламы нас партнерской интеграции олимпа вот и немного отвечаем на стыке обмена сигналами с редакцией с аппаратными можем в принципе влиять там на какой-то контент который появляется на нашей витрине с точки зрения записи передач нам все такого но мы отвечаем за всю доставку сигнала до нашего отсюда и до аппаратный зависть backend за всех клиентов за продукты как таковой но собственно это здесь нарисовано и такого три с половиной часа до старта что нам нужно сделать нам нужно ставить сигнал нам нужно отправить его аппаратную чтобы его там озвучили получить обратно закодировать во все форматы готовые для всех клиентов доработать все системы шифрования интеграции dng айпи защиты и прочих безопасными вопросов безопасности потребовали английской премьер-лиги сделать раздел на всех клиентах backend спортивной витрин с точки зрения и управления интегрируется с чемпионатом для поддержки счёта во время прямого эфира также подготовиться естественно нагрузки хайло аду интегрировать стены все это мониторить и понимать как это работает сегодня конечно обо всем рассказать сосредоточимся на первых двух пунктах доставка сигнала и кластер для life кодирования начинали все это и сразу пришла на память чиста футбольная история фраза менеджер ливерпуля белла шенкли в том что некоторые люди думают что футбол это вопрос жизни и смерти я очень разочарована таким мнением потому что это гораздо важнее доставка сигналы соответственно что мы знали что есть сигнал на спутнике его надо как-то получить доставить есть сигнал в лондоне в бете tower или в каком то роде знали параметры сигнала соответственно это 1080 и 50 plo кадров то есть для того чтобы получить 50 п нужный интерфейс какие-то фильтры уже программные постановка в том что полностью продакшен с русскими комментаторами в москве всех матчей соответственно из такого исходя получается вылазь что облако использовать мы не можем для транскодирования потому что это выращивать задержку и приходил в облака отправлять комментаторов поэтому получали следующую схему приходит исходный сигнал он поступает в цод где мы его отдаем в аппаратную там убирается английский комментатор миксуется русские комментаторы с интер шумом если на добавляется к это русская графика вставляются в трансляции интервью после этого все это выкладывается на витрину по спорт онлайн и видеоконтент раздается через несколько сидел что может повлиять на работу прямых трансляций в видео сервисе но например солнечное затмение потому что спутники могут быть не видны или гроза потому что даже во время трансляции товарищеских матчей в москве была гроза и мы прямо это наблюдали как два спутника отвалилась на некоторое время в итоге мы сосредоточились на том что несмотря на то что спутники являются основным в точки зрения pl способом доставки мы взяли обязательные для себя что мы будем также вести по земле это лучше качество это надежнее мы нашли место для аппаратной прямо по соседству с тодом нашим который находится в lynxie здесь на метро аэропорт и таким образом получили вот эту петлю в аппаратную порядка 500 метров что тоже хорошо с точки зрения телевизионных наших друзей они все хотели иметь тоже им надо было строить очень быстро за те же там два-три месяца поэтому они строили все как хорошо умеют dear формат нашей задачей было с этим изделием разобраться итоговая схема получаем следующее есть два телепорта в москве они снимают каждый сигнал с двух спутников основного и резервного между ними есть мониторинг 24 на 7 и они с одного из этих телепортов присылают нам уже сигнала итоговый лучший из двух лучший из 4 получается плюс дополнительно мы тащим сигнал из сода в лондоне стокли парк с помощью партнеров venture links их системой why vixx по европе которые приземляются на им 9 соответственно m95 в 55 и that links а телепорт 30 наоборот как доставить его сигналу которого коаксиальный кабель длиной 100 метров на километры по москве стали с этим разбираться вышли на партнеров в петербурге компанию просят которые уже там 30 лет для разных телеканалов производит железки которые складывают их диайвай дыры и наоборот в общем случае схема выглядит следующим образом передатчик складывает преобразовывает дейв оптику мультиплексор сплиттер отправляют все это двумя маршрутами по москве на вот эти самые 30 50 километров 10 каналов одновременно потому что может быть 10 игр в параллель на приемной стороне с помощью оптического резервата и мультиплексора все это приходит обратно в преобразователь оптики axial и дальше этот где сигнал может быть отправлено аппаратную или напрямую заведено транскодер с карточкам видеозахвата процессе этого столкнулись конечно с некоторыми интересными приключений имеем потому что с нашей страны эпичный такой этичный этот мир мы покинули лет двадцать назад когда перестали платить за телевизионную антенну себя дома вот но он к нам вернулся соответственно выяснили что есть несколько bnc разъем of что бывают такие классные вещи как и сделай матрицы потому что сначала мы как-то себе это все более просто представляли оказалось что тут есть и failover есть возможность удаленного управления и можно переключать из нескольких входных потоков все это на лету с синхронизацией без подрывов всего такого были интересные моменты в том что как то так посчитали что этом 9 долинка всего 10 километров и соответствующим затуханием и мощностью поставили одни из в pi model она когда стали тестировать и посмотрели на карту оказалось что там примерно в пять раз больше пришлось срочно и 10 модулей менять были интересные тоже моменты с тем что есть такой оптические vc разъем у которого есть специальный пазик который нужно правильно закрутить но не везде он оказался правильным закручен на стороне передатчиков и в чем была проблема это было конечно тяжело найти ладно сигнал доставили переходим к кластеру кодирования подготовки life контент и очень схематично все это выглядит следующим образом есть сигнал идея 3 жизней энкодер нарезает это все в 204 или эффект на несколько битрейтов пейджер это все складывает микс шифрует с нашим моделям облаком интегрируется и складывает в необходимые форматы на origin прикрываемся ковшом раздаём сидим на старте у нас были примерно следующее поставщики партнерские до этого voco мы пытались делать рэнди несколько лет назад и несколько раз даже с life сигналами что-то уже пробовали что-то нет собственно взяли то что уже знали и начали поэтому работать поскольку времени было очень мало что учитывали при выборе энкодеры первую очередь конечно качество картинки притом минимальных каких-то битрейтах сейчас есть разные вариации не только вбр и cbr да но и там колите bass вбр или адаптив как он стал битрейт у каждого производителя там свои какие-то тюнинге соответственно нужно было понять обязательно про качество de internet фильтра как превратить 50 кадров в 25 кадров или даже в 50 соответственно обязательно поддержкой входа поскольку весь сигнала продакшна приходил в езде и учитывая то что мы в россии сверх сжатые сроки поставки в мае-июне запросили к первому августа все должно быть в продакшене интегрированные работать соответственно на танк озере выбирали между гармоникам элементом в итоге договорились с амазонов ским элементом он примет это софтовое решение встают на supermicro это было то что нам нужна поддержка есть отлично дальше следующий шаг соответственно пейджер для pajero были те же самые производители кто делает энкодеры гармоник элементов плюс дополнительно смотрели брод пик велось x и были шальные мысли допилить сша кпк джер самим но отринули их потому что рисков гораздо больше на таком коротком интервале 9 августа в любом случае случаев собой первый тур рфпл допилили бы мышка капа пейджер ли нет соответственно какие требования кпк джеруй но и а режим и соответственно поддержка обязательно трех основных форматов распространения которые мы используем ее для фильмов это дашь стенкам с двумя дилеммами войду они плеер иди требования по домам это требование тпл обязательная защита microsoft саму streaming флориде и человек сэр play проводили тестирование совсем возможным зоопарком smart телевизоров которые у нас есть и для фильмов philips и панасоники хайлендс и все когда там самсунга лыж соответственно пример такой таблички в процессе этого тестирования выяснили проблемы с 50 fps он потому что не все smart телевизоры готовы показывать 50 fps именно по api и не все андроиды телефон и готовы показывать 50 fps и даже с точки зрения компьютера с хромом тоже нужен достаточно мощный ноутбук для того чтобы это показывать соответственно для pajero на основе всех этих данных принял решение использовать ван ван дер solution вместе с энкодером для того чтобы минимизировать количество проблем на стыке именно решений и иметь как бы одно окно для обращений для поддержки в итоге получаем энкодер элемент alive он примет в тоге на супре микро пейджеры origin элементов дельта и с точки зрения каша используем джинкс в принципе проверенное решение до пелены допили иная версия которую мы используем для раздачи и фильмов здесь я немножко адаптировать для лайва планировали обязательно иметь отказоустойчивость полную соответственно несколько энкодеров выход из строя любого не приводит к потере игры несколько пока жираф то же самое и несколько к шее все входит в несколько сирена что важно учитывать при тестировании энкодеров п пейджером соответственно и что возможно где то мы не учли во первых конечно нужно обязательно брать тот сигнал который будет в продакшене то есть у нас не было возможности брать и здесь сигнал по ск пока не построилась аппаратное до 17 июля мы тестировали из файлов мы тестировали по сети но это все синтетические тесты это не то же самое есть теперь понимание да и вот например рекомендация допустим да нужно какой-то плат устройство у которых будут для выхода в которой из файла своего диска может играть прорез и отдавать его в нужном изъяли формате например аджики про или там какой-то black magic или что то еще что еще надо учитывать нужно учитывать реальные бизнес сценарии витрины то есть не то чтобы это канал да это событие которое появилось и пропала после того как она закончилась игра она должна быть доступна для просмотра в записи то есть уже не как life манифеста как виде манифест в большинство решений пакетирования особенно до заточена на работу 24 на 7 над этим все поставщики трудились много лет на то чтобы транслировать каналы без проблем нам это не нужны у нас есть события вот расписание вот игры они в три часа начались в качеством закончились все после этого нужно показать как люди дальше следующие несколько одновременно ну последние максимум у нас 8 игр было в день 161 что еще нужно не забыть обязательно протестировать ориджина под нагрузкой чтобы понимать их предел и если поддерживаем какие-то старые устройства или не ключевые смарт-телевизоры типа samsung и лжи последних лет то лучше иметь возможность какого-то модификации манифестов на лету потому что есть всякие разные приколы по этому вопросу у нас все это делается на наши модифицирован нам нужен xi например ну есть требования по блокирование пиратов ответственно все ссылки подписанные пир юзер эту это поддерживает в том числе джинкс есть приколы в том что некоторые телевизоры например не не понимают расширение . и сумели им нужно взять . и сам или не понимают у них с большой буквы нужно обязательно с маленькой соответственно если бы делать это все на пейджере то пришлось бы заводить большее количество каналов то есть соответственно в два раза в три раза больше и таким образом тратить лицензии мы все это легко делаем внутри конфига и джинсы и не тратим лицензии плюс есть необходимость разделять манифесты на несколько битрейтов потому что не все рост в например поддерживают единый манифест для адаптивности в ходе хдс d и плюс дополнительно можно дать пользователю возможность выбрать то качество которое тащит его интернет ну и дополнительные фишечки типа кратковременного каша ошибок который снижает нагрузку на origin и но это можно наверно поизучать потом соответственно примеры из конфигами джинса рерайт вот этих вот если мы сумели в ссылке на xlt модули которые делают преобразование вырезают или добавляют в манифест и для стриминга или для лечились и в итоге получили какую-то схему аппаратно построилась три недели до старта 17 июля начинаем тестовой трансляции в июле мы провели 8 трансляций они были закрыты только по приглашениям только для своих все отлаживали аппаратная отлаживал ась мы отлаживали схема была следующая соответственно здесь нарисовано 2 la его на самом деле был отринуть неважно мы использовали протокол youtube и для общения между лайнами и дельтами включены через коммутатор и аналогично обычной http между джеймсом и дельтами все это было построено так что это была изолирована по сети каждый каждая вертикаль тут это соответственно получается отдельная сеть здесь здесь схема следующая где пью не каст каждый life несколько дельт в итоге получаем проблема в том что это опять же неэффективно по лицензиям нельзя таким образом поддержать там много игр нужно докупать или достраиваться меняем схему переходим на multicast соответственно теперь мы вещаем по multicast у 1live является основным 2 резервным оба они вещают друг с другом друг друга тоже слушают как только один отвалился другой должен сказать что он основной из него там несколько дельта берут сигнал такая схема с такой схемы мы стартовали 9 августа в пятницу показали первую игру норвича и ливерпуль ливерпуль яновича конфигурация кластер а было три лайва 2 дельты соответственно отстояли начали собирать проблем и проблема следующий в такой конфигурации можно поддержать только 6 гр нужно доставлять еще один элементом в 31 августа уже на ждала 8 игр формате игра которая не закончилась 6 стартуют одновременно которые не закончились еще одна стартует после них обнаружили проблемы первые с развалим у нее манифестов при старте нескольких игр одновременно пока оставили разбирательства следующий тур через 5 дней добавляем пола его по дельте получаем итоговое конфигурации 4 плюс 3 опять же multicast держим 8 игр но проблема остаются стримы на старте периодически разваливаются между лайнами это приводит или к зелёным квадратам или к развалу манифестов отсутствие их обновления чего-то еще нужна какая-то синхронизация также в процессе она из этой проблемы обнаружили то что был дроп или орден multicast пакетов начали искать довольно много на это потратили параллельно обнаружили что например телевизоры lg при переходе слоев манифестов вот манифест на сумму стриминге не понимает уже водку не fest который готовит дельта дальше с этим разбираться посоветовали в саппорте элемент аланом попробовать сердце типичный протокол webdav он не такой эффективный по лицензиям но подтверждением более надежным получили новую схему параллельно разобрались с тем что при старте нескольких видны одновременно коммутатор начинал дропа чудики пакеты коммутатор был единственный в этой схеме не наш мы арендовали порты в тоге links а соответственно в оперативном порядке заменили коммутатор поставили свой все лишнее настройки убрали пакеты дропать перестали соответственно кластер получился следующий отдельности вой коммутатор оставили оба протокола потому что раддов проверяли не проверяли в бою то есть был в дав и multicast добавили ltc синхронизацию для геев для того чтобы по времени все потоки были одинаковые основной резервный получили чуть более сложную схему свой коммутатор несколько лайвов 4life 3 дельты engine x риф базовые возня и ltc генератор для лаймов напрямую примерно так выглядел кластер в течение там сентября да и на самом деле сейчас но основной наверное что здесь хочется добавить то что как сказали однажды нам в аппаратный что спортивные трансляции трансляции на бегу все вот эти переделки они проходили по итогам уже какого-то продуктовых трансляции выходные и по факту когда нету перерыва на игры сборных двухнедельного то мы получаем так что мы в субботу-воскресенье наблюдаем что то рэнди и что-то поддерживаем и так далее потом у нас есть там четыре максимум пять дней на то чтобы что-то пофиксить и следующие выходные мы опять сидим и работаем то есть лук с выходными сложности потому что за неделю надо пофиксить на выходных нужно посмотреть что это все работает естественно есть припрут есть какие-то тестовые варианты на неделе но все равно это не реальный сигнал не тот сигнал который приходится аппаратный не тот файл который показывают сам из аппаратный там тоже бывают свои моменты если это свой продакшн в итоге что мы имеем прямо сейчас четыре элемента лайва и четыре элемента дельты готовности транслировать там 9 или даже 10 гр каждую игру мы продолжаем оставлять на 2 протоколах в облаве мульти кости мультикаста проще масштабировать origin и и поле понятных failover отдав по сути соединяет life of duty один к одному в последние месяцы добавили мульти дороге на старте мы их не выводили просто потому что не успели до тестировать и потихонечку добавляем игры в 50 fps и собираем статистику какие устройства поддерживать и не поддерживают пока это две карточки соответственно пользователь может если у него печать fps не завелось на слабом андроиде или smart tv просто вернуться и запустить 25 fps трансляции для лжи для решения проблемы с вот манифестом переходим просто на дашь вместо сму стриминга но тоже пока оказывается что несмотря на то что написано в луже что даже поддерживается везде там с какого-то двенадцатого года но это не так некоторые линейки некоторых лет не работают по крайней мере пока ну и модифицированный gemix кэш для всяких капризных преобразование типа раздельный дорог или манифест большой буквы в маленькую из ближайших задач продал теперь уже в более спокойной обстановке они на горизонте трех месяцев до запуска исследуем но другие пока джерри origin и в частности и энкодеры тоже да сейчас все из энкодеров интересные ребята из бимер в питере тоже большая команда сидит у них медиа к int это бывший invideo atemi для п пейджер с origin of you give and streaming тоже часто софтовое решение и те же самый медиа к ней проектируем 4k историю но она не запустится в этом году запустится в следующем соответственно тоже изучаем вопросы чем делать 12g или полностью open 120 i10 там и так далее небольшие выводы до что необходимо учитывать при выборе решения для life транскодирования кодирующего кластер и обязательно учитывать бизнес сценарии 24 на 7 каналы или событие появляющиеся и пропадающие это важно как отрабатывает старт и финиш трансляции как приходит происходит переход и зла его вот с точки зрения именно манифестов безусловно если это не его вандер решение то нужно учитывать совместимость между транскодированы теру ющем софтом не забываем про стабильность имитацию реального сигнала то есть того который будет у вас в продакшен теперь немного о сбоях если вы смотрели апоэл наука спорт то безусловно с этим сталкивались к сожалению тем не менее получается так что мы тоже не ожидали не то чтобы такого наплыва скорее такого уровня ненависти который публично в интернете на нас начал выливаться но пришлось адаптироваться и так 9 августа стартовали opel один матч показали 10 августа показали еще восемь матче все отлично 11 августа последний матч большой матч в туре манчестер юнайтед челси почему никто не знает об этом давайте разошлем пуше за полчаса до матча мы рассылаем мобильной пуше а ios android до спортивную коллекцию их давно но них никто не тестировал ну вроде работает отлично на андроиде оказывается что такая конфигурация пуша приводит к подъему приложения с двукратным вызовом стартовой цепочки запросов соответственно вот это вот газпром башня справа в районе 100 тысяч черкесов это топ что пришло от андроидных пашей и что собственно положила авторизацию и заход сервис на этой игре кто успел прийти дуб ушей кто сам пришел не глорг hunter какой-то за пушками потянулся тот отлично посмотрел эту игру потому что сигналом проблем никаких не было на ней соответственно что мы сделали в принципе то что не должны наверное были сделать раньше но просто не успели на том краткосрочному проекте которая всех сроках который нас были мы разделили кластер и потому что вся вот эта нагрузка послал от android остальные могли бы не пострадать соответственно мы раздели кластер и мы развили кластер и наших frontend api по типам устройств smart и отдельно яблоки отдельно мы поддельное роботы отдельно соответственно объемы кластеров этих посчитали на основе потребления фильмов но собственного потребления нас до этого и не было вот так вот чувствовал себя я 11 числа вечером в принципе как фрэнк тренер челси которая это тоже был дебют и он проиграл соответственно следующие сбой произошёл где-то через месяц 22 сентября на игре челси ливерпуль и здесь к сожалению это было прямое следствие проблем со стримами на старте у нас закончились 6 гр и стартовала еще 2 соответственно мы еще не выявили проблемы на тропах rior денги пакетов на мульте кости стремилась разваливаться стали появляться вот эти вот зеленые квадраты люди начали риф решать карточку перезаходить перезаходить все это было в основном на вебе в итоге в провалился все было поначалу нормально в своем кластере но не хватило немножко рыбе тимку который соединял под фронтами это все и были некоторые проблемы соответственно в разработке самих приложение какие-то запросы оказались там синхронные соответственно ли укрепиться и встали калом остальные фронты тоже какое-то короткое время соответствующие не там первого тайма это все рестарта валеры бит подняли дальше все в принципе заиграла нормально что сделали ну понятно да tune ли оптимизировали настройки рыбе то и приложений которые к нему ходят расширили его кластер начали добавлять все больше и больше всякого разного каширования именно для того чтобы срезать вот эти вот всплески нагрузки не только на уровне приложения или этом engine.exe но и на уровне приложения бы контейнер виду но и на уровне веб-приложений в частности использовали механизм service worker of который обычно используется для оффлайновых сценариев на вебе но и расширили констебль сделал его примет таким же как у нас марта фильмов из свеженького буквально недавно 20 октября в 79 игра манчестер над ливерпуль все они пришли органические 1 пользователь и все честно уже никто себе в поколение мне стрелял но поскольку мы делали размеры кластеров на основе фильмов и потихонечку только это чинили соответственно в black все остальные платформы нормально себя чувствовали веб немножко назначили размазывать по остальным в ручном режиме вот собственно android от этого тоже минут пять пострадал но тут отработали уже гораздо быстрее там 10 минут где-то были проблемы налоги не авторизации вот этих вот всяких первых страницах кто опоздал первым стартом свистку кто-то получил кто пришел вовремя отлично смотрелась соответственно налили еще серверов но виртуалок на в кластер вы оба теперь у нас самый большой потом smart и с андроидами и яблоки в итоге стали чуть чуть поменьше добавили специальный режим sport поскольку изначально с точки зрения бизнеса все это должно было быть в одном предложении но по факту мы видим что пользователи приходят или за фильмами или за спортом соответственно время прямых трансляций у нас на вебе сразу все попадает раздел спорт что в принципе сокращает там тяжелые запросы всяких рекомендационные страниц которые обычно светятся на стартовой странице мы продолжаем заниматься оптимизацией микро сервисов авторизации первой странице которые собственно являются такими точками сбора всей информации о пользователе зачем он пришел когда он был рекомендаций и все такое буквально через три дня нас ждет новое испытание я очень серьезно рассчитываю что никто об этом не узнает что там будет проблем и соответственно текущая конфигурация следующие в 40 процентов от всего кластера frontend api все остальные стали по половинке от него потому что фильмы смотрят но там такого таких всплесках не бывает к шее по всему бренду добавили сидим и добавляем сейчас у нас два добавляем 3 соответственно сигнал пока остается на помидоре мульти кости спасибо вопрос спасибо алексей а мы переходим к вопросам у кого нить есть вопросы скажите пожалуйста а у вас файл over только на основе наличие или отсутствие сигнала или качество потока тоже как-то мониторится каким параметрам данный момент глазами качество тоже но в данный момент глазами но на самом деле поскольку мы работаем на стыке вместе с командой которая привыкла готовить телевидение спортивное телевидение там довольно много народу санта вы плюса для них это абсолютно нормальной ситуации они все пришли по выходным селе multiview висит глазами мониторят тут начала на спутнике моргать переключились там на землю или наоборот соответственно для нас это было таким откровением вот те шахтеры которых и нарисовал в принципе немножко этого не понимали да когда это начали строить что мы то думали что мы же пейте компании мощностью настроим skay было стартанули за час до матча все запустилось все закончилось сама но на самом деле нет да файла веры сейчас ручные мы расширяемся будем делать видимо какие-то автоматические но всегда есть риск feels позитив срабатывание соответственно и можно просто переключиться зря или скакать туда-обратно здравствуй спасибо за доклад два маленьких вопросам 1 а зачем вы тебя несёт поток и со спутника из сидена английского рублей земле поэтому не сидя на то до какого то сервера английского казалось бы смерть янгом больше будет проблем чем просто взять с английского сервака там все равно выйдет это стрим тяните все равно его транс кодируете убирайте дорожку ставите новую дорожку как бы будем и мы не virgin смотрите это failover то есть у нас есть спутниковый сигнал которые там 20 мегабит версия 4 например как бы да и игра для нее основным способом поставки является именно спутник на спутнике появляются всякие дополнительные материалы могут быть интервью перед матчем интервью после матча что то в этом духе но по земле сигнала первы более стабилен во вторых это 150 мегабит на самом деле получается до того же иса четвёртого а можно и больше теоретически но и на самом деле построение построение вот этой доставки по земле она сложнее и дольше вот на этом на этой перспективе 300 плен и месяцев до мы поставлять им канал теоретически да если лига а мы сейчас начинаем видеть что-либо в принципе по земле отдает все те же самые материалы да но им нужно продвигать спутник соответственно теоретически можем остаться на одной земле безусловно как бы да но пока так то есть но в основном мы сейчас поскольку у нас шесть каналов по земле и мир бывает 8 мы соответственно максимально все загружаем с земли тащим спутник у нас идет в качестве flower tag спасибо за доклад такой вопросик на слайде было что вы ищете замену элементов дельте до чем мы не ищем мы следуем ну просто были какие-то конкретные проблемы у меня есть опыт работы с элемента лама и слои вам ее спектра он время или in клауд мы на своем железе делали вот и в принципе как бы проблем не было просто может быть с чем то вы столкнулись что теперь ищите но вот я собственно про все что я с чем мы столкнулись рассказал да то есть это вот multicast ные там развал и как бы назвал это уже дропа multicast из-за коммутатор может быть да да теперь возможно это так но вот сейчас отстоим еще парочку туров да то есть но коммутатор мы поменяли где-то месяц назад да наверное соответственно было после этого там три тура и небольшой вопрос файла верно вроде в итоге сработал или не было то есть один поток играл и переключение никаких во время именно трансляции не было то есть был ли это першого на и переключение или какая-то задержка долой был но реальных файлов и raw сейчас такого не было ну то есть чтобы прям вот что-то вышло из строя и то что мы предполагали альтернатива сработала были вот эти вот ложные приключения да потому что вот когда как раздобыли тропы или орденами лайвы начинали друг друга считать неработающими да и соответственно запуская синхронизации там полностью разваливается манифест как вот но реальных таких вот чтобы сгорела железяка сейчас пока не было тфу может этого и не будет мы встроимся с запасом всегда рассчитывая на худшее но затмение на грозу но удар молнии в дата-центр до следующего а вот здесь вот вот в первом ряду но вот уже несут микрофон у меня вопрос про пиковую нагрузку получается что нагрузка очень специфическое выходные дни там 220 там 36 часов нагрузка есть потом она полностью пропадает что происходит с лесом в это время и там творится какой-то клауд и потом это же за выходит на насчет аналитики или что штате происходит она поставила там но водитель да сейчас у нас просто виртуализация ну не то чтобы она простаивает мы как бы пользуемся люди фильмы смотрят но в принципе можно сказать и тогда то есть есть некоторый запас который курит там вторник среду и четверг допустим да когда или понедельник с понедельника по четверг в данный момент мы готовим production новак обернитесь и там мы будем это соответственно более гибко дышать в необходимости к выходным большим матчем и так далее спасибо за доклад у меня есть такой вопрос измеряли ли вы значение лэм пенсии на клиентах и что вы делаете для уменьшения задержки но смотрите сейчас дам и тестом это все замеряли в данный момент где-то 15-20 секунд от из-за сигнала у нас итоговая задержка и это практически от стадиона то есть между стадионом и продакшеном но типа там две секунды задержка допустима ли 1 я вот ездил как раз натуры и мы это проверяли вот соответственно да че там 15 20 секунд но на реальных устройствах она конечно может быть больше потому что это очень сильно зависит от конечного player то есть smart и вечные плееры там с на сумму стриминге могут до тосковать свою задержку дашевский плееры в хроме один атом фаерфоксе но там шако но тем не менее как бы до другую она может и сползать 30-40 секунд в принципе то что мы в среднем видим по по потокам то есть ситуация когда пользователи android увидит гол раньше чем абсолютно реально и это я думаю что тот мир к которому надо просто готовится если мы идем спорт вот это потому что бродкаст с ним все понятно тут все одновременно мы возможно через несколько лет вот все эти истории slow it in сейчас он то что предлагает apple или там симов дашевский и так далее эту проблему решат может быть но проблема в конечных устройствах в том числе то есть smart tv и они не обновятся если мы хотим на через два года на телевизоре семнадцатого года продолжать работать на нем останется там тоже самый smooth streaming 20 как бы и ничего с этим не сделаешь она по китайски какое вино чан кого использовать том насколько но сейчас можно потом посмотреть просто это будет проще весь мой пользуется 6 секунд по мы секунд метриками quality of экспирианс сейчас секунду качество изображения объективные и субъективные как то берите отношение сигнал-шум именно во изображения с итоговыми и после транс кодинга нет до этого мы еще не дошли ясно спасибо так все в это время наш докладчик алексей выбрал лучший вопрос ну про отношение сигнал-шум безусловно хорошо да вот желтый ногой он получает специальный приз за лучший вопрос поздравляем"
}