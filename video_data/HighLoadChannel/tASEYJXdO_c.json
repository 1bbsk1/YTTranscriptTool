{
  "video_id": "tASEYJXdO_c",
  "channel": "HighLoadChannel",
  "title": "Дизайн GraphQL-схем — строим схемы правильно (версия 2) / Павел Черторогов (ps.kz)",
  "views": 5246,
  "duration": 2932,
  "published": "2020-04-27T13:28:09-07:00",
  "text": "эта тема у меня достаточно интересно и я очень рад что я выступаю именно в такой аудитории доклад будет таким нудным грустным но я постараюсь его максимально сделать веселым интерактивным почему нудные грустным потому что правила задачи то есть следовать правилам мы пройдемся по всем правилам которые были выработаны за несколько лет моей работы с граф телом кто помнит как мы в школе учили правило это нудятина и вот такая вот круглая аудитория я чувствую себя каким-то и преподавателям тема как раз преподавательская в общем огонь топчик мечта сбылась ок поехали не не поехали какой нафиг пакет найс так коротко о себе или не о себе давайте еще что-то я не разговорился сейчас быстро соберемся клёво суда доехал то есть спасибо antico спасибо джо гру antico самолеты джингу мне такси оплатила вот короче я рад что все друг другу помогают не нравится забота всех организаторов то что здесь происходит очень клёвые конференции в общем блин это просто огонь и топчик я готов короче коротко о себе 18 лет мучений бы kinder фрэн tender в одном флаконе уже за все это время побывал с граф hellam я уже 4 как минимум года есть у меня куча open source а самые интересные и популярные это граф kill компост он сейчас используются в gatsby для сбора граф hell схем с сервера тоже там у меня есть манга тебе memory сервер для тестирования манги то есть он позволяет в честь или где вам угодно с буквально с нулевым конфигом запустить любую версию манги для параллельных тестов ну то есть он сам нужно бинарник скачивает запускает сам следить за темпами файлами ну короче топа топовая тема тоже активно пользуется 38 тыс закачек недельку реактор или network layers to ладно это для front эндеров и есть и замок на библиотечка львович это вот для бы киндеров хорошо если вы всего 6 что-то там письма пишет титу она умеет склонять разные страшные города там где-то 20 4 килобайта правил которые я нагло позаимствовал у петровича потому что мне не нравился синтаксис как-то назывались переменные меня просто потряхивало и это будет правилах графики ела там самых первых вот когда вот переменный криво называются или методы плохо называются то вот ok сейчас я работаю в биллинговой компании в хостинговой компании pilm этом пилинг на микро сервисах на графике аллах думаю оси нибудь что интересного веселого рассказать там уже используем граф съел все дела посмотрим что из этого хорошего получится сегодня мы с вами поговорим о правилах будет нудно но я надеюсь все мы сегодня с вами и с этими правилами справимся конечно так я говорить не буду но надо было попробовать понять как это работает окей о правилах построения граф kill схем что они вообще дает то есть у нас с вами вот когда какие-то команды по 5 10 а то и по 50 и простой человек если каждый что-то начинает свое колбасит свой синтаксис предоставляя название переменах предоставлять начинается маленькая вакханалия то есть в любой системе все равно так или иначе надо заводить какую-то деталь диктатуру какие-то правила и им четко следовать для того чтобы понимать не только свой код но еще и спокойно чужой код и вот текущие правило они решают головняк как разработки так и фронт янгиров потому что если им следовать fontaine de нам будет на порядок легче строить их клиентские приложения те правила которые буду рассказывать они носят рекомендательный характер могут со временем улучшится измениться расширится или вообще что-то статен типа тарном но как бы вы можете спокойно для себя их выписать они у меня есть гитхабе они полностью расписаны текстом спуск полным обоснованием что почему и как это все доступно в гитхабе ссылочка будет в конце вы спокойно сможете себе эти правила утащить какие-то накидать и заппу своей компании какой-нибудь convention по тому как вы разрабатываете своей схемы в общем нам важно избавиться от креатива которые будут делать ваши разработчики и вы сами а кейс начинаем с первого из-за чего у меня львович не понравилось ролик мне понравился это правила именования правила именования вот такая регулярка у нас находится в графике о масках для того чтобы вы могли вызывать свои типы и поля она из позволяет танки мелкий сандерс куратор кремль кейс там какой-то из них посколькy есть капитал азиат вы сандерс карт славу богу кейс недоступен иначе бы все фронтэнда рыбы нас застрелили первое правило использования крема кейса мы их должны использовать только для полей и только для аргументов то есть название там sander скоро мы за актив уже не роняет это плохо потому что скажу чуть позже почему название аргументов пир нижнее подчеркивание прп что же плохо но в основном у бы киндеров почему-то в базах данных все поля с нижним подчёркиванием я потом ковырялся смотрел на самом-то деле в базах данных поля можно называть и в кейсе но в примерах везде sander скором все примеры написанные плюс как бы потом спрашиваешь у бы kindern учета так в базе то написал он говорит мне так удобно ну типа я так привык у меня красивые к эрике когда он говорит красиво я говорю ну красота спасет мир и это хорошо а вот что тебе так удобно сомнительная вещь должно быть удобно тем людям которые постоянно будут работать со своими клириками и запросами но так или иначе почему те маркиз для более аргументов java script swift code lense используют у себя кремль кейс иначе ребята будут постоянно там использовать алиас на своей стороне и ну чтоб привести свою кодовую базу в красивое состоянии потому что граф ки и граф kill возвращает джейсон с теми названиями которые у вас написано в вашей коробке л схеме правило 2 а парк ему кейс он используется тупо для типов то есть блокпост любят с маленькой буквы писать название типов или там использовать андерс корр но ребята блокпост большой буквы это хорошо почему об арки из для типов опять-таки java swift код javascript везде для типов для интерфейсов используются а парк ему кейс то есть давайте жить дружно не мучит наших клиентов наших фронте эндеров скажем так капитала и зуд вы sander sport используется для canon типов для чего ну то есть как бы какие варианты у нас есть можно из маленьких большое написать но желательно вот как мы объявляем с вами константы да то есть эта конвенция в джаве и в котле не плюс еще в graph келли уже есть существующие и нам типы которые также свои значения определяют как капитала и z вот и самое главное не забывайте как вы пишите запросы то есть внутри запросов именно вот здесь вот а иди диск до тус когда он написан сорт с маленькой буквы нам как-то не шибко читаема а вот здесь сорт айди диск из капитан который написан капитала и за вполне хорошо отслеживается глазками вот резюмируем быстренько кэмэл кейс для полей аргументов applocker мол кейс для типов капитал отсутствии sanders курс для констант убежденным ключей теперь поехали быстренько по самим правилам типа хорошая аудитория опять-таки используйте koleston используйте кастомные скалярные типы если вы хотите объявить поля или аргументы с определенным семантическим значением сложно но понять можно 5 стандартных типов их недостаточно жить можно но как-то сложно то есть нам требуется заводить свои костяные типы то есть если это дата то лучше использовать какой-то каста на скаляр дата если у нас хтмл тут для него создать кастомные скаляры хтмл или html кому как удобно что дают они бы киндером единожды написал свое свои методы валидации на скалярных типов на 10 реализацию лица реализацию позволяет не портить ваш код влезал в методах то есть вы можете постоянные там проверки валидацию емейла утащить в методы скалярного типа их там три есть серия elite который позволяет в джейсон стерилизовать значения из серверного типа есть парс литерал и пар с lexer по-моему где-то у меня в статьях там есть короче три типа два партнера который один переменные партию другой парсит то что прям в теле запроса написано и это позволяет как бы изолировать вытащить тот постоянный код который бы вы писали в своих resort методах фронте энди рам это позволяет на компонентах сразу создана пиликать свои какие-то компоненты которые будут обслуживать этот тип для отображения либо редактирования то есть когда они будут видеть тип ты туда не будут понимаешь что нам как-то красиво эту дату отображать используйте и ну мы для полей это следующее правило 22 кстати все эти правила вот ссылочки они все клипа кликабельны используйте нам и для полей которые содержат определенный набор значений что это такое то есть будет плохо если вы будете своим фран тинкером возвращает что вот у меня типа есть некий пользователь и у него есть поля статус это строка чувак гадай сам что у тебя что ты можешь там и у нас от нас получить результат у можешь туда записать то есть для таких вещей лучше использовать и нам типы и четко перечислять доступные значения то есть например фран tender сразу поймет что существует 3 статуса когда потребуется вам завести новый соответственно появится новый если вы какой-то статус вы пилите огров hell статически типизированный а штука она позволяет фронт энгельсский код генерировать для front энгельсского кода генерировать type de финишный исходя из тех запросов которые написали сами фронте индиры и соответственно если вы вдруг какой-то статус уберете то на build вазелина линкинги у фронт эндера все сломается ну то есть сломается на этапе сборки то есть мы не доведем грех до runtime а то есть фронтами таких проблем о том что тип какой-то некорректный или статус мы не получим поэтому пользуйтесь обязательно н у меня где-то возможно валидация значению бы киндеров из коробки то есть фронт эндер не сможет вам запихнуть в эту строку не понятно что то есть гров hell будут жестко смотреть чтобы были переданы необходимые значения мы экономим на документации и общение с from тендерам чтобы не объяснять что мы можем туда принимать front энди рам здорово тоже они не гадают о доступных значениях не ходят к вам на общение проверки запросов линкорами то что я сказал ну и статический анализатор проверка тоже хорошо провела полей всего их 10 секций вот под конец самых хардкор правило 31 полям необходимо давать смысловые именно они-то как у меня они у вас реализованы в базе данных то есть там у нас есть боги и нижние чего-то там как у вас базе хранится потому что больше чем уверен у большинства какой-то всякий бардак в названии в полей и это нормально потому что приложение живут мы там тоже живем иногда приходим не очень хорошем настроении как-то неправильно называем полям так вот фронтенда желательно отдавать поля в красивом названии чтобы он понимал что у вас в полях на находится ну чтоб не было стыдно то есть х есть хороший анекдот про дона педро по ссылочке можете перейти и почитать короче чтобы вам бы киндера мне было стыдно за ваш грубо говоря backend который у вас там за плечами вот графики позволяют сделать вот такой вот красивой api а там уже как хотите правило 32 курсорчик делайте поля обязательными если данные в поле возвращается при любой ситуации звучит как-то смотрим что это такое не смотрим еще читаем помечая поля как тут ну при статическом анализе кода позволяют from тендерам делать меньше проверок тоже мало понятно сейчас будет немножко попонятнее первое что самым прикол бровки или с более низкими значениями когда вы возвращаете некий булин по то графе ел по натуре он лэйбл то все поля могут быть могут вернуть ну и когда мы их ставим тип boolean у нас с вами могут вернуться три состояния true falls in all вообще замечательно ну то есть когда мы объявляем их обязательными то все-таки true и false это конечно на порядок лучше такая же проблема с массивами то есть когда у нас есть просто там string массиве то есть аж целых три варианта передачи что это может быть массива значение массив из голов или там новый и на все это фронте нгер будет писать вагон и вов если он использует антип скрипт или flow type для того чтобы как бы сузить тип а если вы уверены что вы всегда возвращаете данные при любой ситуации даже если у вас сервис там отвалился то желательно вот поля делать уже обязательными данным пример мы взяли с вами поставили сказали что массив у нас обязательно соответственно кейс сократился до массива или массива ну love если мы поставили внутри значения что обязательно то есть массив значений или null ну а самый кучерявый вариант когда мы говорим что мы массив всегда возвращаем каких-то значений то есть это на порядок лучше так группируйте взаимосвязаны и поля вместе в новый output тип откуда это правило рождается например у нас при прилетела некая жалоба она может быть оставлено через телефон и там нам будет доступен оператор кода или через e-mail да когда у нас кто-то написал там заявку по письму ну то есть там никакого оператор кода не будет и вот в этом случае фронтиру тяжело понять что отображать как это вообще логика работает тупишь нам надо это всё дело разбивать то есть мы можем спокойно наш жалобу с вами сказать что у нас есть текст у нас есть с вами поля по телефону и поля по е-мейлу мы можем с вами соответственно создать новый тип который называет что описывает метаданные как у на когда он а жалоба приходит по телефону и сделать телефонный оператор код как обязательные поля то есть мы их вместе с кампана вали связали для емейлов можно сразу на будущее завести тоже тип как какой-то который будет отражать что у нас вот она жалоба прилетела по email это же правило можно перевести на использование union of типов но здесь я это не затрагивая здесь просто было важно показать что когда у вас набор вывода данных разнородные ну то есть какие-то палят какие-то могут быть сгруппированы не постесняйтесь группируйте их чтобы приложение ваша была более понятна франклин гиром бамс вот что это дает она облегчает восприятие связи между полями и позволяет на самом деле сделать схему более строгой это вот где мы навешивали на null поля ну то есть я их делал обязательными то есть без такой группировки у вас ничего не получится правило аргументов аргументы это те данные которые к нам прилетают от наших любимых фран тендеров необходимо группировать займа связанные аргументы вместе в новый input тип что это значит ну например у нас есть там long рейтинг мин лимит это все непонятно в чем то есть мы взяли разной разных типов поля накидали на верхнем уровне то желательно все таки скомпоновать то есть отдельно написать filter1 на лимит вот то есть мы взяли и аргументы фильтра выдернули в отдельные input тип вот группировка взаимосвязанных аргументов она вам облегчит во-первых опять-таки фронт энди рам восприятие между аргументами понять связи между ними позволит вам дальше в будущем спокойно расширять схему и не нарываться на breaking news правило 42 используйте true строгие скалярные типы для аргументов то есть используйте daytime например вместо с ринга ну тоесть опять мы устанавливаем некое время идти подольске лингу в каком формате куда что как когда у вас есть некий скалярная тип у него может быть описании к в каком формате вы принимаете дату и соответственно скалярный тип будет во лидировать входящие значения в общем говорящий типы круто что дают кастомные скаляры для аргументов единожды описать методы конвертации опять-таки и валидации фронте джером обеспечат ясность и позволяют уже компоненты управления вводом новые строить для воды вот этих вот dat то есть это правило практически очень похоже на то что было у нас old wood типами когда мы выводили данные с полями вот то есть аргументы необходимо помечать как ну если они обязательны для выполнения запроса либо вашей какой-то операции то есть нельзя запросить список статей например если не указан лимит мы взяли указали что лимит у нас обязательно но при этом мы можем сказать что у нас с вами лимит может иметь некое дефолтное значение 10 тогда клиент может мне возвращать эти значения вот но на сервере вот в резул в методах вам не надо тогда будет писать дополнительных проверок что присутствуют ли лимит в аргументах и ленин потому что граф кейл возьмет на себя обязательство проверить все входящие аргументы согласно той схемы которые вы описали то есть вам самим надо будет писать произвол с методах меньше кода вот ну и плюс на клиенте статический анализ просто-напросто будет кричать front энди рам о том что они что-то там в операцию не ввели даже если вы добавите новое поле и сделать его обязательным упр integer этом однозначно при статическом анализе что-то отвалится ему покажется что вот здесь вот теперь не передан такой the property и он вынужден будет вы передать то есть это позволит не доводить грех доран тайна правило списков для фильтрации списков использовать аргумент фильтр который содержит себе все доступные фильтры что это значит почему фильтр не в р-не кондишен не существует куча разных баз данных и сервисов которые могут как по-разному называть это поле ну и соответственно самое адекватное имя из всех экзотических бас я понимаю мне кажется это слово фильтр ну то есть это надо договориться представьте у вас три бы киндеры каждый пишет filter1 кондишен другой vr третьи вообще f 4 и получается фронте enter и когда будут ваши мафию пользоваться не горит там чего происходит они как договориться не могут поэтому вам по-любому надо говорится о том в какой аргумент вы будете все свои аргументы фильтрации за совы вать группируются все аргументы в какой-то тип article фильтр и как бы выноситься в отдельный тип для чего это необходимо вдруг вам приспичит сортировка лимита а все ты там язык курсор и и прочие добро чтобы осколки не пересекался между всяким этими делами это проще выделить отдельно на клиенте для статического анализа они получат там хорошие сгенерированы там например article фильтра интерфейс или тип то что используют для проверки фильтров и этот фильтр можно будет переиспользовать несколько раз то есть можно будет запросить из нескольких мест то есть когда одна и та же ну там уже другая rather функция будет но не суть то есть этот тип можно еще переиспользовать в других методах когда вы будете связывать какие-то коллекции между собой для сортировки списков используйте аргумент сорт не опять вспоминаем что у нас есть когда сортировка мы четко понимаем что мы должны жестко дать набор полей по которым мы сортируем набор условий вот опять таки надо договориться с именем имя сорту лучше слушать чем порядок и заказ варианты какие у нас могут быть да здесь что плохо когда sorts трин гай фронт эндер опять гадают ходят к вам на поклон спрашивают как сортировать что есть если вы передали просто какой-то input тип и передали что у нас вот есть поле а дальше есть порядок asko d с когда как вот там вверх-вниз сортируете это тоже плохо почему потому что иногда существуют вот такие фильдеперсовый сортировки от назад допустим поиск по тексту или там ближайшие по расстоянию то есть это уже не как не засунуть в поле и порядок на то есть в такой тип поэтому как бы лучше расписать и num айди с caddy диск текст мальчик ло засчитано порядок понятий если вы не хотите давать обратную сортировку в ее просто в этот и но мне добавить и то есть обратную сортировку с таким типом будет очень тяжело обеспечить наш любимый дорогой нам все спасает то есть он позволяет дать ограничено набор опять-таки статический анализ на сервере и нам ключ и диск можно конвертировать сразу то есть фронт интером отдавать адиос к у вас это может конвертироваться либо строку для вашего и склеила либо в объект для вашего то новость quello типа манги то есть у и нам типов есть конвертация видят одно свое красивое значение виде константы у вас на сервере она преобразуется в ваше серверное значение и вы сразу там в аргументах или в полях вот эти значения красиво видите уже сконвертированный ну и подходит для экзотических сортировок там текст матч возраст и прочее для ограничения возвращаем их элементов списке использовать аргументы лимит со значением по умолчанию skip все просто у нас есть какой-то лимит у нас с вами есть просто какой-то skip skip это обычно нет который можно указывать не указывать лимит чудо сестре это обязательное поле с значением по умолчанию в чем прикол если вы не поставите что это лимит обязательное поле the front in дыры могут извратиться и вам передать туда ну это вот железобетона то есть это есть у меня там тесты в моей репки что реально в лимит хоть он и антого на можно передать ну и у вас будет счастье на backed возможно чуть чуть там бег бег бег поломать то есть гров help валидацию не проверен не проводят новых значений если поле является необязательным ставьте его обязательным и null вам не страшен от фронт эндеров в аргументах для паги нации использовать аргументы php пейдж и плюс никакие поля anthems и пейдж инфа для чего для чего так все сложно почему сразу не массив сначала разбираем почему что в чем сложность у нас возвращается не сразу массив а возвращается поле items с набором статей и возвращается некий пэйдж инфа с какой-то по дженсен инфо который будут использоваться у вас во все эпохи нации из чего состоит p&g info это моя страсть это прям жуткая рекомендация чтобы было total white он стал пиджак пиджак пиджак с xps привел space то есть вот эти вот всякие отметочки грубо говоря проброс аргументов которые позволяют фронтиру очень легко и просто конструировать свои компоненты то есть вам практически это один раз надо написать функцию помогаешь q&a зато у from тендера не надо будет этот код копирование этих аргументов копировать по всем его компонентом то есть ему это будет уже на порядок легче реализовать и не только в этом проблема есть хороший узкий когда у вас есть не нормальный клиент с не нормальным интернетом он может в 50 раз щелкнуть по разным страницам за пять секунд и фронт эндер будет гадать что ему рендерит ну то есть он может у себя запомнить какие аргументы он прилетал но по факту что прилетит клиенту там на телефон либо на устройство неизвестно поэтому без поллитры и мета информации от вас как бы киндеров от сервера невозможно разобраться в реально какая по факту сейчас отрисовывается страница для бесконечных списков есть спецификация замечательный рилай курсор connection специфики ешь натто когда вы бесконечные списки делаете для граф hello выдуманной придуманная фейсбуком очень хорошее в принципе разобраться в ней не так сложно но она выглядит достаточно не очень она еще больше уровней добавляет данных то есть вы получите свои элементы только на третьем уровне плюс есть у курсоров если у вас приложение сеошная большие проблемы краулеры очень плохо работают с бесконечными списками ну то есть там надо вам будет городить что-то отдельно но зато бесконечные списки лишены проблемы оверхенд гантер федченко геноцид а когда что-то вначале удаляется либо активно добавляется то при переходе на следующую страницу вы видите новые элементы и не видите старый элемент ну то есть там pagination происходит по курсору то есть покажи мне после этого элемента покажи мне после этого элемента есть там не номер страницы используются а некий индификатор который с текущим фильтром с текущими условиями сортировки позволяет получить следующий набор элементов там вот посылки все читаете смотрите не имеет с постранично маркетинговые andere фитингом проблем об этом я сказал и листал к строится на курсоров то есть когда вы получаете какой-то элемент вам помимо самого элемента возвращаются курсор и при следующем запросе вы значение этого курсора будете просто передавать в аргумент автор таким образом там строится это постранично я листал к бамс самое интересное самое клевое это правило мутации это то что вызывает больше всего проблем и сколько я схем пересмотрел и вот мутациях реально самый дикий бардак потому что народ не знает как с ними работать если с выводом все как-то просто и народ с опытом реста айпи я все это дело нормально крутит то вот с мутациями там немножко вот все посложнее потому что все совсем по-новому секунду я готов и так самое интересное в мутациях можно использовать namespace типы группировать какие-то мутации в рамках одного типа это нигде нету ни спецификациях ничего этом двигаю только я на опять среднего размера количество мутаций может он легко быть там 50100 куча мутаций вот чтобы удобней было ковыряться фронтенда вам самим в этих мутациях начинают всякий конверсии по умолчанию типа давайте назовем как имя ресурса и потом будем делать action кредит или триумф чинче статус и прочие рекомендуют одни другие говорят давайте сначала будем писать cry 3 мв апдейт а потом имя ресурса я уже рекомендую сделать все попроще взяли мутацию взяли назвали имя ресурса и в него уже вложили набор каких-то действий то есть если у вас есть article вы можете в него сделать на нижний уровень вложить так сказать мутации то есть ortica у нас здесь будет выступать namespace им то есть там никакого особо кода нету как это выглядит схеме мы объявляем что у нас есть article mutations туда сделали например like on like бульон здесь есть подсветка есть то есть у нас начали есть некая мутация article мы говорим что она вот у нас article какой-то тип имеет объявляем этот тип артикул mutation что он из двух функций состоит из двух методов теперь используется магия на нам спейси мы просто берем оборачиваем говорим что возвращается пустой объект чтобы графики понял пустой объект это не пусто значит можно идти выполнять следующие операции которые вложены в типы артикул mutation и соответственно после вот этой великой магии уже для артикул mutation предоставить два метода вот эти лайк и on like который уже непосредственно будут выполнять этот код больно чьи-то льна детально читайте здесь для тех кто любит несколько мутаций в запросе отправлять там тоже читайте есть пример как основе с пейсами отправлять несколько мутаций в одной операции через алиасы сразу скажу смотрите читайте изучать то есть это на порядок упрощает ковыряния в вашем api у меня даже тройная вложенность вопи используется то есть у меня отдельная идут грубо говоря так сказать роли даже не рой но глобальные какие-то роли там или модули какие-то глобальные то есть админка с район кассио какие-то вещи там словари это все на верхнем уровне на внутреннем уровне у меня уже идет непосредственно сам ресурс на пире например съемка а уже в съемке внутри там с рэм организация то есть их там тоже на втором уровне достаточно много всяких ресурсов и вот например для сырым organizations у меня просто вот откуда получился cut то есть скорее table3 муфта есть три метода если бы я бы это все дело запихнул на верхнем уровне у меня было бы просто большую иди к api в котором было бы неудобно пользоваться но смысле пользоваться его документации его интроспекции 62 при написании мутации выходите за рамки круто создавать и логические операции над ресурсами то есть create апдейт пожалуйста оставляйте но добавьте like on like publish and publish то есть реальная операция чтобы фронт интер не гадал потому что через крут возможно еще ряд каких-то надо операций произвести для того чтобы изменить статус у записи то есть еще по соседству пойти чуть удалить или наоборот чего-нибудь создать поэтому желательно на объектах создавать всякие дополнительные методы потому что фронт интер слабо понимают то как у вас вообще какая у вас структура данных такие логические операции у вас есть то есть они быстро это все дело в это въезжают и у вас меньше спрашивать и сами они быстрее работают правило 63 рассмотрите возможность выполнения мутации сразу за несколькими элементами что это такое это меня иван гончаров подправлял в графе ели можно передать массив айтишников вот таким вот образом то есть когда вам надо несколько статей удалить или добавить мы можем их удалить вот через алиасы передав айдишники 155 ноты если вот будет и the front fender делать он будет вот так вот за этот писать запросы и будет это делать динамически то есть клиентка на клиентской стороне все запросы должны быть сбил построена на этапе билда то есть если вы их динамически строить то скорее всего вы делаете в 99 процентов вы делаете что-то неправильно есть один процент там всяких генераторов и отчетов где это правильно но это узкая вещи то есть у вас все запросы на клиентской стороне должны быть сбил жены в этапе билдом согласно спецификации мы можем объявить поле айдишник виде массива вот и при этом будет происходить прикольно магия для front эндеров он может передать массив как айдишники как массив и благодаря как вершину да то что он может привести семерочку спокойно к массиву ну то есть from the interest are и функционал будет поддерживать и новый это тоже прикольно для них удобно мутации должны быть четко описано все обязательные аргументы не должно быть вариантов либо либо то есть если мы с этим password и у нас есть два поля логин или e-mail то вот здесь вот все-таки завести две мутации не экономить у нас мутаций может быть сколько угодно и четко сказать что вот у нас есть логин обязательный и вот он у нас есть имэйл обязательно то есть мы четко должны говорить какие операции какие аргументы ожидают это позволяет опять-таки избегают непонятных ситуаций между front эндера мимби киндерами то есть быстрее въехать цифру тендеру схему отлавливать ошибки во время статического анализа опять-таки грех даром тайма не доводим мутации вкладывайте все перемены в один уникальный input тип то бишь у нас на верхнем уровне какая-то ерунда мы взяли это все дело обернули в один input тип для чего а тут даже еще такой пример для того чтобы на клиентской стороне можно было красиво писать запросы используя переменные то есть вот вот такая написание дублирования запросов на клиентской стороне оно чревато потом ошибками и большими переписка me а когда мы объявляем просто им пottep то здесь все красиво и чисто профит от единого input аргумента легче писать запросы у input типов можно запретить поля просто аргумент иди паркете поспеете нельзя на скоро добавят ну и на самом деле это инвестиция в будущее изменения вашего api то есть мутация правило следующая должна возвращать свой уникальный пайлот тип то есть не только уникальный тип принимать мой возвращать уникальный тип удачи вам смотрим сразу персону возвращать плохо лучше возвращать какой-то объект результатом то есть или резалт или пайлот как вам удобно но лучше всегда договариваться и соответственно когда у вас есть некий тип вы можете это поле суда добавить пилот тип как результат мутации позволяет в будущем вам опять таки спокойно расширять ваша api ну то есть не делать брики очень часто раньше вы просто пользователя возвращали а теперь вам приспичило частоту сметы информацию какую-то возвращать сразу сделаете объекта бёрку и будет вам счастье соответственно пошло 4 правилов по вот этим ответом в мутациях в ответе мутаций возвращаете измененный ресурс я его тоже выделю и его идиш ник как это выглядит когда у нас есть результат операции мы например создавали персону the record айди чтобы просто тупо получить один хищник новой созданной записи а просто рекорд это чтобы вернуть нашу персону эти имена лучше зафиксировать чтобы потом в других мутаций фронтенда быстро и ориентировались в ответе мутаций возвращайтесь статус операции для чего ну опять-таки все мы прекрасно знаем что в графике он не только ттп кодов и статусным позволяет как бы заполучить обратно этот функционал так то есть желательно чтобы она была и новом чтобы фиксированный набор и чтобы опять таки вашим фронт эндера все понимали следующее правило мне бомба правило в ответе мутации возвращайте полис типом к вере и я хочу еще правил парочку добавить что здесь было 666 но вот пока еще двух правил не хватает кто поможет и знает будут тем благодарен что за правило бомба когда вы в ответ мутации вы еще можете добавить поле к вере и фронт эндер сделав мутацию еще может опять-таки запросить весь ваш граф и получить там хоть пол дерево ну например мутация авторизации а потом в каире мы можем пробросить все дополнительные данные ну то есть вот прошел like поста потом через фрагменты до запросили еще полу нашего приложения провели 663 читаем по ссылочке провела 6 6 4 а у нас опять нету статус кодов нет ошибок ну добавьте поле ошибки чтобы можно было опять таки наши проблемы мониторить можно делать их массивом можно одним как вам удобно то есть и все ошибки становятся сразу типизированным и красивыми ну то есть это можно все уже на клиенте хорошо использовать плюс тут всякие интерфейсы читайте там по ссылочке можно посмотреть видео потому что это реально большая объемная целая статья по тому как работать с ошибками в графе ели быстренько правило типов у меня осталось 2 минуты надо завершатся самое важное то что я вчера рассказывал на докладе граф эл схема должна быть у вас волосатой волосатый граф kill эта схема у которой между типами очень много связей разница угров hello чем a300 концептуальном отличается то что логику связи утащили с фронтовиков на бы киндеров на тех ребят у которые отвечают за data domain свои связи прекрасно знают и могут построить оптимальные методы полке чинга этих данных сервера и не на сервере фон тендерам просто вытягивать нужны ресурсы вот так вот выглядит волосатая игра вклеил вот это api гитхаба то есть все типы между собой много связанных соответственно когда фронт эндер запрашивает данные он может из любого типа практически любой тип термин который имеет ну какую-то информацию там если есть комменты ookami to можно сразу достучаться до автора текущего commit а вот это кусочек лысого restful api этого страдают бы киндеры головного мозга которые бы киндеры rest api мозга которые просто берут и то же самое что у них было на месте повторяют в графике или расширяете свое сознание волосатый должен быть у вас граф kiel читайте про фрагмент и прочую штуку по ссылочке правило versio нирования схемы это еще у меня в работе я прорабатываю того чтобы эти правила создать наверно будет версия 3 где-то правила по бизнес-логики я тоже дорабатывать у меня в голове есть но я еще пока не готов о них рассказывать прочие правило тоже иван гончаров добавил это замечательное правило для документации используйте markdown просто и понятно по спецификации он поддерживать markdown для поля дискрипшн наши всякие график вы плейграунда альтаира в висе коды они это все спокойно поддерживают корректно отображает markdown послесловием все ли правила озвучены нифига не все только практика и боя можно этих разведать помогайте мне перечислить список правил можно поправить текущие добавить новые все доступно посылочки по request и еще я готов к общению глупому простому общению не готов а вот по существу и по делу всегда рад особенно рад пури квестом потому что все на всех времени и реально не хватает то есть давайте сделаем стандарт по дизайну граф kill вместе спасибо большое за внимание готов к вопросам группа в телеграме кому интересно граф человек презентация доступна по ссылке правило в виде статьи она большая объемная в печатном виде наверно страниц 30 и пишу про граф пел в этой репки вставьте звездочки заходите читаете выучит больше там все-таки для бы киндеров спасибо за доклад насчет ошибок в этом предложили возвращать polaris да это понимает и для бизнеса ошибок или там для валидации там я их называю проблемами то бишь это не та проблема что там у нас серию отвалился ли еще что то а это то что может фронт эндер у себя обработать то есть мы ему вернули не объект ошибки мы ему вернули скорее всего объект проблема который он может разрешите показать тот или иной интерфейс например вам необходимо оплатить или вам необходимо залогиниться или вам необходимо тото сделать но иначе нет смысла возвращать эту ошибку фронт интеру если он ее как-то не обрабатывает у себя чтобы отобразить какой-то интерфейс зачем нельзя пользоваться встроенным полем и раз который в корне crippled в городе его очень тяжело вы выпиливать если вы возвращаете список каких-то данных или у вас много операций по ним и реально очень тяжело бегать если вы его получили а вы его получаете на верхнем уровне его тяжело пробрасывать и он что самое главное статически не типизированный то есть вы не можете поле ошибки вы можете ее расширить и будут вам чак всякой чехарда возвращаться а здесь вы можете явно объявить ошибки добавить там поля о том что вам необходимо там зависит короче статью смотри там очень по нужна эта проблема разобрана читая это надо было сразу тебе туда отправить еще существует менее что есть какие-то зависимые поляну сущности и если там второй запрос резонатора упал то можно принципы вернуть корневое значение зависимой не возвращать чтобы хоть чет отобразилось ну окей есть основное преимущество граф крелл почему он лэйбл по умолчанию хоть что-то чувак да вернет 2 граф quello если какой-то миг райт бы сделали большие запросы какой-то микро сервис упала он позволяет вам вернуть часть дерева почему вот это все для этого сделана спасибо за доклад пример у вас был где жалоба была да там по телефону и по емейлу до ее двумя способами на почему не через наследование через union и я там рекомендовал через юноны решить можно еще через наследования но лучше через uni она очень важно было вам там показать что вывод типов надо сделать просто группами если у вас есть обязательные какие-то поляну чтобы frontera сегментировать потому что я не нашел более адекватного примера и он вот сейчас вот пример он спорит что можно и union и показать и input и показать пока мне не пришло в голову нормально как это отобразить и вот чтобы это вызвано плюнул на слайд потому что когда у меня там возвращаются какие-то формы или большие элементы вот там это хорошо работает но это не влезет на слайд с не нужен красивый компактный пример мне важно было показать о том чтобы открыть вам созданы для того что можно группировать исходящий данные от график сервера но нет спасибо за доклад я здесь вижу вот вопрос по ошибкам понятно что бизнеса вы и не должны быть уникальны и собственные а нельзя ли хата погоды вынести в отдельную как-то их прикопать потому что не скорее всего одинаковы для всех будут я их вынес в отдельную статью читать и смотреть или доз и можем дальше продолжить обсуждать их дискуссионной зоне если нет у других вопросов готов отвечать по ошибкам потому что ошибки это реально вот такая вот тема огромная и где есть отдельные доклады уже если нет вопросов обменяюсь вопрос спасибо за доклад и к сожалению не успел на начало и мне вопрос такой возник правила структурирования граф кори кода у вас как реализовано кстати есть нет какой статьях нет мы его генерируем поэтому там особо структурируется по тем моделям которые у нас уже существует есть у нас особо папочек отдельно скрафтил схемой нету то есть у нас написано модели а кучин и все это декораторами исходя уже эти из данных генерируется граф эл схема но иногда декораторов не хватает и я автор к библиотеке граф kill компост который потом позволяет эти типы модифицировать то есть допустим из мангустов ских моделей мы генерируем какие-то типы болванки они с генри ну а дальше я прохожу небольшим кодом который говорит отрезай поля паспорт отрезая поля такие-то эти данные оборачивая и вот эти вот генераторы белья модельку там мангустов скую сразу генри этом 50 типов 15 ризограф ну это что значит куда генерация и мне не надо это никогда руками писать если я в модели добавляя новые поля либо удаляю оно у меня автоматически напиться на схему то у меня один источник правда супер поэтому у меня нет проблем с тем как куда ложить файлы как с ними мучиться видимо на этом все если есть время готов про ошибку нас еще 4 минуты до давай повторим вопрос прошивку сейчас дадут микрофон ну в общем идея в том что вы не стиха ттп коды отдельно бизнесовые ошибки отдельно обри юзать этот ну это ты нам skype кодом и во всех ошибках которые случаются ну плохо это неплохо спасибо все равно до конца не понял вопроса немножко зажал мы попробуем ответить то есть я ошибки считаю именно не ошибками а проблемами которые можно на клиенте решить то есть если они повторяются дублированы их можно конечно вы носите делать общими если они эти ошибки уникальные в рамках этой операции то конечно вы создаете уникальный тип ошибки но я бы рекомендовал не экономить на типах не экономить на полях не экономить на обертках почему потому что чем больше оберток существуют в графике лапе тем вам легче будет добавлять какие-то поля и аргументы расширять менять добавлять типы без брекин чем часов для вашей схемы то есть ваша как вот фейсбуку удается там уже в течение пяти лет их негров кило пине versio не ровать вот из за того что у них кучу есть обёрток мы для как это нам проще чем проще тем лучше сразу возвращаем массив пользователь нельзя оберните через пилот вы всегда потом можете спокойно расширить все начинают мы для допустим создание пользователя использован user input нет ребят и для апдейта пользователя тоже используем user input тип когда создается нельзя для каждую операцию лучше сделать свой user input пусть да это будет схема пожирнее потолще все равно на клиентах она в runtime они используются она используется только на этапе разработки потому что там просто строки гоняются туда-обратно клиенте на клиенте нету схему на клиенте просто запрос и все и соответственно в будущем когда вы будете какие-то поля добавлять или ошибки создавать новые ошибки проблемы скажем так то они будут у вас уже красивого так вот вываливаться вашей схеме ну то есть вы всегда сможете расширять не ответил мы можем в дискуссионную еще так нормально говорит обманом нормой я просто плохо вижу вижу спасибо большое спасибо за доклад книжку кому за лучше вопрос так у нас все было у нас было проги не рад про генерация он это заставил меня рассказать про генерацию куда вам посмотреть в лучшую сторону направил всех нас я бы еще лотал книжку про ошибку если у нас дела двора и мы посмотрим не уверен значит одну книжку так они теперь так вас двое когда плане рика когда к нему слишком нужна книжка нужна книжка там 1"
}