{
  "video_id": "NIoTgkfBmy0",
  "channel": "HighLoadChannel",
  "title": "Продуктовая платформа исполнителей в Яндекс Go / Сергей Прийменко (Яндекс Go)",
  "views": 385,
  "duration": 2462,
  "published": "2024-04-17T01:10:18-07:00",
  "text": "Всем привет Меня зовут применко Сергей и спасибо что столь непонятное время вы пришли на мой доклад о чем я хочу сегодня вам рассказать Я хочу вам рассказать про продуктовую платформу исполнителей в Яндекс го о том как мы к ней пришли какой путь мы прошли И вот это вот все немножко о себе Я в индустрии 2016 года в основном всегда занимался бы конт разработкой работа в разных компаниях и в 2019 году попал в Яндекс попал в службу партнерских продуктов сначала преимущество занимался бэкендом для наших партнеров таксопарков а 2022 году мне досталась честь заниматься разработкой бэкенда про нашего мобильного приложения а именно его под форматизацией о чем будет мой доклад Я хочу рассказать вам что такое мобильное приложение Яндекс про Почему мы решили делать из него супер up что у нас из этого Получилось самом начале причем тут платформа И как мы ее дальше развиваем Яндекс про это приложение для исполнителей Скорее всего вы косвенно с этим приложением знакомы Когда вы Садитесь Такси Водитель принимает и завершает заказ в этом приложении когда к вам приезжают курьер еды или курьер доставки он также пользуется мобильным приложением Яндекс про даже люди которые меняют аккумулятор у самокатов Яндекс го также пользуются мобильным приложением яндекс.про но так было не всегда изначально я начну повествование 2019 года так как я пришел в компанию красивое это время изначально было водительское приложение таксометр это было приложение исключительно для водителей и мы делали для него бэкент наступили квидные времена в Яндексе стал активно развиваться у тех активно стало развиваться доставка и по темным причинам ребята решили что для своих исполнителей они также будут пользоваться таксометром в какой-то момент мы поняли что таксометр для курьеров еды доставки не совсем верное название сделали ребрендинг и стали называть наше приложение яндекс.про Ну и ребята на мобильной стороне стали чувствовать уже несколько дискомфорт от того что разные бизнесы заезжают приложения как попало и стали думать про под автоматизацию в 2022 году мы подхватили эту эстафету на бэкэнде стали думать о том что кажется нам нужно двигаться в эту сторону и начали завозить курьеров яндекс.маркета уже на нашей платформенное решение Яндекс курьеры яндекс.маркета тоже работают через Яндекс про немного чисел Яндекс про запущен более в 10 странах у нас более миллиона людей более миллиона активных пользователей десятки миллионов различных транзакций и сотни тысяч нагрузки на наш бытент что у нас на бэкенте у нас пока два основных языка это все плюс и питон все может на самом деле поменяться есть платная использовать и другие языки микросервисная архитектура более тысячи микросервисов такси в еде лавки доставки в парке большое многообразие баз данных и позже мозга и редис и войти заурус Яндекс и однородной технологический стек в такси ближайших нам бизнеса Зачем нам суперап Почему мы решили зачем-то пытаться делать супера для исполнителей Но прежде Давайте посмотрим на модели исполнителя будь Это таксист будь это курьер доставки Курьер лавки или даже человек который меняет аккумулятор самокатов у него в целом модель работы похожая это из точки А переместиться в точку б и совершить какую-то полезную работу да есть разные кастомизация на уровне роутинга на уровне каких-то деталей На каком транспорте он перемещается кого он собой везет Да это все конечно есть но модель на наш взгляд довольно таки общая и тут явно можно думать про переиспользование Ну и конечно же если бизнес это не интересно то движение в эту сторону не будет но и бизнесу тут на самом деле очень сильно интересно потому что это и сокращение кастов разработки и более быстрые запуски бизнеса пере использование каких-то готовых компоненты решений Да и в целом Мы хотим двигаться в сторону того чтобы более эффективно пользоваться временем исполнителей помогать бизнесом с заказами и кажется это легче делать если мы будем использовать Общее решение Почему мы выбрали именно таксометр в кандидата про суперап потому что на самом деле просто был самый зрелый из представителей самым богатым бэкендом и сам бака до фронтендом на тот момент времени Ну в общем поехали Давайте сначала подумаем А что вообще нужно для минимального представления работы исполнителя мы должны каким-то образом научиться исполнителя профиль исполнителя в нашем бэкенде создавать это даже не обязательно должны быть какие-то сложные это может быть просто напросто скрипт который мы каким-то образом наполняем нашу базу данных далее мы должны пользователи научить авторизовывать нашу системе чтобы Мы понимали что это за человек далее научить наш сервис отправлять некоторые полезные задачки исполнителю Ну и вести его по жизненному циклу этой задачи в общем некоторые такой конечно автомат где мы перемещаем его статуса в статус и соответственно даем возможность эту полезную работу совершить давайте рассмотрим как мы затаскивали курьеров логистики курьеров еды в лоб при самой наша первая интеграции логистика стала рождаться внутри Яндекс.Такси поэтому по сути она стала из коробки при использовать наши микросервисы с какой-то кастомизацией и для доставки на самом деле просто взяли нашу базу профиль водителя добавили туда новые свойства и получили из нашей базы профили водителя Теперь базу и профиль и водителей и профили курьера Как вы видите стали в базу добавляться интересный параметры которые к водителю никак не относятся например термосумки стали появляться какие-то интересные нейминги виде такси волки курьер и до сих пор на самом деле Да вызывается вопросом что это означает Но так или иначе у нас появились такие интересные новые свойства в базе далее путь был немного другой у Яндекс Поэтому нам нужно было два бэкента подружить мы пошли опять же самым простым способом написали сервис синхронизации который асинхронно берет данные из базы из базы профиля еды и Стинг их в нашу базу Почему синхронизация получилась двусторонней потому что разные параметры разные маппинги также нужно было прокидывать бэканд еды например когда мы переключали приложение переключали пользователь с приложения едового на приложение прошлое мы это делали на своей стороне и поэтому флажочек как в какое приложение можно логинить пользователя отправляли с нашего бэкенда далее авторизация логин Давайте Сначала посмотрим как выглядит наша схема работы мобилки и бренда У нас есть некоторые опеки твои которые выполняют две функции давайте начнем с первой функции это обычный роутинг запросов в нашем микросервисы наши стримы дальше у нас есть сервис вагин который много фазовый многоступенчатый но если сильно деваться в детали он делает следующее когда пользователь хочет залогиниться какой-то профиль мы собираем контекст этого профиля из сервиса профиля водителей и уже курьеров далее идем сервис авторизацией создаем некоторую сессию кладем ее в редис идентификатор далее когда мы пользователь авторизовался и шлетом авторизованные запросы мы пойдентификатору этой сессии проверяем что у нас есть фрейдисе достаем оттуда контекст и вот тут как раз вторая функция bigdware авторизационная и такое некоторые мидовера который дополняет запрос различным заголовками различным параметрами содержащими контекст профиля и отправляет его на дальнейший бэкэнда что нам потребовалось сделать для еды чтобы не ломать их авторизацию они нам сказали Нам нужен обязательно заголовках нашей айтишник наш внутренний айдишник профиля Ледового и поэтому мы пошли самым простым путем на наш взгляд добавили в сессию едовые хайдишники так как мы все раз профилей водители курьеров и до курьера за синкли мы можем добавить в сессию Ну естественно дальнейший курьера доставлять Ну и вообще всем бокам которые таддишник нужен Да конечно Тут есть некоторые протекание абстракции Вроде такая сессия водительская изначально такого общего назначения тут уже появились курьеров ну ладно В целом это было сделать не сложно и мы сделали так далее цикл заказа Я осознанно не буду на нем сильно останавливаться потому что кажется он цикл заказа Это довольно таки сложные вещи про него можно в целом рассказывать свою доклад остановлюсь примерно на таких общих концепциях и общих таких группах сервисов изначально логистика и потом еда переиспользовали местами цикла заказа такси у нас было есть до сих пор группа сервисов водительского цикла заказа и мы стали думать стоит ли нам горячивать логику для курьеров еды курьеров логистики в эти сервисы либо же все-таки тут сделать некоторую такую уже изоляцию и написать отдельную микросервисами так как у нас есть за которым легко можно добавлять новые микро сервисы мы явно выделили всего двойку связанную с курьерским заказы в отдельный микросервисы Ну а на мобильном приложении рядом с модулем заказы было написано расширение которое ходит в дополнительные бэкенты когда понимаешь что это заказ курьера еды или курьера логистики Ну и собственно произошла некоторая адаптация от цикла заказа у курьеров появились дополнительные статусы например после точки А появился статус посылка получена и это опять же происходит мимо нашего бэкенда и мимо нашего цикла заказа за это отвечает отдельные микросервисы курьерские Итого что мы сделали чтобы затащить курьеров еды и курьеров логистики в мобильное приложение Pro мы адаптировали часть наших микросервисов добавив в нужные сервисы логику работы с курьерами Ну а дополнительную логику стали дописывать сторонними микросервисами в зоне ответственности уже ребят и подключать их за пиги твои Ну вроде бы не очень сложная Задачка наверное большая Ну если ее делать Просто делается никакого Rockets Ну и вот у нас появились курьеры еды про и вот вы видите экраны принятие заказа еды и курьеры доставки что же пошло не так из-за того что мы явно старались бежать быстро и делать недорогие решения у нас стало страдать качество став накапливаться тех долг в чем он стал проявляться Ну во-первых у нас появилась мультипликативная сложность разработки Она состоит из разных причин я выделяю для себя следующее фейковая сущности у нас бэкенди стала появляться очень много фейковых сущностей и Одна из таких сущностей это Ровер на велосипеде далее мы стали делать фейковые водительское удостоверение стали делать фейковые машины для пеших курьеров и вот это фейковая стала распространяться неизбежно по нашему где-то фейку сделалось осознанно где-то неосознанно но так или иначе это сильно усложняет логику это сильно добавляет много новых горных кейсов которые нужно учитывать системе второе не все сервисы из коробки готовы работать с новыми сущностями и у нас тут тоже стали периодически стрелять проблемы например по какой-то причине из-за того что там что-то забыли сконфигурировать или где-то забыли смотреть на какие-то параметры у нас на токсичный заказ стали приезжать почему-то велокурьеры почему-то эти Заказы стали на них назначаться или же другой пример у нас есть система которая пробивает чеки за заказ таксиста у нас автоматически стали попадать курьеры логистики и мы стали пребывать им чеки Хотя не были готовы по умолчанию эти чеки пробивать следующая проблема нас сильная функциональная связность Давайте еще раз помним про сервис профилей водителя он изначально токсичный он явно взаимодействует с циком заказа такси с критиковоротайм сервисами такси появилась доставка со своим циклом заказа своим критик warntime сервисами И она тоже зависит от профилей водителей и курьеров далее У нас еще есть десяток сервисов внутренних токсичных которые как-то с этим сервисом взаимодействует есть еще десяток сервисов каких-то других бизнесов которые по тем или причинам входят в сервис водителей Как вы думаете насколько нам легко поддерживать нужно чтобы цикл заказа такси и цикл заказа доставки не ломался на самом деле сложновато Почему Какая нагрузка у нас на сервис нагрузка на сервис у нас порядка 23-24 тысяч РПС и пока наверное 80 процентов этой нагрузки у нас идет от такси нам это не так больно потому что это наша сервисы наши квоты мы сами все этим управляем Но это пока бизнес активно развиваются бизнеса активно заезжают постепенно процент трафика от других бизнесов таксишный сервис будет увеличиваться далее стабильность Почему нам сложно поддерживать стабильность Но вот Представьте что мы учились с менее зависеть от цикла заказа такси придумывали различные фаф бэйки грейсового деградашн В общем сделали все чтобы цикла заказа такси не ломать и вот мы решили провести хардкорное учение Мы решили наш сервис вроде полностью выключить и посмотреть что же происходит что же происходит с циком заказа такси но мы это сделать не можем Почему Потому что есть прямая зависимость логистикой и мы понимаем что если мы сейчас начнем такие хардкорные учения у нас ломается серость логистики а Наверное нам не хотелось чтобы на час на два полностью недоступен мы идем к ребятам сервиса логистики и должны проходить такой же путь который проходили с ребятами сервис такси Но это явно усложняет процесс Это явно требует много ресурсов времени и мешает нам учиться еще какая проблема из-за того что сервис профилей водителей и теперь уже курьеров стал многообразным в нем стало появляться очень много различных интерфейсов причем некоторые интерфейсы примерно про одно и то же с каким-то с какими-то нюансами войки и разобраться чем and Point для смены водительского удостоверения такси отличается от поинта смена водительского удостоверения курьеров доставки становится таким что нам нужно просто идти читать код сравнивать запоминать детали и постоянно держать в голове еще одна проблема слабо изоляция данных так как мы когда проектировали сервис профили такси никогда не думали о том что он будет превращаться в сервис профилей водителей курьеров мы никакую изоляцию и в сервисе в базе данных не делали и соответственно у нас любой тех кто любой баг в такси Может случайно покарать данные логистики и поломать жизнь случайно запущенный скрипт неправильно может поломать как курьеров так и таксистов и в общем мы тут живем на некоторые тайм-бомбе которая периодически у нас взрывается в тех или иных местах Итого у нас разработка в ряде сервисов где мы делали вот эти модификации сильно усложнилась теперь нам нужно экспертиза ни одной команды а нескольких команд и в целом нам сложно гарантировать какой-то uptime Сложно поддерживать доступность Потому что есть Вот таких миллион кейсов которые нужно учитывать И тут я считаю как раз началось веха начало под форматизации где мы решили остановиться и все-таки подумать А как же нам с этими проблемами жить ведь новые бизнесы приходят проблем увеличивают проблему увеличиваются решение нужно явно придумывать мы начали примерно следующего как всегда Если у вас есть какая-то проблема придумать абстракцию на свой выше и мы пошли таким же путем Мы подумали Так ну вот у нас есть сложная сущность водителя курьера Давайте введем исполнителя которого который будет маленьким простым не будет содержать каких-то частных деталей конкретных бизнесов и все общие сервисы будут работать с этой сущностью а далее другая проблема что мы явно понимали что платформа это делать мы не будем с нуля мы не будем писать несколько лет все эти микросервисы которые есть такси но явно хотим использовать такси но не хотим показывать кишочки такси наружу мы бы хотели сделать какой-то вот каркас прятать реализацию за интерфейсом и соответственно дальше аккуратно эти таксишные компоненты обобщать и делать платформенными и общими и тут самым похожие налоги на мой взгляд взаимодействия мобильного приложения мобильное приложение не знает зачастую Какие бы кэнды в нашей системе находят Она работает с некоторыми точкой входа которая каким-то образом ротит запросы А почему нам на попробовать пойти таким же путем далее Когда у нас сформировалось какое-то понимание В какую сторону Мы хотим двигаться Мы подумали Какие требования к платформе Мы хотим предоставить вот как мы себя хотим ограничить и какие свойства платформы должны быть в общем свойства тут целом все стандартные этого унификация общие компоненты которые можно переиспользовать это изоляция потому что мы явно не хотим чтобы один бизнес мог тем или иным образом за эффект другой бизнес и с точки зрения функциональной связности с точки зрения данных с точки зрения каких-то процессов далее Мы подумали что обязательно нужно иметь возможность кастомизации как я уже говорил модель у бизнеса всех похожая но есть какие-то нюансы эти нюансы могут быть даже там на уровне каких-то текстов где мы общаемся с нашим исполнителем одним образом курьеры Яндекс всегда общается своими курьерами другим образом Ну и зиру Кост это про то что подключение к платформе должно быть достаточно дешевым чтобы бизнесом которая с нами работают было просто и они от этого не страдали из того что используют платформенные компоненты далее когда мы думали про вот эти все проблемы мы задались вопросом Неужели Никто с этой проблемой в мире не сталкивался Вот наверное есть какие-то примеры можем какой-то опыт переиспользовать И на самом деле uber 2018 году столкнулся с похожими проблемами Ну в целом наши коллеги зубера со своей бизнес-модели тоже сильно нас похоже поэтому мы решили посмотреть А что же они предлагают они предлагают следующий подход доменные ориентированный подход к микросервисам основная мысль вы докладе что давайте мы сгруппируем логические сервисы логически связанные между собой сервисов домены а потом эти домены разложим по слоям причем свои у нас будут идти от частного к общему Что из себя представляет домен это набор связанных сервисов которые имеют единую точку входа собственно то что мы тоже хотели делать единая точка входа getway который делает общение между двумя доменами как черные ящики тут такое некоторые получается Возврат к монолиту где у нас есть какой-то домен с какой-то логикой и два домена ничего не знают про свои внутренности про свои внутренние микросервис и как они друг другу общаются с точки зрения убера они предоставили вот такое разбиение на свои нам это показалось довольно релевантно вчера Вот например было очень много докладов про базы данных Они как раз находится в системе убера на четвертых на пятых слоях уже более низкая низкоуровневая инфраструктура я буду концентрироваться на третьем кубике на кубике бизнес-платформы и вот когда мы посмотрели на эти свои У нас как раз пришло понимание что Ну вот мы все в продукт таксишный затаскивали А токсичный продукт не готов Ну как с арматура конечно готов но по умолчанию из коробки не готов работать с другими бизнесами и из-за этого у нас стали вот стрелять такие проблемы Давайте попробуем продукт такси продукт доставки еды оставить свой продукт а общий компоненты развивать более низкого свой бизнес платформы который ничего не должен знать про какие-то про особенно сти должны быть достаточно общими и наша целевая картина нашего развязка всех проблем по сути стало такое что мы хотим Вот это сложно домен даже с непонятными границами водителя курьера развязать сделать циклу заказа такси с работой таксистами в продуктовом свою цикл заказа логистики с профилем курьеров логистики оставить продуктом свою бизнеса доставки Ну а в своей бизнес-платформ создать как раз вот домен исполнителя с общими сущностями с общими компонентами и отдельно от продукта и развивать и как раз первый потребитель у нас был Яндекс Маркет Мы решили что мы выделим в платформу два кубика это профиль создание профиля авторизацию а цикл заказа оставил вне кадры Почему Потому что заказа очень сложно на самом деле мы не понимали как его под фрагматизировать он сущность заказов всех разные процессы в цикле заказы У всех разные Для всех это критично поняли что не готовы тут что-то предложить полезное создали наш домен платформенный с небольшим количеством кубиков на самом старте создали так называемый сервис прогитвей которые будут единая точка входа оставили сервисы создали сервис исполнителя абстрактный и взяли сервиса авторизации которые собственно дает возможность авторизовываться в агентство мобильное приложение git вы сразу нам дал кучу плюсов из игры в интерфейсы Искры детали реализации за интерфейсом и дал нам возможность явно предоставлять Какие фичи доступны в платформе Потому что раньше это выглядело хаотично и люди просто смотрели перебирали все микросервисы смотрели на схемы и думали о вот эта фича мне подходит я буду её использовать Хотя не факт что они разобрались и используют её правильно Ну и дальше Мы научились аутентифицировать наших потребителей научились конфигурировать для них платформу вот и это дало нам большой Boost с профилями мы хотели конечно сделать так мы хотели явно всех из нашей базы токсично выселить оставить в контуры такси создать контур для Маркета свой для логистики свой сделать абстрактный сервис абстрактной базой исполнителей Но конечно же в один предстоит мы это делать не могли распиливать базы распиливать зависимости которые выросли за два года над этим базами это довольно-таки сложная задача Мы не хотели блокировать Маркет на наверное год разработки поэтому мы опять же воспользовались преимуществом гитлея про гитлея спрятали детали реализации по созданию исполнителя за ним все также стали создавать курьерский профиль собрали вот минимальный набор данных все также создавали курьерский профиль в базе таксишный Ну и все детали что еще нужно создать минимальным комплекте для профиля тоже от Маркета скрыли это какие-то сервисы тегов И на самом деле еще набор некоторых деталей внутренних а что с авторизацией с авторизацией на самом деле мне много что сделали с наше первое версии единственно сделали Новый сервис профессии лойку по работе по кастомизации вагина группировка вынесли вот эти все связки вынесли все раз профессией и теперь сервис профессии у нас помогает определить В какой модуль исполнителя нужно загрузить на мобильное приложение и куда вводить куда исполнители нужно залогинить Что такое вообще модуль исполнителя а модуль исполнитель это термин как раз на мобилки и платформа на мобильном приложении выглядит примерно так тут есть много всяких деталей можно сконцентрироваться на следующем есть платформа я их про такая компонента которая содержит как раз себе общий модули которые можно использовать разные модули исполнителя в красном мы видим модуль исполнителя которые друг от друга изолированы которые запускаются изолированная приводении взаимоисключающим способом таким образом чтобы код одного модуля исполнителя не мог никак зафиксить код другого исполнителя Ну и финальная картина у нас получилось примерно такая на мобильном приложении есть компонента платформы с общими модулями есть разные модули исполнителя которые взаимодействуют со своими бэкэндами а платформенный платформенный компоненты платформенные модули взаимодействуют с платформамик-эндом минимальную платформу для Маркета мы сделали то есть основная часть у Маркета была запрограммировать модуль исполнителя поддержать свой бэкенд для данного модуля и тут же вы меня спросите Ну а зачем заезжать в Pro если как бы куча работ надо сделать мобильное приложение очень много на мобильном приложении подписать на другом языке и конечно же мы как платформа должны расти конечно же мы должны развивать новые фичи и последние Моя тема А как платформе попадает новый есть разные способы я рассмотрю наверное наиболее интересное когда мы какую-то частную фичу хотим подфартизировать хотим дать возможность ее переиспользовать и как вот наш путь проходит на примере нашего заработка но детский заработок стали превращать в заработок заработок исполнителя и сделали некоторые фреймворк который позволяет бизнесам более просто делать свой заработок для конкретного модуля исполнителя Как выглядел заработок для такси но опять же достаточно минимальная модель у нас есть сервис заработка Он общается с сервисами биллинга Он общается с сервисом заказов такси транзакции Беринга джоннит заказами такси и мобильном приложении показывает вот водитель вот водитель Смотри ты совершил такой заказ в нем есть какие-то транзакции ты получил столько-то Ты должен получить столько-то рублей на самом деле у нас в такси уже стали появляться тут проблемки что А вот есть персубсидии субсидии к заказу никак не относится например там какие-то геосубсидии которые мы водителю Как сервис субсидируем и хотим его заработки отображать сервис заказов это уже не особо положить Ну давайте как вариант добавим в сервис заработка еще один синхронный поход в сервис субсидий и будем еще оттуда брать эти сущности как-то их объединять транзакциями биллинга но такой подход плохо масштабируется потому что у нас появится еще какие-то сервисы будут добавляться еще какое-то количество синхронных вызовов и в целом который отвечает за пока заработка будет уменьшаться потому что будет переумножаться на всех нижележащих сервисов либо нужно придумать какие-то интересные фалбеки которые опять же усложняют жизнь Мы подумали давайте мы немножко развернём нашу архитектуру сделаем некоторые сервис бизнес событий куда мы поставляет заказы куда будем поставлять субсидии и какие-то другие события которые в нашей системе могут появляться А дальше сделаем некоторые конфигурируемый Flow работы обвинения транзакций с событиями Ну и несмотря на эту картинку Мы подумали Но нам же осталось совсем маленький шажок Мы же можем сказать Теперь бизнесом поставляйте в нас события определенным образом поставляете нас поставляйте в биллинг транзакции добавляя туда идентификатор события берите конфиг который мы как Framework подготовили для бизнесов конфигурируйте Как ваше событие должны группироваться с транзакциями в Какие категории должны все превращаться и платформенный заработок в целом готов и выглядит он примерно так это для лавки это платформенный заработок для такси еще один нюанс видите детализация события такси и детализация события лавки довольно сильно отличается мы явно и не хотели и наверное не можем взять сделать какой-то платформенное решение для детализации события поэтому как раз вспомнили про пункт кастомизации сказали а давайте в события будете совать deeplink на за который отвечаете вы сами с точки зрения бэкенда с точки зрения фронтенда и ту детализацию которую вы хотите показывать водителя или курьеру с картой с каким-то количеством транзакций вы будете делать сами Итого мы до сих пор продолжаем развивать нашу платформу добавляя все больше больше различных компонент У нас появился Messenger Ну что значит мессенджер Мы подумали что есть в Яндексе Яндекс мессенджер А давайте мы Яндекс мессенджер как инфраструктуру будем использовать и поверх него напишем обвязку чтобы использовать наши мобильное приложение и собственно это сделали какие выводы Можно отсюда извлечь Ну во-первых развивать стихи на суперап Это довольно-таки непростая задача она непростая задача не в моменте она не простая Задача В перспективе потому что вот этими сложными сущностями вам придется жить вам придется как-то поддерживать uptime и это все явно будет ухудшать ваш сервис явно какие-то общие компоненты стоит развивать отдельно от продукта большое количество микросервисов Что опять же контролировать связанность между ними стоит выделять в некоторые домены и инкапсулировать детали реализации за этим доменом ну а сложные какие-то бизнес домены которые в платформу либо не готовы зайти либо никогда не заходить не будут Лучше развивать отдельно и даже где-то допускать дублирование чем протекание абстракции конечно же все так или иначе пытаются этот пункт забывать и мы в том числе в такси иногда тоже так делаем но надо помнить что если вы это делаете осознанно в долгую вам будет сложно и нужно будет обязательно думать как Либо превращать сервис в какой-то сервис общего назначения Ну либо как с этим проблемы жить и не болеть извиняюсь Спасибо 1 1 Сергей Большое спасибо за классный доклад очень такая получилась сочная ретроспектива разработки большого приложения вот Давайте приступим к вопросам давайте я прошу время не очень много осталось вопросов покороче формулировки поточнее и по одному вопросу человека пожалуйста Сергей спасибо за интересный доклад вопрос следующего толка рядом с Темой вы перешли на доменную разработку Как у вас сопровождение организовано тоже по доменам сопровождение что имеется ввиду у вас есть сервисы сервисы насколько понимаю разрабатывают команды разработки в рамках домена как они сопровождаются мы только недавно стали в эту сторону двигаться вот стали Ну в общем пытаться выделять домены и формировать команды вокруг этого домена вот так чтобы не было жареной области где за один домен отвечает разные команды вот Ну в целом таким подходом идем Спасибо пожалуйста Спасибо за доклад подскажите пожалуйста вот действительно пошли в доменную Ну ddd условно говоря Да но не только там разбиение на контексте в DD А еще доменные события Вот вы как бы сделали бизнес события планируете выйти в доменные события как вот в эту сторону собираетесь развиваться то есть вас там куча онлайн взаимодействий вам от этого больно вроде события это решают просто ответ да мы в эту сторону активно развиваемся Вот это на самом деле и в такси уже была Ну больная тема вот поэтому даже не в рамках платформы А в рамках там такси мы в эту сторону активно двигаемся и всякие я тут не стал об этом говорить чтобы не усложнять свой доклад но обрабатывает сторону ведутся Здорово еще так Окей тогда если вопросов из зала больше нет вижу Давайте Спасибо за доклад меня больше такой философский вопрос но иногда возникает проблема что это слишком сложно и может есть какие-то правила Как понять Стоит ли делать Это хороший вопрос на него ответ наверное такой процесс на нас Мы стараемся прежде чем что-то потратизировать собрать обратную связь с наших клиентов и Понять насколько это отвечаем нужно насколько она у них болит И насколько им с точки зрения техники это фичай будет удобно пользоваться если мы сделаем Готовое решение дальше соответственно получая какой-то фидбэк во-первых приоритизируем насколько это сильно болит это сколько это скоро надо делать а во-вторых понимаем Нужно ли в эту сторону идти или нет Вот с платформенным заработком примерно похожая история так как мы в такси достаточно много получили экспертизы развивая наше приложение денежной экспертизы работать с биллингом мы стали предлагать другим бизнесом сказали вот мы можем за вас подумать о ряде вещей и предоставить вам Готовое решение Будет ли Вам мог или не будет кастомизация на вашей стороне Ну и в общем собрали фидбэк что все только за И им это нравится вот примерно как-то так Спасибо значит кто не успел сейчас задать вопрос и находятся здесь Сергей ответит в кулуарах дискуссионной зоне те кто смотрит в онлайне задавайте вопросы в чатик голосуйте за доклад Сергея теперь самое важное Сергей Два лучших вопроса один подарок от он типа другой от Яндекс Я думаю машинка отправляется про вопрос философский вопрос Как поддерживать компоненты Ну и вот вопрос про поддержку мне тоже понравился отлично супер И последнее Давайте ещё расскажем Сергея Спасибо И спасибо Два подарка Сергею подарок от Лунтика и подарок от Группы компаний ВК колонка Маруся быть с кем поговорить"
}