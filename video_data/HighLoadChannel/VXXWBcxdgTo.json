{
  "video_id": "VXXWBcxdgTo",
  "channel": "HighLoadChannel",
  "title": "Экскурсия в бэкенд Интернета вещей / Владимир Плизга (Tibbo Systems)",
  "views": 680,
  "duration": 2641,
  "published": "2023-01-19T05:55:16-08:00",
  "text": "спасибо за то что представил меня не остается лишь добавить что моя нехитрой карьерная лестница так складывалась что первые несколько лет я занимался почти классической enterprise разработкой на джая с микро сервисами спринга губерн эти самые со всеми вытекающими от сюда последствиями а потом переметнулся в область совершенно другую в интернет вещей тот самый аютии или для краткости а-j интернету сфинкс где будучи в коем смысле новичок открыл для себя довольно много интересных необычных как мне кажется кейсов применения некоторыми из которых с технической точки зрения я хотел бы с вами как раз поделиться таким образом попытавшись помочь вам как-то систематизировать отчасти то что вы быть может уже знали об этой области поскольку я занимаюсь разработкой там бэг-энда некая юте платформе что это такое чуть чуть попозже попытаюсь рассказать а то и примеры которые здесь буду приводить в большинстве своем будут сделаны как раз на базе вот этой самой и о платформе называется она ogre gate но мы периодически будем оглядываться и на другие кейси поскольку область у нас очень широкое большая пытаться построить какое-то хоть сколько-нибудь исчерпывающей план для 30 минутного доклада практически бессмысленно поэтому мы попытаемся просто обозреть сверху лишь некоторые кейсы так как мы будем в ком-то смысле слоняться между вольерами такого условного зоопарка там девица разным жирности мы тут же отходить к следующему и сконцентрируемся на той части интернета вещей которые принято называть индастриал интернет of tanks то есть промышленный интернет вещей именно там находятся наиболее необычные кейсы применение ну и попутно чтобы все-таки придать какую-то систематичность этому изложению мы попытаемся ответить по ходу дела на вопрос а что это вообще за класс продуктов такой aiuti платформы или ее от платформы сокращена и чтобы сформировать вот это определение и понимание будем по ходу дела заполнять вот такой вот серый бублик различными свойствами или качествами которые должна которыми должна обладать aiuti платформа как программный продукт чтобы соответствовать самым у этого название итак погнали в первый кейс как вы понимаете чтобы с точки зрения бэг-энда обозреть такие вещи нам нужно быть там закопаться в некоторые технические детали поэтому предлагаю больше время норк часть не тянуть а сразу к этим техническим деталям и приступить поехали знакомьтесь это корова мая очень интересная особа послушная отзывчивое очень умная всегда возвращается во время как ни странно любит детей в общем любовь и мечта любого пастуха ну и как нетрудно догадаться в любого пастуха будь то человек который там свое какое-то маленькое хозяйства держит или работает она большого и ферме у него таких мелочах c life учат и если это все таки небольшое хозяйство то он хотя бы знает их по именам а если это промышленное хозяйство то в общем случае там начинается просто некоторое множество нумерованных объектов не принципиальны к как они там именно называются я уж не говорю про фотки но независимо от масштаба сами задачи пастуха примерно одни и те же имеется ввиду задачи ежедневные в развитии одного дня ему нужно утром всех собрать где бы они там ни дислоцировались в течение ночи затем во время прогулки никого не потерять они как правило выгуливаю ться на огромных площадях и могут произвольно расходиться по огромной территории и вечером точно также всех во время собрать и увести их обратно ну кстати да маленькой оговорочка в каком-то смысле это частный случай задачи которая в промышленность работать флит менеджмент управление флотом только под флотом обычно подразумевается парк автомашин или корабли или чего то еще но у нас такой несколько особый случай но тем не менее подпадающие так вот в принципе эта задача как вы наверняка догадываетесь уже успешно решается не один век решается с помощью колокольчиком клочков уж и она ходит это жрет звенит и и так можно найти и позвать обратно но цифровая трансформация пришла даже в эту консервативную область и теперь место колокольчика назвали выходок промышленных коровах есть вот такие вот устройство таких малепусенький коробочки если посмотреть на них поближе там видны их тактико-технические характеристики называются эти коробочки трекеры двигательной активности крупного рогатого скота они содержат себе как минимум два таких ну почти независимых устройства во первых это gps датчик gps глонасс и китайская там какая-то система забыл как называется поддерживается а во-вторых акселерометр акселерометр внутри такой штуки нужен для того чтобы детектировать паттерны движения головы коровки и на основе этого присылать пастуху различные сигналы ну например если среднее активность животного снизилась это может быть признаком того что оно заболевает если активность пропала совсем возможно начался падёж скота а если например акселерометр зафиксировал прыжок как ты думай как вы думаете что это может значить упал а может быть нет сбежал и прыгнул ну это будет затяжной прыжок нет там коротенькие детектируются еще варианты есть испугалась нет падает но нет она же обычно в горизонтали близко и не услышал украли нет самый близкий вариант размножается это признак готовности к оплодотворению оказывает вот это датчик умеет это определять отправить его виде доклад только начался вы уже учетом новое для себя узнали царят не совсем проберемся сейчас не сразу а этот датчик умеет передавать собираемые данные по бесправного протоколу лора ван ло rowan расшифрует как long-range вейдер and work если очень упрощенно там те кто знает что смогут меня гнилыми помидорами закидать но очень упрощенная это технология и протокол передачи который бьет дальше чем обычный вай фай но все-таки поменьше чем джесса но соответственно не требует там сим-карт и вот этого всего всех заморочек но в чистом виде потреблять его на бы коньки нельзя а я напоминаю и мы сегодня собираемся не только про коров новые проблемы поговорить поэтому нам нужен ещё какой-то узел который будет собирать эти данные и собственно поднимать их на более высокий уровень сетевого протокола таким узлом является так называемый концентраторы или шлюзы или по-русски чаще всего называют просто базовые станции эти базовые станции собирают данные от множества устройств у нас я напоминаю целый парк флот и представляют из себя а прошу прощение обычно просто не небольшие коробочки с установленным на них линуксом предустановленным производителям и собирающим данный полу равана а потом транслирующие в некоторые уже прикладной протокол так вот на примере двух aiuti платформ нашей игре gate и американский sensors могу рассказать что на бэг-энде это реализовано примерно так в качестве платформы и языка выбрана java просто чтобы обеспечить максимальную переносимость и способность развертываться в разных окружениях в качестве подхода по собиранию данную вы выбран publishers а скрайбер просто чтобы не палить устройство постоянно не спрашивать ну что ты там где ты там там перешла на новую позицию или нет чтобы не сажать его батарейку и не занимать сетевой трафик зазря а в качестве прикладного протокола выбранным кьюти тень mt5 это как раз такой протокол который был изначально придуман для устройств для того чтобы из полевых устройств забирать данные передавать и льна backend он может работать в том числе по тисе пи пи и специально не накладывает множество там ограничение сложностей для других тяжеловесных сетевых протоколов чтобы не нагружать устройство лишней работой для интеграции уже со стороны самого программного кода он для для этого протокола реализовано целое семейство библиотек под общим зонтиком проекта eclipse паху это точно сейчас не скажу там чуть ли не больше десятка библиотек под разные языки и поджал естественно тоже есть вот здесь на этом месте я хотел бы уже снова обратиться к нашему этому серому публику и заполнить в нем первый кусочек отметить что важным свойством любой эти платформы должна быть полиглот ность интеграции хоть мы здесь и поговорили только prime 9-ти и там лора ван у него как на более нижнем уровне но на самом деле протокола в таких устройств намного больше и поддерживать их для и вити платформы ну вот просто жизненно необходимо потому что затачивается под один протокол бессмысленно это не взлетит но давайте двинемся дальше нам еще нужно определиться с хранилищем ну точнее за нас уже определились но я просто поясню как делался такой выбор на примере вот тех же 9 platform в качестве аргументов у нас есть следующие в этой задаче у нас поступает множество однотипных данных причем поступает довольно часто а чтений относительно этих записи несравнимо меньше ведь пастуху достаточно как правило отслеживать только траекторию движения там коровки течение там последнего относительно небольшого времени причем зачастую нужны не все точки а только там приблизительно будет перемещения и никакая транзакционных гарантии и сид в данном случае нас не особо-то интересует поэтому кажется с более или менее там высокой вероятностью что нам подходит колоночный но и но если какое-либо хранилище но какое именно как видите там наверняка знаете что она не одна в свое время когда выбирали хранилища для агрегата одним из решающих таких факторов стало уже относительно того давно к тому времени вышедшая статья netflix и о том как они применили кассандру для того чтобы получить более миллиона рпс of но только fps в минуту записей в секунду на событиях на своей платформе еще одним аргументом было то что хотелось сделать так чтобы можно было оставить платформу коробочной в том смысле что это самое но иска или хранилище не обязательно должно ставиться отдельно то есть хотелось чтобы установщика там другой дистрибутив был один просто воткнул запустил одну программу и вуаля но при этом важно было сохранить масштабируемость чтобы можно было в любой момент вытащить но если хранилища и полноценно естественно разворачивать там с масштабируемость отказоустойчивость ими всеми ништяками поэтому была выбрана кассандра как подходящий вариант поскольку его ее как раз можно сделать коробочный то есть запустить в mp3 жиме прямо в приложении ножами которая которому нас является сама платформа но есть один нюанс если посмотрите на официальную документацию кассандры то-то мне не увидеть явного упоминания того что ее можно использовать в им в этот режиме там кроме как для интеграционных тестов вообще такого кейса нет зато в одной из заявок в их жире есть слова разработчика о том что вообще то это вообще не подержанный режим потому что мы не контролируем этот живем мы не можем отвечать за то что вы там творите тем не менее вариант вкусные с точки зрения многих плюсов но так из очевидных на 0 сетевой лаг можем спрятать настройки под интерфейс основной платформой и как бы так мимикрировать не заставляя пользователя этим грузится но ценой там каких-то других поступлений поэтому поскольку такие плюсы есть и их терять не хочется в случае с агрегатом было выбрано такое решение мы как бы отдаем на под на откуп конечному пользователю как он хочет разворачивать и поддерживаются оба режима и embedded и внешней сторон не и развертывание соответственно с подключением уже посетить там к целому пластиковые как угодно ну это понятно мы ему конечно предоставили выбор но а как сказать а как выбирать на основе чего что должно быть в голове чтобы сделать правильный выбор ну кроме очевидных каких-то вещей типа там тоже отказоустойчивость да и пени невозможность масштабироваться есть и нет как бы не качественной и количественной метрики одной из таких лично на моем опыте стала потребление памяти в случае самбо этот кассандры здесь приведён пример распределения памяти наиболее крупных объектов из hippo тип дампа java приложения и в нем видно что в топе присутствует запчасти от кассандры но если так объективно посмотреть в общем-то не так уж много и они там занимают в сумме гораздо интересней был бы если можно было посмотреть вот как вот от этого куска избавиться чтобы оптимизировать потребление так вот если в него внутрь заглянуть окажется что на самом деле это джейм xm бен сервер который на 99 процентов состоит из метрика той самой кассандры то есть на самом деле она проявляет свое потребление и свое поведение в этот режиме итак тоже и вот подобное поведение такое такая картина потребление и то есть один звоночков к тому чтобы здесь им бы тот кассандру уже не использовать окей это для нас будет поводом сделать вторую заметочку вторую зарубку pro гибка и хранение то есть любая а ведь и платформа по-хорошему должна предоставлять возможность конечному пользователю выбирать как сам тип хранилища так и вариант его развертывания давайте взглянем на общую картину целиком как у нас работает эта схема у нас есть какой-то парк коров да я знаю что это не копыта сорян не было такой картинки который умеет передавать данные по протоколу лора ван на некую базовую станцию которая в свою очередь умеет транслировать это все в протокол уже транспортного и прикладного уровня mqtt не транспортом прошу прощения только прикладного передавать это на платформу где у нас работает eclipse пах у нас поверх джавы все это складывается в хранилище и затем передается на ей ей кстати говоря в общем случае может быть разным потому что у разных заказчиков разные к этому требование бывают и какие то там в версии там десктопные виджеты и прочее в случае с тем заказчиком для которого впервые был реализован вот этот проект по толкнувшим меня на рассмотрение этого кейса там все было запилена мобильное приложение которое называлось умный пастух и с которым реально пастух там сидел залипал тусили если где-то увидите что чувак сиди там на стоге сена и чудо тычется вы не думайте что он там контакт-листа я там на самом деле на работе он сейчас это следит за парком за флотом простите она была безумно под основные платформы бэкон дам использовала кредит и получала данные от устройства раз в несколько минут это вот было достаточно для тех требований по первому кейсу я бы хотел уже сделать парочку путевых заметок в первую очередь отметить что мы хоть здесь и заострились на джаве но тут как бы основной смысл не в том какой язык выбрать а какая эко-система за ним стоит где потом все это хозяйство можно будет разворачивать насколько она совместима с разными платформе и какие библиотеки под него уже есть во вторых то насколько критично или не критично данные во многом развязывает или связывает нам руки при выборе например того же хранилища в которой будут валиться все наши данные и третьим выводом не знаю что вы будете делать но вот всякий случай привел давайте пока двинемся дальше и для того чтобы рассмотреть другой кейс перенесемся уже из теплых степей в восточную себе в чем финское месторождение в якутии это нефтяное месторождение добыча нефти производится на суше здесь ну не только на таком месторождении то я его взял как пример ной и на месторождениях такого в принципе типа и класса одним из самых главных агрегатов собственно осуществляющих основную работу является так называемой установки электропривода центробежного насоса или сокращенно pcm это такие сложные агрегаты которые состоят из множества узлов и они обеспечивают выкачивание пластовых жидкостей и и воды и нефти и даже газа подъем и их наверх и погружная часть у них иногда может достигать длины до 50 метров как нетрудно догадаться поломка такого агрегата очень дорого обходится потому что поломка нужно диагностировать нужно вызвать специалистов там с большой земли нужно извлечь это все хозяйство нужно его отремонтировать заказать туда запчасти погрузить снова запустить снова и это я ещё не говорю про фактическая стоимость простое этого агрегата поэтому для таких устройств крайне важно предупреждать то есть заранее сделать все возможное чтобы поломки не случалось поэтому здесь стараются максимально отойти от реактивного обслуживания когда уже все сломалось и мы среагировали к так называемому прогностическом у когда даже не по первым признакам поломки а по косвенным признакам просто поведение самих узлов агрегата делаются выводы о том когда и с какой вероятностью выйдет из строя тот или ной узел этого агрегата тут может естественно вопрос подожди ты нам сейчас про коров рассказывал там хотя бы проявить и платформа была здесь то на при чем фишка в том что все вот эти узлы на современные подобного рода установки это по сути тоже цифровые устройства способны передавать свои данные по многочисленным протоколом но эти протоколы нужно где-то потреблять как-то обрабатывать и осуществлять основе них аналитику а потом и какого какого-то рода выдачу где-то кому-то как-то нужно представлять эти самые вероятности для принятия решений о ремонте очевидно что удобнее всего это делать и каким то единым инструментом и таким инструментом в том числе может быть aiuti платформы собственно поэтому я здесь рассматриваю этот кейс так вот прогностическое обслуживание на примере эти платформы может реализоваться примерно вот так у нас на входе есть некоторый набор данных как динамически меняющихся и пополняющих вся это как измерение текущее наблюдение так и статичных это например паспортные характеристики агрегата или его журнал работа за предыдущие периоды все они подаются в каком-либо виде сейчас наставляем за скобками протоколы и прочее в ту самую а эти платформу в которой есть модуль мочит машинного обучения способные сначала естественно обучаться на этих данных причем это именно реальные не смоделированные данные но собранные заранее и на выходе выдавать наборы вероятности поломок как раз в разрезе различных узлов и агрегатов затем есть некий человек который анализирует эти данные и на основе них принимает решение эти решением условно говоря разбивается упрощенно всего на три категории то либо непосредственно взять в работу и уже допустим осуществить заблаговременно замену того или снова у узла просто принять во внимание или вообще проигнорировать но присутствие самого этого оператора но чрезвычайно важно потому что в таких кейсах применения сама модель не может быть полностью автоматизированы просто потому что очень много все равно приходится пока учитывать на за счет опыта самих операторов и технолог как это резонно с технологической точки зрения на примере того же агрегата там подержанные три типа задач машинного обучения регрессия классификация и обнаружение аномалий и реализовано это все на библиотечки века которые разработали в каком-то новозеландском институте и назвали в честь собственной не летающий птички которые водятся только у них поэтому база знаний у них называется века вики она естественно быть на одной джавитом как-то обычного машинное обучение не принято дело это все-таки для этого есть и другие языки особенно питон например на этот случай предусмотрена возможность действительно выгружать войти платформу скрипты на питоне целые модули сделано это через джип только джеб это не java enhancing проползал как многие привыкли отжимаем бэббит python это одна из разновидностей сращивание джавы с питоном который работает через три на и вызывает под капотом тот самый и поэтому по сути обычный тут бетон которую мы установили отдельно почему так а почему не не не использован нативные для java и python джей тогда многие знаете есть такой проект в основном из соображений производительности потому что тот питон который сделан на сие существенно быстрее работает и в данном случае нам не так важно чтобы пользователь там очень быстро получал обратную связь там от каких-то минималистичных изменений обычно нам приходят целые готовые скрипты написанные и отлаженные в отдельной среде и потом они здесь только запускаются поэтому такое решение вполне приемлемо ну а для работы со структурами данных матрицами картинами и прочим используется библиотека pandas это повод отметить еще один маленький пунктик в общем публике пройти платформу для того чтобы она была более менее перри используемой в разных задачах у нее должен быть языковой интеру ну на самом деле это не совсем трап это скорее возможность вызывать из джавы там какие-либо скрипты или модули на других языках но в обратную сторону принципе тоже было бы неплохо но это все технические подробности под капота а что что снаружи что видит конечный пользователь оператор или технолог на нефтяном месторождении работают вот с такими вот даже мордами это в вебе сделаны которые помимо исторических данных в развитии каждого показателя показывают еще два важнейших показателей вероятность отказа и максимальное расчетное время которое осталось до этого самого отказа здесь на примере показаны нереально скриншоты это не действительно я поломка поэтому всего пять часов тут хочу сделать несколько заметок поэтому кейсу прогностическое техническое обслуживание и ремонт делаются не потому что там кто то может и и нефтяным компаниям там денег девать некуда а просто потому что они не хотят эти деньги терять и это действительно очень дорого и важно здесь я думаю на соседних соседних залах ребята из сибура и прочих компаний могут об этом гораздо больше рассказать равно как и о втором пункте о том что машинное обучение очень хорошо зарекомендовала себя как раз в области обработки подобных данных машины и здесь хочу отметить что именно гибридные модели то есть те в которых решение принимаются не на основе только лишь данных там обучаемого модуля но из пред обработка человеком являются как бы базовыми умолчать иль нами это не то что там потому что не смогли сделать лучше потому что человеческое участие здесь по-прежнему остается обязательно мы сейчас поговорили про 2 разрозненных кейса в том числе немножко упомянули там и как получать данные с устройств и как их обрабатывать и даже немножко затронули тему визуализации когда я показывал этот скриншот с мобилкой для тех кому интереснее посмотреть как еще можно визуализировать и производственные процессы рекомендую поиграться вот с такой вот м при которой запилили наши low cut инженеры здесь можно почувствовать себя оператором на заводе по производству сахара из свеклы давно входит задаете сколько у вас тонн свеклы и прямо по шагам видите как там происходит в общем обработка на разных этапах довольно любопытная кружка сделана она как раз по мотивам реального проекта где совместно с корпорацией русагро автоматизировали как раз целый завод целый производственную линию сахара но все это отдельные кусочки которые не отвечают на вопрос кто то не успел нормально про визуализацию я отдельно отмечу что это тоже полноценный вполне себе очевидный кусочек а эти платформы это не отвечает на вопрос а как в общем случае забирать вот такие вот интеграционные решения которые бы охватывали все вместе то есть например мы хотим заполучить полноценную цифровую шину предприятия что туда можно было сваливать данные со всех там узлов подразделения устройстве прочего а потом отправлять их опять же в разные подразделения на постобработку на какую-то дополнительную аналитику и так далее то есть должен быть какой-то единый интерфейс нечто связующие некий клей который позволит все вот эти вот прикольные отдельные модули очки связывать так вот таким клеем или такой связкой случае витте платформ называется то что его я сейчас буду называть термином и за гряде это но в разных платформах может он немного по-другому звучать на 100 называется нормализация данных идея достаточно просто в каком бы виде информация не поступало снаружи внутрь и в ядре она в любом случае представлена в виде некого нормализованного там формата представления неважно и соответственно когда она выдается наружу она конвертируется наоборот из этого нормализованного представления в конечно основное бы моделью которая реализует это случае с агрегатом является так называемый единая модель данных она эти нормализованные данные содержат и объединяет их так называемый контекста и знают программисты очень любят эти слова и втыкает где папа день ни попадя в данном случае не самое удачное место но тем не менее раз уж так повелось придерживаемся что это такой я расскажу буквально через несколько слайдов сейчас пока просто хочу сказать что в каждом контексте который как-то представляет устройства в системе есть функции это то что мы можем сделать с устройством то что мы можем позвать на нем чуть позже я приведу примеры это событие то что наоборот происходит с устройством то что она может позвать на нас или для нас и наконец переменные это его данные это его свойство состояния или аргументы тех самых событий и функций эти переменные нужно как-то представить дав вот уже на программном уровне для этого можно было использовать как примитивные типы так и объекты массивы или даже целые матрицы у каждого из этих пунктов есть там свои плюсы и минусы своя гибкость или свои профит и по производительности в кредит был выбран самый тяжелый вариант это таблица то есть каждая переменная по дефолту сразу представлена целой таблицы это может показаться большим хитом особенно если вспомнить что самом деле там под таблицы подразумевается не только двумерную структура данных но еще и возможность во лидировать каждую колонку отдельно соответствие типу на общее количество строк и в том числе и поддерживается вложенность этих таблиц то есть выглядит как огромный overfit но на самом деле он полностью себя оправдывает потому что во-первых это позволяет представить собою любой другой тип данных например если нужно представить скаляр мы сводим табличку до единой ячейки нужно представить однотипный кортеж берем одну колонку этой таблице если разнотипные одну строчку а во вторых все это зачастую как бы нивелируется за счет некоторых оптимизации в частности естественно за счет кэширования чтобы такие данные быстрее вчитывались используются два уровня кэша один из них в оперативной памяти нас авторы и принцах если кто и особо не знакомства это такие ссылки которые посещаются сборщика мусора как только памяти начинает не хватать но часто используется как раз в кашах то есть пока память есть они там хранятся как только памяти начинает не хватать garbage collector самых потихонечку там подчищает а иногда они потихонечку есть pure system cache который уже на выбор конечного пользователя того как то настраивает платформу может быть представлен либо на файловой системе либо на любой реляционной базы для которой есть люди би си драйвер либо в но если хранилище но это что касается хранение а что касается передачи то там скорость достигается за счет собственной строковой сериализации не джейсон не xml которая еще и подвергается прозрачном сжатию на лету таким образом даже такие тяжеловесные таблицы достаточно шустренько передаются в больших объемах я обещал рассказать что такое контекст и контекст просто некий логический контейнер который в первую очередь призван упрощать групповые операции над устройствами допустим мы хотим задать одни и те же настройки всем датчикам парковки там вот в этом ряду выделяемых там вот для них есть какое-то промежуточное по дерева и назначаем но это не все кроме прочего он позволяет решать еще и само представление контекстами задача масштабирования если нам нужно заставить один сервер работать допустим там с полумиллионом устройств кто подключить непосредственно все эти устройства к одному серверу опрометчиво скорее всего не его повалят своими данными если это особенно какие-то нагруженные устройство скажем сетевые маршрутизаторы поэтому можно воспользоваться другим вариантом который в случае за кредитом был назван распределенной архитектуры это когда мы берём и на каждый сервер направляем допустим только там 50 или 100 тысяч этих устройств все что он собрал и с них скомпоновал монтируем как под дерево контекстов к другому серверу центральному который все это вместе собирает таким образом этот центральный сервер не работает напрямую с устройствами а собирая только так называемый аватары этих устройств намного более легковесное представление благодаря чему он может вполне себе тащить и 500 тысяч и больше и тоже может сочетаться с так называем отказа устойчивым кластером когда каждый из этих серверов еще установлен рядом с ним установлен еще failover сервер который смотрит на мастера и в случае если тот отваливается подменяет его на лету это к слову нас в подводит к еще одному публику к к одному кусочку этого бублика собственно который соответствует названию этого пункта то есть про нормализацию но я обещал еще привести примеры таких функций событий зачем вот эти абстракции за never а если они не имеют отношения к реальному миру на самом деле имеет самое непосредственное в нижнем новгороде есть большое производственное предприятие на котором на эти платформе сделан мониторинг загрузить загрязнение воздуха различными газами и собственно переменные которые получаются с датчиков по измерению содержания газов в воздухе они как раз отлично ложатся на скаляр и то есть на переменные в терминах единой модели данных те самые таблички из одной ячейки достаточно очевидный простой пример чуть-чуть посложнее но тоже вполне понятный промышленный порт в индии испещренные целой кучи как подвижных так и стационарных объектов но который все равно постоянно обязаны сообщать свои географические координаты координаты как вы видели в первом примере это типичный пример кортежа то есть двух переменных двух значений хорошо укладывающихся в одну переменную пример посложнее один из провайдеров радиорелейной связи в россии используют эти платформы чтобы мониторить свои маршрутизаторы и в частности содержимое переменных if they был этого то что мы видим когда вбиваем там и в конфиг или айпи конфиг у себя в консоли по сути она в си реализована в виде передается в юте платформу но это в чистом виде таблицы то здесь даже подгонять и подтрунивать ничего не надо то есть это соотношение один к одному но это с переменными есть другой пример федеральная сеть автозаправочных станций какой-то момент они упоролись и купили на каждую станцию умные кофе-машины которые напичканы всевозможными датчиками в том числе датчиками окончания зерна она была реализована такая логика которая значит случае окончания запасы зерна в самой машине проверяла а если запас зерна еще в танкере на самой станции если есть то оператору на планшетике появлялась уведомлять о том что сходи да сыпь а если нет то автоматически формировалась заявка в ближайший пункт поставки чтобы последующей поставкой сюда привезли еще запас кофе так вот сам факт исчерпания этого запаса это в чистом виде события которые происходят с устройством которое мы обрабатываем в единой модели данных с аргументом например адрес нашими и в обратную сторону если не ошибаюсь подмосковье есть престижный жилой комплекс который оснащен полностью автоматизированной системы управления инфраструктурой в том числе возможности управлять всеми дверьми и замками калитками и прочим так вот самого управления это отличный пример функции когда оператор может выбрав любой замочек сказать там откройся или закройся здесь аргументом будет являться например номер замка или его и печник но само по себе это конечно же функция добавляю последний кусочек который наверняка покажется неочевидным из этих примеров но тем не менее все что вы посмотрели очень разрозненные примеры значит для них должны быть предусмотрены свои модули в эти платформе вот собственно поэтому она и должна быть а именно модульной чтобы не было необходимости таскать за собой весь набор этих кубиков лего для того чтобы использовать и там для конкретной задачи только маленькое подмножество из них то есть это должна быть модульная структура из путевых заметок здесь отмечу что нормализация это не только способ там свести все воедино но это что обеспечивает ту самую гибкость то есть ток насколько легко эти самые кубики совмещаются между собой во многом определяется именно нормализации во вторых даже в тех случаях когда базовыми структурами данных выбраны такие тяжеловесные объекты как матрица или таблицы это все равно было это правда на как показывает надеюсь пока залом предыдущий пример ну и как чуть буквально только что мы посмотрели в принципе вот такое представление как единой модели данных позволяет описать поведение практически всех устройств кроме там совсем редких кейсов давайте будем потихонечку подходить выводом мы сейчас посмотрели на несколько кейсов применения именно промышленного интернета вещей в для начала в сельском хозяйстве на примере там но искали хранилищ и интеграции в нефтегазовой промышленности на примере применение машинного обучения и попытались это как-то обобщить с помощью единой модели данных и перемены но мы так и не ответили на вопрос а что это такое что это вообще такое и от платформы если все-таки попытаться ответить на вопрос не из чего она состоит а что это есть поскольку это как как и многие из таких олеварн их или сравнительно недавно появившихся понятий родилось независимо в нескольких разных кругах . точного общепринятого определения пока нет есть несколько хороших вариантов которые я не буду цитировать а приведу ли что которое по аналогичной схеме появилась у нас она звучит примерно так а эти платформы это инструмент который усиливает компании за счет того что позволяет извлекать и ценные сведения из связанного мира то есть собственно как раз из всевозможных устройств соединенных друг с друга то что я рассказал ни в коем случае не претендует ни на широту объема не на глубину но если хочется все таки получше представить где еще и как применяется aiuti как промышленный так и бытовой настоятельно рекомендую посмотреть вот такой вот сайтик а-j на а он изначально был задуман как marketplace то есть чтобы люди там друг друга находили и заключали сделки но для того чтобы это сделать они как раз реализовали очень хорошую иерархическую схемку всех областей применения если многие там слова пока показались незнакомыми или хочется узнать побольше о самой терминологии то уже на русском языке на портале а ведь эру есть хорошие конечно не аналог википедии но все-таки хороший справочник по терминологии и наконец если не удалось чего-то нагуглить то на помощь может прийти и наш любимый stack overflow только тут он приходит в двух ипостасях если речь идет про хардовый вопросы непосредственно про устройство там не можете что-то подсоединить или не знаете как работает какой-либо конкретный агрегат то есть целый отдельный сайт под зонтиком стой как чем же он так и называется а-j ну а по программным вопросам есть отдельный этот тэг на самом с такого рф а если не успели сфотать ничего страшного потому что слайда есть уже здесь можно будет скачать и протыкать pdf и все ссылки живые а на этом я благодарю вас за внимание и готов ответить на ваши вопросы владимир спасибо за участие тебе подарок от конференции что ваши вопросы либо вот я вижу туда привет спасибо за доклад вопрос такой почти во всей презентации я-то использовалась как агрегация каких-то данных устройств интересно а в обратную сторону насколько часто это происходит то есть когда мы не просто собираем информацию с устройства но и пытаемся как-то контролировать это устройство и отправлять туда информацию если говорить про промышленный интернет вещей то шире всего именно вот такой в обратную сторону подход применяется в scada и и чем a human машин интерфейс интерфейса человека машина интерфейса это управление производством только ну как бы на низком уровне когда мы с помощью эти платформы предоставляем инструмент все тем же оператором но только уже на производстве для управления с самими производственными линиями агрегатами или чем-то таким эти задачи тоже решаются в том числе с помощью вот таких инстр таких продуктов но не только потому что на самом деле на этом рынке специализированные продукты появились намного раньше чем эти платформы это раз пример 2 конечно же есть и обратный кейс обратного применения в обычном другая бытовом интернете вещей это когда мы можем управлять нам чайниками или там включить лампочку удаленно через какой-нибудь приложение на самом деле не явно тоже используя разновидность аютии платформы то есть никакой жесткой привязки к тому что типа вот если эти платформа то это агрегация данных нет такого нету то есть работает этого обе стороны здравствуйте доклад а что с безопасностью и особенно интересуют безопасность на государственный каких-то нефтеперерабатывающих и в зависимости от страны на к это безопасность тоже отличаются да безусловно вопрос очень даже насущный и решается очень сильно по-разному значит во первых имеет смысл провести границу между тем кто ответственен за безопасность есть та часть которая обеспечивается разработчиками и эти платформы есть та которая самим заказчиком ну как правило а граница проходит где-то как раз вот на уровне интеграции с устройствами поэтому то что касается самого заказчика то есть физическая безопасность устройств безопасность передачи данных с них да там промежуточных каких-то узлов это пока оставим за скобками потому что ну у всех это делается по-разному там заказчики принимают конечное решение что касается и вити платформы то здесь средства шифрования передаваемых данных и сохранения их целостности и аутентичности в некоторых случаях вшиты в протоколы которые используются для интеграции с устройствами в некоторых случаях просто эти протоколы заворачиваться в с или лифты л.с. тут же им кети может так умеет работать и дальше еще один вопрос здесь уже не столько именно фактической ценности информации сколько доступа к нему авторизации уже решается силами а эти платформы на том уровне что доступ каждому устройству разруливаются зависимости от набора привилегий и прав конкретного пользователя за лаги не нова в эту платформу то есть грубо говоря там можно прям на уровне у чё так говорить что такой-то пользователь может там иметь доступ только к таким устройствам и только на чтение а к таким устройствам там только там на запись это на администрирование то есть это уже делается средствами эти платформы это большой отдельный пласт работы в ней которые там был свое время проделана который постоянно доставляет головную боль потому что про это нельзя забывать это на постоянно учитывать и не допускать там никаких брешей ноте вменена там решается что касается там ну государственных компаний там ну в общем то какой-то особой специфики нету кроме того что они очень тщательно к этому подходят часто направляют какие-то отчёты даже пустим был пример когда они попросили точнее не попросили а просканировали платформу там специальными инструментами поиска уязвимостей выкатили огромный отчет что типа вот у вас там транзитивность зависимостях есть библиотеки про которые мы знаем что у них есть вот такие то зависимости там незакрытые целый ешки вот типа обновитесь потому что вдруг их как-нибудь использовать ответил добрый день владимиру такой вопрос который вы в своей презентации не подняли как обстоят дела с гарантией доставки сообщений потому что если это корова в принципе если не придет сообщение о том что где она была в минуту назад это не проблема если это уже промышленный комплекс и там заклинил ротор это уже действительно проблема и как быть с тем чтобы эти сообщения сто процентов были доставлены как наверное не трудно догадаться это будет зависеть от кейсов применения и соответственно от того на какие протоколы мы можем здесь положиться на какие технологии но из таких немного отстранён их примеров могу привести кейс применения когда данные к нам от устройств передавались через драйвер кафки как раз специально чтобы была возможность максимальной гарантией доставлять сообщения то есть там и президентом был слой и гарантии доставки если вдруг что-то терять потерялась или мы просто не получали подтверждение о том что сообщение доставлено мы его пири-пири запрашивали это 1 вариант 2 вариант почти во все промышленные протоколы почти всегда все наверно это я погорячился баграме с теми с которыми сталкивался встроенные средства автоповтор а если не успели достучаться если не дождались то указанное время ответа то инициировать повторный запрос либо повторную отправку наоборот если мы на обратной стороне взаимодействия то есть какого-то единого паттерна нет просто потому что устройство очень по-разному себя ведут не которые не поддерживают возможность подписаться на свои события их приходится полить с полингом отдельный головняк потому что если она отвалилась но данные у него есть мы какое-то время не могли до него достучаться потом наконец-то достучались а у него к тому времени огромный объем накопился теперь его надо как-то забрать так чтобы не потерять следующий ну в общем знаете да вот эти все проблемы они решаются исходя из того что мы можем сделать конкретно с этим протоколом можем ли мы там по хранить данные где-то рядышком с устройством или обязаны максимально быстро в сосать их прямо сейчас там единого решения нет давайте последний вопрос потом владимир продолжит отвечать уже в цифровых кулуаров там с ним можно тоже пообщаться да здравствуйте и спасибо за доклад вот очень интересная идея по поводу хранения переменных виде таблиц вот как нетрудно догадаться большинство все-таки скалярной наверно из одной ячейки стоит но я вот не понял из доклада метаданные вы где вы храните как-то в этой же таблице или как-то отдельно вот и единиц измерения там право там предваряет и так далее во все что у этих переменам в качестве формата используются точно также те же самые таблицы сколь бы тяжеловесными они не казались но они действительно считаются метаданными то есть есть непосредственное данные устройства его рабочие данные то что динамически меняется и есть настроечные данные но то что мы можем назвать по сути мета они просто трактуются ведь и платформ немножко по-другому к ним немного другие правила хранения применяются за счет того что они как правило не обновляются ну там допустим статические характеристики устройства но формат всегда использоваться вот собственно почему называется единая модель данных там по-другому просто нет даже его не пытались посмотреть другие форматы и да если это просто скаляры там не знаю какая там версия протокола это просто единичка это все равно таблица даже из одной ячейки"
}