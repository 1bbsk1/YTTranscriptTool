{
  "video_id": "4qOYmmaRZvs",
  "channel": "HighLoadChannel",
  "title": "Как мы админа увольняли / Владимир Завертайлов (Sibirix)",
  "views": 9549,
  "duration": 1747,
  "published": "2017-04-09T09:26:14-07:00",
  "text": "Итак следующий доклад Владимира завертайло из компании сибирикс про то как они увольняют админов по приветствую Скажи ещё чму ряд немножко не про это так Прежде чем я посвящу следующие полчаса э рассказу про человеческую глупость жадность зависть А я бы хотел познакомиться с вами поднимите пожалуйста руки есть ли в зале администраторы системные админы огого гого Меня предупреждали что может быть что-то подобное но вакансия уже занята вот а менеджеры в зале есть или директора ого Ещё больше у меня для вас специально в конце один слайд где много букв вообще вся история именно для админов А для вас вот один слайд где много букв админы вам придётся в этом слайде немножко подождать потерпеть но потом я покажу женскую грудь значит в двух словах про себя Меня зовут Владимир завертайло я руководитель главной Бармалей студии интернет решений сибирикс Наверное мы самая крупная вообще за Уралом компания которая занимается веб разработкой разработкой сайтов и за своё время существования успели поработать с такими компаниями как litech ральфрингер C Ну и прочими большими крупными ребятами в свободной от работы врем я летаю на маленьком лком самолётике Ну в общем вот он это про меня так а теперь собственно к теме нашего прекрасного доклада Итак менеджеры менеджеры А есть такое Гуру высказывание что основная задача руководителя любой компании э заниматься тремя вещами учить лечить и мочить Ну учить - это когда мы направляем наших сотрудников на какие-то семинары даём прочитать и изучить какие-то материалы и потом выясняем как они справились а мочить - это неприятная функция как раз вот связана с увольнением про которое так все хотят послушать Вот и наконец лечить лечить это когда мы смотрим Как наш специалист сотрудник сделал ту или иную операцию и если вдруг он в какой-то момент делает чего-то не так мы ему должны задавать неудобные вопросы а почему Например у тебя в прошлом месяце не делались бэкапы А почему у тебя например на папку етц стоят права 777 и вы знаете когда этих вопросов человеку задают достаточно много он может повести себя примерно в нашем случае последним вопросом который я задал админу был Почему же у него 2 млн сессий на сервере человек на меня обиделся сказал что я сам не прав и в общем-то ловить ему в нашей компании больше нечего а я его спрашиваю а ты уже нашёл куда идти Да нашёл А чем будешь заниматься Я буду заниматься тем же самым за те же самые деньги но я хочу расти вроде логично всё да ладно расстались мы с этим человеком проходит количество времени я про эту ситуацию забываю события идут довольно интенсивно вопрос по админу мы так или иначе закрыли и в общем-то Я думал что ситуация у нас решена вроде бы как особого конфликта не было И вот Вадим прекрасный день двум нашим клиентам одновременно приходит письмо письмо я пока сейчас готовился к докладу я зазывал все фамилии значит если тут какие-то попадаются это фамилии не настоящие вот значит что содержит письмо э ваш сервер скорее всего содержит какие-то уязвимости он небезопасен А давайте мы вам поможем его хорошо настроить и будем дальше администрировать в общем-то ничего удивительного что наши клиенты получают такие письма я их тоже получаю пачками в день У меня даже па Папочка специальная там про Вот это приходит и про Виагру там спам называется Да наверное у всех есть вот но меня в этой ситуации обеспокоило то что адрес сайта на который ссылался вот с которого домен пришёл там был телефон нашего города из нашего города с которым можно было связаться и второе что меня беспокоило то что письма пришли на личные адреса клиентов с указанием их имени и фамилии в общем-то это закрылся такой первый тревожный звоночек что что-то происходит не так где-то кто-то начинает крысятник несложно открываем портфолио идём сверху вниз и пишем на инфо А тут именно на конкретные адреса конкретных наших клиентах А клиенты обеспокоились но у нас специфика клиентов такая что они с нами Живут долго они к нам очень лояльны И как правило 90-95 про клиентов а первое что сделают на такие письма обратятся к нам и спросят А как жить дальше а соответственно Никто из наших клиентов никогда сразу не клюнет на такую удочку и не побежит э ломать сервера проверять там что-то взломают их сервер или не сломают они сначала обратятся к нам и спросят как им жить дальше а я Беспокоился ситуацией порекомендовал нашим клиентам обратиться сразу же в отдел к Да здесь Всё замазано не надо фотографировать А значит но и сам захотел тоже порази на самом деле обратиться в отдел к сейчас довольно просто на сайте госуслуг есть прекрасная форма которую можно заполнить и отправить в принципе заявочку мы тут впереди планеты всей но мне захотелось живого общения с живыми реальными людьми соответственно у меня были определённые знакомства с этим контингентом отдела к я привлекался пару раз я был несколько раз экспертом и понятым в таких мероприятиях вот поэтому мне ничего не составило труда найти как действительно связаться с этими людьми и попасть к ним в кабинет на разговор Да действительно Меня встретили люди которые вежливо выслушали Повали головой но сказали мне следующее молодой человек всё это конечно очень интересно Забавно но вообще-то состава преступления тут нет и заниматься мы вами пока не будем знаете напоминает анекдот доктор у меня палец синий фигня фигню не лечим доктор у меня рука синяя фигня фигню не лечим доктор Я весь синий хана хана неизлечима Вот то есть им нужно было состав преступления чтобы действительно взломали сервер а да и ещё что мне порекомендовал доблестный отдел к ни в коем случае не пытаться разобраться с этой ситуацией как-то Как разбирались из девяностых всё решение должно лежать в плоскости закона и всё надо делать по закону Ну в общем ситуация у меня два клиента у обоих весёлые предложения поломать их сервера с их разрешения А есть контактный email Skype того человека который хочет им навредить отделка браться за это дело не хочет что делать как нам создать преступление я решаю попробовать спровоцировать этого человека на какие-то нехорошие действия Вот и значит с помощью через клиента рекомендую ему отписаться в стиле Да ты Школота Да ты ничего не умеешь да ты не сможешь сломать наш сервер Вот и может быть разозлить этого человека чтобы он действительно сделал какие-то противоправные действия к сожалению к сожалению наш милый это не ведётся и сливается с таким словами Ну что деть ну вы знаете где меня искать если что вот обращайтесь одна попытка провалена осталась ещё одна что делать нужна ещё одна провокация чтобы было преступление Я начинаю думать я начинаю спрашивать рекомендации отделка Я начинаю размышлять над тем Можно ли что-то предпринять на то чтобы был взлом а человек действительно спрашивает разрешение взломать коно сайт нашего клиента вот мы начинаем вступать в некоторую переписку с нашим злоумышленником и в принципе стараемся выяснить чего он зараза такая хочет от нашего клиента А хочет он банально денег вот причём предлагает чтобы клиент самостоятельно залил на сервер небольшой запускаемый Файлик вот да да да человек за свои деньги запускает себе Кит вот а после этого значит ещё платит абонентскую плату 25.000 руб в год и становится участником Бат нета прекрасно заманчивое предложение Да после некоторой переписки с этим молодым человеком Он предлагает нам заключить даже договор договор на юридическое лицо по которому он будет нас вот таким образом Как обслуживать обслуживать Да вот а мы просим предоставить этот договор получаем его начинаем читать и обнаружим что это наш договор Вот тот который мы в студии у себя написали когда-то который Мы приняли у себя как основной рамочный ну там поменяно шапка поменяно несколько предложений в общем А это именно наш договор нуно тоже какое-то совпадение такое нелепое Мы в принципе наш договор на хабре когда-то публиковали вот в принципе можно найти это в открытых источниках вот Надо разбираться Надо разбираться и тут возникает идея провокации э к которой мы начинаем долго готовиться которую мы в принципе планомерно за два дня собираем Она состоит следующее итак у нашего клиента есть сервер на этом сервере крутится один сайт и наш злоумышленник просит разрешение взломать именно этот сайт прямо на этом же сервере в соседнюю папочку мы заводим новый дончик разворачиваем там чистый WordPress прямо вот с нуля и пишем нашему злоумышленнику милый человек Значит нам Основной сайт жалко но у нас есть как бы вот соседние папочки дополнительные Сломай пожалуйста его домен которому мы привязали этот сат принадлежит уже не нашему клиенту А нам ситуа сломать наш сайт Ну в принципе уже противоправное действие будет Вот мы заготовили попкорном мы заготовили сборщиком логов который писал нам эти логи удалённые на почту слал Мы очень ждали как интересно нас будут сейчас ломать Вот Но то что произошло дальше то что мы увидели А нас действительно сломали за 3 минуты немножко меня шокировало А вам не видно ничего нетт зде проди заходит у нас в админку битрикса А клиентский сайт был именно на битрикса причём сходу сразу авторизуется затем заливает Через файловый менеджер битрикса шел и дальше этим шелом немножко начинает ковыряться но мы логировать не только гет посты мы и по пост запрос стала то есть ну круто Хакер с ротовым паролем так и я могу вот Ну в принципе Ещё пока не было однозначно понятно что это наш парень бывший админ или не наш Ну вот верю я людям хочу вот всё-таки до конца думать что он действительно может быть пароли где-то мы потеряли может быть клиент пароли где-то продол бал вот тут ещ обращаюсь в отдел к рассказываю ем эту историю они очень неохотно на меня смотрят и говорят там же вот а с тором выясняется следующая вещь Как вы думаете можно ли Засечь человека который пользуется тором все знают что можно но не знают как так вот если городишко маленький а два дебила вдруг в час ночи залазит в Тор их найти можно очень просто мне рассказали в отделе к Вот соответственно Да адрес Тора здесь не проблема Я значит следующее что хочу сделать Я хочу написать нашему милому бывшему админу Ну не он ли пакостит Может быть вс-таки я ошибаюсь может быть какая-то ерунда произошла открываю Skype смотрю он меня оттуда удалил но зато у него в профиле сидит та самая веб-страница с которой он приглашал своих клиентов на свои услуги с которой в принципе он писал им письма Ничего себе подставился Я подхожу к соседнему компьютеру прошу там наших коллег посмотреть не удалил ли наш админ их и в принципе мы засека что более то у него в профиле спа прописан е телефончик Какой надо с той же самой Премиум которая вот и пыталась сломать наших клиентов Лавров про это хорошо сказал ситуацию Однажды Ну то есть я понимаю если допустим человек жадный хочет пакостить но ты Будь хотя бы умным Ты хотя бы так-то не подставляй ру мы теперь однозначно поняли что это именно наш парень пошли разговаривать с отделом к отдел к помог нам собрать аккуратно материалы но тем не менее очень неохотно брался за подобное дело мероприятий и он нам дал рекомендацию с человеком просто для начала встретиться поговорить встретиться поговорить человек не берёт трубку не отвечает на просто Првет в небольшом городе на самом деле есть Да можно обратиться к спе специалистам переговорного жанра которые за не очень большие деньги абсолютно легально найдут где сейчас осел этот специалист вот причём Но если он не менял пол если он не менял паспорт и место жительства то это сделать довольно просто Единственное что они не смогут с ними говорить на техническом языке по понятным Прим за собой Вот Но к сожалению взаимопонимание вменяемым что когда человек вступает в такую фазу что противопоставляет себя там работодателю но это примерно знаете как вот какой-то жёсткий развод когда там жена царапает машину муж там продаёт квартиру для того чтобы просто за копейки её продать жене ничего не досталось В общем это такая нисходящая спираль вниз когда человек гадит просто для того чтобы принести максимальный урон мы поговорили с человеком объяснили ему что у нас в принципе есть понятный доказанный материал для отдела к И что в принципе пожалуйста Прекрати гадить Ну Неправильно это вот и он на самом деле утихомирить каких-то рецидивов доставить человеку Некоторое количество неприятностей Что происходило в этот момент у нас в компании Мы собрались тесной кучкой очень умных людей и начали разбирать ситуацию Что делать если у нас угнали все пароли ой трудно мы списали много много много досок мы провели много часов тко анализе мы придумали много разных ходов и в принципе всё что мы начали делать первый шаг Это я должен был сам лично постучаться созвониться или списаться с теми клиентами у которых у меня было что подозрение что у них угнали рутовые пароли от серверов я это сделал я списал с нашими клиентами сказал что вот возможно у вас полгода сервер не обновлялся у вас Возможно есть Дыры в безопасности выкатил им список тех дыр которые были найдены за последние полгода и предложил им бесплатно переустановить операционную систему на серверах в принципе идея была поддержана большая часть серверов Мы в итоге Переустанови Ну потому что не очень охота быть участниками какого-то серверного бонета Вот Но это не та самая большая часть работы которая была нами проделана ещё параллельно переустановкой серверов мы поставили систему мониторинга нам понравился закс Про него сегодня здесь в этой же аудитории говорили с утра вот а мы поставили м Никто это такая штука которая сканирует PHP скрипты на уязвимость вот э и на многих наших клиентов настроили двухфакторную авторизацию это авторизация в систему управления через телефон А в принципе таким образом от угнанных паролей скорее всего мы себя плюс-минус защитили я думаю ну максимально как это можно было сделать о угнанных паролей но осталась зараза одна проблема которую я до сих пор не знаю как решить и может быть вы мне здесь поможете вот поднимите руку пожалуйста те у у кого в компаниях принято давать разработчикам пароли клиентские есть да дадада вот А как так Вот вы даёте клиентские пароли А вдруг они чего-то начнут делать с этими клиентскими паролями Как решить ситуацию А специфика нашей отрасли такая что у нас В год примерно проходит порядка 4 новых проектов порядка 200 клиентов нам обращаются в год для технической поддержки и мы не можем просто технологически не давать разработчикам паролей соответственно я начал спрашивать как дело обстоит у коллег по цеху я разговаривал с директорами студий и когда разговариваешь с глазу на глаз с людьми они более охотно рассказывают какая у них фиговая в компаниях с паролями диаграммной разработчики имеют доступы так или иначе к клиентским паролям где такое У кого есть какой-нибудь мастер пароль от какого-нибудь кепаса Вот угнав который можно в принципе посмотреть все пароли из кепаса и мне сказали что в Красноярске есть какая-то студия в которой пять человек где директор собственноручно занимается выкладкой сайтов на хостинг и раз в месяц меняет все пароли Ну наверное эта студия больше семи человек никогда не вырастет В общем всё прискорбно в этой отрасли что было на тот момент у нас у нас была Вот такая штука это приложение для bitx 24 где мы хранили пароли и там есть иерархия по подразделениям Где я могу назначать конкретному подразделению конкретные доступы в конкретные пароли если кого заинтересует не надо её ставить Мы специально её сделали платной потому В общем гнався программистами и в общем на ангуляре она тормозит перепишем на и тогда сделаем ещ и бесплатны поэтому можно будет пользоваться так иерархий доступ у него ещё одна проблема что может быть может быть мы сначала сначала на перепишем потому что ангуляр это ка все руты убрали доступы к контрольным панелям и оставили эти доступы в отдельном вообще пароль неке только у двух человек ну у меня и у нашего технического директора которому я очень сильно доверяю уже 12 лет Он со мной и он имеет статус партнёра моей компании Вот и соответственно в нашем регламенте появилась регулярная смена паролей которое раньше не было Вот Переключайся давай спасибо я не очень хороший специалист по безопасности но мне порекомендовали вам рассказать и дать следующие ссылки значит хороший обзор софта есть по первой и для любителей Windows есть хороший дистрибутив PB в котором собраны разные-разные утилиты разные-разные тузы для того чтобы как раз просканировать сайты собрать какую-то статистику и так далее мне в принципе понравилось Зайдите Посмотрите на хабре есть статья которая описывает состав комплекта вот а теперь тот самый слайд после которого я обещал показать что-то интересное значит э Ключевая проблема этой ситуации которую у нас возникла благодаря Ну не очень Может быть корректно с моей стороны увольнению админа или может быть обиды человека А я считаю в том что он при увольнении всё-таки на нас каким-то образом обиделся а я не исключаю что те люди которые с нами расстаются могут обидиться потому что для обиды нужен только повод но тем не менее для себя Мы создали такой небольшой чек-лист где мы в принципе описали правила по которые мы стараемся Ну минимизировать обиды человека даже если он очень сильно накосячил что-то напортачил на в своей работе Мы не будем его как-либо гнобить мы пожелаем ему удачи мы скажем Какой он молодец и вспомним всё хорошее может быть даже какую-нибудь медальку дадим вот просто для того чтобы минимизировать риск подобных ситуаций а она нам стоила очень дорого вот к чему я это всё рассказываю блин знаете вот наши клиенты наши клиенты очень с пониманием отнеслись к ситуации и готовы были предложить любую помощь в её решении в поиске нехорошего этого человека злоумышленника а у них очень серьёзные большие связи и Наверное мы в любом бы случае человека нашли так или иначе несмотря на с помощью него или без него Я хочу закончить Вот мой небольшой рассказ на позитивной ноте и сказать что даже если у вас с работодателем что-то не складывается даже если у вас вы считаете его полным В общем нехорошим человеком Да не гате там где кормят у него больше возможности в случае чего испортить вам жизнь а сделать её лучше можно только вместе а вкратце это всё я бы очень хотел чтобы вы задавали мне вопросы не меньше трёх и самый интересный вопрос У меня есть небольшой подарок я подарю автору пожалуйста ком Ну потому что На прошлом меся работе раз раз О спасибо на прошлом месяце работе я допустим столкнулся с ситуацией когда увели базу данных аккаунтов клиентов и после этого случае собственно такой договор и был введён причём довольно в жёсткой форме под это ну это сделал не сотрудник программистов или админов другой совершенно отдел ввели ещё меры для тех же программистов и админов допустим по этому договору код внутри компании является собственностью компании и тому подобные вещи вот в этом плане вы предприняли какие-то меры эти меры были предприняты Ещё лет наверное воем назад безусловно у нас такой договор о неразглашении был а он безусловно был подписан с этим человеком и даже при увольнении я про это ему напомнил но опять же когда закручивается вот эта вот спираль когда человек делает максимум своих усилий для того чтобы просто нагадить договор его здесь не не остановит Вот м я встречал более жестокие договора о неразглашении я встречал договора где заставляют каждые 3 месяца проходить на детекторе лжи какую-то экспертизу вот у нас договор здесь относительно лояльный но бывают более жестокие случаи ещё пожалуйста вопросы Владимир Здравствуйте а можно помахать ручкой а а Спасибо за интересный рассказ Вопрос такой Может быть я не очень понимаю специфику вашей деятельности А почему вам не поставить единый п через который разработчики могут подключаться к серверам заказчиков ну и соответственно заказчик уходит отключаем от л дапа уходит человек отключаем соответственно его учётку Спасибо наверное я здесь не очень компетентен Как это работает поэтому я наверное вам вряд ли что-то конкретное Отвечу Вот А вообще вообще специфика работы здесь следующая а работа идёт итеративности от того Какое состояние у клиента мы выкатываем ему новые и новые релизы соответственно бывают мелкие Фиксы которые мы долж должны отгрузить в течение дня а клиентов много э запросы У всех разные скорость поступления не регламентируется нам нужен ссш нам нужен доступ к админке Я честно говоря сейчас вот так сходу не совсем пойму как здесь поможет Здравствуйте А мы сейчас занимаемся как раз-таки разработкой управления доступа клиентскими и так как вы тоже этим занимались хотелось бы задать вопросы какие могут быть заранее проблемы заранее проблемы Да а самая большая проблема Где хранить э ключик вот этот вот который открывает доступ к паролю вот а наверное а технически Ну технически это довольно простая система в принципе алгоритмы шифрования разработаны Хорошо как уже говорилось Ну не знаю предложение Посмотрите в сторону потому что он покроет вам доступ к серверам и у вас будет единая точка вы там просто учётку отключается и всё у битрикса в том числе есть интеграция спом и вот мы например в нашей компании сделали интеграцию лпа с порталом человек увольняется деактивирован слетает на всех сайтах у него везде доступ пропадает делается Ну порядка недели вот в ленивом режиме адекватного сотрудника спасибо спасибо у меня тут я тут Говори У меня такой вопрос Спасибо за доклад во-первых во-вторых значит какие изменения у вас произошли в процедуре найма по ходу работы потому что то что человек дурак наверное можно было понять ещ раньше то есть появилась ли у вас служба безопасности стала ли она там боле Ну как бы процедурные именно изменения после вот этого случая Вообще Вообще я привык работать с людьми умными с неми очень интересно некомфортно менялась где-то года два назад в сторону того что там появились тесты на IQ тесты на внимание разные другие тесты Вот Но вот Конкретно этот экземпляр с которым мы боролись Он пропустил все эти процедуры и попал к нам немножко раньше чем мы усложнили попадание к нам вот ещё пожалуйста вот здесь вопрос был Кольская тема у Амина абсолютно всё есть не думали зарег вообще пароль вход по ссх и сделать это только по ключам намного проще Ну отрубить доступ уволенному админу просто отозвал ключи скрипти ком пройтись по клиентским серверам И всё да Ну не решает это проблему с ключами Ну давайте кулуарно практика показывает что про дискуем я поищу Дыры в вашей системе или там например коллективно попробуем хакнуть вашу систему в плане того что вот мин увёз Ваши ключи Ну посмотрим что и как А есть ли ещё вопросы а можно ещё уточнить вот по ходу работы вы калибрует что сотрудник например удовлетворяет каким-то корпоративным ценностям потому что то что на собеседовании скажем было не очень понятно что вроде бы нормальный по ходу работы может там всплыть что-нибудь что уже там будет звоном где сказать потом-то Может он и гадость сделает то есть вот такого плана у вас может даже тоже процедуры появились какие-то смотри что человек не конченная Нет мы не Поём корпоративные гимны по утрам замечательно но мониторинг сотрудников мониторинг их настроения у нас да появилась такая процедура аттестация у программистов у менеджеров Мы про это писали на хабре выкладывали там чек-лист по аттестации в принципе если интересно можете погуглить по моей фамилии и найти этот материал Большое спасибо за вопросы мне понравился вопрос про nda вот по-моему вы Да так спасибо"
}