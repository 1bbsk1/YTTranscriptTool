{
  "video_id": "7UOWus-5yxg",
  "channel": "HighLoadChannel",
  "title": "Самое интересное в PHP 8 / Дмитрий Стогов (Zend Technologies)",
  "views": 28026,
  "duration": 2787,
  "published": "2019-06-06T12:19:51-07:00",
  "text": "15 лет уже я работаю взаим текнолоджис в письме наверно старейший максим ребята ram последние же годы я про жокей исключительно занимаясь развитием идей связанными с увеличением производительности и они очень хороший докладчик рассказывает только о том что делаю сам и на самом деле все мои последние так надо можно сказать что одна длинная история о том как мы придумываем и реализуем новые фичи которые помогают ускорить печки работать только реннингене мы нашли до 15 лет назад когда я пришёл в сердце и мы выпустили первую версии 50 это не 1 1 из пятерки когда мы сделали настоящие были меня объект ориентированный язык и вот за эти 15 лет нам удалось поднять производитель на статистических тестов 40 раз она реальных приложениях в шесть раз но на самом деле за это время было всего два родителя прорывных момента эта версия 51 когда мы защитим смогли существенно повысить скорость интерпретации из мы реализовали специализированный специализирующийся по татар нет повлиял в первую очередь только на синтетические тесты а все мной мы переработали все ключевые структуры данных и таким образом оптимизируя работу с памятью и конечном процессоров и тут мы получили не только очень хороший выигрышно очистите тестах наиболее чем двукратное ускорение на реальных проводили что конечно очень выдающийся вещи наверное никто такого в жизни сделать ним не мог все же остальные версии добавляли небольшие увеличения производительности результате реализации множества менее эффективных идей и как еретика в конце цикла разработки пятерки так и в конце цикла разработки смерти мы уходим на плато и где-то замедляемся так за последний год работает над 74 мы смогли добиться только 2 процентного роста производительности может где-то еще неплохо потому что перелистывая фича которых рассказывал никита топить properties к вариант на этой ты и они как раз замедляет 51 ножках поэтому сейчас в gta говорим о восьмерки что собственно знать от восьмерки сможем ли мы хоть в какой-то мере повторить успех семерки и тут конечно все идеи по усовершенствовать партад решение исчерпаны но все они требуют очень свой проработки и как правило когда-нибудь прорабатывать получается просадкам цент их приходится отбрасывать потому что тот выигрыш который дает и несоизмерим с усложнением или какими техническими ограничениями которые не налагают здесь единственная надежда на какой-то новую технологию прорывную и только лишь становиться g этой истории успеха java script движков и на самом деле мы уже очень давно работаем на jeds двенадцатого года наверно у нас было три четыре реализации мы работаем с людьми из-за этого с javascript хакерами но как-то все раз не получалось это включи телевизор есть мы сами боялись в конце концов восьмерки мы включаем если мы его включаем там еда видимся двукратное ускорение но только на синтетических тестах она реально спаджи мы видим даже замедление это разумеется не то что мы хотели собственно может мы что-то делаем не так может быть wordpress такой плохой и его как какой-то мне колледже там не поможет но на самом деле ты так может быть мы сделать слишком хороший диктатор а в дерзкая top хуже на самом деле если мы посмотрим на какие-то вычислительные тесты покажут что действительно интерпретатор который мы сделали один из лучших обгоняет даже такие жемчужины сколько колодец интерпретатор дописана сэнгере и мы всего в 4 раза уступаем об этом тесте оптимизирована чего компилятору сил и соответственно с помощью jit мы могли бы скорость в 4 раза это тест и с опытом и это уже делаем мы способны генерировать код который контролирует компилятор omsi так то почему же тогда мы не можем ускорить реальные приложения окей ты немножко сбился значит для того чтобы я попробую сказать как мы делаем жить чтобы понять что мы будем делаем не так начнём с самых азов как раз работает пички все это сервер который принимает запрос для работы как работает принимает запрос компилирует его байт код и потом отдает его на исполнение виртуальной машине что машина исполняет бойкот может включать и другие пришли файлы которые компилируется в баньку топи исполняется по завершению запроса вся информация который относится к этому запросу выкидывайте из памяти включая весь бойкот то есть у нас получается что байт-кода то есть каждые 5 скрипты должен быть скомпилируем на каждом запросе заново разумеется уже компиляцию такую схему строить невозможно просто прыжка пятом должен быть очень быстрый вы наверное никто в таком виде печки видах clicker никто в мире пешки не использует все его используется appcache им и главная задача appcache и избавиться от при компиляции просто каждым запросит хоть он встраивается списали прозрачен для него . перехватывает все запросы на компиляцию и кешируется скомпилированный бойкот shared memory при этом мы избавляемся не только от времени компиляции ну экономим память потому что раньше у нас и так бойкот выделялся в кого то что пространство каждого процесса теперь у нас военным экземпляре вот в эту схему уже гитаристов строить можно собственно не будем делать сначала покажу как работает и интерпретатор в первую очередь цикл который для каждого инструкции вызывает как-то свой обработчик у нас используется два машинах два регистра языки дейта это указатель на текущий крем активации apline указатель на текущую исполняемую инструкцию виртуальную они с помощью расширения детей написано реальные хардварные регистры и тем самым работает очень быстро а в цикле мы просто вызываем обработчики для каждой инструкция после чего в конце коза обработчики сдвигаем указатель на следующую здесь важно отметить что адрес обработчики записывать и непосредственно в байт-код и для одной инструкции у нас может быть несколько разных обработчиков первоначально это было придумано для специализации когда у нас по типам операндов но госпитализироваться обработчики но мы используем эти технологии для джип поскольку есть мы запишем в качестве обработчика адрес она нас новый сгенерированный код у нас будет запускаться дальше дживс и программы без всякого изменение в интерпретаторе но вот справа у нас есть некая обработчиком написанный для инструкции сложения то есть он понимает операнды там написано сверху 1 2 вруби константа временно или локальной примерно читает операнды проверяет тип и производят непосредственно логику тут сложение и дальше возвращается обратно в цикл который передает управление на следующие обработчик из этого описание нас генерируются функции то есть функции специализированные ответственно было три возможных первых операнды три возможных фаре получается 9 разных функций индивидуальных функциях уже вместо тех универсальных методов для получения операндов вниз мы используем конкретный которые не делают никаких проверок еще одно усложнение которые мы сделали по моему версии 72 или сентри уже не помним так называемые гибридная виртуальная машина если раньше мы всегда вызывали с помощью косвенного вызова непосредст обработчик теперь для каждой обработчиком еще в селе в теле цикла ввели метку где вызываем от обработчик с помощью прямого вызова казалось мы раньше делали один косвенный вызов с первым делом косвенной приходят и прямой вызов и такая система должна работать медленнее на самом деле работа быстрей потому что помогаем процессору предсказывают переходу раньше у нас была одна точка из которой мы всегда прыгали в разные места и процессор когда сюда приходил всегда ошибался точно просто не мог запомнить что нужно прыгать сначала 1 струи спермы другую а теперь у нас после каждого прямого вызова идет переход к следующей метку результате людом выполняет автоматический цикл у нас в списке инструкции виртуальные выстраиваются по стабильные последовательности которые потом выполнять практически линейно то есть и вот только тут просто вот это вот гибридные виртуальная машина позволено подняться на 5 на 10 процента производительность в свое время ну а теперь джек то есть он у нас реализуется как часть appcache а после того как мы с компилировали из оптимизировали байт-код мы программы запускаем для этого байка jet компилятор который же не смотрит на исходные тексты из него мы генерируем the scythe нативный код и меняем вадьку де адрес 1 инструкции функций по сути дела после этого наш байт код ночная нашим нативный код уже сгенерирован и начинает работать из существующего телепортаторы без каких-либо изменений показывается на простеньком примере есть некая функция пересчитает сумму чисел от 0 до 100 справа байт код который за него сгенерирован ведь 1 инструкция присваивает сумме 0 2 единицы потом безусловный переход на пометки на метке или один мы проверяем условие выхода из цикла если она вы плюс то выходим если это идем в цикл тут прибавляем к сумме единицу записываем render сумму вещью мая на единицу непосредственно отсюда мы будем генерировать ассемблерный код и как видите у нас получается достаточно неплохой 1 инструкция assign копируем всего две машины инструкции вторая третья строчка в регистре если развяжет указатель текущего фрейма активации посмешили 30 тома лежит примерная сумма 1 инструкции записали значения нолик 2 вам записывать четверочку это тип то есть тип long а для перемены и компилятор понял 40 всегда лонг и я не нужный тип колись будет мы можем ее хранить в регистре в машинном и поэтому здесь нам просто которое agestar самим собой самое простое самые дешевые инструкции обнуления то что также безусловный переход проверяем не произошло ли у нас какое-то внешнее событие проверяем условие цикла внизу и идем в цикл с этими проверяем является ли до суммы целым если да то читаем в целое значение прибавляем к нему значение а и проверяем не при условии переполнения записываем результат обратно в сумму прибавляем венеции дэвис очередь и кот очень оптимально и возможно можно было бы определить еще больше избавившийся от проверки сумма на тип также модерации цикла по достаточно сложная оптимизация мы пока такие дни делаем мы развиваем титуса стоит как достаточно простой джек не пытаемся делать то что делает у нас java hot spots gate все-таки поменьше ну вот и почему же при такую оптимальном коде мы не можем ускорить реальные приложения собственно должны ли то есть если приложение 80 проц это время не ждет ответа от база данных то визит это ничем не поможет если мы забываем какие-то внешние ресурсоемкие функции например с поставлялись приятным выражением то тоже чарджит поможет вам точно так же будет вызывать те же самые функции были того если допустим приложения стоят большие структуры данных деревья графы а потом читает его то что с помощью жить мы генерируем код который будет меньше он будет выполнять эти чтения за меньше инструкций но сами данные чтобы подгрузить крепость куда более значительное время то есть все время тратится на загрузку данных из памяти в кэш процессора и как вы сами видели на слайде жить можно даже заметить реальное положение потому что мы генерируем слишком много кода и само чтение кода становится проблемой с тем больше расхода тем больше мы вычитаем при чтении в кэш мы вытесняем из какие-то другие нужные данные и результате получает только замедления ну и одна из проблем которые мы хотим решить спешке 8 это во-первых генерировать меньше кода то сейчас как я сказал мы генерируем эти дни код для всего скрипта которые грузины этапе загрузки но половина функций наверняка они будут вызываться поэтому пошли немножко дальше и вели некий триггер который позволяет сконфигурировать как когда мы хотим запускать мы можем запускать его для всех функций только для функции при первом их в языке можем на весь это каждую функцию счетчик и будем компилировать только те функции которые у нас действительно горячее и конечно такой вид отработаете тучи но он все равно не оптимален потому что в каждой функции опять из путей которые исполняются и пути которые никогда не исполняются поскольку наши динамически за программирования у нас к каждой примерно 8 это разные типы у нас получается что еще мы должны поддерживать все типы который предсказывает фактически анализатор а он зачастую делает это просто из осторожности тоже не смог доказать что не может запретить другой тип и в этих условиях мы собираемся уйти от чистой компиляции и делать ее спекулятивно мы будем сначала какое-то время анализировать скрипт функции в процессе работе вашего приложения смотреть каким путям ходят программа какие переменные какие типы иметь переменные можете даже какие-то граничные условия и только потом генерировать код и оптимальным образом для этой функции только для тех участков которые реально исполняются для всех же остальных висим будем ставить заглушки для сборки страна проверки на возможные выходы и там будет запускать процесс процесс оптимизации то что будем устанавливать необходимый для интерпретации состоянии виртуальной машины и отдавать в исполнении интерпретатору подобная схема используется и вход под голове и в адаптация технологии письки метра от сложностей в первую очередь это то что у нас и перец байт-код еще вид этих код который может использоваться из равных процессов то есть мы не можем отнять непосредственно шарику только нужно бортировать уклад копировать изменять а потом уже изменять обратно в shared memory ну а сейчас я расскажу еще о парочке технологии которые родились из идей графических ограниченных гипс на самом деле очень много что сделано в 5 писем пришло именно я из работ связанных лежит и первый этап релоадинг вы соберёте халк же пути на всем 4 это возможность задать тамбур файл и загрузить их файлов и загрузить их в начале при старте сервера и сделать все функции и fall оба и зари файлов постоянными эта проблема одна из идей ты проблемы и эта технология раздел одна из идей нет одна из проблем которых у серфить технология это проблема связывание файлов дело в том что когда вы просто читаем файл и компилируем раз каждые файл копируется отдельно от других делается для того том что каждый из них может измениться отдельно то есть мы не можем связать классы из одного скрипта с другим классам и другого скрипта потому что на следующем рик версии 11 может измениться есть что-то пойдет не так валитова можем даже быть в нескольких файлах одноимённый скрипт которые при одном request испанского используется в качестве порно то при другом request используется из другого файла класс такт с тем временем мы совсем другой поэтому получается что мы даже генерируя код который будет выполняться на мерзких request ах не можем ссылаться не на классы не на методы отношении создаются накажем кристи заново использовать заднем приводе мы можем связать эти классы изначально и соответственно тогда генерировать более оптимальный код как минимум для прям уроков которые будут таким образом загружаться ну на самом деле технология помогает не только для связывания классов на самом деле технология подобные аризона в java как глаза шеринг это моно в первую типа назначена для ускорения старта приложений и для уменьшения общего кольцу потребления памяти те же самые плюсы получаемым и поскольку мы не делом связывание классу теперь в runtime дома-то единожды и также эти классы у нас хранятся теперь не в нее в адресном пространстве каждого процесса a shared memory и также мы можем делать глобальную оптимизацию дел случай jit корни так далее но у технологии есть и минусы то есть если мы загрузили сделали постоянно мы же не можем это выгрузить ведь поэтому технология может быть использована со стабильными from блоками но если вы там где плоти приложение паре сахарозу день скорее всего надо вам не подойдет мне уже после реализации оказалось задумывал психология как транспарентное прозрачная вы можете просто часть готовы проложение подгрузить и она у вас будет работать даже без изменений то оказалось что это не совсем так что не все провождение работают например если вы в коде вызывая считаю такой по результату проверки функции фархан ягодицы класс экзист а фактура стала постоят функция стала постоянной соответственно фанкшн и где всегда возвращает true и какой-то код у вас которые раньше должен был задуман был задуман особо вызывался называться перестанет технически проложена включается с помощью всего одной директивой конфигурации appcache при лодка на вход который вы даете файл сценария то чтобы обычный файл php который будет запущен на этапе запуска меня запущена не приводится он будет работать ну и в танцуют один из одна из возможность реализации один из сценариев которые просто что это рекурсивно все файлы из какого-то директории данном случае сын фреймворк можно рисовать абсолютно любой сценарий на 5 перед сами понимаете можно просто списком считать может сюда исключение добавить можно вообще с контроллером скрестить чтобы composer подсовывал файлы которые нужно релоадинг это самом деле все дело техники более интересно никак грузить от что грузить то есть я попробовал эту технологию на что там уже вордпрессе то есть сначала говорится и загрузил все его плюсы для работать перестал именно как раз из-за суть проблемы которые только что озвучивал так баллов проверка на панкин их zest она сама их здесь всегда барб разработать решал перестал пришлось немножко модифицировать сценарий который был на прошлом слайде добавила исключение парочку файлов добавил исключения ничего вордпрессе не изменил ни одного файла ни одной строчки стала работать то чем 5 процентного ускорения за счет этого про лоудинги что принципе тоже неплохо но при этом не сказала загрузил все файлы практически все а на самом деле половина из них и не использовалась поэтому можно сделать еще лучше есть можно погонять приложение ваш посмотреть какие файлы загрузили сделать это можно с помощью функции appcache год статус который выдаст все файлы которые закисленная покажем ну а создать из него список для приложен к принципе не проблемы и таким образом мы сэкономили щит 3 мегабайта памяти все придут проецируем да на сегодняшний день но при этом получили еще чуть-чуть мне маленькую ускорение все дело опять таки что у нас чем памяти больше чем больше мы загрязняем кэш и этим работаем хуже чем меньше памяти мы используем тем и скорость раз лучше вторая технология она близко где-то на самом деле помогла просто разработан потому что меня скажем зеф попросил начальник мои им очень понравилось как это работает в по это не то есть это возможность вызывать функции других ли кровь и слизь и скрип ли равных языков при этом никакой компиляции не требуется на в печь тоже было несколько попыток создавать extensive range интерфейс но все они использовали свой собственный код и язык или опять для описание интерфейсов я же посмотрел идея в logic где для описания весят пользу просто все язык подмножество и задать путь вас очень крутая игрушка теперь когда мне нужно проверить что россия не опишет на печке прямо в командной строке бывает как вы понимаете да если мы спускаем с на уровень ниже мы спускаемся на си мы можем сделать практически все что угодно и желаем это не желаем урони серверов нет проблем и конечно это игрушка инструмента для тех кто работает на стыке fish пьесе и хорошо владеете чем другим хотя кто знает может быть за для кого-то будет просто не нужно компилятор даже под виндами тобой будет работать все без всяких visual все из печки вот я сделаю несмотря особенно код это я хочу показать как использовать в файл для того спользовать настоящий gui приложения под линуксом вот это простенькая программка я никогда бы не писал подвинуть им тем более простенькая программка на секторы нашел в интернете то есть она создается какой-то там приложение на вешать на него кал бег на события gti weight запускает приложение в call by kim создаем окошко назначаемым утопил размер показываем главным и сдачу было уместиться на сайт а вот тоже самое переписали на печке первые затем создаем объект почему мы даем на вход описание интерфейса то есть последовал сейчас опущу да по сути дела это аж файл то есть а хедер и негатив который мы грузим после этого все функции которые описаны в интерфейсе становится доступной как методы объекта эфа и все параметры которыми пролема не автоматически транслируются абсолютно прозрачно и что бинарные представлении которое нужно так что как вы здесь видите все практически один в один из предыдущего примера единственный может быть разница это в том что там мы посылали call back а как адрес разумеется все а в php мы посылаем как имя функции прямо по большому счету мы могли бы здесь использовать временную функцию ли кожа моего собственного that работы теперь посмотрим как видите интерфейс очень хочется просто строка которая прямо здесь у нас вот описывается скопированные из аж файла объявления функций прямо на сие никаких изменений чтобы не мешать в одном файле и и и пешки можно вынести все это в отдельный файл с нажмем u of тогда ваши буду там и краска латинка работает лучше единственное отличие в настоящего сиси это то что есть и будет работать и препроцессор то есть нельзя использовать онлайн и дефайны а вот и дефайны которые сверху 2 али специальные то есть они означают имя для данного интерфейсе и говорят какую библиотеку будет подгружать мы можем пойти ещё дальше и создать библиотеку поскольку ф а у нас даже опасно технологии мы не хотим давать его там в руки кому попало ну а затем этот обед подменю как минус прячем сделаем приватным внутри класса ну а загружать теперь будем не с помощью создавать уфы объекты с помощью такой себе по с помощью файлов который читает как раз вот тот наших ас файл из предыдущего слайда все остальное протекать и творил единственное что мы здесь стали использовать функцию безымянную в качестве обработчика события и передаем тайтл с помощью лексического связывает мы используем как бы это эссе энакина сильную сторону печки которой всему как раз были бы недоступны абсолют вот подумал бега так что подобным образом можно было бы использовать в вашем приложении единственное что хорошо на будет работать только в командной строке потому что если вы засунете это внутри вообще ливера что у вас получится у вас будет на каждом запросе считаться файлу с уфой ffh создаваться загружаться библиотека ведется белякович очень будет делаться очень много личной работы и чтобы можно было позволить писать по сути дела расширение печки на самом печки мы решили скрестить и фафа из при лоудинги опять практически ничего не изменилось только по теперь вот этот файл мы отдаем про улитку и лот мы делаем не момент мы делаем никогда интерфейса не тогда когда мы создаем объект а непосредственно момент при логинка то есть у нас проводится это саладин раз все разбора делаются один раз а с помощью поисков мы просто по имени этот интерфейс получаем и дальше все это начинает работать у даже можем такую так умрите же использовать веб-сервера конечно это не для gui из вы все равно примера мощности таким образом написать building к морской или какой-то другой босдайк базе данных ну и собственно так используя подобным образом созданное расширение мы можем использовать ресурсы с помощью от прямо из командной строки с помощью одной функции и еще один плюс из скрещивания фифа и приложен к то что можем запретить использовать и файл для всех ее другого скриптов то есть мы можем сказать что вы для природе нгам те фактор мы проводим им доверяем и тут effire дирижер попытки вызвать и фафа и из обычных 5 списка юнцов пор запрещен и еще одна интересность фифа это то что он умеет работать с нативными структурами данных мы можем в любой момент создать любую структуру данных описаны носи в данном случае мы создаем массив из 100 структуру содержащих 2 интерьера и внутри памяти это будет представлено именно вот как это описано си а после этого можем работать и структуры данных с помощью обычных примитивов печки как будто бы это массив объектов или по-другому придумал использовать это мой аккаунт и интегрировать от массивом даже и требовать по ссылке но внутри это занимает всего 800 байт эта структура сети моя писанина все надо занимал бы вы описали бы использовали печь песня для структура данных то занимал банан у нас наверное 10 раз больше памяти но к сожалению скорость работает фай пока оставляет желать лучшего дело в том что реализованы все примитивы как объекты или обращаются они к памяти с помощью call back of которые в каждый раз должны вычислить что там за тип лежит какое смещение поэтому опросником примере который там делать эту сумму массивов получается что ff а я использование фая дает двукратное замедление и на самом деле подобные подобно же сталкиваются и другие языки в разной мере хотя тут есть некий возможности прогресс может генерируя специальный вход для своего effire и по большому счету если мы пойдем этим путем то мы сможем еще и wi-fi и , генерировать реально оптимальный код по сути дела можем выписать на печке забываем это будет разрываться как из чистого сил ну на этом собственно все хорошо вопросов ряд оставлю такой слайд это люди которые были так или иначе и помогали делать все что о чем я рассказываю так лебега кто помогал а работать кто просто пинком под зад дмитрию вопрос такой разработчики пички штору вас не проклянут отзыв о fly за что zf а им же надо будет все вот это скрещивать сиз паха но я думаю они получат еще работу так разработчики не прикрыл тогда однозначно доклад такой вопрос а вот гибридной виртуальная машина которая там оптимизирована фактически под спекулятивные исполнении процессоров она все не сломается когда мы по наставим все патчи от уязвимости процессорах на самом деле все эти патчи существенно замедляют работу linux то есть и я сижу танку т-34 ну помимо чего 413 319 потому что начиная с пятерки все тормозит минимум процентов на 5 10 то есть до замедляется все вот еще вопрос насколько в принципе в оптимизации компилятора вы пошли именно вот в оптимизацию под процессоры не особенно далеко то есть скажем так марки оптимизируем конкретно просто пода интеловской архитектура из 88 64 уперли не упираясь при этом конкретный там целое семейство процессоров тогда мы используем два для для арифметики с плавающей точки используемого и кстати он доступен но не более того спасибо добрый день спасибо за доклад у меня такой вопрос немножко не по теме доклада занимаетесь ли вы и оптимизация my памяти потребляемой памяти процессов да собственно то с чего начался 70 нему производительности нет на самом деле я сейчас прекрасно понимают что вся производительность нас получается именно и от памяти со стороны можно нужно задам собст вопрос сейчас беспечный процесс имеет очень мало контроль над освобождением памяти и очень мало контроля даже на тему на той цифры с потребляемой памяти которая сейчас существует особенно вот в extension of планируется и какие-то нововведения связаны с тем что под контроль как то усилить и получать больше информации больше освобождать систему возможно существ никакой возможности чей процесс хотят обман set the делаем once это просто возвращает память в пул они систему и процесс постоянное потребление увеличивает и в итоге в конце концов и может кончиться нападением по памяти имеется ввиду именно менеджер памяти php или эти съемным на aser памяти ну и то и другое то есть мне ну как сублимация поняла память от привычного процесса начал обратно систему чтобы синему менеджер памяти psp именно для этого и создан чтобы освобождать память во первых мы не можем есть у нас и всегда и есть reference accounting если мы освобождаем всю память от неиспользуемых объектов давай его обратно менеджер памяти psp менеджер памяти письки также союзники и garbage collector который в случае если начинает расти слишком много потратить какое-то время на то что освободить те страницы которые неиспользуемые но до приправили то при сильной фрагментации то есть возможно что что ты не сможешь освободить развивать в этом направлении и панели оптимизации по памяти или из них не стерпит они когда то есть процесс идет к тебе нет учился часто стоит здесь вот эти-то дома вопрос у вас в поле зрения и вам проспали передней есть что в этом направлении можно сделать все что в перспективе может на самом деле я не вижу пока что если борки это предложения сильных предложений под сильных улучшений не пока не ждать погнул пока не буриться предложение что конкретно стоит сделать то есть у меня иди пока что нету предлагает каким он был таким образом можно получить то есть у нас очень неплохой нахер памяти которые для печки специально оптимизироваться дмитрий спасибо за доклад меня интересует возможность в будущем рассмотрим apple лоудинги продвинуться ещё чуть дальше и научить печки собственно сохранять инстанцию например есть фреймворк там sinfonie прочее и они все стартуют свой контейнер станут стартуют всякие сервисы то есть что хочется получить и вообще возможно лет получить что в некотором будущем у нас shared memory находится например про гружёный полностью контейнер симфоний со всеми уже про нецензированная подключением базам данных там еще к чему-нибудь и мы просто вызываем у него метод findall вот как вы считаете мы можем ли мы как-то вот до двинуться дойти до состояния когда у нас есть ему то был объекты в памяти shared памяти и они вызывают основной процесс максимально эффективно для обработки то что касается кода принципе нет проблем и сейчас мы можем кешировать и загружать по файлам в принципе мы за предательство отчётами да ну это в итоге это только в класс хорошо то есть данные по данным мы можем делать ему то было рейсом это было скалярное значение с объектами немножко сложнее пока что мы не можем делать им то есть сохранять объекты без стерилизации а возможно будет ближайшем время это может быть за восьмеркой хороша retina как я представитель сохранить на диск snapshot который имеет connection в базе данных нет он вот момент старта паркера допустим и когда мы стартуем worker вот он поднимает все свое состояние также как допустим тогда это возможно с помощью механизмов 10 реализации этом slip ослепли как называется ну вот да то есть но вот сейчас мы это вынуждать каждый раз загрузить состоянии интересно было бы его поднять один раз и держать то есть сейчас печки это не позволяет сделать вам постоянно уходит механизм сериализации довольно такая дорогая процедура и не очень удобно потому что мы можем состоянии прямо хранить как есть и шарик между разными процессами вот то есть и у нас появится возможность это наверно было бы прямо вот вообще ну вот к производительности очень круто так я сказал с объектами из connection is ресурсы у нас наверное вряд ли все это получится а идея сделать более правильные интерфейсе то что было раньше описи сегодня записью это вот идея как бы витает в воздухе о том сейчас мы каждый раз когда что-то записываем 0 читаем но все время серьезным бисер лизу им процент или могли бы туда записывать делать ему это было рейсы достучаться к нему без намного намного быстрее спасибо здравствуйте я здесь прямо здравствуйте дмитрий большое спасибо за доклад вот session ее структурных спички коде очень крут очень важный вопрос где взять такую футболку как у вас таких это больше давались порежем на законе здравствуйте и спасибо за доклад у меня вопрос не про восьмую версию но про будущее сегодня был доклад про синхронный php и хотелось бы узнать ваше мнение у меня двоякое мнение с одной стороны все три штучки интересно все это можно использовать и хорошо если это burti даже сделана на самом деле про существуют другие языки где-то сделать намного проще действительно тонуть же сделаться на голову куда проще чем на печке если будут люди которые будут хотеть это сделать я буду помогать и что сам я на это время дарить свою не очень хочу все понял вас спасибо расскажите просто вот вы рассказывали про при локинг будешь версии php я вот не совсем про такой момент это приводит вручную нужно будет настраивать то есть указать набор файлов или все файлы которые требуются приладить или он автоматически каким-то образом приводит часть файлов костюм и говоря о том что нужно вручную проконтролировать там наиболее используемые горячий файлы с тем какой-то списаться стать всех файлов то есть они по есть ручной автоматический режим или только ручной режим той можешь мной по сути дела вы пишите пишите сценарий загрузки на самом печки и там говорите какие файлы вы хотите грузить и какой-то будет формат списка приложены формат такой резак какой вы захотите в данном случае у нас была просто функция которая вызывала об пешком по файл вот этап пешком пфл однако загружается скрипту памяти не не выполняя его вы сможете про скотт списка янтаря по прыжкам павел файл и 20 файлов пойдет спасибо здрасте спасибо большое за доклад у меня тоже в дополнение к предыдущему вопросу можно ли будет сделать исключение файлов то есть они же загружать все а исключать и конечно вы пишете до печки поэтому можете это чувство года первоначально приладим разрабатывался использовать ini файлов но когда я порвал что сначала нужно указать из какого директория потом с какими экстремистами потому что исключать я просто легче просто сделать или дать от развязать руки вам чтобы вы написали то что вы сами захотите умолчанию сделать чтоб он по умолчать о матери нет помолчали сколько вы загружаете один файл жизнь этого файла вы делаете что хотите посему но авто при пэнтс он загружается на каждом запросе а это загружается один раз представьте серверов да да да это одна из задач которая для чего делается при loading то есть когда мы прочитали все мы можем сесть классы внутри связать можем сделать глобальную оптимизацию сохранять ссылки между классами функциями сделать более продуктивный даже байт-код собственно вы видели пяти процентной ускорения просто использовать проводим ко мне тут касательно предыдущего вопроса по при лозунгу и понимаю что как только мы приводим какие-то классы они уже больше не будут загружаться авто логиком соответственно операции типа и живут они могут приводить к ошибкам и повторно определения класса то есть надо быть внимательным к тому чтобы кот не попадался на такие вот штуки нет нет нет нет то есть их налоги только прозрачная вы может полететь самые include и все будет работать и никаких ошибок не будет просто такая классическая там ошибка раньше существа для pc когда пытаешься загрузить класс который уже существует году бинарных все время ругался что она 3d клэр глаз потому что уже экзисте нету класса уже будет загрузим на и скрипт будет загружен вот пример низкий скрипт будет подготовлен загрузку это он бы взять папка шида классу загружен и из этого скрипта это так будет выкинуть поэтому вы можете скриптинг людей а класс будет доступен еще сам вращала даже даже бизнес люди а то есть вот symfony которая последней версии не пользоваться авто лозунгом а постоянно прям included конкретные файла она не получит ошибку что я там какой то которым уровне надо попробовать кто знает хорошо спасибо нас тут еще привет у меня просто немножко специфически наверное была речь что в джетте есть проблемы с уводом типов есть идея узнавать их на youtube ну как супер формацию будете возможность получить эту информацию в рандами что такая эта функция вызывается вот там с массивом или причине возможно на самом деле мы уже имеем все структуры данных в печке которым собираемся использовать что там есть некие runtime кэш котором мы все спешим использовала какой line cash при вызове функции рисовали классов мы собираемся вы просто расширить и туда же писать информацию от их типа которой встречаются то есть поставить некие дополнительные инструкции либо расширить наши существующие обработчики либо ввести специальный режим интерпретации после того как это формата собрано понятно что можно получить это может либо специальной формы расширение конечно же нужен кто-то написать но это понятно спасибо ещё раз вопрос давать последних спасибо за доклад вопрос по природе нгу я правильно понял что если мы делаем новый deploy смиренными файлом мы должны перезапустится на весь сервер мы не можем через appcache compair файл просто перейди записать данные которые уже лежат во каша сожалению нет потому что у нас получается все связано между собой мы не можем изменить один файл просто то есть постоянно надо при тип ну не постоянно . если вы хотите заменить что то из того что распри ладена мы должны сейчас рестарте то есть была идея никита и как это делает лучше но чтобы реализовать нужно еще поработать то есть пока только restart мы не можем надобно очистить от мешка не можем данными предыдущему последним опросам тоже все таки появился проблема с симфонии и кэшем который он создает для модели например или для 3g или еще чего-то то есть мы сделали deploy да у нас первым выполняется при лот когда мы хотим за приводить какие-то файлы но мы еще не смогли лишь еще пока ничего приводит как-то выйти из этой ситуации если мы хотим переводится эти вот кашель кашель и файлы вы можете их создать на этапе приводят к у вас руках скрипт вы можете здесь их от вас может получить управление капли кришна-према здесь все за чего нет при этом в принципе все возможно я не представляю какой объем работ это будет делаться в принципе для этого сделано вот такая простая и гибкая система управления проводим там спасибо ну что ж лучший вопрос дмитрий да давайте последний и небольшой подарок для вас спасибо сейчас у нас небольшой перерыв на обед и после обеда возвращайтесь на доклад от александра ли саченко про самые неожиданные трюки ."
}