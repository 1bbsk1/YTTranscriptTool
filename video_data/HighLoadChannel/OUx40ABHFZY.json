{
  "video_id": "OUx40ABHFZY",
  "channel": "HighLoadChannel",
  "title": "Odyssey roadmap: что ещё мы хотим от пулера соединений / Андрей Бородин (Яндекс)",
  "views": 977,
  "duration": 2304,
  "published": "2020-04-14T11:05:47-07:00",
  "text": "всем привет как уже сказали меня зовут андрей в яндексе я занимаюсь разработкой упал собственных баз данных артикуляционных в основном и сегодня у нас тема про connection кулер кулер соединений пуля точек и такое слово если вы знаете как назвать connection puller по-русски подойдите ко мне или напишите мне я очень хочу найти хороший технический термин который должен устояться в технической литературе тема в принципе довольно сложная потому что в многих базах данных конечно туры встроенные про него знать даже не на какие-то настройки конечно везде есть но в пост засидок не получается и вот у нас параллельно идет доклад кажется николая самохвалова про настройку запросов возрасте я так понимаю что сюда пришли люди которые уже настроили запросы идеально и люди к этому которые сталкиваются значительно более такими редкими системными проблемами в пор просеять про утилизацию ресурсов и наверное да у нас тут местами может быть довольно сложно в том плане что проблема не очевидны вот но сначала я наверно расскажу про то что в яндексе есть под груз много индекс облаке живут многие сервисы яндекса и у нас несколько петабайт данных которые генерируют ну точно не меньше миллиона запросов в секунду в позе раз и и мы предоставляем достаточно такой типовой кластер всем сервисам это основная праймари надо узла обычно 2 singsing две реплики синхронные и асинхронные ну там резервное копирования масштабирования читающих запросов на реплики в общем все как мы любим каждый узел кластера это под газ на котором кроме подвеса и систем мониторинга еще установлен connection кулер в connection puller нас используются для сенсинга ну и собственно по своему основному назначению что за такое основное назначение connection кулера ну в поясе принято процессная модель работы с базой данных это означает что одно входящее соединение это один процесс один back and grass и в этом бэг-энде очень много различных вещей которые ну да довольно дорого пас постоянно не сбрасывать для делать разными для различных соединений кроме того в коде полюсов есть массив который называется прогрей кота и собственно содержит основные данные сетевых соединений и почти всей алгоритмы обработки про керри они имеют линейную сложности не продвигаются по всему массиву сетевых соединений это довольно быстрый цикл но с большим количеством входящих сетевых соединений все становится немножко дороже а когда все стало немножко дороже в итоге можно заплатить довольно большую цену за большое количество сетевых соединений где можно экономить сетевые соединения существуют три возможных подхода это на стороне приложения на стороне базы данных и где-то между и все возможные комбинации к сожалению встроенный кулер сейчас находится в стадии разработки друзья в компании под газ professional основном и и занимаются когда он появится сложно предсказать будущее и фактически на выбор архитектора но сейчас два решения это приклеишь на сайт pulling и какой-то прокси pulling при конечно сайт pulling это самый простой способ с чего-то начинать и почти все клиентские драйвера вам предоставляют способ миллионы ваших соединений в коде представить в виде некоторые десятков соединений в базу данных кстати вот тут хотелось бы спросить у кого есть 100 соединений в базу данных лично у кого есть 1000 соединение в базу данных не все индекса виды поднимает руки причем это правда 1000 соединения тоже довольно много у кого есть 10 тысяч соединений в базу данных так да вот один человек да там будем считать индекса идов давайте этому одному человеку мы подарим какой-нибудь вот подойдите потом после доклада я вам подарю приза большое количество соединений в базу данных ну вот возникают проблемы с тем что в определенный момент вы хотите масштабировать backend вы хотите развернуть его на множество виртуальных машин потом вы еще осознаете что у вас несколько зон доступности несколько дата-центров и подход с клиент сайт пудингом довольно быстро приводит к большим числом собственно большие это вот вот порядка 10 десятков тысяч соединений это уже в общем наверно край того что может нормально работать если говорить про прокси puller и ну есть два пульта которые умеют очень много всего они не только puller и они puller и плюс еще классная функциональность это джипу экранчик прокси но к сожалению это дополнительная функциональность она не всем нужно и она приводит потому что puller и поддерживают только сессионные pulling а то есть один входящий клиент 11 исходящие клиенту базу данных для для наших задач это не очень хорошо подходит поэтому мы используем пиджей bouncer которые реализуют транзакционный pulling то есть серверное соединение сопоставляется клиентском соединение только на время транзакции вот такой вот слайд у меня есть пять же баланса наше все и наверное на нашей нагрузки это правда но есть теперь же балансовое мне несколько проблем проблема начинается когда вы хотите диагностировать сессию потому что все входящие соединения вас локальные все пришли со службы к и как-то трассировать сессию становится сложно конечно вы можете использовать апликэйшен name it холст это способ на стороне балансира добавить и пи адрес в апликэйшен name но апликэйшен name устанавливается дополнительным соединением на этом графике вы видите желтую линию реальных запросов и синюю линию запросов которые в летающие витают в базу и вот этот вот разница это именно установка апликэйшен nemo который нужен только для трассировки ну совершенно не бесплатный кроме того в балансире нельзя ограничить один пункт количество соединений с базой данных на определенного пользователя на определенную базу к чему это приводит у вас есть нагружены сервис написанной там на си плюс плюс или какой-нибудь там ассемблере космических языках где-то рядом маленький сервис на ноги который ничего страшного с базой не делает но его драйвер иногда сходит с ума о открывая 20 тысяч соединений все остальное подождет вас даже код нормальный там не только ваш код хотелось бы ограничить ну мы конечно написали маленький патчик для балансира который добавил эту настройку ограничение клиентов на пол можно было бы это сделать на стороне подброса то есть просто роли в базе данных ограничить количество соединений но тогда вы теряете возможность понять почему вас нет соединения с сервером пиджи баузер не пробрасывать ошибку соединения он возвращает всегда одно и то одну и ту же информацию вы не можете понять может вас пароль поменялся может быть просто база для глаз может быть что то не так но диагноз диагностики никакой нет если счастью нельзя установить вы не знаете почему это невозможно сделать в определенный момент вы смотрите на графики приложения и видите что приложение не работает смотрите в топ и видите что bouncer однопоточный это поворотный момент в жизни сервиса вы понимаете что вы готовились к масштабированию база данных через полтора года вам нужно масштабировать puller но мы пришли к тому что нам нужно больше балансиров немножко запотели bouncer и сделали так что может быть поднята с перри использованием 10 пальта несколько балансиров и уже операционная система входящие тисе пи соединения между ними автоматически раунда роббеном перекладывает это прозрачно для клиентов то есть все выглядит как будто у вас один bouncer но у вас есть фрагментация idol соединение между запущенными ваши вами балансирами и в определенный момент вы можете заметить что вот тут у нас 3 bouncer а которые съедают каждый свое ядро ну сто процентов вам нужно довольно много балансиров почему потому что у вас есть tls у вас есть шифрованное соединение и если про бенчмарка puzzles с лесами без tls обнаружить что количество установленных соединений падает почти на два порядка с включением шифрования потому что kitty tls хен шейк потребляет ресурсы центрального процессора и в топе вы можете увидеть довольно много криптографических функций которые выполняются при волне входящих соединений поскольку у нас праймари может переключаться между зонами доступности волна входящих соединений довольно типичная ситуация то есть по какой-то причине про старый праймале был недоступен всю нагрузку отправили в другой дата-центр они все одновременно придут поздороваться с голосом и большое количество тсн шейков может здороваться уже не с балансиром а вот так вот горло сдавить и по здорово по в общем из-за тайм-аута волна входящих соединений может стать не затухающий потому что если у вас ветра их в базу без экспонент shell быков не будут приходить снова и снова когерентной волной вот пример 16 5 балансиров которые грузят 16 ядерно сто процентов ну мы пришли к каскадного bouncer о это как бы лучше и конфигурации которую можно достигнуть на нашей нагрузки с балансиром и в принципе такая каскадная система внешние bouncer и у нас служат для эти стихи пекин шейков внутренние bouncer и служат для реального буллинга для того чтобы не сильно фрагментировать внешнее соединение в такой конфигурации возможно плавный restart можно ли ставить на рестарте все эти 18 балансиров по одному но поддерживать эту конфигурацию довольно сложно системный администратор а devops ее и в общем люди которые действительно несут ответственность за этот сервер будет не очень рады такой сложной движущиеся схеме ну казалось бы можно было бы вот все вот это вот все наши доработки продвигать в open source но bouncer не очень хорошо саппортить например солью спорт возможность запустить несколько и банкиров на одном порту зак и метели месяц назад по request с этой функции был кажется два с половиной три с половиной много лет назад или например еще один пример в пользу версии вы можете отменить выполняющийся запрос под отправив секрет по-другому соединению без от лишней аутентификации но некоторые клиенты отправляют просто одессе пересек рвут сетевое соединение при этом что сделать bouncer и он ничего не сделает он продолжит выполнять запрос если у вас пришло огромное количество соединений которые маленькими запросами положили базу просто оторвать соединение от bouncer будет недостаточно нужно еще и завершить те запросы которые бегут в базе это была за пачино и это эта проблема все еще не в мире жили в up stream bouncer и так мы пришли к тому что нам нужен свой connection кулер который будет развиваться по чтеца в которой можно будет оперативно исправлять проблемы ну и который конечно же должен быть многопоточном многопоточность мы поставили как основную задачу то есть нам нужно хорошо выдерживать волну входящих tls соединений для этого нам пришлось разработать отдельную библиотеку который называется machinarium которая предназначена для описания машины состояний сетевого соединения как последовательного кода если вы посмотрите в исходный код лепите вы увидите довольно сложные вызовы которые могут вернуть вам и результат и сказать вызови меня чуть попозже сейчас у меня пока что и о но когда его пройдет у меня будет нагрузка для процессора вот и это многоуровневая схема мы сделали так что можно описать вот эту машину состояний в виде последовательного кода просто иногда говорят что вот сейчас . когда я делаю и о передай контекст моего выполнения другому иногда называют grindr эту вот в итоге у нас есть один поток который делает de happy accept и раунд роббеном передает множеству различных worker множеству worker of типе соединения при этом типе соединения кажет каждое клиентское соединение работает всегда на одном процессоре это позволяет сделать его cash from ли и кроме того мы доработали немножко сбор маленьких пакетов в один большой пакет для того чтобы разгрузить системный типе стек кроме того мы улучшили транса транзакционный pulling в том плане что одиссей при установленной на стройке может отправить council и rollback в случае обрыва сетевого соединения то есть если запрос никто не ждет одиссей скажет базе чтобы она не старалась выполнить тот запрос который может расходовать драгоценные ресурсы и по возможности мы сохраняем соединение за одним и тем же клиентам это позволяет не переустанавливать апликэйшен name этот host то есть у нас нет если это возможно у нас нету дополнительные переустановки параметров которые нужны для диагностики так кроме того поскольку мы работаем в общем-то в интересах индекс облака мы позаботились о том чтобы че если вы используете менеджер по сгрыз и у вас там установлен connection puller чтобы вы могли создать логическую репликацию наружу логическая репликация ну то есть как сказать уехать от нас если вам захочется при помощи логические репликации bouncer наружу поток логические репликации не отдаст пример настройки логические репликации кроме того у нас есть поддержка физически репликации наружу в облаке конечно она не возможно потому что тогда вам кластера даст слишком много информации про себя но в ваших инсталляциях если вам нужна физическая репликация через connection кулер в одиссее это возможно в одессе я полностью совместимый мониторинг спаджи балансе у нас такая же консоль которая выполняет почти все те же самые команды если чего-то не хватает присылайте pull request либо хотя бы еще убить хобби будем доделывать нужную команду на восток остановим астана я функциональность консоли g баузера у нас уже есть ну и конечно у нас есть вера forwarding то есть мы вернем ту ошибку которая которую сообщила база вы получите информацию почему вы не попадаете в базу они просто что вы не попадаете это возможность выключается на случай если вам нужно стопроцентная совместимость с балансиром мы можем вести себя также какие bouncer просто на всякий случай хотелось бы сказать несколько слов о том как обе сходном коде одиссея почему ну например есть команды пауз режим то есть они обычно используются для обновления базы данных если вам нужно обновить под газ вы можете поставить на паузу его в connection пузыри сделать g апгрейт после этого сделать резину и со стороны клиентов это будет выглядеть как будто база просто тормозило так вот эта функциональность к нам принесли люди из общества и в общем она пока еще не положено но скажу все будет кроме того одна из новых фич например в балансе это поддержка скрам аутентификации которая нам тоже принес человек который не работает яндекс облаке правда работает в яндексе ну совпадение вот и это в и то и другое функциональность сложное и важное вот поэтому хочется рассказать из чего сделан одиссей вдруг вы тоже сейчас захотите изучить или вы уже знаете си и хотите немножко пописать кода ну так вот у вас есть исходная база одиссея которая опирается на две основных библиотеки библиотека киви это реализация после слова протокола сообщение то есть нативный так называемые про то три укуса это стандартные сообщения которыми front-end и back-end могут обмениваться они реализованы библиотеки киви библиотека machinarium это библиотека реализации потоков небольшой фрагмент этого мы machinarium о написана на ассемблере но не пугайтесь там 15 строчек соленых команд вот так архитектура одиссея есть основная основная так называемая машина в которой запущенные к рутины в этой машине реализуются accept входящих 10 соединений и распределение по варке рам внутри одного worker а может может работать несколько клиентов обработчиков несколько нескольких клиентов вот так же в основном потоке крутится консоль и и обработка крон задач по удалению соединений которые больше не нужны в поле для тестирования детей а используется стандартный набор тестов позже со просто запускаем install чек через через bouncer и через одиссей и получаем 0 div то есть там нет несколько тестов связаны с форматированием дат не проходят абсолютно одинаково в баунти ри и в одиссее кроме того есть множество драйверов которые тоже имеют свое тестирование и их тесты мы используем для тестирования одиссея кроме того из-за нашей каскадной конфигурации нам приходится тестировать различные связки пузырь с одиссей одиссей postgres и bouncer детей и одиссей bouncy и одиссей одиссей для того чтобы быть уверенными в том что если одиссея оказался какой-то из частей в каскаде он тоже по-прежнему работать так как мы ожидаем это грабли мы на них наступали вот ну как bizzotto в системном программировании мы используем детей в продакшене и ну было бы нечестно себя сказал что все просто работает нет ну то есть да но но не всегда например в продакшене все просто работал а потом пришли опять же наши друзья использовать profession она сказала сказали что у нас есть но мой великий они правда были мы их исправили но это было просто это было слишком просто даже потом мы обнаружили что в connection пури есть входящий и тело соединения и исходящие тело соединения и в соединениях нужны клиентские сертификаты и серверные сертификаты сервисе фидер сертификаты bouncy и одиссей перечитывают каждый раз перечитывают конечно же испечь каша но клиентские сертификаты перечитывать из пачки шанина да это потому что наши масштабируемые детей в итоге упирается в системную производительность чтение этого сертификата это для нас стало неожиданностью потому что у персон далеко не сразу сначала он длине и на масштабировал салат рука где-то после там 20000 входящих соединений одновременных эта проблема себя проявила флаг был сын типичный метод это возможность аутентифицироваться встроенными linux новыми средствами ввп пиджи балансе она реализована так что есть отдельный поток на ожидании ответа от pump и есть основной поток пиджи bouncer а который обслуживает текущие соединения и может попросить их пожить в потоке пома мы от не стали реализовывать по одной простой причине у нас же много потоков зачем это нам нужно в итоге в принципе это может создавать проблемы с тем что если у вас есть помогут они дефекация и не помогут анти фикации большая волна помогут индикации может существенно задерживать быструю не по mode in дефекацию это вот одна из тех штук то ему не исправили но если вы вдруг хотите что-то исправить можете заняться вот этим еще одни грабли были с тем что у нас есть один поток который делает accept всем входящим соединением и потом их передает на worker пул где будет происходить собственно тела скин шейк в итоге если у вас есть клиент на я волна из 20000 сетевых соединений они все будут приняты и на стороне на стороне клиента или пике начнет отсчет тайм-аута по умолчанию что три секунды там стоит если они все не могут одновременно зайти в базу то не могут зайти в базу потому что все это может быть покрыта не экспоненциальным нет экспоненциальным ретро им мы пришли к тому что скопировали здесь схему с пиджи балансира с тем что у нас есть тротлинг количество соединений которые мы делаем except если мы видим что мы акцептом соединение они в итоге не успевают пахан шейка ца мы ставим их в очередь для того чтобы они не расходовали ресурсы центрального процессора это приводит к тому что одновременно handshake может производиться мне для всех соединений которые пришли но хотя бы кто-то в базу зайдет даже если нагрузка на входящие достаточно сильная чего хотелось бы увидеть в будущем в одиссее что мы готовы сами разрабатывать и с чего бы мы ждали от сообщества ну вот так выглядел road map одиссея в августе мы хотели скрам и пам пам аутентификацию мы хотели forwarding читающих запросов на любой ему хотелось бы онлайн restart и возможность делать паузу на сервере половину этого рода road map а выполнена при чем как бы в общем не нами и это хорошо поэтому давайте обсудим то что осталось и добавим что-то еще касательно for вардинга читающих запросов на стендбай да у нас есть реплики которые без выполнения запросов будут просто греть воздух они нам необходимы для обеспечения файла вера и свеча вера в случае проблема в одном из дата-центров мы хотелось бы их занять какой-то полезной работой потому что те же самые центральные процессоры та же самая память мы не можем сконфигурировать их принципиально по-другому потому что иначе не будет работать репликация вот в принципе в поясе и начиная кажется с десятки есть возможность присоединение указать также совершенно 3 beauties опрос вы в соединении можете перечислить все хасты базы данных и сказать зачем вы идете в базу данных пописать или только почитать и драйвера сам выберет ближайших первый по списку хост который мы больше нравится который выполняет требования также цешин адрес но проблема этого подхода в том что он не контролирует лагере при кации у вас может быть какая то реплика которая отстала на неприемлемое для вашего сервиса время вот для того чтобы сделать полнофункциональное полного функциональное выполнение читающих запросов на реплики по сути нам нужно поддержать в bouncy ри возможность не работать когда читать нельзя то есть болтливая одиссей должен ходить временами в базу и спрашивать расстояние по облигационные расстояние от праймари и если она достигла предельного значения новые запросы просто в базу не пускать сказать клиенту что нужно заново инициировать соединение и возможно выбрать другой хост для выполнения запросов это позволит базе быстрее восстановить реплика ционный лак и снова вернуться для ответа запросам вот эту функцию ближайшее время у сроки сложно назвать такое вот ну ну но надеюсь что не два с половиной года как как у коллеги из печи bouncer а вот эту функцию хотелось бы видеть в одессе в сообществе люди спрашивали про поддержку prepared statements сейчас вы можете создать припаять statement с двумя способ во-первых маму вы можете за выполните скверную команду собственно припер тут мы ничего сделать не сможем то есть до того чтобы понять эту скверную команду нам нужно научиться понимать es que el на стороне баланса это был было ракел потому что это просто перебор потому что нам нужен целиком парсер мы не можем просить каждую сказки единую команду вот но есть препарат statements на уровне сетевого на уровне протокола сообщение а про то 3 и вы это то место когда информация о том что создается prepared statements приходит в структурированном виде и мы могли бы подержать понимание того что на каком-то серверном соединение клиент попросил создать препарат statement и даже если транзакция закрылась нам нужно по-прежнему поддерживать связность сервера и клиента и тут возникает расхождение в диалоге и потому что кто-то говорит о том что нужно понимать что какое именно prepared statements создал клиент и сша ведь разделять серверное соединение между всеми клиентами которые создали это серверное соединение которые создали такой prepaid statement on his friend вообще сказал что если к вам пришел клиент который уже создавал в другом серверном соединение такой препарат statement просто создайте его за него но кажется это немножко не правильно выполнять запросы в базе вместо клиента но конечно с точки зрения разработчика который пишет протокол взаимодействия с базы это было бы удобно если бы ему просто далее сетевое соединение в котором есть такой подготовлю подготовленный запрос так и еще одна фича в которую нам нужно реализовать у нас сейчас есть мониторинг совместимый с пиджи баузером мы можем вернуть среднее время выполнения запроса но среднее время средняя температура по больнице кто-то холодный кто-то теплых среднем все здорово это неправда нам нужно реализовать поддержку персоналий которые бы указывали на то что есть медленные запросы которые расходуют ресурсы и сделали бы мониторинг более приемлемым ну и самое главное конечно же хочется в россию 10 дело в том что сейчас одиссей находится в россии 1р сид release candidate и вообще все грабли которая сейчас перечислил были по через подчинены ровно с той самой версии кроме на море ликов мимо велики были не было уже много великов к моменту лис кандидата что для нас будет означать версия 1 0 мы выкатываем одиссея на свои базы он уже сейчас работает наших базах но вот когда он достигнет точки в миллион запросов в секунду мы будем готовы сказать что это релизная версия и эта версия которые можно назвать 10 в сообществе никак несколько человек попросили что в версии 10 были еще пауза и скрам но это будет означать что нам на будет выкатить в пруду в следующую версию потому что не скоро мне паузу до сих пор не поняла жена хотя вопрос только во времени кода и скорее всего этот вопрос будет достаточно оперативно решен но в общем что я хочу сказать я жду ваших pull request of и ещё хотелось бы услышать какие у вас есть проблемы с баузером давайте их обсудим может быть мы можем как-то какие-то функции реализовать которые нужны вам на этом моя часть закончена я хотел бы послушать вас спасибо сначала мы вам мы выразим благодарность за ваш доклад за ваши выступления вот и тогда можем прийти к вопросам что кого интересует у кого есть вопросы вижу вас а если я свой поставлю application name он был и правильно прокидывать деньги мы используем если тренировки так в одиссея или в бампере одиссей обо всех окидывает я знаю значит у нас тут мы сосед мы сделаем и если сведение моя будет передаваться ну реально сиденье будет прыгать по мы сделаем все от всех параметров которые перечислены в списке передаваемых я вот сейчас не могу сказать если в этом списке на самом деле приписанным кажется его там увидел но да мы установим все те те же параметры одним запросом томс это делается всего что было установлено клиентом при стартапе скажите he could проблему с траву а я вижу там человек спасибо за доклад клёвый доклад рад что одиссей с каждой минутой развивается все быстрее быстрее желаю также продолжать мы уже обращались с вопросом с просьбой желанием иметь молчит и the source подключение то есть чтобы пить чтобы одиссей производил как бы мог подключаться одновременно к разным базам данным то есть мастер slave а потом автоматически после фола вера как бы подключаться уже к новому мастеру так дай я кажется припоминаю эту дискуссию сейчас есть несколько стой джей но вот переключение между ними нету как предполагается то есть мы должны на своей стороне опрашивать сервер что он ещё жив из и понимать что произошел sailor кто-кто вызовет пути жизнь recovery вот то есть у меня есть стандартный способ понять что мы пришли не на мастер вот вопрос в том мы должны понять как ты из ошибок или ну то есть идея интересна она обсуждается пишите больше комментариев если у вас есть рабочие руки которые знают и то это вообще замечательно мы готовили ведь конечно но и то есть вопрос масштабирования по репликам нас тоже интересует потому что мы хотим сделать топ сунул этих ребят северных кластеров максимально простым для разработчиков приложений будут хотелось бы комментариев больше то есть как как именно сделать так как как как хорошо но давайте туда обсудим еще в кулуарах вот еще кого-нибудь что-нибудь интересует напоминаю вы можете выиграть имени при свете андрей понравится ваш вопрос ну тогда андрей выбирает он там там там есть еще вопрос сейчас мы на все ответим вот вопрос тоже про реплики по части вот у вас есть мастера несколько реплик и понятно что в реплику ходит но реже чем мастер за соединениями ну потому что но потому что у них может быть отличия то есть вы выговорились что отличие данных может быть такое что не будет удовлетворять вашему как бы бизнесу и вы не будете заходить внутрь танка на не до реплицируется вот но при этом то есть если вы долго туда не ходили а потом начали ходить как бы там кэш будет ну не слишком то есть те данные которые нужны они как бы не будут доступны сразу то есть мы постоянно ходим мастер там как бы кэш прогрет и сходим в реплику то есть так мы часто там как бы кэш но немного отстаёт вот это рода то есть поиск решений будет блоков данных который вы хотите влил каши не будет информация таблицах которые вы хотите в планах не будет распашных запросов которые то есть вообще это вообще ничего не будет как бы и когда вы то есть добавляете то есть у вас есть это классе вы добавляете на новой реплику допустим вот оно как бы тоже пока стартует у нее как бы все плохо но в пони то есть она как бы да но наращивается и конечно я понял идею но своей стране мы не можем то есть правильный правильный подход было бы запустить маленький процент запросов сначала на реку которые вы прогрели кэш а потом запустить ну то есть грубо говоря когда мы выполнили у нас есть условия что мы должны отставать не более чем на там 10 секунд от мастера да и это условие включать ни одной волной плавно для некоторых клиентов это хорошая идея ну сначала то что звонит это отключение сначала она просто выключится а потом подумаем как включится и спасибо за комментарии это обычная фичи о том чтобы плавно включать джинкс и есть такая опция соус старт в кластере для сервера и он как бы постепенно наращивать нагрузку soft start slow star as low старт до отличные идеи пасибо попробуем когда дойдём до этого или тому кто дойдет до этого мы скажем что такое тоже есть нет больше вопросов тогда выбирайте какой вопрос был вам больше интересен так вот это полезная фича я этого не знала и вот за слов столкнули надо дать книжку а человека у которого 10 тысяч соединений нужно подходить и тогда я могу могу сам папа или адам вы пойдемте сюда сфотографируемся так кому чего дать так наверно математика хотя с другой стороны цель который знает про слов так тоже думает как математик"
}