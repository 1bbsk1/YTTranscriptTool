{
  "video_id": "nmBu3m1ku-c",
  "channel": "HighLoadChannel",
  "title": "Почему видеостриминг через 15 лет возвращается с TCP на UDP /  Максим Лапшин (Эрливидео)",
  "views": 404,
  "duration": 2595,
  "published": "2023-10-06T07:24:27-07:00",
  "text": "Всем привет Меня зовут Максим Лапшин и я с девятого года занимаюсь стримингом видео в интернете и собственно говоря про это сегодня хотел поговорить потому что мы сегодня наблюдаем некоторые технические изменения которые могут сильно влиять на соседние индустрии не только видео Итак О чем речь о том что сначала без tcp было никак невозможно собственно Запустить видео в интернете и что сегодня мы наблюдаем ситуацию когда возможно будет отказ от tcp в пользу VP это очень непривычно потому что в целом Мы за много-много лет очень сильно привыкли к TP значит можно смело утверждать что онлайн видео появилось где-то в районе 2008 года конечно найдутся люди которые будут говорить Что до этого все было и мы в 2002 году в интернете видео стримили Это все из серии Могли сделать разума Но массово это после восьмого года но важно то что технические решения которые были сделаны тогда до восьмого года коллеги у меня я сильно слышу сильная Эхо вот если честно то что было до восьмого года очень многие решения они во-первых были на юге во-вторых они уже тогда были заложены все эти штуки которые есть и сегодня Ну хорошо значит что важно знать о том что в шестом году у нас был ретрансмит пакетов по иди пи а в седьмом году рфц на фек фек это Форвард correction Почему важно пойдем дальше но это все было до того как онлайн видео вообще массово появилось в интернете Итак эти механизм про который сказал это то как боролись с потерями Значит до того как видео было в интернете оно сжило прекрасно жила до этого порядка 10 лет если не больше в закрытых сетях то есть оператор строит свою сеть если его собственное закрытая сеть он сам контролирует нагрузку за ней и он сам по ней может гонять видео Ну это было телевидение цифровое телевидение по сути цифровое телевидение или какие-то закрытые системы ВКС по гарантированным каналам и вот там люди уже научились Как можно пакеты послать ещё раз так же как это происходит в TP или сразу послать побольше данных чтобы данных было больше Э да трафик растёт но зато сразу можно как-то жить с потерями значит А что у нас произошло в районе восьмого года по объему влияния можно сказать смело что основная штука это была доплеер ТМП это то что было на старте онлайн видео там были другие технологии тоже это не одна единственная но по сути всё остальное оно тихо исчезло рассосалось не взлетела в общем канула в лето а эти две страшные штуки остались с нами Ну к счастью Adobe Flash уже нет а вот rtmp к сожалению всё ещё живёт с нами значит я связываю это с тем что технологически сложилось интернет дорос а во-вторых крест восьмого года убил целый огромный всем огромной индустрии и печатной индустрии похоронил и деньги из оффлайна перетекли в онлайн там появились деньги которые можно было зарабатывать уже в интернете и всё это жило на tcp важное примечательная штука а до всё время купил команду которая делала ртф это был в районе восьмого девятого года Это был ep-доставка там всё было классно Круто И пертупира наработала и коррекция и ретрансмиты но они не осилили слишком сложно они показ tcp разобраться не магия не могли и по сути это единственное что у нас жила потому что даже браузерные плагины они были но где-то наверное лет пять назад окончательно сдохли чем хорош tcp Почему вообще мы на нем много 10 лет жили с ним без без каких-либо альтернатив это очень просто уже всё сделали в ядре ты все готово все хорошо работает все и как бы tcp предлагает только ретрансмит и других способов коррекции ошибок он по сути не предлагает Как сегодня выглядит раздача какого-нибудь 40 гигабитного сервера у нас стоит софт он пихает по 100 килобайт в сокет и дальше расслабляется Потому что все остальное правило берёт на себя ядро сетевая карта все это очень высоко оптимизированные штуки всё оптимизировано под tcp и у этого есть проблемы с которыми Мы пришли к сегодняшнему Дню во-первых это Head of line blocking это Back pression это либо эвент который И хорошо и плохо одновременно сейчас рассмотрим и мы не можем данные дропать в tcp он не таких возможностей не предоставляет Вот и прочее ограничение про которые мы сейчас поговорим значит ходовлайн блокинг это такая вообще главная причина по которой сегодня пытаются отказываться от tcp это проблема больше свойственна на самом деле хрому с HTML потому что он может подсматривать вперед в тот буфер который еще пришел в ядро но ещё не стал доступным и вот для HTML это полезнее от него отказаться от tcp потому что они могут параллельно какие-то вещи парсить а в чём суть проблемы пока Если у нас в буфере ядра уже приехал мегабайт но одного байта в начале нет то мы ничего не получаем всё ощущение что с той стороны залипла Хотя просто Мы ждём один несчастный байт который где-то потерялся и всё ещё едет а в случае с браузерами они умеют подсматривать вперёд брать не целые данные как-то достраивать по принципу потом дорисуем когда данный приедут в случае с видео это по-другому не так критично но тоже тоже полезно отказываться тоже полезно этой проблемы решать то есть Head of line это прям серьезная проблема Почему она еще меняет задержку у нас вроде была одна задержка от реального времени А когда включается механизм блокирования в ядрете в tcp-stake то задержка резко вырастает а потом обратно приходит пачка вот эти вот колебания они довольно болезненно для всего а бэкшер это очень важная штука которая крайне нужна для того чтобы перекачивать файлы по TP а-а ядро tcp-стек умеет блокировать блокировать того кто отправляет данные говорить ему подожди слишком много пихаешь не пролезает Давай попозже это нужно тогда когда у нас объём данных фиксирован и мы должны за минимальное время перегнать его а-а а вот для Live видео это вообще бессмысленно потому что Live видео работает в реальном времени у нас нарезается каждую секунду мегабайт полмегабайта данных и Либо они уходят к получателю либо нет смысла вообще здесь мучиться больше Отправить невозможно меньше отправить тоже бессмысленно поэтому Live видео не требует вообще бэкпрэшера не требует от этого механизма контроля скорости оно только вредит отсюда целая масса проблем например мешает заполнять буфер плеера потому что на старте из-за бекфрешили кондэшн-контрола у нас э может медленно заполняться буфер то есть начинается всякие эффекты артефакты с механизмы разгона скоро соединения механизмы его торможения то есть этот разгон соединения отдельно болезненная штука Мы например наблюдали Когда нужно иногда даже где-то обмануть ядро обмануть то есть обмануть клиента получателя и идти дальше Потому что например соединение которое вышло на режим оно ценнее для сервера Чем то которое устанавливается то есть надо иногда ценой каких-то проблем и сложностей дать просто вот пройти начало потому что э Хмм этот механизм конфликтует с задачами видео и у него есть следующая проблема он например на Большом РТТ когда большой РТ когда раунд трип тайм он умеет взять и снизить скорость Потому что так отработали алгоритмы хотя на самом деле для лайв видео для онлайн видео нету таких проблем как э-э то есть не требуется обязательно вовремя подтверждать но из-за механизма работы концершн-контрола оно может ядро может сказать например c++тек говорить что у нас скорость упала хотя на самом деле это не скорость упала Это просто есть некоторый артефакты подтверждения доставки из-за этого очень сильно усложняется серверный код что мы получили за 10-15 лет развития TP мы получили в каждом языке программирования в каждом сетевом ориентированном фреймворке У нас есть вторая копия шевелера У нас есть либо вент во всех его проявлениях а жуткое количество разных жуткое количество сил вложено в то чтобы это работало хорошо в ядре а Селект пол е пол и уюринг и прочие разные штуки вокруг этого ну реально в каждом языке программирования есть какой-то реактор который имеет позволяет жестипи как жить в ситуации когда данные вроде бы уши Вроде бы надо было их отправить в сеть а они не ушли и таких сокетов много а оттуда меняются целые языки программирования выстраиваются Вокруг этой Вокруг этой проблемы Значит у нас возникают рваные потоки исполнения кто писал на либовенте тот понимает О чём идёт речь кто Ну и пример я вас крипте до сих пор вопрос этот болезненный что у нас тут колбэки там промесы здесь микротрэды здесь Green Trade Future всё это следствие той проблемы которую мы сами создали с помощью tcp то есть мы там решили одну проблему а на других на двух концах теперь у нас вот такенная проблема такого размера а и в неё вложено столько человеческих сил что естественно отказываться от этой будет болезненно сложно доходит до того что tcp стек пытаются втаскивать юзер спейс или наоборот усложнять сильно ядро и вот мы не можем найти где же правильное Какое же правильное разделение между всем этим вместо того что есть некоторые ошибки выбранном выбранном выборе тогдашним значит программисты к этому привыкли сегодня кому-то кто сегодня вообще в принципе работал с vdp это маргинальная штука которая Просто непонятно что это куда это чего это этим мало кто пользуется все привыкли к той механике которая есть fcp с его реконнектами типа лайвами вокруг этого выстроена целые целые инфраструктуры выстроены вокруг того чтобы обойти баги tcp Какие еще сложности у нас возникают из-за которой заставляют вас отказываться от tcp уходить к vdp это Непонятно вообще что отправили значит tcp не дает никакого способа узнать что мы реально отправили на ту сторону и что реально туда пришло такой сигнализации нет мы не можем спросить у tcp стека по-моему практически ни одного А чего тебе с той стороны За конфирмили что подтвердили А что ты отправил по сути ядро всё что можно сообщить что я у тебя забрало данные и дальше это не твоего мадела Если что я тебе закрою сокет и выясняя сам что я туда отправила по сути получилось так что у нас есть потоковый протокол потоковый какой-то интерфейс в котором у нас данные льются просто вот байтовым потоком мы не знаем что ушло на ту сторону мы не знаем что пришло и мы начинаем там городить какой-то механизм позволяющий нарезать на куски и тот кто работал с xmpp в котором не было ограничителей нужно было парсить весь xml чтобы найти конец пакета тут понимает как это больно в принципе с видео ситуация аналогичная там тоже хватает проблем но вообще говоря границы вот этих пакетов они это целая история которая в каждом протоко- В каждом протоколе на tcp решает самостоятельно а отсюда же сложно гранулярно выбрасывать данные отказываться от посылки потому что мы не знаем то ли что-то уже начало ехать на ту сторону то ли не начало ехать и мы все делаем сигнализацию на уровне протоколов в каждом tcp протоколе Есть сигнализация вторая сигнализация поверх tcp Мы ещё раз подтверждаем что тот пакет пришёл есть следующая вещи которые совершенно неочевидно вообще что это можно так делать Иди при соединением можно перенести на другой сервер мы просто начинаем на другом сервер эти данные обрабатывать каким-то образом собрали упаковали все это Application level начинаем там обрабатывать а tcp соединение с мигрировать практически нереально мало того что это жуткое нарушение рфц будет принять чужой tcp соединение у себя ну честно говоря я такого вживую не видел и даже не слышал то есть с мигрировать tcp Соединение невозможно его можно только закрыть и мы с этим к этому привыкли мы к этим привыкли жить что оно может порваться должен быть всегда быть готов потому что бы заново переподключиться это всё большое время нет способа миграции tcp соединение простых способов про usersptc Я думаю что говорить Не стоит это довольно сомнительная вещь опять же я только один раз видел какой-то модельную вещь которая опять же не работала А ведь теперь вать не надо в нем это вообще непривычно и мы к этому не привыкли Это непонятно как такое протокол в котором Ну нет разрыва соединения все эти проблемы были 10 лет назад у тех кто стал побольше и получил много как бы с кучей нового трафика получила массу проблем что было сделано перешли на эчс - это нарезка видео шмотками и отправка их по ХП как маленькими файликами соединение стало не персистентным по сути клиент Может после каждого пятисекундного шмат точка закрыться соединение открыть заново получить это 5 секунд опять закрыть гранулярность потока выросла до многих секунд раньше люди по каждому кадру волновались как он доехал а здесь это стало несколько секунд задержки выросли до сих пор проблема что например в новогоднюю ночь кто-то еще смотрит выступление президента а там за окном уже выстрелы петарды ты думаешь Блин как так-то это вот технологии То есть за 10 лет умудрились построить систему которая не позволяет вовремя выйти на улицу взрывать петарды а так что поменялось что-то ушло с того времени и появилось новое у нас появились технологии и задачи подойти технологии которые требуют новых решений Это спорт доставка спорта Потому что Кому охота слушать Соседские соседской Ура Когда ты еще не видишь гола Особенно когда ты ставишь В этот момент деньги там-то сосед за стенкой уже поставил и он знает что будет а ты ещё только смотришь значит подход к воротам это реал там Медиа То есть это всё что требует интерактивы это VR которая требует такого уровня низкодержки что прям исчисляется меньше 100 миллисекунд современные требования например на тех же дронах Все хотят низкой задержки То есть те способы которые мы попробовали они к этому не подходят tcp-доставка здесь предлагает по сути просто уменьшение уменьшения усложнения например серверный Push в http2 появился очень сложная вещь Ну реально сложная вещь насколько был простой хтп-1 и за это Его любили настолько кошмарен сложен ХП 2 их и ттп-3 по сути все что получилось от всего начали отказываться в сторону сложных механизмов которые с которых начиналась tcp-rtmp - это ужасная вещь и тут у нас есть udp-доставка она появилась давно на самом деле но стало популярной не так давно и она сейчас все еще находится в состоянии такого вот пограничного состояния выстрелят не выстрелят когда выстрелят это вопрос того что у нас есть сейчас браузерах уже есть либо ТЦ в браузерах появляется вебтранспорт Но это Бабушка надвое сказала про это поговорим вот какие-то проблемы решатся какие-то как всегда создадутся но здесь мы ещё упираем отталкиваемся от того что в стране вот браузеров всё это развивалось потому что браузеры жили 10 лет на TP вот в них всё это развивалось что у нас было вне браузеров чтобы что можно полезного принести в нашу индустрию такую центральную масса решений которые умели этим пакетами жонглировать всякие акта шеи лайввью зиксе это все такие проприетарные штуки которые очень сильно держались за своей библиотеки не раскрывали их никого никто не пускали давали закрытые решения свои деньги заработали и исчезнули канали в лету какой-нибудь эффект S тоже эволюционировал в СРТ это неоднозначная штука это смесь торрентов и m5s но оно есть и не менее и самые развитые сегодня нет вибрато цен это самое развито Что есть для доставки видео по vdp вырос он видеоконференции и в принципе во многом он для них все еще используется Сегодня он внедряется для онлайн доставки в том числе и премиального видео но там есть масса проблем во-первых чем он хорош Он позволяет смириться с потерями То есть если у нас данные какие-то не получилось получить доставить то в принципе через 2-3 секунды на это уже можно расслабиться ну не ну рассыпалась у нас картинка Ну ничего страшного Пускай Ну рассыпалась рассыпалась э-э чтобы это было не момент голая А так всё нормально у него стабильная задержка нет плавающей буферизации нет то есть у vdp в этом плане всё сильно лучше а но потеря пакетов есть разрушений пакет разрушения пакетов это вообще не очень характерно А вот потери это пожалуйста сколько угодно как они компенсируются во-первых есть ретрансмит несколько разных реализаций с разных стандартов описаний все это в принципе неплохо работает и все это остается на откуп User Space то есть где-то надо пойти и узнать А как это tcp ядро вычисляет но важно важнейшая штука в том что принципиальное отличие ретрансмитов udp доставки Live видео tcp здесь о том что через несколько секунд можно расслабиться и перестать просто смириться Мы не успели нас в этом месте будет квадратик разваленная картинка Ничего страшного а буферизация тебе не есть потому что риординг пакетов ретрансмит требует лага то есть без него совсем это сильно дороже для тех кому хочется дороже есть фек фек это механизм форвардера correction который позволяет послать больше данных то есть мы берем наш кадр Мы берем соседний кадр от него отрезаем треть подложили сюда послали наш кадр и треть от соседнего какой-то из пакетов потерялся мы взяли из соседних пакетиков собрали обратно то что нам нужно и показали чем мы больше можем трафика лишнего сожрать тем у нас будет более устойчиво к потерям эффект эффект есть на разных уровнях на уровне уже транспорта на уровне аудиокодека и есть совсем примитивные штуки типа Red это дублирование пакетов реданта когда просто два раза шлет только для аудио работает но вибро-тц пока что слаб для телевидения То есть если мы говорим например про конференц-связь там ниже качество ниже Требования по качеству картинки ниже Требования по защите drm например и есть э мент такой связанный с массовостью то что у нас видеоконференция - это как правило это от эт Ну или один один к пяти к десяти максимум больше бессмысленно А вот телевидение - это один к сотням тысячам и миллионам там уже есть новые сложности связанные с эбром abr это адаптив битрейт это механизм позволяющий подготовить несколько качеств видео на сервере и дальше тому У кого дома жирный интернет и огромный телек отправить 8к другому fullhd а кому-то несчастному в метро отправить картинку 320 на 240 пусть хоть что-то посмотрит потому что в аудио приехала но здесь возникает вопрос А как мы мере Как можно померить скорость атаки одного пакета у одного пакета не существует понятие скорости доставки можно померить время доставки пакета Но это Совершенно неинтересно у нас скорость это интегральные показатели только на большом количестве пакетов то есть мы можем говорить что в принципе много пакетов подряд передаются на скорости 2 мегабита в секунду и это нужно много пакетов отправить а когда у нас было с чанками все было очень просто мы берем мегабайтный Файлик отправляем его меряем время за которое он приехал размер делим на время получаем скорость прекрасно мы можем поднять скоро можем поднять качество этому клиенту А здесь теперь это не так единственно работающий механизм который сегодня на практике используется это следующая вещь когда интернет планировался он планировался как жёсткая штука то есть пакеты уходят моментально проходят по всей сети если где-то перегрузка дропается пакет мы просто увидели что пакет дропнулся на самом деле интернет работает не совсем так он немножечко резиновый по пути есть буферы буферизация и мы можем увидеть что время прохождения пакетов чуть-чуть играет и мы начинаем подливать излишки пакетов просто пустых мусорных смотря на той стороне что между ними растёт время доставки то есть каналы чуть-чуть реагируют задер на свою перегрузку если мы видим что в принципе мы нормально напихали много данных и все еще они доставляются и у нас время не сильно растет то мы можем переключиться на следующее качество при этом не разрушая картинку того кто смотрит потому что самая поганое это поднять качество у человека рассыпается картинка обратно сделали слабое качество у него картинка нормальная прошла 2 минуты мы опять пытаемся поднять ему качество опять картинка рассыпалась таким сервисом человек пользовался не будет то есть надо уметь понимать что надо что мы можем поднять качество без разрушения CDP это становится сложнее но тоже возможно Какие сложности есть значит в видео все проблемы виброта C которые есть они вообще кьюдипе отношения не имеют Это связано с тем что команды разные родакты разные спонсоры разные задачи разные то есть вот в Хроме например вибратоце и мсе это разные люди которые конечно общаются друг другом Это разные команды которые Судя по коду вообще не пересекаются друг с другом они просто в разных комнатах сидят разные декодеры мы не каждое видео можем отправить не каждого качества Нет drma drm это защита которая не дает вам владеть этим видео которое вы скачали Премиум контент выбор загонять сегодня нельзя когда это поменяется это будет клёво И на самом деле даже не было протоколадного времени для публикации то есть нельзя было набрать запустить Контент это программа для управления камерами и вбить в ней протокол по которому URL по которому мы публикуем виртц сейчас какие-то есть поползлайки но это ещё не устаканилось но есть и сложности связанные с vdp безопасники не любят утечку айпи адресов А это важная штука вибратоце Он позволяет двум браузерам соединиться напрямую для этого им надо поделиться своими айпишниками друг с другом это шикарно люди очень любят когда они выстраивают какие-то там сложные контуры безопасности А тут браузер начинает всему интернету рассказывать какой они внутренней ip-шник то есть мы например раскидав ссылку на какой-нибудь интересный сайт людям в компании можем довольно быстро и легко построить карту сети выяснить что там внутри находится и всё это даже не заходя в помещение это и или VPN этой сетке то есть локальная связь браузеров в этом фишка вибрация он для этого делался но кому-то это не нравится дальше пошли про сложность вибро ТЦ в внутри значит vdp имеет двухстороннее соединение а интернет весь строился вокруг одно направленного tcp под направленными что есть какой-то источник То есть у нас есть то откуда соединение началось инициатор этого соединения И по сути сегодня всё к этому не готово то есть udp это боль для всех тех кто настраивает шлюзы маршрутизаторы на них защиту фильтры firewallet простой пример э свежий вырос из Гугла Как отфильтровать соединение то есть мы видим что это разница Примерно там в несколько раз это значит что как когда будут проблемы любые проблемы ими занималась в несколько раз меньше человек чем проблема вместе Сити то есть UTP во много-много раз менее распространён чем tcp и всё что в нём есть это сырей вас только раз потому что stcp - это от лагеря среди пищу никто ничего не отлаживал руки не дошли пока что у нас есть вебтранспортом вебтранспорт это попытка вообще нас принципе браузера идут по давнишней идее которая родилась еще где-то в 95 году А давайте у нас веб-браузер это и будет для приложения и все будет в браузере тогда Microsoft хотел это сделать для оффлайновых приложений а потом эта идея переродилась в А давайте вообще у нас все приложения будут распространяться на языке я его скрипт и работать в браузере Ну по сути как бы разрешив спор Может ли Linux жить на десктопе Ну конечно может просто это будет доступ для запуска Хрома и по сути у нас сегодня огромное количество приложений которые мы пользуемся они у нас уже написаны на Ява скрипте и в запускаются в браузере в этой мэли это и есть замена всему тому что мы делали до этого десятилетиями и длительное время мы пытаемся туда сделать нормальную сеть у этих приложений у этих они живут боксе у них проблемы с сетью не могут открыть себе сокет ничего кроме TC кроме http нету и Мы помним кто-то может помнит как было болезненно сделать какой-то пуш в такое приложение с сервера до появления сокетов когда все эти комменты были какой-то кошмар просто договорился сегодня все сильно лучше но у этих приложений нет vdp А значит запустить игру мы там не можем игра не может запуститься в осме на браузере пока у нее нет vdp Потому что без vdp мы имеем всю ту массу проблем Мы не можем поиграть например в какой-нибудь half-life или другую стрелялку без vdp Ну не получается это по tcp больно вам игра дело расскажут пытаемся сделать vdp так чтобы не создать проблему чтобы у нас нам сюда не приехала штука которая укладывает нам весь внутренний сегмент транспорте как раз попытка перейти на http-3 который и э в принципе какие-то шаги есть но он жутко сложный он очень чётко сложный но там как раз сейчас пытаются сделать виброцент А я вас крипте то есть перенести всё что у нас написано на плюсовом уходе я вас скрипт и собственно говоря там с этим жить ну его пока нету это пока лишь хочет А чтобы было когда тп3 жутко фантастически сложный для него очень плохие очень закрытые сложные конструкции не на каждом языке есть имплементациях http Серов на http-3 всё слишком быстро поэтому сейчас это пока что очень перспективный инициативы но не то чем можно пользоваться по сути если мы говорим про браузер какой-то Остаётся только вибрация C где пишет Вот что там Может быть когда оно появится там Огромный потенциал могут ехать новые кодеки например не только каждые 264 а что-то очень специфичное рассчитаны на большие потери внедрение swc - это такая конструкция которая позволяет нарезать плавно видео и плавно деградировать качеством В общем там можно ожидать бурное развитие на базе вас Когда у нас появится в браузере udp и вебкодекс это вторая штука важная вот Итого что мы можем увидеть ближайшие годы на базе utpдоставки это свц скейбл видео кодинг Это механизм позволяющий плавно дропать качество плавно с ней играть качеством не делая сразу многих кодирований можно очень сильно там развития это комбинирование всех механизмов которые у нас есть это ретрансмиты rtx хек то есть избыточные отправка плавная деградация СВС например мы можем увидеть отказ от трансмита wi-fi это очень клёвая идея которую Ещё пока не внедряли она делалась wi-fi для поддержки tcp сделан ретрансмит на базе протокола именно wi-fi А вот отказ от него может нам Здорово улучшить убрать лаги при wi-fi доставке они возникают на последних метрах на самом деле какие-то еще вещи могут быть которые мы скорее всего увидим они будут связаны с мобильным с мобильным использованием вот Ну примерно вот так примерно такая конструкция Давайте тогда на какие-то вопросы может быть втором ряду поехали Максим Спасибо большое за доклад мне осмелились сделать небольшую поправку конечно был тезис про то что нельзя открыть тот же самый Connection на другой машине вот есть такое решение Как криво которое позволяет чекпоинтить процесс с открытым сокетом потом сохраненное состояние перенести на другую машину от истории типа вот и Connection будет жив То есть например можно в живом режиме с мигрировать сессию Я думаю с видео пример То же самое Я понимаю о чем идет речь Мы все-таки говорим про ситуацию Когда у нас это надо заморозить это жуткое виртуализация у этого вообще с например с доставкой 20-30 Гбит будут некоторые нюансы То есть в принципе вся система виртуализации сегодня и Live видео они не очень пока дружат губернатос и любая история слоев видео это прям больно ну и в том числе вот это есть эти попытки есть на уровне userspace это сделать практически нереально это все-таки нужно поддержка ядра да то есть это такая конструкция которая требует не просто ядра виртуализации всего этого да это тоже вариант он есть но просто Ну пока как бы Клайв видео и на уровне applications сделать это настолько сложно что мы можем говорить что именно из-за Application мы не можем перенести это то есть мы не можем на ходу с мигрировать сказать так вот Ты теперь там работаешь только целый процесс в случае с доставкой live-видео мы блокируем кого-то кто сейчас отсылает у него подключил у него может быть например 20.000 подключений по которым разливается 40-60 ГБ мы должны его перенести на другой сервер а там продолжить ну после этого они просто все обрушатся обвалятся И это будет ужасный удар по системе нам проще закрыть этот сокет так чтобы он переоткрылся на другом Понятно спасибо Добрый день спасибо за доклад У меня два вопроса Первый это о том что в технологии wildber TC есть возможность построения Full mash сетей вы правильно провели аналогию с торрентами когда любой из получателей в принципе может раздавать этот же контент и Это технология она почти не работает на мобильных устройствах Вот вы своих продуктах это как-то пытались решить и второй вопрос Это в случае с они работают поверх http и там уже за нас решили там есть метан информация как люди агенты хедеры разные все случаи СРТ как с этим дела стоят Так значит давайте про первый вопрос первый вопрос утверждение виброта C длительное время в нем есть способ его абьюзить и за счет того что у него есть дата канал и за счет того что можно два браузера состыковать можно построить сеть доставки файликов то есть мы можем построить файлики соответственно в этих файликах могут быть шмотки и чел с видео и поэтому у нас выстраивается сеть на базе виброта C сеть доставки с минутной задержкой То есть это даёт огромную задержку это не про такой не реал тайм и фактически У нас есть два виброта C которые очень часто путают один видео Это доставка вот это вот пи-пи сети а вторая История - это собственно говоря доставка в Реал тайме видео и это абсолютно разные код разные реалии вплоть до того что это Ну просто вот разные люди это умеют делать с разными квалификациями А в нашем совке мы не делаем петунию мы можем мы можем быть использованы как э-э как Origin для p2p сервиса но я так скажу Эта штука должна была Стать таким дизраптором но она им не стала То есть можно смело утверждать о том что p2p доставка через вибрация не стала тем что заменила всё с собой всё остальное почему Ну я не готов здесь давать какие-то прямо оценки скорее всего потому что в реальности в реальности ускорение оптимизация не такая не такая которая позволила бы радикально на порядок снизить расходы нет этого эффекта скорее всего по второму э-э Ну метод даты вопрос Это дата но у нас есть когда-то P3 в котором метод дата шлёт всё там шифрование метода данные и всё соединение установили дальше с ним живём поэтому это вопрос который в принципе можно считать что э решён как-то но пока когда tp-3 - это по трафику массовое но по применимости не массовые вещи еще вопрос тут много вот быстро при раз потом два Потом три еще какое-то время тут друзья 19:00 закрытие надо будет сюда прийти не забудьте пожалуйста Максим Здравствуйте спасибо большое за доклад возникло два вопроса собственно первый используется ли как-то стриминге возможно в вашем решении обработка ecn чтобы не знаю там ну экспедиции конечно ли он где-то вот в вашей области и второй вот я правильно понимаю что он для соседних пакетов они для него самого чтобы в том же самом пакете байты восстановить так насчет века Хоррор correction есть разные способы его использования И если мы говорим про спутниковый или кабельный механизм передачи данных то там надо уметь понимать что у тебя один бит выпал один бит несколько бит подряд это такое Бывает и на этом уровне они по одному используют эффект то есть спутники один эффект используется когда мы гоняем пакеты через интернет то у нас побить и одного битика это вообще довольно странное редкая вещь Она может быть но это сильно реже и на нее не надо так тратить силы как например на выпадание пакета Поэтому в интернете как правило пакет целиком выпадает где-то по пути потерялся не пришёл поэтому эффект который используется в vdp доставке по интернету Он ориентирован на то чтобы компенсировать выпадание целого пакета по соседям это тоже добавляет некоторые лак потому что надо немножечко Ну отойти подождать пока у нас всегда будет э 2 3 4 пакета в очереди стоять а-а первый вопрос был про ecn Значит некоторые люди утверждают что магические значит пассы руками над настройками tcp кардинально радикально изменяют качество и скорость доставки мы этого на цифрах не видели а цифр мы собираем довольно много это сотни тысяч замеров в секунду которые мы собираем софта и вот на этих цифрах Мы не видим чтобы игры с еценами какие-то сильно особенные настройки ядра линукса относительно дефолтных настроек как-то радикально сказывались на качестве tcp-сервиса оно охренительно классно работает из коробки я ответил хорошо Здравствуйте Максим Спасибо за доклад вся жизнь пронеслась перед глазами она продолжается дальше все идет дальше вопрос Вы говорите есть степи 3 для юдипичных сокетов но есть дата канал viberty который прекрасный репешный двухсторонний Почему не он чего не хватает во-первых Он полностью дальше надо еще более еще более сырая непроверенная вещь от которой совсем глазки вернуться в трубочку потому что совсем плюс тут же есть вопрос не мало используется И самое главное что куда Потом засовывать из него видео вебтранспорт имеет смысл вместе с випкодеками это механизм который позволяет это обобщение мсе обобщение то технологии которые позволяют показывать видео в браузере оно сейчас находится на стадии вот-вот мы договоримся о том чтобы выкинуть и сделать всё заново по нормальному Ну как бы было сказать тп2 как бы его развивали развивали потом так я всё сегодня всё ничего не получилось Давайте отказываться такие Всё мы так быстро не умеем за 7 лет всего навсего болтали Здесь тоже самое Пока непонятно куда пихать видео которое пришло по дочелу Спасибо нет транспорта нет мультиков вот все верно Да здравствуйте тоже все доклад небольшой вопрос Может быть не совсем просто ну и тему про диаметр Говорите сейчас Это не пойдет потому что не диаерема ну во-первых Казалось бы премиальный контент уже гоняет там приватные стримы существуют американцы не туда но не суть а второй это вопрос там времени или может есть какая-то идейная проблема со всем этим может делом принципе не получится вот настоящий не взламывает что сейчас все привыкли там вышло на нетфликся Не плати там в тот же день уже на торрентах можно найти значит вопрос того как как Почему люди верят в drm мы оставим в стороне эта штука существующая человеческими отношениями то есть эта вещь которая странная технология неоднозначная и она все равно снижает вопрос пиратства А премиум контента на вибрато цен на сегодняшний день нету Есть какой-то который не очень страшен от того что его потеряю или скажем его очень надо гонять по виброта C но вы не увидите там очень многих вещей которые в принципе гоняются лаймом чемпионат мира по футболу нет никакого смысла гонять по ТЦ Потому что от того что ты чуть-чуть выиграешь в лаге вообще не будет ничего это во-первых во-вторых всё равно все дают задержку всё вещание мы например сталкиваемся с тем что нам от нас требуют втыкать задержку В 20 секунд или 10 секунд просто потому что телевидение так делает и Нахрена Вы должны с этим интернетом который даст 10 секундный фронт frontrant для беттинга то есть для того чтобы люди могли подсмотреть в телефоне сделать заранее ставки пока вся аудитория на телеке не увидит этот момент то есть мы и так видим не совсем реальная реальную картинку на премиальном контенте именно прямо реальном лайве это уже задержки есть Поэтому оно и не нужно и не работает виброта C прекрасно грабятся воруются вытаскивается никаких проблем и adrm это не технологическое это человеческое отношение ты не получишь контент ты не получишь ты не сможешь денег заработать пока от тебя нет drm Вопрос не в том что ты можешь или не можешь украсить вопрос в том что пока ты не внедрил drm ты денег не заработаешь просто их не будет никак либо ты его внедряешь тогда у тебя появляются деньги либо ты его не внедряешь и денег у тебя не будет да ты можешь украсть этот контент никаких проблем Ну и чего Ну сиди смотри ворованные контент никаких проблем нету с этим но денег ты уже не заработаешь А веб-кодеки это как раз способ решить эту проблему это способ сделать так чтобы в человеческие отношения строятся которые обусловлены DM и чтобы ты мог этим пользоваться там вы как раз есть механи позволяющий защищать помощью дирм А вопрос того как можно верить в эту штуку Но это вообще не технический диаметр не техническая проблема Спасибо Спасибо друзья вообще Максим это человек тысячи историй я бы сказал даже местами фулл стэк спикер как мы еще даже не начали да да даже не начали Так разогреваемся кому мы подарим подарок тот человек мне очень плохо видно Наверное я думаю что вот да Вопрос был про такой про поглубже технический рукой Да игрушку сюда а тебе Максим памятные подарки от хайлоуида о"
}