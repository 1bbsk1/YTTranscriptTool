{
  "video_id": "sL4eAw9vL9Y",
  "channel": "HighLoadChannel",
  "title": "Вам нужна CDN! ...или нет? / Алексей Учакин (EdgeЦентр)",
  "views": 1686,
  "duration": 3071,
  "published": "2024-04-17T01:10:27-07:00",
  "text": "всем всем привет А кто вообще знает что такое сидень и там у кого он есть в проектах Отлично Отлично тогда если половину презентация пущу и не буду вам 100 500 раз рассказывать как он работает и придут более интересным вещам Я как Рома уже сказал долгое время работал сетевым инженером Тим ли дом сетевиков работал центрами провайдерами и так далее поэтому на сидень я смотрю не с точки зрения продуктовый его фича больше с точки зрения инфраструктуры но сейчас я директор структуре в компании центр Моя команда занимается тем что мы поставляем серверы продуктовым командам монтируем в центрах настраиваем общаемся с операторами связи и в общем делаем всю всю которая лежит в основании нашей компании Ну еще я в свободное время веду под кастинг несколько фактов о нашей компании если кто не знает Мы входим в топ-3 российских сидений поставщиков у нас больше 16 тысяч клиентов не только сиденья но и хостинг защиты клауды и так далее У нас уже почти 40 точек присутствия по всему миру на трех континентах и общая емкость наших опеников и пилингов уже перевалило за 10 пробить в секунду Вы наверное знаете про международных игроков на рынке cdn А вот про Российские информации как правило не очень много но тем не менее это два с половиной триллиона рублей по оценкам 22 году по выручке порядка 10 более-менее крупных поставщиков часть из которых является реселлерами или партнерами часть предоставляет услуги на собственную инфраструктуре и иностранная компания думаю все вы знаете они перестали официально работать с российскими Юрий лицами но тем не менее они присутствуют трафик раздают их железо в России до сих пор что вообще делать с точки зрения бизнеса Он сглаживает такие нагрузки то есть Черная пятница 31 декабря финал Лиги Чемпионов седин позволяет бизнесу более прогнозируемо Расти не отвлекаясь на резкие скачки то есть повышенную нагрузку кратковременную позволяет экономить на инфраструктуре персонажей То есть Вам нужно меньше открывать собственных случаев присутствия вам нужно меньше серверов и меньше квалифицированного персонала для их обслуживания Ну и сиденно очень любят поисковые системы сайты у которых подключен cdn выше ранжируются в поисковой выдаче поэтому cdn очень любят маркетологи seo-оптимизаторы веб-дизайнеры и так далее Хотя они могут даже не понимать что это такое Как это работает Ну и cdn в какой-то мере защищает видос Атак Но это прям очень-очень базовая атака защита и прямо полагаться на нее не стоит я ещё чуть позже а что сидел не делает это больше от наших прицелов Да что с чем к нам приходят клиенты не является распределённым сторожем То есть это кэш и при этом Да вы можете файл скачать из любого места Но вам нужно все еще Origin то есть сервер на котором этот файл изначально будет лежать вам нужно как-то самому определить права доступа к этому файлу и так далее и так далее как я уже сказал не защищает из коробки от 90 так это абсолютно разные сервисы Поэтому если у вас есть да то именно отдельно Стоит подумать о сервисе по защите так И сидел не исполняет ваш код то есть это кэш он может там кэшировать ответы API можем как-то еще ускорять доставку контента но тем не менее сам по себе ваш ход на Edge серверах не исполняет только если это не какая-то специальная опция у провайдера Чтобы проще было понять когда нужен cdn Когда нужно сидел когда нет я вот сделал такую эмпирическую кривую где по горизонтали у вас трафик который генерирует проект А по вертикали деньги которые вы за этот трафик платите так в самом начале У вас есть одна виртуалочка где-то в центре вам даже не особо интересно где у вас есть сайт какие-то клиенты и в целом ваша задача Выжить и поменьше платить денег за инфраструктуру На этом этапе рассматривается как ненужная игрушка которая ну бесплатно хорошо А деньги за неё ещё платить Зачем если ваш проект начал рост и у вас появляются новые пользователи растет трафик то вы в определенный момент приходите к тому что вам нужно проводить Апгрейд вам нужно более мощный виртуалка Вам нужен железный сервер например Либо вы не укладываетесь квоту по трафику которая внезапно Вот это центр есть либо полосе либо по количеству трафика либо другое и здесь у нас и соответственно на этом этапе вы берете эксельку складываете туда все ваши потенциальные затраты на Апгрейд прикидывайте стоимость cdn которая вам понадобится по трафику например и считаете что он будет выгоднее там апгрейдится или все-таки подключить себе ну если вы очень большой либо вас очень специфическая задача то вам возможно потребуется своя семья и сейчас это расскажу когда если вас какие-то есть очень специфические требования для примера Вы очень круто делаете стриминг вы хотите этим доставлять клиенту самый лучший сервис и вы хотите выстроить цепочку доставки от конечного пользователя до вашего сервера прям полностью под вашим контролем и вы это делаете лучше всех в мире Тогда возможно General вам не нужна потому что все-таки коммерческий сегмент Они оптимизируются под такой именно трафик и статика и трансляции и прочее а вот специализированные она естественно Может может в этом плане выиграть Либо вы очень-очень большой Ну не знаю размером с ВК или яндекс и ни одна коммерческая сидеть вас просто не переварит без солидных капиталовложений тогда вы можете опять же вот посчитать то количество денег которое вы бы заносили сидят провайдеру и вместо этого построить свое Ну еще один сценарий Когда вы у вас уже есть какая-то готовая инфраструктура То есть у вас есть много связанностей с кучей операторов по России у вас есть много центров много серверов вам все что вам остается нанять команду которая уже соответственно вот всё сделает опять же берем Excel сравниваем одно с другим считаем и смотрим Теперь давайте поговорим о том как выбирать Скорее всего он уже есть у Вашего хостинга либо обычного провайдера Да вот те самые 10 плюс поставщиков на рынке часть из них является ресиверами и это обычный Облачный там или хостинг провайдеры Где вы можете из личного кабинета одной кнопочкой подключить и всё будет удобно и Но если вам не хватает тех услуг которые предоставляют хостинг провайдер то вы можете просто загуглить и там Первая же страница поисковой выдачи там российские не российские офигенные под свой бюджет Вы можете найти спокойно но Будьте готовы к тому что далеко не все сидят провайдеры готовы работать с мелким чеком и мелкими клиентами У некоторых есть там какой-то минимальный платеж который может кому-то подходить и не подходить поэтому опять же вспоминаем реселлеров и выбираем фичи это наверное самое простое что может самый простой по которым можно сравнивать на что первое на самом деле смотрят в первую очередь управление трафиком провайдер не знаю правила управления трафиком раздавать по юзер Агенту вот такой тип файлов по-другому другой В общем чем больше таких возможных правил чем гибкими можно управлять тем кажется лучше сидел наверное все уже могут работать с пользователями кастомными доменами То есть вы можете просто до меньших делегировать провайдеру Дальше он сам уже там будет создавать дополнительные служебные записи как-то Это балансировать и так далее сертификаты опять же там крипте я думаю что уже никого не удивить он из разряда джентльменского набора чтобы опять же по кнопочке выпускался сам продлевался ну здесь можно обратить внимание что был у сидень провайдера был собственно DNS провайдер тогда можно быть уверенным в том что все умеет готовить в том числе DNS и DNS инфраструктура у неё откосоустойчивое распределённое и соответственно позволяет вам позволить гибко балансировать трафик для разных пользователей в разных частях света что должно быть Много ручек и дополнительных сервисах связанных с кэшированием самые популярные Наверное это shielding так называемый когда источнику обращаются не все серверы разом а какой-то выделенный набор шил серверов которые можно закрыть одним целем и тем самым дополнительная безопасность в свой источник Ну и уменьшить на него нагрузку функции защиты так называемых такие как Secure talkings wav может быть какие-то цели допустим по гео и так далее здесь смотрите что что нужно вам Да допустим Secure talkins позволяет выдавать ссылки там закрытых личных кабинетах токен пробрасывается на Origin Origin принимает решение о том отдавать этот трафик не отдавать Ну и сжатие конвертации Здесь тоже все понятно поддержка современных протоколов типа бродливая Пак и так далее желательно все по кнопочке и красиво вебсоке htp26 здесь не каждому нужно но если вам нужно то вот внимательно спрашивайте провайдера проверяйте их работу и так далее техподдержка естественно должна быть 24 на 7 по разным каналам и желательно не только с ботами и возможностей попасть к живым людям статистика в личном кабинете которую понимает не только технические специалисты но и ваши маркетологи и аналитики возможность выгрузки детальных блоков допустим Если Вам это нужно актуальность Пейдж там какие-то либо виды мониторинга Вот это тоже лучше смотреть на старте и проверять потому что потом может быть больно Ну если у сидена есть миллион печей вам нужно Миллион 1 то совершенно нормально прийти к своему менеджеру или в техподдержку и спросить когда собственница Миллионная фича Миллион 1 фича появится ответы могут быть разные хорошей cdn наверное должен вам как ответить духе того что мы это либо возьмем в разработку либо там нет чувак это фича не популярное поэтому мы сделаем ее примерно никогда Ну в терминале случаях Вас могут просто молча послать и сказать что нет чувак Мы там у вас есть свой redmap и мы клиентов фичи и не принимаем от молча складываем в связанность Вот с моей точки зрения связана это самое главное иметь только себе потому что иначе он собственно не нужен оценить связность можно с помощью пилинг db либо ресурсов типа радара выглядит примерно следующим образом вы забиваете в поисково в поиск имя Заходите на сайт забивайте в поиск адрес можно адрес сайта cdn провайдером можно его названием Можно номер автономной системы Если Вы его знаете и вы получаете вот такой вот список слева это опринки сидена которая дает ему Интернет пилинги с другими провайдерами кастами и так далее можно посмотреть список оценить там есть ли провайдеры которые нужны именно вам или возможно вам нужны провайдеров определенного региона вот это все там можно посмотреть либо уточнить напрямую сегмент провайдера точки присутствия как правило выкладываются на сайте Вот примерно в таком виде там либо списком либо как-то еще и здесь вроде бы простой критерий там смотрим где смотрит где ваши пользователи и вроде бы пользователи должны идти в ближайшую там локацию нет потому что Интернет в интернете география нифига не совпадает с топологией и трафик от конечного пользователя будет систематизирован именно с точки зрения критериев маршрутизации bgp я скажу Ну и стоимость как штука крайне понятная для бизнеса то есть а сколько мы за это заплатим самое простое Что может быть сиденье понятно Это оплата за трафик там либо поезде гоу либо каким-то фиксированным пакетом про что задумываются не все это про стоимость дополнительных фичей если там допустим платный шилдинг это абсолютно нормально потому что дополнительный сервис Северное мощности то платный может быть поддержка не знаю вебсокета каких-то дополнительных правил лимиты по количеству правил что там 100 правил стоят 100 рублей 101 правило будет стоить уже там 200 рублей в месяц такое это все такие вещи нужно внимательно смотреть еще до заключения договора который я говорил о них могут быть как плюс так и минусы с одной стороны они вот могут давать более выгодные тарифы тем самым малышам например без абонентской платы либо с более удобной тарификацией А может быть так что вам будет выгоднее напрямую зайти на провайдеру там попросить у него например скидку за большой объем как правило сидень провайдер предоставляет не только сидел но еще ряд дополнительных сервисов с этим связанных например в качестве ориджа можно использовать S3 самого сидень провайдера что еще больше снимает нагрузку с вашей инфраструктуры но стоит дополнительных денег интеграция до защитой очень популярна реализуется она по-разному здесь подходы могут быть совершенно разные это могут быть одни и те же локации разные серверы это может быть попытка интеграции в одном сервере имитигаторов и собственно может быть просто отдельный пул локации именно защиты которые там пересекается с сединой локациями но не полностью ускорение динамики в России не очень популярно потому что у нас все-таки Интернет как правило широкий и дешевый но в регионах там типа юго-восточной Азии Австралии и так далее эта штука популярна это тот самый код который вроде бы ваш но исполняется он серверах провайдера либо там генерируется какая-то оптимизированная версия вашей странички либо Просто вы часть часть криптов переносится здесь все прям очень зависит от провайдера гораздо более популярная История это всяческие трансляции Я думаю все вы понимаете что увидеть решающий гол на две секунды быстрее чем сосед это бесценно и в этом плане трансляции они тоже строятся на базе как правило седин сети с помощью различных софтовых оптимизаций Там прям ротицианцы и нас ребята даже по-моему статью на хаббре который записать про это теперь как устроено правильно Разумеется по версии меня и компании центр все фичи про которые я сказал они должны быть сделаны грамотно правильно удобно и работать связность как самое главное в России если мы говорим то должны быть стыки с большой четверкой мобильных операторов Они же как правило являются операторами фиксированной связи плюс операторы которые предоставляют доступ по всей России так называемые федеральные операторы это связанность платная и местами достаточно дорогая поэтому для уменьшения затрат и оптимизация связанности там более подключение более мелких оригинальных провайдеров идет на точками на трафиком поднимает приватные стыки либо размещает серверы напрямую у операторов с точки зрения аиксов контент-генераторы это бонус потому что с их помощью можно привлекать клиентов то есть провайдеров связи приватные стыки они выгодны провайдерам потому что вы можете сэкономить на опять же на признаках которые вы платите оператор платите вышестоящим оператором получается вин а про и возможно установка сервера CD напрямую операторов там аналог это Google Google кэш я про тоже еще чуть позже расскажу что касается ipv6 то что мы видим на своей сети это порядка 1 к 35 по сравнению с четверкой Но количество трафика все еще растет и Мы надеемся что большинство трафика будет больше это позволяет как упростить инфраструктуру операторов так и улучшить в некоторых местах связанности попса ниже точки присутствия те самые точки на карте они могут быть он нет и off-net он нет это когда у вас есть полноценный узел где-нибудь в центре сетевым собственным оборудованием которым вы управляете и серверами и там возможно будет не только сегмент сервера так как это дорого то вам нужно либо много трафика либо много клиентов либо какие-то дополнительные сервисы то есть в России как правило все города миллионники плюс крупные города на Дальнем Востоке потому что там опять же далеко услуги предоставлять надо но клиентов не так много Все проще вы берете один два три сервера и просто забрасываете к оператору связи у вас получается один на prink получается так называемый on manage локация То есть у вас там нет какого-то нет выделенной своей стойки в центре чего-то еще но тем не менее вы тем самым можете сэкономить опять же на своих опринках улучшить связность там поставив сервер какой-нибудь труднодоступный регион Ну и так называемый уникальная локации яркий пример наверное здесь это Континентальный Китай когда у вас с одной стороны есть сложности с попаданием трафика в эту локацию в случае китайский Fireball и закинув сервер вот в такую локацию Вы можете получить конкурентное преимущество перед клиентом перед клиентами потому что у вас вот если клиенту прям нужен трафик в этом самом континентальном Китае он будет искать в первую очередь у которого там точки не вокруг расположены там Гонконге или где-то ещё это в общем-то просто Но именно есть связанные с локальной с этим рынком с минимальной задержкой там без каких-то дополнительных Ну и вспоминаем Да что география не равно топологии и пользователей из Самары можно будет проще иногда отправить в Казань а пользователя другого оператора из Казани проще отправить в Самару К сожалению это так потому что у разных операторов разные возможности расширения линков на стыке в разных городах разная политика монетизации которую мы как клиент оператора влиять не можем и в итоге сидень управление трафиком превращается в некий такой постоянный баланс между стоимостью трафика загрузка линков качеством доставки до конкретного пользователя и еще куча куча факторов вроде бы выбрали себе Да вот теперь собственно Как тестировать Как понять какой из них хорошо работает для этого есть во-первых бенчмарки типа сидят и так далее их минус для России в том что они сейчас России не работают и убрали оттуда весь списком сети можно воспользоваться программой ipados я ее на каждом наверное своем докладе поминаю это исследовательская программа от rapen CC заключается в том что есть много много десятки тысяч уже наверное зондов которые расположены по всему миру Вы можете поставить такой зонт у себя в сети он сейчас уже есть видеоконтейнера скачивайте ставите подключаетесь программе вам закапывать кредиты и вы на эти кредиты можете проводить свои исследования типа Ping 3 срут DNS чек сертификат Чек и оценивать качество связности до нужного вам узла Вот так это примерно выглядит на карте то есть банально до нашего сайта я запустил проверку cmp вот можно собственно посмотреть результаты на карте можно выгрузить этот же сонник спарсить там приятная документация и все довольно просто Ну и конечно есть всяческие обзоры и рейтинги на русском На английском как хотите здесь просто будет смотрите доверяете методике тестирования либо нет в любом случае можете узнать что-то новое что с точки зрения железа Ну на самом деле типичный Сервер это много CPU много памяти много дисков SSD либо nvme и много сети Ну все просто Разумеется есть деление по мощности то есть на локации где трафика мало Мы можем поставить более слабый более дешевый сервер локации где трафика много Мы можем поставить много очень мощных серверов здесь опять же играет экономика и все прочее общим наверное будет только то что нужно очень много быстро дисков в любом случае и много оперативной памяти Ну и на количество серверов на конкретной локации как я уже сказал Да может влиять не только количество трафика но и стоимость каналов те самые какие-то уникальные либо сложности с точки зрения локации иногда дешевле закинуть сервер Чем платить за каналы либо оператор связи сам на самом деле может купить сервер и попросить провайдера этим сервером управлять здесь как договоришься и так далее ситуация могут быть совершенно разные с точки зрения состав еще более тривиально у нас есть инжинекс который собственно раздает трафик пользователя У нас есть еще один женикс потому что у нас есть много разных задач нужно обрабатывать веб-сокет Квик какой-то делать какой-то ваф там общаться с бэкендом В общем 100 500 разных задач есть блогеры конвертеры агенты еще вот много-много всякого Ну и понятно Там есть еще потому что опять же для каждой задачи может быть проще держать свою конфигурацию свой набор модулей либо вообще собственную сборку которая оптимизирована под конкретной задачей допустим как случае с криком штука сама по себе распределенная и устойчивое и положите достаточно сложно но когда она ломается то об этом обычно узнают все ну там яркий пример когда ломается Кома или fasty у вас просто пол интернета не работает а вторая половина Интернета работает в режиме паралитика потому что картинки не грузятся счетчики какие-то не грузятся еще что-то там не грузится либо грузится очень медленно плохо и так далее но в целом случается к счастью такое достаточно редко ломается железо то есть диски это вообще расходный материал как оперативная память вылетают ноды целиком но по счастью так как сиделда очень хорошо масштабируется да то это ситуация практически не влияют на качество сервиса у вас там всегда есть резервная нода на точке либо можно перенаправить трафик в другую локацию здесь смотрится Соответственно что будет ломается связность как ломается связанность в интернете Я уже рассказывал несколько раз в том числе ломается DNS это может быть как локальное что-то у оператора так региональные так и глобальная опять же все проблемы которые в интернете случаются мы как правило видим Если вы используете VPN чтобы там постить котиков какой-нибудь социальной сети то год блест Потому что как пойдет трафик до офигенно которую используют социальные сети вообще не понятно может пойти напрямую с вашего устройства может пойти Через VPN может частично пойти и так и так как это делается и оптимизировать по 20 трафик тоже черт его знает в общем могут быть всякие фруктуации так офигенно такая что возникают проблемы с кэшом а-ля там забыли прогреть не вовремя почистили или начали чистить раз зачем-то раз в секунду пользователи там тоже именно клиенты наши периодически спрашивают что можно вы там отключите ручку пуржа на длинные праздники потому что вдруг чего как Ну в общем тоже бывает да бывают разные Какие собственно выводы из всего этого во-первых сидят полезно но не всем не всегда вы можете быть слишком именно сейчас про коммерческой сидел вообще назначения вы можете быть слишком маленький в целом вам это может быть не нужно и вас Достаточно одной виртуалки Либо вы можете быть слишком большой и вам проще там построить свое что-то специализированное либо как-то еще с этим жить поэтому В любой непонятной ситуации и начинает считать складываете затраты которые у тебя есть сравнивая с теми затратами которые у тебя будут учитывая то что там тарификация может быть не только по количеству трафика но и по дополнительным свечам И на что собственно смотреть Да когда выбираешь выбираешь себе во-первых это те самые фичи это понятно с точки зрения тех инженеров которые будут работать там программистов Возможно маркетологов да вы смотрите на те фичи которые вам нужны как они реализованы насколько удобно они реализованы как вы с ними будете работать связность за это На это смотрят к сожалению не все Но вот я как сетевой инженер грани топлю за то чтобы вы изучали связность тех продуктов которыми вы пользуетесь это не только точки присутствия это еще и стыки с операторами связи их общая полоса и всякие такие вещи это все нужно тестировать на бою потому что картинка может меняться со временем Как лучше так в худшую сторону точки присутствия возможно вам вашему бизнесу нужны какие-то уникальные локации это может быть в России может быть не в России и можно поговорить с идеей оператором что бы такая локация например появилась либо если вам там нужна что-нибудь специфическое допустим в мире Да там или Китай Средняя Азия Латинская Америка опять же смотрим либо если это сейчас есть ли это в планах И сколько там есть у вас достаточно большой человек сколько будет Такую локацию построить Ну и ценообразованием вот самый важный для бизнеса параметра сколько вы в итоге Заплатите денег за сидим потому что могут быть разные подводные камни может быть тарификация Да за не только не только за трафик но у меня все спасибо вам большое объявление сегодня вот в этом докладе У нас не один приз за лучший вопрос а два приза лучшие вопросы поэтому особенно имеет смысл это все говорить справа первый ряд чтобы вам удобно было задавать вопросы то есть список вопросов которыми можно пользоваться Здравствуйте спасибо за доклад может прослушал я так и не понял вот во много говорили про связность что есть проблемы с этим а конечному пользователю Сиде на вообще как мониторить проблемы со связностью Ну смотрите в конечном пользователям именно вот там тот человек который ленточку себя в телефоне листает да правильный ответ будет не как потому что вы даже не можете понять каким сиенам пользуются ваш тот ресурс который вы сейчас просматриваете это может быть один инцидента могут быть разные сидень это может быть сейчас один а завтра другой А И вообще там на основании каких-то обстоятельствах и черной магии это может выбираться То есть вы оцениваете метрику конкретного ресурса насколько там тормозить у вас видосик или не тормозят Насколько быстро стартует тот самый видосик и выносите там есть что-то не устраивает вы выносите мозг тех там не знаю социальной сети там или кому-то еще там жалуетесь на что вот у меня вот плохо грузится ленточка А уже именно конкретный ресурс у него есть bezibility у него есть метрики которые в том числе получают сидень или там каких-то как-то самых замеряет он уже сам бенчит сидел на тему качества доставки контента то есть именно интересно было да с точки зрения именно продуктов те же Одноклассники если использовать провайдера который отдает тут смотрите миллион наверное вещей вот романа занимается экспериментами ВКонтакте Я думаю что он может там сделать какой-нибудь эксперимент что вот при использовании а будут собираться вот такие методики по которым мы поймем Насколько хорошо он работает и через неделю мы будем собирать те же метрики и сравнивать между собой то есть здесь примерно без для маневра здесь заказчиком является непосредственно клиент CD То есть он если он хороший поставщик готов он хочет понимать метрики энтон то есть до конкретного пользователя и дальше он может сделать разными способами он может там какой-то Джес собирать напрямую из браузера может получать логики сырые от сегена там на самом деле как договоритесь какие есть возможности у сигена и у самого продукта спасибо С экспериментами прям реально космические штуки бывают когда есть какой-то далекий город где все плохо и ты такой думаешь поставим там сервер ставишь там сервер Ping до клиентов хороший а при этом картинки у них хуже грузится начинаются чем Когда они ходили куда-нибудь в другой далекий город вообще никто не знает так близко к середине слева вот там около прохода около прохода в середине слева а потом самый крайний левый будет да привет Спасибо за интересный доклад У меня на самом деле Вопросов много возникло но задам основные первые вот интересно было в списке характеристик на который необходимо было обращать внимание были веб-сокеты как вообще-то соотносятся с сигеном который раздают статику вебсокет Может проксироваться через CD здесь то сидим это не обязательно статика то есть ну в самом простом случае да это раздача вот статических там файликов каких-то но у вас может быть сам упрощённом виде это выглядит так что у h-сервера есть уже Поднятая сессия солидженным высота и у вас самый длинный rt-tel там уже прогретая сессия есть и пользователь подключаясь К экшена ноге это тоже небольшой РТТ вы экономите просто на времени шейка и у вас получается проксирование уже проектирование трафика у После установления сессии Это самый простейший наверное сценарий и второй вопрос Всегда ли определение какой пользователь ближе происходит Просто анонсированием одной и той же аэски по bgp из всех точек присутствия именно Как отправить пользователя на нужную вам CD ноду там большой набор параметров это bgp DNS не знаю чёрная магия там куча куча всяких уловок Ну как правило у вас да у вас есть BP DNS вы с помощью там можно чёрные магии очень велик Да в общем вы можете соответственно вот с помощью чёрной магии применённой к GPS на кастовать какой-нибудь колдунство чтобы пользователь пошёл именно на нужную Вам ноду и подчеркну не обязательно это будет ближайшее географический там буквы отвалилась буквы не выдержала Да мы просто с чем столкнулись на самом деле для России невозможно найти ни одного DNS сервера у которого был бы нормальный геоиписы распределением По российским регионам и у которого был бы нормальный можно было бы указать вес Попов смотрите геула IP базы это в принципе который там сталкивался с этим вот только официальная погрешность у того же максимальна что-то составляет 1-2%, Ну то есть они точно есть гарантирует там до 98-99% инженеров в России есть специфика а Поэтому собственно все крупные российские продукты там не знаю ВК Яндекс как и там например амазона Кама и так далее они делают собственную гео-базу они вот сами бенчат конечных пользователей там тоже по каким-то метрикам не знаю Facebook Про это много я рассказываю что у них там прям есть целый слой который именно проводит постоянные тесты и там пользователь может случайно отправлять на какую-то ноду не ближайшая а именно на какую-то случайную они измеряют рtt И тем самым получают определенную точность именно позиционирование конечных пользователей то есть здесь вопрос проблема с платными и бесплатными геобазами Да она есть единственный выход делать свою гео-базу вот собственно здесь других вариантов нет Привет Спасибо большое за доклад У меня есть небольшой вопрос по поводу хранения в cdn как сервис коммерческой чувствительной информации насколько у вас как у провайдеров cdn вообще Клиенты приходят к таким запросам и говорят Например нужно фотки паспортов хранить или договора какие-то насколько эффективны давайте так по конкретным кейсам это вот лучше в кулуарах обсудить Да вот у меня коллега есть мы можем что-нибудь вспомним ответ в целом Если вы хотите хранить какую-то чувствительную информацию то вашего провайдера не важно там что он предоставляет облако сторож должен быть соответствующий сертификат то есть там 152-фз например в случае паспортов и причём нужного класса То есть если мы говорим о паспортах то это там персональные данные там первого класса и соответственно права даже должен быть аттестован на хранение данных вот данная персональных данных этого класса если мы говорим о любо мы занимаемся например о работе с банками и там проектирование каких-то банковских ресурсов то соответственно у сидень провайдера должен быть 50 dss и там какие-то еще определенные сертификаты то здесь ответ просто называется комплаенс если у вас там есть штуки которые под компании попадают то ваш провайдер не важно чего должен тоже комплаен соблюдать у него должны быть соответствующее сертификат в дополнение такой Тогда вопрос насколько сидел как сервис позволяет добавлять какие-то дополнительные там сексуальные практики тюнинг под себя или проще свысить её нужно потихонечку начать натягивать Ну что это зависит вот смотрите Да я Почему и сказал что свой сигена - это крайне дорого поэтому вам нужны быть какие-то очень специфические требования которые не может вводить там General Pepper Да никто не мешает вам это сделать пожалуйста вы берёте Excel как бы оцениваете сколько вам будет строить строить построить несколько локаций подключить провайдеров купить серверы нанять команду которая это всё напишет и сделает Ну либо прийти к какому-то провайдеру и попросить его построить и поставить на ваше серверы а-а То есть тут опять же вариант есть разные но они все упираются в то что надо зависить надо вот смотреть на конкретную задачу её разбирать и подбирать под эту задачу инструмент нужны справа возле стены в середине Здрасте Спасибо за доклад Вопрос такой если встречались ли вы с проблемой неравномерно распределения контента покашам если встречались то как боролись неравномерно загрузки от Штатов имейте ввиду да да что контент распределяется по джинсам нашим неравномерным И хитрейт падает здесь смотрите как я не офигенно команды то наверное не смогу точно ответить на ваш вопрос Но это опять же вопрос больше про управление трафиком и про то что вот возможно нужно сходить к оператору и попросить его настроить там если например да чтобы вас ноты загружались Ну трафик на но зашел более-менее равномерно с точки зрения инфраструктуры как бы я то что я могу сказать С точки зрения именно внутрянки вот опять же можно в кулуарах пообщаться с моим коллегами Там же рядом и потом в середине Здравствуйте Вопрос такой пофичи касается очень часто приходится картинки хранить в S3 и через один раздавать Почему сидел не умеет рисовать до сих пор Потому что это не его задача условно Смотрите если вы хотите вот чтобы у вас уже ресайденная картинка была положена на сидении И сидел сам это сделал то скорее всего вы хотите странного потому что вот инженеров много задач может сам пережать вот картинку допустим раздать это Простая история а настроить правила по которому у вас картинка Три Санти в нужном нужное разрешение положено будет в нужное место этот кэш будет сколько-то жить и так далее так далее так далее Ну в этом можете сделать достаточно простым рус это отрицать картинку сами залив 5 фабриков на сидень как бы я могу завести свой джинс отрицать на нем и отдать вопрос Том зачем он мне нужен если бы сидим сама давала такую возможность вопросы по холеварах да про то чем должен заниматься сидиеной что cdn не исполняет пользовательский код То есть если вам это прям очень-очень нужно Ну вот тут есть у нас как раз человек с технического пресейла поэтому можно ещё раз это обсудить но в целом нет такого не делает то есть в случае стриминга допустим Если вы именно покупаете услугу стриминг то там будет делать стриминг и он за вас будет решать в нужные разрешение и класть файлики и выдавать плейлист пользователю с нужным разрешением а именно cdn - это ну мы считаем что это не его задача так вот в середине зала был вопрос Да вот нет с другой стороны Да Здравствуйте спасибо за доклад очень интересно у меня просто такой сегмент для статики Понятно В принципе ничего сложного нет но если речь заходит о каких-то динамических данных например когда сингл Application обращается к энду папе там за какими-то большими данными и вот для компании которая хочет внедрить И какой будет ключевой фактор по сложности интеграции вот этих самых динамических данных для Ну то есть Данные постоянно меняются как вот интегрировать так чтобы кэшбэн валидный для пользователя все время и при этом собственно говоря нагрузка на разработчиков самого сервиса не сильно возросла для интеграции Ох это прям слушать Это вопрос на самом деле со звездочкой потому что здесь нужно привлекать представил команду конкретного сидена То есть вы там не знаю примерно выбрали что там Вам нужен там поставщик не знаю в России не в России дальше Вы смотрите что вот например у сидел провайдера А есть там фичи по допустим по Edge вычислениям когда вот именно пользовательский код может выполняться прямо на серверах это стоит каких-то дополнительных денег у провайдера B есть там фича по тоже какому-то динамическому ускорению контента там реализовано вот так-то у третьего провайдера ничего нет но в целом Если вы зайдете с большим человеком то он для вас там как-то сделает здесь нет ответа прямо чёткого нужно сначала примерно понять там выбрать 3-5 примерно претендентов которые вас устраивают по ценнику локации и там не знаю вменяемости их Оби и к ним с ними уже общаться по тем причинам которые у них есть или которых у них нет Следующий вопрос сразу вытекающий из этого Существует ли какие-то Или возможно мир движется какой каким-то стандартным паттерном работы Сиен в плане такого взаимодействия или такие возможно уже есть документации ну здесь смотрите нет одного паттерна самого лучшего сети так как нет одного паттерна самый лучший день защиты каждая компания видит это по-своему мы это видим по-своему и там каждый компания развивается от потребностей своих клиентов и вижена которые у нее есть мы там смотрим Какие фичи востребованы там что у нас спрашивают Какие локации у нас спрашивают например и растем исходя из потребностей потребностей клиентов плеер у них сводятся клиентов у них будут свои фичи которые они готовы развивать свои рынки на которых они зарабатывают и поэтому все очень прям очень-очень зависит от конкретного провайдера боюсь что одним паттерном это не накрыть то есть там штуки типа шилдинга которые есть у всех которые просто вот но если мы говорим про всякие тонкие штуки типа компьютер и там чего-то еще то Сейчас такого нет возможно если там не знаю например акамай сделает клёвый компьютер который будет примерно понятно как повторить остальным и не будет жёстко завязано на инфраструктуру акамай то возможно мы там увидим у других поставщиков такие же ну плюс-минус такие же решения то есть тут опять же сложно смотреть Спасибо большое вопрос как раз слева возле стены там как раз вот рядом дорога так Да и потом будет потом в центре Здравствуйте Пожалуйста для самого простого случая вот сидели для статики С какого момента можно начинать задумываться о том что сидел нужен Какие Какой метрикой можно обложиться и сказать что Вот теперь точно вот прям какого-то Четкого не знаю ответа что начиная с двух гигабайт там раздачи в месяц или в день Вам нужен я наверное не могу такого прям сказать потому что там все очень сильный индивидуально как я в самом начале сказал что вы у вас подходит очередной момент апгрейда То есть вы понимаете что там есть палочка и она уже не справляется вам нужно либо полностью поднимать до центра там либо у вас пользователи начинают жаловаться что не знаю тормозить вот маркетинг приходит что у нас типа сайт низко ранжируется в поисковой выдаче То есть тут прям очень сильно индивидуально некоторые до сих пор живут как бы без сидена там не знаю на локальном рынке допустим у вас там все пользователи в санкт-петербурге у вас сервак стоит в санкт-петербурге и кажется что Сиен вам не нужен а может быть так что нужен потому что вы раздаёте кучу файла с S3 облачного провайдера и CD вам просто сэкономить денег потому что раздача трафика сигена гораздо дешевле Тут прям вот тоже зависит так да здесь напомню еще коллеги значит задав вопрос не уходим из зала потому что есть шанс выиграть приз Да пока слушал ответ на вопрос еще один вопрос возник а Имеет ли смысл вообще использовать cdn если у тебя не только статика но и динамика ведь в этом случае всё равно весь выигрыш будет нивелироваться тем что клиент будет ходить на сервер за динамикой который находится где-то а если уж ты собрался делать так чтобы у тебя и статика и динамика была ближе к пользователю то по-любому тебе нужно что-то своё нету готовых решений из коробки решение из коробки действительно нет здесь всё решают опять же обтесты вы можете там посмотреть насколько допустим вы нас там какой-то какого-то энд пойнта фишки будет то есть который будет просто таксироваться да и вы сэкономить опять же на хайке насколько это вам поможет Либо вы там можете прийти к тому что вам нужно Ну по факту там свой какой-то либо сегмент либо своя опорная сеть Да там чтобы вы как-то пользователя за динамик отправляли не в Москву например А куда-то поближе Тут прям всё крайне зависит от вашего от вашего паттерна трафика от вашего продукта может помочь может нет Может вам нужно своя семья построить так а вот в середине был еще вопрос все уже нет так отлично У нас еще был вопрос из чата зала Но вопрос такой очень общий Мне кажется что вот из серии Можно ли несколько секен сразу Люди интересуются а как вот мне как клиенту что можно предпринять чтобы как-то застраховаться защититься от падения моего Седина поставщика что делать как бы эта штука гораздо более легко имплементировать чем мультиклауд вы можете по-любому своему внутреннему паттерну опять же там по геолокации пользователя просто там рандомом или как-то еще за одним и тем же доменом держать там ссылочку генерировать либо на один сервер либо на другой И тем самым отправлять пользователя там либо туда либо туда тут вопрос сложности управления двумя там чтобы вас Ну вот правило допустим хотя бы совпадали да или там как-то это все управлялось но сделать это гораздо проще чем тот же мультиклауд И тем самым вы страхуетесь от падения одного сегмента поставщика Почему нет они каскадно так все не падают друг за другом потому что я помню когда Ну там на за времен когда вот в России да типа там Рамблер упал как бы за ним там через некоторое время Яндекс например падает Ну у нас Фейсбук упал как бы и за ним упала Пол интернета Ну такое тоже может быть то есть это уже Вопрос насколько ты большой то есть вот как я тоже говорил что если падать допустим акама и cloudf у вас Ну за ним ложится там очень многое а или Facebook там падает Я уже за ним ложится много и не потому что там не знаю там Facebook там сами по себе такие плохие там щупальца запустили куда-то а просто взаимосвязь ресурсов в интернете она к сожалению может быть крайне неочевидно и выясняется она только когда всё упала так и так Кому мы раздадим призыв сегодня можно вспомнить вопрос а человек Будем надеяться сам честно признается что это блонд Но вот мне честно понравился вопрос про геобазы вот от молодого человека про точность геопозиционирование и во второй наоборот про с да про сидим нужен ли он или нет И вот вопрос от молодого человека в пиджаке по поводу для динамики и Да его необходимости так поднимите пожалуйста руки чтобы Да вот а тем временем пока происходит это у нас есть подарок для Алексея Алексей спасибо большое что согласился прийти к нам ВК и выступить и мы тебе дарим Маруся часто выступаешь У тебя много подарочных салонов уже разных умная а-а Да есть вот теперь будет еще но теперь другая Спасибо большое спасибо большое"
}