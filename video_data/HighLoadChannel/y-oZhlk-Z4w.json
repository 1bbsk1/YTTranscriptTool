{
  "video_id": "y-oZhlk-Z4w",
  "channel": "HighLoadChannel",
  "title": "Управление доступом к операционным системам на серверах / Дмитрий Корняков (Мир Plat.Form)",
  "views": 383,
  "duration": 630,
  "published": "2023-01-19T07:01:38-08:00",
  "text": "приветствую всех на highload fondation меня зовут григорий я devri в компании euron и у нас в гостях дима из мир платформ расскажи пожалуйста чем ты занимаешься и чем занимается ваша команда всем привет более 6 лет я занимаюсь поддержкой инфраструктуры в компании нас пока занимаемся гор инфраструктурой мой фокус это linux и все что происходит рядом с ним сегодня я хотел поговорить про право на серверах что у нас сейчас уже есть из инфраструктуры сейчас у нас уже более шести тысяч серверов все это размазана на 14 доменов в десятке цод домена joffrey по активной виктория только linux вал доменов у нас семь штук и в свое время мы использовали дискретную модель выдачи прав со временем мы уперлись понимаем и поняли что что-то идет не так и эксплуатация становится все сложнее что такое у нас было с дискретной моделью когда мы у давали право ровно так как у нас просили то есть допустим есть отдел в нем есть 3 сервера 3 пользователя есть какие-то правила которые связывают появляется 4 пользователь 4 администратор ему просит право на тесто и сервера мы не разбираемся что было до нас делаем новые про его появляется 4 сервер и просят четверым людям на один сервер мы снова не смотрим что там была и продолжаем клепать клепать и клепать и это еще в том случае если все прошло хорошо никто нигде не ошибся никто не забыл и заказал все правильно скажи вот какие основные челленджи были в такой системе работы с правами то есть что вот тебе как человеку который это все разворачивает настраивает поддерживают помогает пользователям и одетом вот лично тебе с чем было некомфортно совершенно во-первых много правил а все остальное как бы выходила из этого например у вас есть 100 серверов на каждой из них по десятку правил приходит вот аудитор и спрашивает а кто администратор вам на посмотреть тысячи правил да можно за скрипта вать но скрипту сложно объяснить кто там дыба кто там администратор кто там на почитать все равно руками придется лезть результат выполнения скрипта что-то не очевидная кто-то может попросить скриншоты из интерфейса собственной системы выдачи прав а этого в тысяча скриншотов и путь в никуда это невозможно автоматизировать никак эту историю если вы четко не понимаете кто у вас администратор какие есть у кого право это значит что у вас фриске то проблемы в процессах это уже совсем как бы другой звоночек и людям приходилось где-то хранить каждому свои вот право чтобы потом новый человек в отделе выдать ему сразу и правильно она что в результате перешли мы перешли на ролевую модель предоставления доступа это подход когда в отличие от дискретной модели мы сначала продумываем как что должно быть системе делаем каркас правил и только потом уже назначаем пользователям какие-то права в этом случае группы пользователи уступают собственно ролью наделение правами это только добавление пользователя в какое-то уже существующую группу пользователей то есть появляется новая информационная система мы сразу думаем сам сделан каркас а потом уже его наполняем мы сделали довольно таки понятный набор правил самое сложное тут бы договориться о формировании этих правил о том как их красиво сделать так чтобы красиво парсить вот у нас там есть примерчик так правило такого как это правило хост bass access control которая дает право на вход там ps сашу на сервер вот поправил этому видно что она дает и просто прочитав его можно уже понять что вот там какой-то группе админов дается доступ по ssh наверно какую-то группу серверов имея такие четко уже структурированные строганные именованные правило вы можете их легко как-то выгружать и дальше как с ними уже оперировать какие мы ввели ограничения на это ну 1 пользователь и можно быть в не ограниченном количестве ролей это понятно но один сервер должен быть строго в одной группе серверов иначе если там начнется такое дополнение многие группы все равно скатимся с диск редкой все равно будет много непонятных прав неочевидных прав и при переводе на доливку мы удаляли сервера из всех остальных групп доступа то есть мы договаривались с людьми выгружали там текущие право на их основе определяли роли доступа к системам делали каркас переносили туда пользователи и просто бросали все старая да вот эти вот использование групп она конечно удобно с другой стороны групп может быть много то что вы следите что на каждую машину может быть только в одной группе это топчик решения мне очень импонирует а с другой стороны разработка именно вот разработка сейчас довольно таки отжарю мы не можем как 20-30 лет назад ждать пока разработчику несколько месяцев дадут все необходимые доступ и мы не можем там по неделю по 2 готовить ему стейджинг окружении разработчики хотят чтобы они у себя в git логики или гитхабе кем крикнули кнопочку диплом им сразу персональный station как оружие не развернулся все провода лисе собралась тепло и лась вот как вы решаете задачи для стейджинг и для разработчиков уже постоянно нужны физические виртуальные тачки сосуда ты правильно говоришь это как раз таки те процессы где нужно вчера на такой вот рыба к которому я говорю мы прыгай перевели около 3000 продуктивных серверов но поняли что до с командой диопсид история не работает сервера мы выделяем да у нас есть там свое облако обслуживание terra форм провайдер который там сразу пока метал gaiters сворачивает но это совсем другая история права собственно тут мы развили эту же историю с рыбаком но наделили собственно тузы которые вшиты в диап совские seo и полномочиями на каталоге и на назначение собственно пользователей в группы пользователь то есть на предоставление уже с описанных ролей то есть инфра подготавливает каркас инфраструктуры и дает право как даем право windows это право туза на какую-то по ушку в которой лежат сервера в африке есть замечательный механизм тоже называется роба из taxis control но это про право внутри самого каталога и там можно довольно g0 арно через называемый механизм разрешений выдавать права вот на какой-то уже distinguish the name и вот например у меня видно как можно сделать именно разрешение которое дает право на управление одной конкретной группой в каталоге на наполнением пользователей и эта история была сшита всей у ребят есть называемые мета это метафора с описаниями проектов люди сервера гипс артефакты и так далее и тому подобное все хранится в одном месте проекте пока метлу приходит человек то добавляется у него сразу появляется права на все эти сущности и вот там же это туз наделяет этот проект у которого есть определенные сервера также правами автоматом вот кстати с этой информации это очень интересная и ценная штука я настоятельно рекомендую нашим гостям ловить диму на стенде мир чтобы он вам все это показал рассказал потому что это мало кто делает мы подходим к концу нашего тех тока и конференция они в первую очередь про общение и ты и я сейчас записываем это в прошлом но в настоящем на конференции мы конечно же ждем гостей на стендах нашей компании и вот давай поговорим о том на какие темы тебе было бы интересно обсудить с теми кто придет к вам на стенд какие у вас планы на будущее как ты видишь инфраструктурные решения по работе с правами какие челленжи так сейчас на твой взгляд есть хорошо сказал про мету про мету можно почитать как раз таки по qr кодам у нас есть там ссылочка ребята на хабре подробно писали как это работает у них что у нас за challenge эту историю мы делали того кого трех лет где-то делали ее три человека в свободном от работы режиме так сказать но мы перевели много сделали каркас на столь которого можно дальше автоматизировать то есть дальше мы планируем решать такие кейсы как автоматическая выдача прав то есть один может сразу схватить в service desk системе нужную группу привязанную к роллер дать право зачем это делать человеку человек может получить нужные право просто придя в нужный отдел на котором есть десяток базовых ролей которые допустим есть в его структурном подразделении и так далее и тому подобное и я бы хотел поговорить наверное про то как делаются маленькие кирпичики на к основе которых делается дальнейшее большая автоматизация потому что где мы что они автоматизировали мы сюда приходили к тому что сначала ты должен сделать из какого-то legacy что-то какой-то понятный механизм которым ты можешь легко управлять дальше управлять на этом мы прощаемся с вами из прошлого и ждем вас в настоящем на конференции дима готов ответить на все ваши вопросы на стенде компании и интересного вам следующего доклада"
}