{
  "video_id": "28It-qfZFic",
  "channel": "HighLoadChannel",
  "title": "Что нового в nginx? / Максим Дунин (Nginx, Inc.)",
  "views": 3914,
  "duration": 3140,
  "published": "2017-12-11T00:44:48-08:00",
  "text": "собственно меня зовут максим дунин я разработчик engine x это звучит почти как я алкоголик сегодня я буду читать вам чем шлок хендрикса вслух и по возможности с выражением не знаю насколько хорошо получится постараюсь чтобы не очень хорошо потому что но вот в прошлом году прочитал как-то вроде неплохо зачем-то позвали в главный зал хотя я более чем уверен что половине народа моё выступление не интересна потому что они уже прочитали change log другой стороны мне говорят что у нас как-то ч незлоб мелкими буковками в между ними что-то много-много между строчек написано в общем ну для начала давайте разберемся с какого места читать чинь лук видно что людей пользующихся шестым дыбе а нам почти не осталось большая часть все-таки уже пользуются первыми версиями engine икса и в первых версиях почти 50 процентов используют свежие то есть 112 это наша стать текущая стабильная редкая и 113 это та ветка над которой мы сейчас работаем которая main line это чуть хуже чем в прошлом году но в общем вот в общем и целом не плохо еще остались люди которые пользуют старые стабильные ветки но к счастью почти не осталось людей использующих старые mainline что в общем в целом соответствует тому что мы продвигаем в народ использоваться нужно либо стабильными ветками либо текущем мои текущие mainline веткой сегодня мы будем говорить о том что мы собственно разрабатывали в ветке 111 и соответственно то что доступно в стабильной ветки 112 и о том что мы сейчас разрабатываем ветки 113 и тем чем вы тоже можете собственно пользоваться нашим онлайн ветки они вполне пригодны для production работы для начала 111 там много всего вам это все доступно в последние на стабильном релизе 112 2 стрим который мы добавили в 19 мы его продолжили дорабатывать теперь там есть переменная и всякие модули для работы с переменными такие как мапри turn guildy айпи сплит clans я лайк и добавили даже акция слог стрим теперь позволяет делать всякие смешные штуки в зависимости от адресов в общем все всякое интересное с использованием переменных что если вы по балансируете произвольное соединение с помощью модулей стрим у вас теперь практически такие же возможности как вы чтите пью добавили поддержку проверки клиентских сертификатов если проверка не прошла то соединение будет закрываться результат проверки есть соответствующие переменные опять же можно с помощью всяких map of отправлять в зависимости от результата клиентов на разные на разные бренды добавили возможность посмотреть в ссср внутри ссср соединения точнее в клаенг хэллоу не снимая собственная цель можно узнать какой сервер просил клиент посмотреть на соответствующий tls extinction server name и в зависимости от этого отправить клиента на разные бэг-энда в блоках up stream и в ттп iv стрим научились ограничивать количество соединений к отдельным сервером исходно мы это делали для яндекс плюс теперь вот в 111 это попало в пан source научились чуть лучше работает с клиентский спрос опрокидыванием клиентских адресов на backend если традиционный способ это передать адрес клиента в заголовке когда вы используете ищите теперь-то вы можете добавить заголовок x-trail айпи или x ворот did for в котором написать что клиент был такой то ну или если говорить о произвольных соединениях то есть прокси протокол который позволяет сделать приблизительно то же самое это замечательно работает и в общем по-прежнему это рекомендованный способ но к сожалению это работает не всегда потому что вам нужна поддержка со стороны бэкенда если backend не умеет понимать эти заголовки то ничего сделать невозможно для таких ситуаций в мы добавили поддержку transparent proxy когда индексом делает boing на адрес клиента и как бы устанавливает как бы кэмбл соединение от имени клиента это достаточно сложно конфигурировать потому что вам нужно обеспечить правильный роутинг чтобы пакеты от бэг-энда приходили именно на engine x они отправлялись напрямую клиенту чтобы джон иксах видел и рабочих рабочие процессы придется запускать по другому если у вас backend ничего не умеете других вариантов нет то можно попробовать сделать так и еще одна проблема которой хотелось бы сказать это проблема количество соединений которые можно установить coбaк винду вот кто знает сколько соединение можно установить бэг-энда если у нас один backend никто не знает не верю 65 535 правильно если у нас два бэг-энда умножаем это число на 2 потому что там если в случае одного бэг-энда у нас степень свободы только одна это локальный порт то в случае если у нас два ай ай ай пи адрес source зафиксирован destination зафиксирован destination порт зафиксирован остается только локальный порт если у нас два бэг-энда то у нас соответственно локальные порты могут быть разные потому что адреса disney шин у нас соответственно разные мы можем для один и тот же порт локальное использовать для одного бэг-энда и для другого бэг-энда соответственно там если нам нужно полмиллиона соединение установить coбaк рэндом то мы делаем 10 бог рэндов и в общем это работает а потом пишем в конфликт прокси buy ant с ip-адресом это работать перестаёт мы снова упираемся в ограничения в 65 535 как будто у нас один backend почему так происходит так происходит потому что баян делается до коннекта и должен выбрать локальный порт который бы не конфликтовал ни с одним из существующих соединений к брендам а он не знает какому бренду мы будем connect устанавливается соответственно мы упираемся в ограничении опять 65 535i нужно либо собственно не делать боинг либо использовать много source айпи адресов то сделать бант на разные пи адреса чтобы получить много соединений к брендам или вот в линуксе появилась опция и пиво инт адрес сноуборд которая позволяет сделать bands но только вот к адресу апорт при этом не выбирать соответственно можно использовать прокси buy and не волнуюсь о том что у нас что мы попадем на ограничение в 65 тысяч соединений вот есть ли ваш linux это умеет мы это теперь поддерживаем посмотрели еще раз на цепь mutex который как вы наверное знаете предназначен для того чтобы решать проблему тандыр in heart то есть не давать ядру будить все вообще процессы по приходу одного нового соединения достаточно разбудить один процесс чтобы он его да это сосновое соединение принял а цепню таксу engine.exe всегда был и всегда был включен по умолчанию сейчас мы на это ещё раз посмотрели подумали что вообще-то у нас процессов мало потому что ну зачем в engine.exe много процессов наверное по количеству ядер больше не надо поэтому даже если отсутствуют экс не используют все равно как потеряно на то чтобы разбудить все процессы будут не очень большие это а c ткaнью tex очень часто мешает в тестах ну не то чтобы мешает просто очень многие люди пытаются там тестировать индексы количество хан шейков в секунду умном нога процессом какие сосали khan шейков в секунду на многопроцессорных машинах удивляются что он не сканируется пытаются тестировать включённом оценки new так сам естественно но не будет коллировать если у вас включен отсек new так сосед мьютекс те новые соединения и реализуют и вы фактически обрабатываете всех все новые han j все основы их сосальщики на одном процессоре мы немножко устали это объяснять кроме того отсек мьютекс не спал не используется на windows ну просто мы там не умеем нормально работать с несколькими процессами оценку загс не нужен если использовать лист марию спорт и на линуксе появился и пол эксклюзив такая опция которая позволяет сказать ядру что буде нам только один процесс из всех так что теперь у нас отсек мьютекс по умолчанию выключен если вы используете linux это достаточно свежий там есть и поллукс клюзе что мы его поддерживаем в ссср много всего сделали в частности сделали решение для проблема выбора сертификатов классический сертификаты в ссср это rs-a они совсем совместимые вообще хорошие простые очень простая математика но дорого с точки зрения ресурсов сейчас есть и cds а на эллиптических кривых уже почти совсем совместимы и очень быстро очень быстро вот просто совсем быстро на порядок бы там хан шейк который собственно есть основная часть ресурсов в ссср handshake на порядки быстрее подпись на вот результат об у нас цель спит на слайде и видно что больше чем в десять раз быстрее подпись если взять у нас цель фонарей это будет еще лучше это цифры полученные суп у нас цель 11 хотя 101 и 102 и cds а переписана сэмплере и там будет чуть не 12 подписей в секунду это конечно не полный хан шейк с полным had шейком немножко похуже ну в частности потому что помимо собственно аутентификации нужен и щеки и кощей в кексик у нас обычно сейчас используются шифры форвард secrecy и ключ об обмен ключом делается отдельно сейчас риса в этом процессе не участвует и уже достаточно давно все используют диффи-хеллмана на эллиптических кривых который собственно тоже быстрый вот если говорить о и цдх е и р с а то там в простом бенчмарки получаем 300 хан шейков в секунду переходим на dslr где cds и сертификаты получая больше чем в 3 раза прирост производительности в общем хорошо проблема в том что ется дэвиса сертификата просто так если мы будем использовать что у нас отвалятся старые клиенты старых клиентов терять не хочется вот чтобы их не терять и при этом получить прирост производительности мы теперь умеем делать так то есть вы можете в один сервер загрузить два сертификата 1 р с а другой и cd is a и у вас будут работать быстро новые клиенты которые умеют едут и отсюда риса и как-то продолжит работать старые клиенты в том числе в зависимости от используемого шифра будет подбираться либо 1 либо другой сертификатом добавили всяких переменных в ссср сайфер показывает список шифров поддерживаемых клиентам ссср к список cry эллиптических кривых опять же поддерживаем их клиентам переменную сын клайн твери fai чуть-чуть изменили теперь в ней в случае ошибки содержится собственно текст поясняющий в чем была ошибка это немножко у про упрощает разбирательства sap джек и еще клиентского сертификата теперь в пару формате raw c45 14 значения в старом формате доступные в новых переменных суффиксом legacy добавили переменные с началом и концом срока действия сертификата так же количеством дней до окончания действия клиентского сертификата не по всякого еще в сэли директивой с целью cd теперь умеет список кривых это доступно при использовании у нас цель 102 и выше по умолчанию используется значение auto она зависит от конкретной версии опанас цель в совсем свежие храм сначала идет бернштейн x 255 19 кривая дождь бернштейн а потом соответственно prime 256 правим 521 и prime 384 дичь парам по умолчанию теперь отсутствует то есть обычные дичь шифры выключены почему мы так сделали потому что во-первых это очень медленно особенно если используя там 2 кило битные ключи во-вторых потому что использование стандартных каких то дичь параметров но подвержены атакам с pride просчетом и ну в общем есть мнение что стандартные параметры прошивать плохо мы решили что мы вот вообще их уберём тег стандартные параметры которые у нас были теперь их нет теперь если вы хотите обычного диффи-хеллмана то вы можете пользу задать параметры самостоятельно самостоятельных сгенерил но скорее всего вы не хотите просто потому что есть div хиллман эллиптических кривых он быстрее и в большинстве случаев он сейчас работает в директиве стелс-экшен ticket кий теперь можно использовать шифрования в целости кидз с помощью aes-256 это ну вообще эта директива нужно если вы пользуетесь кластера серверов и хотите чтобы у вас tls сашин tickets сработали между этими серверами так пункт по умолчанию ключ генерится внутри а полоса цели и просто при старте процесса если вы хотите сделать общий ключ на несколько на несколько серверов и балансировать нагрузку между этими серверами то есть директива из lc шансики ткий теперь она умеет работать чуть лучшем с шифрованием раньше было aes-128 сейчас я с 256 динамические модуля они появились ветки 19 вы можете собрать свой модуль и загрузить его в engine x не перри собираюсь собственно сам анджин x у них однако есть одна проблема точнее была проблема что структуры зависит от опции сборки и чтобы модули работали нужно их собирать с теми же опциями что и собственно основной индекс это не всегда удобно и теперь мы сделали одну большую опцию который обеспечивает совместимость она называется вискам pad вы собираете основной индекс эту опции дальше просто все модули собираете тоже с этой опции и любой индекс собранный списком pad вне зависимости от других опций совместим с любым модулем собранным тоже swisscom pad за одно это еще дается совместимость с плюс нашей коммерческой версии чуть-чуть занялись тем что улучшили завершением старых рабочих процессов достаточно типичная проблема состоит в том что при обновлении конфигурации старые рабочие процессы завершаются долго особенно если вы проектируете в псаки то например почему так происходит для завершения старых рабочих процессов нужно чтобы все старые запросы которые в этих прав рабочих процессах начили начались чтобы они завершились это достаточно быстро обычном происходит сочтите пи потому что но клиент запросил картинку моему картинку отдали там за секунду и все собственно запрос завершился дальше от соединения можно вместе с завершением запроса закрыть следующие соединение клиент установят уже в новый рабочий процесс не всегда это получается сделать быстро иногда у нас клиент что-то долго-долго-долго скачивает и процессы висят иногда у нас используется какой-нибудь проксирование веб сокетов а если вы этого специально не предусмотрели то процессы могут висеть там сутками обеспечивая работу 100 раз какого-то старого соединения свое пса китами которые клеям держится непонятно сколько еще будет держать мы добавили опцию под название директиву worker shoot down time out которую вы можете написать в конфиге и после заданного тайм-аута engine x попытается все существующие соединения даже если в не хочу что-то происходит попытается их завершить на понимать что вот каждая атака срабатывание этого тайм-аута означает что у вас какие-то запросы оборвались какой то клиент что-то не чего-то не получил поэтому не надо ставить этот тайм аут слишком маленьким но какие-то разумные цифры там можно использовать но если у вас есть долгоживущие websocket соединения ну сколько-то вы дадите клиентам поработать а дальше он завершится у вас соответственно ну точнее соединение пару trouble старый рабочий процесс engine.exe завершится вас освободиться немножко памяти для того чтобы снова дела и 3 конфигурацию кыш научили работать получше с устаревшими ответами если раньше можно было включить использование устаревших атлетов только из конфигурации то теперь мы умеем параметр 100 lvl rival edit заголовка крышку вдруг это rfc про то как использовать устаревшие ответы и как этим управлять собственно с бэг-энда соответствие мы поддерживаем стрел в ауре валидэ it's they live error в соответствующем параметры вы задаете время в течение которого ответ будет валиден даже если он устарел мука и точнее после которого его совсем нельзя использовать научили кэш обновляться фоне что позволяет решить проблему тех людей которые вот если у вас из-под если вы используете устаревшие ответ это в общем большая часть клиентов получает ответ непосредственно из кэша но есть один несчастный который которого прокси руют на bpm для того чтоб ответ в каше обновить этот один он будет ждать ответа бэкона и получит ответ столько так только тогда когда бэкон его вернет это обычно это нормально потому что ну backend достаточно быстро генерит ответ его возвращает вопрос лишь в том чтобы множество одновременных запросов не положила backend но иногда даже один ожидающий клиент эта проблема потому что на вас там backend может много секунд пытаться сгенерировать тяжелый ответ для таких случаев мы сделали фоновое обновление включается с помощью директивы прокси кэшбэк ground апдейт и обновление происходит в под запросим в тот момент когда мы клиенту возвращаем собственно от устаревшей ответы с каша поменяли в кэше логику работы параметра юст импасс если раньше он создавал если вы выключили юст м pass off если раньше он создавал подкаталог непосредственно в каталоге кэша и туда складывал временные файлы то теперь временные файлы создаются непосредственно там же где будет целевой файл потому что иначе на линуксе иным вызывает лог контент шин в кино им между каталогами на линуксе берет лог на всю файловую систему и большая активность каша приводило к секундным задержкам у наших клиентов так что мы немножко переписали логику файлы теперь создаются непосредственно там же где их ей нужно будет держать а имеем внутри каталога он дешевый добавили директиву прокси кэш max range of sad которая позволяет отключить кэширование для далеких ренж запросов чтобы не скачивать весь файл в кэш целиком а просто протянуть на бы кант запрос как есть чтобы ему клиенту быстро вернули запрошенный рендж и собственно все научились работать с относительными перенаправления my точнее их возвращать теперь есть директива абсолют redirect которая которого можно выключить по умолчанию engine x генерируют абсолютное перенаправление так как требовал rfc 2616 сейчас в свежем rfc х ттп 117 231 можно возвращать относительно и мы их теперь умеем возвращать это иногда полезно если джон x у вас стоит за проксей не знает какой у него на самом деле адрес научились логировать в джейсон вот так как нарисовано на слайде это люди давно пытались делать к сожалению так не работает потому что в логия есть произвольные пользовательские данные там всякие заголовки и чтить и периферию за роген там может быть что угодно если индекс просто пишет логе как он пишет он будет генерировать и skipping который некорректен джейсоне теперь можно записать вот так escape джейсон и вас будет писаться нормальный валидный джейсон научились чуть лучше работать с портом клиента во всяких разных местах c3 live from теперь понимает порт если он указан добавились переменные прокси протокол пор trello и пили mode порт и всякого по мелочи на ipo лорды хоп мы теперь имеем полагаться если ядро новое в hd2 масса всяких улучшений и исправлений и наверное даже ухудшение но учтите пе-2 новый протокол в нем еще предстоит много всего делать в том числе и не только нам браузер и до сих пор нормально с ним работать не могут map научился сложным комбинациям переменных и строк обзавелся параметрам вала таял который отключает каширование результата если вам нужно результат в какой-то момент перегенерируем edge фильтре появилась поддержка до ввп и добавилось переменной a request a идеи с помощью которой можно идентифицировать запросы все это было сделано в ветке 111 и доступно в последней стабильной версии 112 2 113 это та ветка над которой мы сейчас работаем наверное самое большое что в ней появилось по к текущему моменту это модуль мир который решает задачу отправки запроса куда-нибудь дополнительно например если вы хотите этом запрос где-то правильно проанализировать там как какую-то статистику собрать или просто бы кант соответствующим дополнительный потестировать можно написать мир указать uri из в соответствующем лакей шине спроектировать это туре в нужное место работает с помощью background под запросов точно так же как и обновление кыш мы их заодно немножко переписали улучшили обновления кэша тоже стало получше по умолчанию тело тело запроса читается да когда вы делаете мира можно его не читать и тогда мир раза под запрос будет собственно без тела это такой способ оптимизации заодно образовалась при контент фаза там теперь живут трой files и собственно mirror туда можно встраивать свои модулям и вычислили некоторые вычистили некоторое количество проблем в частности проблему с ранним освобождением тело запросов прокси пас собственно эта оптимизация которая говорила прокси пас после того как мы отправили телу запроса на backend мы его освобождали потому что нам больше не нужно это позволяло там сэкономить место под временные файлы пока мы будем ответом не спеша отдавать клиенту она не всегда работало как надо потому что там дальше мог случиться с исой который тоже мог под запросе захотите зачем захотеть тело как-то использовать тоже куда-то еще передать перевод этой проблемы эту проблему вычистили и работаем над поддержкой tls 13 все что такое tls 13 это новый такой протокол в общем то совсем новый правильно бы наверное было сказать что этот ls2 по сравнению стоял с 12 там вычистили множество всего остались только шифр is perfect for words secrecy с практической точки зрения у него есть наверное два главных преимущества первое это полный хан шейк обычно занимает всего один раунд rip второе у него есть режим но лир ттк когда мы общаемся с известным сервером мы можем вообще не тратить дополнительное время на хан джейк ртт правда есть режима номер tt есть правда проблема он не предоставляет реплей protection его можно использовать для этом патентных запросов когда вы там какую-нибудь картинку запрашиваете или статический файлик но не надо использовать в ситуации когда вы переводите деньги со счета на счет это может может закончиться плохо потому что кто-то подслушает и тот же самый запрос повторить несколько раз стандарта на tls 13 все еще нет основная проблема которая сейчас тормозит его принятие это так называемая middle боксу сыр и шью в среднем наблюдается процент ошибок где-то от полутора до трех с половиной из-за каких-то промежуточных фильтров но и разворачивается драма в письмах про дата-центр мониторинг люди из корпоративного сегмента слегка страдают что не могут смотреть в внутрь tls в рамках своего дата-центра даже если у них есть приватные ключи ну просто просто потому что из tls 13 исчезли шифры без форвард секрете мы начали работать над поддержкой tls 13 теперь индекс понимает параметр tls в 13 в директиве риса цель protocols по умолчанию tls 13 выкрашена если вы хотите его потестировать то надо понимать что нужно опанас 111 который еще не выпущен собранные со специальной опции конфигурации был tls 13 и с браузерами это в общем из коробки работать не будет потому что в браузерах даже если вы в специально полезли в настройки и включили будет драфт 18 опанас цель поддерживает drove 21 если вы хотите драфт 18 нужна специальная ветка tls 13 драфт 18 в самом engine.exe не будет работать c шины юсб кантами при использовании tls 13 мы это поправим в ближайшее время и пока мы не поддерживаем сырой ртт в планах когда будет более или менее понятно как это все совмещается ищите типе сейчас делается драфтера vc про использования эрлидо то ну собственно номер tt режимом в http наверное это будет включаться просто отдельные русской по умолчанию будет опять же выключен по мелочи всего с целью никишин с брендами мы теперь разрешаем если ваш backend вдруг зачем-то хочет рене гашишем то теперь мы engine x готов с ним общаться раньше просто закрывал соединение добавили переменную circle and escape цирк это сертификат клиента в url encode формате его можно использовать вам заголовках или куда-то когда я вам нужно куда-то передать параметр их запросам в логе мы теперь пишем пит процесса что сильно упрощает разборки если вдруг индексу приходят сигнала и вы не знаете кто их посылает почему-то регулярно сталкиваемся с подобном люди наверное пишут какие-то скрипты и вращения лагов и ли у них что-то вообще в системе странное происходит разобраться кто послал сигнал подчас совершенно невозможно тепло affinity теперь можно задавать на dragonfly bsd если вы вдруг знаете что это такое или пользуетесь добавилось базовая поддержка и чтить и trailers и директива от трейлер в принципе это делалось как часть поддержки проксирование грп he который пока нет но это вообще можно использовать и само по себе для того чтобы прокидывать например на frontend какую-нибудь информацию для лакирования с директива с этой live from умеет имена теперь не обязательно писатель пи адреса extreme e-mail парад добавились параметры ерцево books in da boom pow директивы лесам которая позволяет задавать размеры буферов или сенсор о клиентских сокетов все это доступно в 113 6 и дальше будет доступно еще больше но пока еще пока нет мы работаем над этим взять от все можно на in gymshark если у вас free bsd то прос прост просто можно пользоваться стандартными портами этом все свежая если у вас linux системные пакет скорее всего старые у нас на engine 40 есть собственные пакеты для linux всем спасибо вопросы друзья не стесняйтесь поднимайте ручки вопросы можно задать также предыдущем докладчиком игорь и николай здесь вот на первом ряду и друзья традиционно пожалуйста смену составов проводите в тишине спасибо большое за доклад у меня немного не в тему вопрос а когда нибудь можно будет использовать я так в прокате пасе еще раз можно будет j-tec использовать в proxy пасе е т кв прокси пасе да но в общем detect прокси пасе можно использовать и сейчас а в чем проблема он будет пропитываться с одного engine косу на другой он прикидывается с одного индекса на другой спасибо большое версии мужчина с бородой в центре зала смотрите у меня два вопроса один вопрос про мира вот я в середине а вот наградил похоже про миру другой вопрос про районе целом на самом деле про предыдущий доклад не думаешь ты сможешь ответить вопрос про миру такое скажи пожалуйста вот очень часто хочется запустить какой-то новый сервис сравнить налить копию трафика и сравнить ответы просто для того чтобы грубо говоря убедиться что все работает как нужно можно ли ветки 113 будет в этом паттерне использовать мир модуль сравнить ответы сейчас нельзя можно просто то есть то что engine x умеет делать он делает запрос в соответствующее место куда ему сказали и то что получил в ответ просто выкидывает так что сравнить сравнить не получится скорее это для именно для сбора статистики можно посмотри там можно на бы кэнди посмотреть на тестовом что все работает и как-то отправляется хорошо тогда и еще вопрос про unit скажи пожалуйста вот допустим есть какая-то компания у которой достаточно стандартная конфигурация это не такой зоопарка кто там и python и ruby так далее вот они используют а почты там фа си джей процесс менеджер они используют engine x прекрасным образом общаются между собой уюни то есть удобства конфигурирования а у юниты есть еще что то что позволило бы управлять кластером удобнее там еще чтобы что добавило бы больше я бы сказал так веса для того чтобы всерьез рассмотреть переход компании knight технология нет по поддержке кластеров пока нету мы рассматриваем его безусловно да спасибо ну собственно вы можете сами загружать любую конфигурацию на любые любые бы каинды с юнитам удобства собственно динамическая конфигурация сделано именно для того чтобы это можно было делать легко и непринуждённо затрат есть подаете история да спасибо за так на спасибо диме спасибо за предыдущий доклад у меня такой вопрос принципе он присоединен можно сказать предыдущему какой то плюс отзывы от связки именно джинкс и июнь это какой то вообще будет не будет то есть если какой-то профит от того что именно ваши две технологии в данном случае будет использоваться как вы ну ну нам точно будет плюс той части что мы надеемся что юнит будет хорошим упреки ищем сервером и заменят весь тот зоопарк с которым мы вынуждены работать может быть еще игры что-нибудь добавить ну во первых у нас накоплено большая экспертиза в поддержке всяких вещей поэтому плюс будет от того что у нас есть опыт все понятно то есть конкретных вот именно таких интеграционных моментов не плюшек не туда пока мы не видим скорее всего вы понимаете как происходит разработка а нам происходит по крайней мере у меня оно происходит и бойцом то есть проектировать на будущее там что-то но как бы общих чертах можно но по мере разработки появляются какие-то там такие интересные решения вполне вероятно совесть не тоже будут отлично вот сверху будьте добры здравствуйте и спасибо за доклад вопрос скорее предыдущей презентации вопрос такой если у нас мы решили переключить новую на новую версию приложения в unity но при этом у нас уже висит соединение со старой версии что в этом случае будет то есть он запроса все так же будут держаться с тем потом уже просто ну значит смотрите старые соединение отрабатываются от работу там где есть если вы запускаете допустим вы называете это приложение ну новый код опишите как новый applications to он просто запуститься вы старого удаляете все что как бы все что работать с клиентами она постепенно грыз или выйдет то есть завершится без всякого но все пройдет нормально вот ну в общем то ответил спасибо я пожалуйста дрозд спасибо за доклад я увидел там слова windows и хотел бы уточнить ведутся ли какие то работы по улучшению работы под windows или как правильно если все-таки приходится использовать singers на windows как это правильно делать правильно использовать джинкс на windows для гофрирования там для разработки нормально он как-то работает если вы хотите его использовать в продакшене то я конечно не рекомендую этого делать лучше наверное там на тех поднять виртуальную машину с линуксом алис при bsd и использовать в нем мы что-то с windows конечно делаем какие-то там найденные ошибки исправляем иногда какие-то улучшения делаем но windows от совсем другая платформа с ней тяжело в том плане именно что она другая там скорее всего будут всякие дырки и много чего работать не будет дополнил умирающая платформы отказывайтесь от нее пока не поздно спасибо спасибо там еще рядом был вопрос вот на ряд ниже да спасибо за доклад много интересного и пресса цель сказали но вот возник такой вопрос а планируется ли поддержка sp для клиентских сертификатов где-то с что все избранный каменских сертификатов ну как сказать в ближайших планах у нас оси испить для клиентских сертификатов нет возможно когда нибудь сделаем если вы готовы этим заняться его не используем использовать дамбу чуть учтем если бы если будет что тестировать обязательно выдадим но в ближайших планах этого нет подскажите еще вот модуль стрима он всегда к перед в пакетах его нет вообще будет моду и вдоль стрим собирается по по умолчанию из исходников он не собирается но в наших пакетах он есть и на сколько я понимаю во всех операционных системах он тоже обычно есть иногда его делают динамически загружаемым потому что его можно загружать динамический собрав отдельно если вы не у себя в операционной системе не нашли ну во-первых проверьте версию что она подходящая модуль стрим появился в 19 во вторых проверьте нет ли если версия подходящие проверьте нет ли рядом динамического модуля в наших наших пойти так для linux он точно есть мы его собираем и вот с первого ряда последний вопрос да спасибо за доклад такой вопрос angels у него большая история там сначала 2009 я не путаю ничего и неизбежно как бы со временем у такого проекта накапливается legacy вот вопрос чем связан вот тут как раз упоминалось переменная southland escape сердце леса escape plan cert она как бы было видно для того чтобы по-другому переформатировать прям сертификат вот от этого много-много-много лет существовала сил consert и как бы люди пользовались но в какой-то момент это содержимое уже прошли хадере нельзя было передавать вот backend ну в частности вот apache как бы он уже отказывался потому что изменилось в спецификации лили бают уточнили я точно не помню вот и как бы добавил новые перемены проблему проблему то решили все хорошо просто как бы с момента возникновения проблемы до момента решения прошло примерно два с лишним года и очевидно что как бы вот это большое время она понадобилась не для того чтобы найти как бы разработчика и время на реализацию душ там реализации то банально видимо была у вас желания как бы или точнее нежелания добавлять что гномы переменные новые директивы то есть не выносить большой энтропии видимо вот в проект но в конце концов все-таки под давлением общества и и добавили вот а 2 года и соответственно рут каким то не очень правильным решениями пытался эту тему решить вот и вот такой вопрос не знаю у вас есть на данный момент стратегия что делать вообще с легаси она в принципе неизбежно не потому что в свое время были не принято неправильное решение а потому что но мир меняется стандарта меняются legacy появляется соответственно в идеальном случае legacy просто надо брать лопату для снега и legacy как бы метать но есть заказчики там есть какие-то нас что что вам делать чтобы в данном случае вот эти два года они бы превратились в две недели если бы вас конкретный план был аха точно это уже не будет работать и делаем вот по этому алгоритму это вопрос если говорить конкретно про эту переменную то там история немножко сложнее в том плане что на самом деле сертификат в старом формате вы по-прежнему можете использовать там вообще по моему добавилось ручка которую нужно включить чтобы она работала и она до сих пор работает вот план собственно как сделать я озвучу достаточно давно к сожалению него там пригодного к комменту почти никто не прислал когда у меня появилось время я этим я этим занялся и сделал то тут вопрос нас насколько нужно большинству видимо было не нужно просто потому что они включали ручку и дальше работали что касается вопроса legacy в целом то безусловно да legacy накапливается мы с этим достаточно неплохо научились справляться за прошедшие годы мы подобные legacy вещи сколько-то времени держим объявив их депре кейденс а потом просто выкидываем сначала устаревшие вещи объявляются депре кейт а потом через некоторое время выкидываются engine.exe так достаточно часто происходит со всякими старыми директивами и так далее у нас про олега и все будет большой разговор с ютюбом очень скоро они следите за рекламой друзья на этом у нас смена составов максим поклонитесь игорь спасибо спасибо всем за вопросом"
}