{
  "video_id": "gJy96lsHCj4",
  "channel": "HighLoadChannel",
  "title": "AutoLSR - автоматизированный сбор сведений при значительных инцидентах / Владимир Колобаев (Авито)",
  "views": 611,
  "duration": 2655,
  "published": "2020-04-14T11:06:50-07:00",
  "text": "меня зовут владимир колобаев я инженер мониторинговой vita сегодня буду рассказывать не про мониторинг сегодня буду рассказывать про то как мы им пользуемся и про то как мы ловим инциденты у меня есть вопрос к залу пока вы тут собираетесь ребята кто нибудь знает такой канал в телеграме который называется церковь метрик понятно ну здорово хоть кто-то это популярный канал про мониторинг там очень много различных компаний очень много инженеров и все как бы говорят о мониторинге мне просто интересно было кто из тех ребят которые о нем знает сегодня пришли ну в общем понеслась сегодня я буду вам рассказывать про авто или сары и начнем мы собственно наверно его следующего плана у нас быть такое расскажу с чего все начиналось и чем все закончилось введение есть такое понятие как лср это live site preview live site preview это процесс который направлен на то чтобы выявлять причины возникновения инцидентов он не направлен на то чтобы мы эти причины чтобы мы гасили сами инциденты чтобы мы тушили пожары он направлен на то чтобы мы искали корневую причину возникновения этих инцидентов и пытались бороться именно с ними потому что это очень важно так как это какой-то процесс у него есть несколько несколько шагов до то есть первый шаг в данном процессе это собственно появления самого инцидента где-то что-то взорвалось у нас пожар что-то горит и вот этот пожар инициирует первый шаг собственный light цель view второй шаг это устранение проблемы то есть как только проблема появилась там система мониторинга сказала нашим инженерам о том что у нас все взорвалось ребята едите чините ребята идучи нет тушит пожар и собственно мы переходим к третьему шагу как бы пожар устранён после чего мы заводим какой-то посмотрим какое-то описание где мы расписываем почему взорвалось то взорвалось какие у нас take action айтемы мы хотим выполнять для того чтобы такого не происходило или для того чтобы устранять это как-то быстрее потом мы оцениваем посмотрим насколько сильно мы на видели вот на точнее насколько сильно навредил этот инцидент компании сколько ущерба мы принесли нашим пользователям вот это вот все мы оцениваем в четвертом шаге данного процесса после чего мы выполняем их schimb этом и так что на этом это вот мы начинаем ходить в базу через какими помассировав щеки или мы там делаем какую-то более отказу устойчивую сеять или мы например начинаем для конкретного сервиса обязательным требованием вы выставлять обязательное требование к повышенному качество тестов соответственно мы эти требования выставляем и в пятом шаге их выполняем после чего мы закрываем пасмурным пишем описание все процессы закончен завершён что же до и дополнительные сведения мы записываем в базу знаний что же такое of tools are of tables are направлен на то чтобы третий пункт этого процесса автоматизировать так как у нас есть знание у нас есть навыки и у нас есть понимание что происходит мы можем этот процесс автоматизировать про него-то я сейчас и буду говорить тайные знания я вам расскажу сейчас историю про одного моего друга который живет и работает в одной компании вот жил был этот друг у него было все хорошо в его компании тут пришли уведомление сразу из трех каналов до из шлака из емейла псм с com пришли все вот что-то случилось мой товарищ инженер понял у него был план действий что надо делать он пошел в grafana первым делом посмотреть а что же там на сайт нужно что там на графиках для него был специальный дешворда сооружён к тоже называется светофор в этом светофоре были отображены верха уровневые показатели всех сервисов и неожиданно оказалось что все сервисы красные все в огне прям что о чем говорит данный дашборд мы ему инженером я пока не могу вам ответить наверное о том что произошло что-то и это что-то очень большое по вот этому тоже барду это было не совсем понятно и он пошел дальше он пошел смотреть на продуктовые метрики высокоуровневые по трафику по трафику было видно что трафик упал в пол да то есть пользовательские запросы мы видим и не обрабатываем от слова совсем он пошел посмотреть на ошибки на ошибках была другая картина все ошибки были в потолок ошибок целая гора это очень интересно в чем собственно проблема была не понятно да ну он видит он видит что есть ошибки и он идет в центре мы же все ошибки складываем центре вот он в центре пошел что же там центре он видит видит что там есть какая-то паха пышная ошибка да какой то там backend какая то ошибка но собственно ему это ничего не сказала ну какая то ошибка там пока пышная наверное надо идти к какой-то платформе к платформенной команде которая умеет в php собственно что он сделал он пошел в платформе иную команду и говорит ребята у нас тут все взорвалось у меня вот центре засыпала ошибками огромный горой этих ошибок типа что делать они говорят знаешь вот мы посмотрели на эти ошибки там написано слово search наверное тебе впрок вот с чуваком который занимается поиском он пошел в команду поиска они говорят ща погоди мы посмотрим на своих графиках на своих логов посмотрим и тебе ответим они пошли посмотрели свои графики логии и говорят о да мы знаем это там сервис c вот здорово он пошел в сервис и говорит ребят тут вот ребята сказали что вы нам приложили весь сайт и они говорят ну блин такого не может быть мы сейчас пойдем посмотрим разберемся они пошли посмотрели разобрались и действительно они взяли и выкатили стейджинг какой-то сервис который начал бесконечном цикле ходить в сервис поиска через wild ру и как бы немножко его приложил на поиск завязано весь вся отдача компании ему собственно и вместе с ней приложился we сайт потому-то все и красное ребята выкатили hotfix вуаля трафик поехал вверх все счастливы инцидент завершён и помимо моего коллеги и вот в тех ребят которые участвовали во всем этом есть еще большое количество других коллег из разных продуктовых команд из аналитиков вот эти вот все ребята они этот инцидент видят вот так как бы ну да что то произошло где-то что-то взорвалось потом кто-то как-то починил ну наверное наверное здорово как бы починили же порядок это наверное не очень здорово вот и у нас вот таких это была история из компании одного моего друга а у нас таких историй на целый вагон и маленькая тележка когда где-то что-то как-то взрывается иногда это связано с сетью сетевой связанностью иногда с базами иногда с кашами иногда с какой-то выходкой сервиса или каким-то очень нужным коми там в продакшен история бывает много и весь смысл данной истории в том что тайные знания должны быть перенесены в код то есть мой товарищ и коллега который ходил по всем вот этим ребятам он знал куда надо ходить давайте представим ситуацию когда его нет или кого-нибудь из той связи нету и тогда тайные знания которыми обладают те или иные люди они остаются с теми людьми они с нами и компания от этого испытывает большие проблемы она несет риски вот это вот все и соответственно мы как бы ничем не застрахован и если брать тайные знания и высовывать их из мозгу мозгов людей инженеров из переносить их в код то тогда во первых этот код будет читаем эти данные там будут постоянно и любой инженер который решает ту или иную проблему может посмотреть в этот код и понять что там как происходит более того его можно добавлять до насыщать авто и ласаро выявляем инцидент вот собственно тот факт что мы хотим перенести тайные знания сподвиг нас на создание of tools are off вот на тот третий шаг почему потому что во первых мы обладаем знаниями тайными о которыми о которых я говорил во вторых потому что мы в принципе можем это сделать и как то повлиять и в-третьих у нас для этого все есть мы обладаем данными по инфраструктуре и про какие-то внутреннюю сущность и таким образом мы можем хотя бы сделать первый шаг дать импульс в развитии of tools are off все наши данные все данные хранятся ну вот все данные которые пишут метрики все наши метрики хранятся в граффити у нас есть инфраструктурные метрики у нас есть бизнес метрики инфраструктурные метрики здесь очень просто это метрики по состоянию железо сетей веб-серверов вот это вот все а бизнес метрики тут немного поинтереснее в бизнес метрики входят различные продуктовые события какие кнопки нажимаю какой пользователь сколько собственно уникальных пользователей к нам пришло на сайт и например какие-то очень чувствительные метрики например количество белль биллинговых транзакций или например денег сколько мы там получаем какого рода денег в минуту там вот эти данные хранятся в граффити почему они у нас хранятся в граффити потому что это локальная ну вот внутри нашей компании отдельная система которую мы наружу не светим и мы как бы ей доверяем мы можем эти данные там хранить все наши метрики делятся на 5 флагов флаги мы разбили метрики которые относятся к инцидентом метрики которые от нас к инфраструктуре и к продукту на вот эти 5 флагов на события на ошибки на биллинговые транзакции на денежные потери и нахал диск события событий от наших пользователей сейчас я вам расскажу поподробнее про каждый этот флаг что он собственно собой представляет события события включают в себя все метрики верха уровневые по потоку метрик по потоку данных по потоку пользователей на сайте по их активности по тому сколько людей создают запросы в авито прямо сейчас и событие это те события продуктовые которые собственно эти пользователи генерал генерируют это подачи объявлений просмотры объявлений просмотры номера телефона и различные остальные да то есть какие то события которые для нас являются критичными мы их также мониторим и с помощью нашей системы мониторинга смогли их скомпоновать в один флаг который называют назвали события с л о у них следующая у нас есть некий bass line бы и celine чтобы было понятно это исторически историчность поведение данной метрики за предыдущие пять недель то есть мы берем метрику по какому-то конкретному событию и смотрим как она вела себя в течение последних 5 недель берем от нее скользящую среднюю и сравниваем эту скользящую среднюю за предыдущие пять недель с нынешними данными если мы видим деградацию в размере 15 процентов нынешних данных от бы и zloy на мы говорим что у нас есть деградация фиксируем ее следующий флаг это ошибки ошибочки тут все достаточно просто у нас есть железные сервера которые являются первым уровнем балансировки они называются овечки цепи на них прилетает все пользовательские запросы и если мы видим там 500 и ответы от индексов то мы как бы понимаем что надо возводить флаг и есть монолит в котором есть свои собственные маленькие джинкс и где мы точно также смотрим запросы непосредственно в сам монолит потому что у нас есть условная api которая живет сбоку от монолита и все мобильные приложения не ходят монолит они ходят мобильное api поэтому их два вот этих вот ключевых узлов которые мы смотрим на ошибки они формируют собственный флаг веселей слов очень простой если количество 500 их ошибок больше 10000 в нашем случае 10000 вот то мы как бы говорим о том что мы наблюдаем деградацию 10000 я взял как пример на самом деле там более хитрой метрика она строится из одного процента отношении одного процента на общий объем трафика то есть если например это вечер трафика больше то там не 10000 один процент да если мы пробиваем этот один процент все заводим флаг следующий биллинг у нас есть биллинг через него идут биллинговой транзакции у него есть несколько платформ все они под индией я про них вам рассказать не могу ну смысл как бы понятен есть какие-то биллинговые транзакции мы на них смотрим мы получаем по ним сведения и в случае деградации мы также вводим флаг смотрите здесь отклонение от билайна 10 процентов или количество 500 их ответов в биллинге больше нуля дальше деньги мы получаем данные по тому какие финансовые потоки проходят по каждой платформе и собственно тут точно такая же история несколько платформ деньги в рублях там или в каких-то условных единицах мы видим виде метрик если мы видим что сейчас у нас есть деградация там и взводим флаг мы пытались по-разному строить аналитику денежных потоков потому что у пользователей нет чёткого плана когда они будут перечислять деньги нам вот поэтому мы выявили следующую скользящую мы взяли какую-то скользящую за пять минут и смотрим ее отношение к скользящей за три часа вот таким образом мы выявляем как минимум какие-то резкие деградации или какие-то наоборот резкие пике мы пробовали прикрутить бы из linea но из-за того что наши менеджеры вкручивают различные компании продуктовые то денежные потоки там ведут себя совершенно не анализируемым таким образом мы как бы не в состоянии понять что вот сейчас эта акция и поэтому денег много а вот сейчас нет акций поэтому их мало поэтому признаны работают плохо мы остановились по крайней мере сейчас становились на скользящих helpdesk тут просто у нас есть пользователи они обращаются в техподдержку мы знаем количество обращений наших пользователей с техподдержку мы за этим следим и когда этих обращений становится больше 35 от какой-то скользящей средней там говорим что что то не так пользователи просто так на мне пишут ну или пишут каким-то ровным слоем да там днем чуть больше ночью вообще не пишут но если в момент времени относительно предыдущих 30 минут мы видим какой-то резкий рост обращений это говорит о том что у нас что то не так и того флагов у нас 5 почему 5 почему например не 4 иране 15 смотрите здесь сейчас представлены 2 инфраструктурных флага и 2 бизнес новых продуктовых флага да и еще один клуб центр раньше мы использовали только 4 без хоп центра и они были достаточно сбалансированными они хорошо работали мы тотек теле проблемы когда они случались мы детективе очень много всего но бывали случаи когда мы например что-то не улавливали не ловили и поэтому мы добавили help center как 5 флаг вот собственно таким образом система стала более стабилен и стабильный да эти флаги друг друга стабилизируют в случае когда у нас есть проблемы в инфраструктуре например у нас отлетел графит или потеряла сетевая связанность внутри компании но это не эффекте пользователей то вот эти флаги помогают нам не создавать ложных сработать ситуация по которой я говорю она примерно вот такая то есть когда у нас есть событие у нас есть биллинг транзакций потеря побили интронизация отдаться и у нас например загорелся флаг о том что мы деньги потеряли мы говорим что это оставило сар и в этот момент мы создаем ticket мы создаем текке в жире и в этот ticket с этим текке там дальнейшем работаем то есть ticket создается не абы как она у на уровне корреляции корреляции в деградации сразу нескольких флагов и продуктовых и инфраструктурных вместе сроки заведения и ласаро от 30 минут и 36 часов у нас на данный момент настроены почему 30 минут это та периодичность которой мы собственно запускаем задачу на проверку наших всех систем 36 часов потому что денежные средства могут дополняться могут изменяться с ними могут происходить различные конвертации и прочие всякая магия и поэтому флаг который называется к schloss он может изменяться в течение 36 часов поэтому мы можем обнаружить проблему в течение 36 часов сроки уточнения данных 36 часов по той же самой причине потому что денежные потоки себя ведут там но они постоянно как-то обновляются вот после того как мы создали ticket вот мы его создали дальше то что мы его начинаем насыщать начинается процесс насыщения мы начинаем проверять выкатки кто катился в плюс-минус пять минут от момента данного класса рада от момента создания этого тикета мы смотрим все продуктовые и какие-то очень бизнес критичные стейджинг кластера сервисы монолит и вот это все мы смотрим проверяем если катились мы ставим пометку внутрь этикета что вы вот катилась это второе графики по каждой метрики которая участвовала вот в той корреляцией из 5 флагов мы знаем какие у нас есть графики так мы обращаемся к графа ней говорим о и grafana отдай-ка мне скриншот по вот этому по вот этой метрики по ее поведению за последние три часа за последние 3 часа и плюс три часа то есть вы за окно в шесть часов после того как мы эти графики получили мы их при клип прикрепляем в ticket grafana в тике жир и так в тике jira прикрепляем даже борды с графон и если у нас есть ошибки если мы видим что загорелся флаг ошибок это говорит о том что ошибки это просто так не ну как бы никуда не теряются они либо есть центре либо они где то есть еще по крайней мере мы точно знаем что они есть мы запрашиваем наши ошибки из монолита в основном и значит группируем однотипные запрашиваемых за интервал 5 минут от от момента создания тикета группируем однотипные и получаем топ-5 ошибок каких конкретно типов ошибок сейчас к нам привалило вот как раз таки одна из тех ошибок которая показывала на слайдах раньше про скорча ну она вот такая выходит в результате и тогда ребята видят что например у нас там 30000 ошибок по какому-нибудь сервису это о многом говорит монолиты сервиса у нас есть монолит он взаимодействует с сервисами взаимодействует он через такую прослойку который у нас называется кор кор это и джинкс через который протекают все взаимодействия между монолитом и соответственно сервисами и вот все эти взаимодействия они блокируются и порождают метрики и на этих метриках мы видим какого сколько каких сколько событий обработал тот или иной сервис и каких ошибок он в это время на генерал поэтому мы берем вот с этого промежуточного узла снимок и прикладываем его в ticket жир и дальше мы выполняем ряд кастомных сценариев кастомные сценарии у нас бывают разные мы проверяем доступность сети не было ли каких-то внешних атак не было ли еще каких-то воздействий там были доступны дата-центры был были как в этот момент удаленно и узлы пинга вались проверяем доступность баз данных до проверяем вы были ли доступны все мастера были доступны славы проверяем были ли какие-то в них ошибки если они были мы эту информацию указываем в кете таким образом вот эти кастомные сценарии позволяют нам масштабировать нашу систему расширять ее и улучшать после чего после того как мы сценарии прогнали мы добавляем информацию по количеству затронутых пользователей то есть в данной информации мы стараемся отобразить что вот таких уникальных пользователей которые к нам приходили мы затронули там столько-то процентов это полезно для того чтобы в последующем понимать что вот такого плана инциденты они например affected бизнес ну не affected пользователя или наоборот они не affected деньги но affected пользователей после чего мы прикладываем информацию по предположительным потерям финансовым дело в том что мы точно не знаем сколько денег мы там должны были заработать мы предполагаем что вот в момент деградации наш общий поток денежный составлял вот столько-то мы предполагаем что мы потеряли вот столько-то в рублях и эту информацию предположительную мы прикладываем в ticket она позволяет в будущем понимать масштаб трагедии да она понимает позволяет понимать какая из команд в конечном счете насколько сильны в процессе там достаточно продолжительно в процессе например квартала как сильно она аффекта у нас там так командой или то есть тот сервис или например какой то инфраструктурная штука насколько сильно мы проседаем от того или иного воздействия сейчас одну секунду мы добавляем ссылки на похожие инциденты в прошлом когда мы видим что у нас произошел инцидент вот всеми предыдущими шагами мы создаем определенные определенные флаги но определенные паттерны в признаки определенные признаки и вот эти признаки нам помогают искать похожие инциденты в прошлом если мы такие находим там их линкуем говорим что ребята обратите внимание прошлом уже было что-то похожее имейте ввиду посмотрите туда вы уже подобную проблему вполне возможно решали собственно вот авто лср мы создали и мы его насытили данными как могли и что же мы дальше это делаем мы отдаем этот ticket на обработку нашему кей инженеру почему вдруг ей инженеру потому что мы считаем что quality assurance занимается не только тестированием но и в целом доступностью надежностью продукта выявление вот таких инцидентов это как раз таки очень неплохо смачиваться что же делает клей инженер он делает следующее он принимает финальное решение пойло сара по и данному тикета он решает была ли это действительно проблема или это фолз позитив да это какой-то фейк или например этот дубль то есть мы это уже задаток теле и собственно это дубль его не надо пускать в работу или это действительно инцидент и тогда собственно он меняет ему статус этому инциденту и собственно пускает его в работу после чего начинает продолжаться те шаги и ласаро которые я показывал на первых слайдах да он заводит и обновляет паспортом и то есть у нас есть инцидент с ним мы там что-то делаем таких инцидентов в истории могло быть много но по идее путь решения этих инцидентов он плюс-минус одинаковый он ведет квартальный отчет по инцидентам каких инцидентов сколько какая команда на генерала этих инцидентов сколько какие потери статистика и для того чтобы все наши сотрудники понимали что вообще происходит в компании для того чтобы повысить прозрачность он ведет газету у нас есть well as our газета каждый месяц ее выпускают этот инженер и пишет там топ-5 самых больших fa cup of за месяц таким образом как бы вся компания понимает где у нас плохо где у нас хорошо вот вот это все немножко статистике статистика у нас следующее мы внедрили где-то в феврале пилот данного проекта и с февраля вот зеленый график это то сколько инцидентов мы за дтп или автоматически как можете обратить внимание инцидента становится там все больше и больше и это не потому что мы работаем хуже а это потому что мы стали лучше понимать что вот данная проблема была а не какой то там минутным пиком а что эта проблема была есть явно проблемой ее надо разбирать она засек тела пользователей и даже если она произошла там в два часа ночи субботы на воскресенье мы или все равно за детектив мы ее все равно покажем и она как бы будет разобрано таким образом вы как вы видите желтые и лошары это те которые были созданы руками вручную они почти сошли на нет почему потому что наши пользователи стали доверять нашей системе они при каком-то инциденте самостоятельно ждут когда он создастся создается он в течение получаса до как я уже говорил и соответственно туда всю информацию и пишут о том что у нас там отвалилась этот а потому то то потому-то то вот собственно на этом у меня все учитесь на своих ошибках да и я хотел бы сказать что я говорил о г а граффити в котором у нас лежат все метрики у нас есть статья на хабре вот и ссылка собственно на эти статьи на хабре приложена в данном ну собственно внизу этой страничке все спасибо младший вопрос жить я здесь а вот даже если честно мы как бы эти суммы занимаемся мониторингом и 30 минут это это вы сказали от 30 минут но если у вас 504 на фронте на главных страницах наверное это уже не 30 минут дело в том что я повторяю мы данным проектом процессом не планируем устранять проблему и и устранением занимаются инженеры они занимаются по али рту от системы мониторинга мы после этого приходим и смотрим а была ли проблема если мы видим что была дата мы соответственно заводим данные инцидент я ответил вопрос нет да мы пытаемся бороться не вот с проблемой сейчас мы пытаемся бороться с причинами возникновения проблемы это очень важно понимать эти гнев юрий компании сбербанк с дарси бы за доклад вот так просто вы говорили что мониторить и по нескольким метриками количество 500h ошибок там флаги расставляйте для разных типов процессу а как мониторить и время отклика дело в том что мы по всем нашим запросам которые прилетают в авито собираем статистику мы собираем время ответа каждого запроса и отправляем его в 100 тыс т.д. на основании вот этих вот вот этой статистики создает нам сразу 14 метрик в одной из которых есть количество обращений в остальных 14 лежит максимальное и минимальное время ответа на каждый из запросов и перцентиле 75 95 99 98 соответственно повод этим метрикам мы понимаем как быстро мы отвечаем пользователям и если мы например видим что у нас есть какая-то какой-то резкий рост в уокен сито это тоже повод это тоже повод как бы задуматься но дело в том что у нас есть 500 ошибки которые будут при тайм-аут ах верно-верно значит как только у нас эти ошибки появятся 500 и у нас заведется of tsar поэтому мы не смотрим на латинице напрямую но мы его тоже мониторим взрослого не зовут андрей спасибо за доклад такой вопрос не ну то есть график красивый там сто процентов инцидентов нету ли обратной ну как бы обратной стороны у этого и автоматизации что я инженер смотри у меня авт инцидентов не значит продакшен в порядке а на самом деле это может быть и не так вы знаете да возможно ситуация когда у нас все сломалось ничего не работает и мы не этого не заметили и в конкретный момент времени это конечно же плохо но дело в том что у нас есть как раз таки этот инструмент который можно улучшать насыщать мы просто еще пока значит не научились детектив конкретно эту проблему есть еще один момент в том что мы смотрим на большое количество разных метрик которые друг от друга напрямую не зависит да и если мы видим деградацию там в тех или иных 3 метриках из 5 мы как бы говорим что это инцидент это важно потому что если мы если например мы у нас действительно какие то проблемы то у нас наверное начнут расти обращение пользователей у нас наверное будут какие то просадки по деньгам и или там например по трафику рост ошибок еще что то то есть как то косвенно это вылезет и мы это заметим и вот такими косвенными корреляция my мы и говорим о том что есть проблема здравствуйте меня зовут елена у меня вопрос по оценке эффект от внедренные вот вами системы это как-то павлин вот эта автоматизация как то повлияло на скорость решения проблем вот вы создаете of the thick это для это скорее всего да помогает как-то побыстрее получать данные вот ваш коллега инженер больше не ходят по командам оценивался ли эффект скорость решение проблем дело в том что мы не пытаемся решать проблему быстрее стараемся чтобы их больше не возникало вот а если их не возникает то их и быстрее решать не надо но естественно потому что мы создаем вот эти all of тела сара и показываем их другим инженером на базе этих знаний они как бы понимают что такая проблема была и и решать вот так то есть это как-то наверное быстрее влияет но мы не оценивали не оценивали дала просто к интернет возвращаясь к первому больше какая связь вот этой системы все таки с пожаротушением то есть вот когда пожар тушат инженеры они тоже потом в эту систему дописывают что они там сделали перегрузили там или еще что-то или это ловит какие такие ошибки которые в меньшей степени заметны пользователь смотрите процесс следующий инженеры которые тушит пожар они смотрят на системы мониторинга и прилетают alert и alert и прилетают практически сразу мы создаем of tables are его в тело саре указываем кто на данный момент нам был дежурным инженером к примеру вот и когда идет процесс разбора данного инцидента да этот инженер туда приглашается и там он собственно говорит что было какие экшена этому надо выставить и как собственно их закрывать вот в самом текке чаще всего никто ничего не пишет ну из инженеров пишут обычно те кто что-нибудь сломал то как тушили и нашей там devops инженеры не пишет эту информацию или пишет там крайне редко вот спасибо за доклад пожалуйста мне вопрос были ли случаи когда лср оцененный как фоллз позитив позже был переоценен что да это был действительно инцидент мне такие случаи неизвестны но я не удивлюсь если они вдруг появятся вот я не удивлюсь если они вдруг появится это наверное вопрос больше доверия до наоборот даже бывает часто такая ситуация что наши ребята переоценивают то что приходит вот и когда приходит например ду если вдруг такое случается то они как бы пытаются понять они действительно ли это идет какая-то параллельная проблема бывают ситуации когда у вас целых две проблемы больших которые два огромных инцидента идут параллельно и вот тут выяснить какой из них какой едва это или один из следствие той или причина достаточно сложно да и вот в этот момент наши инженеры пытаются даже как-то ну предвосхитить вот до прядения очень круто спасибо вопросы такого рода как дорого обошлось внедрение много ли автоматизации было реализовано уже на существующих инструментах и что пришлось писать самому да ну пришлось абсолютно пришлось писать логику всю вот эту потому оно не является каким то open source продуктом мы ее там как на самом деле даже в open source и собственно ничего это мы берем метрики сравниваем их с метриками если у вас есть хранилище каким бы оно ни было это может быть графитом prometheus виктория метрики легкий метр без разницы смысл в том что мы оттуда берем какие-то данные используя эти данные мы ловим там те или иные корреляции специфичные для нас поэтому там ничего open source сеть вот и а еще раз вопрос а а как насколько дорого мы примерно за 1 квартал смогли на пилоте за пилоте данный проект дальше собственно мы его как бы за следующий квартал уже внедрили как проект и вот он собственно начал набирать набирать силу февраль и начали вот сейчас у нас в человек в команде двое спасибо за доклад следующего я здесь вопрос следующим если вы закрыли нас or post more там написан меры приняты через некоторое время возникает лср такого же типа с теми же самыми лим показателями с той же самой информации происходит ли пересмотр старого пост мартом и и происходит ли рассмотрение проблемы на каком-то более не знаю высоком другому уровне да то есть если какие-то инструмент эскалации инструмент эскалации и инструменты для скажем так закрытия повторяющихся или саров со временем то есть периодически повторяющихся узоров да смотрите у нас есть как раз-таки тот волшебный клинике инженер который собственно ведет это все дело и это больше такая менеджерская работа когда вы видите что у вас эта проблема вроде как решена и тут она вдруг снова появляется вы понимаете что это она мир on ожидая тут административный аппарат и соответственно наш инженер сам поднимает там тревогу то есть это на ручном приводе на то есть никаких автоматизированных подходов в этом плане мы не используем и и на усмотрение инженера если инженер считает что надо эскалировать надо поднимать надо решать заново то поднимая решает заново если инженер обращается группе или команде которые допустила данный инцидент и там ребята говорят ой вы знаете мы просто rollback 0 из тут неудачно больше такого никогда не появится и не повторится то как бы видимо это ситуация она на этом как бы моменте и за куклу закрывается подростка добрый день меня зовут андрей спасибо за доклад вопрос такой вот вы все рассказали всего вас круто да запилили но я может быть просто не запомнил по докладу какие вы видите сейчас минус и недоработки может быть в этой своей системе и может быть поделитесь какими-то планами на будущее что вы планируете ну в какую сторону развивать этот сервис так какие какие минусы но минусы очевидны и что данный процесс является оперативным то есть мы развиваемся по мере поступления проблем то есть проблемы появилась мы ее решили записали это может быть и является минусом потому что мы могли бы как-то предугадывать до или копать ещё глубже в историю и оттуда искать какие-то инциденты которые вот в течение нашего времени ещё пока не произошли но могли бы да я говорю как бы про риск-менеджмента есть есть некий риск-менеджмент на которые мы могли бы опираться мы это пока не делаем мы прям на инциденты смотрим и по факту их планируем какие у нас планы ну собственно начать вести какой-то риск-менеджмент это первое второе мы планируем реализовать в данной инициативу для стейджинг для стейджинг окружения которое у нас является при продам вот и там есть определенный нюанс так как это стейджинг он напрямую зависит на бы в будущем выход выключенный монолит и с ней проблема не в том что мы эффектен пользователей а в том что например какой нибудь сервис который там в этом при простые джонги крутится он может отъехать из-за него упадет нам 1000 тестов и команды там из ста инженеров будет ждать пока вот этот стейджинг перри поднимут ничего не будем делать вот мы хотим реализовать данную штуку для station к окружений там своя специфика там свои флаги свои какие-то вот эти тонкие моменты нюансы и мы как бы на данный момент развиваем в неё пока эта штука работает только на продакшн и вот добрый день добрый добрый спасибо за презентацию назад вопрос по ходу просто родился во первых интересно за какое время вы держите архив предыдущих событий своих сколько примерно три года три года а вот просто интересно вы говорите что у вас есть система которая анализирует то что уже было то есть небо не заводили в сормово она влезет а на анализе ли за последние три года нет она анализирует за те временные промежутки которые я говорю за 36 часов вот мы могли бы попробовать напилить что-то забыл предыдущие 3 года но это было бы прям но это такой достаточно серьезный вызов на пожалуйста здравствуйте а вот вы говорили что вы ищете по предыдущим то есть вас к этой системы есть там но этот жир и или что-то и вот как вы ищете более подробно ну мы признаки выставляем в качестве тегов в качестве тогда снимку используйте geor geor а да и в jiri по тегам по этим смотрим ищем если как бы находим говорим что смотрится очень похоже мне адрес спасибо за доклад маленький вопрос относительно суммы возможных потерь которые указываются в чем она помогла в будущем вот указали указываю там много раз смотрели анализировали вот какие корректирующие действия вот посмотрите она помогла улучшить помогает следующим образом мы видим какая из команд больше косячит ну имеется косячит в рублевом эквиваленте да и соответственно так как она косячит наши кей инженеры говорят больше вы свои сервисы без нашего проникать эти вот ну как то так ну на самом деле у них там какие-то более щадящие методы да ну в общем у них так как у рис ресурс кей инженеров которая проверяя тест и вот это вот все делают с тестированием связанная у них ресурсы ограничены и они покрыть там сто процентов тестами все наши сервисы не могут они смотрят на те которые больше накосячили и говорят что вот вы ребята будете катится теперь только после того как мы дадим опрос добрый спасибо за доклад пожалуйста у меня вопрос по поводу поиска отклонений вы используете им или леток статистику мы используем только статистику вашего пожалуйста так время вопросов подошло к концу теперь называйте лучший вопрос хороший вопрос вот у девушки был наверное самый хорошо и эта девушка у нас получает приз за самый лучший вопрос поздравляю апофис менты"
}