{
  "video_id": "VknD3bQXuYU",
  "channel": "HighLoadChannel",
  "title": "Вычисляем по IP: как бороться со спамом в социальной сети / Михаил Овчинников (Badoo)",
  "views": 6366,
  "duration": 3546,
  "published": "2018-08-16T04:38:37-07:00",
  "text": "так давайте начнем всем привет меня зовут миша овчинников я сегодня буду рассказывать про то как мы боремся со спамом и с мошенничеством в году если кто не знает еще что такое баду году это такая большая социальная сеть рейтинг в которой как в любом как в любой социальной сети пользователи могут там заводить профиль обмениваться сообщениями загружать фотографии и так далее и в общем-то нашей социальной сети на довольно-таки большая вне зарегистрировано 360 миллионов пользователей и если сравнивать нашу наш сервис страной россия то в россии по статистике каждый 100 миллионов человек охраняет где-то 500 тысяч полицейских как мы знаем а нашем сервисе на каждые 100 миллионов пользователей их от спама защищают всего лишь один сотрудник антиспама в общем-то даже такой небольшое количество программистов способны защитить пользователей от разных не хороших штук которые не могут поискать в интернете и так как пользователь у нас достаточно много какие-то из них являются очень хорошими нашими любимыми платящие пользователями некоторые из них набрать являются плохими которые пытаются уже на нас заработать каким-то образом пытаются рассылать спам выманивать деньги заниматься мошенничеством и прочими на разными нехорошими штуками и в общем-то сегодня я постараюсь рассказать о том какие вообще бывают типы спама с кем мы встречаемся с кем мы боремся о том какие есть простые способы как можно вообще победить на 50 процентов спама какими-то элементарными штуками расскажу о том как мы пользователь анализируем анализируемых текст и картинки которые они загружают анализируем айпи адреса и конечно же я расскажу о том как мы пытаемся защититься от ложных срабатываний ведь нам важно не только забанить всех всех самых плохих пользователей но и также недопонять ни одного хорошего иначе кто же будет оплачивать нашу работу и первое о чем я хочу рассказать о том с кем нам приходится сражаться конечно же спам бывает очень разный он часто вообще не отличим от поведение нормального пользователя и спама бывает как вручную так и автоматически к нам тоже приходят какие-то боты которые занимаются какой-то автоматической рассылкой никози сдали присутствует люди которые когда-либо писали каких-то ботов которые занимались каких-то скриптов которые что не пустили автоматически есть такие люди поднимите руки достаточно немного в общем то наверное придется вас попросить всех уйти потому что вам нельзя никогда не в коем случае слушать что я сейчас расскажу не но эта шутка на самом деле я постараюсь рассказать ничего секретного что может выдать какие-то тайные пароли явки от того как легче всего за спамит наш сайт и так с кем приходится сражаться я расскажу про спамеров и про мошенников спаммеры это довольно известная всем всем вещь в спам появился на очень давно с самого начала вообще развитие интернета и на нашем сервисе как правило спамеры пытаются зарегистрироваться с помощью аккаунта даже не создает аккаунт которые загружают фотографии очень красивые девушки для того чтобы начать сразу со всеми общаться что они получили как можно больше контактов чтобы они учили как можно больше внимание первое что делают спамеры они идут в google и пытаются найти фотографию какой-нибудь красивой девушки поэтому у нас таким образом образуется огромное количество вот таких вот аккаунтов фотографии каких-то порнозвезд которые которых конечно же очень легко отличить если от тем более не начинают еще рассылать какие то просто самые очевидные очевидные виды спама просто рассылать ссылки конечно же мы и быстро ловим это как бы простой вариант более сложный вариант когда люди не шлют ничего откровенного не посылают никаких ссылок ничего не рекламирует а наоборот выманивает пользователя в какое-то более такой спам френдли места типа skype у вейдера воцап а где они уже можем могут без нашего контроля заниматься любым из непосредственно из пользователям что угодно там я вам продавать продвигать и так далее ну и третий вид спамеров вообще очень сильно шифруются они не пытаются не ссылки рассылать никуда пользователей выманивать они просто так невзначай упоминают о какой-то штуки надеюсь что в этом сами или знаете или найдете в гугле чтобы не чувствовать себя дураком да что это такое и сами сами себя обмане обманите на такие ленивые спамеры которая рассчитывать что пользователь сам себя разведет и все в общем сделает без их участия дальше ну спамер это не самая большая проблема они действуют очевидно и с ними достаточных побороться гораздо более сложные и интересные люди это мошенники с камеры которые делают все максимально чтобы выдать себя за другого человека чтобы вас уже как пользователей развести всеми известными способами какие есть в интернете да все знаем все это началось с историей нигерийских принцев которые рассылали письма когда было как только появилась электронная почта ну сейчас в общем то они в своей фантазии не очень далеко уехали они представляются какими-то очень интересными людьми они могут представляться каким-нибудь успешным бизнесменом который пришел на сервис и и ищет себе девушку они уже эти успешные бизнесмены готовы потрать любые деньги на эту девушку послать ей сразу iphone 10 а вот все что угодно но девушки конечно придется это какой-то момент заплатить или за доставку или за таможню в общем все эти их схемы довольно быстро бросается в глаза но все-таки пользователь конечно же ведут сособенно девушки когда видит iphone 10 или фотографию айфона 10 просто все еще готов отдать второй вид мошенник в которой мы сталкиваемся это такие бравые вояки они воевали в горячих точках сейчас это отставные какими-то генералы которые ищут свою настоящую любовь девушки конечно же смотрят на военную форму все опять же готовы отдать люди мошенники втираются этим девушкам доверия и в какой-то момент у них уже там любовь-морковь и единственно что проблема возникает у этих ребят какой-нибудь случается emergency они ломают там левой мизинец и им нужно выслать там 100 долларов на операцию вот вот они уже приедут к вам в гости следующий вид как ни странно это опять красивые девушки которые часто даже заливает свои настоящие фотографии они общаются с мужчинами они после там 10 минут после 20 сообщений уже очень сильно прониклись к вам доверием уже очень готовы прямо с вами вступить серьезные отношения уже практически к вам испытывать нежные чувства но все что им нужно сделать все что вам точнее нужно сделать для них это купите билет что они уже прямо прилетели к вам город и были с вами счастливы до конца жизни разве 300 долларов может остановить остановить вас от того чтобы вы почувствуете нэнси съемка девушкой ну как мы видим в общем-то и спамеры из камеры они как я уже сказал не всегда ведут себя сильно отличные от обычных пользователей обычный пользователь тоже иногда так делают их в общем то у них много формальных признаков и у тех и у других которые не позволяют четко провести черту линию какую-то одну где слева у нас будут все хорошие справа все плохие это сделать практически всегда невозможно что можно сделать можно пытаться как-то бороться делать это автоматически системы ну как например поступали наши деды как боролись со спамом в мезозойскую эру до исторические времена самый первый самый простой что можно было делать это писать на каждый вид спама отдельные регулярные выражения можно каждый каждое слово нехорошее заносить в эту регулярку разгромную можно каждый домен отдельный вписывать туда все это делалось вручную конечно максимально неудобные неэффективно второй вид можно прямо опять же вручную находите детки-то ip-адрес они хорошие и прямо там в конфликтов сервере и заносить чтобы пользователю не подумали больше заходить никогда на ваш иисус конечно же это опять же не эффективно айпи адресов 73 назначаются перераспределяются заходят тубе хороший плохие визир так делать нельзя пытались люди писать какие-то одноразовые скрипты на каждый вид спамера на каждый вид бота крепость какие-то логе что-то ткут вручную вычленять опять же чуть-чуть что-то меняется спамер действует по-другому все это перестает работать и совершенно неэффективно и я сегодня постараюсь рассказать о простейших то медных борьбы о том что сразу же приходит голову когда-то начинали бороться со спамом какие есть системы который может буквально каждому себя реализовать и потом подробнее расскажу о том какие более сложные системы придумали мы уже с применением то мы шли на обучение проще тяжелой артиллерии и самое простое что можно сделать конечно же на любом сервисе это ручная модерация можно нанять каких-то там вручную инструктору вручную просматривать контент пользовательские до профили пользователи уже решать что с этим пользователям делать хороший или плохой обычно такой процесс он выглядит вот так да пусть поиск иголки в стоге сена у нас огромное количество пользователей но конкретно у нас и вас я не знаю у нас мы очень долго пользоваться и очень мало каких-то модераторов и вот этот стог сена он огромная иголки они очень маленькие их сложно найти и кроме того помимо очевидно что модераторов нужно много это все большая инфраструктурой нужно каким-то образом находить подозрительные профили и так далее самое сложное на самом деле неожиданно возникает проблема здесь это уже наоборот защитить пользователей спамеров от модераторов нужно сделать так что в модераторы не получали доступ к неким персональным данным не могли ничего у вас украсть это большая проблема что конечно же таким модераторами себя читать и какие то фрилансеры которые могут попытаться с вами тоже сделать что-то нехорошее то есть нужен нужен тут антиспам антиспама уже строить для того чтобы модератора ничего нельзя курили ну и понятное дело что всех пользователей не проверишь всех каждого отдельного вручную не посмотришь и модерация сама по себе не справится она в любом случае нужно потому что любым системам дальнейшем нужно какое-то обучение нужен какая-то человеческая рука который будет определять что с пользователем делать что можно попробовать сделать это собрать статистику по каждому пользователю можно начать собирать информацию обязательно ну допустим пользователь какой-то там иннокентий заходят и какого-то определенного ip-адреса мы естественно лакируем я хотела что мы первое что мы делаем лагерным с какого опять заходит пользователь и мы строим между всеми адресами всеми пользователями прямой и обратный индекс что можно было получить все эти адреса с которых закроет определенный пользователь а также получить все всех пользователи которые зашли из какого-то определенного айпи адреса таким образом у нас получается такая связь между каким-то атрибутом и пользователям таких атрибутов может быть достаточно много можем начать собирать информацию не только в ip-адресах но еще фотографиях девайсах с которых заходил пользователь с фотографиях вы простите на телефонах во всем что мы можем использовать левую нить обо всем можем начать собирать такую статистику связывать его с пользователем для каждого из атрибутов мы можем начать собирать подробные счетчики вот у нас есть ручная модерация она решает какой пользователь хороший какой плохой и в какой-то момент пользователь блокируется или признается нормальным и мы можем по каждому из атрибутов отдельно получить сколько всего пользователи сколько из них заблокированы сколько признан нормальными обладая такой статистикой по каждому из атрибутов мы можем например там самое простое определить вот у нас есть два ip-адреса на одном 80 процентов спамеров на одном на другом один процент спамером на ночью на что первый гораздо более заставленный с ним надо сделать уже какие-то применять к нему санкции что-то с ним предпринимать можно например писать нам и простой ты какие-то мистические правило записать например если пользователь заблокирован их больше восьмидесяти процентов от тех которые признаны нормальными там меньше пяти процентов то все этот ай-пи-адрес считается плохим даже мы там всех по ним или что то еще не хорошие со всеми пользователи сделаем и помимо атрибутов вот этих вот очевидных на которую пользователи есть можно также заняться самым простейшим анализом текста до можно автоматически смотреть на те сообщение которое пользователь пишет и вычленять из них все то что нам интересно все что имеет отношения к спаму можно посмотреть на имена не мессенджерах можно посмотреть на упоминание телефонов емейлов ссылок доменов и так далее по ним собирать точно такую статистику если какой-то доменной доменное имя было отправлено в сообщении каста места пользователями из них 50 был заблокирован значит домена и неплохое да это его можно уже носить какие-то черные списки запрещать и так далее и соответственно мы получим большое количество дополнительных статистики по каждого из пользователей еще и вы че нив и и из текста это опять же делается там достаточно просто никакого шиллинга для этого не нужна и помимо очевидных вещей до телефонов e-mail и так далее можно еще попытаться учинить из текста какие-то фразы или слова которые характерны особенно для спамеров да можно вести такой список стоп-слов вручную которая особенно характерно для снайперов ну например я не знаю сложно ли догадаться что какое чаще всего фразу особенно и употребляют фейковые аккаунты дам аккаунты спамеров и мошенников на вряд ли вы догадаетесь они пишут здесь очень много фейков я недоволен они пишут что они единственные здесь кто вообще настроена что-то серьезное все остальные фейки и ни в коем случае нельзя всем этим остальным миром доверять или что еще общее очень сложно встретить на сайте знакомств что по статистике чаще употребляют спамеры чем обычные люди обычные люди вряд ли напишут там для еще серьезные отношения на сайте знакомств по статистике опять же это нам 70 процентной вероятности это спамеры которые пытаются кого-то завлечь в общем-то обладая такой статистикой и по атрибутам по каким-то штукам вычли нам из текста по стоп-слова можно построить систему для поиска похожих аккаунтов конечно же мы 1 спамера баням он регистрирует новый аккаунт его ничто не не останавливает всегда может придумать что-то новое какие-то свои атрибуты изменить поэтому нам нужно иметь способ находить и банить все аккаунты созданные одним и тем же человеком вот возьмем какого-нибудь человека вот у нас есть пользователь гаральд он заходит регистрируется на сайте и болит нам какие-то свои атрибуты у него есть достаточно такие уникальные атрибуты как айпи адрес какая-то фотография стоп-слово которое он употребил может быть даже с фейсбука он зарегистрировался с кого-то фейкового и мы можем дальше взять и найти всех пользователей похожих на него у которых совпадают один или несколько из этих атрибутов после этого когда мы точно знаем что этих пользователей связаны как раз с помощью того самого прямого и обратного яндекс мы находим атрибуты об атрибутах находим всех пользователей как tedx ранжируем и если допустим 1 гарольда мы заблокируем то остальных тоже легко убить с помощью этой системы ну и конечно же все способы которые сейчас описал очень просты и легко это собрать статистику легко потом по этим атрибутом вот так вот поискать пользователей но несмотря на все это с помощью таких простых штук простой модерации простой статистике простых стоп-слов уже удается убедить 50 процентов спама то есть вот это то что в нашей компании было сделано там буквально в первые полгода работы отдела антиспама сразу раз 50 процентов спама пропало ни какой никакой сложности в этом не было ну остальные 50 процентов как известно даются гораздо сложнее и не уверен что вообще можно как-то стопроцентно что победить что можно сделать это пытаться как-то с по мирам усложнить жизнь да они сидят там что-то выдумывают они стараются усложнить жизнь нам мы пытаемся бороться с ними у нас бесконечная война их нельзя победить их больше чем нас гораздо и на каждый наш шаг они придумывают какую-то свою ответочку многоходовочку которая нам тоже пытается усложнить жизнь я уверен что их даже тоже проходят такие конференции спамеров которые сидят они выходят докладчик он рассказывает как он победил антиспам на баду как он залез весь году засс павел рассказывать про свои кипиа и какие-то рассказывает о том как построить масштабируемый отказоустойчивый спам ну вот с применением там на новейших манеж и технологий ну конечно нас на такие конференции к сожалению не приглашают я бы послушал с удовольствием что можно сделать можно пытаться усложнить с праймером жизни например вместо того чтобы напрямую показывать пользователю кошка вы заблокированный идите нафиг можно применить так называемый стелс banning да это когда мы пользователю не говорим о том что он заманил он вообще даже не должен об этом подозревать чу пользователь попадает в такую песочницу в такой silent hill в котором он находится как бы все на как буду там настоящий можно отправлять сообщение можно голосовать но нас интересует уходит в пустоту туман никто этого никогда не увидит не услышит никто не получить его сообщение получить его голосов соответственно пользователя защищает себя в такой пустоте он ничего не видит вокруг никаких других пользователей и был нас такой случай когда какой-то спамер долго-долго спамил продвигала какие-то свои не хорошие товары и услуги а потом через полгодика решил воспользоваться сервисом по назначению зарегистрировал свой настоящий аккаунт зарегистрировав свои настоящие фотографии имя и так далее и естественно наша система вот которые сейчас рассказывал поиска похожих аккаунтов быстрого наш сайт поместил этот самый стелс банк после чего он еще в течение полугода писал в пустоту о том что ему очень одиноко о том что все вокруг тлен нему никто не отвечает что у него какая то чувство безысходности общем изливал всю свою душу вот этому туману сайлент хилла и в общем-то ничего не не мог получить никакого ответа был даже пользователь который пытался все эти полгода платить за суперсилы до чтобы получить больше внимания но каждый раз мне ничего не получалось в общем-то спамер они конечно не дураки да они пытаются каким-то образом определить что они попали в эту песочницу определить что их заблокировали все бросить это дело найти новый аккаунт поэтому нас даже появляется иногда мысль о том чтобы 1 2 там никаких этих спамеров отправить эту песочницу в меньшей вместе чтобы они там друг другу уже продавали все что хотят нам развлекались как угодно но пока что мы еще до этого не дошли мы придумываем пока другие какие-то способы издевательства над ними например фото и телефоны или фикации как мы знаем если мы имеем спамер который является потом они человеком да ему как правило сложно пройти верификацию по телефону и примеру верификацию по фотографии в нашем случае фикации фотографию glide так что пользователю просят с помощью экрана его смартфона сфотографироваться с каким то определенным жестам и фотография которая получится в итоге сравнивается с фотографиями которые уже загружены к нему в профиль сравниваются лица если лица одинаковый то скорее всего человек настоящий загрузил свои настоящие фотографии и можно от него находит время стать но конечно же спамером пройти эту проверку не очень легко у нас даже появилась внутри компании такая небольшая игра называется угадай кто спамером дается 4 девушки нужно понять кто из них является спамером на первый взгляд они выглядят совершенно безобидна но как только они начинают проходить потихонечку эту самую фото верификацию то с какого-то момента становится понятно что одна из них совершенно не та за кого себя выдает в любом случае с по мирам достаточно тяжело с этой конкретной штук и бороться они действительно страдают они испытывают боль они пытаются как-то все это обойти обмануть и показывает все свои мэтт photoshop skills как говорится применяют все свои знания photoshop paint и других редакторов они делают все что могут и они иногда думают наверное что все вот это вот полностью обрабатывается какими-то невероятными современными технологиями которые настолько плохо построены что их так легко обмануть они не знают что каждую фотографию потому что перепроверяет ручной модератор и на самом деле несмотря на то что мы придумываем различные способы как с по мирам усложнит жизнь собираем по ним статистику делаем простые вещи какие-то для того чтобы со спамом бороться обычно на самом деле не хватает времени потому что антиспам должен работать и мгновенно он должен еще до того как пользователь начал свою негативную активность какую-то вести он должен уже пользователя найти и обезвредить и самое самое лучшее что можно сделать это пытается определить в сразу на этапе регистрации о том что пользователь является не очень хорошим это можно сделать например с помощью кластеризация мы можем взять прямо сразу после регистрации собрать ровно ту информацию которую нас есть у нас еще нет там не девайсов в которых он заходит на мне фотографии нет никакой статистики нет нам ни за что его отправлять там на верификацию он еще не сделал ничего подозрительного но мы уже обладаем какой-то первичный pharmacie интерполом возрастом страной в которой он зарегистрировался мы обладаем информацией о провайдере его ip-адреса в стране айпи адрес и из которого зарегистрировался а имел до меня о операторе телефонного номера если он зарегистрировался с помощью телефона если он авторизовался через facebook можем оттуда получить информацию о том сколько у него было друзей сколько на залив фотографии как давно он вообще там зарегистрирован и так далее всю эту информацию можем использовать для того чтобы находить глостера пользователей пользователь постепенно регистрируется они обладают какими-то вот этими атрибутами некоторые театре будут и совпадают и нас формируются группы каких то пользователей мы для этого используем самый простейший популярный наверное green кластеризации cummins каминс прекрасное везде инкрементируем поддерживается в любых библиотеках машины орден га он есть встроен он прекрасно параллели цион очень быстро работает есть там варианты стриминговых стриминговый варианты этого самого алгоритма который позволяет на лету польстили давайте глостера и в общем то даже наших объемах все это работает достаточно быстро когда мы получили такие группы кластеров группы пользователь кластер а мы можем уже с ними делать любые вещи если поле очень сильно похожи если кластер очень сильно связано это скорее всего какая-то масса регистрацию нужно сразу же пресекать до пользовали еще ничего не успел сделать только нажал кнопку зарегистрироваться все он уже попал куда нибудь там в песочницу стал с больных аг даря или можно пытаться по ним собирать такую статистику если там 50 процентов кластер а заблокирована то остальные 50 процент можно там отправить на верификацию или можно отдельно все эти кластером модерировать опять же вручную посматривать те атрибуты которым они совпадают и принимать уже в решении вручную общем-то а когда кластер анализируется вручную анализируется и ровно те атрибуты которые пользователи связывают то можно с помощью опять же какой то группы аналитиков которые смотрят на этих кластеров уделять паттерны паттерн и это вот как раз наборы таких простейших простейших атрибутов портили которые нам сразу известны и некоторые с их патронов на самом деле очень эффективно работают против определенных типов спамеров как пример если мы возьмем допустим сочетание трех совершенно независимых достаточно общих атрибутов на 3 пальца регистрируется в сша если у него провайдер а какой там при x ltd привык это какой-то оператор в она предоставляет палестины я пьян если у него email домен mail.ru list.ru buckaroo inbox.ru то вот эти три атрибут оказалась бы в отдельности ничего из себя не представляющий вместе дают вероятность того что это спамер практически 90 процентов таких патронов можно извлечь сколько угодно на каждый тип спамера это гораздо эффективнее и проще чем опять же просматривать вручную все все кластер а просмотрите ручную все аккаунты и так далее помимо кластеризации пользователей по атрибутам можно также находить пользователь которые пишут одинаковые тексты конечно это уже не так просто дело в том что например конкретно наш сервис работает более чем на 100 языках пользователи пишут там не то что настояться как на больше они придумывают свои языки пишут сокращениями сленга me они естественно ошибаются сами сообщения кстати очень короткие да обычные там три четыре слова это 25 символов соответственно если мы хотим находить похожие тексты среди этих миллиардов сообщений которые пишут пользователя нам нужно придумывать что-то что-то необычное потому что если пытаться находить классическим медными то используя какой-то анализ морфологии используя настоящий честный processing языка-то со всеми этими ограничениями стрингами сокращениями кучей языков на которых пишут пользователи все это сделать очень сложно можно поступить чуть более просто можно применить алгоритм n-грамм можно каждое сообщение которое нас появляется разбивать на n-граммы то есть пары букв например для примера возьмем n равное 2 граммы и граммы достаточно пара букв мы все сообщение постепенно разделяем на эти пары букв и собираем статистику сколько раз каждая диаграмма встречается в тексте здесь вот мир by граммов п р встречается один раз биграмм на r и встречается один раз его встречается один раз и так далее в общем то наби граммах можно не останавливаться можно добавить и там триграммы можно добавить с кипром мы так называемые дам когда мы собираем статистику по буквам через одну через две и так далее чем больше мы получим информации тем лучше ну для примера возьмем просто играм и они на самом деле уже достаточно хорошо работает что мы дальше с ними сделаем мы получим вектор а из каждого сообщения получим вектор длина которого будет равняться длине алфавит в квадрате этот вектор с ним очень удобно работать его очень удобно класть и рисовать потому что во первых он состоит из чисел во-вторых он достаточно сжатые там нет пустот и в третьих он всегда фиксированного размера доктрин алфавита в квадрате для каждого языка виктора получается очень удобные для кластеризации самое главное ugreen камин с такими фиксированными фиксированного размера векторами очень сжатыми очень быстро хорошо работает наши миллиарды сообщений пластеризуется буквально за несколько минут на достаточно там небольшом кластере но это еще не все к сожалению если мы просто соберем все сообщения которые похожи по статистике биграмм мы получим сообщение которые похожи по статистике но они не обязаны при этом быть на самом деле хоть как-то похоже часто встречаются длинные тексты у которых виктора я прям очень близкие практически совпадают на текста совершенно разные поэтому нужно добавить какую-то фильтрацию но так как кластер а у нас уже есть они достаточно маленькие мы легко можем внутри кластера сделать какой-то фильтрацию например применив простейший streaming или богов words для того чтобы внутри маленького кластер а буквально все сообщения со всеми сравнить и уже получить тот кластер в котором гарантированно находятся сообщение одинаковые которые совпадают не только там по статистике но и на самом деле и так сделали кластеризацию и тем не менее в пользователи для нас и для кластеризации очень важно на самом деле знать правду а пользователя если он пытается от нас правду скрыть то нам нужно как-то это действие предпринимать на типичный вид сокрытие информации это вы пьяны прокси анонимайзер и пользователь пытается сделать вид что он из америки хотя на самом деле он из действительно снегири и он использует просто вы пьяный торы прокси анонимайзер поэтому мы для того чтобы проблему это победить взяли самый главный самый известный учебник о том как вычислить пайпе мы написали с помощью этого учебника классификатора и пинов то есть такой классификатор который получает на вход айпи адрес и на выходе говорит является ли это и пи адрес вид йенном прокси и или нет как мы это сделали для этого нам нужно несколько ready ентов самое первое это конечно же база данных интернет сервис провайдеров то есть соответствие всех айпи адресов всем существующим провайдером ну такую базы достаточно легко приобрести очень много разных поставщиков она даже стоит не очень дорого это никто не сказал второе что нам потребуется это информации из ху из ху из на самом деле по ip-адресу доступно очень много инфы можно узнать и страну и провайдера и подсеть которой входит айпи адрес и даже иногда в описании написано о том что этот ай-пи-адрес принадлежит группе хостингов детей-то давке пьянов и так далее общем там можно проанализировать текст на какие-то конкретные слова и увидеть что вообще из себя представляет этот ай-пи-адрес можно взять конечно же базу hype если база нам говорит что ip-адрес находятся в норвегии а все пользователи которые пользуются этим норвежскими 5 сам разбросанные по африке то наверное с этим тезисом что-то не так и третье что можно взять это как раз статистику пользователей да сколько пользователей у нас конкретно на сервисе на этом айпи адрес и заблокировано сколько из них совпадает страной делает их у и за сколько из них не совпадает и так далее взяв всю эту опять же простейшую информацию достаточно легко построить такой классификатор например классификатор на деревьях решений на которой будет говорить в итоге айпи адрес является и пьяным или нет почему деревья решений потому что как раз деревья решение очень хорошо умеют находить те самые паттерны и те самые конкретные сочетания там провайдеров стран статистики и так далее которые приводят в итоге к тому что является что ip-адрес является ли пена но конечно данные эти очень общее классификатор как мы хорошо его не обучали как бы мы не старались не применяли кит advanced техники он вся на не будет работать в то процентной вероятностью поэтому здесь ключевым фактором является дополнительные сетевые проверки как только мы получили информацию о том что ip-адрес якобы принадлежит в пену мы можем на самом деле проверить что же этой 5 себя представляет можем пытаться к нему подключиться можно узнать какие в нем открыты порты можем посмотреть грубо говоря если там сокс прокси можно попытаться открыть соединение и проверить все на самом деле с стопроцентной вероятностью является ли я адрес ведь я нам или нет кроме того есть еще замечательная технология которые мы у нас пока еще в планах только ее внедрение называется пи героев довольно многие слышали это такой такая утилита который на сетевом уровне делает fingerprint трафика и позволяет определить уже сразу без каких-то заморочек что находится на той стороне соединение либо это обычный полицейский клиент либо какой-то vpn клиент либо какой-то прокси и так далее она содержит большой набор патронов которой вот все это определяют ну и после того как мы написали различные системы написали пастеризаторы написали классификаторы забрались статистику мы можем задумываться вообще какой какое самое подозрительное действие совершает пользователь на сайте никто не знает неважно мы когда задумайся над вопросом какое самое подозрительное действие совершает пользователь на сайте мы внутри команды антиспама считаем что это регистрация если он зарегистрировался пользователь то все мы начинаем уже на него смотреть с очень хитрым прищуром начинаем вести анализировать и у нас возникает такой вопрос внутреннее желание не забанит ли нам сразу всех после регистрации это отдела антиспама работу значительно облегчит мы сразу сможем пить чай в 2 раза дольше и их проблем у нас не возникнет вот чтобы такие мысли пресекать не только у себя но и у систем который мы пишем чтобы мы не боялись хороших пользователей особенно сразу после регистрации и всех мы вынуждены создавать как раз системы которые борются с другими нашими системами то есть игра создавать сами себе какие-то ограничения что можно здесь придумать что можно как можно себя ограничить чтобы не банить хороших пользователей чтобы не ошибиться чтобы не запутаться внутри можно реализовать очень-очень простую классификацию пользователей по честности можно сделать изолированный изолированную модель который будет брать все хорошие положительные характеристики пользователя и по ним делать какой-то анализ например можно взять там длинный диалогов давность регистрации отсутствие жалоб на пользователя пройденной верификации факты того что пользователь платил нам или нет вот все отдельно исключительно хорошее практически пользователя можно на этом дата сайте обучить какой-нибудь опять же классификатор до или регрессии в данном случае это логистическая регрессия у нас работает очень простая если вы знаете то модель диетической регрессии очень легко портирует оно представляет из себя просто набор коэффициентов и я очень легко то в 20 точек кода за implemented в любой системе на любом языке она очень хорошо переносится соответствие между платформами жду инфраструктурами и так далее что мы получим взяв эту информацию и прогнав ее через и bios мы получим к это коэффициент который мы называем коэффициент частности если он равняется нулю то как правило это значит что у нас попользовали толком информации нет мы не можем что конкретно сказать никакой никакой дополнена формации мы из этой классификации не получаем но если пользователь равен если коэффициент частности пользователя равен единице то скорее всего пользователь наоборот представляет из себя хорошего парня мы его трогать не будем мы ставим его не будем юн одним никак издеваться ни какие верификации никакого бана к нему не придет в общем то такая изолированная штука позволяет как раз самих себя защитить от многих многих типичных ошибок 2 что можно сделать это искать различные фол спустив срабатывания часто бывает такое что пользователи случайно заходит с одного ip адреса например они сидят каком-нибудь интернет кафе там может быть даже и компьютер не будет 1 этаж и там браузер один и тот же fingerprint который мы считаем там по компьютеру по браузер по устройству будет все совпадать пользователей абсолютно и мы можем посчитать что они являются оба спамерами хотя совершенно не факт что они как-то связаны или пользователь может в диалоге со сканером пользователь может у него переспросить в ответ на какую-то рекламу и я не понял что такое pornhub зачем ты мне его рекламируешь я не знаю что это такое честно и в такой момент систему видишь что пользователь написал тот самый стоп-слово pornhub который кто-то заранее завел и может посчитать что этот пользователя является спамером что его нужно скорее как можно скорее забанить поэтому нам приходится часто заниматься поиском аномалий мы берем пользователей берем их атрибуты и должны найти среди них на какие-то аномалий то есть тех пользователей которые попали в эту плохую компанию совершенно получает для примера возьмем какой-нибудь стоп-слово и у нас по каждому слову конечно же есть статистика все пользу или которые когда-либо его употребляли в этот момент какой-то новый пользователь патрик употребляет то же самое стоп-слово и мы должны его в эту плохую компанию добавить забанить и так далее в этот момент что нужно сделать нужно проверить что пользователь новый podrick от старых всех спамеров уже известных чем-то отличается или нет можно сравнить его типовые атрибуты пол возраст провайдер приложению страну и так далее можно сделать это несколькими методами можно опять же строить какие-то модели вот на этом небольшом дата сети кластеризации классификации которые скажут насколько расстояние между пользователем и основной группой велико если она соответственно очень велико то в пользе скорее всего попал туда случайно что он ничего плохого не имел в виду он очень сильно отличается и как минимум его не стоит сразу банить его можно ну там отправить на проверку ручную что модератор его посмотрели и решили всё-таки нарочно он-то сделал или нет ну и когда мы такую систему построили у нас уже гораздо меньше фол спустив срабатывание таких типовых случается и часто можно услышать или задать вопрос такой а почему бы нам не сделать просто сразу такую большую классную систему с машин lernen гамс нейросетями с деревьями решений которая будет получать на вход всю всю всю эту информацию которая сильно рассказывал и вэва давать просто четко строго от 0 до 1 спамер человек или нет как правило такие системы во первых плохо интерпретируется мы же не будем в конкретно этом в каждый нейрон нейросети заглядывать сравнивать веса и не будем в каждой под деревья дерево решений смотреть что у нас там получается какие-то правила написаны очень очень легко прийти какой-то такой ситуации когда перед нами черный ящик который нам очень сложно контролировать более того в нем хорошее от плохого не отделено система друг от друга никак не изолирована сама от себя и и от ошибок может защитить только какая-то ручная проверка какой-то сравнение и тем более на большом объёме данных собрать всю вот эту вот большую статистику всю информацию что подать ей на вход достаточно сложно более того как правило все известные нам системы машинного обучения они не представляют из себя одну модель это десяток моделей любой танк голосовой помощник любая система распознавания лиц это модели очень сложном порядке соединенные и нет обычно никакого смысла делать 11 большой классный классификатор не за класть все яйца в одну корзину потому что в этой корзине легко наделать берг и все все яйца собственно разобьются поэтому гораздо более правильным с нашей точки зрения является путь когда вы создаете отдельные секатор и отдельные подсистемы и кластер айзат кластеризации которые решают каждую отдельную задачу идеально чтобы они вообще еще работали в нашем случае там на каждый отдельный тип спама создавать отдельную модель отдельные контролировать это дает гораздо гораздо больший контроль в общем то это все что я хотел сегодня рассказать если есть какие то вопросы остались на них отвечу спасибо за доклад по факту два вопроса если можно вот первый интересно здесь какой процент все таки жалоб когда ваша система вот вся эта совокупность систем человек определила как спамера он оказался не спамером не пошел жаловаться да есть такой механизм пользователь может всегда пойти написать саппорт и я не спамер как правило опять же 90 процентов людей которые так делают на самом деле спамеры они рассчитывают просто за объявится порта они рассчитывают там десять-двадцать раз напишут что 21 сотрудник там сдастся и ответят что да мы ошиблись но на самом деле процент хороших поле стилей которые в итоге окажется забанены очень очень мало это гораздо меньше одного процента потому что если мы точно не уверены мы никогда не должны пользователя банить мы должны в отправлять на дополнительной верификации хорошо какими метриками сотрудники epam оператор по факту которому заре или такую проблему он пользователь чтобы определить что человек действительно не спамер ну собственно если человек спамер то это сразу видно человек если посмотреть на профиль человека на то что он делает то становится понятно ну то есть радар случился с концу объективным человек в любом случае валит субъективно да то есть они хорошо второй вопрос по поводу алгоритмов набор алгоритмов который вы использовали какие-то критерии выбора или просто пальцем в небо то есть вы сказали cummins критериев их определили там быстро работает хорошо до деревья решений но вот скажем там есть брендом force дальше будем будем еще что-то да конечно ну как выбирается модель в любой системе мы берем пробуем разные делаем там какой-то подбор кибер параметров смотрим на метрики и выбираем то которые лучше сработала а есть такие которые там в каком-то стряхни с такие технологии очень плохо работают нам в спарке падает какой-нибудь игры же boost там плохо поддерживается там в тандыр flow что-то еще нет поэтому зависимости от инфраструктуры в которой работает наше обучение там и выбирается nude rose pink zebra вы высказали там на определенном этапе деревья решение используется это вы абстрактно назвали переви решений и за этим на самом деле там скрываться может брендом ford еще что-то да может все что угодно вас наверно не могу раскрывать да да вот хоть он и спасибо подробности все секретно никому не рассказывать пожалуйста спасибо за доклад у меня вопрос про дыхание правил да то есть вы пользователь какие-то вопросы обязательно обязательно абсолютно все что я сегодня описал обязательно про ту хоть у не должен быть какой-то ретенция и у кластеров и у стоп-слов и у статистики да если вчера использовать или зашло 100 людей из них 100 оказалось спамерами то через год и статистик вообще не должна учитываться потому что союз может случиться все что угодно , все системы должны иметь обязательно рецепшен и без этого мы очень придем быстро квот к тому слайду где мы баним всех после регистрации это это это основывается опять же на статистике если там стоп-слово никто не применял там какое-то время с у него не очень высокая там высокий процент спама на нем то она там через неделю потухает до глостера потухают через три часа например если вы используете cummins кластеризацию то у вас наверняка есть проблема с подбором их количество как вы с этим справляетесь эвристические то есть но мы в любом случае одному каменца нельзя доверять кастера всегда проходит дополнительной фильтрацию считаются там их связанность плотность различные там графа вы и характеристики кластер и потом мы кластером можем еще друг друг друг другом скреплять если нам очень много их и если мы хотим знать если мы имеем куда большую группу спамеров которые чуть-чуть различаются они в комиссии дают разные класс тираны нужных потом объединить ну то есть одним каменца бесконечно не обойтись в общем то как и 45 минут вами не обойти уже во всем что я скажу наработанный набор каких-то методов которыми вы собственно с этим справляетесь да это не было чем-то что вы сделали заранее скорее всего еще и постепенно она влюблялась одно на другое сталкивающихся из-за проблем с которыми сталкивались да ну да конечно случая я примерно подобный ожидал надеялся вдруг у вас какая-нибудь магия позвольте спасибо за доклад большое здесь я здесь она здорово 2 катки вопросы на позвольте вы говорили что вы ведете таким экстенсивным до методом то есть строить и последовательно небольшие простые модели до которые решают частные задачи определения там какой-то конкретной области спамер не спамер но в конечном итоге да вы планируете получить такую муна люда состоящий из множества моделей полную автоматизацию он дающий это первый вопрос а второй вопрос какова итоговая точность определения спамерами вашей системе спасибо значит первое по поводу вот не газосиликата рада можно ли его построить но по сути в этом и цель до построить полностью автоматизированную систему просто point был в том что не делать это все одной моделью то есть модели должны быть разные они должны решать каждую свою задачу и по сути каждый висенте спама работает полностью как изолированная система автоматически если завтра все программисты умрут никто не будет делать нам новые модели на важно чтобы вы жили модераторы и они продолжали делать к это ручное обучение а в остальном всё это автоматически подроста не является одной моделью а по поводу процента спама это очень сложно определить можно посчитать процент спама среди текст поверх которых мы поймали да сидите в которых мы не поймали посчитать очень сложно поэтому цифры могут быть разные там от 0 до 100 процентов здравствуй спасибо тоже вопрос если позволить первый вопрос такой достаточно глупым я немного пропустил какие простые вещи типа рейд ли митинг на айпи то есть ну защита от каких-нибудь тривиальных вещей типа армии детей из сотни айпишник of которые выполняют один тот же скрипт вот это первый вопрос и второй вопрос вы даете ли вы модератором да как бы какую-то приоритетную очередь разбора инцидентов или значит первое поводу детей сотни адресов конечно там есть на системном уровне даже выше антиспама какая-то защита от adidas повторяющихся запросов есть какие-то лимиты на каждого пользователя до неавторизованный пользователь там толком чего не можешь сделать авторизованный пользователь ограничен он там не можешь посмотреть условно там больше двух сотен профилей там в час или там какое-то количество голосов отправителей сообщений все это есть автора вопрос я забыл какой был для модераторов людей да да планировали на данных идет как определяет берите конечно для того чтобы модераторы работали эффективно они должны все свое время тратить на спамеров и на них на всех жать блок блок блок пополнять нашу статистику к можно скорее определять там кто спамер кто не чтобы у нас скопилась информация считалось кластеризации так далее и конечно же задача приоритизации пользователь который тут на вход модератором она тоже стоит там тоже работает отдельная модель который определяет вероятность но очень-очень примерно как раз там вот работает такой мега классификатором так авансом никого не банят то можно чтоб он работал чтобы он ошибался просто он определяется каким приоритетом подавать пользователям модераторов модератором пользователей спасибо большое за доклад яблочно хотел спросить там определенный момент вы сказали что 50 процентов спам и ловите я как понимаю это цифра то есть естественно к тому спаму про который вы знаете ну потому что невозможно от процента спама я сказал что вот простые системы который искал в начале подсчёт статистики похожих аккаунтов вот это что можно рисовать там за месяц работы она уже 50 процентами рассекает да но любой метрик вы можете проверить только потому спаму который вы знаете конечно не знаете естественно не внешне я хотел спросить откуда вы берете новые виды спама то есть это только ручной отбор или у вас есть какие-то другие каналы постав ну вот есть те самые те самые аналитики модераторы которые работают день и ночь на затем что определяет новый тип спомони нам сигнализируют они составляют вручную паттерн и какие-то дак и которые не заметили как правило они опять же не делал каких-то жестких вещей они начинают никого банить но мы узнаем как раз от модераторов кроме того у нас вот эти самые паттерны в некоторых местах какие-то сочетание параметров считаются заранее автоматически например мы еще не знаем о том что есть такой спамер но уже видим что на каком сочетание страны провайдера там имел домена скопилось негативной статистикой можем начать этом расследовать есть разные там отчеты в которой можно придумать например по самым там за спам ли нам айпи адреса оставлю вас об доставленным имел доменом который можно анализировать и новый тип спама учинять из этого понял пасибо как вы оцениваете эффективность каждой да это хорошо вопрос дело в том что прежде чем какую-то новую фичу модель который принять санкции запускать нужно обязательно не пропускать через оба test by test выглядит таким образом что система определила что в пользу все очень плохой его надо банить или он средь неплохой в нужно отправить на верификацию в этот момент ничего этого не происходит пор стиль на самом деле идет нам к модератору да и например 50 процентов пользователей всех которых поймала новой системы идут к модератору и мы смотрим по решением модераторов хороший поезд или плохой мы делаем это там регулярно через день через два через три когда-то польски про и проявит себя в итоге получаем статистику подробно о том каждого разрезе каждой системой каждого правила каждой санкций паттерну там и так далее мы видим сколько из них в скольких случаях модератор согласен с мнением этой системы дочиста kayaba тест можно получить информацию там какие системы работают эффективно какие нет какими выключать какие править и так далее более того как я сказал вот есть коэффициент частности есть еще метрик несколько метрик которые позволяют определить апостиль очень хороший даже без участия модератора если какая-то система банит пользовательских центом честности единица в большом количестве то ну все здесь над смотри снимать нужно у меня вопрос был даже не про вероятность забанить хорошего пользователя а про эффективность борьбы вы обучили новую модель она у вас работает спамера как-то меняет свое поведение станет работать ну по большей части это аналитики в любом случае что вс помимо чтобы понять чтобы модель работает плохо нужно спамеров в итоге как-то поймать да то есть модель кого-то баня такого-то не банят вот надо понять кто из тех кого не банит еще являются спамерами тогда с этим справится и другая модель другая подсистема ну то есть в полностью автоматически здесь ничего не сделать спасибо за доклад буду поддерживать 3 6 нас спросить у сетевиков наверное вашу систему при определении в.п. да все нормально работу ну то есть там как вы понимаете практически все весь современный их код который работает со всем что я перечислю ему нет разницы да там и пиво 4 по 6 поэтому то есть у вас будет работать huis и базы данных провайдеров и все-все-все поддерживается поддонах уис по всему api вашей собрать это просто может вас с трафика я пила 6 я не смотрел если честно какой-то трафик вообще поддерживается ли он просто ху если надо собирать да весь заранее конечно хорошо его иметь да и некоторые регистраторы предоставляют huis прямо гулком целым к можно 1 месяца угрожать у них но в общем случае не надо делать с его связь и собирать можно делать как бы он demand на каждый новый кадр и сделать ему huis спасибо я здесь сколько времени в среднем занимает в нормальном режиме занимает модерации пользу федотович допустим написал там торчат pornhub да и вот какое во времени за банк это первое второе вот я понимаю это время зависит от наличия модераторов говорящих на конкретном языке то есть допустим если у нас есть спам допустим на японском условно у нас там есть один модератор модератор на японском он спит вот сейчас в японии ночь получает я всю ночь японскую носит могу рассылать спам до тех пор пока мудро то не произнес хорошо а не рассказывать и пожалуйста в этом японским спамером и дело в том что модераторам на самом деле не надо знать не какие языки и они пользуются большинство из них пользуется google translate а мы мне надо вчитываться в текст настолько подробно чтоб понять самом отеле нет опытный модератор определяет даже на японскому без переводчика время которое живет с памир мы конечно же тоже его стараемся заметите уменьшить большое количество спамеров больнице еще один чел активности то есть они выключаются попадаются стал sbahn сразу после сразу после регистрации до начала травки каких-то сообщений а если вопрос про то сколько проходит времени от наличие спама до реакции различных систем то это опять же зависит от систему модераторы к модераторам она добирается долго у модераторов нет задачи в реальном времени побороть спам у них есть задача обучить остальные системы остальные системы на там уж как инфраструктуру позволяет нам от одной секунды там до 10 до 15 добрый день и спасибо за доклад вопрос вы вскользь упомянули про песочницу да а вот вы туда отправляете какой-то процент мы стараемся туалет спамеров которые точно являются какими-то ботами автоматами и так далее если мы их просто забаним то не узнает что мы их забанили мой а не знает какой момент это произошло более того они легко создают новый аккаунт пока у них нет необходимости создавать новый аккаунт у них есть иллюзия того что все происходит все нормально и для того чтобы просто их запутать скотин и таких мы отправляем их песочницу спасибо хотела починить про коэффициент частности до практики должна сказать хороший или плохой значит коэффициент частности рассчитывается он demand каждый раз когда какая-то систем хочет что-то сделать с пользователем применить в какую-то санкцию в этом момент рассчитывается костян частности нет смысла пересчитывать каждый час и минуту секунду только перед тем как мы собираемся реально что использованием сделать со стороны антиспама соответственно так как система антиспама они работают достаточно изолированы то пользуется ничего не ждет он просто получает свой баннер остается доволен то есть пользователь в чатике вот по вашему примеру написал пару не имею в виду через полчаса получил полчаса не пройдет но так ну да и что он получил бан через какое-то время ну соответственно мы стараемся там вовремя не доставляете как при каких-то подозрениях задерживать там может быть уж уведомление получателю делать какую-то сложную доставку на там можно много думать да безусловно она считается перед тем как нам она нужна для того чтобы польская защитить от нас самих поэтому как только мы собираемся спросим что сделать нехорошие мы должны проверить а должны ли мы это делать на самом деле или нет понял вас спасибо большое а вот можно вот последний вопрос спасибо большое за такой у меня возникли еще некоторые комментарии соответствии с предыдущими вопросами и хотелось бы узнать правильно ли это вот по поводу песочнице этого сайлент хилла то есть вы продолжаете отслеживать сообщение также собирайте данные то есть это также вам поможет наверное отследить поменял ли пользователь поведение может быть он перестал быть спамером и навсегда стал хорошим да в любом случае мы конечно продолжаем за ним следить собирать по нему информацию и вряд ли он можно понять как то что он стал хорошим но то что он остался плохим можно проверить да да да конечно ну то есть это самый опасный инструмент вот этот silent hill он самый удобный потому что отсекает желание общем смотри на той стороне сидит человек ему психологически неудобно разбираться с темой куда мы засунули вот соответственно хороший пользователь может и не не додуматься и вообще расстроится уйдет в тоже подуди ремонт не могу никого найти спасибо еще про был вопрос про то как спамер изменил поведение и получается что допустим ваша кластеризация уже не работает там где спамер там газ по мир был спамером потом попытался воспользоваться сайтом по назначению его не жалко я понимаю что постоянно кластеризации она ведется в каком так не регистрации допустим берутся после за все за два часа за последние зарегистрируйся не пластеризуется условно соответственно статистика если там пусть и создал один аккаунт плохой спамерских второй аккаунт плохой с памирский 3 плохой спа мерзкий то тут уже никакого толком про ту хания нет потому что если ты спамер то ты ее считаешь сформировано всю жизнь нет есть есть конкретный там маленький узкий случае когда человек начинает делать там какую-то фигню неосознанно какой-то там впадает в детство и начинает какое-то баловство тогда он потом пишет искреннее раскаяние в саппорт его разбанивают и вдруг один да тогда я же сказал сова начал уж ни в коем случае нельзя банить весь океан и что что всеми перераспределяется там было за ним сто-сто женских аккаунтов из них 100 забанен а потом айпи адрес при распределился на женское общежитие там опять же 100 женщин зарегистрируется сто процентов понятно то есть у вас никакого плохого отношения например к api ренджем из университетов и сколов нет как правило нет например государственные компании рабочие также ну в смысле много людей до сидят на баду с рабочих айпи адресов но мы не жалуемся начальство если у про это вот как раз ребенка секатор определяет что это хостинг или это vip men провайдера или это какая-то своя we пск то есть пытается определить что это не домашний компьютер с не домашним провайдеру спасибо да ну наверное уже там в частном порядке"
}