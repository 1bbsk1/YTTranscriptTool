{
  "video_id": "gqiIPxtvXFY",
  "channel": "HighLoadChannel",
  "title": "Чеклист по клиентской оптимизации / Николай Лавлинский (Метод Лаб)",
  "views": 1911,
  "duration": 2936,
  "published": "2018-01-16T13:40:17-08:00",
  "text": "и так здравствуйте давайте начнем эту секцию highload junior итак я хочу поговорить о скорости конкретного клиентской оптимизация но пока маленькие вопросы кто любит быстрые сайта поднимите руки кто любит тормозные сайт и никто до давайте делать только быстрый сайт все будет счастлив так немножко себе наши компании мы занимаемся клиентской сервер на оптимизации у нас есть услуга ускорение сайтов под ключ и также я периодически занимаюсь пропагандой темы скорости вот как сейчас например и так маленькое водное я зашел на 4п archive.org и посмотрела какой сейчас средний размер страниц среди посещаемых ресурсов получается что десктопу нас где-то 2 и 6 мегабайта и мобильные 2 и 3 причем видите мобильный не сильно отстают от кто по действительно зачем меньше трафика гонять пусть будет как у всех мне кажется что это как то неправильно почему почему так происходит наверно здесь есть много ответов но у меня одного конкретного нет при этом мы понимаем что надо делать что-то более скоростное и мы знаем как сделать лучше то есть есть куча информации с методики правило у нас всякие сервисы нас в дают нам какие-то баллы все это есть постоянно новые разработчики средства нам дают которые дают нам свойство для анализа скорости и так далее но как правило мне кажется эти задачи просто откладываются в долгий ящик да зачем вообще тратится на скорость кому она нужна там на свечи горят и тогда о чём я буду говорить в целом сначала мы возьмем реальный сайт настоящие проанализируем его быстренько и будем по шагам его оптимизировать смотрите что из этого получается дальше я покажу как можно достаточно быстро и просто настроить яндекс для дачи статике поговорим о оптимизации tls а у женщин это псы совсем немножко о теперь и сиди иенах и как тестировать скорость итак поехали вот перед нами наша жертва это сайт компании куратор лепс это отличная компания по да да защите я решил взять их сайт он нам хорошо подходит с одной стороны он не является каким-то заброшенным искусственным примером да где все плохо там много хорошего новый много чего можно улучшить так мы дальше во всем докладе и тестировать будем вот с такими параметрами мы берем впч тест проявит instance выставляем параметры соединения 16 мегабит на вход и 150 миллисекунд задержки это профиль 3g fast здесь мы его используем потому что десктопная версия имеет адаптивный дизайн и по сути являются мобильный также и браузер мы используем chrome смотрим как у нас была загрузка до оптимизации это реальное время то примерно так то есть мы начинаем что-то полезное видеть в районе 5 секунд но это понятно что не очень хорошо и будет некомфортно в целом загрузка около 10 секунд вот числовые параметры старт рендер который нам до этого пищи тест 5 половин секунд почти и почти 10 секунд событий загрузки при этом трафика мы получаем 16 мегабайт а ну лучше конечно чем в среднем почты по архивы но все-таки наверное можно что-то улучшить внизу есть полоска скриншотов как это выглядит то есть мы на вот этой пятой секунде на 6 видим далеко не все мы видим некоторые цветные области там нет текста нет картинок вот так выглядит график прогресса рендеринга сайта по оси x у нас время в секундах по оси y у нас процент отрисовки то есть у нас начало 0 потом начинается рендеринг мы доходим где-то до 25 процентов потом идет ступенька и так дальше то есть у нас несколько таких важных шагов и до 100 процентов мы находим там уже ближе к 80 секунду эти графики мы будем также дальше смотреть как они у нас изменяются и так мы смотрим waterfall загрузки что же у нас здесь происходит ну естественно это основной документ html он проходит все нужные стадии там connect tls хан шейк потом он приходит сам и у нас там есть несколько css и джесс ресурсов которые нам блокируют рендеринг почему это понятно вот эти зеленые полоски ближе к правой грани вот этого прямоугольника красного это начало рендеринга то есть все что левее выше все эти ресурсы скорее всего каким-то образом нам тормозят начала рендеринга страниц начинаем разбираться что здесь мы должны сделать нам явно нужно ускорить начала рендерингом потому что иначе человек может решить что сайт вообще не работает нам нужно это делать для десктопной версии с учетом того что это мобильная версия объем трафика там точно такой же те же самые ресурсы поэтому мы рассчитываем на худшие условия соединением но по сути сейчас для реального мобильного интернета сайт не особо пригоден потому что в реальных условиях где-нибудь на бегу или там в пробке будет очень мучительно его смотреть кроме того естественно мы должны как-то ужать этот объем трафика и сократить количество блокирующих ресурсов последняя это проблема которая может очень серьезно насолить этому сайту здесь есть клиентская единая точка отказываясь п.ф. здесь подгружаются google шрифты и если есть какая то ситуация когда это тесс со шрифтами не приедет от гугла ну какая-то блокировка там проблема с сетью не важно может сам google шериф перестанет работать сайт будет выглядит еще хуже то есть браузер будет ждать то тайм-аута и так как это css блокирующий ресурс мы опять будем лицезреть белый экран это нездорово дальше начинаем мы самого-самого критичного это сердце здесь всего два файла стилей то есть собственный style.css 40 килобайт этажа ты размер и небольшой сердце саад шрифтов кукла при этом некоторые вещи уже сделано то есть в системе сайта его собственные слиты в один файл есть минификации они даются со сжатием в принципе есть куча к широких заголовков на большое время то есть это на мально правда сжатие gzip и какой-то очень слабенькая но мы понимаем что здесь мы грузим сердце со стороннего h100 это значит что мы сначала должны сделать к этому хасту connect грузим мы это все еще почты tps то есть это еще целая скан шейк но и в худшем случае еще dns запрос не очень быстро и все это делаем для того чтобы получить маленький css в котором находится объявление шрифтов от гугла ну и в довершение всего этот css гугла он еще не просто указан в html документе а объявлен через импорт все цыси в том большом стал css то есть мы должны сначала загрузить style.css потом его распарсить найти вот там этот ресурс и только после этого начинать конектится к гуглу для того чтобы получить шрифты но это совсем уже плохо ну и помимо всего там есть inline фонд в стилях то есть здесь явная такая жестко оптимизация на сокращение количества ресурсов то есть все что чтобы все работало получит эту p11 но это мы чуть позже поговорим и так что мы делаем так как мы ленивы это мы и делаем просто мы жмем сталось с компрессором прот ли это новый формат сжатия который поддерживает сейчас уже в хроме фаерфоксе и получаем уже сокращение трафика с шрифтами из гугла мы просто-напросто вносим их в собственный файл стилей на этом же сайте то есть если бы мы делали более глубокой оптимизацию то можно было тише вт и внедрите в основной css но мы делаем что-то быстрое и простое что мы получаем сверху скриншоты после оптимизации снизу до оптимизации вы видите что у нас каждый кадр это пол секунды то есть видите насколько раньше мы видим некую картинку ну хорошо смотрим графике мы сдвинули график прогресса рендеринга влево то есть значит что мы все те же самые этапы рендеринга начинаем видеть раньше то есть мысль сдвинулись примерно там на полторы секунды ближе к нулю нет хорошо второе по критичность это javascript у нас здесь есть некий гигантский команды из 160 килобайт сжатом виде и он у нас грузиться в секции хит и он синхронный это значит что он полностью блокирует нам браузеру что опять же не здорово 2 ресурс это индекс dji с он немного поменьше и находится он перед закрывающем тэгом html то есть он не так сильно нам мешает опять же здесь есть минификации есть заголовки кэширования какой-то к держать и но это два синхронных javascript а и команды с который нам очень-очень сильно мешает почему команды с большой потому что внутри него встроено куча css кода которые видимо по разным условиям вставляется в браузер динамически по сути говоря это такой гибрид с с ресурса и джесс что с ними делать в принципе по логике мы бы хотели этот код javascript не и унести вниз чтобы он не блокировал нам рендеринг более того его исполнении вверху страницы вообще не нужно то есть у нас вся работа javascript ум происходит в контакт внизу документа да то есть нам не нужно что-то там использовать из библиотек в середине страницы но у нас там есть css поэтому так просто сдвинуть его нельзя если мы сдвинем его вместе со стилями в конец да мы получим flash of style контент то есть такое непонятное дефолт на оформленный документ который будет сильно прыгать перерисовываться тоже не здорово поэтому пока у нас нет доступа к исходникам мы оставляем его там и просто напросто опять же жмем его брат ли так же как и его у соседа в конце получаем экономию опять же на 30 процентов опять двигаем график влево здесь мы получаем что-то около пол-секунды на разных этапах хорошо следующий критичный момент здесь это шрифты но уже немножко по них поговори это шрифты которые приходят от гугла но есть еще и локальные шрифты те которые приходят с сайта и на самом деле это все один тот же шрифт работа допрос он приходит в разных вариантах там light medium болт и так далее и в исходе восходном варианте мы получаем 7 вопросов на почти 400 килобайт только шрифтов по сути это один шрифт как я говорил мы грузим отдельный сердце с внешнего хоста и получаем все виды хен шейков и торможение которые могут быть при этом часть шрифтов google fonts заменяется теми которые мы грузим локально причем локальные шрифты отдаются vtt фиби сжатие и по сути они дают больше всего трафика вот в эти 400 килобайт что мы делаем мы должны унести все эти сайты к нам все эти шрифты локально на наш сервер делаем css для шрифтов также локальном здесь мы используем f2 формат так как мы сейчас тестируем в хроме но для совместимости мы бы добавили еще несколько вариантов шрифтов по по приоритету в результате трафик у нас сокращается с 392 килобайт до 122 неплохо и вот результаты виде скриншотов но мы примерно на пол секунды сдвинули сама начала рендеринга но заметьте что в следующем скриншоте мы уже видим шрифты и частично картинки то есть мы на самом деле довольно неплохо обгоняем предыдущий вариант то есть сравнение вот здесь в этих сериях скриншотов идет всегда с предыдущим шагам да не с начальным вариантом предыдущей шаг вот как это выглядит на графике прогресса рендеринга мы опять сдвигаемся влево примерно на секунду это мб у нас остаются абсолютно те же самые ступеньки ну и последнее из такого контент нова это картинки в принципе картинки они не блокируют нам рендеринг но так как в них содержится важный контент нам тоже бы хорошо их загрузить побыстрее ну и здесь если вы внимательно смотрели на waterfall где я говорил практичные ресурсы вы могли заметить что туда затесалась несколько картинок то есть браузер выделяет на самом деле то что он считает важным и эти запросы запускаются достаточно рано то есть они отжирают нашу полосу пропускания поэтому картинки нам оптимизировать нужно и полезно всего у нас 53 запросов для картинок 666 килобайт и все это пенкой джипег что здесь мы заметили из оптимизации используется справить для иконок то есть это самый большой png-файл около 120 килобайт достаточно неудобная технология но она позволяет сократить количество запросов к серверу а также есть каши руси заголовки и размеры картинок в принципе сделано правильно то есть там нет огромных картинок уже так по счетам или там до микро размер так что мы делали с png мы делаем первый проход такой штукой который называется опте png команды все вы видите дальше мы дополнительно отжимаем сок или png это по сути говоря применение алгоритма сжатия zopfli для png zopfli это так алгоритм который на выходе дает тот же самый тёплый gzip только работает гораздо медленнее но за счет этого мы получаем небольшой экономия там до 20 процентов и так же мы идем в 3 вариант для тех браузеров которые все поддерживают но мы кладем в рядом да то есть мы оставляем обычной png и в.п. пример то же самое с g бегом только здесь мы используем h top mozilla jpeg это один из самых эффективных сейчас кадров вот параметр тоже есть потом очищаем все лишнее из и бегом и так же делаем в пк-версию если бы здесь был свд то мы бы их оптимизировали таким образом есть визуальный интерфейс для оптимизации сайта с в г а м г есть адрес и в принципе можно использовать такую вещь как с врагом это именно для глубины оптимизации svg правда здесь нужно быть осторожным и эти штуки могут поломать внешний вид самого спг особенно если вы делаете логотип и лучше это делать вручную и смотреть что получается то что например аптеке оптимизации как уменьшение точности кривых они могут вам очень серьезно навредить в плане выходом то есть это может быть сжатие с потерями такое но без потери вы можете так как это текст отжать и опять же алгоритмами zopfli и брод ли за после это для тех кто не поддерживает братли обычных тип на выходе по сути проследить для тех кто поддерживает для chrome firefox скоро наверно еще кто-то потянется итак мы должны настроить отдачу в через яндекс как это работает мы определяем в списке поддерживаемых форматов браузера в.п. если она там есть мы выставляем суффикс в.п. то есть мы будем искать имя файла . выпьем для explorer несколько дополнительных заголовков чтобы там ничего не ломалось ну и в самом лаки и шине мы говорим вот эти заголовки для совместимости с explorer и используем трой files то есть мы рассмотрим а если у нас в п версия если есть отдаем ее если нет даем простой файл который на запросили ну иначе 404 эта штука универсальная внедряется достаточно просто то есть алгоритм здесь какой цепи если у вас при компрессии получается экономия размера после обработки в.п. вы его оставляете если у вас получается то же самое либо больше вы просто напросто удалять этот в api файла все он не находится то есть получается вы можете гибко делать оптимизацию картинок то есть вы всегда будете выдавать самый маленький поддерживаемый вашим браузером файл что мы получили если у нас не использовать в.п. мы у жались из этих 66 килобайт в 410 scp-348 ну тоже неплохо посмотрим как это повлияло здесь скриншота примерно похожи но если посмотреть то все-таки оптимизация картинок нам дает более ранние рендеринг в том числе и шрифтов как ни странно да на втором скриншоте видно что у нас текст уже есть да оптимизация картинок его нет оптимизировали картинки получили после более быстрый рендеринг шрифтов то есть как я и говорил надо просто экономить трафик на всем тогда будет хорошо вот как это выглядит в виде графиков и здесь у нас первое серьезное изменение то есть начинаем мы примерно в то же время так как это не критичные ресурсы но зато мы видим что многие ступеньки из графика ушли то есть нас идет очень быстрое увеличение до 100 процентов но там почти сто процентов а потом идет уже такая полочка что мы можем сделать еще но конечно нам нужно включить http 2 ну потому что технологии это сделано вообще для ускорения принципе почему бы не не использовать ну на самом деле здесь не все так просто это достаточно тонкая оптимизация по сравнению с тем что я показывал раньше тоже до проведения каких-то тестов я сразу могу сказать что скорее всего вот этими тестами на в почти steam или бы не увидим разницу либо она будет крайне низкая и на самом деле в большинстве сайтов так и происходит но что нам на самом деле что p2 может дать она нам даёт больше удобства как разработчикам например мы здесь тестером сайт в котором уже есть прайд да то есть его кто-то сделал на самом деле это крайне неудобно и такая тяжеловесная технологии поддерживать его не здорово гораздо лучше если бы от этого в чем можно было отказаться то есть мы на самом деле сейчас подключаем http 2 на сайт который жестко оптимизирован под защиту p11 а конкретно под минимизацию количество запросов а здесь получается что результат будет не совсем очевиден и если бы мы делали сайт с нуля или глубоко вы оптимизировали да со всеми исходниками так далее то возможно мы бы приняли другую стратегию например сделали бы кучу мелких запросов да для того чтобы сохранить удобства и какую-то атомарный для браузера чтобы он мог не весь прайд 125 загрузить одну иконку который будет весить там 600 white 8gb ну и естественно сейчас ищет твой себя представляет по сути одну основную фичу это мультиплексирование запросов то есть единое соединение в которой мы отправляем любое количество запросов и не дожидаясь ответов можно посылать следующие такая некая асинхронность и что мы получили ну как я и говорил особо-то разницы у нас а нет по некоторым мы получили ухудшение ну смотрим здесь уже не графика это такое скажем статистическое распределение здесь производилась 20 тестов в каждом варианте и это у нас время то дом контент лодок красная линия это четы тп-2 так как она выше у нас это событие наступает позже но там где-то полторы секунды причем это статистически верная вещь потому что там по посчитано статистика что да это больше чем погрешность и получается что это действительно ухудшение примерно такая же ситуация time туве жили комплит то есть это когда мы достигаем сто процентов аренда сайтов но что это значит не знаешь . p2 всегда плохой да но в данном конкретном случае он нам сильно не поможет если заранее считать что у нас есть еще эту p2 и мы можем его использовать возможно мы сможем что-то за счет этого выиграть не так что мы можем сделать еще из мелких таких технологий у нас используются внешние шрифты то есть погружаемые и соответственно мы можем сделать при лот это довольно новая технология подержится тоже в основном кроме но уже входит втц стандарт то есть есть большие шансы что скоро она будет поддерживаться широко и суть ее проста мы объявляем в самой странице что нам понадобится вот такой вот такой шрифт браузер видит от сразу при загрузке что много документы не дожидаясь загрузки css и отправляет запрос на скачивание этого ресурса также можно приладить css если они у вас там куда то глубоко закопаны и так как это шрифт он понимает более менее критичное будут отправлять этот вопрос достаточно большим при ведь этом при довольно рано вот рабочий пример для шрифтом и мы добавили в привод все те шрифты которые нам нужны были что мы получили до почти ничего опять же да но я специально оптимизацию оставил но как еще один пример того что оптимизация не всегда нам дает какой то плюс мы можем в принципе либо ничего не получить либо получить минус здесь минус тяжело получить потому что это вряд ли что-то ухудшит но много здесь не дало а на самом деле все это произошло потому что у нас был специальный css для шрифтов которые мы украли у гугла да и мы его поставили в самый верх и он у нас благополучно эти два килобайта загружает очень быстрый находит сам эти шрифты то есть ему не надо чего-то такого большое качаете чтобы обнаружить эти шрифты если бы мы засунули объявление этих шрифтов в основной css который весь там 40 килобайт то мы бы увидели ускорение ну вот здесь единственная метрика в которой как-то где-то видно ускорение этих шрифтов то есть планочка вот эта красная немножко ниже чем зеленые линии это медиана и значение среди тестов по сути говоря 0 ну конечный результат вот этой быстрой оптимизации то есть я еще раз повторю что мы не влезали в исходнике мы прям брали готовый сайт там локальное почитали оттуда backend путем давался в виде статического чето мела и делали вот эти все контентные вещи мыс окрасе сократили начала рендеринга с трех секунд вернее до 3 секунд 5 4 загрузку нас 6 и 2 было 95 и трафик у нас почти в два раза крутился было 16 стала 800 чем-то килобайт скриншоты у нас получается у такого вида то есть мы достаточно резко переходим в стадию почти от рендеринга сайтом пожалуйста видео слева исходной справа оптимизм темизации что получилось ну явно здесь неплохо ну на этом конечно не надо останавливаться если это ваш проект и здесь дальше работа будет более серьезные то есть тех же сссс которые уже собраны их надо разобрать на исходнике и найти там лишний код ну как показывает практика там дела с процент случаев что-то да есть лишнего здесь политику можно применять такую например вас есть страница входа главное да и для нее нужно допустим половина css или там 3 javascript а вот мы туда включаем эти ресурсы пусть они грусть все работает а дальше мы либо в какой для него загрузку остальные ресурсы для других стране загружаем либо просто-напросто уже при переходе на то какой другой шаблон на внутреннюю страницу уже как как ваша логика больше подсказывает и таким образом можно уже достаточно радикально сократить вот время начального рендеринга то есть какой-то цели там например полторы секунды думаю вполне можно достичь дальше естественно проблем с команды с который говорил то есть его надо разделить разобраться зачем там запихал css код и по возможности вынести его все-таки все с.с. вариант скорее всего там с помощью нить медиа квари можно все это решить дальше шрифты мы просто-напросто перенесли к себе но мы подробнее не анализировали какие из них как используются может быть их количество можно как то сократить без ущерба дизайну посмотреть на это подробнее ну и если мы будем использовать b2 да даже если не будем использовать то можно этот спрайт по english на который является вам большой картинка разбить и перевести его вообще высокий spf жестоко пожать всеми методами и отдавать отдельно ну и четки мобильная версия должна весить меньше десктопной то что посмотреть почему у нас мобильная версия тебя не столько же трафика как доступная хотя выглядит она гораздо скромнее и также добиться того чтобы браузер лишние вещи не грузил ну и в конце концов можно еще посмотреть если там места для адаптивных картинок то есть для разных экранов опять же чтобы не грузить лишнего размером все это вместе я думаю даст намного больше ну а мы переходим к справочной такой вещи tls на здесь на этом сайте использовался tls ну и многие я думаю сейчас либо в процессе перехода либо уже нателла и потому что это сейчас у считаются нормой на самом деле вот примерный конфликт это общая часть вы нужны конфи что там у вас должно быть здесь никаких тайн и секретов наверное нет я просто пробегусь в курсе вы или нет ну здесь всякое кэширование сайте есть сантики ты кэш сессии для того чтобы заново не создавать соединение есть настройки версии протоколов которые достаточно совместимы но при этом безопасно и включен технологию cec pst blink то есть пристыкован ответу валина сертификата прямо в начальном хан шейки по поводу шифров здесь я также сократил конфигурациям там длинная строчка здесь самое важное что в приоритете стоит aes-128 7 это достаточно безопасный сейчас считается шифр но при этом он быстр быстр он за счет того что ой с у нас аппаратно ускоряется большинством процессоров то есть это важно для сервера который много такого трафика дает 128 это самая быстрая версия из всех который есть то есть можно проезд 256 включить но с точки зрения безопасности но это так уже паранойя с точки зрения скорости ожье 128 чуть быстрее если здесь говорить про клиента например про мобильные телефоны которые должны все это цифровой до распаковывать у себя то здесь не так просто не во всех типах есть аппаратная поддержка аиса но это такой компромисс потому что новых достаточно безопасных шифров вообще вы очень мало есть там чаще 20 такой смешной алгоритму тампой и быстрее без акселерации аппаратной с а но достаточно новые версии сосал библиотека нужны и . не сервер это будет медленнее конечно ну общие рекомендации пыталась меня какие мы всегда помним что нам нужно тело сессии кэшировать мы используем правильные шифры которые безопасны и на данный момент но при этом желательно как-то быстро работают и важная вещь не забывать проверять что у вас сервере включена вот это аппаратная федерация из а потому что почему-то иногда это бывает выключена в bios ну проверить это можно бачек марка мог у нас осела например вы увидите сколько у вас мегабайт в секунду жмет и сравнить сколько-то должно быть кроме того если у вас есть ли сложности с конфигурации ли вы первый раз хотите настроить tls пожалуйста есть генератор конфигов от мазилы и там скажем так гарантированно компетентно вам сгенерирует конфигурацию с точки зрения безопасности ну и в принципе скорчить это же в основном при этом вы можете сами выбрать уровень совместимости браузеров который вам нужен можете на новейшей браузера можете там ну мы используем средний уровень как вы видели отель с 10 и дальше ну и забывать и тестировать настройку вашего tls она примерно сало псах опять же там будут большинство тестов по безопасности и немножко вещей по поводу скорости ну а на будущее нужно следить за новыми версиями нас на носу уже будет внедрение тс-1 на 3 и эллиптические сертификаты то есть не руссо и сиди со и все это немножко опять же нам ускорит внутри арт с 13 ждем такую фичу как озеру ттн шейк то есть который вообще ничего не занимает нам тоже есть куча вопросов по безопасности и по внедрению ну для статики что мы обычно делаем надо не забывать чтобы был достаточно длинный keep-alive соединений то что опять же tls плеч b2 это вообще крайне критично долгоживущие соединения и не забывайте давать каширу ющий заголовок вот мы например используем такую версию просто выдаем что этот ресурс можно хранить достаточно долгое время например год и из новых фич это такой параметр как ему это был это та вещь который говорит что этот кэш можно хранить чуть ли не вечна но точно изменяться не будет это тоже содержится в храмах я думаю сейчас так подхватит другим браузером современными это как бы дополнительная гарантия сохранности ресурсов каши но естественно сбрасывать кеш вы должны изменениям юрий la ресурсы потому что иначе браузер его запрашивать вообще не будет то есть надо помнить естественно надо настроить gzip конфигурация здесь тоже ничего особо нового но насчет уровень компрессии я скажу что если вам крайне важна скорость динамической компрессии на лету может поставить там шесть или семь в принципе достаточно будет оптимальная компрессия но работать будет намного быстрее чем 99 в принципе тоже не страшно как правило ресурсов по себе достаточно для этого но естественно самая наша главная фича статический gzip за счет статического case по мы можем класть уже прижатый файл и это у нас получается максимально эффективно так мы там можем использовать zopfli да вот этот медленный вариант case по которой чуть лучше жмет ну и вообще обычный xiv принципе тоже полезно положить просто чтобы не тратить время при отдаче ну по поводу типов также не забывайте многие пропускают например что вот shift и pdf можно спокойно сжимать гриппом не обращать внимание при овд ванне сжимается он уже внутри сжат с помощью братли поэтому бесполезно а вот убрир wav формат также можно нажимать гриппом то есть смотрите что можно жать не только текстовые например favicon тоже неплохо себе жмутся ну а дальше чтобы выделить брод ли здесь помимо конфигурации нужно все-таки этот модуль для индекса собрать ну вот мне и статья используемые модули от гугла и принципе отлично он работает опять же два режима есть брат или static есть динамическая сжатие static понятно мы заранее сжимаемся максимальной компрессии там это 11 а в динамическом варианте мы сжимаем с уровнем 6 ну по затратам это примерно где-то около к zip 9 нажмет он сильнее то есть это вот для самих html документов для того что держаться ради также указываются типа на пару заметок против себе стек мы не будем углубляться в себе стыковки вещи не надо больше от минска и но есть такая вещь как сохранитесь и винду после после простое соединение то есть например у вас идет активная передачи данных окно передачи расширяется countries on window а потом у вас например визитки была вся дней ничего не происходит она у вас по умолчанию уже сжиматься под непонятным вдруг у вас ухудшилась ситуация до в сети как правило она сильно не ухудшается поэтому если его оставить то у вас повторные байтики которые пойдут после простое пойдут с полным размерам окна но это можно почитать посмотреть подробнее ну и в принципе можно использовать фифа stop on ну и тоже достаточно свежий вещь его надо включать и в ядре и на стороне engine.exe ну в принципе здесь уже не очень много клиентов поддерживают но он пример поддерживает android более-менее свежий принципе у нас включена таки коннекта идут почему бы не использовать и так совсем чуть-чуть про седин вообще это отдельная большая тема но мы сейчас будем говорить про именно ускорение до потому что многие седины нам предлагают ускориться как ну в чем вообще если в двух словах суть седины это две вещи это задержки в сети и это ресурсы каналам интернет канал то есть задержки это как раз то что нам предлагают сидена в плане ускорения то есть мы будем ваш трафик отдавать со своих постов которые ближе к пользователям за счет этого мы экономим все задержки в том числе там на тсн шейки насчет каналов это больше актуально для тех кто выдает большое количество контента либо какой-нибудь тяжелый контент типа видео вас просто физически не может быть канал в одной точке достаточно достаточно для всех пользовать насчет задержек здесь на самом деле не все так просто вы должны четко понимать к выбирать седин какие у нее с точки присутствия и какого рода связанность она обеспечивает раз уж вы хотите оптимизировать доставку контента на таком уровне сетевом вы должны четко понимать где находится ваша аудитория какие вот сейчас например маршруты примерно до этой аудитории что вам может дать сидел на сколько на сократит и насколько это будет хорошо работать ну частая ошибка я надеюсь ни у вас там но на практике вижу что многие люди подключают седина у которых нет точек присутствия в россии вообще сервер у них находится в москве аудитории у них тоже в москве понимаете да что происходит с ней отправляет куда-то во франкфурт свой контент и из франкфурта он прилетает обратно в москву ускорение явно не будет ну и смотрите сможете ли вы все это настроить с точки зрения каширования сможете ли вы сбросить кэш езде на как быстро какими методами ну и здесь также нужен четко понимать что вы добавляет еще один уровень эту прослойку между вашим сервером и пользователями сложность системы седин я думаю она ну может легко превышать сложность его вашего приложения то есть если все работает то хорошо в случае проблем вам придется диагностировать это с двух сторон и с провайдером силен и у себя потому что не всегда понятно где проблемы до хуже всего когда она вообще будет на стыке ну и маленькая ремарка проще тп-2 что как раз за счет того что у нас оптимизируются задержки для мелких запросов то мы можем в принципе иногда от сидена и отказаться то есть надо смотреть может быть gp2 вам поможет решить вашу проблему ну и напоследок как тестировать я показывал бпс он есть публичном и есть устанавливаем себе правят instance и новый плагин lighthouse от храма будущем он в принципе войдет уже в состав самого браузера мой маленький бонус скидка 30 процентов на услуги по ускорению от нас скажите что вы среда 2017 если интересно обращайтесь у меня все и приходите на митап который будет в 11 сразу после окончания доклада это индия около штаба спасибо кстати за вопросы у меня есть наклейки так что есть смысл уточнить хотел вот можно немножечко вот поподробней у вас было два пункта там значит вот вы говорите добиться сокращение трафика для мобильных это если обычная версия и мобильная разное я правильно понял по сути это один адаптивный сайт то есть у нас происходит перестройка блогах но груди мы все абсолютно тоже самое а как можно если один и тот же html добиться сокращение трафика ну смотрите там когда мы проверяли визуальная картинка другая совсем мобильной версии например там нету слайдера вообще но все картинки от него грузится то есть получается что они указаны таким образом что правде решаешь их надо грузить надо бы их скрыть чтобы они не мобильной версии назначить им стиле грамотный чтоб там дисплей но он стоял что не нужно спасибо и еще вопрос вот что значит адаптивные картинки это речь идёт только про css или как-то контент на картинке можно делать адаптивными это технологии responsive имиджа в оригинале называется это когда вы в картинке указываете sourced ни один вариант а несколько под разные условия например вы говорите если у вас кран к ширине от 1000 пикселей то покажи вот такую картинку если он допустим 300 пикселей виртуальных то другую картинку то есть там идет выбор уже на уровне браузера то есть это не только там пиксельную плотность можно указывать еще более сложные условия вы просто указать разные адреса ресурсов разные картинки физические а какие условия там есть и плотность пикселей и размер экрана и даже результирующий размер картинки которые отрендерится но там поддержку уже отправился зависит понял спасибо большое вопросы больше нету у вас было ремарочка по поводу inline указание фантов и о том что это как-то влияет на собственно рендеринг можно немножечко проясните да но и онлайн здесь была и ну а инфанта вообще бывает еще и онлайн картинки и что это на самом деле это жестко так как грязный хак для и ступай 11 то есть чтобы сократить количество запросов потому что на самом деле трафик у вас получается больше то что вы кодируете в майн майн 64 в общем вы перекодирует картинку в тексте она бы весить больше и единственный плюс от этого сокращение количества запросов если мы вынесем это в нормальный отдельный файл то соответственно мы вот этот css загрузим быстрее прошел будет не меньше а fifth он покажет пополз виду the data type конструкция где указываем мамой мы закодированный прям сальдо это онлайн дует картина всем спасибо огромное за прочего"
}