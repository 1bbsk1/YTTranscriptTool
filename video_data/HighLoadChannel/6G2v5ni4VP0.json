{
  "video_id": "6G2v5ni4VP0",
  "channel": "HighLoadChannel",
  "title": "QUIC, TLS 1.3, DNS-over-HTTPS, далее везде / Артём Гавриченков (Qrator Labs)",
  "views": 8236,
  "duration": 3207,
  "published": "2018-11-20T12:04:26-08:00",
  "text": "это заголовок с одного из блогов в интернете вы наверное могли и таких заголовков очень много на этом заголовки вот этом да написано что ищите p2 это не какое-то отдаленное будущее это прямо наше настоящее что это современный протокол разработанный гуглом и prophecy сотни профессионалов из многих других продвинутых компаний выпущенный айти в качестве рапси в далеком 2015 году то есть уже 3 года назад стандарты айтиев вообще трактуется индустрии как такие железобетонные документах могильная плита практически они планировали планируется что они определяют развитие интернета и учитывает все возможные сценарии использования то есть если у нас была старая версия протокола появилось новое то она точно сохраняет там спасибо она точно сохраняет по крайней мере совместимость со всеми предыдущими эскизами и дополнительно решает кучу проблем оптимизирует значит то есть еще два должен был быть адаптирован для продвинутого вэба готов к использованию современных сервисах приложениях практически быть соответственно дроп--ин replacement ом для старых версий протоколы т.п. он должен был быть должен был повышать производительность сайтов параллельно снижая нагрузку на backend даже сеошникам seo-шники говорили что им нужен each тебе два и его вроде как была очень просто поддержать в частности вот нил крейг с би-би-си и плясал своем блоге что достаточно просто включить его на сервер еще презентацией значит есть там можно найти там множество презентацию где написано что в ключе hd2 включается следующим образом если у вас engine x там нужно значит в одном месте поправить если нет gps и нужно сертификат поставить но в принципе это вопрос одного tokina фигура ционом файле и естественно после того как etoken вы пропишите вы сразу начинаете получать бонусы от повышения производительности и новых доступных вич возможности вообще все становится замечательно дальнейшая история основана на реальных событиях компания меньше некоторые онлайн-сервис обрабатывающий порядка 500 или 1000 запросов в секунду и тебе запросов естественно сайт этот находится под ddos защита club flyer существует множество бенчмарков которая подтверждает что вследствие того что еще 22 менее то есть при переходе нынче тебе два браузер устанавливает уже не этом 7 соединения по плану еще одно прогнозировалось снижение нагрузки то есть при переходе тебе два и памяти становится используемый меньше и процессор тоже менее нагружен плюс к этому в блоге club flora и на сайте cloth for предлагается включить эти два просто вот одним кликом вопрос почему вы так не сделать 1 февраля 2017 года компания включает и 42 вот тут от той самой кнопочкой club flyer и на локальном интернете тоже его включает месяц собирается данные мониторинга через 1 марта происходит замер потребляемых ресурсов и потом значит все сопли смотрит в логе смотрят число запросов которые приходят по и теперь два на стоящие за cloud for server на следующем слайде будет процент запросов пришедших на сервер почти 2 поднимите руки кто знает какой будет тот процент 0 по какой причине клауд fleur а также другие сервисы по защите от атак вот этим ссп и клауд сервиса работают в режиме reverse proxy то есть если в нормальной ситуации браузер напрямую соединяется с вашими engine.exe соединение идет от браузера до вашего хтб сервера и действительно вы можете использовать там под протокол который браузер поддерживает то случае если между браузером и вашим сервером стоит облака пришедшие спи соединения терменируйте на этом облаке tls тоже там терменируйте и запрос начал попадать на облака дальше облака фактически берет этот запрос облака и собственный ftp сервер большинстве случаев в редких случаях самописный большинстве случаев тот же самый engine x на самом деле вот этот стоящей там ктп сервер он берет парсит этот запрос как-то его обрабатывает значатся консультируется с кашами и в конечном итоге формирует новый запрос и отправляет его уже на ваш сервер потому протоколу который он поддерживает так вот все существует все существующие облака за являющая поддержки 42 поддерживает и что два на стороне смотрящий в браузер но не поддерживают его на стороне в смотрящий к вам почему ну простой ответ и не совсем правильный ответ потому что в большинстве случаев у них с dipline engine.exe дженкс не умеет ходить по tp 2 капс 3-му это ответ правильный но не полный в то время как полным ответом полный ответ нам дает инженеры club flyer дело в том что спецификациях тп-2 написанная выпущенной в 2015 году действительно не ее главным фокусом был действительно повышение производительности браузера на специфичных например для гугла юз кейсах google использует собственные технологии не использует reverse proxy перед своими продакшен серверами поэтому у reverse proxy никто не подумал и именно поэтому и 42 от облака до up stream и не используется там на самом деле профита мало потому что в режиме reverse proxy в том как он описан в протоколе b2 например сервер уж не поддерживается том что непонятно как он должен работать если у нас папой planning значит то что значит тп-2 экономить соединение это конечно круто но reverse proxy сам по себе их экономит потому что он не открывает по одному соединению значит на каждого пользователя вот то есть смысла смысла поддерживать там два мало а накладные расходы и проблемы связанные с этим большие но что тут важно что reverse proxy эта технология который начал активно использоваться порядка 13 лет назад вот эти технологии середины двухтысячных годов еще в школу ходила на уже использовалась стандарте выпущен 2015 года она не упоминается не поддерживается и работал и поддержки на данный момент в рабочей группе по бис войти не ведется это один пример того тех вопросов которые возникают когда люди начинают внедрять gp2 на самом деле когда разговариваешь с людьми которые вы развернули имеют уже некоторый опыт с ним работы постоянно слышишь примерно одни и те же слова лучше всего их сформулировал максим матюхин из баду своем посте на хабре где он рассказывал про то как работает и чти и что питу сервер push он написал буквально что меня удивило что насколько отличается и взаимодействие этой конкретной фичи с браузерами я то думал что это полностью отработанная фича готовые к использованию в продакшн вот эта фраза которая пройти 52 я слышу уже не я слышал много раз что мы то думали это протокол который дроби наряд пансион приходишься нормально почему с ним все так сложно почему почему возник откуда возникают все эти проблемы недоработки и так далее давайте разберемся исторически в те времена когда я нет в школу уже ходил но так или иначе до в стародавние времена архитектура интернета выглядело примерно следующим образом вот зеленого квадратика дам в какой-то момент не было но потом он появился прямоугольника для туристов протоколы были использовались следующие то есть внизу мы про интернет говорим не про локальную сеть поэтому на нижнем уровне был протокола ipv4 и пиве for выше него используя протокол целью и т.п. но там для 90 процентов случаев так как темп 80 90 процентов трафика в интернете этого дальше был тисе пи дальше был ссср потом ссср заменили на tls и выше уже было гипертекстовой протокол и степи вот с планирую постепенно так получилось что по плану где-то к 2020 году архитектуры интернета должна была в корне поменяться протокол ipv6 нами уже есть очень давно tls вот недавно обновили и мы еще обсудим как это происходило и протоколы 42 тоже обновился замечательного отечественного фантаста вадима панова в цикле анклавы была такая фраза хорошие что вы ждали будущего вы хотели будущего она наступила вы его не хотели она все равно наступило и единственное что осталось практически нетронутым надо по состоянию там на пару лет назад это был протокол tcp естественно что люди которые занимаются дизайном интернета не могли пройти мимо такой вопиющей несправедливости и решили в протокол spi выкинуть тоже как они решили это делать значит во первых то есть это на самом деле я шучу это конечно было бы не просто потому что им просто протокол слишком старый протокола тисе есть проблемы особенно многих беспокоило что протокол теперь два уже написан 2015 года это стандарт уже внедряется но на самом деле именно здесь api он работает а мне всегда хорошо и на самом деле неплохо бы под него подложить какой-то другой транспорт более подходящий для когда-то спиде когда начались эти разговоры потом для эти два этот протокол решили назвать клик то есть quick это ныне разрабатываемый протокол для транспорта он основан на юге п то есть он дат огромный протокол первый черновик стандарта был выпущен в июле 16 года и текущая версия черновика я почту проверю да все еще 12 на данный момент quick еще не является стандартом то есть его еще активно пишут если я не ошибаюсь а не стал писать на слайде потому что боялся ошибиться но в найти в 101 в лондоне вроде бы говорилось что где-то к ноябрю 18 года планируется выпустил уже окончательный документ по крайней мере сам стандарт quick потому что там на самом деле в рабочей группе документов 8 еще то есть стандарта нет пока но уже идет активный hyip я вот перечислил только вот те конференции где был за последние полгода где про quick была хотя бы одна презентация про то какой он крутой значит как нам нужно переходить что делать что делать оператором значит перестаньте дропать и т.п. потому что через него еще squeak будет работать и вот это все и этот hyip длится уже достаточно давно я уже видел много статей которая призывает там game игровую индустрию переходить на квик места в обычном виде пи-ви всего прочего в ноябре 2017 года в рассылке рабочей группы quick появляется вот такая ссылка значит вот тут верхняя это на whitepaper а нижние то на к кому тяжело читать white pepper есть еще краткая самаре в блоге и пенёк исследователи решили измерить сравнить производительности пиквика в текущем его бить и они взяли значит страны client-side а у них был chrome под убунтой чтобы не разбираться там с тем что винда не винда кто виноват они взяли ubuntu поставили сверху chrome и также взяли два мобильных устройства это какой-то nexus и какой-то samsung значит соответственно с андроидом 4 6 версий никто же запустили chrome и со стороны сервера не поставили для того чтобы миритесь как работает теперь не поставили apache а для того чтобы мерить клика не значит выдрали вот тот кусок значит open source найди там серверного кода который имеется проекта chromium результаты бенчмарков показали что хотя в типа всех тепличных условиях крик действительно выигрывает у тебя есть некоторые edge кейс с в которых он проигрывает например реализация гуглово реализация клика работает существенно хуже т.п. если в сети происходит таки 3 ordering то есть пакеты прилетает не в том порядке в котором отправлены сервером в 2008 понимать в 2017 восемнадцатом году в век мобильных и беспроводных сетей вообще нет никакой гарантии что пакет вообще долетит не говоря о том же в каком порядке но именно вот это то есть quick отлично работает на проводной сети но кто пользуется проводной сети также ну то есть разработчики вот этого серверного куска кода в google и видимо очень не любят на самом деле мобилу потому что как бы quick это протокол кто реализован поверх эдипе в юзер спейси и на мобильных устройствах тоже визир спейси и вот по результатам измерений в нормальной ситуации то есть при работе там через беспроводную сеть реализация протокола крика 58 процентов времени проводит в андроиде в состоянии applications что это за состояние это состояние когда мы какие-то данные отправили и ждем подтверждения для сравнения на десктопе там было что-то около семи процентов то есть два и из кейса 1 беспроводная сеть 2 мобильное устройство кик оказывается работает либо не лучше тисе пи ле бы существенно хуже естественно это оказалось в рабочей группе и те посвященной quick ui естественно это отреагировал google реакция кукла была следующая вот это вот да мы посмеялись на самом деле это абсолютно логично почему потому что design quick на самом деле хотя вот мы уже говорим и внедрению продакшне то дичайший дичайший эксперимент помните о 7-ми уровневой модели соси кто ее помнит здесь помните вот уровне до физический канальные сетевой транспортной какая-то чушь какой-то бред и приложений да да вот уровень сеанса и представления вот это все значит она была разработана очень давно и как там его geely значит уровневой моделью quik-а является экспериментом по устранению уровневой систем системы сети он объединять себе шифрование транспорт надежную доставку дан все это не в уровневые структуре как такой комбайн где каждый компонент имеет доступ к и 5 любых других компонентов то есть цитируя одного из дизайнеров протокола quik-а кристиана это читается гейтом а значит одна из главных одно из главных преимуществ века с архитектурной точки зрения это отсутствие уровневой структуры у нас есть и окно ужин и full & flow control и шифрование и вся криптография полностью в одном транспорте и наши транспортные инновации подразумевает доступа всего этого там напрямую к сетевому и пи ай поэтому сетевую структуру в крике мы не хотим почему разговор про это вообще пошел в рабочей группе в последнее время дело в том что в начале марта другой дизайнер протокола quick именно эрик риск орла решил предложить на обсуждение вариант когда из крика убирается все шифрование вообще и просто значит не остается транспортной функции он работает поверх детей лес от детей леса tls поверх и т.п. в общем quick поверх таилась поверху т.п. откуда возникло такое предложение кстати риск орла написал там длинный документ ярик очень плодовитый человек но на написал на самом деле дней для того чтобы это стало стандартом это был предмет для обсуждения потому что в процессе дизайна архитектуры quik-а в процессе тестирования интера по и реализации возникло очень много проблем в основном связанных с такой штукой как поток 0 что такое поток 0 в крике это вот такая же идея как и сыч тебе тут у нас есть одно соединение внутри него у нас есть несколько multiplexer у им их потоков байт по дизайну quik-а напоминаю значит шифрование она обеспечивается тем же протоколом сделано это было следующим образом значит открывается поток номер ноль магический поток номер ноль который отвечает за там установление соединения хан шейкой значит и шифрование после чего это поток 0 шифруется и все остальные шифруются тоже с этим возникла достаточно много проблем они описаны перечислены в списке рассылки там 10 пунктов я не буду останавливаться и вот один упомянул мне он очень нравится проблема связана с потоком 0 1 из состоит в том что в случае если у нас идет потеря пакетов а нам нужно их перри посылать а значит на стороне сервера например уже соединение вроде как отмечено как шифрованное пакеты потеря нам нужно их при посылать имплементация может случайно шифровать пакеты еще раз случайно шифровать пакеты это тут ну то есть тут сложно как то это все комментировать кроме того чтобы рассказать как на самом деле все дизайне цито в крике в разработке крика использовать фактически такой эрзац и джоэл подхода это не то есть не то чтобы кто-то написал значит там железобетонный стандарт который там порой альтерации вы выпустили нет работа происходит следующим образом выпускается стандарт черновик стандарта номер пять список рассылки на миде на эти встречи три в год проходит обсуждение потом значит на хакатон of проходит реализация интернет testing собирается фидбэк google внедряет какие-то из изменений в хроме в собственной инфраструктуры анализирует последствия и дальше чекан комментируются нас повели получить появляется стандарт 6 сейчас напоминает 12 версия что здесь важно что во первых на вот но как бы минусы мы только что увидели есть плюсы в этом процессе на самом деле можно участвовать с фидбэк собирается со всех вовлечённых сторон если у вас геймер если вы думаете это что значит вы там в игровой индустрии можете просто взять по меня этом видите поставить quick все будет работать нет не будет но на данный момент вы можете на это повлиять вот есть фидбэк то есть на но можно может можно как то значит это все с этим работать и это на самом деле вот общая такая история что те кто пытается там думать как это применять да вот во первых фидбэк от вас ожидается то есть ну все хотят его видеть что более важно что google разрабатывает протокол там в него какие-то идеи вкладывает для своих целей компании которая занимается другими вещами если это допустим не совсем типичный bbb гейминг мобильное приложение и о то же самое вот компания которая этим занимается они не могут по умолчанию рассчитывает что протокол будет учитывать их интересы не только потому что они там никого не интересуют потому что никто не знает об этих интересов это кстати явка с повинной да то есть это опять же вопрос ко мне почему мы там как куратор labs мы не участвовали в разработке протоколы и 42 и не сказали никому праве расправьте pro reverse proxy на плод флорин джон x тоже там не участвовать в принципе в то есть пока в этом не участвует индустрия разработкой занимается google facebook какие то еще компании и академики значит в около и тефной значит тусовки слова академика но не похвальное она звучит как вот тот человек нам академик да это звучит как шизофреник или ипохондрик да вот он из академии потому что люди часто приходят без каких-то практических задач без понимания практических задач но вписывает туда потому что это самая потому что таким образом проще на конечно на прежде на работать например вот в этом конечно нужно участвовать и вариантов других нет возвращаясь к вику и так протокол реализован визерс пенсия на мобильных устройствах проводит реализовано визир спейси давайте поговорим об этом как у нас вообще было был устроен транспорт до того как начали придумывать и ки как он устроен сейчас продакшен есть протокол tcp если мы говорим про веб в протоколе теперь такая штука как тройное рукопожатие значит сян сян ок она нужно это нужно для целого ряда вещей чтобы не позволять использовать сервер для атак на других чтобы успешнее фильтровать определенные атаки на протокол цепи такие как syn flood в протоколе есть вот тройное рукопожатие только после того как три сегмента тройного рукопожатие прошли у нас начинается посылка данных при этом вот тут 4 действия из них три происходит в ядре происходит они до дна достаточно эффективно а визир space уже попадает только данные когда сомнению установлена ситуации с криком все это счастье ну тут звёздочки стоят потому что там терминологии не совсем ясен стенок да вот но по сути это тот же самый конце переехавший только весь полностью визит space то есть если летит 20 мегабит флуда если раньше там в тисе пи их можно было бы работать ведре синку коми теперь нужно обрабатывать везет спейси то есть они пролетают весь все ядро и там через все контекст свечи их нужно значит да там дальше как-то поддерживать почему сделано так почему как бы quick это протокол юзер space автотранспортной казалось бы самое место ему где-то вот на системном уровне потому что опять же это интерес к угла ну и других участников рабочей группы они не хотят они хотят видеть новый протокол внедренным они не хотят ждать пока все операционные системы в округе обновятся если он реализован визир спейси его можно уже использовать сейчас то что нужно будет потратить очень много ресурсов в 1 стороне сервера для гугла это не проблема вот где-то было хорошее высказывание про то что чтобы решить там большинство проблем с перформансов на бэг-энде современного интернета нужно было просто половину серверов конфисковать лучше три четверти вот и тогда как бы но это не не лишено какого-то здравого смысла потому что действительно google на такие мелочи он не разменивается вот это буквальная цитата из рассылки квиках где проходила вот обсуждение как раз на о том что протокол планируется к реализации в юзер спейси да вот это буквальная цитата мы хотим деплоить quick на любую машину без поддержки операционной системы и если у кого будут проблемы с перформансом то они унесут это все в ядро крик уже настолько развесистой что носить это в ядро с шифрованием совсем страшновато но как бы рабочая группа тоже на эту тему особо не запаривается причем тот же самый подходит как в клайн сайте где но и могу поверить до могу понять тот же подход используется в сервис сойдя quick теоретически наверное в этом случае действительно стоило бы уносить в ядро но опять же работа над этим не ведется а когда она будет закончена я боюсь мы все уже в седыми будем потому что ну как я не планирую жить вечно и когда это произойдет не очень понятно значит говоря про ядро linux нельзя не упомянуть что что 1 одним из главных поинтов в значит клика было то что он по верху легковесного протоколы и дптр и благодаря этому значит работает более эффективно более бы были быстрый и так далее вообще зачем нам сципион большой громоздкий вот тоже другая ссылка на bitch марки выясняется что отправка и и т.п. дата грамм в линуксе дороже чем отправки типе поток причем существенно дороже заметно дороже там есть два главных момента дать много момент есть 2 главных момента первое это лука по таблиц маршрутизации занимает больше времени в случае депре датаграммы второе эта штука под названием лорд сегмента флот в тисе пи мы поток можем загрузить мы не обязаны его сегментировать по сегментам на на цпу в то время как видите у нас только датаграммы нас нет потока в данный момент разработчики ядра пытаются думают что с этим делать но по большому счету данный момент тисе пи работает на посылке больших данных не влезающих в один пакет эффективнее чем gdp на котором основан quick вот это кстати опять же цитата из уже там сотрудников google а значит я в частности тоже задавала этот вопрос и вот был ответ что это то есть мы можем просто винить linux говорить что но я винда под windows он не так все плохо но нет утверждается что на любой платформе на который google deeply in quick есть проблема с повышенной стоимостью с точки зрения странного процессор отправки детей пакетов против себе поток то есть это не просто linux это абсолютно общий подход что приводит нас к одной простой мысли хватит говорить про quick достаточно уже растоптали его хватит одна идея которая нужно вынести отсюда это то что перед внедрением любого нового протокола вместо старого еще два против вич типе 1.1 quick вместо тисе пи и шифрование dns ipv6 вместо ipv4 первое что нужно сделать перед принятием решений уткой на продакшен это естественно бенчмаркинг не верьте никому кто будет говорить что протокол можно просто поменяется работает включил нажал кнопку все нет никогда такого не будет и не было никогда и не будет будущем и никто не будет этого гарантирует поэтому только benchmark естественно что если вы этого не сделаете вы развернёте его то конечно гарантию вам никто не предоставит кстати про пиво 6 дело в том что времена ipv6 когда он разрабатывалась протокол разрабатывались как-то более прямолинейно да то есть без без и джейл технологий но их эта опция в интернете все равно занял очень большой существенное время и на данный момент все еще продолжается и все еще висит на уровне порядка десяти двадцати процентов случае превышать причем в зависимости от страны потому что в россии еще ниже на пути внедрение першит было решено очень много проблем кто значит такое happy айбол значит happy айбол сета протокол тоже являющаяся стандартом выпущено мая те не протокол хорошо подход тоже заключается в том что есть было очень много проблем связанных соединениями першить что пользователи жаловались ты берешь значит закрываешь ноутбук выходишь из дома где у тебя и степи вы 6 приходишь в кафе открываешь ipv6 там нет ничего не работает потому что кэше браузера каши операционные системы все это продолжает смотреть его ipv6 локальные связанности там нет было был придуман подход под названием happy айбол если в течение там 3 десятых примерно секунды мы не нашли превышать connectivity никакой не смогли соединиться мы фалби чем ся на ipv4 костыль но работает вроде бы почти всегда но возникают какие-то misty постоянно возникает мистические проблемы с реализацией частности одна из самых популярных проблем было почему-то с айпадами которая из-за превышать 24 обратно переключались существенно медленнее чем 0 3 секунды существенно секунды минут даже в какой-то момент было безумное предложение на один с 9 мая техи в праге что давайте значит х5 болт будет в каждой сети значит пасиз лагуна централизованный сервер если у него проблемы чего-нибудь отправлять ну собирать как бы syslog со всех устройств подключенных это конечно безумен никто на это не согласился на это просто показатель того что проблема достаточно много другие проблемы связаны это борьба с разной молитве с activity потому что локальные сети в ipv6 это 64 да это очень много адресов которые там атакующий может начать перебирать их нужно вовремя агрегировать и вот это все этим нужно как заниматься и все должно быть реализовано в результате мы все равно получили проблемы с внедрением который не только выражаются в том что кто-то ipv6 медленно внедряет нет его начали отключать обратно обратно переходить в айпи в 4 потому что когда и и так тяжело было менеджмента обосновать преимущество перехода но когда еще включили пользователи из-за этого начинают жаловаться это сразу все нет и этот такой пример когда даже протокол который разработан был с как бы с видом на адоб сын все равно вызывает дичайшая проблема с внедрением которое выражается в головомойки техническому департаменту представьте что произойдёт при внедрении протоколов которые на такой дом не столь были рассчитаны другой пример на эту тему это dns sick я не буду просить вас поднять руки чтобы узнать каково но есть то что знаю что ни у кого нет а а ipv6 за мель его его dobson с одной стороны растет с другой стороны с ним есть проблем но он хотя бы идет начиная с начала с конца прошлого года одобрен один из sico в мире замедлился и пошел в обратном вот его это это это на этом графике мы видим ежедневно и ежедневное количество интернет-пользователей по замерам и пине clubs использующую резольвер и которое вы лидируют денисик здесь очень четко виден down тренд вот он стартует вот после того пика последнего значит пепе этот пик от октябре 2017 года в 2016 года протокол который имеет один язык есть цель и есть правильные задачи да но он он его его его развертывание фактически остановилось и и по и пошёл какой-то обратный процесс который еще предстоит расследовать откуда он взялся вообще с денисом очень много проблем в рабочей группе денисов сейчас 3 рукав три председателя 15 черновиков что называется в полете то есть они готовятся к выходу из стандарта dns научились частности передавать поверх всего поверх типе он работал давно вот но еще нужно как бы людям показать как это правильно делать он и его начали пускать поверх tls а поверх и чеpез поверг века все это выглядело совершенно замечательно пока люди не начали это реализовывать и у них не начала болеть в пятой точке опять же в марте вот тут есть ссылка разработчики up and dns привезли презентацию под названием день с кем верблюд dns сколь на сколько еще мы можем нагрузить этого верблюда прежде чем очередная хворостин к сломает ему хребет это общий подход к тому как мы видим сейчас дизайн то есть фича добавляется фич очень много они друг с другом интерферирует по-разному и не всегда предсказуемым образом и не всегда реализовали зации понятно и и авторы реализации понимаются эти возможные по точке интерференции внедрение каждый такой новый фичи реализация внедрение production этот еще одна . это еще набор точек отказов в каждом месте где происходит такая интерференция без бенчмарка без мониторинга никуда почему важно участвовать во всем этом процессе потому что стандарт и те же все это все-таки стандарт есть вот такая хорошая статистика это сроки разработки различных версий протоколы шифрования slt л.с. обратите внимание до что versio не рование соседи начинается с номера 2 потому что там версии 0.9 1.0 никогда не были выпущены в продакшн они были более дырявый чем netscape мог себе позволить выпустить поэтому история началась протоколы ссср 2.0 который разрабатывался год потом xl 3.0 разрабатывался один год потом tls 1.0 разрабатывался три года 1 . 17 лет 1.2 разрабатывался два года потому что мне такие большие изменения были но последняя версия протокол тела с выпущена в марте этого года 27 черновик кстати разрабатывалась 10 лет в соответствующей рабочей группе в тот момент над тем была большая паника потому что выяснилось что tls 1.3 ломает очень многое из кейсов в частности финансовых организаций с их мониторингом и firewall me но изменить это придя уже на стадии где-то черновик от 18 не смогли даже такие крупные компании как united states банк они ничего не успели с этим сделать потому что когда ты приходишь на вечеринку к моменту когда всем уже вы раздают счет ты не можешь ожидать что к тебе отнесутся с пониманием поэтому если в каком-то протоколе это опять же вопрос квебеку если в каком-то протоколе есть будут фичи вы появляются фичи которая вам не подходят единственным вариантом является во время это отследить его время в это вмешаться потому что в противном случае но так и будет вы выпущенный придется строить костыли вокруг этого это собственно и есть три вывода из всего этого процесса 1 как я говорил внедрение нового протокола это не просто в конфигурации что-то подкрутить это расписанный план внедрения оценка целесообразности с обязательными бенчмарками как в реальности это все себя поведет пункт номер два протокола не инопланетянами разрабатываются они не даны нам свыше в этом процессе можно нужно участвовать потому что за вас никто ваши из кейсы продвигать не будет и третье действительно feeder нужен но самое главное что google google не злой да он просто преследовать свои собственные цели у нее нет задачи помочь вам разрабатывать протокол для вас и это можете сделать только вы поэтому в общем случае внедрение чего-то нового взамен чего то старого не смотря сколько там хвалебных статей в блогах не было начинается с того что необходимо внедриться него просто дипломантов процесс дизайна этого протокола посмотреть как она работает только после этого принимать взвешенное решение на этом все здесь мои контакты они в слайдах есть я думаю я их уберу потому что выводы здесь важнее спасибо вопросы да если кто пропустил через час в аудитории 1.5 если кому интересны можем поговорить про реальные из кейсы для внедрения вот всего того о чем мы говорили вот обсудить зачем куда как и какие проблемы могут возникнуть то есть через час 1.5 аудитория митапов приходите спасибо за доклад было интересно можете пускать а почему лука пока таблица маршрутов для людей пакетов дороже чем длитесь и пик то есть казалось бы то есть они же еще одну и туже инфу насколько я помню можете посмотреть там насколько я помню данные о выбираем а маршруте они в ядре они на них есть ссылка из данных и соединений насколько я помню а в египет просто так как понятие соединения нет то в каждом на каждой отдельной программы происходит отдельный lookup который не обновляется не кэшируется никак нет никого буфера который бы хранил там эту информацию от лука происходит на каждой каждый каждый пакет да да потому что еще раз да вот нет понятия тисе пи пакет есть понятие 10 сегменты тисе пи поток рот также нет понятий dippy пакет есть понятию деда программа разница небольшая но любой сетевой инженер devops и socks так далее который хоть раз сталкивался с штукой под названием мсс clamping хорошо понимает что это вещи разное вот это как раз хороший пример того когда это стреляет в ногу на реальным продакшне то спасибо за доклад собственно вопрос quick по нему так хорошо проехались смотрите недавно была история с memcache амплификация и собственно поднимался вопрос о том что в принципе все паблики египте протоколы это большая боль и по сути огромная дыра для того чтобы вы fits и ровать атаки с огромным коэффициентом собственно ну и для вас я так понимаю любой эдипе протокол амплифицируемой это проблема для компании как то вы будете в это вмешиваться с этим делать оттуда не надо там очень смешная история помните я говорил что у гугла много ресурсов значит что такое проблем амплификации значит действительно и типе протокол сам по себе не имеет понятия хан шейка поэтому мы можем так как в интернете никто как бы не знает что ты кот и можно отправить пакет с поддельными по адресам источника и самое главное в интернете абсолютное большинство серверов так уж получилось выдает данные то есть клиент запрашивает данные там в объеме стольких-то байта сервер отвечает намного больше да но будет намного больше в результате если мы иметь значит подделываем айпи адрес источника отправляем запрос от имени жертва 60 байт да то есть мы потратили 60 байт свои со своего собственного свои собственные полосы а в жертву улетела 1500 байт ответа то есть мы имея свои ресурсы можем их умножить там несколько раз 10 такое невозможно потому что там происходит аутентификация ну то есть сложно применять такой термин но это действительно аутентификация и пи адреса источников в ходе тренировок рукопожатия есть такой механизм как sind cookies который предотвращает в тисе пи разговор с поддельными ip-адресами источника не в общем случае но в абсолютном большинстве частных так вот видите такого нет поэтому каждый отдельный разработчик и т.п. протокол в основан на книге обязаны самостоятельно позаботиться об этой фигне самостоятельно придумать собственный контент который значит будет задача этого can шейка чтобы сервер не увеличивал запросы то есть если пользователь отправил там 1000 buy the client отправил готова сервер отправил 1000 байт так вот как отель как это побеждено в крике это кстати это предложение именно гугла сервер не может отсылать в сторону клиента больше чем клиенты этого послал ему то есть изначальный запрос клиента минимальный размер 1200 байт из которых очень большая доля это просто 0 и то есть клиент просто отсылает пустой пакет если раньше у нас был сен сегмент 60 байт то теперь нас 1200 байт очень удобно в двадцать раз больше конечно там основные проблемы это именно обработкой пакета и так далее но просто от вот просто хан шейк в квики он автоматически вырастает вот пример на эту величину но амплификация проблем нет я ответил на вопрос спасибо в луже где не слышал а я думал на самом деле перед началом доклада двери закрыть вот что никто не это самое но что поделать советую снотворное сегодня принять или пиво наверное будет лучше спать быть какой нет он безумно перспективную google разрабатывает но но он выйдет стандарт он выйдет в качестве стандарта может не в ноябре 18 может ноябре девятнадцатого года он будет стандартам это ну нет вопросов нет у него есть проблемы да вот а планируется что они решатся хорошо когда эти проблемы начинают во время обсуждать да потому что на них тогда начинает отвечать не не всегда отвечают над опять же это человеческие взаимоотношения в них приходится участвовать много ест ужасных протоколов мы их используем повседневно это не вопрос о том что люди которые разрабатывают плохие протокол плохой и действительно разрабатывает профессионалы просто не для всех из кейсов подходит для гугла подходит а что не подходит для вас ну так вы об этом не сказали здравствуйте носил значит за доклад было очень интересным вот у меня такой вопрос если я читал что-то не слишком желтая скажем так то по моему основная мотивация к реализации quik-а поверх египте было примерно в том что если вы сделать поверх айпэда пример никакое существующие сетевое оборудование какой-то новый трафик power хотел сказать не будет тем не менее вот этот история реализация конкурента tcp overview т.п. выглядит как такой глобальный костыль мирового масштаба соответственно если какой-то вообще шанс возможность там более-менее перенести это на реализацию поверх и непосредственно и ходит ли разговоры такие не знаю ланах нет дело в том что и с протоколом который работает поверх юге пита проблемы есть а уж переводите его куда-то с другой стороны зачем опять же отъедите не такие большие накладные расходы все то что о чем мы говорили до вот вся эта все эти проблемы значит с перформансом над огромным да но если опуститься на уровень ниже они никуда не пропадут а нет может быть усугубятся юдифи это очень тонкий протокол это просто вот то есть набор портов к api все заменять ставить это на с как бы сразу то есть убирать значит этот огромный протокол нет такого разговора не идет потому что смысла нет и опять же вот очень много проблем в интернете есть действительно с тем что по умолчанию на многих устройствах или этом сетевые администраторы так сделали в общем tcp работает с большим приоритетом и db лимитируется а все остальное просто не работают вот и вот тут хотя бы то есть и хотя на играх иди пену хотя бы работаю работать будет может быть уже после релиза когда-нибудь пойдут такие разговоры сейчас их нет ну я не слышал не помня себя артема а можно нубский вопрос почему нельзя едут из возраста а почему нельзя сделать и сипит 20 вот теперь ему тридцать лет его проблемы известны медленно разгоняется hal лица скорость при 1 шляпки так ну там есть у нас но они все давно почему нет 2/2 знаешь главную проблему музыки в россии на главная проблема музыки в россии значит чем состоит вот в общем главная проблема теперь 20 что и вот но ты не написал я те тоже не написал понимаешь есть такой замечательный протокол кстати вот его там нет потому что я решил граждан хороший я решила бы не упоминать в таком контексте протокол mtp мультик много- путевой тисе пи вот это то есть это хорошая мультиплексирование поверх тисе пи с использованием одновременном несколько интерфейсов то есть это звучит так несколько интерфейсов это звучит как что-то относящееся дата-центром у любого мобильного телефона минимум два интерфейса это вайфая 4 же так вот м 5 себе позволяет использовать оба параллельно обращаясь к одному и тому же ресурсу вот это как бы один из как бы но это такое донг протокола тисе пи он не пытается решить которой он добавляет функциональность опять же имеется большая рабочая группа много людей которые работают над новой генерации ты все знаешь как вот любит разработчики все выбросить и написать заново вот это quick вот а чтобы что-то там перед переделав тисе пи нет то ли запросы то ли желающих его исполнять я ответил на вопрос отлично да здравствуйте интересный доклад у меня вот такой вопрос одной из как бы причин критики крика была то что на revision of user моде ну то есть медленно разверните а та же группа она не думала что на период tls часто же в user моде и реализован они же не собирается dls ядро засовывать да вообще собираются засунули уже dls dls по панели были на linux в ядро там есть поддержка тылы там мало алгоритмов и это неполноценно это реализация tls а вопрос в том что на самом деле претензии вот к этому я спешно не в основном заключается именно вот хан шейки вот хотя бы хорошей бы вынести в ядро а все поверх но действительно будет работать как как как примерно раньше единственное что там случае понятно если сети ведет себя плохо то еще и вечер transmit это все та же будет ходить через users главная претензия это к тому что вот но моя личная хорошо то к тому что весь спущенный трафик будет ходить значит чего вместе с песней процесс вот в текущем linux мудрее там без до пдк из коробки это ну не очень хорошая история не то можно еще один вопрос задать вот имена и расследовать и количество трафика крика она вообще знаете растет или падает там в год а то здесь радикальная история века в интернете больше чем и привод 6 но вот ему нас тоже есть просто данные что раньше это шкурами сейчас только работать настоящим что это сейчас кроме работает в настоящем и там раньше монетка бы осталась она с вероятностью 05 приключалось на крик сейчас он на этом 09 делать потому что если вы работать без прокси с большой долей вероятности мы почта и dogs будет работать по клику значит да здесь действительно парадоксальной историей и в шесть уже 20 лет внедряется но многих сетях я слышал про оценки вплоть до 60 процентов трафика это quick который еще нет его нет стандарте но его подлежит google chrome поэтому chrome с гуглом действительно общается через quik опять же здесь еще дело в том что у quik-а нет нормальной свободной производительную реализации да он поддерживает значит есть есть он там сервер написанный на go который поддерживает там все фичи протокола но как бы работает она не с той скоростью которой мы можем ожидать то есть он не тепло и ца он теплицы мало кем кроме гугла ногу плоховато действительно чтобы 1 1 день график растет до трафик растет трафик растет потому что чем дальше тем больше google продолжает ее внедрять и продолжает его форсировать вот это это ездила просто спасибо большое к сожалению у нас не осталось больше времени на вопросе скажите пожалуйста вы можете выделить какой-то один который вам понравился больше всего и не запомнилось так один вопрос один вопрос а мне он понравился вот вопрос который был про амплификации вот он лично очень понравился поэтому вот всем спасибо"
}