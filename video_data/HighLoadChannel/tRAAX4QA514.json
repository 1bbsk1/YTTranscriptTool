{
  "video_id": "tRAAX4QA514",
  "channel": "HighLoadChannel",
  "title": "Как развивать библиотеку компонентов, не ломая ее / Артур Удалов (Mail.Ru Group)",
  "views": 1474,
  "duration": 2747,
  "published": "2018-08-16T04:58:51-07:00",
  "text": "меня зовут артур я front in der занимаясь разработкой fontaine до в почте mail.ru и у нас почте есть библиотека визуальных компонентов помимо библиотеки визуальных компонентов у нас еще есть 15 даже больше разработчиков самой почте а также у нас разработчики из облака и других проектов также использовать нашу библиотеку и вся эта толпа разработчиков может поучаствовать в развитии библиотеки с любой человек даже стажер которого вчера на ниле может взять и сделать свой вклад и сегодня расскажу о том как нам удалось сделать так что мы эту библиотеку не ломаем но сначала небольшая предыстория почему это вообще проблема для нас стало важный я пришел работать в почту где-то год назад и моей первой задачей стало верстка вот этой странице здесь 4 ссылочки картинка немножко текста в общем работы максимум на один день первая трудность которой я столкнулся это то что у фронтэнда почты нету genova репозитории где бы можно было добавить эту страницу все весь контент почты разбит на так называемые микро сервисы каждый микро сервиса это что-то вроде отдельного сайта у которого есть отдельный url в почту он встраивается через айфрейм или через просто как отдельная страница и естественно там есть свой репозиторий и со системы сборки и так далее так далее знакомьтесь это страница удаление пользователя сама высоко нагруженная страница в том микро сервисе который достался мне собственно сюда и мне нужно было добавить новую страницу ну проблема не очень серьезная на следующий день я показывай начальнику с виртуальной страницы он говорит молодец сверстал только если на проблема у нас там есть библиотека визуальных компонентов нужно ее обновить там поменялся внешний вид и мобильная версия добавилось очень хочется это все внедрить хорошо обновим первую неделю страница удаление пользователя выглядел как то так через неделю я пофиксил java script ошибки и страница стала выглядеть так еще через неделю наконец фиксили все и выкатили фича production но мне стало интересно как так мы фича которую делать один день не из-за какой-то библиотеки и делаем 2 недель а то и больше и можно подумать что проблема в том что просто давно не обновляли библиотеку на как я уже сказал мы используем микро сервисы и такая ситуация случается часто делали пищу в отдельном проекте а потом на год не забыли разработчик который я делал уже уволился следующий разработчик приходит обновляет библиотеку и две недели не понимает что делать че вообще происходит он того не обязательно ждать долго для того чтобы библиотека сломалась может это может произойти в любой момент какой нибудь например новый стажёр взял не подумал поправил css и это попало каким-то образом мастер обновляемся у нас сломалось мы не понимаем почему это происходит более того какие то ошибки и вообще сразу не видно так как не разработчик не тестировщик не будет при каждом обновлении библиотеки прокликивать все приложение все компоненты все внутренние состояния чтобы проверить что бага нету в итоге все это привело к тому что разработчики тупо стали бояться вносить какие-либо изменения например если нужно изменить внешний вид мы вместо того чтобы поправить нужны css мы добавляем культ новый модификатор пишем туда новые стили которые дублируют старые просто ради того чтобы ничего не дай бог не сломать естественно стало интересно кто тут злодей который постоянно ломает нам библиотеку и почему же так происходит 1 идея которое приходит голову это то что у нас в библиотеке тупо нету тестов но посмотрев на наш прогон нет влаги можно заметить что у нас почти 400 постоянно проходящих тестов они проверяются при каждом magic вести вроде бы неплохо возможно дело в том как сами тесты эти вообще пишется для того чтобы с этим разобраться нужно немножко поглубже копнуть то как мы разрабатываем библиотеку дело в том что по сути мы ее отдельно как таковой не разрабатываем чтобы в большинстве случаев когда разработчик носят какие-то изменения в библиотеку он просто скачиваете оба репозитория из через mpm link он скачивает их через interlink он подключает их и ведёт разработку над своей фичей может вести ее за неделю может вести месяц и в конце концов он накапливает огромный мир шире квест в котором он по надела всяких изменений библиотеку и бедным integer этой библиотеке должен в сжатые сроки все это treeview ведь слить мастер естественного ум тренера есть еще другие заботы помимо того чтобы поддерживать эту библиотеку все разработчики у нас в равной степени могут вызывать библиотеку а мы тренерстве занимается не только развитием библиотеки также участвовать свои микро сервисы и участвуют в их разработке чтобы естественно в этот момент нам очень важно как именно мы пишем тесты как вообще мы все это разрабатываем капов еще я выяснил что мы используем три основные методологии разработки я в 1 методологии разработки это тест гривен devil самая малочисленная это когда разработчик сначала пишет тесты потом код более популярной методологии разработки у нас это потом напишем тесты driving это штука пользуется много больше популярности потому что любой момент может прийти менеджер говорит что понимает зачем вообще писать тесты на кате свечу надо мы ее уже полгода делали и так далее так далее сами разработчикам самим разработчикам тоже иногда лень писать тесты но все бы это было невозможно если бы у нас не было следующий методологий это пофиг дрейвен review то есть наши умным тренера самого начала не было никакой тактики и он ее не придерживался к счастью так получилось что теперь мы тренер библиотеки это я и я вам расскажу о том не только о том какие инструменты мы использовали для исправления всех ti проблемно также о том как это все потом отслеживать на review еще одна штука которая хотелось бы обратить внимание это то из чего состоит современная библиотека во первых здесь современные ряд библиотеки и в них примерно от двадцати пяти процентов до сорока процентов это css код в нашей библиотеке мы уже превысили даже показатель java script а у нас css а больше чем java скрипта и как мы тестируем это css никак еще интересно как мы пишем наши css а есть тоже интересно и мы естественно используем бэм у нас в омске наименование классов всякими подчеркиваний черточками так далее затем мы взяли оттуда файловую структуру и мы даже используем энди сборщик до того как мы переписали сценарий активы пока и вроде бы мы типа мазались будем полностью насколько это возможно но все равно у нас есть отступление от б.м. когда нам это удобно например мы переопределяем стиле на уровне проекта и потом при обновлении библиотеки и меняется структура какими-то с из классов или какие-то пропадают в киты появляется и наши стили в проектах больше не работает мерзко разваливается дальше мы также и в самой библиотеки тоже иногда некоторыми блоками влияем на другие блоки и это же приводит к плачевным результатам когда блоки появляется какая-то неожиданной комбинации все разваливается и наконец мы также нарушаем бмв той части где он не позволяет нам нашим блоком влиять на внешнее окружение например есть какие-то отступы заданную компонентов и нам хочется их менять не меняется обновляем библиотеку все разваливается краткий итог по тому что удалось обнаружить во первых мы не по сути не занимаемся разработкой библиотеки мы разрабатываем сервисы в рамках нее что-то получается сделать библиотекой во вторых у нас огромный мир she квесты накапливаться по той же причине которые в которых неизбежно к плюс много багов и regular и очень тяжело их отловить уж там речи уже а тестах не не заходит наконец у нас субъективные требования к тестам и кому то можно писать тесты кому-то нужно писать тесты и так далее то есть нет какой-то четкой четких требований к тому сколько должно быть тестов и нас вообще не это тестов хотя это большая часть нашего кода и сам это css не совсем такой каким должен быть естественно рано или поздно такие проблемы хочется решать и мы начали эти решать проблемы не уже решили начали мы с css а как тестировать css ну есть много разных прикольных способов но самые адекватные это цитирование скриншотами то есть мы с крыш этим наши компоненты сохраняем это как эталон потом при каждом изменении сравниваем и талон с актуальным состоянием если есть различие значит что-то сломалось есть много инструментов для того чтобы это автоматизировать мы остановили свой выбор на box tops во-первых потому что у него простейшая конфигурация по сути это просто джейсон конфиг который мы передаем придаем url и в котором надо сходить сфоткать и название файла как это все сохранить затем backstab работает напрямую с хромом что делает намеки на какую-то производительность ну что нет посредника вроде selenium и еще чего-нибудь которая будет запросы по сети гонять для управления браузером и и backstab а очень простая инфраструктура которая позволяет легко запустить это все локально опять таки нет усиление у сервера который требует чтобы он был бинарная зависимость по сути нужны в драйверы для того чтобы конкретными браузерами управлять что же бинарной зависимости и могут еще в некоторых системах появляться бинарной зависимости для сравнения скриншотов типа график с magica случае с диктофона это все написанную джейси единственная зависимость которая нужна бинарная это chrome и наконец backstab а есть красивые визуально отчеты в котором можно легко понять в чем что чем разница между двумя скриншоты между эталонами актуальном состоянии и все эти отчеты генерируется локально окей мы выбрали систему для тестирования скриншотами но остается вопрос что мы ей будем скриншоте так как как я раньше сказал нас разработка библиотеки и ведется в рамках микро сервисов и никакого вообще нет ничего что можно было бы пощупать мне tivoli за скриншоте в этой библиотеке это проблема сама по себе даже если мы не используем скриншоты и с этой проблемой прекрасно справляется такой инструмент как текст rebug rex сторибук выглядит как будто документация на самом деле это первую очередь инструмент для разработки и тестирования react компонентов с помощью стрельбу к их разрабатывать намного проще чем их разрабатывать в отдельном проекте так как нам чтобы увидеть все состояния наших компонентов нужно будет прокликивать наше приложение и заходить какие то где то вообще может например у нас оплата карты быть и чтобы увидеть это состояние как выглядит компоненты на оплачивать читали вот это позволяет нам легко быстро разрабатывать ряд компоненты еще одна особенность стрельбу к это тестирование то что с помощью него можно легко тестировать а если мы возьмем урал к нашему стрельбу к добавим между слышал просить незнакомых frank хтмл то весь графический интерфейс исчезнет и у нас появляется идеальная цель для того чтобы снять скриншот то есть наше состояние нашего компонента просто фотка целиком всю страницу и нас есть и талон и более того у стрельбу к есть api который позволяет пробежаться по всем компонентам и для каждого состояния сгенерировать сценарий автоматически то есть в итоге получается что разработчику для того чтобы использовать тестирование скриншотами вообще ничего не надо делать все что ему нужно делать это использовать этот бук разрабатывать ну понятно которым проще чем в проекте и таким образом мы убиваем сразу двух зайцев начать во-первых мы которых мы разрабатываем собственно библиотеку отдельный от проектов чего мы добивались и автоматически имеем тестирование css а ну наконец-то story book есть ли фигища плагинов которые позволяют настроить его под свой вкус превратить его в крутую документацию или как-то по-хитрому перебирать свойства компонентов оптимизация добавить и так далее все это очень полезно следующая вещь которой с которой неизбежно сталкиваемся при тестировании скриншотами то что на разных системах скриншоты выглядит по-разному вы за шрифтов или еще за чего-нибудь даже банально разные версии chrome и могут выдавать разные скриншоты из каких-то внутренних изменений отрисовки эти мелочи очень сильно раздражает и для этого есть тоже простое решение мы просто берем засовываем всю нашу горелку скриншотов докер докер-контейнер вместе с backstab им вместе с хромом и всем остальным что там нам нужно и тот же самый образ потом мы используем и всей и гоняем наши и тесты там же то есть вы начиная с этого уверены в том что прогнав локально тест это же самый результат был будет и на все и еще не было ни одного случая когда это было не так и наконец мы этот докер-образ запушили docker hub потому что там нет ничего секретного backstab и хром вы можете скачать его и использовать у себя естественно скриншот они всемогущие некоторые вещи на них не видны например и не видно как разработчик использует в своем проекте например он может опять как я говорил взятие переопределить на месяца на какие-то стили никита название классов на вещи туда стиле и перебродить стиле на уровне проекта затем мы меняем что-то структуре нашего компонента и все разваливается по той же самый ну с этим можно бороться можно просто поговорить с разработчиками попросить их так не делать но это обычно не работает можно использовать технические средства для этого например css модулей или аналог какой-нибудь мы например используя гсс у себя который также генерирует нам уникальные названия с таким образом мы изолируем свой css от css и проектов по той же самой причине мы не пробрасываем классными style и который попадает в api наших компонентов чтобы у разработчика не было соблазна кастомизировать наш компонент внутри проекта вместо того чтобы сделать эту библиотеки и естественно мы не разрешаем задавать отступаю компонентов чтобы не возникало тех же тех самых проблемы которых и говорю ранее и то же самое со свойством дисплей которая также может поломать проект если изменится свойство дисплей с блочным онлайновый фиг знает что произойдет мерзким проекта что проверять на review как это все добро если мы видим что вершинка есть которой нам прислали изменился css можете нитей сможете просто верстка то это должно также затронуть скриншоты обязательно если css изменился нового скриншоты не появилось это верный признак того что эти изменения мы в следующий раз обязательно потеряем при этом у нас могут не только добавляться новые скриншоты но и меняться или вообще удаляться таких ситуаций нужно по максимуму избегать мышцы каждая такая ситуация это риск того что вместо тех изменений которые мы ожидаем увидеть мы также про толкаем изменение которых вы не ожидали с этим можно бороться так что понижать уменьшать количество изменений умершие квесте до самого минимума пока не дойдем до кого-то товарного что можно реально спрогнозировать и увидите это на скриншотах и никогда не надо забывать о том что человеческий глаз не идеален и лучше операция на отчеты backstab а где он показывает это все более наглядно чем например в системе контроля версий где можно там ползунком подвигать это сравнивать скриншотам также не стоит сохранять откровенно плохие скриншоты когда что-то завер стали это все выглядит так себе и мы зачем-то это сохраняем как эталон нужно сначала соглас валит с дизайнерами с собой желательно тоже а потом уже сохранять как эталон потому что потом это нужно будет поддерживать если что-то изменится на фиг знает что произойдёт конец все те требования которые мы не можем автоматизировать типа наличие вот ступа или который мы не хотим автоматизировать нужно их на review проверять прям по списку ссм разобрались как тестировать java-script во-первых можно попробовать его вообще не тестировать например каких-то java script ошибок можно избежать даже с помощью вы пока если сборка собирается значит как минимум что пути которые мы указываем наши файлы зависимости они я не существует а это вполне может быть не так случае если мы разрабатываем библиотеку и как библиотеку в рамках проекта с тем же самым неплохо справляется и linker который уже делать чуть более сложные проверки наконец есть flow typescript которая собственно для этого и предназначены для того чтобы делать статический анализ проверять сверять типы и пытаться избежать runtime ошибок таким образом но в любом случае рано или поздно тесты все-таки придется писать потому что не все что не все у нас видно на скриншотах не все отлавливает и slynt стоит вопрос на что писать в первую очередь потому что разработчики ленивы много тестов покрыть все они готовы поэтому нужно разобраться что покрывать тестами с этой точки зрения нас интересует две характеристики 1 это сложность кода насколько чем сложнее код тем проще мне допустить ошибку тем более ценно покрытие тестами этого кода а с другой стороны у нас есть зависимости и чем больше зависимости нашем коде тем сложнее его покрыть тайскими больше нужно мог хоть и так далее соответственно вот по этим двум характеристикам можно выделить четыре вида кода самый простой случай просто простой код которым нет не особо большого количества зависимости и сам по себе он простой не совершить ошибку такой код можно покрыть тестами можно не покрыть на ваше усмотрение так как покрытие вот риме трудно код который котором легко совершить ошибку на нем мало зависимости естественно нужно покрывать тестами это делается в первую очередь так как профит от этого будет максимальным связующий код покрыть будет сложно и особого смысла нет так как он простой в нем можно глазами понять меня его что сломали мы что-то или нет и более того если мы используем статический анализ вроде там так скрипта то здесь нам может помочь ему typescript может быть просто отель скрипт охватили того чтобы проверить связующий код но код который остальной который остается естественно покрыть тест им очень сложно но очень хочется потому что нем по-прежнему легко совершить ошибку но он еще и много зависимости содержит ну соответственно мы просто и фактором этот код выделяя отдельно связующий код который мы не покрываем тестами но он легкий и сложный код который мы покрываем тестом еще одна вещь про которых хотелось бы сказать vario тестах это ты сбрил 9 мин я не стану спорить с теми кто пытался так работаете в него не получилось потому что сам сталкивался с тем что бывает разрабатываешь пишешь компонент написал мне вот с ты квартиры это не знаю неделю схему был очень сложным и потом выясняется что тебе этот компонент вовсе не нужен был и ты удаляешь его вместе с тестами это обидно и то есть не всегда разработка через тестирование работает но те кто никогда не пробовали так разрабатывать он стоит на рекомендую попробовать потому что это меняет то как мы воспринимаем код с точки зрения тестирования например поднимите руку тот кто смог сходом найти ошибку в этом тесте ну вот например на review прислали такой код надо проверить работает он нет ладно не буду тратить много времени это код на джасти приборке для тестирования реактора наиболее подходящим и ошибка в том что jesty нельзя укладывать тесты друг друга для того чтобы группировать нужно использовать специальный блок диск райп при этом как реагирует justice ли он видит такой тест он просто прогоняет его и говорит что все хорошо все тесты пройденный он просто не видит что внутри батоны есть еще какой-то тест и код не исполняется случае если я веду разработку пдд то такую ошибку мне найти легко так как я написал тест ожидает что он упадет а он не падает так как коды он не падает хотя кода который должен цитировать еще даже не написано вот естественно этой же ошибки можно было бы избежать если мы просто когда мы написали тест проверить что он реально работает закомментировали чё то там в коде но это важно понимать то есть таких кейсов можно придумать очень много и все они будут странные она review такую опечатку заметить очень тяжело потому что теста нормальный типовой трудно здесь что-то заметить ну и последнее о чем хотелось бы поговорить про тесты это проверяешь я к нему отношусь просто если у нас код на сто процентов покрыт тестами это значит что на каких-то данных у нас нет runtime ошибок и это не так тяжело сделайте то есть покрыть код тестами на сто процентов для этого же теста собственно писать не надо можно взять любой какой нибудь компонент от рендерить его полностью и у нас будет стопроцентный кавери следовал сделано в тестах и задачи мы выполним то есть у нас не будет runtime ошибок на вот этих входных данных естественно это не значит нужно этим ограничиться но добиться этого не так сложно более того если мы например выставим метрику колледжа не в сто процентов 99 то например если мы удалим какой-нибудь код который был покрыт тестами то у нас эта метрика сразу упадет хотя разработчик вроде ничего плохого не сделал ну если кот действительно не нужен вот поэтому это как раз те требования которые к тестам стоит предъявлять и это несложно сделать нужно просто взять и написать тест как ревеле тесто на самом деле примерно так же как и скриншоты если мы видим что что-то изменилось java script и при этом скриншотах ничего не видно из того что изменилось то это значит что должны быть изменениях тестах соответствующие то есть каждое изменение каждой строчке изменений должна также отражаться в тестах и естественно так как мы используем комплексное тестирование нас еще из стерни скриншотами мы не будем тестировать то что на скриншотах видно все что не видно нужно покрыть тестами ну и если мы например все-таки из колледжа исключаем какие-то файлы то нужно следить чтобы в эти файлы не попадала чего того что стоит покрыть тестами что мы имеем в итоге во-первых мы используем комплексное тестирование для всего кода мы тестируем не только java script ну и css во-вторых мы теперь реально занимаемся разработкой библиотеки отдельно от проектов с помощью story book с помощью него же мы по сути бесплатно получаем тестирование скриншотами и и тратим минимум времени на тесты и наконец мы пишем правильный css и знаем как все это рибери естественно есть еще и нерешенные проблемы которые у нас остается и которые мы хотим решить во-первых так как мы используем backstab мы привязаны к хрому и старые браузеры у нас мне поле зрения но благодаря тому что у нас этот сценарий генерируется автоматически по сути мы не привязаны ни к backstab и не к чему-либо еще мы можем любой момент поменять инструменты тестирования любой другой следующая проблема то что у нас уже порядка 400 с лишним скриншотов библиотеки и это прогоняется порядка 10 минут и страшно подумать что будет когда их станет два раза больше тогда разработка действительно будет замедляться при этом backstab не предлагает из коробки никакого решения по распараллеливание как есть усилению гляди я например где мы можем взять и знаете у нас есть 200 машин 400 машин для всех об одной на каждый скриншот взять ее на каждый прогнать по одному скриншоту за одну минуту или меньше и мы хотим расширить этот подход не только использовать не только в библиотеке но и самих микро сервисах добавляю туда также сторибук потому что как я сказал разрабатывать компоненты стрельбу кен проще чем в проекте особенно катоффа компоненты нужно сделать его много и также мы хотим прогонять скриншоты в проектах при обновлении библиотеки и при изменении библиотеки и так далее вопросы 1 раз неплохой соответственно есть два вопроса первый относительно как вы прокидывайте доступ и каким способом вот ступа и мы в принципе делаем по моему то есть у нас на уровне проекта есть какие то можно сказать блоки ну это условно по-моему мы пишем на реакции там и не пахнет но мы просто создаем какие-то деваки на вершину туда классы проект проекте и задаем монстры это оборачиваете ваши блоки и элементы если по моему группу да ну есть еще вариант у нас коллеги мы где о том что на библиотеку используем не только в почте но еще и других проектах и других ребят другие подходы они расставляют прям них я специальный компонент space где они расставляют отступ и каким-то фиксированным набором которых с дизайнерами согласовали просто вставляет им так удобней вот может быть и нам тоже так она не станет удобнее тут самое главное добиться обратной совместимости это хорошо решается отсутствием отступов в самих компонентах а уж снаружи как они делать это уже дело проекта и второй вопрос вот мне не особо понятно докладе было мне кажется упущен момент так вы к этому пришли до сих про например что вначале был демчик при малоценное сани затем bim html что в этом использовать в качестве падшего не zatarra копытом клиентский from work типа эдема и потом у вас стал react а вот момент как у вас из дома стал react вот я не особо ловил как вы к этому пришли сам процесс интересен это очень новую на самом деле почему мы к этому пришли деньги почему почему в принципе понятно зачем пришли но во-первых ты уже рассказал то что нас было очень много проблем upper вас бомбу неправильной во вторых но в принципе есть специалисты по бы мне так много и есть есть причина интересный на сам процесс то есть как вы так вот взяли то есть у вас например есть там много там предложение микро сервисов которые крутятся на баме а потом мы взяли так как по щелчку и на react а вот сам процесс к как вы это сделали . не могли сказать бизнесу так смотрите мы короче год переписываем всю нашу рыбу на react вот и потом я прихожу на high lab я рассказываю как мы это сделали вот забыл какой то такой процесс долгий но я не знаю в общем про это мне интересно услышать на ну в общем как примерно все было как я уже сказал пример так как я рассказал мы столкнулись с проблемами когда по сути обновление библиотеки занимает больше времени чем написание этих компонентов с нуля и мы какой-то момент нашли хорошую пищу и все вместе несколькими разработчики нашли хороший такие длинные фичи франко которых мы могли бы этим заняться и собственно занялись создав оверхенд и всю инфраструктуру настроили backstab и все остальное затем базовые компоненты какие то дальше все уже по накатанным же на большее количество разработчиков а так как у нас используется микро сервисы то есть в принципе в разных мика сервисах может быть абсолютно разных так технологий соответственно это все прозрачно внедряется все остальные то есть соответственно какое-то время поддерживали две библиотеки и постепенно с новыми фичами переписывали блоки в рамках новых фич на новую библиотеку да все спасибо спасибо интересный оклад скрыть а сколько у вас компонентов и сколько планируются компонентов в библиотеке и вот отступы по которым сказали там всякие то есть там чисто компонента или туда планируется еще затащить вот эти все детали как форму там компонентов даже располагаться там как формируется вот и сколько человек поддерживает эту библиотеку мы пока что продолжаем придерживаться диалоги о том что у нас любой разработчик может поддерживать эту библиотеку то есть все разработчики которые уже используют библиотеку своих никто сервис они делают свои какой-то минимальный но вклад в развитие библиотеки это по поводу сколько человек по поводу наличия так понимаю ни каких то не визуальных компонентов он хелперов с версткой или еще что-нибудь люксовые какие штуки такие компоненты тоже есть даже тоже их тестируем скриншотами на каких-то примерах штоком 1 было забыл сам забыл в каком по сколько компонентов но больше десятину меньше 20 где так а планируется сколько до планируется примерно также потому что куда ни как не везде почти всегда нужны сразу все компоненты просто эти компоненты постепенно развиваются например у нас больше были сначала компоненты для десктопа а потом мы добавили мобильную версию это затронул все компоненты и как бы у нас больше разработка идет вот так вот по слоям чем по именно по числу компонента а получается библиотек и не только для веба или деле нет вот эти стопы для мобильной версии у нас просто все наши приложения которыми сейчас новое дело вниз через panther то есть ни одна время открывательный мобильники и на на десктопе за счет атаки на ермилов до что нативная нет нативно у нас отдельная команда не используя как вот все если разрабатывает получается какие-то request приходит да какой объем request сколько вообще разработчиков использует ее то есть не получается что там времени хватает на то чтобы request все эти оправить смотреть что там все работает все хорошо или благодаря тестом это получается будет быстро ну когда мир шик вас маленький небольшой то по 39 его не просто не несложно и по сути все что мы делаем не прост какие-то субъективные проверки то на гладкость и шелковистость и шелковистость у нас есть четкий чек-листа что вот у нас и должны быть скриншоты если должны быть новые состоянии добавлены из листа и если внешний вид изменился и так далее то есть это когда это все делается четко по списку придерживать какой-то тактики то это делать легко скотта review есть уже не так важен code review важен для того чтобы все это поддерживать потому что если за этим не следить рано или поздно мы скатимся все равно катом что были у нас есть тесты но они не работает вот поэтому в адекватности всего с равно нужен должен ли человек просто ему много всяких инструментов помогает анализаторы коды еще провале использовать там был typescript с ленцой slynt вот еще есть анализатор который уже скомпилированный код проверяет не провали о нет не пробуй а что за анализатор аналайзером квентину в которой уже с бандоу план был уходит смотрит что там нормально после того как особо нет спасибо спасибо за доклад вот вопрос по поводу code review правильно ли я понял что reviewer видит изменения в коде и видят два скриншота да и он видит div между ними то есть ну желательно чтобы он не видел дефо желательно смотрим что это новый скриншот иногда удаленный скриншот но когда он видит деф на тогда уже обычно разговариваем конкретно про бочкам например бывает такая ситуация что поменяли скриншот но на самом деле можно было просто чуть-чуть поправить пример например все что там и отступ и например вынесли из компонента наружу и мы просто берём эти вот это проставляем в наших пример использования store буки и сохраняем таким образом скриншоты таким образом мы убеждаемся что действительно то что было раньше можно сделать вот вот так вот понятно то есть скриншот но эта часть к метода до эту картинку вы храните в системе контроля версий да и какой у вас размер к небольшой пока это не стало проблема но есть решение которое позволяет вынести бинарные файлы в отдельные отдельные хранилища по сути не связаны с бетон но с ранением контроля версий истории изменений просто 12 к не стало проблемой нас хватит 400 скриншотов но почему-то приобретали скачивается быстро никаких этим равен нет мы сейчас сделаем что-то подобное дает этот вопрос насколько все это вырастет спасибо спасибо за доклад у меня вопрос всегда интересовало как решается без использования какого-нибудь framework и бэм бэм такая задача как и как вы ее решили когда есть например тема светлая тема темная и у вас у всех элементов есть два варианта когда они отображаются например на тёмном фоне кнопки белые на белом фоне кнопки черные вы нарушаете в этих случаях б мы или как ты вот как это решаете но это решается у нас не с помощью верстки как бы странно это ни звучало вообще том как мы работаем с темами это вообще отдельная история для отдельного нами доклада ну что мы первых мы используем с с он там предоставляет разные веселые возможности вроде можно просто вместо css описать функции которые что-то принимает из так называемой темы какие-то перемены и потом в зависимости от значения этих переменных что-то менять более того мы в какой-то момент к нам от дизайнеров решил запрос чтобы мы дали им возможность управлять переменными и мы вынесли вообще эти все темы в отдельные репозитории которым дизайн тире на двигун и typescript пишет нам css вот из лесу 4 окт просто в зависимости от переменных полностью пробегается и там какие-то классы представляются типа того ну вот я случае если у нас например есть контейнер каком-то в котором должно стать все святая должны быть инвестированы в другой фон просто можем это покинуть через контекст и реактор ские где можем просто через сквозь несколько элементов посмотреть наверх и спросить а внутри чего я нахожусь в зависимости от этого компонент просто возьмет и применит стиле из другой темы спасибо спасибо за доклад вот вы упомянули что у вас используется код к вырежу пожал скрипту они думали вы сделать код говоришь по css а ведь сейчас уже есть некоторые инструменты типа в новых версиях рома и там был полон какой-то инструмент по куртка виджет с с а ну у нас тут будет небольшая проблема связана с тем что у нас нету css а мы пишем все на джесси наша сцена 6 лет жесткий те не знаю сработает нет но вообще очень интересная идея там чтобы автоматизировать вот эту проверку то есть вместо чтобы рука не смотреть какие скриншоты каких скриншотов не хватает что там изменил разработчик а можно было бы просто посчитать какие классы применились на странице и прикольные идеи но не нашим ближайшим плане спасибо ну там вижу человек привет спасибо за доклад большое у меня такой вопрос по поводу стопроцентного покрытия я из доклада если я правильно понял то у вас есть и бывают и простые но сильно связаны и компоненты вот которые в принципе как вы утверждаете ну не обязательно покрывать полностью тестами вот тогда как можно добиться стопроцентного покрытия но да этот я сам себе противоречу но я там упомянул то что можно конечно исключить из колледжа те файлы которые мы считаем что не нужно покрывать тестами потом классами следить что мы их покрыли а можно просто взять и от рендерить этот код один разок добиться проступок каверзы ради кавираджа это может быть намного проще чем отслеживать глазами что там происходит и по сути мы так и делаем и просто берем баунти msi наши компоненты которые связывают которые все и так видно на скриншотах что там происходит отдельные их части протестированы юнит тестами простых mountain смотрим что они в принципе не содержат runtime ошибок никаких все ну а так можно принципе исключить их но мы так не делаем нам такой дом то есть это говоришь на mount именно да спасибо"
}