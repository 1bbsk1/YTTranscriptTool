{
  "video_id": "ffKYzfHYcog",
  "channel": "HighLoadChannel",
  "title": "Protobuf и buf: блеск, нищета и импортозамещение / Эдгар Сипки",
  "views": 946,
  "duration": 2228,
  "published": "2024-10-29T02:48:13-07:00",
  "text": "Эдгар расскажет нам про прото бав баф блеск Нищета и импортозамещение Приветствуем всем привет сегодня мы поговорим про тул сеет для работы с прото и в целом как вообще нам нужно готовить прото потому что как выяснилось далеко все компании могут с ним корректно работать а меня зовут Эдгар А работаю на го уже больше 6 лет принимал активное участие в большинстве стартапов э связанных с криптовалютами и также сейчас дис лоцируются азон финтех потрясающая компания Всем рекомендую поговорить с ними Вот давайте сначала обсудим о чём мы в целом будем с вами говорить а первое о чём мы обсудим - это конечно оригинальный тул сеет А и В целом все его проблемы с которыми нам приходится сталкиваться и которые до сих пор не решаются второе это сам ба что зачем он это потрясающий инструмент на самом деле который решит большинство ваших проблем с которыми вы сталкивались третий - это сам проблемы бафа потому что ну не бывает инструментов у которых всё отлично так или иначе он какие-то проблемы Тоже имеет и соответственно финальное это то как мы решили справиться с его основными проблемами Давайте Поднимите руки кто вообще зна что отлично Все знают значит можем идти дальше так традиционный тул сеет Ну для работы с прота и нам всё что нужно это в целом наш язык это сам компилятор и плагины к нему думаю все уже давным-давно работали с этим и примерно понимают О чём идёт речь а одна из самых важных проблем он не обновлялся технологически не обновлялся практически никак с момента своего создания какой был оригинальный способ формирования команд конфигурации и в целом сам акумулятор всё лишь оптимизировали слегка улучшалось внутренне но с фичами он не дополнял никакими А и одно из самых важных проблем - Это конечно же неко сетное описание AP которое очень часто можно может происходить в разных компаниях и командах то есть хороший пример когда мы видим с вами вотк примеру вот такую ситуацию А это кстати примерный код с реального проекта Когда у нас ребята в разной стилистике пишут кто-то использует Калке кто-то Snake Cas и в целом кто то горазд И если мы здесь заметим конечно это дополняет когнитивную сложность и с этим достаточно тяжело работать особенно когда проект из двух методов превращается в 1.000 второй пример тоже классический классическая ситуация а тоже классические пример того как мы работали с реквест мы видим как человек выкидывал Сначала один пример потом этот же человек додумывать другую в другой стилистики для другого запроса Естественно с этим тяжело тоже работать потому что а это тяжело Элементарно запоминать что вот это одно и тоже смысл и так далее третий пример кстати очень интересная ситуация оказывается с точки зрения прота наименование идентично Он это даже не примеры на двух проектах это validate который один из самых популярных пакетов сейчас для работы с прота для валидации запросов и Google App который имеет огромнейшее количество типов хелперов и так далее для работы с ошко и конечно же то как мы сейчас все работаем Я вчера даже для практики и интереса опрашивал ребят коллег кто Каким образом переносит зависимости в свой проект и немалая часть просто буквально руками переносит прото контракты из гитхаба к себе в репо другие используют git Sub модули чтобы это автоматизировать хоть как-то Давайте честно это далеко не самый удобный способ Работать со всем этим все мы испытываем определённые сложности работы со всем этим Хорошо А А это кстати то как обычно заполняется наши проекты Мы обычно создаём определённые директорию называем Party в него закидываем vender и там прописываем все зависимости и буквально переносим руками либо же опять-таки СБ модулями следующая проблема касается Breaking change с одной стороны прото создавался как формат в котором очень тяжело будет сломать обратную зависимость Однако объективно это всё равно очень легко реализовать особенно если человек не Элементарно не читал документацию вот возьмём хороший пример это тоже пример с реальной практики У нас вот ситуация у нас есть сервис а он отвечает за авторизацию у него ручка принимает юзернейм пароль и к нам пришёл бизнес и сказал а мы хотим чтобы пользователь мог бы авторизоваться дальше ещё и дополнительно через почтовый ящик Окей мы выкатили пост закинули это заржали есть предположение что произойдёт Поднимите руки кто примерно знает почему всё сломается Вот только три человека И вот на ревью это все пропустили никто не понял эту деталь и в итоге у нас продакшн сломался пользователи потеряли возможность авторизоваться мы в спешке это всё откаты И основная сложность в м смотрите если мы заметим у на есть нумерация полей тот момент когда мы выкатили энд с новой версии месседж старый месседж будет Неправильно парси у нас происходит какая ситуация сначала прилетает юзернейм и пароль от клиента юзернейм так как индекс совпадает с тем распарсить в юзернейм но так как он oneof пассворд распарсить во второй индекс который вместо имейла в итоге мы в логах видели что человек имел почтовый ящик в виде пароля всё А пароль у человека был пустой мы не могли никак его авторизовать это было Адово тяжело де бажи пока мы не заметили эту ситуацию быстренько не откатились онива плагинов тоже очень частая ситуация возьмёмся К примеру кейсы А у меня плагин для генерации локально стоит 1228 у меня есть коллега у него плагин стоит там для генерации 126 и при перег нерациональные изменений Хотя в реальности эти изменения представляют из себя буквально изменения одной строчки в сгенерирован файле просто меняется название версии это объективно всех тоже бесит а это ещё Если не учитывать что мы не гарантируем сохранность поведения потому что мы не знаем никогда Что произошло в изменённом плагине дальше мы поговорили об основных проблемах тусе Теперь давайте поговорим о том как их решает один из современ инструментов который устроил в мире прота такой же фурор как в сё время там Cake это буф в целом экосистема буф уже больше стала к примеру сейчас он представляет из себя полноценный линтер для Порто файлов он может автоматически за вас проверять поломку обратной совместимости а он же является и компилятором вместо protos они реализовали свой собственный внутренний компилятор он же представляет пакетный менеджер форматер Сейчас он ещё предоставляет альтернативу для работы с вебок gway можно использовать их buff Connect ваши хендлер jpc хендлер смогут автоматически работать с ве бом Вот давайте сначала обсудим Что такое linter Поднимите руки вообще кто знает что такое linter Зачем он нужен отлично Не нужно объяснять вот возьмём пример классический это то что мы как раз таки ранее обсуждали и Давайте натравил на него линтер посмотрим что из него что с ним будет Мы видим огромное количество ошибок Это только примерно треть из того что мы там из того что я там видел Вот и Давайте просто поочерёдно начнём первое конечно что самое важное - это версионирование если мы вернёмся в оригинальную версию Мы видим что мы не указывали никакого версионирование и давайте так все знают Зачем нужно версионирование руку ну здесь уже не все подняли руку Так что на всякий случай уточню нам нужно иметь возможность безшовна деплоить и сохранять обратную совместимость с клиентом особенно в условиях когда он не может автоматически обновиться вместе с вами таким образом Когда нам нужно поддерживать Две версии А в рамках одного там Бинар мы можем использовать разные версии протоков хорошо следующие пункты касались уже документации Ну объективно стало Явне что происходит Мы стали понимать почему там примеру а не возвращал ничего в своём потому что здесь Было уже описано то что он возвращает в мете мы описали кейсы по поводу потому что бизне фича и когда мы всё это расписали тестировщики лично нас благодарили потому что им стало гораздо проще со всем этим работать и с и клиентские разработчики тоже очень проще им стал гораздо проще интегрироваться хорошо но есть интересный момент смотрите видите было у нас тело возврата Google про астал A response если мы посмотрим A response не содержит никаких полей и это особенность нте идея в том что он рекомендует как и Google как и многие крупные компании никогда не использовать Google проб MT и вместо него создавать отдельный месседж который не будет содержать никаких полей а потому что это попросту расширяемой в тот самый момент как только вы используете про boof empt и к примеру к примеру вы в ручке авторизации решили возвращать тела пользователя вы полностью сломаете обратную совместимость нужно делать новую ручку иначе поте попросту на клиентской стороне попросту не смог с этим работать а единственный вариант - это кратки создавать пустое пустое тело у месседж в тот момент как только мы решили добавить юзера мы просто добавляем новое тело ой новое Поле в котором держим как раз таки тело юзера это решит э это решит эту проблему а следующий момент касательно тоже опять-таки описание того почему у нас oneof используется то есть мы Элементарно начинаем документировать наш код нам становится проще со всем этим взаимодействовать А и соответственно как интеграция с нами происходит гораздо проще а настраивается линтер на самом деле невероятно Просто мы просто перечисляем все правила которые нам нужны их там несколько десятков а я для наглядности тут небольшой список ввёл но в реальности Вы можете просто один одной строчкой врубить всё там кажется это правило называется All и он просто включит все остальные правила вместе взятые вот а Breaking change это простой пример того как мы можем проверять с поломкой обратной совместимости А идея В чём тот пример который я вам показывал его На ревю многие не заметили попросту спокойно все поставили approve мы замёрзли и сломали продакшн А вот конкретно с этим примером мы решаем эту ситуацию А видите ли мы можем сравнивать наши текущие протоком в нашей фиче ветки либо там бак ветки А с теми с той ветко с которой в которой находится оригинальный прота к примеру в данном случае там Main команда просто была взята из оригинального из оригинально документации А и мы сможем полностью быть уверенным что либо мы сломали Либо мы не сломали но что делать в случае если нам нужно ломать вс-таки у нас бывают ситуации когда там ну без вариантов бизнес хочет изменений и эта логика никак не укладывается в то которую мы реализовали он нас обяжет создать вторую директорию в этой второй директории перенести логику с V1 и переделать всё под Новый стандарт и соответственно в рамках вашего Бинар Вы должны поддерживать теперь и V1 и V2 в реальных проектах достаточно делается просто чаще всего просто происходит с V1 V2 и так далее но тем не менее это гораздо проще и лучше чем просто ломать обратную совместимость и ломать клиент А вот Это пример пример команды как мы используем это в сие У нас есть возможность очень легко настраивать команду для проверки к примеру здесь в CH tget просто подсовывает нужная ветка с которой мы хотим сравнивать Если я правильно помню это подсовывает из ветки в который отправлен был requ таким образом вот эта ситуация когда мы поломали прок автоматически исчезает мы уже больше не сможем повторить эту ошибку потому что на уровне c это всё полностью автоматизировано так давайте теперь обсудим плагин все знают что такое плагин для protoc так краткое объяснение А сам Протек - Это чисто исключительный компилятор но ему нужны плагины для того чтобы генерировать код нужный вам код а под разные языки под разные фреймворки технологии и так далее То есть к примеру для Гош это два основных это prot Go и prot gop они вдвоём генерируют как раз таки нужный нам код для запуска grpc сервера и jpc генерации jpc клиента устанавливаются они достаточно легко так как сами эти плагины чаще всего написаны на гошкевич нужную версию А И вот во что это начинает превращаться в какой-то момент А это очень лёгкий вариант того как собирали раньше и многие до сих пор собирают код фактически у нас получается ситуация что мы всё передаём через флаги и это супер простой тривиальный пример в котором мы не перечисляем большое количество конфигураций А вот у нас просто В текущей же директории происходит но в случае если мы начинаем расширяться у нас получается огромная простыня и вот к примеру Это точно такой же всё ещё простой пример но мы добавляем плагины уже для других языков и ситуация примерно становится такой становится гораздо хуже потому что мы с каждым либо с каждым новым плагином либо расширением конфигурации старого плагина который мы уже использовали будем получать огромную простыню текста и с одной стороны да можно сказать что это всё можно просто закинуть в Shell скрипт и спокойно использовать Однако Вот это гораздо проще всё-таки мы здесь указываем нужные нам плагины и самое интересное мы можем указать нужную нам версию плагина что позволяет решить Ту самую проблему при которой люди генерируют разными версиями и объективно ял файл гораздо проще редактировать и настраивать чем вот такую огромную Баш команду конфигурации всё передаётся достаточно просто через те те же самые параметры просто они теперь в ял формате А и есть ещё отдельное уточнение касательно того что это лка а buf имеет возможность удалённо генерировать ваш код э отправляя к себе на сервера то есть в случае если вы используете локальный плагин вы просто его берёте генерить код и получаете код а в случае если вы используете удалённый плагин вы отправляете ваши прото контракты на сервера bufa А там сгенерируйте это всё за счёт Ну скорее всего какой-нибудь докер контейнер всё это кормится и мы получаем на выходе в качестве результата как раз таки нужные нам прото паа они возвращают всё это по jpc происходит пример того что мы просто добавляем дополнительные плагины всё добавляется очень легко и просто самая интересная для меня часть - это конечно пакетный менеджер Потому что если всё остальное можно ещё как-то переживать стараться там на ревю проверять и так далее то без пакетного менеджера объективно живётся очень тяжело и как раз-таки буф это тоже очень хорошо решает и там история какая А мы всё что должны сделать это просто прописать нужный нам адрес до самого пакета вызвать дальше команду bu Mod update и всё у нас буквально все нужные нам пакеты скачиваются локально причём все популярные IDE и Visual Studio CDE и новский имеют плагин для работы с буфо и автоматически идт и подсветка и настройка всего что вам нужно Вы просто дальше Работаете С прото файлами также хорошо Как работаете с той же Гошей А дальше Вот можно спокойно использовать все нужные вам пакеты не перенося их к вам в директорию мы спокойно примеру здесь использовали Tip Money который достался нам от Гугла и поставили примеру валидация правила для там авторизационное пример естественно просто для того чтобы показать как мы можем это использовать хорошо а в целом buf он достаточно большой и у него большая экосистема всё это настраивается По большей части в трёх конфигурационных файлов Бул содержит конфигурации там для правила Линн наименований и так далее думаю всем понятно позволяет на генерировать всё что нам нужно и buw это конфигурация которая позволяет разделять отдельные окружение друг от друга и дополнительно расширять конфигурации пейсами А И вот тут конечно же встаёт важный вопрос является ли буф буф нашим грам С одной стороны да он действительно решает огромное количество проблем которые у нас возникают при работе с PC но одновременно с этим у него есть другие проблемы которые он заводит вместе с этим а вот смотрите Ну мы обсудили сейчас с вами оригинальный лсе так обсудили дальше что такое буф Зачем И про что А теперь давайте обсудим про сами проблемы буффа первая ситуация - Это гми идея В чём почему-то ребята из буф решили сделать свой отдельный гит хостинг на домене buff Build закинули туда контракты которые вы хотите расшарить как пакеты и вам нужно заливать к ним на хостинг не на привычный тот же github или gitlab и так далее Это создаёт ряд проблем потому что этот гит хостинг имеет а в виде профайло в виде прото контракта то есть вроде все те же поля все те же конфигурации для подтягивания и так далее но всё передаётся в виде gpc месед и в чём проблема они имели несколько прецедентов в разных ситуациях и пример один из самых важных прецедентов они Удали комит в какой-то момент мы пришли Ну к нам пришёл новый разработчик он попытался подтянуть проект и получилась ситуация что комита попросту нет А мы вначале не могли понять Как это произошло подумали Может на нашей стороне что-то не то залезли к ним в в их хостинг стали изучать и поняли что они просто почистили коммиты просто дроп всё что было и мы так и не поняли причину произошедшего но тем не менее осадочек остался потому что мы не знаем как они могут продолжить свою деятельность и как они могут ли они повторить в целом эту ситуацию в будущем но это создаёт определённые риски как ни крути а вторая проблема касательно удалённой генерации А помните в начале Я когда о нём говорил с одной стороны действительно потрясающий инструмент потому что вам локально практически больше ничего не надо ставить вы просто поставили буф и спокойно генерить всё что вам нужно но одновременно с этим вы передаёте данные к ним на сервера и если мы используем удалённую генерацию мы передаём наши протоком к ним они на своей стороне могут сделать с ним всё что они захотят сгенерировать и соответственно выслать обратно и здесь вот сложность в том что Да можно с одной стороны сказать что э тот же github имеет доступ ко всем нашим контрактам и так далее но github не имел следующей нашей проблемы а а именно блокировка в РФ github нас не банил а буф банил и вот это основная проблема потому что с учётом первого прецедента по поводу удаления коммитов с учётом ситуации с тем что они могут а получать доступ к вашим внутренним контрактам причём все мы кто использует прото знаем что часто gpc используется для межсерверный коммуникации чаще всего по крайней мере и соответственно мы получается предоставляем полный доступ к нашей внутренней системе причём ещё с комментариями в коде с описанием того как это работать может и так далее к ним на сервера и это всё в условиях когда они нас могут в любой момент забанить и дропнуть в случае необходимости наши данные что опять-таки они могут в целом сделать учитывая прошлые прецеденты мы стали думать что с этим делать и об этом как раз таки на следующая наш Следующий пункт Как тамм справиться с бедой в целом если обсудить основные проблемы с которыми мы столкнулись они не так критичны и страшны как наверное самый последний потому что он создаёт очень высокий риск особенно при работе внутренних в больших компаниях потому что фактически Мы открываем доступ к внутренней системе внешним пользователям внешне сторонней компания имеется в виду причём ещё той которая нас фактически забанила первое что мы конечно же решили сделать это просто запустить VPN прокси это можно было сделать легко быстро заработало сразу как все мы уже наверняка уже делаем но недостаток такого подхода мы это не можем сделать в C А как это происходило мы когда это всё потестить прото контракты в сие и дальше Просто go get подтягиваем их к библиотеке и вот тут когда мы подошли к нашим псам сказали о том что нам нужно просунуть там просю до сервиса который сри в иностранный регион ещё и тот регион нас забанил в ту компанию которая нас забанил это всё создало комичная ситуация они просто на посмеялись в лицо и сказали Мы этого делать не будем хорошо этот вариант пришлось отме и мы дальше стали разбираться что можем сделать А мы стали искать альтернативы нашли хорошую альтернативу прол тоже отличный инструмент фактически он обладает всем тем же функционалом что обладает буф только местами хуже конечно Он очень был хорошим вариантом Но есть одна большая проблема они ещё в ВОМ дем году когда буф стал зарождаться стали сами рекомендовать посмотреть его сторону а где-то в марте 2 вго полностью его заблокировали Ой ну заархивировать свой репозиторий в гитхабе и сейчас можно первую строчку что увидеть это то что их сами они сами же рекомендуют забить и не париться идти уже смотреть в сторону буффа потому что буф решит все ваши проблемы которые решал раньше стали сидеть и думать поводу вот с велосипедом конечно же было интересно потому что с одной стороны можно написать всё с нуля кто не любит писать всё с нуля покрай мере я Тонь очень люблю плюс есть возможность адаптировать всё под свою компанию И если всё выйдет успешно можно попытаться это засоси недостаток это нужно писать всё с нуля чего тоже конечно не очень хочется потому что объём Работы слишком огромный ресурсы на разработку они вс-таки ограничены Тем более что у всех в команде были задачи определённые Продакшен для фича поэтому мы задумались об этом что это не очень хороший вариант Но мы стали по крайней мере в эту сторону копать Мы залезли в исходники буф и стали смотреть как он устроен и во-первых конечно нас удивило у них они используют очень большое количество велосипедов внутри себя а большое количество собственных библиотек и технологий но тем не менее с этим как-то всё равно можно было жить задумались про вариант форка Но форк тоже плохой вариант потому что в случае если мы форк нем мы должны обязательно как минимум всех в нашей компании переезжать на наш форк начать его использовать если это пройдёт успешно то уговаривать остальных это всё ну не тот процесс которым те хотелось бы заниматься мы сидели и долго думали о том что с этим всем делать и заметили исходники ф прота Помните я в начале говорил что буф взаимодействует со своим сервером через как раз таки jpc месседжи Мы заметили и это только примерно наверное десятая часть их прото контрактов у них их там чуть ли не сотня а стали активно изучать думать что со всем этим мы можем сделать и появилась интересная идея мы задумались над вариантом создать обратно совместимый сервер который будет работать с с их кли и притворяться соответственно им же и это должно было работать теоретически по крайней мере мы взяли протоком и начали с ними с ними экспериментировать первое что мы конечно же стали делать - это как мы вообще разбирались то как с этим всем взаимодействовать Мы сгенерирована в конфигурацию адрес нашего H 880 и Стали через их кли стучаться к себе на сервер с помощью тан буб потому что там есть ещё ряд нюансов получилось всё-таки Достучаться и мы просто логировать каждое сообщение что происходило в какой момент как только мы где-то ломались Мы попросту начинали редактировать В этом месте код в основном хардко Дели какие-то значения мы экспериментировали всё с Google App как раз таки и Потап разобрались что при подтягивании пакетов он использует сервиса и три сервиса и соответственно Каким образом всё это происходит в первую очередь в первую очередь он подтягивает информацию о том где находится сам пакет то есть помните Мы в Псах указываем адрес до пакета Однако это оказывается адрес не до самого пакета Это адрес до резол Вера который получает этот адрес узнаёт где реально находится пакет после того как он узнал где находится пакет он вернул нам эту информацию Мы с кли с этой информацие идёт в репозитории сес подтягивает Мета информацию о репозитории там deprecated кто own може имеем ли мы доступ к нему ещё куча куча других факторов хорошо Мы со всем этим разобрались тоже получили доступ Точно также мы захард Коди чтобы посмотреть что с этим будет м дальше мы взяли последний шаг использовали это Download сес самая сложная часть а фактически мы идём из нашего кли в Download Service уже скачиваем сами прото контракты изначально я думал что там просто будет не знаю каком-нибудь B 64 N кода файлики Но они там всё это шифровать передавали потом это всё нужно было разбирать проверять хэш суммы потому что ну их клип Потому что это всё проверяет нужно было делать полностью их алгоритм но в ходе реверс инжиниринга мы смогли разобраться что вот эти вот если три ручки реализовать то в целом наш сервер должен заработать как минимум основную нашу фичу которая нам всем вот реально нужна которая как раз таки заблокирована мы смогли получить дальше мы стали задуматься что с этим делать первый вариант конечно же было это реализовать сам хостинг как сделал это сам ба но задумались о том что компаниям в этом случае придётся взять и затягивать к себе ещё один гит хостинг вместе с гилам и подумали что это просто плохой вариант Тем более что мы не хотели наступать на ту же самую ошибку на которую наступил баф а именно на vender loing полный локин на нашем софте Мы подумали что можем с этим делать плюс написать это гораздо сложнее чем написать то что Мы в итоге написали второй вариант - это был git Проси мы получали запрос а по прото формате просто перенаправлять стали в git сервер экспериментировали в основном с гитхаба А и полученные пакеты в прото контракты возвращали в нужном формате для буф А через прото обратно клиенту А всё заработало недостаток А если про validate весит несколько мегабайт и с этим можно как-то спокойно работать то Google appice занял у нас пол гига в оперативке когда мы всё это попытались скачать то есть вариант оказался очень плохой а потому что есть достаточно большое количество крупных пакетов с которыми так легко не поработать а стали думать что с этим делать и использовали самый оптимальный сейчас вариант фактически Мы тоже делаем проксирование но уже на наш диск Мы через конфигурационные файлы скачиваем все нужные нам репозитории на диск А дальше при приходе запроса мы просто берём нужную версию с диска и возвращаем это на клиент А проблема в том что скорость проблему скорости Мы решили достаточно быстро но у этого варианта тоже есть недостатки но по крайней мере этот вариант работает оперативно он работает и мы можем работать с пакетами снова Что самое главное А вот теперь как можно со всем этим работать фактически изтех просто прокрут на диск и вытягивает с него Google АС возвращает вам на клиент и это сейчас должно уже по крайней мере теоретически работать Если кто-то сможет сейчас потестить и выйдут баги те сразу ищю вот а в целом это было достаточно просто реализовать с точки зрения кода потому что код объективно небольшой вышел Но вот именно заниматься реверсо инженерией была самой тяжёлой частью чтобы разбираться со всем этим А дальше Мы точно так же как работали делаем буф Mod update и всё работает то есть вам не придётся ни заменять кли ничего не заменять просто меняете урл а важная деталь вам нужно очистить кэш Если вы не очистите бу бусский кэш у вас это попросту не заработает а в целом мы сохранили кли функционал Вы можете также использовать буф как и использовали здесь никаких ограничений не оказалось и мы решили самую важную для нас проблему - это проблема пакетного менеджера Вы можете его спокойно теперь использовать в рамках РФ и Республики Беларусь Таким образом мы вернули основной функционал ради которого как бы ценился буф по крайней мере на текущий момент мы думаем что это самый оптимальный вариант из того что можем сделать сейчас у нас версия 0 как раз Как Закончим я его тегнул на 010 а он поддерживает пока что только package Man support То есть просто чисто пакетный менеджер А в следующем шаг мы будем поддерживать уже удалённую генерацию Но что самое важное для нас в отличие от буф мы не будем вас обязывать присылать к нам что-то на сервер что-то с этим делать хранить у нас пакеты свои какие-то зависимости генерировать У нас у нас будет полностью открытый docker файл вы сможете спокойно у себя открыть его запустить его во внутреннем контуре и таким образом спокойно в рамках своей компании использовать всё что вам нужно скачать нужные ваши вам пакеты генерировать через нужные вам версии плагинов всё будет отлично работать а можете просто запускать у себя и вопрос будет решён А сейчас что можно посмотреть его по этому QR коду говорю сразу кодовая база Ещё немного в сыром виде я его писал буквально в ппх Сейчас вы получите 404 это важная деталь потому что я его не открыл Так что давайте сейчас мы откроем его так так мы уверены в том что мы хотим открыть Мы совершенно уверены что мы хотим открыть Мы очень уверены что Хотим открыть СТО так кажется всё да Отлично Теперь он паблик то есть теперь вы можете е спокойно изучить очень буду рад если кто-то из вас решит нам помочь в настройках ит из Так что любые реквесты любые и будут только приветствовать в целом всё Вопросы Спасибо большое за доклад Так вопросы зал прошу Насколько это всё легально Ну если я правильно помню лицензию они на не должны подать 2 так до быть Спасибо ещ вопросы есть вопрос Вот я здесь Эдгар Спасибо за доклад ситуация такая как я понимаю сейчас разрабатывается на открытых началах есть вероятность того да что ну остановка может прекратиться по определённым причинам я ещ вопрос неза и Нако будет сложно подхватить если что ш проек жно чтобы ну всё что для неё критически важно да вы делаете хорошую вещь что мы работаем без ограничений Но нам нужно продолжать И при изменении например формата так как это реверс прокси то нам нужно будет как-то это поддержать и забрать себе код достаточно написан очень просто Тем более что сам проект достаточно маленький но вероятность того что его сейчас забросит достаточно низкий потому что нужен как минимум в наших внутренних задачах поэтому его развитие точно будет продолжаться Тем более что в случае если нам выдаст тоже Яндекс Гран как Open решению Мы точно продолжим его развитие А всё Да хотелось бы уточнить больше такое сари сделать То есть eip это сервер для буффа верно полный Да хорошо вот просто моя компания - это компания с очень скажем Так Закрытая инфраструктура условно говоря я могу скачать его себе поднять У себя в закрытом контуре дан Да да да просто нужно доме настраивать и готово конфигурационный файл всё есть в репозитории уже Угу хорошо ну мне больше како само хотело сделать Ладно всё благодарю Да Эдгар Большое спасибо за доклад А вот ты говорил что когда была реве инжениринг сервера там был реверс инжинеринг данло файлов и ты сказал что там было какое-то шифрование и вот я я там на самом деле говорил Просто перенервничал элементарно там была такая история с тем что они при возврате этих файлов генерирует хэш сумму создают отдельный файл манифест в него куча просто вот так подряд это Т файл куча подряд идт строчек с дайджеста и вот просто всё что было известно это то что это какой-то Файлик с Куча хэшей и что с этим делать нужно было разбираться потом Кстати когда кончил реверс инженерию они слегка изменили его и там они теперь добавили с помощью чего они шит А это пришлось немножко самому позици разбираться какой там используется алгоритм то есть они фактически формируют огромный Файлик манифест с кучей хш сум для каждого файла который есть в нужном пакете и нужно было как-то это всё понять и эмулировать то есть эмулировать их поведение такое же спасибо А если не видишь что они могут как бы Боро если они уже зати или как бы сам баф нам использовани ни могут например там сами Вот как раз именно шифровать ответы на уровне сервера если что-то подобное начнёт происходить то мы скорее всего начнём разрабатывать и свою кли Тем более что основу для кли мы уже заложили Мы задумываемся об этом просто основная проблема в том что заставить людей переезжать сфа к нам - это ну такое себе удовольствие Тем более что баф уже имеет всю экосистему инфраструктуру для работы но в случае опять-таки необходимости скорее всего Нам просто придётся потому что опять таки мы используем его в рамках внутренней компании Большое спасибо за доклад очень классный инструмент сам пользуюсь буфо до сих пор впм пользовался Надеюсь этим вопрос только один Рид Мишку напишите да спасибо я говорю я писал в ппх Так что очень много чего ещё сырое Спасибо за доклад вопрос вот такой ясно что утилита буф сама как вот оригинальная будет продолжать развиваться А уже есть ли какие-то у вас мысли идеи как догонять это со своей стороны но понятно что ещё сейчас не полная реализация но когда-нибудь она станет полнее Ну я правда услышал что вы уже собираетесь свою кличку пилить Ну то есть в случае необходимости мы просто заложили основу для того чтобы в случае чего можно было бы начать её разрабатывать но мы не планируем догонять задача этого софта было не в том чтобы догонять а в том чтобы адаптировать его под наши реалии то есть и это в целом Он решает вот как бы основную проблему Мы решили и значит всё как бы мы скорее всего просто будем до улучшать в случае появления дополнительных каких-либо ограничений будем дальше уже решать что делать вот так у нас есть вопрос из наших интернет слушателей вопрос очень интересный что будет а это будет если баф рано или поздно сломает обратную совместимость на уровне протокола будем оперативно это исправлять Я уже примерно понял как работает их кли я изучил практически всю кодовую базу которая внутри происходила особенно при загрузке пакетов а он местами конечно странный они используют много внутренних библиотек в пример тот же buf Connect с помощью которого Они общаются с но тем не менее в случае если они поломаю обратную совместимость Мы постараемся достаточно быстро её тоже исправить Спасибо И второй вопрос тесты добавишь Да коллеги ещё вопросы хорошо спасибо тебе большое за доклат Эдгар Спасибо Не уходи далеко тебе предстоят две вещи одна приятная и вторая очень прият первая ве Выбери лучший вопрос на твой взгляд вопрос насчёт того что кто-то заинтересовался в случае чего готов поддержать и взять себе на использование где-то вот в том конце зала его задавали так да да вот вот туда можно я просто ви походи подходи подходи подходи подходи дада да Коля Коля ты ты ты ты ты ты ты иди сюда Как говорится всё Знакомые лица так и теперь очень приятная часть - это подарок Лично тебе а О спасибо большое Эдгар сипкин Спасибо большое так если что буду очень рад если Вы распишите ищю какие-то если с с багами какими-то столкнётся и также если отправить реквест мы будем это оперативно ревью и очень активно развивать а мы будем рады если ты придёшь к нам ещё и ещё и ещё много раз с удовольствием"
}