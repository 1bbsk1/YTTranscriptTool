{
  "video_id": "Zd9w5csmbY0",
  "channel": "HighLoadChannel",
  "title": "Мониторинг как процесс, или Как перестать бояться и начать спать по ночам / Виталий Медведев",
  "views": 3858,
  "duration": 3123,
  "published": "2022-03-21T14:09:03-07:00",
  "text": "меня зовут виталий медведев я работы своих технологий сегодня я хочу вам ring мониторинг очень обширная тема можно говорить о многом разных аспектах мониторинга поэтому для начала небольшой дисклеймер мой доклад не будет посвящен каким-то сравнением систему мониторингом методов еще чего то он будет про какие-то простые практики которые в принципе может каждый из вас применить какие-то любой любой наверное может это сделать про здравый смысл в применении этих практик как не упарываться в какую-то одну область а применять их здраво и конечно же будет про наш опыт про нашу боль прочь проблемы с которыми мы столкнулись про то как мы их решали к чему мы в итоге пришли а сейчас вернемся к нашему инженеру тому я думаю в зале обязательно есть люди которые были в такой ситуации когда почта messenger и вообще любые каналы данных разрывается от количества какого-то бешеного alert of тебя находит в любой ситуации когда ты ешь когда ты спишь когда ты в дороге когда ты принимаешь душ ты боишься уже любого звука который исходит от твоего телефона мы не исключение мы были в такой ситуации не один раз самый первый раз это было лет 7 назад когда произошла первая трансформация наших процессов и процессы поменялись мониторинг не успел соответственно он получили какое-то большое большое количество ложных alert of не успели не успевали на них отреагировать кучу кучу проблем тогда мы собрались с силами объявили крестовый поход исправили это все за какое-то время героическими усилиями и на какое-то время спокойно спали у нас все было хорошо потом произошла очередная волна трансформации все повторилось еще раз мы объявили второй крестовый поход снова это сделали и вот пару лет назад когда ситуация повторилась там в третий или четвертый раз мы поняли что крестовые походы не работают нужно делать какой-то процесс который позволит нам гибко реагировать на изменяющиеся изменяющуюся ситуацию и держать ее под контролем соответственно у нас есть какой-то скуп проблем у нас есть какие-то причины которые эти проблемы и вызвали и у нас есть цели которые мы хотим достичь начнем с проблем первая самая страшная проблема это если мы не отреагировали во время то есть мы пропустили важный критический alert у нас что-то упало мы получили финансовые потери получили репутационные потери упал 1 1 2 1 3 1 к вашему отделу начинают относиться как видим которые что то там делают но у них вечно все падают они никогда не могут отреагировать во время какой-то васин ужасные люди это наверное самая опасная проблема дальше очень много allure тов которые приходят хлопающие allure ты alert и которые когда-то были реально критичными теперь не критичные их становится много среди этого шума теряются настоящие которые обязательно нужно реагировать высокого уровня критичности очень плохо от этого сильно устаешь как раз вот это вот вызывает у тебя отвращение к работе ты ничего не хочешь просто скорее бы закончилось мое дежурство ты перестал получать этот огромный поток allure дав кто не другой начал с этим разбираться это очень плохо а дальше бывает такая ситуация когда в три часа ночи те приходят alert например в очереди тут какая-то непонятная мешанина букв 150 сообщений ну и что что это значит эти 150 сообщений что за очередь где она находится в каком-то брокере или в какой-то базе окей alert пришел с ним нужно разбираться сам ты ничего не понимаешь пытаешься окей позвонишь инженер инженер оказывается в отпуске посылает тебя к другому инженеру и ты так по цепочке будешь 3 четверых пятерых человек в итоге выясняется что это был какой-нибудь например триал это талер то включили забыли погасить и ты полчаса сам не спал разбудил еще кучу людей и проблемы как таковой нету и хорошо если ситуация такая она если это был реально cry личный олег ты пока ты разбирался у тебя упал сервис то ты опять получил потери опять ты плохой хотя вроде как ты все делал для того чтобы ситуация не произошла дальше вот и все вот это вот складывается из того что есть чаще всего у вас просто качество провела мониторинг она достаточно низкая сейчас мы как бы все гонимся за скорейшем выносом функционала на бой да мы внедряем новые технологии и зачастую ты берешь что-то от коммьюнити да какие то там набор метрик набор правил применяешь их к себе но почти всегда почти всегда тебе нужно что-то в них тюнить очень редко бывают ситуации когда они вообще тебе подходят и срабатывают только по делу это одна проблема вторая проблема ты там быстро-быстро что-то делаешь обмазался всеми метриками нарисовал сев sealer ты которые только возможны и такой ну вот сейчас они будут приходить и их постепенно разгребу и сделаю все нормально конечно и все это приводит к тому что ты очень сильно устаешь ты ненавидишь свою работу ты прям вот хочешь чтобы она скорее все это закончилось кто-нибудь другой вот вот тебе надо вот вроде взять все это исправить то исправил раз у тебя с другой стороны загорелась ты тут из правил и ты мечешься сам в плохом настроение портишь настроение своим коллегам неприятно та же проблема очень большая и особенно проявляется когда к вам приходит новый человек если он не работал ни когда он кол на дежурствах он приходит там на испытательном сроке решает какие-то интересные задачи потом он такой ну все теперь ты падаван стал джедаем вот тебе меч вот тебе почта ему начинают приходить сотни объектов он такой что как не хочу не хочу ставить вообще ужасно окей вот такой основные проблемы которые у нас были и теперь перейдем к причинам ну во первых конечно сильно поменялись процессы поставки разработки появились появился новый стояк появился кубер на этой с куча куча кластеров это раньше у нас было два монолита 3-х стаи всего там понятно работала все крутилось все отлично теперь это не так она еще и меняется постоянно и соответственно вырос штат разработки которые все этим всем этим занимается а обсох осталось почти столько же что с этим делать надо разбираться дальше не хватает времени когда я ни на что не хватает времени его не будет хватать никогда не на что потому что задач меньше не станет работы меньше не станет но нужно откуда-то это время найти иначе вас просто погребет под снимайте мой вы никогда не разгони разгребать этот эту кучу и все это приводит к тому что мониторинг становится неуправляемой он как-то сам возникает как-то сам развивается какие-то правила появляются рождаются про этот кусок мониторинг ты вообще не в курсе что он делает этот нужен не нужен человек который делал ушел в отпуск уволился она живет как-то само по себе и вроде свою работу выполняет потому что без мониторинга мы жить не можем но при этом доставляет иногда больше более чем пользы все это происходит потому что больше нет никаких правил которые всегда будут работать опять же повторюсь был монолит было 2 х 100 которые мы ласково называли там сереже и петя да а теперь все не так у вас сотни not у вас сотни сервисов и все это меняется регулярно эти сервисы взлетели эти не взлетели их надо как-то все discovery все постоянно меняется и будет меняться такие вот почему и каких целей мы хотели достичь во-первых кристаллы работу при крестовые походы не работают это сильно сильно бьет по по тому чем ты занят то есть ты работаешь и работаешь в каком-то потоки потом тебе нужно резко собраться силами все быстро починить и возвращаться потом обратно в этот поток очень тяжело во вторых чтобы этого избежать нужен процесс процесс который позволит вам всегда гибко реагировать на изменяющиеся условия ну и конечно же перестать наконец просыпаться ночью в страхе и начать спать так проблемы озвучены причины озвученные цели есть осталось все только сделать что касается первых двух причин это тоже очень большая обширная тема и по ней можно еще там несколько десятков докладов сделать о том как наладить взаимодействие между людьми этому был посвящен посвящено два доклада от нашей компании которые проходили на весеннем холоде посылочка можете посмотреть первый который называется флаг flags of production посвящен инструментом который мы используем для того чтобы стандартизировать поставку сервисов на бой и дать время делаю эксплуатации на развитие а второй посвящен как раз таки процессу взаимодействия между командами так сказать некая эволюция devops а потому что казалось бы devops должен был нас всех сплотить но иногда так получается что предоставляемые инструменты наоборот приводит к разобщению и вот что мы с этим делали во втором докладе дальше по поводу времени у нас в команде есть несколько ролей дежурных до соответственно у нас есть роль который называется дежурный на заявках это инженер который в течение 1 недели разгребает какую-то операционку какие-то простейшие инструкции там что-то сделать базу и там здесь что сделай что-то такое и это достаточно мелкие задачки которые надо просто взять и сделать и отвлекать ради этого постоянно кого-то это неправильно поэтому целую неделю человек занимается только этим потом есть неделя на который человек занимается мониторингом занимается реагирование на инциденты разбором этих инцидентов как раз почему посвящен сегодняшний мой доклад и оставшееся время человек занимается проектной работой то есть он развивает нашу инструктор инфраструктуру исследует новые технологии внедряет их в общем вот все все все все остальное извините так и как у нас раньше это было устроено то есть сначала у нас было недели когда ты дежурными заявках затем неделя когда-то дежурной на мониторинге и после этого ты и спокойненько уходишь на проекты что здесь был не так нет нет ну что вы у нас не настолько все плохо что просто увольняться сразу была запущена конечно но не так вот вот в общем что не так заявки они простые но их много и может так получиться что после какого какого-то очередного этапа там изменения процесс процессов и вдруг становится еще больше а еще есть такая скажем сезонность то есть понедельник люди проснулись после выходных они пришли встретились поговорили что будут делать неделю начали работать и к среде четвергу они начинают дружно выкатывать версии релизиться чего-то там и в понедельник у тебя 10 заявок а в среду и тя 30 заявок в четверг у тебя их 50 и как бы а потом еще эти заявки их как бы все нужно делать но в пятницу уже не надо их делать потому что мало ли что и понятно что основном основное что здесь нужно делать это автоматизировать все что можно автоматизировать и вот про тех доклады который упоминал там есть о тех мерах которые мы принимаем поэтому мы решили сделать простую штуку мы поменяли их местами сначала ты дежуришь на мониторинге у тебя нет никаких детей не дергает ты спокойненько работаешь реагируешь на allure ты на инциденты а потом уже выходишь на заявки и отрубив полную неделю ходишь на проекты стало лучше но другая проблема появилась если у тебя что-то произошло на неделе мониторинга особенно инцидент какой-нибудь желательно исправить его как можно быстрее у владельца инцидента тот кто был на дежурстве есть максимум информации о нем и вот у него закончилась неделя ему бы пора начать улучшать и исправлять но у него начинаются заявки он сидит на двух стульях ни на одном усидеть не может тут ему надо поправить с этой стороны его уже атакуют потому что надо срочно что-то сделать ну окей давайте подумаем подумали и сделали вот так теперь у нас просто мы откусили одну неделю от проектных задач и после того как ты от дежурил на мониторинге у тебя есть одна неделя для того чтобы за собой почистить хвосты то есть ты спокойненько так же без дерганья что ты улучшаешь быстро fixer если у тебя понимаешь что у тебя есть задача которая занимает больше времени в чем неделя ты и уходишь в проекты которые будут через неделю вот так мы сделали у себя реорганизацию дежурство пока мы используем такой вариант возможно там в будущем будет что-то еще когда мы вот заявочку неделю автоматизируем еще больше их станет совсем мало может мы опять их как-то сократим пока у нас вот так и осталось самое простое вот взять тот стихийный мониторинг который там пять лет развивался сам собой и привести его в порядок что для этого нужно во-первых вам нужно понимать что делать для того чтобы понимать что делать вам нужны какие-то отчеты вам нужны отчёты аналитика о том что больше всего в данной ситуации вам доставляет неудобство мы сначала использовали какие-то встроенные средства то есть у нас несколько систем мониторинга поэтому мы посмотрели что есть у них в принципе работает но проблема в том что те получается надо собирать информацию с двух мест как ты и агрегировать вручную ирине вручную и поэтому мы написали свой сервис сервис очень простой работает как в него приходит джейсон то есть система мониторинга отправляют уведомление и одновременно отправляет джейсон в этот сервис джейсон приходит он его парсит выгребает оттуда время название allure то о чем этот alert уровень критичности откуда пришел а дальше мы и складывает это все вы скрыли табличку и мы потом уже визуализируем это в графа не и собственно сразу становится видно вот здесь до что вот у нас буквально там 34 allure то генерят порядка тысячи уведомлений в месяц это за месяц средств вам нужно их исправить и вы вместо тысячи over the fda получите там 30 на два порядка сократить ее белый шум который вас беспокоит дальше нужно сделать так чтобы по разным каналам данным приходили разные категории уведомлений то есть то что не требуют немедленного вмешательства не должно приходить дежурному ночью это вот простая мысль до но когда у тебя мониторинг развивается сам собой никто этому не следует делаем alert и все чтобы они были максимально критичны чтоб тебе писала звонила всяко разно там булькала звенело но чтоб ты отреагировал мышь потом поправим мы же только сейчас это сделали вот что мы сделали для этого во-первых выбрали какой-то отдельности верите и у всех всех всех alert of поменяли на него нужно сказать что этот сверить и не должен быть каким-то минимальным он должен быть близок максимальному то есть приходить по большому количеству каналов чтобы не пропустить что-то реально критичная которое замаскировалась под уровень info дальше мы каждую неделю просто распределяли эти allure ты у нас есть отчет был отчет поэтому severity брали оттуда топ-10 я уже не помню где сеть и справлялись и верите и так каждую неделю через десять недель у нас в отчете не осталось ни одного over the который приходил с таким severity тогда мы просто взяли оставшуюся и раз кидали их вручную то есть примерно три месяца нам понадобилось на то что вы вот всю весь-весь все все все правила привести в порядок то что касается категоризации и что касается вот я сказал что мы каждую неделю это делали вот это наверное одно из основных в этом процессе это еженедельная встреча никто не любит встречи они отвлекают от работы но иногда они необходимы и мы сделали встречу каждый понедельник в четыре-пять часов вечера перед встречи дежурной готовит проблемы которые у него были на прошлой неделе то есть он естественно не все выбирают какие-то больше чаще всего срабатывающие сюда там с максимальным уровнем критичности или по каким-то инцидентом которые произошли также на эту встречу готовится какие-то новые мониторинге которые мы хотим внедрить которые мы хотим получить все это дело обсуждает со всем отделом и вот первый раз когда мы встречались встреча была с запасом запланирована один час мы потратили полтора часа мы ругались потому что всех свое мнение всех все считают что их взгляд на то как должен быть устроен мониторинг правильный эти метрики нужны удивляют вообще необходимы я помню я их настраивал потому что без них мы не можем жить со временем буквально там 3 4 5 встречи мы поняли чего мы сами хотим каких правил мы хотим придерживаться какие соглашения у нас внутри отдела есть по поводу мониторинга и все стало проходить гораздо быстрее последняя встреча прошла за 7 минут показали окей это делаем так так так так так новые мониторинге такие все работаем работаем задачи в работу взяли разошлись очень важная и нужная вещь потому что на этой встрече кроме обсуждения что мы делаем происходит обмен знаниями системы становятся большими и один человек уже не может знать о том что происходит везде и для того чтобы понимать вот он просто приходит на встречу говорит тот у меня сработал такой валюту мне с ним делать это ну это вот так так так итак если тебе нужна более подробной информации вот давай встретимся потом не будем всех тут держать если кто-то ну если это не знает только один человек если интересно всем то прямо там рассказывается что это зачем это и для чего это делалось вот все что касается встреч у нас организована вот так что касается alert of которые тебе приходят в три часа ночи ты не знаешь что с ними сделать тут мы решили внедрить такую штуку как ран буки как бы чаще всего используется какая не ссылка на документацию или на базу знаний чего чего вообще делать да и это хорошо но там очень много букв то есть ты открываешь эту ссылку а у тебя там документация ластика 37 разделов 18 тысяч статей и ссылок комментариев всего лишь чуть где как найти эту информацию или ты открываешь внутреннюю документацию у тебя там тоже три страницы информации все короче да но в этом нужно разобраться понять эти три часа ночи ты ничего не соображаешь у тебя там уже горит уже 2 или рт пришел блин сейчас все упадет надо срочно что-то делать поэтому мы внедрили ран буки в которых сделаны следующие во-первых кратко и понятно должно быть написано о чем этот alert ну не вне в плане что вот в очереди н сообщений и описание в очереди скопилось 100 сообщений спасибо капитан и это и так понимаешь из текста и over the нет там должно быть понятно написано очередь это находится там день в репетитора связано с таким-то сервисом работает ну нужно для для того то вот дальше желательно что были какие-то причины срабатывания то есть мы частые которые у вас возникают все равно вы работаете с системой вы примерно знаете из за чего это может сломаться с теми же очередями да там и на продюсер сошел с ума и начал генерить тысячи не туда сообщения или консьюмер отвалился и ничего больше не потребляет она там накапливается куда посмотреть из-за чего могло это все сработать да дальше сработала чё делать какие команды какими командами вообще найти в чем проблема вот например есть elastic да вот у меня был такой случай приходит тайлер там написано через два часа произойдет там food стороне милости короче перейдет в редон или я как бы знаю об этой проблеме да я понимаю что нужно пойти и посмотреть что случилось тогда может и yandex они очистились и еще что то но каким-то образом освободить место я открываю и понимаю что не помню команды кран-буксы до такой открываю ranbu к это была самая первая наша ран буки когда мы еще только пытались да все это идет а там написано если у вас произошел cloud storage надо почистить место блин как капитан спасибо какими командами посмотреть что в какие индексы там как вот это должно быть там не нужно писать простыней до какие-то простые вещи и если вот все вообще вы посмотрели этот ranbu квот все есть но ничего не помогает какая-то непонятная проблема чё делать нужна какая то ссылка на долл куда на ту же статью базы знаний где будет более подробно рассказано или если это смежный сервис который вам предоставляют люк другие люди и он сломался до или у вас какое-то взаимодействие сломалась нужен нужны контакты тех кто отвечает за этот сервис чтобы вы не будили пятерых людей для того чтобы выяснить этот несчастный телефон он должен быть там вот такие тоже простые вещи и ты читаешь про них в интернетах в статьях думаю что никогда не делаешь у нас на данном она надоела и мы решили это сделать это работает это просто но это работает дальше мы в самом начале нашего пути в самом начале становление два процесса меняли али ртами просто allure ты просто пачками то есть там здесь мы 10 alert of possibility тут мы там 5 али артов по каким-то там сами и исправляли правило мы решили что несправедливо и нечестно если один инженер вроде бы исправил но на не исправилась и получается надо разбираться инженеру который на следующей неделе но это нечестно ты вроде дела у тебя была целая неделя времени для того чтобы это исправить нельзя так делать нормально делай нормально будет и мы сделали гарантийный срок гарантийный срок у нас 30 месяцев с того момента как была закончена работа над каким-то правилам мониторинга почему 30 дней потому что если alert частый то он сработает за 30 дней и ты быстро его исправишь если alert нечастый или какой-то пограничный случай был не учтен что то такое то через 30 дней тот кто его правил ничем не отличается от того инженера которые сейчас на дежурстве ему все равно придется вспомнить о чем это поднять какую-то инфу посмотреть поэтому 30 дней достаточный срок это тоже полу это позволило нам повысить качество правил которые мы создаём которые мы изменяем тоже просто и работает дальше плановые работы 5-7 10 лет назад плановой работы проводились глубоко ночью все останавливалась все там быстро все делали все поднимали останавливался и мониторинг теперь это не так теперь у нас есть балансировщик и теперь на сотни нота но все сама там балансируется кубер сам все поднимает апдейтить и нужно не забывать о том что ты не один то есть ты там что-то выключил а кому-то в этот момент он там сидит спокойненько обедает приходит 20 артов о том что 20 серваков легли он там бросает все бросается к клавиатуре смотрят все нормально начинает там хорошо если он как бы знает даже то какие то плановые работы а если он ничего не знает то у него быстрее быстрее пока пришел там еще 30 allure ты господи да это же просто ребят вы работаете в команде уважайте своих коллег то есть проводите плановые работы с отключением мониторинга просто это то как ты относишься к себе относитесь к другим и вот эта штука она одна из первых на то чтобы это автоматизировать то есть редко же кто-то там руками что такая тяга к обычно это скрипты тузы еще какая-то вещь так добавьте в них автоматическое отключение алё ртов чтобы они гасились сами никому ничего не приходило ты обновил там ось поднял она включилась и дежурный спокойно спит и ты как бы уверен в том что все нормально автоматизация очень нужно но не нужно ставить автоматизацию целью потому что вот когда вся вся эта наша трансформация мониторинга только началась и такой час от клюва давайте вот здесь сделаем автоматически анонсов джерри там инцидент ведет она все так друг с другом связаны потом я такой-то краску пашмина это время не потребуется ну так ну примерно здесь месяц там два хотя в это время там тысяч или alert и сыплют гасите ту боль то то то то что вас бесит прежде всего в первую очередь и не обязательно вот скидываться и автоматизирует это прямо здесь сейчас если можете сделать быстро автоматически делаете если нет руками поправьте и посмотреть как это будет работать не нужно ставить автоматизацию целью ваша цель сделать так чтобы вам было приятно работать и чтобы не потерять в качестве мониторинга то есть не нужно ну как бы самое простое отключил мониторинг еще не все ты спокойно спишь прекрасно работаешь но у тебя все там падает ломается этой в этом ничего не знаешь нет нужно чтобы мониторинг был качественным но при этом он не доставлял излишнего неудобства тому кто этот с этим мониторингом работает вот такие меры мы предприняли это мы сделали и получили вот такой результат я когда рисовал этот график я ужаснулся то есть вот в апреле 2020 года нам пришло 11 тысяч абортов 11000 уведомлений то там 3 300 с лишним день и том как неужели правда настолько приходила к это гигантское количество какими мы начали работать по этому процессу получается вот в этот период из у нас результат практически сразу был нас в три раза снизилось количество уведомлений которые получают дежурный при этом в первую очередь да убираются все вот эти fla поющие мониторинге там которые чаще всего срабатывают уж и ты уже начинаешь спать ночью потому что ночью либо приходит то что реально сломалась ибо ничего не приходит а ещё я заметил такая страшная вещь до декабря у нас дежурный мог не спать потому что ему приходили кривые мониторинге до кривые кривые alert и а после декабря некоторые из коллег первые несколько дней не могли спать потому что они думали что мониторинг сломался некий ничего не приходит блин у меня сломался мониторинг вам подрывается в боте там жмякать кнопочку оставались через полчаса снова где где где ужасная ужасная ситуация но быстро привыкаешь хорошему ночью спать прекрасно что мы получили бонусом бонусом во-первых разбор тех долго ожидаемая и приятная неожиданность потому что тех долг у всех есть и что с ним делать никто толком не знает бороться с ним как бы надо там ты быстро быстро что-то делаешь backlog той задать закинул на улучшение потом исправим вот теперь она у нас понемногу само собой начало разгребать следующие появился такой обмен знаниями да то есть на встречах становится понятно что происходит зачем внедрялись эти мониторинге для новых сотрудников это очень полезно в тех же ран звуках есть какие-то знаю какие то понятные вещи то есть и сразу знает что пойдешь фран бук посмотришь там где там все написано отлично то есть уровень уровень осведомленности растет тот самый пресловутый бас фактор да он тоже уменьшается это хорошо появились сначала хотел сказать стандарта и мониторинг туда ну какие стандарты стандарты этого что-то в граните от лета и до как говаривал один деятель политический появились такие соглашения о том чего мы хотим отметить мониторинга и как мы вообще хотим видеть вот это все в наше хозяйство связанная с мониторингом внутри одесски теперь мы знаем что вот не надо использовать там alert и в которых у тебя среднее значение или последнее это плохие alert и но мы и так это знали но они как-то сверну проскакивали до используйте вместо этого там пирсинг или какие-то predict и которые предсказывают значения этому знаете там на дату историей 10 процентов свободного места на этом дату история лежат кучи виртуалок диск виртуалов который никогда не вырастут alert горит просто так не должен гореть он может показаться этот на дашборде но он не должен приходить куда-то там да то есть и вот такие мелочи казалось бы но вот они сформировались вот там буквально за три месяца и мы теперь сразу знаем а новый мониторинг делаем делаем и вот вот вот вот вот по таким по таким-то таким-то соглашением и вот этот то как мы работаем с мониторингом на самом деле она подходит для других задач вообще не связанных то есть бывает такое что вам нужно огромное количество чего-то там обновить или сделать там много много много действий которые не нужно делать прямо здесь сейчас то точно также создаете какую-то аналитику какие-то отчеты и потом постепенно справедливо распределяете это между всеми членами команд работает мы мы так делаем то есть мы либо это вот просто отдельно делаем либо мы навешиваем такой псевдо мониторинг псевдо alert который указывает на эту проблему и прямо в рамках той же встрече разбираем по поводу планов очень хочу очень хочется какие-то m-elle методы чтобы они смотрели в нашей метрики исторические рисовали нам какие-то красивые штучки там обнаружения аномалий или capacity planning какой то что мы планировали не так что так что там нам 30 серваков надо или 20 а посмотрела на те говорит так вот год назад тебя была такая нагрузка сейчас она выросла там на 20 процентов и этого там на графиках все видно у нас уже есть такая штука для бизнеса вых метрик и она работает на клёвая хочу так хочу такую же для инфраструктурных во вторых автоматизировать все еще больше вот вот сейчас спустя год я реально понимаю что нужно автоматизировать что прям бесит что такое рутинная потому что вот год назад мои планы там ага сделать вот так вот так половина из них были неправильно я просто время потратил зря а еще есть такая ситуация что процессы могут быть любыми прекрасными не прекрасными хорошими выстроенными но люди ленивы и не постоянно хотят хакать эти процессы всегда и автоматизация как раз таки позволяет сделать так чтобы у людей было меньше желание по хакать эти процессы какие-то вещи какую-то рутинную какую-то противную штуку вот вот и автоматизировать ты видишь что человек хочет по хакать ну вот здесь вот можно там прикрутить такую тушу она будет делать это и станет лучше это все что по про планы теперь о выводах во-первых отчеты я вот к своему стыду на самом деле относился к аналитике но так смотрел сквозь пальцы а это тот инструмент который поможет вам в любой ситуации то есть вот первым делом сделайте все отчеты сразу станет понятно в чем проблемы куда копать и как самыми там простейшими способами снять вашу боль дальше каждое ваше действие должно быть направлены на улучшение все что вы делаете не должно ухудшать ситуацию то есть оно должно быть и и улучшать либо как минимум не делать хуже что касается объемов когда я получил эту задачу в работу 1 минус 40 я сидел смотрел стену держался за голову думал это нереально пять лет мы запустили ну как можно это исправить как бы хочется же быстрее уже исправить уже 10 чартов там приходит спать не можешь ненавидишь всех да нет она как-то само собой вот успокойтесь соберитесь с духом не рисуйте там каких то не делайте не стройте ракет до простыми способами шаг за шагом исправляете еще как бы нужно сказать что вы же ни один не вас 1 эта ситуация бесит да у вас в команде есть другие люди которые тоже бесит они с радостью вам помогут да люди там какие-то ленивые они хотят покакать систему до но именно люди именно люди делают делают дела как бы это не звучало потому что без людей ничего не получится вы нарисуете красивый процесс там все автоматизируете а не будет людей которые этим будут пользоваться и ничего не заработает если у вас в команде все с этим это здорово у вас все получится на этом у меня все надеюсь что вы как инженер том будете спать спасибо спасибо за доклад буду рад ответить на ваши вопросы сейчас в цифровых кулуарах если у кого-то еще останутся и ловите меня на нашем стенде или в зале вижу много рук но давайте начнем с первого ряду у нас горячая тема да да я девушкам татьяна здравствуйте да спасибо большое за доклад здесь аншлаг потому что наболело у нас та же мы буквально недавно занимались тем же самым и у меня наверное примерно три вопроса первое когда мы тоже решили заниматься выставлением приоритетов для лифтов мы поняли в какой-то момент что разработчики этого понять не могут вообще есть такое понятие как целый это соглашение с пользователями и его должны прописывать продукты и разбираться в нем должны тестировщики так вот когда мы собрали продуктов и тестировщиков и заставили их сказать нам что критично и что нет точнее не кажется сказали что все критично но когда мы сказали мы должны ради этого вставать ночью они таки а ну как бы нет у нас как то понятие о том что критично а что нет систематизировал ась намного лучше и второе мы стали собирать в основном alert и о том чтобы понять что сейчас что-то не работает с клиентов это frontend это мобильные устройства потому что на бекки у нас очень часто была ситуация когда все прекрасно на клиенте не работает от просто одна я тоже хотел бы сказать у нас прямо такая ситуация была все критично на всю надо прислать allure посреди ночи чтобы дежурную стала разобрался критично только то что уже влияет на сервис из-за чего может появиться простой либо может повлиять ближайшее время и то есть нужно сразу понимать что вот там у вас повышенная нагрузка на циpкa в течение там 30 минут сервис при этом работает и он будет работать поэтому вот эта нагрузка циpкa она должна быть где-то зафиксировано для истории но не нужно подниматся и разбираться с ней а вот если у вас вот буквально через полчаса сервисом станет плохо тогда трубите во все трубы и поднимайте всех и давайте вперед да еще вопрос у меня про вас там был дежурный по каким-то мелким задачам которые ему накидывают другие разработчики это вообще что такое это выглядит как мальчик для битья или девочка ну то есть кто-то делает в проект и пусть они доделают за собой все что за вообще но смотрите я же представители эксплуатации причем представители эксплуатации свин тихо и fin te he с доступом людей до боевых сред все очень специфично сделано потому что есть приказы которые согласуются у cb у которых вот только вот эти десять человек имеет права доступа на бой на изменения и понятно что мы стремимся к тому чтобы там все изменения они как-то автоматически происходили до но бывает такие вещи когда человек должен пойти и что-то руками этом сделать да вот не знаю в базе данных там какой то скрипт прогнать и это не связано с проектными работами проектные работы по этому проекту давным давно закончились он уже в бою приносит деньги но нужно что-то изменить и вот в основном вот этой заявке они связаны с этим это то что другие люди передают которые не могут это сами сделать мы это автоматизируем какие-то инструменты даем людям но она все равно остается вот это это это вот такого плана заявки спасибо большое и сейчас алексей и потом виталий привет спасибо верхней доклад вопросом не такой вчера в одном из залов было ну правильная мысль в том что помимо какие-то инфраструктурных метрик есть еще бизнес новой метрики которая в принципе тоже могут показывать о том что это не только там сколько денег мы заработали но и выступать каким-то холсте к матовым произволен не думали ли в сторону того чтобы посмотреть и скрестить это как-то в одном месте а вот я не упомянул я хотел на самом деле это вот знаете где то вот наверное а это вот здесь вот вот тут то есть самые лучшие даже борды которые я видел это дашборде которые сделаны совместно то есть в которых принимал участие разработчик он лучше всех знает сервиса лучше всего знает как он работает он понимает что если у тебя вот этот метод начал выполняться там не 10 миллисекунд a300 это уже проблема нужно лампочку зажигать и сотрудник эксплуатации или саппорта потому что от разработчика это знание продукта от эксплуатации саппорта это умение визуализировать это и мы у нас как бы все сливается в одну базу да мы храним все метрики в одном месте и у нас на дашбордов и показываются инфраструктурные метрики и бизнесовые соответственно все все все все мы уже давно это скрестили это нужно делать это важно делать важно привлекать разработчиков к разработанную к тому чтобы они вносили свой вклад наша задача дать им инструменты чтобы они этот самый вклад вносили чтобы они могли в любой момент взять поправить тот же даже бортом панель еще какую-то новую добавить или предложение какие-то внести все нужно делать вместе тогда все получиться надеюсь ответил хорошо сейчас ольга и потом привет спасибо большое за доклад у меня такой вопрос как вы кроме вот количество сработавших allure так еще оцениваете эффективность вашего мониторинга вот просто сказал про недооцениваете аналитику какие еще метрики используйте вот мы в основном оцениваем это как раз таки по поводу того вот мы настроили все эти отчеты которые приходят в понедельник дежурному и если у нас в начале в этих отчетах была куча строчек там да вот там 10 таких проблем 10 таких проблем то последняя четко мне было нечего то есть они деле есть как бы да и ты уже тут начинаешь такой все работает идешь и строишь свой собственный отчет чтобы найти что то что нужно улучшить то есть у нас вот это вот отчет количество метрик количество и количество уведомлений до количество уведомлений высокого уровня критичности плюс работа с инцидентами то есть инциденты же все равно происходят и если у нас происходит инциденты и мониторинг сработал мониторинга отличный не сработал ну значит вот нужно что то делать с этим нужно работать по инцидентам чтобы мониторинг стал работать и имея вот эти вот вот этот базовый даже набор можно строить различные отчеты не обязательно по количеству там allure тогда можно строить как долго он горит что у вас там alert горит а вы на него не реагируете мониторинг то работает но что-то сломалось другом месте потому что нет реакции на этом мониторе в основном мы вот вот так вот реагируем хорошо просто привет отличный доклад о чем не понравилась тема ranbu к по этому поводу вопроса первое сколько строк фран буки чтобы вот то на знаешь такое по-разному где-то там достаточно где-то достаточно вот просто одной строчки для всего этого да где то там вот причины срабатывания может быть там вот так вот ты знаешь 5 их да главное не воды не доводить до там вот может вот это вот это посмотреть так то так то в общем строчек от сейчас скажу вот 5 да наверно максимум максимум 20 я помню это вообще прям максимум и вот теперь смотри вопрос про актуализация расскажу как бы делая вот и мне интересно как сделано у вас да то есть я я бы так как бы правильных людей der bar да не в коде да там на условном графон найти да я просто писал бы код бы на питоне и который бы как бы все мои тоже барды в приметать фигачат и размечал бы его аннотациями у меня бы в процессе и бил до этого кода тепло и всей этой ерунды и на прот у меня бы автоматом бы этот ranbu генериуса то есть а как у тебя сделается актуализация ranbu к пока она делается в рамках вот это еженедельные встречи но про то что они должны как-то автоматически делать мы об этом думаем но не реализовали понял спасибо спасибо большое и пожалуйста вот молодой человек вот привет такой вопрос у вас много всего сделано до это отличный но мне вот не увидел если у вас какие то работы по актуализации мониторинга то есть допустим проверка завязан допустим на elastic налоги там поменялся field имя запрос туда улетает возвращает 0 и как бы ok а на самом деле некий хороший вопрос хороший какого-то прямо ответа делай вот так у меня нет она сейчас происходит вообще по правильному если меняется какой-то feel the вместе с ним должен меняться какой-то и мониторинг завязанный на этот field то есть и смотреть нужно в эту сторону пока пока мы вот-вот по старинке там field поменялся надо надо исправить вот у нас есть встреча мы на ней заводим задачи пока так но правильно да вот у тебя происходит изменения одновременно с этими изменениями до должны передаваться изменение в мониторинге а иначе и начну невозможно это отследить оно должно быть связано оно должно быть как кот но в 2021 году говорит что оно должно быть как кот это ведь так все понимает так хорошо пожалуйста да здравствует спасибо большое за доклад сумер а то что говорили в предыдущих люди которые задавали вопросы вы пытались передать авнер шип метрик и alert of именно продуктовым командам то есть вот как это сделано у нас у нас прям есть описание мониторинга в описании grafana вских бордов мы нас не совсем вас там через слот и могу вам рассказать вот и собственно говоря описание метрики описание когда и как и что должен словца и там же написано и салон и собственно как какой-то тоже ран ну типа ranbu к может не так стандартизированный соответственно если я пишу как продуктовый разработчик то я соответственно и меняю ну я меняю соответственно бордовым вот эти вот документы in a review мне то сразу review тут нужно сказать про нашу структуру немножко у нас есть отдел эксплуатации которая занимается инфраструктурой и отдел прикладного сопровождения которое занимается бизнесом и метриками и вот то что связано с приложениями в основном это построено с участием саппорта то есть у них да есть стандарты по которым вот там у нас допустим прометею соответственно выключайте такую-то либо в ней есть такие такие какие-то метрики вышла новая либо вам надо обновить она там вас все эти метрики обновятся она реализована вот так вот если что касается бизнеса кометой ну а инфраструктурные метрики они в основном собираются уже на немножко на другом уровне не на уровне приложений там уже мы сами решаем что вот мы теперь делаем вот так так все здесь сделали раскатали сделал это вот так хорошо и пожалуйста последний вопрос симакин дворца мака спасибо большое за доклад мне на самом деле вопрос организационные там где 4 квадратика до которых вы дошли можно даже можно открыть вот дежурные которые у вас на на мониторинге сидит а если не талер то в чем он занимается ну или у вас такого нету что всю неделю у него тишина ну нету как мы нет вот нужно стремиться к тому чтобы дежурного была тишина чтобы у него был не две недели одна неделя чем он занимается думаете работой нет работы с мониторингом работы с мониторингом всегда полно в баттлоге всегда есть задачи которые связаны на то чтобы улучшить от мониторинг не the land of берешь какую-то задачку начинаешь его пилить но я к тому что он делает задачи дежурного задача над мониторингом или как ну вот вот эти две недели они посвящены только мониторингу он не делает других задач он если у него нет того что нужно провести сейчас он занимается развитием то есть он улучшает какие-то alert еда там вот как говорил человек о том что что делать как их актуализировать думает над тем как и вот это вот в общем он занимается развитием но развитием мониторинга и и ты говорил но только подождите вот кто остался у кого бывают такие недели когда вообще мониторинг молчит все 7 я имеют адекватные игроки что он не просто не спит до второй вопрос он связан у вас внедрял каталог сервисов его как-то ленку ить инфраструктурные метрики с продуктовыми потому что частенько как бы с одной стороны спускаются к инфраструктуре и наоборот от инфраструктурой идешь к продуктам если какая-то ленка у нас порядка 50 команд у которых абсолютно разный стык поэтому тут наверно больше на откуп команд отдано как у них то есть у кого-то там джавада и у них там есть даже реально каталог сервисов они там все друг с другом это связаны какие-то общество у кого-то нет у кого-то там виндовой разработкой у них по-другому сделано то есть вот единых стандартов прям вот таких которые у нас не то чтобы нет у нас есть рекомендации но того что мы делаем вот так вот так и вот так мы как их как эксплуатации предоставляем инфраструктуру для того чтобы у людей была возможность строить то что они хотят тут не про стандарты потому что у тебя упала метрикам структуре мелки инфраструктурные метрики доступны всем если ты хочешь хороший вопрос давайте дискуссионный зоне а по благодарим нашего докладчика и у нас небольшой презент от организаторов и давай пошли в какой-нибудь вопрос который тебе понравился да не все понравились как обычно надо бы запоминать вопросы но наверное вот последний вопрос мне понравилось что о чем ничего не делает что-либо давайте хорошо давайте спасибо большое а сейчас его всем сейчас давайте вместе с докладчиком переместимся в дискуссионную зону можно там позадавать вопросы"
}