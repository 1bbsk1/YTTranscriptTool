{
  "video_id": "lt0To_ETB0U",
  "channel": "HighLoadChannel",
  "title": "Реалтайм мониторинг / Евгений Пальчевский (Hitsmetric)",
  "views": 175,
  "duration": 1031,
  "published": "2017-04-22T14:45:50-07:00",
  "text": "закончил бегу мехмат имеет семилетний опыт разработки и проектирования приложений на ламп в 2007 году выступал на конференции байнет 20 с обзором популярных фреймворков на java скрипте развивался общество php в 2009 2010 годах курировал разработку проекта который сейчас входит в алекса 500 в данный момент развивает свою компанию и свои личные проекты которые суммарно обрабатывают полтора миллиона посещений в неделю хотел бы рассказать по поводу monitoring of событий в нас нагруженных приложениях там где очень важно отследить как работает различные элементы проекта начиная от того что делает пользователей куда они кликают зачем они это делают так далее ну тут уже все известно о чем мы поговорим мониторинг собственно мониторить из чего он состоит как я вижу идеальный мониторинг хотелось бы немножко порассуждать по поводу этого анализ метрика функционала это не только какие-то там графики усредненные значения но и какой-то свой механизм как быстро анализировать метрики когда их очень много и очень важная вещь систему уведомлений которая позволяет названивать всем по ночам в случае как говорил тот танк марка нельзя контролировать то что нельзя измерить попытаемся в проектах изменить это все с помощью мониторинга которого хотелось бы очень просто интегрировать сервисами не хотелось бы заморачиваться с огромным количеством макросов со стороны бэг-энда хотелось бы предоставить эту возможность всем отцы верстальщиков заканчивая менеджер ими самими дела девелопер это должны быть простые данные не хочется как-то нагружать часть проекта какие-то дополнительные расчетами орхидей это должен делать сам мониторинг хотел бы видеть группировку метрик чтобы разделять эти метрики по отдельному функционал у нас интересуют первую очередь сам например реклама вторая группа может быть работал брендов третья группа как ведут себя пользователи как я говорил удобный анализ состоянии метрик которые позволяют быстро посмотреть состояние всего проекта и случае какого-то регрессия этих метрик послать какой-нибудь alert собственно последний пункт этот уведомление по тепла проблемах характеристики мониторинга после небольшого research и я выделил три момент это проактивность активность и пассивность мониторинга активный мониторинг позволяет ну или хотя бы пытается предсказать как себя поведет система в будущем пытается попытаться определить когда рухнет следующий сервер и так далее активный мониторинг периодически опрос сервисов на состоянии их проверки состояния их работоспособности и пассивный мониторинг он реагирует на внешние события то есть сидит на телефоне и ждет когда ему что-то скажет так мониторингом разобрались давайте посмотрим анализ метр и функционала здесь мы видим таблицу сопряжённости это циферки проценты здесь пока нет графиков на самом деле очень удобный механизм у оценить насколько работает проект в разных измерениях в разных точках времени вообще таблица сопряжённости позволяет построить совместное распределение 2 3 переменных особенно удобно и для того чтобы определить насколько эти перемены между собой связаны значения этих переменных давайте попробуем почитать таблицу нет таблиц напряженность во второй колонке мы видим абсолютные значения по соответствующим временным диапазоном например рассмотрим час текущий час в этот момент в этот час произошло 50 регистрации если мы сравним спрос часам сутки назад то мы видим регресс на 15 процентов то есть мы показываем красненьким что 85 процентов составляет текущее положение дел на этот час в таком интерфейсе и довольно таки удобно просматривать положение дел на проекте как собираются все данные и отсылаются если это большой объем данных он постоянно накапливаются с огромной скоростью лучше их собирать freddy's ну и потом отсылать на сервер мониторинга синхронно это со стороны клиента by можно отсылать как жила скриптом так какими-то внутренними механизмами пригорком зачем это все было написано про paredes мыски ели люди в качестве хранилища самих метрик мой скелета cl сейчас обрабатывается около 250 метрик для 14 проектов за этим 7 я наблюдаю это не занимает огромное количество времени и в сутки проходит три с половиной миллиона абду это в день этих метрик ну небольшой и небольшое очень небольшая очевидность это система уведомлений очень простая на основе skype api не хотелось тратить деньги на такую штуку и подключили skype api ответственный получить либо мясо чем потом получит какой-нибудь звонок на телефон ну и собственно проснется и похитил могу ну если вы не поднимайте трубку когда звонит искать-то денежки не потратите все это такой flash доклад спасибо часто девушка привет не видно закован вопрос у меня как название доклада 20 мм до 1 в котором это все видео но обновляется примерно 1 7 30 секунд то есть это примерно удобное время для того чтобы быстро понять как превзошел будет проекта то есть вы залили мою версию смотрите не такие растут падают так юзер реагирует на ваше новое обновление не сломалось ли что-то то есть это сразу видов пределах 30 секунд минут через тридцать секунд вы видите что все рухнуло и за этот момент у вас все пользователи отключили все упало люди ушли из ваших сколько с 14 проектов оки один проект обновили сколько там три с половиной миллиона метрик до в секунду вот просто один проект полностью упал вы за 30 секунд это узнали их не вернуть а где real time 3 секунд от real time правильно не пожалуйста в интерфейсе можете сколь угодно подключить судаком нет забирать быстренько данные из редиса и показываю что ага секунду назад у вас уже какое-то падение но вы на основе этих метрик через какой-то период должны только определить что все падает правильно если она не может сразу взять и рухнуть метрики жизнь наполняется периодически наш опрос евгений компании parallels а зачем вообще это все делали есть куча решений open source точно более надежность и ваши ну скажи хоть и да есть есть куча open source над решения только вчера например мы слышать zabbix отлично зарекомендовал момский проекта же для мониторинга почему-то они тоже начали это делать на самом деле когда ты имеешь свой проект свой продукцию для таких вот то лучше вещей бытовых функций то это быстренько можно строить свой проект и анализирует как что работает взять zabbix рассказать меня пугает наличие вот этих страшных макросов и cook book в которые лежат в гитхабе которых надо настраивать на сервере это как-то очень страшно хотелось чтобы любой верстальщик взял ставил на определенную кнопочку обработку и лента и после обновления данных на сервере уже получать какие-то результаты своей работы то есть это может может использоваться как и вы оба тестирований это может быть использоваться просто как для анализа текущего положения дел в проекте я честно говоря не могу представить когда-нибудь менеджер пойдет искать залезет в zabbix начнет что то там делать я хочу на эту зеленую кнопку поставить событие посчитать но на самом деле вы не показали как происходит добавление собственным менеджером новый параметр мониторинга то есть вы показали биой все то есть много где да ну это теперь можно использовать как как насколько работает фантазия то есть вы можете сделать визуально и добавление функционала отсылки события на сервер мониторинга при клике и это установить не конкретно в коде а вы можете это сделать скажем так визуально ну да здравствуйте вопрос такой ты получаете что ладно zabbix это действительно на самом деле хорошо и круто и все настройки все отлично работает показывали испражнение когда пусть здесь речь идет о том чтобы это удобно было для конечного какого-то там потребителя с ограниченными возможностями году по настройке сервера то есть вебмастер да он может настать клики хорошо google есть со своими ивентами тоже можно повесить на любые какие-то события но это нужно конечно уже больше знаний и забирать оттуда уже информацию с этим угловую пробовали смотрели там нету real-time и никакого посылаете свои венты сидите и ждете когда он появится когда google обработает это все и покажет вам в своем даже борте вот произошел какое-то событие вам надо будет потратить ну честно говоря мне не хватило терпения там 2 20-30 минут ушло на то что обожал свою статистику да то есть там нет никакого real-time а там нету свободы работы с этими данными и неудобно совершенно и zabbix это я считаю низкоуровневые мониторе вот это я думаю это высокого уровня мониторе то есть вы можете на любую действие на печку да на любое действие на любое событие как зашел за слаб блондинка вы ее посчитали все отлично это можно следить в коде это можно следить джесс коде где угодно для этого не требуется писать каких-то страшных гребцов консоли не почему можно купить и какие там даже скрипте согласен мы обязаны нормально ну то есть вы карту подошли к тому чтобы к упрощению это значит то плохо правильно потому что на истечь это сделать нам на вопрос но проще чем страшный zabbix на пирс но именно так далее я понимаю многие админы даже пугаются намного это понятно меня спасибо добрый день а почему 30 секунд почему не 4 на самом деле ну выбрали для себя более менее нормальной циферкой мы поставили то есть конкретно есть придираться к слову real-time хорошо вы можете настроить свой нет нет я не об этом вы сможете раз в 2 секунды прошивать это это не вопрос вас на каждом проекте 20 метрик а когда я бы вы смотрите вы смотрите одну группу определенную данные то записываются вы сразу все не смотрите вы смотрите по группы я как я говорил это каждый миг каждый метрики сгруппированы по группам то есть ну например самая большая группа там 20 метрик вы сделаете каждые две секунды запросу знаете ее состояние не важно как то же время спасибо последних но последний вопрос задавай скажите пробовали ли вы собирать информацию о таких ошибках как fatal error успех и дормер да это тоже ваша система выполнять да абсолютно то есть очень удобно смотреть за конкретно работа на и проекта то есть другая говоря каждое утро включаешь группу метрик такой-то проекты ты смотришь у тебя произошло там за ночь 4 это ошибки и ты начинаешь уже смотреть логии видеть что до было что-то были какие-то заходы там на остальные страницы какие-то события то есть абсолютно все можно контролировать я понял спасибо пожалуйста спасибо большое"
}