{
  "video_id": "Co9A_3b4Y0I",
  "channel": "HighLoadChannel",
  "title": "TechTalk №3.  Создаём банковскую систему со свойствами DBI / Евгений Султанов (ЦФТ)",
  "views": 1074,
  "duration": 366,
  "published": "2023-04-28T06:09:45-07:00",
  "text": "Принимая во внимание что банковская система разрабатывалась более 20 лет и за это время тысячи разработчиков привнесли в проект более 15 миллионов строк кода то да это возможно банковская система цифробанк является одной из наших ключевых решений которые на рынке существуют уже Достаточно давно и 2021 году перед нами стало непростой вызов а для самой системы Это была точка отсчета нового времени Дело в том что к нам пришел бизнес и спросил они взяли с Автобанк переписать немножечко чтобы он начал работать одинаково D Принимая во внимание что банковская система разрабатывалась более 20 лет и за это время тысячи разработчиков привнесли в проект более 15 миллионов строк кода то да Это возможно но переписывать придется долго и много Ну раз это возможно то и была поставлена амбициозная цель что банковская система должна обладать свойствами dbi Database in dependent Я помню реакцию разработчиков когда я к ним пришел и сказал что ребят нам надо переписать Автобанк чтобы он работал с Любой СУБД реакции были очень неоднозначные кому-то прям Вау круто да я готов писать и днем и ночью вот некоторые были что Да это жесть это невозможно мне на это потребуется 15 лет на разных конференциях уже множество компаний прочитали доклады о том как они мигрировали с убд Oracle Database на пост SQL Поэтому с одной стороны Мы понимали с чем мы столкнемся Но с другой стороны также понимали что это лишь Малая часть всех препятствий с которой мы столкнемся нам не надо было мигрировать с одной другую нам надо было одинаково работать с обеими субдд И несмотря на то что банк более 20 лет разрабатывался именно по дороге проект по реализации тебя и решение находится на финишной прямой секрет успеха кроется в платформе платформа развития которая является ядром этой системы платформа развития включает в себя Арма для работы системы хранимые функции процедуры пакеты таблицы и прочие объекты базы данных а также свой собственный язык программирования плюс синтаксис капель плюс очень похож на pillus ql но имеет ряд преимуществ для создания базе данных таблиц индексов ограничения целости разработчику требуется лишь описать достаточно простым языком простым синтаксисом метамодель само создание объектов базе данных выполняется посредством платформы под капотом что касается кода на языке Plus то он также средствами платформы компилируется в pelle SQL Это позволяет сделать вывод что платформа создает для разработчика некоторые слои абстракции примерно 10 лет назад cft начала разработку новой платформы которая получила название 2mc от первой платформы ее отличало архитектура и компилятор языка Plus в новой платформе код на перед плюс компилировался не в пелюске А уже в Java таким образом Появилась возможность масштабировать банковскую систему горизонтально за счет серверов приложений это решило проблемы некоторых крупных клиентов А сколько времени потребовалось на адаптацию кодексов то банка под новую платформу адаптировать практически ничего не пришлось так при реализации первой платформы был заложен достаточно уровень абстракции возникает вопрос А если весь код компилируется исполняется в Java то не взяли просто поменять одну базу данных на другую Вроде да но нет к сожалению сама платформа DMC осталась зависимо от орков Так как ее северная часть была написана или поэтому мы решили создать новую платформу платформу добавим себе а важным ее отличием от предыдущей платформы является то что теперь она не зависит от СУБД в которых в которой лежат данные банковской системы А теперь можно одну базу данных поменять на другую вроде да но опять нет предыдущих версиях платформы все истории запросы компилировались запросы синтаксисом Oracle А так как мы хотели получить be решение то все запросы должны были компилироваться синтаксисом К сожалению решить это средствами только компилятор не получилось потребовалась адаптация кода и это было только начало нашего тернистого пути далее мы избавлялись от ограничений в выборках с помощью ронам затем нас поджидали иерархические запросы коннект-бай которые также компилировались запросы синтаксисом Oracle не все обычные аналитические функции поддерживаются в постга SQL нам пришлось забыть про nvl декоды в после SQL более строгий подход активизации параметров использование таймстампа для хранения дата со временем Только добавила работы потому что пришлось забыть простой арифметике с датами и вот таких замечаний всплыла столько что нам потребовалось около года для адаптации кода системы под новую платформу но учитывая что система создавалась более 20 лет срок в один год выглядит небольшой Это безусловный прорыв в развитии системы до этого момента мы разговаривали только про разработчиков Я бы хотел еще затронуть тему тестирования количество систем для тестирования увеличилось в несколько раз а количество тестировщиков осталось прежним Как как можно все протестировать На мой взгляд только автоматически и есть Поэтому если раньше у нас автотесты были не обязательными задачами то теперь они стали таковыми Подводя итог мы уже планируем пилотный запуск с одним из наших партнеров что подчеркивает готовность наши системы на платформе 2мс и dbi"
}