{
  "video_id": "CdOb3IjbGhU",
  "channel": "HighLoadChannel",
  "title": "Делаем свой умный дом на коленке / Андрей Логинов (A7 Systems)",
  "views": 335,
  "duration": 4483,
  "published": "2024-04-17T01:10:21-07:00",
  "text": "Я рад всех приветствовать на последнем докладе мастер-класс В этом зале и в отличие от большинства докладов на хайлоде сегодня наш материал будет привязан к реальному миру а именно к железу то есть обычно мы говорим про какой-то софт моего пишем куда-то там теплоем не касаемся ни того как какие-то вещи устроены не тем более не взаимодействуем с железом сегодня Андрей Логинов покажет нам здесь прямо на столе какие-то вещи Как делать Умный дом Андрей пожалуйста на сцену Добрый день Меня зовут Андрей я вам буду рассказывать про Умный дом буду делать это сидя у меня есть куча всяких железок У меня есть какое-то количество софта и я там наверное какую-то водную по поводу сегодняшней истории мы не будем рассказывать я не буду ничего рассказывать про умный дом Яндекс Умный дом Google умный дом серия Ну во-первых они прекрасно Это рассказывают сами про себя и здесь абсолютно бесполезен второй момент Во что мы наверное не будем плотно погружаться это вход потому что с одной стороны код это полезно и здорово а с другой стороны кот не определяет все когда мы пишем Back and Мы привыкли к совершенно интересный парадигме последнего времени программиста дороже чем железо поэтому мы ставим массивные сервера мы ставим серверные стойки и мы можем себе это позволить когда мы спускаемся на землю все меняется кардинально мы начинаем собирать все из древности собирали из палок и навоза домики вот в принципе ничего не поменялось за последние 2000 лет возможно состав палок изменился Все остальное точно нет и я хочу рассказать сегодня о трех штуках которые Я подготовил не могу сказать что я подготовил это один Сейчас я поставлю таймер чтобы не убегать а секундомер тоже пройдет извиняюсь Ну пусть будет 64 минуты уже прошло и четыре случая из жизни значит первый случай это наша коллега Она кстати принимала участие в подготовке этого доклада и у нашей коллеги есть особенность у неё двое детей мама Она очень занятая Она вечером убегает в школу в детский сад и забывает все пропушить это катастрофически не здорово для нас потому что мы не видим все что нам творила за вечер А мы работаем позже неё и мы долго думали Как мы можем это дело с организовать Ну мы же делаем умные дома соответственно Мы искали способы как мы это решим и я сегодня подготовил вам интересную штуку мы взяли вот такую штуковину это называется подставка под сиденье оно применяется в БМВ чтобы когда вот вы вставали или садились Вам говорили Вы знаете у вас режим Не пристегнутого ремня и соответственно ехать вы не можете если вот можно на к Ну видно Наверное да Потом мы взяли а вот если камеру покажут то я вот сюда буду выкладывать здесь будет видно Да вот наверное имеет смысл как раз по использовать камеру и мы взяли датчик протечки отличная штука датчик протечки если мы возьмем еще немного скотча я решил что я собирать буду здесь все-таки должна быть какая-то инсталляция Я же должен показать мастерство мы отрезаем скотч ВКонтакте извиняюсь немножко будет Мы думали что мы перехитрили судьбу на самом деле но сложности начались потом и два устройства принципе готово то есть если замкнуть контакты мы получаем сигнал правда Это сигнал протечки мы можем его использовать как угодно Мы же скрипта делать скрипт я чуть позже покажу он совсем не сложно вот такой вот Мы решили взять Home Assistant Ну хорошая система и купили себе новомодную Orange Pi Вот она отличная штука в ней куча ядер и написано что тут есть отличная карточка чтобы вот видосики смотреть и все пока мы с ней разбирались А грохнули мы на неё неделю мы выяснили две вещи выяснили больше Но самое интересное следующее купить вот такую штуку не сложно но у нее в комплекте нет винтика чтобы прижимать диск просто нет я хочу сказать что купить его в России Невозможно его даже в Китае купить сложно пришлось по цене диска купить вот такой набор Я хочу сказать что вы когда что-то покупаете в интернетах обращайте внимание на состав То есть когда стоимость винтика приближается к стоимости SSD Ну это так себе история вообще Это говорит о моей не предусмотрительности не только моей всех нас потому что мы купили два или три комплекта таких каждому побаловаться и я сейчас покажу эту прекрасную гаечку на экране так не потерять бы вот это вот эта штучка по цене диска невозможно ее купить И это не первый разочарование которое она ждала второе разочарование которое она ждала система охлаждения не работает без фрезерного станка который стоит у вас дома зазоры такие что если Вы посмотрите это все тепловизор нам вы это ужас поэтому Мой коллега использовав все устройства которые у него есть в доме смог что-то сделать там есть рекомендации подложить какую-то медь составы которые я не помню еще очень сложно поэтому система охлаждения И вообще если вы покупаете новую штуку которая нет Да нет я не мог её потерять так надо тут надо быть максимально предельно осторожно так очень аккуратно убираем есть еще второй вариант работать на SSD Ой не на SSD она вот такой штучке это медленно неудобно и всякое такое и система охлаждения Ну как там ее победили в конце концов можно работать без неё здесь стоит система защиты Если вы начинаете греть включается троттлинг вы начинаете кризиса но в принципе не сгораете это очень круто а и тут встал вопрос о видеокарточки И выясняется что здесь стоит офигенный видеоадаптер на которого нет драйверов значит я могу сказать что написано на сайте производителя у вас там будет инсталляция сборка там напишут Open GL недоступен Вы не парьтесь Ну что париться действительно Вы поставили видео драйвер Спасибо Ой смысле Ну как бы видеокарту Спасибо вам большое она богатая Если вы щедрак не подключили был бы вообще огоне дров нет и это в принципе отражает наверное процентов 80 или 90 всего железа которые мы получаем У нас есть офигенные железные характеристики огромное количество ядер всевозможные нейропроцессоры как их использовать нет никакой физической возможности Мы вроде бы нашли способ за неделю подключить туда какой-то очень хитрый китайский рукодел в качестве дров но пока мы не победили компиляцию так чтобы это еще и работало после этого но нам вот на этой истории слава Богу видео было не нужно по крайней нам мире нам не нужны были шейдеры в принципе все что не касается openglе может работать и так и мы решили поставить сюда Home assista И мы поставили самую последнюю бунту мы поставили включили первое что нам сказал Homo System досвидос это не та версия бунту которая я поддерживаю мы откатились еще назад Выяснилось что никакую версию бунта Он поддерживает не собирается поэтому Ну да так себе история и Ну мы решили мы будем ставить докер вообще когда мы работаем на Супер больших серверах докер это Зашибись когда вот на эту писявину ставим докер так себе Вот вообще так себе А главное что это докер не только затащил ту же самую бунту Он практически консольную версию затащил всё видео обеспечение которое он только мог обеспечить себе то есть здесь полный комплект драйверов под видео которые никогда не будет работать потому что видеокарточки здесь нет но зато есть лишние 400 мегабайт на SSD здесь на флеше и Homo System Если не считать докер это достаточно прикольная штука Я с одной стороны понимаю почему он распространяется в докере потому что огромное количество зависимости и питон в принципе очень зависимая библиотека этим управлять очень сложно поэтому гораздо проще дать докер вы работаете но опять же когда у меня есть стационарная машина большая Это круто когда у меня машинка попроще Ну так себе И мы написали скрипт если мне сейчас так дадут выход на монитор так это весь скрипт вот вся эта вот Да ладно вот этот скрипт скриптища которая делает то что нам нужно он вызывает вот эту строчку если я не знаю видно или нет слушайте ну но по объему вы понимаете да там написано Shell comman deploy и я сейчас покажу как выглядит шелкомандиплой он выглядит вот так Я не умею мне очень стыдно я могу почитать кору http deploy they Ну как бы все очень простенько и но она поднимает попу здесь срабатывают датчики макрос вот замечательный срабатывает значит что мы для себя отметили Мы провели конфигурацию руками Естественно с первого раза мы провели с ошибками мы нажимаем зачекинить конфигурацию Homo System говорит Окей Ладно вы молодцы Вы справились но не работает мы долго разбирались пока не догадались подключиться к консолью к доктору вывод а там Вот такая красное Полотно то есть с одной стороны мы видим красное Полотно ошибок Вот таких вот а с другой стороны зеленая галочка парни вы Зашибись у вас все просто классно конфигурация все будет работать но и те кто будет работать Home Assistant Я призываю не верить тому что эта штука пишет в интерфейсе Вообще никогда вот верьте тому что он дает выводе консоли вот этому доверять можно там прям ошибки написано что вы сделали не так как вы это сделали не так ну и соответственно можно с этим что-то делать значит и мы уже праздновали победу Мы научились вызывать скрипты у нас была вот эта вот сборка Выяснилось что нужно запустить этот Corel на на мы подготовили скрипт он тоже небольшой но мы делали его под Mercurial Мы работаем на меркурили но в принципе я думаю что что-то похожее можно сделать и на гите я уверен что вы справитесь то есть но выясняется что те кто работает я не знаю на Меркурий нет Если вы выполняете скрипт одним пользователем потом у вас есть другой пользователь нужно прописывать кучу трастов нужно давать кучу разрешений Если вы всю жизнь Пишите в это прям Ну вот очень просто если вы не очень-то знакомы свой браузерами из веб серверами вот такие как я я занимаюсь железом я не очень с этим знаком Мы прям день ковырялись но в принципе победить можно разрешаете все что можно вы даете разрешение в вашей системе контроля верси и тому кому надо и практически Если не считать того что мы ждали из Китая и запчасти мы сзади отгонили вот эту штуку умного дома и я выпью воды с вашего позволения потому что я зачем-то ору мы все привыкли что наши системы умного дома они призваны делать что-то что ну Алиса Включи свет или там давайте поставим чайник на самом деле вы можете улучшать вашу жизнь совершенно большим количеством вариантов Вы можете автоматизировать большое количество действий и событий в своей жизни используя достаточно примитивные скрипты то здесь не нужно ничего сложного Если вы видели вот этот объем кода Ну поменялся датчик прошло 10 секунд мы там поставили временную задержку что если она остается со стула больше чем на 10 секунд но все как бы пора можно было поставить две минуты но есть шанс что он закроет ноутбук и вот мы подгадали тот момент когда он встает со стула ноутбук еще закрыть не успевает Правда Мы не знаем Пока что делать с теми случаями когда она пишет код на диване этот диван большой А эта штука маленькая Возможно мы со временем придумаем систему распознавания получше побогаче но важно что первое что мы добились это важно Вот эта штука она сделана на зигби она почти не жрет электричество она может от этой маленькой микро батарейки работать год-два вот эта штука вообще не жрёт электричество это просто микрики и мы не изобретали ничего то есть мы не делали каких-то сложных штук Все работает значит первую часть истории Я наверное про Home System закончил Сам по себе он большой богатый делать На нем можно много чего и много предустановленных скриптов это действительно здорово но с точки зрения юзабилити мне как железяку не понравилось 3 вещи это докер это и плюс и минус второй момент это то что после того как вы что-то Обновили в конфигурации вам нужно перенеслизировать весь Умный дом Ну такое себе и третий момент это то что он не особо информативен то есть если вы писали допустим кто-нибудь имеет опыт работы там с Unity или Unreal Engine стоит машинами вы представляете как выглядит нормальная стоит машина вот эти красивые линии по которым нифига такого здесь нет вот вообще и у меня ощущение что мы настраиваем скаты системы образца 90 года какого-нибудь начала 2000 То есть это все можно сделать но это если ваш скрипт вот такой если ваш скрипт чуть сложнее утюга Ну вот нет это сделать сложновато и но в принципе Зато куча всяких штуковин и круто так Закончили с этой штукой Мы закончили я уберу её со стола на какое-то время Я не знаю будущем кстати можно потом показать как это все работает но мне честно у меня розетки закончились Я тут вот Начал втыкать и понял что всё я как бы я был готов к одному удлиничили а то что их нужно будет три я как бы не догадался Мы решили первую задачу И я расскажу вторую историю которая произошла в моей семье у меня сестра взяла себе двух котов Ну как бы маленький хорошие котята вот нормальная история брату моей дочери аллергия возьми их себе на денечек на передержку пока я найду новых хозяев сказал ладно год назад и да Да так в моей жизни не мало мне было белок у меня есть живут белки Теперь у меня есть коты вообще так себе понопочкам Я хочу сказать потому что вы смотрите чтобы белки не орали они орут когда ведут котов их можно понять коты интересуются белками все это надо разруливать вообще у меня квартира не 250 комнат и но как бы сама по себе пришел ситуации Бог с ним а выяснилось Я извиняюсь за пикантную подробность Я мальчик Я когда хожу в туалет Я не закрываю столь Чак А эти придурки везде прыгают это кстати вам смешно здесь Да я хочу сказать что если возьмете статистику смерти кошек первая часть они перегрызают электрокабель Вот натуральные второе они тонут с туалетах они выпадают из окна Если вы думаете что Кошка которая там паркурит на асфальт то она такая Девять жизней нет жизни у меня одна Просто может быть котят много и они все похожие А так в принципе ну вот но нет и передо мной стала задача Ну надо как-то спасти жизнь котикам А я не могу побороть свою память она у меня с детства в принципе такая себе и здесь уже речь была не осистем и я взял Я не знаю мне не выговорю слова про пиаритарную систему собственного производства Ну мы же делаем умные дома но тут есть как поганая история мы делаем умные многоквартирные дома как вынес умный многоквартирный дом категорически отличается от умной маленькой квартиры которые мы вроде бы тоже делаем но я никогда не вставал на эту позицию с точки зрения жителя То есть у меня до этого момента в доме из его умности это была система защиты от протечек на второй раз когда клапана сдохли и Выяснилось что кстати Великий скилл Если вы делаете себе систему защиты от протечек вы категорически ставьте вот этот вот вентиль который у вас электромеханический на американке потому что придет день когда он сдохнет со всей своей электропроводкой Этот день в моей жизни приходил дважды каждый раз приходит сантехник аккуратно ножовочке спиливает этот камень у вас же как бы все впритык к стене у вас же всё с кафелем Никто же не будет а вы видите Его невозможно и все что касается электроники все что касается электромеханики в умном доме когда вы будете делать Вы должны понимать эту сдохнет это вопросы иногда трех дней иногда двух месяцев иногда двух лет но это однозначно случится и вы это увидите И вам это придется менять И вот вы сразу должны предусмотреть потому что сантехник Видимо как бы предполагал что я буду его звать раз два года чтобы он не менял вот эти клапана и он угадал Вот и это дискомфортно и так далее Значит отвлекаясь от клапанов так вот у меня кроме вот этой системе автоматизации ничего не было а тут выясняется что есть котики и надо сохранять им жизнь и надо бороться с собственной памятью и черт аккорды здесь будет не видно вот это кстати вот это горечь А вот я хотел показать меня подготовлено просто только кода что команд плюс Я честно говоря когда начинает плохо уже видеть экран я просто беру очки другого формата в крайнем случае лупу и Господи а что так можно было батюшки святы вот кстати вот так вот мы изменили это в прошлой истории Да мы написали слово trusted Давайте здесь абилочку сделать чтобы было видно и еще команд плюс не понравился это делать вот траста без этого ни хрена не работала То есть мы по дефолту понятно что в cg как бы класть пароли но такое себе поэтому это все лежит уже в тех местах где это должно лежать вашим репозитории ну и соответственно меркуриал сразу доверяет вот так вот возвращаясь к скрипту вот Я сейчас тоже отобью это тоже великая стоит машина вот так она выглядит я напишу не это у меня калека писал мне движение крышка закрыто Все ок есть движение крышка закрыта Все ок нет движения крышка открыто Ладно есть движение крышка открыта Все ок Ну то есть у нас есть два устройства Первое это что так мигает вот мне не нравится как она мигает Давайте его выключим на какое-то время пока оно не надо возможно оно перегревается вот братья китайцы вот ничего с этим не поделаешь что да состояние Значит у нас есть два устройства Первое это датчик движения мы вешаем его в ванной в данном случае я принес аналог в общем-то все достаточно просто геркон Я же его взял а куда делась все уныл что ли куда Верните Верните обратно код Спасибо я так продемонстрирую Ладно отсюда наверное видно тоже в общем-то ничего сложного все это стоит не очень дорого то есть основная наверное задача ведь вообще когда я познакомился со строителями И вообще железом города может каждый с большим бюджетом может каждый попробуй сделать это за три копейки и так чтобы это еще массово работал и работала стабильно И хорошо и логика достаточно простая у нас есть движение зашел Помыть руки Ну там не знаю вылил что-то за котами все хорошо ничего страшного нет и так далее и скрипт который все это обрабатывает Я верну Сейчас обратно команд минус нет команд минус О он работает в обе стороны ой но небольшой Вот это уже полноценный скрипт да то есть это не стоит машина это полноценный скрипт он это написано практически на Java скрипте не спрашивайте почему JavaScript Ну потому что потому что у нас так получилось что та система на которой мы пишем этот Java скриптовая машина Хотя с особенностями но в принципе ничего большого Да это конечно уже не так красиво изящно вот как предыдущий год Потому что там в принципе Очень мало здесь уже вот столько если там посматривает да но здесь свобода Да то есть я могу уже более конкретно устанавливать зависимости я могу учитывать состояние дверей то есть для меня как для программиста Наверное это профдеформация для меня когда я даже работаю работал в той же самой Unity мне было комфортнее писать скрипты руками текстом Хотя это и звучит идиотично То есть когда дают с каждую систему там кодекс и так далее мне гораздо удобнее писать на языке там ST чем на языке диаграммы напротив деформация Возможно у кого-то есть такая деформация Возможно у кого-то такой против деформации нет но Когда у вас есть возможность оперировать нормальным полноценным кодом Вы можете совершать много разных действий Это здорово значит у меня где-то была машина в которой я это запихнул в принципе она запихивается вот почти в такую же машину можно в такую У меня есть позже демонстрация которую я подключу после окончания можно будет посмотреть как это шевелится я для этого притащил отдельную машину отдирать от стены компьютер было плохой мне не дали поэтому я перелил копию вот сюда вот и можно будет глянуть потом как это шевелится на этой машине и котики в принципе безопасности значит второй скилл который мы решили Это я решил Это то что не нужно закрывать дверь в том помещении в котором стоят лотки работает примерно точно так же если здесь нет датчика движения и дверь закрыта это опять же тот же самый геркон то ай-ай-ай и вы должны что-то предпринять чтобы все было хорошо у нас все достаточно просто простые датчики обеспечивают вам в принципе с одной стороны выживаемость ваших котов с другой стороны выживаемость ваших нервов Потому что если вы закрыли дверь коты нагадили где-то не там вы сами себе Злобные Буратино и это способы которыми вы можете нестандартные способы которыми вы можете улучшить свою жизнь и сделать ее приятнее Есть десятки моментов которые могут быть в вашей жизни и вы можете сделать все хорошо и просто То есть наверное основная история вот этих двух кейсов это то что просто сделать свою жизнь комфортной без дополнительных каких-то сложных штук значит это была вводная часть в которой всем рассказывать должны были обещать что мы будем на джамле что-то делать Джамал был и вы должны были Выйти отсюда мастерами этой штуки но я всех обманул потому что дальше я буду говорить о железе и Когда в это все погружаешься выясняется что возможности Вот таких датчиков Это хорошо У меня есть вот датчик герконный датчик движения И это прям здорово но не всегда этого хватает и поскольку мы лечь руками часть из вас даже наверное имеет радиотехническое образование Но обычно среди программистов какой-то процент радиотехников или физиков Кто такого он процентов 25 Вот и я-то думал что я профессионал У меня же ну высшее техническое я же радиотехник все дела Если бы я знал сколько всего я забыл за эти годы это просто кошмар и я хочу поделиться с вами с тем что я вспомнил за последние годы потому что когда вы возьмете в руки паяльник во-первых Выяснилось что паяльники очень сильно поменялись это прям ну вау я покажу штуку которая мне подарили А можно камеру Не ну свет это нет а вот есть да я попробую включить свет можно вот да какое-то время вот так вот на нем есть Циферки вы видите температуру более того жало бывает сменными Их достаточно просто менять он очень быстро нагревается очень быстро сох быстро остывает и я не буду демонстрировать чудеса пайки вашего позволения чтобы меня отсюда не выгнали Я предложил притащить кофе по-турецки в офис мне сказали что если это сделаю коммерческий директор будет перебирать на моем рабочем столе двигатель мотоцикла и в общем вот Да там Она питается от тайп си Да но если вы хотите хорошую быструю температуру вам нужно от ноутбука блок питания где-то 19 вольт в принципе вполне прилично работает паяльная станция на мой взгляд комфортней но паяльную станцию в карман так себе не положишь а вот куда-то поехать в поле прямо Зашибись поэтому могу сказать что это мой второй любимый паяльник он хорош вот прям Спасибо большое людям которые мне его презентовали значит вторая История это флюс вообще как бы я отношу себя к людям у которых руки растут из плеч но нервные окончания они вот на метр ниже и полметра вот поэтому вот я не знаю значит техника пайки для тех кто вот когда вы хотите соединить два провода вам нужно туда обеспечить горячего олова и чтобы все это было хорошо и нормально соприкасалась и не отваливалась промазать это флюсом Это наверное знают все вот плюс с кисточкой это великое достижение основное достижение Можно мне еще раз камеру Потому что я вчера ронял Этот флюс он не проливается Это как здорово особенно когда у вас нет дома уборщицы либо ваши уборщица ваша жена которая так отлично флюс на паркете то что я хотела он вообще не отмывается В общем такое себе особенно когда он Протек между паркете это просто катастрофа и я уже вот когда это все упало на меня думаю все мне кранты а потом смотрю на мне ничего нет я думаю Господи как так и я хочу сказать что когда вы покупаете себе флакончики очень важно чтобы первое Я не знаю видно в камеру на нем написано Я не знаю видно или нет из чего он состоит потому что мне тут дарили на работе Ну как выдавали всякие штуки хрен пойми из чего А вот здесь прям написано из чего он состоит И это прям Здорово второе что я для себя открыл это наверное из плохого это экологичное олово вообще звучит нелепо Первое что я думал китайцы пожитились оловы просто сунули мне свинца Но потому что ты просто отвратительно Ну я вообще в химии так себе Выяснилось что у тебя если олово правильно перемешать со свинцом то у него температура плавления почему-то ниже чем отдельно оловы отдельные свинца Я не понимаю почему я принял это на веру и вроде бы это подтверждается экспериментом логики в этом я не вижу но предположим значит когда вы работаете просто с чистым оловом на котором есть красивая зеленая наклеечка вот я не знаю это как будто Вы очень холодное масло размазываете по бутерброду Вот это просто отвратительно это невозможно с этим работать это сильно отличается на взгляд и более того очень плохая впитываемостью проводов Если вы проведете паяльником вы ну увидите что паяльнички осталось вот как бы оно так Ну вот опять же как холодное масло на булку не мажется для пайки не очень хорошо поэтому я счастлив что у меня осталось вот такой вот моточек со старых времен Я думаю что нужно положить рядом со старыми лампочками и хранить в тайне второй удобство я сейчас отрежу аккуратненько ножками никто не видел А еще она никто не увидит там внутри сразу запихали флюс Спасибо добрый этим людям такое бывает а там не видно там очень Мне кажется нет у него фокус у него фокус Он настроен вот сюда и вот в миллиметровую штуку Я боюсь что будет уже не видно и это хорошая штука во-первых это нормальный припой сделанный людьми для людей А во-вторых это прям Здорово а и третье что меня порадовало это вот такие клещи когда я пришел в магазин радиодеталей а я купил вот такие проводочки Я могу отправить их по рядам чтобы вы поняли масштаб бедствия я специально взял два отправлю по ряда так мне сказали мимо колонок не ходить Я отправлю передам чтобы оценили тонкость этой истории зачищать эти провода каторга Я в старые времена использовал бритовку и пальцы но такое себе Да в квартире Зашибись Мы же делаем Умный дом себе на коленке У меня нет системы вентиляции под боком как это положено да и у меня нет специальной электрической штуки которые все выжигает я продемонстрирую Чудеса техники так Чудеса техники не Рассмотрите красотень ни одного устного провода Ну просто зашибись и главное что меня в магазине радиотехнических деталей убеждали что таких штуковин не бывает я говорю дайте мне что-нибудь чем можно зачистить Эти прекрасные провода добрые люди вы же мне их продали вы знаете это невозможно Нет это магазин радиодеталей чем хороший магазин они мне продавали вот эту штуку буквально 10 лет назад что он я могу сказать что толстые провода У меня другая штуковина вот для тонких проводов прям зашибись конечно их лучше держать две штуки Но это просто удобно это спасибо Алексею который мне помогал сегодняшними историями потому что в общем-то Ну я же инженер на работе Я обычно говорю парням не нужен Я вот рассказывал стенд пятницы Соберите пожалуйста И ты приходишь в пятницу Почему не собран А тут а тут всё надо делать самому и ты понимаешь во-первых почему эти парни не могут его собрать ты как бы проникаешься потому что его не то что пятница Ты его честно говоря через неделю не соберёшь а и я хочу сказать что вообще У нас у софтовиков и железячников очень два больших разных мира Я когда софтовик я могу скачать всё что угодно откуда угодно но сейчас уже не настолько как бы Откуда угодно но если у меня есть VPN как бы отовсюду и почти все значит запчастями так не происходит я не могу скачать микросхему не могу скачать контакт точнее нужны были контакты под антенны и на город санкт-петербург их есть чипиде 5 штук пять Карл это не самые какие-то редкие разъемы это просто катастрофа Поэтому если вы будете что-то делать Вы обязательно должны планировать Вы должны знать что если вы софтовики вы любой скетч скачаете qt.ru А если вы железячник раньше чем это приедет из Китая этого не будет в лучшем случае это будет в 4 раза дороже чем в Китае но обычного этого нету по определению поэтому У нас очень тяжело купить любые винтики ниже одного миллиметра да то есть не меньше двух даже 14 это уже прям нужно искать я знаю что в Питере есть место но это не точно но коллеги говорили что винтики есть но они не завинчиваются главное что мне рассказывал мне человек приезжал с Mitsubishi рассказывал как у них там такая штука стоит которая эти часовые винтики выплевывает чуть ли не упаковки то есть заливаете там я не знаю что на выходе у вас упакованы вот эти штуки для фотоаппаратов и все такого вот у нас ничего такого нет и а зачем я это все Рассказывал Рассказывал я зачем вот значит вся моя история дальше я буду рассказывать про кейсы с Arduino Да отлично значит у меня есть дочь такое бывает и у нее есть цветок Кстати у неё кактус зацвел это вообще Я не знаю это руки вот прямо из никак у меня короче и у нее есть проблема она временами уезжает еще что-то ей нужно контролировать влажность почвы Это тот случай когда нам потребовался Ну слово паяльник это сильно сказано я вообще категорически рекомендую вот такие так это я убрал Это я убрал заказывайте лучше из Китая очень удобно Если вы что-то делаете на века то это конечно паяльник или что-нибудь в этом роде Но если вам нужно примериться то это несомненно вот такие вот сеты отрываете себе нужное количество по ширине подбираете подлиннее по контактам они бывают трех видов папа папа мама и соответственно все вместе я бы сказал обоюдополый вот и это очень удобно плюс к этому Вы можете использовать вот такие вот штуки вот мне понравилось не то чтобы Я использовал но мне понравилось и жадности я себе такую приобрел не знаю зачем очень красиво и вот из этих штук позже я думаю что можно спаять я решил как Ну я же ленивый человек но я нормальный и соответственно у нас есть щуп если его включить А я все-таки наверное попробую сейчас его чем-нибудь у меня же есть провода Неужели А у меня есть провода но мне кажется что у меня есть я включу потом Ладно не буду сейчас увлекаться потом можете посмотреть как это работает и здесь есть я вообще категорически рекомендую вот такие вот маленькие дисплеи вот прям огонь на них очень маленькие буковки но видно что происходит потому что технически обычно все говорят Давайте посмотрим что у вас в консоли Ну такое себе Так вы подошли посмотрели и вы видите потому что консолей не очень удобно особенно когда у вас этих устройств несколько А у Arduino есть проблемы если вы подключаете больше чем одно устройство то у вас начинается Путаница вообще не предполагает студия разработки что вас устройств может быть два начинает постоянно миксовать путать и вы начинаете компилировать сет на Ну заливать Вашу программу на одно устройство называется на другое либо это нужно перетыкивать все теряется он на этом зависает В общем катастрофа Если вы работаете со студии Arduino знаете что технически это не самое комфортная штука для того чтобы программировать сразу пяток устройств по крайней мере у меня это так себе получается для того чтобы понимать как это происходит я вынимаю устройство подключаю к какому-то внешнему устройству Ну к внешнему питанию но мне хорошо и удобно видеть что происходит Вот такие маленькие экранчики и кранчики это вообще песня значит я купил себе несколько таких кранов и начал их подключать и они не работают я купил три штуки они ни один не работают я загоревал и купил себе другие маленькие и они Молодцы Вот они работают зашибись и какое-то время есть еще второй момент что чтобы перезалить с этого нужно включить если его включили он уже завелся он работает с тем сетом который там был а то что там железо под новые сет его вообще не интересует это кстати тоже некий момент и вдруг выясняется что вот эти вот большие экранчики чуть побольше так вот такие они на том же чипе это будет потом отдельный сказ Они прекрасно работают как будто те маленькие то есть и я стал разбираться Почему так и в описании написано что у вас адрес памяти вот он вот такой вот а когда вы начинаете собирать выясняется что у вас адреса в памяти нашей не совершенно другие поэтому что я могу сказать первый момент Ну у вас может быть вся линейка как у меня второй момент Если у вас есть какие-то способы проверить адресацию на шина и 2C Это позволяет лучше так делайте потому что китайцы вшивают адреса как Бог на душу положит То есть это великое случайно что я его оживил но иначе бы мне пришлось бы подключать сканер шины и смотреть что-то Я просто не догадался Я думаю китайские они просто должны быть паленый это нормально так вот значит вот такое устройство Ну понятно что когда оно собрано оно выглядит чуть получше потому что все таки проводочки чуть другие Ну и всю вашу немножко полегче но все равно у нас есть детектор я отсюда почвы вот он здесь мы на экранчике для отладки я подчеркиваю это слово можем видеть что у нас происходит А вот это прекрасная штуковина начинает мигать когда что-то пошло не так очень сухо значит вот так вот да так виднее или ниже Вот вот так отлично супер значит вообще найдет можно подавать напряжение но на всякий случай хорошо вспоминать электротехника Вы можете согласовывать уровни напряжения двумя способами первый способ Вы можете поставить Некоторое количество резисторов а соответственно серединку вставить диод и у вас все будет хорошо Это если вы не ленивый человек если вы ленивый человек вы просто соедините нужное количество диодов нужного номинала по сумме То есть у меня вот здесь Arduino выдает 5 Вольт мы вставляем два диода по два с половиной Ну и у меня все хорошо получается и так работает и Так у нас первые потери значит и наверное та история которую имеет смысл уже вспоминать лучше я так вот это все уберу это как нам Передать все это благолепие в Умный дом потому что конечно хорошо подходить и смотреть на диодик я расскажу немножко наверное про радиотракты И вообще как можно передавать информацию с точки зрения Arduino делателей Значит у нас есть я достану чип вот такие прекрасные чипы они происходят производится в двух вариантах это NF 24 они бывают в хорошем качестве и Точнее не так они бывают на большую дальность и на маленькую с маленькой мощностью соответственно с большой А нам нужны как правило попроще потому что нам не нужно километр но у них есть некоторые особенности они на три с половиной Вольта практически весь ардуино мир Ну кроме двух наверное чипов живет в пяти вольтовом мире и если соединить одно с другим работает так себе ну то есть оно то работает то нет и это вопрос наверное который требует отдельного рассмотрения потому что мы как программисты понимаем Как нужно соединить проводочки но мы не всегда осознаем то что нам нужно понизить напряжение и понижение напряжения происходит вот с помощью таких чипов я на всякий случай все соединил проводами чтобы было более-менее понятно да Первое у нас есть а я потом покажу как можно будет потом посмотреть да как это работает у нас есть питание отдельно питается 5 вольт и 3 Вольта это с точки зрения Arduino 5 Вольт мы подаем на сам Чип 3 Вольта мы подаем на приема передатчик мы согласовываем это все через специальные микросхему самое важное в этой истории обеспечить общую землю если общей земли Нет она начинает греться дымится и становится достаточно грустно значит второй способ который вы можете использовать Вы можете сразу купить плату которая это поддерживает будет выглядеть Ну у вас будет куча сопутствующих вещей джойстик это кстати очень полезно Когда вы следите за цветами но работать будет сразу наверное вот по этой части все То есть у нас есть так можно мне обратно ноутбук а почему нет значит с точки зрения сенсоров Я наверное забыл этот момент сказать когда вы получите сенсор из Китая что он будет показывать Одному Богу известно всё-таки Я бы Я бы предложил вам использовать самый простой способ вы берете сенсор в свободном пространстве и смотрите что он у вас показывает потом наливаете на салфетку воды прикладываете эту салфетку к центру и замеряете то напряжение дальше Вы проводите новую прямую в удобном для вас виде Давайте я вот так вот сделаю команд плюс это в общем-то весь сенсор не самая сложная строчка кода вообще это все не сложно то есть у вас нет С точки зрения умного дома и погружения в радиоэлектронику ничего сложного То есть вы можете соединять все достаточно коряво проводами Вы можете соединять писать любые скрипты Вы можете подключать это через wi-fi на wi-fi По моим ощущениям не очень хорошая история для дома для дома гораздо интереснее практичнее использовать nrf чипы опять же с точки зрения кода все достаточно Просто вы настраиваете чип это раз два три четыре строчки кода я еще и когда приходят данные высчитываете дальше если вам нужно подключить этот большой системе типа Homo System Или еще к чему-нибудь Вы можете это прочитать там с общего радио Чипа через com-порт и так далее но по квартире Вы можете использовать и wi-fi чипы они тоже существуют это ESP я их я подготовился вот такой Чип Он практически Ничем не отличается Вот но wi-fi плохо потому что вот эти чипы они могут быть взломанные соответственно вы открываете свою сеть с точки зрения безопасности это не очень хорошо вот а теперь соответственно можно будет наверное я очень извиняюсь что я не смог наверное продемонстрировать работу этих штук прямо в онлайне это прям грусть но можно посмотреть чуть позже когда вот закончится какие есть вопросы потому что я вот так сейчас понял что я говорил говорю а вы засыпаете Ну практически Я думаю что можно потихонечку переходить к разговору потому что предполагается наверное некая интерактив да Хорошо Давайте тогда позадаем вопросы Из зала потом кто захочет сможет подойти посмотреть Здравствуйте Каким образом они могут быть взломаны Ну у нас же есть стек wi-fi да и этот стек wi-fi пишут люди Когда вы подключаете маленькое устройство маленькое устройство соответственно нет никаких гарантий что его написали люди с прямыми руками есть как правило гарантия обратная более того после того как будет найдено уязвимость в этом устройстве Вы скорее всего об этом не узнаете у вас не будет никаких обновлений а вероятность того что кто-нибудь найдет способ поломать равна практически там 50 ну сто процентов беспроводным способом Ну я бы сказал что Ну конечно беспроводным да Вы же wi-fi в светите во все места и вы прошили вот это устройство будет таким и никто не будет то есть если в своем линуксе или в своей домашней инстанции или в роутере вы прошивки меняете достаточно постоянно носить за обновлениями то в домашних сетях вы получаете почти гарантированную дыру если чип популярный вероятность взлома очень велика это просто отсутствие обновлений наверное Вот наверное вот так спасибо так Спасибо за рассказ хотел дополнить чуть-чуть про Home Assistant В общем во-первых он прекрасно работает на Ubuntu там при установке можно передать флажок байпас чек или что-то такое и он будет работать вот и по поводу автоматизации вы сказали что там в общем они не очень выразительные есть плагин not Red называется Там можно все красивенько рисовать в общем Тюрин полная штука и наверное да потому что опять же Home Assistant чем это огромная комьюнити просто огромная и у него куча всяких есть э-э вот прям Вот такой список что он умеет очень хорошая система То есть она мощная большая но я бы не сказал что она человеку который первый раз сталкивается с домашней автоматизацией вообще с автоматизацией работать у него будет сложновато То есть это не вещь которая рассчитана на новичка вот совсем это наверное к людям которые очень сильно в теме очень сильно интересуются вот такой вопрос на базе какого протокола все-таки лучше строить Умный дом себе если мы говорим про когда мы говорим про протоколы На сегодняшний момент самым интересным наверное является зигби он является интересным наверное в первую очередь с точки зрения энергопотребления То есть он лучше чем Bluetooth и лучше чем wi-fi обеспечивает работу на батарейках в принципе во всем остальном Ну как бы вот протокол и протокол то есть опять же когда мы говорим про протоколы технически мы все их соблюдаем у нас есть аппаратная реализация рс-485 У нас есть аппаратные реализации зиг-би У нас есть аппаратные реализации wi-fi но там же потом идут и со свердные реализации протоколов и соответственно в соответственных реализациях Всё достаточно Я бы нет ну не Печально все разнообразно то есть протоколы не соблюдают никто от слова вообще но опять же мы делали протокола для зигби Сейчас я покажу как это выглядит вот у нас есть экстракт данные Я хочу чтобы понимали тяжесть мероприятия выделить нужный участок данных от датчика То есть это не выглядит сложным Если у вас есть хоть небольшой опыт Ну вычлений то есть вам приходит вы включили датчик выключили датчик у вас приходят две посылки они имеют некую разницу вы понимаете что поменялось вы не имея Практически никакого опыта можете совершить или Инжиниринг это достаточно просто то есть точки зрения зигби Есть как минимум несколько реализации которые вытаскивают Это все из радио эфира в удобо понятные данные соответственно с ними достаточно просто работать Наверное это один из самых простых протоколов с точки зрения интеграции устройств Даже при несоблюдении этого протокола всеми остальными питание и простота интеграции Спасибо за интересные доклад У меня вопрос по первому вашему кейсу у вас все так легко мы подключили датчик который включается от того что кто-то встал и у нас есть система которая наверное получает этот сигнал от датчика Но как это потом на ноутбук доходит я расскажу Значит первое мы заводим аутом автоматику и здесь говорим У нас есть триггер если сработал датчик Мы ждем 10 секунд что нужно нам состоянии Чтобы избежать дребезга и дальше мы запускаем действие мы запускаем команду shello diploy команда Shell deploy выглядит вот так мы знаем что у нас есть ноутбук он его айпишник прибит внутри сети гвоздями к То есть это работа естественно внутри локальной сети Ну понятно то есть на ноутбуке поднимаете локальный сервер который получает Это мы на ноутбуке под ним поднимаем встроенный Апач если мы говорим про Linux или Mac Но это без разницы что там И как бы а почему не использовали NFS метки для того же и тот же телефон и это то есть человек вышел из квартиры с диплоил я бы сказал так что у нас была задача Ну во-первых это смешно да во-вторых Ну примерно даже что каждый вставание с кресла с диплоивает Да и что вышел и что за тепло Ну смотрите во-первых мы получаем сохранение того что у нас есть два-три лишних диплои мы четко понимаем что этот диплоид подписан автоматом то есть мы отделяем рукотворный диплой и он же не идет в Продакшен просто делаем сохранение на своем сервере Я не знаю можно это Можно основное правило разработчика 1 Все что вы можете сделать Вы можете сделать больше чем двумя способами мы вот решили сделать таким есть способ с NFS меткими есть еще какой-то можно было поставить камеру напротив и когда бы человек отходил реагировать тогда бы мы еще смотрели кто вставал со стула Да это вопрос к Тому но поскольку у нас Мы изначально по теме задания должны были сделать это на коленке мы сделали это на коленке Но вот во-первых у нас тьма этих датчиков вот натуральная NFS мне так у нас правда тоже тьма Но вот конкретно этих дач и с NF есть тоже свои сложности они везде есть да вот это самый простой вот проще способа мы пока не нашли вот он максимально простой вот датчик ничего не весит и вот эта штука наверное опять же пока она дойдет до двери она ноутбук закроет так поднялась есть шанс что нет Говорите Всё спасибо за доклад хотел бы спросить насчет датчиков То есть существует огромное количество крайне дешевых zb датчиков которые делают китайцы Да но при этом есть проблема что нет diy альтернативы то есть грубо говоря я могу взять Arduino я могу взять есть фишку с вайфаем с блютузом никаких проблем но вот как мне сделать что-то такое же простое но на базе зигби что может работать автономно годами Как вы говорили ну первый момент вы можете купить то есть вообще вход зигби вообще отличная тема Я можно разговаривать часами У меня например где-то Здесь есть а Нет я с собой не взял это дешево то есть основная основная достоинство зигби Это дешевле дров второй момент плюс где это промышленный протокол еще назначение создавался не для Home tomation Это изначально Industrial со всеми Да там допотопная Крипто шифрование которая там в те года сейчас уже не совсем но в принципе это хороший Индустриальный протокол а вы берете чип texis instrumental Если вы умеете работать на РТО осях то Если для вас есть фишка не является проблемой Texas инструмента вы осилите Потому что это не так уж и сложно на самом деле вообще у нас есть Две легенды 1 у нас есть вот Кто знаком есть такой Бим ктт Да правильно Откуда взялась прошивкат правильно кто комьюнити это вдумайтесь в Это слова экземпл от Texas instrumental Весь мир работает на демонстрационной версии и китайцы кстати производят чипы где написано совместимы они просто вливают туда прошивку думаю они даже не в курсе что такси с инструментом существует ардуины и так далее вокруг тезисы есть это все ну я бы сказал так у нас коллега это вообще отдельная история мы просили его сделать драйверам и мы то думали как он сейчас возьмет посмотрит как эти сделает порт Мы думали Мы этот крендель взял datasheet на зигби и переписал стекзик Ну как бы стыковочный модуль просто взял сколько месяца два у него ушло сигареткой это он Но это работа с хабом чтобы вы понимали да то есть это не зажечь лампочку потушить лампочку это полноценная работа с хабом это прям тяжело и сложно не могу сказать что мы потом не переписывали его труд потому что он там забыл система роллинга и так далее но в принципе Это говорит о том что не очень сложная история человек профессионально смог за месяц за два осилить даташит и переписать стыковочный модуль в принципе это равносильно тому чтобы он написал что-то на этой штуке не сложнее чем на Лоре Я бы так сказал уж точно не сложнее потому что все то же самое кстати Лора Вот зашибись система Если Вы никуда не торопитесь но я имею Что если весь мир Подождет Лора не самая быстрая но очень эффективная на дистанциях но опять же если вы туда закачали мощность так чтобы никто не видел вообще хорошо из грубо говоря девкитов для зигби бояться не стоит совсем вообще не стоит бояться никаких китов Кит это же во-первых это интересно Но во-вторых это освоил даже я хотя я вообще далек от этого я то делаю как раз Back и сервера большие в большей степени да Я знаком с умными домами потому что сделал виртуальную систему для устройств Ну как бы но как бы само железо для меня не самая простая история Прошу прощения я тогда небольшую ремарку вставлю если кому-то интересно по железу по технике пайки Я просто достаточно много паяю вы флюс с кисточкой для себя открыли А я вам советую открыть для себя еще плюс крем в шприцах при этом у него есть одна большая преимущество он без отмывочной то есть плюс он обычно сгорает и дает черные хлопья их потом желательно отмыть Кстати вы им рассказывать кстати чем отмывать плюс крем вот там у входа стоят санитазеры для рук они бывают гелевые А бывают пшикалках берете эту пшикалку состав 67 процентов изопропиловый спирт и глицерин просто прекрасно отмывает моментально и не нужно больше ничего делать высыхает без остатка Это первое Второе тоненькие проводочки я не смотрел этот проводочек но В некоторых случаях Подумайте возможно Для того чтобы получить такие проводочки распотрошить из второй вид уху как я так и делаю Кстати если именно она и именно она обжигается ее не нужно зачищать А чтобы она лучше паялась берете кладете ее на пальчик зачищенную или обожженную и канцелярским ножом цепляете Ну оголяется слой без оксидного слоя и он после этого появится прекрасно но на тонких так себе я бы сказал что вот то что вы говорите очень хорошо делать на пробке То есть когда у вас стоит система вентиляции У вас есть специальная электро это начинает это провод вы им специально зажимаете и снимаете Потому что некоторые предлагают делать паяльником Ну это будет очень удобно есть специальная защита Ну устройство для зачистки Но это когда у вас есть хорошая система вентиляции есть система вентиляции нет зачищать удобнее кисточка это я не знаю Мне нравится кисточки это просто хорошо уайт-спирит это вообще любой нет Любой изопропиловый спирт Это хорошо то есть основная проблема что на плате не должно быть воды то есть любой спирт Это хорошо и более того я простите Буржуй купил медицинского спирт я им платы мою может быть кто-нибудь меня за это захочет убить но тем не менее хорошо быть непьющим человеком значит второй момент я предлагаю Прошу прощения что задержал выбрать лучший вопрос я ещё тогда буквально один а вот кто разбежался тот не лучший вопрос всё всё честно Ну давайте хоть какая-то значит еще есть история связанная с тем что поскольку мы делаем Это все на коленках я на всякий случай положу вот эти штуки я могу сказать что они помогают не только мне мы моим коллегам Первое это защепка парикмахерская отличная вещь и много устройств собрано на них потому что она не дает У нее нет закусов как на стандартном крокодиле и очень хорошая плотность прилегания достаточно крепко второй это цветные резинки Ну кроме того что это красиво это еще и функционально третий момент это как это нелепо это бельевые веревки прищепки извиняюсь они не металлические и хорошо прижимают Кто занимается антеннами Вот как я например да это прям удобно Вы что-то прижали у вас не поменялось Никакое волновое сопротивление И все более-менее фиксируется то есть технически получается что вы можете конечно покупать всякие разные держатели родом Шварц это прям хорошо по богатому и Но если только у вас есть бюджет потому что ну стоит это прям дорого второй момент вы начинаете искать какие-то устройства которые позволяют вам делать примерно то же самое но чуть более экономично и маленькие домашние приспособления очень часто помогают ничуть не хуже чем мы же все вспомним Да что обычный лейкопластырь гораздо лучше изоленты Почему сразу не продавать лейкопластырь как изоленту для меня было загадкой вот последние лет 30 но никто никогда не Ну я никогда не пользовался как будучи киповцем изолентой лейкопластырь всегда лучше Ну кто-нибудь меня может быть опровергнет скажет нет я сторонник изоленты но боюсь что таких в зале не будет есть черная изолента тканевая она не клеится Я предлагаю выбрать вопрос завершить эфир и по запускать если кому-то Интересно будет посмотреть все равно не видно будет Поэтому так значит что я хотела я должен выбрать вопросы лучший вопрос слушайте нам У меня нет монетки не очень понимаю что такое лучший вопрос Это всегда для меня загадка лучшему вопрошатели подарок да Ну тогда я заслужил подарок вот можно так Да все Ну пусть вот у меня есть Два подарка я хитрый Пусть Вот это будут вот эти двое молодых людей Я извиняюсь у вас тоже было хорошо Но пусть будут вот эти двое молодых людей во-первых он мне потом расскажет как он запускает этот Ноу бунте нам всем интересно Вот натурально потому что мы просто мы такие это операционная система не поддерживаем такие ну ок мы пошли искать другую если есть в чем главное накачал Ту же самую бунтуки что Я надеюсь вам было интересно я не забывайте голосовать Я не знаю какой лучший значит А что Подарки там книга сети Слушайте вот Раз уж до того дошли молодой человек я вам отдельный подарок подарю от себя У меня он есть вырос протокола Я думаю вам сети будут сподручнее черт Ну вообще вообще спикером неэтично дарить как бы подарки поэтому вот чё так голосуйте за меня хорошим а давайте гречку Пока все не убежали все программе Я обязуюсь в течение там есть на последнем слайде презентации qr-код я обязуюсь туда выкладывать всякие штуки в течение месяца потому что я понял что материал настолько много что я не могу это рассказать не то что за один день прям дольше Я надеюсь"
}