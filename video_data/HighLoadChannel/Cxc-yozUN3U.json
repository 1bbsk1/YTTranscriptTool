{
  "video_id": "Cxc-yozUN3U",
  "channel": "HighLoadChannel",
  "title": "Ужасы мобильной графики / Филипп Кекс (Creative Mobile)",
  "views": 617,
  "duration": 3568,
  "published": "2018-01-16T12:01:45-08:00",
  "text": "меня зовут филип кекс я буду вам рассказывать про графику программирование мобильных телефонов конкретно примеру не gpu у меня еще один слайдик есть прежде чем начну спрошу вас кто из вас пришел сюда реально зная чем он будет слушать кто работал с компьютерной графикой кто знает что таки что такое шейдера поднимите руки ну отлично почти 30 наверное а другие пришли просто так развлекаться насколько я понимаю потому что больше не нашли другой вариант куда пойти тоже неплохой вариант хорошо поднимите руки кто любит играть в компьютерные игры отлично супер так хотя бы таких больше в общем основная тема доклада на этом слайде борьба между графикой консолей и мобильных телефонов производители мобильных телефонов совсем недавно заявили причем и android устройств и apple то же самое говорят они говорят что они достигли по уровню сложности железа уже консоли то есть по сути дела теоретически мобильные телефоны могут выдавать то кожу такого же уровня графику как и консоли на для игры допустим для таких приложений которые именно интенсивно использует графику мне меня очень заинтересовало это утверждение я решил проверить правда ли это и оказалось что так я собрал небольшую статистику производительность как раз таки и консоли предыдущего поколения и последнего поколения xbox и playstation и мы видим что последние мобильные телефоны iphone 7 и допустим galaxy s8 они действительно переплюнули уже консоли предыдущего поколения по количеству операций с плавающей запятой в секунду гигов огс это миллиарды миллиарды операций с плавающей запятой у за одну секунду и это только данные c free именно gpu процессора графического процессора свидания включены это что может посчитать дополнительно циpкa то есть если вы пойдете допустим спеки спеки x-box а там будет на сам люка заново около 3000 гигов abs они сложили просто какую сцепу здесь я положил только-только году то есть получается что производители не врут что на самом деле сейчас уже мобильные телефоны могут генерить графику такого же уровня как даже лучшего уровня чем могли предыдущие консоли поколения причем намного намного повыше и уже приближаются практические консолям последнего поколения на самолет выглядит все офигенно по циферкам вопрос почему игры выглядят не так почему на консолях игры выглядят так на мобильных так графика ну если вы прокачаете разные игры даже последний что выходит она все равно не сравнимо чем проблема краз такие здесь я пытаюсь вам объяснить что происходит и в чем же проблемы и врут ли на самом деле производители мобильных телефонов хочу сразу спросить у меня подготовлена небольшая дымка для тех ребят которые вообще не знают что такое группы луи что такое shader и как он пишутся по моему две трети из вас под не подняли не подняли руку когда я спросил что знаете вы что такое шейдеры наверное для вас все-таки сделаю эту дэмку а другие ребята просто наверное посидят и посмотрят так наш проект кстати между прочим водка с машинкой это была фотка с нашего мобильного проекта мы проект наш пишем unity я решил он днк устроить unity хотя в принципе я сначала думала ты и сделать новый ген может быть для большего поточить людей было бы более знакомое но пускай будет unity и так важно по сути дела в курсе да все что любом компьютере современном мобильном устройстве есть как минимум два типа процессора графический и центральной сейчас я буду писать код который выполняется только на графическом процессоре 99 процентов программистов наверное никогда в жизни не программируют код который исполняется на gpu сейчас мы посмотрим как это делается по сути дела перед нами сейчас простой шарик две нити которую наложим самые примитивные шейдеры которые только может быть и он выглядит его код выглядит так так что попробую зазумь и графический процессор gpu на самом деле все большая ошибка некоторые люди думают что это ускоритель для трехмерной графики а сам деле это ускоритель для двухмерной графики и раз таки вот из этого кода это видно это еще ускоритель для двухмерной графики векторной поэтому у нас есть здесь две функции одна функция которая вызывается для вершин модели у нас модель сейчас это наш шарик я покажу что where the cassette вот это вот точечки которые соединяются палочками вот это есть вертексы общем для каждый из этой точек вызывается вот эта функция которая определяет какой точке экрана будет находиться оно простое что из делается при помощи при абрама 3 снова призрак преобразования линейной алгебре мы находим по положению камеры виртуальном мире находим где на двухмерном экране будет находиться . допустим если мы это преобразование отсюда уберем сделаем здесь я просто напрямую передал данные то что мне приходят от модели отсюда модель шарика напрямую на выход в экран и выглядеть она будет вот так вот то есть по сути дела куда бы я сейчас камеры не посмотрел он не рисую двухмерную сцену на экране то есть то что единственное что делается ту сферу трехмерные это как раз таки матричное умножение матриц а в себе содержит сразу и позицию камеры откуда мы на сферу смотрим там ее угол зрения там и так далее это уже делает за нас unity благо данном случае и я покажу допустим что мы можем сделать какие трюки нашу сферы сейчас белая именно потому что здесь я возвращаю просто единичку один для gpu это просто белый цвет допустим мы можем поменять цвет на что-нибудь другое я возьму из модели сферы которые мне приходят в этой структуры направление куда смотрят каждый vertex тоесть о нормаль и передам ее из вертексные функции пиксельный вот этот песчаная функция как раз который реально рисуют у нас пиксель киноэкране сейчас просто все беленькие если я сюда передам нормаль эта структура которая еще спешу эта структура которая гуляет между вертексные функции пиксельной и нахар варнам уровней все значения будут интерполируются специально между разными вертик сами сейчас увидеть это работает так и здесь вертексные функции на выход я дам нормально и напрямую превращу в цвет так нормаль и 4 значение 1 для тех кто уже примерно понял что происходит может это скажет какого цвета сейчас будет шарик на экране когда нет точки , где 28 строка точно то есть она бы не скомпилировалось просто правда а теперь в общем нормально мы передаем напрямую значение нормальные это x y z направлении передаем в цвета они становятся rgb то есть их становится красным зеленый становится y новый язык становится растянем на посмотрим как то выглядит радужный будет все правильно бам и вот она так получилось то есть x у нас видите у нас x это горизонталь по горизонтали он становится от черного красному y вертикаль а черного зеленым и синим где-то сзади все правильно и вот этот свет то есть ни один цикл циpкa не не было потрачено сейчас чтобы поменять цвет этой сферы и посмотрим что мы сейчас еще можем сделать на gpu мы можем изменить позиции самих вертексов каким-нибудь образом давайте попробуем допустим и берем входной наш vertex и прибавляем к нему так ту же самую допустим нормально еще можно что-нибудь домножите быть очень клевым синус чего-нибудь я уже тут экспериментировал так что я примерно знаю что пишу я сюда добавлю одно значение которое мне передает циpкa то есть times то есть это единственное значение что будет нам передавать циpкa в гпу это текущее значение времени с момента запуска приложения и берем этого синуса но естественно будет постоянно гулять туда сюда ну посмотрим что получится ой все сломалось так понял не должно быть вот так вот и когда мы запустим наше приложение по-собачьи выйдет вот то есть нас сфера стала расширяться каждая точка двигается в направлении своей нормали домноженное нас на синус то есть именно чуть-чуть гуляет туда-сюда мы можем сделать это еще интереснее допустим мы можем домножить это на какой-нибудь ран дом от той же самой допустим нормали единственное что gpu нету функция функции рандома нам придется сама самими реализовать для этого есть именно известные способы допустим такой берем некий city для рандома dot продукт векторное произведение векторов или кто не знал сюда я могу написать чуть угодно мне не так важно чтобы тот иран дом был secure главное чтобы выглядело красиво так еще что-то не хватает возьмем фракции фракции это все же дробная часть от числа и примерно что-то такое мы попробуем запустим текст уже интереснее пошло в общем видите то есть в реальности я сейчас уже анимирую эту сферу опять же при помощью чистого gpu то есть на самом деле с точки зрения графики для используя чисто код грибы можно очень много интересных штук делать не используется практически вообще это допустим можно уже мама на выставку послать это музей в москве да мы здесь современное искусство если ошибаюсь допустим покажу сейчас более строго более сложный вариант который тоже сделан чисто на gp ум без использования цепом это все сделала чисто математическими формулами внутри шейдерного кода при чем здесь используется алгоритм уже совсем другой это используется great race ray tracing для этого здесь запустим этот шарик который там гуляет и вдалеке о нем реальный рилтайм отражения от всего январь ремонта которые созданы и опять же формула математическими в общем ведь просто демонстрация для того что можно сделать так вернемся к нашему докладу вопрос есть насчет дымке может быть сразу от это ну ладно краткая история краткая история развития gpu первые графические акселераторы появились там где-то 70 на первых аркадных машинах потому что первые аркадной машины в принципе уже у нее была настолько интенсивной графика хоть она была двух мер что уже циpкa не справлялись с логикой игры и график и одновременно поэтому два процессора было сделано для этого и первой карты которые можно было купить и поставить свой компьютерами на домашний они где-то в 90 появились назывались буду это был абсолютно приобретая карты со своим проприетарным api и если игра была написана при помощи глайд и 5 который использовался ли этих карт ни один другой ни один другой производитель не мог сделать карту кроме вуду это был большой минус но допустим я в девяностые как раз первый раз познакомился с ускорителями играл недфорспид наверно 2 или какой-то там кто играл вниз force 93 расскажите о вас были значит эти воду карты стояли у всех потом и потом когда все поняли что ускорители это круто на домашних компьютерах было решено сделать какой-то более открытый и 5 чтобы разные производители могли делать карты конце концов компания который производила в дона умерла или кто-то я купил общем что-то с ней уже произошло был придуман стандарт open gl и microsoft свою очередь придумал свой direct x это и 5 для общения с их одно хардварные видеокартой началась война война стандартов то есть microsoft решил что пингвин не подходит по этой причине и само название gpu появилась уже позже двухтысячные годы название придумала компании nvidia в то время была война между двумя компаниями ati и nvidia и ati продвигала свой термин вижу processing unit но он не прижился победила и nvidia graphics processing units это была их названия итоге эти тоже переименовали свои карты в конце концов и первый мобильный api пылился томаш в 2003 году и на 90 процентов города общем большинства мобильных телефонов сейчас использует opengl вес его был тоже основан на а плюс это урезанная версия обнаглела просто да вот open gl гэбриел использует opengl es второй версии причем в bl20 использует open gl с третьей версии на одну циферку запаздывают и вот совсем недавно был придуман новый стандарт графических api открытым как замена обгорела называется вулкан раз вам сейчас буду объяснять зачем он нужен и чем он клёвый ну и вот сейчас мы все дарите так когда кто-то слышит слово графическая карта чаще всего все ждут что это какое-то мощное большое устройство с крутым охладителем с кулером но на самом ли мобильных телефонов это малюсенький чип и на котором игру и циpкa находятся на но на одном и том же чипе и у них чаще всего одна и та же память в отличие от тех gpu которые вы вставляете в свои компьютеры домашние что на сами очень много что меняет объясню потом позже почему у меня структура доклада такая я буду сначала вас пугать ужасами которые связанные с программированием графики а потом вторая часть доклада буду объяснять как затем уже сами бороться чтобы вы потом не вы конечно потом забудете какие ужасы были вы слишком будете уже испуган и я вам напомню не волнуйтесь так уже сопи чем же он стар чем за страшный api и об open gl и direct x потому что они его первых старые они были созданы в 90-е годы хардварные точки зрения карты видеокарты были в 90-е годы сделаны немного по-другому чем делаются сейчас и старый api они завис завязаны к сожалению на именно старую имплементацию железу допустим проблема первое что 100 старых api глобальное состояние чем это плохо глобальное состояние мы можем использовать только из одного thread'а значит что мы можем циpкa давать команды бегут только из одного гидра то есть у нас у всех компьютеры дома уже сколько ядерные восьмиядерный наверное телефоны тоже у вас карманах тоже уже по 4 по 8 ядер циpкa быть никогда не замечали что когда вы включаете игрушку дома на компьютере и смотрите как заняты ваши гидроцикл обычно одно ядро работает на сто процентов остальные отдыхают этому есть причина глобальное состояние старых api то есть на сам ли старые api просто не позволяют используя давать команды группу из нескольких потоков что она со мной чем плохо и это ограничивает разработчиков шейдеры вот именно shader тот программный код который вам показал дымке который исполняет группу по какой-то странной причине было решено что они будут передаваться драйверу gpu в чистом виде в виде кода нет компилируем бинарном виде а в виде кода это заставляет драйвер каждого gpu свой своим собственным компилятором перекомпилировать код шейдеров каждый раз при запуске приложения чем это плохо ну во первых то занимает какое то время но это не самая большая беда самая большая беда это то что огромное количество этих компиляторов с богами у каждого свои баги то есть вроде бы как программист может написать один shader который должен бегать на в сотнях разных gpu но если из один и тот же код сотни разных компиляторов откомпилировать там какой-то 10 процентов из них не поймут синтаксис там еще что то общем постоянно краше из этого происходят shader не компилируется вечная проблема нет управления памятью старых gpu это то что я вам сказал вначале когда показал именно в большую большую карту и маленький чип мобильного телефона на маленьком чипе мобильного телефона память который используется по youtube-у это одна и та же память в старых картах это всегда была разная память gpu своя уступаю слоя и поэтому в star старых графических картах это было абсолютно нормально что при посылке задание на отрисовки какого-то объекта на экран циpкa копируют все модели и текстуры из одной памяти в другую постоянно еще конвертируем какой-то небольшой другой в другой формат сейчас этого делать не надо но все api все графические драйверы все равно это делают только потому что это старый legacy api остался такой то есть они делают бесполезные задачу копирую вас 1 чипа памяти текстуры из одной области в другую на каждые покажем друг коля друг а вода-то что каждый рукава называется задание которое дает циpкa губу на отрисовку и каждый кадр который вы видите рендеринга на экран каждый кадр это обычно ну там несколько сот может быть тысячи друг а он-то и таких кадров нужно отрендерится 60 кадров в секунду 60 раз в секунду и если вы используете какой нибудь допустим we are предложение там уже стандарт 90 кадров в секунду и столько копирование память из памяти в память абсолютно лишнее и замедляет процесс весь нет управлением лендингам старых объясню что такой брендинг по-быстрому тот же самый наш shader наша сфера помните да я включу брану так вот она наша красивая сфера сейчас она просто рисуется поверх заднего фона сначала рендерится задний фон поверх него рендерится сфера если мы используем какой-нибудь блондинк допустим это делается так blend one вам допустим напишу просто складываете перец сферы рендерится не поверх старого старых данных а складывает значения пикселей старых с новыми старых графических картах это в это функциональность существа ловилась на арт варнам уровне то есть блейдинг был операции количество операций блин где блоки ограниченное количество потому что для каждой операции вставлялся новый чип or тварный в гпу сейчас это происходит во всех и пылу программно возможно во всех и неверно 100 процентов большинстве точно но так как тут старые api это не поддерживает мы не можем написать сюда любую формулу допустим я не хочу vanvan написать хочу не знаю там а там степени b там что не уж-то угодно a + b + c то есть в реальности сейчас у бы это можно было бы сделать но глупо из-за старого пи-и-и это делать нельзя так дальше и никаких гарантий то я имею ввиду то что сам старый api не запрещает драйверу делать нечего чтобы программист не хотел допустим во время вы тоже не замечали из когда вы играете в игру какую-нибудь опытом картинка на полсекунды подвисла и дальше игра побежала это происходит не просто так иногда драйвер gpu может решить что ему нужно перекомпилировать все шейдера внезапно и нету никакого способа драйвера группу сказать не делай этого или хотя бы сказать ты можешь перекомпилировать шейдера но только тогда когда я этого хочу они когда ты этого хочешь и это нельзя сказать драйверу из-за этого культур тоже постоянно во всех графических приложениях подвисания там на секунду на полсекунды в общем ужас так следующий ужас инструменты для разработки это именно больше краз связано с мобильными приложениями разных начнем подряд вот разных компаний которые производят группу для мобильных телефонов огромное количество каждая компания под свою группу делает инструменты для профилирования для аналитики так как каждая компания делает это отдельно они все ужасные просто что чаще всего компания которая тратится больше денег на разработку железа они не очень заботятся чтобы потратить деньги на софт который с этим железом должен поставляться для удобства разработки нанимает каких-нибудь там индусов или китайцев дешевых и общем этим вся мне ужасно неудобно пользоваться постоянной краше что-то не работает не соединяется с телефонами и так далее профайлер и вот разностями для каждого чипа уже сказал некоторые производители аппаратов мобильный телефонов даже запрещают существующие недоделанные тулы использовать допустим apple в каждой свой iphone вставляют чипы компании имидже начинки наладишь вот этот power we are во всех и упал where есть свои тулы для профилирования но apple специально закрывается путь по которому и титулы могут соединиться с gpu то есть именно они намерены это делают наверно из-за security безопасности но на самом деле это ужасно то есть для разработчиков это делать не только и apple на да пойдем дальше сразу ужас 3 перегрев знаете что такое тротлинг да когда перегревается какой-то девайс девайс может решить себя обезопасите того чтобы просто не сгореть и он специально понижает частоту своего процессора чтобы понизить температуру на самые очень классно что они это делают иначе бы телефоны могли бы просто взорваться у вас в руках это очень полезная штука единственный минус что в реальности на диво девайс невозможно использовать на сто процентов то есть если напрячь на сто процентов циклу игру он будет пару минут рендерить с хорошей скоростью и после этого скорость будет падать получается ты как разработчик не можешь использовать то что тебе дает производитель афро дворы опять же губит батареям ограничить доступ к ресурсам за это то что он значит что я не могу использовать как разработчик сто процентов железа и возникает этой за из-за того что когда точки зрения маркетинга производили мобилен телефону заинтересован в том что когда он выпускает телефон на рынок успехах телефоне написанные самые большие циферки больше чем у конкурентов и это выглядит клево то есть когда покупатель смотрится пике телефона смотрит на цену смотрят а если у этого производителя мощнее процессор дешевле цена я куплю его отлично но покупатель не думает что на самом деле не одно приложение в его телефоне никогда не сможет использовать эти мощный процессор который для вставлен именно по причине троттлинга то есть он туда вставлен просто с маркетинговой точки зрения если бы производители телефонов вставили чуть чуть похуже процессор в мобильный телефон в реальности он бы работал бы чуть-чуть быстрее вот и этот бенчмарк который я провел недавно на линейке samsung galaxy именно сколько может от рендерить на экран вершин и пикселей телефон до 20 миллисекунд если вы видите что galaxy s4 допустим окунь мог отрендерить 500000 вертексов на экране за 20 секунд galaxy s5 там миллион почти об с 6 упала циферка уже 200 galaxy s7 тоже 200 почему так происходит потому что эти два galaxy s4 s5 они были сбалансированы мощность процессора вместе способностью телефона натурально охлаждаться дальше они уже маркетинге мы сказали маркетологи сказали производителем ребята никто не смотрят на то как реальность ваши ресурсы будут использоваться просто вставляем настолько мощный процесс и сколько можно в реальности они работают медленнее ну конечно с условием что эту это benchmark я снимала когда мобильный телефон поработал уже где-то минут 10 и кстати я хочу вырос он показать дымку небольшой сейчас извиняюсь что сразу не достал так нет фоток не покажу здесь у меня запущен xcode и здесь у меня мобильный телефон то вот iphone s7 и запущу на нем небольшой проектик по сути дела тоже самая днк что я показывал до этого то есть на это фрактал который работает чисто-начисто на gpu сразу покажу что нам показывают здесь xcode здесь есть небольшой профайлер какие-то тузы и рендере там сейчас где-то 30 кадров в секунду что он становится нас там были абсолютно нормально и говорит что у нас был занят до 30 секунд 30 миллисекунд это почти стопроцентная за занятость почему то он говорит что цыпы у не занят вообще ноль миллисекунд показывает маме надо и если мы посмотрим на самом деле на tab циpкa то мы увидим что все-таки 11 процессор 1 1 ядро циpкa занята на сто процентов практически это к слову о том что качестве инструментов тоже я говорил что производители инструментов не особо заботился чтобы делать их очень качественными хотя apple считается одним из лучших то есть инструменты которые делают apple для своих телефонов считаются хорошими и даже эти инструменты дают баги то есть на самом деле он здесь у меня должен был циpкa и циpкa показать тоже около 30 миллисекунд башенку я оставлю этот телефон здесь просто поработать немного и в конце доклада посмотрим сколько он сможет нам кадры в секунду от аренды which takes пойдем дальше многообразие но это эта проблема на не только графических приложений но здесь особенно потому что вы реально моделей в сотне циpкa тоже сотни комбинации разных г плюс циpкa я разными чипсетами памяти наверное миллионы все-таки в мире особенно очень много всяких но не известные компании маленьких там день в китае которые делают телефоны с неадекватными сочетаниями железа допустим они ставят какой-то очень мощный gpu но они ставят слабы типа уж которым все но не дает возможность использовать все ресурсы группу или они могут поставить мощный циpкa мощной бегуна недостаточно памяти чтобы это все использовать и для разработчик это все кошмар опять же вот как там с этим всем жить как вообще нам делать графические приложения для мобильных телефонов возможно ли это ну я расскажу какие какие мы способы решения проблем для этого используем и 5 что делать с ним как я уже говорил появился новое поколение 5 которые заменяют все те проблемы которых говорил там была проблема что глобальное состояние которого больше не будет опять же проблема что стандартов несколько у нас появился стандартный вулкан open source иные варианты и pr замену подгорело но параллельно с этим microsoft все равно решили не переходить на вулкан они сделали свой directx 12 который тоже новое поколение пи эс без глобального состояния и свою очередь apple сделал свой метод то есть нас война это еще хуже стало чем была до этого раньше было два варианта direct x и open gl вернулся три варианта ох уж этот глобализм так новый 5 им не имеет глобальные состояния то есть можно командой посылать от циpкa в нескольких тредах отличная тема позволяет управлять памятью то есть у этой можно спросить данного девайся на котором все запущено мое приложение у него один чипсет памяти для двух процессоров или два если только один чип сайт я могу решить внутри приложения я не буду копировать текстуру из одной области памяти в другую что на самую ускоряет работу все всего приложения графического отлично что сейчас нету разделения на опыт голуб ангел с которой а вот точнее не будет сейчас она есть разделение новый вулкан он единый и для писи и для и и для мобильных телефонов война продолжается уже сказал еще стало хуже и некоторые ребята говорят что новый вулкан он слишком сложный или разработчиков он слишком низкоуровневой там очень как сказать легко выстрелить себе в ногу но этому есть оправдание что на самом деле в каждой компании которые делает занимается разработкой и графических приложений все равно только маленькое ядро разработчиков касается напрямую этого и пик графического что на самом деле большинство компании либо использовать какой-то готовый джем как мы мы используем unity либо свой in-house разрабатывают engine и большинство разработчиков не должны с этим сложным и переработать а для от хардкорщиков разработчиков графике это то что нужно выкрас и плохих новостей или наверно хороших бегал сказали сразу что они не будут переходить на столбы на новое поколение стандарта вулкан они останутся базироваться на open gl с этому есть причина потому что все таки веб-приложение графика не настолько важно перформанс и там наверное они решили что простота и 5 важнее чем перформанс графики так следующий у нас будет кошмар это были инструменты не качественные инструменты что мы можем с этим делать к сожалению ничего то есть инструменты вряд ли будут лучше потому что производители чипсетов меньше не становится и мотивации для них больше денег вкладывать в софт тоже не перри не предвидится но для этого есть решение допустим можно делать свои инструменты даже не многие не многие разработчики графических приложений знают такие фишки как допустим chrome tracing покажу что это такое допустим если вы используете пишите пишите свой инхаус графический движок внутри компании то есть у вас нету county unity у которого есть уже готовый профайлер по сути дела то вашу задачу входит написать какой то графический уай для профайлер а визуализацию собственного уже приложения что на самая непростая задача если у вас маленькая команда то можно как раз такие вещи использую как chrome tracing chrome tracing так и останусь кроме chrome tracing это на самом деле это gpu профайлер для самого chrome браузера что хорошего в этом профайлер и то что он умеет загружать он умеет загружать tracing из файла и формат файла это просто джейсон который в документации очень хорошо описан то есть по сути дела вы можете внутри своего приложения мобильного допустим графического нужные данные выплевывать в том формате к chrome понимает это и потом просто открываете его в хроме и я он уже красивом юань показывает весь рейс как бы что было 30 на в какой момент сколько миллисекунд было за занята вам не нужно этот wife организовать самим вам всего лишь нужно описать экспортер данных и таких вариантов на самом ли довольно много chrome это не единственный вариант это просто вот один из что можно сделать чтобы бороться с плохим поехали дальше что делать с перегревом так я еще не помню вот как мы боремся с перегревом проекта который учился работаю по аналитике я залез в аналитику и понял что наши игроки наши игоря которую работает мобильных телефонах у них средняя сессии игры где-то 15 минут а это значит что если игра будет работать пятнадцать минут без исключения троттлинга без перегрева это уже будет на для большинство людей наших игроков вполне нормальный результат и это значит что где-то по моим расчетам получилось так что мы можем использовать 60 процентов ресурсов телефона самых последних моделей имею ввиду который как раз там iphone 7 galaxy galaxy s7 8 и при 60 процентов загрузки как раз где-то 15 минут уходят чтобы нас включился тротлинг это такой трейдов получился но в принципе то окей вариант и если вы опять же я повторюсь я уже говорил про эту что если бы производители телефонов на самом деле туда поставили чуть чуть менее мощные процессоры то на самом деле уровень графики могут быть лучше то есть я как программист мог бы его использовать гораздо эффективнее бобра многообразие здесь в принципе то же самое что и во всех других приложениях не только графических что специфично водка раз для графических приложений если вы играете в игры на компьютерах на персональных компьютерах там очень часто в настройках игры есть огромное количество параметров которые вы можете менять чтобы изменить уровень графики потому что у всех разные то есть часто геймеры которые играют на персональных компьютерах a negro собираются свои компьютеры вручную по деталям и они сами знают четко какие какой уровень какие спецэффекты на их группу работают лучшие какие включить какие выключить обычно пользователи мобильных телефонах про это ничего не знают я видел мобильное приложение графические ну игры допустим которые пытаются повторить опыт игр на писе и и предлагают огромное количество настроек графики плохой паттерн такого делать не стоит нужно именно настройки графики сделать самому и выбирать их от автоматически для используют для этого лоды допустим лоды это расстроит как level of detail это когда по когда само приложение определяет мощность устройство и выбирает разный уровень геометрии допустим есть то же самое там какой-то там модель автомобиля двух разных вариантах попроще геометрия и посложнее и для более слабых устройств он просто и в память загружает более простую модель называются ладами для определения модели аппарата то есть для как раз для того чтобы выбрать более сложный лот мы берем или более простой для она вес девайсах мы используем модель самого телефона мы спрашиваем через и пить или операционной системы какая у него модель это на apple работает потому что модели телефонов не так много с андроидом сложнее потому что дроидов вариантов моделей тысячи все все туда модели в свое приложение забить невозможно поэтому использую модель чипсета их меньше и хотя бы сотню это не всегда работает потому что как я уже говорил есть неадекватные комбинации если мы даже знаем модель чипсета gpu для android может так статься что этот группу зерно не будет толком работать потому что у него плохой циpкa но ничего не поделаешь всех люблю творить тот кто купил себе какой-то ноунейм китайский телефон сам виноват и заключение до мобильники в принципе никогда не сделали и не создаются для графики производители мобильных телефонов в первую очередь всегда будут смотреть больше внимания обращать на пользователей которые читают mail и браузер интернет и может быть иногда читает фейсбук те пользователи мобильных телефонов которые либо ты еще поиграть в игрушки они всегда будут так где-то на бэкграунде для производители мобильных телефонов они они их не будут думать особо игры всегда будут бонусной фичи на мобильных телефонах никогда не будут со мной личи и да как минимум я как разработчик который пишет для мобильных телефонов приложения с интенсивной графики для меня это все фан то есть меня нравится разбираться в этих всех страшных ужасах и находить для них решение неожиданные часто и если вам нравится играть в игрушки то лучше играйте на консолях и писи не играет и мобильных телефонов там никогда не будет такого уровня графики как на консолях и это вроде бы все то что если подождите хлопать не надо пока у нас здесь есть дымка который я еще не до показал давайте посмотрим сколько сейчас кадра в секунду он она выдает может быть я конечно ошибаюсь но чёрт она почти не упала всем но 30 кадров тротлинг не включился ну ладно это неважно но по сути дела может быть просто мало времени прошло или здесь в помещении достаточно сейчас прохладно поэтому тротлинг еще не успел включится но он чуть-чуть падает об падает падает 26 уже нормально общем тротлинг потихоньку начинает включаться на самые если она поработает на такой нагрузки чуть дольше он потом уже упадет до 15 кадров в секунду потом еще совсем на красной черты уйдет просто сейчас уже у нас нету времени ждать этого вот так вот вопросы будут спасибо за доклад вот вы заметили там такую особенность что сейчас шейдеры компилируется на gpu а вообще хорошо было бы чтобы они сразу поступали бы в бинарном виде вот с этой проблемой сейчас пока что еще не разобрались до производителя nu-metal то есть там все равно швеллеры компилируются нет вот как раз новые api нового поколения и вулканы метлу и перед x12 они уже бинарном виде шейдеры посылаются драйверу gpu там есть уже без стандартный бинарный формат получается вот эти вот современные gpu они мы ну для обратной совместимости также компилирует опэн джи эль с да и майкл получаете да да то есть уже с последних мобильных телефонах они поддерживают и старые api и новые api ну старые постепенно будет deep реке тиц и да то есть все таки это лишнее какие-то ресурсы на стороне gpu для содержаться 2 компилятора для пришельцев и будет точно но я конечно боюсь дать оценку сколько лет пойдет на чтобы опыт грел вообще исчез но я думаю лет 10 20 минимум то есть стоп он грелся на меньше надолго останется спасибо пожалуйста спасибо за доклад у меня вопрос по поводу перегрева когда там сказали что средняя сессия занимает 15 минут и если значит мы выберем время такое что кратным будет включаться после 15 минут а вот то что средняя сессия занимает 15 минут не может быть связана как раз исключением трафик может ли тоже об этом думал я тоже об этом думал на сам ленив не на всех телефона включается тротлинг потому что допустим это слабых телефонах мы используем более низкий уровень уровень графики и там тротлинг допустим как я показывал benchmark galaxy s4 s5 они могут жить гораздо дольше без троттлинга то есть на тропе включается на самый последний как раз то есть нет такой разбивки вот средний сессии по скажем по моделям там такое такую я не делал peach марка прямо по моделям но скорее всего она может влиять но на небольшой процент девайсов пока еще только на самых последних а девайсов красот уровень тех девайсов которые показал сам начале которые уже превысили по hardware уровень консолей вот на них это больше все влияет sim здрасте спасибо за доклад у меня такой практический вопрос насколько востребованы вообще разработчики вот именно графе графики вот шейдеров от вот этих вот всех штук вообще на рынке есть вакансии там есть выход есть вакансии меньше конечно чем разработчиков других приложений как например каких-нибудь там банковских приложений по сути дела любая компания которая делает игры для мобильных телефонов и не только для мобильных телефонов всегда нужен какой-то специалист который понимает как работает группу и такие специалисты довольно мало на самом деле и сейчас последнее время с появлением современных движков для игр на подобе unity или анрил engine 4 компании которые делают игры у них появилась возможность нанимать на работу ребят которые в принципе не так детально знают как внутри это все устроено эта графика но любая компания в какой-то момент они достигают уровня что необязательно просто не могут обойтись что никакая не могут начать более простенький проект более простой график и как бы ребятами которые не имеют опыта работы с gpu но если они хотят конкурировать с компаниями которые делают именно высокого уровня графику тогда им все равно нужны такие специалисты к сожалению работа ним немного в такой сфере тебя есть интерес это интересно спасибо за доклад вопрос такой обрабатываете ли вы как-то ситуацию включение троттлинга и занимаетесь ли предсказанием того что вот-вот он скоро будет может нужно что-то сделать этим не занимаемся во-первых потому что старые пять как минимум вообще не позволяет об этом узнать и каким образом то есть когда запущенное приложение на телефоне приложение я кстати я не уверен через новые пиа и вулкан если возможность узнать что случился тротлинг начался насчет этого я точно не знаю а вот старый open gl и директикс они точно это не говорят то есть принципе ты можешь как врагами по разработчик просто предположить что измерить fps какой еще эскадра уровень кадров в секунду и по нему как-то предположить что сейчас начался тротлинг хотя она самолета может на фпс может упасть по любой другой причине хотя тоже самое перекомпилировать наши здоров внезапный момент что это не надежно будем пера тура температуру не дает op систему по-моему до кучи не и любая окей а ситуация например режим сохранения батареи в андроиде в айфоне как-то обрабатываются в графических приложениях мы не обрабатываем сейчас эти вещи привет спасибо за доклад у меня такой вопрос и рассказывал про unity вы все игры на этом движке пишете для у нас каждый проект на разном движке раз получается долл сейчас проект с которым я работаю на unity поэтому неудобно было дымку на unity сделать вообще чаще всего же unity пользоваться я так понимаю он сейчас очень популярны и один из самых популярных сейчас как раз семена конкуренция андреа 4 и unity они же пытаются я провела рынок но обычно и из разработчик но был такой небольшой опыт писал игру на unity и когда я искал инструменты но движке на чем писать все советую только unity а я вот более детально так и не понял в чем его плюсы преимущество над другими движками но из-за чего он более массово используется для разработки игр может быть что популярность unity может быть больше связано с тем что он был первый первый движок такого у меня трехмерный который попал на рынок то есть она в свое время он был единственный у него не было конкурентов во первых во вторых у них хороший маркетинг у них допустим на любая конференция хоть как-то связано спор с программированием графики или игр там будет огромный стенд с unity там с бесплатным кофе и так далее что они вкладывают огромные деньги в маркетинг на самом деле и кроме этого всего допустим если сравнить тот же самый андрей джун unity мне часто нравятся unity больше потому что анрил engine он больше рассчитан на ребят которые не знают как делать игры и как программировать gpu он рассчитан на новичков на совсем зеленых ребят если в анри ли mandrill не дается свободы такой то есть если как более профессиональному разработчику unity будет удобнее смотрел новичку анрил будет удобнее чинить вот насколько я знаю сейчас не только в unity ну имущество на или есть такая функция как портировать приложение сразу в браузер если я не ошибаюсь это что-то типа а сам джесса либо web assembly но может быть я ошибаюсь пользуетесь ли вы эту этой функциональностью и думали об этом до меньше как за будущем лет будущее лизать ты умеешь эту как и прямо из unity можно испортить и исправлял проложим тадам они гораздо для этого используются в бегал то который говорил который базируется на api а подъезд 2 это работает не всегда работает код они так и unity код сам цепочный код пишутся на сишарпе они сишарп транслите руются java script каким-то своим танцем транслятором и большая часть приложений работает как бы особенно простые приложения мы это пытались использовать для нашего веб-сайта нашей игры пусть у нас игра с гонками и мы хотели сделать чтобы ты заходишь на веб-сайт игры за логинишься туда тем же аккаунтом что логинишься телефон и там же можешь свои машинки покрутить трехмерные по сути дела тоже как бы игра будет там но это мы так и не доделали в принципе это были только осталось на на уровне эксперимента то есть я могу сказать да что это работает но и мы это не используем особо вообще вот по ощущениям есть ли у этого будущее возможно для социальной для игры в социальных сетях этого есть будущее хотя игра в социальных сетях потихоньку начинает умирать народ уже не так много играет выиграю в социальных сетях как это было раньше то есть для социальных сетей это идеальный вариант это клёво это гораздо лучше чем было unity раньше заставлял игрока ставить на browser plug-in специальные чтобы unity игру запустить теперь это можно работает без плагина на червя был но минус опять же что допустим если телефоны и писи компьютеры они уже ушли вперед с новым поколением api вулкан то vgl не собирается переходить на вулкан то есть эти опять же ограничение уровне графики которые ты можешь на браузер и показать по сравнению даже с мобильным телефонам а вот следующий вопрос допустим если не игры то на чем какая-то инженерная система допустим это проектирование какой каких-то зданий как вы считаете на чем лучше было бы это писать я имею ввиду opengl 3ds или еще что-то или unity либо unreal с такой возможностью портирования в браваде вообще из той исторические для приложения к 1 всяких инженерных всегда использовался open gl даже допустим если microsoft при помощи своего директ икса они захватили рынок компьютерных игр direct x очень популярен именно для компьютерных игр то для приложений которые как какие-нибудь риддик turn и они всегда использовал погорел даже под windows и так вот так получилось исторический я даже не знаю точно почему может быть он более как бы низкоуровневые что-нибудь такое то есть direct x они больше света на игры ориентировались я бы посоветовал написать на чистом чистому панели тогда можно портировать на bbl тоже несложно потому что вы обвели open gl это один и тот же api по сути дела там и там и там не нужны такие навороты как допустим есть в unity что unity он позволяет там всякие после эффекта накладываются там чтобы картинка была сочинение красивее для архитектурного приложения это все не нужно спасибо большое у меня такой вопрос почему мобильной игры мобильных телефонов никогда не догонит соответственно консоль то есть основная проблема в том что мы слишком много как бы электричество жжем именно для мобилки с одной стороны с другой стороны мы недостаточных охлаждаем в этом проблемы лиг от ну то есть условно говоря можно прекратить вентилятор телефон еще что ну перед да но только по сути дела первая половина моего доклада как раз была ориентирована то что вы посетите все проблемы которые есть дат если если и проблемой у нас уйдет у нас есть вулкан от остается перегрев батареи теоретический ты можешь на мобильный телефон перекрутить какой-нибудь большой вентилятор если смысл потому что тогда это уже будет не mobile телефон ты уже не сможешь положить его в карман проще тогда уже все таки играть на консоли и наливное компьютере дома чем носить эту бандуру хотя есть вроде как начинающейся рынок порта был как раз-таки игровых игровых девайсов nvidia свой делает долг называется но неважно общем есть рынок но он небольшой сих пор этот рынок сейчас как бы так очень healing идет порт обама игровые девайсы которые карманы когда у нас это тоже не пошло такие тоже были эксперименты даже были сервисы такие что ты можешь дома купить себе очень простой компьютер играть тоже через streaming не пошел этот бизнес почему-то людям не понравилось я не могу сказать там есть тоже свои какие-то маркетологов и тонкости по тонкости маркетинга что может быть и сами игроки они ощущают разницу во первых во вторых может быть сына сами компании которые продвигали эту саму идею не смогли достаточным образом к это внедрить массы может быть в этом проблема но эта идея была интересная но она идет на убыль и порта был мобильные девайсы тоже на убыль и то и другое я большой почти не спасся немного не соглашусь здесь потому что во первых но всем известным по playstation portable psp psp vita то мы все остальное которая до сих пор в японии имеют очень большой рынок и очень большое количество компаний de peche под них игры что же касается вот того вопроса о рендеринге на стороне серверов и пересыла нее на сторону мобильных девайсов технология сейчас развивается на самом деле nvidia есть целый там отдельный ряд называется nvidia grid плюс тоже sony playstation позволяет подключать psp и доигрывать свои игры который рендерится на playstation 4 в действительно были такие компании ты правильно очень сказал проблема в том что их выкупила все время microsoft и sony они поделили эту компанию назовут это было британская вам если я не ошибаюсь семь лет тому назад купили компанию и забрали все технологии то есть а вот этот вот видео рендеринг который в claude идет он он до сих пор очень работает хорошо кстати вот новая приставка от android от invidia господин как называется а она как раз очень хорошо использует технологию и можно во многих session и игры играть на на на android ве ссоре я просто старая ведь ты горд и все прав ты все правильно сказал что технология сильно развивается на становится лучше но проблема вот этого рынка в том что игроков не становится больше то есть игрокам это технологии не нравится хотя она становится лучше но игроки все равно еще и не доверяют может быть у нас будет может быть будет какая то через несколько лет вторая попытка крупных компаний разрекламировать эту идею игрокам заново но пока очень мало кто этим пользуется все на все образ ответил спасибо тогда что пришли отдыхаете теперь"
}