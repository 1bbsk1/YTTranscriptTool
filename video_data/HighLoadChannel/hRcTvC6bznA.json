{
  "video_id": "hRcTvC6bznA",
  "channel": "HighLoadChannel",
  "title": "Особенности микросервисов на примере e-Com-платформы / Андрей Евсюков (Lamoda)",
  "views": 7885,
  "duration": 3003,
  "published": "2018-12-25T01:53:18-08:00",
  "text": "у меня сейчас влад про микро сервиса ну приду расстрел что это все уже было самом деле и я большой буду зная про то какие проблемы возникли когда мы пытались внедрить меня зовут андрей седов я системный архитектор компании ламода и я развиваю и камер с платформу компания la воды у нас довольно большая даже когда вы уже сделали заказ на сайте lamoda.ru все это уходит наш ордер processing потом это выходит наши склад на у нас тоже есть полная система автоматизации потом это все уходит фуры едет в транзитный склад на транзитный склад приезжает курьер на автомобиле у нас есть свой парк автомобилей и потом это приходит еще либо в поэзии либо вам уже курьера доставляется помимо этого нас есть собственная студия guerrilla фотографии всей одежды потом за все ретушируют это тоже попадает на сайт или вы можете позвонить в колл-центр который тоже весь наш и автоматизирован тоже нашими системы все в целом порядка 60 систем и большая часть из них это наша собственная разработка но сайт ламода заходит порядка 11 миллионов пользователей каждый месяц и вот эта часть которой обрабатывать онлайн запросы пользователей мы выделили в отдельную часть и назвали и камер с платформой mycommerce платформа есть одна отличительная особенность от всего остального то что backend то что автоматизирует операционной деятельность это то что налаживать очень гибкой там большее количество свечей делаются чем во всех остальных системах продукты хотят делать очень много экспериментов показывать какие-то новые фичи что то не получилось откатить быстрый быстро все должно быть очень мягким и раньше у нас там было очень много монолитов и века мерхнов форме и в операционной деятельности я расскажу про один из них это система обработки заказов or data processing там есть часть которая тоже обрабатывает онлайн запроса и та часть которая касается создания заказа когда вы набили в корзину уже какие-то товаров и перед тем как вот вы нажмете большую синюю кнопку отправить заказ это вы попадет именно в эту систему что же такое лордов processing ломать ну в первую очередь это сердце ламода одна из самых старейших систем делалось она давно написано на печке там порядка 30 разных доменах моделей а поднимите руку кто знает что такое домен на модель отлично очень много речь конечно же права ddd я тут как ты его коллеги спросил что такое домен на модель и она не сказала ну это же типа как домен lamoda.ru вот значит света лежит в мускуле там очень много таблиц десятки миллионов заказов в общем такая типичная картина для монолита и но чтобы вам сделать новую фичу потребуется порядка шести месяцев на сайт звездочка специально это понятное дело не на время разработки а это время когда уже фича продуктового родом api и когда она уже появится на продакшн почему это происходит я выключил класс а дело в том что монолитах есть такая особенность что команда которая делать это такой узкий круг людей и порог вхождения в этот проект чтобы туда добавлять новые фичи очень высокий у нас выходит порядка там трех месяцев пока человек начнет делать какие-то ну действительно стоящее фичи как правило это срок испытательный срок поэтому если у вас есть какая-то фича вы кладете в backlog команды и когда-то она его возьмет понятное дело что более приоритетные проекты будут делся раньше еще бывает такая штука как в за 54 поднимите руку кто знает что такое уже меньше он вкратце это закон который говорит как именно нужно отправлять онлайн чеки в налоговую понятное дело что если компании не следует этому за кого-то и могут вообще просто-напросто прикрыть совместно все проекты откладывается делать вот 4 и вы собственно сидите и ждете еще дальше собственно перед нами стояла одна большая задача сократить time to market собственно уже про это сказали да что же делать мы решили что имею для коммерческого формы нам подойдут микро сервис вообще мой самый любимый слайд понятное дело что уже была какая-то экспертиза там у людей которые у нас работают была какая-то экспертиза в других компаниях с которыми мы общаемся мы ожидали уже какие-то проблемы уже такие но он ищет и были проблемы которые возникли позже а сейчас мы немножко поговорим о тем о том что мы уже ожидали и я быстро расскажу как мы пытались это решить даже вы что тут удобнее будет ходить ну во первых есть такое понятие как распределенный монолит то есть это когда все поделили микро сервисы но при этом связность между сервисами реально очень большая но это все потом только уже раз поздно по всем командам по разным людям и никто вообще не понимает что делать тут мы опять пришли к нашему любимому ddd вы сказали что мы все поделим пола домены моделям по одной модели на сервис и и самое главное один сервис будет иметь не более 1 ответственности ok а нам сказали что особенно админы ребята ну сервиса будет много как их вообще имя управляете нас будет улучшаться нагрузка на сеть но вот как раз три вечера среды я говорил про нагрузка на сеть ну по поводу того что и будет много едим не будет сложно управлять ну мы решили поначалу честно сказать подзабить ну просто потому что молитвы камеру распилили на какое-то количество микро сервисов это происходит не сразу что-то сразу распадается на десяток нет их было не очень много но и там не знает у нас где-то загашниках лежали 10 гигабитной карты и такие подумали что наверно не будет правлю зоопарк технологий у нас как-то давно еще была такая условность что каждая команда может выбрать себе так технологий самостоятельно то есть при разумной аргументации может выбрать язык технологический стек и так далее понятное дело что с микро серости нас так не получится если каждый будет у нас выбираю все что хочется у нас будет просто мест мы сказали что мы будем принимать общепринятые стандарты мы сели и написали очень много гайд line of первую очередь мы выбрали протокол норме джейсон рпц и его немножко модифицировали сделали так называемый ламода эдишен это все то что касается временение джей би си юн ок хотите вечере тебе то есть get запрос и читающие под запросы пишущие там где нам нужно было сохранить кеширование например именно для пол запросов мы продублировали часть параметров get запрос и дальше мы сказали что мы напишем полностью правило как мы будем именовать переменные методы а название сервиса все все все все все чтобы не было никаких холивар of a для того чтобы мы при построении нового сервиса теряли как можно меньше времени на некий бойлер plate и какие то опять же споры а вы выбрали slogger как единственный способ описания спецификации почему минус лагере я скажу чуть позже был разный выбрав в общем выбрали swagger дальше мы сказали что мы ограничим стек технологий мы выбрали три основных языка это именно что касается и коммерсант формы и того php и python это значит что никакого рубеус никакой манги вот на все эти три языка мы написали свой стандартный сервер который у нас удовлетворяют нашему гайдлайн ну а мы написали свой клиент и сделали конечно же код генерацию на основе сагир спеть им и плавники пришли такому понятию как специфичный фирс кто знает что такое спецификацию first а вообще очень мало класс это значит что тогда когда вы начинаете делать новый микро сервис вы в первую очередь опишите спецификацию описываете ее формате 100 гера и ее уже передаете другим командам вы его фиксировать и на нашем портале dogs lamoda тек то есть если я например хочу интегрироваться с каким-то новым микро сервисом я захожу на эту на этот мой портал и вижу список всех микро сервисов и к месту от форме выбираю нужный и вижу контракт со всеми полностью описанием как этот микро сервис работает и как мне с ним интегрироваться и только после этого я уже приступаю к не посредством и кодирования это саяка она уже является неким стандартом де-факто вопрос конечно же возникает а как же поддерживать актуальной спецификации так как у нас есть куда генерация то у нас все можно автоматизировать меня пример есть союз так specs есть кот генерации написано no go я это все к мечу стаж дальше у меня вам будет который автоматически подхватывает паху coupe pull request у делать сборку в докере и отправляется на q&a стенд дальше у меня моим портале док сломана те кто встроенным ссылка которая идет на нужную песочницу и забирает эту спецификацию то есть каждый сервис каждый микро сервис умеет отдавать собственно спецификацию формате json и яму таким образом у меня получается что спецификации первичного я сначала делаю модификацию там все к мечу и у меня все автоматически обновляются ну в общем то написать спецификацию это дело одно точнее гайдлайн и какие-то стандарты а потом это все еще нужно пойти и рассказать своим коллегам а у нас есть еженедельные встречи на которых мы обсуждаем какие-то наши факап и делимся опытом например если кто-то usa тот же салон и кого-то тоже это нужно заюзать мы беремся каким-то своим опытом и на этих же встречах мы говорили о том как мы будем делать гайдлайн и мы составляли какие-то стандарты на самом деле это была самая сложная часть почему была мечта договориться с программистами о том даже какой кейс использовать кремль кейс или кейс очень сложно зачастую людей возникали прям даже истерике я не шучу кто-то очень хотел отступать от того к то мы к чему уже привык сколько у нас ушло у нас примерно ушло 3 месяца на то чтобы написать все гайдлайн и и еще одета три месяца после этого когда мы же их уже выложили на нашу конференцию когда большая часть микро сервисов стала им следовать а если что мы еще сделали мы все это подпирали этим процессом если я делаю какой-то новой micra сервис мне нужно пройтись по чек-листу и сдать сервис поддержку если там есть какой-то играть в виде интерфейс еще должен провести тренинг в этих же в этом чек-листе есть гайдлайн и о том как должно быть построены логирование мониторинг и диплом но то есть понятное дело что и тогда когда у нас уже все было в куда генерации и большая часть игра сервисов делалось уже на новом туре нге то чиклис проходился уже очень быстро потому что лагеря не мониторинг все это входило в нарды touring ну админа у нас например снова формат на героиню меняли за последний год 3 раза раньше приходилось изменять вручную ну а теперь просто перед скачком генерации все работает в общем запустили мы микро сервисы начали получать профит тычет стали выпускаться быстрее но если вместе с ними пришли новые проблемы сделали мы все по доменам моделям сделали по одной ответственности на сервис зависимости между сервисами она становились иногда не очень явными давайте разбираться вот есть тебя сайт и у него есть каталог у него есть еще и сервис корзины и сервисы шли смотрите повторить нажимаете сердечко и он стал там есть сайт понятное дело ходит каталог для того чтобы делать поиск показывать товары сайт хоть конечно же корзина чтобы показать сколько восточных товаров и в каком количестве и виш-лист но тоже ходят что показать какие то у вас там категории эти такое как ни странно корзине тоже нужно идти в каталог чтобы обновлять ценах на ваш танец в каталоге угадайте что дальше все правильно и шлиц тоже должна ходить туда же вот на памире это очень простая схема если добавить там еще пару операции то у нас начинается циклический запрос что же делать а йода подсказать что нужны fly мы опять обратились нашим ddd ddd мы делим флаер нас есть сервис и пиа и потом доменный слой инфраструктурный деле очень похожие схемы нас на мире высказались у нас есть micro сервисы который представляет некий теперь они просто не как шлюз используются дальше у нас есть micro сервисы которые содержит бизнес-логику они не могут содержать у себя какой-то сторож какой то какие вы или сторож нет не обязательно и есть дата сервисы которые тоже содержания логику на самое главное в них нет бизнес-логики они как правило могут быть в рапирами например ну вокруг нам редиса или там подписи в защиту они очень тонкие и вот так у нас модифицируется наша схема у нас добавляется 3 на в сущности логичный вопрос не увеличится ли этого винным образом количество микро сервисов на самом деле нет точнее до за увеличивается но это не проблема тут профиль который мы получаем потому что зависимости уже куда более явной а он перекрывает небольшой и пока что их быть будет много двигаемся дальше плотно тестировать новые фичи если я не сделал что это именно новый фичи то есть у меня уже есть micro сервис в продакшене игоря нужно туда добавлять новые фичи раньше у нас была проблема к собственно это уже съемка должна быть знакомы если я хочу сделать что-то новое я иду в команду и кладу их backlog задачу и они делают ну помимо того что это будет долго делался но еще и тестироваться тоже будет очень сложно и канал платформе нужно делать очень много печей соответственно вот эта схема нам не подходит и вы пришли и вот какой схеме contributor фичи тестирует фичу минут внутренне а у меня есть micro сервис и я отвечаю любой человек может прийти ко мне и сделать пул request и сказать что он сделал что-то новое я его как owner посмотрю проверю что там есть unit-тест и функциональный тест это обязательное требование проверить что все работает заметку request сделаю released и выключи все этого production а не можешь прийти 23 человека титул request of может быть очень много на самом деле вот это вот модификация как бы она звучит логично но вы даже не представляете какой ботфорт она вызывает вызывало раньше у моих коллег я расскажу врач приходит ко мне коллега и говорит одарив надо запили фичу игры слушаем и сейчас заняты ну вот таких вот но минимум через месяц может сделать ну ладно игры но ты можешь делать сам он только что у вас там goulding нет я не буду и уходит и туда начинает оставили проходить все 5 стадии принятия потом приходит ко мне и говорит слушай это я там посмотрел вроде не сложно там нужна пара строчек добавить начинается торговаться и говорит но вы же потом протестируете его же там есть калашник y атрибутов фичи тестирует фичу опять уходит возвращается через день говорит а но слыша я поговорил с нашим к инженерам но там вроде не функция несложного совсем докере всего стандартизированы сейчас все раскатали вроде подняли окружение все вроде сами с нами целом хорошо с примесью игру да и уходит и они довольно быстро все сделать я довольно быстро все принял все вы выехала на продакшн это через месяц когда он пришел ко мне еще раз и попросил то же самое у меня даже вопроса не стоило добавить о самом деле просто примесей request всякий профит почему именно contributor например я помню авито мне кто-то рассказывал там другой подход танк тестирует тот кто является концу грамм данных а у нас так не получится почему браун что как правило когда вы делаете какую пищу вы затравить очень много микро сервисов соответственно если большая часть из них это вы не концу мир а продюсер данных то облачается вы опять же перекладывайте тестирование на чужие плечи это не очень хорошо вот поэтому пришли имя такой схеме вижу что вот этот самый интересный опрос очень хочет спросить у кого есть практика дежурств когда разработчики и жюри за сервисами ну немного вообщем у нас есть такая практика ломали у нас есть первая линия поддержки это наши админы и есть график дежурств он как правило там тех любили какие-то север и которые являются очень хорошо в сервисе им звонят мог бы даже ночью позвонить они на это соглашаются сами раньше была на самом деле все проще у нас было немного сервисных команд нас было обязательно правила по два человека на сервис причем это мечта если первым не дозвонились там ну бывает что человек может быть не состоянии например это пироженку есть липкую не может дать эльфам то занят 2 очень просто вот сми красивостями раз так не получится у нас в и конечно в форме уже больше тридцати микро сервисов и порядка 15 17 человек который вообще готовы дежурит было часто так что кто-то побежал туда готового я хочу ночи спать лучше ничего не хочу ну и каждый месяц прибавляется где-то по одному новым микро сервисом самом деле это проблема которую мы еще не решили вот мне кажется это то что мы самого начала немножко недооценили вот и плюс и ситуация каждый месяц сменяется график мы строим вручную и мы снова поделили сервисами сказали что есть критичные сервисы и бизнес значимый по которым все еще будет два человека по остальным можно накидывать на несколько сервисов на но человека на самом деле есть micro сервисы которые там стоят по полгода с ними вообще ничего не приключается не все хорошо вот но скоро пора отпусков и людей будет меньше и как это все решать летом мы еще не знаем поэтому вот те кто подняли руки мне будет очень интересно послушать как вы эту проблему решали вот у нас это все еще пока он говорит правду о самом деле последний слайд резюме мы добились успеха мы повысили сократили точнее time to market ну то есть если раньше у нас нужно было добавить новую фичу в создании заказа мы очень долго ждали то сейчас я понял у нас рекорду два часа дня не написали что нужно добавить новое поле там обмен шесть часов вечера этого же дня это уже была на продакшн по моим успех а вот то что мы недооценили это пресловутый человеческий фактор то есть сложная дежурить сложно донести людям какие-то новые концепции и перестроить процессы внутри команды внутри разработки меня все вопросы вот там мало ли чего спасибо за доклад у меня вопрос по поводу спецификация first а вот чем вы пишете спецификацию своего ра ямале джейсон руками то есть руками текстом редакторе да да спасибо еще вопрос был вот вы говорите что комплект контрибьютором пишите мне теста функциональные тесты вашем понимании функциональный теста что такое если вы монтируете какие-то часть 7 микро сервисов которые он ходит либо базу данных и проверяйте уже как blackbox но только с маками понятно можете вкратце рассказать какую структуру вы для этого используйте ну там недорогих не так быстро это все рассказать довольно много чего давайте мы с вами обсудим после очень много информации это прям на деле доклад и да вот можно просто есть по транспорту передачи или у вас напрямую микро сервис между собой общаются здесь ничего в контексте и конечно вот форме они общаются напрямую то есть это то что должно отработать все chrome у дамочки теперь используется синхронный режим получать да да то что касается например на обновление данных каких-то осинкой пий построенные на катки вот но я про это вообще решил не говорить умеют и было докладе это точно целый отдельный доклад и нет еще вопрос такой спецификации которая описывает компонентную взаимосвязь что-то подобное то есть всю картину он получить не только описание новость садоводства гири всю картину всех компонентов посмотрите у нас на самом деле там есть целый that подготавливай архитектуру все вот это рисуем в имели у нас есть 1 черный комитет где мы обсуждаем как это все будет принимать какие-то решения потом еще следует запускается дальше по командам еще такой вот вопрос быстрый пол ладно это слишком долго снять пообщаюсь в этом хорошо спасибо большое за доклад вопрос такое вот каким образом отчеты вы строите ну то есть понятно проблемы да когда нужно множество micro series of получить данные отчета какого рода ну какие угодно ну вот вот обычно это бывает так когда нужно просить множество микро сервисов чтобы согреть и ровать какие-то данные ну это что идет в контексте там синхронного запросу это делать тут как бы и серость тоже там который в домен и занялись он опрашивать verify там видами ну и логика бизнес-логика которая их агрегирует уже даёт миру там appeler это то что касается непосредственно синхронных запросов то что на сайте использую или мобильное приложение если верить и прочитай какого-то другого рода которые там не требует синхронный режим это там совершенно по-другому слилось вы про синхронный режим не можете что-то более подробно рассказать я могу да это прям реально очень тоже большая тема мы используем как авку и то есть получается мы идем городке люк то есть игрока или для запросов для того чтобы красота агрегирует данные то есть у нас уже все стандартизировано и в принципе можем не интегрировать сервисы на прямую рассказать сходи вот в этот но остались консул пример где зарегистрирован сервис это тоже автоматически делается и он может рисковать сходить получить данные но ты все воспринимается как единое какая-то база данных каждый сервис это таблице есть какие-то ключи и так далее вы можете некий язык да просто использовать а пишущие запросу это собственно карты это очень хроники перед спасибо здравствуйте я сзади да спасибо спасибо за доклад очень интересно было у меня вот есть волнующий вопрос по микро сервисом вот у вас раньше был монолит вы привыкли к нему узнали как его обслуживать у вас был мониторинг вы понимали когда вас сломалась были какие-то alert и настроены в принципе вас всегда ломалась что-то одно ломался монолит или какая-то там у его часть а когда вот вы начали использовать микро сервисы они у вас стали изолированы и получается мониторинг тоже как-то стал немножко изолирован и как вы вообще решали проблему мониторинга то есть у вас раньше был определенные люди которые в мониторили целиком весь сайт а потом стали отдельные люди который мониторит свои микро сервисы или вообще как это стал как влоги ваться то всего собираются как это в одной голове уместить столько всего и за всем следить спасибо отлично вопрос спасибо первую очередь монолите ломается не что-то одно но то есть опять же решение инцидента это сложный был процесс то есть что-то поломалось и начинается расследование реально то есть вы играете в миссис марпл игре это что что зацепило и что было причиной на самом деле сейчас де бо жить проще мы там вели простейший как этот рейс айди мы можем отследить карту запросов и можем же более точно определить проблему по поводу мониторингов но все так же сливается там притаился у нас у нас есть и синга over to me теперь на 3 больше команд просто получает аль орды если это было раньше одна команда который получал огромную бочку а лифтов у нас разными трети что понимать откуда они то теперь разные команды там разные даже даже был дашборд из граф они и так далее что-то поддержки то с нами рим мне кажется тоже стал проще понимать что откуда идет непрямая что это из какого-то микро сервисе это относится к той или иной части вот если раньше это было просто ford последствия не кидали в команду процессе кафе у меня лапки вот я ответил на ваш вопрос спасибо добрый день я тут за день до скажете про versio нирования бей копытом дело делам винт пойнту тупо добавляете там в два или тупо поднимаете новый микро сервис новой спецификации нумер санирование в1 в2 собственно тематичность дефекация моим его можно прицепить на менять не никого не предупреждай есть там новое поле появилось но когда вы поменяетесь вы делаете по request то есть эта спецификация не просто меняется же репозитории а это всё меняется в ходе когда пробовали раз когда умер потом посмотрим по request и он посмотрит обязательность спецификации посмотреть совпадает там есть или нет вторых есть тест который проверяет обратную совместимость то есть там все есть точки проверки чтобы избежать или поздно до рабочего захочется там factory там весь кого-то на структуру поменяется а вы это все будут все обсуждается сау миром и принимайте какое-то место и решение а там есть какой-то на максимальный срок что там все всего все сильно сильно поменяется и на все интернете все таки или меняется то это возможно смысл или бы разделить этот микро сервис либо написать какой-то отдельный отдельные новый да спасибо ну да как вариант здравствуйте за доклад я хотел уточнить если я правильно понял вас взаимодействие между sape и микро сервисами идет просто рпц по домену если я правильно понял я хотел узнать пробовали использовать запросы через менеджер очередей синхронные я имел гопи имею ввиду если пробовали почему отказались и как масштабируется в текущей структуре микро сервисы менеджер чирей нас не используется 5 фраков q для синхрона я допустим у ребят из кафкой не работал рыбе то точно есть возможность синхронные пускать запросы синхронной обработки запроса нет по этому пути мы не пошли подскажите тогда каким образом вот на данный момент масштабируются микро сервисы ну просто поднимаем больше шансов докера больше инстинктов и над ними некий балансировщик там да да да у нас есть от балансиры где то есть х прокси по поводу серво discovery у нас консул в общем кто нас ошибок хорший корпус так вот все прилипло автоматически регистрируется но если парламент и еду там up stream через консул спасибо здравствуйте я сзади спасибо за доклад по поводу специфики чем first очень интересует такой момент вы же выкладываете в начале спецификацию оно доступно всем вот не получается ли у вас такая ситуация когда выложили спецификацию прибежал какой-то вроде бы фичу вначале реализовали но прибежал менеджер решил вот нам нужно что то еще что то другое фичу в итоге отложили спецификация доступно всем вот ну на самом деле не смешная ситуация ластик search зачастую он выкладывает спецификацию вроде бы у них есть фича всем доступна она не работает вот и фича в итоге через несколько версий выливается в провод может быть если напомнят вот такая ситуация решаете такие проблемы вообще если они у вас ну я сейчас свалил от мира есть какая то торчит ручка которые сделали выкатили она продакшене то есть не пропал но никто не пользуется добрые исполнили но оказался работает но во всем мире мы довольно много общаемся и мы все сидим там в офис пойти и такие проблемы очень часто обсуждают плюс у нас есть какие-то митинге вот эти вот и жизнь деле темы все обсуждаем как-то так спасибо я справа спасибо за доклад вопрос такой при монолитной архитектуре вопрос связан с правами доступа там airbag айсель когда монолитная архитектура вопрос прав может быть решается проще там достаточно нужно помнить модуля и действие от пользователя валиде руются можно или не можем случае сми красивая архитектура ты хотел бы узнать как у вас реализована система авторизации и проверка прав можно ли от этого имени в этом микро сервисе выполнять какие-то действия напрямую с вами кра сервис никто не ходят всегда есть какой то ли был бы int либо еще какой то gate и если настраиваться не на уровне микро сервис чуть выше то есть админа там все это настраивается через солдат и потом это все экологи руется то есть micro сервисы они выполняют все что им пришло а есть настроек какие твои которые в нем все это решается спасибо есть наса мире чуть-чуть отвечу есть эти микро серости и который попадает под аудит есть такой процесс там уже отдельно это решается но таких немного как правило ты в которой хранятся определенного рода данные вас спасибо за доклад у меня такой вопрос допустим у вас есть много микро сервисов как вы обеспечиваете транзакционных между микро сервис вместе вообще есть такой вас и как организована хранилище данных допустим у вас один мастер или в каждом украсьте русь своя база данных сам все зависит очень сильно игра сервис везде типа разу где-то редекс где-то рейде с репликой где-то под гриль стоит подпись репликой вот над ну теперь мы отказываемся вот все сильно по разному зависимости от задачи допустим вам нужно изменить данные сразу нескольких микро сервисов транзакционных как вы это решаете сейчас на самом деле довольно просто это все в рамках одного вопроса на прошивает если получил какой то неправильные ответы от он там делал какую-то отката есть например если вы резервируйте интервал этом который для доставки с часу до двух например и произошла вам как это ошибка бывает так что там например товар не оказался на стоке то мы просто потом разве резервируем трон еще одним запросом то есть у вас есть свой запрос на откат а если он не пройдет тогда что заметили от если теней который вы работы с определенным образом это понимает долгая тема долго темы я не про все могу рассказывать тяжелее спасибо наносите спасибо за доклад у меня вопрос на еду уже похоже на то что задавали по поводу локализации проблемы в ваших микро сервисов то есть сервисов много для понятные разработчики там очень достаточно хорошо понимает да что там происходит и как вы учите вообще первый уровень поддержки в лицей админов и тестировщиков которые ты тестирует как им находить локализовать эти проблемы в этих сервисах но я выросла в 3 виктор и довольно простой но он очень сильно помогает во вторых поддержки мы периодически устраивать какие-то тренинги мы рассказываем особенно про новый microserver понятное дело вот но чаще всего они просто локализуют проблемой тут же скидывает по определенной части у нас есть чатике по определенной микро сервисов зачастую до попадает какой-то запрос мы смотрим игры мнение не у нас это нужно обратиться там другой команде но все довольно происходит довольно быстро все примерно понимает куда есенина и точно то примерно понимает какому человеку стоит обратиться чтобы он это все сделал где нур и спасибо за доклад вопрос такой то есть не красился копыта все хорошо замечает она в кавычках скажу тогда был сущность разработки вот вопрос как вы переходили какая боль была когда программисты начинал писать именно под микросферы говоря то есть возьмем если мы основали до возьмем маску налить то есть программист просто что-то там сделать , какую-то фичу кинул свой отдельный блинчик про шею не теста сделать лор квест то есть если у нас и микро сервисы особенно если там фичи требует чтобы изменение было в куча сервисов дай ему для разработки нужно поднять все это где-то вот как вас происходит этот процесс смотреть его первых в каждой микро сервисы есть некий инструмент для тестирования которой можно поднять моки всех сервисов которые вы ходите море поднимается очень просто и очень быстро силу того что это опять же тот же с лагерь и даже кода генерации то есть вы берете специй просто на основе его генерируете мог то есть понимаете довольно просто плюс есть определенный правил опять же в миг файле в котором вы можете это все понять 1 операций все поднимается либо через dagger либо через наши ну там есть туза до тестирование mockery который называется которая всё понимает вот поэтому довольно просто дальше если это уже подальше переходит в тестировании тестировщик до должен будет разобраться как менять уже настоящий сервису чтобы сделать интеграционное тестирование мастеров щеки во-первых они знают почти все микро сервиса то есть они там общаются и плюс сила 54 стандартизации это сделать довольно просто все такие reserva на вы сливаетесь тебе нужный образ поднимаете здравствуй андрей вот ваш доклад про то как микро сервисы ответный удар вам наносит а вот расскажите пожалуйста побольше про первый удар вас был монолит у вас было сколько разработчиков но и бизнес наверное видел что фичи делаются какой-то скоростью до например за деплоить в два часа дня поставить задачи вечером выкатить весь монолитно как вы бизнесу это объяснили что нужно перейти на микро сервисе сколько времени вы уже работаете то есть они окупились сколько людей вы наняли это и все-таки overheat надо это мониторить надо это хостить нужно прокидывать этот рейс айдида между разными сервисами это все дополнительная работа вот какие у вас советы и вот расскажет чуть больше о вашей ситуации если сенсоре очень классный вопрос и наверное я мало что смогу рассказать я больше технической стороны собственно там руководители нашего отдела больше занимался вот это счастье общение с бизнесом как именно это происходило я к сожалению просто не зная с точки зрения разработчиков но все равно было изначально и сопротивление был монолит были люди которые знали как что-то делать идут большие реформы сколько у вас уже микро сервисов про как практика разработки ну вот марте прошлого года мы начали к этому приходить года и что люди думают им нравится сейчас работаю так да да да на основе это постепенно меняется я рассказал как раз этот кейс было сопротивление с этим не всегда гладко проходит это общение это правда вот есть люди более национальный вот есть люди которые не очень умеют объяснять почему это хорошо но постепенно постепенно приходит осознание того что есть профит потому что вы спрашивали купилась не окупилась насколько спрашивал бизнес горят что даже за год уже окупилась большой васвас несколько десятков программисты какой масштаб компании сколько у нас порядка 100 человек войти около 100 до 0 вместе с разработчики админы спасибо здравствуйте очень интересный доклад такой вопрос вы когда начинали вы сказали что у вас было 120 таблиц после того как вы внедрили микро сервиса и их стало 140 150 или осталось по 20 и сохранились ли между ними форуме керри на самом деле даже сейчас там нет жесткой привязки по фаренгейту из там есть проверку на другом уровне собственно для скорости работы это первый второй момент это база просто разъехалась но сеанса держал себя там куча доменных да там областей каменных объектов она просто разъехалась что-то мы упростили уже с высоты своего опыта минимизировали плюс там было довольно высокая и нормализация в силу того что они не хотели ходить в и собственно и конечно платформу за каталогом а им эти данные нужны для то что подражателем в номенклатура где-то в чеках опять же там есть экспресс который в пвз стоит на тоже нужно показывать данные из каталога вот они туда не ходят просто передаем их сейчас у нас немножко по-другому просто их убрали и через кафку просто ее там добавляем эти данные кинуть дублирование данных нету воин сильно меньше спасибо спасибо за доклад мой вопрос немного связан с предыдущим вопросом по поводу фарингии поддержки целостным данных еще один вопрос был по полтава основной профит был в разделении зоны ответственности и в проденем зон ответственности вот сократить time to market самый главный путь до порог входа сократить вот и вы сказали что микро сервисы выросли на бизнес уровень вот данные тоже микро сервисах но зона ответственности насколько я понимаю на бизнес уровне кто принимает решение у кого лежит зону ответственности когда меняется например каталог ведь он занимает несколько сразу сервисов зона ответственности опять распределилась также как монолите а это все решается собственно вас есть какими вот эти встречи и архитектурные комитеты которых это все решается то есть есть проблема она поднимается готовится решение потом она предоставляется на комитет и все это обсуждается коллективным также проблема решается как и в монолите собственную ну иногда есть человек который отвечает это несколько микро сервисов если вы об этом это да но это довольно редкий случай здравствуйте здесь у меня вот какого то есть вы используете джейсон swagger до джейсон и дарси вы смотрели не знаю в сторону может быть авра про табов отже рпц и вот то есть вот этого всего поверх http 20 и досмотрели выбрали флаги силу технических ограничений хорошо так и второй вопрос по поводу нагрузки на микро сервисе и если какие-то ограничения у микро сервисов по именно по пропускной способности может быть какие-то стратегии по троттлинга то есть то что вот этот микро сервис нельзя там нагрузить больше чем 100 запросы в секунду и это все должны знать и страны все у нас есть определенные параметры для каждого сервиса мы проводим лот testing вот мы примерно знаем этот потолок каждого сервиса собственно эта информация доступна и для все войти а там оставили настроенный родителями то есть и если где-то там что-то затупил и и просто просто отвалится и он сделал летрай вот если уж совсем там все перегрузил а то есть клиент нет детализирует там как именно к этому микро сервис обращаться и это там выставляется только для каждого car service определенной тайм-аут и количестве retrieve но если того что их прям совсем много просто пятисотку даст собственно прошлый блок прайды который у нас был это у нас есть такая штука и у нас повышается нагрузка в 10 раз это там скидки до 95 процентов и нас в этот раз по моему вообще не было ваших сервисов то есть мы все прошли а на это все решают коды кодами ошибок определенный код ошибки он понимает что именно уже сделать ретро они просто все отвалился черта добрый день спасибо за доклад очень было интересно на самом деле я хочу предложить контур доклад вот допустим у вас есть micro сервисы вот я говорю давайте мы сейчас микро сервисы просто заменим на модуле сделаем большой монолит сделаем модульности смотрите какие плюсы мы получим not я как программист допустим я хочу добавить 5 две переменных в 3 разных там микро сервисы ну три переменных три разных миша сервиса есть интерфейс и я могу у меня есть рефакторинг у меня есть навигация по коду это все в одном репозитории находится я перехожу добавляю сколько вы сказать 4 часа вас за неловко тканого поле у меня занимает 15 минут плюс комментов репозиторий на этом ваши цей час плюс выкладка там полчаса у меня два часа займет это вся вот хотелось бы просто услышать регрессионное таки ранее и вот мы сейчас и перечислили очень много минусов и очень много таких открытых моментов да вы наверно просто сейчас столкнулись с чем-то что вот прямо ну головная боль из-за этих микро сервисов 2 2 или 3 самых сложных маме вашей монолите сколько будет идти регрессионное тестирование когда вы сделали наука будет идти регрессионное тестирование преград но регулирование может идти по разному ну вот у нас сейчас идет в проекте на 15 минут мы немного раз параллель или задачи если запускать тесты по 1 последовательно нее там идут 45 минут например на 15 минут а это время этим месяц это немножко странно слышать что монолит огромной кодовой базы при что там регрессионное тестирование будет идти 15 минут у нас у нас небольшой проект вот хотелось я не будет может быть и заднего джипа на вид маленький москва у вас есть какие-то минусы с которыми столкнулись вот микро сервисной архитектура вы просмотрите говорите я вот ненавижу микро сервисную архитектуру за это было бы здорово слышать эти моментов в нашей проблеме этого не написал для hp studios таблиц регрессионное тестирование даже небольшой кичи ушло там типа несколько дней это вы про монолит а я про микро сервисы что у вас больше всего час раздражает микро сервисов все хорошо ну вот есть какие-то моменты обычно программист я вот допустим хочу сделать рефакторинг хочу просто перейти в другой микро стирать и посмотреть я же не могу это сделать просто этом навигация по ходу меня не работает вы наверное код не пишите перепишите чего печаль твой кот пишите сам для вот что больше всего раздражает вас там десяток repository знаю вот это вот то что говорите про навигации погода нет с этим вообще проблем у меня не возникает скорее вот эта интеграции между микро сервисами то есть у нас мы идем к гранд пели как я сказал но еще не дошли было бы круто будут делаться просто на основе каких вот этих языков запросто контракт на 100 300 для этого готова вы кидаете системы запроса она сама знает куда что просите как вы получаете уже кусок данных но это круто сейчас мы берем swagger с пеку блины сервиса не оперируем клиента найдите я тоже могу это получить я просто если меня все вы съели я просто пишу и тайский получаю все эти данные нет немножко другая ситуация в общем если вы спросите про то что сейчас меня бесит в министерстве этого то что нужно интегрировать разные клиенты генерировать постоянно и так далее соответственно что становилось на репозитории документация ненужное и залейте обновить вот сейчас мы идем графе ли это мне кажется будет сильно интереснее мы можем даже на лету то подхватывать и союз ведь уже актуальные и генерировать какой-то запрос на риту это тоже можно делать это будет очень быстро работать давайте обсудим уже после еще последний вопрос да наверное здравствуйте смотрите такой вопрос какого с размер команды на микро сервисе нет ли такого что у команды backlog перегруженный люди из других команд не могут за которым биллс потому что в них мало экспертизы в этом сервисе смотрите сейчас микро сервисах именно отдельных backlog очень маленькие там бывает он может быть один программист или бывает вообще нет программиста вопрос потому что работают и кто-то должен делать это будет contributor какой-то то есть ордер он может там ничего не делать по нему сейчас у нас продуктовой команды это значит что вы идете в контексте не микро сервиса течей которая затрагивает какое-то количество красивых как-то так и это backlog уже фичей они как этого сервиса или конкретных команды частые ли у вас ситуации когда он нужен запилить бизнес вечера на там несколько сервис забивает чаще всего это так тупо сейчас какой-то регресс ручной или вас только есть как вот в релизе стильным продавшим так и измене который несколько сеансов затрагивают у нас есть q&a среда там есть ряд песочниц и siri от официальной песочных где полностью реплика продакшена вот и соответственно если ты даже не хочешь ничего поднимать просто идешь и используешь там какой-то микро сервис но уже готовый у нас на зайца фронт кирилла мототек это то что сейчас на продакшен водки они как-то ждут пока кей вот они ждут пока несколько микро сервисов подтянуться на среду чтобы потрясти или у них есть синхронизация от мольера когда несколькими затрагивать один микро сервисы они ждут покайся в нескольких делаются какие таки оптимизации проводится тоже очень долгий насовали вопрос я я могу рассказать о нем мы можем вообще сможет позже да мы можем просто сейчас нужно закончить коллекцию андрей ещё одно задание для вас я понимаю что это очень сложно и дорого вам задали массу вопросов пожалуйста можете выделить какой-то один который вам понравился больше всего да вот тебе задавал вопрос да да да очень интересно спасибо спасибо большое"
}