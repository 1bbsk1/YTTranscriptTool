{
  "video_id": "dEyPpJPjV1Y",
  "channel": "HighLoadChannel",
  "title": "eBPF для анализа производительности Linux / Петр Зайцев (Percona)",
  "views": 2600,
  "duration": 2870,
  "published": "2019-05-15T05:08:40-07:00",
  "text": "добрый день добрый всем день меня зовут петр зайцев я представляю компании и вообще мы наверное больше всего известна как компания которая занимается проблемами mais quel но сегодня я буду говорить о другом я буду говорить о технологии и битв и о ее использование для анализа производительности linux ну в том числе часто это делается в контексте базы данных в общем я собираюсь поговорить о том вообще что такое и бпф и откуда он пошел мы посмотрим о том вообще как он устроен в linux и о некоторых практических примеров как можно и использовать тузы которые уже были сделаны которые поддерживают и wi-fi iv и так значит и wi-fi название оно такое наверное странно и до которая переводится как или расшифровывается как extended беркли пакет фильтр да там если мы говорим про анализ производительности при чем же здесь пакеты но на самом деле все это действительно пошло из создания фаерволов дата начала в каком-то 1992 году вашу жестоко много бородатых лет назад была сделана такая технология что написали ребята из беркли виртуальную машину которая позволяла даже на тех медленных системах медленных процессорах фильтровать пакеты очень и очень и очень быстро соответственно для linux эта технология была расширена и то что на самом деле существует в linux это и випов ну и на самом деле поскольку разработчики любят писать меньше букв то часто он вы можете увидеть на linux kernel из и так далее чтобы просто обзывают бпф несмотря на то что на самом деле речь идет о и wi-fi в общем в чем интересная штуку сверх ф да то что посмотрели на эту виртуальную машину которая была сделана для фильтрации пакетов и посмотрели на самом деле это же очень классный фреймворк вообще для обработки и других других ивентов да и в частности анализ производительности он может очень часто но сводиться к вот этой вот про бля проблеме when processing вот еще расширение которое улучшение которое было сделано в linux kernel это то что был добавлен жидком компилятор вот который позволяет получить производительность в linux еще лучше в linux непосредственно в main line гидре и wi-fi существуют 2014 года и он на самом деле очень активно улучшается да то есть на самом деле найду лучше результаты вас будут если вы используете наяву более последние ядра linux еще в последних кадрах он 0 и в последних версиях он был интегрирован в систему тузов перф да там которая но часто существуют и многих linux дистрибьюция да там и которой базовый комплект скажем так новых тузов для анализа производительности вот пример если вы можете видеть том что было добавлено самом деле читать какие улучшения добавлены были это не совсем обязательно что здесь можно увидеть до что вещи добавляются постоянно да там и даже в самых новых версиях ядра а есть что то что было добавлено вот значит как у нас вообще работают и gpf да там и непосредственное впф программа то есть у нас есть специальный свой байт код и villa в которой есть специальный систем кол который можно загрузить в ядро вот кроме того что это специально виртуальная машина которая более надежно до более безопасно чем какой-то просто стильный модуль загружать на самом деле она ещё проверяется на разные критерии например программа должна быть определенного размера она проверяет санта что у нее нет возможность что там есть какой-нибудь но цикл которую никогда не закончится да там и так далее вот но на самом деле понятно что писать ручками код на каком-то там байт коде да там для непонятной vertu машины это сложно неудобно поэтому что он самом деле используется то что есть для lg mc long есть просто таргет для ewi периода то соответственно можно писать эти самые программки на таком на языке си понятно дело что там ограниченных визир с размером доступными функциями и так далее да то есть там никакой geely psy да там или стандарт сила игры речь не идет что еще он и понимать до что в эту компиляцию и загрузку ff программ она на самом деле зависит от ядра поэтому обычно если вы посмотрите на эти втулки увидите что-то узы поставляются как вот эти вот эти программки которые непосредственно компилируются при каждом запуске чтобы они работали с вашей версии варсе версии ядра вот ну вот это вот примерчик на самом деле wi-fi и входа который я взял из тулы тисе пи там который один из наверное самых таких старых бородатых инструментов ядре который и пев то же самое используют использует на самом деле для любых параметров да вот и можем использовать параметр - д-да там который нам позволяет задам пить собственно говоря код программа которую ты себе дам будет использовать для того чтобы фильтровать данные значит давать над все то что я рассказал посмотрим виде картинки что-то более удобно да то есть мы можем посмотреть что у нас при использовать gpf есть понятно дело три части you юзовская дата мачеха то работают в режиме ядра в режиме ядра у нас работает генерация реке fight кода его загрузка и дальше мы через другие системные вызовы можем получать доступ такой структуре в ядре которые maps называется data в которой как раз и хранятся результаты которые собирать и wi-fi в программы мы как-то можем дополнительно обрабатывать и и выводить 100 hydra делает он как я уже говорил верифицируем это и wi-fi в программку вот дальше эта программка она подключается к разным танки правду про trace поезда там а собственно что она может использовать 6 источники данных и будет соответственно выполняться когда они когда они вызываются давайте посмотрим более глубоко теперь на евреев непосредственно в в linux ну для начала я хотел бы поговорить вообще о том как instrumentation в linux работает да то что мы говорим о анализ и производительности есть наверное два таких больших разных подхода да там один он связан с tracing да там у нас происходит разные события ведре вызовы функции может быть окончания ввода вывода может мы там по какой-нибудь там прерывание да там все что угодно да то мы можем это event памяти каким-то образом обработать другой вариант это то что мы можем делать сэмплинг да то есть вот если вы используете рф инструмент инструмент например перф топ или если кто-то использовал о profile да там то он на самом деле использует sampling да там через сампе мы можем посмотреть на стату системы где находится юзер фриц вскинул фрейд сможем посмотреть на разные например там цепью performance каунтер за там и и другие другие вещи ну значит когда мы говорим с и бекеев нам наиболее интересуют эти вот ивенты как tracing на самом деле с точки зрения тренинга да там если вы любите красивые картинки вот есть классный блог джулия в котором сила джули events когда слайды получите будет проще разглядите ural для него которое собственно говоря описывает как это все в ядре устроено в таких красивых картинках но просто но в двух словах когда мы говорим о linux прессинге наверное имеет смысл смотреть на несколько вот таких структур во первых это вопрос интерфейс с ядром да там какие у нас есть инструменты к чему можно присоединиться и получать данные да там здесь есть такие вещи как кей пробью про у нас есть в некоторых лены в linux персик linux поддерживается де trace и ряд других следующий вопрос какое обсуждая дадут нас вот есть проб который можно подсоединиться получать ивенты как на их обработать здесь на самом деле есть тоже несколько подходов у ядра есть во первых для некоторых и затем ивента встроенный ринг буфер дата в которых он просто их сохраняет и их можно там получать через пьер напротив с во вторых на понятно что на этот ивент можно собственно написать керна модуль и подвесить на него и сделать любой обработку который мы хотим да например вот от ул за такая как сидит она работает именно таким образом да там то есть используется те же само по большому что это пробы и на них навешиваем ся ну и следующий новый подход модный да это иви пев который когда мы подвешиваем на это стандартные стандартные программки на каком-то языке вот и делаем какую обработку мы хотим почему и wi-fi of он в данном случае хороший почему он очень гиппо да потому что если у вас есть production system да там и вам интересно поймать какую-нибудь сложную проблему наверное прям вот писать свой керна модуль да там и когда там и прямым и вставлять ядро на продакшен как то наверное не хочется да вот чтобы на и репьев мы можем относительно спокойно модифицировать его если мы написали какие-то там сделали ошибки в этой программе дата поскольку это работает в виртуальной машине проверяется на корректность то скорее всего больших проблем вот не создаст да ну понятно что можно сделать там медленную wi-fi в программу которую повесить на очень частый эвент будет overhead но по-крайней мере и тогда можно удалить да в этом случае что тут вроде там кернел abs мы не получим вот ну и третий компонент это конечно фронт-энд программы которые нам позволяют со всеми этими инструментами в ядре работать значительно более удобно на самом деле если посмотреть этот подход он также очень просто но можно провести параллель с наверное с нашими стандартными от узами да вот когда мы используем tool какой-нибудь как wins the top и остаться орда там что на самом деле происходит на самом деле эти тузы они читают данные через такой интерфейс как профи да там на долину большинство из них ну и это интерфейс как мы эту информацию грубо говоря там обрабатываем собираем да там и как как против с там получается это то что в ядре есть там по куче разных мест разбросанных уч аккаунтов да там которые которые нам представляют простую статистику которая через проков с и доступно следующий момент вот еще одна красивая картинка и и здесь не очень хорошо видно на там внизу тоже есть ural где можно посмотреть ее она показывает какие вообще тузы которые астон основаны на ebay впф соответствует какой путь системе linux либо же программка вот который можно использовать для ее отслеживания и что здесь интересно что что можно посмотреть видеть что практически все подсистемы для них есть определенные тузы которые мы можем можем использоваться следующая интересная картинка на мой взгляд тоже из того же источника она грубо говоря показывает что у нас было добавлено для ewi пев в разных версиях linux да там и то она несколько более старая чем то что то что я показывал да но здесь видно да что разные там и интересные параметры да например если мы хотим отслеживать эффективность инструкций процессора то там кэш миссис и так далее с помощью wi-fi авто то нам бы хорошо как как минимум linux 49 получить следующая картинка да эта картинка если вы когда нибудь смотрели презентации в живую дали или по слайды такого известного человека в мире анализа производительности ленусик брэндон грега вот он часто показывают эту картинку которая нам на самом деле говорит по инструментарий для linux рейтинга которые как category зуется как вы по их возможности и сложности использования да то есть мы видим что и репьев и тузы которую использовать немного где находится дано вот например row и wi-fi ров и рифов да там или бпф с одной стороны у него очень богатые возможности да там как с ним данные можно собирать организовать но это очень сложно да и вот мы видим как с точки зрения развития этой инфраструктуры с бпф у нас появился интерфейс носи потом у нас появился такой оттуда как би си си которая позволяет этим более удобно работать ну и вот наконец появляются такие тузы как белой или как pdf estrace которые позволяют делать программки еще более просто да там как грубо говоря однострочный программки да там не на языке си до этого на чем-то более простой мы сейчас это все видим значит что здесь нужно знать что и дынька система она достаточно активно развивается да там и доступность этих программ она может быть весьма разная да то есть я вот смотрел на ubuntu 1804 с в достаточно новым ядром да то есть некоторые тулузы они доступны просто инсталлирует пертуссин 100мл да там инсталлируем тузы из стандартного репозитория они есть да там вот какие-то например би си си она в стандарте еще не идет но ее можно скачать готовые пакеты просто излишнюю репозиторию да там а если вот нам нужен уже там фрейм более там простой tool этому ядру белой то его уже нужно грубо говоря собирать собирать ручками вот с точки зрения би си си installation как и говорил это происходит достаточно просто да там мы можем просто его поставить из из репозитария вот и пусть окна его поставили давайте посмотрим на некоторые тузы так сейчас вот у нас тут она может будет лучше но давайте посмотрим некоторые тузы которые в этом би си си пакете идут как с одной стороны и примеры с другой стороны как очень богатый на набор инструмента 1 ту на самом деле интересно в том числе что на самом деле использует sampling вот и он позволяет получить user и кино level tracing для программ которые вас выполняются вот чем это и интересно ну вот нам и часто анализируем базы данных да там и у нас и на 1 ребят из фейсбук для этого часто используя инструмент под названием pullmans профайлер до который по большому счету дам пиццы стать в москве льда там всех видов и можно посмотреть где кто завис проанализировал почему проблема получения этого классическим методом это то что мы по большому счету должны заморозить программу задам 5 лет вот и сейчас это получается достаточно достаточно интрузии в этом особенность у потоков много это инструмент получает это делается очень с очень маленьким с очень маленьким а верх это да что классно другой интересный очень интересно мой взгляд это анализ для блок девайсов лейкен себя то в какой на самом деле у нас происходит распределение да там скажем так скорости доступа к риску вот и вот до меня смотри смотрел илья космодемьянский тоже рассказывал как раз кипра и опыт систему даты могут рассказывал про разные проблемы с одной стороны до что нас вот есть может быть вием который в целом у них может быть а я в среднем они плохой да там но из-за разных причин могут быть задержки да там она на самом деле и когда мы используем с с динамитом возникают еще разные проблемы да там что вот как девайсу может быть там вот захотелось поделать garbage collection да там или же у него там еще внутри ки нибудь сложности которые иногда отследить сложно почему lighten7 ее как бы распределение вот такое особенно важно для баз данных да потому что в вас данных не все операции ввода-вывода на самом деле они одинаково критичны то есть операции ввода-вывода такие как там ледоход ну не очень важно да там или вот мы флаша в гоа grown где там что-то для чекпоинта опять-таки не проблема есть чтение для наших юзеров родов да там которые ну если он чуть про тормозил мы данного клиента чуть-чуть задержали да там но с другой стороны у нас есть такие вещи как райта hotlog флашинг да там наш традиционный лоб вложиться и пока мы его флашем у нас но другие транзакции к медицине могут да там если у нас происходит стал на таком операции вот на такой операции ввода-вывода то это всех резко на всех на всех влияет вот то есть такой интересненький инструмент на мой взгляд следующий да тоже инструмент интересно который нам позволяет трейси для всех процессов для кого-то процесса на самом деле доступ к блок девайсом да там позвали позволяет посмотреть на например а какого вот блок ввода-вывода у нас действительно идет датомир жители у нас запросы и или нет да вот 10 мы можем посмотреть полный trace грубо говоря как куда было обращение да так и с точки зрения рейтинг соскок а сколько это времени заняло следующий интересный инструмент на самом деле набор инструментов дата я здесь показываю для xp файловой системы на самом деле похоже инструменты просто с другим именем существует других файловых систем они позволяют то же самое отслеживать для файловых систем и здесь уже с разными то есть можно отслеживать по разными операциями да то есть вот здесь мы смотрим одна из опираться верху да мы видим эта операция для для чтения это нет на самом деле для для записи да то есть видно что операция записи весьма интересно с одной стороны у нее в основном распределений смещено к началу да то есть большинство операций записи проходит весьма быстро да там идут в данном случае в ssd cache или что-то в этом роде да но иногда бывают отклонения вот мы видим там небольшой всплеск который за не занимая да там больше чем насколько 16 миллисекунда и на самом деле это интересно часто отслеживать то есть это позволяет нам более высокий уровень датами на уровне блока девайса на уровне файловой системы что более близко к как приложение потому что проблема особенно когда у нас вот-вот идет высокая нагрузка не могут быть связаны как с непосредственно тем что у нас девайс тормози так и из-за самих там внутри них контент или каких-то там других проблем файловой системы вот защиту которым тоже интересно посмотреть да там если нам интересно отслеживать непрост не полностью просто histogram да там посмотреть вообще от что у нас тут происходило кого мы затормозили да то тогда мы можем это отслеживать через другой tool их стив-о слова называются которая говорит такие давайте посмотрим операции которые были медленно уровне файловой системы вот здесь мы вводим можем посмотреть и краски про то что я говорил то что у нас иногда операции в sing для и нади белок файл да она занимает много да там 30 миллисекунд или больше почему я знаю что это именно операция sing ну потому что у нас байты of seats а не нулевые а если бы это была операция там чтения или записи то понятно у нас был бы там какой то какой то размеру следующая интересная туза которая там существует это туза по анализу эффективности кэша файловой системы да я вот знаю что люди которые приходят приходили свое время они сейчас все пришли или ушли на пенсию вот с linux на solaris solaris на linux вот они свое время все время ругались вот solaris у нас так легко посмотреть на кэш файловой системы да то на сколько он с какой там hit rate как вот в в линуксе это сделать не так легко вот с помощью wi-fi сделать это получается весьма просто да здесь мы можем посмотреть сколько у нас было общее обращение каждого файловой системы да сколько у нас была из них хит смеси с да там и сколько у нас было операций записи в файловую систему до когда мы какой-то блок но сделали грязным следующая интересная штука на мой взгляд которая очень интересна для интерактивных secu бан приложений это называется анализ ранг юлей танцы вот здесь в чем идея да что если у вас есть процесс блин axe он готов к выполнению как работе сейчас дата его процесс его linux может за scheduled быстро да там а может по каким-то причинам его защиту лет не не сразу да там либо потому что не было процесса до процессора физического доступно да там и потому что он там долго думать и он пришлось потому что не знает там процессов было много или каким-то другим причин вот эта система нам позволяет посмотреть ранг you lay tense да там и понять сколько у нас задержки может быть просто за того что процесс не может быть быстро за за schedule in да вот в данном случае например мы видим что в целом это происходит достаточно быстро до занимает там 10 микросекунд или меньше но бывает что ты занимает и там пару миллисекунд ну вот на этой системы следующие туза а она наверно интересно больше не для анализа производительности как таковой но для там ты багов programm data понять что у нас реально происходит вот то есть она позволяет для любой программы да там не обязательно там наше ли на любом языке программирования посмотреть какие же на программы запускает и из-под и и с какими параметрами до что особенно если для анализа скомпилированных программ вот который учета запускают бывает очень полезно но и вот другая да там похожая программа она делает тоже самое только для открытых файлов вот я знаю меня не растолкав думаешь вот блин это вот программе что-то не нравится значит непонятно вообще куда она смотрит в какие конфигурационные файлы вот она там потом решает себе лезть куда-то не туда да там откуда она берет эти настройки фиг знает вот с off and snoop нам это получить достаточно легко и и просто вот но есть понятно на наборы инструментов и для анализа сети то же самое да то можно отразить connect и да там которые у нас устанавливаются с какого адреса куда на какой нахуй порт какой процесс это сделал поэта что многие из этих вещей на самом деле они доступны и через другие интерфейсы там нет линк и так далее но что я хотел здесь показать что и wi-fi афон инструментарий очень широкого профиля и на нем можно делать как новые вещи так и и старые другая вещь которую мне тоже в этом наборе понравилось весьма интересно позволяет отслеживать когда у нас происходит три transmit tcp сегментов но и и в отличие от какого-то netstat которые нам показывают каунтер мы можем здесь понять вообще а какой это был коннект да там какое-то было соединение в котором это произошло то есть опять-таки вот часто бывает в базах данных до что в рот у нас запрос вроде был простой да там почему-то он приложение видит что она заняла много достаточно времени до если вас происходит 3 transmit то это очень часто как раз таки такой эффект и вую до этого может даже на весьма быстрых локальных сетях добавить там пару пару миллисекунд о времени следующая и интересная вещь тоже касается с сетью которую здесь вот интересно что часто когда мы смотрим на ту на тузы у нас есть либо тайм-аут либо у нас есть время отслеживается сколько занят connect да там но сколько вот происходит резал wing непосредственно host name он часто не очень хорошо инструменте rowan вот потому считается но dns работает быстро он должен быть запиши rowan вами вообще говоря по хорошему но это инструмент нам а позволяет позволяет посмотрите достаточно достаточно хорошо и просто да сколько сколько разные вызовы get host name да или там get hot хвост адрес и находишь это вроде занимают ну вот значит это такой быстренький обзор инструментов вот на самом деле если посмотреть вот все инструменты которые есть в би си си да там скажем так это просто примеры единство а инструментов то вот это вот есть следующий фронтенда который я хотел поговорить это пила и да то есть как скажу пиллай этот титул за еще более высокого высокого уровня новом ее надо будет скомпилить вот если вы скомпилируйте она например может делать такие такие вещи да вот данный пример да там не очень хорошо виды но вот маленькая грубо говоря программа 1 строчки она говорит вот давайте мы присоединимся к сиско лу рид и будем смотреть сколько у нас был размер байт который был был верну свернуты после это построим поэтому гистограмму над это делается одной простенькой командой что весьма сразу красиво вот у fila на самом деле кроме ван лайнеров таких мой есть более но тоже свой сись intex да там который позволяет писать более сложные программки но при этом он более высокого уровня да там такой скриптовый язычок да там миссис что часто изучить проще следующий обмен ну значит мы посмотрели о том как и wicked можно использовать для интерактивного анализа системы да вот что происходит сейчас в одной стороны очень классно с другой стороны нам часто хотел бы получить какую-то историю о том что было раньше да там и так далее то есть как же мы можем вот эти вот данные загнать в monitoring system вот и интересно там особенно если вы используете про миссию с как инфраструктуру сборы базах данных то недавно был за релизе на компании клад в флаер по поддержка и репьев как экспортеры да там как источника данных для promises a которые грубо говоря позволяет взять вот те же самые произвольные си программки дата можно другой раз копировать легко любой из примеров и би би си си туда вот и загнать их начат в prometheus и дальше потом использовать для allure тинга например ух ты у нас вот тут какие-то пошли странные отклонения до что наш ssd нога тормозит и тормозит по 100 миллисекунд да там а нам этого не хочется ну и также просто делать графики на самом деле интересно как к этому пришло пришли клауд вырос он мне нравится как они в этом говорят своей презентации они показывают вот это вот картинку до здесь немножко лаптоп тормозит вот это должно быть красивее вот так ну потому что он ждет динозавр сбоку он должен оставаться когда она анимируется это вот прелести неиспользуемые своего проверенного лаптопа ну ладно короче я думаю сейчас какое-то поймать двойки нет этой могут поймать не могу к сожалению ладно значит вернемся хотел бы нажать на кнопку пауз вот но неважно значит идея здесь на самом деле в чем до что вот если вы посмотрите все эти картинки которые исключайте назад африка и включая как они вот там анимируются трансформируются по обоим осям у них одинаковое среднее значение и даже одинаково стандарты вей шен это говорит нам грубо говоря о чем визуально да там что просто смотреть на а веришь да там даже если вас есть еще для него в помощь standard deviation не очень хорошо но совершенно может означать совершенно разную разную картину вот и соответственно идея там как будет там получить и 100 грамм ки бы вместо средних значений да там а это лучшее что нам может предоставить linux ядро через пророков с вот соответственно они решили сделать ее фев экспортер и fedex партер он использует би си си frontend как я уже сказал и он может соответственно подключаете би си си программки и показывать их вывод в promise в формате здесь что нужно учесть вас на вещи до нужно учесть overhead у этих и бпф прав потому что 100 обычно когда мы используем promises экспортер то нас overhead контролируется грубо говоря как часто мы эту информацию запрашиваем да то есть с ним поставили экспортер москалюк мы вот собираем много данных дорого но мы их собираем только каждые пять минут то вверх от будет ну не очень большой когда вы используете или we've экспортер основной overhead происходит не через получение этих данных а постоянно их обновления с wi-fi в программу то есть поэтому нужно это учитывать и на production system писать только ну собирать ту информацию которую вам нужно вот ребят из латвии тоже предоставили бенчмарка то мы здесь видно что на самом деле простая и wi-fi в программа она имеет оверхед где-то там 100 наносекунд да там более сложная тристана на секунда то есть на самом деле они весьма быстрые программы и это то есть их можно часто подвешивать даже на ивенты которые происходят там миллион раз секунду или или больше да там и 110 и следует понять за что все эти данные они на на каждую семью корда там то есть понятно что когда core много the overhead на каждую core в итоге будет меньше ну что мы хотим сделать зефир экспортером опять-таки есть пара линков как его где скачать релиз экспортеры где есть примеры которые можно использовать с ним да там потому который вы можете сделать ну в пир кони мы используем про мифы сыграв она для нашего продукта перка нам winter in management да там который с одной стороны построен непосредственно для мониторинга и анализа производители баз данных но в принципе его можно использовать для анализа а линуксом тоже вот если мы хотим добавить экспортер в фильме это делается вот одной такой простой командочки после того как мы его запустили и я взял пример папа юлий tense да потому что то как раз таки то что нам с базами данных весьма близко и больно и и полезно все одновременно вот например выход вывода с про миссию export рада то мы здесь видим что собирается гистограммы да там соответственно для операции для всех девайсов для операций чтения чтения-записи соответственно в стандартном про мифе о формате ну я взял соответственно нашу даже порту который нас есть ли система и добавил в нее в графа не есть уже встроенный тип панельки который показывает нам гистограммы да и вот удается получить вот такую вице визуализацию да там я сделал 2 до сбор до для чтения нот две панели для чтения и для записи потому что в современных девайсах да там очень часто чтение и запись и идут по совершенно разным execution по вс их смешивать их леденцы не имеет смысл имеет смысл всегда на них смотреть одновременно вот но при этом мы тоже сможем посмотреть более подробно zum ende там в данном случае я могу посмотреть что вот в это время для записи у меня было какое-то число операций да там которые были весьма медленные да там где-то в диапазоне 33 миллисекунда 66 да там что что плохо окей ну и наконец еще последний кусочек из того что у нас интересного грозится нам в любви в будущем наверное более интересно это бпф trace которую я вскользь упомянул которая на самом деле представляет собой похожий язык и нажму и набор инструментов как did рейс до там которой есть солярисе в free везде покое с даже но на самом деле есть две 300 же для linux но он как бы живет только для oracle linux больше да там но и у оракла как с linux так и с многими другими актер с проектами но не совсем сложились отношения да там поэтому несмотря на то что де trace для linux он есть и оракул его даже сказал окей мы вам даже как gpl дадим развитие идет сейчас больше в gpf подходит ну вот соответственно почему говоришь это будущее да потому что бпф trace это программка которая с одной стороны есть но она вышла в fincert буквально по моему месяц назад да вот 8 октября как раз таки когда вот брэндон глеб написал анонс ну и пока что она требует таких больших больших усилий чтобы собрать у нее там вот такой набор инструкций вот такой размер dependencies вот поэтому я считаю что она пока не готовы для использования но большинство людей да там но некоторые из вас уже могут начать с ней играться и экспериментировать ну и наконец я хочу сказать что я по когда готовился делали сечку веков нашел кучу интересных линков вот который в депо не тем которых я уже включена слайдов вот на этом слайде есть линки по которой если вы хотите узнать больше про и pf вы можете посмотреть и на этом все меня помощь около шести с половиной минут для вопросов нравственность большое спасибо за доклад очень познавательно меня зовут антон я представляюсь идем видео несколько вопросов если какие-то тузы для дебага утечек памяти и bc для но на самом деле да интересно что вот в для от багов даль для divo в аптечке памяти где в целом на сервере в линуксе давай то есть я простыми виду в в ядре или в вашем вашим приложением спасибо что users use of basic ну а я ска я могу сказать я честно говоря не знаю то есть я не уверен что это самый лучший инструмент да там для для этого понятно что можно посмотреть даттам скупил где были ну сколько было выделено да там сколько было вот освобождено этом детально не могу сказать что лучше использовать вам стад и надстройки ну ну если вы используете им статы для анализа утечки памяти то эффектом там есть инструменты для этого да там я хотел сказать ей же там для анализа valgrind то например который позволяет очень хорошо отслеживать хорошо еще такого раз используете ли вы лу ты веришь как метрику и loda we reach ну а товарищ я честно говоря очень не люблю дела доверить особенно linux вы потому что он смешивает музыка ответ а вот и если говорит что но товарищ 10 например что это означает то есть вы ни следовали что такое laughter every с помощью пытаться просто я видел подобную статью ждать с помощью пытаться как раз понять что происходит там стране нет ну понятно что с помощью би си си и можно проанализировать что на самом деле происходит но клауда в это будет иметь весьма далекая как бы отношения на последний вопрос я так понял что вы везде в продакшене используйте 41 ядро и больше так как бы cc как раз доступен в 41 ну на самом деле скажу тогда там что мы как компания у нас не какой-то там скуют проект да там мы помогаем сотням других компаний да там и ныне нам приходится работать в основном с тем что у них есть да там понятно что муле когда они используют достаточно новые и др и когда у нас достаточно хорош инструментарий доступен спасибо спасибо за доклад у меня скорее дни вопроса уточнения потому что я бы все-таки поостерегся ну или как минимум осторожно использовал бесси на продакшене потому что вот списки тех telit которые были например есть утилита inject который позволяет инжектить ошибки для тестирования и поэтому в принципе можно сломать себе пруд да да хорошие хорошее дополнение ноги а между что если используете джед твои используя специальный скажем так функции чтобы поломать да там я имею туска скорее такие но наивные ошибки да там которые можно сделать все если писать керна модуль дата пошел не по тому адресу да там и все красота такие вещи в 10 1 5 7 предотвращает но до хорошее дополнение спасибо здравствуйте спасибо результат измерений который мне ну да это конечно дата то есть вопросы насколько в данном случае использовать их программа но влияет на результат измерений ну и вопрос да что разумеется разумеется влияет даст этого как бы очень тяжело избавиться там стандартными средствами любые менеджмента до нее вставляют какие-то оверхеды вот но что и как я уже говорил небольшой увлекать достаточно возникает да то есть там для достаточно даже собственных программ он может занимать день там тристана на секунд то есть вот так вот вот я такой случай хочет дополнить до ответ на этот вопрос зависит от того что именно мы профайле потому что если мы проходим юзер ленты естественно конечно стоит учитывать если мы профайле ядро то откуда у нас контекст свечи бпф исполняется у нас в ядре данные снимаются либо через bitmap и или эры который находится в регионе разделяемой памяти между ядром и процессом который этим мы бы поставил поэтому зависит от того что вы делаете ну что все закончили все ровно по времени но что мне сказали мне отдать вот книжку про технологию творческого мышления вот и у нас вот тут есть очень творческий человек который дополнял докладчика вот так то тебе книжка не только за вопросы но из-за ответы спасибо"
}