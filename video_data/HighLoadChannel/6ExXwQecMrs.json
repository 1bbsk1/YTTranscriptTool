{
  "video_id": "6ExXwQecMrs",
  "channel": "HighLoadChannel",
  "title": "BpfTrace - наконец, полноценная замена Dtrace в Linux / Пётр Зайцев (Percona)",
  "views": 3208,
  "duration": 2836,
  "published": "2020-02-26T12:00:23-08:00",
  "text": "я вам расскажу сегодня про бпф trace это инструмент который позволяет использовать bf в linux удобно и который ну примерно equivalent тому что позволяет делать такой от ул за как де трай 100 есть доклад скажем так глубоко низшего технически то есть мне очень приятно что тем не менее вас тут столько много собралось спрошу несколько вопросов и кто-нибудь был на моем докладе в прошлом году когда я рассказывал просто припев на руки лучше поднимать выше вот оно то есть есть но не так много а кто-нибудь использует did рейз или использовал в прошлом а то есть есть несколько хорошо а кто вообще знаком что такое и вид ф.а. тоже если несколько но отлично значит я все угадал примерно примерно правильным вот я вам немножко расскажу о том что такое де trace и вообще и видов и почему вот замена этому самому did рейсу это вообще важно я расскажу немножко какие тузы существуют в но для использования в pf и также мы более посмотрим непосредственно на эффект рейс как ее можно использовать как можно но на ней создавать инструменты но сначала давайте поговорим о все оба инструмента ции да там я вообще зачем нам все это нужно но я думаю что вы знаете и понимаете да что если мы используем если мы не используем как это работаем с какими-то системами сложными да там то они обычно глючат тормозят ломаются и дата для того чтобы посмотреть что же там именно происходит их как-то пофиксить возможно предотвратить большие проблемы нам нужно посмотреть внутрь да и вот эти вот способ как же мы внутри этих систем смотрим в широком смысле она называется instrumentation на самом деле если говорить про instrumentation можно разделить на два таких больших подхода да там по одному из направлений вот статическая instrumentation это когда мы взяли в коде в него кучу вставили разных так здесь может быть мы какой-нибудь высоты влог запишем здесь какой-то там каунтер за инкрементом здесь может время посчитаем до там вот и другой подход это динамическая instrumentation когда мы непосредственно кода не инструменти ruim сам по себе но мы имеем возможность этот кода инструмен тировать когда нам когда нам это нужно вот другой еще подход к instrumentation как часто их разделяют один это tracing это когда мы на самом деле вставляем какие то ну какой такой код да там и при происшествие каких-то событий у нас генерятся винты да там это называется tracing и другой подход он называется sampling да то есть если кто-нибудь использовал тузы там типа a profile там 1 в этом плане использую мы просто смотрим статус система например там 100 раз в секунду да там или что-то в этом роде и соответственно по статусу системы можем понять что в ней происходит какие у нас фриды сидят в каком состоянии и так далее и тому подобное ну и если говорить про статическая и динамическая instrumentation дата понятно что статическая instrumentation есть практически во всем да там и она существовала многие многие годы да то есть если смотреть на linux много очень стандартных тузов там тифа games that или топ как работают они считают данные из прав с фраков с эти данные грубо говоря кернел он просто считаются потому что там вкус и разных мест вставлены каунтер этой меры да там которые от отчета считают вот ну и понятно что слишком много таких как аккаунтов не ставишь да все мире не покроешь и в этом плане очень полезно бывает динамической instrumentation когда мы действительно можем смотреть то на что нам интересно если у нас есть какие-то проблемы с ну не знаю там с these пейте стеком например даты мы можем идти очень глубоко вглубь и инструмен тировать конкретно очень какие-то детали да там и глубоко разбираться так что такое did race with рейс это вот как раз таки фреймворк для динамического трейлинга вот то есть это один из таких первых известных прибор когда где этот комп где тот получил подход популярность большую его начали делать еще в 2001 году и первым он появился в solaris 10 2005 году подход оказался весьма популярным вот и он потом в дальнейшем вошел многие другие дистрибутивы что интересно что де trace позволяет нам инструмен тировать как space to users можно собственно говоря ставить трейси на любые вызова функции то же самое можно специально инструмен тировать программы сказать что вот у нас есть здесь специальный как будет рейс trace point которые для пользователи могут быть несколько более понятно да чем баки нибудь там странное название функции с которыми если ты не программист те непонятно что делать в особенность это было важно понятно дело для solaris потому что это была не открыто операционная система и поэтому просто посмотреть в коде искать а вот мне нужно поставить tray спать на эту функцию потому что понятно что она делает а как мы можем делать частом в linux на открытом прогнал исключение такой возможности не было вот что важно как один из уникальных таких на тот момент был дизайн густо что в от ded рейс трейси нга оверхеды если он не включен нету а то есть грубо говоря он работает таким образом что он просто но заменяет некоторые там цепью инструкции на на вызов did рейса да там который потом при при возврате эти инструкции выполняет то есть такой очень хитрый подход когда удается когда нет нет instrumentation избежать а верх ай да и если кто слышал diptrace он instrumentation было сделано с со своим добавленным языком который называется ди да там который что-то похоже на сие а в дальнейшем de tres появился много в чем до грубо говоря практически во всем кроме кроме linux да там скажем онлайн он вошел mac os в рибизи появился нет везде вот linux на самом деле а я solaris у linux solaris все назвал кроя правильно oracle на самом деле включил де trace свой урок коула nbk был linux да там но поскольку раковский вариант linux используют мало кто использует ура кловский вариант linux ты из oracle а вот ну понятно то есть oracle linux и использует не слишком не слишком много людей да там и там где три действительно появился вот но в другие в mainline linux он так и не вошел вот что интересно что тысячи седьмом году oracle наконец-то лицензирован и trace под gpl что принципе сделаю возможен для включения в linux онлайн да там без каких-нибудь лицензионных сложностей но 2007 17 год это уже слишком слишком поздно уже на тот момент в линуксе был хороший ппф в основном на этом народ стандарте завал ся при этом что интересно что де trace даже собирается включить в windows сейчас вот он доступен в некоторых insider views то есть на linux kakegawa рю де trace у нас нету к исключая oracle linux в основном дистрибутивах дистрибутивах linux где trace не включен что же у нас есть с точки зрения трейлинга валенок с места этого на самом деле в linux в лучшем или худшем спереди open source есть очень много всего куча разных tracing фрей маркс было медленно за за многие годы да там и на самом деле разобраться и понять что к чему не так так просто на самом деле если вы даете познакомиться с этим landscape а вот есть тут а я думал что это лазер лазер у меня нету вот но вы смотрите вот эту статью там очень хорошо описаны что что есть что какие в linux есть разные подходы для трейси на кому интересна история если бы говорить про инфраструктуру линуксе в общем здесь можно смотреть смотреть на три таких уровня этой самой инфраструктуре во-первых если мы инструменти ruim ядро да например то вопрос какой у нас непосредственно интерфейс для этого у нас есть кей праву провeдитe race pro об этом и так далее вот следующее что с чем является и пеев это вопрос что если у нас есть возможность ставить пробу она создает какую-нибудь у нас event когда оно вызывается даче как мы эту информацию можем обработать но потому что винты могут у нас происходить не знаю там миллионы раз в секунду да там и как-то их просто все писать файл да там или же просто гнать юзеру space это обычно слишком слишком дорого поэтому нужна какая-то программа обработки да там и здесь есть разные подходы буферизируется ядре и для того чтобы потом визир space мог считать использовать кернел модули для того чтобы как то там обработать да там и и вид f и третий компонент это то что называется фронт-энд вот у нас есть вся эта инфраструктуру которую нам позволяет подсветится каким-то виды trace по ентому нас есть возможность ивенты как-то обработать и накопить каких-то структурах до базы данных как мы получим к ним дальше доступ из инструментов до для этого есть опять-таки первых систем так все сдвиг би си си да там и без of trace это на сам один из вот этих вот самых фреймворков на что если разобраться что к чему ну и так со всеми этими фреймворка последние в последние годы и wi-fi в но появляется как стандарт наиболее такой продвинутый инструмент в linux который весьма гибкий эффективные которые позволяют делать практически все что в такой и we've откуда он взялся на самом деле и we've это изначально было штучка сделано как виртуальные машины для эффективного фильтрования пакета для firewall потом оттуда идет название пакет fielder да никакого отношения к мониторингу обзор обе летит рейсингу там и нету вот ну и в воле современных версиях он был расширен отсюда слова extended как общий фреймворк для того чтобы обрабатывать ивенте текущей версии они интегрированы с jit компилятором чтобы они были весьма интересно и вот если кому интересно разницы дата между классическими пифы евреев то мы видим что было добавлено куча регистров появился стек у нас есть там дополнительные структуры данных с которым можно работать который называется maps которых в бпф не было ну и на самом деле несмотря на то что правильное название этой игре часто люди уже теперь забывают историю что был такой старый wi-fi вы просто называют 2piv да поэтому туза называется бпф trace они и westrice на самом деле в большинстве современных выражение и wi-fi я фрыльев это одно и то же игре был включен в linux начиная с 2014 года в онлайн и на самом деле очень активно девицей включается в кучу инструментария около linux дата включая перф file system там систем та пони его есть wi-fi адаптер с какой нибудь там везде тоже перешел сейчас на dpf поддержку и и так далее то есть тут много стандартизации что интересно что по-прежнему идет разработка и современные ядра они поддерживали все лучше и лучше и вот опять таки есть линк если кому интересно посмотреть что в каких версиях ядра появилась современных посмотрите и так такое у нас и вес и чем он интересен евреев это программа в своем специальном байт коде которая у нас выполняет обработку вот этих самых trace ивентов которая заключается и который включается непосредственно в ведро причем тем то что она сделана байт коде специальным это позволяет и друг провести определенную верификацию то что этот код он похож на на то что достаточно безопасный например проверяется что там не используется никаких циклов в этом подходе их просто нет вам потому что если мы сделали цикл да там и всунули его пакуюсь critical секцию в ядре этого при этом может все повиснуть понятно что это не не полностью безопасно да то есть если мы напишем какой очень сложный рельеф программу и в сунем ее там в какой-то ивент ядре который происходит 10 миллионов раз в секунду до то все может очень сильно затормозится да но при этом это куда более безопасно чем старые подходы к этому когда мы и просто какие-то керном модуль вставляли через insmat и в этих модулях могло быть все что угодно если там кто-нибудь чинить на глючил или просто какая-то несовместимость да там бинарная то ядром могло все все падать компилятор а сила нга он может сейчас скомпилировать этот самый бпф код да там то есть по большому счету какой-то но ограниченный язык си можно использовать для создания этих бпф программ вот ну что конечно достаточно достаточно сложно что еще важно что вот компиляция многих тузов избить f она зависит от от ядра да там потому что используется фейдеры для того чтобы понимать какие-то структуры для чего используются и и так далее и поэтому я tool set он ну скажем так не очень удобно в том плане что там всегда поставляются либо кита модули для и которые связаны с конкретным ядром который выполняется либо нужно нужно перекомпилировать ну вот диаграмм к может более понятно том как у нас dpf работает юзер создает битве в программу дальше kernal со своей стороны он ее проверяет дальше загружает ведро объектив может присосаться к разным вот этим вот инструментов для trace of обрабатывать информацию с вы сыграю сохранять ее в maps этой структуры данных где можно временно хранить данные но и потом юзеры программа она может читать статистику ты и так далее получать перфоленты и так далее и тому подобного вот вот такой небольшой overview о том что у нас есть дев в каких таких ядрах в каких играх linux опять таки видно что покрываются ну практически все подсистемы ядра linux + есть тоже хорошая интеграция с разными там hour 2 аккаунта да то есть если хочется посмотреть всякие там кэш мисс или бранч мисс prediction и так далее то есть instrumentation но доступ к этим каунт романо тоже есть в еде если вам вообще бпф интересен а то скажем так наиболее большое число инструментов и где ведется разработка всего этого это вот а и вайзер project а смотрите туда там наиболее последние версии тузов очень хорошая документация и так далее потому что несмотря на то что в дистрибутивах linux появляется все больше больше а бпф тузов поскольку сейчас эти тузы очень активно развиваются я бы рекомендовал просто врать наиболее наиболее последнюю версию которая здесь доступно вот ну и последняя заметка про макеев это о производительности да то есть мы говорим что и пев достаточно эффективны насколько он насколько он эффективные да то есть с точки зрения эффективности лучше всего смотреть да что вот мы добавляем пробу этот про будет дергаться там сколько-то раз в секунду понятное дело в зависимости от того насколько часто у нас этот ивент сколько у нас требуется на выполнение этой пробы времени вот ребята и склад слоя делали benchmark что здесь важны и важные данные до что простой и дев пробу не занимал около 100 наносекунд более сложный вид f да там он занимал около 300 наносекунд да то есть но чтобы понять да там что это означает что даже сложный пробы он может на одном ядре вызываться около 3 миллионов раз в секунду то есть если вы используете что-то где вас procoder боится не знаю там сто тысяч раз в секунду до даже миллион раз секунды на многоядерном процессоре the overhead будет не не слишком большой окей значит и wi-fi я фронт-энд что у нас есть для работы с pdf здесь спрошу кто-нибудь слышал о таком человеке брэндон great о слышали многие но конечно если интересуюсь of data вообще беру ability to это человек которого надо знать он много что про это пишет и рассказывает в частности вот у него есть такой такая красивая картинка о том какие у нас есть тузы для для эльфов датами здесь видно что мы можем например использовать rogov да там просто писать там байт-код это нам дает все но затем работать блин просто очень тяжело да там это как на нас м переписать веб-приложения да там в принципе в теории можно но наверное делать этого не стоит вот при этом что интересно что бпф trace при этом видим тоже с одной стороны она по возможностям позволяет получить практически все что позволяет делать dpf но при этом оно значительно проще и друзей би си си про которую я рассказывал да там и понятное дело с сырой обидев значит если говорить про вот эти вот тузы на мой взгляд две из них наверное более наиболее полезные бесись и вот несмотря на то что здесь вот оно показано как что такое такое сложная да там и писать на ней непосредственно программа достаточно проблематично она включает себя кучу уже сделанных тузов которые просто можно запустить а команда там с командой на которой работают опять я про них сегодня рассказывать не буду потому что я free них рассказывал прошлый раз если находите посмотреть почитатель на найдите слайды вот и dpf trace и total за которую на самом деле позволяет работать с писать свои свой инструментарий да там или же использовать в онлайн или значительно более более просто не туда пошел так но давайте посмотрим да что проще да там и насколько проще вот здесь мы сравниваем код что на одного и того же инструмента сделанная на би си си и новиков trace на там я думаю что здесь видно понятно что у gpf код куда проще и лучше вот про би си си как я уже говорил у него есть много разных тузов вот здесь есть инструменталь имена этих тузов да там если кому интересно можете их непосредственно гуглить а и пользоваться так следующий момент де trace и wi-fi of a trace как если их сравнить между собой в общем-то на самом деле 137 pf30 тузы которые и используют с примерным одинаковым фокусом вот но здесь есть разница в том что в и wi-fi к системе есть еще и би си си поэтому для сложных инструментов мы можем писать использовать би си си да там когда в дет рейс там эквивалентами сиссе нету дата обычно люди используют какой бы там shell plus de trace для того чтобы делать сложные инструментарий да там получить данные ветра и сюда там потом как-то сложно а обработать bits of trace когда вы создавали не было задачи полностью эмулировать де трай за то есть вы не можете взять де трай скрипт и запустить его потом на налетев trace ну и на самом деле это не имеет большого смысла почему потому что в разработке инструментариев вот такого нижнего уровня на самом деле логика там достаточно простая обычно что более важно это понять каким trace point нам нужно подсоединиться и понятно что системные вызовы да там их название что они непосредственно делают на низком уровне но отличается да там в linux и solaris free везде поэтому это как раз таки в чем возникает возникает разница ну и при всем при этом веке фтс понятно он был сделан уже через практически сколько там 15-20 лет выследит рейс вот в нем есть некоторые дополнительные возможности да там которых в de tres нет ну например он может делать стектрейсы да там показывать что весьма и весьма интересно при этом если говорить про идею до там-то много от ded рейса унаследован да например вот если смотреть как называются как называются разные функциональность языке и как и какого нее синтаксис используется мы видим что и название и синтаксис да он достаточно похож хотя не полностью эквивалентен но если мы хотим сравнить непосредственно скрипты да там вот как мы делали с би си си и be afraid to я не знаю сколько можно прочитать что тут написано по большому счету видно что по размеру скрипты они достаточно близки да там и на самом деле сложность языка и возможностей языка они весьма совпадают между собой но и наконец давайте посмотрим что у нас есть выпив trace как его можно использовать и что для этого нужно ну во-первых требования что нам нужно от линз для того чтобы спорить и estrace да здесь видно что лучше всего нам linux к как минимум 449 чтобы использовать использовать все все фичи если посмотреть на то что позволяет нам делать 2piv 300 здесь тоже видно что у нас очень много разных есть разных про упс начиная с этих вот you prog за там это для того чтобы инструмен тировать вызов там функции в user приложений kernal про и и так далее а что здесь интересно если ты посмотреть по имени мы видим что функция да там такие как you prove да там для юзовская функции для него есть эквивалентная штука йурид прав да там для керна то же самое есть кейт правы перед прав что это означает на самом деле мы tracing фреймворк мы можем делать ивенты по вызовы функции и по завершению этой функции это очень часто используется например для тайминга дата мы можем тоже а анализировать значение которой функции вернула да там и дальше группировать не знаю по параметрам с которыми эта функция была вызвана да то есть можно если ловить и вызов функции и возврат из нее можно делать очень много много классных классных вещей каждый of trace непосредственно работает внутри ну понятно да что у нас есть мы пишем gps программу которая собственно говоря парсится там конвертируется в по большому счету си потом мы делаем делаем processing через там силан да там гейтс бит и байт код и загружается да то есть на самом деле процесс такое но достаточно тяжелый поэтому какие есть ограничения это что и что на серверах да там которые мощные byd f3 сработает хорошо если у вас есть какой-нибудь там супер маленький mb этот девайс да там на котором на должен разобраться что с ним происходит то туда тащить sea-land может проблематичным для этого есть другой инструментарий которая называется пила и он с одной стороны несколько более простой чем бпф trace да там нет всех возможностей но он генерит байт-код напрямую то есть у него нет вот это вот sea-land зависимости да если кому интересно как же ответив trace нам получить ну опять-таки технология новая особенно ведь f3 сон был за risen как стабильный наверное около года назад поэтому понятно что в старых linux distribution его его не будет лучше всего смотреть ну брать пакеты или компилировать последнюю версию которую собственно это и вайзер что интересно если вот взять последний там ubuntu lts да там то в нем в этом 1804 в нем бпф trace не будет но он его можно поставить с помощью snap пакета с одной стороны это классно удобно да там с другой стороны из-за того как snap макеты сделаны и изолируются то функция would работ не все готов для kernal трейлинга пакет со snap работает хорошо для used рейтинга по пакеты которые мы ставим через на помогут могут работать неправильно вот давайте посмотрим на пример поставим евреев trace простейший пример который здесь позволяет получить статистику по запросов сколько занимает этом запросы на дисковод и вот что здесь происходит мы подключаемся к вот этой вот функции в рфс red окраски и мы здесь подключаемся к какой прок так и кейт прав сложно здесь какая вам конечно нужно знать что вот если нам нужно отрезать все чтения к файловой системе независимо от какого файловая система это это вот функция есть wi-fi street который за это зависит дальше что мы здесь делаем интересно что мы для каждого ти до это 3dd мы делаем как раз таким об где для для каждого запроса мы отслеживаем начала и окончания выполнения этого этого запроса вот и здесь может не совсем понятно потому что все бывает большой но это нам позволяет отслеживать поскольку мы группируем данные по тит как 3d дейда в данном случае то мы можем сдана и сгруппировать не только по совокупность во всей системы но в данном случае у может мы можем посмотреть данные по разным процессом да я вывел вот вывод сколько занимает еёдля mais quel этом что меня часто интересует вот и что есть эти интересно да что мы видим вот такой классический то что называется be модальное распределение ввода-вывода да то есть вот первое график там где много запросов да там этот те данные которые у нас читаются из кэша они очень быстрые 2 горбик это там где мы читаем данные с диска да там понятно требуется дисководы вывод сразу lighting значительно значительно выше вот мы можем соответственно сохранить это как скриптик да там обычно используется как бить и расширение это написать там комментарии отформатировать красивее чем в онлайнер да там и про просто дальше использовать битрейт реддите да там вместо того чтобы использовать в онлайнер и значит какого нас общих конце языка на самом деле он достаточно простой да там что мы берем выбираем правы которые мы хотим подсоединиться дальше синтез у нас указывают фильтр как мы хотим эти данные отфильтровать например мы можем сказать у нас интересуют не все нас интересует данные только по данному процессу данного педаль атом или же еще какие-то фильтры функции соответственно все винты которую этому фильтру не соответствует они будут игнорироваться и дальше у нас акшин это собственно говоря мини программа да там которая сконвертируется непосредственно в программу и будет и будет по и будет выполняться при вызове этой вызове наши людей of trace а вот если почитайте 5-ки более детально рефрен гайд link внизу все тоже еще интересно что в битве фтс у нас есть тоже на борту зов на самом деле многие би си си тузы сейчас народ рим при minty root который от них достаточно достаточно простые этом на бпф trace на то есть вы можете тоже посмотреть от есть коллекция тузов их пока не настолько много на весь еси но там есть некоторые тузы которые в би си си нету да например и там можно есть лузы там для отслеживания сигналов да вот там как kills ну например то есть достаточно прикольно если вам интересно кто за да там посмотреть почему не хотите писать без сисек под руками wi-fi в код руками то byd f3 тоже имеет через минус vi можно посмотреть собственно говоря какой код она сгенерил а но на самом деле наверно это наиболее полезно если вы хотите понять а вообще вот мой провод он будет тяжелый и не очень да вот посмотрев собственно говоря за кода там прикинуться на 1 странице или 2 да да можно понять насколько насколько он сложный вот ну следующий момент что мне хотелось показать как если у вас есть какая-то программа это в моем случае это майской вот как ее можно отследить в майскую нас есть такая фан функция дата опять и которую нужно найти все скаут это конечно ги мун надо там которая называется dispatch команд в этой функции у нас проходят все собственно выполнения запросов маску и я хотел просто подсоедините то вот юпи прав для того чтобы распечатать текст запроса в да там который у нас приходит к к майскую лена просто как очень такую примитивную проба вот первое что я получил как проблем говорит блин нет такого файла ну как нет вот джон файл находится это вот как раз таки сюрпризы со снопом да то есть если мы ставим что через snap to a у нее там может не хватать permissions да там и так далее чтобы эти приложения посмотреть окей мы поставил через авт версию дата более новому вон ты вместо это что у нас получается следующее следующее мы получаем говорит вот что у нас мы не можем разобрать у нас нет такого символа ну как такого символа нету но я смотрю через тузу о н м чтобы посмотреть если такой символ или нету такой символ есть на самом деле поскольку mais quel скомпилирован си плюс плюс там используется этот вот man глен да то есть на самом деле настоящая имя функция но вот такой вот страшно и ужасно некрасивое которая которая используется в этой в этой команде и если соответственно мы именно это будем использовать в функции то тогда мы сможем подключиться и получить наш наш результат да то есть вот если смотреть на перф эко-система там многие тузы это делают автоматически они могут делать этот обман глен автоматом бпф trace это пока не умеет это нужно знать еще врачу внимание на вот это вот флаг минус де для тузы н.м. почему он важен потому что маску или многие сейчас другие пакеты они просто поставляются в со скриптами символами и символы для них идут в других пакетах да там дебаг symbols вот если хочется использовать эти символы дата иначе и нам их не будет видеть вот ну и наконец в последние пару моментов как я уже сказал если вы интересуетесь бпф то изучите что по этому поводу пишет на брэндон грег там очень много классного материала вот и я еще тоже для вас собрал скажем так link assortment если кому интересно почитать да там это ряд статей которых я использовал при подготовке и так далее которые мне показались интересными ну что на этом у меня все и я буду ответить рад ответить на ваши вопросы у нас хоть и большие есть еще одна задача которым нужно быть сейчас разрешить это собственно выбрать самый прикольный самый интересный вопрос самый интересный вопрос но давай из нашей страны в начале будет подарок а дан это спасибо большое за твои выступление окей совершенно бомбически 2а надо же и подарок дорогие голода у нас задача а давай мы сделаем вот yaz yaz михайло дорогие вопросы так добрый день дмитрий до вкуса и у меня такой вопрос может и не совсем теме но вот когда вы говорили по поводу того что очень сильно зависит от быстродействием машины который бы дополняться вопрос такой можем подготовить байт код на одной машине потом перенести выполним посадки параметра но то есть в принципе а в принципе да то есть мы можем это сделать но просто идея обычного чем объектив trace да там хорош для интерактивная работа дальше мы посмотрели что у нас вот сейчас что-то происходит странная мы запустили тузы получили какой-то результат да там потом изменили запустили заново то есть в этом есть большая польза да там если этого не нужно да там то можно сделать вот ну и опять-таки проблема здесь в основном мвд девайсами да то есть даже если это какой-нибудь не знаю там очень старый сервер то ведь я фон прекрасно потянет я первым ногу играл знакомить там этих gps когда там с одним гигабайтом памяти и одним не дать secu корм и и все бегает хорошо и быстренько добрый день сергей кузин компания red hat мне вопрос именно крутой на машины тут такое виртуальная машина в контексте ядра 1 ли она либо их несколько то есть например над винтера трибус тоже использовать виртуальную машину для классификации фильтрация пакетов ну и вопрос еще по масштабирование как-то все масштабируется на многоядерность с ним так но здесь как веры то что касается венда там то есть я показал что непосредственно со представлять виртуальная машина и видео в да там то есть это виртуальная машина достаточно стандартная да там готова в которых грубо говоря съесть свой байт код который сейчас в ядре говоря тоже транслируется через компилятором для максимальной максимальной эффективности честно говоря если в ядре linux одна виртуальная машина или несколько я я не знаю да но ведь я фон тоже используется во многих я знаю задачах по мужски зации трафика там и так далее для de dos атак многие системы использую 2 фев и так далее теперь то что касается масштабируемостью по ядрам да то есть принципе все эти программки они выполняются в каждом своем контексте они могут выполняться параллельно единственное где могут быть как battle никс это вот эти вот на пс которая написал да то есть если у вас есть несколько программ которые который понравится параллельно они используют кого-то шею тнп очень агрессивно то сайте может быть контент шин дорогие еще вопросы там он первый день быть тарань спасибо за доклад сергея сборки я хотел узнать насчет практического применения очень много всяких интересных программ чтобы узнать у них а вот лично вы как-то решили полезно какую задачу можете рассказать на самом деле здесь вот есть какая тонкая там к сожалению то есть непосредственно wi-fi of trace как он работает в новых дистрибутивов да там прежде всего вот а в основном у людей и используется все-таки более старые дистрибутиве да вот я на самом деле говорил буквально перед этим докладом с одним из закладок он говорит о беде бпф это конечно классно хотим использовать блин нам так сильно поможет но пока у нас центр s7 с которым это все не работает то есть вот так вот то есть у нас по нашему как бы нашей работе да там в компании есть куда больше случаях когда нам хотелось бы его использовать потому что но стандартных тузов не хватает но использовать его не получается и мы больше его используем для нашего внутреннего анализа производительности да вот мы делаем разные бенчмарки performance engineering да там а для этого но очень полезен спасибо за доклад петр очень клёво доклад у меня два вопроса первый вопрос это de trois поддерживать там порядка пяти-шести платформу там и псарне так далее а что по поводу и бпф то есть что кроме x86 и поддерживать его но что он включён в милане ядра linux да там saves он бегает на на тех платформах на которых работает работает linux то есть и второй более такой тонкий специфичный вопрос болячка did рейса это как раз таки и находить выходы из функций то есть за последний много лет его пытаются все пропатчить ну как бы до сих пор из-за оптимизации компилятора найти все выходы из функции достаточно проблематично если такая же проблема с ю trace'ом ну точнее югру к я честно говоря не могу не могу ответить на этот вопрос то есть я таких проблем не не видел да там то что чтобы народ народ ругался вот но не могу даже сказать что этой проблемы нет вопрос а можно ли его или есть примеры использования там в докер контейнерах там или снаружи и слов системы что-нибудь так вот да то есть если говорить про docker и так далее да то это тоже штуку которая сейчас развивается идет вопрос да там как правильно использовать бпф с с докером да там я не могу не скажу такого полного решения да там по этому поводу могу только сказать то что там пока с докером пока народ находит находит баги там они все активно fixed для в лучше поддержки докер экосистема на этом на этом вопросы закончились если что можно будет подойти к докладчику в горах вот теперь запросу ну вот у нас тут есть которая там злобный эксперт по did рейсу который про оптимизирующие компиляции и функции вот давай его наградили что не вам а вот так отлично вот 0 у меня вот еще есть тоже отверг он эй маленький поощрительный приз вот человечку спасибо огромное парился"
}