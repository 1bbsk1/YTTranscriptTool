{
  "video_id": "khYWSZV3joQ",
  "channel": "HighLoadChannel",
  "title": "SAST'оумие и отвага / Алексей Морозов (Тинькофф)",
  "views": 234,
  "duration": 2985,
  "published": "2024-04-17T01:10:20-07:00",
  "text": "и о том какие инструменты использовать и куда прикладывать нам сегодня расскажет наш следующий спикер Алексей Морозов Приветствуем его Да отлично Сам себя слышу Это замечательно коллеги пару слов вообще зачем я сюда пришел приехал и чего сегодня буду рассказывать У нас есть у разработчиков Я тоже себя еще пока к ним когда-то относил Вот Но уже больше для вас такая проблема которая называется уязвимости в коде Да постоянно не возникают мы разрабатываем код что-то там где-то забыли какой-нибудь Тиф или функцию или что-нибудь катинировали и получается у нас уязвимость как же нам бороться с уязвимостями для этого есть различные инструменты мы сегодня поговорим Какие существуют инструменты на данный момент будем сделаем упор на Российский рынок что сейчас предлагает Российский рынок Ну и пофанимся конечно же немножко как всегда вкратце о себе зовут Меня Алексей Морозов долгое время я занимался пентестами потом начал заниматься Application Security в области defenseve выстраивают системы процессы защиты и так далее вот поэтому предлагаю сразу начать и первое С чего мы начнем это вообще поговорим про такие мантры безопасников вообще безопасники они разговаривают на каком-то своем языке Да не всегда понятном разработчикам поэтому я постараюсь некоторые термины все-таки сегодня объяснить Итак что же такое saas собственно ради чего весь этот доклад соста- это статический анализатор кода это то что сканирует код выявляет какие-то зависимости показывает какие-то паттерны и соответственно реагирует на то уязвимость это или нет Что же такое это сканер библиотек и Дейл То есть то что вы импортите какие-то подключаете там если это сошники и так далее и так далее и так далее Всё это сканирует sca и показывает что возможно у вас уязвимые компонент например тому недавно это локжи библиотека возможно многим известно достаточно много гремело итак итак сканирует ваши конфиги если у вас подход инфраструкции за код соответственно Я очень сильно вам поможет вы настраиваете конфиги таким образом чтобы они были уязвимы и чтобы вы так не делали сканер вам это тоже поможет и ast это по сути Все вышеперечисленное обо всем поговорим подробно все расскажу все покажу вот предлагаю начать Итак о чем же все-таки будем говорить выборка инструментов по каждому классу сравним их между собой попробуем что-нибудь повыбирать дам критерии прицел на российские вендоры Ну актуальная проблема Сейчас расскажу 5 уязвимостей жизни которые я находил с помощью этих всех инструментов по сути Это ответ на вопрос А зачем а для чего нам все это внедрять И вот я вам тоже это расскажу и отвечу на Ваши вопросы разумеется Итак приступим сас Статик Application Security tasting что же это такое инструмент как я уже сказал который сканирует код и естественно инструментов масса инструментов таких было придумано огромное количество просмотрим несколько сейчас на экране перечислены основные скажем так игроки на этом рынке это ПТ Application Inspector solor screener чек Макс ну и так далее и существует естественно как всегда бесплатно или Open Source аналоги вот Поехали дальше Итак чего же мы хотим отца от любого инструмента У нас есть какие-то требования правильно Мы хотим чтобы он сканировал во-первых быстро потому что если нам инструмент кладет на 10 часов Ну наверное это не супер классный инструмент продуктовые разработки большой использует его тяжело Мы хотим чтобы он конечно не ползил чтобы нам не разбирать отчет портянку там из миллиона строк finding of Мы хотим чтобы он качественно находил уязвимости под качеством я понимаю то что он реальный приносит уязвимости которые могут причинить какой-то ущерб компании вот мы хотим купить не хотим деньги тратить большие можно интегрировать процесс разработки это обязательно потому что каждый артефакт закидывать и проверять его но мне кажется в ручном режиме никто этого делать не хочет и конечно же умел масштабирование что здесь имею в виду вообще по-хорошему ни один инструмент не работает из коробки в плане безопасности сканеров Я имею ввиду вы его взяли установили и все как бы думали все работа здесь закончена безопасников начинается работа инженеров которые сидят эти Пардон эти фаннинги ой перескочил эти фанинки разбирают так вот подмасштабирование понимают Каждый раз когда нам приходит какая-то уязвимость от бак балансе От любой другой активности Мы всегда должны думать над первое что мысль в голову которую нам приходит А почему это не нашел мой сканер если какая-то Техническая инъекция Почему мы сканер это не нашел И вот для того чтобы в дальнейшем ваш сканер развивался и находил такие штуки по факту нам и нужен процесс масштабирования Итак посмотрим несколько продуктов наверное самый такой на слуху это чекмакс достаточно дорогой продукт и нельзя его назвать чисто соском потому что это комбайн это есть и Ак и все на свете и яст и все он в это умеет У него даже и даст свой есть вот но продаст мы сегодня говорим про динамический анализ основная его история в чем умеет в инкрементальное сканирование достаточно большой так как это огромный коммерческий продукт у него есть плагины практически под каждую ID и соответственно Когда вы пишете код Вам он тут же может показывать что вот смотри у тебя тут же может быть уязвимость обычно это разработчиков раздражает Потому что некоторые такие большие продукты начинают ещё и влезать вашу то есть удалять строку которую вы пытаетесь написать уязвимой Вот поэтому к такой истории мы не прибегаем обычно А в виде модификации Да пробовали Вот Но выглядит он следующим образом интерфейс То есть я вам показываю Здесь даже бороду то есть сюда загружается проекты проекты сканируются и дальше какие-то результаты выплёвывают судимости это все дело можно посмотреть и разобрать Ой как же его интегрировать в разработку естественно все мы делаем на pipline Ах поднимаем отдельную ноду естественно Потому что если мы будем поднимать сканирование в той же самом в том же самом раннере то у нас просто раннер будет падать вот поэтому у нас в этом плане асинхрон настроена но есть у него естественно консольная утилита которая позволяет делать все то же самое и выплевывать результаты файл и потом уже дальше по вашему по вашему сценарию теплое можно уже эти файлы анализировать блочить если уязвимость нашли или куда-то выплёвывать и постфактум разбирать Кому как угодно но в какой-то момент происходит вот такая ситуация чек Макс перестает существовать на российском рынке Ну да и Бог бы с ним и тут на сцену выходит наши российские Ребята пользуйте в Technologies которая разработали достаточно не хуже комбайн комбайн всего того же самого Вот и они уже построили полноценный East то есть смысл В чем смысл в том что когда сад находит какую-то уязвимость устроит дерево зависимости Вот и с помощью этого дерева зависимости генерирует эксплойты примерные представляет и дальше всю историю закидывает в свой собственный уже динамический анализатор и в комбайне всего этого получается Малое количество позитивов достаточно интересная штука вот я в эту штуку поигрался насколько Они классные мы посмотрим чуть позже Расскажи еще про один продукт вот так выглядит собственно а здесь собственно позитивных же заявляет свою среднюю оценку Фолз позитивов и мы обязательно это с вами проверим чуть попозже насколько Они классные solor Up screener по сути все то же самое Это продукт Ростелекома тоже наш российский вендер но его основная фишка и отличие можно его так назвать то что он умеет разбирать бинарные файлы если вы работаете с бинарными файлами хотите сканировать экзешники Да и лельки или джарники вы можете использовать этот Инструмент нужно понимать что это все коммерческие достаточно дорогие инструменты вот поэтому Давайте немножко поговорим про некоммерческие инструменты Так выглядит даже Барда а вот это самый красивый графики которые я видел в своей жизни просто вот захотел вам показать вот Единственное отличие солора от в плане графиков Вот позитив-технолоджус потому что у них графики Вот такие у Позитив технолоджа всегда все красивое яркое красное белое и так далее так далее так далее здесь конечно не очень статический анализатор масштабируемый гибкий быстрый интегрируемый бесплатный популярный в комьюнити то есть практически все комьюнити знает про таких два инструмента Как клей вот поэтому оно под него постоянно правила дописываются но естественно все то что бесплатно не супер эффективно из коробки все это нужно смотреть и внедрять И как же это делать но для начала Посмотрим есть у него еще там какие-то коммерческие истории которые не сильно на что-то влияют Но это все неважно важно другое Давайте представим что у нас есть подопытный кролик у нас есть четыре репозитория Java питоннет си плюс плюс в каждом примерно 8 миллионов строк кода имеет популярный внешний зависимости и все клиент серверная все так или иначе как-то связано с пользователем пока есть Да пока все хорошо идем внимание отлично взяли мы вот это все прекрасно и теперь по всем этим составом мы пройдемся посмотрим что же у нас получилось в итоге какой же инструмент нам выбрать так это один из примеров того что мы будем с вами следовать То есть это будет мобильное приложение это будет десктопное приложение это будет веб это будет опишка возьмем Разные классы для так скажем чистоты выборки результаты И вот я с вами сразу делюсь результатами первое Что касаемо конечно кусается это ценники то есть не все компании могут себе позволить там условно чекмар с который еще и покинул Российский рынок за от 15 миллионов Вот то есть ориентир ценник в первую очередь дальше скорость при том что чек Маркс дорогой инструмент который находит намного всего он еще и очень долгий вот там Конечно есть понятие такое масштабирование нагрузки можно там несколько агентов на устанавливать но все равно он очень долгий 5 часов Это долго вот Application инспектор кстати намного в этом плане побыстрее будет Ну самый быстрый оказался сканер который просто берет все комьюнити правила и прогоняет но при этом он же самый полчасика как читать цифры смотрите количество уязвимости здесь критичный к общему количеству то есть 14 критичных 83 всего например ручек Марс позитива в процентах из 14 критичных 40 процентов фос позитивов Ну опять же Понятное дело что вот это все аналитику я проводил на четырех проектах То есть у Вас могут быть результаты на ваших проектах другие по сканерам Вот это для того чтобы показать как в принципе мы выбирали инструмент Естественно естественно так как мы люди жадные платить не хотим мы выбрали 7 греб Итак что же мы сделали мы взяли синггреб выявили ползящие правила построили процесс который тестирует эти правила на всех репозиториях а удалили ненужные тех что полу не нужны скажем так переписали которые хотя бы какой-нибудь Позитив приносили уязвимость и построили над этим регулярный процесс коммитом с депплеем все положено теперь у нас все это варится скажем в одной кухне и научились писать правила сами Каждый раз когда к нам прилетает какая-то уязвимость первый вопрос который мы задаем Почему не нашел Это наш сканер и разбираясь в этом пишем правила докидываем его и уже проверяем всю нашу инфраструктуру пойдем дальше примеры наших правил которые мы пишем справа собственно это код не обязательно в него вникать это текст вышел написали правила вот а слева это то как мы построили процесс жире то есть мы заводим ticket и у нас есть дополнительные поля которые указывают В каком инструменте на данный момент нам нужно написать Сейчас правила Вот это уже именно про процесс давайте рассмотрим следующий класс инструментов это класс как я уже сказал это сканеры которые сканирует библиотеки опять же я делаю упор на больше на Российский рынок конечно здесь есть и зарубежный Вот но рассмотрим что это вообще такое и начнем опять же с пониманием вообще что такое сей Итак Что должен уметь по-хорошему это анализ докер образов Естественно да то есть мы же хотим тестировать зависимости кстати самая популярная любимая моя история это когда образа тянутся из докер-хаба большие компании очень много компаний благодаря этому анализ системных пакетов То есть то что у нас хранится где-то там артефакторе мы должны уметь анализировать анализ манифестов пакетных менеджеров естественно у нас есть манифест мы должны уметь его парсить забирать в себя и смотреть зимнюю пакет и естественно проверка Open Source потому что это комьюнити комьюнити что может сделать закладку правильно и мы потом его к себе затащим в инфраструктуру ну и соответственно откроем bagor каким-нибудь классным ребятам построение графа зависимости это скажем так опционально это прикольная фича для того чтобы понять вот библиотека которую мы используем Да она допустим уязвима но мы ее в ходе это используем вообще нет где-то там она может как-то подтянута в инфраструктуре лежит может входит её нигде не используем соответственно наше приложение вот поэтому было бы неплохо если бы это умел инструмент Итак рассмотрим код скоринг что же такое Это продукт совершенно недавно появился на рынке Вот кстати мой хороший знакомый создал ну сейчас он превратился уже такого достаточно большого что он умеет он умеет во-первых легко интегрируется То есть у него есть написан уже правила под различные виды облака виды интеграции под гид лапа под себя под пакетный менеджеры всевозможные Вот Но его основная что он имеет сам выявлять зависимости в коде То есть он бежит по коду и начинает понимать эту библиотеку Я вот здесь использовал А сюда же есть какой-нибудь примерный то есть вот такая логика там есть это прикольно строят графы связи и большая База знаний достаточно потому что человек этим всю жизнь занимался и сейчас уже развивает на уровне большого проекта здесь я представил небольшую схему как она работает не буду ее пояснять вот собственно Так выглядит даже бардак даже барду я показываю просто для того чтобы когда-нибудь в этот инструмент видели такое о этой сиэй Все я это видел я это знаю и Давайте сразу посравниваем его с другими так как я уже сказал все что выше рассматривал это также есть и то есть это комбайны большие мы будем сравнивать в основном принципиально российские Венеры Итак имеем артефакторы с кучей докер образов у Понятное дело что в каждом доке образе собрана какая-то какой-то приклад с какими-то уже подтянутыми зависимостями и 4 репозитория примерно каждый по 5000 пакетов критерии которые нас интересует это скорость количество и позитивный результаты которые мы получили представлены здесь корень показала нам 21 процент позитивов всего количество уязвимости 8362 то есть на втором месте идет после доллара и x-ray отличились по нулю процентов только потому что они в них мы скажем только с бомы то есть собранные пакеты грубо говоря если по простому сбом это список собранных пакетов вот так списочком идем мы их скармливаем и он показывает 0 процентов Но из этих нуля процентов он и показывает Малое количество реально эффективных уязвимости через которое можно что-то поломать Поэтому нужно это учитывать Хотя вот экспресс неплохой достаточно инструмент но Уильямс - это вообще история которую просто пешка я думаю Многие знают про этот веб-сайт который можно зайти и посмотреть какие-то вообще бывают уязвимости и так далее вот кирюх Ермаков делал Итак посмотрим на Як здесь мы ничего сравнивать не будем здесь Я просто расскажу Вообще что это такое вот существует опять же наиболее известные перечислил сканер который умеет сканировать ваши конфиги ваши конфиг файлы он пробегается также ищет там какие-то проблемы и вам эти проблемы показывает рассказывает мы все это делали на базе фикса соответственно мы ему скармливаем какой-то репозиторий он в этом репозитории находит и начинает там показывает что у нас есть например в данном случае мы выставили неправильно сконфигурировали кластер куберы все Нам пока что в принципе отсюда можно сбежать вот такие проблемы находят и чуть-чуть еще расскажу про поиск секретов еще было бы прикольно если бы ваш процесс разработки и ваша точнее sdlc вы внедрили бы инструмент который будет искать секреты в коде и на базе этого построить процесс вот здесь опять же никаких сравнений не будет мы используем gettlix он также легко интегрируется в pype Line для того чтобы знали чтобы это видели И помнили про это рекомендую использовать Вот так это выглядит Вот например в одном из репозиториев у нас нашелся секрет этого с вот естественно не в рабочем поэтому Тинькофф можно не пытаться идти с этим Так ну у меня закончилась теоретическая часть я вам рассказал Какие бывают сканеры Что бывает на российском рынке как это все можно применять Теперь вы понимаете некоторые слова из статических анализаторов теперь можете просто отдохнуть я расскажу а для чего все это что какой вы от этих сканеров мы с вами немножко обламываем Итак актуатор Что такое актуатор есть возможность скажем так управлять через некоторую так называемую опешку менеджеритию что как нам найти включенный актуатор соответственно правило кекса мы написали сами внедрили это правило и дальше с этим правилом работали Какая здесь уязвимость Если у вас есть такая настройка в конфиге уязвимость мы можем выполнить произвольный код на сервере Сейчас расскажу Каким образом все на самом деле достаточно просто когда мы выполним пост запрос на последующему рай вот актуатор мы получим и отправим в него Джейсон где изменим параметр мы создадим новую переменную окружение в данном случае мы переписываем Spring Вот и соответственно актуатор возьмет и выполнит наш код который мы написали в данном случае детей реализованный Объект который потом соответственно стерилизованный объект Поэтому здесь реализуется класс этот вот и выполнится уже в самом объекте в памяти и выполнит наш запрос и коллаборатор то есть мы получим себе какой-то запрос команду выполнить команду можно абсолютно любую например РФ и удалить серверы и так далее как это выглядит вот собственно вот так когда мы как только мы выполнили этот пост запрос и подождали секунд опять Вот мы получаем на себя уже ответ от самого сервера едем дальше виртуальные Хосты моя любимая тема смотрите У нас у всех есть наверное лот балансеры больших компаниях Да я думаю все знают что такое Джинкс мы часто публикуем какие-то семена и все тому подобное удалили DNS именам по каким-то причинам хостел не нужен а с балансировщиков-то запись не удалили вот и что происходит если мы с определенным хостневом обратимся на этот балансировщик мы попадем на внутренний ресурс который забыли удалить админы такую историю прикольно искать прикольно находить и естественно нужно как-то процесс на это уметь вычищать вот собственно здесь я показал просто пример там любого конфига для тех кто может не видел и что дальше команда по которому можем пройти наш подопытный У нас есть там где-то запись test.com сделали виртуальный хвост по нему идем так у Клик разработал У нас есть правило синггрепа правило достаточно простое будет выглядеть вот так который будет собирать нам на все эти серверные мы которые мы видим А дальше парсить как угодно и складывать какую-то систему и уже виде отчет это можно все потом варить Вот и вывод здесь какой Может вам в такую инвентаризацию вы все эти виртуальные Касты увидите И каждый раз их можно уже строить базу знаний из этих Ростов вашей компании Я уже объяснил какая Давайте теперь рассмотрим более сложную такую притянутую за уши кейс но с помощью этого кейса мне действительно удалось Однажды поломать одно приложение у нас мобильное приложение есть второй фактор То есть первый фактор Это логин пароль регистрируйтесь завели все хорошо второй фактор это четырехзначный ОТП задача попробуем взломать его с помощью со 100 и будем использовать примерно такой паттерн для гриппа то есть мы будем использовать что связано со вторым фактором код reset Link и все тому подобное и когда мне попали исходники этого приложения Ну в некотором закодированном виде что удалось увидеть сразу быстро увидеть удалось вот такой вот интерфейс и в этом интерфейсе было два прикольных метода вот центр activation код и чек activation код вроде бы то что на что можно посмотреть как раз безопаснее начал исследовать это приложение уже в ран-тайме и что заметил первое самое прикольное что я заметил это то что у приложения Существует какая-то точка входа пешка Да вот по этой опишке я попробовал подставить эти методы из интерфейса и соответственно У меня получилось он мне отдал какой-то результат естественно я пошел сразу на мета-цент activation Q знаю его параметры и так далее передавать ему уже что-то и он начал выплевать какие-то круто но первый Фактор Я не вводил логин пароль то я не вводил то есть смысл В чем ребята сделали следующую конструкцию они где-то вызывают первый фактор проверяют его и отправляют тебя на второй но без каких-либо артефактов того что ты прошел первый фактор то есть соответственно логин пароль можно и не знать и не проходить вообще можно сразу приходить на второй фактор и уже с помощью него пытаться залогиниться в системе вот как Мы это сделаем сейчас я вам расскажу следующее что мы делаем мы вызываем мета-цент activation код на какой-то номер и далее мы вызываем метод чек activation код и собственно получаем ответ что у нас наш код не валидный Что же делать там была Ребята надо отдать должное была защита от бродфорса примитивного Ну я немножко пошел другим путем я сделал не примитивный бродфорс Сейчас объясню как Сент activation код метод Я вызывал бесконечно а чек activation код Я подбирал только один То есть до тех пор пока не попадет мое четырехзначное число четырехзначное число когда-нибудь попадет не так уж много вариаций Я вызывал вызывал вызывало до бесконечности потому что не было на это ограничений и собственно однажды мне удалось получить такен доступа вот такой соответственно Джейсон прилетает в итоге животе точнее Пардон Вот и мы его подставляем себе в заголовок колдуна dification проходим на сервере мы авторизованы под призагом достаточно только номер телефона логин пароль нам больше не нужен и в этом помог сост конечно да можно было бы там ресерчить гигабайтный исходники и так далее там достаточно большой проект многими сервисами и так далее но собрав все это в одну и прогнав какие-то ключевые паттерны мы смогли найти это можно сделать не обязательно там понятное дело просто как инструмент уже внедрён можно грепом обычным сделать в линуксе Да скачать всё это вот ну к тому что это статический анализ и через статические анализ мы нашли уязвимость которая достаточно серьёзно могла бы нанести ущерб Если бы я нашёл бы кто-то плохой не четвёртый кейс 4 кейс достаточно простой просто уже на примере того как в принципе состы работают это сервис сайт template injection вкратце расскажу про эту атаку атака внедрения в шаблон То есть у многих фреймворков языков и так далее есть какие-то шаблонизаторы да там у mvc это там Razer у питона джанга или еще что-то вот что они умеют они умеют Естественно рендерить какие-то темплейты да И если мы из юзера положим какой-то параметр который будет потом рендериться внедрить какую-нибудь вредоносную конструкцию в двух словах как это выглядело это естественное приложение тестовое То есть например мы на рынке подадим Вот такой Вот такую нагрузку перебирая там различные пакеты суд пакеты и зависимости в данном случае языке питон вот мы можем потом с помощью методов рефлексии вызвать какую-то интересную функцию Типа она выполнит передать параметр ID получить результат то есть это классическая цель ремонт Я думаю здесь все понятно коллеги так руки поднимите всё хорошо тогда Идем дальше тебе точно не понять Хорошо потом я тебе в кулуарах расскажу паттер паттерн по которому будем отыскать будет выглядеть следующим образом здесь естественно все не поместилось на страницу там несколько вариаций различного отображения в данном фреймворке Вот но вид его такой магические вот эти константы имена и так далее Я сейчас к сожалению объяснить не смогу потому что это прям вот синтаксис синггрепа вот здесь обозначает там такие нулевой это означает Первый параметр и так далее либо отсутствующие параметры функции и так далее чем уникален то что можно настраивать по различные сигнатуры методов его вот ну пятый пример моя любимая атака Я очень достаточно неплохо разбираюсь в дотнетти и там есть такая классная уязвимость вообще атака называется масса Саймон Кто не знает Поднимите руки пожалуйста если кто не знает шкаф шикарно про эту атаку значит отлично Сейчас я тебе расскажу смысл ее в чем очень хорошо что вы никто про него не знаете даже ты вот это очень хорошо смотрите espinet классическое приложение Ну возьмем фреймворк допустим Давайте 4 версии например вот мы описываем модель юзер У нас есть Бальзак У пользователя есть естественно какие-то свойства логин пароль и роль для простоты пример я взял такие на контроллере в контроллере мы создаем экшен экшен допустим изменения профиля пользователя или там изменения в данном случае логины пароли и роли используем конструкцию и самое интересное то что мы в экшен Передаем весь юзер все весь класс не по отдельности ринг там Password string логин и нам какой-нибудь роль в данном случае тоже string вот а мы его Передаем как юзер То есть как в виде объекта что в чём здесь проблема Проблема здесь следующая что если у нас User и свойства изначально же не определено правильно то мы обновим его полностью то есть допустим мы ожидаем на вход только логин пароль но если мы Передаем модель целиком и полностью то он может на себя принимать все остальные свойства и таким образом мы можем скормить в наш контекст изменить его потом в итоге естественно также и роль и так мы изменяем своего пользователя на админа и получаешь себе админские права Теперь давайте немножко попробуем подписать правила по тактике кейсы перед вами на экране как же все-таки искать масса саймонт в основном это атака применима именно ksponet в комьюнити так назовем это вот и вот такое правило нам поможет примерно находить все-таки наша масса саймонты в коде потому что это был достаточно простой пример естественно это он Понятно Но бывает более сложные зависимости особенно микросервисы если у нас есть где такой действительно может встречаться Вот напишем вот такое правило и Давайте его потестируем так я думаю достаточно хорошо тот же самый код который я взял под наше правило попадает и говорит нам что смотри ты модель ты полностью объект передал в параметр ты не передаешь отдельно его свойства и параметры И поэтому ты уязвим масса Саймон это так если Бальзак тебе запихнет ещё что-то в свойства то это свойство или определить Ну точнее понятное что он не переопределить сам объект он переопределить значение базе данных вот а инструмент с помощью которого тестирует от самого синггрепа ссылочка выше где можно действительно попробовать подписать свои правила вот свои какие-то уязвимости которые вам прилетают которые актуальны для вашей компании у меня собственно Все спасибо вам большое за внимание Надеюсь я вам был немножечко полезен вот небольшие итоги небольшие итоги что хотелось бы донести не закончил нет Юра не торопись У меня еще есть время небольшие итоги которые хотел подвести Вы теперь посмотрели на эти инструменты понимаете классификацию чем например иак отличается от царства Мы посравнивали немножко Российский рынок что хотелось бы от результатов это сравнение то что вы там сказали бы там вот этот инструмент лучше чем вот этот А тут как в принципе можно их сравнить между собой и выбрать что-то для себя Потому что например для вашего возможно компании будет там удобен один инструмент а не другой по различным критериям рынок России развеяли миф что сас не нужен Я надеюсь не удалось его развить то есть потому что сост из коробки он действительно не нужен он будет возить приносить кучу правил Никто это разгребать не будет никто на это смотреть не будет но если действительно им заняться как процессом и уметь его переваривать кастомить модернизировать то это очень эффективный инструмент который может приносить действительно хорошие Надеюсь что немножко пофани Вот теперь Спасибо за внимание А теперь у меня небольшое объявление У меня есть аж целых два подарка за вопросы И помимо подарков за вопросы сейчас на нашем стенде тиньковском проходит активность и куча Приходите участвуйте Но самое главное что мы сейчас запускаем сети для разработчиков Где вы можете попробовать себя в роли хакера зарегистрироваться и попросят в роли хакера уязвимости там простые специально именно мы под разработку Они под крутых уже там хакеров которые несколько лет сели и выиграли Какие классные призы для того чтобы поучаствовать можно забрать у меня классные салфеточки для очков это для всех желающих всё коллеги Спасибо большое за внимание готов отвечать на ваши вопросы Вот теперь вовремя Вот теперь как уже было сказано У нас есть куча подарков за ваши вопросы Вот первую руку вижу здесь и еще есть по центру потом Здравствуйте подскажите пожалуйста вы сказали что сделали анализ рынка и выбрали 7 греб я так понимаю по скорости действия Да основное это скорость Ну во-первых да потому что мы большие бесплатно для нас это тоже роляет Давайте будем честны Вот но скорость много решила скорость потому что огромное количество репозиториев У нас сейчас Примерно 100 тысяч это боевые репозитории вот нам нужно Их достаточно быстро переваривать то есть там был скорость но так как он ползящий сильным с этим нужно было что-то делать критерий для нас был такой еще один вопрос получается что вы выбрали только паттернтинг и не Используйте другие там типа межконтекстный процедурный анализ Ну прочие технологии которые позволяют верифицировать судимость не только по паттерну но ещё учитывать контекст сейчас мы это я использую это точнее мы как сейчас мы делаем инструмент отдельный над этим который он будет превращать результаты синггрепа перекладывать в наши АСТ и тоже это переваривать делаем мы сейчас это тоже на базе некоторых фреймворкнутых инструментов Open Source Вот Но мы пилим сами эту штуку просто это немножко за рамки доклада выходит уже динамический анализатор я хотел именно сфокусироваться сегодня на статике А так да у нас это обязательно есть у нас есть и все вот эти комбайны тоже есть Спасибо вам за вопрос перед следующими вопросом нас поправляют внимательные слушатели сейчас я открою И зачитаю что первые уязвимость с актуатором это Spring Boot они Купер для применения вообще не нужен Нет это понятное дело на примере Да стринга ну просто видишь нас внимательно слушают великолепно делайте также ваш вопрос а Да привет по поводу бинарей в контейнерах то есть условно когда мы ставим engines пакетного менеджера все понятно его находится сты все очень классно если мы его собираем из бинарей то состы обычно такое не видят Вот с таким Что делаете соло рабскринер вот он умеет А все остальное не собираетесь бинарей Ну да она у нас таких нет кейсов у нас все есть с кодом что она собирается либо кот смотрите либо какая-то Извне происходит там библиотека дейлики и так далее то мы уже немножко другие механизмы там уже Мы включаем кукушку Смотрим как она работает в фронтами запускается в песочнице куда она обращается С какими зависимостями что она вообще дёргает что передаёт Что принимает и так далее просто конкретно например потому что у них официальный imagy не из пакетного менеджера ставят и мы когда сканируем контейнеры и он не видит тупо версию внутри контейнеры Я на прошлом хайлоте как раз рассказывал про одну из проблем когда бизнес качать всё из внешних пакетных менеджеров То есть вы вообще всё включая вещь собираете из исходников для своих стримов артефакторе приходит какой-то уважение спасибо Мы на внешку всё закрыли Спасибо Следующий вопрос Алексей спасибо за интересное выступление У меня к вам вопрос сначала в контекст Давайте решающие деревья понятная история теперь вопрос к вашему анализу Фолз позитив и остального просто смотрели цифры или вы все-таки сверяли вот эти 20 Позитив они там лучше хуже чем у другого инструмента в Фолз позитивы сверить нельзя ну то есть я по какому критерию можно сверить Ну уязвимости то они находят одни и те же или разные вот вот это очень хороший вопрос Это то скорее всего О чем я забыл сказать Вот откуда большое срабатывает Давайте вернемся к той табличке Сейчас я найду Так мы Я так понимаю Сейчас я найду в самом начале так это уже сейшел Я здесь сейчас делаю пояснение достаточно важно Так это уже перескочил сейчас оп оп так так вот они пояснение следующее то что многие из них работают с разными правилами и находят совершенно разные уязвимости и Например если мы даже обратим внимание Вот возьмем Давайте A Checker и pws Studio Вот видите Там пять пять критичных ноль фанеры и у него одного такое правило было Вот что самое интересное он но критично не то чтобы она супер критично было он нашел там возможности srf выполнить то есть в рамках в понимании состав ускорингу это критично Ну и для сервиса тоже была критично но никто и остальное не нашел Вот именно такое сравнение Конечно я его сделать не смогу потому что это нужно каждое правило с каждым сравнить это уже прям не один доклад эту же книжку можно написать Вот но по своей именно экспертной оценки то есть сам оценивая критично и не критичная для данного кейса для данного контекста я вот и сделал такую вот я ответил на ваш вопрос отчасти но я понял спасибо ваш вопрос такой Зачем сканер секретов если в принципе умеет искать секреты тот же самый правила дублировать можно Не нужен объясню сканер секретов сосредоточен только на них тот же самый getlix также поддерживает совсем комьюнити вот если все запихивать сингрет у вас будет допустим там ну не тысяча правил скажем так особенно если сканер секретов да то есть там паттернов вообще огромная куча там отдельно по ДВС подкубер под что угодно то соответственно у нас произойдет то что у вас будет правило так 20 тысяч за этих секретов понимаете и соответственно который бегать должен искать состы еще какую-то логику выполнять он будет И эту логику выполнять зачем вот и соответственно нагрузка на Тайм на тайминг на тайминг для нас очень критично потому что большое приложение вот поэтому лучше все-таки я бы рекомендовал использовать под секреты отдельный инструмент или Возможно даже такие инструменты это классно умеет и он делает это быстрее чем игре потому что только это делает и больше ничего по сути это такой крепматч Спасибо большое это спасибо за интересный доклад здесь Справа справа Я Да Слушай интересно было послушать про сад в разрезе безопасности Но всё-таки изначально сад зарождался для того чтобы можно было отловить баги которые недоступные для отлавливания обычными тестами там взаимные блокировки потоков утечки памяти зацикливание и соответственно написать шаблоны под такие вещи гораздо сложнее и у меня вопрос используете ли вы его для этого ловили ли вы что-нибудь такое и писали ли вы своей шаблоны для того чтобы ловить не просто где-то за хардкоженный пароль в коде а именно какую-то баги да Но то что вы перечислили процентов 80 это уже зимний я их как правило нет И всех находит sast типа checkmarks типа колени да Про какие еще раз утечка в памяти памяти зацикливание взаимной блокировки потоков одновременно да да вот такое мы писали правило но на моей памяти Я у нас было всего две такие уязвимости под которым мы сели под одну только написали правила написали правила по drace Condition находили вообще много из коробки их из коробки инструментом на самом деле очень мало Мне кажется либо здесь проблема опять же с правилами и мы это правило Потом перемодернизировали оно приносит 0 уязвимости то есть мы либо делаем Вывод что их нет либо есть правило плохое то есть у вас есть интерпретируемые и компилируемые поэтому и то есть все-таки больше для компилируемого я с вами поспорю не тот который что уязвимости А тот который ищет ошибки но здесь уже наверное Мне будет сложно ответить потому что я безопасник Меня интересует уязвимость а не ошибки в первую очередь здесь Наверное уже больше вопрос комьюнити разработки насколько это интересно Но вот если говорить конкретно про уязвимости то как интерпретируемый так и компилируемый языки достаточно сейчас уже развит и то и то и сас по идее уже такой как чекмарт большие такие гиганты на рынке они хорошо переваривают и интерпретируемые и компилируемые и покажет где Что может быть потенциально Ну про ошибки Извините я на ваш вопрос не отвечу Потому что я не Эксперт я это не проверял Не знаю Спасибо вам за вопрос спасибо Вот ещё Рука уже достаточно долгое время Алексей ещё один вопрос я так понимаю что Достаточно давно уже пользуетесь всем крепом как основным инструментом изначально мы пользовались чекмаксом потом перешли значит как минимум год Ну да уже есть здесь если посмотреть на табличку у него достаточно большой процент false positive это до какого процента вам удалось докрутить сейчас сейчас на данный момент синггре ползит на процентов 20 вот ну то есть это все равно большой процент Да но сопоставимо это false это много вот и поэтому сейчас мы в ближайшей перспективе очень хотим докрутить его хотя бы до процентов 5 чтобы уже отдать сасфандинги в разработку чтобы сами разработчики могли разбирать свои фаннинги в моменте То есть вы видите там поле для улучшения Да да конечно улучшать всегда есть куда и можно куда примерно я писал механизм как мы это делаем естественно верхнего уровня потому что времени не так много но смысл в том что мы хотим прийти к тому чтобы разработчики сами свои файлинги могли верифицировать но отдать разработчику портянку из тысячи фандингов из которой 5 Позитив нас такой разработчик просто уволится и скажет безопасник его что творите вот поэтому для того чтобы дать качественный сервис Мы сейчас с этим сервисом работаем собственно тоже про что я вам рассказывал и чтобы потом уже его отдать в разработку и качественно разработчики достаточно комфортно могли свои фанинги сами верифицировать себя это операционную нагрузку Ну что у нас пять разработчиков несколько тысяч случаев еще коротенький блиц вопрос Вы разработчикам даете то что сим-греб вам выплюнул или же все-таки говорите Что можно поправить вашей точки зрения сейчас мой подход такой что я ничего в разработку не отдам Пока сам не верифицирую что это уязвимость всё понял сейчас разработчики получают только уязвимости один вопрос не увидел здесь там какую-то связку типа ДТП Google сканером вообще сравнивал След что-то что можно сказать А чего ты хочешь у них дополнительный фид появился не лучше ли он Смотри а вас естественно сравнивал но не указал сейчас давай-ка найдём его быстренько да Вот тебе пожалуйста дополнительные фиды есть в отличие от человека а нет не сравнивал Я человек бесплатно Спасибо ваш вопрос Спасибо за доклад вспомогательный вопрос Вот какие операционки вы пишете Ну то есть пишем код какой который в продакшн идет Да у нас и Windows есть и Linux есть а вот по поводу линукса прозвучала фраза что Вы абсолютно все собираетесь исходников операционку тоже еще раз Задайте свой вопрос пожалуйста операционку вы тоже из исходников но мы операционку сама не пишем или что имеете Ну смотри вопрос зависимость вопрос в том что как бы ты что как бы вы зависите собираете сами Если вы собираете сами У вас есть образы образа систем которые разворачиваете собираете ли вы образы системы докер образа эти проверяем теми же самыми инструментами и эти образа кладем наш внутренний рейджестрит и это называется У нас базовая база разработчики для того чтобы что-то дальше написать какой-то продакшн завести сервис микросервис или что-то такое они берут базовый образ и уже туда через различные механизмы которые мы даем в этих базовых образах докинуть там нужные им инструменты через согласование безопасность мы подготавливаем эти образа заранее тогда последний вопрос Сколько по времени занимает создание этого база образа Я честно говоря такое не замерял но один базовый образ Вот ребята делали наверное дня два дня под один запрос образ сделать Ну и он потом масштабируемо уходит на целые команды не делается так там один образ вот там одну хотелку делается сразу базовый образ Да да спасибо Ну что как живого указано Это был наш последний вопрос Поэтому нам нужно выбрать какие мы хотим из всех этих вопросов отметить я запомнил Вопрос вот этого прекрасного господина ему прекрасную книжку чистый кот создание анализ и рефакторинг Спасибо вам за вопрос Спасибо за ваше участие а второй вопрос Я предлагаю выбрать тебе нет Ты снял себя ответственность а давай знаешь сделаем Кто у нас внимательный слушатель там был ты вот из чата мы не узнаем поднимите руку Вы писали в чат Да давай вручим этому господину подарок за то что он внимательно слушал и хорошо посмотрел доклад похлопаем же прекрасному человеку за то что он нас внимательно слушает у нас поправляет Да и похлопаем нашему прекрасному спикеру за его доклад ему тоже полагается подарок коллеги коллеги но напоминаю то что если вы хотите поучаствовать в нашей системности Вы можете меня забрать Вот Эти прекрасные тряпочки ходом тряпочки для очков для всего чего угодно вот и Здесь же есть первый флаг на первое задание Поэтому если что ко мне подойдите Я вам это раздам Спасибо большое спасибо спасибо вам за ваше внимание ждём вас на наших следующих докладах"
}