{
  "video_id": "jZuXrU1vPAs",
  "channel": "HighLoadChannel",
  "title": "Облака для самых маленьких / Алексей Учакин",
  "views": 1074,
  "duration": 3057,
  "published": "2022-03-21T13:13:02-07:00",
  "text": "ряд я надеюсь не буду слишком что потому что пиво греется все такое поэтому начнем облака то удобно это очень удобно тепло и ца это быстро работает большинстве случаев обычно даже безопасно если не хранить токены в конфигурационных файлах иногда даже еще не дорого я вообще в китае такое да и зачем а здесь все это рассказываю я где-то лет десять работал с сетями различными в операторах дата-центрах в enterprise и так далее где-то года три назад то немножко сменил род деятельности просто несет надоело и теперь я выношу мозг нашим замечательным партнером сервис-провайдером это центром и всем тем милым людям которые хотят нам что-нибудь продать или уже продают и компании мы в компании сделаем так чтобы платить за товары и услуги в интернете было легко просто и безопасно у нас миллиона транзакций в день со своей четыре девятки и флот больше все может 500 физических серверов в 5 дата центрах по всему миру вот примерно об этом мы сегодня поговорим почему нам не подошло публичный облака как мы все сделали сами и какие подводные камни собрали вообще зачем нам все это когда вот к вам приходит managers очередной безумный день на миллион долларов да вот первый вопрос он как правило 1 зачем во второй ну как виде зачем вот собственно зачем да у нас исторически мы развивались на бары металле на старым добрым вот таком железным покаянию для продакшна и нас принципе устраивает у нас есть кластеры овир то есть кластеры proxmox а все это что-то крутится на глаз царя что-то крутится на локальных дисках местами у нас до сих пор есть к сожалению ручной deploy машин но в целом это все где появится автоматом и у нас вдобавок в качестве теряющего обстоятельства есть мы так как мы работаем с деньгами то мы попадаем под регуляцию 50d с она довольно жестко и доходит до того что у нас для разных проектов абсолютно разное железо стойки сетевое оборудование на ту ситуацию вот каждый парк такой проект это по сути делаем не дата-центр где все свое и понятно что вот в текущей парадигме когда нужно быстро выкатывать фетиш прот когда вас там разработка хочет использовать постоянно какие-то новые инструменты либо просто чаще deep ловится вот жить на непосредственно развиваться на железных серверах это не всегда удобно и хочется этой гибкости которая дают облака к когда говорят про облака обычно вспоминаешь что-нибудь публичная вот коллега рассказывал про гугл клауд есть вас есть яндекс и джор что угодно почему нам это не подходит во первых для нас это дорого именно пола с вашим профилям нагрузки хуже того это внезапно дорого потому что неправильно адски явившаяся лямда где-нибудь публичном облаке может легко увеличить ваш месячный счет на несколько тысяч долларов благо прецеденты есть еда можно написать в поддержку в с и сказать что а ему нечаянно и вам это компенсирует может быть но тем не менее во вторых это плохо контролируется данные которые лежат в облаке эти не ваши данные это данные которые лежат у вашего провайдера а провайдер за ваши же деньги вам к нему доступ предоставлен поэтому вот у нас не всегда устраивает если у вас допустим вы по какой-то причине постарались с дата-центром были свои физические сервера можете взять и за сутки увести в другой то центры там подняться теперь представьте сколько времени у вас займет сми клевать какой-нибудь менеджер потому что к вам придет облачный проводе расскажет чуваак тебя здесь в 24 часа быть него не должно а иначе мы дропнул твои данные и да конечно там каждый раз какая-то своя ситуация и на наверное для этого уже были звоночки и т.д. и т.д. и т.д. но тем ни менее тоже прецеденты были и поэтому и вдобавок дата-центр может вот с вашим облаком вы же не знаете где на самом деле это облако расположена географически что это за дата центра и так далее и вводим приказ момент вот обе ваши и зить могут улететь в облака вот мигрировать прим ну прям вот да опять же абсолютно реальный случай из пожара в дата-центре овинич когда две якобы разные вы выберете zones были просто соседними комп усами на одной площадке и сгорели они в общем то вместе когда у провайдера что-нибудь большого провайдера тип это макам aicloud в рфс что-нибудь ломается то во-первых вы видите о том что что то сломалось про статус поджог и когда это почти нет чтобы народ кастом ну не всегда ясно оперативно про рот курс вам напишут в паспортами может быть иногда там пишет просто nu ai мы больше не будем да конечно когда вы пользуетесь публичным сервисом у вас там если допустим упадет как у некого от флирта пол интернет еще за ним упадет но проблема в том что остальные половина интернета они хотя все еще заказывают пиццу ездить на такси и и вот все вот это вот то есть мы не можем себе позволить вот лежать вместе с половиной интернета нам нужно быть доступны так вот когда вам опять же какой нибудь облачный провайдер говорит что у нас вот такой силы и там значит много девяток и там стопроцентный доступность на чтение все дела когда все-таки происходит пока по он всегда происходит провайдер говорит столы ну ну сорян мы больше не будем мы вам дадим компенсацию может быть потом это опять же раз времени случай с которыми мы сталкиваемся постоянно и по нашей статистике мы по своей вине режим меньше чем по вине облачных сервисов которые мы пользуемся до то есть могут быть блокировщики трафика это могут быть в паприке чем firewalls какие еще внешние по отношению к нам сервисы вот как-то так получается что за последние наверно полгода они лежали чаще чем мы лежали по своей собственной вине почему не - сервиса дать некоторые до центра не дают услугу приватный облака под ключ и вы там можете на в вареного под стойки на чем угодно получить приватные облака буквально из коробки просто на кликов мышкой во первых такое такой сервис дает ограниченное количество провайдеров и вы автоматом получается привязывайтесь к этому самому провайдеры вы уже не можете выбирать локацию такую которую вам удобно вы вот должны это согласовывать как то там где то что то договариваться и так далее и так далее у вас сужается выбор во вторых как правило в случае таких - сервисов они дубовые и к неплохо кастомизируют и серьезно то есть доходит до того что под видом не знаю там приватного облака под ключ вам просто ставят то подставь дефолтом и настройками и дальше вот вы как-нибудь сами уже если вам нужно что-нибудь нестандартное то разумеется за ваши деньги вам провайдер сделает при все что вам нужно но во первых это дорого во вторых у вас не остается никакой экспертизы поэтому даже слезть с этого провайдера вы уже не сможете потому что там уже вот на пелена надела на столько всего к что как бы а к а как ну и листовые да то же самое только еще хуже в общем мы так как с деньгами работаем там и параноики да поэтому мы вот на это посмотрели и даже учитывая что это наверное часть этих рисков наверное гипотетическое да но скажем так мульк облакам относимся к публичным облакам относимся крайне скептически хотят безо всяких вещей типа тестовых сред это прям пушка какие требования мы начали выдвигать когда решили сделать свой собственный приватный о бок требование самом деле простые безопасность потому что мы про деньги стабильность потому что у вас четыре девятки масштабируемость потому что иначе зачем облака и управляемость туда же до что цели у нас та же стандартная практически у практически у всех кто запускает свое приватные облака не примерно такие же мы хотим быстрее проще выдавать ресурсы нашей разработки мы хотим отплатить упростить для себя эксплуатацию продакшена и мы хотим в перспективе сделать такой продукт который можно будет внутри группа компаний продавать как за там какие то не знаю за какое-то вознаграждение давать коллегам пользоваться собственным продуктом тем самым во-первых повышая свою экспертизу экономить деньги то не теперь не выходит за пределы группа компаний ну и там прочие приятные плюшки когда мы начали рассматривать претендентов на рот привата в облака обнаружилось примерно три стула vm ware и нутаникс cisco и прочее это правильные вендоры можно не знаю открыть квадрант картера и и посмотреть все хорошо здорово очень дорого потому что платить нужно примерно за любой чих и за любую плошечку нужно купить либо там еще одну коробку либо отдельную лицензию либо там еще что-нибудь плюс это саппорт плюс это люди которые поговори ещё более-менее на рынке есть с нутаникс там cisco и там кем еще вообще все плохо но и абсолютно щуплый бокс случае проблем пишите спорт лото и ждите пока саппорт вам что-нибудь починить другая крайность это всячески нишевые продукты типа kaoss такого панни были на чего-нибудь такого и хорошо если у вас в штате есть мой тренер такого проекта тогда все здорово и тогда в принципе вы можете это тащить и это будет удобно потому что это будет подстроено под вас максимально максимально плотно к сожалению monte nero хватает не на всех комьюнити не очень большое ну по сравнению допустим с теми же тоже в январе и соответственно если у вас возникнут какие-то проблемы то скорее всего вас не место нить 11 ну есть the pan stik который open source ный который есть в разных вариантах есть платные дистрибутива от вендоров есть бесплатная есть ваниль него японцы так и в принципе ты можешь сделать все что угодно и разумети будешь делать все что угодно потому что эти hynix свой и мы остановились именно на этом решении на ванильным об отставке просто потому что нам показалось что это будет во первых не очень большая цена за вход потому что случае vmware это сразу должен отвалить много денег за коробку люди мало но их есть на рынке и можно за конечное время найти специалистов штат и в принципе это довольно большое комьюнити удобно кастомизировать и так далее тогда когда встал выбор насчет 100 раджа что здесь тоже есть разные варианты потому что допустим локальные диски они хороши когда вам нужно внимание в этом это в принципе удобно но не случае окон стека но локальный сторож он довольно удобен да разумеется есть проблема с отказоустойчивостью но если у тебя правильно с дизайне ная система например случае база данных тебе не нужно миграция тут я просто реплика умирает вместе с диском ну как бы ладно у нас есть еще одна там одна или ни одна реплика система хранения данных либо медленно и дорого либо быстро и очень дорого обычно их ставят вот как раз вместе с какими там в январе и так далее да круто да много iops of но опять же во-первых куча лицензии ты платишь за каждый чих плюс саппорт и так далее и так далее и жестко ограничен той функциональностью которую тебе предлагает вендор и в общем еще вдобавок это опять же большая плата за вход и контроллеры для страха дошик они довольно дорогие если тебе нужно допустим поставить рядом еще один изолированный класс что ты просто покупаешь еще одну из страха до за тонну нефти ну в общем такое себе ну и из отвар define сторож случае цеха это случилось так этот цех ну казалось бы там тоже есть разные нарекания но с другой стороны мы используем глостер у нас он работает в принципе нас устраивают по производительности там есть проблема с масштабируемостью но это других другой вопрос другой вопрос поэтому мы остановились на цепи и вполне считаю пока нас этот выбор устраивает гипер конвергенция это такая клёвая штука которая вот в в рекламных проспектах приват софта для правят клауд очень любят упоминать когда у вас одна и та же но до может там выполнять функции компьютер старик же надо делать это одновременно в экономике место в стройках повышаете там производительность на юнит и прочие вот такие вот вещи к сожалению в нашем случае это не сработало хотя возможно сработать на маленьких инсталляциях но у нас получились отдельные ноты под хранения данных 2 июн этого и серверы с большим количеством корзин на битве с 1-го мая кашами это контроль управляющие ноды который вас получились отдельно я позже раскрою почему нет отдельные ноты но если кратко мы изначально хотели вынести в цех прям вообще вывести управления и цехам и окон стеком в отдельные виртуалке вне облака а потом прикинули сколько нужно будет перейти сетевых дырок чтобы это нормально заработало и от этой идеи отказались ну и у нас есть еще разные типы вычислительных not any под разные задачи какие-то но там имеют много памяти локальные диски какие-то но поменьше память и вообще без дисков и так далее так далее это не очень правильный наверное клауд в подход но лак для нас это отчасти была вынужденная мера потому что подключать железный сервера напрямую к облаку мы пока не научились и опять же позже про это скажу сеть в окон стеки может быть простой буквально как тапок мы берем 2 вилочек а хотя бы один под вычислительную сеть 2 под сторож мы еще в 1 вилочек подаем наш интернет все это разруливает штатным нейтронов и она работает до определенного момента потом вы начинаете вместе с ростом вашего облака вы начинаете ловить проблемы в 2 когда у вас ограничивается мобильность железок вы не можете там получает появляются неявной зависимости появляется какой-то шторм какие-то какой-то бродкасты так далее в общем все прелести в 220 центрах и про это там нужно делать вообще отдельный доклад когда вы хотите сделать что-то более сложное вы подумываете о подключении к установке какого-то внешнего software define network controller а в случае опыт секрета как правило может быть танк от фабрик это может быть о понго switch овен что-нибудь из этого скорее всего не дружит с вашей версии подстветка что-нибудь не подходит потому что это плохо совместима с вашим сетевым оборудованием и так далее и так далее в общем там есть над чем подумать каждый практически вендор сетевого оборудования имеет свой reference дизайн подал конспект ну как в общем-то под в аварии под под куберы так далее на картинке все здорово то есть ос windows эндеров в брошюрке вот такая вот картинка с цветными квадратиками там вот все вот купить у нас короче вот это железо вот это железо а еще маленькую коробочку которая коробочку с авто которая вам будет значить делать вот все красивые связывать там вашего pan stik с железками все там автоматом праве женей и бла бла бла бла бла еще как правило там мелким шрифтом внизу под звездочкой написано что это все тестировалась только на определенной версии операционной системы которая устарела тому же на фиг знак насколько когда хорошо мы идем дальше и мы смотрим на больших людей на яндекс на facebook на и веса нерегулярны на конференциях рассказывают о том как они делают сеть в облаке и значит вот там все у них тоже хорошо и здорово но есть там нюансики то есть вот по такой вы тоже картинкой нужно понимать что скрывается во первых то что там примерно все свое начиная в терминальной случае от прошивок на коммутаторы в доценты и до вариантов когда вы знаете мы взяли окон стек посмотрели на него половину выкинули переписали и вот она у нас вот как то вот так вот работает и к моменту когда вот вы добираетесь до этой презентацией осознаете и и пытайтесь повторить что наверное не самая лучшая идея есть в этом не являетесь сами перский where am the выясняется что этот дизайн уже давно на самом деле устарел ребята в гипер скейлеры выкатили свой и вообще как бы это уже вот аудит это вообще у них не взлетела только у них две тысячи серверов а у вас 20 и как-то вот но непонятно и мы сделали своем как мы это обычно делаем наша сеть физически представляет из себя фабрику когда у вас в каждой стойке стоит по два коммутатора для данных еще один коммутатор для управления собственность коммутаторы с большими быстрыми портами подключается в центральные коммутаторы с помощью 100 гигабитных рынков и между собой они связываются и образуют так называемую сетевую фабрику либо возможного слышал про ли вступай в общем это вот как раз она когда вы настраиваете некоторые некоторую абстракцию которая вам может давать сервис ну как как сеть дату издавать всякие 2 туннель чеку 3 подключения обеспечивать роутинг отказоустойчивости вот все все вот это накушавшись всякого с обычными в 2 сетями в 2 цента решили сделать все хорошо и здорово и сделать нашу сеть полностью 3 что это значит у нас каждый каждого тщательная но дэви сторож not подключается к коммутаторам стойках с помощью gdp и там разные сессии для компьютера или компьютере и сторож сети и таким образом мы уходим полностью от l2 в рамках нашего облака с этим разумеется есть нюансы например поддержка такой топологии инструментами тепло и того же упал стека или например цеха она местами специфично и допустим цех далеко не всегда позволяет вам сказать что ребята у нас вот это вот сеть как бы она вообще-то не то чтобы она вот одна слышь 24 например да у нас в каждой стойке есть там по просто адресу там слышите эти два который с каждым новым анонсируется и таким образом мы вот нам то это лучше а вот с точки зрения именно инструментов там как-то не все так однозначно с точки зрения софта на допустим на тех же коммутаторах все тоже не очень неоднозначно потому что есть какие-то базовые функции типа ethernet switch инга работают практически всегда то когда вы хотите чего-нибудь странного то физически у вас одно работает одно не работает либо работать но не так как надо и у нас был случай когда мы перепробовали наверное 5 версии прошивок прежде чем нужный нам нужно нам функциональность заработала и ничего лишнего не отвалилась зачем вообще мы все это делаем в том помимо улучшения увеличения стабильности нашей сети и улучшение масштабируемости в частности это балансировка трафика потому что и стимпи то есть внутри балансировка дает более высокую управляемость в отличие от из арсенала вы получаете больше контроля над тем где вы хотите видеть трафик и в каком виде плюс мы имеем гораздо более гибкую возможно больше возможностей в плане допустим независимости стоят друг от друга то есть у нас каждая стойка это по сути дела такой независимо units который мы можем сделать всё что угодно мы можем там сменить адресацию мы можем ее выключить мы можем там что-то все переделать но это работает по вполне понятным интерфейсом и получается так что каждая стойка на другой абсолютно не зависит ну и простота масштабируемости авторитете масштабируется гораздо гораздо проще чем чем вдвое в целом в 2 в центрах это уже давно такое такая очень устаревшая и местами даже вредная штука сеть наша построена на оборудование одного вендора и с одной стороны это клёво потому что у вас получается 100 процентов совместимость между коробками вас вот можно использовать всякие проприетарные штуки типа эм си влага например можно там не бояться о том что вот где-то железки друг с другом по какому-то протоколу не договорятся потому что в принципе это один и тот же винда при этом баге в повод о которых я на прошлом слайде говорил они тоже у всех общее и если у вас что-то не работает то она не работает везде к сожалению мне еще пока не доросли до того уровня когда мы сможем себе позволить иметь top of rack коммутаторы от разных вендоров в пределах одной стойке но я думаю что когда-нибудь мы найдем и до этого потому что баги местами имеют прям быть очень-очень борюсь и ну и проблемы которые вы поймите с в прошивке допустим какого-то вендора не вас автоматом применяются на всю сеть что тоже как бы местами может быть больно и допустим есть пример сцен серединку это большой провайдер который из-за бага вы совсем своей дивизии системы они лежали порядка там 50 часов штатах просто потому что у них вот одна из коробок сошла с ума заблудилась эти управление в топе легла вся сеть но с другой стороны использования разных вендоров там тоже есть свои плюсы и минусы сеть в облаке без выхода в интернет она никому не нужна поэтому как правило очень быстро вот только когда вы за sata пили там например у подстриг и хотите дать им пользоваться встаёт вопрос о том как вы будете связывать его с интернетом проблема первое в том что все инструменты за толщины подал 2 окружения о пустых ожидает что у вас в сети есть whelan чеки что вот там что вас там определенным образом подключена сетевые интерфейсы и вот все вот эти вот вещи там прикручены сбоку поддержка туннель и но там тоже такое себе 2 проблема это в том что очень модная штука которая называется distributed роутинг когда у вас вычислительный но да сама решает о том как и где выкинуть трафик она тоже хорошо описываю то есть хороша на картинках когда вот у вас там вот всю все но как как то вы все сама работает но к сожалению в нашем случае когда у нас нет возможности допустим привести вилочек на каждую вычислительную ноду либо на либо там статический туннель потому что когда у вас вот например ну примерно допустим 100 или 200 или 500 ну поддержка статических туннелей вообще любого как бы властями прибить их каких-то решений это прямо очень очень больно и очень неудобно 0 3 проблема что когда вы отказываетесь от дистрибьютор throwning в пользу выделенных ролей вот почему мы собственно и пришли к конфигурации отдельных железок под управляющие ноды потому что на этих же управляющих нодов у вас сейчас настроенный роли так называемых network ноут которые являются шлюзами через который трафик покидает облака а то есть для трафика север-юг это с одной стороны теоретически может стать нашим бутылочным горлышком потому что мы ограничиваемся полосой пропускания даже не нашего пограничного маршрутизатора полосы пропускания которое может выдать нам могут выдать нам те самые сетевые ноды с другой стороны в облаке как правило трафик север-юг он значительно меньше чем горизонтальный трафик между между нодами а там к счастью все отрабатывает через sdn енота общаются друг с другом напрямую вмешательства администратора не требуется чтобы что-то работает когда я удивился с коллегами тем что мы запускаем свое облако на подставке большая часть из них дела в удивленные глаза и говорил о том что как у вас нет своей команды программистов как вы будете поднимать окон стек в продакшен без возможности что-нибудь там переписать ну вот мы и решили что программисте нам пока ещё рано и попробовали поднять все сами на самом деле для этого нужно не такая большая команда нужен 12 грамотных сетевика как минимум один человек который понимает как работает окон стек и имел практический опыт работы с его обслуживанием и диплом метро бошку там еще пару толковых люксовых админов которые собственно будут помогать и тепло i'm not разворачиванием сервисов и опять же трубу шутку ну и человек вроде меня который будет ко всем приставать следить за сроками подтаскивать железки и рисовать адресный план когда мы запускали начинать или запускать openstack а это была зима двадцатого года как вы знаете довольно быстро нас всех закрыли и стартовали проект фактически мужчины удаленке и соответственно для нас это был такой первый крупный проект который мы поднимали как распределенная команду к сожалению чуда не случилось и первую попытку мы зажигали по разным причинам но потом со второго раза мы нашли уже внешнюю спирте зуб up in стеку и это оказалось гораздо результативнее мы получили работающий облака не даже не имеет человека в штате но тем не менее вот облака нам за тепло или в принципе мы начали с ним работать к сожалению проблема с внешней экспертизы в том что люди которые допустим могут вам помочь с как-то со всем этим они мягко скажем востребованы и вы вынуждены конкурировать за их время с другими их клиентами и с их собственным бизнесом поэтому в штате если вы рассматриваете посты взгляд продакшна в штате обязательно должен быть человек который в нем хорошо разбирается и кота потому что многие вещи опять же по своему опыту могу сказать что многие подходы в окон стойки до принципе его января они выглядят немного не так как это обычно привыкли видеть этики и вот почему опять возникает ситуация когда дайте нам 2-ве ланчака дальше мы сами потому что язык который используется для сети в облаке и те понятия которыми привыкли оперировать обычные инфраструктур щеки и сетевые инженеры он во многих местах различается и взгляды носить тоже соответственно различаются плюс опять же необходим абсолютно растить экспертизу внутри и вот тех самых там linux админов тоже натаскивать на показывать им как работать с облаком соответственно натаскивать их на то чтобы они сами наращивали экспертизу в продукте но я думаю что это вещь вполне себе очевидны что у нас пока не получилось мы не решили пока еще всех проблем с х у нас сейчас три управляющих нода соответственно три набора управляющих сервисов но далеко не все компоненты окон стеком нормально работают такой конфигурации к моему удивлению мы пока не научились подключать железные серверы к облаку напрямую то есть не через никак внешне какой-то ресурс который будет ходить через network node вот непосредственно напрямую в инстанс реализации есть в некоторых один контроллерах типа так стан фабрик но есть и честно там довольно скудное описании либо в проприетарных дистрибутивах от того же допустим мир антиса я думаю что мы опять же какое-то решение найдём и пока еще не все у нас вот просто через год потому что где-то мы поднимали там вот нужно быстрее сейчас руками быстренько на говне какие чтобы она работала местами просто потому что это переделывалась уже столько раз что актуальной версии сиплый буков просто не существует но вы сейчас соответственно все это причесываем заводим там в тот же штраф форум в анси был и так далее о чем нужно подумать когда у вас возникает идея поднять свои облака во первых это мониторинг и всяческая инфраструктура лог коллектор и навесил допы и вот все все все хорошо то есть хорошо если у вас какой-то brown field и у вас уже с рядом есть мы облака поднимали в абсолютно новом дата центры и у нас там не было ничего поэтому нужно было сначала нужно было сначала сделать некую инфраструктуру которая будет поддерживать облаком deploy новых нот вот я уже говорил про то что некоторые инструменты деплоя они не понимают то есть в и топологии которые у вас есть допустим тот же ма сад canonical он считает что все ноды у него должны быть достижимы по l2 а если у вас сегментация то вы просто вот в каждом в каждой строчке пожалуйста поднимите по интенцию я на вас будет каждый месяц будет тепло и свою стоечку но что выглядит немножко страну тестовый стенд это тоже такая маст хав штука потому что как только у вас в облаке появляется нечто похожее хотя бы на 1 клиента то играться ставить эксперимента сразу становится очень больно дорого и неудобно понятно что тестовый стенд скорее всего не будет повторять ваши production железе потому что дорого поставить четыре коммутатора просто за тем чтобы воспроизвести такие же условия как как в бою но какие-то вещи нужно делать и проверять но как только вы начнете эксплуатировать свое облаком если у вас там есть свой дел и б тоник вам придут и попросят вот цели разделение прав а вот всякую разную безопасность и так далее так далее к счастью уже можно проходить писать с с аудит своего пластиком cabernet а сам и облачными средами счастье аудитор уже понимают что это такое потому что еще пару лет назад было нереально ну тоже чем я говорил унификация всего и вся облака довольно плохо едете если у вас много ручной работы поэтому вот все что можно запихнуть шаблон номера портов на коммутаторе там расположение сетевых карт все двери адресный план все все все вот эти вот вещи должны быть максимально унифицированы потому что иначе будет ну банально неудобна о чем еще нужно подумать это например об экономике в нашем случае у нас на 1 стекла ватную стойку получается примерно 24 сервера это вроде бы мало но чтобы поставить туда еще 20 серверов нам нужно купить второй комплект сетевого оборудования сделать еще набор курсе рамок и где-то взять еще еще 11 киловатт который не каждый это центр даст а если у вас еще есть но даже пью то там совсем неплохо даже если вы не планируете продавать ресурсы облака куда-то на сторону то хорошо бы подумать о каком-то беллингер чтобы вы по крайней мере могли и разработчикам сказать насколько условных кредитов попугаев там золото не знаю чего то еще они используют запускаю свой код здесь вот у коллег завтра будет тоже вечером так уот по поводу синапса и по поводу управления расходами в облаке вот я думаю что они кампрад на эту тему очень много имеет что сказать ну этим мультитональность да когда у вас клиенты даже если это разные просто проекты и вроде бы все внутри одной компании то проекты должны быть максимально разделены друг от друга потому что в нашем случае это просто обязательные условия так как 50s но изолировать клиентов нужно по максимуму потому что это облако это взрывные нагрузки и так далее так далее данный компонент это вещи которые не всех касаются но если вас это касается то ну там всем может быть печально и требования регуляторов могут быть довольно жесткие с точки зрения как разделение но сегментирования проектов друг от друга выделение каких-то отдельных зон фаерволы и так далее и так далее хостинг который является порталом по умолчанию его пасты это конечно не образец юзер френдли интерфейс поэтому скорее всего вам потребуется написать что-нибудь свое или взять уже существующие ну им облаком это облако по сути продукт даже ваш внутренний и если вы будете продавать облако внутри компании как продукт вот тогда ваша разработка начнёт давать вам фидбэк говорить в том какие компоненты ей нужны в первую очередь тем самым вы экономите нервы и время своих админов потому что вы развиваетесь так как нужно вашему заказчику даже внутренним какие выводы из всего этого сделали то есть мы сейчас затаскивает наше новое облака свой продакшн нам уже появился один почти внешних клиент не знаю группа компаний и скоро появится еще один во-первых любое облаком и начинается секса вот я вначале говорил что мы посчитали и для нас облака публичная вышла дорого как и схд промышленными запись для нас это для нашего профиля нагрузки для нашего сценарии использования это дороже чем в вашем случае экономика может быть другая и возможно вам приватные облака не нужно вам вполне хватит публичного сервис в open source если вы покупаете не коробку от в январе а покупатель берете допустимо подставь то вы многие вещи будете делать сами но к сожалению это просто давность я думаю что многие уже привыкли ну и верить нельзя никому понятно кроме песни и вендором не гипер скейлера мне там тем людям которые придут и скажут что мы вам сейчас сделаем хорошо только купить у нас что-нибудь к сожалению так не бывает ну и как я уже сказал мы запустили наш облака не с первой попытки но мы это сделали поэтому не все сразу но если вы приложите достаточно усилий то у вас тоже получится на этом всё всем облака алексеевич якин друзья но спасибо тебе огромное за этот рассказ если у вас и вы просто поднимаете руки сделать так чтобы вас увидели во всем то супер на первом ряду я вижу а если где-то еще а и вижу еще в правой части зала потом до стоп стоп стоп микрофон стоит они не микрофоне спасибо за доклад а очень интересно рассказывал ты рассказывал про проброс во внешнюю сеть то есть в интернет всего давай теперь рассмотрим после а ситуацию которая была относительно недавно когда оккама я что-то на вернулась и большинство сервисов остались без интернета steam собственно в их числе вспомним как тяжело было им школьникам что в данном случае если мы сделаем два канала если у нас будет не только морских вод а сможет и решение так балансировать понять что это этот канал нас отвалился с него трафик не идет значит надо переключиться на другой как быть в данной ситуации резервирование интернету такое решение это не проблема ps т.к. это проблема того как твои фронте или там блокировщики внутренним поймут о том что что-то пошло не так то есть не важно где у тебя крутиться нагрузка это бар и металл в копан стояк либо что то еще у тебя есть там default gateway и у тебя и более того у тебя есть как правило поверх этого default gateway еще некие overlay допустим который идет в wav или идет там в 9 вечера еще куда-то и переключение именно этого сервиса это апликэйшен задача потому что то есть ты должен там не знаю поменять даны запись поменять прокси эпитетом что-нибудь еще то есть это задачка эта задача разных уровней и и за них отвечают разные компоненты в данном случае здесь опоздать не изменить примерно ничего спасибо супер вот там были в руки чуть чуть раньше я вас вижу тоже мы вернемся привет ещё раз привет все друг друга чуть чуть знают вот и спасибо что по рекламировал свой завтрак это клад во первых вот он хотел бы задать вопрос про пин стеку ты сказал что не получилось завести борьбе . скажи пожалуйста база данных как сервисов взлетели или даже не было такой задачу мы пока не рассматриваем манеж baby как сервис для нас хотя это такая интересная штука безусловно потому что у нас самые жирные самое нужное наши базы то железные сервер и вот на которых прям бегает миски и все что там поменьше и пожиже мы возможно потом затащим да это будет как менеджер db дебеза сервис но опять же не все сразу то есть это есть выпустит это по большому счету нивелирована выдавал кивер плавать еще раз ну то есть это просто выдачи виртуалок и сеть аптек нам сейчас нужен побольше счастья как компьют сервис и и storage service но то есть включая там с 3 и так далее и так далее ну а те же кулер и базу данных в нём стоит или нет видит опять же этот вопрос такого некоторого внутреннего рынке насколько есть в этом потребность и насколько быстро мы сможем это запилить понял все спасибо круто пока следующий желающий получает микрофон поднимите руку чтобы увидеть пойдем вот с тобой сюда вот так что в камеру было хорошо видно да вот здравствуйте спасибо за доклад у меня был есть два вопроса сетевых правил у вас хранятся в классе или на железках сетевые правила но есть и курить и группы самого пластика и есть некоторая настройка на фаерволов который у нас соответственно стоят но не получается вне scopus т.к. но во имя внутри облака все рулит security группами самого утомительным инструментом самого пластика и еще вопрос сколько вы им и какой теперь так процедуру слышала еще вопрос сколько виртуалок на одном гектаре замечает но сколько virtual сказок мы пока не используем перри подписку по я дам поэтому как бы виртуалок вывод сколько и нужно будет до столько там поместить по вычислительным нодом у нас это голдовые visions 20 ядерную ну то есть два камня по 20 ягер без гипер трейдинга и 512 гб оперативы то есть мы пока для нас это просто типичные компьютер даже вот вне без привязки к пластику поэтому мы взяли то что мы ну что то что имеет для нас ожидаемой производительности супер поднимайте руки у кого еще есть вопросы а тебе кстать предстоит выбрать лучшие который понравился помню здравствую спасибо за доклад а сколько там циферка было вашем экселе начиная с которой вы решили что своим облака дешевле чем еще еще раз прижима при каких расходов в месяц вы решили что облако вашей дешевле чем уличный ну скажем так меня не здесь не все достается если я скажу что мы покупаем - мы железо не арендуем его покупаем мы покупаем железо на шестизначную сумму в евро в год вот то есть на таких объемах как бы ну скажем так экономика становится другой когда ты приходишь к весу и говорит что дайте нам пожалуйста аналог 500 железных машин каждая 40 ядрах и там сколько-то памяти то счет который не об с конечно с удовольствием тебе это продаст потом он пойдет искать потому что допустим у него во франкфурте может все резко как-то кончится потом ты будешь ввс заносить ежемесячно столько сколько как бы вот в железе ты бы мог покупать там в два в три раза больше но зато у тебя появляются накладные расходы потому что в выси ты добавляешь каждую virtual очку буквально криком или а фишка а сервер еще нужно привести заказать и так далее давайте мы еще один вопрос из правой части зала послушаем и алексей тебе предстоит выбрать лучше алексей спасибо за доклад а у меня такой вопрос вы уже думали над тем как вы будете обновлять компонент этого своего облака ну скажем так cf мы уже обновили и в принципе это прошло достаточно гладко но в остальном ну я думаю что здесь нужно будет просто который все это опять же на тестовом стенде я понимаю примерно чем о чем вы говорите но тут скажем так есть всегда снимся и без какого-то тестирования понимания проблем именно в нашей инсталляции я думаю четко вопрос ответа не будет но уейда идея идея здорово спасибо огромное всем вам чтобы послушали доклад спасибо алексею"
}