{
  "video_id": "5Wn0ADRHIQ0",
  "channel": "HighLoadChannel",
  "title": "Как мы запускали компьютерное зрение для офисов продаж МТС / Кирилл Овчинников (SberDevices)",
  "views": 252,
  "duration": 2498,
  "published": "2023-01-19T05:55:18-08:00",
  "text": "всем привет сегодня как мы запускали на зрение в офисах продаж мтс по всей россии для начала о том чем я там занимался я те книги о себе проекты camtasia также я очень люблю хардвар и между не даст соврать иногда к что у меня железных всех штучек больше чем у нее сумок и также закончил фото и не применяя знания физики на практике это помогает card or и с такими проектами откуда вообще появился такой проект мтс это не только компании который помощью которую можете звонить друг другу это не только компании которая производит сервера из там свои устройства но это также одни из самых больших ритейлеров у него есть громадное сеть салонов продаж она находится по всей россии в них которых вы можете купить мобильный телефон устройство для умного дома и открытие вид oriflame менять его вы можете видеть она находится прям во всех уголках россии что необходимо было в данных словах продаж необходимо было узнать как ведут себя покупателя и посещаемость каждой точке это необходимо для того чтобы понять как настроить логистику и определить какая . прибыльно какая нет так же хотелось бы узнать если нет очереди в салоне и как распределяется люди по салону для того чтобы узнать как сделать правильную выкладку и для того чтобы определить как правильно разместить рекламу и сделать салон лучше конечно у такой сети уже были какие-то решения которые позволяли это делать на данный момент это были либо ручной почет либо системы с 23 до счетчиками без нейронных сетей которые позволяли уже осуществлять подсчет но каждый из них были свои плюсы и свои минусы ручного подсчета самое главное что он был дешёвый но при этом они не было стабильности вы можете нанять человека для того чтобы несколько раз проходил ваш салон и сделал подсчет люди сколько не заходит как не себя ведут но это будет не регулярно может проспать и во всех салонах это очень дорого это именно апекс расходы получаются с датчиками чуть получше плане стабильности можно их купить себе установите не постоянно будет 24 на 7 работать но и самое главное проблема в том что они не позволяют довольно точно делать подсчет когда указанных сайтах если пара заходит вместе либо это заходит группа людей заходит тележки с тележками это может ввести ошибки в почете посетители таким образом на старт проекта у нас было больше 5 это 5 тысяч точек продаж больше слизи часть из которых была распределена по всей россии и было не в больших городах и также текущей потребности бизнес и не до конца закрывались уже готовыми решениями таким образом бизнес пришел к нам и поставил требование самое главное что у нас была высокая точность нашего решение котором создавали это 95 процентов в точности на подсчёта входа и выхода это мы должны были за первый год на пятистах . развернуть это не только ringed и мы должны были против рот и также цена наша должна была быть сравнимы с конкурентами еще лучше быть ниже мы сразу же начали думать как же это решать задачи сразу приходит на ум три самых важных отверждения этого решения это первое серверная второе это кластер это микро серверный по сути лютер с видеокартами и третье это микрокомпьютеры в которых можно считать нейронные сети по сути эти решения отличаются тем где будет находиться inference и работа нейронных сетей либо она будет сосредоточен на полностью в самом центре в которых куда будет стекаться видеопотоки и где будет мною работки и бэг-энда и и нейронах и либо это будет не рынке по краям соответственно вы не будете пересылать видеопоток в центр и либо это будет полностью все на эджа осуществляться только с бэндом рассмотрим каждое решение подробнее первое решение это самое важное самое главное без которого наверно ничего никогда не может запустится это серверная тира нужно всегда сверла нужно везде и по сути такое идеальное решение потому что как говорится о он тяжелые тяжести хорошо даже если не запустит что они всегда может запустить обучение и конечно мы тоже рассматривать это решение но у него были свои минусы первый это то что мы имели возможность купить сервер от только по видеокартам то есть нас минимальные сектору можно купить это одна видеокарта соответственно она стоит по 4 миллиона в год и соответственно если вы хотите на первых пилотном проекте на 10-ти салонах то такое расходы конечно это будет неактуальные для запуска для работы следующее это гигантский объем трафика видеоданных которые стекаются к нам на сервер они нагружают как сетевую структуру так и структуру хранения следовательно сервера еще не совсем могут полностью закрыть и решение потому что на каждой точке необходимо иметь какую-то железку которое будет отправлять видео потоки будут проверять что они приходит целиком и будет их предварительно обработка прежде чем отправить нам соответственно это тоже стоит определенных денег и тоже необходимо дорабатывать на каждом офисе поэтому сервером и конечно оставили на нем делали первые запуски но держать в голове все проблемы которые не позволит нам запустить их на в самом большом масштабе следующее решение мы подсмотрели у и честно у x5 они тогда к раз рассказывали по конференциям тоже они устанавливали ноутбуки в магазин и своих главное на которые на этих ноутбуках происходил полна обработка видеопоток с магазина просил подсчет посетителей аналитика так и их поведение аналитика пола возраста все такое прочего и это решение нам показался нам очень интересно потому что здесь не надо некие делать супер оптимизации ноутбука по сути такой большой компьютер на котором есть нормальная видеокарта большая и на котором можно все работы просто он дешевле чем сервер и его можем установить на несколько точек продаж как бы как центральное что-нибудь про fila вся обработка однако здесь появилась первая же проблема то что точки продаж находится как я сказал очень далеко иногда бывает деревнях и в этих деревнях нет хорошего интернета там вся связь только через четыре же свисток соответственно этот свисток не готов для того чтобы пересылать прав поток видеоданных таким образом наши кластеры из красивых кластеров которые сгруппированы сами нет по 10 точек на каждый кластер превратились в очень разрозненные и получается что на одну точку продаж сильно удаленную необходимо покупать один ноутбук что опять по цене сильно ссылаясь непривлекательным таким образом мы переходим третьем решению так как у нас таких точек много которые сильно долины и которые надо как-то на них все делать обработку мы перешли к микрокомпьютером на тот момент мы уже с ними работали и мы знали что на одном микрокомпьютер который стоит совсем дешево можно запустить обработку нейросети еще и делать какая-то примитивная б conti обработку видео соответственно по цене это решение нас вполне устраивало но появились свои проблемы это не то что когда вы работаете серверами take into когда покупать и ноутбуки там все знают что лучше купите nvidia и у вас все точно заработает и все будет хорошо соответственно когда вы покупаете микрокомпьютеры на которых вы делаете нерон q перед вами встает в целое море графика где каждая компания такие как intel when google они видео каждого сказать что он лучше и на всех этих графиках нельзя полностью им верить надо запускать не к своей не рамки смотреть как будет работать именно ваши решения но следующее это то что это именно хорнора то есть хардвар никогда нельзя купить просто железку запустить и она будет работать тогда бы тоже была готова решение которое там по сути них не ваш проект о вашем проекте к сожалению работе с хардвар всегда это все сверху накручивается накручиваются вас появляется в очень долгий вас появляется дополнительное оборудование все это приходится самим создавать соответственно проблему этого решение были в том что необходимо делать рэнди и необходимо создавать руками все решение по сути с нуля и очень много неопределенности о том как это заработать и в принципе мы можем потянуть все что мы хотим поставка мы все это обсудили мы вернусь требованием решили как все это будем делать по точности мы решили что мы будем использовать нейросети мы сделаем отказоустойчивость так как многие решения показали низкую точно то что они могли не работать по полдня соответственно точности подсчёта было крайне низкая из этого и постоянно мониторим решения это наша такая одна из ключевых фишек в том что когда мы первый раз пришли пилотные и решили посмотреть как просто работают салону то есть мы руками пришли посчитали люди и сравнили с 32 до счетчиком оказалось что там разница составляет процентов 20 когда мы об этом узнали спросили в компании куда позволит водосчетчика не город нет на 95 но оказывается они никогда не приходили и нерегулярным не перепроверялись в счетчике на каждом салоне то есть может быть банально что уборщица как-нибудь и 8 стелла или перекрыла и у вас после этого . пропадет новый опыт не узнаете следующие для нас это была важная строки на самом деле хотя звучит закат 500 салонах не такая большая цифра но по факту при условии шитой рэнди и вам надо покажется он приехать что-то сделать это довольно быстро все поэтому мы решили что мы будем запускаться самого начала в тестовых режимов уже 1 салонах с почетом вручную дальше что мы сделал минимальных только доработки по тротуару и сделаем установку с помощью монтажников и какими-то подрядчиками известно по цене наши проблемы были в том что цена складывается к сожалению не только просто из оборудование как я вначале написал и когда мы все это читали в начале мы внуково что все это красиво надо так же складывается из цены на обслуживание цены на энергию и про это в дальнейшем будет довольно важный момент первые же наш установки были довольно простые казалось бы установил микрокомпьютер установил него жесткий диск начал писать данные переслать их на сервер где ты делаешь обработку но то сразу же появились первые проблемы что так как вы работаете сетевыми камерами и по сути васек все дело идет по сети передачи у вас любым малейшей проблемы сетью приводится потери пакетов когда вы работа с видео каждый пакет это по сути даже если вы потерять нам одну микросекунду времени сеть вы можете потерять целый пакет видео которое себя представляет минуту на срок по умолчанию поэтому здесь на приходилось немного подкрутить настройки он кодинга и тихонько то как мы кодируем наше видео поток и соответственно на камерах на сделали одну секунду потому что нас камеры чаще всего прерывалась сеть дальше мы то объединяли в же ценах в минутные дальше 15 минутные часовые отрывки которые вся сад всех комфортней было смотреть нашим разведчикам так у нас происходило потоки данных нашего видео то есть она постепенно обогащалась то есть изначально с камеры мы просто получали сырой поток дальше мы объединяли его с метаданными джейсона то откуда он пришёл и как он был записан дальше мы сохранили в эквестрии делаю разметку сиваки и после этого на данных из баз данных накручивать своим модели так у нас проходила разметка сиват никосии кто-то из вас работал с practice компьютером зрения вы все узнаете и сегодня мы размещали именно сделать акцию людей однако было более сложная проблема это размер еще второе у нас более важно задача была это не просто даты сделать детекции люди еще посчитай сколько не вошли сколько вышли для этих целей у нас были еще две задачи это во-первых разместить код и выходы в каждом салоне и вообще разместить зоны в каждом салоне и во-вторых это разметить в принципе сколько людей вошло за за промежуток времени сколько вышло для этого мы написали свой софт который позволял это сделать быстро и позволял именно помечать метки времени когда происходила каждое событие известные когда мы начали делали это сами оказалось что это вообще крайне нудно крайне сложно и вообще неинтересно известно сперва впервые появляются наши любимые команды разметки которая стала сидеть и смотреть целыми днями видео размечать их и вообще по-сути создала этот проект и сделай возможным соответственно мы данные собирали с реальных салонов сразу же их размещали и сразу же по не давали какие-то подсчеты сколько у нас нашла сколько вышло и как вообще придут те посетителям после первых же салонов когда мы там все почитали научились в этом нерон q и решили что у нас более менее что работает мы решили попробовать запустить в других салонах с теми же не рынками и сразу же мы натолкнулись на такую проблему как переобучение тут есть такая хитрость то что когда вы собираете видео про положим на звук салонов там не знаю за неделю вам кажется уже вас там миллион фотографии как люди входят как выходит то есть вас там очень много данных но на самом деле все не так эти данные по сути не имеют сильный обобщающий способности даны только для одного салона и даже для того чтобы на просто обучить по этим данным необходимо было найти у них максимально различающиеся кадры летом мы использовали фреймворков из бука фаиз и мы апреля подняли по сути кадры в кластеры из каждого класса давали кадры и образом мы смогли показать бизнес что у нас по сути не миллион кадров на которых мы должны обучиться идеально у нас по сути есть там несколько сотен различных кадров которые низкую то ценность и вот на этих сотнях кадр только так мы можем обучить свою не ранку только для этого салона следующем мы столкнулись с аргументацией такая хитро что когда вы запускаете первым салонах которые там возможно находится за там не в торговом центре а просто к этой маленькой закупки у вас все работает хорошо следующую салон находится рядом с торговом центре почти каждый второй человек заходит dos тележкой в чем-то тележка не как здесь изображена пустая она еще бывает полные продуктами на которых есть свои какие-то рисунки паттерны и они могут быть значительно петлю из как угодно за тесно это сразу приносит свои проблемы в подсчете для этого мы фотографировали кучи тележек сверху их вырезали начались мужчине фугу ветировать данные также оказалось что салона который находится на первом этаже и находится рядом с вокзалом и там есть много бродячих собак бродячей собаке конечно они милые их тоже как много пород их надо все на них со всех до обучать ну и самая наша большая проблема класса сама котами потому что когда настало лето дети начали кататься на постоянно эти самокатах не стали оставлять кота ездить рядом с ними и вообще короче самокат его нету микро твоя жизнь была со своими рисунками кит сверху фигурками все-таки прочим и мы тоже решили же нам найти самокатах над когда обучаться таким образом аргументации у нас позволило хорошо да цитировать не детектировать тележки всякие посторонние объекты тестируют только людей следующая с чем мы столкнулись когда запускали 1 салоны в том что салон и вообще не одинаковые они бывают с такими видами они бывают у нас фишаем потому что есть салона где нет он небольшой его необходимо платить верх у них есть разной конфигурации входах и выходах некоторых салон вообще в принципе проходные то есть них есть два входа а есть такие салона как островки как на конференции когда у вас по сути нет какого-то конкретного входа-выхода у вас есть островок и вокруг не вопросы могут подходить люди и что-то покупать или там смотреть на товары и это надо было все обрабатывать по-своему поскольку мы научились детектировать людей как вы нам казалось мы столкнулись с тем что люди это вообще ведут себя не так как надо казалось бы когда у воспитываем есть хоть и дверь что увидела тип 1 подходить открывайте входите либо там откройте выходите но нет есть дети которые подходят любят висеть на двери качаться на нее короче подходить туда сюда открывать есть просто люди которые подходят двери на узла прислоняется на нее крыш так стоят могут там не знаю покурить пообсуждать что-то могут отойти подойти и вообще не веду себя не так как надо и здесь мы пришли к тому что надо запускать вторую сеть у нас появляется треки людей как они ходят эти треки людей мы загоняем во вторую нерон q и который уже говорил человек в принципе вошел или вышел таким образом у нас появляется дверь уже сети после подсчета а первая сеть которая происходит детекция человека и вторая сеть которая по трекам человек уже определяет входы-выходы и в крышку и момент времени естественно вся наша первая задумка о том что у нас будет вообще максимально простой проект который мы просто за детектив людей и просто там не пересекает черту слева направо это вход справа налево выход он превратился в такой сложно pipeline где надо все обрабатывать и все смотреть так что здесь мы в первую очередь хотел бы отметить документацию это том что одно сеткой не получится справиться и скорее всего вот у нас не получилось это что в первых запусках приготовить потому что каждый раз придется сюда переобучать и каждый раз будет новые данные которые полностью разрушает вашу картину восток и мы сюда добрались серверах мы стали пробовать это ускоряйте вообще запас качество все на микро компьютерах вот этот момент мы выбрали микрокомпьютер от invidia потому что не было там самую же поддержка и но показалось что у вас все это видео короче давайте на их же будем запускать панировке и в первую очередь мы друзья открыли такой в отпуск и не по оптимизации нейрона как тендер т он позволил нам из нейрон кинат contender флокатор 2 вп с выдавала он успел до 25 fps of но в тот мы столкнулись опять следующей задаче но надо запускать не одну нерон к несколько нейронах на одном маленьком микрокомпьютер который помещается на ладони и здесь помогает такой framework как тритон дифферин сервер оказывается это и сын видео все время запустила это вы можете на одной видеокарте с помощью этого френ варка запускать и на временно там много много света который помещается в ее память даже с выгрузка из памяти который сам автоматических соберет в бочке сам автоматически все запустит и в общем он нам позволил вот из двух вопросов первоначально запускать до 30 fps of там несколько дней ронг одновременно 1 микрометр компьютере соответственно мы все это использовали и поняли что вроде как канаш джексон она вполне справляется и мы можем начать им пользоваться но здесь вы были то что когда вы работаете с co2 вас появляются ошибки причем это не просто ошибки как как на сервер и когда скорее чисто ошибки это ваших это дело ваших рук короче надо просто сидеть и изучать какой он там кот нет это ошибки который в принципе вообще непонятная вот видите там один из примеров мы там стали завсегдатаями на форуме и nvidia edition постоянно задавали вопросы нас там совместно всем сообществом пытались решить вот был один из вопросов который там у нас буквально 1 50 же салонах он начался у нас несколько джексонов случайно через некоторые могли записать некоторые зависать но они выдавали ошибку причем это так было что какой-то джейсон мог проработать месяц в общем ничего не было какое-то через час записал по какой-то мог короче через час зависать на при этом ты и в переносе в другое место за себя через неделю для нас это была просто к это взрыв мозга мы сделать что что такое возможно мы там пробовали греть феном отвечать вентиляторы подключать вентиляторы менялись sd-карты менялись блоки питания делаю короче все что возможно чуть ли не хотели этот короче как-то помещать помечать женственно которые плохие но это ничего не помогало и оказалась здесь может быть что была целая научная работа которую мы наткнулись и которых как раз это выпустили на архиве который объяснял ровно эту ошибку это была ошибка коды которые с определенной версия джокера и вот она решалась и много короче очень специфичной настройкой и куды которые можно было жить только вот так это тому что проблемы с ко двору не всегда сложно их надо мониторить иначе вы с ним и в принципе ничего не можете сделать здесь мы сделали наш так мониторе к из телеграф influx а и граф анны он в общем то представлял он целый там знают под тысячу данных который вопросы сыпались с громадной кучу которому еще ничего не понимали из этих данных мы выбрали себя такой показатель как длина очереди на обработку видео кадр а потому что если она начинала сокращаться это означало что у нас перестал работать либо камеру либо джексон либо если начала если сильно увеличивается до начала то что нас перестали работой и ранки и также у нас в принципе вот эти показатели они позволили определять когда в принципе джексон перестал работать и стеки с ним самые такие глобальные ошибки происходят с топаз только мы обнаружили эти глобальные ошибки нам надо было стиме что-то делать чаще всего такое зависание очень плохое то когда вам приходится ехать в этот салон и там дизайн железно перезагружать менять sd карту или что-то делать с ужасно чтобы он заработал и когда у вас там несколько салонов который по пути из дома на работу казалось бы ничего сложного нет там заехал на полчаса пообщался с продавцами еще попил кофе перезагрузил а их у дальше ну куда у вас уже там десятки салонов и вы их надо уехать куда-нибудь сильно за мкад и по сути у вас на два часа только для тратит на дорогу туда сюда вы думаете как же оптимизировать здесь появляется такая вещь как дополнительное оборудование то есть изначально мы думали что у нас будет такой маленький компьютер которым будет все но под конец нас приводился такой металлический ящик который у нас были свои реки своей преобразователь питания и все для того что можно будет ли он его перезагрузить именно там и удаленно проверить и исключить все ошибки которым его у нас возникали известно все это сразу же сказалось на стоимость это добавил все пять тысяч рублей за то чтобы он стал просто беллини работать соответственно по техническим и все за мониторили обложили оборудование вроде как сказали что все хорошо но здесь на осталось другая проблема что когда у нас стали десятки там под сотни устройств все эти устройства о них надо очень специфично конфигурировать их надо сделать обновление и надо с ними каждый из них по сути сделать свою версию и правильно раскатывать на них на все новый софт для этого нас появилась система окон болена на самом деле от это не просто система это это очень много одновременно операционка одновременно система контроля версий и одновременно система доставки версии доставки коды до устройства с помощью мы сможем мы смогли сделать доступность до почти всех джейсона в то есть там 99 процентов за счет того что у него есть vpn но самом деле тот самый процент это есть каждом салоне может найти с такой безопаснее которые саму мы сами хитрый и он настолько обложат все своей безопасностью что вы дании в принципе не добьетесь здесь приходилось приезжайте и говорить какой все-таки порт надо открыть также мы сократили трафик который необходим для обновления нейрона кидали джексонов и сам удивительными повысили в среднюю точность всего нашего решения потому что мы смогли более правильно сконфигурировать каждый джексон с больше персонализации под него и таким образом у нас средняя точность повысилась всего решение тесном и сделали определены это на самом деле плевое решение и с помощью докера она позволяет с этими слоями накатывать очень легкие и очень точные обновления на каждое устройство вот следующее мы переходим это у нас мониторингу сеток это мониторить того как в принципе работать решения бизнес составляющей здесь можете видеть на самом был первый показатель это количество входов выходов потому что когда мы первый раз установили камеру на все было хорошо буквально через неделю у нас из 200 из там 20 в среднем входов-выходов стало 200 на вход там 20 на выход конечно не может появляться на столько людей не что мне пропадают не исчезают куда-то поэтому вот мы сразу же начали мониторе этому показателю и поняли ну надо смотреть видео том что там происходит здесь мы столкнулись первый же проблемой что на одном из салонов из первых же у нас видеокамеру попался банкомат здесь не он изображен если что и вот на этом банкомате мы могли видеть пин-коды карт которые люди туда вставляют когда при этом и показали безопасникам не хочешь сказать или за голос говорит что давайте еще вы впитываете все они какое ваше решение не будет надо делать чем так чтобы этого не было на что мы сразу же предложили что у нас будет замыливание зон который то будет сразу приходить на джексоне можно будет ограничить зону которые нас замолить эта зона никак не попадется нам не косметику никуда дальше на сервер и у нас была появилась система активного мониторинга система кино мониторинга позволяет потоки данных же страна которые представляют себя два потока первый поток это видео сырое второй поток эти средства уже входы-выходы которые и движением ей по зонам мы в начале собирали полностью я тихо потока на серверы и полночь ними работали то есть мы их размещали и сравнивали с тем как люди входят выходит но так мы не закрывали даже создавали нам раз проблемы с приватностью вообще информации которую мы храним и обрабатываем так большинство точек у мтс и вообще во франшизе многие люди не хотели чтобы видео с их клоны попадал к нам на сервер а но при этом они хотели чтобы точность их подсчета было все такое ты конкретно который измеримое где-то мы придумали такую систему что менеджер может взять и определится какой процент видео будет отправляться его салона на сервер и там заказа до чего ограничение по времени канал будет в нанси наследует что мы могли в этот момент получить эти видео сделать разметку и по ним определить точно ли не точный момент почитался подсчёт следствие следователь мы и так спланировали на все время и говорили что вас точность подсчёт в этом салоне такая это и с помощью этого менеджера могли любой момент и положим им показался слишком много где выходят они могли взять сказать сто процентов мы получили этих все видео и подтвердили им что да столько людей вошло столько вышла юностью работать хорошо соответственно это привело к тому что наша команда разметки уже опять же выросла то есть там изначально двух человек она превратилась в пять человек который там постоянно сидели размечали следующие когда мы с чем останусь к за счет поселках на сотни это у нас стало заканчивается время вот этот год про который я говорил он был пример так что первые полгода мы занимались аренде сары полгода вот начали делать установки если переустановки мы делали сами то ну как бы это занималась на самом деле целый рабочий день это на туда приехать все настроить со всеми пообщаться все поговорить короче о том как это будет работать там взялись под потолок а мы предлага тогда еще не умели все это хорошо залазить это у нас занимался в 68 часов как понимаете когда там программист теряет свой рабочий день надо установка это очень дорого и очень медленно не хваталась программистов чтобы в несколько с ног производить здесь мы перешли к помощи монтажников можно отдать им уже готовое устройство сказать им как все установить но тут же когда мы делали персов сказал что-то все легко но когда все это про числовой показалось что мало того что мы тратим одно монтажника это монтажник звонит программисту и по сути они вдвоём терзали 6 часов настраивать одно оборудование что как бы не умер не привело к некому ощутимую пользу и тогда мы решили автоматизировать эту систему автоматизация было так что монтажника мы устроили специальное приложение на мобиле телефон с помощью которого он мог ввести данные джексона подписчикам к сети определит что ну в принципе появился в системе после этого подключить до камеру куда ты показываешь свою руку корку от чтобы можно было получить крышки видеопоток с камеры и дальше сделать настройку этой камере следующее после того как он настроил камеру он отправляет эту камеру и установку оператору который может посмотреть на установку сделать разметку кают и сказать хорошо ли плохо там переделывай поправь и налево направо или все вы сделано хорошо после этого оператор подтверждать установку монтажник теряет доступ к видео и не можешь большим смотреть там кто хоть то выходит мы так и закрыли вопрос безопасности и уж сильно ускорили наш установки то есть изначально у нас был подвел при установке в день мы их делали под 10 там 1415 когда под конец можно сильно старались соответственно мы с помощью этого смогли запустится именно в срок но здесь опять же мы там раза увеличить количество бэг-энда и сделали новую систему а здесь вот такой интересный момент который у нас был еще в на самом деле в начале но хотел ставить он и конца наконец презентация это вот как вы думаете что делать этот человек мы просто когда смотрели на него мы никто не понял что вообще происходит такое первый же салонах появились люди которые тут просто так еще под подходили наклонялись проходили вперед и при этом они у нас не да так телись мы начали думаешь сколько это проблем с потолком ждет сверху упал и они короче от этого отходят или там что-то внизу такой интерес и что им всем короче на наклониться и посмотреть что там внизу происходит мы позвонили в салон спросили они горят нет все как всегда как бы все хорошо не знаю нет никаких проблем ну короче проблемы для нас продолжились наши люди продолжали так делают поэтому мы приехали салон стали смотреть и оказалось что сотрудники салона короче реально выходят вот пригнувшись заходит нагнувшись а некоторые даже над собой коровку кладу кора чтобы их не видела камеры когда с ним пообщались нижними прошел слух к ручному установили такую систему чтобы и их время перекуров вычитать короче времени их работе уже за ними следить поэтому они сказали кто-то из них заметил что к врачу с такой вот концепции его не будет наблюдаться и крыши все будет хорошо ну конечно не пообщались когда что такое вообще ничего не планируются и давайте нормально ходить туда-сюда короче ровно на что они сказали конечно конечно но по факту ничего такого не было ни продолжали так одеть в итоге это привело к тому что нам пришлось до обучать нейрон q для того чтобы она детектив таких людей соответственно всегда здесь мы после этого были готовыми к тому что не всегда на местах наши решения которых нам казалось бы крутой точно дешевое не знаю быстро и она не будет приниматься и надо всегда над видим местах как-то объяснять зачем вы это делаете когда мы запустили там уже под 500 салонов мы столкнулись с тем что мы реально получить стал были получать очень много данных и казалось бы слишком много данных это для мальчика так же как и на слишком много конфет для ребенка такого сочетания не должно быть но когда вы начнем подсчитывать оказалось что у нас там каждый месяц попова 4 помощью терабайт данных по 150 гигабайт разметки и то всего это нам необходимо 30 размерчиком чтобы вы еще в принципе с этим что делать еще необходимо и мальчики чтобы все это обучать ну короче данных реально стало много и мы когда стали объяснять на бизнес что данте пить его будет красиво сниму все это как-то обучим то что бизнес кого нет так это все дорого и еще до бесполезно вас так точность хорошие зачем вы это делаете соответственно нам пришлось отказаться от части данных что ты удалять что складировать и только под новые проекты типа распознавания сотрудников не сотрудник мы стали накапливать новые данных салонах из тут мы оказались той ситуации когда вот мы выпустили септ салонов что мы стали сидеть на двух стульях у нас был постоянно серверное решение которое мы постоянно подтверждали мы постоянно и вы обновляли короче на нем делали все по разработке все проверки у нас постоянно было 500 устройства которые происходили вся обработка и здесь такая проблема что мы большинство работ стали проводить дважды потому что надо было одновременно и на джексона переносите на серверах запускать и у нас вообще много всего кода и и много все стало x2 делаться соответственно здесь мы тоже хотели вот моменты думать что может вообще ну мне нужно джексона либо и вопрос как передачу видео использовать и убрать из них не рынке но здесь возникла та самая первая особенность в том что у нас большинство салонов по 4g связи и если мы попытались даже с первых же салона взять и сделать полную пересылку видео на что нам сразу так нельзя вообще баста давайте переслать только самое необходимое поэтому у нас все равно и остались удаленные джексон и на которых мы делали такую проводкам самые передовые конечно мы не ранки и все обработки делали на серверах соответственно по итогам мы добились точности хороший с помощью нейронах с помощью мониторинга с помощью всего мы сделали fi-500 салонов и но вот насчет цены был самый такой хитрый вопрос поможет когда к нам пришли запускать то на следущей 1000 салонов потому что им все понравилось как все быстро красиво работает мы сразу вы выкатили им ценник по моему чуть ли не в два раза больше того что мы в первый раз говорили потому что но стоимость монтажник стоимость док куда пробовал оборудование стоимость всего на сильно начинает вырастать но это такая особенность я думаю когда ты работаешь с ко двору что но это бывает дорого в конце концов соответственно спасибо вот так вот мы запустили капитальных зрения и она вроде работает спасибо кирилл корзину при последнем слайде там наверное имелось ввиду что цена ниже это хорошо ведь что еще раз ну там смайлик такой грустный цена ниже джада у нас не получилось она ниже сделать они был давайте тогда перейдем к вопросам из зала спасибо за доклад вопрос 1 как вы собираетесь сделать 1000 устройство контролировать их качество вы green house собираетесь делать или кому-то делегировать но смотрите такое дело что когда мы еще запускали разметку от про этот чуть-чуть забыл сказать что конечно попробовали толоку попробовали mechanical turk но конечно так мы работали больше компаний которые там очень важно приватность нам пришлось сделать свое дело разметки и мы полностью целиком у себя и сказал что делали нет я имею ввиду hart vs сборку хаббла я сейчас на самом деле scar дворце все все сложно поэтому сейчас я думаю что тысяч устройство так скорее всего не будет понятно а вопрос 2 вот вы говорили что у вас есть салонов который по 4g подключены и я туда данные полное видео вы не выкачиваете вот а как вы эти данные вообще не учитывайте для разметки и ли у вас какие то есть сэмплы для таких салонов смотрите там с этими данными хитро потому что сколько данных вы выкачиваем мы скажем салона по сути договоримся о том какой объем данных на в принципе доступен эти объем эти данные недоступны на в течение дня потому что в этот момент салон работать ему важных быстро интернет мы их складируем у себя на флешке там внутри которой закреплена и вечером кто-то методы салон заключается но при этом есть интернет мы их пересылаем нам потоком на сервера для обработки для разметки а вы как ты их режете на месте что там типа пустые промежутки времени удалить да у нас есть детектор там банальное что и когда ничего в прокат не происходит ничего ничего не происходит не надо это записать надо делать но на первое салонах мы естественно записали полностью все данные пересылали потому что возможно этот вектор плохо работать и возможно вообще что-то не так поэтому на под конец мы еда уже пропускали таки введена в начальном их целиком направляли спасибо там еще вопрос кажется раньше за хотели спросить спасибо за доклад а расскажите пожалуйста как организовывали систему разметки вот например через кросс разметку несколькими специалистами одного и того же набора данных вот сколько нужно чтобы было человек в разметке или есть ведь еще боясь в каждом человеке он немножко священна размечает вот как с этим бороться поделитесь опытом с разметка у нас все было интересно потанин первый размер который мы делали мы делали и сами и мы естественно сами там проходили и там по несколько часов в день сеть для смотрел эти видео и все там размечали и нам как и правильно сказали вообще разметка сложная момент потому что когда мы первый раз все разметим пришли к бизнесу бизнес говорю все не так там где человек зашел не заглянув в лоне вышел его не надо замечательно не зашел а как бы для нас было так что но он же пересек дверь значит зашел и первые вопросы которые мы решали вообще с разметка это были такой без команды разметки мы сами их личной режиме мы их по сути записали что надо делать когда человек войдёт мы там сформулируем требования и по этим требуем начали работать в дальнейшем мы нам очень повезло мы наняли очень крутого человека который я вообще не понял как он попал на разметку not он начал заниматься разметкой он был очень умный вот эти требований очень хорошо начала и за ними следить и первый раз на тоже размещу офисом целиком а в дальнейшем он начал набирать свою команду и люди которые размещали хорошо они по сути без перекрестка разметки люди которые там студенты которые приходят на час в день они с прекрасной разметка размечали то есть тут все зависит как-то idps зависит от человека который размещает но это сложно было вопросы мы там до с этим начали много мучить потому что никто не знает как правильно разметить вообще да и еще под один вопрос попутно все время во время разметки возникают какие-то аномалии того чего не должно быть на видео например или чего не ожидаешь увидеть салоне или что непонятно как размечать как вот с такими случаями вы работали если оценка их количество поделитесь тоже опытом пасибо вначале мы работали очень близко бизнесом то есть там нам повезло что бизнес был постоянно рядом с нами и мы у него спрашивали там это вообще стоит делать не стоит а под конец когда мы более-менее поняли в чем состоит ну как мы считали что мы поняли в чем состоит цель бизнеса мы уже сами локально себя решали каждой и там исключительно случай как надо обрабатывать тоже там когда отключается свете там заходит борьба людей там студенты китай от одного на плечо и забегая с ним салон ну да здесь мы уже в принципе решали сами что дальше делать здрасте спасибо за доклад меня зовут серьезно индекс алиса вот поэтому особенно интересную hour варной часть еще можете ли вы для правильно понял что там есть и циpкa и gpu и модельку вас крутится на группу начаться на надо и цыпа и г поесть и мы сделали так чтобы не рамки нога пробы на gpu вот смотрите отсюда вопрос сколько обошлась себестоимость вам самого устройства вы там озвучим 20 тысяч лет мы покупали оптом было по моему пределах типа там 80 заодно устройство тысяч нет в 8-10 там все зависит за вepю но это джексона на 4 гигабайта оперативки киеве я понял и второй вопрос смотрите вот у этой gpu большой ли запас прочности есть я так понимаю что у вас ну типа модель просто определял она не считает биометрию то есть какие то там она у нас под конец читал периметре тоже там запрос прочности большой 3g путаюсь такой модельке вот о чем я нас посмотрите там есть несколько у нас на самом деле под конец работало сразу несколько операций есть все на видео это было первое джексона 2 гигабайта на котором у нас помещалась только этом 2 не рамки самых простых потом у нас было учиться на на 4 гигабайта на котором нас поместил нас еще одна нерон к что мы это определяли по моему пол для нас то почему то было важно и у нас был еще джексон pawn ксавьер enix на котором 8 гигабайт оперативки на нем видеокарту уже следующее поколение не maxval а следующие в общем и на нем уже вообще короче она там если на джексона на 25 fps софтом по 250 с of выдается и соответственно может десять разных тирона критом 10 рано салонов одновременно запускать допустим и последний вопрос правильно я понял что вы нарезали видео по одной секунде для отправки как раз для разметки если обработка вся идет на устройстве потом вы нарезаете отправляйте то можно встретить как у нас идет у нас как раз чтобы добиться хорошей скорости нам из вот это вот выбора thread'ов и между в этой ленте скорости мы выбирали скорость естественно мы из камеры получали по секунде чтобы у нас минимально чтобы если потеряется пакету материале максимум секунду времени видео но дальше на g ценим эти секунды резали в минуты и соответственно мы уже минутные видео отправляли на ней рамки чтобы она могла их больше baci делать и быстрее обрабатывать в дальнейшем уже все больше и больше нарезали чтобы человек когда смотрит глазами если по минуте реже то соответственно может быть такой момент сучок подошел дверей приоткрыл дверь и минута заканчиваясь и человек и размерчик у нас году так вообще нельзя им и большие ошибки и мы объединяли там в часовые промежутке чтобы это было точнее"
}