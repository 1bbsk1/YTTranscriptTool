{
  "video_id": "8KV7VQUg2zw",
  "channel": "HighLoadChannel",
  "title": "Как и зачем писать свои плагины для GoLand / Александр Кирсанов (VK, ВКонтакте)",
  "views": 239,
  "duration": 2989,
  "published": "2024-10-29T03:08:38-07:00",
  "text": "Ну а сейчас у нас будет доклад от Александра Кирсанова из компании ВК и знаете вот мне очень странно Я вроде пришла вести гон конференцию А в ВК ПХП Ну да ладно давайте посмотрим Александр передаю слово вам Да привет всем говорят что го нынче самый модный востребованный язык Так что Те кто уже успел достать свои смузи пучина убираем мы будем писать на Джаве а точнее на котле скажете вы ти кто вообще такой а тут всё просто на самом деле я пишу на c+ Plus компилятор для ПХП Хотя если честно я фронтендер я вот пару недель назад на H J выступал каждый раз удивляюсь что меня на Hello отберут Ну раз взяли теперь уже ничего не поделаешь так вот возвращаюсь к это код для какой-то компании а внутри этой компании для того чтобы она функционировала помимо кода есть ещё куча всего админки какие-нибудь там интерфейсы для того чтобы настраивать конфиги переводчики Ну короче вот такой внутренний туринг и мы вроде как Привыкли что отдельно код отдельно внутренний туринг и мы не думаем над тем чтобы их совместить что на самом деле код и Тулин это одно и то же вот мы внутри ВКонтакте сделали несколько плагинов для ПХП штурма которыми пользуются наши БК Эндера там где мы как раз-таки совместили и бэнде теперь значительно меньше э скажем так переключают контекст потому что внутрь кода встроено контекстное знание о компании которое нужно только нам и э и вот это вот штука масштабируется потому что язык неважен на самом деле типа PHP Go там Ruby и прочее Когда речь идёт именно про какой-то бкд про какие-то внутренности компании это всё можно это всё примерно об одном и том же вот я как раз расскажу об этом я расскажу что можно придумать и что мы придумали почему и как это стало удобно большая часть моего доклада это мы будем писать плагин это будет лай кодинг То есть я всё закрою переду вшку будем писать код с нуля напишем планчик для гонда интересный и потом покажу где брать исходники куда смотреть где грепан поближе так чтобы видеть либо те мониторы либо эти Потому что на этом моменте Я закрываю презу она у меня Короткая и переключаем сначала сначала сюда Давайте сделаю presentation Mode тут будет немножечко ПХП Но это опять-таки неважно смотрите вот Я приведу несколько примеров пример такой мы пишем эн Понятное дело что на больших сайтах на нагруженных сервисах Мы никогда не пускаем в продакшн фичу сразу на всех мы как любую фичу мы раскатываем по процентно то есть типа сначала на 1% пользователей потом на два потом на пять и так далее в коде это выглядит как ивчик если там кто-то вот называет это рубильники кто-то ручки кто-то какие-то там я не знаю конфиг тогл Типа если тогл раскатанное туда есть разные тогл для раскатки для того чтобы блокировать какую-то функциональность при авариях для того чтобы подниматься и прочее и в коде это выглядит как ивчик то есть мы читая кн код на самом деле очень много ичико если тогл Каждый раз когда разработчик вот читает код Он спрашивает себя а вот эта вот ветка кода вот этот ивчик выполняется или нет прямо сейчас на продакшене Понятное дело что вот управление этими тогмитов там вызов функции из tog enabled берёт копирует название ключа идёт в админку вставляет в Поиск ищет и смотрит например там ручка раската или на 30% потом дальше читает код опять там видит Опять спрашивает себя раската или нет типа что исполняется или нет опять выделяет копирует идёт в поиск и прочее вот Представьте что если бы IDE знала контекст компании знала что эта функция отвечает за ручку и была бы такая кнопочка ты её Нажимаешь и вот он тебе подсказывает прям с продакшена прям из админки типа то что это такая-то ручка Вот её описание из админки то что она отключена или там вык вклю или что-нибудь короче То же самое что он видит в админке на чтени и это офигенно удобно потому что не надо переключать контекст и это в принципе со всем контекстом компании работает со всеми функциями которые мы хотим заложить Ну вот к примеру там какие-то конфиги идут есть кнопочки вот конфиг такой-то на продакшене или там ещё пример понятное дело вкн коде все пишут логи статистику инсерты всякие в базу и прочее вот к примеру мы вот пишем какую-то статистику и из кода такие а хотим перейти на график как мы делаем берём копируем идём в админку вставляем в поиск получаем график А тут такая идее раз кнопочку рисует мы нажимаем сразу оказываемся в админке на нужном графике видим к примеру запись влог или запись в табличку раз нажимаем кнопочку оказываемся в админке на нужном логе видим там а эксперимент раскатанное в А экспериментах Или он вот нам просто подсказывает прямо здесь прямо сейчас и это офигенно удобно Ну то есть у нас есть несколько плагинов которые Ну скажем так которые позволяют разработчикам не разрывать контекст Они читают код и прямо здесь иде понимает прямо здесь им подсказывает И все кто начинает этим пользоваться они говорят типа блин а как без этого мы вообще раньше жили мы постоянно она типа туда-сюда туда-сюда эти все окна Ты забываешь Ты теряешь контекст А сейчас всё стало благодаря этому офигенно удобно мы много что автоматизируем я ещё там в конце об этом расскажу а сейчас пойдём к следующей части Собственно как такие штуки делать И что как они вообще разрабатываются Поэтому я ухожу сейчас из этой и дш И перехожу в другую смотрите базово на самом деле есть идея вот типа int ID А что такое go вот если так грубыми мазками Это идея плюс плагин для Go Что такое ХП шторм Это идея плюс плагин для ХП Вот то есть всё что на самом деле мы делаем Это вставляем внутрь уже существующих плагинов потому что они выставляют наружу какие-то поты поскольку идея сама написана наве и котли то и плагины тоже пишутся наве и котлине как начать вообще с чего начать Если вы хотите вот просто взять какой-нибудь начать писать плагин проще всего взять готовый шаблон идём в Google гулим jetbrain plugin template первая же ссылка ведёт нас на github на шаблон нажимаем use template появляется у тебя значит я это уже сделал чтобы не тратить тут время это вот темплейт из которого я удалил ненужное и единственное что я тут сделал Я сказал то что это там плагин для Гош и зависимость прописал Вот теперь у нас есть плагин который ничего не делает мы его можем Запустить вот сейчас я его запущу то есть короче мы сейчас из одной IDE запускаем другую вот мы из Беленькой в Беленькой мы будем писать а кую мы будем запускать то есть в чёрненькое будет работать наш плагин его пока нет Точнее он есть но ничего не делает Какой плагин мы будем писать Посмотрите Давайте пройдёмся вот по такому сценарию Допустим мы пишем Я не знаю пишем на Гош backend какой-то биржи она рассылает эсэмэски confirmation коды и прочее вот у нас есть функция рассылки эсэмэски которая просто печатает на экран и понятное дело что у нашей биржи есть пользователи из Америки из России короче из разных стран и мы хотим им отсылать СМСки на разных языках для этого у нас вот есть функция которая принимает язык на котором отправить там conf код к примеру мы говорим отошли эсэмэску на русском Вот с таким conf кодом если мы это вот запустим то якобы отошёл И если мы скажем то Что по-английски хотим то шлёт Вот такая эсэмэска А каким образом мы обеспечиваем эту интернационализации мы будем использовать вот такую библиотеку Go и 18n популярная так как в ней написано а в ней написано как то что у нас есть файлики с переводами по-русски по-английски Ну понятное дело в реальности там очень много ключей вот а поскольку язык это дело динамическое то мы значит Как там в доке написано создаём config указываем Вот ключ из этого Из переводов Там могут быть темплейт параметры вот такие Поэтому иногда мы указываем темплейт параметры и прочее то есть по факту оно работает оно действительно работает ну как бы что бы нет но мы-то с вами знаем что вот на самом деле вот эта штука обозначает перевод какой-то и и если у нас весь энд состоит из того что мы что-то переводим и постоянно ссылается на эти ключи было бы прикольно если бы ишка нам что-то подсказывала к примеру вот этот там тайл бижа ко Да к примеру Вот если бы она выводила вот сюда. ком и короче вот везде в наших переводах она бы писала что это такое было бы намного проще читать код Прикольно Ну да прикольно самом деле полезно тоже Полезно если у нас весь код такой это будет очень полезно Это очень облегчит нам задачу Давайте делать когда ты хочешь сделать что-то в иде самое важное скажем так с чего надо начать самая важная задача - это найти куда посмотреть найти по каким кивда гуглить найти по каким ёрдам искать документации потому что ну не очень понятно что Мы хотим сформулировать вот мы хотим то есть по факту Мы хотим вывести какую-то надпись чтобы она нам что-то подсказала то чего в коде Нет давайте подумаем А где у нас есть какие-то надписи которых в коде нет но они есть а на самом деле Да вот они к примеру вот у нас есть функция которая принимает L и confirmation CDE поэтому когда мы её вызываем и дэшка нам подсказывает что есть нги confirmation коды Ну типа название параметров вот у принте название параметров и так далее значит какие-то такие лейблы можно делать и скорее всего можно этим программой управлять надо найти как если мы вот на этот йл нажмём вызовем контекстное меню видно что тут можно там их зади бли открыть какие-то настройки что есть лейблы у к примеру у создания объектов у чего-то ещё они настраиваются Ну и это нам подсказывает что скорее всего их можно как-то делать в настройках это называется in H давай дате попробуем посмотреть что-нибудь про H идм в документацию Что такое идм в документацию просто гулим первая же ссылка отправляет на на документацию идём в поиск набираем in H Нам повезло про in H есть страничка про то что это такое как они устроены их действительно можно создавать вот если мы почитаем почитаем почитаем для того чтобы сделать собственный и хинты нужно зам вот такой интерфейс и зарегистрировать его Ну давайте пойдём копируем название этого интерфейса идём в нашу белую ишку тут мы будем его писать назовём к примеру наш класс My hins то есть что нам надо сделать нам надо зам вот этот интерфейс там он на самом деле шаблонный в реальности какие-то настройки должны быть мы пока что обойдёмся без настроек то есть ну типа что нужно всё за имплементировать таки Время не тратить я возьму вот отсюда копирую это я просто заимки единственное что я тут добавил Единственное это если мы сейчас обрабатываем не Гош ную строку то ничего не делаем а Гош нае строчки мы просто печатаем в консоль запустим этот плагин и посмотрим в консоль вот вернёмся посмотрим в консоль и ничего нет а ничего нет потому А ну так правильно для того чтобы сделать заро логично дамы написали какой-то код нужно чтобы система сборки о м знала Значит надо его ещ зарегистрировать регистрация как бы описание нашего плагина лежит вот здесь ла xml тут наше встраивание в и прочее в общем и так есть короче Нам нужно только вот этот вот сделать вот наш My класс говорим что это для го и теперь вот теперь должно заработать и теперь если мы пойдём Вот смотрите мы видим в консоль все Гош строчки на самом деле и в импорта тоже потому что это тоже гое строчки более тогос мы чтото поменяем они будут выводиться снова и снова Вы наверно замечали что если файлы большие очень большие тогда Они тормозят долго работают всякие инспекции Долго работает подчеркивание ошибок Это происходит потому что и внутреннее на каждое изменение файла пере вызывает пере вызывает все инспекции пере вызывает все анализаторы и прочее вот в частности наши тоже Поэтому когда мы меняем как-то содержимое оно пере вызывается Окей клёво Мы научились выводить строчки в консоль Давайте теперь все строчки выводить не в консоль А вот как бы этими лейбла для чего мы пишем для того чтобы выводить какие-то лейблы посмотрим как это выглядит то есть по факту вот мы их сейчас выводим сюда а мы хотим их выводить как-то юйно опять-таки если мы посмотрим в документацию то там вот передаётся нам параметр наш обработчик у которого можно добавлять элементы всякие разные Тофа вот эту штуку для нашего текста вместо прина вот я вот это вот сделаю то есть вот мы берём наш элемент текст вызываем вот эту вещь Ну и я там типа Left Top Right написал чтобы это по симпатичнее смотрелось запускаем вот смотрите типа теперь везде выводятся вот такие штучки И там где нам надо в целом тоже И там где нам не надо тоже выводятся для того чтобы пойти дальше нам надо научиться отличать вот эту ситуацию которая нам надо и которую нам не надо то есть нам-то надо по факту Вот это и вот это и дальше их как-то обрабатывать ВС остальное нам вообще не нужно для того э отличать надо уже понимать как IDE хранит код внутри а IDE код хранится внутри в виде дерева Я думаю те кто писал свои там какие-нибудь языки парсеры формальных грамматик и и что-то такое знают про понятие АСТ деревьев что код хранится в виде деревьев примерно так к примеру код там D = F 1 + 2 3 и G - это на самом деле дерево вершина дерева - это присваивание слева переменная справа вызов функции f и прочее Ну короче деревья обычные и в иде в самой тоже хранятся также обычно это называется АСТ дерево а здесь называется пси дерево и его можно посмотреть если мы вызовем Tools посмотреть структуру то мы по этим деревьям можем ходить можем их видеть вот к примеру мы видим смотрите что есть какая-то у неё там есть си параметры какие-то названия параметров и прочее в частности как мы глазами отличаемся ID и прочее так вот по этим деревьям их можно не только смотреть понятное дело они внутренне также хранятся и это доступно из кода к примеру если я запустил в de бак режиме Да я запустил в de бак режиме если мы просто поставим там точку остановок куда-нибудь Мы же помним что при изменении он всё переиндексация Можем даже вот сюда вот типа пойти вот у него есть к примеру текст вот МТ да то есть мы в импорте сейчас находимся есть панты вот там импорт СК есть Ну понятное дело там короче это всё доступно из кода и вот то наше условие про то что родитель родитель который объект Local config слева message ID и прочее это мы по факту можем просто точно также выразить в коде опять-таки я возьму Вот эту вот вещь сюда вот я по факту то же самое о чём я говорил и написал то что вот типа там go value go Element короче то как мы это видим в PC структуре Вот и сейчас по идее мы должны увидеть что что только нужные нам строчки остались так а походу у меня сни Пити косяк да сейчас а я на нул Забыл проверить типа это нубл нуб обращаться ладно раз уж забыл Тогда смотрите представим что это R Гош най как мы обычно в и предлагает заменить вот на такую вот на EL оператор прямо сюда прикольный синтаксис Да завидуйте ничего когда-нибудь в горшке такое появится Это я вам ещё не рассказывал что по ХП умеет а то будет как в тамм анекдоте про люстру так вот вот запустили и теперь осталось дать то что нам надо вот эти две наши строчки всё остальное всё игнорируется дальше следующий шаг то есть Мы научились получать эти места И теперь мы хотим вместо вместо собственно строчек вывести переводы то есть что мы хотим сделать У нас есть эти ключи Мы хотим по факту взять загрузить Файлик к примеру по-русски вот этот вот русский взять из этого типа ключик и вывести его Ну давайте так и сделаем У меня есть снит но я его копировать не буду тут мы прямо ручками напишем типа вместо вместо Эмен текста короче Нам нужен какой-то Translation по-русски к примеру вот типа мы берм понятно дело типа без каширования без всего сейчас пишем типа из какого-то файлика в реальности скорее всего это где-то в настройках или авто вычисляется но мы пока что просто полный путь сделаем вот из этого файлика мы берём его читаем это у нас получается содержимое это типа J строка поэтому надо её распарсить это J объект я забыл что он возвращает какой-то J Element Давайте просто покопаем А ну типа это либо примитив да либо либо Literal и прочее Понятно Ну типа у него Значит есть вот эта вот штучка вот типа того если мы всё правильно сделали то то сейчас увидим переводы нул Ну ладно не страшно давайте дебажить что вот у нас есть наш элементе SMS stander name вроде норм мы типа пошли внутрь контент загрузился J загрузился вот он типа и что тебе не нравится кавычки А да типа у нас же у нас же сама строка с кавычками и поэтому надо надо кавычки ТМ всё всё верно типа Стрим нуть кавычки и теперь Во теперь всё работает и Ну то есть типа сейчас он реально делает то что мы хотели если мы к примеру тут что-то изменим Ну будет нул понятное дело мы его можем обрабатывать там не писать л вообще Вот а если мы изменим там перевод в файлики и сохраним его Потому что я не сохранил вот мы соответственно не увидим или увидим Возможно это надо обрабатывать отдельно нормально всё Вот А главное что вот смотрите мы придумали такую идею мы сделали оно работает и это же юная штука это можно развивать дальше к примеру вот что было бы прикольно ещ сделать Ну вот например если ты вот как бы делаешь ко Клик на ключ чтобы он тебя переносил сразу в нужный Дже сончик можно и такое сделать вот такие как бы ссылки типа из одного места в другое это референсы из из одного места в другое место Я уже тоже подготовил это выглядит на самом деле кажется что сложно ничего там сложного нет в общем надо создать ref cont типа которые контрибьютор для вот на для Гош строчек определить те строчки которые нам нужно также через пси дерево Я просто скопировал вот всё что мы писали то что строчки там mess ID и прочее вот и и типа как его ть ать это надо на тот же самый Файлик только не видить текста деревьев потому что ДСО Файлик - это тоже дерево на самом деле Вот найти там нужный узел и снова не забудем его зарегистрировать Вот и теперь да кликаем попадаем Сюда кликаем попадаем сюда Ну то есть это тоже делается несложно главное что может быть это вообще не нужно но если скажем так если наш код постоянно состоит из этого и мы действительно хотим упростить себе задачу мы можем придумывать всякие разные штуки Ну например чтобы вот здесь не просто там писался нул или отбрасывается чтобы тут красным подчеркивалось или чтобы если этого ключа Нет мы бы такие типа у нас было бы какое-то действие вот здесь типа добавить перевод вылазил бы модалка дефолтное значение и оно бы во все дженки добавлялась нуно тоже удобно Ну типа если нам надо можем такое написать или к примеру вот есть у нас какие-нибудь переводы с темплейт значениями Да с темплейт вот этими штучками вот если она такая то чтобы она подсказывала вот к примеру ключи здесь которые надо предоставлять или валидировать короче это вот всё можно Можно придумывать можно делать и делать несложно это делается на тех же пси деревьях инспекциями экшена интен нами и так далее Это много что есть в документации много что иногда приходится добывать из внутренностей но главное что то есть в отличие от к примеру нте это вот можно сказать что вот это там если мы что-то Валиди что это как там я не знаю линтер на C Но это как бы неправильное сравнение Здесь прежде всего йка которая нам помогает читать код пот его читать помогает его писать а главное что она что-нибудь потому что на самом деле вот у нас было много Нам повезло к примеру и хинты есть документация на самом деле много чего в документации нет приходится лазить по декомпилировать идеи вытаскивать оттуда какие-то классы типа смотреть юджи в декомпилировать разные плагины мы вот прям очень много времени на это потратили прям сидели мы выложили в Open Source мы это дело оформили к примеру помните в начале Я показывал ишку где вылазят всякие попапы там грузятся из админки ключики и прочее эту штуку Мы тоже выложили типа вот лендок я ж фронтендер там для него всё дело сделал свеста э картиночки вот то что там можно загружать конфиги эксперименты ключи переводы Вот мы там сделали что к примеру тесты на серваке запускаются вот тот же самый интерфейс обычный мы встраиваем просто тесты гоняются не локально а удалённо ППШ там наши ППШ всякие штуки приколы прям плюсовые код можно посмотреть Понятное дело что вот это всё не нужно никому кроме нас Но мы это выложили для того чтобы поэтому можно было греть там очень много скажем хитрых классов используется хитрых вот внутренних функций что можно использовать эту кодовую базу на гитхабе лежащую в качестве того чтобы посмотреть подам типа как мы это делали как мы туда встраивать Это не единственный на самом деле плагин к примеру Мы ещё писали вот чисто для ПХП в языке ПХП модулей нет А мы вот сделали как бы туда добавили поддержку модульности и сделали прямо в IDE всякие разные штуки модал как будто можно мы типа делаем модал мы делаем всякие инспекции подчёркиваем какие-то штучки встраиваем в то ка ямк парсит короче очень много чего мы сделали это тоже лежит в ПХП сообщество на самом деле используется тоже можно по этим исходника греть есть у нас ещё там плагин в ПХП Шторм для того чтобы типа ПХП всякие типы и ПХП специфику поддерживать то есть оно лежит именно для того чтобы была кодовая база на которую можно смотреть Вот и на этом У меня примерно Всё короче какие выводы типа то что это не только код это ещ и вся семантика вокруг админки и прочее Мы обычно держим отдельно но это можно совмещать это можно совмещать получается удобно Вот можно делать вдш там кнопочки юай ссылки окна подчёркивание и прочее Короче всё что захотим делать это не сложно начать гуглить типа темплейт грепан исходника и то что мы сегодня писали оно на гитхабе лежит вот а на этом всё большое спасибо за доклад Есть ли вопросы в зале Напоминаю что вопросы стоит задавать подняв руку Если вы находитесь в зале Если вы не находитесь в зале смотрите нас онлайн Пожалуйста зайдите в чат зала и там тоже можно будет задать вопрос если использовать # вопрос я его в этом случае зачитаю и можно будет получить на вопрос ответ Ну теперь молодой человек справа Спасибо за интересный доклад А вопрос может быть из опыта с другими языками иде если допустим возникает задача и Наго пишется какой-то DSL Ну вот так случилось Да есть ли смысл под это делать плагин или можно рассчитывать на IDE Ну типа как мы ограничили уже DSL так исправится или на ваш взгляд есть смысл плагин сразу делать Ну на мой взгляд на писать он не очень для этого подходит Вот и плагины можно делать не только встраивая там в го или ПХП но также просто сделать плагин для собственного языка для ДС описать грамматику Описать как это превращается в деревья Описать как там на друга проходят иты влом не сложно сделать для собственного ДС для вот там как у вас это принято плагин который его будет подсвечивать типа не в конкретный язык а просто для своего языка скорее тут лучше так а типа го про DSL там эвис оператора даже нет пока хорошо Спасибо ещё вопрос да спасибо за доклад интересно вот а расскажите пожалуйста подробнее вот мы написали такой плагин а как нам делать его дальше чтобы то есть мы же не будем постоянно запускать его из идей и постоянно дебажить вот немножко про пост релиз как бы как это залить локально либо нужно сразу публиковать удалённо только так то есть как это более практично использовать то что мы сделаем по этой презентации Большое спасибо да это на самом деле очень правильный и Хороший вопрос Я не стал это упоминать у себя но смотри базово вопрос понятен да то есть я сейчас из Ешки запускаю другую ешку а в реальности что делать вот я написал плагин хочу им поделиться что делать Вот смотри у нас когда мы находились в белой дешки Мы всегда запускали вот просто типа штучку Run plugin это такая грал таска на самом деле типа что она делает она вот собирает вот типа бил плагин выполнить соберётся жарк то есть дальше с этим жарникова это и есть плагин который ты можешь типа вариант первый Ты просто распространяет и его устанавливают как его устанавливают Ты просто берёшь заходишь в реальное дешки Я имею в виду в Гон к примеру в плагины и тут есть можно установить с диска типа не из маркетплейса А с диска То есть ты можешь вот просто типа кому-то давать и они его дис устанавливают вариант более скажем так продвинутый Это если ты этот свой плагин публикует публикует в marketplace у jetbrains есть marketplace Ну типа стор плагинов Куда ты можешь его загрузить они он не обязательно даже должен лежать в опенсорс потому что они всё равно его де компилирует Ну это же Java они всё равно его посмотрят Куда ты там строился что ты примерно делаешь И если они запрут тогда этот плагин появится в маркетплейсе у него там ну помимо того что мы написали должен быть нормальный чейнджлог нормальная иконочный и тогда он будет находиться будет апдейта там у тебя по факту есть JB личный кабинет Куда ты его выкладываешь и и все пользователи его через обычный маркетплейс находят так тоже работает супер Спасибо Да привет Спасибо за доклад скажи пожалуйста у вас ли Все ли плагины лежат в марке плесе или есть какие-то приватные плагины а действительно А типа идштайн вот чисто для наших нужд там условно говоря чтобы не светить какие-то айпишник наши внутренние не следить какую-то вот внутреннюю но тем не менее чтобы это были плагинами потому что удобно У нас есть собственный стор то есть мы изучили Как работает как бы протокол общения между между официальным стором и ДТ Brain стором написали собственный сервак на PHP кстати очень удобно Рекомендую Вот который отдаёт те же самые джар по нужному протоколу Ну то есть типа и дш смотрит вот даже я вот сейчас могу ошибаться нуно короче вот здесь г вот можно настроить помимо официального маркетплейса ещ добавить как бы урл куда он будет смотреть за плагинами и вот на типа у нас есть приватный урл мы его добавляем и вот на этом приватном Уле во внутреннем контуре крутится наш сервак который приватными плагинами тоже плюётся мы по факту туда заливаем и оттуда смотрим супер спасибо е вопросы Из зала справа молодой человек белой толстовки тянет руку а у меня второй вопрос возник вот весь рассказ был как самому написать А насколько живо вообще коммьюнити разработки плагинов пробовал ли ты контрибьютор нае потому что часть из них тоже в опенсорс лежит это вообще живая тема или плагин настолько маленькие что они работают только индивидуально или внутри компании Ну смотри то есть вопрос понятный но в опенсорс Ну то есть в коммьюнити распространяются плагины которые нужны примерно всем Ну условно говоря там в ПХП мире есть разные фреймворки есть разные библиотеки и есть как бы плагин Я не знаю для Symphony он там тебе автоматические роуты там туда-сюда подсказывает или какие-нибудь ещё короче вот для реков А самому их нужно писать это когда ты хочешь Вот сделать То что нужно только тебе то что нужно твоей компании то есть в любой как я с чего начинал В любой компании есть внутренние инструменты и штат внутренней разработки которые занимается их разработкой Вот и и вот как раз типа делать под себя для того чтобы упрощать жизнь самому себе своей компании вот Таргет у меня был на это а так понятное дело документация хорошая вот к примеру когда Мы начинали там 2-3 года назад документации практически не было Я говорю мы вот сидели там куча всего реверси или изнутри сейчас документация значит те лучше комьюнити вокруг плагинов достаточно большое но те плагины которые популярные используются они для общих вещей которые Скорее всего вы и так как-то тащите как-то знаете а описать - это именно что-то под себя которое больше никому не нужно в целом Зато упрощает жизнь вам как и ваши внутренние инструменты тоже упрощают жизнь супер спасибо Есть ли ещё вопросы в зале Подойдите пожалуйста к мому человеку слева а пока я задам вопрос У меня есть вопрос вы разрабатываете плагины А каким образом вы их тестируемая наверное вот идея прошла долгий путь со своими плагинами внутренним построением деревьев распознаванием языков и прочего относительно недавно прини moft см реализовал lsp идея наконец-то тоже с 20 23.2 поддерживает lsp и кажется что это следующий этап развития То есть можно сделать плагин не только для идеи но и достаточно партией На многие дешки там тот же ВСД тот же ВИМ и как в таком случае сопровождать все там доморощенные плагины так сказать которые нужны компании но мы не хотим ограничивать разработчиков выборе и дешки то есть это всё-таки такая немного интимная назовём это так вещь когда ты настраиваешь её денно и Нош проверяешь плагин выбираешь там что больше нравится и так далее и тому подобное и тут с любимого тебе вима тебе нужно пересесть обратно в какой-нибудь ПХП Шторм потому что надо вот Насколько это всё партией назовём это так вопрос полностью понятен давайте я поясню его для аудитории вот эта штука lsp которая упоминалась она обозначает Language Server прокол то есть э к примеру vs код работает совсем по-другому отдельно крутится сервак э сервак который анализирует код и работает э типа отвечает по протоколу lsp а vs код к нему коннектится и как бы с него берёт авто комплиты с него берёт там всякие штуки и получается что типа теоретически Если у тебя есть что-то реализующее Language Server прокол и ишки которые умеют быть в качестве клиента то их можно как бы ВД для вима есть там плагин типа lsp клиент и прочее вот идея действительно никогда не поддерживала lsp раньше то есть как она хранит деревья внутри как она реализует инспекции Всё полностью внутри у них самописная на самом деле и они заявляют ну как бы что вот там 3.2 как будто бы можно типа у нас есть lsp клиент который вместо нашей структуры коннектится на самом деле это пока что практически не работает вот допустим тот же самый PHP шторм в наших реалиях мы пробовали мы пробовали как бы ставить Вот на контейнеры сервер мы пробовали коннектится на маленьких проектах ещё более-менее на больших реальных серьёзных Нет ну то есть во-первых пока что это сырая и я не верю что даже го это сможет быть плюс-минус prod изнутри идеи во-вторых это же не только про код ки действия Ну то есть очень много визуального кнопочки какие-нибудь молки это в любом случае не lsp на самом деле когда мы говорим про реализацию языков реализацию подсказок сложнее всего знаете что сложнее всего не типа не подсказать тебе что-то когда код готов сложнее всего подсказывать тебе что-то когда ты код пишешь потому что пока ты его пишешь у тебя он в некон систентки но ещё не закрыл и поэтому дерево то оно вот такое поехавшего на самом деле И вообще не законченное вот IDE она точнее идея И реализация под разные языки они очень много берут на себя вот этой внутренней работы когда у тебя код Не валиден потому что ты его пишешь и они тебе Очень умно подсказывают а текущие lsp серверы они сильно страдают именно от этого процесса когда Вот всё готово всё хорошо Да они нормально работают а в момент написания кода пока что Ну из тех что я видел очень сильно страдают именно от этого Поэтому я они туда хотят идти Ну точнее пробуют идти Я не верю что это будет ближайшие 2 года И помимо кода есть ещё куча всего вокруг Спасибо Есть ли ещё вопросы Из зала и у меня тоже есть вопрос вы разрабатываете плагины Есть ли какие-то которые вы бы посоветовали использовать при разработке кроме как не тестировать практи на самом деле в чём-то плагины похожи на раст если кто писал на Расте знает что это такой язык на котором ты вот пока пишешь ты ничего не понимаешь И когда ты уже напишеш ты понимаешь А как надо было с плагинами примерно также ты пока пишешь и пока у тебя нет опыта ты такой типа блин что это такое у тебя вот какая-то вот такая сопля размазанная получается и в конце Ты понимаешь а так вот как надо было это делать Это сложная предметная область которую ты пока не пройдёшь сложно понять что тебе советуют И почему тебе советуют потому что да именно предметная область сложная сама по себе а не код вот хорошо спасибо У нас последний вопрос из зала Не беспокойтесь все вопросы дальнейшие дискуссии можно будет продолжить в дискуссионной зоне которая находится А если выходить в правый выход ровненько слева у лестницы там вас будет ждать спикер с ним можно будет до обсудить те вопросы которые не удалось задать А сейчас вопрос здравствуйте Да спасибо за интересную тему В общем Как как идея очень Для размышления полезно Потому что раньше об этом не задумывались звучит так как плагины они очень узкая такая разработка Именно под себя а ведь ещё может быть не все разработчики хотят их использовать внутри то есть Может быть кому-то привычнее другие использовать вот как вы их к этому принуждает Есть ли какие-то санкции за неиспользование плагинов внутри компании санкции за неиспользование плагинов только то что всем удобно а тебе нет это единственная санкция Ну то есть на самом деле у нас боль разработки сидит в PHP шторми но есть но есть там Уникумы которые вимосе у тебя проект на 10 млн строк кода А ты в виме что-то там ну как бы Ладно дело вкуса но Ну да как бы это их экспириенс вот Понятное дело что как вот мы вот обсуждали что типа плагины под идею - это отдельная штука они не распространяются не обобщаются на всё остальное вот просто в нашем случае практически все пользуются PHP штормом Те кто не пользуется им грубо говоря это нафиг не надо они даже это не признают вот что там UI Зачем что какие-то авто комплиты Я и так напишу Вот я думаю что в случае с допустим го практиками Ну практически все пользуются годом Ну это как такой стандарт дефакто вот Могу конечно ошибаться но в общем я считаю что принуждения тут нет это неправильно Я считаю чтот давать такой экспириенс чтобы люди хотели это использовать Ну да Понятно Я я к тому что вот эта вот узкая аудитория на которую нацелено ну скажем назовём это продуктом нацелен на этот продукт он не удорожает ли собственно разработку этого продукта вот эта узость аудитории Стоит ли того Профит Ну типа что значит узость это по факту все практически все кто пишет код внутри компании то есть почему-то опять-таки вот этот трейдо когда мы разрабатываем в и у нас есть там команда энд инфраструктуры каких-то внутренних систем которые пилят админки бесконечные админки админки админки там 10 штук вроде как это считается нормальным а типа плагины вроде как удорожающих есть идеям знаю что не все любят но всё ещё спасибо большое за доклад было очень круто интересная тема давайте выберем лучшие вопросы зала и подарим подарок от нашего спонсора гаспром нефти и кстати вроде как от нас тоже поскольку их два то один из вопросов Что делать с плагинами дальше Да прекрасно молодой человек в зелёном не убегайте пожалуйста сразу же после доклада чтобы мы могли вас найти второй очень логичный и правильный - это про lsp и обобщения супер тоже не убегайте пожалуйста а вас Мы тоже Хотим поблагодарить Большое спасибо за доклад Мне было очень интересно послушать Мы хотим Подарить вам подарок от конференции супер спасибо а Проходите пожалуйста дальше"
}