{
  "video_id": "JG9Sgnj0xAI",
  "channel": "HighLoadChannel",
  "title": "NoSQL - коротко о главном / Сергей Туленцев (TextMaster)",
  "views": 17902,
  "duration": 3316,
  "published": "2017-07-29T12:57:50-07:00",
  "text": "так ну что давайте начинать меня зовут уже несколько лет интересуясь с базами данных я сегодня попытаюсь вам поделиться знаниями и опытом где могли кекс мастер представляет такую не для программистов и для работников творческих переводчик и копирайтеры и корректора у нас висят как для 34 языков и буквально во вторник мы запустили новый язык на сайте не угадайте какой албанский помимо сайт у нас есть api через которой большие компании например ашан они засылать на большие проекты например вот 8000 наименований товаров к ним надо сочинить описание и перевести их на 7 языков в нашем стеке технология нет ни грамма и skrill и как-то мы выживаем кому будет полезен для кого-то это обзорный доклад с претензией на структурированность если вы что-то где-то когда-то краем уха слышали про она и спел то через 40 минут вы будете знать гораздо больше будете легче ориентироваться в терминах и более верно выбирать баз данных для своего проекта поговорим также про типичные примеры применения и как не надо применять она искал баз данных немного истории впервые термин появляется в 98-ом году так чувак по имени карл и остроты назвал свою рацион и базу данных она однако не предоставляла искал интерфейса для работы с собой вместо это представляло из себя набор ваш скриптов которые колбасили команд файлы судьи если верить википедии то последний релиз этой баз данных вышел 2010 году и как-то успешно она работала я если честно при не узнал только в процессе подготовки к докладу и я думаю что это хорошо что ты не раньше не узнал в 2009 году другие чуваки из откуда-то из области сан-франциско организовывали конференцию для обсуждения новых распределенных баз данных и им нужно было хэштег я twitter емкий короткие хэштег кто-то придумал хэштег но и sqweel чтобы подчеркнуть что есть вот баз данных которых есть и сиквелл есть acid и всякие крутые штуки на мы будем гореть подруги баз данных у которых ничего этого нет народу хэштег понравился он вышел из-под контроля и до сих погулять по интернету термин собственно искал есть две концовки 1 стали 1 новое оригинальное то но и sqweel то есть вообще искрило никакого не то есть какой-то другой механизм а для работы с этой базы данных и более новая трактовка это нота он для сиквела то есть не только скрыл есть может быть skrill и что-то помимо есть такой сайт наш когда-то без . это список разных баз данных вот именно на espel содержит описание типа ссылку на официальный проект какое-то катки важные вещи которые стоит знать можете на досуге залезть почитать ну я вам про самые популярные сегодня расскажу значит принято классифицировать базы данных но наиболее популярной классификации это по типам данных один важный тип это и киева листа или хранилище пар ключ-значение самый густонаселенный тип и он одновременно самый простой обладает самым примитивным интерфейсом и всех и пойди минимальный интерфейс для такой баз данных он состоит всего из трёх операций детсад и дэвид наверное есть какие то баз данных которые удовлетворяют этому интерфейс но обычно современные с построенные на базе данных они предоставляет больше плюшек например можно получить много ключей за 1 установите время жизни ключа соответст получить время жизни ключа какими сервисной команды для проверки статуса сервера вот это все яркий представитель той этого класса это memcache и сюда можно отнести с натяжкой с натяжкой потому что у него на самом деле есть своя отдельная категория которая есть он один ты категория называется сервер структуры данных и он в этой категории хоть и потому что у него ключи у нее несколько типов клещей и очень богатый набор команд полторы сотни или даже чуть больше с помощью которых можно творите вообще невообразимые вещи но если этого категорий учитывать 100 такт его можно отнести вот сюда в керале ну и вот есть еще и ок документа ориентированная база данных это сильно усложненный вариант предыдущей категории но это добавлены сложность она дает еще и бонусы да теперь значение у нас это не какой-то непрозрачный текстовый блок с которым ничего нельзя делать ком как целиком его почитателей удалить теперь можно работать более тонко с со значением можно часть если нам нужно только часть документы можем ее прочитать или там обновить только часть обычно в базах данных такого типа присутствует богатая как это по-русски сказать богатая структура документа то есть не такой дерево да то есть если грубо представить себе произвольный джейсон то вот любой женщин который можно вообразить себе можно вот записать такой базы данных и обычная реклама пресс-релизы говорят что вот бегать и берете любой джейсон кладете в нашу базу данных и потом можно во всякое анализировать обычно проблема не возникает только с первым пунктом с собственно помещением и джейсон база данных а дальше уже начинается нюансы а типичный представитель и и манга дебилка уж тебе пластик search еще с никто колоночный баз данных их сильная сторона в том в способности хранить большое количество данных с большим количеством атрибутов если у вас есть пара-тройка миллиардов записей у каждой из которых там под 300 атрибутов это вот вам в колоночный базу данных они немного по-другому хранят данные нежели например реляционные базы данных или стенки они хранят по строкам то есть все атрибуты одной строки они лежат как бы я там эти делают наоборот они хранят отдельной колонке вот есть файлы в нем хранятся все поля данной колонке из всех вот 3 миллиардов в записи они хранятся все рядом и за счет этого соответственно другие уже колонках а места 2 в файле за счет этого они могут применять улучшенные улучшенное сжатие за счет использования информации о типе данных в колонке и также это может ускорять запросы если на нам на примере нужно только три три колонки из 300 то нам не обязательно грузите стальные 200 минус 7 завязано представители это ведь вы с кассандрой vertica у верочки кстати искали интерфейс но это все накала ночная б.д. глифы в базы данных соответственно при предназначен для обработки графов на всякий случай напомню что граф это такая штука с дискретной математики кто представляет собой набор вершин соединенных и ребрами на самом деле если посмотреть на любую интересную задачу сложную то велик шанс что мы там этим граф например и социальной сети это один большой граф дорожные дорожные сети прокладка маршрутов рекомендации товаров значит сила этих баз данных в том что то есть за счет своей специализации они могут эффективно выполнять вот эти всякие операции над графами но также в силу тоже специализации они не сильно распространены все-таки не в каждой задачи есть гров а если он там есть то они к не очень большой и по ресурсам часто его дешевле просто закончить а на коленке какую-то какую то обработку графов приложения нежели тащите в проект сила новый базу данных за которыми надо следить и целый ворох проблемного баз данных доставляет моей практике пока не мере так и был здесь я просто мульти модельный баз данных это такие баз данных которые одновременно входят в две или более категории из предыдущих хочешь там пишет ими документы хочешь графы что хочешь fondation тебе например у неё основной слой кивали и поверх неё поверх этого слоя как-то приложи на сквер слой яко в прошлом году или nippon когда очень давно скачал себе дистрибутив и подписался на рассылку и они меня слали email и каждую неделю так и не удалось мне поставить и запустите пощупать как она работает и теперь уже не удастся потому что пару месяцев назад в марте этих ребят купила компании apple и сразу удалила все ссылки на скачку дистрибутива сайта и видимо теперь этот продукт не будет в открытом доступе наверное она работала неплохо 1 раз в их купили ну вот у нас есть еще 2 к которой можно успеть пощупать пока их куда-нибудь тоже не купил еще есть классификация по способу хранения данных есть база данных которые вообще никак данные не хранят у них все все хранится в памяти соответственно либо я перезагрузку процесса влечет за собой потери данных здесь выхода 2 либо не хранить там важные данные которые нельзя восстановить либо агисина применять аппликацию из-за не важных данных это конечно же пример это кэш если у нас кэш куда то пропадает то приложение у нас не упадет она будет там тормозить пока каша в этом не поднимется и не разогреется но ничего смертельно в принципе не случится иногда этот режим применяют для ускорения производительности взять например гадес он может обрабатывать десятки сотни тысяч операций секунд и некоторые люди этим конечно же пользоваться не нагружает на всю катушку но если он работает в режиме сохраним данных то есть либо спрашивает тест на пшёлты либо лог пишет то никакой диск с этим не справится и он будет просто работа с диском будет тормозить работу сервера поэтому есть можно применить например такой трюк бегом систему и спер хадисов один мастер 2 его слова намасте мы отключаем всю все пять системность и он здесь вообще не касается диска и туда мы пишем потому что это мастер на втором слове то есть на первом слове мы тоже отключаем при системность и с него читаем и на последнем слове его никто не трогает не читает и вот уже на нем мы включаем пир системности и он согласно настройкам сохранять данные на диск в случае какой-то катастрофы у нас на нем будет копий данных из которой можно остановиться я тут уже обмолвился что кадис у него есть две модели по которым может сохранять данные на диск ого пехом может сохранять снапшоты это такой слепок слепок базы данных на текущий момент чтобы это слепок получился хороший я здесь он for kids он создает копию своего процесса чтобы чтобы слепок не было попорчен записями которые вновь происходит с мастером соответственно форк лица и это этот форт он уже сохраняет snapshot потому что ну спокойно потому что и у него никто не пишет этот способ очень хорош кроме того что он требует дополнительной памяти в зависимости от активности которые происходят на севере вам может понадобиться до двухкратного запасы памяти если у вас база данных 2 гигабайта то вам надо бежать еще два свободных вод для сохранить snapshot of еще можно настроить чтобы он писал данный блок это другая техника то есть когда ему приходится команда на запись он на ее быстренько сразу пишет о лак ты что так и продолжает работу то есть эти два режима снапшоты лака они независимы и но можно сказать либо 1 либо другой или было бы вместе в общем этот лог он-то только-только дописывается в этом его как бы плюс данные которые уже попали в лог они не изменяются и соответственно могут быть поломаны потому что что обычно делают люди они этот лог кладут на отдельный диск с отдельной головкой и на этом диске никто там ягодицы ничего не делает и соответственно 3 головки диска и это головка на всегда показывает на конец файла и запись новых операций в конец файла она гораздо быстрее чем если бы это происходило на обычной системе где происходит какая-то другая активность другие база данных например манга' тебе они у них и другая модель и вот называется in place a dates у них есть одна копия базы данных файлов данных и они прямо их на живую изменяют это не очень безопасная практика и если во время изменения что-то там питание отключилась например то у вас все баз данных скорпиона и сами виноваты поэтому несколько версий назад они приделали журналирования так они называют append он вилок и даже сделали его включенным по умолчанию поэтому теперь мангу можно запускать без 2 реплик и будет шанс что она не поправьте это ваши данные говоря прямой screen нельзя не упомянуть по якоб теорему это как два сапога пара тегом на самом деле была сформулирована там году в 2001 и некоторые считают что она уже хотела актуальности вообще не стоит принять говорить но упомянуть стоит в коце она звучит так что распределенная система не может одновременно обладать и более чем двумя из следующих характеристик это доступность был ability в согласованность консистенции и устойчивость к разъемам сети пройти чем-то laurence на самом деле выбор у нас только из двух вариантов либо доступность либо согласованность потому что против этого ганс у нас везде есть по умолчанию мне не известная система которая при не могли бы пережить разрыв сети который при разрыве city.com самоуничтожались а ну да доступность что значит доступности это если у нас есть распределенной системы и мы обращаемся на любой ее узел и получаем гарантийный ответ мы можем если мы запросим какие-то данные мы можем получить устаревшие немного версию этих данных но мы получим данные они ошибку или там вообще мы могли бы на примере где достучаться до севера вот если мы получить данные то система доступна противоположности этому система может быть согласована что означает согласованность если мы на одном узле записали какие-то данные и чуть-чуть спустя некоторое время на другому зле пытаемся прочитать эти же самые данные если система согласованы мы получим эту как раз новую версию данных которые мы записали в другом месте соответственных свой зеленый все системы они любят относить себя к одному из двух лагерей либо она и пили be happy на самом деле есть третий секретный класс это просто пи но не не все нет ни один производить баз данных не любит признаваться в том что его система вот такая они вот одна из этих двух то есть если она просто питу она не обладает недоступностью не согласованности соответственно если система называет себя себе то есть консистенции практичным taverns то она при разливе если у вас есть кластер и он например он размещен нас по 2 по 2 дата-центре мы и связь рвется между дата-центре экскаваторщик там перерубил кабитт как ведет себя консистентная система она если мы обращаемся на узел и узел видеть что он не может надежно обеспечить эту запись что у него нет на прямых связи с большинством узлов в системы то он просто откажет приложение в этой записи и она не удастся когда связь восстановится потом приложение может попробовать снова и у него может получиться а если система называет себе эти то она будет всеми силами стараться удовлетворить запрос приложения путем отдачи ему устаревших данных она может принять себе запрос на запись и куда-то там я себе записать чтобы потом выполнить нанана всем пластика здесь есть нюансы например если у нас везде лился класть их на давая и мы пишем в обе части то есть шанс что мы получим конфликты то есть мы в одном в одной части записали в один ключ какие-то одни данные вам другие когда связь восстанавливается то есть проблема какая какая версия данных корректные специально для и pi system придумали термин вот он венчал консистенсии в грубом переводе на русский это означает если не было конфликтующих записей то когда-нибудь попозже класть а придет в согласованное состояние при этом не не дается каких-то гарантий по конкретным промежутком когда-нибудь но в реальной жизни конечно не приходится рассчитывать на отсутствие конфликтов и надо заранее думать как мы будем с ними бороться сам простой вариант если у нас есть две конфликтующие записи это разрешить конфликт во времени грубо говоря последняя запись выигрывает позже всех сделаны еще можно некоторых систем они сваливают все это дело на приложение когда приложение пытается прочитать данные и баз данных виде что есть конфликт и она его приглашаем просто возвращает все конфликтующие версии и приложение само руководство своей логикой должно будет выбрать правильную версию и отдать их базе данных более умный подход это используйте по данных которые при использовании которых в возникновении конфликтов если не невозможно то очень сложно например типе данных множество если у нас есть разорванный кластер и мы в одном в одной половине во множество добавляем член там а и в другой половине добавляем бойцы когда связь восстанавливается то смешивать эти записи очень легко мы просто делаем объедение не множеств и у нас получается 1 рисуйте лишь множество там а бойцы еще пример например счетчики мы можем независимо инкрементировать счетчики и когда связь восстановится то мы просто сложим их и получим результирующий счетчик were a key баз данных реак есть вот специальный термин всех детей расшифровываться как без конфликтные лице кающиеся типы данных по аббревиатуре можете загуглить если интересно поговорим чуть-чуть про использование . или когда надо использовать если вам нужна высокая масштабируемость это одна из самых главных если не самая главная причина использования вообще такого типа баз данных потому что за счет своей пониженной сложности они более легко масштабируется причем если ранее приложению основные тяготы по масштабирую пожить на приложения у нас есть 20 мм к шее нам надо их приложение собирает в один хэш ринг чтобы обеспечить какой-то вот безотказности масштабируемость стоит со времен база данных они все делает за тебя в некоторых даже не надо ничего настраивать а просто запускаешь ноду она сама находит кластеру выступает в него скачивает часть данных и начинает его отдавать часть данных таким образом мы достигаем желанной линейной масштабируемости тоже один из святых грааль эй мир иной стиль линий линейно масштабируемость это когда мы путем увеличения ресурсов пластика мы получаем пропорциональное увеличение характеристиках пластика удвоили количество серверов получили в два раза больше производительность если мы линейном масштабе гамс мы очень крутые значит по этой типирование тоже важный paint традиционные реляционных баз данных они требуют никто и количеству обслуживания как до начала проекта так и в во время проекта то есть до начала проекта нам желательно продумать схему базы данных а и и создать там запустить ней данных а потом когда уже правит запущен и работает могут пойти новые бизнес требования или мы обнаружим что мы как-то ошибались нам надо добавить колонку часто это блокирующая операция что это означает нам надо либо класть приложения то есть выключать его на минутку или там на несколько дней зависит от сложности ситуации либо вручную дирижировать процесс обновления схемы на котором схема на slave переключаем объедем его до мастера выключаем на него всех остальных сливов и на них по очереди тоже накатываем схему а перед этим надо не забыть выкатить код который умеет одновременно работать с новой старой версией баз данных чтобы ошибки есть из приложения не летели это все но можно это делается но это морока да зачем делать когда можно не делать поэтому без схемные без данных документ ориентированные особы они этим и привлекают что можно просто начать использовать новую ногу схему данных и она просто появится вот ваших файлов данных совсем безболезненно это пройдет конечно случай если мы используем новые какие-то но добавляем поля грубо говоря если мы изменяем структуру это старых полей ту частенько придется сделать миграцию данных но все рано это гораздо 0 сильно ускоряет и упрощает прототип на создание прототипов продукта можно там за несколько часов на манга тебе наконец минимальный продукт и когда получим финансирования написать высокая доступность тоже классический классической причина везде разносим наш на нашу базу данных по нескольким дата-центром в америке там в европе в японии если вдруг в какой-то из них бьет молния или он исчезает то мы можем писать другие дата центры и доступно баз данных нам это позволит кэширование здесь даже как бы особо нечего больше говорить в нам кэш все знаем применяем некоторые товарищи ставят извращается и ставит мангу а как с перед улице он кой то есть нас в реляционных баз данных хранятся данные все-таки нормализованы тут приложение делает запрос с 20 joy нами получать результаты кладет его мангу и потом далее продает из манги профит родственный случай с кэшированием этой буферизации например у нас в приложении льется какой-то огромный поток просмотров страниц например и нам надо их быстро считать если мы этот поток будем лить в колесо на баз данных то любая баз данных вздох нет не выдержит поэтому имеет больше смысла направить этот поток скажем в ряде он очень быстро умеет работать со счетчиками и ну и будет быстро считать и уже и сгодится можно там раз в секунду или в 10 или в минуту зависимости от самоуверенности вашей можно скидывать данные для сохранности в основном без данных очередь заданий это как бы тоже это сестра буферизации если у нас есть какая-то там на сайте форма регистрации пользователя и во время регистрации пользователя нам надо отправиться на указанный e-mail совершенно необязательно делать это во время обработки формы пользу пользователей незачем ждать пока мы отправим им email поэтому во время когда мы получая форма мы кладем задание на отправку и mail а вот чихать и возвращаем форму пользователя он там продолжает пользоваться сайтом а у нас фоновом режиме какой-нибудь worker достанет это задание дочери и открыт email что-то здесь сказать нам хранилище бинарник of например мы нам надо хранить фотки это на самом деле очень сложно проблема если у вас фоток очень много все социальные сети они изобрели свой велосипед для охраняли фоток но если мы еще не фейсбук хранить файлы на локальной файловой системе мы уже не хотим или не можем потому что их слишком много то у нас есть несколько выходов например можно воспользоваться сервисом по типу amazon s3 и просто лить файлы туда или можно поднять локальный кластеров с раком какие-нибудь или мангой и храните файлы там здесь надо смотреть на ограничение конкретных продуктов если я напомню the week рекомендации но не класть файлы больше там двух-трёх мегабайт о манге жесткое ограничение 16 мегабайт на на документ но у нее там есть специальный механизм для хранения больших файлов которые грубо говоря бьёт бит файла по 16 мегабайт и хранит эти части ну про счетчики мы уже несколько раз сегодня говорили если надо что-то быстро считать бегом редис или и ок или кассандру и считаем эффективная оценка кардинально sti множеств или в простонародье считаем уников а если у нас есть ну лог просмотр в какой как страничке например или действий и пользователей как нам узнать сколько уникальных пользователей здесь участвует если у нас эти данные лежат например в реляционной band новым база на базе данных мы делаем что-то типа select каунт distinct и это принципе сработает если у нас не в базе это лежит а просто лог веб-сервера то мы можем 0 какие-то скидки на priority либо положить hadoop и hadoop им это посчитать у всех этих способов есть один недостаток производительность просаживается пропорционально увеличению количества количество данных но не стоит отчаиваться на помощь нам придет математика есть алгоритм называется chopper лак лак он позволяет радикально и уменьшить время и память требуемый на выполнение этой операции по ссылке можете посчитать статью сальватора автора редиса который которая сказать про этот алгоритм вкратце скажу что например для подсчета ада этот алгоритм он предполагает что нам не нужно знать с абсолютной точностью цифру мы можем допускать некоторые погрешности и используя этот алгоритм и можем использовать всего 12 килобайт памяти значением по умолчанию оценивать cardinal ность множеств с миллиардами членов сс точно с погрешностью 0 8 процента можете прикинуть это конца константной константной памяти она не будет больше то есть если у нас там два миллиарда или там 7 все на диван с килобайт размер буфера влияет на точность чем можно увидеть и буфера и уменьшить погрешность детали по ссылке ещё один хороший пример это система управления контентом тоже такой хороший пример для в документных вас данных можно взять статью и с контентом с флажками с какими-то настройками и прямо записать и использовать полнотекстовый поиск в некоторых электронных базах данных ванну встроен и базовые нужды может удовлетворять если вам нужно что-то большее то здесь конечно надо браться какой-нибудь сфинкс или elastic search как не надо использовать ночь коваль база данных не надо в них хранить реляционные данные но если мы делаем и например социальную сеть или блок системы комментариев или например система вайлейн проектами эти все системы у них нет единого фокуса точки зрения на данные мы можем смотреть на данный связанных сторон можем сказать дай мне все проекты этого пользователя или то меня всех участников этого проекта или кто изменял и когда изменял вот эти страницы то есть данные могут быть запрос могут быть совершенно различные и бизнес требования они так могут совершенно внезапно измениться и хорошо бы чтобы база данных было достаточно универсальна чтобы обеспечить а эти запросы можно конечно постараться и блог или там аналог hacker news это все написать на вегасе но мне кажется это очень хрупкий хрупкая структура и любое дуновение бизнес требования на порушат все это в интернет есть статья называется почему вы никогда не должны использовать манга тебе автор самой она описывает идеальный шую и дальнейшее приложение для вот он к тебе это вас однако фильмов там есть в сериал и сериалов есть сезоны в сезонных эпизоды в эпизодах набор актёров все это эту эту куклу друг друга вложено сохранится как бы в одном документе мгновенно достается в общем красота и она так было несколько месяцев пока на одном из митингов заказчик не попросил сделать и возможность просмотра фильмографии актера посмотреть все эпизоды в которых он участвовал для электронных баз данных это вытри реальная задача но для вот структуры которые они имели это было невыполнимо потому что актер он во первых но он не самостоятельный объект а он вложен в сериалу и на 5 уровне вниз достать его не никакой возможности нет можно конечно пера колбасить структура данных и поднять актера на верхний уровень а все в этом в объекте сезона хранить ссылки но тогда мы тебя все все прелести документы и базы данных то что мы можем одним запросом поднять все данные которые нам нужны теперь нам надо мы поднимаем modish ники и по этим идиш ником на на дополнительный идти искать авторов в общем этот один запрос и им всё сломал все радости и bad thing это когда наш документ он может включать другие документы или массивы документов здесь например у нас гипотетический пример документ статьи например или постов бложик у вас то есть автор авторы steam и также поставить комменты в камин то есть какой-то контент и в свою очередь автор и там мы можно еще много наворотить там есть вот эти лайкеры давайтесь можно много было бы желание это все выглядит хорошо на бумаге но это сломается в тот же момент когда ваш бложик попадет на в какой-то крупной сми там не знаю насколько это хаба крупной сми ну допустим возьмем для примера хабар ваш бложик сломается сразу же как только вам под пост на фигачит 10000 камента за пять минут у нас приложение tix мастера была похожая ситуация у нас есть сущность проекты у проекта есть документы документа есть тоже всякие атрибуты и значимо у нас все это хранилось труды вложенным то есть документы были вот значит вложенный в проект и все это вот хранилось главный существа была проект все было хорошо пока недель через 2 недели после начала эксплуатации у нас все это сломалось мы вылезли за пределы лимита документов и у нас появились новые запросы которые эта структура не удовлетворяла и нам в срочном порядке пришлось менять структуры данных и подниматься документ то есть выделять его из проекта и поднимать его верхний уровень а еще несколько структур мы на пришлось выдать то есть вот усердствовать с имбилдингом не надо в противоположность здесь мой ботинку это недостаточный bedding вот возьмем первую строчку это классический пример из туториалов помогу тебе это теги опять же какому-нибудь посту вот этот структура когда у нас значение является массив она манга из них очень хорошо умеет работать мы можем эффективно искать посты по дай мне все посты с тегом а голуби с тегом руби и и носика или снегом там руби и у которого нет тега но искали там все что хочешь можно делать но есть присутствие некоторые избыточность данных да у нас текст один тоже текст повторяется много раз но to get a такая вещь которым это не страшно если же мы там пришли из мира из мира реляционных баз данных и решили делать все по-старому то мы сделаем примерно как во второй строчке мы будем хранить эти шнеки тегов а сами теги они у нас будут объектом верхние уровни как бы своей коллекции здесь у нас нет нет избыточности данных но вместе с ней мы и выплеснули и ребенка то есть мы теперь не можем искать посты по тегам по тексту тегов за один присест нам надо сначала отдельно пойти и найти теги айдишники тегов по тексту и только после этого мы можем искать посты то есть минимум два запроса неверно выбранный тип данных это из серии давайте возьмем это джейсон зассе реализуемого в строку и положим в эту строку положили ok теперь мы не можем с ними ничего делать потому что это просто не прозрачный блок и мы можем его только целиком вы читать целиком перезаписать или целиком удалить недостаточно продумана схема данных нас такого flow есть такой себя для программистов не сесть вопросов типа вот у меня есть структура из пяти вложенных массивов то есть массивы 5 уровней вложенности как на теперь делать запросы по ней вот честно каждый день такие вопрос встречаются и ладно бы только запросы потому что следующий вопрос у них а как мне теперь менять эту структуру то есть люди просто не думая нафига чили какие-то данных и теперь не знает что с ними делать то что по бумаге а по бумагам он где берет бис бис схемной база данных не значит что над схемой думать не надо чуть чуть надо чуть-чуть подытожим очень полезно знать свой предмету область и попытаться предвидеть будущее запросы которые могут возникнуть в том примере про сериалы если бы разработчики то есть и для заказчика это было очевидно что есть ценность в в возможности видеть фильмографии актеров если бы из рабочих и видели эти это тоже та история сложилась бы по-другому полезно следить за новостями в мире баз данных технологии развиваются очень быстро и буквально за несколько дней может возникнуть какая-то штука которая серьезно облегчит вам жизнь в моем случае это был вот тот алгоритм для подсчета уников ну и не надо излишне доверять пресс-релизом и рекламе везде все идеально надо смотреть еще на недостатки здесь возможны варианты кто-то ищет негативные отзывы по форумам кто-то читает код кто-то ждет 3 series пока вот главное выбирать базы данных не исходя не только из достоинств но и также из недостатков все вопросы спасибо за доклад у него просто кой-какую из этих но вообще какой из носка решение ты выбрал бы для организации файловое хранилище в частности фоточек или может вы уже это сделали бы ты расскажешь но так с бухты-барахты я бы я бы выбрал что-нибудь какой-нибудь реак если фотки не очень большие мелкие фотки отлично подойдет если что-то больше какие-то фотки или больше объем это я бы на и на не стал брать мангу я бы поискал более специализированные за точное решение для хранения фоток пару лет назад на холоде ребята из одноклассников рассказывали как они это сделали и мне очень понравился прямо загорелся сделать такую систему но мне никто не дал времени вот если бы мне кто то дал чуть-чуть времени я бы пытался конечно воспроизвести так поскольку я даче да но как то надо их хранить как-то обеспечивать вот резервное копирование вот в этом главная сложность я так я так и не понял чем плоха файловая система и в особенности специализированные файловые системы для хранения тех же фотографий но обычно файловая система которая не не сетевая она просто имеет конечный объем и надо прилагать какие-то дополнительные усилия для обеспечения зерна копирования того что над иногда хранить несколько копий фоток просто этим надо заниматься сетевые да они как бы бегут части этой заботы на себя я вот про них особую честно я не знаю ничего но они помогают я слышал про против сетевых файлы систем ничего не ми а против обычных это у них конечно и конечно объем и надо надо заботиться самому копирования все проблемы всех нужны минусы что работает у вас а конкретно у нас в текст мастере у нас работает манга elastic redis кэш да надо патов порядка жду задача специализированный инструмент у меня пара мужских вопросов во первых с появлением поддержки джейсон в реляционных базах данных остаются ли какие-то принципиальные преимущества у новость kalbach данных и еще один вопрос если нас проекте есть как реляционной данные так и не реляционные стоит ли игра свеч чтобы заводить 2 хранилище и работать с ними на уровне приложения или может быть выбрать сетки один тип хранилищ но отвечу сначала на 2 если под не коллекционными понимаете какой то там какой-то произвольно джейсон то я бы просто взял по сбегаешь и хранил бы это вот эти джейсону колонки в нем какой был 1 of 1 с появлением поддержки джейсон в реляционных базах данных какие принципиальные преимущества остается он и войсках баз данных ну вот мастер баз данных это не только поддержка джейсона это вот даже массивная масштабируемость и доступность вот эти штуки которые даже подгляд наверное не так хорошо умеет делать их ну документ ориентированные они вопрос с появлением поддержки джейсона в подписи нужны ли до сих пор этот документ и ориентир на базе данных если взять например конкретно мангу у нее довольно богатый набор операторов я не очень знаком с поддержкой джейсон вас гресия но я полагаю что он чуть-чуть по беднее и если вам нужно вот ну какие-то особые возможности по обработке вот этих без структурных без схемных объемов данных то надо посмотреть поближе просто смысла так что я считаю все еще есть вы сказали про лучшую доступность да и лучше масштабируемость и масштабируемость чем принципиально отличается тоже там postgres туда про которые сегодня был доклад тоже и ну про масштабируемость там был показан там sharding да там портирование такие вещи и в чем конкретно отличие просто мне не очень видно принципиальное отличие но я не слышал это доклад на я подозреваю что там все она присутствует некое количество ручной работы то есть надо наставать на мы вручную схему сайдинга и при добавлении нового нового нового шаг до зарегистрировать его там где-то если мы говорим например про ariag или там волдеморт с ними ничего этого не надо делать мы просто запускаем ноду она все делает сама но это это удобно в в облачных окружениях когда у нас машины запускаются например а каким-то балансиром то есть он следит просто за нагрузкой раз просто запускать запускает новую машину она сама встраиваться в власти в таких ситуациях специализированный найз гель база нет но чуть-чуть выгоднее доступность данном случае за счет чего больше доступность за счет того что они не консистентные то есть если даже те части с пластиковым ряд то они оставшаяся часть кластер они будут продолжать отдавать данные то есть если говорим про гайак это некая система баз данных это доступно база данных смысл что мы с с падением ноды мы потеряем в набор данных которые не хранит хранится то есть все да все данные very океане хранится запас на копия несколько копий это настраивается эти параметры то есть мастер копия хранится на одной ноги и но и honeyz еще несколько копий на других модах если мастерноды вымирает то ответственности за эту часть данных передает на себя другая но то и продолжает отдавать какие пасибо использовать базу с транзакциями есть из пристану перечислены здесь созданных чтоб какой-то механизм транзакций ну и что-то подобное наиболее близкий механизм из из вас которой я хорошо знаю этом манга но у неё такие очень qc транзакции на на уровне документа если вам надо одновременно но в рамках и трансакции сми немецкие документов так ничего не получится если база данных следующего поколения которые пока еще мало знают вот как он theory and тебе у них пока не мере на сайте заявлено что у них вот носик вид документа ветераны и транзакции там полный сет все дела то есть вот можно на него посмотреть они по рекламе обещают что у них это есть какие есть варианты муёские бас бэкапы но им обычно не нужен backup потому что они работы в больших кластеров и в пасть и просто одновременно работать несколько копий данных и я думал что маловероятно что вы имеют у вас весь кластер сразу атак но у каждой баз данных свои свои специфичные способы в манге там официанту сам он годам у родися то можно просто файлы скопировать не знаю что у него какова область применения memcache ада сейчас после появления редиса который принципе позволяет все те же операции выполняйте хранить в памяти и он такой же быстрые как мент лишь причем у него много фишек не знают не вижу преимуществ мам cash & carry 3 сам возможно продолжает его люди использовать из но из-за того что как бы все работать не надо менять или то например что есть но какие-то системные на клиентской библиотеке вот просто клинская для цкб сообщается умеет протоколом кэша при такого родиться не умеет и вот просто не поэтому использован кэш а какие-то дополнительные фишки гадеса им пока что не нужны им просто нужен кэш как бы гадес просто здесь не имеет смысла ставить если понятно спасибо сергей спасибо вам за год спасибо"
}