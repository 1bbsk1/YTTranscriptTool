{
  "video_id": "YJJhdckXCTk",
  "channel": "HighLoadChannel",
  "title": "Апгрейд и рефакторинг PHP проектов — теперь это просто / Александр Володин (Skyeng)",
  "views": 1023,
  "duration": 2418,
  "published": "2023-10-06T07:18:50-07:00",
  "text": "Да сегодня мы обсудим как упростить и ускорить Апгрейд кода проекта обновление пакетов архитектурные рефакторинг и как во всем этом нам поможет такой инструмент автоматического рефакторинга как ректор Да 99 процентов доклада будет посвящена ему недавно Валентина Удальцов телеканале пых Telegram канале пых провел опрос где оказалось всего лишь 10 процентов его подписчиков используют успешный ректор в рабочем проекте надо это улучшать но Давайте сначала познакомимся а тот непонятно кто тут выступает Да значит я Александр Володин примерно уже 8 лет занимаюсь разработкой на PHP в основном на симфонии проектах сейчас последние два года работаю в skyeng в отделе маркетинга Мы делаем разнообразные проекты чтобы привлекать новых учеников и преподавателей мой доклад будет состоять из четырех частей Так что приготовьтесь это чтобы вам ориентироваться во времени удобно первая часть делаем рефакторинг быстро надежно недорого но сначала с чего у нас вообще начинается зачем это начинаем делать каждый по-разному к этому приходит кто-то хочет переписать сложные интерфейс либо код который написан менее компетентным сотрудником я раньше не любил рефакторе вот работает этой работы к этому процессу стало выход php8 Я так хотел использовать Это был такой конечно болезненный процесс И вот я так работаю какое-то время со своим крутым проектом на печке 8 да и не опять начинает сваливать легасе проекты и мало того что чужие проекты они Априори для нас всегда хуже Да там нейминг не тот архитектура устроена иначе Так ты еще и начинаешь спотыкаться а то что там функции PHP там или симфони ещё таких нету И надо городить какие-то костыли конечно с этим можно смириться да э работать как-то ну это не мой вариант э потому что это всегда придёт нас не удовлетворение они творение поэтому надо рефакторить но это процесс как я уже из прошлого опыта понял достаточно ресурсоёмкий и такую ресурсоемкую работу ещё сложно продать нашему project-менеджер этим ряду или там с кем вы договариваетесь потому что во-первых кварталы у нас запланировано уже А во-вторых э-э ресурсоёмкая задача которая делает приятно только вам а не бизнесу Ну кому она ещё нужна Господи кроме вас Ну бизнес все равно там стрелочные функции да или там другие фичи поэтому у меня две проблемы это тяжело работать И тут на сцену выходит ректор не физически выходит на моем слайде Я затаскивал в свой проект проект был на php73 количество файлов ой количество строк кода было примерно 29 тысяч я запускаю рефакторы с помощью ректора бац и у меня примерно 7000 строк кода а три факторина просто Все великолепно Я потратил на все про все нас на настройку на вот запуск рефакторинг надо бак полтора часа я не знаю сколько бы я потратил если бы это всё отправил руками наверное не знаю Ну кучу времени точно ещё Да кстати да забавный факт что После перехода на печке 8 у меня сократилось количество строк кода на 6 процентов Так что Я рекомендую Если еще сомневаетесь так вот плюс апгрейда с ректором это простая настройка конфликт на PHP Я вообще в нем не шарил быстро настроил высокая скорость Независимости От количества кода потому что вручную мы в любом случае это будем делать гораздо дольше и отсутствие человеческого фактора то есть отсутствие меня рукожопов которые там чего-нибудь не так поправит и будет потом сидеть это долго дожить но Конечно же да вот это такая счастливая история но чаще всего Нельзя просто так взять и от рефакторить всё с помощью ректора поэтому я расскажу возможно банальные шаги которые нужно сделать перед этим процессом первое нам надо улучшить покрытие тестами потому что это достаточно странно да мы автоматизируем изменения кода но не автоматизируем его проверку Поэтому да не надо это работа скидывать наших бедных тестировщиков и мы так легко это самое монотонный процесс у меня в среднем тратится больше половины времени своего следующий этап это нам нужен стат анализ это он Но в этот раз он нужен нам не для того Да чтобы улучшить качество нашего кода в этот раз он нужен первую очередь ректору чтобы более эффективно проводить рефакторинг Я рекомендую использовать псалме или печь пистон Но если у вас только начали этим увлекаться использовать печки стен потому что ректор при проверке типов ориентируется на него и еще что нам нужно это код стайл Да обычный фиксер любой вот из этих трёх инструментов ректор не будет заботиться о простом банальном код стали он занимается более такими высокими вещами вот поэтому а так что хотел сказать-то Да поэтому просто выбираем любой из них ну и если первый раз будете что-то устанавливать и Используйте Стандарт теперь переходим к самой настройке ректора в первую очередь что мы должны указать это какие директории в нашем проекте Мы хотим от рефакторить а какие директории в этих директориях Мы хотим скипнуть следующий момент - это то что ректор Э мы можем значительно повысить скорость работы ректора благодаря конфигурации далее по умолчанию когда ректор атрифакторит вам код там например Он отрефактора некоторые константы или еще что-то в вашем коде он выведет это все в виде фоку вали филднеймс это не очень удобная описание поэтому сразу рекомендую задать эти конфиги чтобы у вас наймс не было в исходном ходе Space и сами правила рефакторинга рекомендую сразу добавлять конкретные константы которые позволяют перевести вас с любой версии PHP Да там хоть э-э с 73 там 5-3 э сразу на восьмёрку то же самое можно кстати Итого может показаться что предварительные работы занимает много времени но вы это сделаете один раз а ректор вы будете запускать потом постоянно Потому что постоянно будут выходить новые версии Как печь пить так и симфония и других библиотек Да но почему ректор Да шучу У нас больше инструментов не нашлось что ли Да и какие у него возможности еще есть вряд ли он только апгрейдом занимается я поискал интернете и нашел два инструмента это Fable если мы отходим Всё больше нету возможно такие как фиксер Да там в нем же тоже какие-то исправила Да правила там есть но они достаточно примитивные грубо говоря там в новой версии PHP позволено ставить запятую в конце Там списка аргументов Да вот это можно сделать фиксер перевести на основного фича он не поможет Это всё связано с тем что такие простые код Style фиксеры работ представляет наш Исходный код в виде последовательности токенов ректор же работать с абстрактной синтаксическим деревом и заметьте Да например если я захочу после знака равно поставить пробел стоит он если его там нету да мне это очень легко сделать когда у меня всё в виде последовательности токенов А у ректора удобней работать самой логикой приложения и не отвлекаться на сам ход Да и сразу обрисуем где у нас вообще Вектор находится в системе координат Томаш создатель ректора привел очень хорошую классификацию всех инструментов он разделил их на те которые репортят проблемы и те которые фиксит а также те которые занимаются код стайлом и логикой так Вот ректор занимается фиксом проблем логики так вернемся к нашему сравнению Да когда я выбираю между несколькими инструментами Я в первую очередь смотрю насколько они популярны например гитхабе да И тут мы видим что Fable вот сейчас видим что Fable очень непопулярно это Прям вообще какой-то аутсайдер здесь сразу у него есть звезд мало установок и активность слабая Чего не скажешь о ректоре своего мать они прям идут впритык но у ректора что и звезд больше а активность там вообще ежедневная несколько релизов в месяц а также какой плюс я хочу выделить ректор который здесь не написал это то что у него достаточно маленький ищу проблем которые закидывают туда сообщество и они очень быстро фиксится это очень хорошо продукт активно явно развивается и очень хорошо поддерживается дальше Конечно нельзя сравнить только популярности я решил сравнить по возможностям и выбрал такую возможность как переход на печке 8 я думаю самый актуальное сейчас я выписал все фичи пи-8 столбцы и начал сравнивать вот fablemat как видите не покрывает половина фича на половину фич пи-8 они вас не переведут Ну точнее Тут не все фичи тут возможности лучше назвать Чего не скажешь о ректре он покрывает почти все возможности кроме ну сейв оператора не знаю почему Ну вот так повелось грубо говоря ректора обходит и по популярности и по возможности Да я сравнил их только по php8 у ректора начинается правило начинает PHP 5-3 и Ну там какой-то слева мат это вообще у него даже таких правила нет И у фейбала тем более короче он явно на голову обходит другие инструменты теперь вкратце реакторе его разработал Том Он был у нас на конференции PHP Rush в 2019 году Где в интерактивном режиме показал как ректор улучшает качество нашего кода я в таком интерактивном режиме не могу вам показать поэтому Посмотрите Его доклад если увлечьтесь а у ректора есть неплохая документация также что очень круто у ректора есть своя книга том что он написал вместе с забыл второго автора Ладно и также ведёт свой как личной блок где рассказывает проектор так и блок ректора Да тоже Там постоянно упоминается какие-то новые Хмм практики новые директора тоже очень интересно за этим следить если вкратце говорить как работает ректор и это такая обёртка на PHP которая использует PHP для анализа типов ректор имеет более 400 правил рефакторинга это прям очень дофига правила рефакторинга это такая единица рефакторинга тавтология Какая которая меняет какую-то вода например здесь вот ужесточается типизация Но 400 проры факторов естественно сложно было бы добавлять наш конфиг поэтому для этого существует наборы правил которые объединяют схожие по смыслу правила например вот набор правил декларейшн которые улучшает строгую типизацию в нашем городе я разделяю все правила в ректоре на три категории это правило апгрейда даунгрейда когда мы хотим например перейти на новую версию PHP либо наших фреймворков либо например PHP юниты есть следующее правило это качество категория правил это качество кода это такие правила не как опытный программист они оптимизируют логику такую точечную логику где-то удаляют мертвый код улучшают типизацию местами короче очень полезный набор правил вот этот набор вот эти наборы я применяю своих проектах очень рекомендую использовать и третий - это настраиваемые правила просто так вы их вряд ли будете использовать э в обычных проектах Но э-э зачем они нужны я расскажу попозже чтобы понимали очень классная кстати категория правил подытожим ректор лучший инструмент для апгрейда кода используем вообще все я все проверил доверитесь мне и конечно же ректор нужен нам для логического рефакторинга не код ставил X простого а именно для логического погнали дальше ректор на максималках сейчас я чуть-чуть пивну в общем код рефакторе это легко Да вот мы сейчас убедились ректор это делает вообще как щелкнуть пальцами но мы обновляем чаще всего не только код нам нужно еще обновлять наши пакеты В наших проектах и вот тут конечно у нас чаще всего даже больше сложностей возникает расскажу историю у меня на поддержке находился один банда писался он на начальных стадиях маркетинге архитектуры вот в какой-то момент он стал достаточно популярно у нас маркетинге и стал использоваться в куче проектов из-за чего требовал много доработок и чем больше этих доработок становилось тем сложнее было его дорабатывать во-первых Да и вообще с ним работать об этом там все Хорошо сказано Так вот я прошу первый выкаты становится для других команд они постоянно что-то не так там делали я такой Боже мой причем Я хорошо описал очень жгловок И я даже провел аналогичное обновление То есть у меня был прям пуры квесты я проводил аналогичное обновление этого банду все бессмысленно Люди сразу спотыкались я тогда заинтересовался как этот процесс можно упростить Ну явно что-то должно быть и выделил следующие проблемы со стороны пользователя который обновляет наши пакеты Да это всегда надо изучить конечно очень жглох да Перед обновлением чтобы проанализировать сколько вообще работ надо проводить дальше нам надо это всё поправить какие-то новые требования внести и конечно же в результате мы всё равно на что-то на что-то воткнёмся и будем дебажить со стороны мейнтейнера нужна поддержка обратной совместимости это может показаться фигня какая-то но для тренеров это очень неудобный момент растягивание выхода мажорных релизов нельзя каждую версию делать мажорной Там выпиливать постоянно пользователи просто с ума сойдут каждый раз обновлять и конечно же приходится ещё тратить время на всякие глупые вопросы иногда конечно и не глупые Вот и я решил обратиться к опыту обновления пакетов опыта обновления симфония проектов симфония проекта если отбросить все всякие нюансы разных версий в принципе можно выделить три важных этапа Сначала мы обновляем наш проект с помощью симфонифлекса с помощью рецептов всем фрефлекс обновляем структуру конфиги индекс печки терного печки следующим этапом мы уже освежаем наш Исходный код то есть мы с помощью ректора и набора правил симфониловался лист а обновляем наш код адаптируем его под новую версию Symphony и последний этап мы уже непосредственно в этот готовый проект накатываем новые симфонии банды вот меня конечно здесь интересует именно второй этап как это так ректор адаптирует наш код что это за фантастика и я решил попробовать их тоже написать только загвоздка такая что симфонид вот эти наборы правил они хранятся в отдельном проекте я такую роскошь себе позволить не могу и поэтому размещаю их прям в бандре Смотри здесь Папка учился ректор внутри два важных две важных конфиг которые хранит сами наборы для перехода на эти новые версии и класть константами там сейчас был вот он так вот да выглядит он так то есть здесь Константа который ссылается на эти наборы правил это такой ректора вы его видели ранее Да но здесь есть только один нюанс от меня здесь есть Константа который всегда ссылается на последнюю версию нашего банда пакета вот зачем она нужна Я объясню потом сами наборы правил Да сам конфликт по переходу на новую версию на использование новую версию новой версии пакета выглядит следующим образом предположим Мы в пакете взяли какие-то сервисы переместили в другое место да что ж такое-то здесь Блин а вот мы переместили в какой-то другое место То есть у нас изменился на inspace а проект проекте Да у нас по-прежнему старый namespace используется для этого мы тогда берем правило ренеем на Space rector и в самом проекте когда мы выполним эти наборы правил старый Space заменится на новые то же самое можно сделать с методами Да не нравится мне название методов переновых на новых удалился какой-то интерфейс из логики тоже удаляемого везде имплементацию в проекте и так далее вот можно переименовывать удалять можно проводить разные трансформацию это летом менять использование одного сервиса на другой там менять аргументы местами и так далее куча возможностей вообще настраиваемые правила вот та третья категория это прямо вообще очень крутая сейчас я считаю ректора о которой почему-то очень мало говорится Но конечно же мы всё равно упрёмся в некую стену возможностей потому что вот лично я сталкивался с тем что мне нужны были правила которых в реальности ты и не было всё равно к сожалению и когда таковы с таким сталкиваетесь ректор позволяет очень легко писать свои правила рефакторинга Да но сначала надо понять как работает он да Ну так быстренько на пальцах расскажу сначала вас фарсится код в абстрактно синтаксическое дерево как это ранее я упоминал дальше мы проходимся по каждому узлу например Мы хотим найти какую-то строку Да мы хотим строковую Константа поменять на константу класс ищем ее как только мы ее находим мы обрабатываем её и в результате обработки мы можем вернуть Ну типа мы всё равно не хотим её менять либо вернуть нот э объект класса нот Что означает что мы её изменили сам интерфейс выглядит следующим образом то есть тут два метода Get No types простой который проверяет тип узла и рефактор который делает все остальную работу по изменению узла лучше конечно отслеживаться от абстракт-директора Точнее не лучше а нужно потому что там куча вспомогательных сервисов Все равно все вручную не напишите Да и какой алгоритм вообще почти что 90 процентов правил ректора алгоритм одинаковый предположим вы нашли узел string Да дальше когда вы его обрабатываете вы сначала будете его скипать типа ну он там не подходит нам в контексте значение он не то хранит и так далее и только в самом конце вы проводите с ним какой-то преобразование в данном случае например заменяется на константу класса вот так свои правила Мы храним рядом в СССР рядом с константами тоже и для них Кстати у ректора можно еще удобно писать Unit тесты у ректора есть своя обертка надписью юнитов который позволяет очень удобно писать вот и Значит со стороны мои тренера чек-лист теперь релиза пакет у нас такой мы провели никакие изменения в проекте дальше написали набор правил для перехода на эту новую версию и делаем релиз нашего пакета со стороны пользователя мангла пакета Ну или банг неважно Я просто здесь банда У меня написано Мы сначала обновляем этот бандл добавляем правила для перехода на эту версию в конфиг ректора и запускаем ректор чтобы он адаптировал код под эту новую версию три шага но этот этот процесс можно еще сильнее оптимизировать для этого мы используем композитор скрипт и подписываемся на события обновления Ну некого пакета мы впишем свой Event handler в котором следующая логика первым делом мы проверяем что обновился именно наш пакет далее Это такая интерактивная часть дающая пользователю Ну такую возможности по хочешь чтобы я автоматически Апгрейд на твой код Ну и не все люди любят когда это все происходит автоматически поэтому я добавил это возможность и самом конце мы проводим рефакторинг только используя не общий конфликтора а специальный в котором описано та одна Константа которую я до этого вам повесил это ружьё на стену Да которое всегда нас переводит на последнюю версию нашего пакета наш код на последнюю версию Вот и таким образом у нас теперь имеется всего лишь одна про команда для всего процесса перехода на новую версию пакета То есть она одновременно и обновляет пакет и обновляет адаптирует код нашего проекта под эту версию пакета Вот и таким образом мы имеем следующее преимущество для пользователя не нужно погружаться в детали релиза то есть не надо изучать какие-то интерфейсы сервисы константы изменились вот эту скукоту у нас как бы своих проблем хватает достаточно далее ускоряется переход на новую версию за счет автоматизации со стороны тренеров это мы можем позволить себе более радикальные правки потому что все равно процесс перехода автоматизирован какая разница мало их или много также это снижает необходимость обеспечивать обратную совместимость Но это всё зависит от популярности вашего пакета конечно же и меньше работать комьюнити потому что комьюнити будет вам писать только по поводу того что у них там бака например обнаружили а не потому что они что-то не так обновили все четвертая часть она будет небольшой архитектурный рефакторинг звучит круто но на деле не так все гораздо просто иногда когда проекте отсутствует какая-то четкая стандартизация структура да или инструмент deeptruck который советую кстати тоже использовать а все превращается вот в такое блин можно говнить короче То есть непонятно куда что вообще вот я хочу написать Новый сервис и куда мне его пихать тут чертить что вообще происходит А хочется чтобы выглядел например вот так да то есть тут я просто люблю слоеное архитектуры вот здесь я четко понимаю куда мне что рассовывать вот но какая проблема Да пока я буду адаптировать свой проект под такую структуру в него будут вноситься изменения катиться хоть Фиксы и пока мы неделю предположим рефакторе потом мерзжем Мастер и вот сталкивался вот с такой хренью Да когда у нас куча конфликтов и я просто ненавижу умер конфликты потому что это Надо разбираться что там человек на изменял в итоге мы что имеем у нас либо межконты либо нам надо стопорнуть всю команду сказать Этот проект не трогаем вот неделю блин ребят Я сейчас быстренько всё это сделаю Но так чаще всего нельзя конечно делать и сюрприз нам тут опять поможет ректор Да мы с помощью прайм-ректора описываем что и куда хотим переместить что переименовать А что просто удалить этот мусор какой-нибудь вообще который ни разу не использовался это очень похоже на то как описывались правила для перехода на новую версию пакета То есть тут опять-таки это дрянные на Space rector используется ремейк класс ректор те самые настраиваемые правила которых я говорил ранее но в ректоре есть одно ограничение он не меняет физическое местоположение файлов для этого нам потребуется Ну точнее Я использовал Чего угодно можете использовать если с таким столкнётесь я использую эрсинг и описал последовательность этих команд в отдельном конфиге Это что-то вроде make-файла если пользователь Ну Я использовал таз вот и это все отлаживаю и наступает день рефактринга я пообещаю команду Так ребят сегодня не трогаем проект Я сегодня там все перепрошу подтягиваю последней правки из Мастера Запускай свою команду которая проводит автоматическая трансформация старая старой структуры на новую проверяю эту работу да что все окей и в этот же день релизу на пруд вот в итоге у меня сокращается время при котором команда не может трогать проект до одного дня мы можем спокойно откатывать эти правки если что-то пошло не так ну Бог с ними господи Все прошло автоматически не получилось не получилось завтра попробую также качество и надежность потому что это все три фактора ректор я мог например где-то пропустить какие-то и мы можем использовать этого аналогичном проекте потому что вот у меня как раз было два таких засренных проекта где я потом это всё запустил Всё короче сейчас подведем итоги так итоги ректор отлично подходит для апгрейда кода ребят Ну это все это Маст хэв уже надо использовать хотите перейти на новую версию точнее использовать возможности новых версий Используйте ректор не делайте это руками также ректор служит как дополнительный может служить как дополнительная анализатор фиксер качество кода это очень классная возможность конкретно про качество кода Я имею ввиду я вам показывал тогда наборы правил они действительно стандартизируют логику вашего кода вам будет легче просто его читать даже если это кот Чужой и то ради чего я ведь этот доклад затеял это то что ректор действительно может упростить процесс обновления пакетов Я очень надеюсь что моим тренерам понравится Это все и мы будем чаще стараться это использовать и больше заботиться о наших пользователях которые обновляет и используют наши пакеты Да и особо кейс который было Наверное у меня ну такой редко может встречаться Я не знаю это конечно же он может помочь вам при архитектурном рефакторинге Но короче если столкнетесь Используйте вот у меня вообще все круто вышло такая нестандартное использование ректора Вот это мой крутой кот так так так Да в целом хочу сказать что PHP симфония Да и многие другие пакеты они будут все равно развиваться будто выходить новые версии новые возможности но и с ними будут появляться новые проблемы для решения этих проблем мы будем вырабатывать некие такие практики Вот например Это заменить на это да а сами эти практики будем уже автоматизировать с помощью таких инструментов автоматического рефакторинга как ректор может и другие какие-то появятся например и чем больше таких проблем Мы покроем автоматическими рефакторингом тем проще мы будем избавляться от Legacy и тем больше времени мы будем уделять фичам развитию наших проектов и двигаться в будущее Вот спасибо за то что меня прослушали Спасибо обязательно если появится вопросы напишите мне либо на gmail либо в телегу и я еще подготовил приложение к докладу где например кроме полезных ресурсов есть еще два инструмента которые вы можете использовать Если захотите писать свои правила рефакторинга например ну и ссылка на презентацию Конечно если хотите найти какую-нибудь маму и поугорать побольше всё так вопрос вот этот Саша я не знаю курс или нет но мы выбираем твоими руками автор лучшего вопроса поэтому пожалуйста внимательно слушай и запоминай вопрос чтобы потом выбрать потому что зачастую спикер забывает какие были вопросы поэтому будьте внимательны поднимайте руки задавайте вопросы Добрый день спасибо за доклад очень полезно было Вот как-то у меня было Дикое желание использовать ректор Вот Но у меня не получилось потому что у нас был большой монолитный проект то есть множество внутренней библиотек и у нас везде использовался PHP Стан и Фан и у ректора есть общей зависимости библиотеками у меня было просто множество конфликтов я там кое-как там в отдельном докер контейнере запустил ректор вот как вы с такой проблемой справлялись тебе главное важно чтобы у тебя ректора печь постоянно шли прямо рядом то есть ты обновляешь ректор или затягиваешь это единственное требование кстати ректора То есть он больше нет никаких пакетов не зависит По сути это больше связано с тем что ректор анализирует еще конфликт печки постоянно поэтому версия лучше чтобы у них не отличались а Конкретно как у тебя обойти Ну вот стараться обновить PHP и это проблему либо Да попробовать запустить это в отдельном контейнере как-то Но я это не пробовал то есть я в первую очередь Да ну как бы я лучше обновлю печь постоянно это мне дешевле будет Вот и не будут Спасибо так есть еще вопросы так вот еще две руки Александр Спасибо за доклад меня наверное два маленьких вопроса Первый вопрос вот она на слайдах упомянул что количество строк сократилось а производительность не упала Потом была оптимизировали что-то там Я где-то показывал продак там когда перешел там процентов 5 10 такая фигня вообще ну для нашего сервиса Фигня короче грубо говоря повысилась настолько что сложно понять это она точно повысилась просто трафик например такого Ну и вторая часть вопроса Я немножко Паранойя Вот вы это всё в автоматическом режиме потом сравниваете и так далее не сопоставимо ли иногда с ручным оптимизацией кода с ручной настолько слепо доверяете ректору смотри смотрите да Ну не прям слепо Первое первые несколько месяцев использования все прям проверял то есть досконально прямо смотрел в гите сравнивал что он не ну не в детей А вот как это да сравнивал что у меня поменялось сейчас я уже как-то больше отпустил и Ну наверное больше доверять стал это как знаете вот когда появился PHP css-фиксер Да это тоже тут Нифига себе как такой вообще возможно Да я точно могу ему довериться потом уже я даже не обращаю внимание что у меня там три фактора вообще пофиг то же самое с ректором потихоньку успокаиваешься как-то и все но согласен в проектах которого первый раз затаскивать директор он вам может там натворить такого что ой-ой-ой Поэтому лучше да наверное первый прогон обязательно проверьте всё там Убедитесь что м-м всё более-менее и вторые прогоны они уже будут такие на большем доверии Но конечно да какие-то первые месяцы вы будете не доверять ему Я думаю просто страшно поймать ту ошибку которую ты Нашёлся самый первый Кстати у меня были такие случаи когда я э прямо сталкивался с какой-то ошибкой э то есть в процессе директором падал с пятисотой И я такой Блин что делать такой надо изюм короче создать э лезу ебаться похожа уже ещё есть уже это плохих сили и я обновляю ректор и всё заработало то есть там настолько оперативность всё фиксят что я к сожалению даже в свой вклад не успеваю внести очень обидно А еще был даже пример такой кастомное правило своё написал где-то примерно в июне или в июле который там вот как раз я его здесь упомянул строковые штуки менять на константы блин пацанов в августе появилась А я даже его не успел закинуть какого Ну вообще пакет ректор короче очень обидно но это здорово Это здорово Привет Спасибо за толку лад Скажи пожалуйста тут вопрос даже не по ректору а по рефакторе архитектуры я его заметил у тебя на слайдах было по папочке где-то все раскидал да отдельно миграции перекладывать миграции что-то перенес это специально сделал потому что в новой структуре симфонии рекомендуется их размещать мигрейшен это не страшно потому что у нас в таблицах миграции хранятся не полны а лишь версия и это мне позволило очень легко перекинуть Но если там были на свейса Мне бы сначала конечно пришлось бы предварительно работать до этого приобрести Да последовательность сохраняется последовательно сохранилось нормально в любом случае я же это все прогоняю да И когда вы грубо говоря есть иммиграция не задаются никакие Хотя нет Да они бы и не создавались Да очень сложно отловить эту ошибку было бы да если что-то с миграциями пошла не так согласен но у меня все закончилось счастливым концом так еще вопросы Спасибо большое за доклад такой вопрос ты начинал как бы с примера что воспользовался на проекте где там легасе 73,29 тысяч строк Что делать если в проекте это когда в одном файле 29 тысяч строк потому что проверить надо а вот есть какие-нибудь примеры такие жизненные На каком например граница покрытие ты можешь довериться ректору Ты же должен быть уверен что он не убил особенно если мы говорим семерки на 8 мажорной версии смена Ну я вот да как ранее говорил я доверюсь доверяю ректору после первого прогона Вот то есть он не первый раз все три факториал после Я уже на него не обращаю внимание что он там меняет Ну смысле обращаю конечно Ну вот замечаю что вот здесь изменим скейт файлы он там что-то изменил но прям сильно не проверяет момент но да вот то что сказал количеством строк кодов или Ну блин такой код тут как бы не рефакторинг корректором нужен тут не знаю помощь врачей код Нет на самом деле мы просто запускали мы на восьмёрку с помощью него перешли Но вот как бы доверяешь уже ему сильно Можно ли так сказать что ты настолько ему доверять что пофигу можно уже сначала покрыть тестами у нас яда может еще так сильно доверяю потому что у нас во-первых стат анализ выкручен очень сильно Я упоминал ей на 100 написал он используется плюс то у нас Skoda section хорошее покрытие и там всякие deept-траки ну короче у нас всё столько сияешь что там мышь не пукнет просто просто так поэтому ректор Я очень сильно доверяю всё в таких проектов но в Legacy Да конечно пока мы это сильно не лучше кот Да как-то его не раскидаешь там не упростишь э-э то есть там да то что говорил это сначала нужно провести прямо архитектурный рефлекторы скорее всего какой-то и в процессе этого архитектурного рефакторинга какого-то уже будет совсем другой И вот этот другой код и надо рефакторить Вот А этот А тут просто куда-то скинуть корзину архивировать этот репозиторий не использовать а конфиг изменился примерно в феврале то есть до этого было немножко другой и у ректора было правило для перехода на новую версию rect Да можно вообще войти еще дальше так еще есть вопросы вопросов больше нет Всем спасибо Саша Да мне надо подарок лучший Наверное я дам вот этому первому парню который задал вопрос он Во первых во первых тут ожидал раньше всех пришел он явно прям это это болело этим от души отрываю Окей так и у нас еще для тебя есть презент от организаторов за твой доклад Спасибо тебе большое подавайся еще выступая еще И вам спасибо всем У нас небольшой перерыв и мы скоро продолжим Спасибо"
}