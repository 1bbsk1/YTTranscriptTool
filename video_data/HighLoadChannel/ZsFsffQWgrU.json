{
  "video_id": "ZsFsffQWgrU",
  "channel": "HighLoadChannel",
  "title": "Techtalk с Никитой Гордиенко (Дойчетелеком)",
  "views": 153,
  "duration": 617,
  "published": "2022-03-21T13:58:00-07:00",
  "text": "всем доброго время суток это sant high low 2021 санкт-петербург мы находимся в всегда из чили ком и я сегодня поговорю с никитой гордиенко протоках у них работает вертикальные под скалирования никита привет привет антон противитесь товарищем жилось на область давай начнем с самого простого русского чем ты занимаешься вообще я те все капс работаю соответственно devops инженером где-то уже около пяти лет вот последние полтора года стал заниматься автоматизации процессов связанных именно с повышением сисек верности до поставляемого по разрабатываемого по ну и в целом в принципе инфраструктуры на которой это все тестируется и разворачивается и как ты занимаюсь безопасности так понял пришел к тому чтобы заниматься оптимизацией да тут такой интересный момент учитывая то что в принципе будущий devops инженером я занимаюсь и разворачиванием инфраструктуры да как таковой мы описываем инфраструктуру виде кода разворачиваем ее по необходимости у нас в принципе по большому счету каждое тестовое окружении каждая для команды ли какой-то или там для тестов да а это отдельный класс app в котором изолирована все происходит натуральная три поради на тестирование когда там используется партнерской системы там несколько штук одновременно допустим да и все это как бы разворачивается и так или иначе разворачивая инфраструктуру начинаешь задумываться ресурсах на которой она потребляет чем больше ты этого всего развернул начинает возникать вопрос как бы а кто за это платит как бы и надо бы и на самом деле экономить может быть даже до где-то и одним горизонтальным сканированием нот для наших кластеров мы решили не останавливаться ну да горизонтально сканер не как как-то не подразумевает собой экономию ресурсов мы поднимаем еще одну молодую но до стоит денег поэтому да и ok таким образом ты так или иначе случайно или не случайно узнал про вертикальное про скалирование да все правильно то есть это такое суть в том что как бы горизонтально коды сканируются увеличивая количество кодов время в позе то есть количество контейнеров но было ничего из глава была одна пода начала надо нагружаться появилась точно такая же на другой ноги соответственно съесть ноды есть коды так вот мы помимо как бы и и получается какая история если у нас есть ноты допустим 3 3 ноты и мы допустим нам нужно увеличивать постоянно объем ну нагрузка нагрузка растет у нас увеличивается допустим количество кодов в какой-то момент но до новая за праве жениться горизонтальное скалирование not not да да но при этом если мы вертикально настроим нормальное скалирование ладно бы потап айподов тогда мы можем сэкономить ресурсы которые жрут а на ноги и может быть нам новую ноту праве женить не надо будет то есть идея в том идея в том что мы как бы эффективнее используем ресурсы ноты которые уже есть и может быть не как бы три гирим заранее создание новой моды то есть ну да на пол понял идея в том чтобы более эффективно использовать те ресурсы которые уже сейчас есть который еще не за праве женились горизонтально в скалирование горизонтальном ноды то есть каждый ресурс и каждой анода используется более эффективно за счет того что под и начинают как бы горизонтально заняться рвала снятся им отсюда задай они как бы сжимается забивают и и конкретно всю полностью в этом суть мы как бы оркестр oem имеющиеся ресурсы более гибким и чем правильно то есть вместо того чтобы добавлять ресурсы мы пытаемся здесь как-то но оптимизировать и активизировать именно оптимизировать существующее уже выделенные деньги да и как бы экономите деньги которые как бы пробежаться с каждым разом заново да то есть мы грубо говоря не не делает горизонтального скалирования not преждевременно да мы как бы избегаем эту ситуацию фишка в чем что вот продакшене например да у нас как бы есть такой если есть несколько режимов работы этого virtual vertical под автострада у ним он может как бы сам за нас предпринимать решение типа я увидел что этот процент проседает я ему поменяю как бы request и лимиты и перезапущу его при этом он как бы не за аффекте сервис это просто как бы диплом новый дипломе новая версия дипломе то этого кода кубер notice по-своему и 5 спокойно это обработает как новый deployment как бы все это происходит прозрачно просто новый который дипломе произойдет уже произойдет с измененными ресурсами но это вроде как бы не проката на поэтому это такой момент его как можно не упоминать но есть второй режим работы где он занимается рекомендаций ты оставишь он такой смотрит на твои ноги смотрит на твои все коды и потом тебе выдают нормально такой отчет слушай как бы у тебя здесь прописаны request и и лимиты вот такие но на самом деле как бы как показала моя практика моего анализа за последнюю неделю как бы вот этих ребят как бы 50 процентов просто ну простаивала все это время а ты смотришь блин так у меня за эту неделю был там я не знаю какой нибудь там не знаю акция как они продажи там или еще чего неделю до у меня был на плод наплыв там пользователи да и соответственно как бы значки они реально простаивали значит я могу это сэкономить а может быть и одну ноту вообще убрать тогда лишнюю да то есть как бы экономия с другой стороны как бы у меня девайс использование ресурсов которые уже есть как это работает работает это принципе просто мы диплом себе в кластер вот этот вот выпей оператор до который висит там и собственно смотря метрики кубер найти со создает нам кастомные ресурсы которые представляют себя репорты они содержат информацию о кодах которые были найдены каждый report эта информация об аде и ресурсах которые него выделены которые являются для него лимит ними и которые нам теперь порекомендовал изменить на то есть что мы думаем можно добавить и или убавить то есть он работает в обе стороны а он может нам сказать что это не эффективно давайте сделаем поменьше ему ресурсов или можно сказать наоборот в принципе давай попробуем увеличить и он это сделать если мы дадим ему право теперь он получает занимаемся чем первым он анализирует нагрузку до и дает рекомендации по дружище так мало так дальше сможем нормально так сэкономить до или наоборот нам надо сейчас расширяться в этом месте это может сделать он может и наоборот работать он может работать в режиме как ты описываешь то есть он может увидеть так у этого приложения всегда 98 процентов дома многовато многовато да и как бы зачем ну типа почему бы не дать ему больше если у якобы собственно за это ответственны он попробую дать ему еще больше и он потом уже посмотрит а я дал ему допустим еще 50 процентов ты сам как бы контролируешь какие вот эти вот как-то отношения до которыми он увеличивать / и вот эти вот ты можешь сам контролировать и когда его ногам конфигурируем и соответственно ты ему он капусту 50 процентов те прибавил и у тебя получается что он начинает работать уже с новыми вот этими ресурсами которые мы выделим он за ним продолжает наблюдать окей из этих 50 получилось так что он допустим 30 уже не использует он там через какое-то время говорит нам ну я как бы много ему дал по твоим как бы первым отношением друг а я у него эти тридцаточку эту тридцаточку может кому другому добавлю но и все каждая кажется уберу происходит таким путем он видит причину он видит ситуацию в которого может что-то получше сделала лучше сделаны лагает тебе типа не китая вот смотри тут можно визир ты можешь просто кнопку ок группу вера и анти в самую суде вашим пишите что он собирается сделать это один из режимов работы до когда он не занимается рекомендательной работать до но он может и взять ответственность на себя интересно что допустим из гугла допустим и сюда люди которые занимаются его как сказать и разработка и тестирование до они как бы у них нет тоже кейса чтобы они использовали это в продакшене нас нет такого что вот google сам который по идее не относится напрямую как бы к разработке куба да и многих вещей которые сопряжены как бы с ним до вокруг они как бы нет информации о том что не используется то вроде именно давай ему всю власть но они говорят о том что они прекрасно нашли ему применения вот в этом со gg0 да когда они запускают его и он реально говорит им слушайте ну как бы за последний месяц простой 30 процентов по ресурсам которые мы уже оплатили почему бы как бы нам эти 30 процентов взять не начать использовать это действительно работает могу сказать только есть один минус да вот который действительно мы заметили и наверное ребятам которые будут смотреть до ролик было бы наверно узнать интересно потому что стеки технологий разные-разные да и бывает такое что какой-то стык работает хорошо там га отлично с этим справляется там фонд энды какие-то на статике или на джесс все отлично работает но вот джавой конкретно самой с вот этой enterprise до возникли сложности потому что у нее вот этот memory heap который как бы как это сказать да он жадный и он любит как бы съесть все взяли дарить им играть при каждом ударе то есть грубо говоря у нас есть тот который мы изначально за тепло или с java приложений и внутренне и вы дали ему столько то ресурсов сказались там вот этот мой лимит и он как бы взял и весь сразу свой request как бы взял его и съел ну потому что одна продам 3 объема наше объединение гарбер шел вот это джалаль ушел машин она так себя собственно ведет да и вот тут вот как бы именные разработчики репей тоже говорят что но они не рекомендуют использовать его с джаббой потому что это как бы такое поведение как бы она взаимоисключающие да то есть один вроде занимается тем что анализирует как хорошо приложение к как бы съедает ресурсы если не съедает я пас помогу их как бы куда то другое место на уровень а друга парила женька в свою очередь говорить о я съем все что мне дали ну как бы да его тут вот идет это либо надо какой-то точечной работой заниматься по настройке имя java вот это вид шоу машины до смотреть чтобы там она как-то какие-то вещи дано у нас допустим все наши дипломаты они привязаны напрямую к request on the hip съедает все то что ему дали и поэтому здесь вот возникает сложностей эта тема можно обсуждать им жить дальше дальше это можно без конца на тему говорю да какие то может быть нюансы которые я могу там рассказать кому-то да если когда я уверен точки в случай разных там обмена видео про которые мы уже типа могут увидеть в этой штуке что-то опасное или наоборот что-то классное интересное поэтому собственно если у вас есть желание приходите на стенде никита будет вас ждать собственно пообщаемся поговорим я только зайду потому что мне интересно послушать другое мнение на этот счет руки еще такое о чем сейчас не рассказал я ведь самому было интересно но точно такое есть они не говорят об этом интересно послушать спасибо большое всем нас посмотрел я крашу это был никита curding из дочки гиком и мы поговорили про vertical повод отыскали какие-то спасибо и до встречи на хэллоуин"
}