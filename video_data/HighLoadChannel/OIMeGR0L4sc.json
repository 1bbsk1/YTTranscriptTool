{
  "video_id": "OIMeGR0L4sc",
  "channel": "HighLoadChannel",
  "title": "Application Security - ответы на ежедневные вопросы / Сергей Белов (Mail.Ru Group)",
  "views": 1811,
  "duration": 3096,
  "published": "2018-01-16T12:30:42-08:00",
  "text": "продолжаем нашу секцию и биллов обличен security в mail.ru group расскажет нам свой опыт как он делает разработка чуть более безопасны прошу всем привет меня зовут сергей я буквально в паре слов скажу о себе я очень долгое время занимался в такой сфере как фен security у меня была задача общем все разломайте найти большое количество зима стильный способ эксплуатации нытики крутые узи масти и буквально не так давно пора месяцев назад я общался mail.ru group для того чтобы как раз не просто научиться разломать а я перед собой другие задачи задачи так чтобы узи масти не допускались чтобы те ребята которые как я там когда ты искал сначала найти видимости чтобы они какие смогли или по минимуму то есть усложнить процесс и мой доклад он напрямую связан с он связан скорее просто с обзором техника взором вопросов которыми задается разработка и я построил по такой схеме чтобы каждый просто мог взять и что-нибудь из него утащить к себе проект такой план вещей которых ты решил разобрать которые достаточно интересные статьи об этом в интернете или там нет четких ответов и все вот как раз такой засунуть этого доклад первая вещь это авто тесты безопасности не знаю почему про это очень мало внедряют мало использует это очень крутая тема если вы работаете над чем-то большим порталом вообще давайте дату например бывает так что кто есть в проекте есть разработчики поместим лиды есть у и есть авторы херов щеки сейчас бывает так что безопасника вообще нет или если они есть of the city . все равно больше и эти авто тесты они уже чаще всего написаны и покрывают большую часть функционала не если фонтаны бэг-энда ящики лучше знают он порой вообще все же как устроена а задачи безопасника чаще всего когда делают contest in awe защищенности как раз собрать все параметры найти все методы найти где что где 3 делится и соответственно уже там возить давать какие то не ожидаемые данные так далее для приложения и получается что у нас просто простаивает целая такая ферма тестирование безопасности к нас есть авто тесты мы уже тестировали запасы придется тесты и сократить очень большое количество ресурсов и самое главное покрывать очень быстро большие скопы например если у нас есть какие-то тесты как не осуществится устроены отдали данные что to expect отдали данные что ты и вместо там профиля и your name там или нанесенным мы можем давать всякие спецсимволы например и чтим для того которые нас служат триггером для excel или лекции и пытаться их мочить то есть мы берем все стандартные повело диктора сближаться тесты туда спецсимволы если это замачивается нужно смотреть и на каком поправить верстку считаются уже или нет тот же самый способ работает с брендами тестировщик например нужно проверить и может ли он написать сообщение потому открыть что можно сделать безопасности взять тоже автотест заранее взять айдишник сообщение другого пользователя также просто прочитать это круто потому что прям и позволяет просто у нас есть все параметры не вас не вступаю фазе сексом в берты сканером там или were петли долго ищет детьми санджи птица а мы сразу правой весь проект и и такой прям целый к судимости какой дар он очень легко может быть покрыть через автотесты как будто бы все это очень круто да действительно на то что через это тест и можно взять разобраться с ними безопасника сократится временно изучение поможет сразу платить много места которые вы даже не знаю там can функционал в папки в папке в папки в папке авто на тесты на это есть это можно внедрить и в кантине старейшин то есть те же тесты говорится через дженкинс мы берем for комнат репозитории и делаем of the test of security мы также ты можешь встать и проверять с на каждый релиз что там где-нибудь проверку а цель или чего либо еще и еще будет очень сильно круто позволяет если у вас какие-нибудь такие сложные проекты девяностом свой протокол так пусть даже xml эта челиков посетили у вас свой протокол на базе игрушки какой-нибудь частенько в играх типа токовый пеллет и создать также у нас есть весь input и здесь или кого также у весь провозить конечно там это некая панацея но это круто да там то есть мы сможем эти тебе сложно вместе логически узи масти может быть известью биотек мне так не покрываем и можем заблудиться особенно что ему следует метода он использовался и в первое время то что те же и чтим л.с. акции символы у нас есть они были испанцы даются но потом уже острых там и и корректно не танец и поставляет шаблонизатор am то есть получается фолз позиции в такие вещи придется поначалу конечно много разбирать но вот конкретно с эльдарами и susie ma's тиммейта например где например можно брать языка методу на пине передать qq или передать часть cookies это тоже судоустройства очень легко вписывается и в итоге находите мага вещей и самое забавное никто не говорит но в реальности pdf к 1 которая была опубликована по 2006 год мы сейчас школу ходил не работал в 2006 году это уже в pdf ты описалась на васпе и там конкретно есть примеры slim интересно юнитам с различными тестами как это использовать я думаю что здесь принципе особое значение не имеет свечи вопрос это про алевтина расскажи вообще процессоров атаку в один слайд у нас есть какой-то метод например вот по первой ссылке какой-то метод и он обретет профиль и задает какому-то фил дубовая атакующего своем сайте встраивает картинку судимого домена и соответственно для всех пользователей которые открывает картинку автоматически салят скуки и перезаписывается какие-то значения то же самое с постом и вас было какое-то формочка страничке например отправки сообщения такую щи берет от формочку 11 копируют себе некий экшн обратно на тот сайт у земли и вы автоматически согните это очень популярная to canada популярность xss и вообще с ней как будто бы много проблем на самом деле быть не должна как они защищаются формочку за добавляет какой то hidden поля или учи тебе заголовки если у нас там & спа ну и короче собственно таким никто не знает и только пользователей и защиту нас есть но тут начинаются вопросы как генерировать сотен где и храните как сверять как будто бы как разработчикам на не нужно снять ответ у нас есть фреймворк если мыслить фреймворк вей мы используем какой-нибудь zen экспресс длинная джанга мы просто берем и включаем это автоматически соответственно фреймворк в form builder и под начинает поставлять эти поля сверять их тоже нужно не забывать часто бывает так что приходите все свое решение и возникает вопрос как же правильно если генерировать токины где и хранить мура сгенерировали сессию и совершенно нормально если мы не будем хранить все равно где-то отдельно а будем завязывать на сессии например мы будем брать age маг подпись совершенно идеи соответственно при каждом удивило гаути нас будет меняться начинаются вопросы там в том все где хранить есть очень самой очень такой неправильно report на хате рование очень от первых django он хранит в кубках срыв токен и есть report на копирование за него заплатили 150 долларов за то что разработчик хранил в таким в куках это абсурд эта дебильная ситуация ничего страшного хранить в куках но почему-то разработчики поверили что глен кук хранить это плохо хоть аргументов к этому не было то есть целом можно вообще не хранить то проблема как бы особо больше нету сверг 1 тыс перед проверкой а цель таки валидаторов как бы бы все просто но есть уже приложения которые использует метод что можно сделать намного круче особенностью пишите свой фреймворк вы можете брать эту подпись то есть вы можете брать срыв . использовать как подпись подпись действий о человеке пока не используйте фреймворке пока загадка может быть к этому не пошел я уверен что к этому придут и это учителем может закрыть и какие-то узи вместе которые были допущены давайте разберем такую ситуацию нас есть какое-то действие например отравить деньги у нас есть сэндлера иди и ресивер иди и то есть от кого мы отправляем то получает очень легко можем взять эти параметры и воткнуть iv в генерацию срыв токина потому что когда к нам приходит в отправка денег мы знаем эти параметры которые не меняются то есть топну когда мы ему даем верстку нам нужно отдать токен мы можем на базе этих параметров сгенерирует срыв токен по факту подписать эти действия и на плену мы не можем подписать с и раз таки не подпишет сообщение какой-то кастомное которая хочет пользователя приложить например отправить деньги на день рождения мы это зачем не знаем на верстку мы уже можем давать азаров сотен базирует который базируется на этих действиях зачем это делать за тем чтобы например у нас был такой пользователь нельзя было отправлять деньги именно бы клиенте где-то в методе упустили от проверку что ему нельзя имя было принимать деньги соответственно пока мы ему не дали верстку пользователю и примеру там пользователь пытается отправить деньги в пользу организатор для деньги он не знает сверх соке нони подписи для этого действия и соответственно он даже не сможешь скрасить запрос где-то в берпи и попробовать потом перед кучу параметров и потому что ли нет собственно не знает алгоритм генерации статинов в итоге как будто бы мы начинаем два раза проверять действия у нас есть цель который сверяет можно для деньги нет но история начинаем подписывать надо сказать что такой подход он действительно бывали случаи это такой подход он закрывал возвести которые были на бэг-энде но вот именно такие подписи действия не спасли то что пользователь просто не знал какой сыр и в токе для этого действия ученик 3 + даже но среди разных сыров . но как будто бы это небольшая тка плюс-минус следующий момент это скачать файл по ссылке очень часто задача скоро стараюсь сталкиваться разработчики тасс jira появляется дать пользователю файлы по ссылке или делать превью по ссылке это в телеграме вконтакте мы левитина ходе абсолютно везде и то есть и разработчик просто берет он стал дед контент провели урок и собственно и сделали превьюшку там получился этот файл атакующий самые банальные примеры он просто начинает передавать схему файлы читать локальные файлы то есть кот он в реальности работает для урок делает превью скачивается что нужно но начинаются проблемы тоже то может отдаться какой-то не ожидаем лениво url и здесь мы особенно долго есть атака который как раз взрыв она подделывают запросы на сервере и вообще проблема surf это большая головная боль головная боль для любой компании не важно кто это люди любого гиганта потому что такого функционала много и реализовать его безопасно довольно сложно поэтому чтобы передать что там схема правильно что бикини локальной сети чтобы пользователь не мог сделать домен там хотят . com запомните вот 701 электрона действовали дин и тащите файл из локалки а также у нас бывают ситуации что у нас есть у белых айпи адресов которые мы считаем что они наши имена пример разрешаем с них что-то выполнять то есть нужная что это еще нас обращение на сервер в транс зон ограничить перенаправления там-то мы дали например хотят точка ком бла бла бла и там 302 redirect атмосфере что все окей а там 302 redirect и пусть это директор обратно в локалку нужно понять да то есть сколько редиректов поддерживаем если мы у нас произошло redirect а что нужно обратно вернуть вовсе валидацию а сколько директор вообще будем поддерживать женщин порт логично левые партии интер пятый пункт он довольно интересный это такой вектор атаки он здесь среди контейнеров то может быть неизвестно среди разработчиков как делается отдается домен когда хотят точка ком и он указывает на совершенно эпичных не в локальной сети скрип берёт resolve того где идти там бай-бай host name а он действительно у нас не в списке запрещенных и когда и пойти за файлам и происходит 2 рядов потому что частенько там за файлом может лимиты выдержать и приготовленную срезал в на базе операционной системы или даже 2 срезал в пошел после валидации отдается уже песни к локальной сети и такие ситуации тоже нужно проверять самый простой способ это может и все знают но в куру ли можно передать в песне какому хасту конвертится то есть по факту перезаписывать системный dns визового и verizon или печник сохранили его и потому что передали только влево в том числе могут быть проблемы вместе 7 библиотек в качестве теперь ленту же куру критической уязвимости white проблемы со ipv6 конечно это давайте адреса перешли на и грибы 6 фильтр там строй сложнее в общем что с они вообще всем делать да если он нужно как-то сходить безопасно по ссылке мои были такое универсальное приложение вы можете взять библиотеку цель фк урал которая давно не обновляется уже проекта двух-трех лет и сам тоже смотрел review вел там более-менее все проверки сделаны вы можете взять ее кот вдохновиться этим кодом перетащить его к себе и сделайте какой-то некоторый изолированный сервер не в вашей сети не в продакшн api которому будете просто приходить папе я ведь и не мне этот файл и забирать этот файл и вот можно будет считать что более-менее во-первых 1 точка входа вас единая реализация карт разработчика стреляет свою ничего не забудет это будет узи масть в одном месте другое дело что попасть этим сервером проблемы что он зале раваной сети там нужно решать как обновлять его правильно это локальные пакеты со своего но это уже вопрос скорее инфраструктурные они про аптек следующем раз которых вчера смотреть это секретные ключи к сожалению до сих пор эта проблема и не очевидно длинная трубочка в том что в приложении к разрабатываем нас очень многою использовать их и секретных данных это могут быть ключи для подписи сессий это ключ или крипто функции ли не люби меня соли для восстановления пароля для многих других вещей это бывает кстати владимир внешней системы например какой нибудь крашен alytics и чтобы автоматически заводил репорты jiri зашиваюсь кредо jours в общем все все вот эти вещи они живут в коде и если вы там как тим лиды или ревич это кот то есть про сразу выкидывать это в конфиг просто не заживать и вход в коде никаких секретных данных для то есть код может быть и любому разработчику стажёру новичку неважным там человек идет через два месяца через три месяца а из кода быть и пили вас очень долго все секретные ключи ими управляют админы при тепло и на продакшн и кто выносит все в конфиг есть через паппет его петли hear a hero mr такой инструмент который позволяет в том числе по роли данных шифровать этими ключами и решать и уже карета на серваках очень подхода есть они описаны и простое правило не зашивать ничоси это следующий вопрос которым это изначально вообще посчитать какая головная боль когда бизнес приходит и говорит что всякие там промо-сайт и поздравления не знаю святого валентина с вакансиями блоге там или кто-то стартер и непонятные кому сделали это сайт и чтобы они все были общем все эти сайты были на главном доме нет экзампла ком слэш project name логично что мы не можем себя захватить и здесь начинаются просто безопасность гарри так делать нельзя так их кости бизнес говорит она да и что вообще делают хоть утром там же как бы хрена канале и нормально но более меня кто то что там старается делать ставит просто джинкс ставит локейшн project name и просто прокси пасом все проектируют это тоже нехорошо прокси pass the table ну это когда прокси по снова используется до когда это нужно дело действительно брендов и так далее но когда вам просто нужно сходить за проектом это не ок и как же идете нормально безопасно для проектов основа части проекте wear стараются особенно кто-то из нас есть шапка общая вообще сирт шапку и шарф и шапка сверху одно ребро сказать фреймом фреймом там соответственно может быть вообще доме тихо даже пусть будет сортиров неважно что пусть там лут любые уязвимости пусть там будет xss очки customization будет она будет захочется где вообще не в продакшн сети и недвижимости на не влияет на безопасность портала закроем фрейм sandboxie разрешаем а утопну идей шин чтобы из фрейма нельзя было брать паром ты перезаписать locations даже если косовского какой-нибудь массовый fashion через этот фрейм не устроят ну из помощи цис и соответственно уже на конечном ресурсе который мы показываем можно ограничить чтобы не любой ресурс он мог строить во фрейме и такой способ стильно работает и бизнес доволен спасаешь project name и вы довольны там к безопасности и разработчики довольны и очень к стрелять не пришлось самая конечно главная сложность это разработать общую шапку такую по факту кросс проект но это стоит уделить силы встреча простую хочу затронуть он очень популярный и наверное последние года два его скачал верно раз десять это push-уведомление против эсэмэсок по безопасности пищи бизнес как быть веганскую сторону что блин мастерски дорого если маски действительно подорожали пару лет назад очень сильно для операторов и пришли и сказали когда носиком расходы и мы хотим перейти на пуш уведомление приходит безопасный спрашивать можно перейти на пушке этим все рассмотрим проблемы реальные проблемы на сегодняшний день с смс-ками первое это перехвата sms ок это такие ван это когда собственно есть привилегированный доступ атакующий к соседям и они там номер и соответственно redirect от смазки на свои номера и такая так на атаки на инфраструктуру мы как будто бы считаем что не могут быть но это довольно таки для каждого доступные таргетированный перехвата sms это создание такой базовой станции не стоит недорого не знаешь с кем он совершенно легально купить порядка двух тысяч долларов 3000 долларов и приготовьтесь тюменский пытаться рядом как делают там может быть даже всяких спецоперациях находитесь физически этого с целью и надо сказать такие прецеденты были следующая атака на перехват с м с это аверс buffing как это работает многие сервисы когда отправляет нам эсэмэску и пришла зима сколько еще раз ну ка еще раз на 3 1 на 5 раз это просто позвонить это так она очень такая дпн суд зависит очень сильно оператора потому что что делается в общем когда высылаем код 1 2 3 номер жертвы а ему по факту может быть смазки приходит потом мы знаю номер жертве звони мне жертве занимаемому линию и нaдeждy нажимаем этого сервиса позвонить ему на номер у неё номер за не потому что мы с ним разговариваем и звонок падают автоматически в голосовую почту соответственно потом высоком погорели отключились и голосовой почте у него осталось это самарская и что делать такую щий он подменяет номер с которого он звонит это сделать вообще не знаю там можно за буквально 5 долларов в appstore легально приложение лежат просто пальчиком из которых можно менять номер на любой звонил оператору голосовую почту он думает что этот пользователь и мы читаем его код и здесь конечно вот оператор зависит но такая такая сильно проходила года полтора два назад она была на google и на некоторые операторов не в россии малварь то есть любые особенно другие приложения в минске чтобы вытаскивать их это перевыпуск sim карт очень громкие события ну и просто там работа спецслужб то что спицу в принципе легальном потом каких-то дел могут собирать все маски и хоров очень много с push-уведомления my все push-уведомлений у нас проходят сервак разработчика google и apple microsoft девайс это общая схема или рассылки пушей соответственно любые узи мастью google и apple и microsoft или мы считаем что если мы не доверяем вообще инфраструктуре западных компаний не наш вариант для проблемы но в целом ни одного прецедента пока еще не было таких из общеизвестных вторая проблема это может быть пушек перекладываться не вверх-вниз подписки на пуш и как при обычном как правильно делать подписку на пуш и у нас есть приложение вне зала генина там при вводе логина пароля мы передаем push notification найди и соответственно закрепляем с этим устройством если у нас как то это происходит позже там например передается субскрайб там email и пышность вещи найди мы можем подписываться чужие пуше при таком случае соответствовать уже и пуше и это будет тасс перехват проблем бэг-энда и вполне реальный способ возможно перехват через привилегированные приложение на примере кто пользуются умными часами где есть bluetooth о пиаре если вы резонируете как использовать api вы можете получать все пуше общей системы потому что вам это нужно направлять на часы там или куда ты за машину куда-либо еще то есть есть некоторые api который позволяет это делать если так взглянуть-то вот переклад и sms будто бы это проще потому что первые два пункта сквозь и вместе my life некрасов мы считаем что механизм ну блин , механизм да и остается третий способ в реальности такой были меня один и как будто в что мы там принимаем чтоб уж и безопаснее для отправки дав от арки но не совсем в общем был выработан над разными способами и уже использован этих компаниях такой алгоритм когда именно первое подтверждение но приходит псы маски и мы считаем что вот человек был какой-то безопасной зоне не знаю за них не следил и он получился первую связку значит устройство транспорт после этого когда он начинает подписываться подписываться на пуш и дальше мы шлём уже все кадры через push и потому что шанс переходить пушем это немного меньше в пушках если мы шлём код там и не пересказом увезу аленка ваш код подтверждения там 5 налей мы передаём его в пилотку зачем это нужно потому что пилот может получиться кто приложение которое вы открываете внутренности самого пуша но это нибудь визуальный телефон где-то осталось забыть то есть ну что даже типа смотришь на экран код не узнаешь в итоге даже безопаснее ну и уже протестировать еще к быкам запилили и как уши отсылаются и кто и месте ключей на превью ведь как работает на канте меня с ушами следующий момент это внедрение в тега imagemagick а это просто очень популярны многие разработчики используют и действительно такие tool замены которые просто облегчают работу с видео из изображениями и сегодня просто мысль донести что если вы внедрили imagemagick или ffmpeg считаете что любой пользователь может прочитать любой файл на сервере а скорее всего культ команда с и это нужно просто принять принять и никогда не внедрять в продакшене где-то прям вот без какой-либо изоляции эти инструменты и чтобы там сизова подтвердить буквально несколько недель назад был просто замечательный доклад на по хадис про атаки на видео конвертеры год спустя все эти видео конвертеры уже мучают несколько лет и там уязвимости нашлось только вы foger что в целом компании большие они принимают их у него всегда будут узи масти юном накладе например к был раскрыт несудимости который как раз позволяли читать файлы любые на сервере и выполнять любые команды ребята так обошли интернет получили побалуйте 25000 и мне кажется не все собрали так что так imagemagick такие вещи которые нужны если мы внедряем то обязательно мы вносим бокс это докер конечно не у нас не для безопасности но в целом там плюс минус можно его использовать можно строить нормальные правила если linux у нас есть farmer то есть inbox стив комплект так что там не смог сходить в том числе как я рассказал про рф и про обращение к файлам вовне что посадили машина где-то в зале данной сети пусть и это ломает просто с ног до головы в японии вы просто но важных данных там не будет опять для этого всего и у нас учит фпг если мы правильно было собрали из исходников встречали ненужные диму ксеры как и человек нас быть видимости не сработали в общем работаем так что эффект magic это вещь которой постоянными судимости и сейчас попробовать и особенно там прошло как бы пойти поплавать и деньги сейчас если даже найдешь нормальных сервисов где все изолирована р-ция в беге тебе заплатит долларов 200 300 до говорят крупнейший сервис там топ 10 топ 20 алекса потому что никто не хочет платить потому что такси завели равана нет никакого доступа ира справедливо свеча вопрос про управление weather контентом на постоянно что-то плодить и как-то эту статику отдавать и не статику какие-либо файлы первое что вы делаете это вы всегда даёте весь контент с какого-то другого доменное имя второго уровня то есть вас был exemple ком значит вас должен появиться думал домен как simple content from users так делает и мы в mail.ru так делают не так google и facebook вы все можете посмотреть в обращайтесь к файлам с другого домена зачем это сделано это сделано по нескольким причинам что даже если это проблемы нашлись там как-то 3 делится хитрых сосисочки через заставку там или новым каким-то плагином в pdf и что то еще то в принципе без разницы пусть яриться xbox domain там нет куб там нет сессии и do is to shoot steam соответственно и тестировать как там обычно нет никаких индикаторов они могут быть но в целом мне не нужны потому что если у нас есть задача например - менеджеры что-либо такое у нас есть секретные ссылки человека прислали должен быть прямой ссылки на файл то мы можем увидеть о своем бренде токен и сверяем при открытии например просто через год лишь небольшую проверочку на яндексе которая затем логику ну или все-таки использует backend not который прям будет чисто вот взять токина и там плюс по минимуму вопрос про рейд лимиты раньше я сама об этом задумался ну наверно ждет red limit и но в реальности если мы результата свой фреймворк или мы делаем настройку не знаю на gentoo на чем-либо еще очень круто иметь возможно ничуть вызов от я методов например это будет у нас за восстановление пароля это будет вход это бы что-либо еще нужно просто иметь механизм к ограничить какой-нибудь метод очень круто иметь возможность мониторить сколько раз вызывается метод то есть неважно как момент вообще это очень круто потому что мы берем любой метод мы закидывал мониторинг выкатываем дашборд и очень легко мониторинге сейчас пытается поломать пришла какая-то волна новое в этом хакеры что-то решили сломать ваш ресурс и это сразу графиках видно а на эти графики на этот мониторинг очень легко о собственно строй allure админ там по смскам папушин как-либо ещё ну и вообще как бы средь лимитами они должны быть и абсолютные и подтверждения после порога то есть пять попыток неверные должна быть вот капчи и бы ты смотреть на чтобы работала не только в api это для веба но еще чтобы из могил активирует лимит работали везде-везде-везде что нельзя было индии х пойти предлагая просто своим фреймворке или свои разработки это сразу пересматривать и иметь возможность мониторить как раз как вызывается примета посмотреть на этом про это уже немножечко говорил о сегодня мы заказов до этого и наверное том числе песни статьях это обсуждается я простая мысль у нас есть страницы всегда на портале но на проекте которое очень важны это данные аккаунта это привязка карты то восстановления аккаунта и мать и другие вещи и каждый проект равно какие-то дергает аналитики внешне там другие статистике внешние трекеры общем или мы делаем сразу доме какой-нибудь пример аккаунт экзампла ком где мы убираем эту аналитику лишние 5 сервисов или мы пытаемся вылететь по страницам что выглядеть немножечко костыль на но все-таки такой подход он действительно заправилась и не кушаю зима стено заломать иногда проще какой-нибудь трекеры культ смерти аналитику чем ваш портал а потом через неё уже тащить данные понтифика цию вообще когда я добавил этот слайд эту тему я подумал блин сколько всего рассказывает сколько здесь сложности с этой модификации и я выбрал таких просто три интересных моментов про которые не пишется в статьях и не предусмотреть фреймворке хотя стоило бы делать что предлагается как бы что компания уже многие используют большие у вас есть какой-то экзампла ком и у вас есть форма ввода логина пароля в общем случае предлагается что когда человек вводит логин пароль он согните tedx на другой домен на аккаунт к зеркалкам специальный такой домен и соответственно там вызывается метод проверки этих данных если не были валидны это выставляется ни одна кука просто совершенно иди что мы завели чуваку a2 cookies 1 кука это что-то типа супер aus который выставляется только на данном доме с таким-то токина ms security only то можно поставить и общая кука которая уже стоит соответственно сам домен на астры мы работаем зачем это нужно так когда пользователь работать просто экзампла ком он никогда не будет использовать суперкубку супер aus и если у нас что-то пошло не так что юзерам нет а у него изменился браузер там него поменялось кольцо на система то есть по факту как-то увели сессию пользователь каким-либо образом мы не знаем мы просто читаем что у него неизвестная локация у него просто и стекла сессия мы всегда можем redirect обратно на аккаунт замком двери что есть супер кука то есть по факту имя в этом браузере человек вводил свой пароль соответственно мы считаем что такой от роста для у нас зона им и на базе этого можем подтвердить по блин это утру браузер и нужно им обратно сессию соответственно если на сессию вилли вилли только от экзем полком мы его redirect ним у него не будет супер cookies и носитель аккаунт юзера также возникает момент когда проект разрастается что прилетает всякие под проект начал блоге мессенджеры магазины что-либо еще там всякие штуки и здесь возникает следующий момент что когда у нас есть сессия мы хотим сделать так у нас естественно она была только на портале использована может быть вы замечали вспомните личный сайт они вас redirect какой-то а устам или она аккаунт и потом взять вас на портал гораздо взял для того чтобы если угнали в одном месте сессию она не могла например угнались какого-нибудь каких-нибудь блогов а потом пошли в магазин и купили себе там что-нибудь чтобы не могли переиспользовать здесь логика точно такая же что новый портал мы делаем директ на аккаунт экзампла ком там нас есть супер кука на человек водил пароль значит - мы берем текущей сессии поставляем что ты пасхал по что эта сессия да она может использовали этого сервиса а если приходит сервис этого скупо у него не было на бали соответственно нужно его redirect редиректом можно сломаться соответственно в директе нужно предусмотреть просто дирекцию райана этот портал слушать его сказать спасибо утраты вот вопросы то задавайте пожалуйста работает для записи ты говорил о хранение ключей для доступа там ли шифрования в настройках но в этом случае они доступны для системных администраторов как сделать так чтобы системные администраторы не могли плавать баз данных но как нас есть рассказал про m-elle там по факту не зажимается не логин пароль в открытом виде то есть там порвали они зашифровываются ключами которые ты можешь задать другой группе людей давайте получается что из разработчики занесли в конфиг админы которые deployed и люди которые эти ключи чувствуют то есть храни занимает хранение ключей между командой все равно это не схема хаммера и так далее то есть использовать обличило векторы имеют доступ - хеллхаммер нет но в схеме шамира как бы не то чтобы прям нет ну как откуда там ключа как ткал вообще нет ну я ускоритель продажу пункция ну понятно да не было которую когда про всех что вы не зашивает может быть если это сергей спасибо за доклад работает скажи пожалуйста у меня red limit и заинтересовали на твой взгляд это нужно делать наружными средствами или напрягать разработчиков чтобы они именно оставили проверки по вводимым данному то есть сколько раз то там обращались хаббл первые наружными средствами защитник то есть мы чистим обнаружение вторжений уровне приложения не заточены же делать сенсорной разработки точно здравствуйте андрей компания byd works интересный вопрос вот вы говорите о том чтобы можем использовать внешние библиотеки для того чтобы защитить наш проект но сейчас много говорят безопасности о том что внешней политики становятся сложными и сами они могут принести больше проблем чем решить я говорю не использовать внешние то что можно и вдохновиться в коем случае после второе крыло вдохновиться прокурор да как раз прокурора мне там написано прям что им нужно прочитать код вдохновиться и написать свой а вот если конкретно поскольку руб на более сложные задачи то есть если нам нужен функционал и мы не хотим просто его писать тогда вот что делать смотреть на звездочки на гитхабе нет на это конечно один вариантов да то есть но блин таких случаях смотреть открытые швы закрыты были еще связана с этим проектом доходить просто в том числе на самом деле если есть возможность подавать курить и командир чтобы они протестировали и особенно если cristata налезать свой старт анализатор нормально практика когда ты берешь внешнюю библиотеку и отдаешь и просто команде не смотрит так например поступают многие компании уже сейчас а если не security команды но уверен звездочкам просто спасибо здравствуйте заклад вопрос такой вот вы говорили о возможности угнать сессию а речь идет какой то есть серверной компрометации или может быть зависимость их нулевого дня просто не оч понятно каким образом это возможно осуществить да да хороший вопрос как раз про это потому что у нас есть когда мы говорим под пропал проекты часто возникают сложности и когда отделки intel сортиры выписать им свой стиль ключ и как лечились от фиксировать бывает очень много под проектов не использует вес по разным причинам дисней тачки перса ну как бы мы считаем до что-либо может и на сессию здесь уже в принципе priori мы не говорим здесь под сервер скатимся до города кино клиентов ну сессии могут утекать даже из пяти часам соответственно нету 6s за фортели свой сертификат пользователя почему согласился разом заметил он жив и живее всех живых и постоянно хочется идеологии техники как бы обойти например ждет браузера бывает браузерной баги да то есть на подделку именно конкретно этой реализации книга парализации составили конкретно то есть неточность цели the new сном даже которые сейчас есть но они рабочие справлять надо не так чтобы их может использовать все места бывать там с помощью расширений тоже много потому что расширение есть такой очень браузерах большой большая и много больше чем обычно для скрипта через него могут стащить сессию на самом деле когда у тебя очень много много пользователей там миллионы миллиард то все покажу пользуюсь сам общем такой пользователи меня этом dns и вытаскивают зашивают расширением и другие вещи поэтому приходится использовать думать как-то намного большего масштаба хотя конечно портал то не знаю меньше стал колодников наверно проблема такое особое нет физически перс спасибо давайте представим ситуацию что есть экзем пауком есть аккаунт . экзем по ком есть пользователь который поменял какие-то данные ну например перемахнул на самолете в другую страну у него сменился печник локации так далее и на каждой странице этого сайта есть приватная информация то бишь логин пользователя не знаю может быть там сразу считается его телефон не дай бог какой-то статус какой то не знаю там идентификатор карточки лояльности и так далее то есть приватные данные есть всегда вот абсолютно всегда как часто по вашему стоит проверять переди реки человека на аккаунт . экзем пока есть у человека вот меняются данные то бишь я не о том как часто вот сам factory direct а ну понятно и генри используя директор такие критерии спорили нет я не об этом есть у человека что-то поменялось надо redirect всегда ну хорошо поменялся и печник надо соединить их ну замечательно а вот как часто проверять что она принялась проверять все параметры там не знаю cookies user-agent локацию айпишник какие-то секретные ещё штуки вот это нужно проверять по вашему на каждый запрос или же периодичность это можно сделать на каждый запрос и это можно сделать без особой нагрузки на backend для этого как раз когда мы собираем кричали которым мы решили да то есть например первый трек теоретическая то есть последний первые два для примера мы привязываемся hype а мы привязываемся к разрешению браузерах user-agent и каким другим вещам например шрифтом ну то есть по различным открыть юзера от этого всего мы довольно легко и быстро можем просто взять кто-то хэш общей который быстро почитается для нас будем его сверять взгляд это для зачисления процесс сорных ресурсов ничего не стоит то есть грубо говоря все равно нам нужно хранить где-то сессию этой один раз сняли fingerprint для текущей сессии нет я имею ввиду что вся но на каждый запрос пользователя должно быть какое-то хранилища откуда мы с дернем информацию соединить в чем огне где же к развороту чтобы например как с и raw точными можем использовать просто age маг подпись от всех ti параметров ну хорошо могу песни совпало мы не хранили ну вот чтобы сравнить собственно что чем сравнить то есть мы берем объем данных с текущего запроса высчитываем неких ешь потом сравним его с хорошом который не знаком хранится в команда спасибо есть библиотек который вот это все реализует может быть это может быть какие-то статьи может быть хоть кто-нибудь это вообще делает вообще на делают все в корпус работки в большое кто переживает не все делают это и особенно важно чтобы и сильно redirect тела потому что бизнес страдает и что безопасность была потому что бизнес страдает всегда стараюсь бизнес на вот тут про критерии наверное я публично не знаю таких никто так не описывал но может быть даже выдавать эту презентацию но как я уже говорил все что мы можем более мне безболезненно собрать браузер человека с браузера это соответственно библиотека который например детектив облигация замечательно про диану пользователей в режиме инкогнито библиотека называется вот они были неплохие критерии cтрана брала за критерии соответственно разрешение экрана этот user-agent поддержке технологии различных то можно было бы собрать ее против 50 х же не так и делали а не думайте что вот вот как раз вот эти данные ширине экрана еще что-то подобное вот это как я сукна это точно стороны ну да на двери печники будешь ну окей а печник не у гонишь хотя не факт ну тут конечно да там на съездах этого различных эта ситуация когда у пользователя установлены некая некий плагин к браузеру который читает весь трафик может учиться вы делаете так далее всю вы решили что если у человека угонят экзем полкам то у него не угонят все подобен и которые есть у этого экземпляра был по-разному потому что если конечно есть такое расширение которое там имеет просто звездочку внутри тоже кроме для доступа то есть наверное мы таких пользователей а не сможет нормально чистить этим способом действительно но все таки более менее сейчас и в том что при модерации всех расширений она старается чтобы вы запрашивали право так нам нужны и домены и естественно если есть ли бы расширение доктора читает все абсолютно в пользу того что может вызывать команды с вряд ли кого позвать потому что просто пойти в папочку забрать эту куклу там переслать себе полное копирование 40 себе но если вообще такая очень мнение что самом деле такую щеками этим занимается они квалифицированы часто эти слились и безусловно но вот основная масса кто занимается самим таким массовым сбором сейчас такая нищета простой способ и редко когда доходит до такого крутого рокет сайенс а придумывают там как хотите режиме как там крут зафорсить человеку расширением с такими правами как ему доставить незаметно для различных систем защиты природы многие другие вещи злоумышленники себя играли сам дешевый способ продолжить мы с вами сейчас говорим он дороже чем обычный способ которые это дороже чем массово пойти по роутерам поменять ндс и то есть как обычный начал страдать пользователя такой способ в общем всегда цена пользователя то есть насколько он дорого можно подать его сколько бы дорогая такого диска раз там уже сделать так чтобы атаковать пользователю было невыгодно хорошо и наверно еще нубский вопрос предположим всех заразили к чертям вот все вот все полимеры прост если по вашему какая-то методология как почистить своего пользователя вот он к вам ходит там 10 раз в секунду и в какой-то момент вы отправляете ему не за там некий джаз или что-то подобное скидываете мы все cookies скидывать ему там все секреты так далее может быть есть вот здесь какая-то методология как почистить пользователя от всяких зловредов именно почистить или понять что вот ну скорее почистить потому что есть и там есть какая-то xss уязвимость там муке погружается какой-то джесс если у вас single place applications to окей это приложение которое работает чуть ли не годами и клуба гора нужен какой-то антивирус для подобных приложений которые типа такой адрес который вы нас было бы а другие джинсов на самом деле почистил как адрес я поняла системы в таком состоянии что так чувак у тебя что-то плохо давай митя полностью перезагрузим здесь на вопрос о том что мы не можем поменять на лидерскую система но мы точно можем дать таки такие вещи и выдавать предупреждение вардинге человеку то есть по факту мы не можем не знаю земноводных не видит здесь и начинается борьба как бады блоков и отвести сиди блок есть этот блок если вот эти блоки ады блока да то есть ты способен на просто забыть о пользовательской до необычность знаем сзади к нам за сделать тот максимум который поднимется стоимость просто него атаки и например написали дай бог апреля вход для до блока да и чтобы вот как раз то что понять этот момент когда мы за него дальше вступаем ся ну я к тому что если у тебя один раз заразили там не знаю на страницу вконтакте то пока ты эту страницу не закроешь чтобы все время заражён ходишь таких пользователей часто просто не знаю или просто сессии x париться чтобы он там произошел или вводится такое состояние временной блокировки чтобы у него есть эти ник спорится но ее нет я должен подарить про свой номер телефона в плане бизнес и мирские просто ввести номер телефона и потом весь интернет будет знать номер телефона но спасибо за ту пору не можем такой может даже будет вазовский вопросов у нас взгляд сейчас баланс со временем смещается в сторону злоумышленников или все же сторону борьбы с злоумышленниками ну и точно становится тех людей кто защищает их становиться немного больше за точно в плане баланса вид в сторону ушел уже может быть даже больше ну что ж тогда спасибо сергею герман клименко там плачет что-то отнял у нас только аудитории сейчас в это время очень крутой практически доклад спасибо"
}