{
  "video_id": "L-x0tKfZeWA",
  "channel": "HighLoadChannel",
  "title": "K8s Security на разных уровнях абстракции / Александр Сунгуров",
  "views": 97,
  "duration": 2439,
  "published": "2023-10-06T07:23:41-07:00",
  "text": "Всем привет Сегодня мы с вами поговорим о Секьюрити на разных уровнях абстракции Меня зовут Александр пару слов о себе сейчас являюсь архитектором квалификационной безопасности компании extence До этого работал Тинькофф в Яндексе Яндекс деньгах вся моя деятельность в большинстве своем была связана с и коммерц и сервисами которые так или иначе взаимодействуют с платежными данными клиентов существительной информации это доклад будет историей о том как был выстроен в кубернец вы сможете изменить эту архитектуру контроля на те которые вам необходимы где-то может быть усилить и где-то наоборот вы их уменьшите сегодня доклад будет полезен тем кто активно использует cubernets у кого там есть критичные сервисы например или критичные данные клиентов и те кто живете в облаках пожалуйста по qr-коду Вы можете пройти опрос в конце мы разберем результаты и этим на вопросы которые возникли у вас на каждом слайде я озвучу проблему которая возникали у нас и какое решение мы для себя выбирали исходя из проблематики исходя из потребности бизнеса и безопасности поговорим о том как использовать отмечен контроль и Пользуясь поинты внутри архитектуры также говорим о синайзера трассе Где же проходит Тонкая грань между всеобщим доступом и ограничением сегментацией сети разберем с точки зрения безопасности Как можно его использовать обсудим доступы в cubernets как предоставлять для сотрудников и сервисов безопасности среды В конце мы разберем аудитория логирование и рассмотрим пример архитектуры которые вы сможете опять-таки оптимизировать под себя и взять что будет вам полезно в первую очередь необходимо сделать небольшой stepback и подумать о том что безопасность купленейца не заканчивается на самом если мы говорим про премис то это живет все наши серверах с доступами администраторов с обвиняем поэтому очень важно позаботиться про безопасных постов отключить свап и там для того чтобы у нас в сервисы сбора кур дампов не увидели какие-либо секреты все должны приватных сетях И сегментированные если мы говорим про разные по умолчанию все сетевые доступ запрещены если мы говорим про секрет по умолчанию будет полезно как он премис так и в облаках контроль целостных файлов конфигурации для того чтобы администратор не смог что они его поменять конечно же Агента 7 для сборы логов и контроля со стороны автоматизированных контролем менеджмент Куда без него и Аудит Ростов для того чтобы проверять что наши Хосты соответствуют тем параметрам которые мы настроили в купленные существуют дважды Для безопасности механизмов Мишин контроллера который позволяет нам распространять наши требования в рамках политики и таким образом во всех cuberneys Где наши политики распространены мы будем видеть одинаковые с точки зрения безопасности дипломата Это удобнее чем ходить до каждого администратора рассказывать но я не говорю что делать Не нужно конечно нужно но тем не менее мы исключаем человеческий фактор и автоматизируем процесс избегая чрезмерного кодеки выглядит следующим образом любой запрос на изменение проходит авторизацию которая добавляет инжектор например это будут сайдкары или что-то другое что вы хотите изменить дальше навигация схемы и дальше непосредственно то есть мы берем манифест и анализировал с помощью какой-либо системы в качестве такой системы мы выбрали Open policy edgend потому что это решение которое позволяет не только валидировать романифеста губинете Ну также позволяет И валидировать про формы и валидировать изменения на непосредственно хостах представляет из себя бинарник на Гоа который интегрируется в cubernets и здесь мы видим схему того как это работает по сути он смотрит на политики и входные данные он получает структурированные данные на вход манифест проверяет его Согласно нашим политикам и выводит данные о том что же произошло все окей или нет мы выбрали его так как он имеет очень гибкий язык описание того что может быть проверено чем-то напоминающийся плюс большое количество функционала который можно реализовать Да есть и другие например куверны используют более типизированный язык функционалу Сейчас она догоняет и отжимки где-то местами даже обгоняют потому что может проверять подписи контейнера но выбран потому что он еще интегрируется из истил из хостами и можно описывать довольно гибкие проверки за счет его и подобности языка Здесь вы видите пример политики где мы указываем что можно пойти на Пафф юзер с методами пост и Get и соответственно Таким образом мы можем описать любую политику который должен соответствовать полисе так и политика с которой мы приложение таким образом вы сможете добиться что все приложения в будут использовать безопасные конфигурации развертывания для того чтобы функционировал в губернации есть собственные софт гейт Кипер который предоставляет автоматизацию применение политик контроль того чтобы все политики были загружены новые политики загружались и случаи старта все было также позволяет работать для того чтобы получать данные из этих структур здесь на схеме мы видим как это интегрируется То есть у нас все политики хранятся в красном ресурсах на которые смотрят соответственно контроллер Кипер и ресурсы я обычно делятся на две части мы описываем свою политику в конце они написаны исключения для того чтобы например исключить из какой-то политики какой-то сервис например оператору кавки нужен доступ системе для того чтобы записывать на неё данные и поэтому получаем И это тоже очень важно отдельный большой домен про то как оперировать исключением по разным кластерам об этом тоже надо позаботиться здесь мы видим то как выглядит запуск обычного джинса скачанного с обычного истории докер и Джей и он не отвечает большому количеству требований в плане безопасности политик То есть у него использование ротовой файл системы он привилегированный и мы высвечиваем здесь Воронки потому что в данном случае у нас идет только имплементация мы пока еще не блокируем И следовательно если мы запускаем измененный нами то мы получаем диплоид Давайте разберемся как это выглядит здесь очень маленький кусочек политики которые есть по сути Мы берем из вытираем необходимо нами сущность дальше проверяем привилегированные он или нет И в случае если когда-нибудь привилегированный есть возможность высветить сообщение для разработчика оно может быть изменя шаблонизированным и тут рекомендуется использовать ссылку на ваш документацию конфликт для того чтобы разработчик не только увидел сообщение что все плохо но также прошелся по ссылке и понял как это все изменить для того чтобы автоматизировать процесс и уменьшить взаимодействие с командой которая отвечает за безопасность здесь мы видим примерчик манифеста в котором мы дропаемся Согласно тому что прописано нашей политики не используем систему мы используем ритуале вот и это просто пример для того чтобы показать как должен быть изменен стандартный джикс для того чтобы мы имели представление о том как это видеть разработчики со стороны и о том что безопасно Я думаю что вы знаете теперь разберем проблему которая возникает если говорить то раньше все было просто была виртуальная машина была прокси и был над соответственно прокси мы прописываем необходимые домены на которых надо найти прописываем например систему оборудования в интернет и все хорошо если у нас то вы представляете что большое количество входит с одного и того же практически если мы не защищаемся как адресов и получается так что нас нет такой процедуры нужно идти нужно делать Поэтому возникает следующая проблема Как же можно ее решить Да сначала поговорим про Синай это вещи которые позволяют разграничивать сетевой доступ внутри губернация поскольку берется это та же самая архитектура инфраструктура которая есть условно физических серверах поэтому это мы говорим про уровень абстракции представлены Калика силлиумфанер и вы можете выбрать на самом деле любой из них мы выбрали Калик потому что он интегрируется с и умеет оперировать сущностями по сути мы его используем только для сетевого сегментирования то есть мы говорим Какие можно и говорим о том какие именно с прессом можно в Интернет также если мы говорим про отсутствие нашей сети и конфигурирования доступа доменов то Калика умеет также ограничивать и на седьмом уровне куда кому можно ходить Но это Для этого необходимо запускать еще один контейнер который также генерирует нагрузку и с некоторыми сетями с некоторыми натами эта штука не уживается также стоит обратить внимание на то что не все сильные поддерживаются облаками и нужно смотреть именно спецификацию облако Какое сильное ваше облако поддерживает Возможно это будет кастомные если мы говорим например по Google компьютера не случайно во-первых это сервис который упрощает жизнь разработчикам во-вторых это Мэш который позволяет очень много из спирте перевести в формат платформы то есть разработчики освобождаются от многих рутинных действий и получают для себя платформу в виде того что отправить сервис не беспокойся местами Security все за тебя сделает и выбирали потому что комьюнити довольно сильно его используют плюс они переходят сейчас от сайта карликовой прокси на формат прокси что увеличивает количество уменьшает количество Простите ресурсов И следовательно все те же контроль там остаются плюс Это довольно широко используемые широко используемые вещи Вот и конечно Давайте разберемся подробнее что это еще умеет во-первых у него очень интимная поддержка tls и как нтвс такс для других сервисов если говорить кастомные автоматической балансировка большое количество протоколов можно детально смотреть за трафиком что очень важно если мы хотим ставить какие-нибудь ipsky диски внутри кластер каким-либо другими способами собирать трафик плюс у него тоже есть свои политики которых мы разберемся немножко на следующих слайдах вот так это выглядит очень упрощенная схема есть Control plain есть прокси вы прокси к каждому сервису и по сути они контролируют весь трафик если разделяем диплоид сервисов то мы получаем то что мы имеем независим контроль за сетью и разработчиками только своими приложениями работает по довольно банальному принципу подобного типа сервисов как я уже говорил распространяет все политики есть сервис который перехват весь трафик и организует его менеджмент внутри себя но соответственно это избирает перфоманс плюс у нас есть возможность конфигурировать всевозможные политики не только митинг и тому подобные вещи которые полезны уже больше разработки Хотя вот митинг в плане защита от дедовса если говорить про аспекты безопасности то есть его в себе имеет интервал всей который выпускает Energy сертификаты имеет политики аутентификации авторизации политика именования собственно по которой модификации авторизация и выполняется также работает как уже знакомые в Open Police Police Point который позволяет нам диктовать свои политики контролировать их независимо от того как разработчики настраивать свое приложение и снимается разработчиков собственно они маппингов модификации и предоставляет большое количество симметрии которое полезно соку команде бокс на схеме мы здесь видим что у нас есть кастомная игра с игрессы есть как раз таки прокси и controline чем полезны нам игры с тем что мы можем на них организовать МТС доступы каких-то в интернете по домену и пасу и таким образом мы снимаем с разработчиков необходимость указывать в коде предоставляя платформенный доступ это очень просто если у нас инфраструктуры управляет скажем команда или диопс то они могут Это жить и делать среду очень для разработки и при этом безопасным поскольку безопасность парадигметов сможет контролировать эти изменения быть уверенными в том куда какой сервис может сходить с какими параметрами а сама получаем из коробки и не беспокойся Если мы живем скажем в облаках а Пару слов про то что необходимо называть если мы говорим про озеру Траст паблики инфраструкции схема которая здесь расписана я думаю что она наиболее подходит всем то есть мы храним наш корневой сертификат вычисления если у нас его нет Можем просто хранить на отчуждаемом носители с обратной защитой дальше мы выпускаем для каждой среды свой интервью сертификат для того чтобы если что можно среду было отозвать и дальше мы выпускаем intermedia сертификат для каждого кластера который как раз таки будет использоваться и сделать для того чтобы выпускайте уже сертификаты для сервисов коротко о съемке это выглядит так то есть у нас есть Святого интерьера и конечный сервис все Это необходимо для того чтобы получить гравитации какого-либо куска нашей инфраструктуры мы могли это назвать плюс Это позволяет нам следить за тем чтобы retation за тем как мы распространяем секреты и если говорить например о GT то GT есть формат когда мы подписываем ключом но в GPS Мы предоставляем цепочку сертификатов Таким образом мы сможем проверить что коне сервисами действительно права потому что сертификат был выпущен на нашем Сеге как же есть его управлять сертификатами есть поддерживает x509 сертификат распространяется все на инвой и ингрессах и грэсах вот здесь у нас представлена схема о том как это работает собственно сервис генерирует настроение сервиса с помощью генерируется CSR правит и соответственно Public дальше отправляется в сервис Бастион из тела где он подписывается и обратно возвращается сертификат то есть бонус в том что во-первых у нас правит ключ кидает сам конечный сервис и мы генерируем руками разработчиками которые может оставить себе приватные причины машине по незнанию и также мы обеспечиваем rotation сертификатов нативно никому не нужно за этим бегать следить и все происходит Согласно нашим политикам стоимость времени которые мы в нём указали Пару слов про другие бенефиты в плане Секьюрити Почему появились потому что у него есть два варианта модификации и авторизации перевод по сути эта модификация по сертификатам когда оба сервиса модифицируются предоставляя свои сертификаты в которых указан Сиен и ввести мы можем гибко описать какому сервису в какую ручку можно ходить все это сделано для того чтобы Например если есть маркетинговый сервис который выходит достаточно большое количество клиентов мы могли строго описать что одним клиентом можно получить персональные данные другим клиентам можно получать статическую информацию и таким образом мы разграничиваем организуются коннекте это позволяет ходить в сервисы из внеклассного Если не хотите использовать идем наш сервис также это может быть Полезно если у нас есть какие-либо сервисы вендорские которые просто не умеют а ходить в сервисы внутри губернации строго необходимо и поэтому есть тоже такой вариант модификации аутентификация присутствует и мы используем Опа Почему мы используем опыт потому что стандартная модификация представлена на lascripts там можно делать много действий по проверке как раз gvt или сертификата но если мы хотим какое-то расширенный набор действий какого дополнительного функционала то мы используем пользе 1 поэтому поначалу можете не установить для проверки авторизации а использовать встроенную листьев Если вы будете хотеть возможность Вы можете перейти работать по следующему принципу тоже поднимается кору каждый прокси перформансы Есть немного и в когда пользователь приходит к нам со своим GT или сертификатом то запрос перенаправляется полисе полисе должен принять решение пускаемый сотрудника или там сервис или нет вернуть его и после этого его уже сотрудник взаимодействий теперь поговорим о том как предоставить централизованный доступ к губерницу потому что мы же не будем ходить в через последовательно нам нужна какая-то Либо сервис или система для центра реализованной аутентификации и авторизации здесь конечно использовать раньше но наш выбор был в сторону киклока решение которое предоставляет множество вариантов и протоколов в данном случае мы используем эти Коннект и с помощью централизованной аутентификации авторизации в случае если будут какие-либо проблемы с учебные записи сотрудника на английском можете легко отозвать Плюс вы упрощаете себе жизнь тем что у вас есть централизованное место где вы можете посмотреть неиспользуемую учетные записи учетные записи большим количеством прав и просто это упрощает менеджмент собственно та же самая схема и здесь мы видим как раз в данном случае будет ходить для того чтобы проверить Может ли данный сервис получать доступ к Application или же не может Но это в случае как раз таки доступа к кубапе в случае скупопии сам сходит влог продолжим Если вы живете в облаках стоит обратить внимание на интеграцию губернайца и я здесь например рассматривается но также это может быть и в Яндекс облаке и других облаках чем это лучше мы Я в Польше можем описать каком Space из какого кластера можно предоставлять доступ к какому сервису снаружи нашего кластера или же предоставлять доступ администраторам внутрь и случае сервиса у нас не хранятся когда швы рядом вратами в армии например А сервис с помощью ямы его опять переполучает каждый раз и в случае если у нас злоумышленник получит доступ к этому сервису он не сможет оставить себе доступ к другим сервисам с которыми наш сервис взаимодействовал а теперь немного о и bpf Сначала был просто Берковой пакет фильтр это система которая запускалась в безопасном окружении рядом с ядром перехватывал сетевые пакеты и Маклая их либо как-то трансформировать либо блокировать случае же экстренного пакет фильтра этой возможности были расширенные для перехвата вызовов вызовов ядра и тому подобное в данном случае мы рассмотрим систему в рамках безопасности контейнеров она расширяет наш по логированию мониторингу позволяет нам предотвращать инциденты и обнаруживать вредоносные действия с точки зрения софта который сиена и также другие системы обеспечения более подробно логирование и безопасности здесь интересный инструмент как следствие для тайм-секретики но мы изменили его на этот разгон фалк более легковесен позволяет смотреть Что делает администратор в внутри и дипломе тогда у него проваливается позволяет видеть выполняемые команды позволяет видеть системные вызовы запуски процессов и доступ файлам мы выбрали потому что он обладает более удобным кодом для модификации мы дополнили таким образом что тетрабон может получать и данные с Хоста Таким образом он является унифицированным агентом с воздухом который как раз шипит эти блоки но может быть любой другой локшипер например стоит использовать поскольку они в основном дорогие если были проплатные решения это вещь хорошо выручает позволяет улучшить и видеть что конкретно делать администратор или же сервис в runtime потому что логику не дают такого обширного вижена а теперь поговорим про логирование неотъемлемой чертой безопасности является сбор блоков с максимальное количество критичных мест если не со всех но мы знаем реальный продакшн и такого не бывает Следовательно не стоит забывать о приложениях не стоит забывать о логах которые генерируются бизнес логикой для того чтобы наши центры инженеры могли руководствоваться не только со слогом но и слогом приложении надо собирать эти данные со всех приложений в пластыре Вы можете использовать как поскольку наиболее популярное решение так и убит у эластика или же использовать Вектор но стоит помнить о том что логики приложения Нам очень нужны для расследования сидит в компьютерной безопасности для того чтобы могли в том числе искать нашего нарушителя который может управлять админками как после того как мы настроили такое большое количество сервисов и все развернули стоит помнить о том что нам хотелось бы удостовериться что все остается именно в таком состоянии в котором есть Ну то есть например банально кто-то может не установить гиперс эджетом на какое-либо инсталляцию и у нас будут проблемы для этих целей мы рассмотрим с вами несколько фреймворков которые позволяют проводить первую очередь Чехов чем просто формач позволяет варьировать настройки то есть насколько безопасны наши настройки конфигурации без учета остальных сервисов позволяет нам видеть и анализировать бак то есть искать привилегированную учетной записи которые давно не используется а и локальный учётные записи если мы говорим что у нас все проекты и всё хорошо а также сервисный учётные записи в случае если какой-то сервис умер а они остались агрессивная вещь которая позволяет уже выполнять и с ней быть осторожнее чтобы не сломать продакшн поэтому стоит использовать только на тестовый страх вот ну и напротив зависимости от уровня знания того что вы делаете говорим озеро Траст Я уже упоминал Где же проходит границы между трастами разграничениями доступов и закруткой гаек если мы говорим классической концепции то это значит мы доверяем среде в которой выполняемся Возможно если у нас гидролизация безопасности компании и важно пройти до того что приземляемся безопасность как можно ближе к конечному потребителю здесь важно отметить столбы которые организуют как раз это целостность слогов для этого есть большое количество приборов которые обеспечивают подпись хотя бы фреймворки которые есть угла нужно определить безопаснее опасные действия это всё необходимое для того чтобы мы в блоках могли видеть что происходит и э прогнозировать при этом необходимо взаимодействовать С командами довольно близко для того чтобы понимать кейсы и писать правила на одну из них а паблики инфраструкции нет поскольку мы используем tls и нам необходимо как-то распространять наши секреты этих обязательно ты Уфы не только для администраторов Но по-хорошему для всех пользователей поскольку даже машины могут быть не безопасны они могут быть украдены и стоят всегда иметь второй фактор Если вы не можете иметь физический фактор то можете хотя бы использовать аутентификаторы привилегированные хвосты и обеспечение безопасности то что самое что я говорил на Первом слайде процесс ключевыми сертификатами нужно писать весь Flow того как мы их все должно быть взяли автоматизирована поскольку это будет большая боль если нас сертификат истечет на продакшене все встанет аттестации устройств это Пастер по аттестации устройств Мы говорим в рамках и сервиса это когда все сервис необходимо установлены так и проклайн сайт когда надо стрелять что пользователи тоже есть сервисы логирование мониторинг и для того чтобы в тяжёлый момент Мы понимали что делать и тут я вам советую проводить не только учение но также проводить так называемые Table Top когда мы собираемся сотрудниками и генерируем какую-либо информацию Где рассказчик говорит что происходит А мы пытаемся понять где же у нас бриджер безопасности что мы не собираем Где стоит усилиться проверка действия То есть это подпись наших данных GT подписи то есть мы Передаем что-то через кафку или выполнять какой-либо действия наш повело должен быть подписан для того чтобы где-то в мидме он не был перехвачен и изменен политика исполнения система для того чтобы усилить безопасность нашего кластера поскольку не всегда хватает функционал Здесь представлен пример архитектуры сейчас мы разберем подробнее это все необходимое для того чтобы понимали где Какой высок этой схемы Начнем с того что самые лучшие варианты организации нашей структуры Когда мы можем условно все контролировать и видеть всю нашу инфраструктуру как те кто ее поддерживает это когда у нас вся инфраструктура и Закон и здесь мы используем вся сидит для того чтобы Как менять инфраструктура нет сервиса argocd нужен для того чтобы визуализировать изменения нашей инфраструктуры и видеть в разных репозиториях вещи которые могут влиять одну другую Base Это secd для миграции баз данных Он позволяет описывать базы как код и также применять миграции в автоматизированном режиме Когда мы можем это самое важное здесь для того чтобы каждый сотрудник команды отвечал только за свой код и случае если у нас есть общий историями описываем правилами и очень важный бенефит то что мы здесь можем сделать обрув изменений может быть как рядами команд смежными командами так случае критичных сервисов мы можем делать ревью с точки зрения безопасности и делать так называемый не только уже три предложения но и для кода нашей инфраструктуры для того чтобы поддерживать ее изменения потому что это всего лишь абстракция нашей инфраструктуры здесь у нас показан сервис Телепорт это почему-то Он позволяет нам пропускать через себя подключение к кубинец и базы данных Хоста и приложением это точка необходимо для того чтобы мы могли детально видеть Лог действий нашего администратора в текстовом виде для того чтобы случае возникновения цвета мы смогли это смотреть плюс если у нас запускаются какие-то новые инсталляции мы всегда можем видеть логия прямо вот и также мы можем предоставлять доступ и в случае если это продаж инфраструктуры и зиртач мы можем предоставить доступ на какое-то время для нашего сотрудника если этим виду необходимо пойти прямо в продакшена такие случаи бывают внутри у нас кластер где-то Драгон более с ними знакомы а также здесь есть четыре сущности этой сущности ингрессы и грязь очень важно понимать что большое количество ингрессов игрессов может перегрузить наш кластер и поэтому было принято решение использовать следующих конфигурацию У нас есть соответственно сервисы которые получают что-то из интернета Они получают через страну ингресс если нужно куда-то ходить в интернет То это экстренно для спонтернул такая же схема добавляем правило похода до этих сущностей А на самих сущностях инерциях игрессах можем мы можем прописать необходимые домены куда можно ходить сервисы и также мы можем указать те параметры которые должны быть в запросах для того чтобы статические линтить и избежать либо утечки нашей информации либо же наоборот не авторизованного похода откуда Из них при этом не стоит забывать про последние рубеж обороны митинг который мы также можем реализовать на месте здесь как раз видим то что у нас поход на внутренние виртуальную машину обеспечивается через интернет который по сути является виртуальную машину и таким образом для нее доступ а также здесь можем разрешить доступ к базе данных Space этому сервис который необходимо помнить что не все протоколы интуитивные для истио и хоть они их поддерживают это вызовет скачок в потребление производительности поэтому рекомендуется например для Кафки radisso и баз данных исключать их и представлять доступ исключительно через Сина в плане CD это полезная вещь с точки зрения того что мы разделяем диплои приложения на две секции то есть одна секция это диплоид самих приложений с точки зрения разработчиков они будут делать его достаточно гибко если мы же говорим про внутреннюю инфраструктуру я говорю про есть другие сервисы обеспечения мы собираем все в один репозитории для того чтобы в случае изменения мы могли видеть состояние и смотреть что происходит Как с точки зрения безопасности так с точки зрения инженеров и инженеров которые поддерживают это важно с точки зрения того что у нас может быть открыт доступ в истину но не открылся и у нас не будет сети в этом случае такая обширная картина того что изменилось очень полезно с точки зрения а представление доступа здесь платная кошка телепорта Но это все можно организовать с помощью вашего скриптинга То есть например случился инцидент У нас есть мы запрашиваем доступ для сотрудника через какую-либо вашу систему автоматизации написано на питание вы видите согласование в жире телеграме в другом сервисе безопаснее смотрит на тикет понимает что это важно согласует либо это согласуется автоматически происходит работа на продакшене и потом специалисты сок или специалисты безопасности разбирают телепорта и разбирают логия наши ворота Security Dragon или фак плюс логия самих приложений для того чтобы понять что действительно Работа были выполнены и есть очень яркий кейс когда был администратор который ходил в базу данных говорил что он работает на самом деле он выполняет и вредоносные функции а по сути воровал данный клиентов но при этом из-за того что логирование не позволял логировать то что он делает в базе данных мы не смогли сразу это обнаружить вот такой комплексный подход позволяет предоставлять доступ к разработчикам для работы Спасибо по ссылке вы сможете задать мне дополнительные вопросы если мы не успеем в сессию вы можете написать их в LinkedIn Спасибо Спасибо большое за доклад можно сейчас будет задать вопросы Из зала Также можно в Telegram бот писать вопросы и в чатик Мы тоже их озвучим и Саша обязательно ответит Саша ты с нами на связи Да Добрый вечер Спасибо тебе за доклад губернете свечи хорошая мы все любим Security любим еще больше Итак ваши вопросы Александр Спасибо большое за доклад И на самом деле у меня два вопроса Первый вопрос в вашем докладе ничего ничего не было сказано про контроль содержимого имиджей до проверяете ли вы имиджи на безопасность на безопасность кода на exploit или в рамках вашей модели безопасности это не нужно Да спасибо за вопрос Это просто входит в части если мы говорим про эти все проверки они на стране и в конце всех проверок в том числе человеческих когда мы делаем мы подписываем все с помощью контроллер который проверяет как раз таки подпись если мы говорим про него проверять подписи контейнеров отлично Спасибо за ответ и второй вопрос безопасность Ну первое основное последствие усиления безопасности это то что все становится неудобным то есть вот это вот угроза Да угроза взлома она потенциальная и многие разработчики многие админы относятся к ней но так как к чему-то абстрактному но внедряя безопасность мы ухудшаем удобство работы мы ухудшаем скорость работы с системой Ну вот как классический пример длинный пароль до 14 символьные Да он обязательно будет наклеен на ластике на стикере и приклеенный монитор Да если у вас какие-то трения с командой по поводу усиления безопасности и если есть каким образом вы их решаете Да после концепции мы делали Пилот с командой это что выделил инфраструктуре там много изменилось в плане добавления сервисов но концепция сохранилась на чем мы основывались когда прорабатывали это решение на то чтобы релизный цикл для разработчиков был как можно меньше заблоченной безопасности и поэтому адаптивным выставляли моменты когда мы забираем именно на ручное ревью то есть большинство делается автоматизированно Ну и самый главный момент который порадовал очень разработчиков если мы говорим про такие критичные среды как беседы лайк или у нас очень типичные данные обычно мы используем парадигму озера Touch Production здесь же у нас есть Телепорт это может быть менеджмент который позволяет разработчикам пойти руками что-то в случае проблем поправить но у нас есть правило что всё потом выкатывается в коде и на самом деле им этот концепт тоже понравился Потому что таким образом мы достигаем рестайлинса и в случае там если у нас может случиться мы можем очень легко перевыкатиться Ну и также скелетса плюс очень удобно с точки зрения инфры смотреть все в коде но да Вопрос Действительно это часто возникает когда мы говорим про безопасность то что начинает быть сложным управлять администрировать средой и разрабатывать под неё но пока вы не померить условно у себя Какие места у вас возникают дополнительные затраты времени у разработчиков или команда администраторов это решить не получится Именно поэтому начали презентации говоришь что можно взять этот концепт и уже в зависимости от тех рисков от которых вы защищаетесь доработать его усилить где-то ослабить Спасибо у нас вопрос из чатика спрашивает Смирнова Анастасии повлиял ли внедрение APA на быстродействие систем используется используется ли Апа для контроля Саша и судо на Линекс хостах если да то используете ли модуль пам от стаера или какое-то свое решение но на Хосты мы пока не внедряли потому что мы были сконцентрированы я не смогу ответить на оставшиеся вопросы по поводу производительности смог вернуться Нет не повлияло потому что там идет просто linking проверка манифеста повлиял с точки зрения того что если разработчики допустили ошибки то у них будет реджект выкладки но мы это решили следующим образом мы просто взяли бинарник и сделали статический скан в для того чтобы мастер разработчик уже мог понять и администратор что у него что-то не так не соответствует спасибо вопросы зала еще пожалуйста Добрый день Александр Мне интересует Как вы анализируете аудит логику Бернес и Существует ли какой-то онлайн алертинг на эту тему Да у нас есть режим центр который как раз таки коллектит логи в данном случае наше решение и в нем описаны правила но можно использовать например ластик или Хаос в зависимости от того что вы предпочитаете если Спросите ластик можно использовать бесплатные которые довольно хорошо прокачался за последнее время и не использовать watcher который обладает большим количеством функционала вот если их сравнивать то Старт имеет работу руками с носификацией мессенджерам онлайн анализ деструктив возможных деструктивных действиях в пределах кластера Ну например как то что предлагает clantry с его красивыми картинками и алиментами Конечно если мы говорим про runtime Security то как я говорил что палка и тетрагон у них есть встроенные правила которые позволяют анализировать и выявлять какие-либо вредоносные команды но довольно долго придется зарабатывать напильником правила исходя из того что они очень много falсят они очень чувствительные есть платные решения которые также обеспечивают аналитику такие как лантри и другие поэтому тут довольно широкий спектр Я просто ответил на вопрос исходя из концепции которую мы сделали то есть мы собираем просто все данные А уже анализируем их в нашем централизованной системе для сока потому что это удобнее с точки зрения специалистов когда мы включаем более развернутый мониторинг правило пишем там где мы можем управлять потому что в другом случае нам придётся иметь административный доступ для всех этих систем если катастрофа там порядка 300 будет очень неудобно каждый среду настраивать Даже несмотря на то что у нас есть на ваш вопрос Спасибо еще один вопрос успеем Давайте кто-нибудь Последний будет последний вопрос Видимо нет все все понятно Саша Выбери лучший вопрос их было три и мы вручим приз либо отправим если это в чате выбираю того человека который задал два вопроса вы который был первый да первый вот Встаньте пожалуйста хелпер вручит тебе большое спасибо за доклад за сессию вопросов и ответов Велком Спасибо Спасибо"
}