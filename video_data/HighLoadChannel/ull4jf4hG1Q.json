{
  "video_id": "ull4jf4hG1Q",
  "channel": "HighLoadChannel",
  "title": "Lua в нагруженных телеком-системах / Дмитрий Борисов",
  "views": 793,
  "duration": 2605,
  "published": "2018-08-16T03:58:05-07:00",
  "text": "еще раз спасибо что пришли ну саше меня уже представил кратко про доклад мы будем говорить про то каким образом можно из ну как мне не так давно сказали как из говна и палок можно собрать большую красивую нагруженный от с значит давайте начнем с такого примера я думаю он будет всем знакам вот представьте у вас обед вы покушали и сидите пьете чай тут звонит телефон в котором приятный женский голос произносит что-то вроде а не хотите ли вы купить нашего слона обед испорчен впечатление испорчена вы кладете трубку после чего дальше как тоже с этим живете так вот расскажу я вам именно о том как таких звонков делать очень много одновременно значит какие у нас есть open source системы с которыми можно начать работать да то есть мы не берём коммерческие системы там совершенно другой мир он достаточно закрытый обзор систем 3 это asterisk это free свечи и таять и есть всякие производные от каждого из них значит начнем с знакомого все мосты риска asterisk это система одна из первых точнее сказать первая такая большая популярная у нее есть некоторые архитектурные недостатки она достаточно плохо работает с под высокой нагрузкой не очень хорошо масштабируется но при этом у нее отличный функционал и очень большое сообщество что собственно определяет ее популярность значит второй системой ну а старик самая старая система соответственно 2 система является я ти5 это самая молодая система которая очень имеет очень хорошую архитектуру при этом бедный функционал у нее достаточно небольшое сообщества и использует ее в основном в enterprise среде с целью конвертации h323 протоколов sip и обратно я в процессе доклада буду произносить всякие такие вот страшные слова если кто не из мира высовывайте дата вы не пугайтесь это всего название протоколов значит и система посерединке по возрасту и по размеру сообщества это freeswitch крестить характерен тем что ну немного истории freeswitch взялся из ost риска на самом деле один из разработчиков из треска энтони место меня сел в середине двухтысячных остался очень недоволен архитектурой долго пытался внутри астериска продвинуть идею о том чтобы переработать архитектуру полностью с нуля но это не входил их бизнес-плана компании после чего нашел я создал свой проект назвал его фриспич значит freeswitch по функционалу ну я с треском знаком хуже то из того что я знаю он не как от австрийской не отстаёт он отстаёт по размеру сообщества достаточно существенно но это очень хорошо видно при подборе специалистов кадров . значит и при этом он значительно стабильнее под нагрузкой то есть именно freeswitch я выбрал ну как то так получилось последние там несколько лет я занимаюсь отрезками и вот именно его в итоге я выбрал как основу для своих решений vision характеризуется вот четырьмя основными свойствами которые собственно и определили мой выбор значит в принципе система из-за на вафле свеча держит вполне приличную нагрузку там в зависимости от железа вы можете прогнать совершенно спокойно там 500 звонков 1000 звонков если совсем все хорошо полторы тысячи звонков одновременно но если брать что у нас трафик генерируется из раз еще из расчеты действий абонентов генерирует один звонок то это уже там порядка 10000 абонентов до 10 15 тысяч абонентов что создает некоторые проблемы для обработки сик трафика freeswitch достаточно высоко уровневая система которая не оперируют пакетами как таковыми она протокола да она оперирует такими понятиями как канал плечо звонка звонки и конференции так далее соответственно в качестве sips т.к. используется библиотека софия одна из самых как правильно сказать корректно в соответствии с лвц написанных библиотеках реализующих се вк zip вот но у этого есть обратная сторона она достаточно тяжеловесная при обработке по времени обработки поэтому для проб для обработки всякого паразитного трафика как правило вперед ставим какой-либо из би си эс би си эта система ну там вот их на самом деле две открытых это камалия и open sips обе в принципе произошли от одного этого же места чтобы предназначен для того чтобы обрабатывая обрабатывать одинаковые вот маленькие пакетики они не оперируют понятиями звонка хотя там последнее время наметилась тенденция на то чтобы этим заниматься но тем не менее соответственно это поставили вперед с bisi мы имеем возможность снизить нагрузку на коммутирующий фриспич до при этом там если freeswitch на каком-то железе 10 держит там например тысяч одновременных звонков то к морю где будет держать не менее 10000 а то и все 20 тысяч одновременных сессий значит сейчас немного отступление причем она кому-то покажет такое несколько капитанским но нафиг случай значит в любой целиком системе всегда возникает необходимость отказоустойчивости когда у вас одновременно 1000 звонков вы вынуждены обрабатывать дата вариант когда у вас это 1000 звонков внезапно обрывается и сколько-то времени никто не может позвонить до является критичным поэтому все так или иначе задумываются об отказоустойчивости значит я расскажу про вот два пакета на самом деле пакет heart beat исторически он был первым в linux системах который обеспечивал для dota в режиме один плюс один отказоустойчивость они торговали друг друга фактически если связи связанность между ними терялась то обе ноды поднимали у себя тот ресурс за которыми они должны были следить за то есть тот являющийся общим когда они друг друга видели они между собой договаривались о том кто этот общий ресурс данный момент поддержит значит но после этого появился такой пакет как приз maker в качестве транспортного звена у него выступает пакет к росинка значит который позволяет объединить в кластер большее количество нот значит исходя из механизма работы орбиты и peacemaker а можно понять проблемы да то есть вот то что я сказал когда в here бит перестает видеть вторую ноду он поднимает ресурсы которым они следят в итоге если обе ноды не потеряли связаны с ним с внешним миром но при этом не видят друг друга мы получаем ситуацию спреды рейна то есть но для нашего случая у нас наиболее часто используемым общем а ресурсом является и пи адрес соответственно водяной да поднимут айпи адрес и это в общем сеть поломалась мы имеем кучу всяких разных проблем соответственно в случае с пакетом pacemaker мы не имеем таких проблем то есть у нас всегда есть две ноты которые видят друг друга и они поднимают общие ресурсы 3 надо при этом когда она видит что она потеряла кворум так называемый она приходит состояние фриц ну там есть несколько различных сценариев развития событий и в любом случае надо которая осталась одна мне вернее ноты которые остались вне форума если говорить совсем корректно они прекращают свое функционирование значит соответственно вернемся к отказоустойчивых отказоустойчивости нашей целиком системы и первое для чего нам надо сделать отказоустойчивости для чего это делается проще всё это к морю фактически мы поднимаем две команды да ну две ноты фактически ставим третью рядышком для корма после чего назначаем им обеим в системе а общая и пи адрес цепляем к морю к одному сокету на обеих машинах о на обеих машинах он запущен после причем айпи адрес переезжает между машинами значит для того чтобы это сделать есть такая переменная сечин ктл который позволяет биндить не существую не поднятой системе айпи адрес значит с free свечам ситуации чуть-чуть отличается ну самый простой вариант точно так же делать отказоустойчивость по схеме 1 плюс 1 в этом случае у нас один freeswitch лучше слушает и там понятые пи адрес 2 freeswitch тоже поднят запущен но айпи адреса нет поэтому к нему и никакие пакет не попадают значит первая сложность состоит в прошу прощения состоит в необходимости сохранения состояния звонка дело в том что когда мы говорим о тип сей всех очень просто написать правило в которых нам нет необходимости отслеживать состояние звонка да то есть если у нас пришел какой-то пакет мы его отправляем по определенному правилу всегда в одно и то же место есть это будет грубо говоря одна и та же надо фриспич до в случае free свеча нам обязательно надо хранить состоянии звонка и в том случае если у нас но до 1 это дело происходит в памяти если у нас но несколько то он нас возникает необходимость во внешней базе данных буквально через один слайд мы к этому вернемся значит но даже если мы решили эту проблему мы поставили какую-то базу данных который для всех доступно у нас все равно возникает проблема а масштабирование то есть в системе один плюс один система один плюс один она не может уберу им по своему принципу значит соответственно следующий вариант выглядит вот так мы не резервируем free свечи по схеме 1 плюс 1 мы просто увеличиваем их количество а стоящей впереди спесив используем в качестве лот балансира мы перекидываем нагрузку между несколькими при свечами при этом если один из них выпадает мы просто перестаем его использовать значит так же самая ситуация с общей базой данных с сохранением состояния звонка но если в первом случае вот в этом мы имеем возможность восстановить звонок такой механизм есть вафли свече то есть это полноценный flower то вот в таком случае фолловеры уже нет потому что это разные ноты разные пи адреса разные сессии соответственно выполнить failover между этими нотами невозможно несмотря на то что у нас есть данные обо всех звонках в общей базе данных есть рабочий третий вариант когда мы делаем резервирование по схеме n + n он очень дорогой значит вариант резервирования n + 1 возможно реализовать но это требует это не реализованы сейчас вы free свечей это требует там некоторой переработки поехали дальше общая база данных общая база данных я очень рекомендую использовать 5 7 мая съели после того как они его выпустили в нем появилась возможность полноценной репликации за который не надо следить я использую маски для в качестве базы данных для сохранения состояний сессии ну уже наверно с 14 года больше трех лет но основной проблемой было то что репликация постоянно ломается то есть вот псевдо псевдо синхронная репликация в мазке лима репликации мастер мастер ломалась после того как они выпустили 57 с возможностью кластеризации с возможностью самостоятельного отслеживания состояния corum а да там очень много всяких фишечек вот здесь с удовольствием переехал на эта система вам очень тоже очень рекомендую значит по ссылке ссылка будет в самом конце в том числе моя статья я стал об этом статью на хабрахабре о том как ему но там нет и не не столько статья сколько руководство как это сделать значит дальше когда мы делаем вот такие вот системы большие очень часто у нас возникает необходимость в динамическом конфигурирование дату и сдержать отмена который будет вот там 15 тысяч клиентов рисовать xml файлы или какие то другие конфиге под каждое пожелание да это ну очень геморойно поэтому вопрос динамической конфигурации всегда являются очень остро значит сначала самое простое с одной стороне самой сложной в другой то есть к морю к морю не умеет динамически конфигурировать ну точнее умеет но в очень ограниченных пределах значит вот пример конфиг-файл а к морю он такой слегка похож на си и всегда лежит в качестве статического файла в я так а значит второй вариант это важный скрипт как который уже обладает некой динамикой да то есть он вы можете зафиксировать алгоритм а все данные исходные подбирать например из базы данных или из редиса или еще есть какой-то система хранения не принципиально на самом деле но это уже какая-то динамика но в общем то на этом возможности камалия как для динамической конфигурации неизвестный мне исчерпывается там есть еще механизм r5 рпц вот но он скорее для управления существующими конфигурации чем для задания новых конфигураций весь вич базовой увидев ресничку конфигурируется через xml вот пример одного конфигурационного файла значит ну достаточно удобно на самом деле если вы не за бы не путайте в самом xml то есть у free свеча есть внутренний компилятор который превращает множество файлов в один большой xml-документ выполняет валидацию проверяет что все корректно после чего он подвешивается в виде структуры данных непосредственно внутри free свеча значит причем вся эта структура данных имеет приблизительно следующий вид есть четыре корневых узла 1 xml-документа причем что важно для нас будет вот сейчас и чуть чуть позже каждый корневой узел может не так при обращении каждому корневому узлу возможно вызвать некую внешнюю обработку и от если эта внешняя обработка вернет правильно сформированный правильно сформированную строку с xml документам она будет интерпретирован а вместо хранил полученного из локального файла это очень удобно это универсальный механизм который позволяет формировать эти документы точнее писателя free свеча модули их много есть непосредственно составив ли свеча и формировать документы на лету в том виде в котором нам надо значит исключением является уточнение исключением скорее расширением к такой функционал является непосредственно dial plan процедура обработки вызовов она может быть написано непосредственно ну la la la вот она может быть написано вот тут очень коротенький вариант значит делается это как есть табличка actions да и в нее прописываются команды ее параметры последовательно значит я должен получить этой команды вы можете организовывать любую логику в том числе там достаточно много инструментов для взаимодействия с внешним миром доступных непосредственно и зло значит соответственно доставка xml бывает трех видов из локальных файлов из генератора в скрипт исполняется 20 мг компилятором который встроен непосредственно freeswitch либо ну на самом деле там много языков но даже разработчики говорят о том что самый быстрый и правильный метод этого если вам нужен скриптовый язык как использую тела и третий вариант это обращение к внешнему источнику данных почти теперь модуль называется mod xml куру и как раз на нем мы поговорим дальше он обращается в огне и to get либо post запрос в зависимости от настроек и прошу прощения и я в качестве генератора до таких ответов из пор использую понравится значит ну давайте сначала простенький варианты джейн x да то есть у нас есть там пусть 5 not free switch-ем вот и все они используют xml файлы для того чтобы не бегать на каждую машину и эти файлы не править руками мы можем эти файлы положить в nx он будет очень быстро их отдавать таким образом нас единое хранилище единое место где мы эти файлы держим и можем редактировать и мы из этого места конфигурируем все free свечи в нашей системе второй вариант более продвинутую но при этом наиболее удобный на мой взгляд это опыт аресте с ложным интерпретатором мы можем использовать написать алгоритм формирование xml файлов на всех и он будет пользоваться всеми возможностями jane exo то есть мы можем его кэшировать мы можем формировать его на основе информации базы данных мы можем формировать его на основании информации там из редиса мы можем взаимодействие с внешними клиентами ну в общем а итоговая схема тест получается приблизительно вот такой то есть у нас есть ведро которая с внешним миром контактирует только в плане медиа трафика то есть вертепе трафик бегать равно непосредственно между клиентами и бедром у нас есть с bisi которая держит на себе практически всю нагрузку которая формирует генерируется сип пакетами у нас есть хранилище для общих данных это мой стиль и у нас есть и при конечно сервера которые позволяют обрабатывать в динамике и формировать в динамике поведение от с значит здесь есть некоторые проблемы но мы остановимся на них чуть чуть позже сейчас я про несколько расскажу значит вот такая схема она просто просит возможность внешнего управления значит в свое время я написал на на для у подрасти движок который дает брест фактически api для базы данных смог в моем случае это мой стиль и редис то есть возможность выполнить круг запросы к этим сущностям что позволяет сверху надеть достаточно быстро формируемый веб-интерфейс я долго на самом деле искал какой-нибудь фреймворк который позволяет быстро просто без особых проблем нарисовать а вы в интерфейс когда я учился в институте мы пользовали но может кто то еще столкнулся был была такая среда разработки как dlc это было удобно ты взял формы не это было страшно я согласен у ты взял формы накидал на них компоненты кнопочки привязал обработчики она работала это было очень быстро это было очень быстро и очень просто потом все ушли в веб и вариант быстро накидать формочку для меня сделался ну практически невозможно то есть ну вот вот так то есть если до этого форма накидать форму занимала часто тут начала занимать два дня значит ну и некоторое время назад я вернулся решил посмотреть не изменилось ли чего нибудь вот и обнаружил такую сочи на замечательный фреймворком называется view джеймс и к нему фреймворк уже с готовыми компонентами как раз то что я искал для веба который называется квазар значит в итоге вот ну вот например кусочек интерфейса для одной из этих который я делал фильтр значит тут поток форм 566 форм вот на то чтобы нарисовать не ушло там 2 2 или 3 дня то есть rest api разворачивается как готовое решение в течение ну полдня на самом деле вот и на него надевается интерфейс еще вот за два-три дня то есть мы фактически после этого имеем возможность отдать от с заказчику передач при этом заказчик не является специалистом вообще он сам может ей управлять найти как куда еще можно расширять эту систему значит проблема о которой я говорил ранее состоит в том что система не только хочет вернее мы хотим от системы не только чтобы она реагировала на воздействие пользователя или на какие-то внешние события например звонки пришедшие с определенного номера на определенный номер и так далее мы еще хотим обрабатывать события произошедшие в самой системе да то есть мы хотим управы кроме того мы хотим управлять звонками до тех пор пока мы работаем только с базой данных это сложно то есть фактически нам нужен некий онлайн-инструмент взаимодействие с самим я гром который позволит управлять состоянием но лучший вариант для этого это ребят им kill то есть есть реализация протокола для фри свеча она цепляется к ребенку без проблем работает значит но нас есть другая проблема nx сам по себе не умеет реагировать на внешние события то есть он имеет в качестве реакции на внешние события он может он рассматривает ответ на вып высланный им запрос либо новое обращение клиента то есть он не может выступать в качестве им крипы к концу мира эту проблему я в данный момент решаю при помощи надо джесс который с одной стороны на него приходят высокий выпсуке тот клиента джейн x отлично умеет быть прокси для выплавки то вот а с другой стороны у нас есть собственная мкпп подключение к раббит young thug очередям в которые пишет со своей стороны freeswitch или все free свечи к примеру то есть это достаточно громоздкое решение но пока у меня вариантов как наука навести непосредственно реализовать просто нету значит но вот когда это решение будет готова это будет удобно мне по крайней мере то есть и ну я аналогичных решений пока в готовых не встречал значит ну дальше очень хочется чтобы ядро не взаимодействовала с внешним миром напрямую это вопрос безопасности это вопрос управляемости процент процессами которые идут в ядре и так далее значит для этого но у нас остался один единственный путь для взаимодействия с внешним миром это медиа трафик для того чтобы его разрезать поставить там никакой преграды можно использовать aктepy против я обычно делаем это для хранения состояний используя и this freeswitch это хорошо умеет то есть он фактически дает интерфейс для выполнения редис запросов непосредственно сделал плана и это очень быстрое взаимодействие значит ну в принципе из того что я хотел рассказать по имеющимися решению все хотел бы еще чуть-чуть поговорить о том какие у нас есть возможности для использования этого значит ну не знаю все так или иначе сталкивались с распознаванием речи сталкивались нет вот немного народу значит при этом а кто считает что это интересно вот сильно больше народу вот вопрос почему это не используется активно вариант есть неправда качество очень высокое то есть тот же самый индекс данный момент отдает очень высокую степень 1 познаваемости то есть там да и во первых вопрос дороговизны но там например тот же самый индекс дает там они помпа 30 копеек за к за каждое распознавание секунду фактически в секунда на теле ну удобно на мой вернее на мой взгляд вот я начал заниматься отрезками работаю в компании 1с рарус а вот с моей точки зрения самая большая проблема с распознаванием речи в том что это не задача для телефонии то есть телефоне является инструментом эта задача для того где это используются то есть это там системы call-центров сами по себе очень дорогие и это учетные системы они разные то есть их сейчас этих серым очень много но практически ни одна из них не готова принимать голос точнее распознанный текст в событии вот это на мой взгляд является самой основной проблемой если мы в этом месте куда-то продвинемся то будет хорошо значит этого я рассказал про от с которая имеет приблизительно вот такую вот схему то есть мы имеем ядро мы имеем некое ограничение там firewall снаружи мы имеем системы хранения длительного и хранения состояний мы имеем апликэйшен сервера которые обслуживают от с эти же апликэйшен сервера у нас имеют возможность обслуживать запросы пользователей эти же апликэйшен сервера имеют возможность обеспечивает взаимодействие пользователей непосредственно с в режиме в режиме онлайн в принципе все спасибо вам большое за внимание я готов ответить на ваши вопросы друзья поднимаем руку ждем микрофон первый вопрос пожалуйста ну а то и мне скажи тогда зачем ты сказал про распознавание речи куда вот его туда вкрутить которую схему распознавание речи здесь совершенно спокойно вкручивается как но у меня она сделан непосредственно в ядре она у тебя даже сделано уже да конечно такая его прикручивать нефть и вот вы в этом основная проблема то есть метки больше всего за доклад да да вопрос такой где жил о он давайте становиться схемам посмотреть вот в какой счастье использует силу движок на число движок используется в упн месте окон аресте это сборка и jane exo которая включает себя logic в качестве интерпретатора при этом непосредственно вся логика которая я использую она сделана на la nuova значит то же самое freeswitch и конфигурируется через зло либо через статические конфиг файл и ну-ка конфигурацию ложь на я запомнил вопрос такой нагрузка на эту динамическую конфигурацию она в какой момент возникает она при каждом запросе то есть скрипты считываются с дисков момент запуска сервера и после этого являются ну хранятся в памяти я не уверен выполняется ли при компиляции то есть из интерпретируется или уже готовый байт-код в каждом звонке но при этом фактически у нас исполнении скриптов происходит при каждом обращении к соответствующим скрипта а сам при священна чем написано си си кусочками си плюс плюс нос mamsy ну то есть офис вещей просто встроена виртуальную машину завершены и вот какой реально если 10 тысяч звонков то есть это 210 тыс раза в секунду нагрузки или велись уже меньше больше больше больше больше ну потому что один звонок это далеко не всегда только один скрипт если мы как правило выглядит следующим образом у нас есть xml dial plan который получен от индекса от опен-рейз те карту в котором несколько раз вызываются разные его скрипты то есть время обработки одного звонка на этапе маршрутизации не должно превышать 100 миллисекунд и это много на самом деле фактически там 23 скриптов исполняются для каждого звонка последовательно отлично вот раз подобрать самому интересному а какие тогда вот есть рекомендации относительно того как писать и село скрипты они работали хорошо и быстро ну на самом деле про развернуться в технологий какие-то но там балки не балки что что реально применяется чтобы достичь нужной производительность и я поясню почему такой вопрос потому что меня зовут николай маркин из компании петер-сервис мы занимаемся разработкой hu-100 кпсс для операторов то есть мы стоим как бы немножечко вот то есть если это в терминах целиком это с с можно назвать то мы уже дальше мы в bss на части то тоже обслуживаем вырабатываем звонки с транзакциями там десятки тысяч транзакций в секунду соответственно с во всей линейке тоже есть места где принимать при не меняется lua ну и там есть разные подходы и вот хотелось услышать его что-то из практического чтобы меняется для того чтобы обеспечить требуемую производительность что-то из практического минимально пользуемся внешними библиотеками пользуемся функционалом самого free свеча в него но самым тяжелым из того с чем реально мне приходится сталкиваться являются внешние сколь запросы а то есть нефть или запросы к маске лью являются самыми затратными по времени поскольку это вы там внешней системы да то есть во всем остальном крайне нежелательно использовать какие-то внешние важные библиотеки чем больше этих будем библиотек будет тем тяжелее на самом деле будет скрипт то есть фактически но у меня абсолютное большинство скриптов умещается в там 150 строк кода а то есть это вот 150 строк кода причем как правило внутри есть вся реализация всего функционала которые требуется на данном этапе звонка если мы выполняем некий некое действие то ищем его реализованы уже в виде модуля free свеча в этом случае у нас ло-ло используется встретит скорее в качестве цемента то есть написать удобный dial plan но в xml это сложно значительно проще это дело написать снова вот но при этом подход остается тем же самым как можно меньше внешних вызов одним словом получается подход в общем-то слой из 1 чуть-чуть динамики если она необходима в лол а все остальное данном ядре да да да конечно конечно спасибо большое радостно еще вопросы коллеги да конечно значит используется ли где-нибудь эта система рожден то ли она практически да конечно у меня к сожалению самый большой проект над которым я сейчас работаю по там коммерческим причинам не могу называть могу сказать что такое это видео значит при этом у меня работает несколько систем штатах работает но есть облачный от с один раз ну там к ней есть вопросы по продвижению скажем так там нагрузку очень небольшая но вот в штатах там достаточно приличная нагрузка такой системе это бубле является ли эти сервисы корпоративными публичными или оператор скими это публичные операторские скажем так то есть вот есть такой такая практика как удивление звонков через айпи фактически это когда американец звонит в бразилию звонок выныривает в бразилии с бразильским же ооо нам после чего он считается по бразильским тарифам для нас эта практика является не очень законной для нашей страны а для сша вполне вот соответственно вот именно такую систему я и обслуживаются ну и есть еще несколько примеров они помельче то есть вот этот самый масштабности который я могу озвучить дал мне спасибо за доклад у меня не то чтобы прямо совсем вопрос скорее дополнение к вот к вопросу о производительности ло правильно понимая что мы вот в рамках это проект говорим про простой лоне проложит или доложит значит logic этого перестала лова free свече ну вот по поводу производители общих рекомендаций о том как сделать нос кайт и быстрыми есть о первых рекомендации от основателя проекта обертыванием ского там простаки что делать и что не делать да вот что чтобы о скрипт выполняется быстро и кроме того есть дополнение для logic опять же автора проекта logic в него есть отдельной страничкой который говорит что нужно делать и что не нужно было ни были быстрыми и наверное случае слова gets вот общая такая рекомендация как количество минимизировать количество лака да да я все делал в основном всео лобик script that не совсем потому что ложек при некоторых обстоятельствах позволяя достичь скорость выполнения нативного года ну с тем чистым зависит степень с тем чем я сталкивался прям такой же производительности как сильный кот нет но там отличие всего в 3-4 раза по скоростью сильно зависит от но есть брать 1 то там разность разница в производительности 50 раз в сто раз если мы берем берем питон там есть я не ошибаюсь 15 20 раз то и производитель разных производительности 3 4 5 1 то есть это дадут logic через wi-fi позволяет фактически обмениваться нативными структурами данных из этого барьера вы практически нет оптимистом данных и вызов томского кода и стен фактически просто вызов функции да есть донес так еще вопросы есть казарцев константин макросистемы я извините все-таки помощью вас по производительности ло нам интересно а скажите вы сказали не использовать библиотеки потому что это плохо влияет на производительность вопросы 2 это относится к или каджит и почему ну какие там ориентировочно тайминги происходят вот при вызове библиотеки что дорого сам вот пол я извиняюсь session их термин их говорю или библиотека библиотек плохо написана или там много кода за счет там за счет этого интерпретатор плохо работает интересует момент перфоманса значит я сталкивался с ло в основном от в разрезе этой системы значит для фри свеча fresli phrases which встроен интерпретатор ло то есть это не logic себя free свеча достаточно тяжелом является подключение практически любой внешние библиотеки то есть это тяжело тайминги не готов сказать насколько именно растут но они растут ощутимо я прошу прощения подключения смысле вот каждый вызов функции или а или один раз но делать скрипт на 50 строк он как правило используют там не 10 библиотек вот но подключение сиджей сын библиотеки стандартных да для того чтоб распарсить джейсон является дорогим то есть нам проще не подключать нам проще если это небольшой мне лично проще распарсить это библиотеку на engine.exe и выдернуть ее крон я думаю что речь про то что подключить хищный модуль дороже чем выполнить 50 строк кода нала виртуальной машине примеру дело в том что один да скорее всего но мне не приходилось и джейсон жажда до подключите женщин на модуль сильно дороже чем выполнить 50 строк без подключения этого то есть проблема здесь не в ло скорее всего как я понимаю просто в том что сами скрипты настолько маленькие простые что любая зависимость будьте на сейшн а и лилу важная на их относительный объем относительных объема гораздо больше и уже за счет этого дает нагрузку дополнительно то есть в этом дело то есть я думаю что дима говорит что пишите просто маленькие просит и скрипты большие сложные вы нас не пишите давыдов большие сложные скрипты вы носите вон в alpen race чего там этого исполняется лоджи tomtom это нужно значительно удобнее плюс там есть возможность отдела за кэшировать не исполнять каждый то есть возможность по оптимизации там в самом внутри самой от с значительно проще делать самые базовые вещи то есть алгоритмы для которых действительно хватает ну там ну 100 строк на самом деле редко честно ноги в 50 вписываюсь так ну что последний вопрос я желающие тогда я спрошу можно предыдущий слайд да конечно а вот ты считал сколько здесь несовместимых и плойка систем на этом слайде мы с тобой это обсуждали но честно я так и не посчитал могу сказать значит как минимум 2 в ядре как минимум одна в апликэйшен серверах и вот редиса ребятенка насколько я помню а еще одна на канале и как минимум regisseur и ботинки у каждой имеют это твоя 6 ну да по моему шефу по-моему это рекорд в одной системе насколько эта проблема это не проблема ну то есть это не проблема поскольку везде он используется для расширения функционала самой системы то есть мы не используем но как родила да мы его используем как для расширения функционала чем он в общем . ура спасибо спасибо всем"
}