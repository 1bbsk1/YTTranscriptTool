{
  "video_id": "hCHmTCRzmP8",
  "channel": "HighLoadChannel",
  "title": "Правильное обнаружение проблем с помощью Zabbix / Алексей Владышев (Zabbix)",
  "views": 355,
  "duration": 2779,
  "published": "2017-07-30T00:47:31-07:00",
  "text": "час противу и pro x плата совсем хардкор горный админской а теперь она будет такая более расширенные принципе и разработчикам будет интересным на не поприсутствовать давайте я вас немного разливу по поднимаем руки поднять руки кто здесь системные администраторы но реклама рут конфа работает а кто разработчики ну вам тоже будет интересно не отключаетесь не уходите а менеджеры здесь есть всякие управленцы понятно спасибо большое но смотрите мы сейчас начинаем первый доклад очень хороший алексей приехал к нам из риги и будет рассказывать про свой продукт запись который в принципе наверное как engine x уже завоевал огромную популярность у нас я принципе везде столько и слышу что все пользуются забег сам но естественно с популярностью приходят и огромное количество полей которые мы я думаю расскажем алексея и он в принципе ближайшие несколько лет продукт улучшит им будем счастливым пользоваться дальше давайте поприветствуем алексея спасибо большое спасибо большое по поводу более вчера мы организовали встречу с пользователями zabbix а и я выслушал много-много всего как раз что касается боли до позвольте представиться меня зовут алексей гладышев я являюсь создателем zabbix и в данный момент я отвечаю за архитектуру zabbix а и за за zabbix road map и в москве выступая не так часто последний раз это уже выступал в москве 5 лет назад 2009 году и для начала вообще хотел бы узнать кто использовать zabbix а кто совсем не знает что такое zabbix вот есть три человека хорошо вот для этих трех людей я расскажу что такое zabbix да сначала потом как работает zabbix с точки зрения такой высоко уровня и архитектуры и с точки зрения обнаружения проблем то есть мы сегодня будем говорить о том как обнаруживать проблемы применительно к zabbix у то есть как можно использовать zabbix чтобы обнаруживать проблемы и вообще вот что такое забег сначала до если вы зайдёте на нашу страницу вы увидите что запись это такой энтерпрайз ловил open source мониторим solution то есть это открытое решение уровня enterprise для мониторинга и вот когда когда мы видим слова энтерпрайзе как я его понимаю я понимаю таким образом что решение должно быть легко интегрирован а интегрироваться в существующую инфраструктуру то есть если у вас есть там там скажем большое предприятие вы уже используете какие-то продукты helpdesk там скажем configuration management еще что то вот система должна легко интегрироваться ну и вообще вот что может быть отличает zabbix от других продуктов я думаю что ну вот такое большое отличие достаточно и большое преимущество заключается в том что zabbix открыты продукт это реально open source да то есть у нас нет никаких закрытых версией мы занимаемся там 24 на 7 мы отстроим продукт и мы отдаем его и отдаем его бесплатно да то есть пожалуйста заходите на нашу страницу используйте используйте наш продукт но есть и другие другие преимущества я быстро сейчас и не в целях рекламы просто может быть в целях скажем так вам образовательным чем мы отличаемся zabbix является таким решением все в одном да то есть визуализация обнаружения проблем сбор информации различными способами все это есть записи вам не нужно строить ваш систем мониторинга из разных каких-то отдельных блоков ну вот это как работает zabbix до для тех может быть кто еще не очень себе представляет мы собираем данные то есть zabbix сервер это ядро zabbix а в котором вся логика мы собираем данные различными способами эти данные информацию складываются в базе данных история потом используется информация для визуализации и ядро занимается в том числе и анализом вот анализом потока информации да и и мы обнаруживаем проблемы и каким-то образом реагируем на проблемы ну и есть различные виды реакции на на проблемы ну что касается сбора данных и какие проблемы можем отлавливать это проблемы связаны с производительностью это проблемы связанные с доступностью скажем доступен сервис или нет да мы сразу же можем определить насколько быстро работает система то же самое то эта проблема с производительностью также можем обнаруживать проблемы скажем с целостностью данных если у нас изменился скажем какой-то конфигурационный файл или может быть и мяч нашего я не знаю им еще нашей системы которым и диплом в claude изменилось checksum zabbix он тут же скажет что вот изменился изменился наш файл да и zabbix также немножко покрывает область такого бизнес слова мониторинга то есть фактически мы можем обнаруживать проблемы на различных уровнях нашей ati инфраструктуры это уровень железа что-то произошло с чем-то даст какие с какой-то железякам этот же об этом узнаем уровень операционной системы сеть в основном это мониторинг через snmp виртуальный уровень то есть из коробки мы предлагаем например мониторинг в mbr инфраструктуры весь центр ivi сфера да и дальше уже идет там недолго р и бизнес приложению то есть если мы знаем как обнаруживать проблемы в нашем приложении и zabbix это не поддержит из коробки можно можно в zabbix это прикрутить с помощью своих скриптов ну немножко так как так вообще каким образом можно собирать данные но есть два способа есть такой полу то есть это когда мы вытягиваем данные с устройства есть push метод пуще то когда само устройство сообщает нам выдает нам информацию до но пул это обычные проверки допустим там скажем snmp и либо сервисные проверки когда мы подключаемся к сервису скажем ssh либо это веб-страницу и и веб-страницы если она отвечает то значит все в порядке если она корректно отвечает что знает все в порядке ну и пусть это в основном активный агент различного вида тропы это snmp trap и ну и также сбор данных работает через через уж метод и вот что касается zabbix агента агент это такая программа который можно установить там на linux там windows любые другие операционные системы и я хотел просто поговорить об активном режиме какие его преимущества в плане обнаружения проблем то есть если пассивный режим мы подключаемся к агенту запрашиваю информацию агент возвращает нам скажем загрузку процессора в активном режиме сам агент отправляет данные на на сервер мониторинга ну и здесь есть преимущество то что это работает быстро да то есть быстрее по крайней мере то сервер не должен заниматься постоянным а прошиванием устройств сами устройства отправляют информацию более безопасно с точки зрения агента потому что агент не должен слушать никакие tcp соединение этом сетевые соединения да и большое преимущество то что нам сегодня важно то что есть буферизация в активном режиме есть буферизацию если забег сервер недоступен по каким-то причинам допустим мы делаем апгрейда бег сервера у нас downtime там несколько минут то данные будут накапливаться на стороне агента как только мы сервер запускаем данные тут же отправиться на сторону сервера и мы их можем обрабатывать вообще часто стоит вопрос как часто вот опрашивать устройство как часто собирать данные ну этот какие есть возможности конечно хотелось бы опрашивать данные раз в секунду вообще любые устройства опрашивать раз в секунду собирать там какие-то гигабайты информации как только проблема возникает тут же через секунду мы понимаем что у нас есть проблема но всегда тут есть такой скажем принцип мы не должны навредить системе да то есть если мы вот как я не знаю в квантовой физики до наблюдатель влияет на процесс если мы зачем-то наблюдаем мы уже влияем на процесс да то же самое системой мониторинга если мы начинаем собирать слишком много информации слишком часто мы системой мониторинга влияем на нашей системе на ту систему которая который мы мониторим поэтому здесь нужно нужно скажем выбирать какую-то золотую середину с одной стороны не навредить в другой стороны обнаружить мы должны обнаружить проблемы как можно быстрее но в за пикси есть несколько вариантов во первых мы можем мониторить скажем какое-то устройство или метрику раз в n секунд там 1 минуту мы запускаем какую-то проверку есть возможность использовать различную чистоту в зависимости от интервала времени ну предположим нам неважно что система не работает в нерабочее время на важно чтобы система работала в рабочее время до важно чтоб система работала в рабочее время да и тогда мы говорим zabbix у проверяй пожалуйста рабочие станции там с 9 до 6 и все да то есть есть такая возможность zabbix 30 п появиться новая возможность проверки типа вот готовы к работе ready for business что это означает это означает что мы сможем сказать zabbix у праве сделай эти проверки в конкретное время допустим открывается филиал банка в 9 часов утра а 855 мы у нас есть некий чек-лист и мы проверяем что действительно филиал готов к работе по мы проверяем что с workstation и все в порядке мы проверяем что те сервисы от которых мы зависим все в порядке мы проверяем что удачно закрылся потом скажем финансовый день предыдущий открылся открылся новый финансовый день и так далее то есть начинаю zabbix 30 можно запускать проверки в определенное время если мы скажем zabbix у проверь пожалуйста этот сервис 855 zabbix проверить сервис 855 также будет возможность печати проверки с периодичностью там 900 в 10 00 в 1100 ровно-ровно вот в это время как мы указали вообще да вот как в потоке информации отлавливать проблемы то есть идет огромный поток информации zabbix совершает тысячи может быть десятки тысяч различных проверок производительности доступности в секунду ну и мы предлагаем решение триггеры если вы используете zabbix узнаете что такое триггеры да то есть это по сути описание проблемы то есть мы формулируем проблему сначала может быть на своем языке а потом мы это пытаемся перевести в формат триггерных выражений ну простое 3 верное выражение может быть вот загрузка процессора на сервере больше пяти до это простейший триггер триггеры могут быть намного более сложные мы можем использовать арифметические и логические операции и что здесь очень важно важно что мы не ограничены и 1 метрикой да то есть мы анализируем не только одну метрику можем анализировать вообще практически все да то есть брать данные с различных устройств использовать их в описание проблемы и также zabbix у для анализа доступна как real-time информация которую вот на только-только получили так информация которую нас есть базе данных так называемая историческая информацию ну и вот чего обычно начинают так новички и неофиты до от мониторинга то есть попадает в руки zabbix такой мощный tool для того чтобы обнаруживать проблемы и сразу хочется узнать все обо всем да хочется вот как только что-то где-то произошло сразу получить имейл либо эсэмэску и вот к чему это приводит но приводит к тому что казалось бы вроде бы все в порядке вот система перегружена создается триггер загрузка процессора больше пяти текущая загрузка процессора больше пяти для доступности создаются триггеры типа вот сервис и т.п. веб сервер не доступен да то есть последняя проверка сказала что веб сервер не доступен и мы считаем что у нас есть проблема вот почему так делать не очень хорошо такие вот триггер и такие описания проблема не слишком чувствительны до загрузка процессора превысило 5 мы считаем что система перегружена подключаемся через ssh запускаем топа загрузка процессор уже там четыре с половиной до или мы думаем что в zabbix нам сказал что веб сервер не работает на самом деле мы подключились и он работает так что же что же происходит вообще такие вот вещи вот этого чувствительность приводит ну скажем к привыканию система мониторинга генерировать слишком много сообщений и и мы перестаем на них реагировать да потому что это не это нереально это это не совсем реальные проблемы просто приведу пример вот в латвии какое-то время назад был такой случай супермаркете сработала сигнализация и люди как обычно на это не среагировали то есть тот персонал который должен вывести всех людей супермаркета подумал что а сигнализация сработала ничего страшного те люди которые находились супермаркете подумай ну ладно я завершу покупки и выведу на самом деле это был предвестник того что обрушилась все перекрытию дай погибло очень много людей почему это произошло потому что люди привыкли что вот сработала сигнализация посмотрели вокруг пожара нет ну продолжаем до продолжаю работу или продолжаем там виселицу но вот вот это вот привыкание это это очень-очень такая страшная вещь все таки если система мониторинга говорит о том что у нас есть проблема ну должна быть эта проблема не нужно быть с тем мониторинга уж слишком слишком чувствительный так прошу прощения да что же делать ну здесь важно правильно формулировать проблему и понимать суть да вот нужно задаться вопросом действительно какую проблему мы пытаемся описать и что значит скажем система перегружена или что означает что сервис недоступен ну вот но система перегружена до скажем загрузка процессора больше пяти но я сегодня сознательно применяю очень простые примеры да то есть примеры могут более сложно это такой простой пример система перегружено наверное это не то что вот сейчас у нас загрузка процессора 5 а все-таки система должно быть нагружена в течение какого-то периода времени здесь мы можем как анализировать историю то есть скажем последние 10 минут загрузка процессора было больше пяти тогда давать действительно наверное система перегружена может быть какой-то процесс завис либо еще что то произошло в случае доступности сервисы что мы можем сделать то же самое посмотреть в историю а как было до этого то есть если последние пять минут система нам отвечала что эти типы недоступен то ну наверное степени доступен тут еще важно понимать суть проверки как мы проверяем что веб-сервер доступен проверяем и следующим образом мы делаем тисе пи соединению get запрос потом отсчитываем результат и здесь что-то может пойти не так например произошел тайм-аут до тайм-аут произошел но отвечает но означает ли это что веб сервер не работает нет не обязательно но вот если три раза у нас там скажем произошел тайм-аут как здесь хэштег 3 это означает что три последние проверки ответили что сервер недоступен у тогда уже очень и очень и очень высока вероятность что наш веб сервер действительно не доступен у либо проблемы сетью например поэтому мы все-таки должны смотреть на историю есть основывать свое решение на последнем значении это не совсем правильно большинстве случаев о чем не еще хотелось бы поговорить вот решения проблемы не эквивалентное и отсутствию что это означает ну например скажем не хватает нам свободного места на диске опять же беру очень простые примеры как как можно это сформулировать скажем свободного места на диске осталось менее десяти процентов до вопрос в том как только у нас появится 11 процентов свободного места на диске это проблема решилась или не решилась мне кажется все таки что проблема не совсем решилась или это у нас 10 процентов плюс один байт так вот в за пикси есть механизм который позволяет описывать различные условия для проблемной ситуации для выхода из проблемной ситуации свободного места на диске скажем меньше десяти процентов но я хочу выйти из этой проблемы ситуац только в том случае когда мне будет свободное место на диске 30 процентов свободного ведь 10 отрицать и только в этом случае на сто процентов уверен что кто-то что-то сделал что кто-то не знаю может быть удалил какие-то файлы system administrator подключился расширил нашу файловую систему увеличил ее размер в этом случае проблемы больше нет ну и для этого мы используем это называется hysteresis hysteresis по сути что это означает это означает то что если мы смотрим но по сути это означает вот что такими простыми терминами смотрим и на фотографию предположим машины вот машинам как будто бы она стоит но мы не знаем ее состоянии она может стоять она может двигаться вперед двигаться назад не зная историю да ну скажем так не знаю историю что до этого происходило мы не можем сказать в каком состоянии находится машины сейчас то есть мы должны все-таки посмотреть немножечко на историю то до этого произошло и вот используя различные условия для входа в состоянии проблемы и выхода из состояние проблемы мы избавляемся от так называемого flappy нга что такое флоатинг флоатинг это вот когда используется очень простые описано как простое описание проблем как загрузка процессора больше пяти или там свободное место на диске меньше десяти но что произойдет если у нас-то 10 процентов то 8 по 11 то 7 это это flappy проблема возникает пропадает возникает пропадает мы приходим утром открываем свой инбокс и в inbox и видим массу сообщения от zabbix а о том что проблема была проблема исчезла было исчезла было исчезла к чему это приводит к тому что мы просто уже системе мониторинга не доверяем да вот это flobbing если мы используем различные условия для входа в проблему и выхода из проб из проблем этот соответственно мы мы избавляемся полностью от фламинго но несколько примеров до скажем система перегружена загрузка процессора за последние 5 5 минут привык превышала тройку но мы выходим из проблем и только тогда когда последние 2 2 минуты загрузка процессора было меньше единицы здесь и мы спросим ножка другая логика здесь по сути первое условие это вход в проблему и второе условие мы остаёмся в состоянии проблемы пока хотя бы есть одно значения больше единицу да нет свободного места на диске мой пример меньше десяти процентов проблема то что то действительно проблема мы тут на сто процентов уверены и выходим из состояние проблемы когда в течение последних 10 минут у нас было более 30 процентов свободного места на диске там системный администратор может там начать скажем двигать какие-то большие файлы с одной файловой системы с друг другую копировать что-то вот если в течение 10 минут у нас есть стабильная ситуация что свободное место на диске более 30 процентов мы считаем что проблема пропала ну тоже самое сервер недоступен асуса вич три последней проверки сказали нам что сервер не доступен мы считаем что сервер не доступен но восстановиться мы хотим только тогда когда 10 последовательных проверок сказали нам что сервер наконец-то доступен опять же что происходит в реальности у нас проблемы с сервисом начинает его чинить перезапускать может быть откатываться на какие-то старые версии то система работает то не работает и вот здесь как раз мы описываем вот этот вот период доступностью 10 последних проверок все в порядке вот сейчас мы точно можем пойти спать потому что мы знаем что сервисом аномалии вообще что такое аномалия аномалия это греческое слово номоли означает отклонение от нормы да то есть есть некая норма и как только мы отклоняемся от нормы вот это считается аномалий и как можно обнаружить аномалию но обнаружить ее можно следующим образом да да обнаружить можно следующим образом в zabbix и есть такая функциональность когда мы за норму берем состояние системы в прошлом и сравниваем с тем что есть то есть в данный момент то есть допустим если вот мой пример если средняя загрузка процессор за последний час превышает вдвое загрузку процессора за тот же период ровно неделю назад не вчера потому что если мы сравним со вчерашним днем то это может быть сомнения воскресенье с понедельником пятницу субботой не совсем корректно но вот скажем вместе сегодня четверг то мы сравним с тем что было в прошлый четверг до считаем что это норма то что было в прошлый четверг если сегодня мы видим что загрузка процессора увеличилась то zabbix может отправить сообщение администраторами сказать эй ребята посмотрите пожалуйста какие то у нас есть тут проблемы возможно проблемы не обязательно конечно да потому что это такое информативное сообщение может быть сделали апгрейт какой-то системы появились регрессии в плане производительности может быть еще что то да вот это вот это вот в важна хорошая функциональность я предлагаю каким-то образом начать ее использовать трудно сказать принесет ли она реальную практическую пользу но по-крайней мере но это это та та вещь которая вот-вот подобные проблемы они очень часто предвестники более важных проблем более серьезных проблем до обратите на это внимание ну и зависимости ну казалось бы мы вроде бы избавились от лапин гатса всех таких вещей что мы мы все равно знаем что у нас есть проблемы которые зависят друг от друга но простейшие примеры на уровне сети это когда у нас есть устройство за коммутатором с коммутатором проблемы систем мониторинга думает что все наши устройства отвалились опять же мы получаем массу и смс-сообщение а определить что действительно произошло что является первопричиной root cause всех этих проблем и мы мы не можем за биг си мы просто определяем зависимости одной проблемы от другой скажем серым система зависит от базы данных зависит может быть от сети зависит от кого-то middleware еще чего-то сама база данных зависит от места на диске в случае если у нас нет места на диске мы получим единственное сообщение о том что у нас нет места на диске ну и как реагировать на проблемы реакция может быть разные наверное то что надо использовать может быть не всегда но часто этот такой может быть хорошая хорошая идея все-таки автоматическое решение проблем иногда это возможно иногда мы знаем что у нас есть приложение которое там поедает память вот поедает памяти все решение у нас нет и это приложение надо просто время от времени перезапускать да иногда возникает ситуацию с тем что мы получили там какой-то кернел паник вот время от времени получаем кернел паник нам нужно перезапускать этот сервер это можно поручить все системе мониторинга да то есть там скажем случае черного паника по айпи и мая мы можем автоматически на уровне железо делать ресать до в случае скажем сервисами мы можем перезапускать наши сервисы также в автоматическом режиме реакция может быть просто сообщение пользователю или группе пользователей реакция может быть также открытие каких-то тикетов в helpdesk системе то есть реагировать можно абсолютно абсолютно по-разному ну и конечно способ реакции зависит от того насколько серьезная проблема если проблема не очень серьезно ну наверное не стоит тут же отправлять sms-сообщения в 4 часа ночи если эту проблему все равно будут решать не знаю там в 10 часов утра ли в 9 часов утра на следующий день что еще вот и сканируем да есть возможность эскалировать проблемы то есть возникла проблема и дальше мы задаемся вопросом что с этим делать кого оповещать конечно мы отправляем сообщения там администратором администраторы что-то делают но я думаю вообще такой очень эффективный вариант это когда проблема с колеруется на уровень такой бюрократической бюрократического дерево до на более высокий уровень менеджеру может быть еще менеджер может быть дальше там силу и все конечно он не будет получать сообщение вида отвалился какой-то там диск валы он там что-то еще всего получит просто от zabbix и сообщение вида уже последние полчаса мы теряем деньги да то есть и и и все и тогда все понятно можно реагировать сразу возникла проблема мы тут же что-то делаем можно реагировать задержкой до то есть возникла проблема ну давайте подождем еще может быть пять минут и через пять минут мы мы мы отправим сообщению и тут еще что важно вот оповещение если автоматика не сработало то есть предположим у нас есть сервис он не работает мы сконфигурировали забег чтобы этот сервис сервис автоматически перезапускается и и как мы настроим эскалацию в этом случае настраиваем следующим образом сначала мы перезапускаем сервис и через десять минут если проблема все еще существует отправляем оповещение пользователям да ну либо идет дальше эскалацию на более на более высокие уровни и повторные оповещение это тоже очень важно особенно для для таких серьезных проблем какие-то вещи можно легко пропустить можно пропустить там эсэмэску можно пропустить email сообщение но для важных проблем все-таки надо использовать повторные сообщению это тоже такой очень хороший стимулятор такой стимул чтобы мы видим что до проблема существует и нам нам надо работать чтобы решить его как можно раньше ну и может быть такой итог да что тут важно история да мы основываем свои решения не только на real-time мониторинге на такую оперативной информации которую вот мы только-только получили но и смотрим в историю до в истории нужно обязательно смотреть то есть это это это это важно отсутствие проблемы не есть месте и решение но я привёл один пример там несколько примеров но на самом деле вот вот вы многие используйте zabbix практически все посмотрите критическим взглядом на те триггеры которые у вас сейчас есть да вот комбинация анализа истории с с гистерезисом с разными условиями для проблемы и для выхода из проблемы но она на самом деле творить чудеса да то есть это получается такое очень очень умное обнаружение проблем нужно обязательно использовать эту функциональность с аномалиями опять же мне трудно сказать и тут тут я повторюсь принесет ли это какую-то практическую пользу но по крайней мере стоит попробовать и что касается аномалии по поводу zabbix 30 до в zabbix 30 возможно опять же возможно мы реализуем так называемый bass line мониторинг что это означает это но bass line это есть некая норма да то есть этот bass line будет высчитываться из трендов то есть если сейчас все триггеры работают с историей то для bass line мониторинга мы будем брать информацию из из трендов из тенденций и будет возможность например сравнивать ну я незнаю поведение системы в рабочее время на прошлой неделе с поведением системы на этой неделе или сегодня да то есть мы что то будем брать за основу за нормальную ситуацию и сравнивать с тем что есть сейчас но это нужно для таких этот такой скажем так статистический анализ основанный на тенденциях на на трендах и вот автоматическое решение проблем наверное у каждого из вас если вы используете систему мониторинга есть такой класс проблем который но мы знаем что эта проблема произойдет рано или поздно да и с этим ничего сделать нельзя да я привел примеры может быть каких то memory leak или каких-то случайных падений операционной системы мы знаем что такая проблема есть оно произойдет она может произойти в любое какое-то время в любое время абсолютно соответственно вот автоматическое решение проблем это такое хорошее очень хорошее решение ну и eos коллируем проблемы до отличный стимул для администраторов если мы делаем и скалирование и скалирование не означает что мы скажем с коллируем вот вот есть администратор начальник начальник начальника начальник начальник начальника да и скалирование этот в том числе и означает что мы можем среагировать на проблему сразу одним способом дальше попытаться может быть автоматически решить и другим способом и дальше может быть через 5 минут если проблема все еще существует попытаться решить ее следующим способом сначала мы перезапускаем сервис проблема все еще существует скажем так все еще не завелся с первого раза что мы тогда можем сделать мы можем сделать мы можем перезапустить сервер на физическом уровне тогда уже смотреть что что произойдет спасибо спасибо большое за внимание и если есть вопросы то я буду рад ответить здрасте мне надо писать метрики раз в секунду и мне надо их писать 30 тысяч до zabbix это может нет да может а сколько железно до 30000 ну это секунду до в секунду я я я сразу скажу до какого уровня сейчас так масштабируется zabbix на ну так на скажем обычном жалею может быть не бюджетном да ну на обычном железе но это порядка может быть 50 тысяч проверок в секунду вся тысяч проверок в секунду один забег сервер то есть это вот тот уровень производительности которой можно среднем получить от zabbix а это что касается последней версии 2 4 версии 30 будет улучшению вот этого порога то есть мы над этим работаем сейчас у меня такой вопрос вот какой смысл проверках которые проверяют уровень у нас же если постоянно происходит проверки всех сервисов там и информация об этом у нас уже на этот момент должна иметься проверяем что вот например 855 перед тем как банк запускается что все у нас работали у нас же эта информация по сути она уже есть из обычных проверки лет не то мнения я согласен да конечно можно мониторить все постоянно да но иногда нам это не ну иногда можно этим не заниматься да то есть если мы знаем как ну это это такая гарантированная проверка мы знаем что zabbix точно 850 или 855 проверит все наши сервис это некий такой чек-лист иногда иногда это очень-очень важно например но я не знаю там банковской сфере мы допустим знаем что нам нужно закрыть финансовый день там до 2 часов ночи и вот перед двумя часами ночи мы проверяем что действительно мы сделали это это это все бэкапа запустили что он день перевелся и так далее если до двух часов это не произошло то тогда мы как-то идем по какой-то другой процедуре а то есть там соответственно вот эти вот триггер и alert и будут совсем другие для этой проверки чем для обычных да скорее всего будут другие немножко других да спасибо добрый день и спасибо за доклад интересует проблем flappy нга потому что действительно упоминали важные компоненты zabbix и это и соответственно и условиями nmax это гистерезис но ведь мы сталкиваемся ситуации следующий что допустим чайником 12 часов постоянно происходят события и гистерезисом описать их иногда бывает невозможно а планируется ли разработка каких-то методиками на либо подсветки плавающих триггеров например в том же на juice и то есть то есть то триггеров лапает хотя бы но дашборде инженер дежурный смены видит что триггеров плак-плак от того проблему как-то эскалировать по-другому чтобы эскалации включить а информации о том что он платит и что можно обязательно понизить приоритет именно для текущего триггеры для текущего срабатывания физалиса интервал там сутки хотя бы то есть чтобы исключительных поток ложных срабатываний ну да что можно делать сейчас сейчас можно создавать ну скажем 2 триггера то есть один триггер который будет такой защита от flappy нга а второй триггер это тот триггер который как раз и будет обнаруживать сам flobbing сам факт flappy нга то что можно сделать сейчас какая-либо такая подсветка триггера я не знаю только целесообразно это сделать но хотя если пользователи нас попросят это сделать мы сможем это сделать возможно добрый день у меня такой вопрос по поводу масштабируемости zabbix а в 30 планируется что-нибудь сделать вот например ветки 22 было такое понятие как ноды у zabbix а вот в 24 их убрали оставили только прокси нам прокси грубо говоря не хватает например zabbix сервер основной о на 15 минут каждый час занят housekeeper вам то есть загружен вот будет ли в 30 какая-нибудь возможность разделять вот эту нагрузку по нескольким забег сервером не ну дело в том что если у нас работает housekeeper тасс производительности будет сложно что-то делать даже если мы используем какой-то может быть другой там backend все-таки нужно использовать парте цианирование то есть мы включаем парте цианирование и отключаем вообще housekeeper то есть пока пропорциям бросаться него не об этом я может быть сейчас не буду говорить так его более подробному идею заключаются в том что мы большие таблицы делаем делим на маленький партиции вместо того чтобы удалять там запись за записью как делает housekeeper мы просто по сути удаляем целой партиции то может базу на этом ее за месяц на уровне базу до на уровне базой данных это для для zabbix абсолютно прозрачно делается что касается вот такого распределенного мониторинга или больше масштабируемости то да у нас есть планы для поддержку модулей для и store для хранения исторической информации в каких-то альтернативных engine of storage engine of the мог быть но и склеилось кайл там in memory и так далее в 30 пока этого нету да что касается распределенного мониторинга у нас есть такой проект внутренние когда мы можем один интерфейс использовать для просмотра информации с различных zabbix серверов нас есть скажем там десяток забег серверов у нас есть единое тот единая такая глобальная globe единый глобальный дашборд мы к этим этим даже бурным подключаемся к нашему к нашему десятку серверов и видим консолидированную информацию то есть это в такой стадии в экспериментальной стадии мы над этим работаем пасибо туда пожалуйста добрый день я бы хотел задать следующий вопрос вот вы рассказывали про систему мониторинга как она нам замечательно помогает а что делать если у нас сама система мониторинга упадет что будет мониторить мониторинг использовать 2 систем мониторинга не но на самом деле для для zabbix анусом сама система не может мониторить сама себя до нельзя ну там за волосы себя вытащить из болота соответственно используем какие-то простейшие не знаю там crontab там там монет так такие вот вещи для того чтобы следить работает ли забег селенит есть он не работает на его поднимаем обычно это делается так такое решение спасибо за доклад к сожалению еще не успел попользоваться zabbix am not коллеги слышал что zabbix хранится свою конфигурацию в базе данных для своей работе мы используем систему управления конфигурации конкретно сорт у меня вопрос как управлять конфигурации там по типу как с текстовым файлом или может быть есть какой то модуль не если у вас уже есть configuration management system то обычно это делается так в zabbix есть api через api мы можем управлять забег сам создавать узлы сети создавать айтемы триггер и так далее соответственно делается связка configuration management system и с забег сам как только вы узнаете что у вас есть новое устройство для у вас появилось новое устройство оно появляется в configuration менеджменте отправляется информация zabbix а через api тут же это устройстве начинаем мониторить то есть сам zabbix это не не configuration management system мы не пытаемся строить этот функционал в этот функционал мы пытаемся с интегрироваться системами с другими описании ну тебе пожалуйста добрый день добрый день давайте в за доклад два вопроса если можно первое это по поводу мониторинга уровня приложений дату или 20 есть dmx приложение планировать или вы еще какую-то интеграцию допустим там вот на этом учил чем и вопрос номер два связанный с вот этом бизнес среди да когда у нас готово приложение какая-то проверка осуществляется перед стартом бизнес дня допустим можно ли на после этой проверки подготовить какой-нибудь business report да чтобы это было не только в плане чеков с галочками а в плане какого-то текста точно такой же который можно было бы эскалировать и сразу вынести на менеджмент ну по поводу второго вопроса пока нет да то есть мы сначала сделаем эту функциональность дальше будем смотреть в каком направлении двигаться до то есть таких четких планов нету да по поводу первого вопроса мониторинг приложения но с мониторингом приложение сложность в том что разные приложения мониторится абсолютно по-разному да есть разные способы как это можно делать обычно если у на если мы знаем как мониторить наше приложение это прикручивается к zabbix у ну различными способами можно встраивать проверки и в саму приложения можно делать какие-то ну свои скрипты и синтетические тесты но здесь возможности здесь возможности много я не знаю может быть восклицает что-то конкретно тогда бы мог сказать ну понятно мне на самом деле интересует пока только то что зачастую бизнес-метки можно вытащить ну по сути только из базы до может быть какие-то дополнительные параметры еще было бы логично именно с уровня приложения не база тащить то есть но вот какие то connect и которые позволили бы смотреть как чувствуете предложение ну там без какого-то логирования вбд не но что сейчас можно использовать можно использовать скажем век мониторинг то есть вот такой and user мониторинг до что очень очень полезно бывает можно подключаться к базам данных приложений оттуда брать информацию там через audi бесед драйвера выполняя там select и и и анализируя информацию в за биг си то есть возможности сейчас достаточно много и ну да и может быть до последний вопрос спасибо спасибо за доклад у меня вопрос простой очень много метрик очень много серверов поддерживаете ли вы wildcard в именах метрик он соответственно скринах в триггерах и так далее они от wild card мы не поддерживаем и мы поддерживали шаблоны ну шаблон это не совсем удобная вещь например из шаблонов очень сложно делать гибкие скрины например когда сервер добавляется и его нужно руками создавать из этого шаблона очень хочется чтобы метрика новая прилетал естественно подпадала подвал к понятно же что кельского на который автоматически может быть стараются ну пока нет такой функциональности памятка небось и еще один вопрос нет это был последний вопрос извините хорошо спасибо спасибо большое за внимание спасибо за ваше время на спасибо алексин"
}