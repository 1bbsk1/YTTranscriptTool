{
  "video_id": "hMIXTiKAVoA",
  "channel": "HighLoadChannel",
  "title": "Ранжирование откликов соискателей с помощью машинного обучения / Сергей Сайгушкин (Superjob)",
  "views": 1527,
  "duration": 1698,
  "published": "2018-01-16T12:26:41-08:00",
  "text": "так добрый вечер я сергей саушкин ведущий разработчик команды поиска с портала superjob.ru и сегодня я расскажу про ранжирование от криков соискателей с помощью машинного обучения superjob это крупнейший портал по поиску работы ежедневная наша аудитория составляет 1 миллион пользователей которые разместили на сайте более 20 миллионов резюме соответственно ежедневно для них открыто 250 тысяч вакансий на которые приходят три за 1000 треков в сутки и данные оптики конвертируются в 1 миллион приглашения месяц от наших работодателей superjob.ru это не только печь пятна джесс мы с келли но еще и такие редкие языки как эликсира ярланд на их у нас написан приборка бы тестирование коллектор для записи вертик у и сервис почтовых рассылок также есть кластер сфинкс для полнотекстового поиска и кластера ветки для аналитики на 15 процентов наших локаций приходится более ста от ликов за сутки многие из данных откликов вообще не соответствуют вакансии являются и релевантными recruiter приходится самостоятельно фильтровать данные отклики и это осложняет и замедляет подбор кандидатов например у нас на сайте открыта вакансия ведущего пички разработчика и на данную вакансию помимо пищи и разработчиков отвлекают откликаются программист 1с технические писатели и даже директора по маркетингу и рекламе с этой проблемой надо что то делать мы решили для себя определять нерелевантные отклики и писи визировать их списке личном кабинете работодателя таким образом мы получаем стандартную задачу классификации на два класса класс подходящих откликов и неподходящих и даем возможность recruiters фильтровать отклики по данному признаку соответственно в докладе я расскажу про подготовку данных и про обучение модель а про внедрение модели в продакшн и мониторинг метрик качества и про оба тестирование полученного функционалов скоренко recruiter ах подготовка данных для обучения это принципе один из самых важнейших этапов и от того насколько тщательно вы подойдете к данному этапу во многом зависит ваш успех всего проекта с машинного обучения мы обучаемся на событиях отклонения резюме и приглашение на собеседование то есть это событие из личного кабинета recruiter а наши выборка состоит из примерно 10-12 миллионов событий за последние 3 месяца для соответственно если recruiter приглашают соискателя на собеседования значит данные отклик являются подходящим а если recruiter наоборот отклоняется искать или даже не рассматривая вот такой отклик мы считаем и релевантным вакансии для каждой вакансии мы проверяем распределение приглашение на собеседование и отклонений и соответственно мы не обучаемся на вакансиях которых количество отклонений значительно превышает количество приглашений или наоборот бывает вакансии на который recruiter либо отклоняет всех подряд соискатели либо всех приглашает такие вакансии будь то же считаем шубами и не обучаем солдаты сигналах на графике я привел 100 грамм о распределения приглашений на собеседования здесь видно что в среднем recruiter приглашает на собеседовании порядка пяти шести кандидатов на одну вакансию вот по оси икс это количество приглашений на собеседование для 1 вакансия по оси y количество вакансий а pobox плату важно ценить идеалу количество приглашений на вакансии и верхней и нижней квартире также в нашем примере мы видим что вакансии с количество приглашений более 14 являются выбросами и стоит обучаться на них следующий график это соответственно распределение отклонения резюме здесь видно что recruiter по 1 мпа одной вакансии отклоняет примерно 8 9 кандидатов и выбросами являются вакансии с количеством отклонений более 12 после того как мы первый раз обучили модель мы построили матрицу ошибок в разрезе каждого recruiter а у нас выявился кластеры круто вот с которыми наши модели и очень хорошо справлялась по сути она не укладывала их действия мы начали анализировать лог поведения рекрутеров на сайте и обнаружили странную закономерность данные рекрутеры приглашают на собеседование соискателей вакансий вообще из другой профессиональной области ежели профессиональная область их их vacation то есть резюме кандидата в принципе расходилось с описаниями вакансия мы начали копать дальше по и выяснилось что большая часть данных рекрутеров это recruiters с безлимитным тарифом то есть по сути у них полный доступ к базе и просто берут количеством и качеством то есть приглашают всех подряд на собеседовании таким образом пытаются быстро закрыть вакансию и данных рекрутёров мы добавили в черный список то есть на действиях данных рекрутёров дальнейшем и не обучались так как они формируют по сути и правильный сигнал самый запоминающийся пример такого recruiter а был был с рекрутером который разместил вакансию полицейского на московский метрополитен видно что recruiter приглашал на вакансию полицейского продавца грузчика актера торгового представителя с личным автомобилем кого угодно до порядка 90 приглашений и отклонял сотрудников национальной гвардии и полицейских а вакансию полицейского собственно может быть данный recruiter просто перепутал в личном кабинете там кнопки от кладите и пригласить на собеседовании возможно такое было это самый запоминающийся пример нашего к наша модель а просто для нашей модели мы были выявили порядка 170 признаков все признаки астаны так или иначе на свойствах вакансии свойствах резюме и сочетаниях данных свойств например есть группа зарплатных признаков собственно сама желаемая зарплата резюме зарплатная вилка из локации и факт попадания желаемая зарплата резюме зарплатную вилку вакансия тут как пример сочетания фич также мы работаем с категориальные признаки путем гитарного кодирования например а вакансии есть требования познать одного из иностранных языков или категории водительских прав соответственно все данные фичи раскрываются в группу простых бинарных вич здесь принципе все об этом знают чего сложного нет по работе с текстовыми признаками весь текст мы очищаем от стоп-слов от под гту ация и прогоняет через либо тайзер мы использовали использовали либо тайзер от яндекса бай степ основное достоинство данного limo toy zero в том что он еще умеет очищать какие-то ошибки то есть можно устроить в грамма можно прогнать через текст через массив таким образом исправиться опечатки далее из всех текстовых признаков мы формируем соответственно тематические группы и по каждой группе обучаем свой tf year никто райзер в итоге мы имеем полу обычная тв дефекта rivers корпусе профессий на всех требованиях вакансии ключевых навыков резюме обязанностях вакансии и обязанностях с предыдущих мест работы с из катера в качестве примера можно привести фича ира сходство между профессии резюме и профессией из вакансии соответственно мы получаем из уже обычного ранят f1 как-то райзера два вектора профессий дальше вычисляю между ними касается переварите это косинус угла между двумя векторами вычисляется достаточно просто путем скалярного умножения двух векторов таким образом мы получаем меру сходство двух фраз в процессе федерации признаков мы обратились за помощью к нашему исследовательского центра который провел на сайте опрос для рекрутеров целью выявить наиболее значимые признаки который использует recruiters для того чтобы пригласить соискателя на собеседование и наоборот отклонить ожидаю вас среди данных признаков брюс большой большой пул признаков основанных на опыте работы то есть это просто опыт работы средняя продолжительность работы на одном месте и не маловажным являлся факта продолжительность работы именно на последняя песня то есть маги recruiters смотрят оцениваются искателя именно по его последнему месту работы естественно пыли зарплатные фичи текстовые фичи меры сходства вакансии профессии так далее одно из интересных фич была эра сходство между текущей вакансии текущей профессии из резюме соискателя и всеми профессиями между его опытом работы то есть recruiter хотел понять является ли данная профессия для соискателя новый или он уже по ней работал имеет какой-то опыт для реализации задачи классификации мы использовали алгоритм градиентного бусинка и его реализацией jboss подробно про я не буду подробно останавливаться на оптимизации гипер параметров данной модели страдаете от достаточно много гайдов достаточно пол доход например поверх не ссылки гайд про тюнинг с использованием грехи виде socket лед а по нижней ссылки гаец использование библиотеки гипер оптом принципе рекомендую гипер а потому что он подбирает параметры чуть быстрее чем точнее нежели пресечь сие в итоге мы остановились на 5000 на пяти тысячах неглубоких деревня с максимальной глубиной 5 после того как мы обучили модель мы смогли собрать статистику поздно чему признаком ожидая посреди значимых признаков оказались опыт работы соискателя все признаки которые посоветовали нам recruiter с опытом работы естественно зарплатные фичи факт попадания зарплата резюме в зарплату вакансии разница между нижней границей и верхние границы зарплаты вакансии так далее также в пуле значимых признаков были большие был большое количество текстовых признаком уже упомянутой ранее мера сходства между профессией резюме профессии вакансии между обязанностями вакансии обязанности с предыдущих мест работы с искателя между требованиями вакансии ключевыми навыками резюме и так далее также в топе признаков оказалось признак возраст мы решили провести эксперимент и убрать данный признак так как не хотим дискриминировать наших соискателей в итоге после обучения модели в топ признаков вылез признак количество дня с момента получения высшего образования который очевидно коррелирует с возрастом но мы не остановились на этом и убрали также этот признак и заново обучили модель в итоге после всех манипуляций с возрастом мы увидели что метрики качества бога просели в итоге мы решили вернуть возраст так как recruiters массово подборе обращают внимание на данный признак но для соискателей возрасте мы компенсируем очки скоринга то есть если у них отклик является и релевантным назначение скоринга близко к элегантному мы автоматически переводит до ночи как релевантным так как считает что это возраст искатель оптимизировал его резюме после нескольких итераций по обучению модели по генерации течь по подготовке данных мы получили модель с неплохими на наш взгляд метриками качества то есть доля правильных ответов было 0,05 значение рока ук была близка к на целых 80 это значение рока ук можно интерпретировать следующим образом то есть это вероятность того что случайно взятый объект из реле вотак что для случайно взятого объекта из релевантного класса значение скоринга будет выше чем чат для случайно взятого объекта из 0 класса то есть посмотрим то есть он оценивает разделимы выборка или неразделимо престижем по первому классу нас был 5,73 recall ноль целых 8 4 соток в принципе мы не останавливаемся на данной модели и постоянно проводим все новые эксперименты сейчас она запущена два эксперимента один по наполнению списка синонимов профессии с использованием док-ты век док-ты век это реализация принципе алгоритма во рту век только для слов а для набора текста то есть по набору текста вычисляется какой-то вектор дальше можно делать также арифметически 1 и собственно список синонимов мы решили наполнить для того чтобы как то объяснить нашей модели что вакансия ведущий пички разработчик и север печи девелопер по самом деле а потом том же то есть это не разные профессии также работаем математическим моделированием поверх описание вакансии описание резюме с использованием библиотеки пик и карты мы хотим получить из резюме и из вакансии набор ключевых тем а дальше как-то спешите посмотреть на то какие темы совпали какие темы не совпали но пока это все только в экспериментах также нам было необходимости снизить количество ошибок второго рода или количество ложно или коли количество ложно отрицательных срабатываний то есть на было необходимо чтобы как можно меньше резюме которая мы проспорили как и релевантное были на самом деле релевантные то есть просто должны были петь и визировать толстая видим ошибку решили данной задачи у путина по снижению отошел до вероятности принадлежности к релевантным класса но естественно это имело обратный эффект количество фоллз позитив ошибок у нас и значительно возросло и престижен по первому классу чуть-чуть просел но совсем незначительно зато количество вслед фоллз негатив ошибок мы снизили примерно раза в полтора по сравнению с тем что было а теперь про реализация непосредственно данной да но функционал скоренко в продакшн и поверх модели на прикажи boost мы построили простейший rest api а и использование микрофиброй парков ласк паковали это все в докер контейнер и развернули на сервере а servers так-же старту its a web сервер с одним мастер процессом из 24 24 процессами worker которая параллели цыпа-цыпа теперь про pipeline когда соискатель откликается на вакансию на сайте данный факт попадает в рыбе тапки очередь после этого обработчик очереди получает данное сообщение подготавливает данные подготавливают признаки для модели получает объект вакансии получает объект резюме формирует джейсон и просто заправь запрашивает от по interest мтс коренко далее сохраняет результат скоренко в базу данных для последующей фильтрации рекрутера по данному признаку мы сначала хотели сделать скоренко в режиме онлайн то есть после того как recruiter заходит свой личный кабинет выпирает какую-то вакансию смотрит отклики и мы вот за это за эти 100 или 120 пересекут должны были просторе все его крики нам с или количество вакансий а количество откликов на некоторые вакансии их может быть более 10000 и среднем время работы от для одной пары скоренко зимой вакансии в итоге пришли вот к данной асинхронная реализации то есть принципе других вариантов не было только синхронно только через очередь самую большую нагрузку на наш сервис вскоре или генерируют и пользователи которые откликаются на сайте создает наш собственный сер сервис почтовых рассылок называемой подписки на резюме то есть данный сервис начинают работать пару раз в сутки и советует нашим рекрутером соискателей на их вакансия естественно результата работы данного сервис сервиса мы также должны просторе чтобы советовать recruiter at только релевантные отклики в итоге в пике работы мы обрабатываем порядка 1000 1200 запросов в секунду на данный момент это не проблема а если количество запросов значительно возрастет мы поставим рядом 2 3 сервер и масштабируемой 5 горизонтально собственно пару вскоре зима вакансию на затрачивается примерно 45 сотых секунды для того чтобы про вскоре все наши отклики это порядка 50 миллионов активных откликов нам требуется там 18 20 часов практически сутки с одной стороны это большая цифра но с другой стороны мы перечитываем скоринг достаточно редко только в тот момент когда мы внедряем в продаже в какую-то новую модель из этой проблемой на данный момент можно как-то жить после того как мы рисовали в финал скоринга бы сразу же настроили мониторингу jiang нити скрипт несколько раз в сутки окружает is where ticket текущие события которые генерируют работодатель это отклики приглашения отклонения резюме и смотрит как подобными событиями справилась наша модель потом он формирует стандартно матрицу ошибок считает метрики и отправляет данные в грозит в качестве бонуса мы параллельно можем сравнивать метрики одних и тех же данных по нескольким разным моделям то есть когда мы разрабатываем какую-то новую модель и сразу внедряемые в продакшн поставим ее ряда вскоре результаты старые моделью новой моделью и всем extreme x3 экспериментальными моделями сохраняемых базу данных а потом на графиках смотрим как на текущих данных с protection отработали наша экспериментальная модель а лучше чем текущая модель продакш или хуже вот например на графике видно три модели под самым верхняя линия это по нашей текущая модель которая в продаже они же две линии это предыдущие модели одна из которых вот самая оранжевая sound низкие значения прокоук это одна из наших первых реализации модели скоринга с престижем то же самое почему важно сразу настроить мониторинг с одной стороны вы будете уверены в том что метрики качества пап отеля значительно изменились и и просели с другой стороны так же вы будете знать что все все этапы работы по спаррингу работают как надо и штатном режиме у нас был в процессе у нас был один небольшой инцидент связанные с этапами поскольку мы заметили что значит назначение при сижу у нас чего pride проседать начали анализировать и увидели что модели никоим образом не обрабатывает вич и которой основано на опыт охрана опыте работы после этого начали копать глубже как бы почему так оказалось что вы сами не посылаем модель данные фича то есть мы ники гидры мы начали разбираться и оказалось что соседний команд из искателей изменила формат хранения опыта работы в базе данных а наш код скоренко был к этому не готов соответственно мы данные метрик данные фичи достать из базы не могли и модель передать не могли в это быстро поправили метрика стабилизировались вот это непосредственно реализация с коротко о личном кабинете работодателя после того как работодатель строят отклики на си вакансия ему становится доступно 2 тапа подходящие отроки и неподходящие в качестве примера опять даже самая вакансия ведущего печки разработчиков superjob и видно что печки программист быть даже и ведущий прав курился успешно восток разработчик сознание пички также про вскоре вася успешно а программист net и руководителя идти попали ожидаемого в тапки подходящая то есть по сути это спал на данную вакансию модель отработала правильно после этого мы завели apts от наших recruiter ах и для себя выявили следующие метрики это количества присланных резюме приглашенные число приглашенных резюме конверсия открытых вакансий в закрытые число закрытых вакансии и количество дней до закрытия вакансии недавно мы подсчитали результаты данного оба теста и видели статистически значимый прирост всех метрик все теста вы проводили с уровнем значимости пять процентов это означает что в пяти процентах случаев это означает что существует 5 процентная вероятность это пустить можно положительно и срабатывание и отклонить нулевую гипотезу в том случае когда на самом деле наверно после проведения бы тестирования вы собрали обратную связь с тех рекрутёров которые попали в сегмент каналов скоринга непосредственно пообщавшись с рекрутерами мы поняли что по долам они пользуются функционал для массового подбора работает они стали затрачивает чуть меньше времени и не наблюдать тот спам который был до внедрения фича в качестве заключения такие небольшие капитанские вывода самое главное процессе обучения модели это обучающая выборка от того насколько точно мои почистить и насколько тщательно вы подойдете к про караване обучающей выборке будет зависеть ваш успех естественно надо фиксировать родном стыда вот открыли юпитер ноутбук за пиксель зафиксировали рост обстоит это сразу первым делом и по продакшна нужно настраивать мониторе мониторинге метрики качества так как может измениться само поведение пользователей зачастую просто меняется какой-то код который работает рядом с моделью и как какой-то из этапов работы просто перестает работать то есть это нужно мониторить и это нужно отслеживать процессе работы на помогали ребята из компании do the stars что я большое спасибо и завтра 6 июня 1800 в этом же зале будет так лад и кит аспирина сооснователя компании про применение машинного обучения для генерации структурированных сниппетов в поисковых системах по трудоустройству так для для участников данной конференции мы создали промо-код и 2017 для доступа к superjob вы можете размещать вакансии активировав данный код в разделе обратной связи и у вас будет одна неделя доступа по тарифу по безлимитному тарифу собственно вы также можете слать все об спал как вот плакать и полицейского все спасибо за внимание ваши вопросы вопрос вывод всю эту рокенса что сейчас рассказывали применяли для того чтобы вот эти два тоби к сделано touch не применяли отделали для того чтобы эти два the big и сделать я ошибаюсь и или на самом деле это гораздо важнее в плане того чтобы предлагать резюме работодателю по его вакансиям тех людей которые не откликаются ведь эти уже откликнулись они же на себя внимание обратили а те кто не откликнулся их то найти сложнее и вот тут ваша схема она как бы мне кажется гораздо важнее а вы как раз статистику вот эти вот процентики показали по to become насколько я понял да вот про это можете что скрыто смотреть от нас есть сервис по рассылкам который как бы который просто рекомендует и круто росы искателей вот он работает на базе ты же схемы потребности там взрывной проценты должны были быть то есть на 5 10 а там 50 он работал он работал ранее и взрывы не произошло после применения сша 3 ч после того как данный сервис отработал то все отклики они доступны в личном кабинете сразу же это отклик это когда люди нажали откликнуться так как горой кандидаты на жилетке только это отклики кандидатов и отклики сгенерированной сервисом подписок то есть это все соматически достойно у вас не так работают просто как я думал тогда получается то есть получается это beta key оба тестирование повод личному кабинету то есть по всему наоборот кликов и вопрос спасибо за доклад у меня вопрос больше функциональной части вы не показываете пользователю что у него отлипни релевантный когда он отвлекается ok не думаю что это бомбезные идеи это прикольно ему говорить что ты типа зря это делаешь прекрати вот тебе вакансии которую тебе подойду типа хватит мутить воду да нет мы советуем пользователю вакансии с искателю вакансии и говорим него что что-то ты неправильно делаешь может быть о напиться в конечно аналогично зачем обижать людей спасибо большое за доклад у меня такой вопрос насколько тексты с которыми вы работаете грязные насколько у них всякие там отпечатки сокращения или прочий трэш присутствует смотреть во первых у нас два уровня 1 уровня то модераторы то есть квадрат и а моделируют есть модератора вакансии которая моделирует вакансия они проверяют опечатки и есть модераторы резюме которые также очищают резюме то есть по сути там количество печаток минимально а потом мы прогоняем текст через либо тайзер pst и он также исправляет какие-то опечатки или какие-то вкрапления например найти латинице русскоязычный текст хорошо мы просто следующая так а там как раз вот много проблем у нас опечатками еще вопрос тоже спасибо вопрос такой вы говорили что возможно ну вы отказывались от возраста потому что это не очень пропал есть что-нибудь об а вообще не об авто тысяч то есть вас вообще как-то не коррелирует это получается абсолютно все у меня есть вопрос скажи пожалуйста пробовали какими другие модели кроме игры boost пробовали обучали но метрики качества там были не очень поэтому вы сразу пробыли обучали sakit леоновское реализацию огради от бусинка это самом начале большая часть работы мы делали на сайте тления потом решили сделать на их же пустых же блуждал незначительный прирост по сравнению с wicked леонов но в итоге выбрали production модель которой работает лучше а все модели которые не основаны на градиент на бусинки и показывали beat rock близкие к 0 5 по сразу этих отказались спасибо все башни вопрос тогда cyrus спасибо за доклад"
}