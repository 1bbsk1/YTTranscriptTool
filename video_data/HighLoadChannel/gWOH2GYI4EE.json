{
  "video_id": "gWOH2GYI4EE",
  "channel": "HighLoadChannel",
  "title": "Как устроен один из крупнейших российских WAF  / Денис Кораблев (Positive Technologies)",
  "views": 6736,
  "duration": 2240,
  "published": "2023-01-19T05:55:17-08:00",
  "text": "всем привет из корабля в завод и я в двух словах расскажу как про что я собираюсь рассказывать web applications firewall и вообще firewall это очень большой продукты сложный и за полчаса как у нас время доклада наверное его не осветив поэтому я взял только две грани вокруг которых будет мой рассказ построен у а потом если будут вопросы там в конце будут контакты можно будет спросить у меня лично напрямую или поздно это все конференции вот соответственно заявлено история с тем что на самый визионерский вов я подростковые почему объясню в чем здесь проблема с холодом и соответственно буду уже объяснять как мы ее конкретно решили пара слов почему я про это вообще говорю я в прошлом разработчик и тимлид я думаю что прошлом разработчиков тем рядов не бывает это все актуальные до сих пор я делала light and high frequency истребить распределенная система и с семнадцатого года поместив technologies работаю отвечаю за обрекаешь и security в том числе апликэйшен security то большой домен защиту приложение в целом не только для защиты веба не только fair воллинг вот например я футболочки applications спектр это наш анализатор кода статический который не только все сиди у мисс травятся как многие другие анализаторы но еще и выдержки подсвечивать красненьким подчеркивать и уязвимости которые потенциально пишите нам про него другой раз но вообще оставил нас компания тысяч триста человек 650 примерно разработчиков но индия медицина не только разработчиков и много чем занимаюсь на установку security и не только в россии про сам продукт несколько цифр но просто контекст был рад вам с двенадцатого года делается то есть у меня по наследству достался не я его придумал нас много людей над ним успела поработать на текущий момент где-то 65 человек над ним работает это и разработчики и тестировщики и you a и x и вообще все кто продукты причастием где-то 1000 с лишним активных инсталляций текущий момент нашей стране и за рубежом я смотрел в прошлом году где-то порядка 15 процентов мы были не в россии с 85 в россии нас много разных интересных историй когда мы продукт вставляем как уайт лейбл у нас просто переклеивать наклейки продают достаточно известные бренды под своим именем за рубежом принципе от нашу модель продажи за рубежом мы стараемся наш сам бренд и пушить и что самое главное это как раз та самая картинка про то что мы были визионерами 15-17 год gartner сейчас соображу как это показать то вот так вот вот она эта картинка вот тут видно что правее нас немножко им 1 вообще как этот картинку надо читать да есть вертикальная вас есть горизонтальная ось по горизонтали это визионер ства точнее как этот картер называет комплит нас освежим а по вертикали и the ability to exclude по сути это мощность силовой машинки покрытия рынка вот по горизонтали соответственно fm и справа от 15 года там далеко впереди многих других вендоров потом сверху и в 5 мы во многом видели россии тоже сверху но проверим первое остальные в принципе ну как бы особо не встречали и 15-17 год мы были страшно справа то есть это говорило о том что мы именно потому как сути вы задачу решать выделялись на общем фоне потом картер сменил критерии попадания в этот список там больше требовал доказательства географии присутствия минут в северной америке и мы просто забили на эту историю понимаю что наверное у нас и нет такого покрытия не очень хотим его доказывать но при всем при этом все эти три года у нас был такой плакат 8 пор висит том что мы единственный продукт который супер сердце в реестре российского по является видео нервам картера это правда так когда мы говорим про класс этих продуктов есть эти три слова web application firewall к чему их так расшифровал тут очень важны в сейчас на самом деле когда вот начинался от продукт двенадцатом году в скорее подразумевался что такой ламповый стек патч не знаю там майский по сгрыз что угодно такой простой пищи сейчас в пэт уже там 20 в псаки ты вообще модные молодежные приложений и все это веб и все это нужно защищать applications все что не в пту applications для мобилки бкм да и всякие там хай-лоу сервиса но еще и самое главное что это firewall это значит что это стоит в разрыв я когда начал заниматься этим продуктом я было увлекательно несколько историй когда ездила сильным мира сего российского рассказывала почему наш продукт например упал на пять минут год потому что это было неприемлемо что-то там отъехала не работала там не знаю там какие-то банки крупные летом посольство или что-то в этом роде и при этом там 95 процентов случаев даже не наша проблема была но как выяснилось от strong устроил устроен таким образом что критичные в ресурсе они заказывают клиенты заказывают дополнительную услугу разных поставщиков которые время от времени fitch от сайт проверяют его на доступности такую табличку предоставляют когда сайт был недоступен на каждый рассказывал недоступен предмет расследования и вов как правило там как первый крайне то есть начал а это вов видите докажите что это не он это прямо увлекательно такая работа для помню разок там ночью поставили перед нами балансировщик он начал применять айтишники все заходы клиентов оказались с 1 и печника мы решили что подбирают пароль заблочили его и соответственно получили всех вот и как бы вроде ничего плохого не сделали в результате интернет-банк низко часов не работал это я к тому что в принципе предмет к сложно и сложно так вот сходу сделать такой продукт ну естественно мы там работаем над козу существа тоже у нас есть кластер и разного рода но они сегодня за скобками останутся простая как бы что вы понимали что это не просто там атаки ловить это еще и сложный эти продукт глобально внедрить вов это вот две истории либо клауд либо он прям наверно не секрет ни для кого что россии с клаудом не очень вот если в claude этом кличку пола православная тогда в принципе иногда ну нормально к нему относится ну скажем не знаю там конь не буду называть названием все на прекрасной так понимают но нашего ключевые клиента мы в основном работаем с кровавым энтерпрайза money облака не очень любят вот то максимум приватные максимум на какому типу стойки которые сами переписали и мы так традиционно больше сторону он примет смотрим и смотрели сейчас уже конечно на облака тоже но вот вот он примет наш основной вектор вот там глобальный из 3 подхода как можно внедриться раньше там делали снифер и на копий трафика часто уже совсем не актуально потому что диффи-хеллмана алгоритм если включить то там даже имеют сертификаты ничего не прочитаешь поэтому это как бы такая история скорее из древности а вот transparent proxy реверс прокси они до сих пор используются вот transparent proxy это достаточно интересный режим когда мы притворяемся тем что мы backend для бэг-энда мы притворяемся с тем чтобы клиенты есть нюансы с тем что по сути обманываем сеть и в любом случае если не дай бог кто-то когда-то поймешь что мы ним это сейчас лежат голова они начинают там думать что там петля или еще что с этим вроде вроде то есть это хороший режим для того чтобы продемонстрировать в работу но как бы в прод это очень редко ставят на реверс прокси от когда все действительно и конфигурируется вов становится дополнительной блокировщиком как правило потому что твомфа редко хотят только защиту еще и там что зря железо сжечь давайте пусть он еще и трафик раскидывает и так далее поэтому ну вот если говорить про ключевой основной режим это реверс прокси в сетях вон премия такие вот хардварные решению основном вот еще дополнительно есть пара новых историй которые в этот рынок пришли здорово что появляется кубер найти здоров чтобы появляются кластер а вот и один из вариантов это когда мы сайт корр контейнерами можем ехать к вернитесь и либо же если уже джеймс настроен и приложение умеет коллировать это можно в джинкс подложить наш love вот и откалибровать приложение сильнее задачу скорее всего решена и поэтому это достаточно просто и прозрачно так вот какой же челлендж то есть вот это вот все был были общие слова вот это вот завязка то есть одной стороны у нас реально из проект 1 которым там миллион рпс сотни тысяч в принципе встречаются достаточно регулярно при этом все вот эти пять девяток это не шутка они правда так то есть больше пяти минут простой год вообще недопустимо там даже в контрактах такой вписывают но и самое главное требуется реальная защита это самый сложный поинты буллит и это вот основном про визионерского на вот метод посчастливилось в компании мне такую задачку дали посмотреть на один из сегментов продуктов и выбрать чем-то российское что может быть там купить для того чтобы свой продукт на базе него сделать вот я посмотрел как принципе сделать российский продукт и большинстве своем не буду там никого пальцем показывать на часто это open source сертифицированы по стыку свою ой не всегда целиком вот с точки зрения защиты там часто просто выключают очень не понимаю то есть там что тормозит но мы выключили сигнатуру как бы да но вот и вот этот самый грусть потому что ну как бы мы изначально по другому к продуктам подходе мы всегда и стараемся делать исходя из того как они должны защищать а уже потом думать о как же сделать так чтобы там нагрузку держал и 5 девятка выдавал вот но мы знаем что тут были известные события не так мы хотели чтобы захотели реальная безопасность честное слово но как бы жизнь сложилась так сложилось то три картинки это реально 2 про то как сами компании говорят о то что у них проблемы и последний это известный там пост в самом начале то что все будут атаковать и тот важные цифры сто процентов вот у нас есть белый хакер и которые ходят и нашим клиентам показывают изъяны их защиты и вот если в компании не просто сайт-визитка и хотя бы есть несколько десятков х 100 вт а еще ни разу не было такого что они смогли сделать финт с через wap всегда получается прям сто процентов результат говорит о том что одни люди вместе закрывают появляются другие эта вся штука живет в процессе ничего не помогает и то есть это правда жизни вот тут немножечко в двух словах про наш подход как мы в целом делаем все продукты но и applications for в том числе то есть у нас есть одной стороны offencive команда то есть те ребята которые бывшие хакеры сейчас они белые хакеры они правда умеет ломать ломать профессионально сто процентов результат и они когда ломают они конечно же накапливает экспертизу которую могут куда-то вложить в том числе продукт езди францев команду всякие мероприятия чемпионата мира по футболу одни версия выборы не дай бог какие-нибудь вот ну все вот это вот назову тоже защищать они на наших новых продуктах могут оказать сервис защитить то есть настройки правильную посмотреть что они там поймали так исправить какие-то фазы нормальные сработки проанализировать глубже заблокировать эти атаки и так далее и но истец никто не отменял в принципе линии тренда индустрии twitter и блоге апеннин maker и все это мы следим смотрим как бы сами туда кантри beauty и вот эти все ребята которые мы с компании есть а у нас где-то сотни белых хакеров где-то там тоже больше сотни защитников мы по сути делаем для них такой инструмент в которой они могут свои знания приносить потому что себя не нам в бак локти вскидывали мы это писали в продукт в код но это было бы бесконечно долго и они быстро учатся участия не чувствовали поэтому тут скорее история такая что мы как продукт делаем такой from where для того чтобы туда можно было кантри бьетесь вот эти знания о том как ломать как защищать чтобы это было всегда актуально ну естественно это быстро доставлять до клиентов я не буду читать наверное этот слайд тут главная мысль заключается в следующем что когда ты на заре это всей истории были вот эти вот атаки owasp top team все наверное краем уха слышали прайс квелен лекции экс ссср ф и так далее такими там подмены путей вот и как бы де-факто в голове многие до сих пор думают что вов это вот она мы тоже одним защищаем конечно же и там появляются иногда новые виктора или какие-то свежие идеи но в принципе такой базовый базовый уровень там который давно у всех есть а вот если мы говорим про то что действительно актуально то ну вот не знаю последние события не часто приводили к тому что он сердито случается то есть это не видос на третьем уровне когда сен флудом заваливать сервера или там просто много пакетов посылают много collection of открывают от скорее история про то что в приложении находит какой-то очень тяжелую ручку не знаю вывести последние там не знаю транзакции за три года там в интернет-банке и дергает ее но и достаточно вернуть 1 200 приложение ложится как правило вот и вроде как это не где-то с точки зрения или три но прям adidas точки зрения иллюзиями и вот такие вещи как бы часто являются тоже задачи вафа те же самые даже стандартные атаки связаны это ms sql инъекции и так далее они ну как бы интернет вашими всегда если включить любой firewalls натравить на сайт там постоянно будут какие-то атаки потому что ходят боты они что-то scanid кто-то пытается применить какой типаж как он студент выучил что он хакер как бы пошел чинить там ломать вот там постоянно дашборд будет с чем-то если эти скрыли атаки у нас с в этом все потоки будут тонуть ну как бы мы не заметим то что действительно развивается поэтому мы всегда искренне читать что нужно следить только за очень редкими но очень важными вещами то есть например кто-то начинает подбирать связанных с началом имя таблицы ищет потом количество колонок потом еще что-то и вот этот идет развитие сделать несколько дней вот соответственно такую атаку нужно приобрести за ней следить это прям отдельный механизм то есть то есть у местом для этого используются те же самые баты скреперы они тоже к ним разные отношения той с одной стороны вот я знаю одного онлайн ритейлера который говорит скреперы думаю смотрим чая печник идем к ним даем логин с паролем и пусть качаю хотят типа да мне жалко как бы нам они сервер грузись нафиг они нам нужны вот в сами выгружаем цену и пусть там попробую сделать дешевле нам тоже интересно будет вот и другие таки говорят но нет мы в облаке запускаемся они ходят нас к нет а это наши деньги давайте-ка мы их срезать будем вот бывает там знаю какие нибудь там боты которые ну индексируют да мы их там отрезали тоже плохо ну то есть и это вся история она как бы про вов и есть еще ошибки без услуги ки они тоже прям последнее время приобретают тренд и смотрел как статистику наш контраст панкин тестов и там процентов семьдесят пять наверное взломов они идут через именно поиск бизнес слойки ошибки не знаю там какая-то а фишка например не проверяет авторизацию какая-то другая выплевывает лог в нем есть айдишник его можно поставить другую пешку бах-бах-бах и таким образом что-то получилось технически вот такие средства защиты которые без то это приложение они не знают о том что у него внутри они такие атаки по так поймать не могут и это тоже прям отдельная история как сделать так чтобы вот вот конкретно на этом приложении а вот давайте такие атаки прям научимся ловить нас был такой пример не буду называется конкретно ночью история такая что параллельно с бесплатным сервисом одни ребята построили платный они научились за счет ошибки бизнес-логики быстро выбирать бесплатные лимиты одной штуке он параллельно за перелезать на котором они продавали вот и также или несколько лет в принципе ну то есть там там истории в том что последствий шагов должна была быть строго я не заходили сразу последние забивали там в ресурс а потом откатывались назад и заполняли все поля и такое сплошь и рядом соответственно вот такие вещи вов тоже умеют как восстанавливать и защищать его для того чтобы это делать у нас прям есть разные кубики которые позволяют писатель них правило что ты буду тоже подробно разжевывать но историй в том что мы имеем используем и грамматики проверяем вот но основная ключевая мысль этого слайда в том что мы понимаем для того чтобы наша машинка работала правильно то что у нас есть offense defense в которой кантри beauty product у нас есть эксперт а у нас есть там тренд и узи масти появляются на предложенный перейти в ней язык оперативный правильно тот на котором можно писать правило не просто там регулярке еще отдельно скажу почему про регулярке заговорил стандартный подход wofi это просто много-много регуляров хотим ловите лекции будем искать кавычки соответственно там человек там familie д'артаньян не сможет зарегистрироваться но как бы ладно ничего страшного не так много таких вот но как бы в целом конечно это очень такой грубый механизмы мы естественно такого не хотим и это только про инъекция если мы говорим про какую-то более сложную логику то нам точно требуются более сложные механизмы соответственно когда ты давно мы тоже начали с регулярно кно пришли к выводу что нам нужно прям давать возможность писать код и вот он как бы основной челлендж с одной стороны мы хотим гибкости с другой стороны производительности не потерять и вот если мы делали в лоб мы прям провели такой эксперимент действительно запустили то есть как это вообще работает до этом чуть дальше потом картинка покажу у нас наш вов работает как модуль конвенцию индусы не надо глубоко собирать а штате педика кодировки снимать для того чтобы трафика раскидывать мы реализуем эту штуку своей стороне уже в 5 раз производительность потеряли вот здесь этот штук нам потом запустили его выбрали именно о как язык написание правил еще 800 рпс резали а дальше запустили наш 400 правил и получили 6 от рпс и если говорить про физику вот например сервак 2 юнита вода тут нарисован сто четыре ядра но 104 итоге про трейдингом реально там два и два процессора подписавшись ягер каждый из которых там папа по 28-е докажи из которых гипер трейдингом мы какую-то часть еще под служебные функции под дополнительно метода защиты выделяем то есть мы реально используем 80 нужно еще говорится про то что не все гипер трейдинга вы и ядра дают profit поэтому мы еще на полтора делим но и грубо говоря получается у нас на сервак 2 юнита и 3600 описав и это очень грустно потому что если один сервак 3600 рпс авто для миллионы рыб нужно 278 серверов учитывает того как и сейчас покупать я боюсь что граница с казахстаном этого не выдержит тяжело будет провести но и дорого мы общались со вселенной тратится вот эта картинка как в принципе могло бы быть просто устроенных штука вот здесь вот запрос и ответ который к нам прилетают и джинкс да вот это прям ванильное мы особо не трогаем и чуть-чуть по чем там и своих базовых задач а дальше вот в of legends сверху это модуль который мы пишем то есть соответственно такой плагин кого фу работ gaijin сработает request a response и сначала там собираются потом делать encoding собирается лу объект такой вот как хитры и там но они иерархически эта деревяшка дерева и как бы тело запроса и дали это передается в lua создается ло объекты дальше вот они наши правила которые вызываются правила могут разные то есть условно там регулярке но они сейчас оперативную логикой да там пройдет в грамоте какой-то бред отвращение скс тораджи пользователей чего угодно но самое главное что вот здесь проблема тут очевидно да то есть мы зовёмся эти правила последовательно и это как раз ранит наша производительность до того уровня до которого роняет вот каждые новые правила которые наши эксперты записали в таком случае вызывает боль потому что чем больше экспертиз тем хуже медленнее вот ну и сам сел он не быстро вот на самом деле вот так задуматься 99 процентов и девять десятых трафика в реальной жизни они легитимны то есть ну как бы мы тратим ресурсе вселенной на то чтобы защищать от того что может быть и не существует да и идея которые мы применили она на самом деле часто и много где применяется я в других системах и тоже видел просто про неё хотелось отдельно рассказать которое нам пригодилось данном случае это не когда мы пытаемся дизель какой-то изобрести хотя вроде в голову приходит как раз здесь цель то есть как бы но зачем вам перед императивный язык давайте на той цели будем писать и в принципе его наверное можно будет как то там подклеить введены автоматы делать линейно но мы прям очень дорожили нашему а мы его прям любим и не хотели некуда девать так вот подход который мы использовали это как бы у нас правило они работают по обратной логике они говорят что вот при сработке вот этих регулярных нас точно назвать не нужно то есть от как бы бредень в обратную сторону такой грубой проверка которая говорит о том что вот на этом запросе ну точно как бы нет никакой атаки а вот если григу йорк сработала тогда не факт есть или нет то есть ответственностью не нужно позвать и так у нас эта картинка меняется на тут пока все тоже самое и вот в тот момент когда у нас собран уже объект мы прогоняем в регулярке те которые были с configure ни один раз то есть ну это как бы банальная математика да я думаю знают носик случай скажу что регулярке в принципе они склеиваются один терменировали конечный автомат зависит только длины запросу поэтому прогоняются быстро есть объявлять эти оптимизирует всякие там peppers cant еловый которые это делают хорошо ну и соответственно когда мы это прогнали дальше мы зовем но только для тех правил для которых их регулярке фильтры сработали в ключе что меня надо позвать и они уже нитчатых еще раз а просто уже получает бан денги на результат а вот и когда мы на эту картинку смотрим еще раз у нас заведомо чисто трафик начинает работать уже не там сколько там же театра персами был достал полторы тысячи в принципе мы почти сохранили ту же самую производительность которая была сборки http исключительно проблем остается трафиком с атаками и такой вектор атаки на нас когда вас начинают постоянно валить каким тиски или инъекций амиго постоянно за ним свои lua из раза вырос на это легко обходится тем что мы просто там через несколько попыток нас сзади досить просто этого клиента баням и выключаем вот целиком на блокировщики таким образом нам эти атаки не прилетают поэтому вот этот последний штука она скорее гипотетическая реальность в реальности у нас но такого не случается вот реальность она конечно немножко хуже потому что но не на все правила можно написать анти регулярке некоторые все-таки требуют того чтобы их звали каждый раз там всякие поведенческие провела там e-mail и прочие вещи и поэтому конечно полторы тысячи у нас европейцев не получается на ядро сделать на нашу тяжелую логику но из плюсов вот те правила которые мы добавляем оля регулярке снайпере тивной логика не у нас ничего не жрут вообще потому что они мы подклеивать стандартный механизм столько сложные какие-то правила которые мы новые делаем они действительно влияют на нашу производительность мы встретим с цифры примерно вот такие получились то есть мы на 1 2 юнита коробку можем 40 кры асов это уже как то более менее внушает оптимизм те же самые наши конкуренты они там обычно вокруг этих же цифры крутится но при этом но мы как бы делаем же конкурентный анализ разведку там понимаем что они делают внутри и именно вот ну глубина проверок и так далее там у нас 40 помощнее ну и вот собственно сколько надо на миллион описав относительно того что было но все таки как то мы сэкономили немножко вот быстрая уложился со своим рассказом спасибо за внимание тут есть контакта все будут вопросы обращайтесь дениса через доклад вопросы в зале пока нет спешу я как в целости а меняете на wofi у нас есть карточки специальная которые мы когда покупали в израиле щас не знаю получится ли купить но они умеют быстро терменируйте л.с. плюс к этому если не они-то на intel есть сопроцессор который помогает делать мы используем либо который его использует ну и все алкоголя ещё такой вопрос я посмотрел даже наши van dyk собаки ваш образ выкачан насколько оперативно вы обновляете версий и насколько это вообще требуется да точно насколько быстро появляются какие-то новые виктора таки которые требуют какого-то оперативного выкатывания хотим фиксов я понял вопрос у нас несколько слоев того что мы можем обновлять один из которых это rules этот это самый правил налог который мы делаем их можно просто выложить на нашем сервере вам до разница клиенту мгновенно то есть 1 раз несколько десятков секунд полет и если есть обновления он его накатывает и накатывается достаточно быстро если говорить про логику продукта она уже требует от клиента все-таки какого-то базовых согласен а то что там нужно обновится и в принципе механизм такой же то есть мы укладываем создать сервер клиентов от все подтягивается но вопрос все-таки к тому что он либо должен был сразу согласится на то что все будет подтягиваться автоматом ну либо тыкнуть кнопку а так в целом если говорить про оперативность необходимости обновления знаний то сигнатуры прям очень надо обновлять часто потому что там знак ульта black for love ушел вышел или насколько там выводимости прошлом году было достаточно громких вот наличие этой сигнатурного реально спасает от того что конкретно эта атака не проходят и поэтому это очень важно мгновенно это обновить с точки зрения более сложных механизмов каких-то там эвристических и так далее наверное это терпит это может чуть попозже сделать от скорее там портрет hunting они про защиту моменте а как же отказоустойчивостью он то есть вот как мне поднять отказоустойчивый кластер pitiful отказоустойчивостью история такая что мы умеем быть кубер найтись и используем его механизм для отказоустойчивости то есть мы мастернодами пользуемся для того чтобы они откажутся использовали обеспечили нам а между ними было серым новой пишите там стандартным протоколом миролюбие ли там другие протокол мы тоже умеем так вот не помню название но очень история такая же к нам стоим апреля с мы айтишники свои анонсируем на ту ноту которая живая натянуты какие живые а внутри сам по себе кластер живет куда летите за счет этого как бы обеспечивается отказоустойчивость польше больше у меня еще вопросик где нет спасибо за доклад скажи пожалуйста а тбайт ложное срабатывание как вы с ними работаете конечно бывают это самых краеугольный камень вообще всех лопаток и учи любых атак в security тут вопрос в том как бы какие процессы мы делаем на стороне сидя и что случается если только так у клиента случилось да там не атака точнее а фолз у себя у нас прям целый процесс выстроим того что мы берем обезличенный трафик и через него гоняем сигнатуры при этом у нас есть 1 эт из им или научную на руси эти а потом мы значит ему соответствует убираем брался это смотрим штабель дает и смотрим вот эти div и таким образом подчищая фазы плюс к этому когда у клиента фолз случается в интерфейсе нажимает а что это фолз это как бы мы об этом узнаем тоже этот процесс у нас организован но в конечном счете вообще любой такой продукт который стоит на продакшен системе требует внимания он снимал с редко работает поэтому как бы какие-то люди все равно смотрят его интерфейсе оценивают насколько это адекватная было сработка или нет и подтягивают по месту вот частая история у нас было несколько лет особенно назад когда взяли наш продукт внедрили зыс ушли а потом пошли проблемы то что сейчас сайта не грузятся бы просто потому что фолз потому что технология она сама в себе какие такие вещи делают который похоже на атаку и это кстати часто бывает не то что механизма наш ползет то что реально люди там дикие 3 коми пользуются допустим я видел один фриберг он наш любимый это 1 лама система у них весь дизайн в том что у них с фронта пряжу прилетает джейсоне на которой они делают экз окна бы кайзер прямо дизайн такое как бы ничего с этим не сделаешь ну вот как то так то есть ответ это мониторинг правил и какое-то исключение если я понимаю что для меня это нормально да то есть это прямо механизма исключения недостаточно развесистые они кастомизируемый то есть там можно под конкретное приложение под конкретный путь под конкретный метод сказать что именно здесь это не applico был потому что ну вот именно здесь это нормально какие инструменты мониторинга вы предоставляете как я это могу увидеть посмотреть загружаемые момента это интерфейс наш интерфейс все это есть плюс мы можем пасе слогу это отправлять куда-то централизованное хранилище и там это можно делать то есть реальный сценарий 2 первое это когда кто-то на трофей смотрит 2 италийского там сьем система или какая-то там суар там знающих многом модный слов которые все это регистрирует но вот соответственно туда попадает этой информации там уже может с этим работать спасибо мне наверно немножко продолжение вопроса то есть получается если в этом он принес доставлять с приложением авто обработка вот этих вот исключений занимается непосредственно вот люди заказчика до или партнера то есть бывает такое что закачки своя команда которая этим занимается либо не бывает они нанимают или покупают услугу которые люди там за деньги ходят-смотрят их в авто мы помогаем с этим бороться ну бывает еще трети истории когда у них нет бюджета не над они на то и поэтому у нас есть специальный профиль который ну просто там безобидные в том плане что выкручены все ручки сторону того чтобы мне файл максимально так тоже можно сделать но мы не рекомендуем потому что он естественно может иногда что-то пропускать потому что всякие там эвристические методы он не используют у нас очень большой кусок это всяко юристе к которой это работает но неточно и вам это потом набор всех этих под исключений как-то приходит централизованное хранилище это моя завязано зависит от того включена или выключена телеметрию то есть нас оно есть вот клиент удается выбор если он как бы ему не жалко поделиться он делится если жалко поделиться то не делятся наши основном не делятся но если если только честно то есть иногда бывает что удар скидку до я специально чтобы делились но нам хочется же информацию получать чтобы развивать там свои какие-то вот понимания как это должно работать до но вот чтобы говорить ну в общем для того чтобы получать трафик он часто просто ну как бы клиент и начинаем уже дружить потому что ну а как ещё ну там правда нужен вот очень многим компаниям действительно нельзя его отдавать при этом всем у нас есть прям механизм маскирования то есть мы находим персональные данные мы их там как сами защищаем передаем только очищены но все равно для них это не аргумент но не у всех некоторых нормально здравствуйте мне спасибо за доклад приятно было послушать по птф можете сказать на новой архитектуре когда вы перешли на риггс по переду уаджиб кто стал узким местом то сейчас по-прежнему аджит узкое место либо хай песка на где сейчас вот the hot spot находится это хороший вопрос потому что очень философский на самом деле вот если посмотреть на наших конкурентов то есть реально 2 класса продуктов один глаз продукты такой lightweight вов но серьезный хардварные балансировщик и тут как и в 5 в основном делает то есть они могут много трафика в логике у них достаточно мало прикладной а другой подход от когда прямо тяжелые тяжелые логика по поиску выпад окно как бы от этого решения не ждут премного рпс of и мы пытаемся быть умными и красивыми это прям тяжело поэтому как бы вот те самые цифры которые мы получили это прям компромиссы скорее мы наверное смотрим в то что у нас действительно должно появиться два разных решений один который прям не знаю железки пойдем сделаем это фиджи и карту который ты регулярке молотят просто там свои рейтом и будет очень грубым фильтром для вот этой сложные прикладные логике вот если говорить конкретно про узкие места сейчас-то мы когда рисуем полностью картину того как ходят пакета то мы понимаем что на час наверное . приложения усилий это балансировщик перейдут этими ядрами потому что он мог бы делать немножечко больше и сильнее разгружать все остальное а сейчас получается что много трафика все равно проваливается ноябрь то есть мы как-то смотрим вот туда тут участие в тонизировать понял а к вами связи в на сетевых карточек есть если это карточки то это какого класса это что-то типа ну а нокс которые посту последних моделях умеет симметрично криптография фоне теряет на что-то более серьезно который может the choice han шейки тащить и какой еще один железо используйте для активизации так вопрос просто сели вот уже принял говорил у нас есть карточки которые умеют с целью флота не только с или флот имеют там не вспомните чапмэном их возразить новые атаки они умеют или они только симметрично криптографию делают умеют их от шейки тоже вот а по поводу акселерации мы еще виде карточки используем для deep learning а то прям реально в серую сервака втыкаем теслу на них трения модельку так чтобы потом можно было применить вот не то чтобы много где ставим у клиентов но у себя так делаем а потом эти модельки дистрибьютор как как как по сути как наш bass вот то есть она скорее у нас там стоит на мой клиент тоже может поставить но пока просто не нашли желающего который готов купить несколько видео карточек для того чтобы у него моделька тренировался конкретно под его трафик то есть мы скорее ее тренируем in general ну то есть подход такой что мы сингер принтами понимаем какой backend под бэкхенд понимаем какая модель как лучше всего подойдет и и дистрибьюшен конкретном клиент научи на этом трафике вот вполне спасибо и спасибо за доклад у меня вопрос о таки вот то что вы упоминали по атаке на самом вов то есть если есть да со специфическим трафиком творить и мы быстро этого клиента определяем его вырубаем adidas то есть сеточка и как бы отовсюду летит и у вас там 100р ps а как с этим бороться дело в том что у нас есть такой механизм его называем коррелятор это такой микро сервис который работает уже поверх а так который поймал первый сервис и он как раз для того чтобы искать распределенные или размазанной во времени атаки то есть у него есть временное окно у него есть ключ по которым он пытается вот эту атаку собрать и случилось когда много пользователей что-то делают одно то у него ключи будет ну по сути либо backend на котором стучится ну то есть у него будет какой-то конкретный путь вот и он по нему под клеит и поймет что это какая-то дистрибьютора так вот конкретно на это место и он ее забанит спустя какое-то количество подходов если например это какой-то подбор там лакинск проект или passwords проекту там будут ключи вот эти-то благин или послав то есть он по ним поймет что это скучно там хвостов разных он пытается ну как бы прийти в одну и ту же точку там есть red limit и соответственно если он их пробьет то будет забанен уже по либо покупки либо по и технику зависимости от того как мы клиент идентифицируем то есть это зависит от конкретного приложения я так понимаю что он но это так и там симулирует какую то есть делают так чтобы и какой от еврейских начинал работать . трафик намешивать такую темноту условно чтобы то есть не какая-то конкретика несвойственным ему гнутой стимулирует а то по все равно вот можно понять как у да ну конечно дороже трафик мыши и даже если разные все равно будет эмулировать то есть например не одинаковую сигнатуру с большого количества печников раз над у вас а я смотрюсь в результате мы найдем тот колючку которую мы можем заболеть на более высоком уровне вообще все запросы то есть на блокировщики например то есть это будет ней печник но какое-то поле вышлите пип который мы поймем что это все равно про одно и то же то есть как бы идея в том чтобы мы на более поздних уровнях понимали а что на банить на вот этом быстро ну который многом оборонять для случая распределенный на однотипные атаки ну то есть под этой атаки которая пытается вас заставить анализировать чтобы вас пола рапс я понимаю вопрос я просто мере до что как бы вот мы пока не знаем сын ариях которые бы привел к тому чтобы мы там через там за сотню анализов нет не забанили бы его все равно то есть это либо здесь через пять либо здесь через триста либо здесь там через тысячу но все равно он сойдет в какой-то точке потому что мы поймем что это про одно и тоже забаним его на самом первом этапе ли там будет вначале какой-то критерий более легкий выработайте да да да то есть мы найдем критерий под которой мы его потом подвержен tennis спасибо большое за доклад очень интересно друзья вы можете поговорить с денисом в цифрах power если еще останутся вопрос на"
}