{
  "video_id": "ktpR1IeI_rw",
  "channel": "HighLoadChannel",
  "title": "SDN & DEVOPS ?= ❤: Практики использования SDN / Александр Шалимов (ЦПИКС, МГУ)",
  "views": 1400,
  "duration": 3539,
  "published": "2018-01-16T12:33:53-08:00",
  "text": "в этом докладе я хотел бы рассказать о том что sdn sale to fight networking можно использовать сейчас в реальной жизни нам с вами это не обязательно прерогатива больших огромных компаний собственная начнет огс начал сейчас просить а кто произвел вобще знает кто слышал ухта все знаю а тогда первую часть пройдем быстро где просто рассказываю про что это такое такого по ндфл а вы дальше уже перехожу к практическим примером те кто знает что такое сдан знает кто этот человек никто не знает а это не cmake он это профессор стэнфорда его аспиранты в далеком 2007 году начали заниматься продвижением издает тематике тогда появился план flow марсинко сада и так далее а вот он приезжал не каждым нас там году в россию и вот такую пафосную фразу сказал смысл был в том что в российские технологии принципе не очень развита а и где в том что в россии чем просили все в мир известны от математики программистами идея была в том что сейчас такой момент когда мы можем типа войти в эту область с нашими скиллом программированию и сделать там томпсон говоря новые сети развития области технологий у нас мы действительно там за последние там пять лет сильным то есть много чего изменилось в россии появилось много компании которой делают какие то ну делать новые сетевые разработки ведутся разработки sdn уже здесь если давным-давно это было просто там какое-то модное слово никаких особо понимания где и как это использовать не было сейчас тоже как бы не тенденции то здесь то есть уже любая сетевая компания вентер наш большой вендор они как бы езды на ту живут а насущная во всех пресс-релизах везде использовать где-то уже некуда нити и никуда не уйти начиналось все с того что это был google amazon microsoft и же японский оператор связи entity совместно с наркоманией все вот внутри себя применяет из даянова пошла в частности в россии сейчас уже помимо больших компаний целиком компании вот мы с одной из работаем они вот уже последний там год идет активная работа по внедрению там упал слова isdn вот там в реальной жизни помимо всего прочего появляется куча вот очень небольших компактную компании то может быть и большие но они внутри себя использует езды на пан flow они это не продают наружу но например вот где-то внутри себя при разработке своих решений они это используется в словаре и об этом частично в этом докладе затрону какая общем что вообще не нравилось тогда давным-давно что то есть что такое сеть сеть это уж участь его оборудования связанного каналами которые все всеми ими надо управлять что не нравилось не нравилось что все эти железной коробке они были закрыты все весь функционал в них был бы вообще невозможно изменить у всех был разный способ управления если у вас администратор умеет управлять cisco он имеет управлять хуем и так далее но смысле он легко научиться но нужно какие то там курсы пирсе пири-пири сертификации пройти главным образом что не нравилось это эти железки были дорогие дорогие в главным образом за счет того что в них было много интеллектуальной собственности компании флот то есть очень много функций по управлению сетями которые обычно случаев а может быть и не нужны но они все вот включены стоимость этой железке редко по тоже не нравилось а потом невозможно было то нам просто так взять и что-то изменить например оператор связи не нравился не хотели изменить какой-нибудь там чтоб там такой специализированы так навешал какой то бит выставлялся где-то в пакетики для них они говорили вендором гендером говорили киева оплачиваете нам 18 месяцев разработки и вы там может быть получить это функционал если там если там все пойдет хорошо как бы это не нравилось меняться нужно быстро новый сервис пистолет быстро и так далее чем а ну здесь просто пример к тому что r и все у количество описаний нового функционала растет общем специально постоянно постоянно это все как бы накапливается накормлю сетевых устройств а при этом еще с тем устройством собственного рейна управлять сложно и сложно то есть одним нормально когда их там уже 20 30 100 уже сложно то есть если как он там оператор связи захочет проложить какой-то сервис но я соединить какие-нибудь банки между собой ему нужно там настроить там 20 коммутаторов обязательно где-то возникнет ошибка потом все долго и нудно отлаживать требует там недели работы для того чтобы получить сервис а сейчас уже какой intensity она говорит вот у нас теперь вы можете прям из веб-интерфейса сказать я хочу соединить там считал с атланта и нажать одну кнопку и очень чокнуться наоборот посередине будет настроено что же такое из д.н. главная идея если ее объяснять это вы нас все все всего функционала по управлению сетью из устройства то есть и всю ту наложенную стоимость там полях операционно стенках функций мы все вносим куда-то из устройства он выносим этот никто централизованные в цивилизованное место называемый контроллером сами устройства они становятся простыми то есть в идеологии sdn они становятся только только передают устройство глаз на правилам которым них заложены то есть никакой дополнительной кинь их нет то есть выплате тока в общем за хардварные часть а вся логика вот где-то в централе зал в центр централизованной месте еще раз своим контроллер помимо этого какие пункты нужны это программируемость даже не тогда начнем с того что я должен быть открыт и протокол общения вот этого централизованного узла с коммутационным оборудованием идея в том что вот этот контроллер и приложение работающие на нем то есть который реализует функцию они могут быть разных там не взять на вендров может быть новый какой-то игрок на рынке стива сетевых решений и все это должно быть переносимым дух друг с другом то есть не должно быть как раньше невозможность обработала cisco джунипер хавай в одной сети все это начнется очень плохо может и начнется на плохо закончиться соответственно должен быть некоторые открытый протоколу один из протоколов общения послов которому дальше поговорим что дальше идея софта дефолтный дворкин говорит о том что это программируемость сети то есть идея в том что мы можем программировать поведение этой сети что для этого нужно для этого мы должны получать от сети какие-то события никто событий на программируем весят протокол общение должен подразумевать что секрет канал порвался на пришло события у нас с общим в программе есть обработчики там обрыва канала мы подписались на него получили сообщение от сети перестроили сеть перестроили как бы провела хождение пакетов по сети так чтобы обойти этот проблемный участок более того сама разработка становится проще то есть теперь вы то есть раньше коммутатор в общем был децентрализована программировать коммутатор узнавали мир вокруг себя самостоятельно и собирали топологию там имелись кучей формации все это могло устаревать падеж поддержкой системности все сложно сейчас всеобщим централизовано в одной точке и вы можете использовать простую dx true для построения маршрута но это я утрирую конечно то есть на практике там тоже куча своих проблем но в dialed все равно проще чем был дуэтом чем и в итоге получаем помимо упрощений упрощение управления сетью мы можем получить удешевление оборудования то есть идея в том что предполагалось что оборудование за счет того что из нее выкинули всю функциональность всю секунд функциональность управления станет дешевле пять раз но это было там не правда последние я не знаю это как был вот как сначала для нас с восьмого года как это было неправдой так там до 15 год это и было неправдой потому что упал слов коммутации ли сдаем коммутатора они стоили все равно даже где то на 20 30 процентов дороже существующих существующих железах сейчас изменился мир сейчас появилась ряд вендоров новых вендров таких как там новые flow которые дают возможность даже существующие вендоры дает такие упал flow чисто из до железки который стоит там на порядок дешевле чем традиционный устройств и в общем-то да и зачем направить или ком оператором почему им нравится сдаем потому что можно интегрировать все сервисы там единую цепочку словно говорят человек позвонил попросил увеличить полосу пропускания в оператор вел там систему их бизнес поддержки vbs дальше это все прошло до сети уже там сам контроллер там залил на необходимые правила изменилось там ешьте зация так что в общем обеспечить новые требования и все это общем не требует теперь там дня действий насчет инновационных сервисов вот пример которые обычно привожу это пример из гугла они где была простая у гугла много кодов который раскидано там по всей земле соответственно интенсивность сообщение кодовый в ночное время меньше чем дневное поэтому идея была в том что подключать то есть сервера отключали до этого автоматически но отключать сетевое оборудование соответственно нужно было почистила оборудование и так перестроить маршруты так чтобы оно пошло то есть запрос на прежнем удовлетворяли но пошли уже пони отключенном оборудование соответственно до сих пор эта система используется такой один был из сигналов когда google показал что действительно это есть практическая польза от этих технологий по оценкам это было дождь и 10 процентов сокращения энергии теперь к open flow is done at концепция это разделение уровня передачи данных от уровня управления нам по прежним нужен протокол общение вот этого контроллера с коммутационным оборудованием и это один из таких протоколов которые вот такой трус д н ы был изначально топан flow на нём и поговорим о слева то есть право контроллер по пункту общается коммутатором что даже том что мы имеем на коммутатор этот серый серый кубик от коммутатора наш в нем есть простая прослойка то что называется полслова ген который просто и взаимодействовать с контроллером дальше использовать какой-нибудь из детей вендора переводит это все в конфигурирует железку согласно получено правило протокол достаточно простой в понимании нам нужно добавить правило нужно удалить правило получить статистику о том что мы туда залили какие правила туда были отправлены мы по сути все основное сущность и основные абстракции который предоставляет топан flow . мутатор могут быть любые разных вендоров абстракции одна и та же этой таблице потоков что к таблице потоков это вот таблица записей старший из трех полей первое это то что называется матчинг matching feels то есть это та те поля по которым происходит сравнение пакета пришедшего пакета в изначально вот в 10 это было вот и вот в 13 эту 12 основных полей то есть это макс получаете ли мак отправителя винтик ай пи ай пи адреса и адреса себе адресация а соответственно по всем полям можно мочить не по точному значению по маске то есть мы можем пойти мочить и так далее то есть по всем возможно полям чем мы можем делать с пакетом основные действия это переслать его на какой-то порт и изменить в этом пакете любое вот любой его поле например если каком трансляции адресов проводите то соответственно меняется внутренний адрес на внешний айпи адрес и как все хорошо вы можете отправить принудительно пакет на контроллер если вам нужна какая-то дополнительная работа с ним то есть вы хотите плести какую-то дополнительную проверку или вам нужно там разобрать его там поглубже елена триггер например кто-то подписался на телик на pitivi канал новый триггер который вам нужно вот сюда предмету . теперь привести не знаю какой то видео к трафик вы можете сбросить пакеты вы можете добавить любой свое действие которое вы хотите но не все менты позволяет много что вендоров предоставляет там широкий набор каких-то там действий дополнительных которые вы можете делать но и практически никто не пользуется счетчики у нас и счетчики пакетов и байтов прошедших через эту через каждое правило в таблице поток кто стрёмно но чем тут почему-то очень неважно есть 2 режима работы об inflow контроллер с коммутаторами первый реактивный режим работы идея какая когда пришел пакет вот sh100 слева видим абу дублироваться до стрелки он сравнивается в таблице потоков в ней нет ни одной записи и идея такая что теперь этот пакет отправляется дальше на контроллер для принятия решений это было понять это основная как бы идея триггер того что мы должны сделать сеть пришел пакет мы отправили их на контроллер дошел до контроллера контроллер умно понял что нужно делать с пакетом отправил соответствующие правила говоря о том что вот пакет будут 2 что таким характеристикам идет он destination 555 его нужно отправить на пор 4 соответственно дальше направляет сам этот пакет который к нему пришел первый пакет com seen нехорошо вы потерять мы его должны отправить дальше на хост и это только для первого пакета ну на практике для большого количество пакетов первых пакетах потому что тратите быстро идет и наносим на контроллер может ни один пакет а там приличное количество утечь все следующий пакет этого потока то есть нового новой сессии будет уже и this поэтому правилами ну и контроллер этот как бы основная идея но есть например по стрелочке мне очень есть другое то что называется про активный режим работы когда мы знаем где у нас находится клиент и мы знаем какие сервисы нужно построить положить на сеть и мы заранее прописывается правило посетит называется про активный режим то есть заранее и тогда для каждого пакета мину и контроллер уже идет serviced например верно для тинькова оператора то есть он заранее знает что у него там физические лица внизу их нужно трафик доставить куда-то наверх он сети и поэтому в общем никакой там реакции не нужд 8 заранее проливаем все правила то же самое например енисей не на сей откуда сноудон почему муку сбежал доставлен работала нир они рассказывали пример то есть они себя тоже знай он использует именно winter просите или они говорят вообще идеально у нас у них база данных который скапливается все русские может общаться какой какое компьютер имеет доступ к этой базе данных кто имеет доступ к услуге бухгалтерии кто не доступ к вайфаю какие dns-сервера есть какие-то типы сервера есть никакие там ли вы не появились не какой-то другой трафик к нам не пришел вот они просто берут читайте то есть конфига заливай статические на носить идти куда них идеально здесь более сложный пример для того чтобы примерно поняли никак с одним коммутатором работает с доена как это очень с большим количеством устройств работает вот у нас есть два has to a и b нам нужно соединить их но заставить их общаться с друг другу ответст как мы уже знаем пришедший первый пакет он так как нет никаких записи он уйдет на контроллер контроллер он умно него допустим уже есть топология мы не будем говорить как она разведывает но есть способы он понимает что нужно соединить с бы устроить у себя внутри там до x3 маршрут и знаешь что должно пойти там поверх натрем коммутатором при этом маршрут можно строить по разным критериям учитывая там текущее состояние свитязь нам нужно там с минимальной задержкой провести провести трафик соответственно он формирует правил отправляет а то на контроллер война коммутатора при этом может построить и туда и обратно потому что если вы понимаете себе съесть соответственно скорее всего обратно пойдет ответ поэтому можно заранее приложить все правила соответственно мы знаем что если весь пакет уже пойдут промахнулся а дальше сам интересно что произойдет ли произошел разрыв канал принципе традиционной сети тоже все это отработать нужно строить там ряд протоколов но при этом сходимость это будет там порядка этом 10 секунд в нашем случае это реактивная модель то есть мы контроллер узнает о том что произошел разрыв каналы кто-то вытащил там провод и моментально начинает перестраивать сети все понимаю этого построил новый маршрут внутри себя иначе удалил старый правило за лиловые правило из это степерь все пакеты пойдут по новым маршрутам это как бы круто то есть динамическая реакция на изменение сети причем можно в текущий момент анализировать все что пошло сетью не так и очень как еще хорошо это как в общие концепции произведено под фактор все расскажу как вы поняли то есть мы разделили уровень управления у нас есть централизованный узел который категорию жить все устройства есть протокола пан flow один из протоколов окон float сам распространенной который позволяет задавать какие-то правила на коммутаторах согласно которым трафик будет проходить ответственно если мы чет не знаю все это уходит на контроллер который даже принимает решение вот это точно понять и теперь собственно говоря к теме как это то есть вот это все то что рассказала ну да используется там целиком и операторов использовать ком сидена усилена операторов в общем много у кого вопрос том в том что мы можем получить именно от нашей жизни что я понимаю то что мы можем делать помимо там каких-то базовых вещей под учу что я понимаю задачами которые приходят и devops но чему devops некоторые занимается его псам это понятно поддержка железа цикла там продуктом стандартная фраза и помимо этого не пишу с какие там скрипты интеграционные скрипты обертки настраивают что насчет cited настраивает виртуально коммутация устраивать физической коммутацию пример если вы там разложили вас какой-то там и она контейнеров докера есть виртуальной машины и вы хотите просто их разместить на хостах ну например еще разместить как с умом то есть вы хотите чтобы вот в этого приложения у него была одна меньшей задержкой . пакет не терялись здесь вот такая гарантируя полоса пропускания и яме душу здесь точно должно быть 10 мегабит трафик который всегда должно быть этого сервиса например важно вот именно там сетевой разработки мы делаем контроллер и на систему управления нам важно том чтобы вот этот канал управления он там шел там приоритетные очереди сменили меньшей задержки без каких-либо там потерь пакетов от критически то есть мы что-то потеряли это означает что лечится задержку наставления cited не очень хорошо и поэтому вот у нас людям нужно все это вот внутри себя настраивать 7 нот сиа привожу ручные устройства нужно физически еще раз настраивать и раньше до еды но по ндфл в сундуке не было такого какой-то способ автоматизировать это все сейчас у нас есть возможно писать скрипты которые помогут вернуть на физичка так виртуальную сеть и в общем то делать это автоматически при этом есть еще другая задача не знаю нас она часто я задача у нас очень много стендов и точнее стенд один но нам нужно время от времени его переключать режим тестирования в режим разработки а в режим там дыма и общем это все разные оборудование разные version насти так далее соответственно нам нужно помимо того что трафик разводить нам нужно ещё понять это накатывать накатывать на новые или старые версии так бы все и так автоматизировала как нам различить трафик чтобы она не шел там через какие-то тестовые сегмента сети чтобы там все на показе было хорошо это уже по два под вопрос при этом есть у принципе у там сетевых инженеров в стенах инженеров них есть необходимость решать частности в задачи которых собственно и сейчас хочу поговорить и на примере их будет понятно как можно автоматизировать именно правления физическое там или виртуальный коммутации и кстати сейчас очень популярный термин нет devops или нас там за рубежом это именно те люди которые вот учитывают sdn и пишут какие-то скрипты автоматические какие-то диплом новые изменениями на все эти конфигурации чего оборудования теперь очень приступим про инструментарий инструментарий области мире из днк принципе очень много но я вот хотел становиться вот на тех которые перечислены этом слайде который хотел вам чтоб нам все поняли как мы примерно пользоваться для чего они нужны вот зеленый квадратик этот сервер на сервер у нас есть наш виртуальной машины там с различным гипервизор месте dogs докер-контейнер а обычно они у вас вот вот и в какой-то linux bridge но как бы мы будем ткать его не влипнуть этими интерфейсами будет опять не в linux бриша будем втыкать а вот например программный коммутатор который знает об одной свечкой значит клапаны свечка используется на проекте его круто все пользуются соответственно up on вы свечи он сам по себе может выполнять роль linux бриджа то есть просто пойду оленин вы соединять физически порты с виртуальными но также может работать режиме up and flow то есть у него также может быть несколько таблиц которые мы можем конфигурировать давать какие-то значения причем окон вы свечи нам нужен не простой а ну то есть можно и простой но идеально все-таки для некоторых задач нappy детей детей это средство которое позволяет но это средство для разработки средства для высокоскоростной обработки пакетов то есть и об он в switch без каких-либо модификаций еще числа покажу например может он заточен на обработка маноло гигабита трафика на ядро при этом степи диким вы можете там уже 10 гигабит обрабатывать и это как бы вот уже нормально а дальше то есть у нас есть коммутатор мы хотим от коммутатор конфигурировать по протоколу под flow соответственно съесть два способа у нас есть стандартные тузы а то понго свеча такие как у весов ктр который там позволяя легко это правило посмотреть таблицы потоков чтобы там удалить ими тоже можно пользоваться сейчас увидим как помимо этого есть можно пользоваться пошло контроллерами контроллеров от именно практических я бы рекомендовал вот раю контроллер валерию контроллер кто как называет это компания тити японские он написан на питоне он правда не масштабируется но при этом имеет кучу функционала и как бы кучу встроенных уже встроенных возможностей по управлению сетью и поверх контроллера обычно работает rest интерфейс то есть помимо того что вы можете задавать низкоуровневой команда через клеи small 1 свеча но при этом вы можете задавать эти же команды через там из web-интерфейс собственно это вот те те инструменты которые хотелось бы чтоб там все как будут поняли как ими пользоваться и что не сложно а но есть еще контроллер котором мы занимаемся таро у нас он написан на си плюс плюс он быстрее и мы поговорим в каких случаях его нужно использовать иметь смысл его использовать теперь в задачам первая задача это простые простой пример это то как нам делать черные и белые списки причем самим руками там без каких-нибудь копите баллы танцев реализовано там разливаю вот эти конфликты не обязательно вот на примере я хотел пример это черный список и конкретно мы блокируем советы job.ru а то что не хотим чтобы например плохой начальник и хочет чтобы люди искали себе работу вот соответственно нам нужно сделать какие-то виртуальные машины которым подключены к нашему серверу вот могут не виртуальный машина косметический машин это может быть просто сервер там этими карточками которые где-то на стоит в структуре но смысл в том что что нам нужно делать нам нужно сделать две таблицы то есть правой таблица таблица 1 в ней говорится о том что все пакета должны обрабатываться по правилу то есть последние слова это действие поправила норму то есть это как по правилам традиционный сети то есть там будет работать два коммутация со всеми там вытекающими по вытекающими эффектами это как бы нормально то есть мы просто хотим чтоб соединялись без в таблице 0 это просто был бы linux bridge но мы хотим перед этим делать некоторые обработку говорящий о том что по умолчанию если нет ничего не запрещено то мы идем от нижней правил в том что любой пакет должен идет то в следующей таблице и дальше уже провел традиционной сети но дальше возникает вопрос а не вопросами мы хотим удалить правило который бы блокировать какой-то трафик у нас есть два способа первый вот внизу это вот через паузу в вк отель вы можете добавить правило которое вот в этот брина лет название от нашей синей коробке слева говорим что нужно сбросить идущий от такого-то mac-адреса такого-то клиента нас адрес сайта job.ru и правило говорит том что нужно сбросить пакет но и все как бы провела залили соответственно человек никогда не сможет получить доступ к сайту либо вот верхняя картинка это через web-интерфейс через и the postman то знает это там туда загружается базар из новых запросов и можно там прямо туда редактировать что вы отправите в сети любого контроллера это работает а причем vrs примерно одинаковой то есть вариантом роуз они примерно одинаковы следующая задача теперь мы хотим ну такая экзотическая мы не знаем например ай пи адрес там job.ru понятно что api адреса сайта может быть многом мы хотим как-то инна запретить сам домен ты чтобы люди не могли обращаться к сайту job.ru чем мы можем сделать идеи такая же но теперь у нас самое до полтавы правило внизу в таблице 0 она говорит отправить пакет то есть пришел пакет ему нужно отправить на контроллер и что мы делаем на контроллере контроллер по сути дела это ну просто программка то есть там куча питон вот туре а это питоновские скрипты и вот у него самая основная точка входа это вот packed in hands пакеты над сообщение которого пришел пакет ушел и контроллер мы получаем прим этот пакет и мы можем что то с этим пакетом сделать вот здесь примерно там реального ухода чем мы делаем мы берем пакет из мой само сообщение об и flow из него вытаскиваем пакет парсим его причем помимо постингу нас это еще как просто бинарная строка мне просто словно говоря греппа мы ищем носит а там ищете перекос мы просто гриппом ищем job.ru а соответственно нашли дропаем этот пакет не нашли причем тропами нас айпи адресом и если не нашли тасс ответы добавлены поток о том что вот конкретный это доступ мы разрешаем соответстви делать можно все что угодно именно на контроллере вы там пакет может прогнозировать залакировать понять куда люди могут обращаться что еще теперь и наверное там следующий такой боли экзотически более реальный кейс мы хотим провести балансировку нагрузки сделать руками балансировщик нагрузки к нашим таким товар кирам томсон горя который может обрабатывать 10 гигабит этот о чем я расскажу так кратко как это сделать в общем то своими силами это кстати очень такой самое распространенное из кейс то есть куча компаний которые продают какие-то желез который умеет обрабатывать трафик но при этом у вас специализированный желез который обрабатывает трафик но смысл в том что они трафик умеет обрабатывать 100 мегабит допустим а трафик к которой нужно обрабатывается десяткин габи соответственно нужно как-то балансировать нагрузку эти компании обычно спрашивают ну хорошо вот вы нам продаете одно желез причинам дальше с не делать а не говорю купите там инцес ок соединить их там все со всеми но там попарно там настройте так-то и так-то он гад не это сложно не очень рад либо вы нам покупаете либо там ну и сами настраивать и вот таких их задача не лишь люди просто решили решили делать такие блокировки нагрузки сами им нравится в том что они там за там месяц могут сделать пол строчку на грудь который они используют на практике и вот ставит все утка комплексное решение там с вами заказчику и так че мы хотим балансировать мы схемы какая у нас есть там четыре сервера не важно сколько который умеет обрабатывать наши запросы мы хотим сделать стоит вас балансировку причем так чтобы для этого клиента это же клиент если еще раз пошел захотел общаться он опять пошёл а то же самый сервер то есть инфу и балансировать можно по разным критериям самое распространенное то балансируется поташ называть факт apple то есть это по api и собственности national протоколу готовьтесь опередить и и по типи типи портам я тату считается hush hush делится на количество серверов и соответственно теперь мы можем там раскидываем получить получившего число говорит нам на какой порт у северном нужно отправить запрос а это как бы стандартный самое распространенное есть все зависит от сервиса но это вот сам распространенным есть еще варианты когда мы по самого контроллера можем опрашивать сервера пытаться понять их текущую загрузку от них получать фидбек и там делать уже какой-то более интеллектуальную систему концептуальный round robin там завешены round robin и так далее самые там примитивно это вот как есть соответственный на контроллере у нас вот работает просто приложение которое по пакету выбирает эти 5 полей от них считает хэш но и говоришь о для конкретно этого пакета нужно отправить всего на такой топор заливает правил контроллера на из коммутатора на контроллер с контроллера на татар заливается правил все как балансировка работает а но если мы используем простой с мы можем обрабатывать где-то 1 миллион пакета в секунду на ядро почему так потому что он используется на наш насти вас так linux которых принципе заточена не заточен узко скоростную обработку намного копирование излишних поэтому люди говорят ну как бы это для таких задач это не нужно нам не надо лишний раз разбирать пакет нам нужно получить сырой пакет его отправить дальше в этом есть такие системы как не это расширение не расширение от как бы альтернативный способ получить пакет из карточки мы просто забираем из памяти карточки эти пакеты то в режиме паумоту постоянно опрашивая карточку забираем пакет их выгребая соответственно здесь можно можем 10 миллионов пакетов на ядро то есть получается снова сервера мы можем анонсировать здесь мы уже можем даже мелкими пакетами вытащить 10 почти 10 гбит то есть чтобы понимали число в одну в 10 гигабит умещается 15 миллионов маленьких пакетов здесь уже примерно мы можем даже мелкими пакетами съесть канал тот самый сложный случай в принципе сервера сейчас можно особо не напрягаясь использует тому весь dippy детей можно получить где-то порядка 60 гбит обработки то есть причем сервер можно натыкать много карточки сейчас есть карточки которые по шесть портов гигабитных или 10 гигабитных прям на одной карточке то есть там уже есть специализированное решение при этом еще такой нюанс используйте вы как бы нужно использовать индусский сервер ну для того чтобы там весь функционал задействовать ну и соответственно карте который поддерживает windows key чипсета там определенной марки для того чтобы уж были драйвера у этого типа детей для того чтобы вычищать эти данные от практически там наверное 70 процентов сетевых карт поддерживается вот соответственно получаю очень теперь мы получили балансировщик нагрузки который может спокойно добраться 10 гигабит и общем не напрягаясь особо своими руками своими силами но где используется самый распространенный - кейсы в компании сейчас так какие есть нюансы десятка гуси есть который хотел рассказать теперь про нюансы бывает так что скорости программных коммутаторов на серверах недостаточно то есть сервер которым есть диабет и достаточно то можете на железкой стоит дорого то есть если у вас сервер там подешевле там уже как бы не поддерживается на последние там какие-то вас не последнее возможности не последний циpкa процессор с последними там фичами парус к скоростной обработки пакетов соответственно там уже возникает вопрос престижа гигабита трафика и вообще без вопросов это можно на любом сервере сделать если нужно больше можно переходить на уже железное железное решение это либо то что затевает бокс коммутаторы то есть это на бородками делаю чипсета без какой-либо с какой самой примитивной операционной системой на сетевой операционной системой но куда можно поставить опыт слова агенты как бы и также управлять все будет нормально единственный минус это в том что это практически всегда одна таблиц и очень маленькое количество правил либо вы можете взять любой свою традиционную железку с любой вендоры сейчас можно скачать say the uk and flow плагин и rush просто нолик прошивку плагин скорее обычным залить не коммутаторы там опять таки это будет такая же возможность заливать пояс по дну таблица заливать на минимальное количество правил есть и чисто по фло коммутатору кайф ловли huawei большое количество таблиц большое количество записей но это уже все таки такие боли а целиком решения что еще бывает что скорости контроллеры недостаточно контроллера умеет обрабатывать где-то в идеальном случае тысяч пакетов тысячи по китаю сообщение в секунду если у вас какой-нибудь силен и вот та балансировка нагрузки то у вас получается что на практике дороже меньше носит изменяется там сотнями получается так что вы не можете быстро подключать новых клиентов а у вас есть какой-нибудь api весна сидений он должен обрабатывать там миллионы сосновых сессий в секунду но это с контроллером не получит поэтому можно использовать допустим наш контроллер он на си плюс плюс написан миллион пакетов на ядро ну идея пример такая чтоб на си плюс плюс поэтому несколько сложнее для написания приложений дальше если мы хотим использовать коз то есть нам нужно настройка очередей и каком-то ограничении полосы пропускания который может сервис порождать по соответственно на данный момент около свечами на который идет по дефолту вы будете он не подходит можно использовать проект флага пускай тоже интересный проект в нем эта функциональность есть но него другой нюанс он плохо работает на больших скоростях и за там большего количества функционала но при этом десятка все равно выжмет дальше если вам нужна настройка физической сети то есть у вас fish кости где идет там трафик ваших приложений не обязательно с top of flow есть альтернативный который продвигается вендорами протокола тонов confort canne фрэнк моделями это альтернативная дальностью полслова это то что можно назвать императивной то есть вы говорите что делать железки то на кофе скорее декларативная модель то есть вы описываете некоторый конфиг для сервис но по сути не гатчине рейши на snmp ну и соответственно тролли рапан daylight который на джаве и вот него есть такие достать широкие ент париж широкой поддержкой в конфе уже реализован для коммутации оборудования от модели достаточно соответственно все основной посыл который хотел сказать в том что из dm сейчас в общем то можно использовать на практике у нас обычно там в компании то каким понятно access-list это настраивается настраивается трансляция адресов с помощью издана пан flow ограничивается происходит приключение стендов между там разработкой и тестированием там нагрузочное тестирование нужно там при коммутировать именно нагрузочной часть или например у нас есть бывает так что есть трафик от excel от спарринг пусть на грудь с термином нужно прокинуть куда там говорят дальние условно в соседней там под но при этом среди встречается как анти 3 коммутации которая так просто там не пробились нужно настраивать очень просто трафика не протянешь использован флота можно быть достаточно просто положительно нужный правил и мы можем протянуть там наш трафик подальше ссылки на инструментарий с чего начать что просто попробовать на практике это вот есть проект меня нет это создание виртуальных сетей sdn сетей вся на компьютерных можно просто компьютере создать виртуальную сеть из днк программировать там запасе свой контроллер только на одной машине там есть именно tuturial временного по шагам можно пройти по писать свое первое приложение понять что это такое так далее то есть в общем рекомендую там с него начать просто даже посмотреть даже если не хотите использовать мы просто ради интереса понимать в чем технологии заключается вот соответственно спасибо если есть вопрос раз спасибо за доклад у меня вопрос по поводу функционала дипиай он пакеты может собирать в кучу просто на текущий момент от наших блокировок роскомнадзора вских начали бороться с ними с помощью того что уменьшает размер окна и бегут пакеты мелкие там даже домен у него не влазит приходится их несколько пакетов анализировать ну в общем в принципе наверное вы можете реализовать это но это не цель сделать там теперь который может вам чем-то бороться это просто папок показывать функционал того что вы можете как-то проанализировать пакет для там ваших целей на контроллере то есть я как пример причем это может быть нужна не только для детей есть более приземленно есть там например как происходит японии в японии продается сервис вы например можете купить чтобы хотели youtube смотреть в 44 кого без задержек соответственно для этого у вас должен быть телефон entity они туда в тисе пи в сем пакет начала вкладывать название приложения и соответственно уже весят пакетов модифицированный сенном доходит до контроллера на контроль над ним отступает и youtube соответственно кладем там такой-то очередь и соответственно дальше уже там все хорошо но как пример спасибо еще вопрос по поводу зеркалирования как бы она рабочие в продакшн и можно использовать на большом трафике одеты не теряются смотря какой большой трафик то есть у нас на практике и какой трафик есть куча нюансов то есть тут тоже нужно погружаться то есть если у вас обычный трафик туда там 10 гадит там 340 по спокойно вы можете нам нужно снова своем сервере прокинуть и азер коллировать куда-то на сторону мы даже у нас мы можем нужны контроллер обычно у нас в реальности можно задать их собрать вопрос с через контроллер например нюансы если у вас например в телеком операторы у вас есть физические клиенты которые папе пию и протоколу подключается там бросал как мы обычно мы все подключаем все там папа и клиентов нашего фай . идет brass у тут начинаются проблемы с тем что для того чтобы все это работало нужному сроку на высоких скоростях нужно чтобы cam программ и коммутаторы считает hashed пакет причем даже не они сами считают о карточки считают о них используют того чтобы найти правило а дальше возникает нюанс униан а карточку сейчас стеллой не умеют читать и для папы и пакета получается в том что там кладется наливает checksum и паки такой коммутатор так опа буду считать это все там руками ites раз там падает производительность ну там на два порядка я понял спасибо добрый день спасибо за доклад вот вы цифры приводили по пропускной способности в вопросах это ваши цифры как я или его общеизвестные у меня на год назад был доклад на тоже народ кон все больше про все вот эту часть можно посмотреть там прямо с графиком был а это цифры просто форвард это роутинг над какие flows и были меня вот этого это просто перекидывание пакета по одному правило то есть апреле такого из кейса есть мы получили пакет посчитали от него хэш нашли в таблице потоков одной таблице потоков запись провели какое-то действие там заменили там в заголовке так далее отправили вот это вот одно такое действие такие числа а вот с этими же правилами например мест смысл ставить в сервер 40 гигабит ную карточку при учитывая что максимум там с одного ядра мы можем снять 10 mbps of приди допустимо свой нетути 5-ки даже с де но с де м то есть умеет сейчас апанасевич умеет несколько ядер использовать обработки одного порта и то есть принципе несколько ядер справиться этой задачей но все равно вот на практике нет имеет свойства и последний краткий вопрос если у нас двадцать четыре ядра значит ли это что мы можем умножать на 24 нет не значит упретесь писаешь и но который там нормальных условиях на 80 г бит может притянуть именно такого 8-ми трафика спасибо извините я дополню вопрос вы не знаете точно с какой версии опытный switch стал вот multipad с сенсорным у нас есть версия 2 какая у нас версию 2-3 версия дай мы видим нагрузку всегда только на одном себе у нас нет ну то есть это 1 я точно что с 26 и для этого нужно использовать там всякие веса попросите или которых настраивается уже раскидывая а то есть нужна некая препарата еще надо да то есть он не сам все раскидывать но или вам если вы хотите из коробки то может вот lagopus попробовать он из коробки распределяет там по маркерам раскидывать там все то есть сам все пытаюсь понять чтобы они на одном сроки ти оказались и так далее а это какая-то обвязка надо плановый свечение на gapps это вот с нуля написано entity коммутатор то есть просто в чем проблема по на свища с тем что он изначально вот компании acer если знаете которые купили там нет махали флагов что там за 2 миллиарда купили компанию pstn то есть его купили не звезды на само по себе как там протокол конфигурирования уж не был программный коммутатор понга switch и vm ware нужен был просто им хотелось в общем более интеллектуально там виртуальной сети управлять и поэтому опыт мы светим его разработка идет для цодов большинстве своем поэтому него куча функционала которые именно для там целиком или просто проброс не трафика не нужно из-за этого там влагу psy просто так как entity от компании которыми целиком занимается туда выкинули там все лишнее по сути так вот такой который там без лишнего там функционала то есть у него нет необходимости то чего по насыщает его пан стейки используется там разные там коммутаторы создаются для разных талантов и так далее то есть влагу все этого ничего нет то есть там просто так вот пост коммутатор спасибо можно ничего просто быстро вы говорили что пакет который не известен направляется на контроллер и там он может там обрабатываться какими-то правилами вот вы показывали что там job.ru мы попытаемся расспросить его содержим а это же по идее даже сито для первого пакета это по идее очень сильно как бы тормозит трафик по крайней мере только свежий поступающих ну да так и есть и задержки бывают с донорскими контроллером да там большие задержки но при этом надо понимать что большинстве случаев это там если ты себе поток просто один пакет доходит потом ничего нового не идет если вы обработали пошли там дальше уже без всяких задержек вот ну да задержки там приличной может полсекунды учетом думать ну да ну как бы на практике не особо за месяц а то есть вы нажали enter там моргнули выдохнули пошел трафик ну да да да да та же верну поэтому собственно говоря rihanna практику чем где используется но именно вот активной и реактивной модель это очень интернете массива спасибо за доклад большое у меня есть несколько так вы знаете провокационные что ли вокруг вопрос я достаточно давно слежу за тем езде на и когда вот эту тему начала особенно сильно продвигаться на где-то в начале 10-х годов одним из вот как раз fitch киллер фич которые преподавались как почему zend победит являлась именно простота менеджмента именно того что из единой точки есть единый там коммутатор если контроллер из которого можно управлять всей сетью и там можно делать все что угодно вот мы прокручиваем вперед много-много лет то есть приходим 2017 год и оказывается что вендоры которая как раз раньше просто этого не предоставлены из там взять сыску там джунипер и так далее мало того что все сейчас уже сделали нормальная поэтому скайпе то есть что сейчас во многом devops в сетях заключается в том что народ повально используя танцпол и тем самым контролирует просто замечательно свои сети и во-вторых появляются система управления как раз всем допустим сетевым стеком причем не всегда на базе zend сетей в виде там упал в а свечей и так далее там взять даже нам не рекламы для например там мира кидз и сказки да который позволяет людям настолько сильную сократить издержки что вот все вещи которые вы нам рассказывали они выглядят несколько монет обойдутся просто дороже компании то есть мне кажется вам что езде нд притормозил именно на таком enterprise нам рынке и что тут некий тупик наблюдается потому что с тех пор как это анонсировалась там в начале десяток скажем так годов на данный момент особо дальше и села в каких-то да ничего не ушла спасибо за вопрос то есть вы действительно там отчасти право что сейчас понимается под удаленным это то к чему привел sdn там среди других вендоров это вода открыли api то есть нам открыли еще там пару окошечек в механистом коммутаторы в летавшего могли плачут configure тя действительно так это вот то что я имел душ тоже здесь сейчас этот открытие этих api это уже даже хорошо то есть раньше такого не было на поэтому это очень крут что касается там издержек там каких-то cisco вских и так далее там еще использовать они все равно дороже это чем просто вот так вот на коленке написать и там у себя использовать то есть я не знаю почему вы считаете чуть дороже но как бы это очень просто сделать и даже без больших издержек что касается притормозил основное торможение как раз и заключается в том что вендоры такие как cisco они не хотят переходить на такие решения как нам о кунфу и так далее то есть для них это они 20 лет разрабатывали вот это весь весь все лойко управления а тут им предлагает давайте выкинем начнем с нуля поэтому разрыв и это как бы сильный стокер то есть мы даже часто сталкиваемся с тем что мы используем это не буду без названий но бывает так что мы используем счет железку а потом приходят и говорят зачем вы как бы ну и общаюсь с кем-то в компаниях которая железка на модель top он flow от не приходит их на чествовать зачем вывод у послов продвигается вот в компанию н продаем уже там наши там линейки которые там по бюджету записан там на 10 лет вперед то есть а вы как бы сейчас чего хотите развивать это направление упал славы как вы загубите это вот это направление потому что рис станет все дешевле там лучше и поэтому такие препоны да то есть часто возникает у вендоров тоже но на мой взгляд все таки то есть притормозила стопор сто процентов то есть сейчас скорее вот эти вот эту gartner этом кривая то есть сейчас опыт флауи вот именно сдаем в такой сигнал и как из него хотели он где-то вот внизу то есть вот как-то они там теплота чаяния не знаю как там это называется вот эта самая нижняя часть и теперь от нее вот просто тихонечко поднимаясь наверх понимаешь что можно то есть я могу вам после этого показать интерфейс именно там на систем управления попал слова и других компаний которые там активно продвигают то есть есть альтернативный рынок он как бы есть он потихонечку отъедает все равно пока это не такие масштабы с как с традиционными сетями и как бы там труп графический интерфейс тоже там большие и более функциональные чем существующую вендоров спасибо уже не вопрос вопрос первый вопрос он касается надежности относительно построенных стильный sdm если например контроллер станет недоступен для произойдет создает коммутатором до соответственно а если внезапно контроллер недоступен то поведение 2 по протоколу набор распространенной том что у него остается те правила которые мне уже были залиты они работают как работает то есть вот с теми правилам которые в нем есть на данный момент то есть крах не будет сейчас но например то есть если вы залили статически правило просто там обеспечение доступа в интернет каких-то клиентов то все как бы будет работать к ним как правило для них залито так и все будет работать но если например у нас какая-то реактивная модель например человек кликает на пульт на телевизоре джампи запросы но на новый канал а прилетает к нам пусть он будет кликать уже ничего не будет доступна ну то есть никак не под мы не сможем обработать и прокинуть новый канал для этого клиента мы не сможем вот есть на тот первый момент когда справила замирает второе редких случаях используется ну то есть практически нигде не используется то все коммутатор становится с 1 раз традиционными все-таки серас и у нас едва сеть которые там со всякими там маг лендингами и прочими вещами скажите 2 контролирует не что это обычно мне не оставит конечно на практике в кластер контроллеров нет бывает так же понимаешь может приехать трактор вообще вот копают там моя маска вода перерыли чего-то раз и питания вот с пропала где контроллера ставит но как бы ну или чет там просто систему управления как бы все на это все закончилось 2 контроллер конечно ставит есть чем они там географически раз раскидывают нужна стрела что кто-то можно приехать и этот кластер контроля обычно работает один 2 просто сидит ждет и мониторе там сердитым учетом произошло с temper и второй вопрос видел внучок м.р. там в презентации скажи пожалуйста а если если возможность использовать isdn коммутаторы между именно железку сама сексом допустим я не буду врать то есть я не знаю я просто показал что можно там покинуть нужно хорошо на потому что до интересный ногти вопрос мне больше пусть здравствуйте меня сергей зовут доклад понравился спасибо у меня тоже каверзный вопрос на самом деле вот у вас там был слайд где 4 сетевых устройствах было да и о них рвался link а вот можете переключить если вот вы говорите там link порвался да и в обычной ситуации до 10 секунд займет переключения а почему такие цифры странные если это третий уровень то любой link стоит протокол обработает то меньше чем там но не знаю за 100 миллисекунд вы задержку вообще не увидите ну там связка какие-то мысли pvr подрабатывает моментально а из т.п. как бы есть rapid пвс т п + да как бы и он как бы тоже ну там время stp доу медленный до 10 секунд но rapid pst плюс как бы давно уже используется несколько лет взгляд ездить бывает использовать но это просто ремарку на практике если так мы сдаем тоже как бы там не все супер быстро переключается то есть потому что да да да то есть смотрите то есть бывает такая ситуация что как к как мы можем определить что порвался канал бывает так что канал порвался без мигания пар тату спорт не вопит если его выдернуть например физически blink из из коммутатора нам сразу приходит сообщение как бы там все хорошо но бывает так что просто серединку там где видеооборудования поступило как бы порты у нас вопи а трафик не ходит соответственно тут мы начинаем посылать пакеты мы я проезжаю сейчас до проект то есть мы мониторим периодическим посылки пакетов сейчас sdn об onslaught чистая путал коммутаторы над страдает от того что у них слабый контру plain то есть они могут очень много пакетов наверх сообщать и получается так что мы не можем активно мониторить участок что мы узнаем о порыве каналов там и затем секунду-две пройдет то есть там не все хорошо то есть получается сходимости вы только из control плейдо узнаете ну по сути да только из контра понят спасибо сейчас очень распространена хотя там беде и все вот это вот чуть но нового первых стоимость железки сильно там выражается в общем пока я очень не тот кто умеет надо в общем в любом случае вопрос low пока этого нет в принципе поддержкой где нет окон flow это как бы один из минусов но если нет вопросов тогда спасибо"
}