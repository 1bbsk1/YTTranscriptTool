{
  "video_id": "NeuYlOKmHZE",
  "channel": "HighLoadChannel",
  "title": "Защита данных и датацентров от катастроф  Подход Nutanix / Роман Хмелевский  (Nutanix, Inc)",
  "views": 225,
  "duration": 1367,
  "published": "2017-04-07T15:24:21-07:00",
  "text": "спасибо меня зовут роман хмелевский я работаю системным инженером в компании amd onyx презентация будет совсем не такая зубодробительной как прошлое в общем то осталось на самом деле достаточно обзоры на я думаю что больше здесь многие вещи которые которых я буду рассказывать знают я хотел рассказать о методах защиты данных какие считают правильными компании антониус компании которые работают на следующий слайд пожалуйста есть а я буду пропускать совсем очевидная вещь и отказ от рейд в особенности аппаратных рейд это кажется немножко парадоксальном тем не менее если вы посмотрите на то что сейчас происходит индустрии обнаружите что достаточно общее место например многие из вас знают какую файловую систему который называется raised виноват ctfs вот reddit ctfs это по сути нерейт это некая интеллектуальная распределенная файловая система это схема по которой файловая система расклады блоки данных в одесском примерно таким же образом работает то аналогичным образом например построена схема отказа обеспечения избыточности и обеспечение дисковой отказоустойчивости например v-ray дпс тем крае нет об такая вот такой подход становится все паули более популярным в том числе используем его ему его и мы двойной тройной резервирование это необходимость в том случае когда вы используете емкие жесткие диски диски sata как известно притык уже подошли к десяти терабайт am в продакшене при этом скорость чтения с этих данных с этих дисков не увеличилось принципиально за прошедшие там 10 15 лет резервированный путей доступа к данным и распределение данных с учетом аппаратных компонентов и достаточно очевидная вещь лично интегрированный снапшоты снапшоты это мгновенная копия снимков данных сама по себе как как изобретение как идея на появилась девяносто третьем году уже упомянутый сегодня компания netapp мы ее также используем многие из тех кто попробовали снапшоты как средство backup а знаешь что не все что-то одинаково полезны многие система хранения реализуют снапшоты из рук вон плохо например снапшоты vivre считаются непригодными в продакшен тем не менее существует хороший хорошо реализованные снапшоты снапшоты у нутаникс snapshot они tab и ряда других современных систем и систем хранения сделан достаточно неплохо для того чтобы им пользоваться в реальной жизни асинхронной асинхронной репликации это хороший хорошая хорошее подспорье для построения защищенного дата-центра резерве dino pop резервирование в паблик load это сравнительно новая тема о которой я немножко дальше скажу подробнее у всего есть свои нюансы безусловно нюансы есть и у потому что я перечислил следует пункте что общая при общий принцип заключается в том что никто не знает лучше о тех данных которые вы защищаете чем-то приложение которое с этим данный нога работает если в ваш информационная система использует прикладное прикладное по которое умеет защищать свои данные то например да ты вали перейти группы клинч это вы сон средства у ему сушки или так далее используйте их это наилучший способ зачастую это часто сбрасывать со счетов и игнорируют это возможность немалую роль в этом конечно сыграли маркетинг систем хранения которые доказывают что система хранения делают это лучше всех не правда лучше всех это делает приложение если приложение это умеет работать используйте это но проблема в том что множество приложений которые это делать не умеет ли дело я плохо в этом случае конечно нам на помощь приходит репликация данных синдроме аппликации это безусловно идеальное решение она был в идеальным решением если бы не проблема связана с тем что на больших расстояниях latency убивают производительностью синхронной репликации к сожалению принципиально страдает этой проблемы больше сотен километров и вы теряете две трети производительности вашей системы асинхронной репликации хороший выход но неизбежны потери если вы делаете синхронную репликацию цикла примерно 15 минут это означает что в наихудшем случае вы потеряете 15 минут изменения ваших данных и возможность выйти из положения разумеется это опять же интеграция с уровнем приложений интеграции с уровнем бизнес-логики наши наш подход наш подход на стороне нутаникс использовать гибридная гибридный подход на уровне защищать данные на уровне приложений там и приложение умеет защищать асинхронной репликации как общее решение и наконец синхронная репликация в тех местах которые без нее обойтись не могут безусловно важным является выбор правильного решением многие система хранить данных традиционно steam и хранение данных никак не интегрированы с уровнем приложений из вышележащим уровнем операционной системы и так далее они работают на уровне блочного доступа мощного булочной репликации и зачастую никак не взаимодействуют с выше лежащими услышали защем по наконец достаточно очевидные очевидные слова ног про который многие постоянно забывают о том что репликация это не пока мы все знаем что рейд это не backup вот репликация тоже не пока она тоже не заменяют по капле the version ность прежде всего это возможность восстановить определенную версию состоянии данных если данные будут испорчены на одном сайте реплика у вас тоже будет испорчено будете владелец гордый владелец множество испорченных к и в основе с тем хранения и на самом деле неправильно говорить система хранения гиперконвергентное систему танец лежит распределенная файловая система которая по природе своей распределенная и имеет средства и сбыт охране избыточного хранения мы используем внутри внутри кластера нодов нутаникс мы используем распределение распределение данных по дискам данные которые записываться на локальной но один одновременно раскладываются по нескольким но там внутри кластером и мы таким образом имеем избыточную копию для каждого для каждого блока хранимых данных одну или две копии таким же образом реализованы высокая доступность поскольку мы работаем поверх того или иного гипервизором например ivory вивария секс или linux крем или макросов скальперы мы используем этих штатные возможности например эта высокая доступность если мы теряем ноду мы можем перезапустить виртуальной машины с приложением пользователя на другой ноте и приложение останется доступна через нашу пластинку файлы с тем останется доступной его данные которые он увидит через через файл с тем по мере того как эти плоти данные будут мигрировать для сохранения низкого хороших показателей полотенце мы получаем эти данные вновь локально также к некой как они были как они хранились перед этим и соответствующим образом растушевываем блоки данных по кластером для того чтобы обеспечить отказоустойчивость таким образом на одном слайде все наши возможности по защите данных это локальное снапшоты о которых я говорил выше снапшоты это хорошее средство для создания backup а они versions они быстро создаются из них можно быстро восстановиться я считаю что мы тут идет на этот на эту тему идет много споров можно высчитать снапшоты полноценным боковым я считаю что бы копыта система это нечто из чего можно быстро восстановить данные если данные восстанавливаются в течение вашего срока вашего силы определенного силы это хорошая пока не абсолютно неважно как каким насколько интер праздным образом он сделан если вы не успеваете восстановиться за время определенного ши масло и какой бы это не был совершенно какие бы не были ленточные библиотеки это плохой backup снапшоты в этом смысле идеальный случай потому что он позволяет восстановиться очень быстро локальность насчет и конечно же подвержены проблемам связано с потерей в локальной локального локального кластера в этом случае вы можете хранить резервную копию отдельно в том же дата центре или в дыр-дыр кластеров дар тот сон не на на этом слайде четвертый вариант о котором я говорил чуть выше это backup в публичное облако мир в наших системах нутаникс у нас есть возможность создавать виртуальные нутаникс среде например amazon web services или microsoft ажур в этом случае там создается виртуальный класть туда можно отправлять снапшоты это достаточно экономичны с точки зрения расхода трафика потому что при снабженных фактически дисковый div добавок еще оди дуплицирование при современной стоимости хранения порядка 10 центов за гигабайт при неограниченной емкости хранения на амазонские сервисах это довольство достаточно неплохой вариант по сути его применимость неопределимо всего лишь вашим каналом то точки присутствия в с несколько слов асинхронной репликации синхронная репликация и метра выберите метра вы любили титане просто синхронная репликация это еще интеграция на уровне гипервизора вы можете построить два дата-центра с двумя пластинами нутаникс организовать между ними синхронную репликацию что немаловажно в отлить серьезное отличие от с контактом к от от конкурирующих решений это например такие как и msi рефлекс или это петра кластер мы работаем не по темному волокно мы используем репликацию синхронную репликацию power трясете по опись этим фактически единственное требование к этой сети которые мы предъявляем это 5 миллисекунд round trip тайма то есть если pink между двумя дата центрами обеспечивается в пределах пяти миллисекунд мы держим синхронную копию на этих двух дата центрах по обычной фильтре айпи сети сочи неплохой результат что важно обратить на что на что внимание домен we were речей который серым наверх нарисуем сверху он единый на оба дата центра то есть таким образом в вашей виртуальной машины могут мигрировать с 1 до центра на другой без использования таких средств как bioware srm и так далее почему это важно дело в том что зачастую создание вот подобного речи и класс terrano 2 дата-центрах распри разнесенных друг от друга на 300 на 300 до 350 километров как мы умеем делать зачастую сопряжено со сложностями организационного характера у вас может быть на втором дата-центре у вас может быть другая айпи адресация другие настройки это все необходимо каким-то образом передать в виртуальную машину которая переедет на другой хост на другой другой то центр в этом случае мы как раз интегрируем ся с api why worry настоящий момент подержит только в январе сожалению работы ведутся несколько подробнее о технической части того как это сделано с точки зрения записи и чтения все в общем сделан достаточно не достаточно тривиально для знакомых для людей знакомого синхронной репликации операция записи на активном контейнере на том контейнере код на котором живет собственная виртуальная машина основной владелец операций осуществляется обычным образом для синхронной репликации то есть осуществляется запись в локальный контейнер отправляется запись на диски отправляется запись на удаленный контейнер на диске получается окно legend ок 0 винт вращается виртуальной машине она понимает что запись сделана одновременно синхронно ногу на вот это но опыт эта stora несколько сложнее все происходит том случае если мы читаем или пишу не из но контейнера в этом случае возникает про кто должен рулить регулировать ситуацию с двумя с двумя копиями данных в этом случае мы используем механизм при котором записи отправляются на активный контейнер в том случае даже если виртуальной машины переехал анализирует с центр мы отправляем запись в активный контейнер пишет возвращается но любит ответ да вот возникает вопрос чего чего мы за это платим как я уже говорил выше синхронно репликация всегда сопряжена с потерями производительности мы делали тест это результаты примерно зимы зимы и весны этого года достаточно тяжелая виртуальная машина как видите 16 црб 64 гигабайта памяти тепихе сиди теперь си си подобная нагрузка то есть достаточно тяжелые и теперь мы теряем на 4 миллисекундах рон trip типа который мы ввели с помощью эмулятора регулятора vlan между кластерами мы теряем порядка 40 процентов это очень хороший результат на самом деле те кто знаком с тем насколько сильно теряется производительность при привык при повышении latency записи понимаешь что это хороший результат на не на нем таких на не таких тяжелых системах я думаю даже будет лучше то есть это наихудший наверное на мой взгляд результат со синхронной репликой все достаточно просто эта передача на любое расстояние это любые схема репликации репликация типа один к одному включён у нас базовую поставку репликация один комп многие к одному это дополнительный более высокие уровни лицензии хотя вы их можете использовать так у нас интересная возможность можете подойти к нам на стенд посмотреть у нас на стенде есть достаточно мощная система которую мы будем показывать сегодня и завтра асинхронно репликация достаточно эффективно поросло трафиком поскольку передается фактически дисковый div да еще github лиц ированный гранулярный ссадины диск garnier нас один век дико файл можно организовывать домен защита для группы допустим для тех групп виртуальных машин которые необходимо а реплицировать атомарные операции мы не теряйте производительности знаков на к вы можете потерять часть данных в том случае если сбой произошел в момент когда репликация 1 репликация прошла вторая еще не вернулась еще не дошла на ту сторону сегодня мы обеспечиваем порядка 15 минут цикл репликации это в общем довольно неплохо как я уже говорил подобное подобные проблемы необходимо решать на уровне бизнес-логика темно той стороне приложение и резюмируя два основных параметра о которых говорят когда рассказывают про отказоустойчивость и восстановление после от после сбоев р п р р р п о р т о р п это момент на который вы потеряли данные и восстановили его в случае простой пример случай если у нас бэкап делается рассудке значит у вас scorpio вас 24 часа наихудшем случае эти а этот момент который проходит от момента сбоя до момента когда вы все восстановили вот 14 мин мы сегодня восстанавливали на сайте apple с презентации 14 минут решение нутаникс timestream это снапшоты cloud connect это backup публичное облако ремонт рипли песен от оси короной репликация метро в или перейти в том случае если вам действительно нужно 0 0 orpio и ratio исчисляемой минуты я до самого конца сегодня на днях хотел рассказать вам про наши российские внедрение к сожалению наши российские клиенты не дали добром приходится рассказывать про американцев как всегда интересный результат интересный проект который закончился буквально в августе в августе в сентябре этого года с 2008 года в америке в госструктурах идет проект под названием анклав concentration in из этих прежде всего от фбр и департамент и департамент юстиции вместе распустит сша эта программа перед технологическое перевооружение и консолидации эти ресурсов в рамках этого проекта около 20 дата-центров разбросанных по всему сша соединяются в два больших до центра на восточном побережье и для этой программы мы сделали наверное крупнейшие я подозреваю что крупнейшую в мире она крупнейшая в сша инсталляция видя и на 70 тысяч рабочих мест на момент когда вот я последний раз информацию для презентаций собирал это было у нас была там уже занято 55000 named person но она как вот работающих работающих десктопов это безусловно бишь in critical система для для фбр интересные интересно то насколько как это все как этот проект развивался изначально в него пришло множество крупных вендоров там тир-1 что называется вендоров там более объем таблички там был эмси с виси и со своим проектом конвергентной системы в итоге на февраль этого года в шорт-лист данного тендера попали 5 интеграторов три из которых предлагали нутаникс 21 и один собственно танец надо сказать что если вы не следите за новостями дела является нашим моим дел продает нутаникс под своим названием под названием galaxy galaxy конвергентная система это как раз на танец вот подобная система как раз и была поставлена 544 ноды разбитые на 2 класс терраса с асинхронной репликации между ними с в компаниях снапшоты и так далее использовался копиры гипервизор из использовался видео я system center и xendesktop клиент достаточно забавная забавная штуковина про которой удалось немножко найти информацию это тонкий защищенный клиент выглядящие как флешка во флешке находятся защищенной операционная система клиент vpn client видео с эта штука которая позволяет американским агентом сплитом работать непосредственно в поле они загружаются подобные штуки защищенную среду получают доступ своему десктопу и работает с необходимым базами данных там информация преступниках и так далее ребята работающих в городе счет такие не лишены чувства юмора вот и вся эта система называется matrix2 что меня порадовало спасибо за внимание это все хотел бы обратить внимание на то что у нас есть сайт который называется нутаникс точка ру это не копия маркетингового американского сайта скидок это наша российский партнер сделали перевод сайта который в оригинале заяц on the necks библия у нас он называется главная книгу нутаникс специфика российской российская специфика мы не хотим не обидеть обидеть ничьи и чувства поэтому заходить туда его пишет наш американский стены архитектором танец который собственно говоря сейчас занимается разработкой там в калифорнии ядра наша система меня зовут рама хмелевский компаниям the next подходите мы два дня здесь стоим на выставке у нас есть железка ее можно пощупать руками можно договориться о тестировании след а если есть какой-то предметный предметный интерес задавайте вопросы здесь или там с удовольствием отвечу на вопрос а там подходите у нас сейчас есть 5 минут чтобы завалить вопросы пожалуйста вопроса вы уже все задали вопрос и достаньте нутаникс а ну в общем вопросы будут потом к вам на стенде спасибо большое"
}