{
  "video_id": "vxKPI683CsU",
  "channel": "HighLoadChannel",
  "title": "Осваиваем Tarantool 1.6 /  Евгений Шадрин (Sberbank Digital Ventures)",
  "views": 1294,
  "duration": 2703,
  "published": "2017-07-29T12:57:50-07:00",
  "text": "спасибо сергею за доклад ним слайде было указано что следите за новостями в свое время мой коллега он действительно следил за новостями несколько лет и вывел такую статистику что решение но сквирт какой-то релиз появляется чуть ли не каждые две недели конечно многие из этих naskel не выживают проигрывает конкуренцию пропадают но мир naskel обновляется но в решении очень часто я хотел бы немножко познакомиться аудитории скажите здесь есть люди которые никогда в жизни вообще не использовали naskel есть такие люди спасибо немного но они есть а есть люди которые больше пяти лет используют основной square в своих проектах компаниях такие люди тоже есть и последний вопрос кто из вас участвует в open source проектах или нурук немного буквально 3-4 но они есть и так я спас позволение сергея вначале свое доклада немножко повторюсь по каким-то основным теоретическим выкладкам меня зовут евгений я работаю в подразделении сбербанка сбербанк digital vengerov это небольшое подразделение которое занимается внедрением инновационных продуктов и решений то есть мы делаем эти прототипы на стыке новых технологий в своем докладе я хочу рассказать про свой кейс использование но искали решения со стороны пользователя поэтому вкратце хотел бы пройтись по теории которые сергей рассказывал подробно ну еще раз что же такое naskel я лично использую акроним что это не только сквер это решение которое содержит себе модели данные отличной от реляционных и призваны решать какие-то вопросы например вопрос простоты масштабировать его не зачастую за счет того что в носке решениях для хранения работы с данными не нужно задавать конкретные схемы сущности много конфигурации очень легко и просто решать вопрос масштабирования развертывать большие кластеры с большим количеством узлов добавлять эти узлы удалять эти узлы также но искали решение зачастую весьма специализированные то есть каждая команда разработчиков она не всегда старается сделать большой универсальный проект она старается решить какую-то задачу такая специализация решений позволяют добиться весьма высоких показателей производительности в конкретных задачах ну и соответственно в таких задачах используют низкой решение может быть удобно и просто сергея много рассказывал про различные базы данных я тоже привел наиболее популярные ну в порядке классификации то есть вы слышали про киева или хранилища кризис и реак они используют модель ключ-значение для хранения данных документа ориентированная база данных mongo db весьма распространенная известная документ ориентированная модель чуть более сложная чем модель киеве лью и позволяет нам хранить весьма большую эротическую информацию табличные матричные базы данных например apache hbs можно работать с большим количеством распределенной информации ну и мульти база данных которая поддерживает мульти парадигму но вот я привел и в качестве примера базы данных поддерживавших графа вую модель у графа в модели очень хорошее преимущество есть очень удобно прослеживать связи между данными что например бывает неплохо при работе с проектами аналоги мисс соцсетей как же из всего вот этого большого-большого большого разнообразия нужно выбрать то решение которое подходит именно вам я пользуюсь следующими принципами ну пока они мне помогают не подводили ну избитая фраза но стоит упомянуть что не стоит изобретать велосипед я встречал команды разработчиков которые рвались в бой говоря сейчас мы быстро напишем какое-нибудь свое небольшое хранилище которая подходит именно нам которые храните типы данные которые уже нужны нам все оказывается не так просто вот база данных тарантул про которые буду рассказывать насколько знаю она уже разрабатывается больше четырех лет команды профессиональных разработчиков и постоянно возникают какие то вопросы проблемы которые стоит решает решать решать многие но искать решения в возраста больше десяти лет поэтому правильно выбирать нужное вам решение исходя из вашей конкретной задачи я уже сказал про специализацию ну и сквер соответственно большинство баз данных призван решать какую-то проблему если вы поймете какую проблему решаете вы вы скорее всего сможете подобрать нужное решение ну надеюсь пункт опирайтесь на вот других понятен в мир интернета не так сложно залезть прогуглить почитать книги в конце концов взять и просто в наглую написать разработчикам и сказать скажите пожалуйста вот у меня есть такой кейс как вы посоветуете вы решить многие разработчики весьма отзывчивые и помогают ну если вам повезло для вашей задачи существует несколько решений то не стоит очень долго внедряться в сравнении производительности построение тестовых стендов в пониманию того что же лучше a или b выберите то что знаете сэкономьте время на изучение сэкономьте время на разборку продукта если знаете вы хорошо если знает ваш коллега тоже неплох всегда можно к нему обратиться ну и краткие перечисления тех кейсов которые решают не успел спрашивай из них я сталкивался лично то есть но кэширование данных например всем известная база данном memcache сюда можно добавить хранение промежуточных данных то есть это те данные которые мы хотим получить доступ быстро сейчас нужный момент работа с большими объемными данными наверное не совсем корректно звучит потому что реляционные базы данных тоже работают с большими огромными потоками данных скорее имел тут именно слова потоки то есть например нам льется откуда-то запросы серверов и мы хотим их быстро сохранить а потом уже разбираться что с ними делать дальше это задача например ferni плов решает hbs в рамках продукта hadoop здесь есть те кто использует ходу потом занимается bigdata есть люди сервисы очередей нос клей может выступать как часть сервис очередей то есть к примеру связка там ребятенку редис пара встречалась на моей практике простой и удобный back and back and виде успел ну отдельная вынес платформы для статистики обработки данных это когда мы получаем данные например и не хотим хранить и все у нас нету памяти у нас ограниченные ресурсы мы можем эти данные сразу же обрабатывать например там получаем какие-то признаки пользователей ненужные признаки можем выкидывать остальные нормализовываться и просто хранить из виде векторов ключ-значение пример еврей деся ну и можно использовать мою square в качестве небольшого удобного бэг-энда для хранения то есть просто взяли сохранили манга и деби достаточно удобно быстро развертывание база данных под которой подходит для этого кейса this в конечно намного больше но я рассказал те с которыми немножко сталкивался вообще сбербанк digital винчи раз я занимаюсь разработкой так называемых real-time систем то есть систем которые работают в режиме реального времени и основное предназначение таких систем это получить информацию сервера сохранить ее обработать понять что она из себя представляет и выдать серверы нужно ответ ну примеру я получаю информацию о пользователе которые ходит где-то в недрах интернета я получаю все данные которые смог собрать анализирую их и могу сегментировать пользуются то есть отнести его к той или иной категории то есть узнать там это молодой человек двадцати пяти лет который интересуется автомобилями или это молодая девушка 18 лет которая хочет поступить в университеты ищет там где бы возьмет взятку за поступление для решения своей задачи я использую но сквер базу данных тарантул и в дальнейшем своем докладе я расскажу почему для чего я использую и как она помогла решить те задачи которые передо мной возникает я честно стырил цитату с главной страницы разработчиков это их позиционирование это на узкой лттб с running in applications сервер то есть сами разработчики позиционируют тарантул как проект который состоит из двух частей первая часть это я реляционная база данных вторая часть это в апликэйшен server to server предложений приложений с использованием языка lua кстати кто-нибудь обратил внимание что большинство значков современных но и сколь баз данных используют серый цвет и красный я посмотрел еще штук 15 тоже серый и красный наверное это в тренде я буду приводить вам какие-то примеры кода дальше дальше у кого есть возможность то хочет может зайти по ссылке на сервер трой тарантул . орк это интерактивный сервис где вы можете зайти и сразу воспользуется тарантулом то есть это некий интерактивный to rumble который выделяется пот вас на серверах разработчиков может быть кто-то захочет сразу примеры кода туда вбить и так что же выделяет тарантул из большого стакана sql технологии тарантул хранит все свои данные в памяти благодаря этому мы получаем быстрый доступ к этим данным то что тарантул хранит их в памяти это не значит что это не безопасно и данные мы можем потерять в tarantul и есть механизму сохранение данных такой как рассказал сергей у нас есть логе журналов и у нас есть снапшоты это бинарное с ними состоянии эти два механизма работают вместе то есть у нас есть точки сохраненными данными и у нас есть описание действий которые делались до или после с этими данными соответственно имея такую информацию мы всегда можем прийти в нужное состояние в свое время хранение данных в памяти приводила к тому что это память очень быстро заканчивалась и заканчивается сейчас но все-таки объём оперативной памяти постоянно растут и похожие базы данных они получают более широкий спектр применимости тарантул использует документ на ориентированную модель данных то есть все данные он хранит в некой абстракции называемый документ у документа есть свои поля вторыми тарантула работает одна из особенностей тарантула как база данных это наличие вторичных индексов наличие вторичных индексов позволяет сделать три рование действия с данными тарантула более живыми более интересными и более быстрым и то есть учитывая что с данными тарантула я очень часто работой внутри самого тарантула мне важно наличие разнообразных императоров до нужных выборок тут был вопрос про транзакция сразу скажу я их не использовал пока своих проектах но тарантул поддержит полноценные транзакции вот насколько я знаю в некоторых компаниях на авито успешно использует их для решения своих в кейсов в tarantul и есть модель из легковесных потоков или green trees может быть кто-то слышал про них это многопоточная модель только потоки создаются не на уровне unix и они создаются внутри самого приложения соответственно это позволяет нам реализовывать какие-то асинхронные вещи реализовывать какие-то событийные модели также тарантул работает сетью и файлами у него есть свой http server у нее есть библиотеки которые сохраняют открывает файлы это тоже пригодилась мне в задачах тарантулы the application server ну это встраиваемый язык tarantula здесь я привел пример очень искусственного абсолютно не используя на практике скрипта для того что вообще показать что такое но язык ло он был разработан в бразилии в католическом университете он произошел от языка sol солнце который работает именно с данными был заточен под работу с базы данными здесь мы можем видеть что это не просто скрипт это исполняемый скрипт решеточкой ! это так называемый механизм шабан который позволяет нам указывать кто и как должен запускать этот скрипт то есть видя в консоли тарантул скрипт . мы получим на экране hello world мы здесь видим функцию которая работа с двумя объектами и ниже инициализируем сами эти объекты основная структура данных флаг это таблица то есть объекты а и b представляют таблицы я специально инициализировал их немножко по-разному чтобы показать что язык очень гибкий и синтаксические приятной эти таблицы содержит могут содержать внутри себя другие данные это могут быть тоже таблицы а таблицы могут содержать еще другие таблицы и иногда по неопытности стогов составлялись очень большие сложности функции тоже могут хранится внутри таблицы и вообще с объектом функций тоже можно работать как с таблице есть свои методы а дальше на 2 слайдах я приведу вам пример более практического скрипта которого которым уже можно дорабатывать и использовать в каком-то там вашим продакшене он решает маленькую совсем задачку решает весьма тривиально он считает количество уникальных посетителей на страничке вот я разнес его на два слайда это первая часть этого скрипта это 2 спешно это так называемый исполняемый lua скрип который будет запускать тарантул и он будет выполнять тупо следовать действие которая заложена здесь можно вкратце пройтись по блокам того что здесь есть а потом мы разберем чуть подробнее ну вверху мы под я подключаю те пакеты которые мне понадобятся это важный механизм рик флэр я подключаю пакеты лак консоль пакет сервера определяю какие-то константы которые использую дальше идет конфигурирование базы данных тарантул с помощью модуля бокс кафе г-где я задаю там два необходимых мне параметра я запускаю консоль и создаю сущности нашей базы данных бог схема space create users to сейчас создал пространство users об этом всем я чуть позже расскажу второй слайд получился слайдам который работает с сервером тарантула я описываю функцию хендлер функцию обработчика запросов внизу создаю сервер создаю road для обработки и старту этот сервер со стороны пользователя выполнения этого скрипта выглядит примерно так пользователь зашел там примерно локалхост и увидел приглашающие сообщение в дальнейшем если он будет обновлять у него уже будет выслано cookies у него будет присвоен какой-то идеи и он будет знать количество юзеров которая заходит на эти странички уникальных лидеров вот этот небольшой скрипт решает какую-то нужную мне задачу это такой ответ на вопрос почему же все-таки мы используем язык ло язык но он весьма простой существует целый набор и статей о за 15 минут но за 30 минут вам действительно нужно немного чтобы познакомиться с этим интересным языком за пару часов вы узнаете все его особенности очень удобно что основная структура данных это таблиц и это позволяет унифицирована работать со всеми остальными данными которые содержатся сам по себе стандартный интерпретатор ну а он не очень быстрый правильно сказать совсем не быстрый но существует аналогичный интерпретатор аджит который делает jit компиляцию и он намного быстрее и он делает ло очень производительным языком есть такая бега течка law of an это возможность программировать в функциональном стиле вот благодаря lua джиту это библиотечка очень быстро работает вы можете про google и почитать про него отзывы про его производительность очень интересно также но очень хорошо встраиваемый язык и у него прекрасная интеграция с языком все благодаря этому в точнее благодаря тому что у а можно запустить внутрь языка си ло можно точнее хищной процедуры можно запустить внутри lua lua нашел очень широкую сферу применимость в геймдеве очень много расширений квестов и различных различных игровой механики логики в известной игре world of warcraft написано на лова и до сих пор пишется тарантул но успел это полноценный lua интерпретатор то есть если вы просто запустит тарантул вы можете банально работать слова соответственно тарантул можно запустить в двух сущностях 1 сущность это как интерпретатор то есть запустить тарантулы построчно выполнять какие-то команды это бывает полезно если вы что то не знаете или хотите сделать какую-то команду с документацией ну и с помощью стартового скрипта и лотом называть его можно как угодно к котором описано последователь команд и так давайте более подробно разберем тот пример который я привел до этого старта скрипта нет ло начинается работа с базой с ее конфигурирования механизм бокс кфг это пакет бокс который внутри себя содержит табличку кфг и я могу задавать какие-то ее параметры бокс это ящик это коробка этот пакет отвечает за непосредственно базу данных вы можете просто так запустить тарантул выполнить какие-то там процедуры функции написать какие-то сообщения там даже поработать 6 пеший степи сервером но без конфигурирования бокс кфг базу данных вы не запустите в данном случае я задал два параметра которые мне хотелось бы видеть я задал уровень логов которые будут печататься это пятый уровень то уровень дебаг уровне стандартный debug info я задал очень важный параметр это слабо лог арена это та память которая выделяется в tarantul а точнее в оперативной памяти под аллоцирование размещения данных в данном случае 1 значит один гигабайт также пакет бокс он содержит много других вспомогательных вещей средств такие как бокс info это библиотечка которая выводит нам общую информацию о таранто ли бокс слаб это очень важный параметр с помощью очень важная табличка с помощью неё мы мониторим данные нашего тарантула и смотрим сколько у нас место осталось у нас осталось ну и box that это библиотечка статистики и показывает количество там inserto все лекторов и других операций которые вы совершили если в интерпретаторе тарантула после задания параметров набрать бокс кфг то вы получите объект с описанием всех параметров которые есть не только те которые задал я а также те которые задаются по умолчанию ну вот здесь мы видим то что я задал это слабо лог арена пространство локации один гигабайт видим log level 5 уровень дебаг также увидим важный параметр snapshot каунт это количество снимков состояния которое тарантул будет хранить то есть он будет хранить последних 6 снимков которые делали за определенный период кстати этот период тоже здесь задается параметром snapshot период 3600 секунд то есть раз в час тарантул будет делать снимок сохранены состояния то есть вы сами можете выбирать тот уровень безопасности который вам надо можно делать хоть там каждую секунду минуту но это будет отнимать ваши ресурсы очень сильно параметры директории snap директория вал директория где вы храните свои снапшоты и логе вот пример пакета бокс info здесь можно посмотреть какую-то информацию о tarantul и то есть если ты тарантул запущен как демон вы можете узнать его пит вы можете узнать версию тарантула на данный момент актуально версия 165 вы можете посмотреть время беспрерывной работы вы можете просто узнать тот статус котором находится ваша машинка после того как вы за конфигурировать и данные мы переходим к созданию самих сущностей самих данных внутри tarantula здесь я привел картинку из документации это некое изображение модели данных тарантул то есть в tarantul данные хранятся space ах в каждом спейси есть сущность to play это записи и индексы которые вы сдаете там первичный индекс сторичный средства после конфигурации переходим к заполнению нашей базы данных то есть мне нужно нужно пространство в котором я буду задавать информацию с юзер ах вы можете заметить что я поместил эту информацию в условную конструкцию сделано это для того что если по какой-то причине ваш тарантул был остановлен и вы запускаете его заново при сохраненных snapshot ах их слогах то тарантул прежде чем запустится он восстанавливает свое состояние то есть он берет snapshot и проделывает действие и заказ логов соответственно если вы запустили так он не даст вам второй раз создать нужное пространство users новому скорее всего мы не надо поэтому очень часто вставляем такую проверку для того чтобы и получать ошибку если у нас такого пространства не создана то мы создаем space и создаем к нему индекс в данном случае это праймари первичный индекс виде деревьев ну и представляет собой одно число в дальнейшем скрипте мне необходимо добавлять новые записи сюда а юзеров можно это делать с помощью стандартного inserto где мы передаем круг ключ-значение но в моем случае в этом простом скрипте удобно делать это с помощью автоинкремент а то есть юзер будет заходить у него автоматически будут присваиваться ключ на единицу больше чем размер база на данный момент размер количество записей ну и что если я хочу узнать количество записей своей базе я могу воспользоваться стандартным механизмом лен как видите синтаксис он весьма прост и понятен как уже говорилось ранее тарантулы это не просто база данных это полноценный ло applications сервер вероятно разработчики подразумевали здесь то что на языке lua вы можете писать любые модули и пакеты и тем самым реализовывать ту лайков который вам не хватает то есть вы не изобретайте велосипед большой вы можете изобрести несколько маленьких если вам очень нужно или этого нет других решениях посмотреть все это вы можете на гитхабе репозиториях но вот основные модули которые так или иначе используется это модуль тарантул http модуль тарантул клею очередь примеру трой таро парк надеюсь кто-то зашел туда он написан полностью на таран туле там используется трандл хранилища тарантул сервер также тарантул поддерживает лоракс это пакетный менеджер тарантула который работает со своим репозиториям ну и очень удобно устанавливать пакеты одной команды это делается пакеты пакеты нужно подключить под пакетом подразумевается какой-то другой lua скрипт реализующий какую-то логику и подключая этот пакет вы можете получить методы из этого файла какие-то данные из этого файла какие-то перемены вот на этом пример чеки я подключаю с помощью важного механизма рик war 2 пакета консоль и лог консоли я запускаю на о колхоз те и вешаю на пор 33 013 с помощью пакета лог я могу делать записи в журнал логов под консолью здесь подразумевается консоль администратора или удаленная консоль управления это механизм который позволяет вам следить за сцене свое тарантула сделать это несложно если у вас в консоль запущена вы можете стандартными средствами unix или еще какие нибудь например там талэ там и реле врапом тонет нам нужен для подключения на порт для его прослушки рель wrap нам нужен для удобной ввода команд сохранение истории команд вы можете зайти на тот тарантул который у вас работает и посмотреть например какие то информацию из бог info или box that ну тот пакет который я использую и который весьма часто нужен это пакет тарантул http это ну пока еще ограниченной http-сервер но работающий со многими механизмами которые нужны в данном случае я просто подключил пакет создал сервер повесил road для обработки запустил его а потом функции хендлер я вернул ответ серверу я вернул текстовую информацию и установил cookies пользователю тарантула иди в или айди также задал время операции то есть время удаления ну здесь хранятся год но основные механизмы транс ложки теперь позволяют реализовывать минимальную к то есть здесь есть сервер весьма полноценный есть клиент тарантула что теперь работает с куками и поддерживает ло как некий встраиваемый язык каких-нибудь переменных внутри темплейт а то есть мы можем написать маленькие процедурки внутри html вот я вам постарался рассказать основные моменты это скрипта и еще раз вот чтобы закрепить можно пройтись то есть вам должно быть уже более понятно то есть у нас исполняем скрип тарантула с комментарием дальше у нас происходит подключение пакетов через реку а.р. у нас есть две переменные хост и порт дальше происходит конфигурирование тарантула бокс кфг я задаю два параметра логово уровень журналирования и слабо лук арену пространство для локации я создаю консоль администратора которую буду пользоваться дальше если у меня нет нужного space а я создаю space users бог схема space клеит ну и создают не индекс функция обработки я получаю cookies которая содержится у пользователя который зашел на мою страницу я смотрю его и пи сделаю запись в лог если айди нету тарантула иди тогда я заношу авто инкрементом информацию обойти этого пользователя в базу смотрю его иди и возвращаю приветствую информацию дата и присваиваю cookies значения айди в противном случае я считаю количество записи у нас tapplock и возвращая пользователю просто количество юзеров ну и далее в конце когда я писал функцию я запускаю сам сервер и уже с ним работают это несложный пример но благодаря там модулем и расширяемость удобству и заколол его можно дописывать дописывать дописывать и через какое-то время довести до того состояния которые используются в реальных проектах у тарантула очень много разных пакетов есть пакет работы джейсоном есть пакет файбер сейчас про него расскажу подробнее есть пакет ямале криптографическая библиотека дайджест содержит основные необходимые механизмы шифрования есть свой пакет сокетов не блокирующих ему вы можете сами работать по сети реализовывать какие-то протоколы есть работа с мозга по ком есть библиотечка файлы и input out put для работы с файлами и есть интересный механизм netbox он позволяет работать тарантулу по бинарному протоколу например с другим тарантулом это получается очень быстро удобно а также реализован нет бокс . и сквер для работы например с какой-нибудь реляционной squire базой данных файбер и это так называемые легкие потоки которые работают по модели green trees основное отличие их от стандартных потоков это то что они работают внутри тарантула создаются внутри тарантула поэтому создаются они достаточно быстро и у них неплохая производить переключения они могут пригодиться вам если вы реализовываете какую-то там асинхронную модели ли вам нужно чтобы был запущен какой-то демон выполняющие параллельно основной лодки что-то ну основные принципы работы с вейдером то есть файбер нужно создать файбер можно поставить режим ожидания механизма файбер slip и faber объект и то есть файбер creed вы можете его всегда концы 0 и завершить работу с ним очень удобно библиотечка файбер time которая с event лупа считающего время всегда может вывести на нужное значение с помощью библиотечки fighters например написано очень популярна используем библиотека у нас это библиотека expiration д это библиотека которая может производить удаление издан удаление из базы по каким-то признакам он обычно это время то есть все что хранится месяц может удаляться и очищаться про тарантул можно говорить долго мы тоже не знаем всего вот не знаю знает ли разработчики все о нем всегда можно почитать на документации тарантул арк последнее время она поменялась и стала более читабельный тарантул поддерживают большинства unix-подобных систем у них есть свой бил год и мы всегда следим за появлением новых пакетов мы работаем народ хотя и также разработчики тарантула они являются официальными man тренерами пакета тарантул в том же тебя нет и очень важный пункт который мне очень нравится это то что 2 возможна связь с разработчиками у меня были вопросы я всегда писал на архи канал я нашел разработчиков скайпе у меня есть вот если кто-то был пару доклад назад кости осипов главный разработчик тарантула читал небольшой свой доклад про очереди вот это очень важно особенно для начинающих разработчиков обратиться и знать из первых уст как дела то или иное ну надо просто быть готовым что ребята которые зарабатывают от in source они весьма своеобразные там весьма своеобразная комьюнити но возможно эта картинка скажет больше чем я могу сказать но в то же время общения в комменте может быть очень интересным опытом которое позволит вам расти самому и делать свои проекты немного лучше ну в конце хотел бы подвести небольшие итоги по своему докладу то есть у каждой но и съели есть своя сфера применения зачастую очень сложно сказать какая база лучше хуже какая производительнее они действительно часто решают разные задачи инструменты разработки это очень важно ну очень важно правильно подобранный инструмент позволяет вам разрабатывать быстро легко избежать многих проблем но не стоит забывать что идея цель важнее все-таки задача каждого разработчика это решать проблему реализовывать какие-то свои идеи и делать этот мир наверно немножко лучше ну и надеюсь я смог вам показать что тарантул он совсем не сложный и вы можете попробовать его использовать тоже спасибо за внимание и я готов ответ на вопрос спасибо за доклад у меня два вопроса первый имеет ли тарантулы интерфейс api какой-нибудь внешне для до дорогих сервисов и тарантул имеет набор коннекторов которые позволяют работать с тарантулом из бетона is here is гоу там ну еще из джавы то есть тесно насколько я помню даже есть несколько статья на хабре я по работе с тарантулом спит он а а сетевая есть есть бинарный протокол в котором с помощью музыки пока можно работать и тоже вполне если вам это нужно к эш и и второй вопрос поддерживает ли файбер своих зеленых потоках переключения контекста во время ожидания input от под операции в the ramp или как раз помощью фейдеров реализован асинхронный ввод-вывод то есть в том случае которые реализация происходит синхронно ввода-вывода это делается вручную спасибо скажите пожалуйста почему все-таки выбрали тарантул получается что его суперсила по сравнению со стальными навский эта транзакция на транзакции вы не используете как вообще такая идея пришла вот я рассказывал про принципы выбора во первых у нас скажем так есть небольшие ограничения по количеству столько технологий которые можем использовать то есть в той задаче которую привел нужен обработчик запросов от сервера нужно что-то что будет вас запрос отправлять нужно само хранилище нужно что то что будет с этим данным и работать в tarantul и есть сервер и есть хранилище есть язык лова вот это первая часть этот вопрос а во вторых еще до этого возникает кисея немножко был знаком с тарантулом поэтому вода бы не изучать новое мне нужно было что-то сделать быстро прототип я его воспользовался спасибо скажете скажите пожалуйста как тарантул его зеленый потоки относятся к многоядерность и и к новым процессором и не увидел то вопрос задал а далеко смотрел наверное чтобы не запутаться в терминологии все-таки стоит различать многопоточную модель который скорость и как он работает в рамках процесса на котором запущен тарантул ровно на одном ядре а юра смотри что такое собственно говоря вот это самая модель я тут вот как работают вот эти фейдеры надо понимать что никакой реальный многозадачности втором туре нет и быть не может вот это всегда один поток выполнения то это очищающие многозадачность у нас мы сделали файбер вот он работает только один пока он работает больше никто ничего не выполняет если мы ему явно не скажем fighter slip с указанием времени он так и будет работать так и будет ждать то есть грубо говоря если сделать там бесконечный цикл и не делал с ним fider слив у вас больше ничего выполняться не будет он будет реально по от вечно пока вы не убьете вот связи с этим этот тарантул действительно один incense тарантула работает на одном ядре всегда если вам нужно задействовать несколько ягод вы запускаете несколько юнусов и как-то шарнир уйти между ними тот немножко помогает то что при необходимости из нас и могут общаться с собой вот как раз уже не сказал про netbox то есть вы можете из одного единство со подключиться к другому чего-то там взять какие-то данные обработать их и закинуть обратно вот и хотел еще сказать по поводу как раз сферы применимости тарантула вот следует понимать в чем основное преимущество тарантула это в том что по сути это applications сервер которым подключена просто модуль база данных вот если вам нужно обрабатывать данные то это удобнее делать там где эти данные лежат поэтому вы берете тарантул пишете о скрипт любой сложности ну в рамках того что вообще в может конечно же довольно примитивный язык и обрабатывайте данные не кидай их по сети там где они лежат это очень странно на самом деле просто мы экономим время свои ресурсы и удобно окончательном и данные тоже хранили втором поле а стадо в хранилище можно я теперь тебя вопрос задам давай ты хоть и т.п. сервер продакшене используешь или ты вот такой пример написал мы используем его в так звучит наверно странно в продакшен прототипе банят просто сталкивался с тем что как он обрабатывает connection keep-alive ну заголовок сам connection точнее что ты имеешь а понимаешь чем дело я столкнулся с тем что я ну вот пишу какой то мы думали о том чтобы задействовать как раз только т.п. что-то я запилил скриптик вызвал его из браузера немножко дописал скриптик обновляя он не обновляется обнаружил интересную вещь покопавшись в самом коде expiration где то что браузеры по умолчанию посылает заголовок an action keep-alive и соответственно тарантул соединение не рвет пока ему браузер не скажет браузер никогда не скажет да есть такая проблема вот эта проблема дублирования лишнего запроса ну тут все что можно это было написать разработчикам которые они на самом деле можно росла не написать в общем-то доро или самим поучаствовать в тарантул комьюнити и при наличии времени написать поэтому есть кстати плюс слова вы можете что-то написать выложить вам подскажут помогут спасибо спасибо и привет спасибо за доклад еще довольно мало было сказано производительности тарантула какими цифру можешь провести не буду говорить на память цифры потому что на главной странице есть везде бенчмарки можно посмотреть сравнить мы для своей задаче мы параллельно этот кисти немножко делали с редисом но мы их не сравнивали и нам сложно строить потому что нам нужен был именно lua для обработки то есть нас определяющая вещь то есть нас есть ресурсы у нас есть оперативная память у нас есть время у нас важно быстро обрабатывать то есть потому что real-time задача это действительно доля секунды то сыр тебе работал сталкивался вот тебе этого таргетированной рекламы они с этим часто сталкиваются и здесь главное вот это вот это количество запросов она так или иначе будет большой это и там ну тут когда-нибудь возможно мы попробуем сделать на другом человеке ну если нет вопроса больше я там указал свой email вы можете написать всегда мне что-то спросить я с радостью отвечу спасибо за внимание"
}