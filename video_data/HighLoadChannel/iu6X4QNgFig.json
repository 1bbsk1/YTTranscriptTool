{
  "video_id": "iu6X4QNgFig",
  "channel": "HighLoadChannel",
  "title": "Нагрузочное тестирование с K6 / Дмитрий Самиров",
  "views": 11222,
  "duration": 2866,
  "published": "2022-03-21T14:14:38-07:00",
  "text": "всем привет меня зовут дмитрий я работаю в мыле а точнее втором туре и долгу службы я занимаюсь тем что я руковожу отделом разработки которые делают различные пилотные проекты на базе тарантула ну и поэтому собственно чем вообще мы занимаемся мы в короткие сроки реализуем различные by pepe оси пилота их по разному называют учебники и сервисы с ограниченным функционалом заточены под какое-то решение какой-то отдельной реальной задачи чтобы проверить вещи насколько концепт рабочий вот параллельно бывает мы запускаем sack of production вот и вся к именно совсем всякое бывает что нужен там за месяц запустить какой-то быстрый сервис такой мы тоже делаем и нам прямо критически необходимо всегда быть уверенным в том что то что мы делаем она будет работать и будет работать хорошо поэтому мы делаем огромное количество нагрузочное тестирование вообще кто в зале делал хоть раз нагрузочное тестирование можете руки поднять отлично почти все значит мы с вами точно подружимся вот собственно цель моего доклада рассказать про инструмент который взывает к 6 которым мы сейчас пользуемся которым очень любим но чтобы вообще были понятны его преимущества и почему мы с днем примерно по vin доклада я расскажу некий экскурс в принципе про то что мы тестировали то что мы использовали и вообще что вообще на этом свете бывает но вот насколько мой там опыт нескольких лет заниматься этими вещами не позволять что-то что-либо рассказывать все кто так иначе сталкивался с разработкой каких-то проектов программирование так далее более-менее участвовал в таком сначала я хотела затем колесо сансары начал рисовать понял что это уже шестиугольник и добавил некрасивый потому что он какой-то не ровный но мне было лень переделывать вот собственно по факту идет разработка потом тестирование потом нагрузочное тестирование после которого мы понимаем а блин у нас все плохо не работает нужно все переделывать и начинаем все по кругу гонять вот в какой-то этап или возможно сразу мы понимаем как вы и так сойдёт погнали уже в прод не принципе даже рефакторинга может и не быть то есть мы провели на ключ тестирования вроде там ну там 20000 об этом 100000 руб с увидели вроде нормально погнали в рот и в принципе так действительно делают она большинства людей делать нагрузочная проиграет что все нормально не запускается в прато и зачастую скорее у них все работает потому что в прозе но далеко там не у всех есть какие-то огромные нагрузки так далее вот и собственно так мы делаем обычно очень много мы перепробовали кучу разных инструментов вот примерно список инструментов которые в принципе вообще существуют в этом мире их на самом деле гораздо больше но это те в том которыми в том или ином виде я это моя команда хоть как-то до сталкивались вот список достаточно большой куча еще того что мы не видели не трогали но придумай принципе так уже будет интересно у меня посмотреть на вот эти вещи чтобы мы немножко рассматривали и все эти инструменты не совсем абстрактно а более-менее применимы каким-то задачам раз сначала рассмотрим как они решают задачи достаточно абстрактный вот чуть позже мы погорим пара более конкретные случаи какие вообще есть абстрактные задачи у на грудь тестирование мы написали один сервис там ищете какой-то backend и у него есть там какая-то ручка и не знает нам регистрация пользователей вот мы хотим понять а что будет если там нашу ссылку ложат на хабар она завершится и придет нам сразу 100 миллиардов пользователь в секунду выдержать или нет но вот мы просто берём этот один url там генералку это возможно пайлон ты просто его бомбим как бы и проверяем она там сто тысяч запрос секунду выдержали вроде нормально дальше чуть задача посложнее это когда у нас есть ни один урала список урлов ну например мы хотим у нас большой к это класс стр распределенные наши там базе данных и мы хотим проверить что там на к эта нагрузка и slim равномерную нагрузку то у нас все будет хорошо работать что мы там этот шар и лидировали этот шарф активизировали так далее тут появляется уже задача того что нам нужно бомбить не только один уру а множество орлов и желательно еще чтобы мы там вот равномерно может быть даже неравномерным sheepskin ты весами чтобы допустим посмотреть а что будет если вот у нас нагрузка сместиться вот в этого пользователь вот как допустим там бывает всяких твиттерах когда там есть там twitter lady gaga у которой собственно ну просто дико хочется подписчиков ну вот явно что там мягко говоря она немножко выборку все смещает вот есть очень типовая задачи раз месячная нагрузка когда мы хотим и считать и писать одновременно ну например у нас есть сервис мы регистрируемся пользователи а потом пользователь приходит и там свой профиль как-то считывает понятно что в таком сценарии у нас там чуть-чуть будет записи и чтения будет гораздо больше вот мы хотим тоже такое тестировать чтобы мы там могли в процентах указывать что там 30 процентов на запись 70 процент в насыщением ну и такой пример это запросы не поищите то есть возможно не все сталкивались но в этом мире кроме сети 1000 другие протоколы самые разные и думаю могли там сервис написать который торчит наружу герпесе ручкой и по хорошему вы тоже как-то его проверить у него есть и чтить и интерфейс и вот собственно хочется посмотреть разрезе таких задач как справляются с этим тельный инструмент вот я привел такую таблицу которая показывает не то что прям совсем точно но примерно мое представление о том как справляется то 3 ной инструмент с данной задачи соответственно все мы учились в наших классах школы как у нас тогда оценок не было нам рисовали всякие красивые фигурки вот и решил почему бы отойти от скучных оценок и проставить просто всем какие-то прикольные картинки и собственно солнышко у меня это значит туза справляется очень хорошо солнышко с тучкой это хорошо солнце светит но уже немножко загораживается дождик все плохо ну и на самом деле еще есть при некоторых вещь про которые я не знаю я так честно говорю вот о чем если мы посмотрим есть такие типовые инструменты как верка и apache benchmark это очень простые консольные утилиты которые очень хорошо и качественно справляется с элементарными задачами но чуть более сложными они уже все как бы сорян мы не можем вот немножко особняком сути тот же метр который имеет просто все на свете все что хотите на всем сделали вот есть собственно индекс танк пандора я поставил вместе потому что пандора на самом деле нам основы используется как альтернатива дефолтном у bq яндексом к фантом просто написано год вот принципа же они со всем справляются но вот когда то начинается сценарий посложнее уже становится немножечко неприятно вот всегда есть собственно писать что то свое и мы так часто делаем то есть когда вы просто пишете какой-то кастомный кружат or который решает только вашу задачу и никакую больше вот естественно тоже но очевидно что он может все что вы захотите вот и собственно есть гатлинг focus pro которые практически не буду говорить это тоже достаточно популярные вещи но я к сожалению мы с ними особо не сталкивались поэтому я часто буду варить что и не знаю то есть я точно уверен что они справляются с первыми двумя задачами с остальными скорее всего тоже в каком-то виде справится но у меня к сожалению формации поэтому обманывать не буду вот и собственно используешь таблички можно подумать как бы зачем вообще нужны другие утилиты и у вас там есть джимми трон умеет все почему бы не использовать всегда его вот но проблема в том что таблиц она была немножко такой верхние уровни вот в этом просто говорили справляется а вопрос а как справляется вот собственно вопрос интересный я подобрал несколько критериев для сравнения которую я дальше буду использовать чтобы выставлять рейтинге той ли иной друзья вот для нас прежде всего важна простота под простотой я понимаю прохождение то есть ты говоришь разработчику который никогда ни разу в жизни не видел индекс так ты говоришь эти индекс танк сделан нагрузочное тестирование и вот вопрос насколько ему нужно много времени или мало времени чтобы это всё сделать вот гибкость это возможность кастомизации когда мы а вот если мы хотим вот такую нагрузку если мы хотим такой-то генератор данных вот собственно как насколько мы можем отклоняться в ту или иную сторону конечно же эта скорость работы потому что мы все-таки сделаем нагрузочное тестирование поэтому мы хотим чтобы наши утилита для нагрузочного тестирования доделан нагрузку вот мы не хотим бенчи сама утилиту мы хотим весить наш сервис поэтому было бы неплохо если бы она справился этой работой который как бы для него было придумано и последний один из самых важных пунктов на самом деле это сбор метрик это их количество и качество потому что мы ни одно нагрузочное тестирование не проводим слепую мы всегда собираемся пытаемся собрать огромнейший конечный метрах со всех участников процесса то есть это серверные метрика это клиентский метрики это линуксовые метрики это свете основном циpкa память сеть все-все на свете чтобы после нагрузки тестирование мы поняли во что мы собственно еще твердость и где мы там можем чтобы оптимизировать чтобы было лучше дисклеймер оценки будут сугубо субъективные поэтому скорее всего у кого-то из присутствующих может резинка вопрос да блин да как бы ты не прав тамбов мне кажется что она твоя оценка несправедливо это нормально вот то есть это просто мое личное мнение не более того ну начнем с самых простых утилит принципе мы пойдем в моем понимании по простоте от самых простых к самому сложному вот собственно каждое utility я по четырем критериям буду расставлять рейтинге вот рейтинги будут различных картинках картинки в принципе они ни к чему не привязаны здесь со сми ножки просто потому что не понравились так принципе будет со всеми не ищите в этом какого-то скрытого смысла его там нет вот варка варка это очень простой нагружать он максимально вот просто прохождению него минимален то есть ты просто клонишь исходники собираешь он работать даже напомним аки собирается вот он надежный как автомат калашникова он очень быстрый вот но за все это приходится платить платить приходится с тем что он абсолютно не гибки у него буквально есть два три конфигурационных параметров и у него практически нет метрик в общем все метрики которые есть они вот водится в таком консольные виде то есть если вы каким-то образом хотите поместить их графа ну ну придется написать парсер вот баба паша вот не очень удобно по гибкости на самом деле он расширяем путем написания модульные за кило но там тоже есть свои нюансы и когда ты начнешь это погружаться понимаешь что ничего сложного нло к сожалению написать нельзя ну вернее можно тогда он его работа начинается с очень непредсказуемый следующий утилита это обмен или apache benchmark он тоже очень простая вот то есть в рейтинге хуан это 4 из 5 он в принципе такой же быстрый как верка но все еще простой но при этом он уже чуть более гибкий и чуть больше информации дает то есть у неё достаточно они выйдут уже побольше принципе это что-то неважно на самом деле вдруг кто-то кому-то плохо видно тут не цель в том что там что написано в том что оценить примерно бьем текст который выдает метрик больше конфигурационных параметров там тоже примерно такой же экран то есть принципе это уже утилита которая можно делать всякие разные интересные вещи но все еще она не очень гибко это из прям что совсем хитрая вскоре такие-то регенерации данных сделать крайне сложно вот но тем не менее достаточно удобно индекс так и танк и пандора жмем и критерии это следующий по сложности вот три кита из пяти он все еще достаточно быстрый чуть-чуть помедленнее чем в ркб вот но он там тоже то есть дефолт не нагружать индекс танкан описано плюсах фантом пандора это как альтернатива написано на год он достаточно гибкий то есть мы прям можем благодаря конфигуратору через яму файлики написать какую-то действительно интересно дам сценарии например там наши нагрузка повышается или понижается со временем цвет можно сделать и он предоставляет уже какое-то действительно хорошее количество метрик плюс у них есть интеграция с их индекс он вам overload называется графики в общем он может нарисовать кит красивые графики мы там можем на них посмотреть порадоваться или по печалиться зависимость от результатов но в целом уже достаточно как наглядная схема и при этом достаточно расширяемой то есть допустим для пандора она написана ногам мы можем принципе писать какие-то гошен и модули которые могут реализовать кайт генератор хитрый и так далее собственный метр который умеет все вот но за это платить платить простотой он реально очень сложно у него из-за того что он имеет все у него вами примерно миллиард настроек может генерал любые отчеты брать данные откуда угодно вот но по простоте вот 2 пчелки из пяти к сожалению на мой взгляд вот ну и и плат плата скоростью метр я знаю кейсы когда люди с деметра доставали котики перформанс но это надо быть достаточно хорошим специалистом java машину машина написано джаве ну вот принципе и мать как он работает и дайте много ресурсов то есть но стоит понимать чем сложнее мы рисуем сценарии тем скорость просили снижают если мы хотим что совсем хитер эта скорость будет очень маленькое что не всегда устраивает вот но его кончики лир fitch не сгу им то есть мы прямо нам не обязательно разбираться во всех этих страшных это консольных настройках мы просто кликаем мышкой и того что нам нужно хотим там здесь здесь здесь такой отчет фига сохранили в xml xml принесли на сервером и запустили уже консольный метр который работает чуть быстрее чем тот который запускает gui очень удобно ну и к сожалению гатлинг локус как я уже говорил не пробовали возможно там все хорошо но к сожалению такой информации но думаю что нет поэтому вот такие обезьянки они отражают мое мнение по этому поводу ну и конечно же не стоит сторон обходить кастом 2 мин то есть если вы что-то сами написали она будет гибко и быстрые метрики потому что вы это сами писали но просто то она здесь будет прям минимальная как бы идут кстати я обманул здесь вот черепашка был выбран случайно нам факты черепашка симулирует скорость с которой будет разрабатывать такое решение будет будет очень медленно мы так иногда делаем не практика показывает что это прям полноценная программа которой надо и дожитие общем кучу всего и с ней проволоки ты что вообще собственно и мы лично хотим в итоге много инструментов казалось бы ну блин ты не можешь что ли один хотя бы выбрать нормальный вот что что вообще вам нужно что вы хотите в первую очередь мы хотим иметь генерировать данные очень часто нужны сложные кейсы по генерации когда мы допустим хотим сгенерировать часть данных а потом их же прочитать вот на чтобы там проверить что чтобы мы читаем реальные данные не просто кита по пустым ключ от селекция по которым ничего не делается мы конечно же хотим уменьшить не только ищи теперь другие протоколы в том числе герпесе и еще куча бывает протоколы абсолютно кастомные какие-то самодельные такой мы тоже хотим вот например тарантула бинарный протоколы на слова на массаж пайки мы тоже как бы хотим уменьшить мы хотим чтобы это все было быстро и хотим просто вот обложиться метриками с ног до головы чтобы куда ни плюнь везде облака от метра канал счет и и одно из таких важных историй мы хотим запускать много сценариев подряд однажды в жизни когда мы на прошлом холоде московском рассказывали от нашего команды доклад про то как мы делали пиво для московской бирже у нас там была история что мы запускали по несколько десятков нагрузочных тестов в день и это было немножко утомительно поэтому мы собственно все это максимально автоматизировали и хочется чтобы это было из коробки досидели хочется чтоб ты написал там сос 100 разных сценариев на ночь запустил они все прогнали с утром пришел довольно собрал метрики нарисовала чет и как бы радуешься жизни и очень хочется вместе расширять нагружать путем написания модулей на город вот именно go потому что все таки нашей команде погода статочно большая экспертиза допустим по java экспертизу нас гораздо меньше поэтому нам там написать модуль для деметра на джаве это достаточно трудоемкая процесса нагло мы можем написать очень быстро you've легко хочется отдельно поговорить почему вообще нам не подходит какие-то вот инструменты которые есть вот эта смесь деметра он имеет все почему почему неджи метр потому что он очень сложный вот действительно чтобы ним разобраться нужно потратить достаточно большое количество времени и когда мы начинаем усложнять мы сильно жертвам скоростью порой даже экспоненциально то есть это сложно сценарий мы будем венчик 2 метра не наш сервис мы такое же тоже сталкивались печальное зрелище вот если любите год а мы любим г почему унизить пандора пандора как бы ну может быть много модульного и мы так делали ну вот но потом перестанет это делать как бы объективных критериев но ныкается странная то есть там когда мы начинаем пользоваться на словах все было классно мы там писали модули нога все работало вот постоянно сплаве киты нюансы возможно связаны с тем что она управлялась пусть он ямал файлика схема favicon статичный и ты там ну прям максимум гибкости анти не даст вот и еще есть проблема что на каждый чих ее нужно было перекопировать то есть вы там поменяли алгоритм генерации данных или там способы как генерации данных быть добры пожалуйста переса бери вот тоже казалось бы ну не то что сложный к задаче но подбешивал может быть вообще ну как бы вот мы же умеем уже писать свои нагрузочные утилиты почему бы каждый раз этого не делать как бы в принципе рабочий схема вот когда мы так делаем но на потоке делать тяжело вот слишком дорог по разработке то есть факт может прощаемся в отдел разработки не плотных проектов и дел разработке инструментов нагрузочное тестирование что на самом деле безусловно дома очень интересно задачи на к сожалению нам за нее не заплатит и вот тут собственный плавно переходим к вопросу что же такое к 6 к чему отличается и как в чем у него вышли про к 6 я впервые услышал на кухне в офисе один коллега подошел и сказал готовы суд вы же много нагрузочные серединке слышали то что такое к 6 игру 1 слыша не знаю но стало интересно пошли гуглить ips они нам понравилось первое что мне понравилось на самом деле тут я обманул когда операция смотрел repository к 6 он еще не был в репозиторий графами но сейчас он там и видимо команды граф она взяла под крыло себе эту команду и собственно и сейчас их активно перед развивают соответственно то есть это не какая-то учили то написано по приколу каким-то там супер гениальным программистам которая не будет поддерживаться действительно видно что зажигает серьезная вещь которую взяли под крыло серьёзные люди и принципе есть какое доверие вот на их частности у них там очень много звезд на гитхабе кто бы чтобы не кто бы что не говорил но есть некая корреляция между количеством звезд на гитхабе и качеством продукта то есть это не следствие что если звезд много продукта честве на корреляции тем не менее точно есть он реально быстрый вот написано было и он действительно дает хорошую нагрузку вот сопоставимую опять же сам самыми быстрыми цветами его самого кирпича которая нам больше понравилось это он конфигурации через javascript и в принципе там такое впервые вижу чтобы нагрузить элитарность это обычно либо там ямал xml либо какие-то там 2 сон и либо просто параметры командной строки а тут прям конфигуратор java script и самое классное что мы можем прямо писать скриптовый код который там в конфиге нагрузочные утилиты делают какую-то логику джесс правда там используется интерпретация какой-то мощный он поддержит какой то вроде как не самый новый стандарт но этого за глаза хватает для того чтобы конфигурировать инструмент и вот скрипта не нужно прям каких-то диких вещей то есть сама генерации не происходит движком на год ну и собственно поэтому можно писать модульного мы это любим класс у него и спады full то есть куча готовых настроек в принципе есть многих других но тем не менее пример здесь есть герпесе из коробки что уже приятным до этого я не видел есть готовый экспортер метрик в нфл ax к сожалению по металлу свой flags но тем не менее они есть мы можем их достать прочитать вывести графа ну и посмотреть кому-то может быть приглянется у них есть and service к 6 клауд то есть нос денежку поэтому нам лично не интересен вот мы такие ребята которые не любят платить вот есть ко мне через claude заку денежку они дают прям какую то есть там какие-то графики можно найти общем как штука которая склада будет нагружать ваш сервис и и собирать статистику небольшой выглядит значит на приятно но мы не тестировали потому что она очень плотная вот но если вдруг кто то хочет попробовать почему бы нет вот здесь и вывел примерно конфигов вот надеюсь здесь вам все-таки что-то видно вот он тут как бы нет цели им тоже опять же не показать какие-то конкретные вещи просто показать что 10 смотрите как бы конфиг это просто джесс скрипт в этому писанки сценарии есть возможность указывать статический какие-то вещи допустим количество нагрузки как там оно растет длительно из теста а еще мы можем на джейси дергать какие-то фишки которые мы же с вами написали нагло то есть например мы можем не работать тень мы допустим написали нагло какой-то генератор данных которые работ по нашей схеме и эта фишка пробросить java script и в java скрипте мы можем ее дергать так как мы хотим соответственно мы можем вот в разных сценариях по-разному использовать наш генератор данных и это безумно удобно безумно гибко и вот это прям одна из таких кирпич который не имеет вообще никто чтобы вот как-то на джесси чтобы в конфиге можно дописать культа факту бизнес-логику конечно громко звучит но тем не менее культу логику ямале такую логику понятно дело не напишем вот не язык программирования вот в частности написали модулю тарантул как я уже говорил мы часто меньшим сам тарантул у тарантул свой бинарный протокол есть коннектор для год мы его взяли и написали модуль который про бросил все базовые там операции тарантулы там select риплейс билет так далее в нашем же снайпер и то есть 12 теперь имеет такой модуль нам всё равно что вызывать учтите письма сделать учтите пегед запрос либо же вызывать какой-то select frontal а вот и соответственно при этом все метрики автоматически тоже начинают то есть к 6 даёт вам некий интерфейс вы его реализуете не под этот интерфейс вся страна его машинерия связано с метриками с повышением и понижением нагрузки кучи-кучи конфигов она поддерживается то есть это безумно удобно выводка 6 выглядит так обожаю любой аске арт и тут прям мое сердечко тоже немножко надломилось когда вот я их увидел эту красивую красивые горы в консоли прям обожаю такое и принципе бэтмен был продан окончательно как можем видеть выдает кучу всякого-разного сложно разобраться это правда но и принципе не надо потому что все это выводится метрики графа ну ну вот flags графа на которую мы можем смотреть уже с визуализацией здесь можно просто увидеть как все дело происходит и если в этом разобраться в принципе можно подчеркнуть какую-то информацию уже отсюда итоговый этап которому мы пришли и которые мы сейчас по факту превратили в некий уже процесс не свойства слово именно по на грудь тестированию у нас есть генератор и собственно к 6 под ним и под каждым к 6 есть как правило кайта генератор данных вот к 6 он в принципе масштабирует всего можно запускать убери несколько нот поэтом в принципе можно запустить несколько нот к 6 но они будут конечно же независимые у них будет каждого свой генератор но в целом там как показала практика это небольшая проблемой можно там как с этим разобраться все это как правило сможет какой-то балансировщик балансировщика нас будет разное это может быть там джинкс апраксии новой этом что угодно другое вот и собственно блокировщиком как простые от нашей жертвы и под жертвами тоже может быть все что угодно это может быть тарантул это может быть какой-то гош не сервис это может быть какой-то go 6 раза котором тарантул за которым crack house за которым подыграю вот все на свете бывают и самое главное у нас все участники процесса пишут метрики все все все все все и все это оседает в одной графа не мы это все дело объединяем и очень легко находит корреляции то есть допустим мы снимаем сервера метрики циpкa мы запускаем нагрузку и видим 10 sharp с на мотошоу два ядра хорошо запускаем дальше мы смотрим 100 fps и а я ядра незанятым и так другого а значит по ходу что-то сетью короче не даем там все эти итоге на графа не у нас готовы уже даже борды который нас тоже как бы тиражируется внутри команды которые в одном одном большом-большом дашборде выводятся все на свете вот и одна и та же удобных вещей в к6 есть понятие сценария нагрузочного тестирования у сценария есть имя и это имя мы можем пробросить пробросить метрики в графа ну и соответственно видеть какие метрики какому сценарию относятся это безумно удобно когда нам нужно запустить 100 тестов подряд чтобы не следить за каждым по отдельности мы запускаем а потом уже постфактум идем графину анализируем метрики и смотрим какому теста что относилось раньше мы это делали вот собственно кастомизация какой-то вручную вот естественно тут пусть всего танцы пол видно к типу какие там этом рисую heat map и полотенце чтобы там было видно графики по от несущим кучку все это он еще не полный там прямо еще целая история и там в один прекрасный момент мы там еще тоже сделали автомакс порт карачи этих скриншотов дашбордов когда нам нужно было кит рисовать отчеты большие тоже была очень удобно вот мы конечно как бы все прекрасно красиво звучит как бы выльют а где вот в чем польза реальная ну как бы то красиво ну вот как бы и в принципе до этого работал почему нет вот и собственно тут поэтому хотелось бы рассказать изведу про микки тоже конкретные проекты в которых это помогло вот первый проект это с московской бирже про которые можно рассказывали мы писали полностью кастомный кружат а вот потому что там был абсолютно свой собственный протокол он был очень простой но тем не менее он был собственный вот были очень сложно со снорри нагрузки связаны с тем что вы пытались максимально эмулировать реальную нагрузку бирже нас настолько насколько это возможно понятное дело что в синтетических условиях нагрузку провода сделать принципе невозможно протон всегда уникален но тебе не сюда стараемся вот это были просто огромные нагрузки вот и собственно все это нам вот как ск-6 мы можем реализовать без каких-либо больших доработок но там написать про модуль ногой и все будет работать был проект с магнитом где был протокол гбц и мы тоже опять же написали собственно свой что-то свое вот мы там тоже много еще перри использовались наших mandrake а также записи обрабатывал но тем не менее вот тоже все что мы написали можно было бы в легкую заменить на к 6 и конечно же принципе любой проект тарантул у нас не все проекты как иначе обращаются в китай happy сервисы часто мы хотим понять просто атмосферный кластер о какой его как бы теоретически максимум понятное дело что если мы поставим перед этим к это backend то он добавит нам просто вверх и да мы все равно конечно при определенным как бы качестве приседаний сможем получить этот наш вопрос но это будет сделать гораздо сложнее вот потому что добавляется еще в цепочку один участник как бы абакан тоже можно чем плохо написать и разбираться в этом нет никакого желания поэтому нам проще всего прям напрямую в кластер популять и посмотреть еще чего можете не может вот и собственно здесь преимущество к 6 в том что мы можем это прорыв из коробки любой протокол поддержать и нам неважно поэтому ищите пенечки теперь вообще пофигу вот я так классно расписывал насколько это все хорошо по очевидно что не бывает чего-то идеального у всего если плюсы-минусы вот хотелось рассказать про минусы которые мы уже столкнулись и которая нам но не очень понравились первое нет интеграция про митоз нормальные но на самом деле добавил презентацию небольшой апдейт потому что от макрос общались вот вот олег уткин в этом зале сидит он нашел тут ссылку на к 6 мы еще не успели посмотреть вроде как интеграция есть но по факту она у них не идёт каким то ну прям смотрите вот про митоз все работает то есть базовая не говорит water флаг все работает с про митоз там увидим к этому самые сами разберитесь а факты сейчас noon около примет aus у нас кроме того сын flags мы как бы сами особо не используем в одном все-таки хочется про металл из но вот там группы без поллитра не разобраться и принципе это там ну как небольшой минус который нам не нравится но которой как показали последние дни скорее всего мы поборем вперёд нам там висит 1 pull request какой-то там летней давности которые общем не принимают потому что он там test kit не прошло то ли не по канону ну в общем не знаю вот еще нож практике вы столкнулись с тем что в случае того у нас постоянно кита разных генератора данных мы не смогли то многим процесс у нас не смог утилизировать больше 8 ядер возможно мы написали какой-то плохо генератор возможно что то еще но тем не менее с этим мы столкнулись нам это не очень и тоже понравилась потому что часто мы хотим ну-ка это с доплыть прям большой кластер который может выдержать millionaire псы попробовать все-таки его как проверить действительно может вот но тут как бы это проблема на не вяжется с тем что мы можем запускать несколько инстансов на разных точках в куберы и принципе все работает на метрики пишет сам все хорошо и кстати про метрики тоже метр конечно они классные у нас была такая ситуация что метрики они были не классные потому что из но из за того что эта штука пишет в нфл акс постоянно каждую метрику тратится тоже к этапу и как-то раз у нас был кто-то просто сценарий но мы хотели очень быстро проверить и мы уперлись по потребление циpкa в том что он писал метрики это никак не забыл отключить то есть бар метрах не отключаемой нам нас немножко падме сила тот момент потому что мы прям больше работа тратили на запись метрик нужно не по поводу then флаг со который идет с коробки он принципе ничего плохого не могу скайриме того что его нужно готовить то есть ну вот как то вот у меня лично с примету сам особо никогда в жизни проблем не было при том что я там не какой-то админы лекс потом толик devops не просто как брал его ставил он работает вот флаг сам к сожалению не могу такие же похвастаться ей в использовал давно лет 5 назад и постоянно короче с ним там память не хватало то у меня вообще машину ходила в кино panic возможен отказ от не с ним было связано тут как бы я уже не знаю вот мы исследовали мб растут машину дроп или другу поставили в общем как-то все с ним не слава богу вот то есть просто скорее всего проблема в нас но тем не менее нос про металл сам таких проблем почему-то нет ну и конечно же стоит помнить это относится пром ко всем всем всем вообще инструментом даже возможно не сразу загружен тестированием если что-то где-то расширяемое мы можем стать модуль мы можем вы встретите в ногу вот в частности но мы можем взять генератора данных нагон который запаникует но естественно вместе с вашими не рад арам запаникует как все остальное мы там можем аккуратно не не работать сетью написать плохой коннектор и там сожрать все файловые дескрипторы такой раз тоже было и вот поэтому просто нужно аккуратно но в целом тоже как бы она ничего особо не поломал он как бы частности расправились спасибо за внимание на этом не все вот надеюсь было интересно да спасибо что у нас вас есть десять минут на вопросы здесь и еще больше минут на вопросы дискуссионной звони которая на выход и направо ну а да сейчас первый вопрос я вижу есть руки ждем микрофона просто вы упомянули то что ловили о ему in flac тебе вот больше никаких проблем не было с производительностью этой базы данных с производительностью факсом проблем особо не было все проблемы которой мы сталкивались были чисток спутать самого характера понятно спасибо и тогда второй вопрос вы не смотрели в сторону виктория metrics она умеет принимать данные в и flags виде и очень просто интегрируется с там на самом деле то что мы видели там вроде есть какая-то них интеграция через тигров не то что там один стек который вроде как умеет писать про металл и сущим очень скоро стать mind resort это как раз ты стал можно без flags окажется писать про металл спасибо здравствуйте спасибо за интересный доклад мы попробуем тоже поэкспериментировать с к шести ближайшее время значит такой вопрос вы вот так классно расписали что вы значит добавляете по шустренько модули быстренько что то пишите пишите свои скрипты pull request не поправили для комьюнити сомневаешься там есть системное программирование возможно стоит как раз чуть больше внимания уделить этому пудры квесту и сделать фэн-шуй для всех вообще отлично там вот такая что туре квеста на интеграцию с по металлу сам понятное дело там никого система программирования там все относительно просто но для этого надо сесть и разобраться а плюс вот когда мы начали research альтернативные варианты мы поняли что кажется можно пришить другими методами скорее всего он до сих пор висит только по той причине что там это есть какой-то workaround к сожалению но я понимаю то что наверно было бы прикольно им как-то помочь но у нас все-таки работаем не совсем какой-то организации которые занимаются благотворительностью и честно скажу но мы стараемся то мкад канкан трибетить com это возможно но специальный на производителей research чтобы законтрить open source мы к сожалению не можем себе позволить еще один вопрос спасибо за доклад а вот хотелось бы уточнить мы проводим нагрузочное тестирование j3 и соответственно я сталкивалась несколько раз с проблемами даже метра не вывозил но это было сделано с mako локальному то есть чтобы детальности прогнать да и просто падал сам же метр вот насколько к 6 производительнее него очень абстрактно вопрос некоторое число женат видите то есть но нужно строительным какая задача то есть допустим ну опять же из деметра зависит сколько ресурсов то есть у меня личность g метра из кого-то сложного сценарии когда мне нужно было прям генерировать какие-то данные у меня не получилось стану там действие шербет сделать нам на 16 а дров у меня общение получалось к 6 у нас легко выдает на вот 8 ядрах и стоит 150000 руб то есть там можете что раз десять каких-то средних вод по больнице которые очень зависит от задачи и он дает спасибо еще такой вопрос вот по поводу порога входа то есть я так понял что этот инструмент ориентирован все-таки на язык голода и на java script для конфигов вот если нет хорошего там знания и понимание этих технологий то это по душе также является легким для использования да значит по поводу из-за кого можно абсолютно не знаете языке go написано ядро если вы не хотите вы расширяете вы можете языку не знать для вас это будет просто бинар который вы запускаете он там принимает какие-то параметры на вход что касается джесса джесс нужно понимать ну как минимум ником синтаксис базой то есть чтобы написать какой-то простой конфигурационный файл не нужно держать их на спецов по джессу то есть опять же году там нет какой-то истории что нужно понимать тонкой the promise и я сам как бы джез не знаю вот он может глупости кит говорю ну ты типа знаю только джейса знает smell of crochet путь мимо празицид это все у такого понимания чего не нужно достаточно чтобы вы просто понимали а тут есть как бы такой фигурная скобка здесь помещают какие-то параметры там так ты пишет цикл for как будто щенки то база вещи которые любое разработчика думаю освоит очень быстро ну понятное дело это сложнее чем просто запустить точка слэш врк и передать два параметра но это точно проще чем даже в 2 метра что-то накликать тоже метром посидеть поразбираться свистом раза ближе метры в этом точно сказать разберетесь да добрый день спасибо за доклад у меня такой вопрос как у вас вообще организована вот написание нагрузочного тестирования то есть это делают разработчики или отдельная команда и легко а специалисты у нас нет денег а вот команды тестера не так далее команда разработчиков все разработчики у нас достаточно многофункциональный вот такой у нас вид деятельности что мы не можем себе позволить там чтобы у нас там разработчики ну чтобы не было такого что разработчику нужно пристегнуться тестирования он только я не знаю как помогите вот нас все более-менее справляются поэтому нас каждый разработчик который пишется приложение он собственно потом и сам делает к нему нагрузочное тестирование с тестом и просто у нас сейчас вот есть у для того к 6 уже готовые инструкции это узы вот буквально собственно кстати вот тоже ответ кто делает как вхождения у нас буквально во вторник там прошлой неделе вышел новый там сотрудник стажер вот им ему просто далеко документацию которая написал более опытный чувак он я посмотрела там три дня разобрался при том что там неполный день работает спасибо можно так быстро еще про базовые нагрузочное понятно но вот для того чтобы сделать production нагрузочную нужно же изучить данные составить профилю нагрузки сценарии там посмотреть как вообще продакшене то есть паз что последовательно идет что параллельно и так далее . да значит кто вот этим занимается у нас этим занимаются по факту люди которые наверное ближе всего к архитектором кэш аналитик то есть человек он как как еще у нас строим формат работы потом приходит к то внешне заказчик и говорит у нас ты задача мы с ней не справится помогите нам и решить для этого мы погружаемся в за дальше как правило это делают архитекторы они приходят смотрят а что за данные что за запрос и вот по итогу архитектор состоит примерную картину как все это работает и дальше уже дает инфу как раз таки как генерировать данные для нагрузочного тестирования вы собственно вот как раз очень хороший power base московской бирже где мы прям большой-большой командой потому что нам всем был жутко интересно поработать с московской бирже потому прямо булкой в полный вот мы приходили к нему офиса то еще года карантина они прям собирались и мы огромное количество времени убили на то чтобы разобраться как у них работает система чтобы максимально ну плюс у них было какое-то готовы документация вот плюс у них опять же есть были готовы сценарии как они сами тестируют и о чем мы все собрали вот и как бы собрать по факту занимается наверное архитектор кто так спасибо так у нас еще есть время на один вопрос и есть рука спасибо за доклад на самом деле у нас в компании вот я сейчас как раз таки к 6 на стадии прототипа использование использую потому что вот так же столкнулся с тем что изучал разные тулы и смотрю что в итоге организовать единственное вот у меня такой вопрос насколько большая база у вас тестовых сценариев связи с чем я это спрашиваю потому что меня немножко пугает тот момент что вот я возглавляю отдел нагрузочного тестирования и у меня там будет достаточно большое количество сценариев многие из них не нужно писать костанай метрики потому что мне в псаки то и там все по сложнее достать его псо кетон . да он поддерживает но там все сложно вот и вопрос в том что как если большая ли у вас база по тестам и как в этот весь хаос в джесси держите потому что вот тут как бы пугает с одной стороны так же можно сделать что угодно и потом в этом количество просто погрязнуть у нас есть какой то пол совсем базовых сценариев очень маленький и по факту нас проблема в том которая есть и который никогда не денется у нас с точки зрения нагрузочных сценариев очень много кастомизации потому что мы работаем с разными заказчиками из разных сферах и снова банков одно в ритуалах другое в целиком их встречи и поэтому у нас нету какого-то обширного пола по фактам и все-таки делаем это под заказчика под клиента вот какой-то локальный по у нас есть но он покрывает абсолютно какие-то минимальные сценарии ну просто иногда там к нам приходит задают какой-то вопрос а вот есть там какой-то абстрактный синтетический тест я принципе не сторонник синтетических тестов потому что как правило не показывать пример ничего но тем не менее как бы некоторым людям это интересно и вот для них мы там заготовили как духовные сценарии но по факту полноценный сценарием и к сожалению вынуждены каждый раз писать практически с нуля спасибо на этом вопросы которые задаем здесь зал и заканчиваем и чуть чуть погодя буквально две-три минуты можно будет собраться вот на на выходе справа и по мучить вопросами еще сколько угодно и подождите подождите не уходите самое сложное дать кому-нибудь книгу кстати больше нет у нас опрос про про похождения прогой джесс отлично отлично так до поздравляем и еще у нас есть небольшой подарок для вас спасибо ещё раз за то что выступили допустим поаплодируем"
}