{
  "video_id": "47Mht_uoX3A",
  "channel": "HighLoadChannel",
  "title": "Облачная платформа OpenNebula / Андрей Квапил (WEDOS Internet, a.s)",
  "views": 9024,
  "duration": 2197,
  "published": "2020-02-26T12:01:00-08:00",
  "text": "всем привет меня зовут андрей хватил я работаю в компании видос мы являемся крупнейшим чешским хостингом мы вообще делаем много интересных вещей вот буквально месяц назад на прошедшем devops конов я рассказывал как мы классно опускаем наши сервера в масло и запускаем кабинете с набором этом сегодняшний мой доклад будет про облачную платформу это не было это не была такая штука которая позволяет вам запускать и управлять большим количеством виртуалок ну и мы используем это не был для нескольких в нескольких кейсах во-первых мы предоставляем vps хостинг мы хостинг компания и все выписки для наших пользователей мы запускаем вот как раз вот вот не были также мы используем ее для нашей тестовой среды если нам надо что-то быстро протестировать проверить можем любой момент создать некоторое количество виртуалок не знаю там попробовать новую версию кубер метис удалить их в этом плане как будто не было подходит отлично ну и также мы сейчас готовим наш правят public клаус то есть вы сможете купить некоторое количество ресурсов там ядерном дискового пространства и дальше уже сможете нарезать его как вам захочется на свои виртуалке вот ну и начну я пожалуй с того почему же мы выбрали именно вот и не было почему мы не выбрали ваффен-сс т.к. ну во-первых мы выбирали между открытых между открытыми платформами со свободной лицензии здесь у нас как бы вариантов особо нету есть не было в конце так вот из тех кто сейчас облачные платформы развиваются вот эти вот две openstack нам не зашел потому что он достаточно сложный своей реализации но и там работает принцип rid of a kind words дай чтобы вам чем-то разобраться нужно посмотреть в исходный код и посмотреть что конкретно происходит ну и там с палитры не разберешься в случае сока не было всегда есть понятная документация и вообще вся архитектура облака она очень легко построена ее можно посмотреть и разобраться вот буквально за день два как бы вы можете посадить свой лишь одного администратора он у вас разберется пока не было потому что она очень простая но и такой фактор что openstack это там 2 миллиона строк кода в случае сотни было это в 200 тысяч то есть 10 раз меньше тем не менее даже с тем что с тем фактом что кодовая база в 10 раз меньше чем openstack а вот и не было на мой взгляд нисколько не проигрывает ему в гибкость и расширяемость то есть если вам нужно как-то и и подстроить под себя всегда можно написать новые драйверы как-то его ее докрутить или получить то что вам нужно ну и она также очень классно расширяется нашем случае мы тоже очень классно обыграли на себя тем что нам не понравился сторож драйвера для лент скоро мы написали свой собственный сторож драйвер для линз твари об этом расскажу чуть чуть подробнее но для начала мне на 20 познакомить самого это не был мой доклад можно разделить на четыре части сначала мы поговорим про концепцию клауд в общем и в чем отличие клауд от традиционных систем виртуализации потом мы посмотрим сущности с которыми работает open не было и все объекты которые вне создаются зачем они нужны и как какой-то не было с ними работает дальше посмотрим принцип работы самое по не было как она создает виртуалке как не работают вы внутренне ну и в конце посмотрим самое интересное как мы устанавливаем интегрируем с нашей текущей я инфраструктуры поехали концепция клауд как вы знаете есть большое количество разных систем виртуализации давайте возьмем самые популярные это open source ные прокс масса вверх api не было и openstack какая же между ними разница в принципе можно вот так вот провести вертикальную черту и сказать вот те что слева и это система виртуализации инфраструктуры те что справа это уже облачные платформы что это значит делал том что системы виртуализации тура не предоставляет вам возможность виртуализировать вашу инфраструктуру что понятно из названия здесь вас основная сущность это виртуальная машина то есть когда вы раньше устанавливали какой-то физический сервер вы устанавливали систему устанавливали на него приложение и дальше у вас как бы вот этот сервер жил эти системы и точно также предлагают вам сделать установить ваше приложение и дальше обслуживать виртуалку в контексте который работает это приложение они имеют все необходимые то есть там есть бэкапы и есть отказоустойчивость из коробки который уже предоставляют они и до виртуалке здесь как правило создают аноним их можно создавать как вручную так и steam plate of но как правило это происходит вручную с облачными платформами немножко другая идея здесь у нас основная сущность и от ресурсы которые нужно там утилизировать соответственно процессор на и ядра оперативка дисковое пространство нас есть некоторое количество физических ресурсов и мы хотим и вот удобно его использовать виртуалка здесь просто как бы удобная сущность которые эти вот самые ресурсы берет и как бы просто удобной сущность для утилизации вот этих вот самых ресурсов при этом здесь у вас приложение уже работает не как это как катал то есть она использует облака облака предоставляет удобная при для взаимодействия с ним и здесь у вас приложение уже тесно интегрирована с самим облаком и использует его для например она может там авто скейлится она может управлять инстанциями себя же в этом облаке но и виртуалке здесь создаются всегда steam plate of и здесь у нас работает такой принцип когда виртуалка для нас ничего не значит то есть мы можем удалить любой момент любую виртуалку создать ее заново и стинг light и при этом ничего страшного не произойдёт потому что все данные общей а изменения у нас сохранены в отдельных persistent образах ну вот такая концепция клал теперь посмотрим чуть чуть подробнее на самом api не было вот так вот выглядит интерфейс этот основная даже бардо и помимо красивых виджетов мы слева видим перечисление ресурсов да это вот все с чем работает пока не было объекта их можно разделить на 3 группы каждый из них посмотрим поподробнее сначала посмотрим виртуальные объекты с которыми работает opi не было это у нас виртуальные машины имиджа и тимплей то и сервисы вообще что собой представляет виртуальную машину вот и не было у нас есть некий имидж это не установочный образ это уже сформированный образ за готовый уже установленный готовый к использованию системой если в терминах openstack оговорить его можно также назвать golden был данный вид чем то есть это имидж из которого создаются виртуалке этот самый имидж и мы описываем в другой сущностью который называется темплейт template это просто набор параметров то есть это некий конфиг в котором написано что вот виртуалке должны использовать такой the image также там описывается виртуальный сеть из которой виртуалка будет получать айпи адрес и и после этого мы можем этот самый template инстанциировать и получить из него готовы виртуалы что вот это же самое тимплей мы можем инстанциировать несколько раз и получить много однотипных виртуалок хорошо виртуалку мы создали теперь нам надо ее где-то запустить здесь нам стоит рассмотреть как не был работает с физическими объектами это такие объекты как хасты дар из торы и виртуальные сети как вообще осуществляется управление физическими ресурсами вот и не было вот давайте возьмем к примеру у нас есть 6 х став это то что предоставляет нам процессор на и время оперативную память ну то есть вычислительные ресурсы у нас есть сторону который предоставляет нам дисковое пространство и у нас есть сеть и которые предоставляют айтишники все вот эти вот ресурсы как раз объединяются в некий дефолтный кластер но иногда бывает такая ситуация может возникнуть что вам есть вас некоторые особенность что вот первая сеть в инет один может работать только на первых 3-х стах а вы нет 2 только на остальных да ну просто такая вот особенность нужно ее как-то описать как это делается мы просто создаем еще один кластер переносим туда часть ресурсов часть холстов не переносим туда сеть ну а сторож например мы можем сделать с общими для этих самых для этих мастеров и тогда когда придет запрос на создании виртуалки scheduler вода не было будет выбирать ресурсы в пределах одного кластера то есть он всегда выберет наиболее свободной либо зависимости от политики в зависимости от политики размещения виртуалок выберется наиболее подходящий хост на более подходящий дастур и наиболее подходящая сеть но всегда это будет происходить только пределах одного пластика таким вот образом работает opi не было с физическими объектами и теперь нам нужно настроить доступ для этого есть следующие сущности такие как пользователи группы квоты и access-list и у меня была вообще использует unix модель для разделения доступа но мы помним это как файлики можно выставлять шмот как пользователь группа владелец еда каждый объект будь то пост раствора или виртуальная машина на каждый такой объект можно повесить можно повесить владельца и группу и настроить права доступа то есть можно использовать можно управлять либо администрировать ну и соответственно пользователей группа остальные там используются как стандартные биты почему так же можно сделать отдельные акции справилась которые будут определять что вот все пользователи из такой группы могут управлять объектами и другой группы ну а на физические ресурсы можно повесить квоты то есть вот в данном примере у нас пользователю разрешено использовать 6 процессом их лидер 10 гигабайт оперативки и 40 гигабайт 40 гигабайт дискового пространства но из этого всего он использует пока что чуть меньше половины вот как мы управляем вообще доступом и как мы его выделяем нашим пользователям для каждого пользователя на создается учетка в open не было но на него не вешаются на эту учетку никакие право все права вешаются на специальную группу то есть пользователь приходит покупает сервис для него для каждого сервиса создается отдельная группа и на эту группу вешаются права доступа то есть вот этот сервис может использовать какие-то ресурсы и туда вешаться кого то есть можете использовать там не больше сталь столько такую не столько то больше оперативной памяти вот если пользователь хочет купить новую услугу пожалуйста мы покупаем еще мы добавляем еще одну группу и добавляем ее в пользователя такой грубый вид подход достаточно удобен тем что эти самые группы они не завязаны на пользователя ими можно легко их можно легко изменять удалять можно перемещать владельцам можно в одну добавить несколько владельцев такой вот более гибкий подход получается отдельно интересная фишка то что физические ресурсы вот не было можно объединить некий виртуальный дата центра то есть вы можете просто выбрать некоторое количество хвостов do the star of из сетей и объединить поверх а уже существующего глостера внутри создать еще один маленький тото центр этот центр делегировать каким-нибудь вот вашим группам пользователей этого бывает очень удобно если вам нужно разделить там тестировщиков от программистов чтобы они друг другу не мешали и всегда работали на разных физических ресурсов так но сейчас мы познакомились более-менее с тем как какие ресурсы используют это не было теперь посмотрим подробнее как она с ними взаимодействует с чего вообще создаются виртуальной машины и как мы знаем все виртуалке задаются безобразов образа европе не было бывают двух типов они бывают не персистенции и персистенции не персистенции это вот как раз тот самый golden имидж при которой рассказывалось которого создаются виртуалке a persistent образы это специальные образы которые используются только для хранения данных вот но и есть три типа хранилищ это image data створ где хранятся все наши образы систем do the storm там хранятся специальные образы которые там хранятся образы которые из были которые прошу прощения посетим дат истории хранятся образы уже созданных виртуальных машин и есть специальный раствор здесь у нас хранятся ядра и не скрипты некие файлы концептуализации но в общем некие файлики которые мы можем добавить виртуалку моменту когда она у нас появляется рано формируются но давайте нарисуем схему здесь у нас есть некий marketplace marketplace это некий внешний сервис где вы можете зайти и скачать уже готовый образ для вас не было об не было systemes представляет как можно сравнить с docker hub да там есть все необходимые образы такие как ubuntu centos вакансию с и так далее когда мы и тот самый образ импортируем себе в облаках он сохраняется в image data старика книппер системный образом и когда мы из него создаем виртуалке а здесь происходит хитрой операция на опять же все виртуалке создаются в систему эта история но тут есть такая идея что эти самые образы они не копируются как бы это зависит от реализации драйвера но обычно подразумевается что это как бы просто snapshot из этого самого образа соответственно когда мы вот эти вот вот эти квадратики удаляем когда мы виртуалке удаляем у нас удаляются также и образы созданные для этих виртуалок ну и все базовые базовый образ остается неизменным всегда где же тогда хранить данные здесь нам приходит на помощь прецедентные образы которые работают немножко по-другому когда вы его подключаете к виртуалке у нас не происходит snapshot не происходит операция копирование происходит на сим link система кастор и поэтому когда виртуалка пишет в этот самый образ он все у нас надежно сохраняется в image data створе и поэтому когда мы виртуалку удаляем у нас просто удаляется 7 ленка все данные пирсе стенки сохраняется вымерзает astoria хорошего виртуалке мы создали теперь нам нужно подумать о том как не и configure то есть у каждой виртуалки и должна быть постройкой сети туда нужно добавить ассаж ключик не знаю можно строить пароль для пользователя как это происходит под а не было здесь у нас есть такой процесс который называется контекста ре зация вообще как я говорил все виртуалке вот они было это просто набор параметров то есть там есть имя есть айпишник ну и как бы можете просто переменами добавлять к к объекту виртуалке вот дополнительные параметры open не было берет весь вот этот самый конфиг виртуалке и формирует из него виртуальный сочник виртуальный сошник подключается в сидиром виртуалке в момент того как она запускается либо он может перри формироваться в момент когда она работает но они суть внутри всегда есть специальный демон который знает как с этим конфигом работать он вырос парсит и настроит вам сети саши все остальное кроме того вы можете туда свои кастомный скрипты тоже добавляет принципе похожим образом работает клауд и нитку но ты не тоже умеет вот это тот самый конфиг виртуалке парсить его использовать но не было есть свой видимо есть также возможность взаимодействовать с виртуалки обращаться к своим параметрам для этого вам нужен отдельный сервер который называется у ванги этом то есть вместе со всеми параметрами виртуалке можешь добавиться некий monheit токен использую которой виртуалка может через сеть уже обратиться к своим параметрам и что-то там добавить или изменить это на самом деле более полезно когда у вас есть целый сервиз из нескольких виртуалок и тогда вы с одной виртуалке мышцы через это самый сервер рулить остальными виртуалками например для того чтобы осуществить с келли или что-то подобное как же работает вообще самого к не было вот он не было каждый для каждой операции над каждым объектом она запускается специальный драйвер определенные действия в драйвере а каждый драйвер это просто набор shell script of то есть на каждое действие грубо говоря до запускается шел скриптик окон не было изменить драйверы буквально для всего это как стоит 6 то сеть виртуализация поддерживаться разные гипервизор и авторизации marketplace и также сейчас в новой версии добавить специальный драйвер для хуков все драйверы управляются специальными ман-ман и the middle barracks с драйвер то есть это некая такая штука которая запускает вот эти вот сам из скрипте ки которые нам нужны и все действия которые не было выполнять с помощью этих скриптов они выполняются через наш обычный посмотрим как это на картинке выглядит нас есть ван диет основной демон вот он не было и есть несколько работ на ruby написанных middleware xix драйверов они возьмем для примера драйверы для виртуализации для хранилища и для сети почему где 4 потому что вот эти вот два драйвера ds модема то не используется один для обслуживания и меджидов история другой для sitting by the storm но они суть каждый ее драйвер имеет смотрю в определенную директорию которая называется по названию драйвера но то есть можно взять к примеру driver sf внутри там будет вот такой вот набор скриптов и если мы захотим создать на пати для нашей виртуалке не было просто запустить скрипт тег snap клиент из директории конце а там внутри уже будет просто скрипт который зайдет на надо сделать там рыб на апрель и завершится с нулевым статусом если завершится неуспешным то мои влоги и машины прям сразу же в интерфейс и не было видим что вот так а это такая такой-то скриптик завершился с ошибки мы смог повторить от депозит теперь посмотрим про установку и про интеграцию вообще все сервисы лапин не было можно разделить на 2 части и the front end который представляет собой control плен со всеми сервисами я был одном по сути все все ок а не было это есть frontend а в качестве бэг-энда у нас выступают компьютеры то есть там у нас установлен только либерт тему ice age сервера принципе нам ничего больше не нужно на них посмотрим на сервис и фронтэнда это у нас базы данных это может быть мастерски light внутри лежат для всех объектов которые мы имеем в кластере есть демон ванде и это демон который предоставляет об и для этим этих самых ресурсов и и он также запускает все вот эти вот действия для виртуалок для любых других объектов и у нас есть scheduler который просто занимается тем что видит что вот новые появились волки статусе pending и нам их надо зашить длительно на наши какие-то ноды вот sandstone предоставляет интерфейс через веб можно посмотреть управлять и два дополнительных сервис они в принципе не обязательные всегда можно установить потом если вы не хотите самого начала пробовать ван flow это такая штука которая позволяет описывать группы виртуалок джейсон и инстанциировать их как один единственный сервис как единый сервис и ванги этот как раз тот самый сервер который предоставляет а при для общения изверг балкис облака но в качестве бы candy я сказал уже там либерт какому из аж серверном ничего не нужно ни было копировать свои скриптик ее выполнять самостоятельно какие у нас есть варианты развертывания во первых a standalone сервер это когда вы берете и весь frontend ставите на один сервер у нас есть база данных о меня блаженством все эти компоненты можно поставить на один сервер используя есть классный скрип называется minivan то есть можно скачать его специального get high up репозитория и буквально за пять минут вот получить подобную картинку хочет полностью настроенную из курировал apple не было следующий вариант гораздо сложнее он подразумевает когда вас есть один большой кластер из москве у галера кластер который работает мастер мастер и есть некий ресурс менеджер который случай чего наши основные демоны и вот не было перемещается sh100 на хвост и они приезжают вместе с хищником таким образом получается что достаточно отказоустойчивая схема и она в принципе не плохо работает но достаточно сложная в реализации следующий вариант ровд он появился буквально несколько версий назад и вот только вот в последней версии он стал более менее стабильным он уже подразумевает что у вас есть несколько не был каждый из них смотрит свой собственный своей собственной базы данных и они между собой договариваются обмениваются выбирают лидера и реплицируют данные но и там тоже есть некий хук который вместе с лидером и приезжают айпишник ну и четвертый вариант который используем мы это запускать вот он не был у в контейнерах изначально мы использовали prox массу и на мой взгляд он отлично для этого годится то есть каждый сервис вы запускаете в виде отдельного контейнера и почему про космос потому что она изначально из коробки предоставляет все возможности для бэкап и для их ability to есть случается что-то падает он всегда может контейнер перезапустить на другой ноги и установка такого плана очень простая непринужденно вот позже мы смогли равале все это в кубе метис то есть у нас уже есть контейнеры которые собираются автоматически через докер файл и запускается повернитесь как deployment или full set при этом компьютерным и раскатываем тоже таким же образом вы просто вешаем лейблы на наши компьютеры что они вот являются компьютеры для окон не было и на них раскатывается полностью готовая компьют надо которая не была может просто подключиться использовать на самом деле несколько дней назад я выложил в гитара + исходники карта для диплома пино блан и такая штука которая позволяет вам буквально вот за три команды запустить весь control плен не был вернитесь выглядит он запущенном видео таким вот образом то есть вот у нас запущенные под и а если мы этом все визуализируем получим классную картинку то есть вот этот шов у вас поднимается буквально там за несколько команд вы можете попробовать здесь есть автоматический failover ну в общем можно можно можно попробовать если интересно присоединяетесь к разработке может вам тоже будет интересно diplo тип не было в кубер не this ну а по поводу интеграции с другими системами здесь есть не было имеет достаточно богатую систему хуков то есть каждый объект вот и не было может иметь некий статус и состоит а точнее некий стоит и на изменение стоит вы можете запустить некий хук ну например банальной ситуации если вам нужно чтобы все созданы виртуалке добавлялись автоматически ваш dns-сервер в этом случае тогда делайте хук который запускается когда машина переходит статус running и он соответственно обновляет динас сервер также эта система используется для обеспечения failover например если у вас падает но да тогда вы можете просто у вас надо переходит из статуса running ванна и тогда он стреляет этот самый хук он эту самую ноду ликвидируют через fencing а все виртуалке с нее и запускает на других новых вот но и для взаимодействия есть куча готовых библиотек есть для руби python java для кого есть и есть готовые модули иран sibu также недавно появился terra форм провайдер который работает сотен не было ну и на этом то все расскажу о нескольких других интересных вещах которые реализованы вот и не было первую очередь стоит толкнуть про абсолютно рабочую нормальную федерацию то есть вы можете поднять несколько кластеров не было объединить их федеративные режим и как бы вас будут все пользователи все группы и access правило между этими мастерами они будут общими ну а внутри создаваемые ресурсы они уже будут как бы пределах одного кластера работает также есть возможность использовать встроенные буксировщики это определенный тип для виртуалок там сюда там используется обычный alpine он автоматически configure трп то есть вы инстант эир уйти сервис в инстансе руется виртуальный роутер у вас создается несколько виртуалок с плавающим айпишник если одна из этих виртуалок падает у вас ответственно печник пережает на другую ноду на другую виртуалку и она также сможет осуществлять свои вот действия и так же есть возможность использовать high bridge mode то есть вы в open не было можете подключить amazon либо ажур он подключается виде отдельные компьютеры и вы можете как бы вот используйте ресурсы для управления и запуск виртуалками то есть вы можете управлять виртуалками прямо вот из интерфейса вот он не было ну и в качестве заключения хочет сказать что не было невероятно простая гибкая платформа я легко устанавливать администрировать и менять под себя как угодно она отлично подходит для организации правят клауд буквально несколько секунд несколько минут вы можете получить полностью готовы и безопасное приватные облака для ваших и на мой взгляд она не очень хорошо подходит для public float почему потому что она изначально когда создавалась в нем было кейс использование to provide клауд в данный момент она может быть немножко не то носить urea но нам может быть немножко хочется иногда от пользователя скрыть какие-нибудь данные не было это немножко не даёт сделать ну например если мы хотим создать виртуалку и отдать ее пользователю то пользователь всегда сможет видеть что вот этот виртуалка она запущена на таком-то хостел хотя если вы используете public float вам принципе эта информация она даже не к чему ну или вы можете предоставить информацию о на отдых пользователь его пользователь всегда увидят что вот на этих водах они мы его помимо его виртуалок там что-то тоже запущена но потому что ему нужно знать что там запущена а ему нужно знать какие ресурсы используются на но один раз удалить свою virtual вот как бы он всегда вот будет эту самую информацию иметь но при этом оно достаточно эффективная потому что эту самую информацию положительно никогда не сможете получить доступ к виртуалке другого пользователя то есть мульти тенденций она работает замечательно вот public float мы сейчас строим я надеюсь в течение пару месяцев может месяц-два запустим но посмотрим что получится на этом все спасибо за внимание вопросы огромное спасибо за доклад очень познавательно очень любопытно я два вопроса какой-нибудь орешкин из коробочки есть волка не было о том что там как бы все плохо с физическими ресурсами или там среди ночи разбудить админы или еще яра и от саула надо экспортер я писал экспортер для это не было ее можно прикрутить в прометея и настроить allure thing то есть из коробочки ничего нету а вот стандартный там много экспортеры promise архи из кораблей с только пей которые можно запрашивать то есть он хранит статус и всех хвостов можно вешать хуки если их у если хвост перешел в новом можно также так вызвать карл которые вызовет команду которую выдают всех администраторов лего прочь ну да да как ним и второй вопрос вы упомянули там что появился тира форм провайдеры что прочий скот уже прям подтягиваются по google там он уже с прошлого года пробовали я лично нет ребят лучше лет они специально написали его bindings для не был ее потом крути литра from провайдер то есть у них это как бы была одна из приоритетных задач чтобы заставить пользователей использовать в этом не было понятно а где тот другие шаги там в сообществе собираются для красок через код на не знаю бейкер ракету хакер по моему изначально есть поддержка я честно говоря немножко не капал в эту сторону нам больше был интересный деплоить не было ну на своим на своих железках спасибо еще раз добрый из массива сосны мнение не вопрос по касательно стороны сейчас поддержку долга локальные диски или возможно подключение с 3 например или других облачных и дисков сейчас вернусь на слайде ксо старриджа мир там есть несколько типов 100 раджей про который я говорил и для них могут использоваться разные протоколы то есть для market плывут то есть для marketplace а вы можете использовать s3 можете использовать эти теперь то есть если вы делаете свой собственный marketplace такая возможно история имеется вот ну а для image data storage system да да скоро они используют уже такие стандартные драйвера как цех локальная система но и можно принципе что угодно туда прикрутить 6 направьте спасибо очень познавательно у меня несколько вопросов а винлейне сити поддерживают слона и что-нибудь есть несколько драйверов уже готовых из коробки это вид словила и от него свечи вы пробовали как они работают на я пробовал лапин в switch и сейчас мы используем linux бриджес и мы еще используем weak spots в тестовом режиме пока что но когда мы будем предоставлять нашим пользователям возможность использовать приватные сети для каждого будет создаваться отдельный вид slon и дальше он уже может тут там рулить будет и печники назначать каким захочется есть работает по поводу мотора джо уточнить какие-то кроме цеха варианты общего хранилища дном блочные из торы и нфс на возможностью возить машины между гипервизора метан тайме я понял я в данный момент очень активно продвигаю линз мне кажется что это отличная альтернатива цеху и он очень производителя лиц storm сам по себе это некий сторож который это вообще оркестра тарна от блочными устройствами то есть все тома создаются другие либо в tfs и поверх них включается репликации с помощью дерби де то есть вы когда создать виртуалку was shot улице куда-то два тома создаются в третьем месте запускается виртуалка создается диск 1 ресурс и он по сути просто используют данные вот этих вот самых томов еще такой момент насколько я понял но машины не клонируется из базового образа делается просто dips нам шут с перенаправлением записи как по производительности это вся история а это зависит вообще вот тип с тораджа который вы используйте и вы можете указать разные стратегии копирования тот же самый цвет например поддерживает можно использовать копи режим когда у вас сетям когда вас просто создаваться копия сюда либо использовать snapshot производительности опять же зависит от бэг-энда не знаю не могу сказать на скидку но мы вот используем блин сторон достаточно производительный я к тому что перенаправление записи она ну не всегда быстро происходит зависни перенаправляется то есть запись идет только snapshot чтение до идет из базового образом но всегда у вас будет три йерархии snapshot of в данном случае она будет всегда использовать только один шагом то есть если вы вот этот самый образ захотите сделать вторую бунту который будет немножко отличаться всегда произойдет полный копии и менеджер запасной возможность сделать полный клон при развертывании машины и то есть брэм standalone там диск сделать и отдельный не ссылающийся никаким образом на базовый образ есть есть да спасибо большое спасибо за доклад вопрос по каско для фронта или для виртуалок ли виртуалок для верно для виртуалок на хук вешается действие когда ноты приходит в а ну и дальше там обязательно нужно указать pink скрип ну чтобы удостовериться что виртуалку уже больше нигде не запущена покупку стреляется этот fencing вырубает ноду и дальше всех все виртуалке автоматически приезжают на другие но бы понял почему всем спасибо если кого-нибудь есть вопросы вы можете задать дискуссионной зоне благодарим нашего спикера поаплодируем"
}