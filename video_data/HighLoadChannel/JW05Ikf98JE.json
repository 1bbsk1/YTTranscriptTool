{
  "video_id": "JW05Ikf98JE",
  "channel": "HighLoadChannel",
  "title": "Защищаемость от DDoS на этапе проектирования системы / Рамиль Хантимиров (StormWall)",
  "views": 9118,
  "duration": 3113,
  "published": "2018-08-16T04:58:06-07:00",
  "text": "так вот хорошо тогда начинаем добрый день коллеги меня зовут шамиль хантимиров я цел компании сторону вол мы уже около 5 лет занимаемся построением сервисов по облачной защите от ddos атак недавно у нас добавилась еще услуга облачного web applications firewall то есть в комплексе все предоставляем работаем в равной степени как с российскими так с зарубежными клиентами строим собственную сеть я давно хотел поговорить о том как на этапе функционирование системы можно заложить в нее какие-то основы или принципы которые будут в дальнейшем влиять на то насколько успешной будет дадут защиты этой системы потому что занимаясь защита до достаток невольно начинаешь задумываться почему какие-то приложения защитить проще а какие то намного сложнее в каких-то случаях вся защита выполняется автоматически а в каких-то случаях требуется существенные трудозатраты на постройку фильтров либо возникают вообще какие-то нюансы которые не зависят от дадут защитника вот первое что приходит на ум на самом деле это то что tcp протокол защищать легче чем протокол vdp и мы с нашей команды решили разобраться почему так то есть от отталкиваясь не от конкретных реализаций а отталкиваясь от тех факторов которые в принципе могут повлиять на защищаем асти и которые скажутся на эффективности всей видов защиты приведу очень плохой пример онлайн игрушка которая работает по протоколу vdp которые находится на одном ip-адресе с сайтом на сайте выводится топ игроков постоянно который берется из игровой базы и что мы имеем в результате этот и дипе сервис довольно легко атакуем потому что нету никакой системы в том как он обрабатывает запросы нету подключить процесса подключения люди пи сервис зависит соответственно от игровой базы сайт зависит от игровой базы то есть если игровая база недоступна то скрипт и с сайта начинают обращаться к этой базе ничего не получают повисают в тайм-ауте сайт становится недоступен полностью а игрушка еще и зачем то опирается на dns то есть если сервис dns недоступен игрушка не работает причем это реальный пример таких реализаций полно и вот приведем наоборот хороший пример представим такой сервис заказа такси аналог убера или гетто его поделили заранее на быстрый сервис аутентификации который в принципе по большому счету не так критичен его намного проще защитить потому что клиент подключаясь к нему тратит мало времени на то чтобы получить свой токен если у даже он недоступен те там водители которые уже подключились их из системы не выбросит и есть более критичный сервис который не должен у водителей отваливаться он не должен у них тормозить на нем компании зарабатывают деньги айпи адреса которые выдаются водителям для подключения к этому сервису не известны заранее они выдаются только после аутентификации то есть теоретически атакующий про них даже не знает сайт находится отдельно от этого сервис аутентификации и никак от него не зависит сами api адреса или там dns имена не суть важно они идут таким образом что зная один адрес невозможно угадать все остальные и несколько адресов одновременно используется для подключения то есть если один адрес стал недоступен то это еще не конец света давайте немножко отвлечемся и для тех кто не до конца знать не до конца понимает я поясню как вообще подключается облачная дадут защита здесь не обращайте внимание на эти типы на веб-сайт здесь принципе может быть любой сервис общая идея такая что тем или иным способом клиент который подключают дадут защиту направляет входящий трафик который может содержать атаку на сервис дадут защитника будь то dns перенаправление будь то перенаправление с помощью би джи пи до доз защитник этот трафик у себя получает обрабатывает как-то фильтруют и доставляет клиенту очищенный трафик в лучшем случае очищенный об этом мы тоже поговорим подробнее и собственно прежде чем двинуться дальше давайте определим такие понятия как защищаем оси и как эффективность защиты которые я уже употребил я не претендую на научную полноту этих понятий но я думаю что в рамках нашего разговора это все вполне уместно эффективность защиты от ddos это отношение времени когда негативные последствия атаки влияют на доступность сервиса тем или иным способом к общему времени атаки в данный промежуток времени то есть допустим у вас сервис который там сервис по заказу цветов на 8 марта его атакуют классический случай у вас десять часов длится атака из них два часа сервис лежит совсем в течение часа наблюдаются существенные проблемы с доступом в этом случае эффективность будет равна семи десяти процентам а защищаем асти то собственно способность сервиса быть эффективно защищенным от dos атак с минимальными затратами ресурсов что натолкнуло меня сделать этот доклад я недавно общался с разработчиками одного нового сервиса voiceover айпи шифрованного у них там голосовая связь сообщение нтн шифрование и они мне задали такой вопрос пара миль как нам сделать так чтобы это в итоге можно было защитить от ddos атак чтобы вы могли это легко защитить и тогда собственно я и начал задумываться а какие есть параметры которые надо максимизировать а какие есть задачи которые надо решить и вот в ходе систематизации того опыта который мы накопили удалось это все по полочкам разложить итак перейдем к основным задачам да здесь конечно очевидно что чем больше мы подумаем на этапе проектирования о том насколько эффективно потом сможет работать защита с нашим сервисом тем меньше будут ее затраты тем выше эффективности и так первая задача это предоставить как можно меньше информации атакующему почему это важно потому что представьте себя в роли хакера если вы атакуете какой-то сервис вам в первую очередь нужно знать что именно атаковать какие есть проблемы в сервисе куда бить эффективно куда бить не эффективна как это проверить а если у вас не будет полной информации если у вас не будет каких-то способов проверки это все очень быстро может закончиться поэтому в первую очередь мы говорим о такой вещи как security баевский у реки то есть вот пример на слайде пользователь как в нашем сервисе такси получает список айпи адресов критичного сервиса только после аутентификации сервис аутентификации он быстрый он легко пластеризуется он не такой критичный атакующий не имея учетных данных не знает куда ему подключаться здесь я бы хотел привести один интересный пример из жизни который был у нас несколько лет назад с одним игровым серверам это был сервер игры или иных 2 его атаковали очень сильно там был заказной до доз его не отпускали очень долго и атака на тот момент она превосходила нашей мощности то есть мы в принципе не могли ее успешно отразить но мы сделали такой архитектурный трюк договорились с разработчиками этого сервера сервер делится как раз таки сервер логина и сервис сервера игровые с вами мы договорились сделать так мы побили интернет на тридцать две равные части маска слышь 5 или какая-то маска и сделали чтобы после аутентификации игроку выдавался айпишник который строго соответствуют тому сегменту интернета из которого он подключается и попросили провайдеров вышестоящих закрыть вот таким большим целям эти api адреса таким образом чтобы каждый конкретный пи адрес мог принимать запросы только из конкретного сегмента интернета причем эти адреса шли не подряд и что мы получили в итоге в итоге мы получили то что атака делилось на 32 просто мы обрабатывали одну 30 вторую атаки и все прекрасно работала атакующий же в свою очередь не мог знать какие пи адреса ему атаковать администратор этого сервера сделали еще такой финт ушами они взяли собрали список айпи адресов с которых предположительно подключается атакующий и его друзья и для них выдали отдельные пи адрес на который поставили такую настройку что даже при малейшем флуди он падает и атакующий атакуют у него как бы он проверяет эту игрушку она у него лежит все хорошо 3000 человек еще играют вот это один из примеров применения такого метода кстати через две недели он все-таки догадался в чем дело серьезно атаковали круглые сутки где-то через две недели догадались на когда деньги заплачены это все имеет смысл следующее о чем стоит здесь упомянуть это то что нам надо по максимуму если это возможно скрыть те пути которыми можно проверить работает ли сервис вот приведем для наглядности другой пример представим что вы атакуете интернет провайдеры интернет в интернет провайдера есть там несколько айпи адресов вы просканировали его сеть какие-то отвечают на pink какие-то там на типе connect вы атакуете смотрите что происходит а что если у вас не будет этих методов проверки то есть вы не будете знать эффективно так или неэффективно более того если речь идет об интернет провайдере то существуют такие типы атак которые направлены не на то чтобы полностью положить ему сеть а исключительно на то чтобы перекрыть интернет-пользователям то есть внешние ресурсы его доступны будут а вот у пользователей интернет работать не будет и как вы об этом узнаете если у вас нету инсайдера то есть здесь я конечно не призываю вам закрывать и sempai но это точно тот параметр который влияет на защищаемых и об этом надо как минимум задуматься если у хакеры не будет средства проверки то тут нужно понимать опять же психологию дадут атакующих когда они атакуют они получают большое удовольствие от того что они видят результата так и если они результат атаки не видят то и мне интересно становится они переключаются на других жертв ему проще вернуть деньги за эту атаку если он честный допустим чем тратить слишком много времени и усилий когда он на такую-то слепую поэтому надо ему дать такую возможность но и третье о чем здесь стоит упомянуть это защищенность от взлома очень очень часто мы видим случаи когда не удается за доносить какой-то сервис и его пытаются взломать причем взлом здесь является не только самоцелью и даже не столько сама целью как целью является узнать больше об инфраструктуре если там мы говорим о каком-то тисе пи сервисе там с базой данных то взлом сайта может привести к тому что будет раскрыт api адрес базы данных или к тому что будет раскрыт незащищенный пи адрес этого сервиса который находится в каком-то дата-центре просто защищается там например туннелем или проектированием ибо были у нас даже случай что когда даже взлом не требовался к нам один раз встал интернет-портал одного из городов курортных перешел от другого дадут защитника и тогда да защитник не мог его защитить мы начали его защищать пошла атака сайт упал начали разбираться что происходит открыли исходный код сайта а там в теге скрипт src значился прямой ip адрес сервера который не был защищен то есть достаточно было просто открыть исходник сайта и этот сервис уже невозможно эффективно защитить в том виде в котором он есть поэтому давайте повторим рекомендации в первую очередь если это возможно нам надо делить сервис на легко защищаемую часть которая там отвечает допустим за авторизацию уже после авторизации мы сообщаем клиенту куда ему подключаться за более критичной частью понятно что не всегда это возможно но если это возможно то это лучше сделать потому что гораздо больше гибкости в дальнейшем будет при защите вплоть до того что мы можем ограничить доступ к критическому сервису только там для тех айпи адресов которые авторизовались вторая рекомендация обязательно нужно представлять себе при проектировании в роли атакующего как вы будете проверять что сервис не работает или плохо работает если у атакующего путей проверки нет то и то и атаки скорее всего не будет по крайней мере долго и заботимся безопасностью ну переходим задачи второй не менее важный предоставить как можно больше информации за защитнику вы даже не представляете насколько часто бывают случаи что с точки зрения нас дадут защитника все работает все доступно со всех точек интернета никаких проблем там с доступом например на сайте нету клиент жалуется что у него что-то не работает как дадут защитник узнает о том что что то не так у нас были случаи когда клиенты нам говорили вот слушайте ребята вот вы telnet откройте но такой то портите себе если кракозябры появились значит все работает если кракозябры не появились значит она не работает хотя эти себе соединение устанавливается и это хорошо если есть хотя бы такой способ проверки поэтому об этом лучше тоже позаботиться заранее и предоставить защитнику доступ к мониторингу какому-то который не жалко показать хотя бы на время атаки ода на скрине мы видим случае то вот я буквально нашел пока готовился к презентации человек пишет что у него упал сайт и форум на самом деле мы видим что все работает рекомендация тут просто сделайте так чтобы дадут защитник знал все ли хорошо потому что возможные моменты о которых будете знать только вы ну а мы переходим к третьей задача обеспечить понятные возможности фильтрации атаки здесь стоит вспомнить о том что наверно многие думают что подключил дадут защиту и можно спать спокойно но это далеко не так во многих случаях потому что вот представьте себе там сервис который работает на youtube и там нет никакого процесса подключения там нету никакой последовательности пакетов которую должен пройти хост при подключении этот тип этот youtube и сервис довольно таки непроизводительный то есть от любых пакетов у него начинается выполнение каких-то внутренних механизмов начинается нагрузка и дадут защитник какого должен защищать вообще то есть он не может ограничить пакеты там по какой-то сигнатуре потому что сигнатуры могут быть произвольными он не может ограничить число пакетов по source айпи адреса потому что source айпи адреса могут быть тоже произвольные и остаются какие-то стандартные методы проверки которые по-прежнему будут работать там защита там от всяких тихи прииде pm пли фикации и тому подобное от стандартных типов атак а что если атакующий умный а что если он напишет генератор который будет генерировать пакет именно для этого и дипе сервиса вот об этом нужно думать заранее чтобы у защитника была возможность отделять бота от не бота в первую очередь это на уровне транспортного протокола тисе пи это намного проще потому что фильтровать тисе пи можно там путем залезть внутрь и соединения проверить что соединение установилось только потом передать его на backend можно сравнивать sequence и можно сравнивать там легитимность пакетов по sequins у по флагам и так далее люди пи это все не получится но если все же ваш сервис написан на юге пи если это требование то нужно как минимум иметь по этому сервису какую-то документацию и иметь какие-то понятные процедуры установки соединения процедуры аутентификации вот есть несколько прекрасных юге пышных протоколов которые известны как работают которые известно как фильтровать например сип описан в rfc teamspeak тоже есть хорошее описание тоже мы его без проблем фильтруем но если протокол ну никаких таких механизмов не поддерживают вы про них не знаете то это очень тяжело защищать у нас был случай с одним из клиентов он защищал игру gta san andreas multiplayer носом мы с ним вместе сидели анализировали дампы и выяснили что для того чтобы ну легитимный игрок когда подключается он всегда отправляет одну и ту же последовательность пакетов сначала длина пола до 4 потом 11 потом 15 потом 7 и только после этого можно разрешать ему генерировать произвольные пакеты мы написали на основе этого фильтр и все было прекрасно но есть по-прежнему youtube и сервисы которые в которых об этом не подумали защитите их будет крайне сложно ну рекомендации по возможности использовать эти цепи если вы все-таки вынуждены использовать в dp я вижу что такие есть люди то подумайте как вы будете отличать легитимного клиента от нелегитимного и обязательно убедитесь что дадут защитник знает как фильтровать атаку имеет метод фильтрации не надейтесь на то что это панацея то есть если степи еще все более менее понятно то судеб и совсем не понятно здесь нужно это все согласовать ну и опять же я конечно говорю о да да защите о профессиональный если вы сэкономили на дадут защите и дал защитник представляет собой компанию которая просто купила какую-то железку поставил ее обслуживает и перепродаёт то вы ничего этого не добьетесь потому что стандартными методами фильтрации здесь не обойтись им при защите таких сервисов но мы переходим к задаче номер четыре обеспечить надежность сервисов под атакой зачем вообще мы подключаем дадут защиту очевидно для того чтобы обеспечить доступность и сервисом под атакой без атаки доступность сервиса под атакой она в первую очередь зависит от доступности сервиса без атаки просто те риски которые есть без атаки по да так и они усиливаются потому что уровень негативных воздействий также усиливается давайте проговорим какие параметры могут влиять на доступность сервис под атакой первую очередь это число точек отказа чем их меньше тем соответственно лучше плохой пример это когда разработчик начинает бездумно применять какой-нибудь round robin dns и добивается в итоге не резервирование от того что у него упал один ip адрес и участие клиентов сервис становится недоступным если клиент не поддерживает резервирование на уровне приложения пример это вот например к сервису такси мы вернемся можно же использовать несколько ip-адресов которым установить одновременно подключение и сделать какое-нибудь сохранение состояния на уровне приложения что если отвалился один ip адрес у клиента с точки зрения клиента ничего не разрывается он просто переподключается к другому и у него все продолжает работать в зависимость компонентов системы друг от друга здесь опять же вспоминаем про игровой сайт который подключается к игровой базе чтобы показать топ-игроков как только игровая база недоступна или забанил этот сайт за кучу обращений сайт становится недоступен хотя это вообще не критичная функцию следующее о чем стоит упомянуть это готовность к слабым атакам тут надо понимать что годов защита это опять же не чудо какое то она применяет вполне понятные методы для фильтрации и в некоторых случаях технически невозможно обеспечить полную фильтрацию атаки а особенно если мы говорим о асимметричном подключение которое так любят дата-центры хостинг-провайдеры любые сети у которых есть там несколько uplink of у которых есть требование к задержке которые хотят сэкономить и потому что например в случае с каким-нибудь хостингом исходящего трафика гарантированно будет там в несколько раз больше чем входящего и входящий трафик защитить гораздо дешевле получается так вот это все приводит к тому что до dos атака она фильтруется не полностью она просто ослабляется и остается какие-нибудь там 20 50 кило пакетов в секунду который ваш сервис должен выдержать при любых раскладах у нас был случай когда подключился к клиент с небольшим хостингом его сначала атаковали и т.п. от youtube и атаки защита спасла но вот эти типы защиты он у нас не приобрел и шла маленькая размером буквально там в 10 мегабитах атака ботами на одного из его клиентов которую легко можно было отфильтровать на любом linux сервере но у него стояла старый cisco роутер причем low-end причем на нем была настроена там куча всяких на тоф и так далее он просто погибал разваливалась би джи пи эс си и все было очень плохо поэтому нужно задуматься о том как поведет себя ваша сеть при такой слабые атаки не нужно использовать там старые сказки и свечи в роли лишь мужики зато raw еще о таком моменте хочу предупредить как mikrotik они сейчас стали безумно популярными эти железки потому что стоит они довольно дешево функционал там огромный но это все ценой производительности и даже дорогие mikrotik и там за 1000 до 2000 долларов относительно дорогие они вполне себе погибают со 100-процентной за груз стопроцентной загрузкой процессор атом от малейшего 50 кило пакетов флота который обязательно будет если вы подключите асимметрично защиту далее идет сервер на котором должен быть оптимизирован сетевой стек на котором должны быть разбросаны по разным ядрам прерывание сетевой карты обязательно об этом нужно не забывать слава богу последние дистрибутивы linux умеют это делать автоматически но не всегда это так в интернете есть множество статей как разбросать прерывание сетевой карты по ядрам есть даже скрипты готовы потому что linux сервер там даже мощный на новых процессорах если она лежит все на одном ядре он но с почти 100 процентной вероятностью умрет там от 150 200 пакетов флуда и умрет все что все что за ним но и само приложение обязательно нужно подготовить такой небольшой нагрузке а именно обеспечить хотя бы то что какие-то тяжелые функции которые обращаются к базе которые пишут или читают диск чтобы они были доступны только для хороших белых клиентов которые прошли авторизацию но никак не для ботов вот и еще такой параметр тира рекомендациям которую сразу же сходу озвучил этому voip сервису который просил помощи это разделять разделять и властвовать разделять сервис разные айпи адреса отдельно сайт отдельно сервис аутентификации отдельно там основной сервис не дай бог это и и дипе это нам позволяет сделать что это позволяет заранее отрезать кучу векторов а так если мы знаем что на одном ip-адресе находится только сайт то мы заблокируем вообще весь youtube и мы заблокируем вообще все эти хиппи syn-ake которые могут столько неудобств доставить если это сервис который работает по идее то мы уже люди пи заблокировать не можем зато мы можем заблокировать тисе пи мы можем заблокировать vdp амплификация потому что знаем что там за этим айпи адреса мне эту клиентов там которые в dns обращаются в интернете и мы можем разрешить туда доступ только после аутентификации на сайте например повторим рекомендации позаботьтесь о доступности без атаки обеспечить и устойчивость к слабым атакам и разнесите разные функции на разные адреса сообщите об этих всех особенностях защитнику чтобы заранее можно было составить какие-то политики до повторим задачи первая задача это предоставить как можно меньше информацию атакующему здесь у нас параметры число возможностей скрыть и такой мой объект число путей проверки работоспособности и защищенность от взлома вторая большая задача предоставить как можно больше информации дадут защитнику параметр который влияет на защищаемых возможность оценить эффективность защиты третья задача обеспечить понятные возможности фильтрации атаки здесь параметры число вы возможности отделить бота от не бота известность и понятность используемых протоколов и механизмов и обеспечить надежность сервиса под атакой то есть резервирование устойчивость к слабым атакам выделение разных функций на разные пи адреса и зависимость компонентов системы друг от друга на этом у меня все да и время уже кончается допрошу вопроса да спасибо за интересный рассказ поскажите пожалуйста я все-таки не очень понял всего вот этого доклада чтобы все-таки делаете с вот этой сложной штукой среди потоками ну да с ними все сложно и вы что с ними делать это я понял а у читал какие возможности ваш сервис предоставляет вообще защищаемые клиенты но вот смотрите как я уже говорил есть некий набор стандартных а так которые фильтруются стандартными методами они фильтруются всегда то есть там защита от всяческих амплификации атака там много пакетов с одного ip и и так далее стандартные кейсы но если атака идет направлены на конкретный протокол там например на teamspeak то нам обязательно нужен какой-то applications фильтр для этого тимспика что мы проверяем что клиент авторизовался на сервере что авторизовался он легитимно и только после этого мы разрешаем ему посылать трафик вот и для каждого конкретного протокола нужны правила соответственно то есть соответственно два сценария 1 час и статистический метод и второе это уже deep packet inspection да спасибо ну мне слышно да спасибо за доклад зов ский с опытом по даже не пою т.п. встречаюсь и вы с криком и что вообще с ним можно делать то есть как его фехтовать как вы отличаете твигги прихода то есть ну какие то есть уже соображений у вас может методологий как можно фильтровать вопрос на самом деле очень хороший у нас в плане разработки quick стоит пока еще плотные мне занимались но первые мысли это проверить что человек сначала поищите тебе обратился по обычному теперь порту а потом уже смотреть на клик вот а там дальше уже нужно проверять я сейчас не готов на этот вопрос так подробно ответить так спасибо за доклад очень интересная у меня такой вопрос следующий год у нас есть сервера аутентификации вы дали человеку и пи адрес вы дали ему токен соответственно что мешает тут у нас есть там стоит и адресов у человек зарегистрировался в 100 аккаунтов все эти api адреса опрос не full начал по ним всем атаковать поэзии он может там атаковать там с 1000 и печников и в токен писать любой этом там длину строки до 5 там все что угодно и как вот собственно туда защитник будет то есть ну в любом случае должен быть должна быть как эта точка которая проверяет эти токены либо ну я не знаю то есть вот такой механики не так то уж если можно простить адреса и как бы нельзя проверить токина что это валидные токина не какой-нибудь мусор как этот и возвращается как это помогает общего в целом по защите ну конечно если аутентификацию можно ну можно зарегистрировать там 1000 аккаунтов и пройти спокойно аутентификацию дадут защитнику то конечно такой способ защиты будет не очень эффективным он усложнит задачу но не исключит возможности атаки то есть здесь надо защищать наверное саму регистрацию защищать ее там всякими каплями и так далее даже если вот новая ну просто как бы среднего размера там я не знаю но сколько вот тогда должен быть плода весов для рабочих серверов то есть их должны быть тысячи то есть даже если там регистрация закрыта телефонными номерами можно купить 100 sim-карт зарегистрировать себе 100 настоящих аккаунтов и получить как бы все там основные було эти адресов их атаковать его сколько должно быть ip-адресов тогда камень но это зависит от каждого конкретного случая и опять же это ведь не панацея это не метод защиты от до доз это метод усложнить атакующему жизнь понятно что если атакующий хочет заморочиться то он заморочиться вопрос о том сколько времени у него на это уйдет а все это время ему нужно арендовать ресурсы с которых он на такую то есть стоимость атаки повышается наша задача здесь повысить стоимость атаки до того уровня когда она станет не выгодно атакующему спасибо спасибо за доклад здесь значит вопрос такой вы советуете разделять трафике по ресурсам то есть если грубые ремней сайт там приложение 1 приложение 2 приложения 3 то значит мы как бы делим пул адресов и как ты начал роутер тогда же как сейчас большое количество вариантов где у нас эксплуатация это что-то вроде паса как бы решает задачу строго обратно да то есть мы имеем там купер нету с которым кучу кодов обнаружат там имеется маленькое количество ip-адресов которые обслуживают большое количество сервиса всякая внутри балансировка как эти подходы совмещать но эти подходы они немножко разные так же как например разные подходы о построении дадут защиты сидена казалось бы там сидя ну хорошо чтобы было много-много точек присутствия и обеспечивать минимальные light in se а дадут защите хорошо чтобы было наоборот молоточек отказу точек присутствия большие каналы так далее также этот подход конечно не не слишком совместим с дадут защитой то есть если мы говорим о по оси то как минимум хорошо бы если бы за этим полосам нету клиентов которым нужно через те же и пи адреса которым обращаются к нему снаружи выходили в интернет это уже целый класс а так позволяет отбросить то есть мы полностью можем защититься от здесь и перев легше ну вообще не прикольно то есть таким образом если внутренний хасты будут ходить через какой-то отдельный канал это будет данных из моим клиентам всегда совет на который свдс коми и так далее а соответственно входящий трафик мы опять же раскидываем на большое количество кадре софы там можем группировать наверное папа диком чтобы похожа когда к нам любой хостинг провайдер обращается мы всегда просим если у вас отдельная сетка для vds ок если отдельная сетка для сайтов и так далее потому что это позволяет отбросить заранее многие типа так уменьшить риски что же спросить можно прошлый вопрос и продолжить его стандартные кейсы врут портят ну или scrat отправь или да потом брутфорса плагин captcha не помогает там скажем так вот на это 1000 адресов 10000 гарантируют агенты используют buy ковши пробивают вот rightly митинг тоже не помогает что там ещё можно делать то есть мы защищаемся от брутфорса выдвинут от брутфорса логина но что здесь делать здесь мы тоже можем паков captcha предложить думали ли пробивают смысле обходит но проходит но здесь мы можем предложить только какие-то методы статистического анализа то есть что человек зашел на сайт подвигал мышкой что он по этому сайту там походил и так далее то есть применить возможности как какого-то искусственного интеллекта чтобы принять решение о том пустить человека дальше или заблокировать при достижении там определенного числа запросов то здесь лет до петра канала gains заходит если он сразу сходу заходит на логин да здесь только усложнить ему путь до логина то есть если человек обходит нам все средства капчи и так далее это задача не самое тривиальная себя несколько вопросов и комментариев 1 значит по поводу разбрасывания прерываний в на linux вы серверах rk баланс имел ввиду mills обеда простая если яркий баланс то не используйте его просто никогда вообще забудьте про него affinity не очень сложная штука это скрипт на десять строчек и нужно писать иной раз жизни эрпа баланс и работает ужасно то есть ну просто несколько разные тоже натыкались вопрос по поводу слайда про блокировку сен ок и сегментов а сервер обновлять как ведь нужно гроша apt-get апдейты летом up today to obtain стол от сначала че ты еще идет dns запрос по и depay'a depay у нас тоже заблокирован ну ладно это черт с ним а потом идет открытие и соединения от добби анапского сервер обратно сидит на летит синапсы не не становится если есть такое требование что через тот же ip адрес на котором размещен какой-то наш сервис должен этот сервер выходить в интернет то конечно мы должны syn-ake разрешить заблокировать мы их не можем никак именно поэтому рекомендуется использовать одни и пи адреса для доступа клиентов к серверу снаружи другие пи адреса для каких-то своих нужд серверов а в чем в принципе проблем тайсен улетает сервера ну запомнить что он был до то есть записать соединение в tracking атакующий не угадает номер последовательности в сенаки в этом случае никакой проблемы нет а если человек подключен асимметрично и мы не видим его исходя считать сен года тогда как защищать на это вообще не рабочими c защиты почему вполне себе рабочий оказался защищать можно каким образом механизм есть механизмы такой вот вот если у нас нет ни не асимметрии то у нас есть и науки у нас есть син прокси значит неизвестно три варианта защиты если сенат летит мимо системы защита у каждого из них есть недостатки и в одном случае они приводят к проблемам у легитимных пользователей а в двух случаях они приходят приводить тому что такое чем просто необходимо немного более сложную технологию использовать и в принципе дефек сегмента проходит вот поэтому я и говорил о том что при асимметричной защите защита это вообще не панацея то есть даже syn flood можно сгенерировать таким образом что он будет обходить все фильтры которые нам проверяют тайм-аут и пропер язык какие-то еще хитрости но асимметричный метод подключения это у многих заказчиков к сожалению требования поэтому мы например своих клиентов защищаем как мы если клиент требует и симметричное подключение то мы делаем ему симметричное подключение с возможностью перед перевести его на симметричная без участия клиента то есть она путем анонсы ему дефолта например или еще какими-то способами если у него там несколько провайдеров я забыл в чем был основной вопрос вопрос был в симметрии в сенаки ладно я не буду микрофон долг занимать у меня только один последний вопрос а что там вот я просто к сожалению очень прослышал значит не давать атакующим что-то вот больше возможность для проверки в этот робот способности там рекомендовался семьи блокирует нет я как раз остановился на том что я не рекомендую блокировать и семьи я рекомендую позаботиться подумать об этом то есть каким образом мы можем от атакующего скрыть факт того что сервис там неработоспособен или плохо работает здесь мы речь идет о тех параметрах которые влияют на защищаемых какие-то практические конкретные случаи это уже об этом должен думать проектировщик вот спасибо спасибо за доклад а производились ли какие-то попытки создать некий универсальный искусственный интеллект обучить какую-то нейронную сеть которая покрывала бы если не сто-то 98 99 процентов всех атак но фильтрация всех атак каким то супер искусственным интеллектом это конечно же миф то есть конечно использовать эти методы необходимо в рамках комплекса но до того как передать запрос в нейронную сеть существует масса способов отделить ботов от не ботов которые чаще всего помогают и они более производительные но мини универсальные то есть нам приходится применять весь аппарат в комплексе тратить время ресурсы деньги на поддержку всего этого комплекса а если бы он был один ну-ка наверное это был бы идеальный вариант вот мы сейчас как раз такую систему разрабатываем что у нас отдельно без проектирования трафика будут разбираться ответы и запросы http и из этого всего безобразия будут выделяться очевидные боты они очевидны и случаю анализируется искусственным интеллектом то есть но прежде чем в нейронную сеть это как с любой нейронной сетью прежде чем в нейронную сеть передать данные их нужно сначала стандартизировать их нужно избавить от всего лишнего чтобы на входах нейронной сети были именно были именно те сведения которые нужны ты не равны сити но вообще успешно идет такая разработка она конец света в конце тоннеля вообще виден или это реально миф и даже не стоит заморачиваться нет это не то не то чтобы миф просто я говорю о том что нейросеть она не в состоянии решить все задачи в данном случае свет в конце тунеля виден первый релиз будет вот в январе у нас а данных во многом не загрузили ведь но для того чтобы ее обучить необходимо очень много статистической информации но вот у нас несколько сотен сайтов которые находятся мы сейчас логе все перевели в ластик и там их как раз анализируем для этих целей понятно спасибо большое спасибо просто спасибо очень интересно быстрый вопрос как отличается защита от dos а на каких нибудь там heroku google к пьют клауд и таких платформах а сервис вы имеете ввиду защита там типа от google для сайтов или канут когда ты лишь сервисы они работают на инфраструктуре google то есть мы ее никак не руководим в том что как на все устроим то есть они сами как это делают вот и насколько они хорошо получается если не получается то как делать самим на их основе и амазонку лямды там наверно да где-нибудь вы знаете мне не приходилось видеть как именно эти сервисы работают но мне приходилось видеть заказчиков которые с этими сервисами приходят и говорят что нам нужна защита потому что я думаю что защита там обеспечивается до какого-то уровня а потом это все становится невыгодно не самому облачному сервису не клиенту который платит за ресурсы на которых это там-то dos-атак будет обрабатываться в случае там с google и мама зонам очевидно что это будет фильтрация только для сайтов сеть уже не защитишь там тисе пи приложение уже под вопросом и так далее ну вот таких цифр у меня к сожалению нет но я могу сказать сколько предлагали клиенту вот которого пришлось там на 32 части побить интернет сколько ему предлагали в качестве откупиться 5000 евро не отставали две недели там команда была из нескольких докеров круглосуточно здравствует у меня ну это вопрос как бы в продолжении вот предыдущего это хотелось бы узнать в числах вот по реальным атакам сколько бывает с тем сколько запросов в секунду но там это ты себе атакам какая пропускная способность и вообще вот и мин именно по тише пини что почти теперь или как htp htp is not какие-нибудь это примеры реальных а так сколько это был числа потому что как бы вот все говорилось а числа за последние пару недель если я вспомню то сейчас очень большая головная боль это такие ауте but no eto мити помирает там и так далее когда кучу реальных ботов атакуют их всех нужно проверить соединение проверить что они дальше делают в этом соединении за последние две недели вот у нас была атака 40 тысяч ботов 60 тысяч ботов по мегабит им там немного там даже нет смысла считать мегабит и здесь имеет смысл считать именно бота и число request of с них что касается тисе пи flow да здесь сложно там как нас классифицирует там то что средняя так опять гигабит 25 гигабит на разных клиентов по разному например у нас есть клиенты там на ближнем востоке у которых канал интернета там сто-двести 500 мегабит им достаточно влить там те же самые 100 мегабит у них уже переполнится канал интернету с учетом того что он используется всегда полностью и серьезные проблемы возникнут у пользователей и на таких клиентов там средний размер атаки 67 гигабит есть клиенты которые размещены у нас и на них там атаки прилетают из 150 гигабит и 200 гигабит то есть здесь здесь ведь нужно говорить о типе атаки если это тисе пи или и т.п. амплификация то атаки обычно очень мощные по размеру но их легче фильтровать если там это сена так это она по размеру всегда меньше фильтровать ее сложнее потому что требуется больше вычислительных ресурсов вот именно поэтому мы например в отличие от многих других защитников предлагаем даже на самом минимальному базовом тарифы защиту от любого объема а так из ограничений потому что мы считаем что клиент никогда не знает какая атака на него прилетит ну примерно понятно спасибо"
}