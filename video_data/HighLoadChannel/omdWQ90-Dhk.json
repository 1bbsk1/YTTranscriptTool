{
  "video_id": "omdWQ90-Dhk",
  "channel": "HighLoadChannel",
  "title": "Чистая архитектура с VIPER / Сергей Крапивенский (Rambler&Co)",
  "views": 5822,
  "duration": 2525,
  "published": "2017-05-17T12:42:54-07:00",
  "text": "да всем привет я занимаюсь разработкой в рамблере сегодня поговорим о чистой архитектуре что это такое и как этого добиться помощь подхода который называется вайпер я хоть и про ios рассказы занимаюсь я вас в принципе подход для android применим для windows phone а то есть нас с ребят из других отделов своих проектах его применяли давайте для начала определимся чисто архитектуры что это всё такое мне кажется здесь чтобы определиться с терминами проще начать от противного и понять что такое грязное с ней к сожалению мы почти все знакомые все работали с их проектах на мой взгляд грязной архитектура похоже на квартиры горячего человека и выглядят примерно вот так она вот я собью жил один с девушкой наверно не такой квартиры также бы выглядела здесь проблемам видны может не вооруженным глазом все вещи на хоть и не на своих местах все свалено в одну кучу одежда и до техника все в одной куче свалена на куче на на кухне гора id tech долго в виде немытой посуды и здесь что-то найти нереально нужно потратить кучу времени чтобы что-то внести хоть малейшие изменения передвинуть шкаф нужно забрать полкомнаты вообще что-то воняет или чем понятно где и в таких условиях жить трудно и вообще ничем приятно но зачастую на своих проектах мы именно так и живём в таком виде на носу находится это ничем прикольно так грязной архитектуры такие у нее основные свойства на мой взгляд во первых это классы классы по 2000 строк в которых намешано десяток разных задач которые между собой вообще часто не очень связано это также называют слабая связанность то есть логики в классе очень много на на другом не особо каллирель методов друг другу не особо связано их можно разбить на 10 классов будет намного лучше вторая проблема компонента системы сильно друг с другом связаны то есть класса друг друга прорастают между ними куча связей которых в принципе можно избежать и сложно их разделитесь нам вдруг нужная логику перенести из 1 класс в другой зато довольно сложно потому что все же друг друга проросло ее ничем понятно как это распутывать исходя из этих двух пунктов также трудно искать проблемы какие-то в коде то есть во что-то сломалось и совершенно не факт что вы четко можете локализовать проблему в одном в одной части кода что то поменять в другой отвалилась непонятно почему вносить изменения по этой же причине не трудно то есть уже начинаете paranoid они отвалятся ли что-то в этом странном проекции если эти штуки поменяю и скорее всего отвалятся на самом деле тестами покрыт такие проекты невозможно то есть если у вас классно 2000 строк то чтобы покрыть это тестами нужно месяц писать с кейсом 10 тысяч строк и не факт что в это вам поможет вообще мораль разработчиками на таких проектах часто падает с этим работать неприятно постоянная головная боль и рано или поздно наступает момент когда хочется все снести и начать писать заново я когда только пошел в рамбер открытку это старый проектной поддержку там вот такой комментарий donc час такое такой оставляет людей в принципе настроение такие очень часто возникают и действительно такие проекты представляет собой клубок костылей проблемам которые непонятно как распутывать часто все работает вопреки логике то есть как там был такой случай что мы не знакомы и далее к проекту поддержка выбор сели там несколько fitch подправить в быстренько очень надо я начал работать вижу там посреди кода жирно retain цикл просто память освобождается это сын очевидно что это плохо и и поправил радостно запускаю программу все разваливается просто общем все крыши цените не работает оказалось что собственно все управление памяти в программе держалась на этом retain цикле как только его поменял все про стал работать вот я быстренько собрал заново вообще верну как было между отказался потому что он головная боль и чем большая и мне очень хотелось с этим всем иметь дело вот из грязно как текстура в основном не очень хорошо что такое чистое ночь с архитектурой это собственно у нее нет всех этих недостатков то есть наши компоненты системы простые четко понятно какой компонент за что отвечает они друг с другом слабо связаны при необходимости один компонент реализация компонента можно поменять поменять на другую или подменить на мог для тестирования намного легче все это покрывать тестами вносить изменения ну и в принципе проще понимать сложность меньше вроде как все структурированного логично понимать проще и все-таки большинство известных мне разработчиков страницы и миг чистой архитектуре принцип не работает приятнее вот есть разные варианты как это делать давайте посмотрим что у нас в ios вообще изначально когда начинающий разработчик приходит твой рост считается какие гайды он видит упоминание только архитектуры элвисе model-view-controller и вроде на бумаге все выглядит неплохо но в тех же самых гайдах обычно ничего не говорят о соли драки из всех этих аббревиатурах непонятных которые говорят о том как разбивай задачи между разными классами в коде да об этом обычно не говорится и обычно поначалу получается примерно вот так то есть нас огромный жирный viewcontroller в котором вся логика наброс на работа сети работа с базы все что угодно view при этом с ним на мир то связано пробраться только ему вызовы и практически ничего само по себе не делает вот и получается плохо то есть получается не поддерживаемый код и пример кода от apple тоже в этом не особо помогает то есть там людям обычно цель у них показать как работает а длинный фреймворк кан хи тертого работа со звуком работа с видео узкоспециализированные да не показывал как с ним работать но часто весь код тоже жертва в контроллере разработчики на это смотрит и дальше этой день нет не продвигается и благодаря этому когда мы слышим висим и часто нас первый день мы семью контроллер они модулей контроллер такая сложилась попытаться не очень не принципе все понимают что надо от этого уходить надо контроллер разбивает на более мелкие классы по каким-то правилам и часто отваливается в отдельных архитектуры например тот же envy м и вайпер в принципе тоже является одним из таких подходов как разбивать контроллер на более мелкие части давайте немного об истории как все появилось все началось того что 2012 году роберт мартин который также известен как анкл боб написал статью так называлась клин архитектор части архитектура он сформулировал там свои деньги свои подходы к тому как должна выглядеть архитектура приложения годом позже ребята из компании мечел мобайл стали думать как нам улучшить качество unit тестов на нашем проекте их не очень устраивало думали думали решили что надо общее архитектуру другую приделать архитектура что-то новое придумать и на основе собственно статьи делишки баба они продумали вайпер попробовали у себя стали внедрять продакшен и в четырнадцатом году написали об этом большую статью в архитектурный выпуск журнала обсе а его из кто помнит был такой классный журнал таким образом вайпера стала узнавать больше народу в последующих 415 году люди пробовали в нейтрали свои проекты что-то меняли появилось еще несколько статей о том а впечатлениях людей по работе с вайпером в конце концов докатился до нас в прошлом году мы тоже думаю что нам нужно поменять архитектуру не все устраивало и на небольшом хакатоне локальном ребята проверили что такое вайпер как с ним работать понравилось и мы стали внедрять в продакшн и постепенно сейчас нас почти все проекты в продакшене работают на вейперы окей об истории поговорили что собственность идеи идея вайпер в принципе диана многих других архитектур как вообще изначально разбить приложение на какие-то части любое приложение можно разбить на блоке с однотипной структурой таким образом разбивать по user story под этой штукой но есть разные определения понимаю изо рта рим простым языком описывает поведение приложения под проще на примере показать есть приложение instagram всем известный стартовый экран лента фотографий очень просто сказать словами что она делает она просто отображает последнем фото друзей и в принципе от известных задача там при необходимости можно перейти на другие истории комментарии к фото или там личное сообщение экран лайков вы с играми тоже все очень просто список лайков которые краше фото оставили у него тоже диснея задача это простые примеры где на одном экране одно поведение бывает более сложный пример экран профиля здесь вот сразу несколько историй первое это лента фотографий вторая это табор который это лента переключает в разные режимы сетка список на карте фотки и третье это панель с информацией о пользователе и работе с вайпер такие вот поведения и software мы называем модулями и любое приложение развивается на какой-то набор таких модулей и если подумать каждый модуль делать на мерно одно и то же он не примерно один и тот же круг задач во первых нужно получить какие-то данные чтобы их отобразить на экране что ты с ними сделал сначала нужно данный получить из сети или из базы неважно а потом нужно эти данные преобразовать в какой-то вид чтобы на экране отобразить 3 задача рогер уютно действие пользователем кнопки scroll и жесты все что угодно и 4 переходить на другие модули если есть в этом необходимость если как задачками одинаков значит можно разбить модуль на несколько частей которые что-то делают какие-то свои задачи и при работе с вайпер мода развивается на пять частей в классическом понимании view презента interact арвейр фрейм и entity по каждой из частей час поподробнее первая часть view вайпер эта штука которая в отличии от viewcontroller вам вести никакой логики не содержат задача в you просто отобразить данные на экране которые ему другие части модуля передали и информировать где части модуля о том что пользователь совершать какие-то действия логика содержится в интерактиве то есть я когда прогонял доклад я использовал термин бизнес-логика меня закидали тапками ну скажем что в интернет трафика логика работы с данными находится то есть там получение сети с базы как обработка вот это интер actor третья часть модели презента он является связующим звеном всего модуля он подготавливает данные для того чтобы передать их в юшки для отображения и она обрабатывает сигналы от видео о том что пользователь какие-то действия совершил информирует варфрейм или презент или интер actor том что нужно что-то с ними сделать четвертый компонент в классической значит виктория варфрейм он сразу две задачи выполняет отвечая за навигацию этой за переходы между экранами и он инициализирует все компоненты модулей представлять зависимости между ними мы пятая часть не то чтобы начать модуля на к бы везде фигурирует но самого упомянуть ей это and in then то есть модельные объекта опять же не вайпер тупые логики нет они просто содержит какой-то набор свойств вот такая начальной идея моды разбивается на пять частей мы с этим поработали попробуй продакшене там читинской месяцев у нас накопилось набор таких штук которые нам нечем понравились или который мы поменяли для более удобной работы всего их в целом 5 сейчас я в целом вся пункта назову потом покажем пункта чуть подробнее во-первых мы разделили варфрейм дополнительно на два других объекта во вторых мы добавили под interact арам дополнительный слой объектов которые называются сервисами затем в.ю. у нас тоже является ни одним объектом и целом слоем объектов которые выполняют разные задачи мой формализовали переходы между модулями такая штука который принципе никто не говорит хотя как переходить между модулями как пробрасывать данные вообще непонятно изначальной выбери ну и 5 мы написали тузу которая помогает генерить каркас модулей уменьшит время которое разработчика тратит на рутинную работу давайте покажем пункта поподробнее во-первых разделили в oriflame но эта штука которая по определению принципу десной ответственности не удовлетворяет потому что делает еще на две разные задачи приходит между краном и собирает модуль не очень хорошо соответственно мы разделили на два компонента один называется роутер 2 называется assembly роутер отвечает только за навигацию переходы между экранами там модальные push ее волос и так далее это делают роутер компонент assembly он отвечает за сборку модуля когда вы работаете с классовым уже класса создать простоять между ними зависимости от assembly именно этим занимается это очень хорошее место для того чтобы использовать дпс injection и мы используем для этого тайфун фреймворк очень полезно фреймворк который позволяет практически автоматически собираетесь вообще всю структуру проекта прям на лету более подробно можно них на гитхабе почитайте не буду сейчас зацикливаться 2 что мы сделали добавили слой сервисов то есть вот вся логика работы с данным или вся бизнес-логика которые в интер акторы находится звучит страшно понятно это очень много работы и наверно можете как-то разделяете эту задачу между более мелкими объектами мы договорились что мы их не будем называть сервисами это слой не джин трактора то есть в антрактах вставляется различные сервисы нужному для работы вот и 1 2 пункт открою понятно что логику часто нужно 1 тоже переиспользовать на нескольких экранах допустим у вас есть как логика по работе со списком новостей и вас может быть несколько экранов лент в общем на низких экранах одна и та же логика должна быть использована соответственно есть использование сервисов позволяет это сделать один и тот же сервисов может фиксироваться в несколько разных интер акторов нескольких модулей мы говорили что один сервис работы с одним типом сущности допустим сервис новостей получает список новостей с брендов каким-то фильтром открывается более подробная информация по конкретно новость атомах кэширует и так далее то же самое может быть для сообщения там отправка получение удаления и так далее вот ну и дальше у сервисов может быть другие зависимости могут быть там api клиент реки нить кандаты так далее но это уже детали реализации дальше view в юшка и в вайпер чаще всего является viewcontroller у него опять же ты миссии довольно тяжелое наследие много всяких штук которые там исторически находится в принципе их можно носить в отдельные объекты например работа с коллекциями у этой божьего и collection view apple даже специальный класса сделал отдельный по протоколу datasource делегат чтобы их выносить в отдельные в отдельные объекты чтобы это не джалла ва viewcontroller и то есть в одесских быть не должно спокойно можно носить это в отдельный объект плюс бывает какой-нибудь нас сложно лайалл сложно расположение вьюшек на экране или какие-то сложные анимации их тоже совершенно не обязательно держать в классе чтобы он распухал можно вы не выносить в отдельный объект но при этом эта задача не бизнес-логики не навигации это именно то поражение данных то есть куда их в презентован тракторах не засунешь поэтому мы договорились что у нас в you is объекты превращается в слой то есть viewcontroller у неё какие-то и зависимости аниматоры лая от менеджер и прочие штуки которые именно на слой view находится дальше переходы между модулями как я упомянул об этом никто не говорит то есть читаешь вайпер роликов запрос написано начинаешь работать решено непонятно как уже данный передавать как это все работает мы договорились а кстати не сказал что нас все компоненты модуля закрыта протоколом этом на вход на выход интерфейс описаны в отдельных протоколах и собственный класс этим протоколом то есть допустим у превенторы interact racing тут протокол в котором мы с ним общается президента и а вот путь по которым он возвращает ризотто работы тоже в презентом вот мы такие же протоколу завели для модуля то есть модулей с входной протокол модуль input в него продаются какие-то данные которые необходимы ли то чтобы модуль собственно сконфигурировать есть модули от пут это интерфейс по которого модуль сообщает результатах своей работы и эти протоколы реализуют превенторы соответствующих модулей ну допустим такой пример есть модуль а модель b модель а это опять же лента новостей модуль b это фильтр какие-то катего категории этих новостей политика спорт в мире все такое мы переходим в модуль фильтров выбираем там три категории и лента новостей хочется узнать о нашем выборе она хочет по результату наша выбора фильтровать новости получить новый список то есть как это работает роутер модуля ленты передает в презента модели b данные необходимые для конфигурации модуль об этом наш модуль фильтров работает учета делаем выбрали фильтра и результат работы возвращается в презента модули а predator сразу может их обработать что-то сделать с этим и последняя начеку регенерация работе с вайпер понятно нужно кучу классов создать то есть на каждый модуль у нас есть 5 частей там еще есть протоколы есть тесты на каждый класс очень много классов нужно создать файлов и довольно он его все это при этом каркас модули принципе одна типе но достаточно мало отличается руками создавать как я сказал уже уныло когда программисту он его создавать руками он пишет скрипт чтобы все за него делал автоматически собственно мы это сделали мы написали наруби штука который называется день рамбо анапа шаблона вам может создавать каркас класса с какими-то свойствами и методами вот все это лежит у нас на гитхабе спонсорство можно использовать не только для вайпер и в принципе в любой и ситуация какая-то картина работу нужно где мтс создается много однотипных классов и не раба можно спокойно использовать вот так эти штуки мы поменяли у нас получилась такая схема чуть более сложная чем было изначально но на мой взгляд она более простая не более полно отражает что собственно происходит по работе с вайпер вот а не смотря на то что я вот это все рассказал описал какие-то пункты надеюсь что кто-нибудь кто vaper не пробовал после моего доклада пишется посмотрите что такое вот но когда начинаешь работать с равно сначала не знаешь куда бежать вроде все описано но начать сложно и ты похож на джона траволта который ищет ларек с шаурмой в москве то есть ты не знаешь куда идти с чего начинать и как вообще работать с этим вот чтобы может быть чуть упростить задачу я решил показать славой пир на примере реального приложения расположение фишер рестораны эту даже там список лучших приложений прошлого года включил стороны все очень круто позволяет собственно по определенным категориям фильтровать заведение в москве выбирайте понравившийся ресторан смотреть по нему информация там бронировать столики и все такое и вот есть три краны когда мы закатываем приложением попадаем список категорий ресторанов там где пить пиво итальянский ресторан и steakhouse и так далее выбрали категорию появляется список ресторанов в этой категории выбираем ресторан появляется карточка место я что-то можно посмотреть более подробно или что-то сделать вот этот должны большое видео добавил чтобы было понятно как то работает ну ничего сложный вопрос две таблицы 2 ты был ю.и. экран там с карточками принципе фло понятен как-то с вайпером работает допустим мы выбрали хоть хотя посмотреть пивные бары нажали на категории пивные бары нас срабатывает сигвей вот этой штукой фигуре который силе сибуя мы называем коса сигвей читается вот срабатывает сигвей открывается в контроллер модуля ресторана в конкретной категории вот когда нас арбата ты тот самый сигвей под капотом у сториборды дергается метод места шейд viewcontroller создается в контроллер и отдается качестве результата работы этого метода вот так как мы но то есть при этом генерит только в контроллер у этого модуля живу должны быть еще там президент are in трактор как их создавать община можно видеть laude создавать но это довольно уныло так как мы используем тайфун то магическим образом у нас здесь подключается места на этапе созданию сториборды was simply описано собственно что у контроллера и зависимость президента рф там создается президент ур президента описано зависимость а роутер интер actor и общем так по цепочке когда срабатывает всего я у нас весь модуль инициализируется все зависимости созданы все зависимости проставлены сконфигурированы все готово к работе квоты стартовое положение у нас слева модуль ресторанов категории справа модуль одного ресторана начальное положение мы находимся в превенторы первого модуля и на вход ему передали какой-то айди категории мы выбрали пивные бары о недопустимой d1 вот этот одесский к передана в президента что делать дальше при этом презента понимаешь что нужно получить какие-то данные чтобы отобразить на экране данные to interact or его работа значит predator говорит интер актара дай-ка мне рестораны в этой категории с таким тадич ником вот in трактор понимает что она нужна в ресторан и получить значит от сервиса ресторанов просят сервис ресторанов дай-ка мне ресторан и собственно все раз как так там получает из бэг-энда неважно как в результате допустим мы получили массив от адских объектов сохранили service in трактору там через блок comply шин возвращает результат вот здесь мы у себя договорились в рампе что в принципе президенту раутеру вьюшки совершенно не обязательно значит москва дата работаем или там с кем-то другим фреймворком эта деталь а реализация поэтому здесь неплохо бы перевести рестораны в тон соплей но у нас обжиг простые наборы свойств и дальше уже работать модуля только с ними interact а приводит значит все это в панса говорит президенту все я загрузил рестораны презента понимаешь что нужно их отобразить говорит в юшки отобразим нее ресторан и там дальше опять же уайта будет гиллиган datasource не важно как то он отобразил затем пользователь нажимает на конкретный ресторан по которому хочет посмотреть информацию как мы помним во вью логики нет поэтому view просто сообщает презент ура user нажал на ресторан с таким тадич ником что-нибудь сделать с этим ведь интро понимает окей нужно открыть отдельный кран другому или и продает управление роутера открой меня кран с таким-то экран ресторан с таким-то dish ником роутер через модуль input соседнего модули передает типа сконфигурировать вот этим едешь не cam-модуль ресторана создан и дальше вся такая же цепочка опять мы получаем данные winter акторы интер actor получает их у сервиса все это идет обратно до президента ра и президента передает информацию о ресторане для отображения во вью вот то есть мы видим довольно много переходов много объектов но при этом каждый из этих классов очень маленький и очень понятно что в нем происходит там мало логики не сразу понятно где что искать структура более читабельный более логично чем не знаю с тем же им вести о давайте посмотрим на определение числа архитектуры которые я вначале как доклада дал и посмотрим какой поэтому соответствует ну разбить логику на более мелкие простые компоненты чем с вайпером на этом можно довольно сложно поэтому здесь будет плюс класс очень маленький обязанность у них понятны все закрыто протоколами поэтому заменить натурализацию на другую принципе довольно легко заменить на море тоже все легко слабая связанность тоже плюс ну так как все легко заменить ее класса небольшие то покрыт с нами тоже просто обычно с кейси не очень большие здесь тоже плюс насчет легкости изменение есть спорные такие моменты с одной стороны изменений вносить легко потому что мы понимаем что если это логика и to interact or отображения это в ее понятны как локализовать но зачастую если это там изменение многое или она достаточно обширную она затрагивает много классов то есть нужно поменять все классы нужно поменять интерфейсы нужно поменять с кейсы в общем в шип ширину много изменений если у вас там стартап psyko founder выбегает карта час коридор проверяет как это работает потом говорить давайте все поменяем то скорее всего вы парни очень подойдет потому что ну менять будьте до вот это проект чуть более структурированный большой и как-то фло задача описан то вносить изменения с вайпером действительно проще здесь я поставлю плюс-минус и простота понимания когда к нам приходят новые разработчики у них там первитина ломается мозг конечно но в принципе я думаю что так с любой архитектуры на какой бы проект вы не прошли там есть свои какие-то правила своя идея вам это нужно вникать в другой стороны для нас есть очень большой плюс потому что у нас люди между проектами могут приходить и за счет того что во всех проектах 1 этажа архитектура человек понимает как все работает и если вам не знаю вас дедлайны там кто-то заболел кто-то ушел нужен срочный по реке на человека на другой проект он приключается и через день может писать любой сложности фичи он понимает что где искать как все работает в этом очень большой плюс вот сам я считаю что понимать довольно просто что происходит проекте нам нравится и мы считаем что нам есть чем поделиться и есть какой-то опыт передать чтобы он коммунист помог у нас есть разные up in собственные штуки полезные во первых есть трамблер конференция это реальное приложение написано на вайпер на нем можно посмотреть наши подходы как все это работает в реальности как я уже сказал я зги не рамбо card generator наруби он развивается тоже не народ это пишет contributed есть набор полезных утилит библиотеки квакер макфлури который мы используем в ежедневной работе это какие-то небольшие халтуры для вайпера и все что мы знаем мы заносим в книгу вайпер это такой набор статей там более подробно расписано всякие темные моменты то есть я за одну презентацию понятно не расскажу все что вайпер происходит все сложности но все что мы знаем мы стараемся вносить вот она почти готовым наверно даже электронной книгой это и затем когда нибудь там можно почерпнуть много наших ну не знаю много вещей с которыми мы столкнулись как мы их решали наше решение все это в открытый доступ для всего концертная рады что если кто не к 3 beauty участвует дает фидбэк все это помогает нам развивать вайпер и надеемся что кому-то помогать еще кто с этим пытается работать вот на этом у меня все спасибо спасибо за доклад меня зовут иван из-за vitara у меня два вопроса первый вопрос вот где вы храните состояние в каких слоях то есть хранители у состояния в президента ри либо вы храните данные на прогрессируйте в интерактиве во вью вы храните состояние для отображения нот расскажите об этом немного так получает что в президенты вас на нам то есть мы стараемся чтобы многое табу локализована в одном объекте и сама хранится допустим в президенты лего view это но смотрю много уже геморроя вот основном лежит в президенты да да но если обратиться к вот этой вот статье классической дата там пересекая границы между слоями обычно данные преобразуются например у нас есть там core датская модель но для отображения надо с ним всего два поля до поэтому во вью там передавать например всю модель неэффективно то есть вы хранить всю модель в президенты потом преобразуясь в более легкие модели для view или каким образом ну да хорошо вопрос на самом деле по-разному то есть следовать вот этой теме что постоянно в президенты переводить модели из одной в другую нам кажется немного избыточная то есть получается 300 моделей там cordata под каким японцы и еще презентация это все нужно поддерживать и далеко не всегда это нужно поэтому если там висит на модели очень толстая нужна пара свойств мы как-то преобразуем этот презент но наверное основной потому что мог просто видно из города то в интер акторы перевели в эти панса объект обычной их дальше уже передаем с ними работы понятно спасибо и второй вопрос более интересный вот возьмем для примера приложение инстаграм до с бесконечно очень длинной лентой состоящий из довольно сложных объектов то есть один вот это там чужой пост он состоит из явно там многих элементов с одной стороны мы хотим использовать к лешему view с другой стороны мы хотим использовать маленькие модули да как сам модуль и вот вы у вас есть опыт такого использования когда вы используете внутри одного collection view делать какой-то рию с этих сам модуль и что-то такое brass мы об этом думаем ничего не ели знали ну да лично у меня нет но вообще в рандира есть да то есть бывают штуки где в vici ищейка является отдельным модулям и у нее может быть даже внутренние щеки это под модули вот это вот это бывает он неприятно но достать мне приходится иметь дело нас есть дополнительно еще библиотека который позволяет то есть собирать разнородную таблиц там в таблице 10 разных видов ячеек вот она позволяет это все собрать повеселее и не стою можете корме не знаю поправить и поправят но в книге вай проезд как кажется пример даже как мы делаем модули с отдельными ячейками как-то все использовать да вообще конкретный я как раз таки пилил модуль ячейки в них действительно есть отдельные совушки в книге вайпер описанными на общий подход как это примерно должно работать но без конкретики но если прям вкратце сказать мы тоже просто немного доработали тайфун чтобы он мог на элиту как ростки во время реза вещички инжектить нужные модули все это вроде завелось работает все отлично и не лагает спасибо за доклад меня зовут константин мобила и вопрос такой я честно говоря android-разработчик но проблема который вы описывали они у нас встречаются и вот у меня вопрос такой когда у вас один экран до его президента запускает второй экран и ждет от него какого-то фидбека да там вот как вы искали фильтры включает или еще что-то а предположим и соответственно мы переключились на другой модуль у нас работает другой президент ardo a 1 ждет правильная понимает него данных в ответ этот экран свою очередь может перейти к следующему к следующему и так далее до бесконечности и получается что они все будут друг друга ждать все висеть до в андроиде с этим сложнее потому что если the activity систему возьмет и может вычистить их вот и как как это работает у вас и как вот эту связь модули которые ждут друг от друга ответа она реализован android более нет но тут у нас кого все просто надо стандартный штука допустим есть даже работой появились и у тебя все равно будет стык контроллеров там один экран открылся с другого из него открылся третий это всегда висит в памяти то есть на то что ждет но просто висит там и но такого то вверх и до дополнительного за счет того что там не просто viewcontroller у него еще куча зависимостей то что он там что-то ждет новый архат от этого нет но не данные же в нем хранятся правильно который занимает память то есть вот у вас на первом экране там список категорий да эти категории соответствует хранится понимает то что это небольшие затраты памяти до а на втором экране у нас там список уже конкретных заведений да там возможно и сидят кашель и не каких-то картинок и они у нас подгружены да на них ссылки будет висеть тоже память займет потом следующий экран sky какой-то определенной функции ну да ну паспорт на табло живой перский вопрос во снах архитектуры то есть если уж так я что-то чувствую что что-то как и что-то не так там занимается что нога поймите что то начинает лагать это должны читать об этом думать знаю там при выходе с экрана ты как-то дро пушки это данные потом как-то состояние может восстановить просто данный кран вернулся так в обычной жизни это очень редко нужен на самом деле здравствуйте меня зовут сергей компании конкур у меня такой вопрос на первый взгляд что вам аж code generator понадобился по уму офигенно over инжиниринг чем это принципиально лучше чем мвн со слоем сервисов и слоем инфраструктуры то есть я приветствую вот эта идея сервисов инфраструктура абстракция cordata но вот то что там нарисовано это куча классов которых нужно аж генерит криптон вруби чем это лучше чем им вильям простой вы рассматривали мем вблизи вы пробовали им пользоваться и что вот тут вас привлекло так что вам не понравилось мы вели сервисами то сколько вы модифицировали дай основную идею по что идея согласен нам очень странно это скопировать бизнес-логику в зависимость от юзер стори этой рискованной то есть там будет очень много публикации потом в итоге не поддерживаем а все-таки вот сервис инфраструктура имбирём что с ней не так по вашему но кто-то не говорить мы которого потому что в продакшене имеем лишь не использовал подход такой не читал но осуждаю ну потому что я смотрел разные реализация мимо я не видел каких-то полчаса снова массивный в модель как по мне то есть ее нужно добавится разделять тоже на какие-то более мелкие объекты там ушной капитализация видела там модели тоже здорово и в них много логики и хотя хочется их разбить напарницами но вот именно вся эта логика нам потом выносится в слой сервиса поскольку вы это сделали по сути дела ваши view model она вот и делает то что она готовит данные для уюта и связаны делать какой-то рафтинг и как-то понимает росстат приложение и плюс тайфун или там свифт inject занимается вот так вот там вот тоже самое все нам и вся логика нас урок слой сервисов ну понятно а второй вопрос у меня вы сказать что вы тайфун доработали а вы его формуле используется внутри времена вот мне интересно практика когда вы берете большой open source проект иван там что то не устраивает как вот вы это решаете вы фыркаете поддерживайте сами или вы народ пара билетов пури квестом прям вот мастер проекта зависит у нас бывали какие-то либо которых древние приходится использовать for cash и сам делаешь на конкретно с айфоном то есть нас егор об этом contributor тайфуна активно у него пишет т.е. здесь мои именно пишем в проекты с мы дорабатываем либо который лежит живая и собственно его активно этим занимаются у нас да здравствуйте хотелось задать вопрос ну вообще мы вайпер используемся достаточно положительное отзвоню но основная проблема это как раз таки сложный модуль то есть вот основные вопросы как раз возникает по ним можно например открыть nude либо профиль в инстаграме страничку либо с афиши ресторанов тот же экран ресторанов вот можно как в подробнее рассказать как вообще то есть я так понимаю есть какая-то ну есть данные которое получается от сервисов да и как вот они потом раскидываются между модулями или сколько например этот экран сколько в нем модулей как вот какие все вопросы задавать уделить на модуль на самом деле опять же когда мы прогоняли доклад были пожелания может показать как работают несколько модулей вместе вот я сначала подумал да надо сделать потом понял что очень часто все сводится к очень простой и теме что есть отдельный модуль контейнер в которой вставлю допустим здесь какая то у нас есть то бардов таборе есть какой-то модуль контейнер профиля а в контейнер вставляется вот эти вот ребята провел панель с информацией табор и ленты они часто друг друга вообще не особо связано а если нужно данные перекинуть из одного в другой то допустим не знаю табор сообщает контейнеру что у меня на жаре на такую-то кнопочку сделать что-нибудь с этим контейнер это получает и сумму 2 зависимости от ленте фотографии говорит там перерисую как то переделать то есть очень часто ну практически всегда это работать с какой-то контейнер более спортлото сбывать кита редки более сложный случай к там в таблице например все замешано тогда уже можно ли протокола чтобы между модулями между под модулем кита связи прокидывает бывает но сам контейнер то есть в основном такие кран как раз таки реализуются в качестве сложных модуля то есть состоящих из нескольких модулей по сути тоже самое что вот как чад сейчас вы контроллер есть до стандартные боюсь и контейнеры и номер а также на самом деле почти всегда работает этого достаточно но вопрос вот просто возникают как раз таки именно как например с таблицы работать и при этом бывает перри используемые модули которые хочется ну как раз таки используют для нескольких разных моделей вот и получается чтобы нормально переиспользовать приходится отказываться от типизации используйте айди либо ну в лучшем случае по протоколах как-то закрывать эти модели как тут вообще в таких случаях может что-то посоветуете и то есть чтобы для примера но это немного другой случай например вот есть каталог фильтров да ну вот фильтра модулю фильтра по сути его можно спокойно переиспользовать вот но разные фильтры по сути это же таблица ну сам модуль вот и просто мульти select a вот и как например вот этот модуль можно перес пользовать на разных экранах данный легко то есть у него допустим в том же модульный пути не может быть метод сконфигурируйте с таким-то набором фильтров с массивом а в модуль all пути у него метод типа нажал такой-то фильтр и этот модуль как не знаю как embed как тот же контейнер может ставиться на любой экран где это нужно смогут так что это испортит используем просто убедиться на вход она передается данный которая должны отобразить уже то есть вот на вход передается массив фильтров которые нужно отобразить этом отдельных объектов да понятно его кто должен создавать то есть по сути in трактор предыдущего модулей или как ну да понятно а вот опять же вопрос про перри использование ячеек таблицы это частой фоне как бы в основной ветки есть или это какая-то эксперементальная функция значит александр друзь нет в основную ветку это не сливали по сути это такой костыль окна до нему сам который мы используем для работы с таблицами то есть nimbus этот обычный фреймворк по сути он предоставляет какую-то ты был в you модель это просто перечисление view модели ячеек и там внутри реализации этих datasource ных методов и вот у нас есть кастомные то ты был в модель которая под капотом в нужном месте инжектит а в ячейке все нужные зависимости также примерно как вот в тайфун loaded view сделано внутри в тайфун 3 борде то есть нет мастер мы это не сливали я не знаю может быть потом то есть я не уверен насколько там нужно потому что это такое вич больше костыль который под наши проекты подходит здесь скорее это ну каждый сам может для себя в принципе допилить и"
}