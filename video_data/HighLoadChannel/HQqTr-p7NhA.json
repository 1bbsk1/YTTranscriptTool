{
  "video_id": "HQqTr-p7NhA",
  "channel": "HighLoadChannel",
  "title": "Ранжирование объявлений на основе машинного обучения и ElasticSearch / Павел Тарасов (ЦИАН)",
  "views": 3049,
  "duration": 2340,
  "published": "2019-05-15T04:57:58-07:00",
  "text": "немножко о том кто мы так и кто такой сам комп в москве и питере знают это такой marketplace для недвижимости мы лидеру москве и питере в регионах пока выходим еще не активны довольно успешно соответственно нас реально много данных у нас миллион уников в день на сайте у нас два с половиной миллиона объявлений и при этом у нас довольно крутая инфраструктурой крутая разработка можно себе позволить делать разные штуки у нас больше так есть разработчиков и при этом инфраструктуру на микро сервисах я все что со сбором данных это hadoop и spark соответственно очень быстрой разработки работа большими да я соответственно руку это дело машин обучение ну а сейчас расскажу о том как раз как мы делали задачу ранжируем зачем вообще нам так какая у нас есть задача в общем месси у нас есть два типа клиентов первый тип клиент это тот кто хочет продать либо сдать какую-то недвижимость 2 и те кто хочет собственном найти ту самую недвижимость своей мечты купить квартиру что-нибудь в этом роде вообще задача ранжирование она такая ну довольно актуальная для самых разных ресурса сейчас это интернет-магазины и marketplace вот тут уже было как минимум два доклада про ранжированию head hunter ova авито в целом много общего она подход немножко отличается и кажется я буду рассказать немножко про другие вещи давайте собственно значит что будет будут немножко расскажу собственно как ставится задача у нас какая у нас есть специфика расскажу мужчин ленин говорит стороне вопроса как именно задачу переформулировать как задачу машину обучение потом эту задачу мешать ну и непрерывно на самом деле задача машинка связано инфраструктурная часть про которую расскажу как я уже писал в названии у нас власти все еще каким образом уже реально можно сделать чтобы все что мы там находили в наших замечательных моделях взлетела и действительно работал на троне и так насчет как же реально выглядит задачи давайте себе представим что вы начали искать квартиру нам ценят ну у каждого свои представления об идеальных движимости хотите купить квартиру в москве но где вы хотите купить квартиру вот возьмем идеального такого человека который хочет все купить квартиру самым лучшим унесли москву и самое лучшее для него ну конечно не красная площадь там не и keman к а вот вадим куни треугольник фрейзер карачарово если знаете такой классный район замечательные 3 железной дороги один выезд среди этого района куча промзоны грузовики ездит вообще жизнь мечта как мы хотим чтобы для него выглядел сайт вот он зашел открыл какую-то одну замечательную квартиру в карачарово она ну конечно находится в этом треугольнике вне есть cover ну все что все что мы хотим и после этого когда он следующий раз заходит просто на сайт открывает хочу купить квартиру что он должен увидеть но он должен увидеть или want мы вылить в квартиры в карачарово с коврами все как полагается это такая идеальная картина мира которую мы хотим увидеть что есть на самом деле на самом деле он закрывает поиск открывает купить квартиру видит абсолютно не интересную ему квартиру где то там на охотном ряду но зачем нам квартира на ход на любом что он делает дальше а дальше он видит что можно выбрать кучу разных фильтров мы можем создавать по району по цене выбрать что угодно даже куда окна выходит чтобы получаем получаем супер жесткие фильтры по которым начинай собственно в чем в этом проблемы значит у нас для того чтобы люди могли искать на сайте есть очень много инструментов самый главный инструмент это большое количество фильтров потому что действительно найти сербии сотен тысяч квартир который есть москве нужную ну вот как правило есть какие-то свои требую соответственно есть фильтры можно ли если аренда с животными есть фильтры куда выходит балкон есть эти фильтры форум балконы и лоджии кто не знает что чем отличается балкон аклудже вот один человек два человека даже кто-то знает я кстати уток пришел сцен не знал значит что в результате получается что люди забивают эти фильтры получает мяч у из поиск по карте который позволяет что-то выбрать но при этом ранжирование она ни разу не по релевантности ранжирование на самом деле на сайте исторически она в основном по плотности объявлений то есть мы хотим чтобы платная бьюли они поднимались наверх и результате она совсем не соответствует тому что той цели которые мы стояли изначально как же но точно во первых сразу даже не появляется интересное объявление для человека что он зашел на сайт о то что нужно можно сразу про него что-то знаем post uk он посмотрел первое объявление уже понятно хотя бы ну реально что если он смотрит квартиру в карачарово таким он кому показывать наверно бесполезно мы хотим чтобы для по иску напитка было сортировка именно самые интересные объявления сверху ну и конечно мы такая тема которой наверно сейчас я касаться все-таки уже не буду что если он уж задал такие фильтры что туда ничего не найдено ну давайте их расширим но если кварца фильтр 2 миллиона есть квартиры за 2 миллиона это 5 рублей но наверное можно показать соответственно есть вопрос только элегантно объявлением вот например когда вот как раз был предыдущий рассказ авито они рассказывали что релевантность во многом можно оценить глазами у них был очень важный point один из двух которые носились можно оценивать глазами потому что если вы ее не помощью это мобильный телефон и не на сайте а вам вы вносят раков тот чуть не хорошо но если у нас на сайте увидите раков то это удвоение хорошо пожалуйста пожалуйста на них там нету но глазами оцените ливанском с невозможно потому что вы задаете фильтру все что попадает под этой фильтры формальный релевантная библий соответственно релевантность для нас это набор действий пользователя самое важное действие сих пор the true телефон вот поле кружек готов звонить стопудово подошел если пользователь добавил в избранное хочет посмотреть потом если пользователь открыл чат и начинает переписываться с агентом ну и там какие-то действия что ему интересно это тоже соответственно для нас будет показателем того что интересно ну самые слабые сигналы он просто открою карточку и ушел но она заинтересовала но не настолько чтобы позвонить что-то в этом плане соответственно вот это над антон и что мы будем ориентироваться при этом у нас есть второй тип клин и в чем этот второй тип клинка это как раз те кто платит нам деньги и тарелка что хотят риэлтор ну или те кто сдают квартиры может собственный они хотят что было много звонков на чтобы все-таки квартиры продавались они хотят заработать деньги им нужно чтобы те платные услуги которые мы предоставляем они действительно работали давали эффективность зачем ну например одну и ту же квартиру собственник отдал 10 риелтор ну понятно что хочется поднять свою эффективность и на этом подъеме эффективности заработать хочется возможно к этим великим чуть чуть не ликвидное объявление тоже поднять совсем неликвидный бесполезно чтобы все-таки а больше народа смотрит и при этом хочется чтобы была прозрачная структура вот так видите вот это замечательное появление оно лучшее предложение там фоточки показ по другому показывает что нам профессиональный тариф вот то что мы ура нравится риэлтора не понимаю за что они заплатили деньги а вот машинное обучение они не понимают чего куда машинное обучение зачем давайте мне палочку лучшее предложение теперь давайте как разберемся как эту задачу переформулировать задачу машину обучен при этом мы нам еще кстати надо не забыть важную вещь туда у нас также как и рассказывает до этого коллеги есть по иску которую ищут из риэлторы которые сдают но затем и еще на этом хотим заработать значит что так как формулирует вообще задача данжен задача ранжирования это на самом деле для каждой пары объявление пользователя мы должны поставить некоторые скоро и поэтому скором отсортировать любишь можно на самом смотреть еще глубже much оставляют не будем пускаться что можно смотреть даже не на объявление и пользователь она группу объявлений потому что иногда есть у нас несколько похожих объявлений то выгодно одно из похожих показать сверху остальные там чуть ниже то есть взять несколько так диверсифицированную немножко выборка ее показывать если видели разные другом такие сайт aliexpress у них общем такая прямоугольная выбить и она вообще не сортируются ну не вот так там хитрые сортировка соответственно что есть у нас для каждого пользователя есть некоторые статически набор параметров для каждого объявления есть некоторые статических набор параметров но для пользователя может быть историю куда он вообще ходил может быть откуда он пришёл с какой поисковой системы это может быть такие параметры как вообще как район в котором он сможет квартир или ценовая категория или еще что-то для объявления тоже понятно широта-долгота цена можно с животными в аренду или нельзя еще что-нибудь есть очень важной фичи который между собой связывать например как далеко находится конкретное объявление от тех что пользователь смотрел эти вещи которые связывают между собой как раз пользователя и столь объявлю соответственно ответ мы получаем скажем те самые лука по которому даже не сортировать эти скоты должны быть но мы должны как-то оценивать как алгоритм ранжирования все работы по некоторым метрики optima me вот как раз ребята до этого рассказывали про я nexus q метрику п фау мы все-таки ориентируемся в основном на другие метрики основные у нас яндекс яндекс игр это тоже очень понятные вещи есть по found a нанесли вы помните по переходам по выдаче сделан из кто смотрел будучи доклад and its игры говорит что а давайте мы будем за первую позицию если мы угадали куда-то qnet пользователь давайте себе от ночку а за вторую полочка за 3 умеешь а вот начиная с какого не параметры например там 10 вообще ничего не будем следовать есть одна проблема проблема в том что тогда мы будем с популярных вытащим много очков получать а с непопулярных ну где там ну так себе результат и пользуется где там ткнула одно объявление мало и мы всегда будем оптимизировать только вот эти популярны соответственно считаются две вещи вот первое то что я сказал качков получили dcg и считается идеал который мы могли бы получить выдачу то есть например если мы с выдачи получили 5 действий пользователя ну в нашем случае на пир звонков то мы должны поделить на там 1 плюс 1 2 сумму за 5 объявлений если всего одно там и максиму могли заработать одно очко делим на вот эта самая . если вообще звонков не было ну не считаем эту выпечку значит она вообще мало куша как бы мы ее ни ранжирование ничего хорошего не получилось естественно мы еще меряем основные наш показывает это собственно звонки и звонки по платным объявлениям потому что конечно так или иначе мы должны эффективность давать именно плата напела самую простую и текстуру которую из этого нарисовывается чем мы вообще можем сделать давайте просто в лоб возьмем мы будем все считать берем пользователя которая делает запрос ходим в какую не быструю базу но для примера нарисовали диску вытаскиваем его фичи которую мы в день заранее посчитали но они сильно не меняют ну или там периодических там пересчитывали после этого идем у нас данных хранится власти все еще вот эти фильтры там фильтруют ведем власти все еще в датском все объекты по ним идем опять же вроде с вытаскивайте фичи объектов до считываем парные вешаем сверху алгоритма ранжирования например всеми любимый живут который все знают и так или иначе тыкали получаем скорми вот я рассказывал что у нас два с половиной миллиона объявлений в одной москве выдачу может оказаться с тот ищем как думаете какая структура будет работать медленно на самом деле не только медленно ананасом и вообще не будет работать во первых фичи по всем объектам выучить да это очень медленно реально вот 100000 объект сходить вытащить печей но практически не лень и какое было структуру не было ну и свечей много конечно а вот запрос крыла стеку постоянные частые запросы по сто тысяч объектов это вообще труба он просто даже не вы достаёте стотысячников пластик умеет качественным выдавать топ он у него есть некая функция сколько он может выбить топ соответственно вот такую штуку мне потянет так можно решать но одно из самых простых решений туда того как делать нашу сложную вот эту модель вот эти топы за ластика запрашивать по какой-то его листики качественных объявлений напряг популярных или дорогих а теперь давайте вспомним нашего замечательного по иску нас треугольником фрезером который ищет квартиру как вы думаете у нас 100 тысяч объявлений москве этого вот в топ там тысячу которого мы достанем много ли попадёт из треугольников рейзеры или в популярных или в дорогих но на самом деле нет практически ничего не попадет дорогие попадет какими дорогие районы москвы и либо ну пускай в недвижимость за которые заплатили популярные тоже попадет нечто совсем другой конечно вряд ли кима кому что попадет чем они сделать еще что-то не решает нашу задачу можно делать многоступенчатой модели то есть мы берем и сначала считаем что-то более простой чем сложный пусть поэтому берем сначала делаем какую-нибудь линейную регрессию которая сортирует хвост который нам точно не интересен потом делаем более сложную модель который еще раз сортирует хвост отрубает и потом уже финальную небольшую выборку мы сортируем не что служит в чем проблем но проблема реально здесь власти в том что elastic так не умеет он умеет взять чисел q скоро и по этой чисел ки скоро отсортировать можно писать scaling функцию но она максимум будет делать там a + b поделить на сами при этом выполняют на раздельно разных городах и для того чтобы написать туда сложную какую-то вещь которую еще учтет параметры пользователя еще что-то нужно писать plugin его даже можно написать если сделать еще много к столе и но вы упрётесь в производительности и скорее всего elastic то все равно погибнет соответственно что можно сделать и что мы и сделали чтобы эта штука не произошло давайте сделаем шаг назад вот что мы знаем про нашего пользователя который только что пришел и посмотрел квартиру в карачарово с ковром тут наверно это реально самое большое информация про которой есть вот это просмотренный объект и набор обед или набор фильтров мы можем представить такой классический картине рекомендации матрицу пользователей матрицу объект так обычно все рекомендации строится мы ставим чисел какое-то в ячейку если данный пользователь посмотрел данный объект а если он сделку это более сильное действие ставится чисел k по высшему прямо позвонил ну чистилка повыше после этого у нас появляется информация о том какие объекты между собой похожи и какие пользователи между собой похожи да если строчки между собой по какой-то метрики nuclear косинус самый простой похоже значит ну и наверное объект совпадает чем можем сделать для того чтобы чуть рекомендации для пальца опять же в самой простой версии берем пользователям берем объекты которые он смотрели и ищем объект наиболее подходящий под вот этот список на для каждого объекта есть список объектов него похожих мы просто выбираем вектор который наиболее набор векторов которые наиболее опять же по какой-то метрики похож на то что я сейчас то что есть в истории пользовать и на самом деле вот в таком случае мы уже если мы вытащим тысячу объектов вот таких вот там и как раз вытащим те самые квартиры в карачарово которые нам были нужны а теперь каким образом это всей информации можно воспользоваться ну во первых это конечно можно использовать в рекомендациях да открываем квартиру мы ему внизу показываем 5 штук вот там а также ищут смотрели а можно сделать так чуть-чуть поменять нашу схему и до того как мы идем власти касевич запросить вот эту тысячу объектов и elastic у в качестве вас к лингой функции который умеет как размножать чисел ки и складывать чисел сказать что чувак если объект который у тебя есть это один из тех которые мы бы ему порекомендовали а подними его выборки повыше чем улетать получим дать получим что тут тысячи объектов которые нам вернулась тег это уже хорошие релевантные для пользователей объявления а дальше эту тысячу можно уже действительно посчитать по ним фичи сделать парные хичет навесить сверху какой-то сложный алгоритм ранжирования сделать прямо идеальную классную выборку таким образом квартиру в карачарово мы действительно пользователю подсунем подсунем правильному такую как ему есть еще одна проблема это как раз проблема которую в основном рассказывали ребят и за вид поэтому касаюсь меньше это как сделать так чтобы при этом мы все таки наверх подкинули платное объявление мы ж не только хотим так и альтруистичны отдать все квартиры в карачарово ничего не заработать не хотим заработать какие самые простые могут быть вариант но у нас есть некоторая структура как мы сейчас делаем да есть объявление за которую заплатили 10 рублей 100 рублей 500 рублей давайте внутри вот этой платности от фильтру но фактически там разные платные премиальные объявлений вот внутренний бесплатные сортируем по групп будет работать будет хорошо будет работать ну скорее всего нет потому что все равно наверху оказываться платные объявления зачастую могут быть senile можно пытаться с помощью вот этой модели предсказывать не просто ранжировать вас модель может ранжировать работает 2-ой она может либо давать вероятность что конкретный клиент возьмет этот объект купит позвонит там зависимости от кого что а может давать просто некоторое число абстрактный скорбь по которым можно отсортировать вот если у вас есть вероятность то можно максимизировать полученную выгоду от выборки есть вероятность объявления есть полезность объявления она б помножили максимизирую ли то что мы есть определенные проблемы проблемы в том что модели ранжирования с вероятностными работают чуть хуже чем могли бы работать с просто ранжированием ну разные другие на самом деле что же стоит ну так можно сделать сам посредники из это умная смешивание это то что как раз рассказывали ребят за вида когда можно пытаться хитрый смешивать между собой платные бесплатные объявления для того чтобы и там и там проиграть но немного соответствие таким образом мы можем как подсунуть классные для ванны и объекты и налево на конкретному пользователю почему не просто лена так и решить нашу задачу а насчет теперь стало немножко про техническую реализацию как добиться того чтобы ты все действительно хорошо быстро летала и все уровни кличи во первых как у нас работает первичный сбор данных и сбор для этой модели как вообще там он и здесь что нам нужно нам нужно узнавать действий пользователя где они ходили на сайте какие выборки собираются какие выдачи получали куда кликать это можно сделать с помощью к экстрима мобильным приложением мобильном сайте на обычном сайте у нас с отвесно стоит коробка брокер сообщений который все это дело собирает собирает плюс-минус каждого чиха на циане мы за вами среди где можно соответственно с другой стороны нам нужно изменение сущности которая происходит вид на бекки нам нужно знать что объявление изменилась сама это делаю довольно часто у нас база вот этот он и динамично это соответственно наши питающие worker и пишут постоянно отчетные событий что какие-то сущности поменялись в том там не только объявление от много всяких разных зависимости мы это все можем собрать воедино в кафки из кафки выложить в ходу pdf с и там запустить в какой небольшую job у нас парке которую все эти между собой смел жду получить нужный нам to the sun для первой версии того что мы выложим замечать подходит но как и мы сделали и как выезде у вас скорее всего получится если вы так сделаете все таки то что окажется на проще будет по метрикам не сильно соответствовать тому что вы видели в офлайн отчасти почему так происходит потому что фичи которые приезжают вам онлайн и те которые вы считаете в оффлайне на самом деле будут разные где-то что-то не успела доехать залагал какой-то там апдейта чего ты там где-то вы накосячили ну тем не менее все равно и мы косичками вы на косе 40 под и учете учтете какое-нибудь событие которое было в будущем она момент ранжирования и его еще не было такое очень часто кейс вымышленными в результате получится небольшое расхождение свечей можете большое как повезет которая на самом деле может очень сильно сказаться на качестве то есть если там чуть-чуть съехали вот основные фичи уже все плохо соответственно как у нас происходит добавление новых фичей и следующий переобучение знаем такой хорошую чем best practice который много где применяются когда вы делаете модели который до которых сильно зависит ваш бизнеса вы собираете фичи в момент когда нужно отранжировать набор объявлений после этого отдаете ответ а тот те фичи которые вы посчитали вы куда-то сохранить но мы поскольку у нас там митька в к хорошим и внес охраняем в кафку и после этого когда мы перри обучаем модель мы можем взять данные которые реально были на троне вот который реально посчитал наш микро сервисом настоящий таргет куда тыкали пользователи после вот этих выдачи сп оставить это и на этом обучиться более того когда мы хотим добавить какую новую одну маленькую фичу мы сначала как можем проверить его fly не но вообще идея работают не работает мало ли там не знаю знак зодиака пользователя не палите почему добавление добавили его пересчет микро сервисе но в модель не запустили то есть мы модель при этом не будем уже мы начинаем считать начинаем собирать эти данные и поставку нас собирается достаточное количество данных которые пришли по-настоящему страданием и их посчитали где-то там или перспективно вот на этом уже можно обучить модель и выложите и на ней уже проверите действительно хорошо работает или плохо работать с это ясно эту поход подход очень сильно избежит вам поможет избежать разных косяков ну ниче дело сделать pipeline который будет пересчитывать все вещи которые у вас есть ну их можно разделить на те которые надо считать часто который можно считать не часто не часто коллаборативный фичи как между собой связаны и объекта не часто это то что не часто меняется но какие-то параметры пользователя какие-то параметры объектов которые но более-менее статичный ну вряд ли у вас там широта-долгота объекта будет применяться часто квартиры все-таки не бегают но зато там век цена этот объект то что может реально меняться потому что там кто то зашел увидел что никто не смотрит может цену снизить соответствие первую часть мы можем большим добавим по scheduler обновлять вторую часть муроме у нас так реализован можно делать через парк stream ag мы опять же слушаем кафку в которой есть изменения всех сущностей япония обновляем данные в базе микро сервис который уже приходит ему нечего дочитывать в этом месте не надо он берёт готовы данные из базы и считает только парный фич черном остается сделать нам нужно каждый раз когда мы пили обучаем модель делать cut off line тест для этого у нас есть набор метрик про которую мы уже обсуждали что основная метрика это как раз им dcg то что ты рассказывал про бал и которые мы получаем за места выпечен мы после того как поняли что в оффлайне модель работает лучше чем предыдущие должны выложить в онлайн и проверить действительно работает или нет круто это вообще делать автоматически не следить за этим ну и последняя нам нужен какой-то большой мониторим всего этого безобразия что мы найдем друг не начали сортировать все черти как соответственно learning потому что нас модели например перестали новый выходить все время не проигрывают старым либо качества у нас значительно упала либо еще что то это конечно такие вещи которых нужно продумывать сразу потому что в нашем случае глазами не увидишь что что-то пошло не так вам всегда это нужно видеть на цифрах что получилось ну во-первых получилось что мы увеличили местами довольно сильно число звонков которая это дело дало мы научились персонале зова на красивый ранжировать объявление на большую длинных вылечу ну и как еще один для нас фактор успеха что это все работает не очень долго то есть что на самом деле техническая реализация этого безобразия она конечно хуже чем просто сходить в гости к сортировать по скорой отдать но она не монструозно и длины при этом абсолютно понять что есть и что улучшать и есть что сделать лучше что же во первых можно сделать ну первое наверное самое главное это что мы не решаем основную проблему риэлтора в этом есть как я вам и говорил чтоб риэлтору очень важно понимать а за что он платит деньги когда мы ему говорим что выдача ранжируются на основе ожидания того там прибыли чего-то он этого не понимает и не поймет и не хочет хочешь я заплатил деньги мое объявление вверху это она сама такая довольно сложная бизнесовая как это делал объяснить ну и как раз насколько я вчера общался с ребятами завиты у них такая же тема они тоже не везде выкатили свою еще замечательно ранжиру не ровный за этой же теме вторая вещь это можно использовать более хитрый модель вот здесь у меня презентация она же будет выражена не так давно эрбен бы и выложил тоже свою статью ранжированием о них довольно интересный архитектуру нерон миронов место бустинга которая как они говорят что по сравнению с бу стингом дает им очень хороший прирост может тоже посмотреть какой там white paper про эту архитектуру можно на эту тему дубне но на самом деле думать можно не только насчет архитектуры самого вот это вот пили ранжирование можно думать еще и о том как какие-то мета фичи собирать по объекту дособирать более красивым бединге с помощью nero ничке разные другие вич буквы обрабатывать картинки например лучше у нас там практически ничего картинках ну используются но нельзя сказать что много последнее это то что реально когда вот я говорил как мы проверяем хорошо или не хорошо работают вы пока у нас направляет с помощью абед с тв понять чтобы тесты сходятся долго результат это не очень хороший можно двигаться в каких-то разных направлениях как это улучшить одно из направлений самое такое понятным популярна эта нога руки бандиту и туда действительно стоит двигаться 2 рококо и часто используется в ранжировании это смешивание двух выборок и там тоже есть на эту тему вайпером соответственно оценка вот по смешанные выборки какой ну смотря на какую на какие объявления из какой выборки пользуется ли реальный тыкву тут есть разные проблемы например но есть мы возьмем выборку который будет отсортировано ну вообще забьем на плотность явление по компаниям самый элегантный просто подписывать наверх ну скорее все поле для них будет и тыкать и наш выбор которая хоть как-то учитывать плотность уже будет этому телу проигрывать поэтому с этим тоже на тех не долго играться вот но тем не менее результат нас устраивает он действительно работают в разных категориях где у нас нету такого большого количества платных услуг на основном сайте где с этим еще есть некоторые проблемы с как раз с первым пунктом но пока в режиме пилотом и это дело пытаемся объяснять рассказывать и объяснений почему действительно людям это дает эффективность нужен дает больше звонков то на самый для но им действительно эффективно вот как то так всем спасибо спасибо а ндц же у вас считается по трафику то есть по кликам пользовательским или а секунд какой-то проводится нет я как раз писал сюда спасибо но я специально как раз остановился с момента у нас нету потому что ну формально если выбор или фильтры то все объявления которые попали все подходят под фильтр поэтому да по трафику привет спасибо за доклад есть несколько вопросов первый вопрос смотрели в сторону learning франк плагина а толпы нс т.к. там тоже just вроде как типа парни говорят что возможно станет релевантность лучше непонятки у них со скоростью это первый вопрос и второй вопрос вы говорили что вы ранжировать и топчик какой-то и подаете но вот факторы либо там вот ваш ужик готовая единички как бы пластику тип вот это вот это от ранжирует elastic у нее есть такая штука что он например не очень любит когда ему там шут запихивают много афиши которые нужно пропустить или например когда the function of скоро открываешь там много функций тоже на него плохо влияют как вы с этим боролись в какой секция это было это было в рис кори или это было во секция основного запрос до пасибо про плагин чикнет не смотрели парню ничего не знаю мы смотрели в сторону solara который умеет тоже их же boost в принципе но чет так мы у него посмотрели посмотрели и ну надо достаточно серьезно вкладываться переписанную инфраструктуру чтобы ему воспользоваться вообще попробуйте не стали но вот вот этот плагин как раз просто он типа чуваки собрались и подумали почему бы не сделать ли ранен touran ква ластики ты берешь и гбуз берешь экспортируется в здравицы он модель чеки делаешь фичи из данных которые действо внутри яндекса запихиваешь это плагин скормлю chevrolet твоя релевантность прям радуется да кстати ещё здесь и я наверное понял тогда про какой плагин где эту вещь тут до довольно сложно пропихивать парные фичи и фичи пользователя то есть это нужно уже этот сам плагин допиливать довольно сильно и у него даже у этого плагина ну на наших тестах все-таки были проблем если правильно понимают о чем сейчас есть да и ластика такой плагин да да вот у него были проблемы с производительностью в какой версии использовали это версия ластик версии ластика 5 к версия плагина не знаю окей ну и полтора на 4 до 2 вопрос-это ну вы подписываете уже заранее посчитаны единички которые так или иначе скоро но вот да я вспомнил но ничего принципиально такого серьезного не делали то есть достала работать медленнее чем без этих судов но работают а вы где это делать его делает этого история или вы делаете там в главном запрос не типа в основном который земля я не помню не буду могу потом посмотрите на такие пасибо здрасьте вот здесь перед вами гости драсте спасибо за доклад а такой вопрос если я все правильно понял может возникнуть такая ситуация пользователь смотрит объявления и ради прикола он тыкает на карачарово ну просто посмотреть на фотке поржать и получается система это запоминает и дальше начинает выдавать ему похожие объявления ему то совершенно ненужно как если такая проблема действительно и что вы с этим делаете или ничего не делаете спасибо на самом деле такая проблема действительно есть мы с ней ничего не делаем но она выглядит немножко не таким образом обычно она выглядит наших рекомендациях в письмах если вы один раз открыли какую квартиру в москве за там 100 миллионов рублей по моему следующи раз пишем письмо с квартирами за 100 миллионов рублей человек открывает сумму 100 миллионов рублей интересно что же такое кликать туда еще раз и попадает замкнутый круг и следующий раз его на поле социализированы самое какая-то по которой вы отслеживаете ткнул мания да да спасибо за доклад мне больше интересно как вы фильтруете то есть в интерфейсе набираются фильтр дальше и sel ну не все же объявление можно всем пользователям почему не все можно всем пользователям мауляне я же не знаю ваши модели безопасности а все можно окно почти правда ну вот почти как это почти реализовано интересно и что в итоге улетает власти какой запрос то есть как вот именно на как формируется фильтр и как на него накладывается и селе я к сожалению вот поэтому не смогу ответить про то как формируется запрос и могут отправить к ребятам кто этим занимается по что можно что нельзя отдавать по моему это обновляется в яндексе ластик это уже не очень помню но таких объявлений которых нельзя отдавать их довольно мало привет спасибо казак за доклад у меня такой вопрос сколько рпс of держите ну то есть пиках 95 пирсинг или время ответа до 95 person тилль по моему 499 450 95 номерам 350 где-то так рпс не помню она смотрит спасибо спасибо за доклад скажи просто а как реализуете постраничную навигацию и возможно sharing ссылками ну sharing ссылками очень просто они все фильтры есть внутри ссылки обновляется до но я выучил свой нейронную сеть а человек которому я отправлю ссылку с фильтром он ведь ну не обучал неровно система не должна быть и другая но другие леса так и случится то есть выдачу окажется другой об страничное постраничная при первом запросе вот эти тысячи объектов сортируются запоминается в какой порядке отдавать потом отдается а когда переходим дальше уже 2 тысячи сортируется нет вторую тысячу нельзя получить окей понятно ну ни один человек все-таки ты еще объявлений не просмотре только робот как правило так ну да да спасибо можно все-таки тогда немножко наглый вопрос просто некоторые пропустили авито вот можете своей интерпретации рассказать как вы своих объявлениях решать ее сам рубля ну на самом деле вот из того что здесь рассказывал трам-пам-пам где то есть есть возможность максимизирует по лучшим ценности есть делать умная смешивание у нас вот некоторые гибридного вид они делают некоторые блендер которые подсовывает отсюда выявление подсовывает отсюда объявления мы еще пытаемся максимизировать именно но у нас есть некоторое понимание насколько нам ценные звонки по платным по бесплатным объявлениям максимизировать вот эта люба"
}