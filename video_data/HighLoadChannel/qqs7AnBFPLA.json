{
  "video_id": "qqs7AnBFPLA",
  "channel": "HighLoadChannel",
  "title": "Тестируем группировки сервисов. На узле разработчика / Олег Якушкин (СПбГУ)",
  "views": 430,
  "duration": 2055,
  "published": "2021-10-04T02:47:02-07:00",
  "text": "добрый день меня зовут алексей пушкин и с девятнадцатого года я активно занимаюсь массивными распределенными системами до этого я был разработчиком ведущим в центре распределенных рестораны смогу сейчас руководитель ряда группы разработки вас по богу и хранить цирком и сегодня расскажу вам про тов как тестировать сервисы на узле разработчика мы с вами взаимодействие сервисами практически ежедневно иногда это сервис и маленькие которые stateless а иногда это в полноценный стиль full сервисы которые должны взаимодействовать между собой например база можете захотеть базу развернуть в продакшене на отдельном узле ваши 10 сервисов на других узлах и часто может случиться так что все у вас хорошо вы протестировали традиционный кейс когда у нас все работает марией машине на моем одном узле и тут внезапно за тепло или монопод и начались странные проблемы которых раньше никогда не был мы тестировали что случится если база откажет что случится если другой сервис откажет это все мы проверили также мы тестировали что будет когда все работает хорошо но что будет если какая-то внешняя сила начнет вмешиваться в нашу работу у нас программист он все-таки не бог в первую очередь занимается тем что фокусируется на своих прямых задачах и на том workflow который перед ним поставлена он не знает глубин сетевого администрирования он не узнает что такое роутер внутри он не умеет в нем копаться он видит только последствия того что происходит с его системой ну например пакетов становится слишком много они оказываются с дублированным или они теряются или трафик пропадает между узлами и при этом он попадает нелинейного потом возвращается и система начинается показывать не просто поведение которое характерно для ошибки о поведении неизвестная ранее произведения в таких режимах в которых вы эту систему не тестировали для того чтобы это протестировать в мире айти существуют традиционные средства такие как house testing однако любое средство house to sing в первую очередь попросит вас об одном чтобы ваша система была закончена и было одзава был грубо говоря то есть все метрики которые вас не хотите снимать желательно чтобы там уже были то есть вам никак не помогут ее отлаживать никак не помогут создавать такие дополнительные сложные сценарии в которых ваша реальная система попадет грубо говоря все что вам дают это дайте нам пожалуйста сеть на вход которые развернуты которая работает функционирует а мы начнем ее гасить душить дублировать в ней пакеты и вы сможете в рамках своего туз это для обзора белить и наблюдать эффекты которые получаются однако если вы только начинаете что-то делать и у вас как бы еще не просто денег на то чтобы объем вылетит делать для своей системы нет в у вас в принципе еще ничего особо нету вам необходима некоторая система который бы позволило быстро начать у нас еще не обзора бла система у нас допустим всего лишь 4 или три контейнера и мы что-то в них делаем мы хотим тем не менее учитывать с сетевые события которые у нас могут произойти соответственно нам не совсем подходит пумба требующий от нас его бегите к слову qr код это ссылка на их репозитории он доступен в гитхабе это бесплатного конкурсный по нам нужно некоторый stm который бы позволил нам с нуля развернуть эту сеть чтобы у нас были узлы которые связаны между собой и мы при желании могли гасит трафик между ними то есть сделать сто что пумба рассчитывать что у вас уже сделал более того нам бы хотелось уметь иметь какой-то инструментарий для того чтобы управлять этими узлами так как будто бы вы физически на них можем зайти внуть на продакшн сервер мы заходим на примерно один узел настраиваем заходим на второй узел настраиваем его и смотрим что у нас получается то есть нам нужен sdn как база нам нужна некоторая изоляции между узлами для того чтобы каждый узел мог работать отдельно автономный независима друг от друга обладать разным tool set и мы может быть параметрами которые балансируют его производительность и его допуски по тому сколько он кушает оперативной памяти процессора но и безусловно нам необходимо иметь возможность наблюдать реакции которые у нас происходит может быть мы хотим подключить отладчик может быть мы хотим чтобы у нас весь наш вкус от разработчика был напрямую связан с этим сервером чтобы могли видеть данные приходящий прямо в отладчик чтобы у нас открывался красивый дебаггер и могли что с этим сделать для того чтобы упростить жизнь разработчиков мы разработали следующую систему называется или три нас код доступен гитхабе по ссылке и она фокусируется как раз на этом дать вам максимально простой инструментарий для того чтобы развернули сеть в этой сети создали контейнера и начали с ними играть например задавать им команды смотреть как они отреагируют смотреть что будет если кого-нибудь из них начать по придушивается или делать более сложные сценарии которые нужны вашему бизнесу там развернуть например симулировать классно мы предоставляем возможность создания узлов развертки простых сетей и доступ к отправке команд на эти узлы соответственно как это выглядит все в коде мы должны создать узлы как видите мы даем им имена и даём им образ из которых создаться то есть если у вас заранее был подготовлен какой-то докер-образ вашего приложения вы его напрямую взяли сказали развернись 100 развернись эта вот он таки это имена соединит один узел со вторым и например выведи их айпи адреса это особенно важный функционал когда мы просто хотим передавать на узел команда мы хотим зайти на узел и сказать узел освежить с узлом б узел г свежей с узлом c допустим мы тестируем героем пью и не успели написать никаких нормальных абстракций поверх или мы ходим хотим использовать некоторую систему которая связана с работой спирту пир дальше мы говорим сеть запустить ну и собственно все мы можем работать с нашими узлами мы хотим управлять узлами самое простое и реалистичное это управление узнаем по ssh да мы же хотим напрямую отразить как у нас ведется работа в продакшене здесь мы отмечу говорим не про микро сервиса через кубер над см и говорим в первую очередь про такие старые банальные сервисы у которых убираться еще нет а эмулируется взаимодействие толстых сервисов из прошлого и настоящего соответственно что мы хотим мы хотим создать докер-образ засунуть в него ssh сделать так чтобы в нем запустился с осажденным и передавать туда команды ну например нас будет мастер и два раба с мастером мы хотим заходить на каждого из рабов и передавать туда столько команд сколько нам нужно то есть симулировать тот реальный кейс который вас сложится когда вы будете пытаться выливаться в продакшен только естественно скилл down и так что мы делаем мы ставим зависимости базовый образ взяли установили туда все необходимые нам для того чтобы у нас установился ssh и sh мог работать говорим что у нас будет пользователи этот пользователь сможет нашим ssh пользоваться замечательно сказали сказали какой порт прокинуть теперь мы хотим это все дело развернуть примерно 10 строк нам нужно мы создаем сеть у злым у нас будет мастер и два работника мы говорим что мастер связано с работниками и что в работниках должен быть выскажут в глобальную сеть интернет ну например для того чтобы устанавливать новые пакеты вы захотите вы зайти в узел и сказать ему apt-get install ну и так далее поехали сконфигурируйте то сконфигурируйте это ну и как могут выглядеть команды мы говорим сеть запустить и сначала выполняем на всех узлах запуск докер демона и дальше на каждом из к конкретным узлов можем выполнить то что нам нужно заметьте где-то и peace плыл и выстрелила здесь мы явно в команду приписали те пи адреса которые нам выдали что приятно вот то все работает на в sl2 на машине разработчику которую windows внезапно оказался такое случается не всегда у разработчика например есть linux напрямую или linux является основной рабочей системой соответственно это работает на в sl2 этот у кого есть только windows может этим тоже воспользоваться мы часто хотим по ограничивать сеть сделать некоторые операции чтобы собственно реализовать то что делала пумба с вами сейчас посмотрим пример как использовать и в голову но безусловно это не единственная опция когда вас развернуто докер сеть вы можете сказать пумба вот тебе сеть сделай с ней хорошо или вы можете сказать тисе конфиг вот тебе сеть сделаешь мне тоже хорошо мы ж посмотрим команды который вы можете выполнить напрямую из внутри узлов то есть когда вы вот так вот зашли ssh зашли в узел и дальше смел выполнять все конфликт прямо на нем для того чтобы знать вот этот узел мы сконфигурировали тот узел мы будем конфигурировать чуть позже что мы хотим симулировать этим мы хотим стимулировать то что например задержка пакетов между узлом а и узлом б.и. и между всеми узлами между всеми пакетным приходящими на определенный сетевой интерфейс начало иметь некоторое значение аналогично мы можем пользоваться всеми остальными командами которые есть в тисе конфиг ну и соответственно теме ключевыми словами которые вы видели в пумбе такими как задержка rear даррен максимальная скорость и другие замечательные вещи которые мы все привыкли часто мы можем хотеть использовать не один узел для нашего в моделирования например у нас может быть задача смоделировать настоящий рэп в реке у нас ни один роутер в реке у нас ни один узел и все они так или иначе взаимодействуют между собой роутера который у нас в рейка установлены могут вести себя по-разному могут иногда шалить могут иногда быть забитыми другими сервисами пример у нас есть какая-то базовая платформа на которой тестируемся не только мы ну и например наш сервис занимает два узла связанных разными роутерами у нас есть общая база а сервис конкурент грубо говоря который находится рядом с нами начал внезапно плодит трафик ладит вам его много-много и на соответственно забивают мы соответственно чуть-чуть блок ним и мы хотим это увидеть для этого нам надо развернуть кластер для этого нам нужно уметь возможность во-первых запускаться больше чем на одном узле часто чтобы смоделировать серьезную нагрузку нужно иметь доступ к серьезным ресурсным все-таки и для того чтобы это реализовать мы предлагаем использование потому что называется dockers фарма это довольно старая технология она довольно меча и к ней не так трудно подключаться мы говорим каким узлам надо пойти соединиться с ними запустить на них узел и собственно начиная с восьмой строки все идет так же как у нас было раньше а 5 6 7 отвечают за то что мы создали сеть и подсоединились к своим постам на заданных узлах доступным нам создали узлы и дальше все как обычно говорим кому соединиться с кем запуститесь пожалуйста все работает хотим организовать кластер из большого количества узлов организовать связь и роутера важно что важно то что роутер и в нашей системе тоже будут до узлами на них будет развернуто флага или на них может быть использован fluting rotting используется в или 3n с мы с вами чуть позже посмотрим на еще один продукт который называется мы те которые используют могу соответственно что у нас здесь есть у нас есть роутер который де-факто запущен поверх докер образом это значит что в том же самом роутере мы с вами еще сможем много чего запустить можно запустить сервис бизнес-аналитики можем запустить краулер который будет на что-то смотреть что это мониторить и что же у нас тут происходит мы говорим со сдайтесь пожалуйста узел кластера в узел кластера развернись пожалуйста некоторые докер-образ который мы хотим поднять у нас должен создаться роутер или несколько роутеров которые с узлами свяжутся и дальше свяжут узлы между собой через уже связи роутеров между собой тем самым мы получаем эмуляцию более-менее реального маленького кластера безусловно когда мы все это делаем узко до этого может быть недостаточно может хотеться какой-то визуализации что-нибудь увидеть здесь мы смотрели с вами самый простой такой пример который с которого можно начать да вот вы только начинаете вам нужно только два сервиса вы можете взять решение аналогичный tns она быстро завернет в msdn и вы сможете сценарий разные рассмотри более чуть более старое решение которое имеет почти все тоже самое но в виде роутера используют кладу называлась motty приняла могли посмотреть презентацию если вы делали домашнее задание которое было указано в тезисах основная суть в том что это почти то же самое что мы смотрели с вами до этого только когда вы развернули сеть вам дальше показывают картинку из себя симуляцию вас динамическая то есть вася пользователь зашел в систему нашел узел с которым хочет играть ткнул в узел и дальше рассказал ему а ну-ка задохнусь немножко пожалуйста и смотрим что получается системой здесь у нас запущена когда влия когда меня это распределенное файловое хранилище которое поддерживает consist in оси между разными своими узлами ну и вот мы начали душить кусочек вот кусочек придушили грубо говоря отрезали его от остальной система можем видеть как остальная система реагирует на потерю своего кусочка ему можно смотреть как она восстанавливается когда сеть снова разрешают его страна возвращают к исходному состоянию безусловно часто может произойти такая задача что мы хотим оценить абсолютно все такого рода эксперименты мы ставили и для того чтобы это реализовать мы рекомендуем вам взять протокол типа успев запустить на роутер и как докер узлы естественно и поставить на них снифер который называется ти шапка это позволит вам по двум параметрам от логировать все пакеты которые идут из любого зелененького узла здесь к любому другому зелененькую узлу то есть например вы хотите визуализировать реально трафик который у вас идет безусловно эта задача довольно редко встречается когда вы хотите прям каждой конкретной пакетик иметь возможность видеть и сколько их проходит однако она решаема и это примет решение которым можем вам предложить когда роутер у нас поскольку они немножко умные в рамках нашего езды на получают на себе на горку грубо говоря sniffer это снифер может нам отражать 2 интересующие нас характеристики первое это ip-адрес которым мы работаем второе это чик сумма пакета соответственно мы снимаем с этих снифер of данные в некоторое общее хранилище и можем четко сказать когда откуда какой пакетик пролетел по какому маршруту он летел зачем он так летел и делать анализ на базе ту мы моделировали разные распределённый реестр и как правило модели наши сводились к тому что ну давайте запустим пять узлов поднимем в них консенсус посмотрим что будет если начать взаимодействовать с удушением сети между этими узлами как консенсуса среагируют вот эти распределенные реестра мы просмотрели собственно одни из самых больших и это ссылки на репозитории в гитхабе где вы можете посмотреть взять тот который вам больше нравится и начать с ним играть начать мучить сказать что не пять узлов хочу от 25 узлов хочу ну и дальше смотреть что с ним происходит это особенно важно когда мы например хотим сделать банкинг на весь земной шар мы точно знаем что у нас есть операция произошла тут до сюда она дойдет то мне скоро например и мы хотим смоделировать это не скоро и еще посмотреть а что будет если мы начнем посередине между нашими двумя полушариями мучить скорость передачи посетим соответственно такие у нас получились решение который мы вам предоставляем виде открытого исходного кода в можете взять и использовать в своей повседневной работе 1 и там идти там есть интерактивная визуализация можно натыкать посмотреть на то как себя ведет как она реагирует на всякие разные вещи которые вы с ней делаете но однако нет нормального api для динамического взаимодействия el tren с которая как вас раз вам дает возможность динамического такого прописывания конфига прописывание реакций при нем они и информация о том что же отдал ваш конкретный докер узел когда вы произвели с ним некоторую команду и запускается новая цель 2 что особенно приятно соответственно вам не нужно особо сильно не кого тренировать если люди установили себе в sr2 и он у них работает то дальше они могут напрямую из питона взаимодействует с этой штукой никакого пользовательского интерфейса и мне нужно и они могут начинать сразу же играть с системой как будто бы она у них класс то безусловно это не все пространство того чем можно моделировать сеть это две маленькие поделки которые позволят вам грубо говоря пройти первый шаг они дадут вам возможность интерфейс довольно простой и очень похожий на то что вы будете видеть например в меню найти некоторых его версиях и в коде ему для того чтобы моделировать вашу сеть здесь представлены и другие продукты которые сеть позволяют моделировать и так давайте сверху пойдем вниз сначала окон собственными не надо нас три и коры ему карьеру нам очень нравится он очень красиво его развивали целых девять лет корпорация боинг у него прекрасная лицензия он очень большой однако он умеет работает на четырех конкретных платформах linux 2 ubuntu 2 centos стрим требуют для того чтобы взаимодействовать с ним местами написания кода на си плюс плюс что не всегда дается разработчикам с первого раза у меня нет довольно глубокие низкоуровневые и поэтому большинство продуктов которыми вы или ваши конкретные разработчики которые с этим работают будут пользоваться будут форки отменена то например контейнер снят который берет меня нет как базу для передачи данных между контейнерами и позволяет контейнерный по верхней uhh uhh развернуть есть безусловно платные продукты типы fng которые довольно дорогие и продукты фокусирующаяся на деталях механики роутеров то есть вот у вас есть конкретный пол моделей которые взаимодействуют между собой в их там прям можете отобразить ну соответственно 2 и 3 они больше такие ориентированы на системных администраторов чем на разработчиков именно сервисного по которые ну мягко говоря не то чтобы хотели копаться в деталях того как роутер устроен и так меня нет l2 с кучей форков с кучей реализации поверх а главное есть готовые топологии сети то есть вы можете взять какой-то форме не нато взять его дериватив в котором будет такой такая набор топологии сети которые вас интересуют альтернативного можете взять и venga и выполнить там точно эмуляцию работы роутеров это приятно аналогично в gns3 у вас будет почти такая же система однако и дивиденды gns3 платной и ориентированы в первую очередь на системных инженеров занимающихся администрированием передачи информации давайте посмотрим три интересных кейсов которыми мы сегодня с вами закончим 1 темпе допустим мы хотим с вами смоделировать работу кластера у которого много узлов которые взаимодействуют между собой у них есть некоторые топология будь это dragonfly или будь это фетре и эти узлы мы хотим смоделировать и поверх них запустите mpi mt иная программка должна выполняться и корректно работать мы взяли 2 топологии сети использовали контейнер снят который идет поверх мини рад стоит отметить что запуска temper напрямую через докер как базу для стива моделирования оказалась практически невозможно а вот меня над чуть не справляется с этим и как раз докер через минин и отходят как через сетевую некоторую прослойку и мы можем моделировать как ведет себя сеть в том числе как ведет себя сеть когда вот тот ротор начинает себя вести плохо или вон тот ротор соответственно можем с вами ставить эксперименты на случай когда у нас начинается конкурентная работы на кластере или когда у нас начинается взаимодействие между нашими отдельными кусками решения как они себя ведут как влияют на работу нашего конечного приложения вот эти верхние слои с роутером дальше самая наша большая боль была в том чтобы смоделировать на одном узле работу sku bernette с это был самый настоящий провал поскольку мы хотели на одном узле увидеть губернатор внутри которого истек внутри которого развернутый сервисы мы можем моделировать трафик между ними собственно для тех кто может быть не работал с кубер нету сам эта система которая регистрирует контейнеры говорит нам поднимись опустись запустить там-сям а если это такая грубо говоря милая прослойка для того чтобы над этими контейнерами делать некоторую оркестрацию например вы можете сказать возьми пожалуйста версию вот это вот контейнера номер один и суй мне и 10 процентов трафика возьми версию этого контейнера номер-то а и суету до 90 оставшиеся но и смотреть что происходит также и стива позволяет вам делать все то же самое что делает пумба то есть вы можете сказать из тела по душе вот это из тела по душе топ но запустить это на одном узле оказалось проблемой мы пробовали запустить этот через кент мы пробовали запустить это через наши собственные реализации которую видели или нсм идти мы также google или если это через кори ему и к сожалению вывод который мы смогли сделать это только вам надо развернуть реально губернатор в первых него больше на одной машине надо развернуть из тела и смириться с провалом 3 абсолютно независимых попытки была предпринята понимать что то вы можете видеть здесь некоторые имеют формат видео youtube и некоторыми от формата репозиторию на гитхабе это был интересный эксперимент но мы пришли к такому конца сосну мнению что по итогам трех попыток запустить губернатор на одном узле практически нереально более интересная такая тема которая часто встречается и важно для мира интернета вещей когда у вас есть умный робот в котором linux другого умный робот в котором linux не взаимодействуют и беспроводную сеть и потому что им надо ходить бегать и прыгать и они начинают удаляться друг от друга и этих роботов у вас не два а 22 соответственно когда они начинают удаляться друг от друга они начинают чуть чуть теряет пакеты чуть-чуть пакет и начинает биться и моделировать это можно с помощью нас три докера мы использовали форк ns 3 который как раз ориентирован на работу через докер альтернативное нас три внедрен сейчас в кори ему и можно пытаться моделировать с помощью неё но мы не пробовали соответственно ns 3 + докер доступен вам по ссылке и он позволяет вам как раз смоделировать следующий кейс вот у нас есть стадо узлов на каждом из которых linux в докер образе живет нужный сервис выполняет и точке у нас могут расходиться по карте сходиться и мы хотим моделировать то сколько кому пакетиков приходят и какие начинаются события и потерь итак давайте подведем итог у нас есть набор платформ которыми вы сейчас можете прям пойти и начать моделировать сервисы на узле разработчика большинство из них имеют очень похожие пиво то что мы видели с вами в самом начале почти один в один вы увидите что вскоре ему что внс 3 + докер что в соответственно кто у нас там еще остался в мини найти плюс докер да вот эти все решения имеют opel очень похожий потому что логика решение этой задачи на самом деле одинаковые мы независимо от кори ему делали алтаре нас им идти потому что к нашему стыду мы они не знали и google не всегда достаточно хорошо работает как нам бы хотелось иначе мы наверное делали так чтобы кори ему работала с в sn2 и фокусировались на этом но тем не менее вот такой перец и по решением у вас получается и они все окон собственные которые на этом слайде доступны вам очень похожий api создали образ засунули туда код который вам нужно переписали сценарий того что с этим образом происходят посмотрели на некоторый результат который должен получиться если результат хороший устраивает вас спустили это продакшен например сделали сначала в миксе маленький эксперимент визуальный потом вольтарена есть перенесли этот визуальный эксперимент в виде скрипта засунули эта вся и получаете каждый раз возможность проверить а что будет если вот этот сервис чуть-чуть под душат на него будет приходить не весь трафик он будет отдавать ответ слишком медленно сохранится ли у нас ответ на запросы пользователей достаточно быстрый или у нас начнутся настоящие проблемы на когда увидите фразы не официальный релиз в этой таблице это означает что предполагается использование форков которые основаны на базе базовый продукт а вот спасибо за внимание буду рад ответить на ваши вопросы оси большая олег давайте перейдем к вопросам их можно сдавать как тут поднимая руки так и в онлайне если они у нас появятся мы прочитаем мы дарим за лучший вопрос книжку поэтому хотя бы один нам точно нужен что было непонятно вопрос зал давайте что-нибудь объясним или все вообще было подавить поднимите руки кому было понятно абсолютно все кто уже делал что-то аналогичное и рад и довольно жизни нашего поднимите руки те кому кажется что это не нужно и никогда в реальности с вами не случится и вам не потребуется аналогично стен это даже это не лес рук сожалеть но отлично вопросы отлично у нас они есть вопрос не дать моего плана по очереди да тут просто рядом привет у нас не все в докер ах однако мы хотим такой же функционал проверять нарушать взаимосвязанность между компонентами выключать роутер и где-то посерединке и наблюдать какой пламенном переводитесь в докер сначала конечно нет у вас уже все работает и все вне докера ну например 1 5 сервисов на винде и завязан на неё вам деваться от этого особо некуда соответственно она там уже работает может быть это legacy какое-то которое пришло еще не от вашей конторы вас она взаимодействует сетью соответственно она уходит через роутер куда-то и вот то место которое является роутером вы подменяете вы поменяете роутер с обычного на софтверный то есть берете нашу систему например или трин с который позволяет вам софтверный роутер и создавать или берете fluting в голом виде совершенно необязательно брать какое-то готовое решение если вы тем более in-house может быть вам нужны особенные какие-то тут за это сет вы берете делаете силиконовый такой роутер на базе файтинга или аналогичного sdn решение которое вы смотрели сегодня этот узел который вас с виндовым сервисом говорите ему вот ходить через этот роутер в ту подсеть в которой вас например есть другие линуксовые сервиса которые в докер образах не не в докер образах неважно соответственно делаете маршрут так чтобы все шло через силиконовую роутер но и дальше на этом силиконовым rotelli дергаете сиси сателлите конфиг для того чтобы гасить на нем все что вам захочется и тем самым вы уйдете от проблем того что нужно там конец пумба нужна какая-нибудь замкнутая поднятой сеть в докер образе в виде докер образов вы выходите за эти рамки используя просто софтверный роутер который вы им учить и собственно осталось научиться подменять сеть no llega стивена новом сервисе ладно спасибо чел остался еще вопрос как давно вы разрабатываете ваши steam сколько лет назад начали можно еще раз пожалуйста утром сколько лет назад вы начали разрабатывать маттео 33 года назад мы этим занялись и три года назад мы просмотрели рынок на наличие решение который бы нас устраивали по цвету возможностей мы делали это для распределенных реестр в первую очередь потому что там как раз алгоритма консенсуса важен и вам важно иметь возможность посмотреть как он себя поведет когда одна надо начнет работать медленно другая много наоборот начнет принимать себя слишком много трафика но и соответственно мы начали тогда эту работу и вот сейчас я думаю нам привезли на к логическому завершению все инструменты которые мы хотели бы в от этих систем получили более того сейчас смотрите проспективное если бы я знал о существовании кори ему мы бы конечно фокусировались на нем и на о том чтобы добавлять в него возможности работы с операционными системами windows или по крайне мере рассматривали почему это там сейчас невозможно но это отдельная большая работа была бы дальше добрый день спасибо интересный окрас тоже ну и чем тему себя пытаемся поднимать но вопрос касается а кроме сети вы еще на другие компоненты смотрят и и попытаетесь с ними работать вне рамок доклада но вот пример не можете привести пример иски оборудования вот отлично диски оборудования собственно важным моментом является то что какая-то пытать смотрю что не типы распределённого реестра у которого есть необходимое чтобы некоторые клиенты были сыпью bound некоторые клиенты обладали доступом к видеокартам вас появляется необходимость сказать что вот здесь мы моделируем что то что работает закупил здесь мы моделируем что то что работает с там со всеми остальными устройствами и сейчас реализация этого делается напрямую с помощью выставления в например когда мы создаем докер swarm на каком посте какую ноту запустить то есть мы говорим докер swarm возьмись возьми такое то узел возьми другой узел на узле skype запуская вот эти вот докер образы на узле обычном запуская gc но и таких tockers warm конкретных узлов на каком-то там например будет супер быстрый жесткий диск который работает через пися и на каком то у нас будет супер быстрой видеокартой можем смотреть как они взаимодействуют например супер медленном файловым хранилищем которое на третьем узле подключенным dockers форму реализован вот соответственно такого рода разделения можно реализовать с помощью явного выставления того кого где запустить в зависимости от его конкретных требований и это valtery нас есть собственно докер swarm это база для того чтобы это реализовать ну и к сожалению в плане виртуализации ну например там вас есть видеокарта да вы выделить между двумя узлами даже докер компонентами запущенными на том узле тяжело вам будет поэтому случае если у вас неделимая компонента вам все равно придется лигу виртуалке либо физически их злой выделять которые будут решать вам задачу поддержки аппаратный спасибо да еще другой день спасибо за доклад вопрос как я понимаю все таки данное данный спектр по разводам будут для эмуляции работы сети отказа в сети и больше разработчика как можно потом анализировать есть ли какие средства для анализа результатов того как вас ведет ваша система в случае этих отказов то есть мы понятном модем моделируем и пиратам задержки какие-то потери и к пакетов а если это средство чтобы потом свою на трудно свой комплекс сервисов и оценить как бы их их реакцию на это элита пасты мы смотрим в окно или готовы зам там свои ноги смотрим и потом уже делать выводы скажите правильно ли я понял вопрос вопрос заключался в следующем у нас есть распределенная система мы умеем и и моделировать моделировать кто как у нас начинаются какие-то проблемы в сети можно ли в рамках этого нашего моделирования производить какие-то общие оптимизационные исследования которые нам скажут вот эта сеть хорошая это сеть плохая это там набор контейнеров то как мы их сложили между собой это хорошо или это плохо я правильно понял ваш удар соответственно набор паттернов для каждой системы которые вы будете разрабатывать скорее всего окажется уникальным примером этому являются любая практически а я система который требуется доступ к специализированному оборудованию к например камерам которые стоят на производстве или где-то перемещаются по городу и у вас есть вот это ваша большая система которая собирает трафик у вас есть общая грубая план-схема того как ваша сеть работает и в рамках этой общей работы вы можете дальше применять разные архитектурные оптимизации ну например где то вы можете добавить кеширование где это вы можете добавить импликацию для поддержки потенциальных падений и вот этот вот подход он будет в каждой конкретной системе уникального к сожалению ничего не сможете сделать с тем какие условия диктуют вам ваша задача например days вам надо гонять трафик от видеокамеры к серверу и там обратно на систему мониторинга вы от этого pipeline а никуда не уйдете эта база у вас равно танец но вы можете в рамках неё менять различные компоненты и перебор их будет кастомный кейс для каждой конкретной задачи с которой вы столкнетесь спасибо спасибо еще добрый день большое спасибо за доклад мы упомянули что вы пробовали на нескольких системах распределенного ветра включая арт рекорда могли бы вспомнить сколько вам узлов удалось поднять таким способом и вы использовали open source вертеле enterprise по этим большая всюду в тестах которые увидели на слайдах использовался исключительно open source версии они все собственно исходники доступны это все гитхабе лежит ссылки на них напрямую самое быстрое например сейчас можете найти загугли fm идти по робел гид хоп и там на в ридми страницы будут ссылки напрямую на репозитории там где производились эти модели от 5 до 7 узлов моделировали больше мы не пробовали особо иногда встречались проблемы того что например пытаешься это смоделировать 15 узлов на узле разработчика и узел все-таки начинает загибаться и показывать не просто не реалистичное поведение не соответствующее тому что реально происходит при дарственную от узла а начинает показывать совершенно неизвестные незнакомые баги связаны с работой планировщик соответственно безусловно перегружать тот единственный узел которую разработчика есть не надо желательно стремиться к тестированию минимального keys спасибо"
}