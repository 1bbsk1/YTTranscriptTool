{
  "video_id": "vhf5lU1suL0",
  "channel": "HighLoadChannel",
  "title": "Как устроены корутины? / Дмитрий Калугин-Балашов (Exnodes Inc.)",
  "views": 7565,
  "duration": 2597,
  "published": "2019-06-03T09:05:31-07:00",
  "text": "всем привет не одним из зовут сразу расскажу для кого доклад есть 4 категории людей кто поймет этот доклад первое разработчики уж наружных систем я понимаю у нас михайлов но такой полу highload можешь сказать я думаю вас таких много кто поднимите руки кто выскажу сел на отлично а кто никогда не использую крутин и а мог бы а вот это вот уже сто процентов так вот кто из поезда но ничего не понимает и кто не использовал и ничего не понимает с студенты кто я такой а я работал мы а это ещё что такое я долго время работу миру писал поиск попочки ну а потом уехал силиконовую долину и сейчас работаю маленьком стартапе как как и мы занимаемся поиском дефектов на полу практика вопрос then почему я могу говорить про крути на мне во первых просто хочется во вторых я их использую части кучу рабочим теперь самый главный вопрос столько картинок кто знает поднимите руки кто знает что как рутины так теперь так держите держите руки а теперь опустите руки те кто их никогда не использовал кто знает и не использовал теперь опустите те кто вписано питоне я за вами следил нога так сколько человек осталось два наши пишите носить кто еще то есть у нас где-то человека три которые пишут картины насир доклад меня будет для крутин си почему потому что так проще во понять как они работают все умеют читать код носи все в институте учились надеюсь столько и картины для той половины кто не понимает то есть и стоя начинается с собою then по-русски по программы то есть вы смотрите у нас такая схемка ее видно надеюсь я не вижу вы должны да вы видите то есть у нас под программа имеет одну точку входа одну точку выхода точку выхода не смыслил что нас а много ли torn off как бы много . выхода пока подпрограмму зовет мы один из нее вошли и один раз из нее вышли и больше оно не живёт другая сущность этого туретт когда у нас несколько параллельных тредов мы можем из них выходить в середине вы представьте одно ядро 33 да и у нас есть какая-то вытащил которых переключает то есть у нас уже много . выхода и мы возвращаемся но мы это не контролируем крутим это когда мы сами решаем когда мы переключаемся между нашими так сказать трендами это такой водные для тех кто вы не знал зачем они нужны кто знает долота кто использовал поднимите руки зачем вы это использовали елки-палки а на хабре прочитали статью что-то круто да использовали они быстры в каком смысле то есть большинство использовать причин использования той или иной технологии это либо скорость либо память ресурс какие нить вот крутин они быстры что-то знать нет блокировок причем их нет это не телка общей структуры которые еще там не разобрать сходу их нет естественным образом то есть ничего не какой слух науки там нет просто если вы их используйте вы навсегда забыть о блокировках второе ненец или чивается кончик switch и то есть мы не тратим ресурс при переключении как это происходит между потоками не всегда то есть есть варианты когда мы какие-то ресурсы тратим но в любом случае приключение будет быстрее чем потоки и вторая вот очень интересный причин ты леганд ность дело в том что в некоторых случаях к рутинный имеет смысл использовать только потому что программа на них более понятно пример . стоит любой конечный автомат конечно автомат так ситники кто носить ненавидит оператор goto есть такие кто прочитал я использую я использую конечных автоматов я вот видел студентов и учил студентов они делают конечный автомат они делают цикл в цикле дело свечь состояниями при смене они просто меняют состояния и возвращается в цикл вначале свеча и проверяет вот такие фактурные то есть три отступа у них с голоду мы ставим метку и у нас один отступ то есть нас программа сильно проще становится но почему-то все почитай умную статью что-то гоу ту это плохо и не используется то вариантов то есть картина это по сути использование гоу ту в целом есть так в общем случае словах ну или всякий pump line а вот такие вот продюсер консьюмер питер они тоже очень легко уважаться накройте ну вот кто-то используемую вы поняли что тут есть люди кто используют на самом деле есть вот такие вот люди но что нагуглил навскидку то есть что общего это в общем то из мира баз данных то есть там к выйти на максимально приятно легли на отсутствие блокировок базе данных многого стоит знаете в чем на в тайге ги от рогена в том что мы живем в мире вытесняющей многозадачности это значит 99 года примерно мы сидим в винде в linux и mac os free bsd и все такое это все система свистящий многозадачностью последняя система где такой многозадачности не было это но волны т.р. а картина эта сущность изменой кооперативные многозадачности и какой вывод вывод что он нам этот опрос не связать мы должны использовать называется паттерн проектирование костыль то есть картина без костылей не сделать вообще никак то есть нам надо что-то на костыли чтобы сделать картину то есть любой уровень абстракции есть такой термин протекающей абстракции любого меня абстракции он даст нам какой-то вверх этому что-то потеряем и когда мы используем картину должны понять что мы теряем и в чем наша вверх от я вот три штуки выделил то есть изначально было 2 но вот вчера на прогоним и третью нашли первое это стек давай так кто знает как переменные на стыке ложатся поднимите руки вот я сейчас расскажу для тех кто не знает где то половина это такое небольшого а представьте у нас тут супер искусная программка у нас есть локальные переменные есть такая область памяти называется стек и куда он туда ложатся вот эти переменные вот мы от вафли в main вон там у нас полю легли переменной входим функцию а вот у нас на стыке легли переменные вызываем б легли перемены вышли из-за пор запомните вот эту переменную это b1 у меня написано до b1 запомнить эта перемена вот мы вышли и червячки уже бы один не любит она уже не существует мы вышли за область видимости вафли в c и его тэц-1 ложится вот в эту самую ячейку памяти когда у нас картины мы можем выйти из середины функции а это значит b1 еще мог существовать и получил чтобы 1 из 1 они вообще в одной ячейке памяти любят и мы должны как-то это предотвратить как это предотвратить прекращается это таким способом kotaku мы выходим из к рутины мы должны сохранить стек как только мы возвращаемся мы должны этот стек восстановить вот есть второй способ кто знает ну да вы все знаете такой способ ну да коста называется забить просто не использовать всегда и вот зависимости от того какой способ мы выбираем у нас будет либо стек full либо стек ласка рутины вторая проблема планировщик вот как я сказал крути над по сути некоторые голод у между функциями то есть самый такой общий абстракция и вот у нас представьте три картины вот и скажите на а мы прыгаем в рутину б из картину бы он принял каюте ну а оце никогда не вызывается то есть накосячили в планировщике то есть если вот винде там тоже можно принципе кто-то мог накачать планировщики да но это не мы пишем это пишут умные дяди из microsoft а и вроде бы они иногда не кошачьи даже то есть мы об этом не думаем а есть они косячат мы все равно сделать ничего не можем тут эта наша ответственность мы с вами должны как-то планировать задач и поэтому чем отличать планировщик когда мы работаем с картинами и планировщик когда мы например над рядах пишу то есть в над рядах вся навечно планировщик то есть это мы проявить это выставить можем и все и больше мы не управляем накрути нах сами кто знает что такое марсоход какой-то свой дар знаете чем знаменит нет нет он знаменит тем что его создатель накосячили в планировщике и чуть его не потеряли то есть если вы думаете что вы не накачки люди в нас они очень умные люди я думаю примерно то есть такие шумные как мы тут и они накосячили в планировщике и чуть не потеряли - марсоход там грязных ок делали можете почитать так что накосячим очень легко можем следующее если много ядер а дело в том что всякий ложится вот хорошо когда у нас одно ядро у нас нет ни блокировок мы ни о чем не думаем как только много ядер в общем так рутины работаю только в рамках одного ядра между ямами нам нужно честно низации в любом случае на сам параллельность самое настоящее можно также забить он тарантул на одном литре работает не совсем на одном ну вот так кавычках у сказать практически надо можно сделать что-то очень сложное в японию ручка грудь из голлинга который вот раскидывает намного видео и как то еще работает с ними ну то есть что то делать надо ну и теперь так близок близко основной мысли как это вообще работает смотрите есть библиотека лидкора наверное самая такая известная на щит и она самая низкоуровневой по ней легко учиться работать к рутинами у нее не документации у нее есть include ник в котором есть комментарии отлично помогает есть несколько брендов вот опять брендов расскажу сегодня и зависимости от backend он делает к уйти на по разному и это очень удобно понять как это вообще происходит и вот немножко про и 5 я 2 функции покажу вам 2 1 создать картину у нас есть какой-то контекст ну что-то типа pedo не знаю и это какая-то структура зависимости от backend она будет разной то есть я и не указав точно всегда разное и второй это какая-то функция ее аргумент и все и следующее это трансфер переключение с одной крутим в другую и там у нас два параметра как в какой крути нему находимся сейчас то есть она не хранится не где мы сами должны как-то заменит жить и в каком мы переключаемся то есть руками делаем планировщик все руками и вот первый backend кто знает вот эту аббревиатуру сет замку long jump он jump но то как раз до знаете в такой мужам a long jump это типа голод тут только между функциями это как раз вот кто не любит гоу ту вот и самый самый настоящий харкор нокауту можете взять одну функцию прыгну середину другой и вот в контексте есть вот такая штука это это буфер это просто кусок памяти куда мы сохраним стек там никакой науки нету и две функции первое это мы ставим точку куда мы вернемся а вторая функция это мы прыгаем в какую-то точку которую мы заранее поставили смотрите когда мы ставим точку она вот это вот возвращаемое значение into a на нолик вернет а когда мы прыгаем и передадим значения ненулевое и она его тоже вернет вернется в то самое состояние какое было и вернет как это как из этого делать переход между крути нами мы поставили точку перед выходом из картина вы поставили точку где мы выходим и вышли ритуальном если 0 а потом когда хотим вернуться мы возвращаемся с каким-то значением и pdf им работу следующие юко яндекс это примерно то же самое то есть особых различий то нету между первыми двумя там вот есть так это часть почек со там есть вот такая вот структурка позволяет сохранить также контекст и восстановить это то что мы сохранили состоянии вернули состояния когда выходим из крутин сохраняем когда возвращаю и когда нужно вернуться мы возвращаем состоянии вот это интересно это наверное сам большое вращение которое за последний год видел как сделать картины из трендов я не знаю зачем это сделали может это поймёт мне расскажет эту я не понял гуглил искал но это интересно смотрите в контексте есть ты дойди есть кондишен wearable есть один глобальный мьютекс у нас нашу программу и переход выглядит так мы шлём сигнал в какую-то другую ну какой другой поток на такой дешевый рыбу и этот поток у цепляем каким-то выглядеть так у нас есть мьютекс вот это мьютекс есть куча потоков и все они спят на этом youtube кроме одного в этот поток мы называем к утиной и все остальные . выйти на только не спят уйти навсегда 1 выполняется мы хотим сделать переход мы шлём сигнал вот этому потоку он пытается проснуться но первый поток еще держит блокировку потом первый поток отпускает блокировку и засыпает и тут же просыпается 2 им его так переключили крутит то есть выгоды практически как я понял никакой она работает пока рутины получается а вот это вот для тех для таких можно сказать и ясный боевой вариант который быстро работают на chimbly вот это поднимите руки кто себя узнал кто знает о чем black но если вы будете молчать и могу получить любую чуждо тарифам молчите так синтаксиса чем немножко разный бывает я буду использовать этот газ овский гнусный то есть когда мы переносим значения мув а.б. вот в эту сторону будем произносить то есть еще другой что чисто там в обратную переносится и для разных процентов это разные наборы инструкций по переключению крутин в общем они такие чего-то не вижу вот мы сохраняем все состояние в стек какое хотим просто запихиваем стек там уже читали уфе там еще напихали после этого знаете что кай спсп это регистры процессора где хранится указатель на вершину стека и мы его тоже куда сохраняем то есть но сохраняем в одно место и восстанавливаем то есть мы просто меняем адрес стеков сохранили старый получили новый звук рутины потом мы достаем оттуда данные и последний этот торт то есть мы достаем адрес возврата и возвращаемся потому что адрес возврата надо новый известного стыка достать вот и все то есть сохранили перекрыв и поменяли стек достали быстрее некуда никаких кончик свечей никаких хождений в ядро вообще ничего нету то есть работает быстро не почти процессы и я вот не знаем поправить и по моему втором туре по дорогам написали вот кусочка из сайты из 86 ну и последнее кто под винду пишет вы счастливые люди еще есть счастливые люди я не знаю как в другом потому что подвину пытался писать у меня не получилось мозгов не хватило вот в этом просто в день я просто все уже готово вот там уже просто есть файбер и который делать то что делать крутит или pcaro просто делает как бы прослоечка протекающей абстракцию вот как выбрать backend помним документации нету то есть ничего нас нету и на как-то выбрать как думаете то есть что выберите монетку попросит сработает не всегда кто работать будет вот так сказать правильное слово я так выбирая а если винда ту все понятно с конца начинаем если не винда пробуем assembled в общем то самый быстрый сколько ни пытался быстрее нету далее а дальше от остается три варианта понятно что тот еды в самом концу будут и осталась и you contex и тут такая хитрость вон вам бы та часть стандарта языка сил и анапе в общем то переносим а а ю контакта часть почек с причем уже его выпилили то есть он как бы есть но быть уже не должен поэтому порядок такой я лично моя рекомендация то есть сперва пробуем он вам потом big яндекс не повторятся то есть вот просто ничего не работают уже давайте попросим кто ничего не понял вообще кто чуть-чуть понял раз-два-три например для вас есть смотри нет серьезно это это все теория то есть работой с юкосу ложным правда сложно много мозги парить еслиб task lip тоска это для людей не для тех кто там с картинки про землю это для людей у него планировщики с короткими ним не думаем вообще забываем у него есть функция работы с файлами и сокетами вообще любой вот вывод для к выйти на то боль потому что мы не можем поспать пока на читаешь приличный любой поток мы должны строить какую-то sync раньше но мы должны строить какой не блокирующие сокеты что угодно вы только и contex пока работает посмотрите мы подключаем у нас получается вот какой такому главная функция и мы сделаем прокси-сервер давайте вот тут вот мы создаем socket и вот тут мы начинаем принимать него соединение как только если единение мы создаем новую картину они таскали называются и таковы тины смотрите что тут вот в этой картине мы делаем соединение куда нам нужно куда мы будем проектировать и создаем еще две картины смотрите что у них параметры них параметров такие вот папайю socket дескрипторов с одной стороны то есть пара это просто мы получаем два параметра отделом из них 1 и видите то есть то есть в одну сторону канал будет и в другую сторону канал будет и создаем 2 2 одинаковых паутиной дабл дабл ю не вижу что там написано прочитайте сами вот а тут работа такая прочитали если не 0 записали так как две картины того обе стороны будет работать все все написали понятно остались еще кто ничего не понял все поняли точно и я допускаю если люди которые так стесняются сказать вот я один не понял вообще понимают и кто то как в те игры знаете да все боятся быть одним не понявшим для таких случаев я тут нахожусь два дня ну вот этот конец следующий подойдите и спросите если вы стесняетесь в lip тайски можно сделать так можно наставить точки где мы переключаем картины то есть не обязательно эта функция ввода вывода вот эти вот можем просто случайных точек на ставить елками и когда мы будем и они будут просто переключаться свои средства образом в этих точках планировщик создан за нас вот это по поводу степ full то есть секс фото головная боль над сохранить так можно ли без т.к. без т.к. можно как это сделать кто знает как делается без т как рутины никто не знает давайте расскажу есть такие вот про этот раз кто не видел нет кто не видел будет интересно смотрите поищу нас к рутины это просто функция и у функции есть параметр с какой строки начать ее выполнять то есть мы передаем функцию параметры с какой строке у выполняйте до конца и там делаем вот такой switch по этой строке и если 0 передаем то выполняем сначала есть функции закончил выполнение то то возвращаем 0 а в серединке вот такие конструкции я вам такую строчку и случае чем мы на это место вернемся понятно как сделали то есть мы можем исполнить функцию до какой-то строки как только мы сделали top у нас сохранится номер строки последний если мы заново эту функцию вызовем то мы вернемся в ту самую строчку mustek мы потеряем потому что это уже будет другой вызов из т.к. у нас нет здесь то есть как бы мы его потеряли который трон вызвали поэтому to stay close вот так выглядит эта т.д. кто знает что такое макросы кто не знаешь такой макрос и есть есть один человек отлично уверенность побольше смотрите выводом пользоваться умейте войтов вот знаете вот control of и там есть функция замена то есть можете одним текст на другой заменить очень плюс это макрос называется и все это же они на это не глядя на синтаксис просто замена тупая у нас define первое это кто заменяем а второе то нужно что меняем это прогоняйте перед началом всего просто замен делать вот так про то 3d работают на макросах то есть есть вот такая структуру как это наш дескриптор протат этого к утиным и при не цивилизации он внизу он вот эта функция эта цифра к элси она в нолик делать целый сет как раз номер строчки с какой мы будем исполнять то есть мы исполняем с нулевой точки вниз идем по возрастанию а когда мы завершается на hand мы ее опять я за 0-ем что в следующий вызов а нас опять сначала началось но если нам потребуется и вот два года слева это как его персона про тату рядах справа что получается в итоге то есть просто как мы применим вот эти замены смотрите ну это понятно и заголовки одинаковые когда мы здесь начал у нас мы начинаем наш switch мы начинаем проверять то есть искать номер строчка вот эта вот штука это если у нас условие вон там внизу слове есть я не помню какая танцев к отсюда не вижу нам какое-то условие и посмотрю вот если вот тот аккаунта равен тысяч мы ждем пока аккаунта будет равен 1000 как это работает и работа так мы выставляем номер строчке мы делаем вот этими точку куда мы вернемся после этого проверяем условия место не выполнилось мы из этой картины выйдем то есть мы переключили задач у нас где-то снаружи планировщик мы его написали и на просто выходим из картины там что-то делом потом когда-то в ней вернемся вернулись сразу попали на эту линию снова проверили условиях не выполнилось опять ушли что-то сделали в других рубинов вернулись условие выполнил после дальше а дальше нас там выход ну и на выходе мы выходим соответственно вот вопрос стыка у нас нету как нам жить как нам жить без т.к. ни разу придавать что в аргументах а как мы будем их запомним глобальными переменными сделаем муж просто глобальной переменной n цена создавать ну близко очень близко смотрите вот у нас вот эта штука есть давайте представим что мы не все все плюс плющ и что изменится что можем сделать есть мы все + ключ ну уж наследника сделать наследовать класс и добавить сюда переменных и соответственно и и там уже как нужно вызывать этих времен сложность точно придется конечно вот это вот писать в аргументах что у нас вот pt стрелочкой какая-то переменная но это будет такой на лак стек а то есть четким и какой контекст держать можем и это явно быстрее чем переключать контекст и сохранять загружать из он всегда в одном месте лежит на вопрос трогаем нужный момент и соответственно все вопросы по про тату и одном и по всем остальным есть какие-то остались так это все у меня бы не можешь быстрее получилось давайте тогда целиком какие вопросы отвечу какие есть поднимите руки кто ничего не понял раз-два-три хорошие процентов 10 до получается подойдите ко мне с вопросами и стесняйтесь а задача давайте сейчас есть писать подойдите я не хочу чтобы ушли ничего не поняв сейчас не хочу давайте работает классно мне тоже спасибо конечно на самом деле много чего интересного было библиотеки это и не использовал но как они относятся собственно говоря к самому стеку когда я внутри функции могу скажем так айти и чуть глубже от вы залог вызова при переключениях между коряки нами мне еще дополнительный степ понадобятся может такое быть и это ты вот-вот вашей библиотеке эту ситуацию по моему никак не разруливают по-моему это одна из причин почему к рутин до сих пор все нету есть neonode я не очень понимаю ситуацию если мы у нас есть дополнительный стек и мы переходим то мы переходим из этой функция стой функций которую сверху нарастила мы вернулись обратно в ту функцию у которой состоянии сохранена а ну а ей понадобился дополнительные стыка она за 3 данные а как же дополнительный стык в стык известен на момент начала функции стек это не куча и все то есть нас есть объявленной переменные если мы вот вернемся в стандарт языка си 8 9 года там мы еще обязаны были объявлять самом начале потом это передвинули в конечно это просто сахар фактически они на самом деле в начале объявлены и мы заранее знаем где они она не может внезапно появиться там по тарелке это вложенные условия она их со мной макете заранее она и ан 2 1 0 момент компиляции известно еще то есть то что всякий молоке прочитай не стек нет ну например если у меня есть внутри их там сколку переменной меньше все она выделена за написанного выделиться рано у вас просто не будут области видимости а переменной будет хорошо может оптимизировать немного но все равно будет заранее степени двигать спасибо за доклад я понял почему плюс авики полюбили кошечку после вот этого доклада и на самом деле вопрос а я вот там пишу ножами на шар паха есть какие-то цифры как намотка рутину быстрее чем обычные потоки там switch контекстом память насколько мы выиграем если мы все это там на самом деле напишем или да нету это очень зато независимо от задачи вашего потоки реальные примеры когда вот мы написали к ручью мы выиграли там я не знаю lab 2 просо зона игра знаете должно быть но не в голове это смотреть надо вот подойдите учит даже завтра из подаете камни поищу потому что мы меняли одну программу ли но на кровати на и меня были данные надо погуглить и на поискать в себя пришел по себе он там так завтра пример примерно спасибо за кладбище раз у меня вопрос такой если меня есть сервера с большим количеством я тира я могу там стать потоков забанить на ядро то есть изолировать ядра то есть там убрать все прерываний с я тёр зачем я тогда вообще к рутины нужны какую задачу решать ну вообще например обработка интенсивного трафика на пирсе стеллу начиная трафика ты супер если вас хватает железа знаете такой универсальный ответ есть пытаюсь были замашки вообще хоть на бычки писать 1 или 2 ч а потом будет вопрос 1 1000 или 2000 там немножко другие деньги получится то есть это вопрос еще и получается вот есть правильно понял а зачем писать эффективной программы если можно железо купить такой глобально есть единого мнения . нет у меня вот начальник считает что учетом купить сервер и зачем тысяч долларов чем написать там не не вопрос получается что например есть ли планировщик там плохо ну как бы переключать контекста лучше да там при ограниченности в я бородатом использовать крутин и это да ну принц планировщик до который у нас с операционки он хорошо переключать ну как мы тратимся на переключение контекста он переключает достаточно эффективно то есть на нем собаку люди съели написали проблема в том что он и велия имеет вероятностью природу когда мы знаем точное то есть невероятность на точно что у нас происходит мы все равно сделаем быстрее то есть мы знаем что тут мы отсюда до сюда мы будем писать файл в случае с потоком это мьютекс поставим им как-то хитрить потому что муж случайно переключиться кого пишем файл случае скауте мы просто не переключим пока мы файл не запишем вот наша запись то есть как только у нас терять вероятностная природа мы выигрываем поэтому то есть в этом-то и выгода вся спасибо самом деле очень хотелось ответить вот красно ваш вопрос относитесь к рутинном как никому тоже синтаксическому сахару они не для этого потоки и к рутины все-таки совсем разные вещи спасибо за доклад вы сейчас когда показывали последнюю библиотеку вы предлагали отказаться от стыка заменив его на кусок динамической памяти она вовы стеком то есть это не обязательно демотическое да да то есть этот кусок динамической памятью любом случае ну да вот и вы говорите что это будет быстрее но ведь работать динамической памятью медленнее чем со стеком в каких случаях это будет быстрее смотрите мы выделили и забыли то есть как это быстрее потому что при переключении крутин мы каждый раз сохраняем стояк и каждый раз его копируем обратно зубы картины то есть нас два копирования стык может быть большой тут мы и создали и забыли передаём его на карантин только указатель то есть тут нет копию не вот этой всей этой массы поэтому этой выгоднее это необязательно она находится в динамической памяти то можно хадиса на стейки надо быть либо в глобальный либо у нас тут вот функция main есть мы там она гинер или вот этой штуки и запустили под ни крути ну то есть она может быть на стыке функции main спокойно поэтому учителя чем здесь я из мира gm и грубо говоря то есть у нас это потоки да у нас это какая-то синхронизация между потоками когда мы разделяем какие-то ресурсы да здесь начинаются проблемы для блоков не до блоков в случае к рутины в случае какого-то и о да именно синхронных каких-то операций здесь это как это совсем противопоказано никак вот здесь случае а ей случае рискованных операций два разных ответа будет отлично да случае синхронных операций я бы сказал это противопоказано то есть мы ну если мы стали чем chrome на операцию по току нас заснет ум умный планировщик нам переключат есть мы стальные синхронно певицу в кровати не мы встали и ждем потому что переключить никому нас нет никакой параллельной сущности мы встали и в team поэтому надо делать асинхронную то есть мы запросили чтение приключились куда то что там сделали вернулись по поводу его в целом если человек то есть понимает что он делает то есть не по статьям на хопре тому же нужно обновил слышит то на картинах любая певцы без блокировок то есть мы взяли открыли что-то ну обычно блокировать надо запись то есть мы не будем брать стать блокировку чтение пока вот мы начали запись и все что нам требуется не передавать управление пока мы эту запись не закончили или перед не придавать правление тому кто может делать эту запись то есть - кому-то другом передать в случае с многопоточной то есть у нас будет мьютекс у нас бутуз там снаружи решать передать не передать мы представим две картины то есть мы начали запись 1 2 тона записывать но не передаем ее управление все ладно спасибо да ладно все что-ли спасибо за вот это вот все за доклад было очень интересно правда под местами понятно даже до вопрос следующих кажется не совсем ясно осталось как жить вот с библиотеками для картин которые без планировщика из коробки скажем так и тут я правильно понимаю что история в том что но типа без планировщика это вообще никто не варят если библиотека не дает планировки и предполагает что я удобную планировку до начала скажу создаете большую очередь связанный список кольцевой и просто переключайте подряд вот вам планировщик хотите поумнее сделайте нам какой то проявите это ещё ничего не будь то есть все можно сделать но это это не сложно в общем то есть сделайте из просто циклически для начала не по уйти то есть захотите пойти это сделать вам две очереди три что угодно вас там на немного попробовать особенно в контексте задача очень часто учатся интересно как заводить может планировщик который вам позволит быстрее работать а соответственно примеры вот сначала докладывал был исключительно суточные здоровые люди вот так вот ну не делаю да где нужно прыгнуть только в ту каротина если про это я забыл его нигде в коде не указал то большему не и мы в нее никогда не придем это нешуточный пример это регулярно люди-то косячить марсоход суточный пример по вашему там нет никого у тины были на там что-то похожее и там они исправить этом накосячили никакой низкий приоритет не мог выполнить пока если есть потоки с большим править этом большим править этому ждали исполнение низко вылезать на них завязаны никогда не дожидались представьтесь там у них со связь какие-то проблемы были осина когда к рутины использовали вы как многопоточное приложение берете один поток или сразу описали с картинами а нет я делать про многопоточное а потом я его учил как рутинно крути на худом а как вообще вот это все тестируете ну то есть это отдельный какой-то то есть то есть вся вот эта асинхронность вот это переключение между крути нами то есть здесь игру говоря вот написали хорошо вроде по логике работает как убедиться что да матерится можно можем их production нас три человека в компании мастеров нет мы на живом отложил ну на самом деле просто уйдем пока упадет ну это такая нас специфика специфика у нас оффлайн продукт мы сканируем пластины на дефектов ну пола увидели починили и запустили заново прототип to start up live называется еще еще еще у меня еще вопрос давайте давайте россии и никто не сдает то есть там был слайде где была тарантул дата брикс что то еще что то ну а дата брикс я знаю кассандру вон way to the stars а до тасс так вот то есть это применительно к сандре какие-то к рутины или это какой-то у них другой продукт где это за используем у них чего не вот дата strax который я контакт я искал просто кто из польского и темно гуглил и почитал byfly так это все дело нато strax они в своем что-то сверху накрутили для своей кассандры ну где-то снаружи как именно они очень вникал но они-то мы писали статейку что вот используют крути на узнать как сайт делать сок на публику контру секунд рука готова все еще так все дмитрий скажите пожалуйста какой вопрос вам понравился больше всего который вам запомнился google на самом деле хороший вопрос был моим у вас один из ваших 1 причем он не на благие вопрос задавать это по поводу забыл по поводу переменных на стойки под и fame это важно мне все студенток путаются спасибо peach"
}